;sugar.define("sugar:utils/undo-manager.ts",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UndoManager=void 0;var n=e("sugar:node_modules/tslib/tslib.js"),r=e("sugar:node_modules/mobx-state-tree/dist/mobx-state-tree.js"),o=r.createActionTrackingMiddleware2({filter:function(e){return e.env?!1:!0},onStart:function(e){var t=r.recordPatches(e.tree,function(t,n,o){return!!o&&r.isActionContextThisOrChildOf(o,e.id)});t.resume(),e.env={recorder:t}},onFinish:function(e,t){var n=e.env.recorder;e.env=void 0,n.stop(),void 0!==t&&n.undo()}}),i=r.types.model("UndoManagerEntry",{patches:r.types.frozen(),inversePatches:r.types.frozen()}),s=r.types.model("UndoManager",{history:r.types.array(i),undoIdx:0}).views(function(e){return{get undoLevels(){return e.undoIdx},get redoLevels(){return e.history.length-e.undoIdx},get canUndo(){return this.undoLevels>0},get canRedo(){return this.redoLevels>0}}}).actions(function(e){var t,i=/\./,s=0,a=[],c=r.createActionTrackingMiddleware2({filter:function(t){return t.env?!1:t.context===e?!1:!0},onStart:function(e){var t=r.recordPatches(e.tree,function(t,n,o){return s?!1:!!o&&r.isActionContextThisOrChildOf(o,e.id)});t.resume(),e.env={recorder:t}},onFinish:function(t,n){var r=t.env.recorder;if(t.env=void 0,r.stop(),void 0===n)if(a.length>0){var o=a[a.length-1];o.patches=o.patches.concat(r.patches),o.inversePatches=o.inversePatches.concat(r.inversePatches)}else e.addUndoState(r);else r.undo()}}),u=function(e){s++;try{return e()}finally{s--}};return{setFilter:function(e){i=e},addUndoState:function(t){this.withoutUndo(function(){if(0!==t.patches.length){var n=t.patches.filter(function(e){return i.test(e.path)}),o=t.inversePatches.filter(function(e){return i.test(e.path)});if(0!==n.length){e.history.splice(e.undoIdx),e.history.push({patches:t.patches,inversePatches:o});var s=r.getEnv(e).maxHistoryLength||1/0;e.history.splice(0,e.history.length-s),e.undoIdx=e.history.length}}})},afterCreate:function(){var n=r.getRoot(e);if(t=r.getEnv(e).targetStore||n,t===e)throw new Error("UndoManager should be created as part of a tree, or with `targetStore` in it's environment");r.addDisposer(e,r.addMiddleware(t,c,!1))},undo:r.decorate(o,function(){u(function(){if(!e.canUndo)throw new Error("undo not possible, nothing to undo");r.applyPatch(r.getRoot(t),e.history[e.undoIdx-1].inversePatches.slice().reverse()),e.undoIdx--})}),redo:r.decorate(o,function(){u(function(){if(!e.canRedo)throw new Error("redo not possible, nothing to redo");r.applyPatch(r.getRoot(t),e.history[e.undoIdx].patches),e.undoIdx++})}),withoutUndo:function(e){return u(e)},withoutUndoFlow:function(e){return r.flow(function(){return n.__generator(this,function(t){switch(t.label){case 0:s++,t.label=1;case 1:return t.trys.push([1,,3,4]),[5,n.__values(e())];case 2:return[2,t.sent()];case 3:return s--,[7];case 4:return[2]}})})},startGroup:function(e){if(a.length>=1)throw new Error("a previous startGroup is still running, did you forget to call stopGroup?");return a.push({patches:[],inversePatches:[]}),e()},stopGroup:function(){var e=a.pop();if(!e)throw new Error("each call to stopGroup requires a previous call to startGroup, did you forget to call startGroup?");this.addUndoState(e)},clear:r.decorate(o,function(){u(function(){e.history.clear(),e.undoIdx=0})}),clearUndo:r.decorate(o,function(){u(function(){e.history.splice(0,e.undoLevels),e.undoIdx=0})}),clearRedo:r.decorate(o,function(){u(function(){e.history.splice(e.undoIdx,e.redoLevels)})})}});t.UndoManager=s});
;sugar.define("sugar:utils/storage.ts",function(e,t){"use strict";function r(e,t){n&&(t=JSON.stringify(t),localStorage.setItem(e,t))}function a(e,t){if(!n)return t;var r=localStorage.getItem(e);if(null===r)return t;try{r=r?JSON.parse(r):null}catch(a){}return null===r?t:r}function o(e){return n?localStorage.removeItem(e):void 0}function l(){n&&localStorage.clear()}Object.defineProperty(t,"__esModule",{value:!0}),t.clear=t.remove=t.get=t.put=void 0;var n=!1;try{var u=localStorage?!0:!1;n=u}catch(c){}t.put=r,t.get=a,t.remove=o,t.clear=l});
;sugar.define("sugar:utils/i18n.ts",function(r,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.translate=n.lang=void 0;var e=r("sugar:node_modules/amis/lib/index.js"),a=r("sugar:utils/storage.ts");n.default=function(r){if(!r||"string"!=typeof r)return r;var n=o(r)||r,e=n.values,a=n.key,u=window.translation;if(!u)return r.replace(/[「」]/g,"");var l=window.translation[a]||r;return l=l.replace(/「%%([0-9]+?)%%」/g,function(r,n){return e[parseInt(n)]})||r,l===r&&(l=t(l,[":",",","||",".","。","，",";","；"]),l=i(l,["\\(,\\)","（,）","\\{,\\}","「,」","\\[,\\]","<,>"])),l.replace(/[「」]/g,"")},n.lang="en"===a.get("language")?"en-US":"zh-CN",n.translate=e.makeTranslator(n.lang);var t=function(r,n){var e=r;return n.forEach(function(r){var n=e.split(r);n=n.map(function(r){return window.translation[r]||r}),e=n.join(r)}),e},i=function(r,n){var e=r;return n.forEach(function(r){var n=r.split(",")[0],a=r.split(",")[1],t=n.replace(/\\/g,""),i=a.replace(/\\/g,""),o=[{reg:"^([^"+a+n+"]+?)"+n,r:t},{reg:a+"([^"+a+n+"]+?)"+n,l:i,r:t},{reg:n+"([^"+a+n+"]+?)"+a,l:t,r:i},{reg:a+"([^"+a+n+"]+?)$",l:i}];o.forEach(function(r){var n=r.reg,a=r.l,t=void 0===a?"":a,i=r.r,o=void 0===i?"":i;e=e.replace(new RegExp(n,"g"),function(r,n){var e=window.translation[n]||window.translation[n.trim()]||n;return t+e+o})})}),e},o=function(r){var n=0,e=[],a=r.replace(/「([\s\S]+?)」/g,function(r,a){return a=window.translation[a]||a,e.push("「"+a+"」"),"「%%"+n++ +"%%」"});return{values:e,key:a}}});
;sugar.define("sugar:utils/errors.ts",function(r,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CommonError=t.AuthorizeError=t.SessionExpiredError=t.CSRFError=t.ValidationError=t.NotFoundError=void 0;var o=r("sugar:node_modules/tslib/tslib.js"),n=function(r){function t(t,o){var n=r.call(this,t)||this;return n.type="NotFoundError",n.data=o,n}return o.__extends(t,r),t}(Error);t.NotFoundError=n;var e=function(r){function t(t,o){var n=r.call(this,t)||this;return n.type="ValidationError",n.data=o,n}return o.__extends(t,r),t}(Error);t.ValidationError=e;var i=function(r){function t(t,o){var n=r.call(this,t)||this;return n.type="CSRFError",n.data=o,n}return o.__extends(t,r),t}(Error);t.CSRFError=i;var a=function(r){function t(t,o){var n=r.call(this,t)||this;return n.type="SessionExpiredError",n.data=o,n}return o.__extends(t,r),t}(Error);t.SessionExpiredError=a;var u=function(r){function t(t,o){var n=r.call(this,t)||this;return n.type="AuthorizeError",n.data=o,n}return o.__extends(t,r),t}(Error);t.AuthorizeError=u;var s=function(r){function t(t,o){var n=r.call(this,t)||this;return n.type="CommonError",n.data=o,n}return o.__extends(t,r),t}(Error);t.CommonError=s});
;sugar.define("sugar:utils/sugar-domain.ts",function(n,r){"use strict";function t(n,r){var t=(65535&n)+(65535&r),e=(n>>16)+(r>>16)+(t>>16);return e<<16|65535&t}function e(n,r){return n<<r|n>>>32-r}function u(n,r,u,o,c,f){return t(e(t(t(r,n),t(o,f)),c),u)}function o(n,r,t,e,o,c,f){return u(r&t|~r&e,n,r,o,c,f)}function c(n,r,t,e,o,c,f){return u(r&e|t&~e,n,r,o,c,f)}function f(n,r,t,e,o,c,f){return u(r^t^e,n,r,o,c,f)}function i(n,r,t,e,o,c,f){return u(t^(r|~e),n,r,o,c,f)}function a(n,r){n[r>>5]|=128<<r%32,n[(r+64>>>9<<4)+14]=r;var e,u,a,h,d,g=1732584193,l=-271733879,v=-1732584194,s=271733878;for(e=0;e<n.length;e+=16)u=g,a=l,h=v,d=s,g=o(g,l,v,s,n[e],7,-680876936),s=o(s,g,l,v,n[e+1],12,-389564586),v=o(v,s,g,l,n[e+2],17,606105819),l=o(l,v,s,g,n[e+3],22,-1044525330),g=o(g,l,v,s,n[e+4],7,-176418897),s=o(s,g,l,v,n[e+5],12,1200080426),v=o(v,s,g,l,n[e+6],17,-1473231341),l=o(l,v,s,g,n[e+7],22,-45705983),g=o(g,l,v,s,n[e+8],7,1770035416),s=o(s,g,l,v,n[e+9],12,-1958414417),v=o(v,s,g,l,n[e+10],17,-42063),l=o(l,v,s,g,n[e+11],22,-1990404162),g=o(g,l,v,s,n[e+12],7,1804603682),s=o(s,g,l,v,n[e+13],12,-40341101),v=o(v,s,g,l,n[e+14],17,-1502002290),l=o(l,v,s,g,n[e+15],22,1236535329),g=c(g,l,v,s,n[e+1],5,-165796510),s=c(s,g,l,v,n[e+6],9,-1069501632),v=c(v,s,g,l,n[e+11],14,643717713),l=c(l,v,s,g,n[e],20,-373897302),g=c(g,l,v,s,n[e+5],5,-701558691),s=c(s,g,l,v,n[e+10],9,38016083),v=c(v,s,g,l,n[e+15],14,-660478335),l=c(l,v,s,g,n[e+4],20,-405537848),g=c(g,l,v,s,n[e+9],5,568446438),s=c(s,g,l,v,n[e+14],9,-1019803690),v=c(v,s,g,l,n[e+3],14,-187363961),l=c(l,v,s,g,n[e+8],20,1163531501),g=c(g,l,v,s,n[e+13],5,-1444681467),s=c(s,g,l,v,n[e+2],9,-51403784),v=c(v,s,g,l,n[e+7],14,1735328473),l=c(l,v,s,g,n[e+12],20,-1926607734),g=f(g,l,v,s,n[e+5],4,-378558),s=f(s,g,l,v,n[e+8],11,-2022574463),v=f(v,s,g,l,n[e+11],16,1839030562),l=f(l,v,s,g,n[e+14],23,-35309556),g=f(g,l,v,s,n[e+1],4,-1530992060),s=f(s,g,l,v,n[e+4],11,1272893353),v=f(v,s,g,l,n[e+7],16,-155497632),l=f(l,v,s,g,n[e+10],23,-1094730640),g=f(g,l,v,s,n[e+13],4,681279174),s=f(s,g,l,v,n[e],11,-358537222),v=f(v,s,g,l,n[e+3],16,-722521979),l=f(l,v,s,g,n[e+6],23,76029189),g=f(g,l,v,s,n[e+9],4,-640364487),s=f(s,g,l,v,n[e+12],11,-421815835),v=f(v,s,g,l,n[e+15],16,530742520),l=f(l,v,s,g,n[e+2],23,-995338651),g=i(g,l,v,s,n[e],6,-198630844),s=i(s,g,l,v,n[e+7],10,1126891415),v=i(v,s,g,l,n[e+14],15,-1416354905),l=i(l,v,s,g,n[e+5],21,-57434055),g=i(g,l,v,s,n[e+12],6,1700485571),s=i(s,g,l,v,n[e+3],10,-1894986606),v=i(v,s,g,l,n[e+10],15,-1051523),l=i(l,v,s,g,n[e+1],21,-2054922799),g=i(g,l,v,s,n[e+8],6,1873313359),s=i(s,g,l,v,n[e+15],10,-30611744),v=i(v,s,g,l,n[e+6],15,-1560198380),l=i(l,v,s,g,n[e+13],21,1309151649),g=i(g,l,v,s,n[e+4],6,-145523070),s=i(s,g,l,v,n[e+11],10,-1120210379),v=i(v,s,g,l,n[e+2],15,718787259),l=i(l,v,s,g,n[e+9],21,-343485551),g=t(g,u),l=t(l,a),v=t(v,h),s=t(s,d);return[g,l,v,s]}function h(n){var r,t="",e=32*n.length;for(r=0;e>r;r+=8)t+=String.fromCharCode(n[r>>5]>>>r%32&255);return t}function d(n){var r,t=[];for(t[(n.length>>2)-1]=void 0,r=0;r<t.length;r+=1)t[r]=0;var e=8*n.length;for(r=0;e>r;r+=8)t[r>>5]|=(255&n.charCodeAt(r/8))<<r%32;return t}function g(n){return h(a(d(n),8*n.length))}function l(n,r){var t,e,u=d(n),o=[],c=[];for(o[15]=c[15]=void 0,u.length>16&&(u=a(u,8*n.length)),t=0;16>t;t+=1)o[t]=909522486^u[t],c[t]=1549556828^u[t];return e=a(o.concat(d(r)),512+8*r.length),h(a(c.concat(e),640))}function v(n){var r,t,e="0123456789abcdef",u="";for(t=0;t<n.length;t+=1)r=n.charCodeAt(t),u+=e.charAt(r>>>4&15)+e.charAt(15&r);return u}function s(n){return unescape(encodeURIComponent(n))}function m(n){return g(s(n))}function C(n){return v(m(n))}function A(n,r){return l(s(n),s(r))}function p(n,r){return v(A(n,r))}function b(n,r,t){return r?t?A(r,n):p(r,n):t?m(n):C(n)}Object.defineProperty(r,"__esModule",{value:!0}),r.md5=void 0,r.md5=b});
;sugar.define("sugar:widgets/error.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.expiredAlert=void 0;var a=e("sugar:node_modules/tslib/tslib.js"),r=e("sugar:utils/i18n.ts"),n=e("sugar:node_modules/react/index.js"),s=e("sugar:node_modules/react-router/lib/index.js"),l=e("sugar:node_modules/amis/lib/index.js"),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.render=function(){var e=this.props,t=e.region,a=e.msg,r=e.content,l=e.suffix,i=e.links;return n.createElement("div",{className:t?"wrapper":"container w-xxl w-auto-xs"},n.createElement("div",{className:"text--center"},t?n.createElement("h3",{className:"text-danger m-t"},n.createElement("i",{className:"fa fa-exclamation-triangle m-r-sm"}),a):n.createElement("h4",{className:"text-danger m-t-lg"},n.createElement("i",{className:"fa fa-exclamation-triangle m-r-sm"}),a),r),l,i&&i.length?n.createElement("div",{className:"list-group auto m-b-sm m-t-lg"},i.map(function(e,t){return n.createElement(s.Link,{to:e.to,className:"list-group-item",key:t},n.createElement("i",{className:"fa fa-chevron-right text-muted"}),n.createElement("i",{className:"fa fa-fw fa-mail-forward m-r-xs"}),e.label)})):null)},t.displayName="ErrorSection",t.defaultProps={region:!1,content:null,suffix:null},t}(n.PureComponent);t.default=i,t.expiredAlert=function(){return l.alert('<div style="margin-bottom: 20px">\n        '+r.default("如果当前页面操作后尚未保存数据，请不要关闭或刷新当前页面，在其他窗口登录成功后再回到当前页面操作或保存")+'\n    </div>\n    <a href="/login" target="_blank" class="text-info">去登录</a>',r.default("登录过期"))}});
;sugar.define("sugar:utils/fetch.ts",function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.remove=e.patch=e.put=e.post=e.get=void 0;var a=t("sugar:utils/i18n.ts"),r=t("sugar:node_modules/axios/index.js"),s=t("sugar:utils/errors.ts"),o=t("sugar:utils/sugar-domain.ts"),n=t("sugar:utils/storage.ts"),i=t("sugar:widgets/error.tsx"),u="csrf-token",d=o.md5(location.hostname),f=decodeURIComponent("%E5%9F%9F%E5%90%8D%E5%92%8CLheiheiheinse%E4%B8%AD%E4%B8%8D%E5%AF%B9%E5%BA%94%EF%BC%8C%E5%A6%82%E6%9E%9C%E4%BD%BF%E7%94%A8%E4%BA%86Ntututux%E4%BB%A3%E7%90%86%E8%BD%AC%E5%8F%91%EF%BC%8C%E8%AF%B7%E6%9F%A5%E7%9C%8B%E7%A7%81%E6%9C%89%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3".replace("heiheihei","ice").replace("tututu","gin")),h=function(t){if(!t.data)throw new Error(a.default("未返回数据"));return t.data.hasOwnProperty("status")&&0===t.data.status?t.headers&&t.headers[u+"-server"]&&window.sugarConfig&&"saas"!==window.sugarConfig.deployType&&d!==t.headers[u+"-server"]?g(new Error(f)):t.data:g(t)},g=function(t){if(r.default.isCancel(t))throw t;if(t instanceof Error)throw/^Network Error/i.test(t.message)?t.message=a.default("「"+t.message+"」：一般是查询太慢或数据太大"):/Request failed with status code/i.test(t.message)&&t.response&&t.response.headers&&t.response.headers["x-request-id"]&&(t.message=a.default("请求错误")+", id:"+t.response.headers["x-request-id"]),t;if(t.data&&302===t.data.status){if(!n.get("loginExpired")){n.put("loginExpired",!0);var e=/\/(edit)\//.test(window.location.pathname);e?(i.expiredAlert(),setTimeout(function(){window.open("/login","_blank")},1500)):setTimeout(function(){window.location.href="/login?url="+encodeURIComponent(window.location.pathname+window.location.search)},1500)}throw new s.SessionExpiredError(t.data.msg||a.default("登录已失效，请重新登录！"),t.data)}if(404===t.status||t.data&&404===t.data.status)throw new s.NotFoundError(t.data&&t.data.msg||"404",t.data);if(422===t.status||t.data&&422===t.data.status)throw new s.ValidationError(t.data&&t.data.msg||a.default("验证失败"),t.data);if(401===t.status||t.data&&401===t.data.status)throw new s.AuthorizeError(t.data&&t.data.msg||a.default("未经授权"),t.data);if(498===t.status||t.data&&498===t.data.status)throw new s.CSRFError(t.data&&t.data.msg||a.default("会话已经失效,请刷新页面"),t.data);var o=t.statusText||"Unknown error";"string"==typeof t.data?o=t.data:t.data&&t.data.msg?o=t.data.msg:t.data&&0!==t.data.status&&(o=a.default("返回数据中没有status或status不为0")),/getaddrinfo/i.test(o)&&(/smartbns/i.test(o)||/\.serv/i.test(o))&&window.sugarConfig&&"private"===window.sugarConfig.deployType&&(o+=" 数据源Host不支持BNS，请使用ip");var u=new s.CommonError(o,t.data);throw u};e.get=function(t,e){return void 0===e&&(e={}),e.timeout||(e.timeout=1e3*(window.sugarAjaxTimeout||60)),e.headers||(e.headers={}),e.headers["sugar-spe"]=parseInt(+new Date/600,10),/^(\/api\/group\/getByKey|\/api\/[\s\S]+\/getReportWithChartsAndConditions|\/api\/[\s\S]+\/getDashboardWithChartsAndConditions|\/api\/[\s\S]+\/getDashboardShare|\/api\/[\s\S]+\/getReportShare)/i.test(t)&&(e.headers[u]=d),r.default.get(t,e).then(function(t){return h(t)}).catch(function(t){return g(t)})},e.post=function(t,e,a){return void 0===a&&(a={}),a.timeout||(a.timeout=1e3*(window.sugarAjaxTimeout||60)),r.default.post(t,e,a).then(function(t){return h(t)}).catch(function(t){return g(t)})},e.put=function(t,e,a){return void 0===a&&(a={}),a.timeout||(a.timeout=1e3*(window.sugarAjaxTimeout||60)),r.default.put(t,e,a).then(function(t){return h(t)}).catch(function(t){return g(t)})},e.patch=function(t,e,a){return void 0===a&&(a={}),a.timeout||(a.timeout=1e3*(window.sugarAjaxTimeout||60)),r.default.patch(t,e,a).then(function(t){return h(t)}).catch(function(t){return g(t)})},e.remove=function(t,e){return void 0===e&&(e={}),e.timeout||(e.timeout=1e3*(window.sugarAjaxTimeout||60)),r.default.delete(t,e).then(function(t){return h(t)}).catch(function(t){return g(t)})}});
;sugar.define("sugar:stores/helper.ts",function(e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.asyncAction=r.SweetDataUnit=r.state=void 0;var t=e("sugar:node_modules/tslib/tslib.js"),o=e("sugar:node_modules/mobx-state-tree/dist/mobx-state-tree.js"),a=e("sugar:utils/fetch.ts"),n=e("sugar:node_modules/amis/lib/index.js"),s=e("sugar:node_modules/axios/index.js");r.state=o.types.optional(o.types.enumeration(["pending","done","error"]),"done"),r.SweetDataUnit=o.types.model("SweetDataUnit",{loadState:r.state,loadError:o.types.optional(o.types.frozen(),null),data:o.types.optional(o.types.frozen(),null)}),r.asyncAction=function(e,r){return o.flow(function(){var o,i,d,l,u,p,f,c,y,g,h,v,_,m,q,w,A,D,C,b,P,O,U,x,x,j,E=[];for(o=0;o<arguments.length;o++)E[o]=arguments[o];return t.__generator(this,function(o){switch(o.label){case 0:i=t.__assign({},r),["url","reqData","reqConfig"].forEach(function(r){"function"==typeof i[r]&&(i[r]=i[r].apply(e,E))}),i.reqUrlAndDataAndConfig&&(d=void 0,d="function"==typeof i.reqUrlAndDataAndConfig?i.reqUrlAndDataAndConfig.apply(e,E):i.reqUrlAndDataAndConfig,d.url&&(i.url=d.url),d.reqData&&(i.reqData=d.reqData),d.reqConfig&&(i.reqConfig=d.reqConfig)),l=i.state,u=void 0===l?"loadState":l,p=i.method,f=i.url,c=void 0===f?"/api/404":f,y=i.reqData,g=i.reqConfig,h=void 0===g?{}:g,v=i.field,_=void 0===v?"data":v,m=i.success,q=i.fail,w=i.errField,A=void 0===w?"loadError":w,D=i.showError,C=void 0===D?!0:D,b=i.errorPrefix,P=i.throwErr,O=void 0===P?!1:P,u&&("function"==typeof u?u.apply(void 0,t.__spreadArrays(["pending"],E)):e.hasOwnProperty(u)&&(e[u]="pending")),p||(p="get"),o.label=1;case 1:return o.trys.push([1,6,,7]),U=void 0,"get"!==p&&"remove"!==p?[3,3]:(x=a[p],[4,x(c,h)]);case 2:return U=o.sent(),[3,5];case 3:return x=a[p],[4,x(c,y,h)];case 4:U=o.sent(),o.label=5;case 5:return"function"==typeof m?m.apply(e,[U].concat(E)):_&&e.hasOwnProperty(_)&&(e[_]=U.data),u&&("function"==typeof u?u.apply(void 0,t.__spreadArrays(["done"],E)):e.hasOwnProperty(u)&&(e[u]="done")),[2,{store:e,res:U,state:"done"}];case 6:if(j=o.sent(),s.default.isCancel(j))return[2,{store:e,res:null,state:"error"}];if(u&&("function"==typeof u?u.apply(void 0,t.__spreadArrays(["error"],E)):e.hasOwnProperty(u)&&(e[u]="error")),"function"==typeof q?q.apply(e,[j].concat(E)):q&&_&&e.hasOwnProperty(_)&&(e[_]=q),A&&e.hasOwnProperty(A)&&(e[A]=j),O)throw j;return C!==!1&&n.toast.error((b||"")+j.message),[2,{store:e,res:null,state:"error"}];case 7:return[2]}})})}});
;sugar.define("sugar:stores/user.ts",function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.User=e.AllUser=e.UserList=e.UserEntity=void 0;var s=t("sugar:node_modules/mobx-state-tree/dist/mobx-state-tree.js"),a=t("sugar:stores/helper.ts");e.UserEntity=s.types.model("UserEntity",{name:s.types.optional(s.types.identifier,""),email:s.types.optional(s.types.string,""),realName:s.types.optional(s.types.string,""),avatar:s.types.optional(s.types.string,""),companyAdmin:s.types.optional(s.types.boolean,!1),currentGroupInfo:s.types.optional(s.types.model({groupAdmin:s.types.optional(s.types.boolean,!1)}),{groupAdmin:!1})}).actions(function(t){return{changeRealNameAndAvatar:function(e,s){t.realName=e,t.avatar=s}}}),e.UserList=s.types.model("UserList",{loadState:a.state,data:s.types.optional(s.types.array(e.UserEntity),[])}).actions(function(t){return{load:a.asyncAction(t,{url:function(t){return"/api/manage/group/"+t+"/user"},fail:[]}),add:function(){},update:function(){},"delete":function(){}}}),e.AllUser=s.types.model("AllUser",{loadState:a.state,loadError:s.types.optional(s.types.frozen(),{}),data:s.types.optional(s.types.frozen(),[])}).actions(function(t){return{load:a.asyncAction(t,{url:function(t){return"/api/manage/dataModel/"+t+"/user/allUserInfo"},success:function(e){t.data=e.data.rows},fail:[]})}}),e.User=s.types.model("User",{current:s.types.optional(e.UserEntity,{}),list:s.types.optional(e.UserList,{}),all:s.types.optional(e.AllUser,{})})});
;sugar.define("sugar:stores/role.ts",function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Role=e.AllRole=e.RoleList=e.RoleEntity=void 0;var a=t("sugar:node_modules/mobx-state-tree/dist/mobx-state-tree.js"),o=t("sugar:stores/helper.ts"),s=t("sugar:stores/user.ts");e.RoleEntity=a.types.model("Role",{name:a.types.optional(a.types.string,""),hash:a.types.optional(a.types.identifier,""),remark:a.types.optional(a.types.string,""),users:a.types.optional(a.types.array(s.UserEntity),[])}),e.RoleList=a.types.model("RoleList",{loadState:o.state,addState:o.state,updateState:o.state,data:a.types.optional(a.types.array(e.RoleEntity),[])}).actions(function(t){return{load:o.asyncAction(t,{url:function(t){return"/api/manage/group/"+t+"/role"},fail:[]}),add:o.asyncAction(t,{state:"addState",method:"post",url:function(t){return"/api/manage/group/"+t+"/role"},reqData:function(t,e){return e},success:function(e){t.data.push(e.data)},throwErr:!0}),update:o.asyncAction(t,{state:"updateState",method:"put",url:function(t,e){return"/api/manage/group/"+t+"/role/"+e.hash},success:function(e,a,o){for(var s=0,r=0;r<t.data.length;r++)if(t.data[r].hash===o.hash){s=r;break}t.data[s]=e.data},reqData:function(t,e){return e},throwErr:!0}),"delete":o.asyncAction(t,{state:"updateState",method:"remove",url:function(t,e){return"/api/manage/group/"+t+"/role/"+e},success:function(e,a,o){for(var s=0,r=0;r<t.data.length;r++)if(t.data[r].hash===o){s=r;break}t.data.splice(s,1)},reqData:function(t,e){return e},throwErr:!0})}}),e.AllRole=a.types.model("AllRole",{loadState:o.state,loadError:a.types.optional(a.types.frozen(),{}),data:a.types.optional(a.types.frozen(),[])}).actions(function(t){return{load:o.asyncAction(t,{url:function(t){return"/api/manage/dataModel/"+t+"/role/all"},success:function(e){t.data=e.data.rows},fail:[]})}}),e.Role=a.types.model("Role",{list:a.types.optional(e.RoleList,{}),all:a.types.optional(e.AllRole,{})})});
;sugar.define("sugar:stores/company.ts",function(t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.Company=void 0;var e=t("sugar:node_modules/mobx-state-tree/dist/mobx-state-tree.js"),o=t("sugar:stores/user.ts"),s=t("sugar:stores/helper.ts"),n=e.types.model("CompanyEntity",{name:e.types.optional(e.types.string,""),emailSuffix:e.types.optional(e.types.string,""),avatar:e.types.optional(e.types.string,""),onlyAdminCreate:e.types.optional(e.types.boolean,!1),toastPosition:e.types.optional(e.types.string,"top-right"),config:e.types.optional(e.types.frozen(),{})});a.Company=e.types.model("Company",{info:e.types.optional(n,{}),admins:e.types.array(o.UserEntity),myCompanys:e.types.array(n),vip:e.types.array(o.UserEntity),loadVipState:s.state,loadVipError:e.types.optional(e.types.frozen(),{})}).actions(function(t){return{update:s.asyncAction(t,{state:null,url:"/api/manage/company",method:"put",reqData:function(t){return t},success:function(a){t.info=a.data.info,t.admins=a.data.admins,"private"===window.sugarConfig.deployType&&(window.sugarAjaxTimeout=(parseInt(a.data.info.config.sqlTimeout,10)||50)+10),t.myCompanys.forEach(function(e,o){e.emailSuffix===t.info.emailSuffix&&(t.myCompanys[o]=a.data.info)})},throwErr:!0}),loadMyCompanys:s.asyncAction(t,{url:"/api/self/company/getList?allFields=1",field:"myCompanys"}),loadVip:s.asyncAction(t,{url:"/api/manage/company/getVip",field:"vip",state:"loadVipState",errField:"loadVipError"})}})});
;sugar.define("sugar:stores/assist.ts",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Assist=void 0;var o=e("sugar:node_modules/mobx-state-tree/dist/mobx-state-tree.js"),i=e("sugar:utils/storage.ts");t.Assist=o.types.model("Assist",{asideFolded:o.types.optional(o.types.boolean,!1),mobileAsideOffScreen:o.types.optional(o.types.boolean,!1),groupPaths:o.types.optional(o.types.map(o.types.string),{}),groupHistory:o.types.optional(o.types.map(o.types.array(o.types.string)),{}),iPaths:o.types.optional(o.types.string,""),ctrlPanelWidth:o.types.optional(o.types.number,315),ctrlPanelMin:o.types.optional(o.types.boolean,!1),layerPanelWidth:o.types.optional(o.types.number,150),layerPanelMin:o.types.optional(o.types.boolean,!1),modelEditorLeftWidth:o.types.optional(o.types.number,230),modelEditorTopHeight:o.types.optional(o.types.number,180),iframeDialogOpen:o.types.optional(o.types.boolean,!1),iframeDialogSrc:o.types.optional(o.types.string,""),iframeDialogTitle:o.types.optional(o.types.string,""),currentPageType:o.types.optional(o.types.enumeration(["explore","report","dashboard","dataModel","scene",""]),"")}).actions(function(e){return{setCurrentPageType:function(t){e.currentPageType=t},toggleAsideFold:function(){e.asideFolded=!e.asideFolded,i.put("asideFolded",e.asideFolded)},toggleAsideMobile:function(){e.mobileAsideOffScreen=!e.mobileAsideOffScreen},rememberGroupPath:function(t,o){e.groupPaths.set(t,o),i.put("groupPaths",e.groupPaths)},rememberGroupHistory:function(t,o){var n=e.groupHistory.get(t)||[];n.length>0?(-1!==n.indexOf(o)?(n.splice(n.indexOf(o),1),n.unshift(o)):n.unshift(o),n.length>10&&(n=n.slice(0,10))):n.push(o),e.groupHistory.set(t,n),i.put("groupHistory",e.groupHistory)},rememberiPath:function(t){e.iPaths=t,i.put("iPaths",t)},setCtrlPanelWidth:function(t){e.ctrlPanelWidth=t,i.put("ctrlPanelWidth",t)},toggleCtrlPanelMin:function(){e.ctrlPanelMin=!e.ctrlPanelMin,i.put("ctrlPanelMin",e.ctrlPanelMin)},setLayerPanelWidth:function(t){e.layerPanelWidth=t,i.put("layerPanelWidth",t)},toggleLayerPanelMin:function(){e.layerPanelMin=!e.layerPanelMin,i.put("layerPanelMin",e.layerPanelMin)},setModelEditorLeftWidth:function(t){e.modelEditorLeftWidth=t,i.put("modelEditorLeftWidth",t)},setModelEditorTopHeight:function(t){e.modelEditorTopHeight=t,i.put("modelEditorTopHeight",t)},openIframeDialog:function(t,o){void 0===o&&(o=""),e.iframeDialogOpen=!0,e.iframeDialogSrc=t,e.iframeDialogTitle=o},closeIframeDialog:function(){e.iframeDialogOpen=!1}}})});
;sugar.define("sugar:stores/notice.ts",function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Notice=e.NoticeEntity=void 0;var o=t("sugar:node_modules/mobx-state-tree/dist/mobx-state-tree.js"),s=t("sugar:stores/helper.ts"),i=t("sugar:utils/storage.ts");e.NoticeEntity=o.types.model("NoticeEntity",{hash:o.types.optional(o.types.identifier,""),content:o.types.optional(o.types.string,""),link:o.types.optional(o.types.string,""),repeated:o.types.optional(o.types.boolean,!0)}),e.Notice=o.types.model("Notice",{closedNoticeHash:o.types.optional(o.types.string,""),loadState:s.state,loadError:o.types.optional(o.types.frozen(),{}),data:o.types.optional(o.types.array(e.NoticeEntity),[])}).actions(function(t){return{load:s.asyncAction(t,{url:"/api/notice",fail:[],showError:!1}),closeNotice:function(e){e&&(t.closedNoticeHash=e,i.put("closedNoticeHash",e))}}})});
;sugar.define("sugar:widgets/progress.ts",function(e,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var r=e("sugar:node_modules/react-progress-2/lib/main.js");s.default=r.default});
;sugar.define("sugar:stores/json.ts",function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Json=void 0;var a=t("sugar:node_modules/mobx-state-tree/dist/mobx-state-tree.js"),s=t("sugar:stores/index.ts"),n=t("sugar:stores/helper.ts"),o=t("sugar:widgets/progress.ts"),r=a.types.model("JsonEntity",{hash:a.types.optional(a.types.string,""),content:a.types.optional(a.types.string,""),isChanged:a.types.optional(a.types.boolean,!1),loadState:n.state,loadError:a.types.optional(a.types.frozen(),{}),saveState:n.state,saveError:a.types.optional(a.types.frozen(),{})}).actions(function(t){return{load:n.asyncAction(t,{url:function(e){var a=s.getRoot(t),n=a.group.current.data.hash;return"/api/group/"+n+"/json/"+e},success:function(e){t.hash=e.data.hash,t.content=e.data.content}}),change:function(e){t.content=e,t.isChanged=!0},update:n.asyncAction(t,{method:"put",state:"saveState",errField:"saveError",reqData:function(){return{content:t.content}},url:function(){var e=s.getRoot(t),a=e.group.current.data.hash;return o.default.show(),"/api/group/"+a+"/json/"+t.hash},success:function(){t.isChanged=!1,o.default.hide()},fail:function(){o.default.hide()}})}});e.Json=a.types.model("Json",{mapByHash:a.types.optional(a.types.map(r),{})}).actions(function(t){return{create:n.asyncAction(t,{method:"post",reqData:function(t,e){return{demoUrl:t,curUrl:e}},url:function(){var e=s.getRoot(t),a=e.group.current.data.hash;return o.default.show(),"/api/group/"+a+"/json"},success:function(e){o.default.hide(),t.mapByHash.set(e.data.hash,e.data)},fail:function(){o.default.hide()}}),load:function(e){if(t.mapByHash.has(e)){var a=t.mapByHash.get(e);a.hash||a.load(e)}else{t.mapByHash.set(e,{});var a=t.mapByHash.get(e);a.load(e)}},update:function(e){var a=t.mapByHash.get(e);return a&&a.isChanged?a.update():null}}})});
;sugar.define("sugar:stores/billing-license.ts",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.License=void 0;var s=e("sugar:node_modules/mobx-state-tree/dist/mobx-state-tree.js"),a=e("sugar:stores/helper.ts");t.License=s.types.model("License",{loadState:a.state,loadError:s.types.optional(s.types.frozen(),{}),data:s.types.optional(s.types.frozen(),null)}).actions(function(e){return{loadData:a.asyncAction(e,{url:"/api/manage/company-lic"})}})});
;sugar.define("sugar:stores/group.ts",function(t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.Group=o.CurrentGroup=o.manageCenterEntity=o.GroupEntity=void 0;var e=t("sugar:node_modules/tslib/tslib.js"),a=t("sugar:utils/i18n.ts"),n=t("sugar:node_modules/mobx-state-tree/dist/mobx-state-tree.js"),s=t("sugar:stores/user.ts"),p=t("sugar:stores/helper.ts");o.GroupEntity=n.types.model("GroupEntity",{hash:n.types.optional(n.types.identifier,""),name:n.types.optional(n.types.string,""),key:n.types.optional(n.types.string,""),avatar:n.types.optional(n.types.string,""),remark:n.types.optional(n.types.string,""),type:n.types.optional(n.types.number,0),navWidth:n.types.optional(n.types.string,"normal"),token:n.types.optional(n.types.string,""),config:n.types.optional(n.types.frozen(),{}),admins:n.types.optional(n.types.array(s.UserEntity),[]),GroupUser:n.types.optional(n.types.model({groupAdmin:n.types.optional(n.types.boolean,!1)}),{groupAdmin:!1}),createDate:n.types.optional(n.types.string,"")}),o.manageCenterEntity=n.types.model("manageCenterEntity",{showDashboard:n.types.optional(n.types.boolean,!1),showReport:n.types.optional(n.types.boolean,!1),showData:n.types.optional(n.types.boolean,!1),showDataModel:n.types.optional(n.types.boolean,!1),showScene:n.types.optional(n.types.boolean,!1),showSlider:n.types.optional(n.types.boolean,!1),showSqlModel:n.types.optional(n.types.boolean,!1),showDataMap:n.types.optional(n.types.boolean,!1),showDashAddBtn:n.types.optional(n.types.boolean,!1),showReportAddBtn:n.types.optional(n.types.boolean,!1),showDataModelAddBtn:n.types.optional(n.types.boolean,!1),showWidgetTemplate:n.types.optional(n.types.boolean,!1),showChartWarning:n.types.optional(n.types.boolean,!1),showChartTheme:n.types.optional(n.types.boolean,!1)}),o.CurrentGroup=n.types.model("CurrentGroup",{inGroup:n.types.optional(n.types.boolean,!1),isAdmin:n.types.optional(n.types.boolean,!1),loadState:p.state,loadError:n.types.optional(n.types.frozen(),{}),data:n.types.optional(o.GroupEntity,{}),manageCenter:n.types.optional(o.manageCenterEntity,{})}).actions(function(t){return{load:p.asyncAction(t,{url:"/api/group/getByKey",reqConfig:function(t){return{params:{key:t}}},success:function(o){t.data=o.data.data,t.inGroup=o.data.inGroup,t.isAdmin=o.data.isAdmin,t.manageCenter=o.data.manageCenter},fail:{},showError:!1}),update:p.asyncAction(t,{state:null,method:"put",url:function(t){return"/api/manage/group/"+t},reqData:function(t,o){return o},fail:function(){},throwErr:!0}),updateAIExplore:p.asyncAction(t,{state:null,method:"put",url:function(t){return"/api/manage/group/"+t+"/updateAIExplore"},reqData:function(t,o){return o},fail:function(){},throwErr:!0})}});var r=n.types.model("MyGroups",{loadState:p.state,data:n.types.optional(n.types.array(o.GroupEntity),[])}).actions(function(t){return{load:p.asyncAction(t,{url:"/api/group/my",fail:[],errorPrefix:a.default("获取我的报表空间错误：")}),add:p.asyncAction(t,{state:null,method:"post",url:"/api/manage/group",reqData:function(t){return t},success:function(o){return t.data.unshift(e.__assign({GroupUser:{groupAdmin:!0}},o.data))},throwErr:!0})}}),i=n.types.model("publicGroups",{loadState:p.state,data:n.types.optional(n.types.array(o.GroupEntity),[])}).actions(function(t){return{load:p.asyncAction(t,{url:"/api/group/publics",fail:[],errorPrefix:a.default("获取公开报表空间错误：")})}}),l=n.types.model("OtherGroups",{loadState:p.state,total:n.types.optional(n.types.number,0),data:n.types.optional(n.types.array(o.GroupEntity),[])}).actions(function(t){return{load:p.asyncAction(t,{url:"/api/group/other",fail:function(){t.total=0,t.data.clear()},reqConfig:function(t,o){return{params:{start:t,limit:o}}},success:function(o){t.total=o.data.total,t.data=o.data.data},errorPrefix:a.default("获取其他报表空间错误：")})}});o.Group=n.types.model("Group",{current:n.types.optional(o.CurrentGroup,{}),myGroups:n.types.optional(r,{}),publicGroups:n.types.optional(i,{}),otherGroups:n.types.optional(l,{})})});
;sugar.define("sugar:utils/tree.ts",function(n,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.map=r.filter=r.findFlatChildren=r.findParent=r.find=r.findPaths=void 0,r.findPaths=function(n,r){var i=function(n,r){var t=[];return n.every(function(n){var e;return r(n)?(t.unshift(n),!1):n.children&&(e=i(n.children,r))&&e.length?(t.unshift(n),t.unshift.apply(t,e),!1):!0}),t};return i(n,r)},r.find=function(n,i){return r.findPaths(n,i)[0]},r.findParent=function(n,i){var t=r.findPaths(n,i)[1];return t?t:null},r.findFlatChildren=function(n,i,t){var e=n,f=[];if(i){var u=r.find(n,i);if(!u)return f;e=u.children}for(var c=e.concat();c.length;){var u=c.pop();u.children&&u.children.length&&(c=c.concat(u.children)),(t&&t(u)||!t)&&f.unshift(u)}return f},r.filter=function(n,i){return n.filter(function(n,t){var e=i(n,t);return e&&n.children&&(n.children=r.filter(n.children,i)),e})},r.map=function(n,i){return n.map(function(n,t){return n=i(n,t),n.children&&(n.children=r.map(n.children,i)),n})}});
;sugar.define("sugar:utils/date-helper.ts",function(e,a){"use strict";function t(){}function n(e){if(e){if("string"==typeof e){var a=e.match(/^(\d{4})-(\d{2})-(\d{2}) (\d{2}):(\d{2}):(\d{2})$/);return a?new Date(parseInt(a[1],10),parseInt(a[2],10)-1,parseInt(a[3],10),parseInt(a[4],10),parseInt(a[5],10),parseInt(a[6],10)):new Date(e)}return new Date(e)}return new Date}function r(e,a){return e=n(e),a=a||"$1-$2-$3",String([e.getFullYear(),e.getMonth()+101,e.getDate()+100,e.getHours()+100,e.getMinutes()+100,e.getSeconds()+100]).replace(/^(\d+),\d*(\d{2}),\d*(\d{2}),\d*(\d{2}),\d*(\d{2}),\d*(\d{2})$/g,a)}function D(e){return void 0===e&&(e=0),new Date(+new Date+864e5*e)}function s(e,a){e=e||new Date;var t=a.match(/([+-])?(\d+)([a-z])?/i),r=[],D="";if(!t)return"";r=t.slice(1,4);var s="d";r[2]&&(s=r[2].toLowerCase()),"m"===s&&(s="M");var i=+r[1];return D="-"===r[0]?w(e).subtract(i,s).format("YYYY-MM-DD HH:mm:ss"):w(e).add(i,s).format("YYYY-MM-DD HH:mm:ss"),n(D)}function i(e){void 0===e&&(e="");var a="",t=e.match(/^\$MONDAY$/i),r=e.match(/^\$LASTMONTHFIRSTDAY$/i),i=e.match(/^\$MONTHFIRSTDAY$/i),d=e.match(/^\$QUARTERFIRSTDAY$/i),m=e.match(/^\$YEARFIRSTDAY$/i),u=e.match(/^\$LASTYEARFIRSTDAY$/i);if(t){var c=0-((new Date).getDay()+6)%7;a=D(c)}else if(r){var o=0-(new Date).getDate()+1;a=s(D(o),"-1M")}else if(i){var o=0-(new Date).getDate()+1;a=D(o)}else if(d){var f=Math.ceil(((new Date).getMonth()+1)/3),g=(new Date).getFullYear();a=n(g+"-"+["01","04","07","10"][f-1]+"-01")}else if(m){var g=(new Date).getFullYear();a=n(g+"-01-01")}else if(u){var g=(new Date).getFullYear();a=s(n(g+"-01-01"),"-1Y")}return a}function d(e,a){return a.map(function(a){var t=a.value,n=a.name;if(!t||!n)return!1;var r={label:n};if("date"===e)r.date=w(m(t));else if("dateRange"===e)r.startDate=w(m(t.start)),r.endDate=w(m(t.end));else if("dateTime"===e){var D=new Date(+new Date-6e4*parseInt(t||"0",10));D.setSeconds(0),r.date=w(D)}else if("dateTimeRange"===e){var s=new Date(+new Date-6e4*parseInt(t.start||"0",10));s.setSeconds(0);var i=new Date(+new Date-6e4*parseInt(t.end||"0",10));i.setSeconds(0),r.startDate=w(s),r.endDate=w(i)}return r}).filter(function(e){return e})}function m(e){void 0===e&&(e=""),e=(e||"").toString();var a="";e=e.replace(/\s+/g,"");var t=e.match(/\$[a-z]+/i),r=e.match(/\$(\d+)/),D=e.match(/([+-])?\d+([a-z])?/gi);return t&&r?a:(t&&(a=i(t[0])),r?r[1].match(/^(\d{8})$/)?a=n(r[1].substr(0,4)+"-"+r[1].substr(4,2)+"-"+r[1].substr(6,2)):a:(D&&(a=D.reduce(function(e,a){return s(e,a)},a)),a))}function u(e){void 0===e&&(e="");var a="",t=e.match(/^\{ZERO([+-]?)(\d*)\}$/),r=/^[1-9]\d{3}-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])\s+(20|21|22|23|[0-1]\d):[0-5]\d:[0-5]\d$/,D=/^[1-9]\d{3}-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])$/,s=new RegExp(r).test(e),i=new RegExp(D).test(e);if(t)if(["+","-"].indexOf(t[1])>=0&&t[2]&&!isNaN(parseInt(t[2],10))){var d=new Date;d.setHours(0,0,0,0);var m=d.getTime();a=new Date("+"===t[1]?m+6e4*parseInt(t[2],10):m-6e4*parseInt(t[2],10))}else{var m=new Date;m.setHours(0,0,0,0),a=m}else a=isNaN(parseInt(e,10))||s||i?s||i?n(e):"":new Date(+new Date+6e4*parseInt(e,10));return a}function c(e,a){void 0===e&&(e=""),void 0===a&&(a="");var t=e;switch(e){case"today":t=D();break;case"yesterday":t=D(-1);break;case"beforeYesterday":t=D(-2);break;case"week":t=D(-7);break;default:"cus"===e?t=m(a):t&&/^\d{4}-\d{2}-\d{2}$/.test(t)&&(t=n(t))}return t}function o(e,a,t){void 0===e&&(e=""),void 0===a&&(a=""),void 0===t&&(t="");var r=e.split(","),D={minDate:r[0],maxDate:r[1]};return r.length<2&&(D=l(e,a,t)),D.minDate&&"string"==typeof D.minDate&&(D.minDate=n(D.minDate),"Invalid Date"===D.minDate.toString()&&(D.minDate="")),D.maxDate&&"string"==typeof D.maxDate&&(D.maxDate=n(D.maxDate),"Invalid Date"===D.maxDate.toString()&&(D.maxDate="")),D}function f(e,a){void 0===e&&(e=""),void 0===a&&(a="");var t=e;switch(e){case"10min":t=new Date(+new Date-6e5);break;case"1h":t=new Date(+new Date-36e5);break;case"3h":t=new Date(+new Date-108e5);break;default:"cus"===e?t=u(a):t&&/^\d{4}-\d{2}-\d{2} \d{2}:\d{2}:\d{2}$/.test(t)&&(t=n(t))}return t}function g(e,a,t){void 0===e&&(e=""),void 0===a&&(a=""),void 0===t&&(t="");var r=e.split(","),D={minDate:r[0],maxDate:r[1]};if(r.length<2)switch(e.toLowerCase()){case"10min":D.maxDate=new Date,D.minDate=new Date(+new Date-6e5);break;case"1h":D.maxDate=new Date,D.minDate=new Date(+new Date-36e5);break;case"3h":D.maxDate=new Date,D.minDate=new Date(+new Date-108e5);break;case"today":D.maxDate=w().endOf("day"),D.minDate=w().startOf("day");break;case"yesterday":D.maxDate=w().subtract(1,"days").endOf("day"),D.minDate=w().subtract(1,"days").startOf("day");break;case"beforeyesterday":D.maxDate=w().subtract(2,"days").endOf("day"),D.minDate=w().subtract(2,"days").startOf("day");break;case"week":D.maxDate=w().endOf("day"),D.minDate=w().subtract(1,"weeks").startOf("day");break;case"halfmonth":D.maxDate=w().endOf("day"),D.minDate=w().subtract(2,"weeks").startOf("day");break;case"month":D.maxDate=w().endOf("day"),D.minDate=w().subtract(1,"months").startOf("day");break;default:("cus"===e||"timecus"===e)&&(D.minDate=u(a),D.maxDate=u(t))}return D.minDate&&"string"==typeof D.minDate&&(D.minDate=n(D.minDate),"Invalid Date"===D.minDate.toString()&&(D.minDate="")),D.maxDate&&"string"==typeof D.maxDate&&(D.maxDate=n(D.maxDate),"Invalid Date"===D.maxDate.toString()&&(D.maxDate="")),D}function l(e,a,t){void 0===e&&(e=""),void 0===a&&(a=""),void 0===t&&(t="");var n={maxDate:"",minDate:""};if(!e)return n;switch(e.toLowerCase()){case"today":n.maxDate=D(),n.minDate=D();break;case"oneday":case"day":n.maxDate=D(-1),n.minDate=D(-1);break;case"beforeyesterday":n.maxDate=D(-1),n.minDate=D(-2);break;case"oneweek":case"week":n.maxDate=D(-1),n.minDate=D(-7);break;case"halfmonth":n.maxDate=D(-1),n.minDate=D(-14);break;case"onemonth":case"month":n.maxDate=D(-1),n.minDate=D(-31);break;case"threemonth":case"season":n.maxDate=D(-1),n.minDate=D(-93);break;case"halfyear":n.maxDate=D(-1),n.minDate=D(-186);break;case"year":n.maxDate=D(-1),n.minDate=D(-372)}return"cus"===e&&(n.minDate=m(a),n.maxDate=m(t)),n}Object.defineProperty(a,"__esModule",{value:!0}),a.replaceDateMacro=a.getDateLimitByRange=a.getDateTimeRangeByDefaultVal=a.getDateTimeByDefaultVal=a.getDateRangeByDefaultVal=a.getDateByDefaultVal=a.getDateTimeByCusString=a.dateCusStringInfo=a.getDateByCusString=a.getShortcutByHotKey=a.getDateByMacroDef=a.getDateByOperation=a.getDate=a.formatDate=a.getDateByString=a.noop=void 0;var y=e("sugar:utils/i18n.ts"),w=e("sugar:node_modules/moment/moment.js");a.noop=t,a.getDateByString=n,a.formatDate=r,a.getDate=D,a.getDateByOperation=s,a.getDateByMacroDef=i,a.getShortcutByHotKey=d,a.getDateByCusString=m,a.dateCusStringInfo=y.default("可输入正负数，如: -1 表示昨天，+1 表示明天，0表示当天；如果想定义绝对日期，请填写 $绝对日期，例如：\\$20180101；")+y.default("如果是本周一请写\\$MONDAY，本周二请写\\$MONDAY+1，上周日\\$MONDAY-1；")+y.default("本月第一天请写\\$MONTHFIRSTDAY，本月第二天请写\\$MONTHFIRSTDAY+1；")+y.default("上月第一天请写\\$LASTMONTHFIRSTDAY，上月最后一天请写\\$MONTHFIRSTDAY-1；")+y.default("本季度第一天请写\\$QUARTERFIRSTDAY，本季度第二天请写\\$QUARTERFIRSTDAY+1；")+y.default("本年第一天请写\\$YEARFIRSTDAY，本年第二天请写\\$YEARFIRSTDAY+1；")+y.default("去年第一天请写\\$LASTYEARFIRSTDAY，去年最后一天请写\\$YEARFIRSTDAY-1；")+y.default("可以使用+、-进行年（Y）、月（M）、周（W）、日（D）的计算，比如两年半前的月末请写\\$MONTHFIRSTDAY-2Y-5M-1D，三个月前的1号请写\\$MONTHFIRSTDAY-3M,D可省略不写；"),a.getDateTimeByCusString=u,a.getDateByDefaultVal=c,a.getDateRangeByDefaultVal=o,a.getDateTimeByDefaultVal=f,a.getDateTimeRangeByDefaultVal=g,a.getDateLimitByRange=l,a.replaceDateMacro=function(e){var a=r(new Date,"$1-$2-$3 $4:$5:$6"),t=a.substr(0,4),D=a.substr(5,2),s=a.substr(8,2),i=a.substr(11,2),d=a.substr(0,10);e=e.replace(/\{YEAR\}/g,t),e=e.replace(/\{MONTH\}/g,D),e=e.replace(/\{MONTH\(number\)\}/g,parseInt(D,10).toString()),e=e.replace(/\{DAY\}/g,s),e=e.replace(/\{DAY\(number\)\}/g,parseInt(s,10).toString()),e=e.replace(/\{HOUR\}/g,i),e=e.replace(/\{HOUR\(number\)\}/g,parseInt(i,10).toString());var m=e.match(/\{DATE([+-]\d+)?(\(number\))?\}/g);return m&&m.length&&m.forEach(function(a){var t=d,D=/\(number\)/.test(a),s=a.match(/[+-]\d+/);s&&(t=r(new Date(+n(d)+24*parseInt(s[0],10)*3600*1e3))),D&&(t=t.replace(/-/g,"")),e=e.replace(a,t)}),e}});
;sugar.define("sugar:utils/common-helper.ts",function(e,t){"use strict";function r(e,t){if(void 0===t&&(t="FFFFFF"),!e)return t;if(e=String(e),"#"===e[0])return e=e.replace("#",""),3===e.length?[e[0],e[0],e[1],e[1],e[2],e[2]].join(""):6===e.length?e:t;if("transparent"===e)return"FFFFFF";var r=e.match(/^(rgb|rgba)?\(?([0-9]*),\s?([0-9]*),\s?([0-9]*),?\s?(\S*)\)?$/);if(r&&6===r.length){var n=parseInt(r[2]),a=parseInt(r[3]),i=parseInt(r[4]);return isNaN(n)||isNaN(a)||isNaN(i)?t:((1<<24)+(n<<16)+(a<<8)+i).toString(16).slice(1)}return t}function n(e,t){for(var r=e;r&&r.classList&&!r.classList.contains(t);)r=r.parentNode;return r.classList&&r.classList.contains(t)?r:null}function a(e,t,r){return e&&e.length?e.map(function(e){return e[t]=r,e}):e}function i(e,t){if(void 0==e||null==e)return"--";var r=",";if("number"==typeof e&&(e>0&&1>e||0>e&&e>-1)){var n=!1;0>e?(n=!0,e="9"+e.toString().slice(2)):e="9"+e.toString().slice(1),e=e.toString(),e=(n?"-0":"0")+e.slice(1)}else e=e.toString();var a=e.split(".",2),i=a[1],o=parseInt(a[0]);if(isNaN(o))return"";var s="";(0>o||"-0"==a[0])&&(s="-"),o=Math.abs(o);var u=new String(o);for(a=[];u.length>3;){var c=u.substr(u.length-3);a.unshift(c),u=u.substr(0,u.length-3)}return u.length>0&&a.unshift(u),u=a.join(t?"":r),e=!i||i.length<1?u:u+"."+i,e=s+e}function o(e,t){return void 0===t&&(t=!1),i(e,t)}function s(e,t,r,n){if(void 0===n&&(n=!1),r&&"string"==typeof e&&/^(\-)?\d+(\.\d+)?$/.test(e)&&(e=/\./.test(e)?parseFloat(e):parseInt(e)),"number"==typeof e&&((t||0===t)&&(e=parseFloat(e.toFixed(t))),e=o(e,n),t)){var a=e.split(".")[1];if(a?a.length<t&&(e+=u(t-a.length)):e=e+"."+u(t),/^[0\.]+$/.test(e))return"0"}return e}function u(e){for(var t="",r=0;e>r;r++)t+="0";return t}function c(e,t){if("number"!=typeof e)return e;var r="";0>e&&(r="-",e=-1*e);var n="",a=e,i=O.get("language");"en"===i?e>=1e9?(a=e/1e9,n=L.default("十亿")):e>=1e6?(a=e/1e6,n=L.default("百万")):e>=1e3&&(a=e/1e3,n=L.default("千")):e>=1e12?(a=e/1e12,n=L.default("万亿")):e>=1e8?(a=e/1e8,n=L.default("亿")):e>=1e7&&!t?(a=e/1e7,n=L.default("千万")):e>=1e6&&!t?(a=e/1e6,n=L.default("百万")):e>=1e4&&(a=e/1e4,n=L.default("万"));var s=o(a);if(s=s.split("."),s.length>1)if(n){var u=s;s=s[0]+"."+s[1].slice(0,2),u[1].slice(2,3)&&parseInt(u[1].slice(2,3))>=5&&parseInt(s.slice(-1))<9&&(s=s.slice(0,s.length-1)+(parseInt(s.slice(-1))+1))}else s=s[0]+"."+s[1];else s=s[0];return r+s+n}function l(e,t){void 0===t&&(t=2);var r=e.toFixed(t).split(".");if(r.length>1){var n=r[1].replace(/0+$/,"");return""===n?r[0]:r[0]+"."+n}return e}function f(e,t){void 0===t&&(t=2);var r="Byte",n=parseInt(e,10);if(isNaN(n))return e;var a="";0>e&&(a="-",e=-1*e),e>=1099511627776?(n=e/1099511627776,r="TB"):e>=1073741824?(n=e/1073741824,r="GB"):e>=1048576?(n=e/1048576,r="MB"):e>=1024&&(n=e/1024,r="KB");var i=(n+"").split(".");return i=i.length>1?i[0]+"."+i[1].slice(0,t):i[0],a+i+" "+r}function d(e,t){void 0===t&&(t=2);var r="bps",n=8*parseInt(e,10);if(isNaN(n))return e;var a="";0>e&&(a="-",e=-1*e),n>=1e12?(n/=1e12,r="Tbps"):n>=1e9?(n/=1e9,r="Gbps"):n>=1e6?(n/=1e6,r="Mbps"):n>=1e3&&(n/=1e3,r="Kbps");var i=(n+"").split(".");return i=i.length>1?i[0]+"."+i[1].slice(0,t):i[0],a+i+" "+r}function p(e){if("number"!=typeof e){if(!/^[\d\.]+$/.test(e))return"error";e=parseInt(e,10)}var t=e%3600,r=(e-t)/3600;10>r&&(r="0"+r.toString());var n=t%60,a=(t-n)/60;10>a&&(a="0"+a.toString());var i=parseInt(n,10);return 10>i&&(i="0"+i.toString()),r+":"+a+":"+i}function g(e,t){if(h(e)){var r=0;if(t&&t>0)r=t;else{var n=e.toString().match(/^-?\d+\.(\d+)$/);n&&n[1]&&(r=n[1].length-2,0>r&&(r=0))}return parseFloat((100*e).toFixed(r))}return e}function h(e){return"number"==typeof e||"string"==typeof e&&!isNaN(+e)?!0:!1}function m(e,t,r){var n=e;if(h(e))switch(t){case"percent":n=g(e,r)+"%";break;case"chartTimeVal":case"timeFunc":n=p(e);break;case"chartByteVal":case"byteFunc":n=f(e);break;case"chartBps":case"bpsFunc":n=d(e);break;case"numFunc":n=c(e);break;default:n=s(e,"number"==typeof r?r:null,!1)}else n=null!==n&&void 0!==n?n:"-";return n}function E(e,t,r){return t?m(e,t,r):c(e)}function B(e,t){for(var r=0;r<t.length;r++){var n=t[r];switch(n){case"null":if(null==e)return!0;break;case"string":if("string"==typeof e)return!0;break;case"number":if("number"==typeof e)return!0;break;case"numberString":if("string"==typeof e&&/^(\-|\+)?\d+(\.\d+)?$/.test(e))return!0;break;case"array":if(Array.isArray(e))return!0;break;case"-":if("-"==e)return!0}}return!1}function v(e,t){if(e instanceof Array){for(var r=!0,n=0;n<e.length;n++){var a=e[n],i=B(a,t);if(!i){r=!1;break}}return r}return!1}function y(e){var t=new RegExp(/^(?:([A-Za-z]+):)?(\/{0,3})([0-9.\-A-Za-z]+)(?::(\d+))?(?:\/([^?#]*))?(?:\?([^#]*))?(?:#(.*))?$/),r=e.match(t);return r&&r[3]?r[3]:!1}function b(e){var t=e.currentTarget;if(t){var r=t.getBoundingClientRect(),n=e.clientX||(e.changedTouches?e.changedTouches[0].clientX:0),a=e.clientY||(e.changedTouches?e.changedTouches[0].clientY:0);return{x:n-r.left,y:a-r.top}}return!1}function F(e,t){var r=Math.abs(e%t);return 0!==r&&(e=e>=0?r/t>.5?e+t-r:e-r:r/t>.5?e+r-t:e+r),e}function A(){var e=!1;try{var t=document.createElement("canvas");e=!(!t.getContext("webgl")&&!t.getContext("experimental-webgl"))}catch(r){e=!1}return e?!0:L.default("您的浏览器未开启或不支持 WebGL 功能，无法渲染此类图表，请下载最新版 Chrome 浏览器以获得完整体验。")}function S(e){var t=[L.default("周日"),L.default("周一"),L.default("周二"),L.default("周三"),L.default("周四"),L.default("周五"),L.default("周六")],r=e.toString();8===r.length&&/^2\d+$/.test(r)&&(r=r.slice(0,4)+"-"+r.slice(4,6)+"-"+r.slice(6,8));var n=X.getDateByString(r).getDay();return n>=0&&(e=e+" ("+t[n]+")"),e}function D(e,t){var r=document.createElement("script");r.type="text/javascript","undefined"!=typeof t&&(r.readyState?r.onreadystatechange=function(){("loaded"===r.readyState||"complete"===r.readyState)&&(r.onreadystatechange=null,t())}:r.onload=function(){t()}),r.src=e,document.body.appendChild(r)}function C(e){if(!e.length)return e;for(var t=0,r=0,n=e;r<n.length;r++){var a=n[r];t+=a}t/=e.length;for(var i=0,o=0,s=e;o<s.length;o++){var a=s[o];i+=(a-t)*(a-t)}var u=Math.sqrt(i/e.length);if(0===u)return e;for(var c=[],l=0,f=e;l<f.length;l++){var a=f[l];c.push((a-t)/u)}return c}function w(e,t){for(var r=C(e),n=C(t),a=0,i=0;i<r.length;i++)a+=(r[i]-n[i])*(r[i]-n[i]);return a}function N(e,t){for(var r=0,n=0;n<e.length;n++)r+=(e[n]-t[n])*(e[n]-t[n]);return Math.sqrt(r)}function M(e,t){var r=window.location.href,n="",a=new RegExp("(\\?|&)("+e+"=)([^&]*)(|$)"),i=e+"="+t;return n=null!==r.match(a)?r.replace(a,function(e,t){return t+i}):r.match("[?]")?r+"&"+i:r+"?"+i}function I(e){t.isWeiXin&&(t.WXSDKReady?e&&e():j.get("/openapi/getWXInfo?url="+encodeURIComponent(window.location.href.split("#")[0])).then(function(r){if(0===r.status&&r.data&&r.data.signature){try{window.loadjs(["https://res.wx.qq.com/open/js/jweixin-1.4.0.js"],"WXSDK",{async:!1})}catch(n){}window.loadjs.ready("WXSDK",function(){"undefined"!=typeof window.wx&&(window.wx.config(R.__assign({jsApiList:["updateAppMessageShareData","updateTimelineShareData","onMenuShareTimeline","onMenuShareAppMessage","startRecord","stopRecord","translateVoice"]},r.data)),window.wx.ready(function(){t.WXSDKReady=!0,e&&e()}))})}}))}function W(e){return e.replace(/[\\|\:|\/|\?|\*|\[|\]]/g,"_").substr(0,30)}function T(e,t,r){var n="",a=t,i=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"];e&&(a=Math.round(Math.random()*(r-t))+t);for(var o=0;a>o;o++){var s=Math.round(Math.random()*(i.length-1));n+=i[s]}return n}function k(e,t,r,n){var a=e-r,i=t-n,o=Math.sqrt(a*a+i*i);return o}function x(e,t){if(!e)return 0;switch(e){case"center":case"middle":e="50%";break;case"left":case"top":e="0%";break;case"right":case"bottom":e="100%"}return"string"==typeof e&&e.trim().match(/%$/)?parseFloat(e)/100*t:+e}Object.defineProperty(t,"__esModule",{value:!0}),t.isNotEmpty=t.parsePercent=t.calDistance=t.randomWord=t.processExcelWorkBookName=t.initWXSDK=t.WXSDKReady=t.changeUrlParam=t.Euclidean=t.standardizedEuclidean=t.normalizationVector=t.parseCurrentQueryString=t.loadJs=t.getWeekByDate=t.webGLDetector=t.getPosition=t.getOffset=t.getHost=t.isArrayOfTypes=t.isValueOfTypes=t.formatDataByTypeOrWithMagnitude=t.formatDataByType=t.dataFormatFunList=t.floatAccuracyList=t.isNumberic=t.getPercent=t.getHhmmssBySeconds=t.getBpsValue=t.getByteValue=t.deleteTailZero=t.formatNumberWithMagnitude=t.formatStringOrNumber=t.formatNumber=t.addFiledToObjectArray=t.getParentDomByClassName=t.colors2Hex=t.isChrome=t.isWeiXin=t.isIOS=t.isMobile=t.payLink=t.cp3=t.cp2=t.cp1=t.lc=t.l=t.noop=void 0;var R=e("sugar:node_modules/tslib/tslib.js"),L=e("sugar:utils/i18n.ts"),O=e("sugar:utils/storage.ts"),X=e("sugar:utils/date-helper.ts"),j=e("sugar:utils/fetch.ts");t.noop=function(){},t.l=decodeURIComponent("%E6%82%A8%E6%89%80%E4%BD%BF%E7%94%A8%E7%9A%84%24l%E6%8E%88%E6%9D%83L897078se%E5%8F%AF%E8%83%BD%E6%98%AF%E7%9B%97%E7%89%88%E7%9A%84%EF%BC%8C%E6%88%96%E8%80%85%E6%82%A8%E5%BD%93%E5%89%8D%E7%B3%BB%E7%BB%9F%E7%9A%84%E6%97%B6%E9%97%B4%E8%AE%BE%E7%BD%AE%E6%9C%89%E9%97%AE%E9%A2%98%E3%80%82%E6%9C%89%E4%BD%BF%E7%94%A8%E9%97%AE%E9%A2%98%E8%AF%B7%E8%81%94%E7%B3%BB%E6%88%91%E4%BB%AC%EF%BC%9Asugar%40baheiheiheiom".replace("heiheihei","idu.c").replace("897078","icen")),t.lc=decodeURIComponent("wrap789d%20tex890nter".replace("789","per-m").replace("890","t-ce")),t.cp1=decodeURIComponent("%E6%82%A8%E7%9A%84%E7%BB%84%E7%BB%87%E5%B7%B2%E7%BB%8F%E5%88%B0%E6%9C%9F%EF%BC%8C%E6%82%A8%E7%9A%84%E6%95%B0%E6%8D%AE%E4%BC%9A%E6%9A%82%E6%97%B6%E4%BF%9D%E7%95%99%EF%BC%8C%E5%A6%82%E9%9C%80%E7%BB%A7%E7%BB%AD%E4%BD%BF%E7%94%A8%E5%8F%AF%E5%89%8D%E5%BE%80"),t.cp2=decodeURIComponent("%E8%BF%99%E9%87%8C"),t.cp3=decodeURIComponent("%E8%BF%9B%E8%A1%8C%E7%BB%AD%E8%B4%B9"),t.payLink="https://console.bce.baidu.com/sugar/?_=1564483134205#/company/list",t.isMobile=/(android|ios|iphone|ipad)/i.test(navigator.userAgent)?!0:!1,t.isIOS=!!navigator.userAgent.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),t.isWeiXin=!!window.navigator.userAgent.match(/MicroMessenger/i),t.isChrome=!!navigator.userAgent.toLowerCase().match(/chrome/),t.colors2Hex=r,t.getParentDomByClassName=n,t.addFiledToObjectArray=a,t.formatNumber=o,t.formatStringOrNumber=s,t.formatNumberWithMagnitude=c,t.deleteTailZero=l,t.getByteValue=f,t.getBpsValue=d,t.getHhmmssBySeconds=p,t.getPercent=g,t.isNumberic=h,t.floatAccuracyList=[[L.default("自动"),-1],[L.default("0位(四舍五入取整)"),0],[L.default("1位"),1],[L.default("2位"),2],[L.default("3位"),3],[L.default("4位"),4],[L.default("5位"),5],[L.default("6位"),6]],t.dataFormatFunList=[[L.default("百分比(*100 %)"),"percent"],[L.default("数字转万/亿"),"numFunc"],[L.default("秒转时分秒"),"timeFunc"],[L.default("字节转MB/GB"),"byteFunc"],[L.default("字节转Mbps(带宽)"),"bpsFunc"]],t.formatDataByType=m,t.formatDataByTypeOrWithMagnitude=E,t.isValueOfTypes=B,t.isArrayOfTypes=v,t.getHost=y,t.getOffset=b,t.getPosition=F,t.webGLDetector=A,t.getWeekByDate=S,t.loadJs=D,t.parseCurrentQueryString=function(){var e=window.location.search.replace("?","");if(!e)return null;var t=e.split("&"),r={},n=!1;return t.forEach(function(e){var t=e.split("=");2===t.length&&"conditions"!==t[0]&&"__scp__"!==t[0]&&(n=!0,r[decodeURIComponent(t[0])]=decodeURIComponent(t[1]))}),n?r:null},t.normalizationVector=C,t.standardizedEuclidean=w,t.Euclidean=N,t.changeUrlParam=M,t.WXSDKReady=!1,t.initWXSDK=I,t.processExcelWorkBookName=W,t.randomWord=T,t.calDistance=k,t.parsePercent=x,t.isNotEmpty=function(e){return!!e&&e.trim().length>0}});
;sugar.define("sugar:stores/chart-data.ts",function(a,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChartData=t.getReqUrlAndData=t.getPasswordFreeHost=t.clearChartDataCancelTokenMap=t.chartDataCancelTokenMap=void 0;var e=a("sugar:node_modules/tslib/tslib.js"),r=a("sugar:utils/i18n.ts"),o=a("sugar:node_modules/mobx-state-tree/dist/mobx-state-tree.js"),s=a("sugar:stores/index.ts"),n=a("sugar:node_modules/amis/lib/index.js"),d=a("sugar:utils/common-helper.ts"),i=a("sugar:stores/helper.ts"),c=a("sugar:node_modules/lodash/get.js"),l=a("sugar:node_modules/axios/index.js");t.chartDataCancelTokenMap={},t.clearChartDataCancelTokenMap=function(){for(var a in t.chartDataCancelTokenMap)t.chartDataCancelTokenMap.hasOwnProperty(a)&&t.chartDataCancelTokenMap[a].cancel("Abort axios");t.chartDataCancelTokenMap={}},t.getPasswordFreeHost=function(){var a="",t=d.getHost(document.referrer);if(window.location!==window.parent.location&&t){a+=t;var e="";if(window.parent.location!==window.parent.parent.location&&window.location.hostname===t){try{e=d.getHost(window.parent.document.referrer)}catch(r){e=""}e&&(a+=" "+e)}}return a},t.getReqUrlAndData=function(a,r,o,n,d,i){void 0===d&&(d=""),void 0===i&&(i=!1);var c,l="/api/404",h={},p={},g=o.reportOrDashHash?o.reportOrDashHash:null;if(a.isDashChart||o.isDashDrilldown){var f="",u=n?s.getRoot(n).dashboard.current:null;if(/^\/(dashboard)\//i.test(window.location.pathname)){var m=window.location.pathname.split("/").pop();if(f="dashboardShare/"+m+"/",u&&2===u.data.authType){u.sharePassword&&(o.sharePassword=u.sharePassword);var _=t.getPasswordFreeHost();_&&(o.o=_)}}else/^\/i\/dashboard\//i.test(window.location.pathname)&&u&&(p={headers:{"sugar-company":u.data.companyKey}});c=f+("dashboard/"+(g||a.dashboardHash))}else{var C="report";a.isExploreChart&&(C="explore"),c=C+"/"+(g||a.reportHash);var f="",D=n?s.getRoot(n).report.current:null;if(/^\/(report|explore)\//i.test(window.location.pathname)){var y=window.location.pathname.split("/").pop();if(f="reportShare/"+y+"/",D&&2===D.data.authType){D.sharePassword&&(o.sharePassword=D.sharePassword);var _=t.getPasswordFreeHost();_&&(o.o=_)}}else/^\/i\/report\//i.test(window.location.pathname)&&D&&(p={headers:{"sugar-company":D.data.companyKey}});c=f+c}var w=a;d&&a.config.subChartConfig&&a.config.subChartConfig[d]&&(w=a.config.subChartConfig[d]);var v=w.type;if("smart-chart"===v&&(v=(w.config.smartChart||{}).type),"editor"===r){var b=(o.drillDownsPath,o.mainChartHash),H=(o.reportOrDashHash,o.isDashDrilldown,e.__rest(o,["drillDownsPath","mainChartHash","reportOrDashHash","isDashDrilldown"]));switch(w.dataType){case"dataModel":l="/api/"+c+"/chart-data/dataModelProxy?cfId="+a.frontendId,h={type:v,dataModelHash:w.dataModelHash,dataConfig:w.dataConfig},w.dataModelHash||i||!w.dataApiUrl||n.data||(l="/api/"+c+"/chart-data/apiProxy?cfId="+a.frontendId,h={url:w.dataApiUrl});break;case"api":l="/api/"+c+"/chart-data/apiProxy?cfId="+a.frontendId,h={url:w.dataApiUrl,dataConfig:w.dataConfig};break;case"sql":l="/api/"+c+"/chart-data/sqlProxy?cfId="+a.frontendId,h={type:v,sqlHash:w.dataModelHash,dataConfig:w.dataConfig};break;case"json":l="/api/"+c+"/chart-data/jsonProxy?cfId="+a.frontendId,h={jsonHash:w.dataConfig.dataJsonHash};break;case"static":l="/api/"+c+"/chart-data/staticProxy?cfId="+a.frontendId,h={type:v,dataConfig:w.dataConfig}}h=e.__assign(e.__assign({},h),H)}else{var b=o.mainChartHash,H=(o.reportOrDashHash,o.isDashDrilldown,e.__rest(o,["mainChartHash","reportOrDashHash","isDashDrilldown"]));l=a.drillDownLevel?"/api/"+c+"/chart-data/"+b+"/drillDown":"/api/"+c+"/chart-data/"+a.hash,h=e.__assign(e.__assign(e.__assign({},h),H),{subChartKey:d||void 0})}return h=e.__assign(e.__assign({},h),{resourceHash:w.hash||o.mainChartHash||a.hash,pageHash:g||a.dashboardHash||a.reportHash}),!["map","map-line","mapLayerAreaColor"].includes(w.type)||"api"!==w.dataType&&"dataModel"!==w.dataType||(h._sugar_map_auto_scope_field=w.config.mapAutoScopeField,"province"===w.config.mapScope?(h._sugar_map_scope="province",h._sugar_map_province=w.config.mapProvince,("sugar_map_auto_scope"===w.config.mapProvince||"sugar_map_url_param"===w.config.mapProvince)&&(h._sugar_md_province=w.config.mdProvince)):"city"===w.config.mapScope?(h._sugar_map_scope="city",h._sugar_map_city=w.config.mapCity,("sugar_map_auto_scope"===w.config.mapCity||"sugar_map_url_param"===w.config.mapCity)&&(h._sugar_md_city=w.config.mdCity)):"world"===w.config.mapScope&&(h._sugar_map_scope="world")),{url:l,reqData:h,reqConfig:p}},t.ChartData=o.types.model("ChartData",{loadState:i.state,loadError:o.types.optional(o.types.frozen(),{}),alert:o.types.optional(o.types.union(o.types.boolean,o.types.string,o.types.null),!1),data:o.types.optional(o.types.frozen(),null),other:o.types.optional(o.types.map(i.SweetDataUnit),{}),hasFirstLoadData:o.types.optional(o.types.boolean,!1)}).actions(function(a){return{loadData:i.asyncAction(a,{method:"post",reqUrlAndDataAndConfig:function(e,r,o){t.chartDataCancelTokenMap[e.frontendId]&&t.chartDataCancelTokenMap[e.frontendId].cancel&&t.chartDataCancelTokenMap[e.frontendId].cancel("Abort axios"),t.chartDataCancelTokenMap[e.frontendId]=l.default.CancelToken.source();var s=t.getReqUrlAndData(e,r,o,a);return s.reqConfig.cancelToken=t.chartDataCancelTokenMap[e.frontendId].token,s},success:function(t){a.hasFirstLoadData=!0,a.data=t.data,a.loadError={},a.alert=t.alert?t.alert:!1},fail:function(t,e,o,d,i,l){if(a.hasFirstLoadData=!0,t.message!==r.default("没有查询到数据")&&t.message!==r.default("没有查询到数据！")&&t.message!==r.default("无数据")){var h=s.getRoot(a),p=h.report,g=h.dashboard,f=c(p,"current.data.config.hideError")||c(g,"current.data.config.hideError");/^\/(dashboard|report|slider)\//.test(location.pathname)&&f?console&&console.error&&console.error(e.name+"："+t.message):/dashboard/.test(location.pathname)&&a.loadError&&a.loadError.message&&a.loadError.message===t.message||n.toast.error(e.name+"："+t.message)}if(i&&!l){var u="";try{u=JSON.stringify(a.data)}catch(m){}u&&"[]"!==u&&"{}"!==u&&"normal"===o&&e.isDashChart&&/dashboard/i.test(window.location.pathname)&&(a.loadState="done")}},showError:!1}),setData:function(t){a.loadState="done",a.data=t},loadOtherData:i.asyncAction(a,{method:"post",state:function(t,r,o,s,n){a.other.set(n,e.__assign(e.__assign({},a.other.get(n)),{loadState:t}))},reqUrlAndDataAndConfig:function(e,r,o,s){t.chartDataCancelTokenMap[e.frontendId+"_"+s]&&t.chartDataCancelTokenMap[e.frontendId+"_"+s].cancel&&t.chartDataCancelTokenMap[e.frontendId+"_"+s].cancel("Abort axios"),t.chartDataCancelTokenMap[e.frontendId+"_"+s]=l.default.CancelToken.source();var n=t.getReqUrlAndData(e,r,o,a,s);return n.reqConfig.cancelToken=t.chartDataCancelTokenMap[e.frontendId+"_"+s].token,n},success:function(t,r,o,s,n){a.hasFirstLoadData=!0,a.other.set(n,e.__assign(e.__assign({},a.other.get(n)),{data:t.data,loadError:{}}))},fail:function(t,o,d,i,l,h,p){if(a.hasFirstLoadData=!0,t.message!==r.default("没有查询到数据")&&t.message!==r.default("没有查询到数据！")&&t.message!==r.default("无数据")){var g=s.getRoot(a),f=g.report,u=g.dashboard,m=c(f,"current.data.config.hideError")||c(u,"current.data.config.hideError"),_=o.config.subChartConfig,C="";_&&_[l]&&(C=_[l].name);var D=r.default("「"+o.name+("」的子图表「"+C+"」：「")+t.message+"」");/^\/(dashboard|report|slider)\//.test(location.pathname)&&m?console&&console.error&&console.error(D):n.toast.error(D)}if(a.other.set(l,e.__assign(e.__assign({},a.other.get(l)),{loadError:t})),h&&!p){var y="";try{var w=a.other.get(l);w&&w.data&&(y=JSON.stringify(w.data))}catch(v){}y&&"[]"!==y&&"{}"!==y&&"normal"===d&&o.isDashChart&&/dashboard/i.test(window.location.pathname)&&a.other.set(l,e.__assign(e.__assign({},a.other.get(l)),{loadState:"done"}))}},showError:!1,errField:""}),setOtherData:function(t,e){a.other.set(e,{loadState:"done",data:t})}}})});
;sugar.define("sugar:stores/report.ts",function(t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.Report=void 0;var e=t("sugar:node_modules/tslib/tslib.js"),r=t("sugar:utils/i18n.ts"),o=t("sugar:node_modules/mobx-state-tree/dist/mobx-state-tree.js"),n=t("sugar:stores/helper.ts"),i=t("sugar:utils/tree.ts"),s=t("sugar:utils/storage.ts"),d=t("sugar:stores/index.ts"),c=t("sugar:node_modules/amis/lib/index.js"),p=t("sugar:node_modules/lodash/merge.js"),u=t("sugar:stores/chart-data.ts"),l=t("sugar:node_modules/lodash/get.js"),h={verticalCompact:!0,backgroundColor:"",backgroundType:0,backgroundScaleType:3,backgroundUrl:"/static/img-templet/report-background-0-d3cd7acdef7eb9e6.jpg",backgroundOpacity:3,backgroundFixed:!0,borderColor:"rgba(35, 186, 245, 0.45)",chartBackgroundColor:"rgba(255, 255, 255, 0)",chartBorderRadius:8,chartBorderStyle:"solid",borderWidth:0,shadowColor:"rgba(0, 0, 0, 0.41)",shadowOffset:3,shadowWidth:11},f=o.types.model("ReportEntity",{hash:o.types.optional(o.types.identifier,""),hierarchyLevel:o.types.optional(o.types.number,0),orderIndex:o.types.optional(o.types.number,0),type:o.types.optional(o.types.number,0),url:o.types.optional(o.types.string,""),name:o.types.optional(o.types.string,""),editable:o.types.optional(o.types.boolean,!1),icon:o.types.optional(o.types.string,""),remark:o.types.optional(o.types.string,""),authType:o.types.optional(o.types.number,0),token:o.types.optional(o.types.string,""),password:o.types.optional(o.types.string,""),isPublic:o.types.optional(o.types.boolean,!1),isAncestorPublic:o.types.optional(o.types.boolean,!1),isDev:o.types.optional(o.types.boolean,!1),isAncestorDev:o.types.optional(o.types.boolean,!1),config:o.types.optional(o.types.frozen(),{}),children:o.types.optional(o.types.array(o.types.late(function(){return f})),[]),groupKey:o.types.optional(o.types.string,""),companyKey:o.types.optional(o.types.string,"")}),y=o.types.model("CurrentReport",{loadState:n.state,loadError:o.types.optional(o.types.frozen(),{}),needValidatePassword:o.types.optional(o.types.boolean,!1),sharePassword:o.types.optional(o.types.string,""),data:o.types.optional(f,{}),cacheTime:o.types.optional(o.types.number,0),systemTime:o.types.optional(o.types.number,0),wrongPassword:o.types.optional(o.types.boolean,!1),cache:o.types.optional(o.types.boolean,!1),canEdit:o.types.optional(o.types.boolean,!1)}).actions(function(t){return{load:n.asyncAction(t,{url:function(t,a){return"/api/group/"+t+"/report/"+a+"/getReportWithChartsAndConditions"},success:function(a,e,r){t.data=a.data,t.data.config=p({},h,t.data.config);var o=d.getRoot(t);o.chartTheme.setTheme(t.data.config.theme,a.data.chartTheme),o.chart.initialize(a.data.charts||[],r),o.condition.initialize(a.data.conditions||[],r),o.editor.setModified(!1),t.canEdit=a.data.canEdit||!1,d.undoManager.clear()},fail:function(a,e,r){t.loadError=a;var o=d.getRoot(t);o.chart.initialize([],r),o.condition.initialize([],r)},showError:!1}),loadSlient:function(a){t.data=a},loadSelfReport:n.asyncAction(t,{url:function(t){return"/api/self/report/"+t+"/getReportWithChartsAndConditions"},success:function(a){t.data=a.data,t.data.config=p({},h,t.data.config);var e=a.data.hash,r=d.getRoot(t);r.chartTheme.setTheme(t.data.config.theme,a.data.chartTheme),r.chart.initialize(a.data.charts||[],e),r.condition.initialize(a.data.conditions||[],e),d.undoManager.clear()},fail:function(a){t.loadError=a;var e=d.getRoot(t);e.chart.initialize([],""),e.condition.initialize([],"")},showError:!1}),setSharePassword:function(a,e){t.cache=!!e,t.sharePassword=a},shareLoad:n.asyncAction(t,{url:function(a,e){var r="/api/reportShare/"+a+"/"+e+"/getReportShare",o=[];t.sharePassword&&o.push("p="+t.sharePassword);var n=u.getPasswordFreeHost();n&&o.push("o="+n);var i=window.location.href.split("?")[1]&&window.location.href.split("?")[1].split("&")||[];return i.length&&(o=o.concat(i)),o.length&&(r+="?"+o.join("&")),r},success:function(a,e){if(a.data.needPassword)t.needValidatePassword=!0,a.data.wrongPassword?(t.wrongPassword=!0,t.cache||c.toast.error(r.default("密码错误！"))):(t.data=a.data,t.cacheTime=a.data.cacheTime,t.systemTime=a.data.systemTime||0);else{t.data=a.data,t.data.config=p({},h,t.data.config);var o=a.data,n=o.cacheTime,i=o.password,u=s.get("share_pw")||{},f=l(u,"["+e+"].password"),y=l(u,"["+e+"].cacheTime");(!i&&f||!n)&&(delete u[e],s.put("share_pw",u)),n&&i&&(f!==i||y!==n)&&(u[e]={password:i,time:+new Date,cacheTime:n},s.put("share_pw",u));var g=d.getRoot(t);g.chartTheme.setTheme(t.data.config.theme,a.data.chartTheme),g.chart.initialize(a.data.charts||[],e),g.condition.initialize(a.data.conditions||[],e),g.editor.setModified(!1)}},fail:function(a,e){t.loadError=a;var r=d.getRoot(t);r.chart.initialize([],e),r.condition.initialize([],e)},showError:!1}),update:function(a,r){for(var o in r){var n=r[o];switch(o){case"name":case"remark":case"isPublic":case"isDev":t.data[o]=n;break;case"config":if(null==t.data.config.wrOpen&&a.config.wrOpen){var i=e.__assign(e.__assign({},a.config),{wrType:"email",wrColor:"#000",wrAlpha:.08,wrFontsize:18,wrWidth:250,wrXspace:100,wrYspace:50});t.data.config=i}else t.data.config=a.config}}},setNewLayoutMode:function(){if("grid"!==t.data.config.layoutMode){var a=e.__assign(e.__assign({},t.data.config),{layoutMode:"grid"});t.data.config=a}}}}),g=o.types.model("ReportTree",{loadState:n.state,addState:n.state,updateState:n.state,deleteState:n.state,loadAdminState:n.state,loadError:o.types.optional(o.types.frozen(),{}),data:o.types.optional(o.types.array(f),[]),adminData:o.types.optional(o.types.array(f),[]),currentFolder:o.types.optional(o.types.string,"0")}).actions(function(t){return{load:n.asyncAction(t,{url:function(t){return"/api/group/"+t+"/report"},fail:[]}),loadSlient:function(a){t.adminData=a},loadAdmin:n.asyncAction(t,{state:"loadAdminState",url:function(t){return"/api/manage/group/"+t+"/report"},success:function(a){t.adminData=a.data},fail:[]}),add:n.asyncAction(t,{state:"addState",method:"post",url:function(t){return"/api/manage/group/"+t+"/report"},reqData:function(t,a){return a},success:function(a,e,r){if(r.parentHash&&"0"!==r.parentHash){var o=i.find(t.data,function(t){return t.hash===r.parentHash}),n=i.find(t.adminData,function(t){return t.hash===r.parentHash});o&&(o.children||(o.children=[]),o.children.push(a.data)),n&&(n.children||(n.children=[]),n.children.push(a.data))}else t.data.push(a.data),t.adminData.push(a.data)},throwErr:!0}),copy:n.asyncAction(t,{state:"addState",method:"post",url:function(t){return"/api/manage/group/"+t+"/report/createFrom"},reqData:function(t,a){return a},success:function(a,e,r){if(r.parentHash&&"0"!==r.parentHash){var o=i.find(t.data,function(t){return t.hash===r.parentHash}),n=i.find(t.adminData,function(t){return t.hash===r.parentHash});o&&(o.children||(o.children=[]),o.children.push(a.data)),n&&(n.children||(n.children=[]),n.children.push(a.data))}else t.data.push(a.data),t.adminData.push(a.data)},throwErr:!0}),update:n.asyncAction(t,{state:"updateState",method:"put",url:function(t,a){return"/api/manage/group/"+t+"/report/"+a.hash},reqData:function(t,a){return a},success:function(a){t.adminData=a.data.adminData,t.data=a.data.data},throwErr:!0}),"delete":n.asyncAction(t,{state:"deleteState",method:"remove",url:function(t,a){return"/api/manage/group/"+t+"/report/"+a.hash},reqData:function(t,a){return a},success:function(a,e,r){t.adminData=a.data,t.data=i.filter(t.data,function(t){return t.hash!==r.hash})},throwErr:!0}),updateOrder:n.asyncAction(t,{state:"updateState",method:"put",url:function(t){return"/api/manage/group/"+t+"/report/updateOrder"},reqData:function(t,a){return a},success:function(a){t.adminData=a.data.adminData,t.data=a.data.data},throwErr:!0}),multiMove:n.asyncAction(t,{state:"updateState",method:"put",url:function(t){return"/api/manage/group/"+t+"/report/multiMove"},reqData:function(t,a){return a},success:function(a){t.adminData=a.data.adminData,t.data=a.data.data},throwErr:!0}),multiDelete:n.asyncAction(t,{state:"deleteState",method:"put",url:function(t){return"/api/manage/group/"+t+"/report/multiDelete"},reqData:function(t,a){return a},success:function(a,e,r){t.adminData=a.data,t.data=i.filter(t.data,function(t){return!r.includes(t.hash)})},throwErr:!0}),setData:function(a){t.data=a.data,t.adminData=a.adminData},setCurrentFolder:function(a){t.currentFolder=a},updateReportNodeNameByCurrentReport:function(){var a=d.getRoot(t),e=a.report.current.data.toJSON(),r=i.find(t.data,function(t){return t.hash===e.hash});r&&(r.name=e.name,r.remark=e.remark,r.isPublic=e.isPublic,r.isDev=e.isDev,r.config=e.config)}}});a.Report=o.types.model("Report",{current:o.types.optional(y,{}),tree:o.types.optional(g,{})})});
;sugar.define("sugar:utils/frontendId.ts",function(e,n){"use strict";function t(e){return(+new Date).toString(36)+Math.floor(1e7*Math.random()*(e?1e4:1)).toString(36)}function r(e){var n=t(e);return"SG"+n.toUpperCase()}function d(e,n){return void 0===n&&(n="hash"),e&&e.length?e.map(function(e){return e.frontendId=e[n]?e[n]:e.hash,e}):e}Object.defineProperty(n,"__esModule",{value:!0}),n.addFrontendId=n.generateIdUpperCase=n.generateId=void 0,n.generateId=t,n.generateIdUpperCase=r,n.addFrontendId=d});
;sugar.define("sugar:widgets/conditions/condition-manager.tsx",function(t,e){"use strict";function n(t){y.push(t),m[t.type]=t}function i(t){return!!m[t]}function r(){return y.map(function(t){return g.__assign({},t)})}function a(){var t=[];return y.forEach(function(e){t.push(e),e.variants&&e.variants.length&&e.variants.forEach(function(n){t.push(p({},e,n))})}),t}function o(t){return m[t]?g.__assign({},m[t]):null}function u(t,e){var n=m[t];if(!n)return null;var i=n.component;return h.createElement(i,g.__assign({},e))}function s(t){var e=t.isDashCondition?_:w;t=p({},e,t);var n=o(t.type);if(n&&n.initialState){var i=t.isDashCondition?n.initialDashboardState:n.initialState;return p({},i,t)}return t}function l(t){return t instanceof Array?t.map(function(t){return s(t)}):s(t)}function d(t,e,n){var i=m[e].view2value;return i?i(t,n):t}function f(t,e,n,i){var r=m[e].view2Display,a=r?r(t,n,i):t;return"object"==typeof a?JSON.stringify(a):a}function v(t,e,n,i,r,a){if("container"===e)return t;var o=m[e].defaultValOrUrlVal2view;return o?o(t,n,i,r,a):t}function c(t,e,n){var i=m[e].validate;return i?i(t,n):!0}Object.defineProperty(e,"__esModule",{value:!0}),e.validate=e.defaultValOrUrlVal2view=e.view2Display=e.view2value=e.mergeInitialState=e.create=e.getConditionByType=e.getConditionsWithVariants=e.getConditions=e.registered=e.register=void 0;var g=t("sugar:node_modules/tslib/tslib.js"),h=t("sugar:node_modules/react/index.js"),p=t("sugar:node_modules/lodash/merge.js"),y=[],m={};e.register=n,e.registered=i,e.getConditions=r,e.getConditionsWithVariants=a,e.getConditionByType=o,e.create=u;var w={},_={dataConfig:{needAutoRefresh:!1,autoRefreshInterval:1800},config:{fontSize:16},width:400,height:150};e.mergeInitialState=l,e.view2value=d,e.view2Display=f,e.defaultValOrUrlVal2view=v,e.validate=c});
;sugar.define("sugar:widgets/product-type/product-type-contant.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.productColorMap=void 0;var a=e("sugar:node_modules/tslib/tslib.js"),l=e("sugar:utils/i18n.ts"),r=e("sugar:node_modules/react/index.js"),n=e("sugar:node_modules/classnames/index.js"),c=e("sugar:utils/common-helper.ts");t.productColorMap={free:"#FF813F",fresh:"#0080FA",basic:"#B6BBBE",advan:"#AF926D"};var s=function(e){function s(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(s,e),s.prototype.getLineFromConfig=function(e,t,a,c){for(var s="boolean"==typeof e.fresh[t],d=e.fresh[t]instanceof Array,m=["fresh","basic","advan"],i=[],o=0,u=m;o<u.length;o++){var f=u[o],E=e[f][t];d&&(E=!!E.length),c="dynamic"===E?"":c,i.push(r.createElement("td",{key:f,className:n(f+"-col",{"text-success":(s||d)&&E,"text-danger":(s||d)&&!E})},s||d?E?r.createElement("i",{className:"fa fa-check","aria-hidden":"true"}):r.createElement("i",{className:"fa fa-close","aria-hidden":"true"}):""+(a||"")+("dynamic"===E?l.default("与购买用户数有关（2*用户数）"):E)+(c||"")))}return i},s.prototype.getLineFromArray=function(e,t,a){var l=e.fresh[t]instanceof Array,c=[];if(l)for(var s=e.advan[t],d=["fresh","basic","advan"],m=function(l){var m=s[l],i=[];0===l&&i.push(r.createElement("td",{rowSpan:s.length,key:-1},a)),i.push(r.createElement("td",{key:l},m.label));for(var o=0,u=d;o<u.length;o++){var f=u[o],E=void 0!==e[f][t].find(function(e){return m.value===e.value});i.push(r.createElement("td",{className:n(f+"-col",{"text-success":E,"text-danger":!E}),key:f},E?r.createElement("i",{className:"fa fa-check","aria-hidden":"true"}):r.createElement("i",{className:"fa fa-close","aria-hidden":"true"})))}c.push(r.createElement("tr",{key:l},i))},i=0;i<s.length;i++)m(i);return c},s.prototype.getTextFromArray=function(e,t){var a=e.advan[t];return a.map(function(e){return e.name||e.label}).join("，")},s.prototype.render=function(){var e=this.props.isModal,a=window.sugarConfig.productType,n=window.sugarConfig.productConfig,s=r.createElement("a",{href:c.payLink,target:"_blank",className:"text-info"},l.default("去升级"));return r.createElement("table",{className:"product-type-content "+a+"-type"},r.createElement("thead",null,r.createElement("tr",null,r.createElement("th",{colSpan:2},l.default("功能划分")),r.createElement("th",{className:"fresh-col"},r.createElement("i",{className:"fa fa-bolt",style:{color:t.productColorMap.fresh}})," 大屏尝鲜版"),r.createElement("th",{className:"basic-col"},r.createElement("i",{className:"fa fa-bolt",style:{color:t.productColorMap.basic}})," 基础版"),r.createElement("th",{className:"advan-col"},r.createElement("i",{className:"fa fa-bolt",style:{color:t.productColorMap.advan}})," 高级版"))),r.createElement("tbody",null,r.createElement("tr",null,r.createElement("td",{className:"product-cat"},l.default("用户")),r.createElement("td",{style:{width:"350px"},className:"text-left"},l.default("最大用户数")),r.createElement("td",{className:"fresh-col"},l.default("1个")),r.createElement("td",{className:"basic-col"},l.default("1个或3个")),r.createElement("td",{className:"advan-col"},l.default("10个起"))),r.createElement("tr",null,r.createElement("td",null,l.default("空间")),r.createElement("td",null,l.default("可用工作空间")),this.getLineFromConfig(n,"workSpace","","个")),r.createElement("tr",null,r.createElement("td",null,l.default("数据门户")),r.createElement("td",null,l.default("个人中心")),this.getLineFromConfig(n,"selfCenter")),r.createElement("tr",null,r.createElement("td",{rowSpan:3},l.default("数据源")),r.createElement("td",null,r.createElement("span",{className:"need-more-line-height"},l.default("常规数据源:")),r.createElement("br",null),this.getTextFromArray(n,"regluarSources")),this.getLineFromConfig(n,"regluarSources")),r.createElement("tr",null,r.createElement("td",null,r.createElement("span",{className:"need-more-line-height"},l.default("高级数据源:")),r.createElement("br",null),this.getTextFromArray(n,"basicSources")),this.getLineFromConfig(n,"basicSources")),r.createElement("tr",null,r.createElement("td",null,r.createElement("span",{className:"need-more-line-height"},l.default("专业数据源:")),r.createElement("br",null),this.getTextFromArray(n,"advanSources")),this.getLineFromConfig(n,"advanSources")),r.createElement("tr",null,r.createElement("td",{rowSpan:4},l.default("数据建模")),r.createElement("td",null,l.default("数据模型")),this.getLineFromConfig(n,"dashboard")),r.createElement("tr",{id:"product-type-url-param"},r.createElement("td",null,l.default("数据模型中关联URL参数")),this.getLineFromConfig(n,"dataModelBindUrlParam")),r.createElement("tr",{id:"data-model-fuzzy"},r.createElement("td",null,l.default("数据脱敏")),this.getLineFromConfig(n,"dataModelFuzzy")),r.createElement("tr",null,r.createElement("td",null,l.default("SQL建模")),this.getLineFromConfig(n,"dashboard")),r.createElement("tr",{id:"product-type-tunnel"},r.createElement("td",{rowSpan:1},l.default("内网联通性")),r.createElement("td",null,l.default("可连接内网数据库")),this.getLineFromConfig(n,"tunnel")),r.createElement("tr",null,r.createElement("td",{rowSpan:11},l.default("图表组件")),r.createElement("td",null,r.createElement("span",{className:"need-more-line-height"},l.default("常规组件:")),r.createElement("br",null),this.getTextFromArray(n,"regularCharts")),this.getLineFromConfig(n,"regularCharts")),r.createElement("tr",{id:"product-type-chart"},r.createElement("td",null,r.createElement("span",{className:"need-more-line-height"},l.default("高级组件:")),r.createElement("br",null),this.getTextFromArray(n,"basicCharts")),this.getLineFromConfig(n,"basicCharts")),r.createElement("tr",{id:"product-type-chart-advan"},r.createElement("td",null,r.createElement("span",{className:"need-more-line-height"},l.default("专业组件:")),r.createElement("br",null),this.getTextFromArray(n,"advanCharts")),this.getLineFromConfig(n,"advanCharts")),r.createElement("tr",{id:"chart-timeline"},r.createElement("td",null,l.default("折线、柱图、饼图组件时间轴功能")),this.getLineFromConfig(n,"timeline")),r.createElement("tr",{id:"chart-narrativeMode"},r.createElement("td",null,l.default("叙事柱图、叙事折线图")),this.getLineFromConfig(n,"narrativeMode")),r.createElement("tr",null,r.createElement("td",null,l.default("自定义组件")),this.getLineFromConfig(n,"customCharts")),r.createElement("tr",null,r.createElement("td",null,l.default("在地图图表中上传和展示自定义 GeoJSON ")),this.getLineFromConfig(n,"customGeoJSON")),r.createElement("tr",null,r.createElement("td",null,l.default("地图范围根据下钻或联动参数动态变化 ")),r.createElement("td",{className:"fresh-col text-success"},r.createElement("i",{className:"fa fa-check","aria-hidden":"true"})),r.createElement("td",{className:"basic-col text-success"},r.createElement("i",{className:"fa fa-check","aria-hidden":"true"})),r.createElement("td",{className:"advan-col text-success"},r.createElement("i",{className:"fa fa-check","aria-hidden":"true"}))),r.createElement("tr",{id:"map-scopr-by-url"},r.createElement("td",null,l.default("地图范围根据URL参数动态切换 ")),this.getLineFromConfig(n,"mapScopeByUrlParam")),r.createElement("tr",{id:"map-auto-fit-by-data"},r.createElement("td",null,l.default("地图范围根据数据自适应 ")),this.getLineFromConfig(n,"mapGeoAutoFit")),r.createElement("tr",null,r.createElement("td",null,l.default("自定义图表主题")),r.createElement("td",{className:"fresh-col text-danger"},r.createElement("i",{className:"fa fa-close","aria-hidden":"true"})),r.createElement("td",{className:"basic-col text-danger"},r.createElement("i",{className:"fa fa-close","aria-hidden":"true"})),r.createElement("td",{className:"advan-col text-success"},r.createElement("i",{className:"fa fa-check","aria-hidden":"true"}))),r.createElement("tr",null,r.createElement("td",{rowSpan:3},l.default("过滤条件组件")),r.createElement("td",null,r.createElement("span",{className:"need-more-line-height"},l.default("常规组件:")),r.createElement("br",null),this.getTextFromArray(n,"regularConditions")),this.getLineFromConfig(n,"regularConditions")),r.createElement("tr",{id:"product-type-condition"},r.createElement("td",null,r.createElement("span",{className:"need-more-line-height"},l.default("专业组件:")),r.createElement("br",null),this.getTextFromArray(n,"advanConditions")),this.getLineFromConfig(n,"advanConditions")),r.createElement("tr",{id:"chart-condition"},r.createElement("td",null,r.createElement("span",{className:"need-more-line-height"},l.default("单个图表的交互过滤条件"))),r.createElement("td",{className:"fresh-col text-danger"},r.createElement("i",{className:"fa fa-close","aria-hidden":"true"})),r.createElement("td",{className:"basic-col text-danger"},r.createElement("i",{className:"fa fa-close","aria-hidden":"true"})),r.createElement("td",{className:"advan-col text-success"},r.createElement("i",{className:"fa fa-check","aria-hidden":"true"}))),r.createElement("tr",null,r.createElement("td",{rowSpan:9},l.default("数据大屏")),r.createElement("td",null,l.default("大屏的创建与编辑")),this.getLineFromConfig(n,"dashboard")),r.createElement("tr",{id:"product-type-templete"},r.createElement("td",null,l.default("可用大屏模版数")),this.getLineFromConfig(n,"dashboardTemplet","","个")),r.createElement("tr",null,r.createElement("td",null,l.default("可公开分享的大屏数（包括加密）")),this.getLineFromConfig(n,"publishDashboardNum","","个")),r.createElement("tr",null,r.createElement("td",null,l.default("可付费拓展发布大屏数目")),this.getLineFromConfig(n,"canExtendDashNum")),r.createElement("tr",{id:"product-type-drilldown"},r.createElement("td",null,l.default("图表下钻")),this.getLineFromConfig(n,"drill")),r.createElement("tr",null,r.createElement("td",null,l.default("图表联动")),this.getLineFromConfig(n,"dep")),r.createElement("tr",{id:"product-type-hide"},r.createElement("td",null,l.default("编辑时图层锁定和隐藏")),this.getLineFromConfig(n,"chartHide")),r.createElement("tr",{id:"product-type-dashboard-chartWarning"},r.createElement("td",null,l.default("数据预警")),this.getLineFromConfig(n,"chartWarning")),r.createElement("tr",null,r.createElement("td",null,l.default("导出页面数据为Excel")),r.createElement("td",{className:"fresh-col text-danger"},r.createElement("i",{className:"fa fa-close","aria-hidden":"true"})),r.createElement("td",{className:"basic-col text-danger"},r.createElement("i",{className:"fa fa-close","aria-hidden":"true"})),r.createElement("td",{className:"advan-col text-success"},r.createElement("i",{className:"fa fa-check","aria-hidden":"true"}))),r.createElement("tr",{id:"product-type-report"},r.createElement("td",{rowSpan:8},l.default("报表")),r.createElement("td",null,l.default("报表的创建与编辑")),this.getLineFromConfig(n,"report")),r.createElement("tr",{id:"product-type-report-publish"},r.createElement("td",null,l.default("可公开分享的报表数（包括加密）")),this.getLineFromConfig(n,"publishReportNum","","个")),r.createElement("tr",null,r.createElement("td",null,l.default("图表下钻")),this.getLineFromConfig(n,"drill")),r.createElement("tr",null,r.createElement("td",null,l.default("图表联动")),r.createElement("td",{className:"fresh-col text-danger"},r.createElement("i",{className:"fa fa-close","aria-hidden":"true"})),r.createElement("td",{className:"basic-col text-success"},r.createElement("i",{className:"fa fa-check","aria-hidden":"true"})),r.createElement("td",{className:"advan-col text-success"},r.createElement("i",{className:"fa fa-check","aria-hidden":"true"}))),r.createElement("tr",null,r.createElement("td",null,l.default("权限控制")),this.getLineFromConfig(n,"report")),r.createElement("tr",null,r.createElement("td",null,l.default("定时邮件")),r.createElement("td",{className:"fresh-col text-danger"},r.createElement("i",{className:"fa fa-close","aria-hidden":"true"})),r.createElement("td",{className:"basic-col text-success"},r.createElement("i",{className:"fa fa-check","aria-hidden":"true"})),r.createElement("td",{className:"advan-col text-success"},r.createElement("i",{className:"fa fa-check","aria-hidden":"true"}))),r.createElement("tr",{id:"product-type-report-chartWarning"},r.createElement("td",null,l.default("数据预警")),this.getLineFromConfig(n,"chartWarning")),r.createElement("tr",null,r.createElement("td",null,l.default("导出页面数据为Excel")),r.createElement("td",{className:"fresh-col text-danger"},r.createElement("i",{className:"fa fa-close","aria-hidden":"true"})),r.createElement("td",{className:"basic-col text-danger"},r.createElement("i",{className:"fa fa-close","aria-hidden":"true"})),r.createElement("td",{className:"advan-col text-success"},r.createElement("i",{className:"fa fa-check","aria-hidden":"true"}))),r.createElement("tr",null,r.createElement("td",{rowSpan:5},l.default("发布分享")),r.createElement("td",null,l.default("公开分享")),this.getLineFromConfig(n,"publishShare")),r.createElement("tr",null,r.createElement("td",null,l.default("加密分享")),this.getLineFromConfig(n,"passwordShare")),r.createElement("tr",null,r.createElement("td",null,l.default("iframe域名免密")),this.getLineFromConfig(n,"passwordShare")),r.createElement("tr",null,r.createElement("td",null,l.default("通过Token验证分享")),this.getLineFromConfig(n,"tokenShare")),r.createElement("tr",null,r.createElement("td",null,l.default("IP白名单")),this.getLineFromConfig(n,"ipWhiteList")),r.createElement("tr",{id:"product-AIQA"},r.createElement("td",{rowSpan:2},l.default("AI智能")),r.createElement("td",null,l.default("AI问答")),this.getLineFromConfig(n,"smartAnswer")),r.createElement("tr",{id:"product-AI-explore"},r.createElement("td",null,l.default("AI探索")),this.getLineFromConfig(n,"dashboard")),r.createElement("tr",null,r.createElement("td",{rowSpan:2},l.default("大屏和报表的导入导出")),r.createElement("td",null,l.default("导出")),this.getLineFromConfig(n,"dashboard")),r.createElement("tr",{id:"product-type-import"},r.createElement("td",null,l.default("导入")),this.getLineFromConfig(n,"import")),r.createElement("tr",{id:"product-sta"},r.createElement("td",{rowSpan:1},l.default("访问统计")),r.createElement("td",null,l.default("大屏和报表页面的浏览量统计")),r.createElement("td",{className:"fresh-col text-success"},r.createElement("i",{className:"fa fa-check","aria-hidden":"true"})),r.createElement("td",{className:"basic-col text-success"},r.createElement("i",{className:"fa fa-check","aria-hidden":"true"})),r.createElement("td",{className:"advan-col text-success"},r.createElement("i",{className:"fa fa-check","aria-hidden":"true"}))),e?null:r.createElement("tr",null,r.createElement("td",null),r.createElement("td",null),r.createElement("td",{className:"fresh-col"},"free"===a?s:null),r.createElement("td",{className:"basic-col"},"free"===a||"fresh"===a?s:null),r.createElement("td",{className:"advan-col"},s))))},s.displayName="ProductTypeContant",s}(r.PureComponent);t.default=s});
;sugar.define("sugar:widgets/product-type/product-type-modal.tsx",function(e,t){"use strict";function n(e){return o?o.showUpdate(e):null}Object.defineProperty(t,"__esModule",{value:!0}),t.showUpdate=t.UpdateModalComponent=void 0;var o,a=e("sugar:node_modules/tslib/tslib.js"),l=e("sugar:utils/i18n.ts"),i=e("sugar:node_modules/react/index.js"),s=e("sugar:node_modules/amis/lib/index.js"),d=e("sugar:widgets/product-type/product-type-contant.tsx"),r=e("sugar:utils/common-helper.ts"),u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={open:!1},t}return a.__extends(t,e),t.prototype.componentWillMount=function(){this.handleConfirm=this.handleConfirm.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this)},t.prototype.componentDidMount=function(){window.document.onkeydown=this.handleKeydown},t.prototype.handleKeydown=function(e){this.state.open&&13===e.keyCode&&this.handleConfirm()},t.prototype.handleConfirm=function(){this.setState({open:!1}),window.open(r.payLink,"_blank")},t.prototype.handleCancel=function(){this.setState({open:!1})},t.prototype.showUpdate=function(e){this.setState({open:!0},function(){e&&setTimeout(function(){var t=document.getElementById(e);t&&(t.classList.add("active"),t&&t.scrollIntoView({behavior:"smooth",block:"end",inline:"center"}))},500)})},t.prototype.render=function(){var e=(this.props,this.state.open);return e?i.createElement(s.Modal,{show:!0,contentClassName:"big-modal update-modal",className:"update-modal-outside"},i.createElement(s.Modal.Header,{onClose:this.handleCancel},i.createElement(s.Modal.Title,null,l.default("Sugar 各版本特性（当前为"),window.sugarConfig.nowProductConfig.name,"）")),i.createElement(s.Modal.Body,null,i.createElement(d.default,{isModal:!0})),i.createElement(s.Modal.Footer,null,i.createElement(s.Button,{level:"primary",onClick:this.handleConfirm},l.default("去升级")),i.createElement(s.Button,{onClick:this.handleCancel},l.default("暂不升级")))):null},t.displayName="UpdateModal",t.defaultProps={},t}(i.PureComponent),p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.render=function(){return i.createElement(u,a.__assign({},this.props,{ref:function(e){o=e}}))},t}(i.PureComponent);t.UpdateModalComponent=p,t.showUpdate=n});
;sugar.define("sugar:utils/exception.ts",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.captureException=void 0;var i=e("sugar:node_modules/amis/lib/index.js");t.captureException=function(e,t){i.toast.error(e.message);var r=window.Raven;r&&r.captureException&&r.captureException(e,{extra:t})}});
;sugar.define("sugar:utils/attachment-adpator.ts",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.attachmentAdpator=void 0;var a=e("sugar:node_modules/tslib/tslib.js"),n=e("sugar:utils/i18n.ts");t.attachmentAdpator=function(e){if(e&&e.headers&&e.headers["content-disposition"]){var t=e.headers["content-disposition"],i="";if(t&&-1!==t.indexOf("attachment")){var o=/filename[^;=\n]*=((['"]).*?\2|[^;\n]*)/,d=o.exec(t);null!=d&&d[1]&&(i=d[1].replace(/['"]/g,""));var s=e.headers["content-type"],r="[object Blob]"===e.data.toString()?e.data:new Blob(["[object Object]"===e.data.toString()?JSON.stringify(e.data):e.data],{type:s});if("undefined"!=typeof window.navigator.msSaveBlob)window.navigator.msSaveBlob(r,i);else{var c=window.URL||window.webkitURL,l=c.createObjectURL(r);if(i){var u=document.createElement("a");"undefined"==typeof u.download?window.location=l:(u.href=l,u.download=i,document.body.appendChild(u),u.click())}else window.location=l;setTimeout(function(){c.revokeObjectURL(l)},100)}return a.__assign(a.__assign({},e),{data:{status:0,msg:n.default("文件即将开始下载。。")}})}}else if("[object Blob]"===e.data.toString())return new Promise(function(t,n){var i=new FileReader;i.addEventListener("loadend",function(o){var d=i.result;try{t(a.__assign(a.__assign({},e),{data:a.__assign({},JSON.parse(d))}))}catch(o){n(o)}}),i.readAsText(e.data)});return e}});
;sugar.define("sugar:sites/amis-renderer.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=e("sugar:node_modules/tslib/tslib.js"),r=e("sugar:utils/i18n.ts"),a=e("sugar:node_modules/react/index.js"),o=e("sugar:node_modules/prop-types/index.js"),s=e("sugar:node_modules/axios/index.js"),i=e("sugar:node_modules/copy-to-clipboard/index.js"),u=e("sugar:node_modules/amis/lib/index.js"),c=e("sugar:utils/exception.ts"),p=e("sugar:utils/attachment-adpator.ts");e("sugar:node_modules/amis/lib/locale/en-US.js");var d=e("sugar:utils/storage.ts"),l=d.get("language")||"zh_cn",f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.componentDidCatch=function(e,t){t.amisRendererError=1,c.captureException(e,t)},t.prototype.componentWillMount=function(){var e=this;if(!t.env){var n=this.props.router||this.context.router,a=function(t){var r,a,o=t.indexOf("?");o>=0?(r=t.substring(0,o),a=t.substring(o)):(r=t,a="");var s=e.context.location||n.getCurrentLocation();return r?"/"!=r[0]:r=s.pathname,r+a};t.env={theme:"sugar-cxd",isCurrentUrl:function(e){var t=a(e);return n.isActive(t)},jumpTo:function(e,t){e=a(e),t&&"url"===t.actionType&&t.blank?window.open(e,"_blank"):/^https?:\/\//.test(e)?window.location.replace(e):n.push(e)},updateLocation:function(e,t){n[t?"replace":"push"](a(e))},fetcher:function(e){function n(e){if("object"==typeof e)for(var t in e)if(e.hasOwnProperty(t)){var r=e[t];if(Array.isArray(r))for(var a=0,o=r;a<o.length;a++){var s=o[a];n(s)}else"string"==typeof r?e[t]=r.trim():"object"==typeof r&&n(r)}}var r=e.url,a=e.method,o=e.data,i=e.config;if(o&&"excel"in o){var u=new FormData;u.set("name",o.name),u.set("remark",o.remark||""),u.set("uploadMode",o.uploadMode||""),u.set("type","100"),u.set("excel",o.excel.file),u.set("excelData",JSON.stringify(o.excel.excelData)),o=u}return o&&o instanceof FormData?(i.headers=i.headers||{},i.headers["Content-Type"]="multipart/form-data"):!o||"string"==typeof o||o instanceof Blob||o instanceof ArrayBuffer||(o=JSON.parse(JSON.stringify(o)),n(o),o=JSON.stringify(o),i=i||{},i.headers=i.headers||{},i.headers["Content-Type"]="application/json"),"post"!==a&&"put"!==a&&"patch"!==a?(o&&(i.params=o),s[a](r,i).then(function(e){return e.data.patch&&t.update&&t.update(e),e})):s[a](r,o,i).then(function(e){return e&&e.headers&&e.headers["content-disposition"]?p.attachmentAdpator(e):(e.data.patch&&t.update&&t.update(e),e)})},copy:function(e,t){void 0===t&&(t={});var n=i(e,t);return n&&(!t||t.shutup!==!0)&&u.toast.info(r.default("内容已拷贝到剪切板")),n},notify:function(e,t){return u.toast[e]?u.toast[e](t===r.default("保存成功")?r.default("操作成功"):t,r.default("error"===e?"系统错误":"系统消息")):console.warn("[Notify]",e,t)},alert:u.alert,confirm:u.confirm,richTextToken:"QF4B3D3A13hC7D6D5D5D2E3B2C6A6B7cODOe1HLEBFZOTGHW=="}}},t.prototype.render=function(){t.update=this.props.update;var e=this.props,r=e.schema,a=n.__rest(e,["schema"]);return u.render(r,n.__assign(n.__assign({},a),{locale:l}),t.env)},t.displayName="AmisRenderer",t.contextTypes={router:o.any,location:o.any},t}(a.Component);t.default=f});
;sugar.define("sugar:sites/group/manage/widget-template/util.ts",function(e,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.sourceTypes=void 0;var t=e("sugar:utils/i18n.ts");s.sourceTypes={1:t.default("报表"),3:t.default("大屏")}});
;sugar.define("sugar:widgets/widget-template/template-dialog.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SelectWidgetTemplate=t.WidgetTemplateForm=void 0;var a=e("sugar:node_modules/tslib/tslib.js"),r=e("sugar:node_modules/react/index.js"),s=e("sugar:sites/amis-renderer.tsx"),n=e("sugar:utils/i18n.ts"),o=e("sugar:sites/group/manage/widget-template/util.ts"),l=e("sugar:widgets/charts/chart-manager.tsx"),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.render=function(){var e=this;return r.createElement(s.default,{schema:{type:"dialog",show:this.props.show,title:n.default("设置为模板"),onClose:function(){return e.props.toggle(!1)},body:[{type:"form",data:{name:this.props.name||""},onFinished:function(t){return e.props.onSubmit(t,e.props.isDash),!1},controls:[{type:"text",name:"name",required:!0,validations:"maxLength:30",label:n.default("名称")},{type:"static",visible:this.props.isDemo,value:n.default("自定义组件的代码未修改，是否确认设置为模板？")}]}]}})},t}(r.Component);t.WidgetTemplateForm=i;var p=function(e){function t(t){var a=e.call(this,t)||this;return a.changeSourceType=a.changeSourceType.bind(a),a.state={sourceType:a.props.isDash?3:1},a}return a.__extends(t,e),t.prototype.changeSourceType=function(e){this.setState({sourceType:e})},t.prototype.render=function(){var e=this,t=this.props,a=t.groupHash,i=t.show,p=t.isDash,u=t.type,c=void 0===u?"":u,d=[{children:function(){return r.createElement("div",{style:{margin:"0 10px 10px 15px",overflow:"hidden"}},c?r.createElement("span",null,n.default("当前组件类型：")," ",l.getChartNameByType(c)):null,r.createElement("span",{style:{"float":"right"}},r.createElement("a",{className:"text-info",href:"/docs/Chart-widget-template",target:"_blank"},n.default("文档说明"))))}},{type:"form",data:{sourceType:this.state.sourceType},horizontal:{left:"col-md-3"},controls:[{type:"select",label:n.default("创建源类型"),name:"sourceType",clearable:!0,onChange:this.changeSourceType,options:[{label:n.default("全部"),value:0},{label:n.default("报表"),value:1},{label:n.default("大屏"),value:3}]}]},{type:"crud",mode:"list",api:"/api/manage/group/"+a+"/widgetTemplate/getByType?type="+c+"&sourceType="+(this.state.sourceType||"")+"&page=$page&perPage=$perPage",defaultParams:{page:1,perPage:10},syncLocation:!1,primaryField:"hash",headerToolbar:[],footerToolbar:["statistics","pagination"],listItem:{title:"$name",body:[{children:function(e){var t=e.data;return r.createElement("span",null,1===t.shareType?n.default("共享")+" - ":"",o.sourceTypes[t.sourceType]," - ",l.getChartNameByType(t.type))}}],actions:[{type:"button",label:n.default("使用"),onClick:function(t,a){var r=a.data;e.props.useTemplate(r,p)}}]}}];return r.createElement(s.default,{schema:{type:"dialog",title:n.default("选用模板"),show:i,onClose:function(){return e.props.toggle(!1)},disabled:!0,actions:[{type:"button",actionType:"cancel",label:n.default("关闭")}],body:d}})},t}(r.Component);t.SelectWidgetTemplate=p});
;sugar.define("sugar:widgets/editor/toolbar.tsx",function(t,e){"use strict";function a(t,e){var a,i=window.sugarConfig,n=i.nowProductConfig,s=i.productType;if(n&&n.charts){var o=n.charts;if(o.indexOf(t)<0)return!1;if((null===(a=null===e||void 0===e?void 0:e.version)||void 0===a?void 0:a.length)&&(null===e||void 0===e?void 0:e.version.indexOf(s))<0)return!1}return!0}function i(t,a,i,n){Object.keys(e.chartKinds).forEach(function(a,i){t[a]={iconCls:f[i],name:e.chartKindsName[a].name,charts:[]},e.chartKinds[a].hasOwnProperty("value")&&e.chartKinds[a].value.forEach(function(i,n){var s={type:i,name:e.chartKindsName[a].value[n],charts:[]};t[a].charts.push(s)})}),a.forEach(function(a){if(g(a,i,n)&&t[a.kind]){var s=e.chartKinds[a.kind];if(s.hasOwnProperty("value")){var o=!1;s.value.forEach(function(e,i){"commonChart"===s.name&&(a.type.indexOf(e)>-1||!o&&-1===a.type.indexOf(e)&&i===s.value.length-1)&&(o=a.type.indexOf(e)>-1,t[a.kind].charts[i].charts.push(a)),"map"===s.name&&(a.mapCluster===e?t[a.kind].charts[i].charts.push(a):"map-layer"===a.type&&"map-layer"===e?t[a.kind].charts[i].charts.push(a):a.type.startsWith(e)&&"3d-map"===e&&t[a.kind].charts[i].charts.push(a))})}else t[a.kind].charts.push(a)}})}function n(t){var e=window.sugarConfig.nowProductConfig;if(e&&e.conditions){var a=e.conditions;if(a.indexOf(t)<0)return!1}return!0}Object.defineProperty(e,"__esModule",{value:!0}),e.canUseConditions=e.getChartsByKind=e.canUseChart=e.chartKindsName=e.chartKinds=void 0;var s=t("sugar:node_modules/tslib/tslib.js"),o=t("sugar:utils/i18n.ts"),r=t("sugar:node_modules/react/index.js"),l=t("sugar:node_modules/classnames/index.js"),c=t("sugar:node_modules/amis/lib/index.js"),d=t("sugar:widgets/charts/chart-manager.tsx"),h=t("sugar:widgets/conditions/condition-manager.tsx"),m=t("sugar:widgets/product-type/product-type-modal.tsx"),u=t("sugar:widgets/widget-template/template-dialog.tsx"),p=t("sugar:utils/fetch.ts");e.chartKinds={smart:{name:"smart"},commonChart:{name:"commonChart",value:["line","bar","pie","other"]},otherChart:{name:"otherChart"},table:{name:"table"},target:{name:"target"},map:{name:"map",value:["map-layer","area","scatter","label","heatmap","flyline","3d-map"]},text:{name:"text"},media:{name:"media"},interaction:{name:"interaction"},material:{name:"material"},conditions:{name:"condition",value:["select","date","text"]}},e.chartKindsName={smart:{name:o.default("智能图表")},commonChart:{name:o.default("图表"),value:[o.default("折线图"),o.default("柱状图"),o.default("饼图"),o.default("其它")]},otherChart:{name:o.default("高级图表")},table:{name:o.default("表格")},target:{name:o.default("指标")},map:{name:o.default("地图"),value:[o.default("多层地图"),o.default("色彩地图"),o.default("散点气泡地图"),o.default("标签地图"),o.default("热力地图"),o.default("飞线路径地图"),o.default("3D地图")]},text:{name:o.default("文字")},media:{name:o.default("媒体")},interaction:{name:o.default("交互")},material:{name:o.default("素材")},conditions:{name:o.default("过滤条件"),value:[o.default("单选多选"),o.default("日期时间"),o.default("输入类")]}};var f=["btn-smart-chart","btn-bar-chart","btn-th-large","btn-table","btn-text-width","btn-map","btn-etsy","btn-picture-o","btn-magic","btn-puzzle-piece"],g=function(t,e,a){return"smart-audio"===t.type&&window.sugarConfig.enableSmartAudioCompany&&a&&window.sugarConfig.enableSmartAudioCompany!==a?!1:e&&t.reportOnly||!e&&t.dashboardOnly?!1:!0},v=function(t){function e(e){var a=t.call(this,e)||this;return a.toggleDialog=a.toggleDialog.bind(a),a.createWidget=a.createWidget.bind(a),a.state={showDialog:!1},a}return s.__extends(e,t),e.prototype.createWidget=function(t){var e=this,a=this.props.charts.find(function(e){return e.type===t.type}),i=null;try{i=JSON.parse(t.config)}catch(n){return this.toggleDialog(!1),void console.error("Parse widget template failed")}if((null===a||void 0===a?void 0:a.initialState)&&(null===i||void 0===i?void 0:i.config)instanceof Object){var r=i.width,l=i.height,d=i.titleAlign,h=i.hideTitle,m=i.config,u=JSON.parse(JSON.stringify(a.initialState));"image"===t.type&&2===m.selfUpload&&(m.selfUpload=1),u.config=m,"string"==typeof d&&(u.titleAlign=d),"boolean"==typeof h&&(u.hideTitle=h),(1===t.sourceType&&!this.props.isDash||3===t.sourceType&&this.props.isDash)&&(r>0&&(u.width=r),l>0&&(u.height=l*(1===t.sourceType?10:1))),"custom-iframe"===t.type&&m.htmlHash?p.get("/api/group/"+this.props.groupHash+"/html/"+m.htmlHash+"/copy").then(function(t){var i;(null===(i=t.data)||void 0===i?void 0:i.hash)?(u.config.htmlHash=t.data.hash,e.props.addChart(s.__assign(s.__assign({},a),{initialState:u}))):c.toast.error(o.default("添加自定义组件失败"))}):setTimeout(function(){e.props.addChart(s.__assign(s.__assign({},a),{initialState:u}))})}this.toggleDialog(!1)},e.prototype.toggleDialog=function(t){this.setState({showDialog:!!t})},e.prototype.render=function(){var t=this,e=this.props,a=e.groupHash,i=e.isDash;return r.createElement(r.Fragment,null,r.createElement("div",{className:"btns-box",key:"widgetTemplate"},r.createElement("div",{className:"btn-item",onClick:function(){return t.toggleDialog(!0)}},r.createElement("div",{className:"btn-container"},r.createElement("i",{className:"btn-container-toolbar-icon fa fa-codepen"}),r.createElement("span",{className:"btn-text"},o.default("组件模板"))))),r.createElement(u.SelectWidgetTemplate,{key:(i?"dashboard":"report")+"_select",isDash:i,groupHash:a,show:this.state.showDialog,useTemplate:this.createWidget,toggle:this.toggleDialog}))},e}(r.PureComponent),y=function(t){function c(){return null!==t&&t.apply(this,arguments)||this}return s.__extends(c,t),c.prototype.componentWillMount=function(){this.showChartList=this.showChartList.bind(this),this.hideChartList=this.hideChartList.bind(this),this.showConditionList=this.showConditionList.bind(this),this.hideConditionList=this.hideConditionList.bind(this),this.addChart=this.addChart.bind(this),this.addCondition=this.addCondition.bind(this),this.setState({showChartList:"",showConditionList:!1})},c.prototype.showChartList=function(t){this.setState({showChartList:t})},c.prototype.hideChartList=function(){this.setState({showChartList:""})},c.prototype.showConditionList=function(){this.setState({showConditionList:!0})},c.prototype.hideConditionList=function(){this.setState({showConditionList:!1})},c.prototype.addChart=function(t){return a(t.type,t)?(this.props.addChart(t,this.props.isDash?"dashboard":"report",this.props.maxZIndex),void this.hideChartList()):void m.showUpdate("product-type-chart")},c.prototype.addCondition=function(t){return n(t.type)?(this.props.addCondition(t,this.props.isDash?"dashboard":"report",this.props.maxZIndex),void this.hideConditionList()):void m.showUpdate("product-type-condition")},c.prototype.render=function(){var t=this,s=this.props.isDash,c=d.getChartsWithVariants(),m=h.getConditionsWithVariants(),u={};i(u,c,s,this.props.companyEmailSuffix),m.forEach(function(t){var a=e.chartKinds.conditions;a.hasOwnProperty("value")&&a.value.forEach(function(e,a){(t.type.toLowerCase().indexOf(e)>-1&&(0===a||1===a)||("text"===t.type||"logic"===t.type)&&2===a)&&u.conditions.charts[a].charts.push(t)})});var p=[],f=Object.keys(e.chartKinds).map(function(e,i){var n=u[e],s="";return s="smart"===e?r.createElement("div",{key:i,className:"btn-item",style:{cursor:"pointer"},onClick:function(){return t.addChart(n.charts[0])}},r.createElement("div",{className:"btn-container"},r.createElement("i",{className:"btn-container-toolbar-icon "+n.iconCls}),r.createElement("span",{className:"btn-text"},n.name))):"conditions"!==e?r.createElement("div",{key:i,className:"btn-item",style:{cursor:"default"},onMouseOver:function(){return t.showChartList(e)},onMouseOut:t.hideChartList},r.createElement("div",{className:"btn-container"},r.createElement("i",{className:"btn-container-toolbar-icon "+n.iconCls}),r.createElement("span",{className:"btn-text"},n.name)),r.createElement("div",{className:l("btn-item__list",{show:t.state.showChartList===e})},r.createElement("div",{className:"list-container"},r.createElement("div",{className:"tool-list clearfix"},n.charts.map(function(e,i){var n=null;return n=e.hasOwnProperty("charts")?r.createElement("ul",{key:i,className:"tool-list clearfix"},r.createElement("li",{className:"tool-list-title"},e.name),e.charts.map(function(e,i){return r.createElement("li",{key:i,onClick:function(){return t.addChart(e)}},r.createElement("span",{className:"tool-item"},r.createElement("div",{className:"tool-item__icon "+e.iconClassName},a(e.type,e)?null:r.createElement("div",{className:"tool-item__forbidden"},r.createElement("i",{className:"fa fa-lock","aria-hidden":"true"}))),r.createElement("div",{className:"tool-item__name"},e.name)))})):r.createElement("li",{key:i,onClick:function(){return t.addChart(e)}},r.createElement("span",{className:"tool-item"},r.createElement("div",{className:"tool-item__icon "+e.iconClassName},a(e.type)?null:r.createElement("div",{className:"tool-item__forbidden"},r.createElement("i",{className:"fa fa-lock","aria-hidden":"true"}))),r.createElement("div",{className:"tool-item__name"},e.name)))}))))):null,["interaction","material"].indexOf(e)>-1?(p.push(s),null):s});return[r.createElement("div",{className:"btns-box",key:"charts"},f),r.createElement("div",{className:"cut-line",key:"line1"}),s?r.createElement("div",{className:"btns-box",key:"material"},p):null,r.createElement("div",{className:"btns-box",key:"conditions"},r.createElement("div",{className:"btn-item",style:{cursor:"default"},onMouseOver:this.showConditionList,onMouseOut:this.hideConditionList},r.createElement("div",{className:"btn-container"},r.createElement("i",{className:"btn-container-toolbar-icon btn-list-ul"}),r.createElement("span",{className:"btn-text"},o.default("过滤条件"))),r.createElement("div",{className:l("btn-item__list",{show:this.state.showConditionList})},r.createElement("div",{className:"list-container"},r.createElement("div",{className:"tool-list clearfix"},u.conditions.charts.map(function(e,a){var i=null;return e.hasOwnProperty("charts")&&(i=r.createElement("ul",{key:a,className:"tool-list clearfix"},e.charts.map(function(i,o){return"container"===i.type||s&&["text","treeSelect","logic"].includes(i.type)?null:[0===o?r.createElement("li",{key:""+a+o,className:"tool-list-title"},e.name):null,r.createElement("li",{key:o,onClick:function(){return t.addCondition(i)}},r.createElement("span",{className:"tool-item"},r.createElement("div",{className:"tool-item__icon "+i.iconClassName},n(i.type)?null:r.createElement("div",{className:"tool-item__forbidden"},r.createElement("i",{className:"fa fa-lock","aria-hidden":"true"}))),r.createElement("div",{className:"tool-item__name"},i.name)))]}))),i})))))),r.createElement(v,{key:"WidgetTemplateBtn",groupHash:this.props.groupHash,isDash:!!this.props.isDash,charts:c,addChart:this.addChart})]},c.displayName="Toolbar",c}(r.PureComponent);e.default=y,e.canUseChart=a,e.getChartsByKind=i,e.canUseConditions=n});
;sugar.define("sugar:widgets/charts/chart-manager.tsx",function(a,t){"use strict";function n(a){if(M.push(a),b[a.type]=a,a.chartEigens)for(var t=0,n=a.chartEigens;t<n.length;t++){var e=n[t];if(e.chartType=a.type,!e.noRecommend){T.push(e),P[a.type]||(P[a.type]={});var r=void 0===e.variantIndex?-1:e.variantIndex;P[a.type][r]||(P[a.type][r]=[]),P[a.type][r].push(T.length-1)}}}function e(a){return!!b[a]}function r(){return M.map(function(a){return C.__assign({},a)})}function i(){return T.map(function(a){return C.__assign({},a)})}function o(){return C.__assign({},P)}function d(){var a=[];return M.forEach(function(t){a.push(t),t.variants&&t.variants.length&&t.variants.forEach(function(n){a.push(w({},t,n))})}),a}function u(a){return b[a]?C.__assign({},b[a]):null}function s(a,t){var n=b[a]?C.__assign({},b[a]):null;return n&&void 0!==t&&n.variants&&n.variants[t]?w({},n,n.variants[t]):null}function g(a,t){var n=b[a];if(!n)return null;var e=n.component;return y.createElement(e,C.__assign({},t))}function f(a){var n=u(a.type);if(!n)return a;var e=w({},t.commonChartInitialState);return n.initialState&&(e=w({},e,n.initialState),window.sugarConfig.enableDataModel&&n.dataModelPanelShow&&"api"===n.initialState.dataType&&(e.dataType="dataModel")),a.isDashChart&&(e=w({},e,t.commonDashboardChartInitialState),n.initialDashboardState&&(e=w({},e,n.initialDashboardState))),_({},e,a,x)}function l(a){return a instanceof Array?a.map(function(a){return f(a)}):f(a)}function c(a,t,n,e,r){void 0===e&&(e=!1),void 0===r&&(r="");var i=b[t],o=i.validate;return r&&i.subCharts&&i.subCharts[r]&&(o=i.subCharts[r].validate),o?o(a,n,e):!0}function h(a,t,n){for(var e=0;e<a.length;e++)if(S(t,""+n+a[e][0])!==a[e][1])return!1;return!0}function p(a,t){var n=I.canUseChart(a);if(!n)return{info:v.default("当前版本不支持此类图表"),showUpdateInfo:"product-type-chart"};var e=D(a,t.config);if(e)return e;var r=E(a,t.config);if(r)return r;var i=U(t);if(i)return i;var o=j(t);if(o)return o;var d=B(t);return d?d:!1}function m(a){var t=b[a];return(null===t||void 0===t?void 0:t.enableTemplate)?t.docName||t.name:""}Object.defineProperty(t,"__esModule",{value:!0}),t.getChartNameByType=t.getChartForbiddenInfo=t.needShowDataModelPanel=t.validate=t.mergeInitialState=t.mergeSingleInitialState=t.commonDashboardChartInitialState=t.commonChartInitialState=t.create=t.getChartVariant=t.getChartByType=t.getChartsWithVariants=t.getChartEigenMap=t.getChartEigens=t.getCharts=t.registered=t.register=void 0;var C=a("sugar:node_modules/tslib/tslib.js"),v=a("sugar:utils/i18n.ts"),y=a("sugar:node_modules/react/index.js"),w=a("sugar:node_modules/lodash/merge.js"),_=a("sugar:node_modules/lodash/mergeWith.js"),S=a("sugar:node_modules/lodash/get.js"),I=a("sugar:widgets/editor/toolbar.tsx"),M=[],b={},T=[],P={};t.register=n,t.registered=e,t.getCharts=r,t.getChartEigens=i,t.getChartEigenMap=o,t.getChartsWithVariants=d,t.getChartByType=u,t.getChartVariant=s,t.create=g,t.commonChartInitialState={dataConfig:{continuity_type:"simple",continuity_time_step:"1Hour",continuity_empty_val:"0"},config:{shadowBlur:4,chartZoom:{open:!0,chartSize:"auto",centering:"center",dialogSize:"full"}}},t.commonDashboardChartInitialState={width:400,height:300,dataConfig:{needAutoRefresh:!0,autoRefreshInterval:1800},config:{isLock:!1,isHidden:!1,hideLoading:!0,opacity:1}},t.mergeSingleInitialState=f,t.mergeInitialState=l,t.validate=c,t.needShowDataModelPanel=h,t.getChartForbiddenInfo=p;var D=function(a,t){if("saas"!==window.sugarConfig.deployType||!a||"map"!==a&&"map-line"!==a)return!1;var n=window.sugarConfig.nowProductConfig;return n&&!n.mapScopeByUrlParam&&t&&("province"===t.mapScope&&"sugar_map_url_param"===t.mapProvince||"city"===t.mapScope&&"sugar_map_url_param"===t.mapCity)?{info:v.default("当前版本不支持地图范围根据URL参数动态切换"),showUpdateInfo:"map-scopr-by-url"}:!1},E=function(a,t){if("saas"!==window.sugarConfig.deployType||!a||"map"!==a)return!1;var n=window.sugarConfig.nowProductConfig;return n&&!n.mapGeoAutoFit&&"autoFit"===t.mapScope?{info:v.default("当前版本不支持地图范围根据数据自适应，可在图表高级选项卡中重新设置区域"),showUpdateInfo:"map-auto-fit-by-data"}:!1},U=function(a){if("saas"!==window.sugarConfig.deployType)return!1;var t=window.sugarConfig.nowProductConfig;return t&&!t.chartCondition&&"dataModel"===a.dataType&&a.dataConfig&&a.dataConfig.dataModel&&a.dataConfig.dataModel.chartCondition&&a.dataConfig.dataModel.chartCondition.length?{info:v.default("当前版本不支持单个图表的交互过滤条件"),showUpdateInfo:"chart-condition"}:!1},j=function(a){if("saas"!==window.sugarConfig.deployType)return!1;var t=window.sugarConfig.nowProductConfig;return t&&!t.timeline&&"dataModel"===a.dataType&&a.dataConfig&&(a.dataConfig.timeline||"timeline"===a.dataConfig.displayMode)&&a.dataConfig.dataModel&&a.dataConfig.dataModel.timeline&&a.dataConfig.dataModel.timeline.length?{info:v.default("当前版本不支持图表的时间轴"),showUpdateInfo:"chart-timeline"}:!1},B=function(a){if("saas"!==window.sugarConfig.deployType)return!1;var t=window.sugarConfig.nowProductConfig;return t&&!t.narrativeMode&&a.dataConfig.narrativeMode?{info:v.default("当前版本不支持叙事图表"),showUpdateInfo:"chart-narrativeMode"}:!1},x=function(a,t){return Array.isArray(t)?t:void 0};t.getChartNameByType=m});
;sugar.define("sugar:utils/url.ts",function(e,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.getQueryString=o.shareSourceHost=o.host=void 0,o.host=location.protocol+"//"+location.host;var r=window.sugarConfig||{};o.shareSourceHost=r.shareSourceDomain?r.shareSourceDomain:o.host,o.getQueryString=function(e){var o=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),r=location.search.substr(1).match(o);return null!=r?unescape(r[2]):null}});
;sugar.define("sugar:globalOverwriteStyle.tsx",function(e,n){"use strict";function t(){var e=u(_,d),t=e[0].condition,r=e[1];return n.conStyleDispatchRef.current=r,i.createElement(i.Fragment,null,Object.keys(t).map(function(e){return i.createElement(l,{key:e},t[e])}))}var r;Object.defineProperty(n,"__esModule",{value:!0}),n.conStyleDispatchRef=void 0;var o=e("sugar:node_modules/tslib/tslib.js"),i=e("sugar:node_modules/react/index.js"),s=e("sugar:node_modules/react-dom/index.js"),a="global_overwrite_style",c=document.createElement("style");c.id=a,c.type="text/css",null===(r=document.querySelector("head"))||void 0===r?void 0:r.append(c);var u=i.useReducer,l=i.Fragment,d={condition:{}},_=function(e,n){var t,r=n.type,i=n.payload;switch(r){case"updateConRule":return o.__assign(o.__assign({},e),{condition:o.__assign(o.__assign({},e.condition),(t={},t[i[0]]=i[1],t))});case"deleteConRule":var s={};return Object.keys(e.condition).forEach(function(n){~n.indexOf(i)||(s[n]=e.condition[n])}),o.__assign(o.__assign({},e),{condition:s});default:return e}};n.conStyleDispatchRef={current:null},s.render(i.createElement(t,null),c)});
;sugar.define("sugar:utils/condition-helper.ts",function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getPlacement=e.getStyleOptions=e.getCommonColor=e.deleteRule=e.insertRule=e.setStyle=e.getConditionsDisplayValue=e.areAllConditionNotLoading=e.getConditionAndHubByConditionKey=e.setConditionsKTV2Url=e.getChartConditionsKTVC=e.getConditionsKTVC=e.getConditionsKTV=e.areConditionsValidate=e.specialCondtionEmptyValue=e.areConditionsAsyncReady=e.isConditionAsyncReady=void 0;var n=t("sugar:node_modules/tslib/tslib.js"),i=t("sugar:utils/i18n.ts"),o=t("sugar:widgets/conditions/condition-manager.tsx"),a=t("sugar:utils/url.ts"),l=t("sugar:node_modules/lodash/lodash.js"),r=t("sugar:node_modules/lodash/get.js"),d=t("sugar:globalOverwriteStyle.tsx");e.isConditionAsyncReady=function(t,e){return void 0!==e||t.isHide?"string"==typeof e&&/^__showx_default_value_/.test(e)&&!t.isHide?!1:!0:!1},e.areConditionsAsyncReady=function(t,n){for(var i=!0,o=0,a=t;o<a.length;o++){var l=a[o],r=n.mapByFrontendId.get(l.frontendId).value.value;if(i=e.isConditionAsyncReady(l,r),!i)return!1}return i},e.specialCondtionEmptyValue=function(t,e){var n=e.type;switch(n){case"multiSelect":if(t instanceof Array&&t.length<1)return!0;break;case"treeSelect":if(e.config.isMultiple&&t instanceof Array&&t.length<1)return!0;break;case"logic":if("object"!=typeof t||!t.logic||!t.vals)return!0;if("null"!==t.logic&&"notNull"!==t.logic&&(!t.vals.length||""===t.vals[0]))return!0;if("between"===t.logic&&(t.vals.length<2||""===t.vals[0]||""===t.vals[1]))return!0;break;case"dateRange":case"dateTimeRange":if(!t||"object"!=typeof t||!t.startDate||!t.endDate)return!0}return!1},e.areConditionsValidate=function(t,n){for(var a=[],l=0,r=t;l<r.length;l++){var d=r[l];if(!d.isHide){var u=n.mapByFrontendId.get(d.frontendId).value.value;if(void 0===u||null===u||""===u||e.specialCondtionEmptyValue(u,d))d.required&&a.push(i.default("「"+d.label+"」过滤条件必须填写"));else{var s=o.validate(u,d.type,d.config);s!==!0&&a.push("「"+d.label+"」"+s)}}}return a.length?a:!0},e.getConditionsKTV=function(t,i){for(var a=[],l=0,r=t;l<r.length;l++){var d=r[l];if(!d.isHide){var u=i.mapByFrontendId.get(d.frontendId).value.value;if(void 0!==u&&null!==u&&""!==u&&!e.specialCondtionEmptyValue(u,d)){var s=o.view2value(u,d.type,d.config);if(void 0!==s&&null!==s&&""!==s&&"__allOfAll__"!==s){if(s instanceof Array){var c=s.indexOf("sugar_multi_all_select");c>=0&&(s=n.__spreadArrays(s),s.splice(c,1)),s=n.__spreadArrays(s);var f=s.indexOf("__nullOfNull__"),p=s.indexOf("__emptyOfEmpty__");~f&&s.splice(f,1,null),~p&&s.splice(p,1,"")}"__nullOfNull__"===s&&(s=null),"__emptyOfEmpty__"===s&&(s=""),a.push({k:d.key,t:d.type,v:s})}}}}return a},e.getConditionsKTVC=function(t,i,a,l,d){void 0===d&&(d=!1);for(var u=[],s=0,c=t;s<c.length;s++){var f=c[s];if(!f.isHide){var p=i.mapByFrontendId.get(f.frontendId).value.value;if(void 0!==p&&null!==p&&""!==p&&!e.specialCondtionEmptyValue(p,f)){var v=void 0;if(v=d?r(f,"dataConfig.dataModel.conditionBind.list",[]):r(f,"dataConfig.dataModel.chartBind.list",[]),!v.includes(a))continue;for(var g=r(f,"dataConfig.dataModel.dataModelBind",[]),y=null,h=0,_=g;h<_.length;h++){var C=_[h];if(C.dataModelHash===l){y=C;break}}if(!y)continue;var m=o.view2value(p,f.type,f.config);if(void 0!==m&&null!==m&&""!==m&&"__allOfAll__"!==m){if(m instanceof Array){var b=m.indexOf("sugar_multi_all_select");b>=0&&(m=n.__spreadArrays(m),m.splice(b,1)),m=n.__spreadArrays(m);var k=m.indexOf("__nullOfNull__"),O=m.indexOf("__emptyOfEmpty__");~k&&m.splice(k,1,null),~O&&m.splice(O,1,"")}"__nullOfNull__"===m&&(m=null),"__emptyOfEmpty__"===m&&(m=""),u.push({k:f.key,t:f.type,v:m,c:{colId:y.colId,linkType:y.linkType,config:y.config}})}}}}return u},e.getChartConditionsKTVC=function(t,e,i){var a=[];return(i||[]).forEach(function(i){if("int"===i.dataType||"string"===i.dataType){var l=t.chartCondition.chartConditionValue.getValueOtherwiseByDeafaultVal(e,i),r=i.chartCon&&"single"===i.chartCon.type;if(r&&null!=l&&"__allOfAll__"!==l)"__nullOfNull__"===l&&(l=null),"__emptyOfEmpty__"===l&&(l=""),a.push({k:i.frontendId,t:"select",v:l,c:{colId:i.id,linkType:"=",config:{}}});else if(!r&&null!=l&&l instanceof Array&&l.length){l=n.__spreadArrays(l);var d=l.indexOf("__nullOfNull__"),u=l.indexOf("__emptyOfEmpty__");~d&&l.splice(d,1,null),~u&&l.splice(u,1,""),a.push({k:i.frontendId,t:"multiSelect",v:l,c:{colId:i.id,linkType:"in",config:{}}})}}else if("date"===i.dataType||"datetime"===i.dataType||"timestamp"===i.dataType){var l=t.chartCondition.chartConditionValue.getValueOtherwiseByDeafaultVal(e,i),s="dateRange";if(("datetime"===i.dataType||"timestamp"===i.dataType)&&(s="dateTimeRange"),l&&l.startDate&&l.endDate){var c=o.view2value(l,s,{});a.push({k:i.frontendId,t:s,v:c,c:{colId:i.id,linkType:"between",config:{}}})}}}),a},e.setConditionsKTV2Url=function(t){if(history.pushState){var e=a.host+window.location.pathname,n=window.location.search,i=window.location.hash,o={},l=!1;if(t.forEach(function(t){l=!0,o[t.k]=t.v}),!n.match(/\bconditions\=/)&&!l)return;var r="conditions="+encodeURIComponent(JSON.stringify(o));if(r.length>1100)return;var d=n.split("&").map(function(t,e){return e?"&"+t:t});if(n.match(/\bconditions\=/))d=d.map(function(t){if(t.match(/\bconditions\=/)){var e=t.substr(0,1);return e+r}return t});else{var u="?";n&&(u="&"),d.push(u+r)}n=d.join("");var s=e+n+i;window.history.replaceState({path:s},"",s)}},e.getConditionAndHubByConditionKey=function(t,e,n){var i=l.find(t,function(t){return t.key===n});if(!i)return null;var o=e.mapByFrontendId.get(i.frontendId);return o?{condition:i,hub:o}:null},e.areAllConditionNotLoading=function(t){var e=!0;return t.mapByFrontendId.forEach(function(t){var n=t.data;"pending"===n.loadState&&(e=!1)}),e},e.getConditionsDisplayValue=function(t,n){var i={},a=0;return n.forEach(function(n){if(~["select","multiSelect"].indexOf(n.t)){var l=e.getConditionAndHubByConditionKey(t.condition.list.data||[],t.condition.hubMap,n.k);if(l){var r=o.view2Display(l.hub.value.value,l.condition.type,l.condition.config,l.hub.data.data);r!==n.v&&(a++,i[n.k]=r)}}}),a?i:null},e.setStyle=function(t,e,n){var i=document.querySelectorAll("#"+t+" "+e);Object.keys(n).forEach(function(t){i.forEach(function(e){e.style[t]=n[t]})})},e.insertRule=function(t,e){var n=e.map(function(e){var n=e[0],i=e[1],o=n.map(function(e){return""+t+e}).join(","),a=Object.keys(i).map(function(t){return t+": "+i[t]+";"}).join("");return o+" {"+a+"}"}).join("\n");d.conStyleDispatchRef.current&&d.conStyleDispatchRef.current({type:"updateConRule",payload:[t,n]})},e.deleteRule=function(t){d.conStyleDispatchRef.current&&d.conStyleDispatchRef.current({type:"deleteConRule",payload:t})},e.getCommonColor=function(t,e){var n=t.config,i=n.conBgColor,o=n.conFontColor,a=n.conActiveFontColor,l=n.conActiveBgColor,r=n.conBorderColor,d=n.openCustomCondition,u=n.useLightConditions,s=n.useConditionDarkTheme,c=e?u:!s,f={background:d&&i||(c?void 0:"#333538"),fontColor:d&&o||(c?void 0:"#f3f1f1"),borderColor:d&&r||(c?void 0:"#656565"),activeBgColor:d&&l||(c?void 0:"var(--info)"),activeFontColor:d&&a,checkboxBgColor:c?void 0:"linear-gradient(#515151,#4b4b4b)",highlightBgColor:c?void 0:"rgba(0,126,255,.08)",selectActiveFontColor:c?void 0:"var(--info)"};return d&&i||c||(f.backgroundOp="rgba(51,53,56,0.5)",f.backgroundOpHover="rgba(39,40,43,0.5)"),f},e.getStyleOptions=function(t,e,n,i){void 0===t&&(t=[]),void 0===e&&(e={}),void 0===n&&(n={});var o=n.background,a=n.backgroundOp,l=n.backgroundOpHover,r=n.fontSize,d=n.openHotKeys,u=n.hotKeys,s=i.width,c=i.isDashCondition,f=[];return t.forEach(function(t){switch(t){case"backgroundDefault":o&&(c?f.push.apply(f,e.background(o,a,l)):f.push.apply(f,e.background(o)));break;case"fontSizeList":case"fontSizeSelect":c&&14!==r&&f.push.apply(f,e.fontSize(r||16,s));break;case"fontSize":if(c&&14!==r){var i=d&&(null===u||void 0===u?void 0:u.length);f.push.apply(f,e.fontSize(r||16,i))}break;case"fontSizeRange":if(c&&14!==r){var i=d&&(null===u||void 0===u?void 0:u.length)||!d;f.push.apply(f,e.fontSize(r||16,i))}break;default:n[t]&&f.push.apply(f,e[t](n[t]))}}),f},e.getPlacement=function(t,e,n){var i=t.condition,o=i.left,a=i.top,l=i.width,r=i.config.fontSize,d=i.isDashCondition,u=t.conditionConfig.width;if(d&&u){var s=+(r||14)/14,c=o,f=+u-(o+l),p=a,v=e*s,g=n*s;if(v>c)return g>p?"left-bottom-left-top ":"left-top-left-bottom";if(v>f)return g>p?"right-bottom-right-top":"right-top-right-bottom"}return"auto"}});
;sugar.define("sugar:utils/chart-helper.ts",function(e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.replaceUrlParams=a.replaceSomeParam=a.isValidSlideDependence=a.areAllChartsDataLoaded=void 0;var t=e("sugar:node_modules/lodash/get.js"),r=e("sugar:utils/condition-helper.ts"),n=e("sugar:utils/common-helper.ts"),i=e("sugar:utils/date-helper.ts"),o=e("sugar:widgets/conditions/condition-manager.tsx");a.areAllChartsDataLoaded=function(e){var a=!0;return e.mapByFrontendId.forEach(function(e){var t=e.data;"pending"===t.loadState&&(a=!1)}),a},a.isValidSlideDependence=function(e){return e.openSlideDep&&e.dependenceOpen&&t(e,"dependences[0].cddOpen")&&t(e,"dependences[0].cddSubChartsConfig[0]")},a.replaceSomeParam=function(e,t,n,d,s,l){if(!e||"string"!=typeof e)return e;var c=e.match(/\{{1,2}conditions\.[^\}\s\]]+\}{1,2}/g);c&&c.length&&c.forEach(function(a){var t=a.match(/^\{{1,2}(conditions\.([^(\}]+)(\(([^\)]+)\))?)\}{1,2}$/);if(t){var i=t[2],d=r.getConditionAndHubByConditionKey(n.condition.list.data||[],n.condition.hubMap,i);if(d){var c=void 0;c=s?o.view2value(d.hub.value.value,d.condition.type,d.condition.config):o.view2Display(d.hub.value.value,d.condition.type,d.condition.config,d.hub.data.data),t[4]&&"string"==typeof c&&("0"===t[4]||"first"===t[4]?c=c.replace("--",",").split(",")[0]:("1"===t[4]||"last"===t[4])&&(c=c.replace("--",",").split(",")[1])),("string"==typeof c||"number"==typeof c)&&(e=e.replace(a,l?encodeURIComponent(c.toString()):c.toString()))}}});var u=n.chart.getChartHub(t);if(c=e.match(/\{{1,2}(drillDowns[^\}\s\.\[\]]*\.?[^\}\s\[\]]*)\}{1,2}/g),c&&c.length){var p=d||u.drillDownData.drillDownItem;c.forEach(function(a){var t=a.match(/^\{{1,2}(drillDowns(\(([^\)]+)\))?\.?([^\(]*)(\(([^\)]+)\))?)\}{1,2}$/);if(t){var r=p.length-1;if("first"===t[3]?r=0:"last"===t[3]?r=p.length-1:isNaN(+t[3])||(r=+t[3]),p[r])if(t[4]){var n="";"sugar_fireKey"===t[4]?n=p[r].fireKey:(n=p[r].item[t[4]]||0===p[r].item[t[4]]?p[r].item[t[4]]:"",!isNaN(+t[6])&&Array.isArray(n)&&(n=n[+t[6]])),e=e.replace(a,l?encodeURIComponent(n):n)}else e=""!==p[r].item._sugar_dd_default_&&null!=p[r].item._sugar_dd_default_?e.replace(a,l?encodeURIComponent(p[r].item._sugar_dd_default_):p[r].item._sugar_dd_default_):e.replace(a,"");else e=e.replace(a,"")}})}if(c=e.match(/\{{1,2}(dependence\.?[^\}\[\]]*)\}{1,2}/g),c&&c.length){var f=u.dependenceData.dependenceItem;c.forEach(function(a){var t=a.match(/^\{{1,2}(dependence\.?([^\(\s\|]*)(\(([^\)]+)\))?[\s]*[\|]{0,2}[\s]*([^\}]*))\}{1,2}$/);if(t){var r=t[2],n="";if(!r&&f&&f.item&&void 0!==f.item._sugar_dd_default_)n=f.item._sugar_dd_default_;else if(f&&"sugar_fireKey"===r)n=f.fireKey;else if(r&&f&&f.item&&void 0!==f.item[r]){var i=f.item[r];n=!isNaN(+t[4])&&Array.isArray(i)?void 0!==i[+t[4]]?i[+t[4]]:t[5]:i}else n=t[5];e=e.replace(a,l?encodeURIComponent(n):n)}})}return e=a.replaceUrlParams(e,l),e=i.replaceDateMacro(e)},a.replaceUrlParams=function(e,a){var t=e.match(/\{{1,2}querys\.[^\}\]]+\}{1,2}/g);if(t&&t.length){var r=n.parseCurrentQueryString();t.forEach(function(t){var n=t.match(/^\{{1,2}(querys\.([^\s\|\}]+)[\s]*[\|]{0,2}[\s]*([^\}]*))\}{1,2}$/);if(n){n.shift();var i=n[1];e=r&&r.hasOwnProperty(i)?e.replace(t,a?encodeURIComponent(r[i]):r[i]):e.replace(t,a?encodeURIComponent(n[2]):n[2])}})}return e}});
;sugar.define("sugar:services/chart-dependence.ts",function(e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.chartDependencyAnalysis=n.getChartDependencesOnMe=n.getChartMyDependences=n.canDependChartType=n.canBeDependencedChartType=void 0;var a=e("sugar:node_modules/tslib/tslib.js"),r=e("sugar:utils/i18n.ts"),t=e("sugar:node_modules/amis/lib/index.js");n.canBeDependencedChartType=["bar","bar-alien","bar-polar","funnel","line","map","map-line","map-layer","bmap-scatter","bmap-line","pie","pie-nested","scatter","summary","table","table-play","attr-table","wordCloud","bubble","topology","calendar-heatmap","3d-bar","sankey","cartesian-heatmap","bar-pic","custom-iframe","scene","kanbans"],n.canDependChartType=["3d-map-bar","3d-map-line","bar","bar-alien","bar-polar","funnel","flip-number","gauge","line","liquid-fill","map","map-line","map-layer","bmap-scatter","bmap-line","pie","pie-nested","progress-bar","radar","scatter","summary","table","attr-table","table-play","topology","wordCloud","wordCloud3D","simple-text","text","bubble","calendar-heatmap","sunburst","river","3d-bar","3d-scatter","candlestick","sankey","cartesian-heatmap","bar-pic","iframe","treemap","video","custom-iframe","scene","image","slider","kanbans"];var d={myDependences:{},dependencesOnMe:{}};n.getChartMyDependences=function(e){return d.myDependences[e]?d.myDependences[e]:null},n.getChartDependencesOnMe=function(e){return d.dependencesOnMe[e]?d.dependencesOnMe[e]:null};var s=function(e,a,t){void 0===t&&(t=[a]);var d={frontendId:a},c=n.getChartMyDependences(a);if(c&&c.length){var i=[];c.forEach(function(n){if(~t.indexOf(n)){var a=t.map(function(n){return"『"+e[n].name+"』"});throw new Error(r.default("图表「"+a.join("、")+"」之间形成循环依赖，请更改依赖配置！"))}var d=s(e,n,t.concat([n]));i.push(d)}),d.fathers=i}return d};n.chartDependencyAnalysis=function(e){void 0===e&&(e=[]);var a={};e.forEach(function(e){a[e.frontendId]=e});for(var i={},p={},o=0,l=e;o<l.length;o++){var u=l[o];u.config.dependenceOpen&&~n.canBeDependencedChartType.indexOf(u.type)&&u.config.dependences instanceof Array&&u.config.dependences.length&&c(u,a,i,p)}for(var f=0,m=Object.keys(i);f<m.length;f++){var b=m[f];if(i[b].length>1){var h=a[b],g=i[b].map(function(e){return a[e].name});return t.toast.error(r.default("图表「"+h.name+"」已依赖多个上级图表：「"+g.join("，")+"」，请保证「"+h.name+"」只依赖一个图表！")),!1}}d={myDependences:i,dependencesOnMe:p};try{e.forEach(function(e){s(a,e.frontendId)})}catch(y){return t.toast.error(y.message),!1}return!0};var c=function(e,r,t,d){for(var s=[],c=[],i=0,p=e.config.dependences;i<p.length;i++){var o=p[i];if(o.cddSubChartsConfig instanceof Array){for(var l=[],u=0,f=o.cddSubChartsConfig;u<f.length;u++){var m=f[u],b=m.frontendId,h=r[b];h&&~n.canDependChartType.indexOf(h.type)&&(o.cddOpen&&(s.push(b),t[b]?t[b].push(e.frontendId):t[b]=[e.frontendId]),l.push(m))}c.push(a.__assign(a.__assign({},o),{cddSubChartsConfig:l}))}}e.setDependences(c),s.length&&(d[e.frontendId]=s)}});
;sugar.define("sugar:services/condition-dependence.ts",function(e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.dependencyAnalysis=n.getConditionsDependOnMeAndNeedReload=n.getDependencesQueryParams=n.isConditionDependencesReady=n.getDependencesOnMe=n.getMyDependences=n.canDependConditionType=n.canBeDependencedConditionType=void 0;var t=e("sugar:utils/i18n.ts"),a=e("sugar:node_modules/amis/lib/index.js"),d=e("sugar:utils/condition-helper.ts");n.canBeDependencedConditionType=["date","dateRange","dateTime","dateTimeRange","select","multiSelect","text","treeSelect"],n.canDependConditionType=["select","multiSelect","treeSelect","text"];var o={myDependences:{},dependencesOnMe:{}};n.getMyDependences=function(e){return o.myDependences[e]?o.myDependences[e]:null},n.getDependencesOnMe=function(e){return o.dependencesOnMe[e]?o.dependencesOnMe[e]:null},n.isConditionDependencesReady=function(e,o,i,r){void 0===r&&(r=!1);var s=n.getMyDependences(i.key);if(!s)return!0;var c=!0;return s.forEach(function(n){var s=d.getConditionAndHubByConditionKey(e,o,n);s||(a.toast.error(t.default("「"+i.label+"」的依赖分析有问题！")),c=!1);var u=s,l=u.condition,f=u.hub;(null==f.value.value||""===f.value.value||d.specialCondtionEmptyValue(f.value.value,l)||!d.isConditionAsyncReady(l,f.value.value))&&(c=!1,r&&a.toast.error(t.default("「"+i.label+"」依赖的「"+l.label+"」还没有取值！")))}),c},n.getDependencesQueryParams=function(e,o,i){var r=n.getMyDependences(i.key);if(!r)return[];var s=[];return r.forEach(function(n){var r=d.getConditionAndHubByConditionKey(e,o,n);r?s.push(r.condition):a.toast.error(t.default("「"+i.label+"」的依赖分析有问题！"))}),s.length?"dataModel"===i.dataType&&i.dataModelHash&&i.dataModelHash.startsWith("mld_")?d.getConditionsKTVC(s,o,i.key,i.dataModelHash,!0):d.getConditionsKTV(s,o):[]},n.getConditionsDependOnMeAndNeedReload=function(e,t){var d=[],o=n.getDependencesOnMe(t.key);if(!o||!o.length)return d;var s={};e.forEach(function(e){s[e.key]=e});try{for(var c=function(e){var n=o[e],t=i(s,n);if(t.fathers){var a=r(t.fathers),c=!0;a.forEach(function(e){~o.indexOf(e)&&(c=!1)}),c&&d.push(s[n])}else d.push(s[n])},u=0;u<o.length;u++)c(u);return d}catch(l){return a.toast.error(l.message),[]}};var i=function(e,a,d){void 0===d&&(d=[a]);var o={key:a},r=n.getMyDependences(a);if(r&&r.length){var s=[];r.forEach(function(n){if(~d.indexOf(n)){var a=d.map(function(n){return"『"+e[n].label+"』"});throw new Error(t.default("过滤条件「"+a.join("、")+"」之间形成循环依赖，请更改依赖配置！"))}var o=i(e,n,d.concat([n]));s.push(o)}),o.fathers=s}return o},r=function(e,n){return void 0===n&&(n=[]),e.forEach(function(e){~n.indexOf(e.key)||n.push(e.key),e.fathers&&e.fathers.length&&(n=r(e.fathers,n))}),n};n.dependencyAnalysis=function(e){void 0===e&&(e=[]);var d={};e.forEach(function(e){d[e.key]&&a.toast.error(t.default("过滤条件中「"+e.label+"」和「"+d[e.key].label+"」具有相同的key值，您需要保证过滤条件key值的唯一性！")),d[e.key]=e});var r={},s={};e.forEach(function(e){if(("sql"===e.dataType||"api"===e.dataType||"dataModel"===e.dataType||e.config.openSuggestion&&e.dataConfig.otherData&&e.dataConfig.otherData.suggestion&&("sql"===e.dataConfig.otherData.suggestion.dataType||"api"===e.dataConfig.otherData.suggestion.dataType))&&~n.canDependConditionType.indexOf(e.type)&&e.config.dependences instanceof Array&&e.config.dependences.length){var t=[],a=[];e.config.dependences.forEach(function(o){d[o]&&~n.canBeDependencedConditionType.indexOf(d[o].type)&&(t.push(o),s[o]?s[o].push(e.key):s[o]=[e.key],a.push(o))}),e.setDependences(a),t.length&&(r[e.key]=t)}}),o={myDependences:r,dependencesOnMe:s};try{e.forEach(function(e){i(d,e.key)})}catch(c){a.toast.error(c.message)}}});
;sugar.define("sugar:utils/chart-recommend-rule.ts",function(e,t){"use strict";function r(e,t,r){var n=r.map(function(e){return a[e]}).filter(function(e){return!!e}),i=n.filter(function(e){return"FORCE"===e.level}),u=n.filter(function(e){return"OPTIONAL"===e.level}),o=t.map(function(t){var r=0,n=1,a={};i.filter(function(e){return!e.effectChartTypes.length||e.effectChartTypes.includes(t.chartType)}).forEach(function(r){var i=r.getScore(e,t);n*=i,a[r.name]=i});var o=0;u.filter(function(e){return!e.effectChartTypes.length||e.effectChartTypes.includes(t.chartType)}).forEach(function(r){var n=r.getScore(e,t);o+=n,a[r.name]=n}),r=n*(1.2345+o);var l={};return{originalChartEigenIndex:t.originalChartEigenIndex,chartEigen:t,fieldAdvice:l,score:r}});return o=o.filter(function(e){return e.score&&0!==e.score}).sort(function(e,t){return e.score<t.score?1:e.score>t.score?-1:0})}Object.defineProperty(t,"__esModule",{value:!0}),t.getRecomendationOfChartEigensByRules=void 0;var n=e("sugar:utils/common-helper.ts"),i=function(){function e(e,t,r,n,i){this._name=e,this._level=t,this._effectChartTypes=r,this._weight=n,this._getScore=i}return Object.defineProperty(e.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"level",{get:function(){return this._level},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"effectChartTypes",{get:function(){return this._effectChartTypes},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"weight",{get:function(){return this._weight},enumerable:!1,configurable:!0}),e.prototype.toString=function(){return"RULE: "+this._name+"^"+this._level+"^"+this._effectChartTypes.toString()+"^*"+this._weight},e.prototype.getScore=function(e,t){return this._getScore(e,t)*this._weight},e}(),a={"max-data-fields":new i("max-data-fields","FORCE",[],1,function(e,t){for(var r=1,n=e.d.length,i=e.m.length,a=0,u=0,o=0,l=0,f=t.field;l<f.length;l++){var s=f[l];"d"===s.type?a+=s.maxCount:"m"===s.type?u+=s.maxCount:"a"===s.type&&(o+=s.maxCount)}var c=n-a,d=i-u;if((c>0||d>0)&&!o)r=0;else if((c>0||d>0)&&o){var h=0+Math.max(0,c)+Math.max(0,d);h>o&&(r=0)}return r}),"data-fields-distance-to-eigen":new i("data-fields-distance-to-eigen","OPTIONAL",[],1,function(e,t){if(["table","attr-table","table-play","3d-scatter","3d-bar"].includes(t.chartType))return 0;for(var r={geo:0,lng:0,lat:0,date:0,datetime:0,timestamp:0,d:0,m:0,a:0},i=0,a=t.field;i<a.length;i++){var u=a[i];if(u.minCount){r[u.type]+=u.minCount;var o=u.subType instanceof Array?u.subType[0]:u.subType;o&&(r[o]+=u.minCount)}}for(var l={geo:0,lng:0,lat:0,date:0,datetime:0,timestamp:0,d:0,m:0,a:0},f=0,s=e.d;f<s.length;f++){var c=s[f];c.subType&&l[c.subType]++,r.a?l.d<r.d?l.d++:l.a++:l.d++}for(var d=0,h=e.m;d<h.length;d++){var m=h[d];m.subType&&l[m.subType]++,r.a?l.m<r.m?l.m++:l.a++:l.m++}for(var p=[],g=[],y=["geo","lng","lat","date","datetime","timestamp","d","m","a"],v=0,T=y;v<T.length;v++){var b=T[v];p.push(r[b]),g.push(l[b])}var C=n.Euclidean(p,g);return 100-C}),"date-field":new i("date-field","OPTIONAL",["line","river","calendar-heatmap"],1,function(e,t){for(var r=!1,n=0,i=e.d;n<i.length;n++){var a=i[n];if(a.subType&&["date","datetime","timestamp"].includes(a.subType)){r=!0;break}}var u=0;return r?(u+=1,"river"===t.chartType&&(u+=1),"line"===t.chartType&&(u+=3)):"line"===t.chartType&&(u-=.5),u}),unit:new i("unit","OPTIONAL",["line","summary","flip-number","gauge","progress-bar","liquid-fill"],2,function(e,t){for(var r=0,n=new Set,i=new Set,a=0,u=e.m;a<u.length;a++){var o=u[a];n.add((o.tempUnit||"")+(o.tempDataFormat||"")),i.add(o.unit||"")}return n.size>1?t.multiUnit&&(r=5):(i.has("%")&&["gauge","progress-bar","liquid-fill"].includes(t.chartType)&&(r=1),e.m.length>1&&t.multiUnit&&(r=-.5)),r}),"color-size-field":new i("color-size-field","OPTIONAL",["pie","pie-nested","funnel","radar","sunburst","treemap","sankey"],1,function(e){var t=0;if(e.d.length&&e.m.length){for(var r=!1,n=0,i=e.d;n<i.length;n++){var a=i[n];if("color"===a.fieldName){r=!0;break}}if(!r)for(var u=0,o=e.m;u<o.length;u++){var l=o[u];if("size"===l.fieldName){r=!0;break}}t=r?1:-1}return t}),"dim-field-distinct-count":new i("dim-field-distinct-count","OPTIONAL",["pie"],1.5,function(e,t){var r=0;if(e.d.length&&e.m.length){for(var n=0,i=0,a=e.d;i<a.length;i++){var u=a[i];u.statistics&&u.statistics.distinctCount&&u.statistics.distinctCount>n&&(n=u.statistics.distinctCount)}n>0&&8>=n&&"pie"===t.chartType&&(r=1)}return r}),"m-field":new i("m-field","OPTIONAL",["summary","pie","wordCloud3D","wordCloud","funnel","radar"],2,function(e,t){var r=0;if(!e.d.length){var n=e.m.length;n>1&&4>=n&&"summary"===t.chartType&&(r=4),n>4&&10>=n&&"pie"===t.chartType&&(r=4),n>10&&15>=n&&"funnel"===t.chartType&&(r=4),n>15&&"wordCloud3D"===t.chartType&&(r=4)}return r})};t.getRecomendationOfChartEigensByRules=r});
;sugar.define("sugar:utils/data-model-helper.ts",function(e,a){"use strict";function t(e,a){var t=o(e,a),n=[];for(var r in t)for(var i=t[r],s=0,l=i;s<l.length;s++){var f=l[s],h=d(f);n.push(h.path)}return n}function n(e,a,t){var n=i(e,a,t),o=[];for(var s in n)for(var d=n[s],l=0,f=d;l<f.length;l++){var h=f[l],g=r(h);o.push(g.path)}return o}function r(e){return{name:e.name,path:e.key}}function i(e,a,t){var n=e&&e.length?e:[],r={};if(!n.length||!a.size)return r;for(var i=0,o=n;i<o.length;i++){var s=o[i];if(t){if(s.key===t.key)continue;var d=H.getDependencesOnMe(t.key);if(!d||!d.includes(s.key))continue}var l=s.dataModelHash||"";"dataModel"===s.dataType&&a.has(l)&&(r[l]||(r[l]=[]),r[l].push({name:s.label,key:s.key}))}return r}function o(e,a){var t=e&&e.length?e:[],n={};if(!t.length||!a.size)return n;for(var r=0,i=t;r<i.length;r++){var o=i[r],d={mainChartHash:o.frontendId,mainChartName:o.dynamicName||o.name,drillDownPath:[],drillDownName:[],subChartKey:"",subChartName:""};s(o,a,d,n)}return n}function s(e,a,t,n){var r=e.dataModelHash;if(e.config.subChartConfig)for(var i in e.config.subChartConfig){var o=e.config.subChartConfig[i];"dataModel"===o.dataType&&a.has(o.dataModelHash||"")&&(t.subChartKey=i,t.subChartName=o.name,n[o.dataModelHash]||(n[o.dataModelHash]=[]),n[o.dataModelHash].push(N(t)))}else"dataModel"===e.dataType&&a.has(r)&&(n[r]||(n[r]=[]),n[r].push(N(t)));if((e.drillDownOpen||e.config.hierarchyDrillDownOpen)&&e.drillDown&&e.drillDown.length)for(var d=0,l=e.drillDown;d<l.length;d++){var f=l[d];if(f.chart){var h=N(t);h.subChartKey="",h.subChartName="",h.drillDownPath.push(f.chart.drillDownIndex),h.drillDownName.push(f.chart.dynamicName||f.chart.name),s(f.chart,a,h,n)}}}function d(e){var a="",t="";if(e.mainChartHash&&(a+=e.mainChartHash,t+=e.mainChartName),e.drillDownPath&&e.drillDownPath.length){a+="#"+e.drillDownPath.join(",");var n=e.drillDownName&&e.drillDownName.length?e.drillDownName:[];t+="->"+n.join("->")}return e.subChartKey&&(a+="#"+e.subChartKey,t+="："+e.subChartName),{name:t,path:a}}function l(e,a,t){var n={};return 0===e.drillDownLevel?n.mainChartHash=e.frontendId:e.drillDownLevel>0&&a&&(n.mainChartHash=a.drillDownData.mainChartFrontendId,n.drillDownPath=a.drillDownData.drillDownPath.split(",")),n.subChartKey=t,d(n).path}function f(e,a,t){for(var n=e&&e.length?e:[],r=a&&a.length?a:[],i=[],o=0,s=r;o<s.length;o++){var d=s[o];if(t){if(d.key===t.key)continue;var l=H.getDependencesOnMe(t.key);if(!l||!l.includes(d.key))continue}"dataModel"===d.dataType&&d.dataModelHash&&d.dataModelHash.startsWith("mld_")&&i.push(d.dataModelHash)}for(var f=0,g=n;f<g.length;f++){var u=g[f];i=i.concat(h(u))}return new Set(i)}function h(e){var a=[];if(e.config.subChartConfig)for(var t in e.config.subChartConfig){var n=e.config.subChartConfig[t];"dataModel"===n.dataType&&n.dataModelHash&&n.dataModelHash.startsWith("mld_")&&a.push(n.dataModelHash)}else"dataModel"===e.dataType&&e.dataModelHash&&e.dataModelHash.startsWith("mld_")&&a.push(e.dataModelHash);if((e.drillDownOpen||e.config.hierarchyDrillDownOpen)&&e.drillDown&&e.drillDown.length)for(var r=0,i=e.drillDown;r<i.length;r++){var o=i[r];o.chart&&(a=a.concat(h(o.chart)))}return Array.from(new Set(a))}function g(e,a){var t="";return a&&e.config.subChartConfig&&e.config.subChartConfig[a]&&(e=e.config.subChartConfig[a]),"dataModel"===e.dataType&&e.dataModelHash&&e.dataModelHash.startsWith("mld_")&&(t=e.dataModelHash),t}function u(e,a,t){for(var n=0,r=a;n<r.length;n++){var i=r[n];if(i.chartFrontendId){for(var o=null,s=0,d=t;s<d.length;s++){var l=d[s];if(l.frontendId===i.chartFrontendId){o=l;break}}if(o){var f=g(o,i.subChartKey);if(e===f)return i}}}}function m(e){var a="",t=e.field;return R.includes(t)&&"string"===e.dataType?a="geo":A.includes(t)&&["string","float"].includes(e.dataType)?a="lat":j.includes(t)&&["string","float"].includes(e.dataType)&&(a="lng"),a}function c(e,a,t){var n=v(e,t);C(e,a,n)}function v(e,a){var t=O.getChartByType(e.type),n={d:[],m:[]},r=[];if(t&&t.chartEigens&&t.chartEigens.length)for(var i=0,o=t.chartEigens;i<o.length;i++){var s=o[i];s.field.forEach(function(e){r.includes(e.name)||r.push(e.name)})}else{var d=e.dataConfig.dataModel;if(d)for(var l in d)if(d.hasOwnProperty(l)){var f=d[l];if(f&&f.length){var h=f[0];h.frontendId&&h.id&&(r.includes(l)||r.push(l))}}}for(var g=0,u=r;g<u.length;g++){var m=u[g],d=e.dataConfig.dataModel;if(d){var c=d[m];if(c&&c.length)for(var v=0,p=c;v<p.length;v++){var C=p[v],y=C.frontendId,D=C.id,b=C.type;if(y&&D&&b){var _=I.__assign(I.__assign({},C),{fieldName:m.replace("-smart","")});if("d"===b){var M=a.config.dimensions.get(D);M&&(_.subType=M.convert.label||M.convert.type||M.dataType,M.statistics&&(_.statistics=M.statistics)),n.d.push(_)}else{var M=a.config.measures.get(D);M&&(_.tempDataFormat=C.dataFormat||M.format.dataFormat,"none"===_.tempDataFormat&&(_.tempDataFormat=""),_.tempUnit=C.unit||M.format.unit," "===_.tempUnit&&(_.tempUnit=""),n.m.push(_))}}}}}return n}function p(e,a,t){for(var n=null,r=null,i=0,o=e;i<o.length;i++){var s=o[i],d=s.chartEigens;if(s.useChartEigenIndex&&s.chartEigens){d=[];for(var l=0,f=s.useChartEigenIndex;l<f.length;l++){var h=f[l];d.push(s.chartEigens[h])}}if(d&&d.length){if(n=s,d.length>1){if(d[0].configSp){for(var g=0,h=-1,u=0;u<d.length;u++){var m=d[u];if(m.configSp){var c=0;for(var v in m.configSp){var p=m.configSp[v],C=U(t,v,void 0);p===C&&c++}c>g&&(g=c,h=u)}}h>-1&&(r=d[h])}if(!r){var y=S.getRecomendationOfChartEigensByRules(a,d.map(function(e,a){return I.__assign(I.__assign({},e),{originalChartEigenIndex:a})}),["data-fields-distance-to-eigen"]);y.length&&(r=y[0].chartEigen)}}r||(r=d[0]);break}}return{chosenChartWidgets:n,chosenChartEigen:r}}function C(e,a,t){var n=p([a],t,e);n.chosenChartWidgets&&n.chosenChartEigen&&D(e,n.chosenChartEigen,t)}function y(e,a){var t={};if(["line","bar","bar-alien","scatter","river"].includes(e.chartType))for(var n=0,r=a.d;n<r.length;n++){var i=r[n];if(i.subType&&["date","datetime","timestamp"].includes(i.subType)){t[i.frontendId]="x";break}}if("line"===e.chartType&&e.multiUnit){for(var o={},s=0,d=a.m;s<d.length;s++){var l=d[s],f=(l.tempUnit||"")+(l.tempDataFormat||"");o[f]||(o[f]=[]),o[f].push(l.frontendId)}if(Object.keys(o).length>1){var h=["y","y2"],g=0;for(var u in o){var m=h[g%h.length];g++;for(var c=0,v=o[u];c<v.length;c++){var p=v[c];t[p]=m}}}}if("pie-nested"===e.chartType&&a.d.length){for(var C=[],y=0,D=a.d;y<D.length;y++){var b=D[y];b.statistics&&b.statistics.distinctCount&&C.push(I.__assign({},b))}C.length>1&&(C.sort(function(e,a){return e.statistics.distinctCount-a.statistics.distinctCount}),t[C[0].frontendId]="color",t[C[1].frontendId]="color2")}return t}function D(e,a,t,n){var r=a.field.map(function(e){return I.__assign({},e)});if(r&&r.length){var i={};r.forEach(function(e){i[e.name]={fields:[]}});for(var o=t.d.concat(t.m),s=new Set,d=0,l=o;d<l.length;d++){var f=l[d];s.add(f.fieldName)}var h=y(a,t),g=P({},h,n);for(var u in g){for(var m=g[u],c=null,v=0,p=r;v<p.length;v++){var C=p[v];if(C.name===m){c=C;break}}if(c&&c.maxCount>i[c.name].fields.length){for(var D=null,_=-1,M=0;M<t.d.length;M++){var w=t.d[M];if(w.frontendId===u){D=t.d,_=M;break}}if(!D)for(var M=0;M<t.m.length;M++){var w=t.m[M];if(w.frontendId===u){D=t.m,_=M;break}}if(D){var x=D[_],T=I.__assign({},x);delete T.fieldName,delete T.subType,delete T.tempDataFormat,delete T.tempUnit,delete T.statistics,i[c.name].fields.push(T),D.splice(_,1)}}}for(var E=0,k=!0;k;){k=!1;var H=r[E%r.length];if(H.maxCount>i[H.name].fields.length){var N=1;if(H.minCount>0){var O=H.minCount-i[H.name].fields.length;0===O&&E<r.length-1?N=O:O>0&&(N=O)}for(var M=0;N>M;M++){var U=b(t,H);if(U===!1)break;var D=void 0;D="d"===U.type?t.d:t.m;var x=D[U.pos];if(x){var T=I.__assign({},x);delete T.fieldName,delete T.subType,delete T.tempDataFormat,delete T.tempUnit,delete T.statistics,i[H.name].fields.push(T),D.splice(U.pos,1)}}}for(var S=!1,R=0,j=r;R<j.length;R++){var c=j[R];if("d"===c.type&&c.maxCount>i[c.name].fields.length){S=!0;break}}if(S&&t.d.length&&(k=!0),!k){for(var A=!1,L=0,B=r;L<B.length;L++){var c=B[L];if("m"===c.type&&c.maxCount>i[c.name].fields.length){A=!0;break}}A&&t.m.length&&(k=!0)}if(!k){for(var W=!1,K=0,$=r;K<$.length;K++){var c=$[K];if("a"===c.type&&c.maxCount>i[c.name].fields.length){W=!0;break}}W&&(t.m.length||t.d.length)&&(k=!0)}E++}var V=I.__assign({},e.dataConfig.dataModel);if("smart-chart"===e.type)for(var z=Object.keys(V),Q=0,q=z;Q<q.length;Q++){var G=q[Q];if(!/-smart$/.test(G)){var f=V[G];if(f&&f.length){var J=f[0],X=J.frontendId,Y=J.id,Z=J.type;X&&Y&&Z&&delete V[G]}}}else for(var ea=0,aa=Array.from(s);ea<aa.length;ea++){var ta=aa[ea];delete V[ta]}for(var na in i)i[na].fields.length&&(V[na]=i[na].fields);if(e.setDataConfig(I.__assign(I.__assign({},e.dataConfig),{dataModel:V})),a.configSp){var ra={};for(var ia in a.configSp)F(ra,ia,a.configSp[ia]);if(ra.config){var oa=P({},e.config,ra.config);e.setConfig(oa)}if(ra.dataConfig){var sa=P({},e.dataConfig,ra.dataConfig);e.setDataConfig(sa)}}}}function b(e,a,t){void 0===t&&(t=!1);var n="",r=-1,i=[];if("d"===a.type?i=e.d:"m"===a.type?i=e.m:"a"===a.type&&(i=e.d.concat(e.m)),!i.length)return!1;if(a.subType){for(var o=a.subType instanceof Array?a.subType:[a.subType],s=0,d=o;s<d.length;s++){for(var l=d[s],f=0;f<i.length;f++){var h=i[f];if(h.fieldName===a.name&&h.subType===l){n=a.type,r=f;break}}if(-1===r)for(var f=0;f<i.length;f++){var h=i[f];if(h.subType===l){n=a.type,r=f;break}}if(-1!==r)break}if(-1===r&&t)return!1}if(-1===r){for(var f=0;f<i.length;f++){var h=i[f];if(h.fieldName===a.name){n=a.type,r=f;break}}-1===r&&(n=a.type,r=0)}if(-1===r)return!1;if("a"===n){var g=e.d.length-1;r>g?(n="m",r-=e.d.length):n="d"}return{type:n,pos:r}}function _(e,a,t){var n=v(e,t),r=M(a,n);if(r.length){var i=r[0],o=i.chartEigen.chartType,s=O.getChartByType(o);s&&w(e,s,n,i)}else e.setConfig(I.__assign(I.__assign({},e.config),{smartChart:void 0}))}function M(e,a){var t=O.getChartEigens(),n=x(a,t);return e.setChartConfigData({recommendChartEigenList:null}),e.setChartConfigData({recommendChartEigenList:n}),n}function w(e,a,t,n){var r={type:a.type},i=n.chartEigen;if(void 0!==i.variantIndex){var o=i.variantIndex;a.variants&&a.variants[o]&&(r.variantIndex=o,a=P({},a,a.variants[o]))}var s=e.config.smartChart;e.initChartConfig(a),e.setConfig(I.__assign(I.__assign({},e.config),{smartChart:I.__assign(I.__assign({},s),r)})),D(e,i,t,n.fieldAdvice)}function x(e,a){var t=T(e,a);return S.getRecomendationOfChartEigensByRules(e,t.map(function(e){return I.__assign(I.__assign({},a[e]),{originalChartEigenIndex:e})}),["max-data-fields","data-fields-distance-to-eigen","date-field","unit","color-size-field","dim-field-distinct-count","m-field"])}function T(e,a){for(var t=[],n=0;n<a.length;n++){for(var r=N(e),i=a[n],o=!0,s=0,d=i.field;s<d.length;s++){var l=d[s];if(l.minCount){for(var f=0;f<l.minCount;f++){var h=b(r,l,!0);if(h===!1){o=!1;break}var g=void 0;g="d"===h.type?r.d:r.m;var u=g[h.pos];u&&g.splice(h.pos,1)}if(!o){o=!1;break}}}o&&t.push(n)}return t}function E(e){for(var a=[],t={},n=0,r=e.field;n<r.length;n++){var i=r[n];if(i.minCount)if(i.subType){var o="";o=i.subType instanceof Array?i.subType.sort().join(","):i.subType,t[o]?(t[o][0]+=i.minCount,t[o][1]+=i.maxCount):t[o]=[i.minCount,i.maxCount]}else t[i.type]?(t[i.type][0]+=i.minCount,t[i.type][1]+=i.maxCount):(t[i.type]=i.minCount,t[i.type]=[i.minCount,i.maxCount])}for(var s in t){var d=s.split(","),l=t[s][0]+(t[s][0]<t[s][1]?"-"+t[s][1]:""),f=k.default("「"+l+"」个「"+d.map(function(e){return L[e]}).join(k.default("或"))+"」");a.push(f)}return a.length?a.join(k.default("，")):k.default("一个任意字段")}Object.defineProperty(a,"__esModule",{value:!0}),a.determineFieldAsDimensionOrMeasure=a.getMinDemandOfChartEigen=a.getQualifiedChartEigenIndex=a.recommendChartEigen=a.updateChartUsingNewChartEigen=a.getRecommendChartList=a.recommendChart=a.setDataFieldsByChartEigen=a.extractDataFields=a.mapDataFieldsWhenSwitchingChartType=a.getSuggestDataLable=a.getReferenceDepBindConfig=a.getChartDataModelHash=a.findUsingDataModelHashsInReport=a.getChartPath=a.formatChartPathAndName=a.findChartsUsingDataModelsInReport=a.findConditionsUsingDataModelsInReport=a.formatConditionPathAndName=a.getUsingConditionsVals=a.getUsingChartsVals=void 0;var I=e("sugar:node_modules/tslib/tslib.js"),k=e("sugar:utils/i18n.ts"),H=e("sugar:services/condition-dependence.ts"),N=e("sugar:node_modules/lodash/cloneDeep.js"),O=e("sugar:widgets/charts/chart-manager.tsx"),F=e("sugar:node_modules/lodash/set.js"),U=e("sugar:node_modules/lodash/get.js"),P=e("sugar:node_modules/lodash/merge.js"),S=e("sugar:utils/chart-recommend-rule.ts");a.getUsingChartsVals=t,a.getUsingConditionsVals=n,a.formatConditionPathAndName=r,a.findConditionsUsingDataModelsInReport=i,a.findChartsUsingDataModelsInReport=o,a.formatChartPathAndName=d,a.getChartPath=l,a.findUsingDataModelHashsInReport=f,a.getChartDataModelHash=g,a.getReferenceDepBindConfig=u;var R=["国家","国","country","省份","省","province","城市","市","city","区","area","district"],j=["经度","longitude","lng"],A=["纬度","latitude","lat"];a.getSuggestDataLable=m,a.mapDataFieldsWhenSwitchingChartType=c,a.extractDataFields=v,a.setDataFieldsByChartEigen=D,a.recommendChart=_,a.getRecommendChartList=M,a.updateChartUsingNewChartEigen=w,a.recommendChartEigen=x,a.getQualifiedChartEigenIndex=T,a.getMinDemandOfChartEigen=E;var L={d:k.default("维度"),m:k.default("度量"),a:k.default("任意字段"),string:k.default("字符串"),"int":k.default("整数"),"float":k.default("小数"),lat:k.default("纬度"),lng:k.default("经度"),date:k.default("日期"),datetime:k.default("时间"),geo:k.default("地名/区域"),timestamp:k.default("时间戳")},B=[/^(id|type|port|state|status|level|index|code|类型|类别|种类|方式|编码|代码|号码|编号|代号|学号|工号|端口|状态|层级)$/i,/\w(Id|Type|Port|State|Status|Level|Index|Code|Num|No|_id|_type|_port|_state|_status|_level|_index|_code|_num|-id|-type|-port|-state|-status|-level|-index|-code|-num)$/,/[^x00-xff](id|type|port|state|status|level|index|code|num|类型|类别|种类|方式|编码|代码|号码|编号|代号|学号|工号|端口|状态|层级)$/i];a.determineFieldAsDimensionOrMeasure=function(e){if(e.comment.indexOf("${维度}")>-1)return"dimension";if(e.comment.indexOf("${度量}")>-1)return"measure";if("int"===e.type){for(var a=!1,t=0;t<B.length;t++)if(B[t].test(e.name)){a=!0;break}if(a)return"dimension"}return["string","date","datetime","timestamp"].indexOf(e.type)>-1?"dimension":["int","float"].indexOf(e.type)>-1?"measure":void 0}});
;sugar.define("sugar:stores/data-model/dm-schema-homologous.ts",function(e,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var t=e("sugar:node_modules/mobx-state-tree/dist/mobx-state-tree.js"),s=t.types.model("DataModelSchemaHomologous",{homoId:t.types.optional(t.types.string,""),config:t.types.optional(t.types.frozen(),{})});o.default=s});
;sugar.define("sugar:stores/data-model/dm-schema-table.ts",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=e("sugar:node_modules/mobx-state-tree/dist/mobx-state-tree.js"),o=n.types.model("DataModelSchemaTableJoinOn",{leftField:n.types.optional(n.types.string,""),rightField:n.types.optional(n.types.string,"")}).actions(function(e){return{changeLeftField:function(t){e.leftField=t},changeRightField:function(t){e.rightField=t}}}),a=n.types.model("DataModelSchemaTableJoin",{type:n.types.optional(n.types.enumeration(["inner","left","full"]),"inner"),leftTableId:n.types.optional(n.types.string,""),on:n.types.array(o)}).actions(function(e){return{addOn:function(){e.on.push(n.cast({}))},delOn:function(t){e.on.remove(t)}}}),i=n.types.model("DataModelSchemaTable",{tableId:n.types.optional(n.types.string,""),tableName:n.types.optional(n.types.string,""),customTableHash:n.types.optional(n.types.string,""),level:n.types.optional(n.types.number,1),dbHash:n.types.optional(n.types.string,""),homoId:n.types.optional(n.types.string,""),join:n.types.optional(a,{})}).actions(function(e){return{changeJoinTable:function(t){e.join.leftTableId=t,e.join.on=n.cast([{leftField:"",rightField:""}]),n.getParent(e,2).updateTableLevel(e)},changeJoinType:function(t){e.join.type=t}}});t.default=i});
;sugar.define("sugar:stores/data-model/dm-schema-dimension.ts",function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=t("sugar:node_modules/mobx-state-tree/dist/mobx-state-tree.js"),o=s.types.model("DimensionConvert",{type:s.types.optional(s.types.enumeration(["string","int","float","date","datetime",""]),""),label:s.types.optional(s.types.enumeration(["geo","lng","lat",""]),""),original:s.types.optional(s.types.string,""),dataType:s.types.optional(s.types.enumeration(["ms","s","int",""]),"")}),n=s.types.model("DataModelSchemaDemension",{type:s.types.optional(s.types.enumeration(["dimension","hierarchy"]),"dimension"),tableId:s.types.optional(s.types.string,""),field:s.types.optional(s.types.string,""),calculated:s.types.optional(s.types.boolean,!1),noEnumerable:s.types.optional(s.types.boolean,!1),expression:s.types.optional(s.types.string,""),alias:s.types.optional(s.types.string,""),NLPAlias:s.types.optional(s.types.frozen(),[]),dataType:s.types.optional(s.types.enumeration(["string","int","float","date","datetime","timestamp"]),"string"),dataTypeInDB:s.types.optional(s.types.string,""),isHidden:s.types.optional(s.types.boolean,!1),renameHash:s.types.optional(s.types.string,""),hierarchyId:s.types.optional(s.types.string,""),pathIds:s.types.array(s.types.string),convert:s.types.optional(o,{}),comment:s.types.optional(s.types.string,""),statistics:s.types.optional(s.types.frozen(),{})});e.default=n});
;sugar.define("sugar:stores/data-model/dm-schema-measure.ts",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=e("sugar:node_modules/mobx-state-tree/dist/mobx-state-tree.js"),o=s.types.model("MeasureConvert",{type:s.types.optional(s.types.enumeration(["string","int","float",""]),"")}),a=s.types.model("MeasureFormat",{accuracy:s.types.optional(s.types.number,-1),dataFormat:s.types.optional(s.types.enumeration(["","numFunc","percent","timeFunc","byteFunc","bpsFunc","none"]),""),unit:s.types.optional(s.types.string,"")}),n=s.types.model("DataModelSchemaDemension",{type:s.types.optional(s.types.enumeration(["measure"]),"measure"),tableId:s.types.optional(s.types.string,""),field:s.types.optional(s.types.string,""),calculated:s.types.optional(s.types.boolean,!1),expression:s.types.optional(s.types.string,""),isAggregated:s.types.optional(s.types.boolean,!1),alias:s.types.optional(s.types.string,""),NLPAlias:s.types.optional(s.types.frozen(),[]),dataType:s.types.optional(s.types.enumeration(["string","int","float"]),"string"),dataTypeInDB:s.types.optional(s.types.string,""),isHidden:s.types.optional(s.types.boolean,!1),defaultAggregator:s.types.optional(s.types.enumeration(["SUM","COUNT","COUNTD","AVG","MAX","MIN"]),"SUM"),convert:s.types.optional(o,{}),format:s.types.optional(a,{}),comment:s.types.optional(s.types.string,"")});t.default=n});
;sugar.define("sugar:stores/data-model/dm-schema-menu.ts",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=e("sugar:utils/i18n.ts"),a=e("sugar:node_modules/mobx-state-tree/dist/mobx-state-tree.js"),n=a.types.model("DataModelSchemaMenu",{type:a.types.optional(a.types.enumeration(["menu"]),"menu"),menuId:a.types.optional(a.types.string,""),name:a.types.optional(a.types.string,s.default("默认")),nodes:a.types.array(a.types.string)});t.default=n});
;sugar.define("sugar:sites/group/manage/data-model/editor/homologous-db-conf.tsx",function(o,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.homologousDbConf=void 0;var e=o("sugar:utils/i18n.ts"),t={addControls:function(o,a){return[{type:"select",name:"database",label:e.default("数据库"),required:!0,source:"/api/group/"+o+"/database/"+a+"/getDatabaseList"}]},display:function(o){return o.database||""},hasSameHomo:function(o,a,e){var t;return(null===(t=e.database)||void 0===t?void 0:t.toLocaleLowerCase().trim())===o.database.toLowerCase().trim()?"sameAsMain":a.some(function(o){var a,t;return(null===(a=o.config.database)||void 0===a?void 0:a.toLowerCase().trim())===(null===(t=e.database)||void 0===t?void 0:t.toLocaleLowerCase().trim())})}};a.homologousDbConf={0:t,20:t,36:t,18:t,1:t,22:{addControls:function(){return[{type:"text",name:"catalog",label:"Catalog",required:!0},{type:"text",name:"schema",label:"Schema",required:!0}]},display:function(o){return o.catalog+"."+o.schema},hasSameHomo:function(o,a,e){var t,r,i;return(null===(t=e.catalog)||void 0===t?void 0:t.toLocaleLowerCase().trim())===o.database.toLowerCase().trim()&&(null===(r=e.schema)||void 0===r?void 0:r.toLocaleLowerCase().trim())===(null===(i=o.config.schema)||void 0===i?void 0:i.toLowerCase().trim())?"sameAsMain":a.some(function(o){var a,t,r,i;return(null===(a=o.config.catalog)||void 0===a?void 0:a.toLowerCase().trim())===(null===(t=e.catalog)||void 0===t?void 0:t.toLocaleLowerCase().trim())&&(null===(r=o.config.schema)||void 0===r?void 0:r.toLowerCase().trim())===(null===(i=e.schema)||void 0===i?void 0:i.toLocaleLowerCase().trim())})}}}});
;sugar.define("sugar:stores/data-model/dm-schema.ts",function(e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.getDBInfoOfTable=n.getDMMapByAlias=void 0;var a=e("sugar:node_modules/tslib/tslib.js"),t=e("sugar:utils/i18n.ts"),i=e("sugar:node_modules/mobx-state-tree/dist/mobx-state-tree.js"),s=e("sugar:node_modules/mobx/lib/mobx.js"),r=e("sugar:stores/index.ts"),o=e("sugar:node_modules/amis/lib/index.js"),d=e("sugar:utils/frontendId.ts"),u=e("sugar:stores/data-model/dm-schema-homologous.ts"),l=e("sugar:stores/data-model/dm-schema-table.ts"),m=e("sugar:stores/data-model/dm-schema-dimension.ts"),c=e("sugar:stores/data-model/dm-schema-measure.ts"),f=e("sugar:stores/data-model/dm-schema-menu.ts"),h=e("sugar:utils/data-model-helper.ts"),p=e("sugar:sites/group/manage/data-model/editor/homologous-db-conf.tsx"),g=e("sugar:node_modules/lodash/cloneDeep.js"),v=e("sugar:node_modules/lodash/isEqual.js"),y=function(e,n,a){return void 0===a&&(a=[]),e.forEach(function(t){t.join.leftTableId===n&&(a.push(t),y(e,t.tableId,a))}),a},b=function(e,n){var a=e.dimension[n]||e.measure[n];return a?a:!1};n.getDMMapByAlias=function(e){var n={dimension:{},measure:{}};return e.dimensions.forEach(function(e,a){if("dimension"===e.type){var i=e.alias||e.field;b(n,i)?o.toast.error(t.default("bug：模型中有同名维度或度量「"+i+"」")):n.dimension[i]={node:e,id:a}}}),e.measures.forEach(function(e,a){var i=e.alias||e.field;b(n,i)?o.toast.error(t.default("bug：模型中有同名维度或度量「"+i+"」")):n.measure[i]={node:e,id:a}}),n},n.getDBInfoOfTable=function(e,n){var a,t,i={dbOrHomologous:"unknown",tableDispalyName:"unknown"};if(t="string"==typeof n?e.tables.find(function(e){return e.tableId===n}):n,!t)return i;var s=r.getRoot(e);if(t.homoId){var o=e.homologous.find(function(e){return e.homoId===(null===t||void 0===t?void 0:t.homoId)}),d=null===(a=s.database.simpleList.dataMapByHash.get(e.dbHashes[0]))||void 0===a?void 0:a.type;if(o&&null!=d&&p.homologousDbConf[d]){var u=p.homologousDbConf[d].display(o.config);i.dbOrHomologous=u,i.tableDispalyName=t.tableName+"("+u+")"}}else{var l=s.database.simpleList.dataMapByHash.get(t.dbHash);if(l&&(i.dbOrHomologous=l.name),0===e.dbHashes.indexOf(t.dbHash)){if(i.tableDispalyName=t.tableName,t.customTableHash){var m=s.customTable.list.data.find(function(e){return e.hash===(null===t||void 0===t?void 0:t.customTableHash)});i.tableDispalyName=m?m.name:t.tableName}}else i.tableDispalyName=t.tableName+"("+i.dbOrHomologous+")"}return i};var I=i.types.model("DataModelSchema",{dbHashes:i.types.array(i.types.string),homologous:i.types.array(u.default),tables:i.types.array(l.default),dimensions:i.types.map(m.default),measures:i.types.map(c.default),dimensionMenu:i.types.array(f.default),measureMenu:i.types.array(f.default),filters:i.types.optional(i.types.frozen(),[]),limits:i.types.optional(i.types.frozen(),{}),fuzzy:i.types.optional(i.types.frozen(),{}),synTable:i.types.optional(i.types.boolean,!1)}).actions(function(e){return{addHomologous:function(n){var a=d.generateIdUpperCase();e.homologous.push({homoId:a,config:n});var t=r.getRoot(e);t.database.loadDbHomologousTables(e.dbHashes[0],{homoId:a,config:n})},removeHomologous:function(n){var a=e.tables.some(function(e){return e.homoId===n});if(a)return void o.toast.error(t.default("该同源异库中已经有数据表被使用，不能删除"));var i=e.homologous.find(function(e){return e.homoId===n});i&&e.homologous.remove(i)},addFederatedDb:function(n){e.dbHashes.push(n);var a=r.getRoot(e);a.database.loadDbTables(n)},removeFederatedDb:function(n){var a=e.tables.some(function(e){return e.dbHash===n});return a?void o.toast.error(t.default("该数据源中已经有数据表被使用，不能删除")):void e.dbHashes.remove(n)},addTable:function(a,s,u,l){if(e.tables.some(function(e){return e.tableName===s&&e.dbHash===a&&e.homoId===l||u&&e.customTableHash===u}))return o.toast.error(t.default("数据表已经在模型中，不能再次添加！")),"";var m=r.getRoot(e),c=m.database.tableSchema.get(l?a+"-"+l:a),f=c?c.get(s).data:void 0;if(!c||!f)return o.toast.error(t.default("没有获取到数据表「"+s+"」的元信息")),"";var p=e.tables,g=d.generateIdUpperCase();p.push(i.cast({tableId:g,tableName:u||s,customTableHash:u||"",level:p.length?2:1,dbHash:a,homoId:l||"",join:{leftTableId:p.length?p[0].tableId:"",on:[{leftField:"",rightField:""}]}}));var v=s;if(!u){var y=n.getDBInfoOfTable(e,p[p.length-1]);v=y.tableDispalyName}var I={type:"menu",menuId:d.generateIdUpperCase(!0),name:v,nodes:[]},M={type:"menu",menuId:d.generateIdUpperCase(!0),name:v,nodes:[]},x=n.getDMMapByAlias(e);return f.forEach(function(n){var a=n.name;b(x,a)&&(a=a+"("+s+")",b(x,a)&&(a+="_1",b(x,a)&&(a=""+a+v)));var t=h.determineFieldAsDimensionOrMeasure(n);"dimension"===t?(I.nodes.push(n.id),e.dimensions.set(n.id,i.cast({type:"dimension",tableId:g,field:n.name,calculated:!1,expression:"",alias:a,dataType:n.type,dataTypeInDB:n.typeInDB,isHidden:!1,renameHash:"",comment:n.comment.replace("${维度}","")}))):"measure"===t&&(M.nodes.push(n.id),e.measures.set(n.id,i.cast({type:"measure",tableId:g,field:n.name,calculated:!1,expression:"",alias:a,dataType:n.type,dataTypeInDB:n.typeInDB,isHidden:!1,defaultAggregator:"string"===n.type?"COUNT":"SUM",comment:n.comment.replace("${度量}","")})))}),e.dimensionMenu.push(i.cast(I)),e.measureMenu.push(i.cast(M)),this.autoSetDataLabelByMenu("dimension",e.dimensionMenu.length-1),this.autoSetDataLabelByMenu("measure",e.measureMenu.length-1),g},autoSetDataLabelByMenu:function(n,t){var i="dimension"===n?e.dimensionMenu[t]:e.measureMenu[t];if(i)for(var s=0,r=a.__spreadArrays(i.nodes);s<r.length;s++){var o=r[s],d="dimension"===n?e.dimensions.get(o):e.measures.get(o);if(d&&!d.calculated&&"hierarchy"!==d.type){var u=h.getSuggestDataLable(d);u&&this.convertDataLabel(n,t,o,u)}}},deleteTable:function(n){var a=e.tables.find(function(e){return e.tableId===n});if(a){var t=y(e.tables,n);t.push(a);var s=[];t.forEach(function(n){s.push(n.tableId),e.tables.remove(n)});var r=[],o=[];e.dimensions.forEach(function(e,n){~s.indexOf(e.tableId)&&"dimension"===e.type&&!e.calculated&&r.push(n)}),e.measures.forEach(function(e,n){~s.indexOf(e.tableId)&&!e.calculated&&o.push(n)}),r.forEach(function(n){return e.dimensions.delete(n)}),o.forEach(function(n){return e.measures.delete(n)});var d=new RegExp("\\{("+[].concat(r,o).join("|")+")\\}"),u=[],l=[];e.dimensions.forEach(function(e,n){e.calculated&&d.test(e.expression)&&u.push(n)}),e.measures.forEach(function(e,n){e.calculated&&d.test(e.expression)&&l.push(n)}),u.forEach(function(n){return e.dimensions.delete(n)}),l.forEach(function(n){return e.measures.delete(n)});var m=[];e.dimensions.forEach(function(e,n){if("hierarchy"===e.type){var a=e.pathIds.filter(function(e){return!~[].concat(r,u).indexOf(e)});a.length?e.pathIds=i.cast(a):m.push(n)}}),m.forEach(function(n){return e.dimensions.delete(n)});var c=[].concat(r,u,m),f=[].concat(o,l);[{menu:e.dimensionMenu,delNodes:c},{menu:e.measureMenu,delNodes:f}].forEach(function(e){var n=[];e.menu.forEach(function(a){var t=a.nodes.filter(function(n){return!~e.delNodes.indexOf(n)});t.length?a.nodes=i.cast(t):n.push(a)}),n.forEach(function(n){return e.menu.remove(n)})});var h=r.concat(o),p=this.removeFilter(h,g(e.filters)),b=this.removeLimit(h,g(e.limits)),I=this.removeFuzzy(h,g(e.fuzzy));p&&!v(e.filters,p)?e.filters=p:null,b&&!v(e.limits,b)?e.limits=b:null,I&&!v(e.fuzzy,I)?e.fuzzy=I:null}},updateTableLevel:function(n){var a=n.level,t=e.tables.find(function(e){return e.tableId===n.join.leftTableId}),i=t.level+1,s=i-a;if(n.level=i,s){var r=y(e.tables,n.tableId);r.forEach(function(e){return e.level=e.level+s})}},addMenu:function(n,a){var t="dimension"===n?e.dimensionMenu:e.measureMenu;t.push(i.cast({menuId:d.generateIdUpperCase(!0),name:a,nodes:[]}))},renameMenu:function(n,a,t){var i="dimension"===n?e.dimensionMenu:e.measureMenu;i[t].name=a},removeMenu:function(n,a){var i="dimension"===n?e.dimensionMenu:e.measureMenu;i[a]&&0===i[a].nodes.length?i.remove(i[a]):o.toast.error(t.default("文件夹下还有字段，不能删除！"))},changeMenuOrder:function(n,a,t){var s="dimension"===n?e.dimensionMenu:e.measureMenu;if(s.length>1){if(0===a&&("top"===t||"up"===t)||a===s.length-1&&("down"===t||"bottom"===t))return;var r=i.cast(s[a].toJSON());if(s.splice(a,1),"up"===t)s.splice(a-1,0,r);else if("top"===t)s.unshift(r);else if("bottom"===t)s.push(r);else{var o=a+1;o>=s.length?s.push(r):s.splice(o,0,r)}}},changeNodeOrder:function(n,a,t,i){var s="dimension"===n?e.dimensionMenu[a].nodes:e.measureMenu[a].nodes,r=e.dimensions.get(t);if(r&&r.hierarchyId){var o=e.dimensions.get(r.hierarchyId);if(!o)return;s=o.pathIds}var d=s.indexOf(t);if(~d&&s.length>1){if(0===d&&("top"===i||"up"===i)||d===s.length-1&&("down"===i||"bottom"===i))return;if(s.splice(d,1),"up"===i)s.splice(d-1,0,t);else if("top"===i)s.unshift(t);else if("bottom"===i)s.push(t);else{var u=d+1;u>=s.length?s.push(t):s.splice(u,0,t)}}},toggleHidden:function(n,a){var t="dimension"===n?e.dimensions:e.measures,i=t.get(a);i&&(i.isHidden=!i.isHidden)},batchToggleHidden:function(n,a){n.forEach(function(n){var t="dimension"===n.type?e.dimensions:e.measures,i=t.get(n.id);i&&(i.isHidden=a)})},cancelAllHidden:function(n){var a="dimension"===n?e.dimensions:e.measures;a.forEach(function(e){e.isHidden=!1})},moveToMenu:function(n,a,t,i){var s="dimension"===n?e.dimensionMenu:e.measureMenu,r=s[a],o=s[t],d="dimension"===n?e.dimensions.get(i):e.measures.get(i);if(a!==t&&r&&o&&d)if(r.nodes.remove(i),"hierarchy"===d.type)o.nodes.unshift(i);else if("measure"===d.type)o.nodes.push(i);else{if(d.hierarchyId){var u=e.dimensions.get(d.hierarchyId);d.hierarchyId="",u&&u.pathIds.remove(i)}o.nodes.push(i)}},exchangeDimensionAndMeasure:function(n,t,i){var s="dimension"===n?e.dimensionMenu[t]:e.measureMenu[t],r="dimension"===n?e.dimensions.get(i):e.measures.get(i);if(s&&r&&"hierarchy"!==r.type){var o=r.convert.type||r.dataType;if(~["string","int","float"].indexOf(o)){if("dimension"===r.type&&r.hierarchyId){var d=e.dimensions.get(r.hierarchyId);d&&d.pathIds.remove(i)}else s.nodes.remove(i);var u="dimension"===n?e.measureMenu:e.dimensionMenu,l=u.find(function(e){return e.name.trim()===s.name.trim()})||u[0];l.nodes.push(i),"dimension"===r.type?(e.measures.set(i,a.__assign(a.__assign({},r.toJSON()),{type:"measure",defaultAggregator:"string"===o?"COUNT":"SUM"})),e.dimensions.delete(i)):(e.dimensions.set(i,a.__assign(a.__assign({},r.toJSON()),{type:"dimension"})),e.measures.delete(i))}}},batchExchangeDimensionAndMeasure:function(n,a){n.forEach(function(n){a!==n.type&&e.exchangeDimensionAndMeasure(n.type,n.menuIndex,n.id)})},convertDataType:function(n,a,t,i){var s="dimension"===n?e.dimensions.get(a):e.measures.get(a);!s||"string"!==s.dataType&&"int"!==s.dataType||("string"!==t&&"int"!==t&&"dimension"===s.type&&(s.renameHash=""),"string"!==t&&(t||"string"!==s.dataType)||"measure"!==s.type?"measure"===s.type&&(s.defaultAggregator="SUM"):s.defaultAggregator="COUNT",s.convert.type=t,i&&i.original&&"dimension"===s.type&&(s.convert.original=i.original),i&&i.dataType&&"dimension"===s.type&&(s.convert.dataType=i.dataType),"dimension"===s.type&&"geo"===s.convert.label&&"string"!==t&&(s.convert.label=""),"dimension"===s.type&&~["lat","lng"].indexOf(s.convert.label)&&!~["string","float"].indexOf(t)&&(s.convert.label=""))},setNoEnumerable:function(n,a){var t=e.dimensions.get(n);t&&(t.noEnumerable=a)},convertDataLabel:function(n,a,t,i){["geo","lng","lat"].includes(i)&&("measure"===n?e.exchangeDimensionAndMeasure("measure",a,t):"geo"===i?e.convertDataType("dimension",t,""):e.convertDataType("dimension",t,"float"));var s=e.dimensions.get(t);s&&(s.convert.label=i)},dragSort:function(n,a,t){if(a.id!==t.id&&a.id&&t.id){var i=a.id,s=t.id,r="dimension"===n?e.dimensionMenu:e.measureMenu,o="dimension"===n?e.dimensions:e.measures,d=0,u=null,l=0,m=0,c=null,f=0,h=0;if(r.forEach(function(e,n){e.menuId===s&&(c=e,f=d,h=n),d++,e.nodes.forEach(function(e){var a=o.get(e);a&&(e===s?(c=a,f=d,h=n):e===i&&(u=a,l=d,m=n),d++,"hierarchy"===a.type&&a.pathIds&&a.pathIds.forEach(function(e){var a=o.get(e);a&&(e===s?(c=a,f=d,h=n):e===i&&(u=a,l=d,m=n),d++)}))})}),u&&c){var p=u,g=c,v=l>f?"up":"down";if("menu"!==g.type||0!==h||"up"!==v){if("dimension"===p.type&&p.hierarchyId){var y=e.dimensions.get(p.hierarchyId);if(!y)return;p.hierarchyId="",y.pathIds.remove(i)}else r[m].nodes.remove(i);if("menu"===g.type)"down"===v?g.nodes.unshift(i):"up"===v&&r[h-1].nodes.push(i);else{var b=r[h].nodes;if("dimension"===g.type&&g.hierarchyId){var y=e.dimensions.get(g.hierarchyId);if(!y)throw"sdfsdf";p.hierarchyId=g.hierarchyId,b=y.pathIds}var I=b.indexOf(s);if("down"===v){if("hierarchy"===g.type)return g.pathIds.unshift(i),void(p.hierarchyId=s);I===b.length-1?b.push(i):b.splice(I+1,0,i)}else b.splice(I,0,i)}}}}},addHierarchy:function(n,a,t){void 0===a&&(a=0),void 0===t&&(t="");var s=d.generateIdUpperCase(!0);e.dimensions.set(s,i.cast({type:"hierarchy",alias:n})),e.dimensionMenu[a].nodes.unshift(s),t&&e.putDimIntoHierarchy(t,s)},renameHierarchy:function(n,a){var t=e.dimensions.get(a);t&&(t.alias=n)},removeHierarchy:function(n,a){var t,i=e.dimensionMenu[a],s=e.dimensions.get(n);~i.nodes.indexOf(n)&&s&&(i.nodes.remove(n),s.pathIds.forEach(function(n){var a=e.dimensions.get(n);a.hierarchyId=""}),(t=i.nodes).unshift.apply(t,s.pathIds),e.dimensions.delete(n))},putDimIntoHierarchy:function(n,a){var t=e.dimensions.get(n),i=e.dimensions.get(a);if(t&&"hierarchy"!==t.type&&i&&"dimension"!==i.type)if(t.hierarchyId){if(t.hierarchyId===a)return;var s=e.dimensions.get(t.hierarchyId);s.pathIds.remove(n),i.pathIds.push(n),t.hierarchyId=a}else i.pathIds.push(n),t.hierarchyId=a,e.dimensionMenu.forEach(function(e){~e.nodes.indexOf(n)&&e.nodes.remove(n)})},getOutHierarchy:function(n,a){var t=e.dimensions.get(n),i=e.dimensionMenu[a];if(t&&i){var s=e.dimensions.get(t.hierarchyId);s&&s.pathIds.remove(n);var r=i.nodes.indexOf(t.hierarchyId)||0;t.hierarchyId="",r>=i.nodes.length-1?i.nodes.push(n):i.nodes.splice(r+1,0,n)}},changeNLPAlias:function(n,a,i){void 0===i&&(i=!1);var s;if(s=i?e.measures.get(n):e.dimensions.get(n)){if(a.length>10)return o.toast.error(t.default("同义词需小于 10 个")),!1;for(var r=[],d=0,u=a;d<u.length;d++){var l=u[d];if(l.trim().length>20)return o.toast.error(t.default("同义词「"+l+"」长度需小于20")),!1;l.trim()&&r.push(l.trim())}s.NLPAlias=r}return!0},renameDimension:function(a,i){var s=i.trim(),r=e.dimensions.get(a);if(r){s=s||r.field;var d=n.getDMMapByAlias(e),u=b(d,s);if(u&&u.node!==r)return o.toast.error(t.default("已有同名的维度或度量，请另起名称！")),!1;r.alias=s}return!0},changeDimensionRenamehash:function(n,a){var t=e.dimensions.get(n);t&&(t.renameHash=a)},changeMeasure:function(a,i){var s=i.trim(),r=e.measures.get(a);if(r){s=s||r.field;var d=n.getDMMapByAlias(e),u=b(d,s);if(u&&u.node!==r)return o.toast.error(t.default("已有同名的维度或度量，请另起名称！")),!1;r.alias=s}return!0},changeMeasureDataFormat:function(n,a){var t=e.measures.get(n);t&&(t.format.dataFormat=a,"percent"===a?(t.format.unit="%",(-1===t.format.accuracy||4===t.format.accuracy)&&(t.format.accuracy=2)):"%"===t.format.unit&&(t.format.unit=""))},changeMeasureAccuracy:function(n,a){var t=e.measures.get(n);t&&(t.format.accuracy=a)},changeMeasureUnit:function(n,a){a=(a||"").replace(/\s+$/,"");var t=e.measures.get(n);t&&(t.format.unit=a)},changeMeasureAggregator:function(n,a){var t=e.measures.get(n);t&&(t.defaultAggregator=a)},addCalculateDimension:function(a,s){var r=a.alias,u=a.expression,l=a.dataType,m=a.dateOriginal,c=a.datetimeOriginal;if(r=r.trim(),!r)return o.toast.error(t.default("名称不能为空")),!1;var f=n.getDMMapByAlias(e),h=b(f,r);if(h)return o.toast.error(t.default("已有同名的维度或度量，请另起名称！")),!1;var p={alias:r,type:"dimension",calculated:!0,expression:u,dataType:l};"datestring"===l?(p.dataType="string",p.convert={type:"date",original:m}):"datetimestring"===l&&(p.dataType="string",p.convert={type:"datetime",original:c});var g=d.generateIdUpperCase(!0);return e.dimensions.set(g,i.cast(p)),e.dimensionMenu[s||0].nodes.push(g),!0},editCalculateDimension:function(a,i){var s=a.alias,r=a.expression,d=a.dataType,u=a.dateOriginal,l=a.datetimeOriginal;if(s=s.trim(),!s)return o.toast.error(t.default("名称不能为空")),!1;var m=e.dimensions.get(i);if(!m)return o.toast.error(t.default("没找到对应的计算维度")),!1;var c=n.getDMMapByAlias(e),f=b(c,s);return f&&f.node!==m?(o.toast.error(t.default("已有同名的维度或度量，请另起名称！")),!1):(m.alias=s,m.expression=r,"datestring"===d?(m.dataType="string",m.convert.type="date",m.convert.original=u):"datetimestring"===d?(m.dataType="string",m.convert.type="datetime",m.convert.original=l):(m.dataType=d,m.convert.type="",m.convert.original=""),~["string","int"].indexOf(d)||(m.renameHash=""),"geo"===m.convert.label&&"string"!==d&&(m.convert.label=""),~["lat","lng"].indexOf(m.convert.label)&&!~["string","float"].indexOf(d)&&(m.convert.label=""),!0)},copyDimension:function(a,r){var o=e.dimensions.get(a);if(o){var u={};o.calculated?u=s.toJS(o):(u=s.toJS(o),u.field="",u.tableId="",u.dataTypeInDB="",u.calculated=!0,u.expression="{"+a+"}","timestamp"===u.dataType&&(u.dataType="datetime")),u.hierarchyId="";var l=d.generateIdUpperCase(!0);u.alias=u.alias+"_"+t.default("副本");var m=n.getDMMapByAlias(e),c=b(m,u.alias);c&&(u.alias=u.alias+l),e.dimensions.set(l,i.cast(u));var f=e.dimensionMenu[r||0].nodes,h=f.indexOf(a);-1===h?f.push(l):h===f.length-1?f.push(l):f.splice(h+1,0,l)}},addCalculateMeasure:function(a,s){var r=a.alias,u=a.expression,l=a.dataType,m=a.accuracy,c=a.isAggregated;if(r=r.trim(),!r)return o.toast.error(t.default("名称不能为空")),!1;var f=n.getDMMapByAlias(e),h=b(f,r);if(h)return o.toast.error(t.default("已有同名的维度或度量，请另起名称！")),!1;var p={alias:r,type:"measure",calculated:!0,expression:u,dataType:l,defaultAggregator:"string"===l?"COUNT":"SUM",isAggregated:c};"float"===l&&(p.format={accuracy:m});var g=d.generateIdUpperCase(!0);return e.measures.set(g,i.cast(p)),e.measureMenu[s||0].nodes.push(g),!0},editCalculateMeasure:function(a,i){var s=a.alias,r=a.expression,d=a.dataType,u=a.accuracy,l=a.isAggregated;if(s=s.trim(),!s)return o.toast.error(t.default("名称不能为空")),!1;var m=e.measures.get(i);if(!m)return o.toast.error(t.default("没找到对应的计算度量")),!1;var c=n.getDMMapByAlias(e),f=b(c,s);return f&&f.node!==m?(o.toast.error(t.default("已有同名的维度或度量，请另起名称！")),!1):(m.alias=s,m.expression=r,m.isAggregated=!!l,"string"===m.dataType&&"string"!==d?m.defaultAggregator="SUM":"string"!==m.dataType&&"string"===d&&(m.defaultAggregator="COUNT"),m.dataType=d,"float"===d&&(m.format.accuracy=u),!0)},copyMeasure:function(a,r){var o=e.measures.get(a);if(o){var u={};o.calculated?u=s.toJS(o):(u=s.toJS(o),u.field="",u.tableId="",u.dataTypeInDB="",u.calculated=!0,u.expression="{"+a+"}");var l=d.generateIdUpperCase(!0);u.alias=u.alias+"_"+t.default("副本");var m=n.getDMMapByAlias(e),c=b(m,u.alias);c&&(u.alias=u.alias+l),e.measures.set(l,i.cast(u));var f=e.measureMenu[r||0].nodes,h=f.indexOf(a);-1===h?f.push(l):h===f.length-1?f.push(l):f.splice(h+1,0,l)}},removeCalculate:function(n,a,t){var i="dimension"===n?e.dimensionMenu[a]:e.measureMenu[a],s="dimension"===n?e.dimensions:e.measures,r=s.get(t);i&&~i.nodes.indexOf(t)&&r&&r.calculated&&(i.nodes.remove(t),s.delete(t))},setFilters:function(n){e.filters=n},removeFilter:function(e,n,a,t){var i,s,r,o,d;if(e.length&&n&&Array.isArray(n)&&n.length){var u=!1,l=n.filter(function(n){return~e.indexOf(n.id)&&(u=!0),!~e.indexOf(n.id)});return u?l:!1}if(e.length&&(null===n||void 0===n?void 0:n.connect)&&(null===(i=null===n||void 0===n?void 0:n.exprs)||void 0===i?void 0:i.length)){for(var m=(null===(s=null===n||void 0===n?void 0:n.exprs)||void 0===s?void 0:s.length)||0;m--;){var c=null===n||void 0===n?void 0:n.exprs[m];(null===c||void 0===c?void 0:c.filter)&&(null===(r=null===c||void 0===c?void 0:c.filter)||void 0===r?void 0:r.id)&&~e.indexOf(null===(o=null===c||void 0===c?void 0:c.filter)||void 0===o?void 0:o.id)?(null===n||void 0===n?void 0:n.exprs.splice(m,1),!(null===(d=null===n||void 0===n?void 0:n.exprs)||void 0===d?void 0:d.length)&&Array.isArray(a)&&void 0!==t&&a.splice(t--,1)):this.removeFilter(e,c,null===n||void 0===n?void 0:n.exprs,m)}return n}return!1},removeLimit:function(e,n){var a,t;return e.length&&(null===n||void 0===n?void 0:n.method)&&((null===(a=null===n||void 0===n?void 0:n.fixedLimits)||void 0===a?void 0:a.length)||(null===(t=null===n||void 0===n?void 0:n.dynamicLimits)||void 0===t?void 0:t.length))?("fixed"===n.method&&(n.fixedLimits||[]).forEach(function(n){(n.contents||[]).forEach(function(a,t){~e.indexOf(a.dimId)&&n.contents.splice(t--,1)})}),"dynamic"===n.method&&(n.dynamicLimits||[]).forEach(function(a,t){~e.indexOf(a.dimId)&&n.dynamicLimits.splice(t--,1)}),n):!1},removeFuzzy:function(e,n){var a;return e.length&&(null===(a=null===n||void 0===n?void 0:n.list)||void 0===a?void 0:a.length)?((n.list||[]).forEach(function(a,t){~e.indexOf(a.dimOrMeaId)&&n.list.splice(t--,1)}),n):!1},setLimits:function(n){e.limits=n},setFuzzy:function(n){e.fuzzy=n},setSynTable:function(n){e.synTable=n},getChildDimension:function(n){var a=e.dimensions.get(n),t=[];if(a&&a.hierarchyId){var i=e.dimensions.get(a.hierarchyId);if(!i)return;t=i.pathIds}var s=t.indexOf(n);return s>-1&&t.length>s+1?t[s+1]:void 0},batchReplaceAlias:function(a){var t=e.dimensions,i=e.measures,s=e.tables[0];a.forEach(function(a){var r="dimension"===a.type?t:i,o=r.get(a.id);if(null===o||void 0===o?void 0:o.comment){var d=o.comment.replace("${维度}","").replace("${度量}",""),u=n.getDMMapByAlias(e),l=d&&b(u,d);if(l&&l.id!==a.id){d=d+"("+s.tableName+")";var m=b(u,d);if(m&&m.id!==a.id){d+="_1";var c=b(u,d);c&&c.id!==a.id&&(d=d+"_"+parseInt(1e4*Math.random()))}}o.alias=d}})}}});n.default=I});
;sugar.define("sugar:sites/group/manage/data-model/editor/helper.ts",function(e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.tableBackgroundColor=a.isAggregatedExpression=a.translateExpressionToView=a.translateExpressionToCode=a.getSqlSuggestionOfDimensionAndMeasure=a.defaultAggregator=a.floatAccuracy=a.measureDataFormat=a.convertDataLabel=a.setNoEnumerable=a.convertDataType=a.getOutHierarchy=a.putIntoHierarchy=a.moveToMenu=a.changeOrder=void 0;var n=e("sugar:utils/i18n.ts"),t=e("sugar:stores/data-model/dm-schema.ts"),r=e("sugar:utils/common-helper.ts");a.changeOrder=function(e,a,t,r,c,i){var f=!1,o="dimension"===a?t.dimensionMenu:t.measureMenu;if(e)o.length>1&&(f=!0);else{var u="dimension"===a?t.dimensions.get(i):t.measures.get(i);if(!u)return;var d=o[c];if(d&&d.nodes.length>1&&("dimension"!==u.type||!u.hierarchyId))f=!0;else if("dimension"===u.type&&u.hierarchyId){var s=t.dimensions.get(u.hierarchyId);s&&s.pathIds.length>1&&(f=!0)}}if(f){r[r.length-1].divider||r.push({divider:!0});var l={icon:"fa fa-bars",name:n.default("顺序调整"),children:[{icon:"fa fa-angle-double-up",name:n.default("置顶"),cb:function(){return e?t.changeMenuOrder(a,c,"top"):t.changeNodeOrder(a,c,i,"top")}},{icon:"fa fa-angle-up",name:n.default("上移"),cb:function(){return e?t.changeMenuOrder(a,c,"up"):t.changeNodeOrder(a,c,i,"up")}},{icon:"fa fa-angle-down",name:n.default("下移"),cb:function(){return e?t.changeMenuOrder(a,c,"down"):t.changeNodeOrder(a,c,i,"down")}},{icon:"fa fa-angle-double-down",name:n.default("置底"),cb:function(){return e?t.changeMenuOrder(a,c,"bottom"):t.changeNodeOrder(a,c,i,"bottom")}}]};r.push(l)}},a.moveToMenu=function(e,a,t,r,c){var i="dimension"===e?a.dimensionMenu:a.measureMenu;if(i.length>1){var f=i.map(function(n,t){return{icon:t===r?"fa fa-check":"fa",name:n.name,cb:function(){return a.moveToMenu(e,r,t,c)}}});t.push({icon:"fa fa-folder",name:n.default("移动到"),children:f})}},a.putIntoHierarchy=function(e,a,t,r){var c=[],i=e.dimensions.get(r);if(i&&(e.dimensions.forEach(function(e,a){"hierarchy"===e.type&&c.push([e,a])}),c.length)){var f=c.map(function(a){return{icon:i.hierarchyId===a[1]?"fa fa-check":"fa",name:a[0].alias,cb:function(){return e.putDimIntoHierarchy(r,a[1])}}});a.push({icon:"fa fa-list",name:n.default("加入层级"),children:f})}},a.getOutHierarchy=function(e,a,t,r){var c=e.dimensions.get(r);c&&c.hierarchyId&&a.push({icon:"fa fa-sign-out",name:n.default("移出层级"),cb:function(){return e.getOutHierarchy(r,t)}})},a.convertDataType=function(e,a,t,r,c){var i="dimension"===e?a.dimensions.get(c):a.measures.get(c);if(i&&!i.calculated){var f=i.dataType,o=i.convert.type||f,u=[];if("string"===f){if(u=u.concat([{icon:"int"===o?"fa fa-check":"fa",name:n.default("整数"),cb:function(){return a.convertDataType(e,c,"int")}},{icon:"float"===o?"fa fa-check":"fa",name:n.default("小数"),cb:function(){return a.convertDataType(e,c,"float")}},{icon:"string"===o?"fa fa-check":"fa",name:n.default("还原为字符串"),cb:function(){return a.convertDataType(e,c,"")}}]),"dimension"===i.type){var d=i.convert.original;u=u.concat([{icon:"date"===o?"fa fa-check":"fa",name:n.default("日期(源数据格式)"),children:["YYYY-MM-DD","YYYY/MM/DD","YYYYMMDD","MM-DD-YYYY","MM/DD/YYYY"].map(function(n){return{icon:d===n?"fa fa-check":"fa",name:n,cb:function(){return a.convertDataType(e,c,"date",{original:n})}}})},{icon:"datetime"===o?"fa fa-check":"fa",name:n.default("时间(源数据格式)"),children:["YYYY-MM-DD HH:mm:ss","YYYY/MM/DD HH:mm:ss","YYYYMMDD HH:mm:ss","MM-DD-YYYY HH:mm:ss","MM/DD/YYYY HH:mm:ss"].map(function(n){return{style:{fontSize:"12px",padding:"8px 0",background:"datetime"===o&&d===n?"#eee":"",color:"datetime"===o&&d===n?"#108cee":"inherit"},name:n,cb:function(){return a.convertDataType(e,c,"datetime",{original:n})}}})}])}}else if("int"===i.dataType){var s="dimension"===e?i.convert.dataType:null;u=u.concat([{icon:"int"===o?"fa fa-check":"fa",name:n.default("还原为整数"),cb:function(){return a.convertDataType(e,c,"int")}}]),"dimension"===i.type&&(u=u.concat([{icon:"date"===o?"fa fa-check":"fa",name:n.default("日期(源数据格式)"),children:[{icon:"date"===o&&"ms"===s?"fa fa-check":"fa",name:n.default("时间戳(以ms为单位)"),cb:function(){return a.convertDataType(e,c,"date",{dataType:"ms"})}},{icon:"date"===o&&"s"===s?"fa fa-check":"fa",name:n.default("时间戳(以s为单位)"),cb:function(){return a.convertDataType(e,c,"date",{dataType:"s"})}},{icon:"date"===o&&"int"===s?"fa fa-check":"fa",name:n.default("整数(如:20121202)"),cb:function(){return a.convertDataType(e,c,"date",{dataType:"int"})}}]},{icon:"datetime"===o?"fa fa-check":"fa",name:n.default("时间(源数据格式)"),children:[{icon:"datetime"===o&&"ms"===s?"fa fa-check":"fa",name:n.default("时间戳(以ms为单位)"),cb:function(){return a.convertDataType(e,c,"datetime",{dataType:"ms"})}},{icon:"datetime"===o&&"s"===s?"fa fa-check":"fa",name:n.default("时间戳(以s为单位)"),cb:function(){return a.convertDataType(e,c,"datetime",{dataType:"s"})}}]}]))}u.length&&t.push({icon:"fa fa-magic",name:n.default("数据类型转换"),children:u})}},a.setNoEnumerable=function(e,a,t,r){var c=e.dimensions.get(r);c&&["string","int","float"].indexOf(c.dataType)>=0&&a.push({icon:"fa fa-atom",name:n.default(c.noEnumerable?"不可枚举型维度(是)":"不可枚举型维度(否)"),children:[{icon:c.noEnumerable?"fa fa-check":"fa",name:n.default("是"),cb:function(){return e.setNoEnumerable(r,!0)}},{icon:c.noEnumerable?"fa":"fa fa-check",name:n.default("否"),cb:function(){return e.setNoEnumerable(r,!1)}}]})},a.convertDataLabel=function(e,a,t,r,c){var i,f="";if("dimension"===e?(i=a.dimensions.get(c),i&&(f=i.convert.label)):i=a.measures.get(c),i&&("string"===i.dataType||"float"===i.dataType)){var o=[];"dimension"===i.type&&(o=o.concat([{icon:f?"fa":"fa fa-check",name:n.default("不标记"),cb:function(){return a.convertDataLabel(e,r,c,"")}}]),"float"!==i.dataType&&(o=o.concat([{icon:"geo"===f?"fa fa-check":"fa",name:n.default("地名/区域"),cb:function(){return a.convertDataLabel(e,r,c,"geo")}}]))),o=o.concat([{icon:"lng"===f?"fa fa-check":"fa",name:n.default("经度"),cb:function(){return a.convertDataLabel(e,r,c,"lng")}},{icon:"lat"===f?"fa fa-check":"fa",name:n.default("纬度"),cb:function(){return a.convertDataLabel(e,r,c,"lat")}}]),o.length&&t.push({icon:"fa fa-globe",name:n.default("标记为地理信息"),children:o})}},a.measureDataFormat=function(e,a,t,c){var i=e.measures.get(c);if(i){var f=i.format.dataFormat,o=[{icon:""===f?"fa fa-check":"fa",name:n.default("无"),cb:function(){return e.changeMeasureDataFormat(c,"")}}];r.dataFormatFunList.forEach(function(a){o.push({icon:f===a[1]?"fa fa-check":"fa",name:a[0],cb:function(){return e.changeMeasureDataFormat(c,a[1])}})}),a.push({icon:"fa fa-random",name:n.default("数据格式化"),children:o})}},a.floatAccuracy=function(e,a,t,c){var i=e.measures.get(c);if(i){var f=i.convert.type||i.dataType;if("float"===f){var o=i.format.accuracy,u=r.floatAccuracyList.map(function(a){return{icon:o===a[1]?"fa fa-check":"fa",name:a[0],cb:function(){return e.changeMeasureAccuracy(c,a[1])}}});a.push({icon:"sugar-icon icon-float",name:n.default("小数位数"),children:u})}}},a.defaultAggregator=function(e,t,r,c){var i=e.measures.get(c);if(i&&(!i.calculated||!a.isAggregatedExpression(i.expression,i.isAggregated))){var f=i.convert.type||i.dataType,o=i.defaultAggregator,u=[{icon:"COUNT"===o?"fa fa-check":"fa",name:n.default("计数"),cb:function(){return e.changeMeasureAggregator(c,"COUNT")}},{icon:"COUNTD"===o?"fa fa-check":"fa",name:n.default("计数(去重)"),cb:function(){return e.changeMeasureAggregator(c,"COUNTD")}}];"string"!==f&&(u=u.concat([{icon:"SUM"===o?"fa fa-check":"fa",name:n.default("求和"),cb:function(){return e.changeMeasureAggregator(c,"SUM")}},{icon:"AVG"===o?"fa fa-check":"fa",name:n.default("均值"),cb:function(){return e.changeMeasureAggregator(c,"AVG")}},{icon:"MAX"===o?"fa fa-check":"fa",name:n.default("最大值"),cb:function(){return e.changeMeasureAggregator(c,"MAX")}},{icon:"MIN"===o?"fa fa-check":"fa",name:n.default("最小值"),cb:function(){return e.changeMeasureAggregator(c,"MIN")}}])),t.push({icon:"fa fa-calculator",name:n.default("聚合(「"+o+"」)"),children:u})}},a.getSqlSuggestionOfDimensionAndMeasure=function(e){var a=[];return e.measureMenu.forEach(function(n){n.nodes.forEach(function(n){var t=e.measures.get(n);if(t&&!t.calculated){var r=t.alias||t.field;a.push({label:r,filterText:"_"+r,insertText:"{"+r+"}"})}})}),e.dimensionMenu.forEach(function(n){n.nodes.forEach(function(n){var t=e.dimensions.get(n);if(t&&!t.calculated)if("hierarchy"===t.type)t.pathIds.forEach(function(n){var t=e.dimensions.get(n);if(t&&!t.calculated){var r=t.alias||t.field;a.push({label:r,filterText:"_"+r,insertText:"{"+r+"}"})}});else{var r=t.alias||t.field;a.push({label:r,filterText:"_"+r,insertText:"{"+r+"}"})}})}),a},a.translateExpressionToCode=function(e,a){if(a=a.replace(/^[ \t\n\r]+/,"").replace(/[ \t\n\r]+$/,""),!a)throw new Error(n.default("表达式不能为空"));var r=t.getDMMapByAlias(e),c=a.replace(/\{([^\{\}]+)\}/g,function(e,a){var t=r.dimension[a];if(t)return"{"+t.id+"}";var c=r.measure[a];if(c)return"{"+c.id+"}";throw new Error(n.default("表达式解析错误，没有找到名为 「"+a+"」 的维度或度量！"))});return c},a.translateExpressionToView=function(e,a){if(!a)return a;var n=a.replace(/\{([^\{\}]+)\}/g,function(a,n){var t=e.dimensions.get(n);if(t)return"{"+(t.alias||t.field)+"}";var r=e.measures.get(n);return r?"{"+(r.alias||r.field)+"}":a});return n},a.isAggregatedExpression=function(e,a){return/\b(count|sum|avg|max|min|median|percentile|stdev|stdevp|var|varp|hll_union_agg|hll_add_agg|over)\s*\(/i.test(e)||a?!0:!1},a.tableBackgroundColor=["#f7f7f9","#f0f9eb","#fdf5e6","#d5e0f3","#fcfcec","#f7f4f7","#e3f1f8","#eef8f6","#edf7ea","#f1fcf0"]});
;sugar.define("sugar:utils/nlp-unit.ts",function(e,a){"use strict";function t(e,a){for(var t=e.select,r={},i=0,n=t;i<n.length;i++){var u=n[i];if("*"===u.name)for(var p=l(a),m=0,v=p;m<v.length;m++){var f=v[m],d=o(a,{name:f});d&&(r[f]=d)}else{var d=o(a,u);d&&(r[u.name]=d)}}if(e.order_by)for(var h=e.order_direction||"desc",y=0,T=e.order_by;y<T.length;y++){var E=T[y];if(!r[E.name]){var d=o(a,E);d&&(r[E.name]=d)}r[E.name]&&(r[E.name].sort=h)}if(e.group_by&&e.group_by.length)for(var D=0,b=e.group_by;D<b.length;D++){var A=b[D],N="",I="";if(g[A]?(N="date",I=g[A]):c[A]&&(N="time",I=c[A]),N){var x=!1;if("date"===N)for(var M in r)if("date"===r[M].subTypeTemp){r[M].dateTimeType=I,x=!0;break}if(!x)for(var M in r)if("datetime"===r[M].subTypeTemp||"timestamp"===r[M].subTypeTemp){r[M].dateTimeType=I,x=!0;break}if("date"===N&&!x){var R=s(a,["date"]);if(R){var d=o(a,{name:R,timeGranularity:I});d&&(r[R]=d)}}if(!x){var R=s(a,["datetime","timestamp"]);if(R){var d=o(a,{name:R,timeGranularity:I});d&&(r[R]=d)}}}else if(!r[A]){var d=o(a,{name:A});d&&(r[A]=d)}}var U=[];for(var Y in r)delete r[Y].subTypeTemp,U.push(r[Y]);return U}function r(e,a){var t=[];if(e.where&&e.where.condition)for(var r=0,s=e.where.condition;r<s.length;r++){var o=s[r],l=u(a,o.left);if(l){var m=l.convert.type||l.dataType,v={type:"dimension"===l.type?"d":"m",id:o.left,searchParams:{type:m}},f=p(o);if("date"===m){var d=n(f),g=d.minDate,c=d.maxDate;g&&c&&(v.searchParams.date={value:"cus",detail:{minDate:g,maxDate:c}},t.push(v))}else if("datetime"===m||"timestamp"===m){var h=i(f),g=h.minDate,c=h.maxDate;g&&c&&(v.searchParams.date={value:"timecus",detail:{minDate:g,maxDate:c}},t.push(v))}else("float"===m||"int"===m||"string"===m)&&("between"===f.op?(v.searchParams.textMatch={operator:"AND",value:[{type:"gte",value:f.values[0]},{type:"lte",value:f.values[1]}]},t.push(v)):"in"===f.op?(v.searchParams.listMatch={list:f.values,mode:"list"},t.push(v)):(v.searchParams.textMatch={operator:"AND",value:[{type:f.op,value:f.values[0]}]},t.push(v)))}}return t}function i(e){var a=e.values.map(function(e){return e.split("|")}),t="",r="";return"between"===e.op?(r=a[0][0]+" "+(a[0][1]?a[0][1]:"00:00:00"),t=a[1][0]+" "+(a[1][1]?a[1][1]:"23:59:59")):"equal"===e.op?(r=a[0][0]+" "+(a[0][1]?a[0][1]:"00:00:00"),t=a[0][0]+" "+(a[0][1]?a[0][1]:"23:59:59")):"gt"===e.op||"gte"===e.op?(r=a[0][0]+" "+(a[0][1]?a[0][1]:"00:00:00"),t="2299-01-01 23:59:59"):("lt"===e.op||"lte"===e.op)&&(r="1970-01-01 00:00:00",t=a[0][0]+" "+(a[0][1]?a[0][1]:"23:59:59")),{maxDate:t,minDate:r}}function n(e){e.values=e.values.map(function(e){return"$"+e.split("|")[0].replace(/-/g,"")});var a="",t="";return"between"===e.op?(t=e.values[0],a=e.values[1]):"equal"===e.op?(t=e.values[0],a=e.values[0]):"gt"===e.op||"gte"===e.op?(t=e.values[0],a="$22990101"):("lt"===e.op||"lte"===e.op)&&(t="$19700101",a=e.values[0]),{maxDate:a,minDate:t}}function s(e,a){for(var t=0,r=Array.from(e.config.dimensions.keys());t<r.length;t++){var i=r[t],n=e.config.dimensions.get(i);if(n){var s=n.convert.type||n.dataType;if(a.includes(s))return i}}for(var o=0,u=Array.from(e.config.measures.keys());o<u.length;o++){var i=u[o],n=e.config.measures.get(i);if(n){var s=n.convert.type||n.dataType;if(a.includes(s))return i}}}function o(e,a){var t=u(e,a.name);if(t){var r={frontendId:"F"+v.generateId().toUpperCase(),id:a.name,type:"dimension"===t.type?"d":"m",subTypeTemp:t.convert.type||t.dataType};return"m"===r.type&&a.agg&&f.includes(a.agg)&&(r.aggregator=a.agg.toUpperCase()),a.timeGranularity&&(r.dateTimeType=a.timeGranularity),r}}function u(e,a){var t=void 0;return e.config.measures.get(a)?t=e.config.measures.get(a):e.config.dimensions.get(a)&&(t=e.config.dimensions.get(a)),t}function p(e){var a={id:e.left,op:d[e.op],values:[""]},t=e.right;if("in"===a.op){for(var r=t.replace(/^\(|\)$/g,"").split(","),i=[],n=0,s=r;n<s.length;n++){var o=s[n];i.push(o.trim().replace(/^'|'$/g,""))}a.values=i}else if("between"===a.op){for(var r=t.split("AND"),i=[],u=0,p=r;u<p.length;u++){var o=p[u];i.push(o.trim().replace(/^'|'$/g,""))}a.values=i}else a.values=[t.replace(/^'|'$/g,"")];return a}function l(e){var a=e.config,t=a.dimensions,r=a.measures,i=[];return a.dimensionMenu.forEach(function(e){e.nodes.forEach(function(e){var a=t.get(e);a&&("dimension"!==a.type||a.isHidden?"hierarchy"===a.type&&a.pathIds&&a.pathIds.length&&a.pathIds.forEach(function(e){var a=t.get(e);a&&!a.isHidden&&i.push(e)}):i.push(e))})}),a.measureMenu.forEach(function(e){e.nodes.forEach(function(e){var a=r.get(e);a&&(a.calculated&&(!a.calculated||m.isAggregatedExpression(a.expression,a.isAggregated))||a.isHidden||i.push(e))})}),i}Object.defineProperty(a,"__esModule",{value:!0}),a.getFiltersFromUNITSQL=a.getFieldFromUNITSQL=void 0;var m=e("sugar:sites/group/manage/data-model/editor/helper.ts"),v=e("sugar:utils/frontendId.ts"),f=["count","max","min","sum","avg"];a.getFieldFromUNITSQL=t,a.getFiltersFromUNITSQL=r;var d={"=":"equal","!=":"ineq",">":"gt",">=":"gte","<":"lt","<=":"lte",BETWEEN:"between",IN:"in"},g={"1y":"YEAR","1q":"YEAR-QUARTER","1m":"YEAR-MONTH","1w":"YEAR-WEEK"},c={"1d":"YEAR-MONTH-DAY","1h":"YEAR-MONTH-DAY-HOUR","1i":"YEAR-MONTH-DAY-HOUR-MINUTE","1s":"SECOND"}});
;sugar.define("sugar:stores/data-model/data-model-tree-list.ts",function(t,e){"use strict";function a(t){var e={};if(2===t.data.authType){t.sharePassword&&(e.sharePassword=t.sharePassword);var a=n.getPasswordFreeHost();a&&(e.o=a)}var r=[];for(var o in e)r.push(o+"="+e[o]);return r.join("&")}Object.defineProperty(e,"__esModule",{value:!0}),e.getShareParams=void 0;var r=t("sugar:node_modules/mobx-state-tree/dist/mobx-state-tree.js"),o=t("sugar:stores/index.ts"),s=t("sugar:stores/helper.ts"),n=t("sugar:stores/chart-data.ts"),u=t("sugar:node_modules/mobx/lib/mobx.js"),d=t("sugar:utils/tree.ts");e.getShareParams=a;var i=r.types.model("DataModelTreeList",{loadState:s.state,loadError:r.types.optional(r.types.frozen(),{}),data:r.types.optional(r.types.frozen(),null)}).actions(function(t){return{loadData:s.asyncAction(t,{url:function(e){var r=o.getRoot(t),s=r.group.current.data.hash,n="/api/group/"+s+"/dataModel/treeList";if("explore"===r.assist.currentPageType&&r.report.current.data&&3===r.report.current.data.type){var u=r.report.current.data;if(/^\/(explore)\//i.test(window.location.pathname)){n="/api/reportShare/"+u.token+"/explore/"+u.hash+"/getExploreDataModels";var d=a(r.report.current);return d&&(n=n+"?"+d),n}e||(e=u.hash)}return e&&(t.data=null,n+="?exploreReportHash="+e),n}}),updateDMSugQuestion:s.asyncAction(t,{url:function(e,a){var r=o.getRoot(t),s=r.group.current.data.hash,n="/api/manage/group/"+s+"/dataModel/"+e+"/updateDMQuestion?question="+a;return n},success:function(e){var a=e.data,r=a.hash,o=a.newQ;if(r&&o){var s=u.toJS(t.data),n=d.find(s,function(t){return r===t.value});n.sugQuestion=o,t.data=s}}})}});e.default=i});
;sugar.define("sugar:utils/smart-audio.ts",function(r,e){"use strict";function t(){I=[]}function n(r,e,t){var n=r.slots;if(n&&n.length)for(var a=0,o=n;a<o.length;a++){var d=o[a];if("user_zoom_objective"===d.slotName){var i=d.slotNormalizedWord;if(i)for(var l=0,s=e;l<s.length;l++){var u=s[l];if(u.name===i){var f=t.mapByFrontendId.get(u.frontendId);null===f||void 0===f?void 0:f.setChartConfigData({isChartZooming:!0}),I.push({orderType:"ZOOM_IN",chartOrConditionFrontendId:[u.frontendId]});break}}break}}}function a(r,e,t){var n=r.slots;if(n&&n.length){for(var a=null,o=null,d=0,i=n;d<i.length;d++){var l=i[d];if("user_table_name"===l.slotName){var s=l.slotNormalizedWord;if(s)for(var u=0,f=e;u<f.length;u++){var h=f[u];if(h.name===s){a=h;break}}}else"user_data_item"===l.slotName&&(o=l.slotNormalizedWord)}a&&o&&(a.handleEvent("drillDown",t,{drillDownIndex:0,drillDownItem:{item:{_sugar_dd_default_:o},fireKey:""}}),I.push({orderType:"DRILL",chartOrConditionFrontendId:[a.frontendId]}))}}function o(r,e,t,n,a){var o=r.slots;if(o&&o.length){for(var d={},i=0,l=o;i<l.length;i++){var s=l[i];if("user_filter_object"===s.slotName){var u=s.slotNormalizedWord;if(u){var f=u.split("-");if(2===f.length){var h=f[0],c=f[1];d[c]=h}else if(f=u.split("—"),2===f.length){var h=f[0],c=f[1];d[c]=h}}}}var v=[],g=[];for(var c in d)for(var m=0,p=e;m<p.length;m++){var y=p[m];if(y.label===c){var h=d[c],_=t.mapByFrontendId.get(y.frontendId);_&&_.value&&(v.push(y.frontendId),g.push(_.value.value)),y.changeConditionValue(h,a);break}}v.length&&(n.refreshAllChartsData(a),I.push({orderType:"FILTER",chartOrConditionFrontendId:v,oldValue:g}))}}function d(r,e,t,n,a,o,d){if(I.length){var f=I.pop();f&&("ZOOM_IN"===f.orderType?i(t,[f]):"DRILL"===f.orderType?l(e,d,[f]):"FILTER"===f.orderType?s(n,a,o,d,[f]):"AI_QA"===f.orderType&&u(e,t,[f]))}}function i(r,e){var t=[];e?t=e:I.length&&(t=I.filter(function(r){return"ZOOM_IN"===r.orderType}),I=I.filter(function(r){return"ZOOM_IN"!==r.orderType}));for(var n=0,a=t;n<a.length;n++){var o=a[n];if("ZOOM_IN"===o.orderType){var d=r.mapByFrontendId.get(o.chartOrConditionFrontendId[0]);null===d||void 0===d?void 0:d.setChartConfigData({isChartZooming:!1})}}}function l(r,e,t){var n=[];t?n=t:I.length&&(n=I.filter(function(r){return"DRILL"===r.orderType}),I=I.filter(function(r){return"DRILL"!==r.orderType}));for(var a=function(t){if("DRILL"===t.orderType){var n=r.find(function(r){return r.frontendId===t.chartOrConditionFrontendId[0]});null===n||void 0===n?void 0:n.handleEvent("cancelDrillDowm",e)}},o=0,d=n;o<d.length;o++){var i=d[o];a(i)}}function s(r,e,t,n,a){var o=[];a?o=a:I.length&&(o=I.filter(function(r){return"FILTER"===r.orderType}),I=I.filter(function(r){return"FILTER"!==r.orderType}));for(var d={},i=o.length-1;i>=0;i--){var l=o[i];if("FILTER"===l.orderType)for(var s=0;s<l.chartOrConditionFrontendId.length;s++)l.oldValue&&void 0!==l.oldValue[s]&&(d[l.chartOrConditionFrontendId[s]]=l.oldValue[s])}var u=!1,f=function(e){var t=d[e],a=r.find(function(r){return r.frontendId===e});a&&(a.changeConditionValue(t,n),u=!0)};for(var h in d)f(h);u&&t.refreshAllChartsData(n)}function u(r,e,t){var n=[];t?n=t:I.length&&(n=I.filter(function(r){return"AI_QA"===r.orderType}),I=I.filter(function(r){return"AI_QA"!==r.orderType}));for(var a=0,o=n;a<o.length;a++){var d=o[a];if("AI_QA"===d.orderType)for(var i=0,l=d.chartOrConditionFrontendId;i<l.length;i++){var s=l[i],u=e.mapByFrontendId.get(s);u&&u.setChartConfigData({showOnAsk:!1})}}}function f(r,e,t,f,p,y,_,T){return h.__awaiter(this,void 0,void 0,function(){var O,C,b,L,F,D,R,A,N,M,w,E;return h.__generator(this,function(h){switch(h.label){case 0:if(r||c.toast.error(v.default("未识别到语音输入，请再说一遍。")),!r.commandResult||!r.commandResult.length)return[3,1];for(O=r.commandResult,C=0,b=O;C<b.length;C++)L=b[C],"ZOOM_IN"===L.command?(u(t,f),i(f),l(t,T),n(L,t,f)):"DRILL"===L.command?(u(t,f),i(f),l(t,T),a(L,t,T)):"FILTER"===L.command?(u(t,f),i(f),l(t,T),o(L,p,y,_,T)):"CLOSE"===L.command&&d(L,t,f,p,y,_,T);return[3,9];case 1:if(!r.asrText)return[3,8];if(F=e.config.bindSmartChart,!F)return c.toast.error(v.default("未绑定智能图表")),[2];if(D=t.filter(function(r){return r.frontendId===F&&"smart-chart"===r.type})[0],!D)return c.toast.error(v.default("未绑定智能图表")),[2];if(!e.config.dataModelHashs)return c.toast.error(v.default("未配置提问数据模型")),[2];R="dashboard",e.isDashChart||(R="report"),A="/api/unit/query",/^\/(dashboard)\//i.test(window.location.pathname)&&(A="/api/dashboardShare/"+_.data.token+"/dashboard/"+_.data.hash+"/unit/query",N=m.getShareParams(_),N&&(A=A+"?"+N)),h.label=2;case 2:return h.trys.push([2,6,,7]),[4,g.post(A,{pageType:R,mode:T,hash:_.data.hash,dataModelHashs:e.config.dataModelHashs,query:r.asrText})];case 3:return M=h.sent(),0!==M.status?[3,5]:(s(p,y,_,T),i(f),l(t,T),[4,D.mapUNITSQL2Chart(M.data,T)]);case 4:w=h.sent(),w&&I.push({orderType:"AI_QA",chartOrConditionFrontendId:[D.frontendId]}),h.label=5;case 5:return[3,7];case 6:return E=h.sent(),c.toast.error(E.message||"查询失败"),[3,7];case 7:return[3,9];case 8:return c.toast.error(v.default("未识别到语音输入，请再说一遍。")),[2];case 9:return[2]}})})}Object.defineProperty(e,"__esModule",{value:!0}),e.processSmartAudioOrder=e.cleanOrderRecord=void 0;var h=r("sugar:node_modules/tslib/tslib.js"),c=r("sugar:node_modules/amis/lib/index.js"),v=r("sugar:utils/i18n.ts"),g=r("sugar:utils/fetch.ts"),m=r("sugar:stores/data-model/data-model-tree-list.ts"),I=[];e.cleanOrderRecord=t,e.processSmartAudioOrder=f});
;sugar.define("sugar:stores/chart-model.ts",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DrillDownChartEntity=t.ChartEntity=t.clearSqlOrDataModelInDataConfig=void 0;var a=e("sugar:node_modules/tslib/tslib.js"),n=e("sugar:utils/i18n.ts"),o=e("sugar:node_modules/mobx-state-tree/dist/mobx-state-tree.js"),i=e("sugar:stores/index.ts"),r=e("sugar:node_modules/amis/lib/index.js"),d=e("sugar:utils/condition-helper.ts"),l=e("sugar:utils/common-helper.ts"),s=e("sugar:utils/chart-helper.ts"),g=e("sugar:widgets/charts/chart-manager.tsx"),c=e("sugar:node_modules/lodash/cloneDeep.js"),h=e("sugar:services/chart-dependence.ts"),f=e("sugar:widgets/product-type/product-type-modal.tsx"),p=e("sugar:utils/frontendId.ts"),u=e("sugar:node_modules/lodash/merge.js"),C=e("sugar:utils/data-model-helper.ts"),D=e("sugar:node_modules/lodash/get.js"),y=e("sugar:utils/nlp-unit.ts"),m=e("sugar:utils/fetch.ts"),v=e("sugar:utils/smart-audio.ts"),b=function(e,t,o,i,s,g){void 0===i&&(i=!1),void 0===s&&(s=[]);var c=[].concat(s),h=t,f=t.config;if(g&&f.subChartConfig&&(h=f.subChartConfig[g]||{},f=h.config||{}),!i){var p=d.areConditionsAsyncReady(e.condition.list.data,e.condition.hubMap);if(!p)return r.toast.error(n.default("过滤条件数据正在加载中，请稍候")),!1;var u=d.areConditionsValidate(e.condition.list.data,e.condition.hubMap);if(u!==!0)return u.forEach(function(e){r.toast.error(e)}),!1}if("dataModel"===h.dataType&&h.dataModelHash&&h.dataModelHash.startsWith("mld_")){var D=C.getChartPath(t,o,g);c=d.getConditionsKTVC(e.condition.list.data,e.condition.hubMap,D,h.dataModelHash)}else i||(c=d.getConditionsKTV(e.condition.list.data,e.condition.hubMap));var y={},m=l.parseCurrentQueryString();if(m&&(y.querys=m),y.conditions=c,("dataModel"===h.dataType||"sql"===h.dataType)&&c.length){var v=d.getConditionsDisplayValue(e,c);v&&(y.conditionsDisplayValue=v)}if(f&&o&&(f.pagination&&f.pagination.open&&"remote"===f.pagination.mode&&(y.start=o.configData.offset||0,y.limit=f.pagination.limit||15),f.sort&&f.sort.open&&"remote"===f.sort.mode&&"__sugar_showx_table_number"!==o.configData.sortKey&&"__sugar_showx_table_number"!==o.configData.defaultSortKey&&(y.sortKey=o.configData.sortKey||(f.sort.defaultSortOpen?f.sort.defaultSortKey:""),y.sortType=o.configData.sortType||(f.sort.defaultSortOpen?f.sort.defaultSortType||"asc":"")),"bar"===h.type&&f.chartReverse&&!f.dataSort&&"dataModel"===h.dataType&&(y.barReverseAndNotSortInFrontend=!0),o.drillDownData.drillDownItem&&o.drillDownData.drillDownItem.length&&(y.drillDowns=o.drillDownData.drillDownItem),o.drillDownData.drillDownPath&&(y.drillDownsPath=o.drillDownData.drillDownPath),o.drillDownData.mainChartHash&&(y.mainChartHash=o.drillDownData.mainChartHash),o.drillDownData.reportOrDashHash&&(y.reportOrDashHash=o.drillDownData.reportOrDashHash),o.drillDownData.isDashDrilldown&&(y.isDashDrilldown=o.drillDownData.isDashDrilldown),o.dependenceData.dependenceItem)){y.dependence=o.dependenceData.dependenceItem;var b=C.getChartDataModelHash(t,g);if(b){var _=[];if(o.dependenceData.dependenceBindConfig&&o.dependenceData.dependenceBindConfig.length)for(var w=0,I=o.dependenceData.dependenceBindConfig;w<I.length;w++){var M=I[w],T=!1;if(M&&M.chartFrontendId===t.frontendId&&(g?g===M.subChartKey&&(T=!0):T=!0),T){var S=(M.subChartKey,M.chartFrontendId,a.__rest(M,["subChartKey","chartFrontendId"]));_.push(S)}}_.length&&(y.dependenceBindConfig=_)}}return!t.isDashChart&&"dataModel"===t.dataType&&t.dataModelHash&&t.dataModelHash.startsWith("mld_")&&t.dataConfig&&t.dataConfig.dataModel&&t.dataConfig.dataModel.chartCondition&&t.dataConfig.dataModel.chartCondition.length&&(y.chartConditions=d.getChartConditionsKTVC(e,t.frontendId,t.dataConfig.dataModel.chartCondition)),o.configData.queryFromAI&&(y.queryFromAIParam={fromDash:t.isDashChart,pageHash:t.isDashChart?t.dashboardHash:t.reportHash,chartType:(t.config.smartChart||{}).type,dataModelHash:t.dataModelHash,dataConfig:t.dataConfig}),y};t.clearSqlOrDataModelInDataConfig=function(e,t){var a=JSON.parse(JSON.stringify(t));try{"sql"===e?(delete a.categories,delete a.series,delete a.yValue,delete a.rowNameField,delete a.rowValueField,delete a.colModeFields,delete a.xCategories,delete a.yCategories,delete a.lon,delete a.lat,delete a.value,delete a.category,delete a.sourceLon,delete a.sourceLat,delete a.targetLon,delete a.targetLat,delete a.zCategories,delete a.colorCategories,delete a.colorValue,delete a.sizeValue,delete a.display,delete a.nameField,delete a.lngField,delete a.latField,delete a.locationField,delete a.valueField,delete a.sizeValueField,delete a.tooltipItems,delete a._sugar_extras,delete a.rowCatField,delete a.dateField,delete a.openField,delete a.closeField,delete a.lowField,delete a.highField,delete a.volumeField,delete a.maField,delete a.riseField,delete a.riseRateField,delete a.urlField,delete a.sqlValueField,delete a.fromLocationField,delete a.toLocationField,delete a.fromLngField,delete a.fromLatField,delete a.toLngField,delete a.toLatField,delete a.innerNameField,delete a.outterNameField,delete a.seriesName,delete a.seriesValue,delete a.yData,delete a.yDataCat,delete a.sourceField,delete a.targetField,delete a.dataX,delete a.dataY,delete a.dataSize,delete a.dataName,delete a.otherTarget,delete a.bindField,delete a.imgUrl,delete a.imgLink,delete a.sourceNode,delete a.targetNode,delete a.lineText,delete a.sourceTitle,delete a.targetTitle,delete a.sourceData,delete a.targetData,delete a.dynamicVideoUrl,delete a.dynamicVideoType,delete a.dynamicImageUrl,delete a.autoBindData,delete a.addAllRow2Col):"dataModel"===e&&(a.tableType&&(a.tableType="normal"),a.dataModel={limit:1e4})}catch(n){}return a},t.ChartEntity=o.types.model("ChartEntity",{name:o.types.optional(o.types.string,""),type:o.types.optional(o.types.string,""),frontendId:o.types.optional(o.types.string,""),dynamicName:o.types.optional(o.types.string,""),reportHash:o.types.optional(o.types.string,""),dashboardHash:o.types.optional(o.types.string,""),isDashChart:o.types.optional(o.types.number,0),isExploreChart:o.types.optional(o.types.number,0),hash:o.types.optional(o.types.string,""),titleAlign:o.types.optional(o.types.string,"left"),link:o.types.optional(o.types.string,""),remark:o.types.optional(o.types.string,""),hideTitle:o.types.optional(o.types.boolean,!1),width:o.types.optional(o.types.number,4),height:o.types.optional(o.types.number,300),left:o.types.optional(o.types.number,0),top:o.types.optional(o.types.number,0),zIndex:o.types.optional(o.types.number,9999),refreshIntervel:o.types.optional(o.types.number,1e3),order:o.types.optional(o.types.number,0),config:o.types.optional(o.types.frozen(),{}),dataType:o.types.optional(o.types.enumeration(["dataModel","sql","api","json","static"]),"sql"),dataModelHash:o.types.optional(o.types.union(o.types.string,o.types.null),""),dataApiUrl:o.types.optional(o.types.string,""),dataConfig:o.types.optional(o.types.frozen(),{}),drillDownOpen:o.types.optional(o.types.boolean,!1),drillDownLevel:o.types.optional(o.types.number,0),drillDownIndex:o.types.optional(o.types.number,0),ddShowType:o.types.optional(o.types.union(o.types.number,o.types.null),null),drillDown:o.types.optional(o.types.array(o.types.late(function(){return t.DrillDownChartEntity})),[])}).actions(function(e){return{update:function(o,d){var s=i.getRoot(e),f=function(f){var y;if(d.hasOwnProperty(f)){var m=d[f];switch(f){case"name":case"titleAlign":case"link":case"remark":case"hideTitle":case"order":case"dataApiUrl":e[f]=m,"name"===f&&e.setDynamicName();break;case"dataType":window.sugarConfig.enableDataModel?(e.dataType=m,"sql"===m?(e.dataModelHash="",e.dataConfig=t.clearSqlOrDataModelInDataConfig("dataModel",e.dataConfig)):"dataModel"===m&&(e.dataModelHash="",e.dataConfig=t.clearSqlOrDataModelInDataConfig("sql",e.dataConfig)),"dataModel"!==m&&e.config.hierarchyDrillDownOpen&&u.closeHierarchyDD(n.default("使用数据模型方式时，才能开启层级关系下钻"))):e.dataType=m;break;case"dataModelHash":if(null===m)e[f]="";else if(m!==e[f]){if(/^mld_/.test(m)&&""!==e[f]?e.dataConfig=t.clearSqlOrDataModelInDataConfig("dataModel",e.dataConfig):/^sql_/.test(m)&&(e.dataConfig=t.clearSqlOrDataModelInDataConfig("sql",e.dataConfig)),/^mld_/.test(m)){var v=i.getRoot(e),b=v.chart.getChartHub(e.frontendId),_=C.getChartPath(e,b);v.condition.updateConditionsModelChartConditionBindingsFromChart(m,_)}e[f]=m}break;case"drillDownOpen":e[f]=m,m&&e.config.dependenceOpen&&!e.config.subChartConfig&&(e.config=a.__assign(a.__assign({},e.config),{dependenceOpen:!1}),r.toast.error(n.default("图表「"+e.name+"」的下钻和级联不能同时开启，已关闭级联。"))),m&&e.config.hierarchyDrillDownOpen&&!e.config.subChartConfig&&u.closeHierarchyDD(n.default("图表「"+e.name+"」的自定义下钻和层级关系下钻不能同时开启，已关闭层级关系下钻。")),m&&s.step.showStep();break;case"width":case"height":case"left":case"top":if(!/^(\-|\+)?\d+(\.\d+)?$/.test(String(m)))return{value:void 0};if(e.isDashChart&&!e.drillDownLevel){var w=parseInt(m,10),I=i.getRoot(e).dashboard.current.data.config.grid;I=I&&I>1?parseInt(I,10):1,e[f]=l.getPosition(w,I)}else e[f]=m;break;case"config":if(m.subChartConfig||m.imgInputs){var M=[];if(m.subChartConfig)for(var T in m.subChartConfig){var S=m.subChartConfig[T];if(null===(y=null===S||void 0===S?void 0:S.config)||void 0===y?void 0:y.imgInputs){M=S.config.imgInputs;break}}else M=m.imgInputs;if(M&&M.length){var H=M.findIndex(function(e){return e.startsWith("data:image")});-1!==H&&(M[H]="",r.toast.error(n.default("禁止使用URI形式的链接，请使用上传图片功能！")))}}"map"!==e.type||"area"!==o.config.mapType&&"province"!==o.config.mapType||"bind"!==e.dataConfig.coordType||(e.dataConfig=a.__assign(a.__assign({},e.dataConfig),{coordType:"auto"}));var O=c(e.config);if(e.config=o.config,m.fontCustomUrl&&2===e.config.selfFontFamily&&(e.config=a.__assign(a.__assign({},e.config),{fontCustomName:"myFont-"+p.generateId()})),m&&m.subChartConfig)for(var T in m.subChartConfig){var S=m.subChartConfig[T],F=D(O,"subChartConfig."+T,{});if(S&&S.dataModelHash&&/^mld_/.test(S.dataModelHash)&&F.dataModelHash!==S.dataModelHash){var R=i.getRoot(e),b=R.chart.getChartHub(e.frontendId),_=C.getChartPath(e,b,T);R.condition.updateConditionsModelChartConditionBindingsFromChart(S.dataModelHash,_)}var k=null;/^mld_/.test(S.dataModelHash)&&F.dataModelHash?k=t.clearSqlOrDataModelInDataConfig("dataModel",e.config.subChartConfig[T].dataConfig||{}):/^sql_/.test(S.dataModelHash)&&(k=t.clearSqlOrDataModelInDataConfig("sql",e.config.subChartConfig[T].dataConfig||{}));var L=e.config.subChartConfig[T].dataModelHash;if("sql"===S.dataType?(L="",k=t.clearSqlOrDataModelInDataConfig("dataModel",e.config.subChartConfig[T].dataConfig||{})):"dataModel"===S.dataType&&(L="",k=t.clearSqlOrDataModelInDataConfig("sql",e.config.subChartConfig[T].dataConfig||{})),k&&(e.config=a.__assign(a.__assign({},e.config),{subChartConfig:a.__assign(a.__assign({},e.config.subChartConfig),(y={},y[T]=a.__assign(a.__assign({},e.config.subChartConfig[T]),{dataModelHash:L,dataConfig:k}),y))})),"dataModel"===e.config.subChartConfig[T].dataType&&S.dataConfig&&e.config.subChartConfig[T].dataConfig.dataModel){var x=g.getChartByType(e.type);x&&x.loadDataWhenDataModelConfigChange&&x.loadDataWhenDataModelConfigChange(e,T)&&e.loadOtherData("editor",T)}break}if(m){if((m.dependences||void 0!==m.dependenceOpen)&&!e.config.subChartConfig){var P=i.getRoot(e),E=h.chartDependencyAnalysis(P.chart.list.data);if(E!==!0)return e.config=O,{value:void 0};(e.drillDownOpen||e.config.hierarchyDrillDownOpen)&&m.dependenceOpen&&(e.drillDownOpen=!1,e.config=a.__assign(a.__assign({},e.config),{hierarchyDrillDownOpen:!1}),r.toast.error(n.default("图表「"+e.name+"」的下钻和级联不能同时开启，已关闭下钻。")))}if(m.hierarchyDrillDownOpen===!0&&e.config.dependenceOpen&&(e.config=a.__assign(a.__assign({},e.config),{dependenceOpen:!1}),r.toast.error(n.default("图表「"+e.name+"」的层级下钻和级联不能同时开启，已关闭级联。"))),m.hierarchyDrillDownOpen===!0&&e.drillDownOpen&&!e.config.subChartConfig&&(e.drillDownOpen=!1,r.toast.error(n.default("图表「"+e.name+"」的自定义下钻和层级关系下钻不能同时开启，已关闭自定义下钻。"))),m.hierarchyDrillDownOpen===!1&&e.drillDown.clear(),e.config.hierarchyDrillDownOpen&&"map"===e.type&&(["city","custom"].includes(o.mapScope)?u.closeHierarchyDD(n.default("地图区域设置为全国和省份级别时，才能设置层级下钻，已为您关闭层级下钻")):m.mapScope?e.drillDown.clear():"area"!==o.config.mapType?u.closeHierarchyDD(n.default("检测到当前数据展示类型不是「区域色彩地图」，已为您关闭层级下钻")):"bind"===o.config.coordType&&u.closeHierarchyDD(n.default("只有当前「经纬度计算方式」是根据名称自动查找时，才能使用层级下钻，已为您关闭层级下钻"))),m.hierarchyDrillDownOpen&&s.step.showHierarchyStep(),m.ddShowType>=0){for(var U=m.ddShowType,A=e.drillDown;null===A||void 0===A?void 0:A.length;){var B=A;A=[],B.forEach(function(e){var t;e.chart&&(e.chart.ddShowType=U,(null===(t=e.chart.drillDown)||void 0===t?void 0:t.length)&&(A=A.concat(e.chart.drillDown.slice())))})}A=null}}break;case"dataConfig":if(e.dataConfig=o.dataConfig,"dataModel"===e.dataType){var x=g.getChartByType(e.type);x&&e.dataConfig.dataModel&&x.loadDataWhenDataModelConfigChange&&x.loadDataWhenDataModelConfigChange(e,void 0,m)&&e.loadData("editor")}e.config.hierarchyDrillDownOpen&&u.updateDrillDownChart(e,"dataConfig",o);break;case"drillDown":e.drillDown=o.drillDown;break;case"ddShowType":e.ddShowType=o.ddShowType}}},u=this;for(var y in d){var m=f(y);if("object"==typeof m)return m.value}},mapUNITSQL2Chart:function(t,o){return void 0===o&&(o="editor"),a.__awaiter(this,void 0,void 0,function(){var r,d,l,s,c,h,f,p;return a.__generator(this,function(u){switch(u.label){case 0:return r=i.getRoot(e),(d=r.chart.getChartHub(e.frontendId))?t===!1?(d.setChartTip(n.default("对不起，我不知道该怎样回答您，试试换一种问法")),[2]):(e.dataType="dataModel",e.dataModelHash=t.table[0],l=this.getUsingDataModel(),l?[3,2]:[4,r.dataModel.detailMap.loadDetail(e.dataModelHash)]):[2];case 1:u.sent(),l=this.getUsingDataModel(),u.label=2;case 2:return l?("smart-chart"!==e.type&&(s=g.getChartByType("smart-chart"),s&&(this.initChartConfig(s),e.type=s.type)),c=y.getFieldFromUNITSQL(t,l),h=y.getFiltersFromUNITSQL(t,l),this.setDataConfig(a.__assign(a.__assign({},e.dataConfig),{dataModel:{"x-smart":c,filters:h,limit:t.limit}})),f=g.getChartByType(e.type),f&&e.dataConfig.dataModel&&f.loadDataWhenDataModelConfigChange&&f.loadDataWhenDataModelConfigChange(e)?(this.recommendChartType(),d.setChartTip(""),e.isExploreChart||"editor"===o?this.loadData("editor"):(p=!1,e.config.smartChart&&e.config.smartChart.onlyShowOnAsk&&(p=!0),d.setChartConfigData({queryFromAI:!0}),this.loadData(o),d.setChartConfigData({queryFromAI:!1,showOnAsk:p})),r.editor.setActiveTarget("chart",e.frontendId),[2,!0]):(d.setChartTip("对不起，我不知道该怎样回答您，试试换一种问法"),[2,!1])):[2]}})})},switchChartType:function(t,a){void 0===a&&(a=!1),this.initChartConfig(t);var n=g.getChartByType(e.type);n&&n.name===e.name&&(e.name=t.name);var o=this.getUsingDataModel();o&&C.mapDataFieldsWhenSwitchingChartType(e,t,o),e.type=t.type,"smart-chart"===e.type&&this.recommendChartType(),a||this.loadData("editor")},recommendChartType:function(){var t=this.getUsingDataModel();if(t){var a=i.getRoot(e),n=a.chart.getChartHub(e.frontendId);C.recommendChart(e,n,t)}},getRecommendChartList:function(){var t=this.getUsingDataModel();if(t){var a=i.getRoot(e),n=a.chart.getChartHub(e.frontendId),o=C.extractDataFields(e,t);return C.getRecommendChartList(n,o)}},switchChartTypeInSmartChart:function(t,a){var n=this.getUsingDataModel();if(n){var o=C.extractDataFields(e,n);C.updateChartUsingNewChartEigen(e,t,o,a),this.loadData("editor")}},switchChartTypeFromSmartChart:function(t){var n=i.getRoot(e),o=n.chart.getChartHub(e.frontendId);o&&o.setChartConfigData({recommendChartEigenList:null});for(var r={},d=Object.keys(e.dataConfig.dataModel),l=0,s=d;l<s.length;l++){var g=s[l];/-smart$/.test(g)||(r[g]=e.dataConfig.dataModel[g])}this.setDataConfig(a.__assign(a.__assign({},e.dataConfig),{dataModel:r})),this.setConfig(a.__assign(a.__assign({},e.config),{smartChart:void 0})),e.type=t.type},getCanSwitchChartEigen:function(t){var a=this.getUsingDataModel();if(a){var n=C.extractDataFields(e,a);return C.getQualifiedChartEigenIndex(n,t)}},processSmartAudioOrder:function(t,a){var n,r=i.getRoot(e);n=e.isDashChart?r.dashboard.current:r.report.current;var d=r.chart.hubMap,l=r.condition.list.data,s=r.condition.hubMap;v.processSmartAudioOrder(t,e,o.getParent(e,1),d,l,s,n,a)},initChartConfig:function(t){var n=u({},g.commonChartInitialState);t.initialState&&(n=u({},n,t.initialState)),e.isDashChart&&(n=u({},n,g.commonDashboardChartInitialState),t.initialDashboardState&&(n=u({},n,t.initialDashboardState)));var o=u({},{dataConfig:a.__assign({},e.dataConfig)},n);e.config=a.__assign(a.__assign({},n.config),{hierarchyDrillDownOpen:e.config.hierarchyDrillDownOpen}),e.config.hierarchyDrillDownOpen&&e.drillDown.forEach(function(e){e.chart.switchChartType(t,!0)}),e.dataConfig=a.__assign({},o.dataConfig),e.dataApiUrl=n.dataApiUrl},getUsingDataModel:function(){var t=null;return e.dataModelHash&&(t=i.getRoot(e).dataModel.detailMap.mapByHash.get(e.dataModelHash)),t},setDataConfig:function(t){e.dataConfig=t},setConfig:function(t){e.config=t},updateDrillDownChart:function(t,n,o){var i=this;if(t.drillDown&&t.drillDown.length){var r=g.getChartByType(e.type);t.drillDown.forEach(function(t){var d,l;if("dataConfig"===n){var s=(null===r||void 0===r?void 0:r.drillDownSuggestDataModelField)||null;if(s&&t.chart.dataConfig.dataModel){var g=o.dataConfig.dataModel[s],c=t.chart.dataConfig.dataModel[s];g&&((g.length>1&&"multiple"!==(null===r||void 0===r?void 0:r.drillDownType)||0===g.length)&&e.drillDown.clear(),t.chart.dataConfig=a.__assign(a.__assign({},o.dataConfig),{dataModel:a.__assign(a.__assign({},o.dataConfig.dataModel),(d={},d[s]=c,d.drillDownBind=null===(l=t.chart.dataConfig)||void 0===l?void 0:l.dataModel.drillDownBind,d))}))}}else t.chart[n]=o[n];i.updateDrillDownChart(t.chart,n,o)})}},setChartHubData:function(t,a){if(void 0===a&&(a=null),t){var n=i.getRoot(e),o=n.chart.getChartHub(t);o.data.setData(a)}},closeHierarchyDD:function(t){e.config=a.__assign(a.__assign({},e.config),{hierarchyDrillDownOpen:!1}),e.drillDown.clear(),r.toast.error(t)},setDynamicName:function(){var t=s.replaceSomeParam(e.name,e.frontendId,i.getRoot(e));e.dynamicName=t!==e.name?t:""},getParentChart:function(){return e.drillDownLevel>0?o.getParent(e,3):!1},getTopParentChart:function(){for(var t=e,a=!1;t;)a=t,t=t.getParentChart();return a},setDependences:function(t){e.config=a.__assign(a.__assign({},e.config),{dependences:t})},changeLayerIndex:function(t,n){var o={},i=e.config.subChartConfig||{};if(t!==n){for(var r in i){var d=i[r],l=d.order;d.order===t?l=n:n>t&&d.order>t&&d.order<=n?l=d.order-1:t>n&&d.order<t&&d.order>=n&&(l=d.order+1),o[r]=a.__assign(a.__assign({},d),{order:l})}e.config=a.__assign(a.__assign({},e.config),{subChartConfig:a.__assign({},o)})}},addDefaultSubChart:function(){var t=this,a=g.getChartByType(e.type);if(a&&a.subCharts){var n=[];for(var o in a.subCharts){var i=a.subCharts[o];i.isDefault&&n.push({type:o,defaultOrder:i.defaultOrder||0})}n.sort(function(e,t){return(e.defaultOrder||0)-(t.defaultOrder||0)}),n.forEach(function(e){return t.addSubChart(e.type)})}},addSubChart:function(t){var o,d=p.generateId(),l=g.getChartByType(e.type);if(l&&l.subCharts&&l.subCharts[t]){var s=l.subCharts[t],c=e.config.subChartConfig||{},h=Object.keys(c).length;if(h>10)return void r.toast.error(n.default("最多添加10个子组件"));for(var f=0,C=!0,D=s.name;C;){C=!1;for(var y in c)if(c[y].name===D){C=!0,f++,D=""+s.name+f;break}}var m=u({type:t,name:D,key:d,order:0},g.commonChartInitialState);s.initialState&&(m=u(m,s.initialState),window.sugarConfig.enableDataModel&&l.dataModelPanelShow&&"api"===s.initialState.dataType&&(m.dataType="dataModel"));var v=(o={},o[d]=m,o);for(var y in c)v[y]=a.__assign(a.__assign({},c[y]),{order:c[y].order+1});e.config=a.__assign(a.__assign({},e.config),{subChartConfig:v});var b=i.getRoot(e),_=b.chart.getChartHub(e.frontendId);_.setChartConfigData(a.__assign(a.__assign({},_.configData),{subChartConfigKey:d}));var w=e.config.subChartConfig[d].type;if(w&&l.subCharts[w]){var I=l.subCharts[w].loadDataPremiseField||"";I&&!e.config.subChartConfig[d][I]==!0||e.loadOtherData("editor",d)}}},setSubChartConfig:function(t,n){var o,i=e.config.subChartConfig||{};i[t]&&(e.config=a.__assign(a.__assign({},e.config),{subChartConfig:a.__assign(a.__assign({},e.config.subChartConfig),(o={},o[t]=a.__assign(a.__assign({},e.config.subChartConfig[t]),n),o))}))},deleteSubChart:function(t){var n={},o=e.config.subChartConfig||{};if(o[t]){var r="",d=void 0===o[t].order?1/0:o[t].order;for(var l in o)if(l!==t){var s=o[l].order>d?o[l].order-1:o[l].order;n[l]=a.__assign(a.__assign({},o[l]),{order:s}),0===s&&(r=l)}e.config=a.__assign(a.__assign({},e.config),{subChartConfig:a.__assign({},n)}),e.drillDown&&e.drillDown.length&&(e.drillDown=e.drillDown.filter(function(e){return e.ddFireKey!==t})),e.config.dependences&&e.config.dependences.length&&(e.config=a.__assign(a.__assign({},e.config),{dependences:e.config.dependences.filter(function(e){return e.cddFireKey!==t})}));var g=i.getRoot(e),c=g.chart.getChartHub(e.frontendId);c.configData.subChartConfigKey&&c.configData.subChartConfigKey!==t||c.setChartConfigData(a.__assign(a.__assign({},c.configData),{subChartConfigKey:r}))}},getActiveSubChartKey:function(){var t=i.getRoot(e),a=t.chart.getChartHub(e.frontendId);if(a.configData.subChartConfigKey&&e.config.subChartConfig[a.configData.subChartConfigKey])return a.configData.subChartConfigKey;for(var n in e.config.subChartConfig)if(0===e.config.subChartConfig[n].order)return n;return""},loadData:function(t,a,n,o,r){void 0===a&&(a=!1),void 0===n&&(n=[]);var d=i.getRoot(e),l=d.chart.getChartHub(e.frontendId),s=e.config,c=l.data,h=g.getChartByType(e.type),f=h&&h.loadDataPremiseField||"";if(!f||e.config[f]===!0){if(this.cancelChartDependenceState(),a&&(l.dependenceData.setDependenceItem(null),l.dependenceData.setDependenceBindConfig([])),h&&h.subCharts){var p=[];if(s.subChartConfig)for(var u=Object.keys(s.subChartConfig),C=0,D=u;C<D.length;C++){var y=D[C],m=s.subChartConfig[y].type;if(m&&h.subCharts[m]){var v=h.subCharts[m].loadDataPremiseField||"";if(v&&s.subChartConfig[y][v]!==!0)continue}var _=b(d,e,l,a,n,y);if(_===!1)return;p.push(e.loadOtherData(t,y,_,!1))}return e.setDynamicName(),Promise.all(p)}var _=b(d,e,l,a,n);if(_!==!1)return e.setDynamicName(),c.loadData(e,t,_,o,r)}},loadDebugData:function(){var t=i.getRoot(e),a=t.chart.getChartHub(e.frontendId),n=a.debugData,o=b(t,e,a);return o!==!1?n.loadDebugData(e,o):void 0},loadDebugDataset:function(){var t=i.getRoot(e),a=t.chart.getChartHub(e.frontendId),n=a.debugData,o=b(t,e,a);return o!==!1?n.loadDebugDataset(e,o):void 0},loadOtherData:function(t,a,n,o,r,d){void 0===o&&(o=!0);var l=i.getRoot(e),s=l.chart.getChartHub(e.frontendId);if(n||n===!1||(n=b(l,e,s,!1,[],a)),n!==!1){if(o){var g=(s.dependenceData.dependenceState||{}).fireKey;g===a&&this.cancelChartDependenceState()}return s.data.loadOtherData(e,t,n,a,r,d)}},loadDebugOtherData:function(t){var a=i.getRoot(e),n=a.chart.getChartHub(e.frontendId),o=b(a,e,n,!1,[],t);return o!==!1?n.debugData.loadDebugOtherData(e,o,t):void 0},handleEvent:function(t,a,o){var d;if("drillDown"===t){var h=window.sugarConfig.nowProductConfig;if(h&&!h.drill)return void f.showUpdate("product-type-drilldown");var p=o;if(!(p.drillDownIndex<e.drillDown.length))throw new Error(n.default("未找到图表的下钻配置，请检查控制面板"));var u=e.drillDown[p.drillDownIndex],C=i.getRoot(e),D=C.chart.getChartHub(e.frontendId),y=D.drillDownData.drillDownItem,m=c(y).concat(p.drillDownItem),v=b(C,e,D);if(v===!1)return void r.toast.error(n.default("报表级过滤条件或图表级过滤条件未准备好"));if("ddLink"===u.ddType){var _=u.ddLinkType,w=u.ddLinkUrl,I=u.ddLinkKey,M="";if("input"===_&&!w&&I&&(_="dd"),"dd"===_){var T=p.drillDownItem.item;if(M=T[I]||T._sugar_dd_default_,!M)return void r.toast.error(n.default("下钻数据中未找到要打开页面的地址字段「"+I+"」！"))}else if("input"===_&&(M=s.replaceSomeParam(w,e.frontendId,i.getRoot(e),m,!0,u.ddParamEncode),!M))return void r.toast.error(n.default("未输入新页面地址URL"));if(/^http/i.test(M)||/^\//.test(M)||(M="http://"+M),u.ddLinkAddEncode&&"dd"===_){var S=M.match(/\?conditions=(\{.*\})\#?.*$/);S&&S[1]&&(M=M.replace(S[1],encodeURIComponent(S[1])))}if(u.ddLinkAddQueryParams){var H={};(v.conditions||[]).forEach(function(e){H[e.k]=e.v});var O="conditions="+encodeURIComponent(JSON.stringify(H))+("dd"===_?"&drillDowns="+encodeURIComponent(JSON.stringify(m)):""),F=/\?/.test(M)?"&":"?";M=M+F+O}if(u.ddLinkDialog)return void C.assist.openIframeDialog(M);var R=!1;return(M.indexOf(location.host)>=0||/^\//.test(M))&&(R=!0),/sugar.(baidubce|aipage).com/.test(location.host)&&/sugar.(baidubce|aipage).com/.test(M)&&(R=!0),u.ddLinkTargetBlank&&(R=!1),void(u.ddLinkTargetSelf&&u.ddLinkTopTargetSelf?top.location.href=M:l.isMobile||l.isWeiXin||R||u.ddLinkTargetSelf?location.href=M:window.open(M))}D.drillDownData.setDrillDownIndex(p.drillDownIndex);var k=u.chart,L=C.chart.getChartHub(k.frontendId);L.drillDownData.setMainChartHash(D.drillDownData.mainChartHash?D.drillDownData.mainChartHash:e.hash),L.drillDownData.setMainChartFrontendId(D.drillDownData.mainChartFrontendId?D.drillDownData.mainChartFrontendId:e.frontendId),L.drillDownData.setReportOrDashHash(D.drillDownData.reportOrDashHash?D.drillDownData.reportOrDashHash:e.isDashChart?e.dashboardHash:e.reportHash),(D.drillDownData.isDashDrilldown||e.isDashChart)&&L.drillDownData.setIsDashDrilldown(!0),L.drillDownData.setDrillDownItem(m),L.drillDownData.setDrillDownPath(D.drillDownData.drillDownPath,p.drillDownIndex);var x=p.drillDownItem.item;if(L.drillDownData.setItemName(x._sugar_dd_default_||x.name||""),L.dependenceData.setDependenceItem(null),D.dependenceData.dependenceItem&&L.dependenceData.setDependenceItem(D.dependenceData.dependenceItem),"editor"!==a||k.config.subChartConfig||k.addDefaultSubChart(),"editor"===a&&"dataModel"===k.dataType){if(!k.dataConfig.dataModel)return;var P=null===(d=g.getChartByType(k.type))||void 0===d?void 0:d.loadDataWhenDataModelConfigChange;"function"==typeof P&&P(k)&&k.loadData(a)}else k.loadData(a)}else if("cancelDrillDowm"===t){var C=i.getRoot(e),D=C.chart.getChartHub(e.frontendId);D.drillDownData.setDrillDownIndex(-1)}else if("dependence"===t){var E=o;if(!(e.config.dependences&&e.config.dependences.length&&E.dependenceIndex<e.config.dependences.length))throw new Error(n.default("未找到图表的联动配置，请检查控制面板"));var U=i.getRoot(e);e.config.dependences.forEach(function(t,n){if(n===E.dependenceIndex){if(t.cddOpen&&t.cddSubChartsConfig&&t.cddSubChartsConfig.length){var o=U.chart.getChartHub(e.frontendId);o.dependenceData.setDependenceState(E.dependenceState);for(var r=t.cddSubChartsConfig.map(function(e){return e.frontendId}),d=function(n){var o=U.chart.list.data.filter(function(e){return e.frontendId===n});if(o&&o.length){var r=o[0],d=i.getRoot(e),l=d.chart.getChartHub(n);if(l.dependenceData.setDependenceItem(E.dependenceItem),t.cddSubChartsBindParamConfig&&t.cddSubChartsBindParamConfig.length){for(var s=[],g=0,c=t.cddSubChartsBindParamConfig;g<c.length;g++){var h=c[g];h.chartFrontendId===n&&s.push(h)}s.length&&l.dependenceData.setDependenceBindConfig(s)}l.dependenceData.setDependenceState(null),r.loadData(a)}},l=0,s=r;l<s.length;l++){var g=s[l];d(g)}}}else if(t.cddOpen&&t.cddSubChartsConfig&&t.cddSubChartsConfig.length)for(var r=t.cddSubChartsConfig.map(function(e){return e.frontendId}),c=function(e){var t=U.chart.list.data.filter(function(t){return t.frontendId===e});if(t&&t.length){var n=t[0],o=U.chart.getChartHub(e);null!==o.dependenceData.dependenceItem&&(o.dependenceData.setDependenceItem(null),o.dependenceData.setDependenceBindConfig([]),o.dependenceData.setDependenceState(null),n.loadData(a))}},h=0,f=r;h<f.length;h++){var g=f[h];c(g)}})}else if("cancelDependence"===t){var C=i.getRoot(e),D=C.chart.getChartHub(e.frontendId);D.dependenceData.setDependenceState(null);for(var A=0,B=e.config.dependences;A<B.length;A++)for(var q=B[A],N=q.cddSubChartsConfig.map(function(e){return e.frontendId}),K=function(t){var n=C.chart.list.data.filter(function(e){return e.frontendId===t});if(n&&n.length){var o=n[0],r=i.getRoot(e),d=r.chart.getChartHub(t);null!==d.dependenceData.dependenceItem&&(d.dependenceData.setDependenceItem(null),d.dependenceData.setDependenceBindConfig([]),d.dependenceData.setDependenceState(null),o.loadData(a))}},V=0,j=N;V<j.length;V++){var W=j[V];K(W)}}},cancelChartDependenceState:function(){var t=i.getRoot(e),a=t.chart.getChartHub(e.frontendId);a.dependenceData.setDependenceState(null);var n=e.config.dependences;e.config.dependenceOpen&&n&&n.length&&n.forEach&&n.forEach(function(e){if(e.cddOpen&&e.cddSubChartsConfig&&e.cddSubChartsConfig.length)for(var a=e.cddSubChartsConfig.map(function(e){return e.frontendId}),n=function(e){var a=t.chart.list.data.filter(function(t){return t.frontendId===e});if(a&&a.length){var n=(a[0],t.chart.getChartHub(e));n.dependenceData.setDependenceItem(null),n.dependenceData.setDependenceBindConfig([])}},o=0,i=a;o<i.length;o++){var r=i[o];n(r)}})},changeHoverStatus:function(t){var a=i.getRoot(e),n=a.chart.getChartHub(e.frontendId);n.setChartConfigData({hoverStatus:t})},changeTitle:function(t){t&&(e.name=t)},addWidgetTemplate:function(t,a){if((null===t||void 0===t?void 0:t.name)&&"string"==typeof t.name&&t.name.trim()){var o=i.getRoot(e),d=o.group.current.data.hash,l={width:e.width,height:e.height,titleAlign:e.titleAlign,hideTitle:e.hideTitle,config:JSON.stringify(e.config)};m.post("/api/manage/group/"+d+"/widgetTemplate/add",{name:t.name,type:e.type,sourceType:a?3:1,sourceHash:e.hash,config:l}).then(function(e){var t;(null===(t=null===e||void 0===e?void 0:e.data)||void 0===t?void 0:t.hash)&&r.toast.success(n.default("添加成功"))}).catch(function(){r.toast.error(n.default("操作失败"))}),o.widgetTemplate.toggleAddTemplate(!1)}},useTemplate:function(t,a){var n=null;try{n=JSON.parse(t.config)}catch(o){console.error("Parse widget template failed")}var r=i.getRoot(e);if(n instanceof Object){var d=n.width,l=n.height,s=n.titleAlign,g=n.hideTitle,c=n.config;(1===t.sourceType&&!a||3===t.sourceType&&a)&&(d>0&&(e.width=d),l>0&&(e.height=l)),s&&(e.titleAlign=s),e.hideTitle=!!g,c instanceof Object&&("image"===t.type&&2===c.selfUpload&&(c.selfUpload=1),e.config=c)}r.widgetTemplate.toggleSelectTemplate(!1)},changeImage:function(t){e.config=a.__assign(a.__assign({},e.config),{imgUrl:t})},exportPageExcel:function(){var t=i.getRoot(e),a=t.chart,n=t.report,o=t.dashboard,r="";r=e.isDashChart?o.current.data.name:n.current.data.name,a.exportToExcel(r)},handleVisualMap:function(t,n){var o;if(t){var i=(null===(o=e.config.visualMap)||void 0===o?void 0:o.length)?a.__spreadArrays(e.config.visualMap):[];"number"==typeof n?(i[n]=t,e.config=a.__assign(a.__assign({},e.config),{visualMap:i})):(i.push(t),e.config=a.__assign(a.__assign({},e.config),{visualMap:i}))}}}}),t.DrillDownChartEntity=o.types.model("DrillDownChartEntity",{ddOpen:o.types.optional(o.types.boolean,!1),ddType:o.types.optional(o.types.string,""),ddFireKey:o.types.optional(o.types.string,""),ddLinkType:o.types.optional(o.types.string,"input"),ddLinkUrl:o.types.optional(o.types.string,""),ddLinkKey:o.types.optional(o.types.string,""),ddLinkAddQueryParams:o.types.optional(o.types.boolean,!1),ddLinkAddEncode:o.types.optional(o.types.boolean,!1),ddParamEncode:o.types.optional(o.types.boolean,!1),ddLinkTargetBlank:o.types.optional(o.types.boolean,!1),ddLinkTargetSelf:o.types.optional(o.types.boolean,!1),ddLinkTopTargetSelf:o.types.optional(o.types.boolean,!0),ddLinkDialog:o.types.optional(o.types.boolean,!1),chart:o.types.optional(t.ChartEntity,{})})});
;sugar.define("sugar:stores/chart-debug-data.ts",function(a,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChartDebugData=void 0;var e=a("sugar:node_modules/tslib/tslib.js"),s=a("sugar:node_modules/mobx-state-tree/dist/mobx-state-tree.js"),d=a("sugar:stores/index.ts"),r=a("sugar:stores/helper.ts"),o=a("sugar:stores/chart-data.ts");t.ChartDebugData=s.types.model("ChartDebugData",{loadState:r.state,loadError:s.types.optional(s.types.frozen(),{}),data:s.types.optional(s.types.frozen(),null),other:s.types.optional(s.types.map(r.SweetDataUnit),{})}).actions(function(a){return{loadDebugData:r.asyncAction(a,{method:"post",reqUrlAndDataAndConfig:function(t,e){var s=o.getReqUrlAndData(t,"editor",e,a,"",!0);return s.reqData.isDebug="yes",s},success:function(t,e){a.data=t.data;var s=d.getRoot(e);("api"===e.dataType||"json"===e.dataType)&&t.data.data&&t.data.data.hasOwnProperty("data")?s.chart.getChartHub(e.frontendId).data.setData(t.data.data.data):("sql"===e.dataType||"dataModel"===e.dataType)&&t.data&&t.data.hasOwnProperty("data")&&s.chart.getChartHub(e.frontendId).data.setData(t.data.data)}}),loadDebugDataset:r.asyncAction(a,{method:"post",reqUrlAndDataAndConfig:function(t,e){a.data={data:null,isOnlyDataset:!0};var s=e.reportOrDashHash?e.reportOrDashHash:null,d="report/"+(s||t.reportHash);t.dashboardHash&&(d="dashboard/"+(s||t.dashboardHash));var r=o.getReqUrlAndData(t,"editor",e,a,"",!0);return r.url="/api/"+d+"/chart-data/dataModelProxyDataset?cfId="+t.frontendId,r.reqData.isDebug="yes",r.reqData.isNeedDataModel=!0,r},success:function(t){t.data&&(a.data=e.__assign(e.__assign({},t.data),{isOnlyDataset:!0}))}}),loadDebugOtherData:r.asyncAction(a,{method:"post",state:function(t,s,d,r){a.other.set(r,e.__assign(e.__assign({},a.other.get(r)),{loadState:t}))},reqUrlAndDataAndConfig:function(t,e,s){var d=o.getReqUrlAndData(t,"editor",e,a,s,!0);return d.reqData.isDebug="yes",d},success:function(t,s,r,o){a.other.set(o,e.__assign(e.__assign({},a.other.get(o)),{data:t.data}));var n=d.getRoot(s),i="";o&&s.config.subChartConfig&&s.config.subChartConfig[o]&&(i=s.config.subChartConfig[o].dataType),("api"===i||"json"===i)&&t.data.data&&t.data.data.hasOwnProperty("data")?n.chart.getChartHub(s.frontendId).data.setOtherData(t.data.data.data,o):("sql"===i||"dataModel"===i)&&t.data&&t.data.hasOwnProperty("data")&&n.chart.getChartHub(s.frontendId).data.setOtherData(t.data.data,o)}})}})});
;sugar.define("sugar:stores/chart-hub.ts",function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ChartHubMap=e.ChartHub=e.DependenceData=e.DrillDownData=void 0;var n=t("sugar:node_modules/mobx-state-tree/dist/mobx-state-tree.js"),a=t("sugar:stores/chart-data.ts"),o=t("sugar:stores/chart-debug-data.ts"),i=t("sugar:node_modules/lodash/merge.js"),s=t("sugar:stores/index.ts");e.DrillDownData=n.types.model("DrillDownData",{drillDownIndex:n.types.optional(n.types.number,-1),drillDownItem:n.types.optional(n.types.frozen(),[]),drillDownPath:n.types.optional(n.types.string,""),mainChartHash:n.types.optional(n.types.string,""),mainChartFrontendId:n.types.optional(n.types.string,""),isDashDrilldown:n.types.optional(n.types.boolean,!1),reportOrDashHash:n.types.optional(n.types.string,""),itemName:n.types.optional(n.types.string,"")}).actions(function(t){return{setDrillDownIndex:function(e){t.drillDownIndex=e},setDrillDownItem:function(e){t.drillDownItem=e},setMainChartHash:function(e){t.mainChartHash=e},setMainChartFrontendId:function(e){t.mainChartFrontendId=e},setReportOrDashHash:function(e){t.reportOrDashHash=e},setDrillDownPath:function(e,n){if(e){var a=e.split(",");a.push(n+""),t.drillDownPath=a.join(",")}else t.drillDownPath=n+""},setIsDashDrilldown:function(e){void 0===e&&(e=!1),t.isDashDrilldown=e},setItemName:function(e){"number"==typeof e?t.itemName=e.toString():"string"==typeof e&&(t.itemName=e)}}}),e.DependenceData=n.types.model("DependenceData",{dependenceItem:n.types.optional(n.types.frozen(),null),dependenceBindConfig:n.types.optional(n.types.frozen(),[]),dependenceState:n.types.optional(n.types.frozen(),null)}).actions(function(t){return{setDependenceBindConfig:function(e){t.dependenceBindConfig=e},setDependenceItem:function(e){t.dependenceItem=e},setDependenceState:function(e){t.dependenceState=e}}}),e.ChartHub=n.types.model("ChartHub",{data:n.types.optional(a.ChartData,{}),chartTip:n.types.optional(n.types.string,""),debugData:n.types.optional(o.ChartDebugData,{}),configData:n.types.optional(n.types.frozen(),{}),drillDownData:n.types.optional(e.DrillDownData,{}),dependenceData:n.types.optional(e.DependenceData,{}),drillDownDialogOpen:n.types.optional(n.types.boolean,!1)}).actions(function(t){return{setChartTip:function(e){t.chartTip=e},setChartConfigData:function(e){t.configData=i({},t.configData,e)},setDrillDownDialogOpen:function(e){void 0===e&&(e=!1),t.drillDownDialogOpen=e},toggleAddTemplate:function(e){s.getRoot(t).widgetTemplate.toggleAddTemplate(e)},toggleSelectTemplate:function(e){s.getRoot(t).widgetTemplate.toggleSelectTemplate(e)}}}),e.ChartHubMap=n.types.model("ChartHubMap",{mapByFrontendId:n.types.optional(n.types.map(e.ChartHub),{})}).actions(function(t){return{clearChartHub:function(){a.clearChartDataCancelTokenMap(),t.mapByFrontendId.clear()},setEmptyHubByFrontendId:function(e){t.mapByFrontendId.set(e,{})}}})});
;sugar.define("sugar:utils/export-file/blob.js",function(){!function(t){"use strict";if(t.URL=t.URL||t.webkitURL,t.Blob&&t.URL)try{return void new Blob}catch(e){}var n=t.BlobBuilder||t.WebKitBlobBuilder||t.MozBlobBuilder||function(t){var e=function(t){return Object.prototype.toString.call(t).match(/^\[object\s(.*)\]$/)[1]},n=function(){this.data=[]},o=function(t,e,n){this.data=t,this.size=t.length,this.type=e,this.encoding=n},i=n.prototype,r=o.prototype,a=t.FileReaderSync,c=function(t){this.code=this[this.name=t]},l="NOT_FOUND_ERR SECURITY_ERR ABORT_ERR NOT_READABLE_ERR ENCODING_ERR NO_MODIFICATION_ALLOWED_ERR INVALID_STATE_ERR SYNTAX_ERR".split(" "),s=l.length,u=t.URL||t.webkitURL||t,d=u.createObjectURL,f=u.revokeObjectURL,R=u,p=t.btoa,b=t.atob,h=t.ArrayBuffer,g=t.Uint8Array,w=/^[\w-]+:\/*\[?[\w\.:-]+\]?(?::[0-9]+)?/;for(o.fake=r.fake=!0;s--;)c.prototype[l[s]]=s+1;return u.createObjectURL||(R=t.URL=function(t){var e,n=document.createElementNS(location.protocol+"//www.w3.org/1999/xhtml","a");return n.href=t,"origin"in n||("data:"===n.protocol.toLowerCase()?n.origin=null:(e=t.match(w),n.origin=e&&e[1])),n}),R.createObjectURL=function(t){var e,n=t.type;return null===n&&(n="application/octet-stream"),t instanceof o?(e="data:"+n,"base64"===t.encoding?e+";base64,"+t.data:"URI"===t.encoding?e+","+decodeURIComponent(t.data):p?e+";base64,"+p(t.data):e+","+encodeURIComponent(t.data)):d?d.call(u,t):void 0},R.revokeObjectURL=function(t){"data:"!==t.substring(0,5)&&f&&f.call(u,t)},i.append=function(t){var n=this.data;if(g&&(t instanceof h||t instanceof g)){for(var i="",r=new g(t),l=0,s=r.length;s>l;l++)i+=String.fromCharCode(r[l]);n.push(i)}else if("Blob"===e(t)||"File"===e(t)){if(!a)throw new c("NOT_READABLE_ERR");var u=new a;n.push(u.readAsBinaryString(t))}else t instanceof o?"base64"===t.encoding&&b?n.push(b(t.data)):"URI"===t.encoding?n.push(decodeURIComponent(t.data)):"raw"===t.encoding&&n.push(t.data):("string"!=typeof t&&(t+=""),n.push(unescape(encodeURIComponent(t))))},i.getBlob=function(t){return arguments.length||(t=null),new o(this.data.join(""),t,"raw")},i.toString=function(){return"[object BlobBuilder]"},r.slice=function(t,e,n){var i=arguments.length;return 3>i&&(n=null),new o(this.data.slice(t,i>1?e:this.data.length),n,this.encoding)},r.toString=function(){return"[object Blob]"},r.close=function(){this.size=0,delete this.data},n}(t);t.Blob=function(t,e){var o=e?e.type||"":"",i=new n;if(t)for(var r=0,a=t.length;a>r;r++)i.append(Uint8Array&&t[r]instanceof Uint8Array?t[r].buffer:t[r]);var c=i.getBlob(o);return!c.slice&&c.webkitSlice&&(c.slice=c.webkitSlice),c};var o=Object.getPrototypeOf||function(t){return t.__proto__};t.Blob.prototype=o(new t.Blob)}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this)});
;sugar.define("sugar:utils/export-file/export-excel.ts",function(e,o){"use strict";function t(){return Promise.resolve().then(function(){return new Promise(function(o){e(["sugar:node_modules/exceljs/dist/exceljs.min.js"],function(e){o(e)})})})}function n(e,o){o.xlsx.writeBuffer().then(function(o){i.saveAs(new Blob([o],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),e+".xlsx")}).catch(function(e){throw e})}function s(e){var o=[];return e&&e.length&&e[0]&&e[0].length?(e[0].forEach(function(t,n){var s=[];e.forEach(function(e){s.push(null==e[n]?null:e[n])}),o.push(s)}),o):o}function r(e,o){return u.__awaiter(this,void 0,void 0,function(){var s,r,l,i,a,f;return u.__generator(this,function(u){switch(u.label){case 0:return[4,t()];case 1:for(s=u.sent(),r=new s.Workbook,l=r.addWorksheet(c.processExcelWorkBookName(o)),i=0,a=e;i<a.length;i++)f=a[i],l.addRow(f);return n(o,r),[2]}})})}function l(e,o){var t=s(e);r(t,o)}Object.defineProperty(o,"__esModule",{value:!0}),o.exportExcelByColumns=o.exportExcelByRows=o.exportRowsByColumns=o.saveExcel=o.getExcelJS=void 0;var u=e("sugar:node_modules/tslib/tslib.js");e("sugar:utils/export-file/blob.js");var i=e("sugar:node_modules/file-saver/dist/FileSaver.min.js"),c=e("sugar:utils/common-helper.ts");o.getExcelJS=t,o.saveExcel=n,o.exportRowsByColumns=s,o.exportExcelByRows=r,o.exportExcelByColumns=l});
;sugar.define("sugar:utils/export-file/export-image.ts",function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.domToDataUrl=void 0;var i=t("sugar:node_modules/tslib/tslib.js"),o=t("sugar:node_modules/html-to-image/lib/index.js"),s=t("sugar:node_modules/amis/lib/index.js"),r=t("sugar:widgets/progress.ts"),n=t("sugar:utils/i18n.ts");e.domToDataUrl=function(t){return i.__awaiter(void 0,void 0,void 0,function(){var e,a;return i.__generator(this,function(){return t?(e=t.offsetWidth,a=t.offsetHeight,r.default.show(),s.toast.info("截图中请等待"),[2,o.toPng(t,{width:e,height:a,pixelRatio:1,filter:function(t){return!(t.style&&"none"===t.style.display||/(chart-toolbar|dropdown-menu|resize.*|chart-tip.*)/.test(t.className))},skipFonts:!0}).then(function(t){return{dataUrl:t,width:e,height:a}}).catch(function(){s.toast.error(n.default("截图失败"))}).finally(function(){r.default.hide()})]):[2]})})}});
;sugar.define("sugar:stores/chart.ts",function(t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.Chart=a.caclPositionOfNewChartInDashboard=void 0;var e=t("sugar:node_modules/tslib/tslib.js"),r=t("sugar:utils/i18n.ts"),n=t("sugar:node_modules/mobx-state-tree/dist/mobx-state-tree.js"),o=t("sugar:node_modules/mobx/lib/mobx.js"),d=t("sugar:node_modules/amis/lib/index.js"),i=t("sugar:stores/index.ts"),s=t("sugar:utils/frontendId.ts"),l=t("sugar:utils/common-helper.ts"),h=t("sugar:widgets/charts/chart-manager.tsx"),u=t("sugar:stores/chart-model.ts"),f=t("sugar:stores/chart-hub.ts"),c=t("sugar:services/chart-dependence.ts"),g=t("sugar:utils/export-file/export-excel.ts"),p=t("sugar:node_modules/lodash/merge.js"),y=t("sugar:widgets/product-type/product-type-modal.tsx"),v=t("sugar:utils/export-file/export-image.ts");a.caclPositionOfNewChartInDashboard=function(t,a,e){void 0===a&&(a=20),void 0===e&&(e=20);for(var r=a,n=e,o=!0;o;)o=t.some(function(t){return t.left===r&&t.top===n}),o&&(r+=30,n+=30);return{left:r,top:n}};var m=function(t,a){void 0===a&&(a=4);for(var e=0,r=0,n=0,o=t;n<o.length;n++){var d=o[n],i=d.top+d.height;(i>e||i===e&&d.left+d.width>r)&&(e=i,r=d.left+d.width)}return{left:r+a>12?0:r,top:e}},w=n.types.model("ChartList",{data:n.types.optional(n.types.array(u.ChartEntity),[])}).actions(function(t){return{add:function(n,o,l,u){if(void 0===l&&(l="report"),void 0===u&&(u=0),"dashboard"===l&&"scene"===n.type){var f=t.data.find(function(t){return"scene"===t.type});if(f)return d.toast.error(r.default("一个大屏中只能包含一个三维场景")),""}for(var c=s.generateId(),g=n.type,y=n.name,v=0,w=!0,b=y;w;){w=!1;for(var x=0;x<t.data.length;x++)if(t.data[x].name===b){w=!0,v++,b=""+y+v;break}}var D={frontendId:c,type:g,name:b};if(n.initialState&&(D=e.__assign(e.__assign({},D),n.initialState),window.sugarConfig.enableDataModel&&n.dataModelPanelShow&&"api"===n.initialState.dataType&&(D.dataType="dataModel")),"dashboard"===l){D.dashboardHash=o,D.isDashChart=1,D.zIndex=t.data.length>0||u?(u||t.data[0].zIndex)+1:50,n.initialDashboardState&&(D=p({},D,n.initialDashboardState)),D=h.mergeInitialState(D);var I=a.caclPositionOfNewChartInDashboard(t.data);D.left=I.left,D.top=I.top,t.data.unshift(D),n.subCharts?t.data[0].addDefaultSubChart():t.data[0].loadData("editor",!0,[])}else{"explore"===l&&(D.isExploreChart=1,D.width=12,D.height=620),D.reportHash=o,D=h.mergeInitialState(D),D.height||(D.height=300),D.height/=10;var I=m(t.data,D.width||4);D.left=I.left,D.top=I.top,t.data.push(D),n.subCharts?t.data[t.data.length-1].addDefaultSubChart():1!==D.isExploreChart&&t.data[t.data.length-1].loadData("editor",!0,[])}var _=i.getRoot(t);return _.chart.getChartHub(c),c},move:function(a,e){t.data.move(a,e)},updateZIndex:function(a,e){t.data.replace(a);for(var r=t.data.length-1;r>=0;r--)t.data[r].zIndex=e[r]},copy:function(n,i){var l=s.generateId();if(!t.data[n]&&!i)return"";var h;if(h=i?i:o.toJS(t.data[n]),"scene"===h.type)return d.toast.error(r.default("一个大屏中只能包含一个三维场景")),"";if(h.hash="",h.frontendId=l,"json"===h.dataType&&(h.dataType="api"),h.dataConfig.dataJsonHash&&(h.dataConfig=e.__assign(e.__assign({},h.dataConfig),{dataJsonHash:""})),h.drillDown||h.config.hierarchyDrillDown){var u=[];try{u=JSON.stringify(h.drillDown),u=u.replace(/"dataJsonHash":"[^"]+"/g,'"dataJsonHash":""'),u=u.replace(/"frontendId":"drc_[^"]+"/g,function(){return'"frontendId":"drc_'+s.generateId()+'"'}),u=JSON.parse(u)}catch(f){u=[]}h.drillDown=u}if("custom-iframe"===h.type&&(h.config=e.__assign(e.__assign({},h.config),{htmlHash:"demo",t:1})),["map","map-line"].includes(h.type)&&(h.config=e.__assign(e.__assign({},h.config),{geoJSON:{geoJSONHash:"create",t:1}})),h.isDashChart){var g=a.caclPositionOfNewChartInDashboard(t.data,h.left+30,h.top+30);h.left=g.left,h.top=g.top,h.zIndex=t.data.length>0?t.data[0].zIndex+1:50,t.data.unshift(h),t.data[0].loadData("editor",!0,[])}else{var g=m(t.data,h.width);h.left=g.left,h.top=g.top,t.data.push(h),t.data[t.data.length-1].loadData("editor",!0,[]),c.chartDependencyAnalysis(t.data)}return l},"delete":function(a){var e=t.data[a].isDashChart;t.data.splice(a,1),e||c.chartDependencyAnalysis(t.data)},multiDelete:function(a){t.data=t.data.filter(function(t){return!~a.indexOf(t.frontendId)}),t.data[0]&&!t.data[0].isDashChart&&c.chartDependencyAnalysis(t.data)},changeConfig:function(a,r){a&&t.data.forEach(function(t){-1!=a.indexOf(t.frontendId)&&(t.config=e.__assign(e.__assign({},t.config),r))})},syncHashes:function(a){a.length!==t.data.length?d.toast.error(r.default("同步图表的前后端数据错误")):a.forEach(function(a,e){t.data[e].hash=a.hash})},syncLayout:function(a){for(var e=function(t){var e=a.find(function(a){return a.i===t.frontendId});e&&(t.left=e.x,t.top=e.y,t.width=e.w,t.height=e.h)},r=0,n=t.data;r<n.length;r++){var o=n[r];e(o)}}}});a.Chart=n.types.model("chart",{list:n.types.optional(w,{}),hubMap:n.types.optional(f.ChartHubMap,{})}).actions(function(t){return{initialize:function(a,e,r){void 0===r&&(r=0);var n=i.getRoot(t);if("grid"!==n.report.current.data.config.layoutMode&&0===r)for(var o=12,d=Array(o).fill(0),u=0,f=0,g=a;f<g.length;f++){var p=g[f];p.height=Math.floor(p.height/10)+1;for(var y=d.length-1,v=!1,m=Math.max(u,d[y]);!v;)if(0>y)v=!0;else{var w=Math.max(u,d[y]);w>m?o-y-1>=p.width?v=!0:(m=w,y--):y--}p.left=y+1,p.top=Math.max(u,m),u=p.top;for(var b=p.left;b<p.left+p.width;b++)d[b]=p.top+p.height}return t.list.data=h.mergeInitialState(l.addFiledToObjectArray(s.addFrontendId(a,"frontendId"),r?"dashboardHash":"reportHash",e)),t.hubMap.clearChartHub(),t.list.data.forEach(function(a){t.getChartHub(a.frontendId)}),n.chartCondition.clearHub(),r||c.chartDependencyAnalysis(t.list.data),t},getChartHub:function(a){var e=t.hubMap.mapByFrontendId.get(a);return e||(t.hubMap.setEmptyHubByFrontendId(a),e=t.hubMap.mapByFrontendId.get(a)),e},exportToExcel:function(a){var r;return e.__awaiter(this,void 0,void 0,function(){var n,o,d,s,l,u,f,c,p,m,w,b,x,D,I,_,C;return e.__generator(this,function(e){switch(e.label){case 0:return n=window.sugarConfig,o=n.productType,d=n.deployType,"saas"===d&&"advan"!==o?(y.showUpdate(),[2]):(s=i.getRoot(t),l=s.chartTheme.theme,[4,g.getExcelJS()]);case 1:for(u=e.sent(),f=new u.Workbook,c={},p=0,m=t.list.data[p];m;)w=this.getChartHub(m.frontendId),b=h.getChartByType(m.type),x=m.dynamicName||m.name||"export"+p,c[x]>=0?c[x]+=1:c[x]=0,x+=c[x]||"","map-layer"===m.type&&(null===b||void 0===b?void 0:b.exportRows)?(D=b.exportRows(w.data,m,w,l),D&&D.length&&D.forEach(function(t){var a=f.addWorksheet(t.name);a.addRows(t.rows)})):(null===b||void 0===b?void 0:b.exportRows)&&w&&w.data.data&&(I=f.addWorksheet(x),"table"===m.type||"smart-chart"===m.type&&"table"===(null===(r=m.config.smartChart)||void 0===r?void 0:r.type)?b.exportRows(w.data,m,w,l,I):(_=b.exportRows(w.data,m,w,l),_ instanceof Array&&I.addRows(_))),(null===w||void 0===w?void 0:w.drillDownData.drillDownIndex)>-1&&m.drillDown[w.drillDownData.drillDownIndex]?m=m.drillDown[w.drillDownData.drillDownIndex].chart:(p++,m=t.list.data[p]);return C=document.getElementById("chart-screenshot-container"),[4,v.domToDataUrl(C).then(function(t){if(null===t||void 0===t?void 0:t.dataUrl){var e=f.addImage({base64:t.dataUrl,extension:"png"}),r=f.addWorksheet(a+"_"+Date.now());r.addImage(e,{tl:{col:0,row:0},ext:{width:t.width,height:t.height}})}}).finally(function(){f.worksheets.length&&g.saveExcel(a+"_"+Date.now(),f),C=null})];case 2:return e.sent(),[2]}})})}}})});
;sugar.define("sugar:stores/condition-model.ts",function(a,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConditionEntity=void 0;var n=a("sugar:node_modules/tslib/tslib.js"),o=a("sugar:utils/i18n.ts"),e=a("sugar:node_modules/mobx-state-tree/dist/mobx-state-tree.js"),i=a("sugar:stores/index.ts"),d=a("sugar:utils/condition-helper.ts"),s=a("sugar:utils/common-helper.ts"),l=a("sugar:services/condition-dependence.ts"),r=a("sugar:stores/chart-model.ts"),g=a("sugar:node_modules/lodash/get.js"),f=a("sugar:widgets/conditions/condition-manager.tsx"),p=a("sugar:utils/data-model-helper.ts"),u=a("sugar:node_modules/amis/lib/index.js");t.ConditionEntity=e.types.model("ConditionEntity",{reportHash:e.types.optional(e.types.string,""),dashboardHash:e.types.optional(e.types.string,""),isDashCondition:e.types.optional(e.types.number,0),hash:e.types.optional(e.types.string,""),frontendId:e.types.optional(e.types.string,""),type:e.types.optional(e.types.string,""),label:e.types.optional(e.types.string,""),key:e.types.optional(e.types.string,""),required:e.types.optional(e.types.boolean,!1),halfWidth:e.types.optional(e.types.boolean,!1),defaultVal:e.types.optional(e.types.string,""),order:e.types.optional(e.types.number,0),config:e.types.optional(e.types.frozen(),{}),dataType:e.types.optional(e.types.enumeration(["dataModel","sql","api","static"]),"sql"),dataModelHash:e.types.optional(e.types.union(e.types.string,e.types.null),""),dataApiUrl:e.types.optional(e.types.string,""),dataConfig:e.types.optional(e.types.frozen(),{}),isHide:e.types.optional(e.types.boolean,!1),hasFirstLoaded:e.types.optional(e.types.boolean,!1),width:e.types.optional(e.types.number,12),height:e.types.optional(e.types.number,23),left:e.types.optional(e.types.number,0),top:e.types.optional(e.types.number,0),zIndex:e.types.optional(e.types.number,9999)}).actions(function(a){return{update:function(t,e){var d=i.getRoot(a),c=function(i){var c=e[i];switch(i){case"label":case"key":case"required":case"halfWidth":"list"===a.config.uiMode&&"halfWidth"===i&&c&&(a.config=n.__assign(n.__assign({},a.config),{uiMode:"select"}),u.toast.warning(o.default("开启宽度减半后，展示样式只能使用下拉")));case"defaultVal":case"order":case"dataApiUrl":a[i]=c;break;case"width":case"height":case"left":case"top":if(!/^(\-|\+)?\d+(\.\d+)?$/.test(String(c)))return{value:void 0};if(a.isDashCondition){var y=parseInt(c,10),C=d.dashboard.current.data.config.grid;C=C&&C>1?parseInt(C,10):1,a[i]=s.getPosition(y,C)}else a[i]=c;break;case"dataType":window.sugarConfig.enableDataModel?(a.dataType=c,"sql"===c?(a.dataModelHash="",a.dataConfig=r.clearSqlOrDataModelInDataConfig("dataModel",a.dataConfig)):"dataModel"===c&&(a.dataModelHash="",a.dataConfig=r.clearSqlOrDataModelInDataConfig("sql",a.dataConfig))):a.dataType=c;case"dataModelHash":null===c?a[i]="":c!==a[i]&&(a[i]=c,/^mld_/.test(c)?(a.dataConfig=r.clearSqlOrDataModelInDataConfig("dataModel",a.dataConfig),d.condition.updateConditionsModelChartConditionBindingsFromCondition(c,a.key)):/^sql_/.test(c)&&(a.dataConfig=r.clearSqlOrDataModelInDataConfig("sql",a.dataConfig)));break;case"config":a.config=t.config,c&&c.dependences&&(l.dependencyAnalysis(d.condition.list.data),"dataModel"===a.dataType&&a.dataModelHash&&/^mld_/.test(a.dataModelHash)&&d.condition.updateConditionsModelChartConditionBindingsFromCondition(a.dataModelHash,a.key));break;case"dataConfig":var h=g(t,"dataConfig.dataModel.dataModelBind",[]),M=null;if("dataModel"===a.dataType||t.dataConfig.showAll===a.dataConfig.showAll&&t.dataConfig.showAllLabel===a.dataConfig.showAllLabel||a.loadData("editor"),a.dataModelHash&&"dataModel"===a.dataType){var _=f.getConditionByType(a.type);if(_&&_.dataModelBindMonitorField){var v=g(a,"dataConfig.dataModel."+_.dataModelBindMonitorField,[]),b=g(t,"dataConfig.dataModel."+_.dataModelBindMonitorField,[]),D=h.findIndex(function(t){return t.dataModelHash===a.dataModelHash});if(!v.length&&b.length){if(0>D){var B=b[0],H=d.chart.list.data,m=d.condition.list.data,w=p.findUsingDataModelHashsInReport(H||[],m,a);if(w.has(a.dataModelHash)){var I="=";void 0!==_.dataModelLinkType&&(I=_.dataModelLinkType);var T={dataModelHash:a.dataModelHash,colId:B.id||"",linkType:I};M=n.__assign(n.__assign({},t.dataConfig),{dataModel:n.__assign(n.__assign({},t.dataConfig.dataModel),{dataModelBind:n.__spreadArrays(h,[T])})})}}}else if(!b.length&&v.length&&D>-1){var O=n.__spreadArrays(h);O.splice(D,1),M=n.__assign(n.__assign({},t.dataConfig),{dataModel:n.__assign(n.__assign({},t.dataConfig.dataModel),{dataModelBind:O})})}}}var V="";if("dataModel"===a.dataType){var A=JSON.parse(JSON.stringify(a.dataConfig));["dataModelBind","chartBind","conditionBind"].forEach(function(a){A.dataModel&&A.dataModel[a]&&(A.dataModel[a]=null)}),V=JSON.stringify(A)}if(M?(a.dataConfig=M,a.updateChartAndConditionBinding([a.dataModelHash],[])):a.dataConfig=t.dataConfig,"static"===a.dataType&&"dateTimeGranularity"===a.type){if(a.dataConfig.dateGranularityConfig&&"default"===a.dataConfig.dateGranularityConfig.type){var S=["s","i","h","d","w","m","q","y"],k={};a.dataConfig.dateGranularityConfig.options.forEach(function(a){var t=a.value.substr(a.value.length-1,1);k[t]||(k[t]=[]),k[t].push(a)});var q=[];S.forEach(function(a){if(k[a]){var t=k[a].sort(function(a,t){return parseInt(a.value)-parseInt(t.value)});q=q.concat(t)}}),a.dataConfig=n.__assign(n.__assign({},a.dataConfig),{dateGranularityConfig:n.__assign(n.__assign({},a.dataConfig.dateGranularityConfig),{options:q})})}a.loadData("editor")}if("dataModel"===a.dataType&&a.dataConfig.dataModel){var R=f.getConditionByType(a.type);if(R&&a.dataConfig.dataModel&&R.loadDataWhenDataModelConfigChange&&R.loadDataWhenDataModelConfigChange(a)){var E=JSON.parse(JSON.stringify(a.dataConfig));["dataModelBind","chartBind","conditionBind"].forEach(function(a){E.dataModel&&E.dataModel[a]&&(E.dataModel[a]=null)}),V!==JSON.stringify(E)&&a.loadData("editor")}}}};for(var y in e){var C=c(y);if("object"==typeof C)return C.value}if(e.hasOwnProperty("defaultVal")||e.config&&(e.config.hasOwnProperty("cusDefaultVal")||e.config.hasOwnProperty("cusDefaultValBegin")||e.config.hasOwnProperty("cusDefaultValEnd")||e.config.hasOwnProperty("defaultTopN"))){var h=i.getRoot(a),M=h.condition.getConditionHub(a.frontendId);M.value.setValueByDeafaultVal(a,a.defaultVal,M.data)}},setDependences:function(t){a.config=n.__assign(n.__assign({},a.config),{dependences:t})},changeConditionValue:function(t,n){var o=i.getRoot(a),e=o.condition.getConditionHub(a.frontendId);e.value.setValue(t);var s=l.getConditionsDependOnMeAndNeedReload(o.condition.list.data,a);s.forEach(function(e){if(null===t||void 0===t||""===t||d.specialCondtionEmptyValue(t,a)){e.changeConditionValue(null,n);var i=o.condition.getConditionHub(e.frontendId);i.data.setData([])}else{var s=o.condition.getConditionHub(e.frontendId);s.value.setValueByDeafaultVal(e,e.defaultVal),e.loadData(n,!1)}})},loadData:function(t,n,o){if(void 0===n&&(n=!1),"text"===a.type)return null;if(n&&a.hasFirstLoaded)return null;var e=i.getRoot(a),d=e.condition.getConditionHub(a.frontendId),s=l.isConditionDependencesReady(e.condition.list.data,e.condition.hubMap,a,"editor"===t&&!n);return s?(n&&(a.hasFirstLoaded=!0,e.editor.setModified(!1)),d.data.loadData(a,t,n,o)):null},loadDebugData:function(){var t=i.getRoot(a),n=t.condition.getConditionHub(a.frontendId),o=l.isConditionDependencesReady(t.condition.list.data,t.condition.hubMap,a,!0);return o?n.debugData.loadDebugData(a):null},loadOtherData:function(t,n,o){var e=i.getRoot(a),d=e.condition.getConditionHub(a.frontendId);return d.data.loadOtherData(a,t,n,o)},loadDebugOtherData:function(t,n){var o=i.getRoot(a),e=o.condition.getConditionHub(a.frontendId);return e.debugData.loadDebugOtherData(a,t,n)},updateModelChartConditionBindings:function(t,o,e){for(var i=!1,d=g(a,"dataConfig.dataModel.dataModelBind",[]),s=0,l=d;s<l.length;s++){var r=l[s];if(r.dataModelHash===t){i=!0;break}}if(!i&&"dataModel"===a.dataType&&a.dataModelHash&&a.dataModelHash.startsWith("mld_")&&a.dataModelHash===t){var p=f.getConditionByType(a.type);if(p&&p.dataModelBindMonitorField){var u=g(a,"dataConfig.dataModel."+p.dataModelBindMonitorField,[]);if(u.length){var c=u[0];i=!0;var y="=";void 0!==p.dataModelLinkType&&(y=p.dataModelLinkType);var C={dataModelHash:t,colId:c.id||"",linkType:y};a.dataConfig=n.__assign(n.__assign({},a.dataConfig),{dataModel:n.__assign(n.__assign({},a.dataConfig.dataModel),{dataModelBind:n.__spreadArrays(d,[C])})})}}}if(i&&o){for(var h=!1,M=g(a,"dataConfig.dataModel.chartBind.list",[]),_=0,v=M;_<v.length;_++){var r=v[_];if(r===o){h=!0;break}}h||(a.dataConfig=n.__assign(n.__assign({},a.dataConfig),{dataModel:n.__assign(n.__assign({},a.dataConfig.dataModel),{chartBind:{list:n.__spreadArrays(M,[o])}})}))}if(i&&e){for(var b=!1,D=g(a,"dataConfig.dataModel.conditionBind.list",[]),B=0,H=D;B<H.length;B++){var r=H[B];if(r===e){b=!0;break}}b||(a.dataConfig=n.__assign(n.__assign({},a.dataConfig),{dataModel:n.__assign(n.__assign({},a.dataConfig.dataModel),{conditionBind:{list:n.__spreadArrays(D,[e])}})}))}},updateChartAndConditionBinding:function(t,o){var e=i.getRoot(a),d=e.chart.list.data,s=e.condition.list.data,l=p.getUsingChartsVals(d,new Set(t)),r=p.getUsingConditionsVals(s,new Set(t),a),f=p.getUsingChartsVals(d,new Set(o)),u=p.getUsingConditionsVals(s,new Set(o),a),c=g(a,"dataConfig.dataModel.chartBind.list",[]),y=g(a,"dataConfig.dataModel.conditionBind.list",[]);a.dataConfig=n.__assign(n.__assign({},a.dataConfig),{dataModel:n.__assign(n.__assign({},a.dataConfig.dataModel),{chartBind:{list:Array.from(new Set(n.__spreadArrays(c.filter(function(a){return!f.includes(a)}),l)))},conditionBind:{list:Array.from(new Set(n.__spreadArrays(y.filter(function(a){return!u.includes(a)}),r)))}})})},changeHoverStatus:function(t){var n=i.getRoot(a),o=n.condition.getConditionHub(a.frontendId);o.setConditionConfigData({hoverStatus:t})}}})});
;sugar.define("sugar:stores/condition-data.ts",function(a,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConditionData=t.getReqUrlAndData=t.clearConditionDataCancelTokenMap=t.conditionDataCancelTokenMap=void 0;var o=a("sugar:node_modules/tslib/tslib.js"),e=a("sugar:utils/i18n.ts"),n=a("sugar:node_modules/mobx-state-tree/dist/mobx-state-tree.js"),i=a("sugar:stores/index.ts"),d=a("sugar:node_modules/amis/lib/index.js"),r=a("sugar:utils/common-helper.ts"),s=a("sugar:stores/helper.ts"),l=a("sugar:services/condition-dependence.ts"),c=a("sugar:stores/chart-data.ts"),p=a("sugar:node_modules/axios/index.js"),u=a("sugar:node_modules/lodash/get.js");t.conditionDataCancelTokenMap={},t.clearConditionDataCancelTokenMap=function(){for(var a in t.conditionDataCancelTokenMap)t.conditionDataCancelTokenMap.hasOwnProperty(a)&&t.conditionDataCancelTokenMap[a].cancel("Abort axios");t.conditionDataCancelTokenMap={}},t.getReqUrlAndData=function(a,t,e,n,d,s,p,u){void 0===s&&(s={}),void 0===u&&(u=!1);var h="/api/404",g={},f={},C=e.reportHash,y="report/"+C;C||(C=e.dashboardHash,y="dashboard/"+C);var D="string"==typeof d?e.dataConfig.otherData[d]:e,v=r.parseCurrentQueryString()||{},m="";if(/^\/(report)\//i.test(window.location.pathname)){var _=window.location.pathname.split("/").pop();m="reportShare/"+_+"/";var b=p?i.getRoot(p).report.current:null;if(b&&2===b.data.authType){b.sharePassword&&(s.sharePassword=b.sharePassword);var w=c.getPasswordFreeHost();w&&(s.o=w)}}else if(/^\/i\/report\//i.test(window.location.pathname)){var b=p?i.getRoot(p).report.current:null;b&&(f={headers:{"sugar-company":b.data.companyKey}})}else if(/^\/(dashboard)\//i.test(window.location.pathname)){var k=p?i.getRoot(p).dashboard.current:null,M=window.location.pathname.split("/").pop();if(m="dashboardShare/"+M+"/",k&&2===k.data.authType){k.sharePassword&&(s.sharePassword=k.sharePassword);var w=c.getPasswordFreeHost();w&&(s.o=w)}}else if(/^\/i\/dashboard\//i.test(window.location.pathname)){var k=p?i.getRoot(p).dashboard.current:null;k&&(f={headers:{"sugar-company":k.data.companyKey}})}y=m+y;var T=l.getDependencesQueryParams(a,t,e);if("editor"===n)switch(D.dataType){case"dataModel":h="/api/"+y+"/condition-data/dataModelProxy",g={type:D.type,dataModelHash:D.dataModelHash,dataConfig:D.dataConfig,conditions:T},D.dataModelHash||u||!D.dataApiUrl||(null===p||void 0===p?void 0:p.data)||(h="/api/"+y+"/condition-data/apiProxy?cfId="+e.frontendId,g={url:D.dataApiUrl});break;case"api":h="/api/"+y+"/condition-data/apiProxy",g={url:D.dataApiUrl||"",dataConfig:D.dataConfig,querys:v,conditions:T};break;case"sql":h="/api/"+y+"/condition-data/sqlProxy",g={type:e.type,sqlHash:D.dataModelHash,dataConfig:D.dataConfig,querys:v,conditions:T};break;case"static":h="/api/"+y+"/condition-data/staticProxy",g={type:e.type,dataConfig:D.dataConfig}}else h="/api/"+y+"/condition-data/"+e.hash,g={querys:v,conditions:T};return g=o.__assign(o.__assign(o.__assign({},g),s),{_sugar_other_data_key:d,resourceHash:D.hash,pageHash:C}),{url:h,reqData:g,reqConfig:f}},t.ConditionData=n.types.model("ConditionData",{loadState:s.state,loadError:n.types.optional(n.types.frozen(),{}),data:n.types.optional(n.types.frozen(),null),other:n.types.optional(n.types.map(s.SweetDataUnit),{})}).actions(function(a){return{setData:function(t){a.data=t},loadData:s.asyncAction(a,{method:"post",reqUrlAndDataAndConfig:function(o,e){var n=i.getRoot(a),d=t.getReqUrlAndData(n.condition.list.data,n.condition.hubMap,o,e,void 0,{},a);return t.conditionDataCancelTokenMap[o.frontendId]&&t.conditionDataCancelTokenMap[o.frontendId].cancel&&t.conditionDataCancelTokenMap[o.frontendId].cancel("Abort axios"),t.conditionDataCancelTokenMap[o.frontendId]=p.default.CancelToken.source(),d.reqConfig.cancelToken=t.conditionDataCancelTokenMap[o.frontendId].token,d},success:function(t,o,n,d){a.loadState="done",o.dataConfig.showAll&&t.data&&t.data instanceof Array&&t.data.length&&t.data.unshift({label:o.dataConfig.showAllLabel||e.default("全部"),value:"__allOfAll__"}),a.data=t.data;var r=i.getRoot(a),s=r.condition.getConditionHub(o.frontendId);s.value.setValueByDeafaultVal(o,o.defaultVal,a,s.value.value,d);var c=l.getConditionsDependOnMeAndNeedReload(r.condition.list.data,o);c.forEach(function(a){a.loadData(n,d)}),r.chart.list.data&&r.chart.list.data.length&&r.chart.list.data.forEach(function(a){a.setDynamicName&&a.setDynamicName()})},fail:function(t,o,e,n,r){var s=i.getRoot(a),l=s.report,c=s.dashboard,p=u(l,"current.data.config.hideError")||u(c,"current.data.config.hideError");if(/^\/(dashboard|report|slider)\//.test(location.pathname)&&p?console&&console.error&&console.error(o.label+"："+t.message):d.toast.error(o.label+"："+t.message),r){var h="";try{h=JSON.stringify(a.data)}catch(g){}h&&"[]"!==h&&"{}"!==h&&"normal"===e&&o.isDashCondition&&/dashboard/i.test(window.location.pathname)&&(a.loadState="done")}},showError:!1}),loadOtherData:s.asyncAction(a,{method:"post",state:function(t,e,n,i,d){void 0===d&&(d={}),a.other.set(i,o.__assign(o.__assign({},a.other.get(i)),{loadState:t}))},reqUrlAndDataAndConfig:function(o,e,n,d){if(void 0===d&&(d={}),"suggestion"===n){var r=i.getRoot(a).condition.getConditionHub(o.frontendId).value.value;d.searchStr="logic"===o.type?r&&r.vals?r.vals[0]:"":r}var s=i.getRoot(a),l=t.getReqUrlAndData(s.condition.list.data,s.condition.hubMap,o,e,n,d,a);return t.conditionDataCancelTokenMap[o.frontendId+"_"+n]&&t.conditionDataCancelTokenMap[o.frontendId+"_"+n].cancel&&t.conditionDataCancelTokenMap[o.frontendId+"_"+n].cancel("Abort axios"),t.conditionDataCancelTokenMap[o.frontendId+"_"+n]=p.default.CancelToken.source(),l.reqConfig.cancelToken=t.conditionDataCancelTokenMap[o.frontendId+"_"+n].token,l},success:function(t,e,n,i,d){void 0===d&&(d={}),a.other.set(i,o.__assign(o.__assign({},a.other.get(i)),{data:t.data}))},fail:function(a,t,o,e){d.toast.error(t.label+(e||"")+"："+a.message)},showError:!1})}})});
;sugar.define("sugar:stores/condition-debug-data.ts",function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ConditionDebugData=void 0;var o=t("sugar:node_modules/tslib/tslib.js"),a=t("sugar:node_modules/mobx-state-tree/dist/mobx-state-tree.js"),n=t("sugar:stores/index.ts"),s=t("sugar:stores/helper.ts"),i=t("sugar:stores/condition-data.ts");e.ConditionDebugData=a.types.model("ConditionDebugData",{loadState:s.state,loadError:a.types.optional(a.types.frozen(),{}),data:a.types.optional(a.types.frozen(),null),other:a.types.optional(a.types.map(s.SweetDataUnit),{})}).actions(function(t){return{loadDebugData:s.asyncAction(t,{method:"post",reqUrlAndDataAndConfig:function(e){var o=n.getRoot(t),a=i.getReqUrlAndData(o.condition.list.data,o.condition.hubMap,e,"editor",void 0,void 0,void 0,!0);return a.reqData.isDebug="yes",a}}),loadDebugOtherData:s.asyncAction(t,{method:"post",state:function(e,a,n,s){void 0===s&&(s={}),t.other.set(n,o.__assign(o.__assign({},t.other.get(n)),{loadState:e}))},reqUrlAndDataAndConfig:function(e,o,a){if(void 0===a&&(a={}),"suggestion"===o){var s=n.getRoot(t).condition.getConditionHub(e.frontendId).value.value;a.searchStr="logic"===e.type?s&&s.vals?s.vals[0]:"":s}var d=n.getRoot(t),r=i.getReqUrlAndData(d.condition.list.data,d.condition.hubMap,e,"editor",o,a,void 0,!0);return r.reqData.isDebug="yes",r},success:function(e,a,n,s){void 0===s&&(s={}),t.other.set(n,o.__assign(o.__assign({},t.other.get(n)),{data:e.data}))}})}})});
;sugar.define("sugar:stores/condition-value.ts",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConditionValue=void 0;var o=e("sugar:node_modules/mobx-state-tree/dist/mobx-state-tree.js"),n=e("sugar:widgets/conditions/condition-manager.tsx");t.ConditionValue=o.types.model("ConditionValue",{value:o.types.optional(o.types.frozen(),null)}).actions(function(e){return{setValue:function(t){e.value=t},setValueByDeafaultVal:function(t,o,i,a,u){void 0===a&&(a=null),void 0===u&&(u=!1),e.value=n.defaultValOrUrlVal2view(o,t.type,t.config,i,a,u)}}})});
;sugar.define("sugar:stores/condition-hub.ts",function(t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.ConditionHubMap=n.ConditionHub=void 0;var o=t("sugar:node_modules/mobx-state-tree/dist/mobx-state-tree.js"),e=t("sugar:stores/condition-data.ts"),a=t("sugar:stores/condition-debug-data.ts"),i=t("sugar:stores/condition-value.ts"),d=t("sugar:node_modules/lodash/merge.js");n.ConditionHub=o.types.model("ConditionHub",{data:o.types.optional(e.ConditionData,{}),debugData:o.types.optional(a.ConditionDebugData,{}),configData:o.types.optional(o.types.frozen(),{}),value:o.types.optional(i.ConditionValue,{})}).actions(function(t){return{setConditionConfigData:function(n){t.configData=d({},t.configData,n)}}}),n.ConditionHubMap=o.types.model("ConditionHubMap",{mapByFrontendId:o.types.optional(o.types.map(n.ConditionHub),{})}).actions(function(t){return{clearConditionHub:function(){e.clearConditionDataCancelTokenMap(),t.mapByFrontendId.clear()},setEmptyHubByFrontendId:function(n){t.mapByFrontendId.set(n,{})},initializeAllDefaultVal:function(n){var o=window.location.search,e={};if(o.match(/conditions\=/))for(var a=o.split("&"),i=0;i<a.length;++i){var d=a[i].match(/\bconditions\=(.*)/);if(d){try{e=JSON.parse(decodeURIComponent(d[1]))}catch(s){e={}}break}}n.data.forEach(function(n){var o=null==e[n.key]?n.defaultVal:e[n.key],a=t.mapByFrontendId.get(n.frontendId);a||(t.setEmptyHubByFrontendId(n.frontendId),a=t.mapByFrontendId.get(n.frontendId)),a.value.setValueByDeafaultVal(n,o)})}}})});
;sugar.define("sugar:stores/condition.ts",function(t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.Condition=void 0;var n=t("sugar:node_modules/tslib/tslib.js"),e=t("sugar:utils/i18n.ts"),i=t("sugar:node_modules/mobx-state-tree/dist/mobx-state-tree.js"),d=t("sugar:stores/index.ts"),o=t("sugar:node_modules/amis/lib/index.js"),s=t("sugar:node_modules/lodash/merge.js"),r=t("sugar:utils/frontendId.ts"),l=t("sugar:utils/common-helper.ts"),u=t("sugar:widgets/conditions/condition-manager.tsx"),c=t("sugar:stores/condition-model.ts"),h=t("sugar:stores/condition-hub.ts"),p=t("sugar:services/condition-dependence.ts"),f=t("sugar:stores/chart.ts"),g=i.types.model("ConditionList",{data:i.types.optional(i.types.array(c.ConditionEntity),[])}).actions(function(t){return{add:function(a,i,o,l){void 0===o&&(o="report"),void 0===l&&(l=0);var c=r.generateId(),h=a.type,g=a.name,y=0,b=!1,m="",C="",v=!1,I=d.getRoot(t);if(t.data.forEach(function(t){if("container"===t.type&&(v=!0),t.key===h)b=!0;else if(t.type===h){var a=new RegExp("^"+h+"(\\d+)$"),n=t.key.match(a);n&&n[1]&&(y=Math.max(parseInt(n[1],10),y))}}),b?(m=""+h+(y+1),C=""+g+(y+1)):(m=h,C=g),"dashboard"!==o&&!v){var M="con_"+r.generateId(),x={hash:i,frontendId:M,type:"container",key:"container",label:e.default("过滤条件")};t.data.push(x),I.condition.getConditionHub(M)}var H={hash:i,frontendId:c,type:h,key:m,label:C};if(a.initialState&&(H=n.__assign(n.__assign({},H),a.initialState),window.sugarConfig.enableDataModel&&a.dataModelPanelShow&&("static"===a.initialState.dataType||"api"===a.initialState.dataType)&&(H.dataType="dataModel")),"dashboard"===o){H.dashboardHash=i,H.isDashCondition=1,H.zIndex=t.data.length>0||l?(l||t.data[0].zIndex)+1:50,a.initialDashboardState&&(H=s({},H,a.initialDashboardState)),H=u.mergeInitialState(H);var _=f.caclPositionOfNewChartInDashboard(t.data);H.left=_.left,H.top=_.top,t.data.unshift(H)}else H.reportHash=i,H.isDashCondition=0,t.data.push(H);return I.condition.getConditionHub(c),p.dependencyAnalysis(t.data),c},updateZIndex:function(a,n){t.data.replace(a),t.data.replace(a);for(var e=t.data.length-1;e>=0;e--)t.data[e].zIndex=n[e]},move:function(a,n){var e=t.data.slice(),i=e[a];e[a]=e[n],e[n]=i,t.data.replace(e)},"delete":function(a){t.data.splice(a,1),1===t.data.length&&"container"===t.data[0].type&&t.data.splice(0,t.data.length),p.dependencyAnalysis(t.data)},deleteList:function(){t.data.splice(0,t.data.length),p.dependencyAnalysis(t.data)},multiDelete:function(a){t.data=t.data.filter(function(t){return!~a.indexOf(t.frontendId)}),t.data[0]&&!t.data[0].isDashCondition&&p.dependencyAnalysis(t.data)},syncHashes:function(a){a.length!==t.data.length?o.toast.error(e.default("同步过滤条件的前后端数据错误")):a.forEach(function(a,n){t.data[n].hash=a.hash})},syncLayout:function(a){t.data.forEach(function(t){var n=a.find(function(a){return a.i===t.frontendId});n&&(t.left=n.x,t.top=n.y,t.width=n.w,t.height=n.h)})},setHeightLayout:function(a){t.data.forEach(function(t){"container"===t.type&&(t.height=a)})}}});a.Condition=i.types.model("condition",{list:i.types.optional(g,{}),hubMap:i.types.optional(h.ConditionHubMap,{})}).actions(function(t){return{initialize:function(a,n,e){void 0===e&&(e=0);var i=e?"dashboardHash":"reportHash";return t.list.data=u.mergeInitialState(l.addFiledToObjectArray(r.addFrontendId(a),i,n)),t.hubMap.clearConditionHub(),t.hubMap.initializeAllDefaultVal(t.list),p.dependencyAnalysis(t.list.data),t},getConditionHub:function(a){var n=t.hubMap.mapByFrontendId.get(a);return n||(t.hubMap.setEmptyHubByFrontendId(a),n=t.hubMap.mapByFrontendId.get(a)),n},updateConditionsModelChartConditionBindingsFromChart:function(a,n){t.list.data.forEach(function(t){return t.updateModelChartConditionBindings(a,n)})},updateConditionsModelChartConditionBindingsFromCondition:function(a,n){for(var e=p.getMyDependences(n),i=0,d=t.list.data;i<d.length;i++){var o=d[i];o.key!==n&&e&&e.includes(o.key)&&o.updateModelChartConditionBindings(a,void 0,n)}}}})});
;sugar.define("sugar:stores/editor.ts",function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Editor=void 0;var r=t("sugar:node_modules/tslib/tslib.js"),o=t("sugar:utils/i18n.ts"),a=t("sugar:node_modules/mobx-state-tree/dist/mobx-state-tree.js"),n=t("sugar:node_modules/mobx/lib/mobx.js"),i=t("sugar:stores/helper.ts"),d=t("sugar:node_modules/amis/lib/index.js"),s=t("sugar:widgets/progress.ts"),c=t("sugar:stores/index.ts"),l=t("sugar:utils/frontendId.ts"),u=t("sugar:node_modules/lodash/get.js"),p=a.types.model("reportEditorTarget",{frontendId:a.types.optional(a.types.string,""),type:a.types.optional(a.types.enumeration(["report","chart","condition","conditionList","dashboard","multiCharts"]),"report"),multiSelecting:a.types.optional(a.types.boolean,!1),loading:!1,loadingFrontendId:a.types.optional(a.types.string,"")}),f=a.types.model("editorLockAccess",{loadState:i.state,loadError:a.types.optional(a.types.frozen(),{}),lockState:a.types.optional(a.types.enumeration(["ok","otherTab"]),"otherTab")}).actions(function(t){return{load:i.asyncAction(t,{url:function(t,e){return void 0===e&&(e="report"),"/api/"+e+"/"+t+"/lock/access"},field:"lockState"}),grab:function(){t.lockState="ok"}}});e.Editor=a.types.model("reportEditor",{target:a.types.optional(p,{}),savingState:i.state,savingError:a.types.optional(a.types.frozen(),{}),hasModified:a.types.optional(a.types.boolean,!1),sid:a.types.optional(a.types.string,""),modifiedTime:a.types.optional(a.types.Date,new Date),lockSyncTime:a.types.optional(a.types.Date,new Date),lockAccess:a.types.optional(f,{})}).actions(function(t){return{initialize:function(e,r,o){void 0===o&&(o="report"),t.target.frontendId="";var a=c.getRoot(t);return"dashboard"===o?(t.target.type="dashboard",a.dashboard.current.load(e,r)):"report"===o?(t.target.type="report",a.report.current.load(e,r)):"dataModel"===o?a.dataModel.current.load(e,r):void 0},shareInitialize:function(e,o,a){return void 0===a&&(a="report"),r.__awaiter(this,void 0,void 0,function(){var n,i;return r.__generator(this,function(r){switch(r.label){case 0:return t.target.frontendId="",n=c.getRoot(t),"report"!==a?[3,2]:(t.target.type="report",[4,n.report.current.shareLoad(e,o)]);case 1:i=r.sent(),u(i,"res.data.charts")&&("pending"===n.dataModel.treeList.loadState||n.dataModel.treeList.data||n.dataModel.treeList.loadData(e)),r.label=2;case 2:return[2]}})})},setActiveTarget:function(e,r){void 0===r&&(r=""),(e!==t.target.type||r!==t.target.frontendId)&&(t.target.frontendId=r,t.target.type=e,t.target.loading=!0,t.target.loadingFrontendId=r,setTimeout(function(){t.closeActiveTargetLoading()},0))},closeActiveTargetLoading:function(){t.target.loadingFrontendId===t.target.frontendId&&t.target.loading&&(t.target.loading=!1)},selectAll:function(){var e=c.getRoot(t),r=e.chart.list.data.concat(e.condition.list.data).map(function(t){return t.frontendId});this.setActiveTarget("multiCharts",r.join(","))},setMultiSelecting:function(e){t.target.multiSelecting=e},addChart:function(e,r,o){void 0===r&&(r="report");var a=c.getRoot(t),n="report"===r||"explore"===r?a.report.current.data.hash:a.dashboard.current.data.hash,i=a.chart.list.add(e,n,r,o);this.setActiveTarget("chart",i)},deleteChart:function(e,r){void 0===r&&(r="report");var o=c.getRoot(t);o.chart.list.delete(e),t.target.frontendId="",t.target.type="dashboard"===r?"dashboard":"report"},deleteCharts:function(e){void 0===e&&(e=1);var r=c.getRoot(t);if(t.target.frontendId){switch(t.target.type){case"chart":r.chart.list.multiDelete(t.target.frontendId);break;case"condition":r.condition.list.multiDelete(t.target.frontendId);break;case"conditionList":r.condition.list.deleteList();break;case"multiCharts":r.chart.list.multiDelete(t.target.frontendId),r.condition.list.multiDelete(t.target.frontendId)}return t.target.frontendId="",t.target.type=e?"dashboard":"report",!0}return!1},copyChart:function(e,r){void 0===r&&(r="report");var o=c.getRoot(t),a=o.chart.list.copy(e);a?(t.target.frontendId=a,t.target.type="chart"):t.target.type="dashboard"===r?"dashboard":"report"},copyActiveChart:function(){if("chart"===t.target.type&&t.target.frontendId)for(var e=c.getRoot(t),r=0;r<e.chart.list.data.length;r++)if(e.chart.list.data[r].frontendId===t.target.frontendId){e.editor.copyChart(r,e.chart.list.data[r].isDashChart?"dashboard":"report");break}},cupToClipboard:function(t){this.copyToClipboard(t,!0)},copyToClipboard:function(e,r){if(("chart"===t.target.type||"multiCharts"===t.target.type)&&t.target.frontendId){var o=t.target.frontendId.split(",");if(e.clipboardData){for(var a=[],i=c.getRoot(t),d=i.chart.list.data,s=0,l=d;s<l.length;s++){var u=l[s];-1!=o.indexOf(u.frontendId)&&a.push(n.toJS(u))}r&&i.chart.list.multiDelete(o.join(",")),e.clipboardData.setData("text/plain",JSON.stringify(a)),e.preventDefault()}else console.warn("Unsupport clipboard")}},clipboardPaste:function(e){if(e.clipboardData){var r=e.clipboardData.getData("text/plain");if(r.startsWith('[{"'))try{var o=c.getRoot(t);r=JSON.parse(r);for(var a=0,n=r;a<n.length;a++){var i=n[a];o.chart.list.copy(-1,i)}}catch(d){console.warn("clipboard error",d)}}else console.warn("Unsupport clipboard")},addCondition:function(e,r,o){void 0===r&&(r="report");var a=c.getRoot(t),n="report"===r?a.report.current.data.hash:a.dashboard.current.data.hash,i=a.condition.list.add(e,n,r,o);t.target.frontendId=i,t.target.type="condition"},deleteCondition:function(e,r){void 0===r&&(r="report");var o=c.getRoot(t);o.condition.list.delete(e),t.target.frontendId="",t.target.type="dashboard"===r?"dashboard":"report"},deleteConditionList:function(){var e=c.getRoot(t);e.condition.list.deleteList(),t.target.frontendId="",t.target.type="report"},changeZIndex:function(e,r){var o=c.getRoot(t),a=o.condition.list.data.concat(o.chart.list.data);a.sort(function(t,e){return e.zIndex-t.zIndex});var n=a.slice(),i=n[e];n[e]=n[r],n[r]=i,this.updateZIndex(n)},changeZIndexByButton:function(e,r){var o=c.getRoot(t),a=o.condition.list.data.concat(o.chart.list.data);if(a.sort(function(t,e){return e.zIndex-t.zIndex}),r){for(var n=r.split(","),i=[],d=0,s=n;d<s.length;d++)for(var l=s[d],u=0;u<a.length;u++)if(a[u].frontendId===l){i.push(u);break}if(!i.length)return;var p=a.slice();if("up"===e){i=i.sort(function(t,e){return t-e});for(var f=-1,g=0,h=i;g<h.length;g++){var v=h[g];if(f>=v-1)f=v;else{var y=p[v];p[v]=p[v-1],p[v-1]=y,f=v-1}}}else if("down"===e){i=i.sort(function(t,e){return e-t});for(var f=p.length,b=0,m=i;b<m.length;b++){var v=m[b];if(v+1>=f)f=v;else{var y=p[v];p[v]=p[v+1],p[v+1]=y,f=v+1}}}else if("top"===e){i=i.sort(function(t,e){return e-t});for(var I=0,D=0,C=i;D<C.length;D++){var v=C[D],A=p.splice(v+I,1);A&&A[0]&&(p.splice(0,0,A[0]),I++)}}else if("bottom"===e){i=i.sort(function(t,e){return t-e});for(var I=0,k=0,x=i;k<x.length;k++){var v=x[k],A=p.splice(v-I,1);A&&A[0]&&(p.push(A[0]),I++)}}this.updateZIndex(p)}},updateZIndex:function(e){var r=c.getRoot(t),o=r.condition.list.data.concat(r.chart.list.data);o.sort(function(t,e){return e.zIndex-t.zIndex});for(var a=50,n=[],i=[],d=o.length-1;d>=0;d--)e[d].isDashChart?n.unshift(a++):i.unshift(a++);r.chart.list.updateZIndex(e.filter(function(t){return t.isDashChart}),n),r.condition.list.updateZIndex(e.filter(function(t){return t.isDashCondition}),i)},save:i.asyncAction(t,{state:"savingState",errField:"savingError",method:"put",reqUrlAndDataAndConfig:function(e,r,o){void 0===o&&(o="report");var a="/api/group/"+e+"/"+o+"/"+r;s.default.show();var n=c.getRoot(t),i={conditions:n.condition.list.data.toJSON(),charts:n.chart.list.data.toJSON()};return"dashboard"===o?i.dashboard=n.dashboard.current.data.toJSON():"report"===o?(n.report.current.setNewLayoutMode(),i.report=n.report.current.data.toJSON()):"dataModel"===o&&(i=n.dataModel.current.data.toJSON()),{url:a,reqData:i}},success:function(e,r,a,n){if(void 0===n&&(n="report"),t.savingState="done",s.default.hide(),d.toast.success(o.default("保存成功")),"report"===n||"dashboard"===n){var i=c.getRoot(t);i.condition.list.syncHashes(e.data.conditions),i.chart.list.syncHashes(e.data.charts),e.data.isDash?i.dashboard.list.updateDashboardNodeNameByCurrentDashboard():i.report.tree.updateReportNodeNameByCurrentReport()}else if("dataModel"===n){var i=c.getRoot(t);i.dataModel.detailMap.setDetail(a,e.data)}t.setModified(!1)},fail:function(){s.default.hide()}}),setModified:function(e){t.hasModified=e},updateModifiedTime:function(){t.modifiedTime=new Date},lock:i.asyncAction(t,{state:null,showError:!1,method:"post",reqUrlAndDataAndConfig:function(e,r){void 0===r&&(r="report");var o="/api/"+r+"/"+e+"/lock",a={sid:t.sid};return{url:o,reqData:a}},success:function(){t.lockSyncTime=new Date},fail:function(){d.toast.error(o.default("编辑锁定失败！"))}}),unlock:i.asyncAction(t,{state:null,showError:!1,method:"post",reqUrlAndDataAndConfig:function(e,r){void 0===r&&(r="report");var o="/api/"+r+"/"+e+"/unlock",a={sid:t.sid};return{url:o,reqData:a}},success:function(){t.lockSyncTime=new Date},fail:function(){d.toast.error(o.default("编辑锁解除失败！"))}}),isMyLock:i.asyncAction(t,{state:null,field:null,throwErr:!0,method:"post",reqUrlAndDataAndConfig:function(e,r){void 0===r&&(r="report");var o="/api/"+r+"/"+e+"/lock/isMy",a={sid:t.sid};return{url:o,reqData:a}}}),syncLock:i.asyncAction(t,{state:null,field:null,throwErr:!0,method:"post",reqUrlAndDataAndConfig:function(e,r){void 0===r&&(r="report");var o="/api/"+r+"/"+e+"/lock/sync",a={sid:t.sid};return{url:o,reqData:a}},success:function(){t.lockSyncTime=new Date}}),afterCreate:function(){t.sid=l.generateId(),t.hasModified=!1;var e=c.getRoot(t);a.onPatch(e,function(e){var r=e.path;c.UNDO_PATH_FILTER.test(r)&&!/^(\/scene\/current\/scene)/i.test(r)&&(t.setModified(!0),t.updateModifiedTime())})}}})});
;sugar.define("sugar:stores/dashboard.ts",function(t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.Dashboard=void 0;var e=t("sugar:node_modules/tslib/tslib.js"),o=t("sugar:utils/i18n.ts"),s=t("sugar:node_modules/mobx-state-tree/dist/mobx-state-tree.js"),i=t("sugar:stores/helper.ts"),r=t("sugar:node_modules/lodash/merge.js"),n=t("sugar:stores/index.ts"),d=t("sugar:node_modules/amis/lib/index.js"),c=t("sugar:stores/chart-data.ts"),p=t("sugar:utils/storage.ts"),l=t("sugar:node_modules/lodash/get.js"),u=t("sugar:utils/condition-helper.ts"),h=s.types.model("DashboardEntity",{hash:s.types.optional(s.types.identifier,""),name:s.types.optional(s.types.string,""),icon:s.types.optional(s.types.string,""),remark:s.types.optional(s.types.string,""),orderIndex:s.types.optional(s.types.number,0),isTemplet:s.types.optional(s.types.boolean,!1),imgUrl:s.types.optional(s.types.string,""),thumbImgUrl:s.types.optional(s.types.string,""),authType:s.types.optional(s.types.number,0),width:s.types.optional(s.types.string,"1920"),height:s.types.optional(s.types.string,"1080"),scaleType:s.types.optional(s.types.number,3),token:s.types.optional(s.types.string,""),isPublic:s.types.optional(s.types.boolean,!1),isPub:s.types.optional(s.types.boolean,!1),isDev:s.types.optional(s.types.boolean,!1),config:s.types.optional(s.types.frozen(),{}),groupKey:s.types.optional(s.types.string,""),companyKey:s.types.optional(s.types.string,"")}),g={backgroundType:0,backgroundUrl:"/static/img-templet/background-4.png",theme:"blue",grid:5,backgroundBlur:0,backgroundOpacity:10,backgroundColor:"rgba(0, 0, 0, 1)"},y=s.types.model("CurrentDashboard",{loadState:i.state,loadError:s.types.optional(s.types.frozen(),{}),needValidatePassword:s.types.optional(s.types.boolean,!1),sharePassword:s.types.optional(s.types.string,""),data:s.types.optional(h,{}),cacheTime:s.types.optional(s.types.number,0),systemTime:s.types.optional(s.types.number,0),wrongPassword:s.types.optional(s.types.boolean,!1),cache:s.types.optional(s.types.boolean,!1),canEdit:s.types.optional(s.types.boolean,!1)}).actions(function(t){return{load:i.asyncAction(t,{url:function(t,a){return"/api/group/"+t+"/dashboard/"+a+"/getDashboardWithChartsAndConditions"},success:function(a,e,o){t.data=a.data,t.data.config=r({},g,t.data.config);var s=n.getRoot(t);s.chartTheme.setTheme(t.data.config.theme,a.data.chartTheme),s.chart.initialize(a.data.charts||[],o,1),s.condition.initialize(a.data.conditions||[],o,1),s.editor.setModified(!1),t.canEdit=a.data.canEdit||!1,n.undoManager.clear()},fail:function(a,e,o){t.loadError=a;var s=n.getRoot(t);s.chart.initialize([],o,1),s.condition.initialize([],o,1)},showError:!1}),loadSlient:function(a){t.data=a},loadSelfDashboard:i.asyncAction(t,{url:function(t){return"/api/self/dashboard/"+t+"/getDashboardWithChartsAndConditions"},success:function(a){t.data=a.data;var e=a.data.hash;t.data.config=r({},g,t.data.config);var o=n.getRoot(t);o.chartTheme.setTheme(t.data.config.theme,a.data.chartTheme),o.chart.initialize(a.data.charts||[],e,1),o.condition.initialize(a.data.conditions||[],e,1),n.undoManager.clear()},fail:function(a){t.loadError=a;var e=n.getRoot(t);e.chart.initialize([],"",1),e.condition.initialize([],"",1)},showError:!1}),setSharePassword:function(a,e){t.cache=!!e,t.sharePassword=a},shareLoad:i.asyncAction(t,{url:function(a){var e="/api/dashboardShare/"+a+"/getDashboardShare",o=[];t.sharePassword&&o.push("p="+t.sharePassword);var s=c.getPasswordFreeHost();s&&o.push("o="+s);var i=window.location.href.split("?")[1]&&window.location.href.split("?")[1].split("&")||[];return i.length&&(o=o.concat(i)),o.length&&(e+="?"+o.join("&")),e},success:function(a,e){if(a.data.needPassword)t.needValidatePassword=!0,a.data.wrongPassword?(t.wrongPassword=!0,t.cache||d.toast.error(o.default("密码错误！"))):(t.data=a.data,t.cacheTime=a.data.cacheTime||0,t.systemTime=a.data.systemTime||0);else{t.data=a.data;var s=a.data,i=s.cacheTime,c=s.password,u=p.get("share_pw")||{},h=l(u,"["+e+"].password"),y=l(u,"["+e+"].cacheTime");(!c&&h||!i)&&(delete u[e],p.put("share_pw",u)),i&&c&&(h!==c||y!==i)&&(u[e]={password:c,time:+new Date,cacheTime:i},p.put("share_pw",u)),t.data.config=r({},g,t.data.config);var m=n.getRoot(t);m.chartTheme.setTheme(t.data.config.theme,a.data.chartTheme),m.chart.initialize(a.data.charts||[],t.data.hash,1),m.condition.initialize(a.data.conditions||[],t.data.hash,1),m.editor.setModified(!1),t.needValidatePassword=!1}},fail:function(a){t.loadError=a;var e=n.getRoot(t);e.chart.initialize([],"",1),e.condition.initialize([],"",1)},showError:!1}),update:function(a,o){for(var s in o){var i=o[s];switch(s){case"name":case"remark":case"isPublic":case"isPub":case"isDev":case"isTemplet":case"imgUrl":case"thumbImgUrl":case"scaleType":t.data[s]=i;break;case"config":if(null==t.data.config.wrOpen&&a.config.wrOpen){var r=e.__assign(e.__assign({},a.config),{wrType:"email",wrColor:"#fff",wrAlpha:.12,wrFontsize:18,wrWidth:210,wrXspace:50,wrYspace:50});t.data.config=r}else t.data.config=a.config;break;case"width":case"height":t.data[s]=i+""}}},refreshAllChartsData:function(a){var e=n.getRoot(t),o=u.areConditionsValidate(e.condition.list.data,e.condition.hubMap);if(o!==!0)return void o.forEach(function(t){d.toast.error(t)});var s=u.getConditionsKTV(e.condition.list.data,e.condition.hubMap);e.chart.list.data.forEach(function(t){t.loadData(a,!0,s)}),u.setConditionsKTV2Url(s),u.setConditionsKTV2Url(s)}}}),m=s.types.model("DashboardList",{loadState:i.state,addState:i.state,updateState:i.state,deleteState:i.state,loadError:s.types.optional(s.types.frozen(),{}),data:s.types.optional(s.types.array(h),[])}).actions(function(t){return{load:i.asyncAction(t,{url:function(t){return"/api/group/"+t+"/dashboard"},fail:[]}),add:i.asyncAction(t,{state:"addState",method:"post",url:function(t){return"/api/manage/group/"+t+"/dashboard"},reqData:function(t,a){return a},success:function(a){t.data.push(a.data)},throwErr:!0}),update:i.asyncAction(t,{state:"updateState",method:"put",url:function(t,a){return"/api/manage/group/"+t+"/dashboard/"+a.hash},reqData:function(t,a){return a},throwErr:!0}),"delete":i.asyncAction(t,{state:"deleteState",method:"remove",url:function(t,a){return"/api/manage/group/"+t+"/dashboard/"+a.hash},reqData:function(t,a){return a},throwErr:!0}),updateOrder:i.asyncAction(t,{state:"updateState",method:"put",url:function(t){return"/api/manage/group/"+t+"/dashboard/updateOrder"},reqData:function(t,a){return a},throwErr:!0}),multiDelete:i.asyncAction(t,{state:"deleteState",method:"put",url:function(t){return"/api/manage/group/"+t+"/dashboard/multiDelete"},reqData:function(t,a){return a},throwErr:!0}),updateDashboardNodeNameByCurrentDashboard:function(){for(var a=n.getRoot(t),e=a.dashboard.current.data.toJSON(),o=0,s=t.data;o<s.length;o++){var i=s[o];if(i.hash===e.hash){i.name=e.name,i.remark=e.remark,i.isTemplet=e.isTemplet,i.imgUrl=e.imgUrl,i.thumbImgUrl=e.thumbImgUrl,i.width=e.width,i.height=e.height,i.scaleType=e.scaleType,i.isPublic=e.isPublic,i.isPub=e.isPub,i.isDev=e.isDev,i.config=e.config;break}}}}});a.Dashboard=s.types.model("Dashboard",{current:s.types.optional(y,{}),list:s.types.optional(m,{})})});
;sugar.define("sugar:stores/self-report.ts",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SelfReport=void 0;var s=e("sugar:node_modules/mobx-state-tree/dist/mobx-state-tree.js"),o=e("sugar:stores/helper.ts"),r=s.types.model("SelfReportEntity",{hash:s.types.optional(s.types.identifier,""),hierarchyLevel:s.types.optional(s.types.number,0),orderIndex:s.types.optional(s.types.number,0),reportHash:s.types.optional(s.types.string,""),name:s.types.optional(s.types.string,""),remark:s.types.optional(s.types.string,""),type:s.types.optional(s.types.number,0),icon:s.types.optional(s.types.string,""),children:s.types.optional(s.types.array(s.types.late(function(){return r})),[])}),p=s.types.model("SelfReportTree",{loadState:o.state,addState:o.state,updateState:o.state,deleteState:o.state,loadError:s.types.optional(s.types.frozen(),{}),data:s.types.optional(s.types.array(r),[])}).actions(function(e){return{load:o.asyncAction(e,{url:function(){return"/api/self/report/getTree"},fail:[]})}});t.SelfReport=s.types.model("Self",{tree:s.types.optional(p,{})})});
;sugar.define("sugar:stores/self-dashboard.ts",function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SelfDashboard=void 0;var a=t("sugar:node_modules/mobx-state-tree/dist/mobx-state-tree.js"),s=t("sugar:stores/helper.ts"),o=a.types.model("SelfReportEntity",{hash:a.types.optional(a.types.identifier,""),orderIndex:a.types.optional(a.types.number,0),dashboardHash:a.types.optional(a.types.string,""),name:a.types.optional(a.types.string,""),remark:a.types.optional(a.types.string,""),type:a.types.optional(a.types.number,0),icon:a.types.optional(a.types.string,"")}),r=a.types.model("SelfDashboardList",{loadState:s.state,addState:s.state,updateState:s.state,deleteState:s.state,loadError:a.types.optional(a.types.frozen(),{}),data:a.types.optional(a.types.array(o),[])}).actions(function(t){return{load:s.asyncAction(t,{url:function(){return"/api/self/dashboard/getList"},fail:[]}),collect:s.asyncAction(t,{state:"addState",method:"post",url:function(){return"/api/self/dashboard"},reqData:function(t){return{dashboardHash:t}},success:function(e){t.data.push(e.data)}}),abandon:s.asyncAction(t,{state:"deleteState",method:"remove",url:function(t){return"/api/self/dashboard/"+t},success:function(e,a){for(var s=-1,o=0;o<t.data.length;o++)if(t.data[o].hash===a){s=o;break}-1!==s&&t.data.splice(s,1)}})}});e.SelfDashboard=a.types.model("SelfDashboard",{list:a.types.optional(r,{})})});
;sugar.define("sugar:stores/database-table.ts",function(a,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DatabaseTables=t.DataTableEntity=void 0;var e=a("sugar:node_modules/tslib/tslib.js"),s=a("sugar:node_modules/mobx-state-tree/dist/mobx-state-tree.js"),o=a("sugar:stores/index.ts"),n=a("sugar:stores/helper.ts");t.DataTableEntity=s.types.model("DataTableEntity",{name:s.types.optional(s.types.string,""),databaseHash:s.types.optional(s.types.string,""),homoId:s.types.optional(s.types.string,"")}),t.DatabaseTables=s.types.model("DatabaseTables",{databaseHash:s.types.string,homoId:s.types.optional(s.types.string,""),loadState:n.state,loadError:s.types.optional(s.types.frozen(),{}),data:s.types.optional(s.types.array(t.DataTableEntity),[])}).actions(function(a){return{loadTables:n.asyncAction(a,{url:function(){var t=o.getRoot(a),e=t.group.current.data.hash;return"/api/group/"+e+"/database/"+a.databaseHash+"/getTableList"},success:function(t){var e=t.data.map(function(t){return{name:t.value||t.label||t.name||"",databaseHash:a.databaseHash,homoId:""}});a.data=s.cast(e)}}),loadHomologousTables:n.asyncAction(a,{reqUrlAndDataAndConfig:function(t){var s=o.getRoot(a),n=s.group.current.data.hash;return{url:"/api/group/"+n+"/database/"+a.databaseHash+"/getTableList",reqData:{},reqConfig:{params:e.__assign(e.__assign({},t.config),{homoId:a.homoId})}}},success:function(t){var e=t.data.map(function(t){return{name:t.value||t.label||t.name||"",databaseHash:a.databaseHash,homoId:a.homoId}});a.data=s.cast(e)}})}})});
;sugar.define("sugar:stores/database-table-schema.ts",function(a,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DatabaseTableSchema=t.TableColumnSchemaEntity=void 0;var e=a("sugar:node_modules/tslib/tslib.js"),s=a("sugar:node_modules/mobx-state-tree/dist/mobx-state-tree.js"),o=a("sugar:stores/index.ts"),n=a("sugar:stores/helper.ts");t.TableColumnSchemaEntity=s.types.model("TableColumnSchemaEntity",{id:s.types.string,name:s.types.string,type:s.types.optional(s.types.enumeration(["string","int","float","date","datetime","timestamp"]),"string"),typeInDB:s.types.string,comment:s.types.string}),t.DatabaseTableSchema=s.types.model("DatabaseTableSchema",{databaseHash:s.types.string,homoId:s.types.optional(s.types.string,""),table:s.types.string,loadState:n.state,loadError:s.types.optional(s.types.frozen(),{}),data:s.types.optional(s.types.array(t.TableColumnSchemaEntity),[])}).actions(function(a){return{loadTableSchema:n.asyncAction(a,{url:function(){var t=o.getRoot(a),e=t.group.current.data.hash,s=t.dataModel.current.data.hash;return"/api/group/"+e+"/database/"+a.databaseHash+"/getTableSchema?table="+a.table+"&datamodelHash="+s},success:function(t){a.data=s.cast(t.data)}}),loadHomologousTableSchema:n.asyncAction(a,{reqUrlAndDataAndConfig:function(t){var s=o.getRoot(a),n=s.group.current.data.hash;return{url:"/api/group/"+n+"/database/"+a.databaseHash+"/getTableSchema",reqData:{},reqConfig:{params:e.__assign(e.__assign({},t.config),{homoId:a.homoId,table:a.table})}}},success:function(t){a.data=s.cast(t.data)}})}})});
;sugar.define("sugar:stores/database-entity.ts",function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=t("sugar:node_modules/mobx-state-tree/dist/mobx-state-tree.js"),n=s.types.model("DatabaseEntity",{hash:s.types.optional(s.types.identifier,""),name:s.types.optional(s.types.string,""),remark:s.types.optional(s.types.string,""),type:s.types.optional(s.types.integer,0),database:s.types.optional(s.types.string,""),host:s.types.optional(s.types.string,""),port:s.types.optional(s.types.string,""),username:s.types.optional(s.types.string,""),password:s.types.optional(s.types.string,"***"),config:s.types.optional(s.types.frozen(),{}),federatedOpen:s.types.optional(s.types.number,0),federatedState:s.types.optional(s.types.number,0)}).actions(function(t){return{rename:function(e){t.name=e}}});e.default=n});
;sugar.define("sugar:stores/database-current.ts",function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=t("sugar:node_modules/mobx-state-tree/dist/mobx-state-tree.js"),s=t("sugar:stores/helper.ts"),r=t("sugar:stores/database-entity.ts"),o=a.types.model("CurrentDatabase",{loadState:s.state,loadError:a.types.optional(a.types.frozen(),{}),data:a.types.optional(r.default,{})}).actions(function(t){return{load:s.asyncAction(t,{url:function(t,e){return"/api/group/"+t+"/database/"+e}}),destory:function(){t.data={}}}});e.default=o});
;sugar.define("sugar:stores/database.ts",function(e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.Database=void 0;var t=e("sugar:node_modules/mobx-state-tree/dist/mobx-state-tree.js"),s=e("sugar:stores/index.ts"),o=e("sugar:stores/helper.ts"),r=e("sugar:stores/database-table.ts"),l=e("sugar:stores/database-table-schema.ts"),n=e("sugar:stores/database-current.ts"),b=e("sugar:node_modules/lodash/cloneDeep.js"),u=t.types.model("DatabaseSimpleList",{loadState:o.state,loadError:t.types.optional(t.types.frozen(),{}),data:t.types.optional(t.types.frozen(),null),dataMapByHash:t.types.map(t.types.frozen())}).actions(function(e){return{loadData:o.asyncAction(e,{url:function(){var a=s.getRoot(e),t=a.group.current.data.hash;return"/api/group/"+t+"/database/simpleList"},success:function(a){var t=b(a.data);e.data=a.data,t.forEach(function(a){return e.dataMapByHash.set(a.hash,a)})}})}});a.Database=t.types.model("Database",{simpleList:t.types.optional(u,{}),current:t.types.optional(n.default,{}),tablesMap:t.types.map(r.DatabaseTables),tableSchema:t.types.map(t.types.map(l.DatabaseTableSchema))}).actions(function(e){return{loadDbTables:function(a){var t=e.tablesMap.get(a);t||(e.tablesMap.set(a,{databaseHash:a}),t=e.tablesMap.get(a)),t.loadTables()},loadDbHomologousTables:function(a,t){var s=t.homoId,o=a+"-"+s,r=e.tablesMap.get(o);r||(e.tablesMap.set(o,{databaseHash:a,homoId:s}),r=e.tablesMap.get(o)),r.loadHomologousTables(t)},loadTableSchema:function(a,t){var s=e.tableSchema.get(a);s||(e.tableSchema.set(a,{}),s=e.tableSchema.get(a));var o=s.get(t);return o||(s.set(t,{databaseHash:a,table:t}),o=s.get(t)),o.loadTableSchema()},loadHomologousTableSchema:function(a,t,s){var o=t.homoId,r=a+"-"+o,l=e.tableSchema.get(r);l||(e.tableSchema.set(r,{}),l=e.tableSchema.get(r));var n=l.get(s);return n||(l.set(s,{databaseHash:a,homoId:o,table:s}),n=l.get(s)),n.loadHomologousTableSchema(t)},getTableSchema:function(a,t,s){if(s){var o=s.homoId,r=a+"-"+o,l=e.tableSchema.get(r);return l&&l.get(t)||e.loadHomologousTableSchema(a,s,t),e.tableSchema.get(r).get(t)}var l=e.tableSchema.get(a);return l&&l.get(t)||e.loadTableSchema(a,t),e.tableSchema.get(a).get(t)}}});var c=e("sugar:stores/database-table.ts");Object.defineProperty(a,"IDataTableEntity",{enumerable:!0,get:function(){return c.IDataTableEntity}}),Object.defineProperty(a,"SDataTableEntity",{enumerable:!0,get:function(){return c.SDataTableEntity}}),Object.defineProperty(a,"IDatabaseTables",{enumerable:!0,get:function(){return c.IDatabaseTables}});var m=e("sugar:stores/database-table-schema.ts");Object.defineProperty(a,"ITableColumnSchemaEntity",{enumerable:!0,get:function(){return m.ITableColumnSchemaEntity}}),Object.defineProperty(a,"STableColumnSchemaEntity",{enumerable:!0,get:function(){return m.STableColumnSchemaEntity}}),Object.defineProperty(a,"IDatabaseTableSchema",{enumerable:!0,get:function(){return m.IDatabaseTableSchema}})});
;sugar.define("sugar:stores/sql-model.ts",function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SqlModel=void 0;var a=t("sugar:node_modules/mobx-state-tree/dist/mobx-state-tree.js"),s=t("sugar:stores/index.ts"),o=t("sugar:stores/helper.ts"),n=a.types.model("SqlModelEntity",{hash:a.types.optional(a.types.identifier,""),databaseHash:a.types.optional(a.types.string,""),name:a.types.optional(a.types.string,""),remark:a.types.optional(a.types.string,""),sql:a.types.optional(a.types.string,""),config:a.types.optional(a.types.frozen(),{})}),r=a.types.model("SqlModelSimpleList",{loadState:o.state,loadError:a.types.optional(a.types.frozen(),{}),data:a.types.optional(a.types.frozen(),null)}).actions(function(t){return{loadData:o.asyncAction(t,{url:function(){var e=s.getRoot(t),a=e.group.current.data.hash;return"/api/group/"+a+"/sqlModel/simpleList"}})}}),p=a.types.model("sqlModelDetailMap",{mapByHash:a.types.optional(a.types.map(n),{})}).actions(function(t){return{loadDetail:o.asyncAction(t,{url:function(e){var a=s.getRoot(t),o=a.group.current.data.hash;return"/api/group/"+o+"/sqlModel/"+e},success:function(e,a){t.mapByHash.set(a,e.data)}})}});e.SqlModel=a.types.model("SqlModel",{simpleList:a.types.optional(r,{}),detailMap:a.types.optional(p,{})}).actions(function(t){return{update:o.asyncAction(t,{method:"put",url:function(e){var a=s.getRoot(t),o=a.group.current.data.hash;return"/api/group/"+o+"/sqlModel/"+e.hash},reqData:function(t){return t},success:function(e){t.detailMap.mapByHash.set(e.data.hash,e.data),t.simpleList.loadData()}}),add:o.asyncAction(t,{method:"post",url:function(){var e=s.getRoot(t),a=e.group.current.data.hash;return"/api/group/"+a+"/sqlModel"},reqData:function(t){return t},success:function(e){t.detailMap.mapByHash.set(e.data.hash,e.data),t.simpleList.loadData()}})}})});
;sugar.define("sugar:stores/api-adaptor.ts",function(t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.ApiAdaptor=void 0;var e=t("sugar:node_modules/mobx-state-tree/dist/mobx-state-tree.js"),o=t("sugar:stores/index.ts"),s=t("sugar:stores/helper.ts"),p=e.types.model("ApiAdaptorEntity",{hash:e.types.optional(e.types.identifier,""),name:e.types.optional(e.types.string,""),content:e.types.optional(e.types.string,"")}),r=e.types.model("ApiAdaptorSimpleList",{loadState:s.state,loadError:e.types.optional(e.types.frozen(),{}),data:e.types.optional(e.types.frozen(),null)}).actions(function(t){return{loadData:s.asyncAction(t,{url:function(){var a=o.getRoot(t),e=a.group.current.data.hash;return"/api/group/"+e+"/apiAdaptor/simpleList"}})}}),n=e.types.model("apiAdaptorDetailMap",{mapByHash:e.types.optional(e.types.map(p),{})}).actions(function(t){return{loadDetail:s.asyncAction(t,{url:function(a){var e=o.getRoot(t),s=e.group.current.data.hash;return"/api/group/"+s+"/apiAdaptor/"+a},success:function(a,e){t.mapByHash.set(e,a.data)}})}});a.ApiAdaptor=e.types.model("ApiAdaptor",{simpleList:e.types.optional(r,{}),detailMap:e.types.optional(n,{})}).actions(function(t){return{update:s.asyncAction(t,{method:"put",url:function(a){var e=o.getRoot(t),s=e.group.current.data.hash;return"/api/group/"+s+"/apiAdaptor/"+a.hash},reqData:function(t){return t},success:function(a){t.detailMap.mapByHash.set(a.data.hash,a.data),t.simpleList.loadData()}}),add:s.asyncAction(t,{method:"post",url:function(){var a=o.getRoot(t),e=a.group.current.data.hash;return"/api/group/"+e+"/apiAdaptor"},reqData:function(t){return t},success:function(a){t.detailMap.mapByHash.set(a.data.hash,a.data),t.simpleList.loadData()}})}})});
;sugar.define("sugar:stores/rename-lib.ts",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RenameLib=void 0;var a=e("sugar:node_modules/mobx-state-tree/dist/mobx-state-tree.js"),s=e("sugar:stores/index.ts"),n=e("sugar:stores/helper.ts"),o=a.types.model("RenameLibEntity",{hash:a.types.optional(a.types.identifier,""),name:a.types.optional(a.types.string,""),remark:a.types.optional(a.types.string,""),renameLib:a.types.optional(a.types.frozen(),{})}),i=a.types.model("RenameLibSimpleList",{loadState:n.state,loadError:a.types.optional(a.types.frozen(),{}),data:a.types.optional(a.types.frozen(),null)}).actions(function(e){return{loadData:n.asyncAction(e,{url:function(){var t=s.getRoot(e),a=t.group.current.data.hash;return"/api/group/"+a+"/renameLib/simpleList"}})}}),r=a.types.model("RenameLibDetailMap",{mapByHash:a.types.optional(a.types.map(o),{})}).actions(function(e){return{loadDetail:n.asyncAction(e,{url:function(t){var a=s.getRoot(e),n=a.group.current.data.hash;return"/api/group/"+n+"/renameLib/"+t},success:function(t,a){e.mapByHash.set(a,t.data)}})}});t.RenameLib=a.types.model("RenameLib",{simpleList:a.types.optional(i,{}),detailMap:a.types.optional(r,{})}).actions(function(){return{}})});
;sugar.define("sugar:stores/data-model/data-model-entity.ts",function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=t("sugar:node_modules/mobx-state-tree/dist/mobx-state-tree.js"),n=t("sugar:stores/data-model/dm-schema.ts"),o=s.types.model("DataModelEntity",{hash:s.types.optional(s.types.identifier,""),name:s.types.optional(s.types.string,""),remark:s.types.optional(s.types.string,""),config:s.types.optional(n.default,{}),sugQuestion:s.types.optional(s.types.string,""),nlpOpen:s.types.optional(s.types.number,0),nlpState:s.types.optional(s.types.number,0),currentUserCanEdit:s.types.optional(s.types.boolean,!1)}).actions(function(t){return{rename:function(e){t.name=e}}});e.default=o});
;sugar.define("sugar:stores/data-model/data-model-current.ts",function(t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var e=t("sugar:node_modules/mobx-state-tree/dist/mobx-state-tree.js"),o=t("sugar:stores/index.ts"),r=t("sugar:stores/helper.ts"),s=t("sugar:stores/data-model/data-model-entity.ts"),n=e.types.model("CurrentDataModel",{loadState:r.state,loadError:e.types.optional(e.types.frozen(),{}),data:e.types.optional(s.default,{}),canEdit:e.types.optional(e.types.boolean,!1)}).actions(function(t){return{load:r.asyncAction(t,{url:function(t,a){return"/api/group/"+t+"/dataModel/"+a},success:function(a){t.data=a.data;var e=o.getRoot(t);e.editor.setModified(!1)},fail:function(a){t.loadError=a},showError:!1}),synTable:r.asyncAction(t,{showError:!1,method:"post",reqUrlAndDataAndConfig:function(a,e){var o="/api/group/"+a+"/dataModel/"+e+"/syncStructure",r=t.data.toJSON();return{url:o,reqData:r}},success:function(a){t.data.config=a.data.config},fail:function(a){t.loadError=a}})}});a.default=n});
;sugar.define("sugar:stores/data-model/data-model-detail-map.ts",function(a,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var e=a("sugar:node_modules/mobx-state-tree/dist/mobx-state-tree.js"),r=a("sugar:stores/index.ts"),o=a("sugar:stores/helper.ts"),s=a("sugar:stores/data-model/data-model-entity.ts"),d=a("sugar:stores/data-model/data-model-tree-list.ts"),n=e.types.model("DataModelDetailMap",{mapByHash:e.types.optional(e.types.map(s.default),{})}).actions(function(a){return{loadDetail:o.asyncAction(a,{url:function(t){var e=r.getRoot(a),o=e.group.current.data.hash,s="/api/group/"+o+"/dataModel/"+t;if(/^\/(explore)\//i.test(window.location.pathname)){var n=e.report.current.data;s="/api/reportShare/"+n.token+"/explore/"+n.hash+"/getDataModel/"+t;var i=d.getShareParams(e.report.current);return i&&(s=s+"?"+i),s}if(/^\/(dashboard)\//i.test(window.location.pathname)){var u=e.dashboard.current.data;s="/api/dashboardShare/"+u.token+"/dashboard/"+u.hash+"/getDataModel/"+t;var i=d.getShareParams(e.dashboard.current);return i&&(s=s+"?"+i),s}if("explore"===e.assist.currentPageType&&e.report.current.data&&3===e.report.current.data.type){var n=e.report.current.data;return s+="?exploreReportHash="+n.hash}return/^\/group\/[\S]*\/dashboard\//i.test(window.location.pathname)&&!/\/edit\//g.test(window.location.pathname)||/^\/i\/dashboard\//i.test(window.location.pathname)?s+="?dashboardHash="+e.dashboard.current.data.hash:s},success:function(t,e){a.mapByHash.set(e,t.data)}}),setDetail:function(t,e){a.mapByHash.set(t,e)}}});t.default=n});
;sugar.define("sugar:stores/data-model/data-model-current-data.ts",function(t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var e=t("sugar:node_modules/mobx-state-tree/dist/mobx-state-tree.js"),s=t("sugar:stores/helper.ts"),o=e.types.model("CurrentDataModelData",{loadState:s.state,loadError:e.types.optional(e.types.frozen(),{}),data:e.types.optional(e.types.frozen(),null),sql:e.types.optional(e.types.string,"")}).actions(function(t){return{load:s.asyncAction(t,{url:function(t,a){return"/api/group/"+t+"/dataModel/"+a+"/getViewData"},success:function(a){t.data=a.data.data,t.sql=a.data.sql},fail:function(a){t.loadError=a,t.sql=a.data&&a.data.data&&a.data.data.sql?a.data.data.sql:""}}),clear:function(){t.loadState="done",t.data=null,t.sql=""}}});a.default=o});
;sugar.define("sugar:stores/data-model/dm-schema-filters.ts",function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});{var s=t("sugar:node_modules/mobx-state-tree/dist/mobx-state-tree.js"),a=s.types.model("dateDetail",{maxDate:s.types.optional(s.types.string,""),minDate:s.types.optional(s.types.string,"")}),p=s.types.model("date",{value:s.types.optional(s.types.string,""),detail:s.types.optional(a,{})}),o=s.types.model("listMatch",{mode:s.types.optional(s.types.enumeration(["list","manual"]),"list"),select:s.types.optional(s.types.array(s.types.string),[]),list:s.types.optional(s.types.array(s.types.string),[]),manual:s.types.optional(s.types.array(s.types.string),[])}),n=s.types.model("textMatchValue",{type:s.types.optional(s.types.enumeration(["include","start","end","notIncluded","equal",""]),""),value:s.types.optional(s.types.string,"")}),i=s.types.model("textMatch",{operator:s.types.optional(s.types.enumeration(["AND","OR"]),"AND"),value:s.types.optional(s.types.array(n),[])}),l=s.types.model("searchParams",{type:s.types.optional(s.types.enumeration(["string","int","float","date","datetime","timestamp"]),"string"),textMatch:s.types.optional(i,{}),listMatch:s.types.optional(o,{}),date:s.types.optional(p,{})}),y=s.types.model("DataModelSchemaFilter",{type:s.types.optional(s.types.enumeration(["d","m",""]),""),id:s.types.optional(s.types.string,""),searchParams:s.types.optional(l,{})});s.types.model("DataModelSchemaFilterTree",{connect:s.types.optional(s.types.enumeration(["AND","OR"]),"AND"),exprs:s.types.optional(s.types.frozen(),[])})}e.default=y});
;sugar.define("sugar:stores/data-model/dm-schema-limits.ts",function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=t("sugar:node_modules/mobx-state-tree/dist/mobx-state-tree.js"),i=s.types.model("FixedLimitItem",{mode:s.types.optional(s.types.enumeration(["list","manual"]),"list"),dimId:s.types.optional(s.types.string,""),list:s.types.optional(s.types.array(s.types.string),[]),manual:s.types.optional(s.types.array(s.types.string),[])}),a=s.types.model("DynamicLimitItem",{dimId:s.types.optional(s.types.string,""),userAttr:s.types.optional(s.types.string,"")}),o=s.types.model("FixedLimits",{name:s.types.optional(s.types.string,""),rule:s.types.optional(s.types.enumeration(["AND","OR"]),"AND"),contents:s.types.optional(s.types.array(i),[]),limitUsers:s.types.optional(s.types.array(s.types.string),[]),limitRoles:s.types.optional(s.types.array(s.types.string),[])}),p=s.types.model("DataModelSchemaLimits",{method:s.types.optional(s.types.enumeration(["fixed","dynamic"]),"fixed"),fixedLimits:s.types.optional(s.types.array(o),[]),othersLimit:s.types.optional(s.types.boolean,!1),dynamicLimits:s.types.optional(s.types.array(a),[]),dynamicLimitRule:s.types.optional(s.types.enumeration(["AND","OR"]),"AND")});e.default=p});
;sugar.define("sugar:stores/data-model/data-model.ts",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DataModel=void 0;var a=e("sugar:node_modules/mobx-state-tree/dist/mobx-state-tree.js"),o=e("sugar:stores/data-model/data-model-tree-list.ts"),s=e("sugar:stores/data-model/data-model-current.ts"),r=e("sugar:stores/data-model/data-model-detail-map.ts"),d=e("sugar:stores/data-model/data-model-current-data.ts"),l=a.types.model("DataModelLastSelected",{byGroupHash:a.types.optional(a.types.map(a.types.string),{})}).actions(function(e){return{get:function(){var t=a.getRoot(e),o=t.group.current.data.hash;return e.byGroupHash.get(o)},set:function(t){var o=a.getRoot(e),s=o.group.current.data.hash;e.byGroupHash.set(s,t)}}});t.DataModel=a.types.model("DataModel",{treeList:a.types.optional(o.default,{}),detailMap:a.types.optional(r.default,{}),lastSelected:a.types.optional(l,{}),current:a.types.optional(s.default,{}),currentData:a.types.optional(d.default,{})});var u=e("sugar:stores/data-model/dm-schema-menu.ts");Object.defineProperty(t,"IDataModelSchemaMenu",{enumerable:!0,get:function(){return u.IDataModelSchemaMenu}});var n=e("sugar:stores/data-model/dm-schema-filters.ts");Object.defineProperty(t,"IDataModelSchemaFilter",{enumerable:!0,get:function(){return n.IDataModelSchemaFilter}});var m=e("sugar:stores/data-model/dm-schema-limits.ts");Object.defineProperty(t,"IDataModelSchemaLimits",{enumerable:!0,get:function(){return m.IDataModelSchemaLimits}})});
;sugar.define("sugar:stores/html.ts",function(t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.Html=void 0;var e=t("sugar:node_modules/mobx-state-tree/dist/mobx-state-tree.js"),s=t("sugar:stores/index.ts"),o=t("sugar:stores/helper.ts"),n=e.types.model("HtmlEntity",{hash:e.types.optional(e.types.string,""),content:e.types.optional(e.types.string,"")}),r=e.types.model("HtmlDetailMap",{mapByHash:e.types.optional(e.types.map(n),{})}).actions(function(t){return{loadDetail:o.asyncAction(t,{url:function(a){var e=s.getRoot(t),o=e.group.current.data.hash;return"/api/group/"+o+"/html/"+a},success:function(a,e){t.mapByHash.set(e,a.data)}})}});a.Html=e.types.model("Html",{detailMap:e.types.optional(r,{})}).actions(function(t){return{add:o.asyncAction(t,{method:"post",reqData:function(t){return t},url:function(){var a=s.getRoot(t),e=a.group.current.data.hash;return"/api/group/"+e+"/html"},success:function(a){t.detailMap.mapByHash.set(a.data.hash,a.data)},fail:function(){}}),update:o.asyncAction(t,{method:"put",state:"saveState",errField:"saveError",reqData:function(t){return t},url:function(a){var e=s.getRoot(t),o=e.group.current.data.hash;return"/api/group/"+o+"/html/"+a.hash},success:function(a){t.detailMap.mapByHash.set(a.data.hash,a.data)},fail:function(){}}),copy:o.asyncAction(t,{method:"get",url:function(a){var e=s.getRoot(t),o=e.group.current.data.hash;return"/api/group/"+o+"/html/"+a+"/copy"},success:function(t){return t.data}})}})});
;sugar.define("sugar:stores/geo-json.ts",function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GeoJSON=void 0;var a=t("sugar:node_modules/mobx-state-tree/dist/mobx-state-tree.js"),o=t("sugar:stores/index.ts"),s=t("sugar:stores/helper.ts"),n=a.types.model("HtmlEntity",{hash:a.types.optional(a.types.string,""),content:a.types.optional(a.types.string,""),filename:a.types.optional(a.types.string,"")}),r=a.types.model("GeoJSONDetailMap",{mapByHash:a.types.optional(a.types.map(n),{})}).actions(function(t){return{loadDetail:s.asyncAction(t,{url:function(t){return"/openapi/map/"+t},success:function(e,a){t.mapByHash.set(a,e.data)}})}});e.GeoJSON=a.types.model("GeoJSON",{detailMap:a.types.optional(r,{})}).actions(function(t){return{upload:s.asyncAction(t,{method:"post",reqData:function(t){return t.formData},reqConfig:{headers:{"Content-Type":"multipart/form-data"}},url:function(e){var a=o.getRoot(t),s=a.group.current.data.hash;return"/api/group/"+s+"/geoJson/"+e.hash},success:function(e){t.detailMap.mapByHash.set(e.data.hash,e.data)},fail:function(){}}),"delete":s.asyncAction(t,{method:"remove",url:function(e){var a=o.getRoot(t),s=a.group.current.data.hash;return"/api/group/"+s+"/geoJson/"+e+"/deleteFile"},success:function(e){t.detailMap.mapByHash.set(e.data.hash,e.data)},fail:function(){}})}})});
;sugar.define("sugar:stores/tab.ts",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Tab=void 0;var s=e("sugar:node_modules/mobx-state-tree/dist/mobx-state-tree.js");t.Tab=s.types.model("Tab",{hideChartIds:s.types.optional(s.types.map(s.types.string),{}),iframeLoadOnNeedTabIds:s.types.optional(s.types.map(s.types.boolean),{})}).actions(function(e){return{setHideChartIds:function(t,s){e.hideChartIds.set(t,s||"")},setIframeLoadOnNeedTabIds:function(t,s){e.iframeLoadOnNeedTabIds.set(t,s)},deleteHideChartIds:function(t){e.hideChartIds.delete(t)}}})});
;sugar.define("sugar:stores/user-attr.ts",function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.UserAttr=void 0;var a=t("sugar:node_modules/mobx-state-tree/dist/mobx-state-tree.js"),r=t("sugar:stores/helper.ts");e.UserAttr=a.types.model("UserAttr",{loadState:r.state,loadError:a.types.optional(a.types.frozen(),{}),updateState:r.state,updateError:a.types.optional(a.types.frozen(),{}),attrNameList:a.types.optional(a.types.frozen(),[]),attrSchema:a.types.optional(a.types.frozen(),{})}).actions(function(t){return{loadData:r.asyncAction(t,{url:"/api/manage/attribute/getPropsNameAndSchema",success:function(e){t.attrNameList=e.data.attrNameList,t.attrSchema=e.data.attrSchema}}),updateNames:r.asyncAction(t,{method:"post",state:"updateState",errField:"updateError",reqData:function(t){return t},url:"/api/manage/attribute",success:function(e){t.attrNameList=e.data.attrNameList,t.attrSchema=e.data.attrSchema}})}})});
;sugar.define("sugar:stores/step.ts",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Step=void 0;var o=e("sugar:node_modules/mobx-state-tree/dist/mobx-state-tree.js");t.Step=o.types.model("Step",{isShow:o.types.optional(o.types.boolean,!1),isHierarchyShow:o.types.optional(o.types.boolean,!1)}).actions(function(e){return{showStep:function(){e.isShow=!0},showHierarchyStep:function(){e.isHierarchyShow=!0}}})});
;sugar.define("sugar:stores/scene/basic.ts",function(o,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Transform=t.Vector3=t.UUIDTranslator=void 0;var e=o("sugar:node_modules/mobx-state-tree/dist/mobx-state-tree.js"),s=o("sugar:node_modules/lodash/merge.js"),n=o("sugar:node_modules/short-uuid/index.js");t.UUIDTranslator=n(),t.Vector3=e.types.model("Vector3",{x:e.types.number,y:e.types.number,z:e.types.number}),t.Transform=e.types.model("Transform",{position:e.types.optional(t.Vector3,{x:0,y:0,z:0}),rotation:e.types.optional(t.Vector3,{x:0,y:0,z:0}),scaling:e.types.optional(t.Vector3,{x:1,y:1,z:1})}).actions(function(o){return{update:function(t){"position"in t&&(o.position=s(o.position,t.position)),"scaling"in t&&(o.scaling=s(o.scaling,t.scaling)),"rotation"in t&&(o.rotation=s(o.rotation,t.rotation))}}})});
;sugar.define("sugar:stores/scene/mesh.ts",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Mesh=t.MapMesh=t.GLTFMesh=t.BuiltInModels=t.BasicMesh=t.GroundMeshOption=t.PlaneMeshOption=t.SphereMeshOption=t.BoxMeshOption=t.BasicMeshType=void 0;var s,n=e("sugar:node_modules/mobx-state-tree/dist/mobx-state-tree.js"),o=e("sugar:node_modules/lodash/set.js"),a=e("sugar:stores/scene/basic.ts");!function(e){e.Box="box",e.Sphere="sphere",e.Plane="plane",e.Ground="ground"}(s=t.BasicMeshType||(t.BasicMeshType={})),t.BoxMeshOption=n.types.model("BoxMeshOption",{size:n.types.optional(n.types.number,1),height:n.types.optional(n.types.number,2),width:n.types.optional(n.types.number,2),depth:n.types.optional(n.types.number,1)}),t.SphereMeshOption=n.types.model("SphereMeshOption",{segments:n.types.optional(n.types.number,32),diameter:n.types.optional(n.types.number,2)}),t.PlaneMeshOption=n.types.model("PlaneMeshOption",{size:n.types.optional(n.types.number,256),height:n.types.optional(n.types.number,2),width:n.types.optional(n.types.number,2)}),t.GroundMeshOption=n.types.model("GroundMeshOption",{height:n.types.optional(n.types.number,256),width:n.types.optional(n.types.number,256),subdivisions:n.types.optional(n.types.number,32)}),t.BasicMesh=n.types.model("BasicMesh",{id:n.types.optional(n.types.identifier,""),name:n.types.optional(n.types.string,""),script:n.types.optional(n.types.string,""),enableScript:n.types.optional(n.types.boolean,!1),isBasicMesh:n.types.boolean,type:n.types.optional(n.types.enumeration(Object.values(s)),s.Box),option:n.types.maybe(n.types.union(t.BoxMeshOption,t.SphereMeshOption,t.PlaneMeshOption,t.GroundMeshOption)),transform:n.types.optional(a.Transform,{}),isEnabled:n.types.optional(n.types.boolean,!0),isPickable:n.types.optional(n.types.boolean,!0),materialId:n.types.maybe(n.types.string)}).views(function(e){return{get material(){if(e.materialId){var t=n.getParent(n.getParent(e)).materials.find(function(t){return t.id===e.materialId});if(t)return t}return null}}}).actions(function(e){return{update:function(t,s){for(var n in s)"transform"===n?e.transform.update(s[n]):"material"===n?e.material&&e.material.update(t[n],t[n]):o(e,n,t[n])}}});var p=["the_rocket","2018_aston-martin_v12_vantage","cartoon_low_poly_world_map_2.0","cartoon_shanghai","industrial_hardware_set","japanese_restaurant","single_building","olympus_film_camera","lamborghini_aventador_lp700","koenigsegg_one1_low_poly","le_millefiori","littlest_tokyo","low_poly_city","melodia_city_hotel","cloth","monkey","range_rover_evoque","shanghai_gardens","white_silver_green_residence"];t.BuiltInModels=[];for(var i=0,r=p;i<r.length;i++){var y=r[i];t.BuiltInModels.push({label:y,type:"model",value:"/static/scene/model/"+y+"/scene.glb",image:"/static/scene/model/"+y+"/screenshot.png"})}var l=n.types.model("CustomMaterial",{id:n.types.string,albedoColor:n.types.maybe(n.types.string),emissiveColor:n.types.maybe(n.types.string),emissiveIntensity:n.types.maybe(n.types.number),environmentIntensity:n.types.maybe(n.types.number),metallic:n.types.maybe(n.types.number),roughness:n.types.maybe(n.types.number),microSurface:n.types.maybe(n.types.number),subSurface_isRefractionEnabled:n.types.maybe(n.types.boolean),subSurface_refractionIntensity:n.types.maybe(n.types.number),subSurface_indexOfRefraction:n.types.maybe(n.types.number),subSurface_tintColor:n.types.maybe(n.types.string),subSurface_isTranslucencyEnabled:n.types.maybe(n.types.boolean),subSurface_translucencyIntensity:n.types.maybe(n.types.number),clearCoat_isEnabled:n.types.maybe(n.types.boolean),clearCoat_intensity:n.types.maybe(n.types.number),alpha:n.types.maybe(n.types.number),alphaMode:n.types.maybe(n.types.number),transparencyMode:n.types.maybe(n.types.number)}).actions(function(e){return{update:function(t,s){""===s?o(e,t,void 0):o(e,t,s)}}});t.GLTFMesh=n.types.model("GLTFMesh",{id:n.types.optional(n.types.identifier,""),isGLTF:n.types.boolean,name:n.types.optional(n.types.string,""),script:n.types.optional(n.types.string,""),enableScript:n.types.optional(n.types.boolean,!1),sourceType:n.types.optional(n.types.enumeration(["builtIn","upload","url"]),"builtIn"),builtInModelURL:n.types.maybe(n.types.string),customURL:n.types.maybe(n.types.string),uploadURL:n.types.maybe(n.types.string),transform:n.types.optional(a.Transform,{}),isEnabled:n.types.optional(n.types.boolean,!0),isPickable:n.types.optional(n.types.boolean,!0),customMaterials:n.types.optional(n.types.array(l),[]),customMaterialSelect:n.types.optional(n.types.string,""),animationGroupLoop:n.types.optional(n.types.boolean,!1)}).views(function(e){return{get url(){switch(e.sourceType){case"builtIn":return e.builtInModelURL;case"upload":return e.uploadURL;case"url":return e.customURL}return t.BuiltInModels[0].value}}}).actions(function(e){return{update:function(t,s){var n=function(n){var a;if("transform"===n)e.transform.update(s[n]);else{var p=t[n];if("customMaterials"===n){var i=s[n],r=parseInt(Object.keys(i)[0].replace("i",""),10),y=Object.keys(i["i"+r])[0],u=i["i"+r][y],m=p["i"+r].id,b=e.customMaterials.find(function(e){return e.id==m});if(b)b.update(y,u);else{var c=l.create((a={id:m},a[y]=u,a));e.customMaterials.push(c)}}else o(e,n,t[n]),["builtInModelURL","uploadURL","customURL"].includes(n)&&e.transform.update({scaling:{x:1,y:1,z:1}})}};for(var a in s)n(a)}}}),t.MapMesh=n.types.model("MapMesh",{id:n.types.optional(n.types.identifier,""),isMap:n.types.boolean,name:n.types.optional(n.types.string,""),script:n.types.optional(n.types.string,""),enableScript:n.types.optional(n.types.boolean,!1),"long":n.types.number,lat:n.types.number,offset:n.types.optional(n.types.number,1),zoom:n.types.optional(n.types.number,16),hideBuildings:n.types.optional(n.types.array(n.types.string),[]),transform:n.types.optional(a.Transform,{}),isEnabled:n.types.optional(n.types.boolean,!0),isPickable:n.types.optional(n.types.boolean,!0)}).actions(function(e){return{update:function(t,s){for(var n in s)"transform"===n?e.transform.update(s[n]):o(e,n,t[n])}}}),t.Mesh=n.types.union(t.BasicMesh,t.MapMesh,t.GLTFMesh)});
;sugar.define("sugar:stores/scene/engine.ts",function(e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.EngineOptions=void 0;var s=e("sugar:node_modules/mobx-state-tree/dist/mobx-state-tree.js"),t=e("sugar:node_modules/lodash/set.js");n.EngineOptions=s.types.model("EngineOptions",{}).actions(function(e){return{update:function(n,s){for(var o in s)t(e,o,n[o])}}})});
;sugar.define("sugar:stores/scene/simple-action.ts",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SimpleAction=t.ActionType=t.TriggerType=void 0;var n,i=e("sugar:node_modules/mobx-state-tree/dist/mobx-state-tree.js"),o=e("sugar:node_modules/lodash/set.js"),s=e("sugar:stores/scene/basic.ts"),r=function(e){return e+s.UUIDTranslator.new()};!function(e){e.ClickMesh="clickMesh",e.ClickAnyMesh="clickAnyMesh",e.HoverMesh="hoverMesh",e.HoverAnyMesh="hoverAnyMesh",e.Linked="linked"}(n=t.TriggerType||(t.TriggerType={}));var a;!function(e){e.moveCamera="moveCamera",e.changeMaterial="changeMaterial",e.drillDown="drillDown",e.fireDependence="fireDependence",e.openURL="openURL",e.highlight="highlight"}(a=t.ActionType||(t.ActionType={}));var c=i.types.model("ActionInfo",{actionType:i.types.enumeration(Object.values(a)),actionOption:i.types.optional(i.types.frozen(),{}),id:i.types.optional(i.types.string,"")}).actions(function(e){return{update:function(t,n){for(var i in n)o(e,i,t[i]);!e.id&&o(e,"id",r("action-"))}}});t.SimpleAction=i.types.model("SimpleAction",{trigger:i.types.enumeration(Object.values(n)),triggerId:i.types.optional(i.types.string,""),actions:i.types.optional(i.types.array(c),[]),id:i.types.optional(i.types.string,"")}).actions(function(e){return{update:function(t,n){for(var i in n)o(e,i,t[i]),"actions"===i&&e.actions.forEach(function(e){return e.update(e,e)});!e.id&&o(e,"id",r("simple-"))}}})});
;sugar.define("sugar:stores/scene/scene.ts",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SceneOptions=t.BuiltinSkyBox=t.BuiltInBackgroundImage=void 0;var n=e("sugar:utils/i18n.ts"),a=e("sugar:node_modules/mobx-state-tree/dist/mobx-state-tree.js"),s=e("sugar:node_modules/lodash/set.js"),o=e("sugar:stores/scene/simple-action.ts"),i=(a.types.model("ColorCurves",{isEnable:a.types.maybe(a.types.boolean),globalDensity:a.types.maybe(a.types.number),globalExposure:a.types.maybe(a.types.number),globalHue:a.types.maybe(a.types.number),globalSaturation:a.types.maybe(a.types.number),highlightsDensity:a.types.maybe(a.types.number),highlightsExposure:a.types.maybe(a.types.number),highlightsHue:a.types.maybe(a.types.number),highlightsSaturation:a.types.maybe(a.types.number),midtonesDensity:a.types.maybe(a.types.number),midtonesExposure:a.types.maybe(a.types.number),midtonesHue:a.types.maybe(a.types.number),midtonesSaturation:a.types.maybe(a.types.number),shadowsDensity:a.types.maybe(a.types.number),shadowsExposure:a.types.maybe(a.types.number),shadowsHue:a.types.maybe(a.types.number),shadowsSaturation:a.types.maybe(a.types.number)}).actions(function(e){return{update:function(t,n){for(var a in n)s(e,a,t[a])}}}),a.types.model("ImageProcessingConfiguration",{toneMappingEnabled:a.types.optional(a.types.boolean,!0),exposure:a.types.optional(a.types.number,1),contrast:a.types.optional(a.types.number,1),vignetteEnabled:a.types.optional(a.types.boolean,!1),vignetteWeight:a.types.optional(a.types.number,5),vignetteStretch:a.types.optional(a.types.number,1),vignetteColor:a.types.optional(a.types.string,"rgba(35, 35, 35, 0)")}).actions(function(e){return{update:function(t,n){for(var a in n){var o=t[a];"colorCurves"===a||s(e,a,o)}}}})),p=a.types.model("SharpenOptions",{edgeAmount:a.types.maybe(a.types.number),colorAmount:a.types.maybe(a.types.number)}).actions(function(e){return{update:function(t,n){for(var a in n)s(e,a,t[a])}}}),l=a.types.model("DepthOfField",{focusDistance:a.types.maybe(a.types.number),focalLength:a.types.maybe(a.types.number),fStop:a.types.maybe(a.types.number)}).actions(function(e){return{update:function(t,n){for(var a in n)s(e,a,t[a])}}}),r=a.types.model("GlowLayer",{isEnabled:a.types.maybe(a.types.boolean),blurKernelSize:a.types.maybe(a.types.number),intensity:a.types.maybe(a.types.number)}).actions(function(e){return{update:function(t,n){for(var a in n)s(e,a,t[a])}}}),y=(a.types.model("BloomEffect",{isEnabled:a.types.maybe(a.types.boolean),threshold:a.types.maybe(a.types.number),weight:a.types.maybe(a.types.number),kernel:a.types.maybe(a.types.number),scale:a.types.maybe(a.types.number)}).actions(function(e){return{update:function(t,n){for(var a in n)s(e,a,t[a])}}}),a.types.model("DepthOfFieldEffect",{isEnabled:a.types.maybe(a.types.boolean),depthOfFieldBlurLevel:a.types.maybe(a.types.union(a.types.literal(0),a.types.literal(1),a.types.literal(2))),depthOfField:a.types.maybe(l)}).actions(function(e){return{update:function(t,n){for(var a in n)s(e,a,t[a])}}}),a.types.model("SharpenPostProcess",{isEnabled:a.types.maybe(a.types.boolean),sharpen:a.types.maybe(p)}).actions(function(e){return{update:function(t,n){for(var a in n)s(e,a,t[a])}}}),a.types.model("SSAORenderingPipeline",{isEnabled:a.types.optional(a.types.boolean,!1),ratio:a.types.optional(a.types.number,.7),samples:a.types.optional(a.types.number,4)}).actions(function(e){return{update:function(t,n){for(var a in n)s(e,a,t[a])}}})),u=a.types.model("ColorCorrection",{isEnabled:a.types.optional(a.types.boolean,!1),imageURL:a.types.optional(a.types.string,""),samples:a.types.optional(a.types.number,4)}).actions(function(e){return{update:function(t,n){for(var a in n)s(e,a,t[a])}}});t.BuiltInBackgroundImage=[{label:n.default("银河系"),value:"/static/scene/background/2k_stars_milky_way.jpg"},{label:n.default("威尔芬花园"),value:"/static/scene/background/2017-10-14_101909_Welfengarten_Lavesbrücke.jpg"},{label:n.default("布莱斯峡谷"),value:"/static/scene/background/Bryce-Canyon-National-Park-Mark-Doliner.jpg"}],t.BuiltinSkyBox=[{label:n.default("默认"),value:"/static/scene/env/environment.env"},{label:n.default("森林"),value:"/static/scene/env/forest.env"},{label:n.default("夜晚"),value:"/static/scene/env/night.env"},{label:n.default("停车场"),value:"/static/scene/env/parking.env"},{label:n.default("房间"),value:"/static/scene/env/room.env"},{label:n.default("鲁尼恩峡谷"),value:"/static/scene/env/Runyon_Canyon_A_2k_cube_specular.env"},{label:n.default("森林中的古建筑"),value:"/static/scene/env/SpecularHDR.env"},{label:n.default("工作室照明"),value:"/static/scene/env/Studio_Softbox_2Umbrellas_cube_specular.env"},{label:n.default("多云（驾校）"),value:"/static/scene/env/driving_school_1k.env"},{label:n.default("多云（工厂）"),value:"/static/scene/env/freight_station_1k.env"},{label:n.default("多云（克洛芬达尔）"),value:"/static/scene/env/kloofendal_48d_partly_cloudy_1k.env"},{label:n.default("多云（平地）"),value:"/static/scene/env/quarry_03_1k.env"},{label:n.default("秋天树林"),value:"/static/scene/env/autumn_forest_01_1k.env"},{label:n.default("树林"),value:"/static/scene/env/shady_patch_1k.env"}],t.SceneOptions=a.types.model("SceneOptions",{clearColor:a.types.optional(a.types.string,"#3A3F5100"),script:a.types.optional(a.types.string,""),enableScript:a.types.optional(a.types.boolean,!1),backgroundType:a.types.optional(a.types.enumeration(["skybox","gradient","image"]),"skybox"),createSkybox:a.types.optional(a.types.boolean,!0),buildInSkyBoxURL:a.types.optional(a.types.string,t.BuiltinSkyBox[0].value),skyboxBlur:a.types.optional(a.types.number,.7),gradientTop:a.types.optional(a.types.string,"#3A3F51"),gradientBottom:a.types.optional(a.types.string,"#4a5fa2"),imageSourceType:a.types.optional(a.types.enumeration(["builtIn","upload"]),"builtIn"),builtInImageURL:a.types.optional(a.types.string,t.BuiltInBackgroundImage[0].value),uploadImageURL:a.types.maybe(a.types.string),environmentIntensity:a.types.optional(a.types.number,1),width:a.types.optional(a.types.number,900),height:a.types.optional(a.types.number,506),enableOptimize:a.types.optional(a.types.boolean,!1),enableShadow:a.types.optional(a.types.boolean,!1),imageProcessingConfiguration:a.types.optional(i,{}),glowLayer:a.types.optional(r,{}),SSAORenderingPipeline:a.types.optional(y,{}),colorCorrection:a.types.optional(u,{}),simpleActions:a.types.optional(a.types.array(o.SimpleAction),[])}).actions(function(e){return{update:function(t,n){for(var a in n)if(n.hasOwnProperty(a)){var o=t[a];switch(a){case"SSAORenderingPipeline":e.SSAORenderingPipeline.update(o,o);break;case"glowLayer":e.glowLayer.update(o,o);break;case"imageProcessingConfiguration":e.imageProcessingConfiguration.update(o,o);break;case"colorCorrection":e.colorCorrection.update(o,o);break;case"simpleActions":s(e,a,o),e.simpleActions.forEach(function(e){return e.update(e,e)});break;default:s(e,a,o)}}},updateActionCamera:function(t,n,a){var s=e.simpleActions.find(function(e){var n=e.id;return n===t});if(s){var o=s.actions.find(function(e){var t=e.id;return t===n});null===o||void 0===o?void 0:o.update({actionOption:Object.assign({},o.actionOption,a)},{actionOption:Object.assign({},o.actionOption,a)})}}}})});
;sugar.define("sugar:stores/scene/material.ts",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Material=t.StandardMaterial=t.PBRMaterial=void 0;var s=e("sugar:node_modules/mobx-state-tree/dist/mobx-state-tree.js"),a=e("sugar:node_modules/lodash/set.js"),i=s.types.model("MaterialCommon",{backFaceCulling:s.types.maybe(s.types.boolean),disableLighting:s.types.maybe(s.types.boolean),infiniteDistance:s.types.maybe(s.types.boolean),emissiveColor:s.types.maybe(s.types.string)}).actions(function(e){return{update:function(t,s){for(var i in s)a(e,i,t[i])}}});t.PBRMaterial=s.types.compose("PBRMaterial",i,s.types.model("PBRMaterial",{id:s.types.optional(s.types.identifier,""),isPBR:s.types.boolean,name:s.types.optional(s.types.string,""),baseColor:s.types.maybe(s.types.string),baseTextureURL:s.types.maybe(s.types.string),metallicRoughnessTextureURL:s.types.maybe(s.types.string),normalTextureURL:s.types.maybe(s.types.string),occlusionTextureURL:s.types.maybe(s.types.string),environmentTextureURL:s.types.maybe(s.types.string),emissiveIntensity:s.types.maybe(s.types.number),metallic:s.types.maybe(s.types.number),roughness:s.types.maybe(s.types.number)})),t.StandardMaterial=s.types.compose("StandardMaterial",i,s.types.model("StandardMaterial",{id:s.types.optional(s.types.identifier,""),isStandard:s.types.boolean,name:s.types.optional(s.types.string,"")})),t.Material=s.types.union(t.PBRMaterial,t.StandardMaterial)});
;sugar.define("sugar:stores/scene/light.ts",function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Light=e.HemisphericLight=e.SpotLight=e.DirectionalLight=e.PointLight=void 0;var i=t("sugar:utils/i18n.ts"),o=t("sugar:node_modules/mobx-state-tree/dist/mobx-state-tree.js"),s=t("sugar:node_modules/lodash/set.js"),p=t("sugar:stores/scene/basic.ts"),n=o.types.model("BasicLight",{id:o.types.optional(o.types.identifier,""),script:o.types.optional(o.types.string,""),enableScript:o.types.optional(o.types.boolean,!1),diffuse:o.types.maybe(o.types.string),intensity:o.types.optional(o.types.number,1),range:o.types.optional(o.types.number,100),isEnabled:o.types.optional(o.types.boolean,!0)}).actions(function(t){return{update:function(e,i){for(var o in i)s(t,o,e[o])}}});e.PointLight=o.types.compose("PointLight",n,o.types.model("",{name:o.types.optional(o.types.string,i.default("点光源")),isPointLight:o.types.boolean,position:o.types.optional(p.Vector3,{x:5,y:5,z:1})})),e.DirectionalLight=o.types.compose("DirectionalLight",n,o.types.model("",{name:o.types.optional(o.types.string,i.default("平行光")),isDirectionalLight:o.types.boolean,direction:o.types.optional(p.Vector3,{x:-1,y:-1,z:0}),position:o.types.optional(p.Vector3,{x:0,y:100,z:0})})),e.SpotLight=o.types.compose("SpotLight",n,o.types.model("",{name:o.types.optional(o.types.string,i.default("聚光灯")),isSpotLight:o.types.boolean,position:o.types.optional(p.Vector3,{x:0,y:5,z:-5}),direction:o.types.optional(p.Vector3,{x:0,y:-1,z:0}),angle:o.types.optional(o.types.number,Math.PI/3),exponent:o.types.optional(o.types.number,2)})),e.HemisphericLight=o.types.compose("HemisphericLight",n,o.types.model("",{name:o.types.optional(o.types.string,i.default("半球光")),isHemisphericLight:o.types.boolean,direction:o.types.optional(p.Vector3,{x:0,y:1,z:0}),groundColor:o.types.maybe(o.types.string)})),e.Light=o.types.union(e.HemisphericLight,e.PointLight,e.DirectionalLight,e.SpotLight)});
;sugar.define("sugar:stores/scene/animation.ts",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Animations=t.Animation=t.AnimationKey=t.LoopMode=t.DataType=void 0;var o,n=e("sugar:node_modules/mobx-state-tree/dist/mobx-state-tree.js"),a=e("sugar:node_modules/lodash/set.js"),s=e("sugar:stores/scene/basic.ts");!function(e){e[e.FLOAT=0]="FLOAT",e[e.VECTOR3=1]="VECTOR3",e[e.COLOR3=4]="COLOR3",e[e.COLOR4=7]="COLOR4"}(o=t.DataType||(t.DataType={}));var i;!function(e){e[e.RELATIVE=0]="RELATIVE",e[e.CYCLE=1]="CYCLE",e[e.CONSTANT=2]="CONSTANT"}(i=t.LoopMode||(t.LoopMode={})),t.AnimationKey=n.types.model("AnimationKey",{frame:n.types.number,value:n.types.union(n.types.number,n.types.string,s.Vector3)}).actions(function(e){return{update:function(t,o){for(var n in o)a(e,n,t[n])}}}),t.Animation=n.types.model("Animation",{name:n.types.optional(n.types.string,"animation"),targetProperty:n.types.optional(n.types.string,""),framePerSecond:n.types.optional(n.types.number,30),dataType:n.types.optional(n.types.number,o.FLOAT),loopMode:n.types.optional(n.types.number,i.CYCLE),startFrame:n.types.optional(n.types.number,0),endFrame:n.types.optional(n.types.number,0),keys:n.types.optional(n.types.array(t.AnimationKey),[])}).actions(function(e){return{update:function(t,o){for(var n in o)a(e,n,t[n])}}}),t.Animations=n.types.model("Animations",{from:n.types.optional(n.types.number,0),to:n.types.optional(n.types.number,30),loop:n.types.optional(n.types.boolean,!1),enableAnimation:n.types.optional(n.types.boolean,!0),animations:n.types.optional(n.types.array(t.Animation),[])})});
;sugar.define("sugar:stores/scene/camera.ts",function(t,a){"use strict";function e(t,a,e,o,n,i,r){void 0===r&&(r=s.DataType.FLOAT);var p=[];p.push({frame:0,value:a});var m=30;e.forEach(function(t,a){var e=p[p.length-1].frame+m*o[a];p.push({frame:e,value:t});var i=e+m*n[a];p.push({frame:i,value:t})});var u=p[p.length-1],l=u.frame;if(i){var y=p[0];l=u.frame+m*o.reduce(function(t,a){return t+a},0)/o.length,p.push({frame:l,value:y.value}),l+=m*n.reduce(function(t,a){return t+a},0)/n.length,p.push({frame:l,value:y.value})}return s.Animation.create({name:"ArcRotateCamera"+t,targetProperty:t,dataType:r,startFrame:0,endFrame:l,keys:p})}Object.defineProperty(a,"__esModule",{value:!0}),a.Camera=a.FollowCamera=a.ArcRotateCamera=a.ArcRotateCameraAnimation=a.UniversalCamera=void 0;var o=t("sugar:node_modules/mobx-state-tree/dist/mobx-state-tree.js"),n=t("sugar:node_modules/lodash/merge.js"),i=t("sugar:node_modules/lodash/set.js"),r=t("sugar:stores/scene/basic.ts"),s=t("sugar:stores/scene/animation.ts");a.UniversalCamera=o.types.model("UniversalCamera",{id:o.types.optional(o.types.identifier,""),type:"UniversalCamera",name:o.types.optional(o.types.string,"UniversalCamera"),script:o.types.optional(o.types.string,""),enableScript:o.types.optional(o.types.boolean,!1),position:r.Vector3,target:r.Vector3}).actions(function(t){return{update:function(a,e){for(var o in e)i(t,o,a[o])}}}),a.ArcRotateCameraAnimation=o.types.model("ArcRotateCameraAnimation",{alpha:o.types.number,beta:o.types.number,radius:o.types.number,target:r.Vector3,animationDuration:o.types.optional(o.types.number,2),animationStopDuration:o.types.optional(o.types.number,2),hideMeshId:o.types.optional(o.types.string,""),showMeshId:o.types.optional(o.types.string,""),animations:o.types.optional(s.Animations,{})}).actions(function(t){return{update:function(a,e){for(var o in e)i(t,o,a[o])}}}),a.ArcRotateCamera=o.types.model("ArcRotateCamera",{id:o.types.optional(o.types.identifier,""),type:"ArcRotateCamera",name:o.types.optional(o.types.string,"ArcRotateCamera"),script:o.types.optional(o.types.string,""),enableScript:o.types.optional(o.types.boolean,!1),alpha:o.types.optional(o.types.number,Number((3*Math.PI/4).toFixed(3))),beta:o.types.optional(o.types.number,Number((Math.PI/4).toFixed(3))),radius:o.types.optional(o.types.number,10),target:r.Vector3,lowerRadiusLimit:o.types.optional(o.types.number,3),upperRadiusLimit:o.types.optional(o.types.number,30),upperBetaLimit:o.types.optional(o.types.number,Number((Math.PI/2-.1).toFixed(3))),allowUpsideDown:o.types.optional(o.types.boolean,!1),wheelPrecision:o.types.optional(o.types.number,150),pinchPrecision:o.types.optional(o.types.number,1500),useAutoRotationBehavior:o.types.optional(o.types.boolean,!0),idleRotationSpeed:o.types.optional(o.types.number,1),animationMode:o.types.optional(o.types.boolean,!1),animationLoop:o.types.optional(o.types.boolean,!1),arcRotateCameraAnimations:o.types.optional(o.types.array(a.ArcRotateCameraAnimation),[]),hideMeshId:o.types.optional(o.types.string,""),showMeshId:o.types.optional(o.types.string,""),animations:o.types.optional(s.Animations,{})}).actions(function(t){return{rebuildAnimations:function(){var a=30;if(t.animationMode)t.arcRotateCameraAnimations.forEach(function(e,n){var i,r=[];if(0===n)i={target:o.getSnapshot(t.target),alpha:t.alpha,beta:t.beta,radius:t.radius};else{var p=t.arcRotateCameraAnimations[n-1];i={target:o.getSnapshot(p.target),alpha:p.alpha,beta:p.beta,radius:p.radius}}var m=0,u=a*(e.animationDuration+e.animationStopDuration);Object.keys(i).forEach(function(t){var p="target"===t,l=p?o.getSnapshot(e[t]):e[t],y=[{frame:m,value:i[t]},{frame:a*e.animationDuration,value:l},{frame:u,value:l}],c=s.Animation.create({keys:y,name:"ArcRotateCamera"+t+n,targetProperty:t,startFrame:m,endFrame:u,dataType:p?s.DataType.VECTOR3:s.DataType.FLOAT});r.push(c)}),e.animations=s.Animations.create({from:m,to:u,animations:o.cast(r),loop:!1})});else{for(var n=[],i=[],r=[],p=[],m=[],u=[],l=[],y=0,c=t.arcRotateCameraAnimations;y<c.length;y++){var d=c[y];m.push(o.getSnapshot(d.target)),i.push(d.alpha),r.push(d.beta),p.push(d.radius),u.push(d.animationDuration),l.push(d.animationStopDuration)}if(m.length>0){var h=e("target",o.getSnapshot(t.target),m,u,l,t.animationLoop,s.DataType.VECTOR3);n.push(h)}if(i.length>0){var h=e("alpha",t.alpha,i,u,l,t.animationLoop);n.push(h)}if(r.length>0){var h=e("beta",t.beta,r,u,l,t.animationLoop);n.push(h)}if(p.length>0){var h=e("radius",t.radius,p,u,l,t.animationLoop);n.push(h)}var f=0;n.length>0&&(f=n[n.length-1].endFrame),t.animations=s.Animations.create({animations:n,from:0,to:f,loop:t.animationLoop})}t.arcRotateCameraAnimations.length>0&&(t.useAutoRotationBehavior=!1)}}}).actions(function(t){return{addArcRotateCameraAnimation:function(e){t.arcRotateCameraAnimations.push(a.ArcRotateCameraAnimation.create(e)),t.rebuildAnimations()},update:function(a,e){for(var o in e)"target"===o?t.target=n(t.target,a.target):(i(t,o,a[o]),["arcRotateCameraAnimations","animationLoop","animationMode"].includes(o)&&t.rebuildAnimations())}}}),a.FollowCamera=o.types.model("FollowCamera",{id:o.types.optional(o.types.identifier,""),type:"FollowCamera",name:o.types.optional(o.types.string,"FollowCamera"),script:o.types.optional(o.types.string,""),enableScript:o.types.optional(o.types.boolean,!1),radius:o.types.optional(o.types.number,30),heightOffset:o.types.optional(o.types.number,10),rotationOffset:o.types.optional(o.types.number,0),cameraAcceleration:o.types.optional(o.types.number,.005),maxCameraSpeed:o.types.optional(o.types.number,10),lockedTarget:r.Vector3}).actions(function(t){return{update:function(a,e){for(var o in e)i(t,o,a[o])}}}),a.Camera=o.types.union(a.UniversalCamera,a.ArcRotateCamera)});
;sugar.define("sugar:stores/scene/particle.ts",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Particle=t.ParticleTextureURLs=t.NoiseProceduralTexture=t.BillboardMode=t.EmitterType=void 0;var s=e("sugar:utils/i18n.ts"),o=e("sugar:node_modules/mobx-state-tree/dist/mobx-state-tree.js"),p=e("sugar:node_modules/lodash/set.js"),i=e("sugar:stores/scene/basic.ts");t.EmitterType=o.types.model({});var a;!function(e){e[e.PARTICLES_BILLBOARDMODE_Y=2]="PARTICLES_BILLBOARDMODE_Y",e[e.PARTICLES_BILLBOARDMODE_ALL=7]="PARTICLES_BILLBOARDMODE_ALL",e[e.PARTICLES_BILLBOARDMODE_STRETCHED=8]="PARTICLES_BILLBOARDMODE_STRETCHED"}(a=t.BillboardMode||(t.BillboardMode={})),t.NoiseProceduralTexture=o.types.model({animationSpeedFactor:o.types.optional(o.types.number,5),persistence:o.types.optional(o.types.number,2),brightness:o.types.optional(o.types.number,.5),octaves:o.types.optional(o.types.number,2)}),t.ParticleTextureURLs=[{label:s.default("圆形渐变"),value:"/static/scene/texture/flare.png"},{label:s.default("垂直渐变直线"),value:"/static/scene/texture/line.png"}],t.Particle=o.types.model("Particle",{name:o.types.optional(o.types.string,"particle"),id:o.types.string,capacity:o.types.number,emitter:o.types.optional(o.types.union(i.Vector3,o.types.string),{x:0,y:0,z:0}),particleEmitterType:o.types.maybe(t.EmitterType),textureURL:o.types.string,invertY:o.types.optional(o.types.boolean,!1),startDelay:o.types.optional(o.types.number,0),isBillboardBased:o.types.optional(o.types.boolean,!0),billboardMode:o.types.optional(o.types.union(o.types.literal(2),o.types.literal(7),o.types.literal(8)),2),blendMode:o.types.maybe(o.types.union(o.types.literal(0),o.types.literal(1),o.types.literal(2),o.types.literal(3),o.types.literal(4))),minAngularSpeed:o.types.optional(o.types.number,0),maxAngularSpeed:o.types.optional(o.types.number,0),minSize:o.types.optional(o.types.number,.1),maxSize:o.types.optional(o.types.number,1),minEmitBox:o.types.optional(i.Vector3,{x:-50,y:0,z:-50}),maxEmitBox:o.types.optional(i.Vector3,{x:50,y:0,z:50}),minScaleX:o.types.optional(o.types.number,1),maxScaleX:o.types.optional(o.types.number,1),minScaleY:o.types.optional(o.types.number,1),maxScaleY:o.types.optional(o.types.number,1),minEmitPower:o.types.optional(o.types.number,0),maxEmitPower:o.types.optional(o.types.number,0),minLifeTime:o.types.optional(o.types.number,1),maxLifeTime:o.types.optional(o.types.number,1),emitRate:o.types.optional(o.types.number,2),gravity:o.types.optional(i.Vector3,{x:0,y:0,z:0}),noiseTexture:o.types.maybe(t.NoiseProceduralTexture),noiseStrength:o.types.optional(i.Vector3,{x:0,y:0,z:0}),color1:o.types.optional(o.types.string,"rgba(254, 164, 54, 255)"),color2:o.types.optional(o.types.string,"rgba(254, 164, 54, 255)"),colorDead:o.types.optional(o.types.string,"rgba(255, 255, 255, 0)"),updateSpeed:o.types.optional(o.types.number,.0166),direction1:o.types.optional(i.Vector3,{x:0,y:10,z:0}),direction2:o.types.optional(i.Vector3,{x:0,y:10,z:0})}).actions(function(e){return{update:function(t,s){for(var o in s)p(e,o,t[o])}}})});
;sugar.define("sugar:stores/scene/scene-data.ts",function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SceneData=void 0;var a=t("sugar:node_modules/mobx-state-tree/dist/mobx-state-tree.js");e.SceneData=a.types.model("SceneData",{dataChartType:a.types.optional(a.types.string,""),dataType:a.types.optional(a.types.enumeration(["dataModel","api","static"]),"static"),dataModelHash:a.types.optional(a.types.union(a.types.string,a.types.null),""),dataApiUrl:a.types.optional(a.types.string,""),dataConfig:a.types.optional(a.types.frozen(),{})})});
;sugar.define("sugar:stores/scene/pin.ts",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Pin=void 0;var s=e("sugar:utils/i18n.ts"),n=e("sugar:node_modules/mobx-state-tree/dist/mobx-state-tree.js"),i=e("sugar:node_modules/lodash/set.js"),o=e("sugar:stores/scene/basic.ts"),a=e("sugar:stores/scene/scene-data.ts");t.Pin=n.types.compose("Pin",a.SceneData,n.types.model("Pin",{dataChartType:"simple-text",id:n.types.optional(n.types.identifier,""),name:n.types.optional(n.types.string,s.default("标注")),position:o.Vector3,staticText:n.types.optional(n.types.string,s.default("标注内容")),width:n.types.optional(n.types.number,100)}).actions(function(e){return{update:function(t,s){for(var n in s)i(e,n,t[n])}}}))});
;sugar.define("sugar:stores/scene.ts",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GroundMeshOption=t.PlaneMeshOption=t.SphereMeshOption=t.BoxMeshOption=t.BasicMeshType=t.PBRMaterial=t.BasicMesh=t.Scene=t.SceneEntity=t.Editor=t.ViewMode=t.GizmoMode=t.SelectType=void 0;var n=e("sugar:node_modules/tslib/tslib.js"),a=e("sugar:utils/i18n.ts"),s=e("sugar:node_modules/mobx-state-tree/dist/mobx-state-tree.js"),i=e("sugar:node_modules/amis/lib/index.js"),r=e("sugar:widgets/progress.ts"),o=e("sugar:stores/helper.ts"),c=e("sugar:utils/frontendId.ts"),l=e("sugar:stores/scene/basic.ts"),d=e("sugar:stores/scene/mesh.ts");Object.defineProperty(t,"BasicMesh",{enumerable:!0,get:function(){return d.BasicMesh}}),Object.defineProperty(t,"BasicMeshType",{enumerable:!0,get:function(){return d.BasicMeshType}}),Object.defineProperty(t,"BoxMeshOption",{enumerable:!0,get:function(){return d.BoxMeshOption}}),Object.defineProperty(t,"SphereMeshOption",{enumerable:!0,get:function(){return d.SphereMeshOption}}),Object.defineProperty(t,"PlaneMeshOption",{enumerable:!0,get:function(){return d.PlaneMeshOption}}),Object.defineProperty(t,"GroundMeshOption",{enumerable:!0,get:function(){return d.GroundMeshOption}});var p=e("sugar:stores/scene/engine.ts"),u=e("sugar:stores/scene/scene.ts"),f=e("sugar:stores/scene/material.ts");Object.defineProperty(t,"PBRMaterial",{enumerable:!0,get:function(){return f.PBRMaterial}});var g=e("sugar:stores/scene/light.ts"),h=e("sugar:stores/scene/camera.ts"),m=e("sugar:stores/scene/particle.ts"),y=e("sugar:stores/scene/pin.ts");n.__exportStar(e("sugar:stores/scene/engine.ts"),t),n.__exportStar(e("sugar:stores/scene/mesh.ts"),t),n.__exportStar(e("sugar:stores/scene/scene.ts"),t),n.__exportStar(e("sugar:stores/scene/material.ts"),t),n.__exportStar(e("sugar:stores/scene/light.ts"),t),n.__exportStar(e("sugar:stores/scene/animation.ts"),t),n.__exportStar(e("sugar:stores/scene/camera.ts"),t),n.__exportStar(e("sugar:stores/scene/particle.ts"),t),n.__exportStar(e("sugar:stores/scene/pin.ts"),t);var M;!function(e){e.None="none",e.BasicMesh="basic-mesh",e.MapMesh="map-mesh",e.GLTFMesh="gltf-mesh",e.Light="light",e.Camera="camera",e.Material="material",e.Scene="scene",e.Engine="engine",e.Particle="particle",e.Pin="pin"}(M=t.SelectType||(t.SelectType={}));var P;!function(e){e.Position="position",e.Rotation="rotation",e.Scaling="scaling"}(P=t.GizmoMode||(t.GizmoMode={}));var S;!function(e){e.Perspective="perspective",e.Top="top",e.Right="right",e.Front="front"}(S=t.ViewMode||(t.ViewMode={})),t.Editor=s.types.model("Editor",{gizmoMode:s.types.optional(s.types.enumeration(Object.values(P)),P.Position),viewMode:s.types.optional(s.types.enumeration(Object.values(S)),S.Perspective),displayGrid:s.types.optional(s.types.boolean,!1),displayAxis:s.types.optional(s.types.boolean,!1),displayPerf:s.types.optional(s.types.boolean,!1),particlesEnabled:s.types.optional(s.types.boolean,!0),playMode:s.types.optional(s.types.boolean,!1),selectedId:s.types.optional(s.types.string,"sugar-scene"),selectedType:s.types.optional(s.types.enumeration(Object.values(M)),M.None),pickNodeName:s.types.optional(s.types.string,"-"),pickMaterialName:s.types.optional(s.types.string,"-"),lookAt:s.types.maybe(s.types.string)}).views(function(e){return{get selectedNode(){var t=null,n=e.selectedType;switch(n){case M.BasicMesh:case M.MapMesh:case M.GLTFMesh:t=s.getParent(e).scene.meshes.find(function(t){return t.id===e.selectedId});break;case M.Light:t=s.getParent(e).scene.lights.find(function(t){return t.id===e.selectedId});break;case M.Material:t=s.getParent(e).scene.materials.find(function(t){return t.id===e.selectedId});break;case M.Camera:t=s.getParent(e).scene.cameras.find(function(t){return t.id===e.selectedId});break;case M.Particle:t=s.getParent(e).scene.particles.find(function(t){return t.id===e.selectedId});break;case M.Pin:t=s.getParent(e).scene.pins.find(function(t){return t.id===e.selectedId});break;case M.Scene:t=s.getParent(e).scene.sceneOptions;break;case M.Engine:t=s.getParent(e).scene.engineOptions;break;case M.None:t=null;default:t=null}return t}}}).actions(function(e){return{changeGimoMode:function(t){e.gizmoMode=t},changeViewMode:function(t){e.viewMode=t},setSelected:function(t,n){e.selectedId=t,e.selectedType=n},setSelectedId:function(t){e.selectedId=t},setPickNodeName:function(t){e.pickNodeName=t},setPickMaterialName:function(t){e.pickMaterialName=t},setSelectedType:function(t){e.selectedType=t},setLookAt:function(t){e.lookAt=t},togglePlayMode:function(){e.playMode=!e.playMode},toggleDisplayGrid:function(){e.displayGrid=!e.displayGrid},toggleDisplayAxis:function(){e.displayAxis=!e.displayAxis},toggleParticlesEnabled:function(){e.particlesEnabled=!e.particlesEnabled},toggleDisplayPerf:function(){e.displayPerf=!e.displayPerf},selectMesh:function(t){if(t!==e.selectedId){var n=s.getParent(e).scene.meshes.find(function(e){return e.id===t});n&&(e.selectedId=t,e.selectedType=n.isGLTF?M.GLTFMesh:n.isMap?M.MapMesh:M.BasicMesh)}},selectLight:function(t){if(t!==e.selectedId){var n=s.getParent(e).scene.lights.find(function(e){return e.id===t});n?(e.selectedId=t,e.selectedType=M.Light):console.warn("「"+t+"」not in lights")}},selectCamera:function(t){if(t!==e.selectedId){var n=s.getParent(e).scene.cameras.find(function(e){return e.id===t});n?(e.selectedId=t,e.selectedType=M.Camera):console.warn("「"+t+"」not in cameras")}},selectMaterial:function(t){if(t!==e.selectedId){var n=s.getParent(e).scene.materials.find(function(e){return e.id===t});n?(e.selectedId=t,e.selectedType=M.Material):console.warn("「"+t+"」not in materials")}},selectParticle:function(t){if(t!==e.selectedId){var n=s.getParent(e).scene.particles.find(function(e){return e.id===t});n?(e.selectedId=t,e.selectedType=M.Particle):console.warn("「"+t+"」not in particles")}},selectPin:function(t){if(t!==e.selectedId){var n=s.getParent(e).scene.pins.find(function(e){return e.id===t});n?(e.selectedId=t,e.selectedType=M.Pin):console.warn("「"+t+"」not in pins")}},selectScene:function(){e.selectedId="sugar-scene",e.selectedType=M.Scene},deleteSelectedNode:function(){if(e.selectedId){var t=e.selectedType;s.getParent(e).scene.deleteNode(t,e.selectedId),e.selectedType=M.None}else console.warn("should select node")}}}),t.SceneEntity=s.types.model("SceneEntity",{engineOptions:s.types.optional(p.EngineOptions,{}),sceneOptions:s.types.optional(u.SceneOptions,{}),meshes:s.types.optional(s.types.array(d.Mesh),[]),lights:s.types.optional(s.types.array(g.Light),[]),cameras:s.types.optional(s.types.array(h.Camera),[]),pins:s.types.optional(s.types.array(y.Pin),[]),materials:s.types.optional(s.types.array(f.Material),[]),particles:s.types.optional(s.types.array(m.Particle),[])}).actions(function(e){return{clearAll:function(){e.meshes.clear(),e.lights.clear(),e.cameras.clear(),e.pins.clear(),e.materials.clear(),e.particles.clear(),s.getParent(e).model.clear()},deleteNode:function(t,n){switch(t){case M.BasicMesh:case M.GLTFMesh:case M.MapMesh:var a=e.meshes.findIndex(function(e){return e.id===n});-1!==a?e.meshes.splice(a,1):console.warn("can not find mesh",n);break;case M.Light:var s=e.lights.findIndex(function(e){return e.id===n});-1!==s?e.lights.splice(s,1):console.warn("can not find light",n);break;case M.Material:var i=e.materials.findIndex(function(e){return e.id===n});-1!==i?e.materials.splice(i,1):console.warn("can not find material",n);break;case M.Camera:var r=e.cameras.findIndex(function(e){return e.id===n});-1!==r?e.cameras.splice(r,1):console.warn("can not find camera",n);break;case M.Particle:var o=e.particles.findIndex(function(e){return e.id===n});-1!==o?e.particles.splice(o,1):console.warn("can not find particle",n);break;case M.Pin:var c=e.pins.findIndex(function(e){return e.id===n});-1!==c?e.pins.splice(c,1):console.warn("can not find pin",n);break;default:console.warn("deleteSelectedNode type error",t)}},addParticle:function(t){e.particles.push(m.Particle.create(t))},addUpLineParticle:function(){e.particles.push(m.Particle.create({id:"particle-"+l.UUIDTranslator.new(),name:a.default("向上线条"),capacity:200,textureURL:m.ParticleTextureURLs[1].value,color1:"rgba(254, 164, 54, 255)",color2:"rgba(254, 164, 54, 255)",minEmitBox:{x:-20,y:0,z:-20},maxEmitBox:{x:20,y:0,z:20},minSize:1,maxSize:2,minScaleX:.01,maxScaleX:.03,minScaleY:1,maxScaleY:2,minLifeTime:3,maxLifeTime:10,emitRate:200,direction1:{x:0,y:10,z:0},direction2:{x:0,y:10,z:0},minEmitPower:1,maxEmitPower:2,updateSpeed:.016}))},addFloatParticle:function(){e.particles.push(m.Particle.create({id:"particle-"+l.UUIDTranslator.new(),name:a.default("浮动颗粒"),capacity:300,textureURL:m.ParticleTextureURLs[0].value,billboardMode:8,color1:"rgba(255, 255, 255, 255)",color2:"rgba(255, 255, 255, 255)",minEmitBox:{x:-20,y:0,z:-20},maxEmitBox:{x:20,y:0,z:20},minSize:.1,maxSize:.2,minLifeTime:1,maxLifeTime:3,emitRate:300,gravity:{x:0,y:-9.81,z:0},direction1:{x:-7,y:8,z:5},direction2:{x:7,y:10,z:-5},minAngularSpeed:0,maxAngularSpeed:Math.PI,minEmitPower:1,maxEmitPower:3,updateSpeed:.005}))},addBasicMesh:function(t){var i,r,o=l.UUIDTranslator.new(),c={id:"material-"+o,baseColor:"#F0F3F4",isPBR:!0},p={id:"mesh-"+o,isBasicMesh:!0,type:t,materialId:c.id};if(t===d.BasicMeshType.Box)r=f.PBRMaterial.create(n.__assign(n.__assign({},c),{name:a.default("立方体")})),i=d.BasicMesh.create(n.__assign(n.__assign({},p),{name:a.default("立方体"),option:d.BoxMeshOption.create()}));else if(t===d.BasicMeshType.Sphere)r=f.PBRMaterial.create(n.__assign(n.__assign({},c),{name:a.default("球体")})),i=d.BasicMesh.create(n.__assign(n.__assign({},p),{name:a.default("球体"),option:d.SphereMeshOption.create()}));else if(t===d.BasicMeshType.Plane)r=f.PBRMaterial.create(n.__assign(n.__assign({},c),{name:a.default("平面")})),i=d.BasicMesh.create(n.__assign(n.__assign({},p),{name:a.default("平面"),option:d.PlaneMeshOption.create()}));else{if(t!==d.BasicMeshType.Ground)return void console.warn("Unknown basic mesh");r=f.PBRMaterial.create(n.__assign(n.__assign({},c),{name:a.default("地面")})),i=d.BasicMesh.create(n.__assign(n.__assign({},p),{name:a.default("地面"),option:d.GroundMeshOption.create()}))}e.materials.push(r),e.meshes.push(i);var u=s.getParent(e).editor;u.setSelected(i.id,M.BasicMesh)},addArcRotateCamera:function(t){var n=h.ArcRotateCamera.create(t);e.cameras.push(n)},addGLTFMesh:function(t){t.id="gltf-"+l.UUIDTranslator.new(),t.isGLTF=!0;var n=d.GLTFMesh.create(t);e.meshes.push(n);var a=s.getParent(e).editor;a.setSelected(n.id,M.GLTFMesh)},addMapMesh:function(t,n,i,r){void 0===r&&(r=16);var o=d.MapMesh.create({id:"map-"+l.UUIDTranslator.new(),isMap:!0,name:a.default("三维地图"),"long":t,lat:n,offset:i,zoom:r});e.meshes.push(o);var c=s.getParent(e).editor;c.setSelected(o.id,M.MapMesh)},addPin:function(t){var n=e.pins.find(function(e){return e.position.x===t.x&&e.position.y===t.y&&e.position.z===t.z});if(!n){var a=y.Pin.create({id:"pin-"+l.UUIDTranslator.new(),position:t});e.pins.push(a)}},updateMeshTransform:function(t){var n=s.getParent(e).editor.selectedType;switch(n){case M.BasicMesh:case M.GLTFMesh:case M.MapMesh:s.getParent(e).editor.selectedNode.update({},{transform:t});break;case M.Light:var a=s.getParent(e).editor.selectedNode,i=s.getType(a).name,r=!1;if(("PointLight"===i||"SpotLight"===i)&&(r=!0),r&&t.position){var o={x:t.position.x,y:t.position.y,z:t.position.z};a.update({position:o},{position:o})}break;case M.Pin:var c=s.getParent(e).editor.selectedNode,l={x:t.position.x,y:t.position.y,z:t.position.z};c.update({position:l},{position:l});break;default:console.warn("updateMeshTransform error")}},addPointLight:function(t){void 0===t&&(t={}),"id"in t||(t.id="pointLight-"+l.UUIDTranslator.new()),t.isPointLight=!0;var n=g.PointLight.create(t);e.lights.push(n);var a=s.getParent(e).editor;a.setSelected(n.id,M.Light)},addDirectionalLight:function(t){void 0===t&&(t={}),"id"in t||(t.id="directionalLight-"+l.UUIDTranslator.new()),t.isDirectionalLight=!0;var n=g.DirectionalLight.create(t);e.lights.push(n);var a=s.getParent(e).editor;a.setSelected(n.id,M.Light)},addSpotLight:function(t){void 0===t&&(t={}),"id"in t||(t.id="spotLight-"+l.UUIDTranslator.new()),t.isSpotLight=!0;var n=g.SpotLight.create(t);e.lights.push(n);var a=s.getParent(e).editor;a.setSelected(n.id,M.Light)},addHemisphericLight:function(t){void 0===t&&(t={}),"id"in t||(t.id="hemisphericLight-"+l.UUIDTranslator.new()),t.isHemisphericLight=!0;var n=g.HemisphericLight.create(t);e.lights.push(n)}}});var v=s.types.model("SceneModel",{hash:s.types.optional(s.types.string,""),name:s.types.optional(s.types.string,""),icon:s.types.optional(s.types.string,""),remark:s.types.optional(s.types.string,""),orderIndex:s.types.optional(s.types.number,0),isTemplate:s.types.optional(s.types.boolean,!1),thumbImgUrl:s.types.optional(s.types.string,""),data:s.types.optional(s.types.string,""),dataBos:s.types.optional(s.types.string,"")}).actions(function(e){return{clear:function(){e.hash="",e.name="",e.icon="",e.remark="",e.thumbImgUrl="",e.data="",e.dataBos=""}}}),b=s.types.model("SceneList",{loadState:o.state,addState:o.state,updateState:o.state,deleteState:o.state,loadError:s.types.optional(s.types.frozen(),{}),data:s.types.optional(s.types.array(v),[])}).actions(function(e){return{load:o.asyncAction(e,{url:function(e){return"/api/group/"+e+"/scene"},fail:[]}),add:o.asyncAction(e,{state:"addState",method:"post",url:function(e){return"/api/manage/group/"+e+"/scene"},reqData:function(e,t){return t},success:function(t){e.data.push(t.data)},throwErr:!0}),update:o.asyncAction(e,{state:"updateState",method:"put",url:function(e,t){return"/api/manage/group/"+e+"/scene/"+t.hash},reqData:function(e,t){return t},throwErr:!0}),"delete":o.asyncAction(e,{state:"deleteState",method:"remove",url:function(e,t){return"/api/manage/group/"+e+"/scene/"+t.hash},reqData:function(e,t){return t},throwErr:!0}),updateOrder:o.asyncAction(e,{state:"updateState",method:"put",url:function(e){return"/api/manage/group/"+e+"/scene/updateOrder"},reqData:function(e,t){return t},throwErr:!0}),multiDelete:o.asyncAction(e,{state:"deleteState",method:"put",url:function(e){return"/api/manage/group/"+e+"/scene/multiDelete"},reqData:function(e,t){return t},throwErr:!0})}}),T=s.types.model("editorLockAccess",{loadState:o.state,loadError:s.types.optional(s.types.frozen(),{}),lockState:s.types.optional(s.types.enumeration(["ok","otherTab"]),"otherTab")}).actions(function(e){return{load:o.asyncAction(e,{url:function(e){return"/api/scene/"+e+"/lock/access"},field:"lockState"}),grab:function(){e.lockState="ok"}}}),x=s.types.model("CurrentScene",{loadState:o.state,loadError:s.types.optional(s.types.frozen(),{}),savingState:o.state,savingError:s.types.optional(s.types.frozen(),{}),hasModified:s.types.optional(s.types.boolean,!1),sid:s.types.optional(s.types.string,""),modifiedTime:s.types.optional(s.types.Date,new Date),lockSyncTime:s.types.optional(s.types.Date,new Date),lockAccess:s.types.optional(T,{}),model:s.types.optional(v,{}),scene:s.types.optional(t.SceneEntity,{}),editor:s.types.optional(t.Editor,{})}).actions(function(e){return{load:o.asyncAction(e,{url:function(e){return"/api/sceneShare/"+e},success:function(n){if(e.model=n.data,e.scene.lights.clear(),e.scene.meshes.clear(),e.scene.cameras.clear(),e.scene.materials.clear(),e.scene.particles.clear(),e.scene.pins.clear(),e.hasModified=!1,""!=n.data.data)try{var s=JSON.parse(n.data.data);e.scene=t.SceneEntity.create(s)}catch(r){i.toast.error(a.default("场景加载出错 「"+r+"」"))}},fail:function(t){e.loadError=t,e.scene.lights.clear(),e.scene.meshes.clear(),e.scene.cameras.clear(),e.scene.materials.clear(),e.scene.particles.clear(),e.scene.pins.clear(),e.hasModified=!1},showError:!1}),save:o.asyncAction(e,{state:"savingState",errField:"savingError",method:"put",url:function(e,t){return"/api/group/"+e+"/scene/"+t},reqData:function(){return{scene:{data:JSON.stringify(s.getSnapshot(e.scene))}}},success:function(){e.savingState="done",r.default.hide(),i.toast.success(a.default("保存成功")),e.hasModified=!1},fail:function(){r.default.hide()}}),setModified:function(t){e.hasModified=t},updateModifiedTime:function(){e.modifiedTime=new Date},afterCreate:function(){e.sid=c.generateId(),e.hasModified=!1,s.onPatch(e,function(t){var n=t.path;/^\/scene\/(engineOptions|sceneOptions|meshes|lights|cameras|materials|particles|pins)/.test(n)&&(e.setModified(!0),e.updateModifiedTime())})},lock:o.asyncAction(e,{state:null,showError:!1,method:"post",reqUrlAndDataAndConfig:function(t){var n="/api/scene/"+t+"/lock",a={sid:e.sid};return{url:n,reqData:a}},success:function(){e.lockSyncTime=new Date},fail:function(){i.toast.error(a.default("编辑锁定失败！"))}}),unlock:o.asyncAction(e,{state:null,showError:!1,method:"post",reqUrlAndDataAndConfig:function(t){var n="/api/scene/"+t+"/unlock",a={sid:e.sid};return{url:n,reqData:a}},success:function(){e.lockSyncTime=new Date},fail:function(){i.toast.error(a.default("编辑锁解除失败！"))}}),isMyLock:o.asyncAction(e,{state:null,field:null,throwErr:!0,method:"post",reqUrlAndDataAndConfig:function(t){var n="/api/scene/"+t+"/lock/isMy",a={sid:e.sid};return{url:n,reqData:a}}}),syncLock:o.asyncAction(e,{state:null,field:null,throwErr:!0,method:"post",reqUrlAndDataAndConfig:function(t){var n="/api/scene/"+t+"/lock/sync",a={sid:e.sid};return{url:n,reqData:a}},success:function(){e.lockSyncTime=new Date}})}});t.Scene=s.types.model("Scene",{current:s.types.optional(x,{}),list:s.types.optional(b,{})})});
;sugar.define("sugar:stores/demo.ts",function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Demo=e.DemoEntity=void 0;var o=t("sugar:node_modules/mobx-state-tree/dist/mobx-state-tree.js"),s=t("sugar:stores/helper.ts");e.DemoEntity=o.types.model("DemoEntity",{demoKey:o.types.optional(o.types.string,""),name:o.types.optional(o.types.string,""),catalog:o.types.optional(o.types.string,""),type:o.types.optional(o.types.string,""),resourceHash:o.types.optional(o.types.string,""),token:o.types.optional(o.types.string,""),thumbImgUrl:o.types.optional(o.types.string,"")});var a=o.types.model("CurrentDemo",{loadState:s.state,loadError:o.types.optional(o.types.frozen(),{}),data:o.types.optional(e.DemoEntity,{})}).actions(function(t){return{load:s.asyncAction(t,{url:function(t){return"/api/userDemo/"+t+"/getDemo"},fail:{}})}}),n=o.types.model("DemoList",{loadState:s.state,loadError:o.types.optional(o.types.frozen(),{}),shouldUpdate:o.types.optional(o.types.boolean,!0),data:o.types.optional(o.types.array(e.DemoEntity),[])}).actions(function(t){return{load:s.asyncAction(t,{url:function(){return"/api/userDemo/getDemoList"},success:function(e){t.shouldUpdate=e.data.shouldUpdate,t.data=e.data.demos},fail:[]}),update:s.asyncAction(t,{state:null,url:"/openapi/updateDemos",success:function(){t.load()}})}});e.Demo=o.types.model("Demo",{current:o.types.optional(a,{}),list:o.types.optional(n,{})})});
;sugar.define("sugar:stores/news.ts",function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ProductNews=e.NewsEntity=e.DefaultNewsEntity=void 0;var s=t("sugar:node_modules/mobx-state-tree/dist/mobx-state-tree.js"),a=t("sugar:stores/helper.ts");e.DefaultNewsEntity=s.types.model("DefaultNewsEntity",{tag:s.types.optional(s.types.string,""),date:s.types.optional(s.types.string,""),list:s.types.array(s.types.optional(s.types.string,""))}),e.NewsEntity=s.types.model("NewsEntity",{type:s.types.optional(s.types.number,0),title:s.types.optional(s.types.string,""),date:s.types.optional(s.types.string,""),description:s.types.optional(s.types.string,""),content:s.types.optional(s.types.string,"")}),e.ProductNews=s.types.model("ProductNews",{loadState:a.state,loadError:s.types.optional(s.types.frozen(),{}),data:s.types.optional(s.types.array(e.NewsEntity),[]),defaultData:s.types.optional(e.DefaultNewsEntity,{})}).actions(function(t){return{load:a.asyncAction(t,{url:"/api/news/",success:function(e){"defaultNews"===e.data.type?t.defaultData=e.data.data:t.data=e.data.data},fail:{}})}})});
;sugar.define("sugar:stores/chart-condition-data.ts",function(a,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChartConditionDataHub=t.ChartConditionData=t.clearChartConditionDataCancelTokenMap=t.chartConditionDataCancelTokenMap=void 0;var n=a("sugar:node_modules/mobx-state-tree/dist/mobx-state-tree.js"),o=a("sugar:stores/index.ts"),e=a("sugar:node_modules/axios/index.js"),r=a("sugar:stores/helper.ts"),i=a("sugar:stores/chart-data.ts");t.chartConditionDataCancelTokenMap={},t.clearChartConditionDataCancelTokenMap=function(){for(var a in t.chartConditionDataCancelTokenMap)t.chartConditionDataCancelTokenMap.hasOwnProperty(a)&&t.chartConditionDataCancelTokenMap[a].cancel("Abort axios");t.chartConditionDataCancelTokenMap={}},t.ChartConditionData=n.types.model("ChartConditionData",{loadState:r.state,loadError:n.types.optional(n.types.frozen(),{}),data:n.types.optional(n.types.frozen(),null)}).actions(function(a){return{loadData:r.asyncAction(a,{method:"post",reqUrlAndDataAndConfig:function(n,r){var d=n.frontendId+"-"+r.frontendId,s=a?o.getRoot(a).report.current:null;if(!s)return{url:"/api/404",reqData:{}};var c="/api/chart-condition-data/dataModelProxy",C={reportHash:s.data.hash,dataModelHash:n.dataModelHash,dimension:r},l={};if(/^\/(report)\//i.test(window.location.pathname)){var p=window.location.pathname.split("/").pop();if(c="/api/reportShare/"+p+"/report/"+s.data.hash+"/chart-condition-data",s&&2===s.data.authType){s.sharePassword&&(C.sharePassword=s.sharePassword);var h=i.getPasswordFreeHost();h&&(C.o=h)}}else/^\/i\/report\//i.test(window.location.pathname)&&s&&(l={headers:{"sugar-company":s.data.companyKey}});var u={url:c,reqData:C,reqConfig:l};return t.chartConditionDataCancelTokenMap[d]&&t.chartConditionDataCancelTokenMap[d].cancel&&t.chartConditionDataCancelTokenMap[d].cancel("Abort axios"),t.chartConditionDataCancelTokenMap[d]=e.default.CancelToken.source(),u.reqConfig.cancelToken=t.chartConditionDataCancelTokenMap[d].token,u},showError:!1})}}),t.ChartConditionDataHub=n.types.model("ChartConditionDataHub",{mapByChartAndDimFrontendId:n.types.optional(n.types.map(t.ChartConditionData),{})}).actions(function(a){return{clearChartConditionDataHub:function(){t.clearChartConditionDataCancelTokenMap(),a.mapByChartAndDimFrontendId.clear()},getChartConditionDataByFrontendId:function(t,n){var o=t+"-"+n,e=a.mapByChartAndDimFrontendId.get(o);return e||(a.mapByChartAndDimFrontendId.set(o,{}),e=a.mapByChartAndDimFrontendId.get(o)),e}}})});
;sugar.define("sugar:stores/chart-condition-value.ts",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChartConditionValueHub=void 0;var a=e("sugar:node_modules/mobx-state-tree/dist/mobx-state-tree.js"),n=e("sugar:utils/date-helper.ts"),d=e("sugar:node_modules/moment/moment.js");t.ChartConditionValueHub=a.types.model("ChartConditionValueHub",{mapByChartAndDimFrontendId:a.types.optional(a.types.map(a.types.frozen()),{})}).actions(function(e){return{setValue:function(t,a,n){var d=t+"-"+a;e.mapByChartAndDimFrontendId.set(d,n)},getValueOtherwiseByDeafaultVal:function(t,a){var n=t+"-"+a.frontendId;return!e.mapByChartAndDimFrontendId.has(n)&&a.chartCon&&e.setValueByDeafaultVal(t,a,a.chartCon.defaultValue),e.mapByChartAndDimFrontendId.get(n)},setValueByDeafaultVal:function(t,a,i){if(a){var r=a.dataType,o=t+"-"+a.frontendId;if(("string"===r||"int"===r)&&e.mapByChartAndDimFrontendId.set(o,i),"date"===r||"datetime"===r||"timestamp"===r){var u=i.date,l=i.config,s=void 0;"date"===r?s=n.getDateRangeByDefaultVal(u||"",(null===l||void 0===l?void 0:l.cusDefaultValBegin)||"",(null===l||void 0===l?void 0:l.cusDefaultValEnd)||""):("datetime"===r||"timestamp"===r)&&(s=n.getDateTimeRangeByDefaultVal(u||"",(null===l||void 0===l?void 0:l.cusDefaultValBegin)||"",(null===l||void 0===l?void 0:l.cusDefaultValEnd)||""));var m={startDate:String(parseInt(d(s.minDate).valueOf()/1e3)||""),endDate:String(parseInt(d(s.maxDate).valueOf()/1e3)||"")};e.mapByChartAndDimFrontendId.set(o,m)}}},deleteValue:function(t,a){var n=t+"-"+a;e.mapByChartAndDimFrontendId.delete(n)}}})});
;sugar.define("sugar:stores/chart-condition.ts",function(t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.ChartCondition=void 0;var a=t("sugar:node_modules/mobx-state-tree/dist/mobx-state-tree.js"),n=t("sugar:stores/chart-condition-data.ts"),i=t("sugar:stores/chart-condition-value.ts");o.ChartCondition=a.types.model("ChartCondition",{chartConditionData:a.types.optional(n.ChartConditionDataHub,{}),chartConditionValue:a.types.optional(i.ChartConditionValueHub,{})}).actions(function(t){return{clearHub:function(){t.chartConditionData.clearChartConditionDataHub(),t.chartConditionValue.mapByChartAndDimFrontendId.clear()}}})});
;sugar.define("sugar:stores/custom-table-detail-entity.ts",function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=t("sugar:node_modules/mobx-state-tree/dist/mobx-state-tree.js"),a=s.types.model("CustomTableDetailEntity",{hash:s.types.optional(s.types.identifier,""),name:s.types.optional(s.types.string,""),sql:s.types.optional(s.types.string,"")});e.default=a});
;sugar.define("sugar:stores/custom-table-detail-map.ts",function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=t("sugar:node_modules/mobx-state-tree/dist/mobx-state-tree.js"),a=t("sugar:stores/index.ts"),o=t("sugar:stores/helper.ts"),r=t("sugar:stores/custom-table-detail-entity.ts"),u=s.types.model("CustomTableDetailMap",{mapByHash:s.types.optional(s.types.map(r.default),{})}).actions(function(t){return{loadDetail:o.asyncAction(t,{url:function(e){var s=a.getRoot(t),o=s.group.current.data.hash;return"/api/group/"+o+"/customTable/"+e},success:function(e){t.mapByHash.set(e.data.hash,e.data)}})}});e.default=u});
;sugar.define("sugar:stores/custom-table.ts",function(t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.CustomTableEntity=void 0;{var e=t("sugar:utils/i18n.ts"),s=t("sugar:node_modules/mobx-state-tree/dist/mobx-state-tree.js"),o=t("sugar:node_modules/amis/lib/index.js"),n=t("sugar:stores/index.ts"),r=t("sugar:stores/helper.ts"),u=t("sugar:stores/custom-table-detail-map.ts"),i=s.types.model("CustomTableListDeyail",{hash:s.types.optional(s.types.identifier,""),name:s.types.optional(s.types.string,"")}),l=s.types.model("CustomTableleList",{loadState:r.state,loadError:s.types.optional(s.types.frozen(),{}),data:s.types.optional(s.types.array(i),[])}).actions(function(t){return{loadData:r.asyncAction(t,{url:function(a){var e=n.getRoot(t),s=e.group.current.data.hash;return"/api/group/"+s+"/customTable/customTableList?datamodelHash="+a},success:function(a){var e=n.getRoot(t);e.customTable.setDatamodelHash(e.dataModel.current.data.hash),t.data=a.data}}),add:r.asyncAction(t,{method:"post",url:function(){var a=n.getRoot(t),e=a.group.current.data.hash;return"/api/group/"+e+"/customTable"},reqData:function(t){return t},success:function(){o.toast.success(e.default("添加自定义SQL视图成功！"))}}),update:r.asyncAction(t,{method:"put",url:function(a){var e=n.getRoot(t),s=e.group.current.data.hash;return"/api/group/"+s+"/customTable/"+a.hash},reqData:function(t){return t},success:function(a){if(o.toast.success(e.default("修改自定义SQL视图成功！")),a.data.syn){var s=n.getRoot(t);s.dataModel.current.data.config.setSynTable(s.dataModel.current.data.config.tables.some(function(t){return t.customTableHash===a.data.hash})?!0:!1)}}}),"delete":r.asyncAction(t,{method:"remove",url:function(a){var e=n.getRoot(t),s=e.group.current.data.hash;return"/api/group/"+s+"/customTable/"+a.hash},reqData:function(t){return t},success:function(){o.toast.success(e.default("删除自定义SQL视图成功！"))}})}});s.types.model("CustomTableDetailEntity",{hash:s.types.optional(s.types.identifier,""),dbHashes:s.types.optional(s.types.array(s.types.string),[]),datamodelHash:s.types.optional(s.types.string,""),name:s.types.optional(s.types.string,""),sql:s.types.optional(s.types.string,"")})}a.CustomTableEntity=s.types.model("CustomTableEntity",{datamodelHash:s.types.optional(s.types.string,""),list:s.types.optional(l,{}),customTableDetailMap:s.types.optional(u.default,{})}).actions(function(t){return{setDatamodelHash:function(a){t.datamodelHash=a}}})});
;sugar.define("sugar:stores/chart-warning-detail-entity.ts",function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DetectionTime=e.WarningConditions=e.WarningConditionprovisional=e.WarningCondition=e.MeasureConditions=e.DimConditions=void 0;var i=t("sugar:node_modules/mobx-state-tree/dist/mobx-state-tree.js");e.DimConditions=i.types.model("DimConditions",{dimField:i.types.optional(i.types.string,""),dimSelect:i.types.optional(i.types.string,"")}),e.MeasureConditions=i.types.model("MeasureConditions",{meaField:i.types.optional(i.types.string,""),symbol:i.types.optional(i.types.string,""),threshold:i.types.optional(i.types.string,"")}),e.WarningCondition=i.types.model("WarningCondition",{id:i.types.optional(i.types.string,""),dimConditions:i.types.optional(i.types.array(e.DimConditions),[]),measureConditions:i.types.optional(e.MeasureConditions,{})}),e.WarningConditionprovisional=i.types.model("WarningConditionprovisional",{warningCondition:i.types.optional(e.WarningCondition,{})}),e.WarningConditions=i.types.model("WarningConditions",{rulesConnect:i.types.optional(i.types.string,""),dateConnect:i.types.optional(i.types.string,""),dateField:i.types.optional(i.types.string,""),dateConnectVal:i.types.optional(i.types.number,1),warningCondition:i.types.optional(i.types.frozen(),[])}),e.DetectionTime=i.types.model("DetectionTime",{frequency:i.types.optional(i.types.string,""),date:i.types.optional(i.types.number,1),day:i.types.optional(i.types.number,1),hour:i.types.optional(i.types.number,10),minute:i.types.optional(i.types.number,0),cron:i.types.optional(i.types.string,"")});var n=i.types.model("Setting",{isRepeat:i.types.optional(i.types.number,1),receiverList:i.types.array(i.types.string),receiverRoleList:i.types.array(i.types.string),webhookTitle:i.types.optional(i.types.string,""),emailBody:i.types.optional(i.types.string,""),webhookMsg:i.types.optional(i.types.string,""),emailTitle:i.types.optional(i.types.string,"")}),o=i.types.model("ChartWarningDetailEntity",{hash:i.types.optional(i.types.identifier,""),url:i.types.optional(i.types.string,""),name:i.types.optional(i.types.string,""),userEmailId:i.types.optional(i.types.string,""),enable:i.types.optional(i.types.number,1),dataPermission:i.types.optional(i.types.number,1),warningConditions:i.types.optional(e.WarningConditions,{}),detectionTime:i.types.optional(e.DetectionTime,{}),notificationMethod:i.types.optional(i.types.enumeration(["email","wechat"]),"email"),setting:i.types.optional(n,{})});e.default=o});
;sugar.define("sugar:stores/chart-warning-detail-map.ts",function(t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var e=t("sugar:node_modules/mobx-state-tree/dist/mobx-state-tree.js"),s=t("sugar:stores/index.ts"),r=t("sugar:stores/helper.ts"),n=t("sugar:stores/chart-warning-detail-entity.ts"),o=e.types.model("ChartWarningDetailMap",{mapByHash:e.types.optional(e.types.map(n.default),{})}).actions(function(t){return{loadDetail:r.asyncAction(t,{url:function(a,e){var r=s.getRoot(t),n=r.group.current.data.hash;return"/api/group/"+n+"/chartWarning/"+a+"?reportOrDashboardHash="+e},success:function(a){t.mapByHash.set(a.data.hash,a.data)}})}});a.default=o});
;sugar.define("sugar:stores/chart-warning.ts",function(t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.ChartWarningEntity=a.ChartWarningDetailEntity=void 0;var r=t("sugar:utils/i18n.ts"),e=t("sugar:node_modules/mobx-state-tree/dist/mobx-state-tree.js"),n=t("sugar:stores/index.ts"),s=t("sugar:node_modules/amis/lib/index.js"),o=t("sugar:stores/helper.ts"),i=t("sugar:stores/chart-warning-detail-map.ts"),u=e.types.model("ChartWarningListDetail",{hash:e.types.optional(e.types.identifier,""),name:e.types.optional(e.types.string,""),overdueData:e.types.optional(e.types.array(e.types.string),[])}),c=e.types.model("ChartWarningList",{loadState:o.state,loadError:e.types.optional(e.types.frozen(),{}),data:e.types.optional(e.types.array(u),[])}).actions(function(t){return{loadData:o.asyncAction(t,{url:function(a){var r=n.getRoot(t),e=r.group.current.data.hash;return"/api/group/"+e+"/chartWarning/chartWarningList?chartHash="+a},success:function(a){t.data=a.data}}),add:o.asyncAction(t,{method:"post",url:function(){var a=n.getRoot(t),r=a.group.current.data.hash;return"/api/group/"+r+"/chartWarning"},reqData:function(t){return t},success:function(a){t.data=a.data,s.toast.success(r.default("添加数据预警成功！"))},fail:function(){s.toast.error(r.default("添加数据预警失败！"))}}),update:o.asyncAction(t,{method:"put",url:function(a){var r=n.getRoot(t),e=r.group.current.data.hash;return"/api/group/"+e+"/chartWarning/"+a.hash},reqData:function(t){return t},success:function(a){t.data=a.data,s.toast.success(r.default("修改数据预警成功！"))},fail:function(){s.toast.error(r.default("修改数据预警失败！"))}}),"delete":o.asyncAction(t,{method:"remove",url:function(a,r,e){var s=n.getRoot(t),o=s.group.current.data.hash;return"/api/group/"+o+"/chartWarning/"+a+"?reportOrDashboardHash="+r+"&chartHash="+e},reqData:function(t){return t},success:function(a){t.data=a.data,s.toast.success(r.default("删除数据预警成功！"))},fail:function(){s.toast.error(r.default("删除数据预警失败！"))}})}});a.ChartWarningDetailEntity=e.types.model("ChartWarningDetailEntity",{hash:e.types.optional(e.types.identifier,""),chartHash:e.types.optional(e.types.string,""),datamodelHash:e.types.optional(e.types.string,""),name:e.types.optional(e.types.string,"")}),a.ChartWarningEntity=e.types.model("ChartWarningEntity",{list:e.types.optional(c,{}),chartWarningDetailMap:e.types.optional(i.default,{})})});
;sugar.define("sugar:stores/overview.ts",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Overview=t.CompanyOverviewEntity=t.OverviewEntity=void 0;var o=e("sugar:node_modules/mobx-state-tree/dist/mobx-state-tree.js"),n=e("sugar:stores/helper.ts");t.OverviewEntity=o.types.model("OverViewEntity",{name:o.types.optional(o.types.string,""),count:o.types.optional(o.types.number,0),icon:o.types.optional(o.types.string,"")}),t.CompanyOverviewEntity=o.types.model("CompanyOverviewEntity",{userCount:o.types.optional(o.types.number,0),publishDashboardNum:o.types.optional(o.types.number,0),companyDashboardCount:o.types.optional(o.types.number,0),publishReportNum:o.types.optional(o.types.number,0),companyReportCount:o.types.optional(o.types.number,0)}),t.Overview=o.types.model("ProductNews",{loadState:n.state,loadError:o.types.optional(o.types.frozen(),{}),data:o.types.optional(o.types.array(t.OverviewEntity),[]),loadCompanyOverviewState:n.state,loadCompanyOverviewError:o.types.optional(o.types.frozen(),{}),companyOverviewData:o.types.optional(t.CompanyOverviewEntity,{})}).actions(function(e){return{load:n.asyncAction(e,{url:function(e){return"/api/overview?groupHash="+e},showError:!1}),loadCompanyOverview:n.asyncAction(e,{url:"/api/overview/getCompanyOverview",success:function(t){e.companyOverviewData=t.data}})}})});
;sugar.define("sugar:stores/widget-template.ts",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WidgetTemplate=void 0;var o=e("sugar:node_modules/mobx-state-tree/dist/mobx-state-tree.js");t.WidgetTemplate=o.types.model("WidgetTemplate",{showAddTemplate:o.types.optional(o.types.boolean,!1),showSelectTemplate:o.types.optional(o.types.boolean,!1)}).actions(function(e){return{toggleAddTemplate:function(t){e.showAddTemplate=t},toggleSelectTemplate:function(t){e.showSelectTemplate=t}}})});
;sugar.define("sugar:widgets/charts/theme/sugar.ts",function(o,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={color:["#c23531","#2f4554","#61a0a8","#d48265","#91c7ae","#749f83","#ca8622","#bda29a","#6e7074","#546570","#c4ccd3"],backgroundColor:"rgba(0,0,0,0)",textStyle:{},title:{textStyle:{color:"#333333"},subtextStyle:{color:"#aaa"}},line:{itemStyle:{normal:{borderWidth:1}},lineStyle:{normal:{width:2}},symbolSize:4,symbol:"emptyCircle",smooth:!1},radar:{itemStyle:{normal:{borderWidth:1}},lineStyle:{normal:{width:2}},symbolSize:4,symbol:"emptyCircle",smooth:!1},bar:{itemStyle:{normal:{barBorderWidth:0,barBorderColor:"#ccc"},emphasis:{barBorderWidth:0,barBorderColor:"#ccc"}}},pie:{itemStyle:{normal:{borderWidth:0,borderColor:"#ccc"},emphasis:{borderWidth:0,borderColor:"#ccc"}}},scatter:{itemStyle:{normal:{borderWidth:0,borderColor:"#ccc"},emphasis:{borderWidth:0,borderColor:"#ccc"}}},boxplot:{itemStyle:{normal:{borderWidth:0,borderColor:"#ccc"},emphasis:{borderWidth:0,borderColor:"#ccc"}}},parallel:{itemStyle:{normal:{borderWidth:0,borderColor:"#ccc"},emphasis:{borderWidth:0,borderColor:"#ccc"}}},sankey:{itemStyle:{normal:{borderWidth:0,borderColor:"#ccc"},emphasis:{borderWidth:0,borderColor:"#ccc"}}},funnel:{itemStyle:{normal:{borderWidth:0,borderColor:"#ccc"},emphasis:{borderWidth:0,borderColor:"#ccc"}}},gauge:{itemStyle:{normal:{borderWidth:0,borderColor:"#ccc"},emphasis:{borderWidth:0,borderColor:"#ccc"}}},candlestick:{itemStyle:{normal:{color:"#c23531",color0:"#314656",borderColor:"#c23531",borderColor0:"#314656",borderWidth:1}}},graph:{itemStyle:{normal:{borderWidth:0,borderColor:"#ccc"}},lineStyle:{normal:{width:1,color:"#aaa"}},symbolSize:4,symbol:"emptyCircle",smooth:!1,color:["#c23531","#2f4554","#61a0a8","#d48265","#91c7ae","#749f83","#ca8622","#bda29a","#6e7074","#546570","#c4ccd3"],label:{normal:{textStyle:{color:"#eee"}}}},map:{itemStyle:{normal:{areaColor:"#eeeeee",borderColor:"#444444",borderWidth:.5},emphasis:{areaColor:"rgba(255,215,0,0.8)",borderColor:"#444",borderWidth:1}},label:{normal:{textStyle:{color:"#000000"}},emphasis:{textStyle:{color:"rgb(100,0,0)"}}}},geo:{itemStyle:{normal:{areaColor:"#eeeeee",borderColor:"#444444",borderWidth:.5},emphasis:{areaColor:"rgba(255,215,0,0.8)",borderColor:"#444",borderWidth:1}},label:{normal:{textStyle:{color:"#000000"}},emphasis:{textStyle:{color:"rgb(100,0,0)"}}}},categoryAxis:{axisLine:{show:!0,lineStyle:{color:"#333"}},axisTick:{show:!0,lineStyle:{color:"#333"}},axisLabel:{show:!0,textStyle:{color:"#333"}},splitLine:{show:!1,lineStyle:{color:["#ccc"]}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]}}},valueAxis:{axisLine:{show:!0,lineStyle:{color:"#333"}},axisTick:{show:!0,lineStyle:{color:"#333"}},axisLabel:{show:!0,textStyle:{color:"#333"}},splitLine:{show:!0,lineStyle:{color:["#ccc"]}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]}}},logAxis:{axisLine:{show:!0,lineStyle:{color:"#333"}},axisTick:{show:!0,lineStyle:{color:"#333"}},axisLabel:{show:!0,textStyle:{color:"#333"}},splitLine:{show:!0,lineStyle:{color:["#ccc"]}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]}}},timeAxis:{axisLine:{show:!0,lineStyle:{color:"#333"}},axisTick:{show:!0,lineStyle:{color:"#333"}},axisLabel:{show:!0,textStyle:{color:"#333"}},splitLine:{show:!0,lineStyle:{color:["#ccc"]}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]}}},toolbox:{iconStyle:{normal:{borderColor:"#999999"},emphasis:{borderColor:"#666666"}}},legend:{textStyle:{color:"#333333"}},tooltip:{backgroundColor:"rgba(50,50,50,0.7)",borderWidth:0,padding:5,textStyle:{color:"#fff"},axisPointer:{lineStyle:{color:"#cccccc",width:1},crossStyle:{color:"#cccccc",width:1}}},timeline:{lineStyle:{color:"#293c55",width:1},itemStyle:{normal:{color:"#293c55",borderWidth:1},emphasis:{color:"#a9334c"}},controlStyle:{normal:{color:"#293c55",borderColor:"#293c55",borderWidth:.5},emphasis:{color:"#293c55",borderColor:"#293c55",borderWidth:.5}},checkpointStyle:{color:"#e43c59",borderColor:"rgba(194,53,49,0.5)"},label:{normal:{textStyle:{color:"#293c55"}},emphasis:{textStyle:{color:"#293c55"}}}},visualMap:{color:["#bf444c","#d88273","#f6efa6"]},dataZoom:{backgroundColor:"rgba(47,69,84,0)",dataBackgroundColor:"rgba(47,69,84,0.3)",fillerColor:"rgba(167,183,204,0.4)",handleColor:"#a7b7cc",handleSize:"100%",textStyle:{color:"#333333"}},markPoint:{label:{normal:{textStyle:{color:"#eee"}},emphasis:{textStyle:{color:"#eee"}}}}}});
;sugar.define("sugar:widgets/charts/theme/colorui.ts",function(o,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={color:["#f37b1d","#38b54a","#0080ff","#9c26b0","#e54d42","#8dc63f","#1bbbb4","#6739b6","#fbbd08","#e03897","#a5673f","#8799a3"],backgroundColor:"rgba(0,0,0,0)",textStyle:{},title:{textStyle:{color:"#0080ff"},subtextStyle:{color:"#aaaaaa"}},line:{itemStyle:{normal:{borderWidth:1}},lineStyle:{normal:{width:2}},symbolSize:3,symbol:"emptyCircle",smooth:!0},radar:{itemStyle:{normal:{borderWidth:1}},lineStyle:{normal:{width:2}},symbolSize:3,symbol:"emptyCircle",smooth:!0},bar:{itemStyle:{normal:{barBorderWidth:0,barBorderColor:"#ccc"},emphasis:{barBorderWidth:0,barBorderColor:"#ccc"}}},pie:{itemStyle:{normal:{borderWidth:0,borderColor:"#ccc"},emphasis:{borderWidth:0,borderColor:"#ccc"}}},scatter:{itemStyle:{normal:{borderWidth:0,borderColor:"#ccc"},emphasis:{borderWidth:0,borderColor:"#ccc"}}},boxplot:{itemStyle:{normal:{borderWidth:0,borderColor:"#ccc"},emphasis:{borderWidth:0,borderColor:"#ccc"}}},parallel:{itemStyle:{normal:{borderWidth:0,borderColor:"#ccc"},emphasis:{borderWidth:0,borderColor:"#ccc"}}},sankey:{itemStyle:{normal:{borderWidth:0,borderColor:"#ccc"},emphasis:{borderWidth:0,borderColor:"#ccc"}}},funnel:{itemStyle:{normal:{borderWidth:0,borderColor:"#ccc"},emphasis:{borderWidth:0,borderColor:"#ccc"}}},gauge:{itemStyle:{normal:{borderWidth:0,borderColor:"#ccc"},emphasis:{borderWidth:0,borderColor:"#ccc"}}},candlestick:{itemStyle:{normal:{color:"#d87a80",color0:"#2ec7c9",borderColor:"#d87a80",borderColor0:"#2ec7c9",borderWidth:1}}},graph:{itemStyle:{normal:{borderWidth:0,borderColor:"#ccc"}},lineStyle:{normal:{width:1,color:"#aaaaaa"}},symbolSize:3,symbol:"emptyCircle",smooth:!0,color:["#f37b1d","#38b54a","#e54d42","#0080ff","#fbbd08","#8dc63f","#1bbbb4","#6739b6","#9c26b0","#e03897","#a5673f","#8799a3"],label:{normal:{textStyle:{color:"#eeeeee"}}}},map:{itemStyle:{normal:{areaColor:"#dddddd",borderColor:"#eeeeee",borderWidth:.5},emphasis:{areaColor:"rgba(254,153,78,1)",borderColor:"#444444",borderWidth:1}},label:{normal:{textStyle:{color:"#d87a80"}},emphasis:{textStyle:{color:"rgb(100,0,0)"}}}},geo:{itemStyle:{normal:{areaColor:"#dddddd",borderColor:"#eeeeee",borderWidth:.5},emphasis:{areaColor:"rgba(254,153,78,1)",borderColor:"#444444",borderWidth:1}},label:{normal:{textStyle:{color:"#d87a80"}},emphasis:{textStyle:{color:"rgb(100,0,0)"}}}},categoryAxis:{axisLine:{show:!0,lineStyle:{color:"#008acd"}},axisTick:{show:!0,lineStyle:{color:"#333"}},axisLabel:{show:!0,textStyle:{color:"#333"}},splitLine:{show:!1,lineStyle:{color:["#eee"]}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]}}},valueAxis:{axisLine:{show:!0,lineStyle:{color:"#008acd"}},axisTick:{show:!0,lineStyle:{color:"#333"}},axisLabel:{show:!0,textStyle:{color:"#333"}},splitLine:{show:!0,lineStyle:{color:["#eee"]}},splitArea:{show:!0,areaStyle:{color:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]}}},logAxis:{axisLine:{show:!0,lineStyle:{color:"#008acd"}},axisTick:{show:!0,lineStyle:{color:"#333"}},axisLabel:{show:!0,textStyle:{color:"#333"}},splitLine:{show:!0,lineStyle:{color:["#eee"]}},splitArea:{show:!0,areaStyle:{color:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]}}},timeAxis:{axisLine:{show:!0,lineStyle:{color:"#008acd"}},axisTick:{show:!0,lineStyle:{color:"#333"}},axisLabel:{show:!0,textStyle:{color:"#333"}},splitLine:{show:!0,lineStyle:{color:["#eee"]}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]}}},toolbox:{iconStyle:{normal:{borderColor:"#2ec7c9"},emphasis:{borderColor:"#18a4a6"}}},legend:{textStyle:{color:"#333333"}},tooltip:{backgroundColor:"rgba(50,50,50,0.7)",borderWidth:0,padding:5,textStyle:{color:"#fff"},axisPointer:{lineStyle:{color:"#0080ff",width:"1"},crossStyle:{color:"#0080ff",width:"1"}}},timeline:{lineStyle:{color:"#0080ff",width:1},itemStyle:{normal:{color:"#0080ff",borderWidth:1},emphasis:{color:"#cce6ff"}},controlStyle:{normal:{color:"#0080ff",borderColor:"#0080ff",borderWidth:.5},emphasis:{color:"#0080ff",borderColor:"#0080ff",borderWidth:.5}},checkpointStyle:{color:"#2ec7c9",borderColor:"rgba(46,199,201,0.4)"},label:{normal:{textStyle:{color:"#008acd"}},emphasis:{textStyle:{color:"#008acd"}}}},visualMap:{color:["#5ab1ef","#e0ffff"]},dataZoom:{backgroundColor:"rgba(47,69,84,0)",dataBackgroundColor:"rgba(239,239,255,1)",fillerColor:"rgba(182,162,222,0.2)",handleColor:"#0080ff",handleSize:"100%",textStyle:{color:"#333333"}},markPoint:{label:{normal:{textStyle:{color:"#eeeeee"}},emphasis:{textStyle:{color:"#eeeeee"}}}}}});
;sugar.define("sugar:widgets/charts/theme/aipage.ts",function(o,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={color:["#00aaaf","#d0427c","#3899ec","#60bc57","#f8a239","#7266ba","#e64e1e"],backgroundColor:"rgba(0,0,0,0)",textStyle:{},title:{textStyle:{color:"#27727b"},subtextStyle:{color:"#aaaaaa"}},line:{itemStyle:{normal:{borderWidth:1}},lineStyle:{normal:{width:3},width:3},symbolSize:5,symbol:"emptyCircle",smooth:!1},radar:{itemStyle:{normal:{borderWidth:1}},lineStyle:{normal:{width:3}},symbolSize:5,symbol:"emptyCircle",smooth:!1},bar:{itemStyle:{normal:{barBorderWidth:0,barBorderColor:"#ccc"},emphasis:{barBorderWidth:0,barBorderColor:"#ccc"}}},pie:{itemStyle:{normal:{borderWidth:0,borderColor:"#ccc"},emphasis:{borderWidth:0,borderColor:"#ccc"}}},scatter:{itemStyle:{normal:{borderWidth:0,borderColor:"#ccc"},emphasis:{borderWidth:0,borderColor:"#ccc"}}},boxplot:{itemStyle:{normal:{borderWidth:0,borderColor:"#ccc"},emphasis:{borderWidth:0,borderColor:"#ccc"}}},parallel:{itemStyle:{normal:{borderWidth:0,borderColor:"#ccc"},emphasis:{borderWidth:0,borderColor:"#ccc"}}},sankey:{itemStyle:{normal:{borderWidth:0,borderColor:"#ccc"},emphasis:{borderWidth:0,borderColor:"#ccc"}}},funnel:{itemStyle:{normal:{borderWidth:0,borderColor:"#ccc"},emphasis:{borderWidth:0,borderColor:"#ccc"}}},gauge:{itemStyle:{normal:{borderWidth:0,borderColor:"#ccc"},emphasis:{borderWidth:0,borderColor:"#ccc"}}},candlestick:{itemStyle:{normal:{color:"#c1232b",color0:"#b5c334",borderColor:"#c1232b",borderColor0:"#b5c334",borderWidth:1}}},graph:{itemStyle:{normal:{borderWidth:0,borderColor:"#ccc"}},lineStyle:{normal:{width:1,color:"#aaaaaa"}},symbolSize:5,symbol:"emptyCircle",smooth:!1,color:["#c1232b","#27727b","#fcce10","#e87c25","#b5c334","#fe8463","#9bca63","#fad860","#f3a43b","#60c0dd","#d7504b","#c6e579","#f4e001","#f0805a","#26c0c0"],label:{normal:{textStyle:{color:"#eeeeee"}}}},map:{itemStyle:{normal:{areaColor:"#dddddd",borderColor:"#eeeeee",borderWidth:.5},emphasis:{areaColor:"rgba(254,153,78,1)",borderColor:"#444444",borderWidth:1}},label:{normal:{textStyle:{color:"#c1232b"}},emphasis:{textStyle:{color:"rgb(100,0,0)"}}}},geo:{itemStyle:{normal:{areaColor:"#dddddd",borderColor:"#eeeeee",borderWidth:.5},emphasis:{areaColor:"rgba(254,153,78,1)",borderColor:"#444444",borderWidth:1}},label:{normal:{textStyle:{color:"#c1232b"}},emphasis:{textStyle:{color:"rgb(100,0,0)"}}}},categoryAxis:{axisLine:{show:!0,lineStyle:{color:"#27727b"}},axisTick:{show:!0,lineStyle:{color:"#27727b"}},axisLabel:{show:!0,textStyle:{color:"#333"}},splitLine:{show:!1,lineStyle:{color:["#ccc"]}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]}}},valueAxis:{axisLine:{show:!0,lineStyle:{color:"#333"}},axisTick:{show:!0,lineStyle:{color:"#333"}},axisLabel:{show:!0,textStyle:{color:"#333"}},splitLine:{show:!0,lineStyle:{color:["#ccc"]}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]}}},logAxis:{axisLine:{show:!0,lineStyle:{color:"#27727b"}},axisTick:{show:!0,lineStyle:{color:"#333"}},axisLabel:{show:!0,textStyle:{color:"#333"}},splitLine:{show:!0,lineStyle:{color:["#ccc"]}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]}}},timeAxis:{axisLine:{show:!0,lineStyle:{color:"#27727b"}},axisTick:{show:!0,lineStyle:{color:"#333"}},axisLabel:{show:!0,textStyle:{color:"#333"}},splitLine:{show:!0,lineStyle:{color:["#ccc"]}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]}}},toolbox:{iconStyle:{normal:{borderColor:"#c1232b"},emphasis:{borderColor:"#e87c25"}}},legend:{textStyle:{color:"#333333"}},tooltip:{backgroundColor:"rgba(50,50,50,0.7)",borderWidth:0,padding:5,textStyle:{color:"#fff"},axisPointer:{lineStyle:{color:"#27727b",width:1},crossStyle:{color:"#27727b",width:1}}},timeline:{lineStyle:{color:"#293c55",width:1},itemStyle:{normal:{color:"#27727b",borderWidth:1},emphasis:{color:"#72d4e0"}},controlStyle:{normal:{color:"#27727b",borderColor:"#27727b",borderWidth:.5},emphasis:{color:"#27727b",borderColor:"#27727b",borderWidth:.5}},checkpointStyle:{color:"#c1232b",borderColor:"rgba(194,53,49,0.5)"},label:{normal:{textStyle:{color:"#293c55"}},emphasis:{textStyle:{color:"#293c55"}}}},visualMap:{color:["#c1232b","#fcce10"]},dataZoom:{backgroundColor:"rgba(0,0,0,0)",dataBackgroundColor:"rgba(181,195,52,0.3)",fillerColor:"rgba(181,195,52,0.2)",handleColor:"#27727b",handleSize:"100%",textStyle:{color:"#999999"}},markPoint:{label:{normal:{textStyle:{color:"#eeeeee"}},emphasis:{textStyle:{color:"#eeeeee"}}}}}});
;sugar.define("sugar:widgets/charts/theme/vintage.ts",function(o,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={color:["#d87c7c","#919e8b","#d7ab82","#6e7074","#61a0a8","#efa18d","#787464","#cc7e63","#724e58","#4b565b"],backgroundColor:"rgba(254,248,239,1)",textStyle:{},title:{textStyle:{color:"#333333"},subtextStyle:{color:"#aaa"}},line:{itemStyle:{normal:{borderWidth:1}},lineStyle:{normal:{width:2}},symbolSize:4,symbol:"emptyCircle",smooth:!1},radar:{itemStyle:{normal:{borderWidth:1}},lineStyle:{normal:{width:2}},symbolSize:4,symbol:"emptyCircle",smooth:!1},bar:{itemStyle:{normal:{barBorderWidth:0,barBorderColor:"#ccc"},emphasis:{barBorderWidth:0,barBorderColor:"#ccc"}}},pie:{itemStyle:{normal:{borderWidth:0,borderColor:"#ccc"},emphasis:{borderWidth:0,borderColor:"#ccc"}}},scatter:{itemStyle:{normal:{borderWidth:0,borderColor:"#ccc"},emphasis:{borderWidth:0,borderColor:"#ccc"}}},boxplot:{itemStyle:{normal:{borderWidth:0,borderColor:"#ccc"},emphasis:{borderWidth:0,borderColor:"#ccc"}}},parallel:{itemStyle:{normal:{borderWidth:0,borderColor:"#ccc"},emphasis:{borderWidth:0,borderColor:"#ccc"}}},sankey:{itemStyle:{normal:{borderWidth:0,borderColor:"#ccc"},emphasis:{borderWidth:0,borderColor:"#ccc"}}},funnel:{itemStyle:{normal:{borderWidth:0,borderColor:"#ccc"},emphasis:{borderWidth:0,borderColor:"#ccc"}}},gauge:{itemStyle:{normal:{borderWidth:0,borderColor:"#ccc"},emphasis:{borderWidth:0,borderColor:"#ccc"}}},candlestick:{itemStyle:{normal:{color:"#c23531",color0:"#314656",borderColor:"#c23531",borderColor0:"#314656",borderWidth:1}}},graph:{itemStyle:{normal:{borderWidth:0,borderColor:"#ccc"}},lineStyle:{normal:{width:1,color:"#aaa"}},symbolSize:4,symbol:"emptyCircle",smooth:!1,color:["#d87c7c","#919e8b","#d7ab82","#6e7074","#61a0a8","#efa18d","#787464","#cc7e63","#724e58","#4b565b"],label:{normal:{textStyle:{color:"#eee"}}}},map:{itemStyle:{normal:{areaColor:"#eeeeee",borderColor:"#444444",borderWidth:.5},emphasis:{areaColor:"rgba(255,215,0,0.8)",borderColor:"#444444",borderWidth:1}},label:{normal:{textStyle:{color:"#000000"}},emphasis:{textStyle:{color:"rgb(100,0,0)"}}}},geo:{itemStyle:{normal:{areaColor:"#eeeeee",borderColor:"#444444",borderWidth:.5},emphasis:{areaColor:"rgba(255,215,0,0.8)",borderColor:"#444444",borderWidth:1}},label:{normal:{textStyle:{color:"#000000"}},emphasis:{textStyle:{color:"rgb(100,0,0)"}}}},categoryAxis:{axisLine:{show:!0,lineStyle:{color:"#333"}},axisTick:{show:!0,lineStyle:{color:"#333"}},axisLabel:{show:!0,textStyle:{color:"#333"}},splitLine:{show:!1,lineStyle:{color:["#ccc"]}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]}}},valueAxis:{axisLine:{show:!0,lineStyle:{color:"#333"}},axisTick:{show:!0,lineStyle:{color:"#333"}},axisLabel:{show:!0,textStyle:{color:"#333"}},splitLine:{show:!0,lineStyle:{color:["#ccc"]}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]}}},logAxis:{axisLine:{show:!0,lineStyle:{color:"#333"}},axisTick:{show:!0,lineStyle:{color:"#333"}},axisLabel:{show:!0,textStyle:{color:"#333"}},splitLine:{show:!0,lineStyle:{color:["#ccc"]}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]}}},timeAxis:{axisLine:{show:!0,lineStyle:{color:"#333"}},axisTick:{show:!0,lineStyle:{color:"#333"}},axisLabel:{show:!0,textStyle:{color:"#333"}},splitLine:{show:!0,lineStyle:{color:["#ccc"]}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]}}},toolbox:{iconStyle:{normal:{borderColor:"#999999"},emphasis:{borderColor:"#666666"}}},legend:{textStyle:{color:"#333333"}},tooltip:{backgroundColor:"rgba(50,50,50,0.7)",borderWidth:0,padding:5,textStyle:{color:"#fff"},axisPointer:{lineStyle:{color:"#cccccc",width:1},crossStyle:{color:"#cccccc",width:1}}},timeline:{lineStyle:{color:"#293c55",width:1},itemStyle:{normal:{color:"#293c55",borderWidth:1},emphasis:{color:"#a9334c"}},controlStyle:{normal:{color:"#293c55",borderColor:"#293c55",borderWidth:.5},emphasis:{color:"#293c55",borderColor:"#293c55",borderWidth:.5}},checkpointStyle:{color:"#e43c59",borderColor:"rgba(194,53,49,0.5)"},label:{normal:{textStyle:{color:"#293c55"}},emphasis:{textStyle:{color:"#293c55"}}}},visualMap:{color:["#bf444c","#d88273","#f6efa6"]},dataZoom:{backgroundColor:"rgba(47,69,84,0)",dataBackgroundColor:"rgba(47,69,84,0.3)",fillerColor:"rgba(167,183,204,0.4)",handleColor:"#a7b7cc",handleSize:"100%",textStyle:{color:"#333333"}},markPoint:{label:{normal:{textStyle:{color:"#eee"}},emphasis:{textStyle:{color:"#eee"}}}}}});
;sugar.define("sugar:widgets/charts/theme/westeros.ts",function(e,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.default={color:["#516b91","#59c4e6","#edafda","#93b7e3","#a5e7f0","#cbb0e3"],backgroundColor:"rgba(0,0,0,0)",textStyle:{},title:{textStyle:{color:"#516b91"},subtextStyle:{color:"#93b7e3"}},line:{itemStyle:{normal:{borderWidth:"2"}},lineStyle:{normal:{width:"2"}},symbolSize:"6",symbol:"emptyCircle",smooth:!0},radar:{itemStyle:{normal:{borderWidth:"2"}},lineStyle:{normal:{width:"2"}},symbolSize:"6",symbol:"emptyCircle",smooth:!0},bar:{itemStyle:{normal:{barBorderWidth:0,barBorderColor:"#ccc"},emphasis:{barBorderWidth:0,barBorderColor:"#ccc"}}},pie:{itemStyle:{normal:{borderWidth:0,borderColor:"#ccc"},emphasis:{borderWidth:0,borderColor:"#ccc"}}},scatter:{itemStyle:{normal:{borderWidth:0,borderColor:"#ccc"},emphasis:{borderWidth:0,borderColor:"#ccc"}}},boxplot:{itemStyle:{normal:{borderWidth:0,borderColor:"#ccc"},emphasis:{borderWidth:0,borderColor:"#ccc"}}},parallel:{itemStyle:{normal:{borderWidth:0,borderColor:"#ccc"},emphasis:{borderWidth:0,borderColor:"#ccc"}}},sankey:{itemStyle:{normal:{borderWidth:0,borderColor:"#ccc"},emphasis:{borderWidth:0,borderColor:"#ccc"}}},funnel:{itemStyle:{normal:{borderWidth:0,borderColor:"#ccc"},emphasis:{borderWidth:0,borderColor:"#ccc"}}},gauge:{itemStyle:{normal:{borderWidth:0,borderColor:"#ccc"},emphasis:{borderWidth:0,borderColor:"#ccc"}}},candlestick:{itemStyle:{normal:{color:"#edafda",color0:"transparent",borderColor:"#d680bc",borderColor0:"#8fd3e8",borderWidth:"2"}}},graph:{itemStyle:{normal:{borderWidth:0,borderColor:"#ccc"}},lineStyle:{normal:{width:1,color:"#aaaaaa"}},symbolSize:"6",symbol:"emptyCircle",smooth:!0,color:["#516b91","#59c4e6","#edafda","#93b7e3","#a5e7f0","#cbb0e3"],label:{normal:{textStyle:{color:"#eeeeee"}}}},map:{itemStyle:{normal:{areaColor:"#f3f3f3",borderColor:"#516b91",borderWidth:.5},emphasis:{areaColor:"rgba(165,231,240,1)",borderColor:"#516b91",borderWidth:1}},label:{normal:{textStyle:{color:"#000000"}},emphasis:{textStyle:{color:"rgb(81,107,145)"}}}},geo:{itemStyle:{normal:{areaColor:"#f3f3f3",borderColor:"#516b91",borderWidth:.5},emphasis:{areaColor:"rgba(165,231,240,1)",borderColor:"#516b91",borderWidth:1}},label:{normal:{textStyle:{color:"#000000"}},emphasis:{textStyle:{color:"rgb(81,107,145)"}}}},categoryAxis:{axisLine:{show:!0,lineStyle:{color:"#cccccc"}},axisTick:{show:!1,lineStyle:{color:"#333"}},axisLabel:{show:!0,textStyle:{color:"#999999"}},splitLine:{show:!0,lineStyle:{color:["#eeeeee"]}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.05)","rgba(200,200,200,0.02)"]}}},valueAxis:{axisLine:{show:!0,lineStyle:{color:"#cccccc"}},axisTick:{show:!1,lineStyle:{color:"#333"}},axisLabel:{show:!0,textStyle:{color:"#999999"}},splitLine:{show:!0,lineStyle:{color:["#eeeeee"]}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.05)","rgba(200,200,200,0.02)"]}}},logAxis:{axisLine:{show:!0,lineStyle:{color:"#cccccc"}},axisTick:{show:!1,lineStyle:{color:"#333"}},axisLabel:{show:!0,textStyle:{color:"#999999"}},splitLine:{show:!0,lineStyle:{color:["#eeeeee"]}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.05)","rgba(200,200,200,0.02)"]}}},timeAxis:{axisLine:{show:!0,lineStyle:{color:"#cccccc"}},axisTick:{show:!1,lineStyle:{color:"#333"}},axisLabel:{show:!0,textStyle:{color:"#999999"}},splitLine:{show:!0,lineStyle:{color:["#eeeeee"]}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.05)","rgba(200,200,200,0.02)"]}}},toolbox:{iconStyle:{normal:{borderColor:"#999999"},emphasis:{borderColor:"#666666"}}},legend:{textStyle:{color:"#999999"}},tooltip:{backgroundColor:"rgba(50,50,50,0.7)",borderWidth:0,padding:5,textStyle:{color:"#fff"},axisPointer:{lineStyle:{color:"#cccccc",width:1},crossStyle:{color:"#cccccc",width:1}}},timeline:{lineStyle:{color:"#8fd3e8",width:1},itemStyle:{normal:{color:"#8fd3e8",borderWidth:1},emphasis:{color:"#8fd3e8"}},controlStyle:{normal:{color:"#8fd3e8",borderColor:"#8fd3e8",borderWidth:.5},emphasis:{color:"#8fd3e8",borderColor:"#8fd3e8",borderWidth:.5}},checkpointStyle:{color:"#8fd3e8",borderColor:"rgba(138,124,168,0.37)"},label:{normal:{textStyle:{color:"#8fd3e8"}},emphasis:{textStyle:{color:"#8fd3e8"}}}},visualMap:{color:["#516b91","#59c4e6","#a5e7f0"]},dataZoom:{backgroundColor:"rgba(0,0,0,0)",dataBackgroundColor:"rgba(255,255,255,0.3)",fillerColor:"rgba(167,183,204,0.4)",handleColor:"#a7b7cc",handleSize:"100%",textStyle:{color:"#333333"}},markPoint:{label:{normal:{textStyle:{color:"#eeeeee"}},emphasis:{textStyle:{color:"#eeeeee"}}}}}});
;sugar.define("sugar:widgets/charts/theme/essos.ts",function(o,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={color:["#893448","#d95850","#eb8146","#ffb248","#f2d643","#ebdba4"],backgroundColor:"rgba(242,234,191,0.15)",textStyle:{},title:{textStyle:{color:"#893448"},subtextStyle:{color:"#d95850"}},line:{itemStyle:{normal:{borderWidth:"2"}},lineStyle:{normal:{width:"2"}},symbolSize:"6",symbol:"emptyCircle",smooth:!0},radar:{itemStyle:{normal:{borderWidth:"2"}},lineStyle:{normal:{width:"2"}},symbolSize:"6",symbol:"emptyCircle",smooth:!0},bar:{itemStyle:{normal:{barBorderWidth:0,barBorderColor:"#ccc"},emphasis:{barBorderWidth:0,barBorderColor:"#ccc"}}},pie:{itemStyle:{normal:{borderWidth:0,borderColor:"#ccc"},emphasis:{borderWidth:0,borderColor:"#ccc"}}},scatter:{itemStyle:{normal:{borderWidth:0,borderColor:"#ccc"},emphasis:{borderWidth:0,borderColor:"#ccc"}}},boxplot:{itemStyle:{normal:{borderWidth:0,borderColor:"#ccc"},emphasis:{borderWidth:0,borderColor:"#ccc"}}},parallel:{itemStyle:{normal:{borderWidth:0,borderColor:"#ccc"},emphasis:{borderWidth:0,borderColor:"#ccc"}}},sankey:{itemStyle:{normal:{borderWidth:0,borderColor:"#ccc"},emphasis:{borderWidth:0,borderColor:"#ccc"}}},funnel:{itemStyle:{normal:{borderWidth:0,borderColor:"#ccc"},emphasis:{borderWidth:0,borderColor:"#ccc"}}},gauge:{itemStyle:{normal:{borderWidth:0,borderColor:"#ccc"},emphasis:{borderWidth:0,borderColor:"#ccc"}}},candlestick:{itemStyle:{normal:{color:"#eb8146",color0:"transparent",borderColor:"#d95850",borderColor0:"#58c470",borderWidth:"2"}}},graph:{itemStyle:{normal:{borderWidth:0,borderColor:"#ccc"}},lineStyle:{normal:{width:1,color:"#aaaaaa"}},symbolSize:"6",symbol:"emptyCircle",smooth:!0,color:["#893448","#d95850","#eb8146","#ffb248","#f2d643","#ebdba4"],label:{normal:{textStyle:{color:"#ffffff"}}}},map:{itemStyle:{normal:{areaColor:"#f3f3f3",borderColor:"#999999",borderWidth:.5},emphasis:{areaColor:"rgba(255,178,72,1)",borderColor:"#eb8146",borderWidth:1}},label:{normal:{textStyle:{color:"#893448"}},emphasis:{textStyle:{color:"rgb(137,52,72)"}}}},geo:{itemStyle:{normal:{areaColor:"#f3f3f3",borderColor:"#999999",borderWidth:.5},emphasis:{areaColor:"rgba(255,178,72,1)",borderColor:"#eb8146",borderWidth:1}},label:{normal:{textStyle:{color:"#893448"}},emphasis:{textStyle:{color:"rgb(137,52,72)"}}}},categoryAxis:{axisLine:{show:!0,lineStyle:{color:"#aaaaaa"}},axisTick:{show:!1,lineStyle:{color:"#333"}},axisLabel:{show:!0,textStyle:{color:"#999999"}},splitLine:{show:!0,lineStyle:{color:["#e6e6e6"]}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.05)","rgba(200,200,200,0.02)"]}}},valueAxis:{axisLine:{show:!0,lineStyle:{color:"#aaaaaa"}},axisTick:{show:!1,lineStyle:{color:"#333"}},axisLabel:{show:!0,textStyle:{color:"#999999"}},splitLine:{show:!0,lineStyle:{color:["#e6e6e6"]}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.05)","rgba(200,200,200,0.02)"]}}},logAxis:{axisLine:{show:!0,lineStyle:{color:"#aaaaaa"}},axisTick:{show:!1,lineStyle:{color:"#333"}},axisLabel:{show:!0,textStyle:{color:"#999999"}},splitLine:{show:!0,lineStyle:{color:["#e6e6e6"]}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.05)","rgba(200,200,200,0.02)"]}}},timeAxis:{axisLine:{show:!0,lineStyle:{color:"#aaaaaa"}},axisTick:{show:!1,lineStyle:{color:"#333"}},axisLabel:{show:!0,textStyle:{color:"#999999"}},splitLine:{show:!0,lineStyle:{color:["#e6e6e6"]}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.05)","rgba(200,200,200,0.02)"]}}},toolbox:{iconStyle:{normal:{borderColor:"#999999"},emphasis:{borderColor:"#666666"}}},legend:{textStyle:{color:"#999999"}},tooltip:{backgroundColor:"rgba(50,50,50,0.7)",borderWidth:0,padding:5,textStyle:{color:"#fff"},axisPointer:{lineStyle:{color:"#cccccc",width:1},crossStyle:{color:"#cccccc",width:1}}},timeline:{lineStyle:{color:"#893448",width:1},itemStyle:{normal:{color:"#893448",borderWidth:1},emphasis:{color:"#ffb248"}},controlStyle:{normal:{color:"#893448",borderColor:"#893448",borderWidth:.5},emphasis:{color:"#893448",borderColor:"#893448",borderWidth:.5}},checkpointStyle:{color:"#eb8146",borderColor:"rgba(255,178,72,0.41)"},label:{normal:{textStyle:{color:"#893448"}},emphasis:{textStyle:{color:"#893448"}}}},visualMap:{color:["#893448","#d95850","#eb8146","#ffb248","#f2d643","rgb(247,238,173)"]},dataZoom:{backgroundColor:"rgba(255,255,255,0)",dataBackgroundColor:"rgba(255,178,72,0.5)",fillerColor:"rgba(255,178,72,0.15)",handleColor:"#ffb248",handleSize:"100%",textStyle:{color:"#333333"}},markPoint:{label:{normal:{textStyle:{color:"#ffffff"}},emphasis:{textStyle:{color:"#ffffff"}}}}}});
;sugar.define("sugar:widgets/charts/theme/wonderland.ts",function(o,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={color:["#4ea397","#22c3aa","#7bd9a5","#d0648a","#f58db2","#f2b3c9"],backgroundColor:"rgba(255,255,255,0)",textStyle:{},title:{textStyle:{color:"#666666"},subtextStyle:{color:"#999999"}},line:{itemStyle:{normal:{borderWidth:"2"}},lineStyle:{normal:{width:"3"}},symbolSize:"8",symbol:"emptyCircle",smooth:!1},radar:{itemStyle:{normal:{borderWidth:"2"}},lineStyle:{normal:{width:"3"}},symbolSize:"8",symbol:"emptyCircle",smooth:!1},bar:{itemStyle:{normal:{barBorderWidth:0,barBorderColor:"#ccc"},emphasis:{barBorderWidth:0,barBorderColor:"#ccc"}}},pie:{itemStyle:{normal:{borderWidth:0,borderColor:"#ccc"},emphasis:{borderWidth:0,borderColor:"#ccc"}}},scatter:{itemStyle:{normal:{borderWidth:0,borderColor:"#ccc"},emphasis:{borderWidth:0,borderColor:"#ccc"}}},boxplot:{itemStyle:{normal:{borderWidth:0,borderColor:"#ccc"},emphasis:{borderWidth:0,borderColor:"#ccc"}}},parallel:{itemStyle:{normal:{borderWidth:0,borderColor:"#ccc"},emphasis:{borderWidth:0,borderColor:"#ccc"}}},sankey:{itemStyle:{normal:{borderWidth:0,borderColor:"#ccc"},emphasis:{borderWidth:0,borderColor:"#ccc"}}},funnel:{itemStyle:{normal:{borderWidth:0,borderColor:"#ccc"},emphasis:{borderWidth:0,borderColor:"#ccc"}}},gauge:{itemStyle:{normal:{borderWidth:0,borderColor:"#ccc"},emphasis:{borderWidth:0,borderColor:"#ccc"}}},candlestick:{itemStyle:{normal:{color:"#d0648a",color0:"transparent",borderColor:"#d0648a",borderColor0:"#22c3aa",borderWidth:"1"}}},graph:{itemStyle:{normal:{borderWidth:0,borderColor:"#ccc"}},lineStyle:{normal:{width:"1",color:"#cccccc"}},symbolSize:"8",symbol:"emptyCircle",smooth:!1,color:["#4ea397","#22c3aa","#7bd9a5","#d0648a","#f58db2","#f2b3c9"],label:{normal:{textStyle:{color:"#ffffff"}}}},map:{itemStyle:{normal:{areaColor:"#eeeeee",borderColor:"#999999",borderWidth:.5},emphasis:{areaColor:"rgba(34,195,170,0.25)",borderColor:"#22c3aa",borderWidth:1}},label:{normal:{textStyle:{color:"#28544e"}},emphasis:{textStyle:{color:"rgb(52,158,142)"}}}},geo:{itemStyle:{normal:{areaColor:"#eeeeee",borderColor:"#999999",borderWidth:.5},emphasis:{areaColor:"rgba(34,195,170,0.25)",borderColor:"#22c3aa",borderWidth:1}},label:{normal:{textStyle:{color:"#28544e"}},emphasis:{textStyle:{color:"rgb(52,158,142)"}}}},categoryAxis:{axisLine:{show:!0,lineStyle:{color:"#cccccc"}},axisTick:{show:!1,lineStyle:{color:"#333"}},axisLabel:{show:!0,textStyle:{color:"#999999"}},splitLine:{show:!0,lineStyle:{color:["#eeeeee"]}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.05)","rgba(200,200,200,0.02)"]}}},valueAxis:{axisLine:{show:!0,lineStyle:{color:"#cccccc"}},axisTick:{show:!1,lineStyle:{color:"#333"}},axisLabel:{show:!0,textStyle:{color:"#999999"}},splitLine:{show:!0,lineStyle:{color:["#eeeeee"]}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.05)","rgba(200,200,200,0.02)"]}}},logAxis:{axisLine:{show:!0,lineStyle:{color:"#cccccc"}},axisTick:{show:!1,lineStyle:{color:"#333"}},axisLabel:{show:!0,textStyle:{color:"#999999"}},splitLine:{show:!0,lineStyle:{color:["#eeeeee"]}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.05)","rgba(200,200,200,0.02)"]}}},timeAxis:{axisLine:{show:!0,lineStyle:{color:"#cccccc"}},axisTick:{show:!1,lineStyle:{color:"#333"}},axisLabel:{show:!0,textStyle:{color:"#999999"}},splitLine:{show:!0,lineStyle:{color:["#eeeeee"]}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.05)","rgba(200,200,200,0.02)"]}}},toolbox:{iconStyle:{normal:{borderColor:"#999999"},emphasis:{borderColor:"#666666"}}},legend:{textStyle:{color:"#999999"}},tooltip:{backgroundColor:"rgba(50,50,50,0.7)",borderWidth:0,padding:5,textStyle:{color:"#fff"},axisPointer:{lineStyle:{color:"#cccccc",width:1},crossStyle:{color:"#cccccc",width:1}}},timeline:{lineStyle:{color:"#4ea397",width:1},itemStyle:{normal:{color:"#4ea397",borderWidth:1},emphasis:{color:"#4ea397"}},controlStyle:{normal:{color:"#4ea397",borderColor:"#4ea397",borderWidth:.5},emphasis:{color:"#4ea397",borderColor:"#4ea397",borderWidth:.5}},checkpointStyle:{color:"#4ea397",borderColor:"rgba(60,235,210,0.3)"},label:{normal:{textStyle:{color:"#4ea397"}},emphasis:{textStyle:{color:"#4ea397"}}}},visualMap:{color:["#d0648a","#22c3aa","#adfff1"]},dataZoom:{backgroundColor:"rgba(255,255,255,0)",dataBackgroundColor:"rgba(222,222,222,1)",fillerColor:"rgba(114,230,212,0.25)",handleColor:"#cccccc",handleSize:"100%",textStyle:{color:"#999999"}},markPoint:{label:{normal:{textStyle:{color:"#ffffff"}},emphasis:{textStyle:{color:"#ffffff"}}}}}});
;sugar.define("sugar:widgets/charts/theme/walden.ts",function(e,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.default={color:["#3fb1e3","#6be6c1","#626c91","#a0a7e6","#c4ebad","#96dee8"],backgroundColor:"rgba(252,252,252,0)",textStyle:{},title:{textStyle:{color:"#666666"},subtextStyle:{color:"#999999"}},line:{itemStyle:{normal:{borderWidth:"2"}},lineStyle:{normal:{width:"3"}},symbolSize:"8",symbol:"emptyCircle",smooth:!1},radar:{itemStyle:{normal:{borderWidth:"2"}},lineStyle:{normal:{width:"3"}},symbolSize:"8",symbol:"emptyCircle",smooth:!1},bar:{itemStyle:{normal:{barBorderWidth:0,barBorderColor:"#ccc"},emphasis:{barBorderWidth:0,barBorderColor:"#ccc"}}},pie:{itemStyle:{normal:{borderWidth:0,borderColor:"#ccc"},emphasis:{borderWidth:0,borderColor:"#ccc"}}},scatter:{itemStyle:{normal:{borderWidth:0,borderColor:"#ccc"},emphasis:{borderWidth:0,borderColor:"#ccc"}}},boxplot:{itemStyle:{normal:{borderWidth:0,borderColor:"#ccc"},emphasis:{borderWidth:0,borderColor:"#ccc"}}},parallel:{itemStyle:{normal:{borderWidth:0,borderColor:"#ccc"},emphasis:{borderWidth:0,borderColor:"#ccc"}}},sankey:{itemStyle:{normal:{borderWidth:0,borderColor:"#ccc"},emphasis:{borderWidth:0,borderColor:"#ccc"}}},funnel:{itemStyle:{normal:{borderWidth:0,borderColor:"#ccc"},emphasis:{borderWidth:0,borderColor:"#ccc"}}},gauge:{itemStyle:{normal:{borderWidth:0,borderColor:"#ccc"},emphasis:{borderWidth:0,borderColor:"#ccc"}}},candlestick:{itemStyle:{normal:{color:"#e6a0d2",color0:"transparent",borderColor:"#e6a0d2",borderColor0:"#3fb1e3",borderWidth:"2"}}},graph:{itemStyle:{normal:{borderWidth:0,borderColor:"#ccc"}},lineStyle:{normal:{width:"1",color:"#cccccc"}},symbolSize:"8",symbol:"emptyCircle",smooth:!1,color:["#3fb1e3","#6be6c1","#626c91","#a0a7e6","#c4ebad","#96dee8"],label:{normal:{textStyle:{color:"#ffffff"}}}},map:{itemStyle:{normal:{areaColor:"#eeeeee",borderColor:"#aaaaaa",borderWidth:.5},emphasis:{areaColor:"rgba(63,177,227,0.25)",borderColor:"#3fb1e3",borderWidth:1}},label:{normal:{textStyle:{color:"#ffffff"}},emphasis:{textStyle:{color:"rgb(63,177,227)"}}}},geo:{itemStyle:{normal:{areaColor:"#eeeeee",borderColor:"#aaaaaa",borderWidth:.5},emphasis:{areaColor:"rgba(63,177,227,0.25)",borderColor:"#3fb1e3",borderWidth:1}},label:{normal:{textStyle:{color:"#ffffff"}},emphasis:{textStyle:{color:"rgb(63,177,227)"}}}},categoryAxis:{axisLine:{show:!0,lineStyle:{color:"#cccccc"}},axisTick:{show:!1,lineStyle:{color:"#333"}},axisLabel:{show:!0,textStyle:{color:"#999999"}},splitLine:{show:!0,lineStyle:{color:["#eeeeee"]}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.05)","rgba(200,200,200,0.02)"]}}},valueAxis:{axisLine:{show:!0,lineStyle:{color:"#cccccc"}},axisTick:{show:!1,lineStyle:{color:"#333"}},axisLabel:{show:!0,textStyle:{color:"#999999"}},splitLine:{show:!0,lineStyle:{color:["#eeeeee"]}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.05)","rgba(200,200,200,0.02)"]}}},logAxis:{axisLine:{show:!0,lineStyle:{color:"#cccccc"}},axisTick:{show:!1,lineStyle:{color:"#333"}},axisLabel:{show:!0,textStyle:{color:"#999999"}},splitLine:{show:!0,lineStyle:{color:["#eeeeee"]}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.05)","rgba(200,200,200,0.02)"]}}},timeAxis:{axisLine:{show:!0,lineStyle:{color:"#cccccc"}},axisTick:{show:!1,lineStyle:{color:"#333"}},axisLabel:{show:!0,textStyle:{color:"#999999"}},splitLine:{show:!0,lineStyle:{color:["#eeeeee"]}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.05)","rgba(200,200,200,0.02)"]}}},toolbox:{iconStyle:{normal:{borderColor:"#999999"},emphasis:{borderColor:"#666666"}}},legend:{textStyle:{color:"#999999"}},tooltip:{backgroundColor:"rgba(50,50,50,0.7)",borderWidth:0,padding:5,textStyle:{color:"#fff"},axisPointer:{lineStyle:{color:"#cccccc",width:1},crossStyle:{color:"#cccccc",width:1}}},timeline:{lineStyle:{color:"#626c91",width:1},itemStyle:{normal:{color:"#626c91",borderWidth:1},emphasis:{color:"#626c91"}},controlStyle:{normal:{color:"#626c91",borderColor:"#626c91",borderWidth:.5},emphasis:{color:"#626c91",borderColor:"#626c91",borderWidth:.5}},checkpointStyle:{color:"#3fb1e3",borderColor:"rgba(63,177,227,0.15)"},label:{normal:{textStyle:{color:"#626c91"}},emphasis:{textStyle:{color:"#626c91"}}}},visualMap:{color:["#2a99c9","#afe8ff"]},dataZoom:{backgroundColor:"rgba(255,255,255,0)",dataBackgroundColor:"rgba(222,222,222,1)",fillerColor:"rgba(114,230,212,0.25)",handleColor:"#cccccc",handleSize:"100%",textStyle:{color:"#999999"}},markPoint:{label:{normal:{textStyle:{color:"#ffffff"}},emphasis:{textStyle:{color:"#ffffff"}}}}}});
;sugar.define("sugar:widgets/charts/theme/infographic.ts",function(o,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={color:["#c1232b","#27727b","#fcce10","#e87c25","#b5c334","#fe8463","#9bca63","#fad860","#f3a43b","#60c0dd","#d7504b","#c6e579","#f4e001","#f0805a","#26c0c0"],backgroundColor:"rgba(0,0,0,0)",textStyle:{},title:{textStyle:{color:"#27727b"},subtextStyle:{color:"#aaaaaa"}},line:{itemStyle:{normal:{borderWidth:1}},lineStyle:{normal:{width:3},width:3},symbolSize:5,symbol:"emptyCircle",smooth:!1},radar:{itemStyle:{normal:{borderWidth:1}},lineStyle:{normal:{width:3}},symbolSize:5,symbol:"emptyCircle",smooth:!1},bar:{itemStyle:{normal:{barBorderWidth:0,barBorderColor:"#ccc"},emphasis:{barBorderWidth:0,barBorderColor:"#ccc"}}},pie:{itemStyle:{normal:{borderWidth:0,borderColor:"#ccc"},emphasis:{borderWidth:0,borderColor:"#ccc"}}},scatter:{itemStyle:{normal:{borderWidth:0,borderColor:"#ccc"},emphasis:{borderWidth:0,borderColor:"#ccc"}}},boxplot:{itemStyle:{normal:{borderWidth:0,borderColor:"#ccc"},emphasis:{borderWidth:0,borderColor:"#ccc"}}},parallel:{itemStyle:{normal:{borderWidth:0,borderColor:"#ccc"},emphasis:{borderWidth:0,borderColor:"#ccc"}}},sankey:{itemStyle:{normal:{borderWidth:0,borderColor:"#ccc"},emphasis:{borderWidth:0,borderColor:"#ccc"}}},funnel:{itemStyle:{normal:{borderWidth:0,borderColor:"#ccc"},emphasis:{borderWidth:0,borderColor:"#ccc"}}},gauge:{itemStyle:{normal:{borderWidth:0,borderColor:"#ccc"},emphasis:{borderWidth:0,borderColor:"#ccc"}}},candlestick:{itemStyle:{normal:{color:"#c1232b",color0:"#b5c334",borderColor:"#c1232b",borderColor0:"#b5c334",borderWidth:1}}},graph:{itemStyle:{normal:{borderWidth:0,borderColor:"#ccc"}},lineStyle:{normal:{width:1,color:"#aaaaaa"}},symbolSize:5,symbol:"emptyCircle",smooth:!1,color:["#c1232b","#27727b","#fcce10","#e87c25","#b5c334","#fe8463","#9bca63","#fad860","#f3a43b","#60c0dd","#d7504b","#c6e579","#f4e001","#f0805a","#26c0c0"],label:{normal:{textStyle:{color:"#eeeeee"}}}},map:{itemStyle:{normal:{areaColor:"#dddddd",borderColor:"#eeeeee",borderWidth:.5},emphasis:{areaColor:"rgba(254,153,78,1)",borderColor:"#444444",borderWidth:1}},label:{normal:{textStyle:{color:"#c1232b"}},emphasis:{textStyle:{color:"rgb(100,0,0)"}}}},geo:{itemStyle:{normal:{areaColor:"#dddddd",borderColor:"#eeeeee",borderWidth:.5},emphasis:{areaColor:"rgba(254,153,78,1)",borderColor:"#444444",borderWidth:1}},label:{normal:{textStyle:{color:"#c1232b"}},emphasis:{textStyle:{color:"rgb(100,0,0)"}}}},categoryAxis:{axisLine:{show:!0,lineStyle:{color:"#27727b"}},axisTick:{show:!0,lineStyle:{color:"#27727b"}},axisLabel:{show:!0,textStyle:{color:"#333"}},splitLine:{show:!1,lineStyle:{color:["#ccc"]}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]}}},valueAxis:{axisLine:{show:!0,lineStyle:{color:"#333"}},axisTick:{show:!0,lineStyle:{color:"#333"}},axisLabel:{show:!0,textStyle:{color:"#333"}},splitLine:{show:!0,lineStyle:{color:["#ccc"]}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]}}},logAxis:{axisLine:{show:!0,lineStyle:{color:"#27727b"}},axisTick:{show:!0,lineStyle:{color:"#333"}},axisLabel:{show:!0,textStyle:{color:"#333"}},splitLine:{show:!0,lineStyle:{color:["#ccc"]}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]}}},timeAxis:{axisLine:{show:!0,lineStyle:{color:"#27727b"}},axisTick:{show:!0,lineStyle:{color:"#333"}},axisLabel:{show:!0,textStyle:{color:"#333"}},splitLine:{show:!0,lineStyle:{color:["#ccc"]}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]}}},toolbox:{iconStyle:{normal:{borderColor:"#c1232b"},emphasis:{borderColor:"#e87c25"}}},legend:{textStyle:{color:"#333333"}},tooltip:{backgroundColor:"rgba(50,50,50,0.7)",borderWidth:0,padding:5,textStyle:{color:"#fff"},axisPointer:{lineStyle:{color:"#27727b",width:1},crossStyle:{color:"#27727b",width:1}}},timeline:{lineStyle:{color:"#293c55",width:1},itemStyle:{normal:{color:"#27727b",borderWidth:1},emphasis:{color:"#72d4e0"}},controlStyle:{normal:{color:"#27727b",borderColor:"#27727b",borderWidth:.5},emphasis:{color:"#27727b",borderColor:"#27727b",borderWidth:.5}},checkpointStyle:{color:"#c1232b",borderColor:"rgba(194,53,49,0.5)"},label:{normal:{textStyle:{color:"#293c55"}},emphasis:{textStyle:{color:"#293c55"}}}},visualMap:{color:["#c1232b","#fcce10"]},dataZoom:{backgroundColor:"rgba(0,0,0,0)",dataBackgroundColor:"rgba(181,195,52,0.3)",fillerColor:"rgba(181,195,52,0.2)",handleColor:"#27727b",handleSize:"100%",textStyle:{color:"#999999"}},markPoint:{label:{normal:{textStyle:{color:"#eeeeee"}},emphasis:{textStyle:{color:"#eeeeee"}}}}}});
;sugar.define("sugar:widgets/charts/theme/macarons.ts",function(e,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.default={color:["#2ec7c9","#b6a2de","#5ab1ef","#ffb980","#d87a80","#8d98b3","#e5cf0d","#97b552","#95706d","#dc69aa","#07a2a4","#9a7fd1","#588dd5","#f5994e","#c05050","#59678c","#c9ab00","#7eb00a","#6f5553","#c14089"],backgroundColor:"rgba(0,0,0,0)",textStyle:{},title:{textStyle:{color:"#008acd"},subtextStyle:{color:"#aaaaaa"}},line:{itemStyle:{normal:{borderWidth:1}},lineStyle:{normal:{width:2}},symbolSize:3,symbol:"emptyCircle",smooth:!0},radar:{itemStyle:{normal:{borderWidth:1}},lineStyle:{normal:{width:2}},symbolSize:3,symbol:"emptyCircle",smooth:!0},bar:{itemStyle:{normal:{barBorderWidth:0,barBorderColor:"#ccc"},emphasis:{barBorderWidth:0,barBorderColor:"#ccc"}}},pie:{itemStyle:{normal:{borderWidth:0,borderColor:"#ccc"},emphasis:{borderWidth:0,borderColor:"#ccc"}}},scatter:{itemStyle:{normal:{borderWidth:0,borderColor:"#ccc"},emphasis:{borderWidth:0,borderColor:"#ccc"}}},boxplot:{itemStyle:{normal:{borderWidth:0,borderColor:"#ccc"},emphasis:{borderWidth:0,borderColor:"#ccc"}}},parallel:{itemStyle:{normal:{borderWidth:0,borderColor:"#ccc"},emphasis:{borderWidth:0,borderColor:"#ccc"}}},sankey:{itemStyle:{normal:{borderWidth:0,borderColor:"#ccc"},emphasis:{borderWidth:0,borderColor:"#ccc"}}},funnel:{itemStyle:{normal:{borderWidth:0,borderColor:"#ccc"},emphasis:{borderWidth:0,borderColor:"#ccc"}}},gauge:{itemStyle:{normal:{borderWidth:0,borderColor:"#ccc"},emphasis:{borderWidth:0,borderColor:"#ccc"}}},candlestick:{itemStyle:{normal:{color:"#d87a80",color0:"#2ec7c9",borderColor:"#d87a80",borderColor0:"#2ec7c9",borderWidth:1}}},graph:{itemStyle:{normal:{borderWidth:0,borderColor:"#ccc"}},lineStyle:{normal:{width:1,color:"#aaaaaa"}},symbolSize:3,symbol:"emptyCircle",smooth:!0,color:["#2ec7c9","#b6a2de","#5ab1ef","#ffb980","#d87a80","#8d98b3","#e5cf0d","#97b552","#95706d","#dc69aa","#07a2a4","#9a7fd1","#588dd5","#f5994e","#c05050","#59678c","#c9ab00","#7eb00a","#6f5553","#c14089"],label:{normal:{textStyle:{color:"#eeeeee"}}}},map:{itemStyle:{normal:{areaColor:"#dddddd",borderColor:"#eeeeee",borderWidth:.5},emphasis:{areaColor:"rgba(254,153,78,1)",borderColor:"#444444",borderWidth:1}},label:{normal:{textStyle:{color:"#d87a80"}},emphasis:{textStyle:{color:"rgb(100,0,0)"}}}},geo:{itemStyle:{normal:{areaColor:"#dddddd",borderColor:"#eeeeee",borderWidth:.5},emphasis:{areaColor:"rgba(254,153,78,1)",borderColor:"#444444",borderWidth:1}},label:{normal:{textStyle:{color:"#d87a80"}},emphasis:{textStyle:{color:"rgb(100,0,0)"}}}},categoryAxis:{axisLine:{show:!0,lineStyle:{color:"#008acd"}},axisTick:{show:!0,lineStyle:{color:"#333"}},axisLabel:{show:!0,textStyle:{color:"#333"}},splitLine:{show:!1,lineStyle:{color:["#eee"]}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]}}},valueAxis:{axisLine:{show:!0,lineStyle:{color:"#008acd"}},axisTick:{show:!0,lineStyle:{color:"#333"}},axisLabel:{show:!0,textStyle:{color:"#333"}},splitLine:{show:!0,lineStyle:{color:["#eee"]}},splitArea:{show:!0,areaStyle:{color:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]}}},logAxis:{axisLine:{show:!0,lineStyle:{color:"#008acd"}},axisTick:{show:!0,lineStyle:{color:"#333"}},axisLabel:{show:!0,textStyle:{color:"#333"}},splitLine:{show:!0,lineStyle:{color:["#eee"]}},splitArea:{show:!0,areaStyle:{color:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]}}},timeAxis:{axisLine:{show:!0,lineStyle:{color:"#008acd"}},axisTick:{show:!0,lineStyle:{color:"#333"}},axisLabel:{show:!0,textStyle:{color:"#333"}},splitLine:{show:!0,lineStyle:{color:["#eee"]}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]}}},toolbox:{iconStyle:{normal:{borderColor:"#2ec7c9"},emphasis:{borderColor:"#18a4a6"}}},legend:{textStyle:{color:"#333333"}},tooltip:{backgroundColor:"rgba(50,50,50,0.7)",borderWidth:0,padding:5,textStyle:{color:"#fff"},axisPointer:{lineStyle:{color:"#008acd",width:"1"},crossStyle:{color:"#008acd",width:"1"}}},timeline:{lineStyle:{color:"#008acd",width:1},itemStyle:{normal:{color:"#008acd",borderWidth:1},emphasis:{color:"#a9334c"}},controlStyle:{normal:{color:"#008acd",borderColor:"#008acd",borderWidth:.5},emphasis:{color:"#008acd",borderColor:"#008acd",borderWidth:.5}},checkpointStyle:{color:"#2ec7c9",borderColor:"rgba(46,199,201,0.4)"},label:{normal:{textStyle:{color:"#008acd"}},emphasis:{textStyle:{color:"#008acd"}}}},visualMap:{color:["#5ab1ef","#e0ffff"]},dataZoom:{backgroundColor:"rgba(47,69,84,0)",dataBackgroundColor:"rgba(239,239,255,1)",fillerColor:"rgba(182,162,222,0.2)",handleColor:"#008acd",handleSize:"100%",textStyle:{color:"#333333"}},markPoint:{label:{normal:{textStyle:{color:"#eeeeee"}},emphasis:{textStyle:{color:"#eeeeee"}}}}}});
;sugar.define("sugar:widgets/charts/theme/roma.ts",function(o,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={color:["#e01f54","#001852","#f5e8c8","#b8d2c7","#c6b38e","#a4d8c2","#f3d999","#d3758f","#dcc392","#2e4783","#82b6e9","#ff6347","#a092f1","#0a915d","#eaf889","#6699FF","#ff6666","#3cb371","#d5b158","#38b6b6"],backgroundColor:"rgba(0,0,0,0)",textStyle:{},title:{textStyle:{color:"#333333"},subtextStyle:{color:"#aaaaaa"}},line:{itemStyle:{normal:{borderWidth:1}},lineStyle:{normal:{width:2}},symbolSize:4,symbol:"emptyCircle",smooth:!1},radar:{itemStyle:{normal:{borderWidth:1}},lineStyle:{normal:{width:2}},symbolSize:4,symbol:"emptyCircle",smooth:!1},bar:{itemStyle:{normal:{barBorderWidth:0,barBorderColor:"#ccc"},emphasis:{barBorderWidth:0,barBorderColor:"#ccc"}}},pie:{itemStyle:{normal:{borderWidth:0,borderColor:"#ccc"},emphasis:{borderWidth:0,borderColor:"#ccc"}}},scatter:{itemStyle:{normal:{borderWidth:0,borderColor:"#ccc"},emphasis:{borderWidth:0,borderColor:"#ccc"}}},boxplot:{itemStyle:{normal:{borderWidth:0,borderColor:"#ccc"},emphasis:{borderWidth:0,borderColor:"#ccc"}}},parallel:{itemStyle:{normal:{borderWidth:0,borderColor:"#ccc"},emphasis:{borderWidth:0,borderColor:"#ccc"}}},sankey:{itemStyle:{normal:{borderWidth:0,borderColor:"#ccc"},emphasis:{borderWidth:0,borderColor:"#ccc"}}},funnel:{itemStyle:{normal:{borderWidth:0,borderColor:"#ccc"},emphasis:{borderWidth:0,borderColor:"#ccc"}}},gauge:{itemStyle:{normal:{borderWidth:0,borderColor:"#ccc"},emphasis:{borderWidth:0,borderColor:"#ccc"}}},candlestick:{itemStyle:{normal:{color:"#e01f54",color0:"#001852",borderColor:"#f5e8c8",borderColor0:"#b8d2c7",borderWidth:1}}},graph:{itemStyle:{normal:{borderWidth:0,borderColor:"#ccc"}},lineStyle:{normal:{width:1,color:"#aaaaaa"}},symbolSize:4,symbol:"emptyCircle",smooth:!1,color:["#e01f54","#001852","#f5e8c8","#b8d2c7","#c6b38e","#a4d8c2","#f3d999","#d3758f","#dcc392","#2e4783","#82b6e9","#ff6347","#a092f1","#0a915d","#eaf889","#6699FF","#ff6666","#3cb371","#d5b158","#38b6b6"],label:{normal:{textStyle:{color:"#eeeeee"}}}},map:{itemStyle:{normal:{areaColor:"#eeeeee",borderColor:"#444444",borderWidth:.5},emphasis:{areaColor:"rgba(255,215,0,0.8)",borderColor:"#444444",borderWidth:1}},label:{normal:{textStyle:{color:"#000000"}},emphasis:{textStyle:{color:"rgb(100,0,0)"}}}},geo:{itemStyle:{normal:{areaColor:"#eeeeee",borderColor:"#444444",borderWidth:.5},emphasis:{areaColor:"rgba(255,215,0,0.8)",borderColor:"#444444",borderWidth:1}},label:{normal:{textStyle:{color:"#000000"}},emphasis:{textStyle:{color:"rgb(100,0,0)"}}}},categoryAxis:{axisLine:{show:!0,lineStyle:{color:"#333"}},axisTick:{show:!0,lineStyle:{color:"#333"}},axisLabel:{show:!0,textStyle:{color:"#333"}},splitLine:{show:!1,lineStyle:{color:["#ccc"]}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]}}},valueAxis:{axisLine:{show:!0,lineStyle:{color:"#333"}},axisTick:{show:!0,lineStyle:{color:"#333"}},axisLabel:{show:!0,textStyle:{color:"#333"}},splitLine:{show:!0,lineStyle:{color:["#ccc"]}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]}}},logAxis:{axisLine:{show:!0,lineStyle:{color:"#333"}},axisTick:{show:!0,lineStyle:{color:"#333"}},axisLabel:{show:!0,textStyle:{color:"#333"}},splitLine:{show:!0,lineStyle:{color:["#ccc"]}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]}}},timeAxis:{axisLine:{show:!0,lineStyle:{color:"#333"}},axisTick:{show:!0,lineStyle:{color:"#333"}},axisLabel:{show:!0,textStyle:{color:"#333"}},splitLine:{show:!0,lineStyle:{color:["#ccc"]}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]}}},toolbox:{iconStyle:{normal:{borderColor:"#999999"},emphasis:{borderColor:"#666666"}}},legend:{textStyle:{color:"#333333"}},tooltip:{backgroundColor:"rgba(50,50,50,0.7)",borderWidth:0,padding:5,textStyle:{color:"#fff"},axisPointer:{lineStyle:{color:"#cccccc",width:1},crossStyle:{color:"#cccccc",width:1}}},timeline:{lineStyle:{color:"#293c55",width:1},itemStyle:{normal:{color:"#293c55",borderWidth:1},emphasis:{color:"#a9334c"}},controlStyle:{normal:{color:"#293c55",borderColor:"#293c55",borderWidth:.5},emphasis:{color:"#293c55",borderColor:"#293c55",borderWidth:.5}},checkpointStyle:{color:"#e43c59",borderColor:"rgba(194,53,49,0.5)"},label:{normal:{textStyle:{color:"#293c55"}},emphasis:{textStyle:{color:"#293c55"}}}},visualMap:{color:["#e01f54","#e7dbc3"]},dataZoom:{backgroundColor:"rgba(47,69,84,0)",dataBackgroundColor:"rgba(47,69,84,0.3)",fillerColor:"rgba(167,183,204,0.4)",handleColor:"#a7b7cc",handleSize:"100%",textStyle:{color:"#333333"}},markPoint:{label:{normal:{textStyle:{color:"#eeeeee"}},emphasis:{textStyle:{color:"#eeeeee"}}}}}});
;sugar.define("sugar:widgets/charts/theme/shine.ts",function(o,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={color:["#c12e34","#e6b600","#0098d9","#2b821d","#005eaa","#339ca8","#cda819","#32a487"],backgroundColor:"rgba(0,0,0,0)",textStyle:{},title:{textStyle:{color:"#333333"},subtextStyle:{color:"#aaaaaa"}},line:{itemStyle:{normal:{borderWidth:1}},lineStyle:{normal:{width:2}},symbolSize:4,symbol:"emptyCircle",smooth:!1},radar:{itemStyle:{normal:{borderWidth:1}},lineStyle:{normal:{width:2}},symbolSize:4,symbol:"emptyCircle",smooth:!1},bar:{itemStyle:{normal:{barBorderWidth:0,barBorderColor:"#ccc"},emphasis:{barBorderWidth:0,barBorderColor:"#ccc"}}},pie:{itemStyle:{normal:{borderWidth:0,borderColor:"#ccc"},emphasis:{borderWidth:0,borderColor:"#ccc"}}},scatter:{itemStyle:{normal:{borderWidth:0,borderColor:"#ccc"},emphasis:{borderWidth:0,borderColor:"#ccc"}}},boxplot:{itemStyle:{normal:{borderWidth:0,borderColor:"#ccc"},emphasis:{borderWidth:0,borderColor:"#ccc"}}},parallel:{itemStyle:{normal:{borderWidth:0,borderColor:"#ccc"},emphasis:{borderWidth:0,borderColor:"#ccc"}}},sankey:{itemStyle:{normal:{borderWidth:0,borderColor:"#ccc"},emphasis:{borderWidth:0,borderColor:"#ccc"}}},funnel:{itemStyle:{normal:{borderWidth:0,borderColor:"#ccc"},emphasis:{borderWidth:0,borderColor:"#ccc"}}},gauge:{itemStyle:{normal:{borderWidth:0,borderColor:"#ccc"},emphasis:{borderWidth:0,borderColor:"#ccc"}}},candlestick:{itemStyle:{normal:{color:"#c12e34",color0:"#2b821d",borderColor:"#c12e34",borderColor0:"#2b821d",borderWidth:1}}},graph:{itemStyle:{normal:{borderWidth:0,borderColor:"#ccc"}},lineStyle:{normal:{width:1,color:"#aaaaaa"}},symbolSize:4,symbol:"emptyCircle",smooth:!1,color:["#c12e34","#e6b600","#0098d9","#2b821d","#005eaa","#339ca8","#cda819","#32a487"],label:{normal:{textStyle:{color:"#eeeeee"}}}},map:{itemStyle:{normal:{areaColor:"#dddddd",borderColor:"#eeeeee",borderWidth:.5},emphasis:{areaColor:"rgba(230,182,0,1)",borderColor:"#dddddd",borderWidth:1}},label:{normal:{textStyle:{color:"#c12e34"}},emphasis:{textStyle:{color:"rgb(193,46,52)"}}}},geo:{itemStyle:{normal:{areaColor:"#dddddd",borderColor:"#eeeeee",borderWidth:.5},emphasis:{areaColor:"rgba(230,182,0,1)",borderColor:"#dddddd",borderWidth:1}},label:{normal:{textStyle:{color:"#c12e34"}},emphasis:{textStyle:{color:"rgb(193,46,52)"}}}},categoryAxis:{axisLine:{show:!0,lineStyle:{color:"#333"}},axisTick:{show:!0,lineStyle:{color:"#333"}},axisLabel:{show:!0,textStyle:{color:"#333"}},splitLine:{show:!1,lineStyle:{color:["#ccc"]}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]}}},valueAxis:{axisLine:{show:!0,lineStyle:{color:"#333"}},axisTick:{show:!0,lineStyle:{color:"#333"}},axisLabel:{show:!0,textStyle:{color:"#333"}},splitLine:{show:!0,lineStyle:{color:["#ccc"]}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]}}},logAxis:{axisLine:{show:!0,lineStyle:{color:"#333"}},axisTick:{show:!0,lineStyle:{color:"#333"}},axisLabel:{show:!0,textStyle:{color:"#333"}},splitLine:{show:!0,lineStyle:{color:["#ccc"]}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]}}},timeAxis:{axisLine:{show:!0,lineStyle:{color:"#333"}},axisTick:{show:!0,lineStyle:{color:"#333"}},axisLabel:{show:!0,textStyle:{color:"#333"}},splitLine:{show:!0,lineStyle:{color:["#ccc"]}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]}}},toolbox:{iconStyle:{normal:{borderColor:"#06467c"},emphasis:{borderColor:"#4187c2"}}},legend:{textStyle:{color:"#333333"}},tooltip:{backgroundColor:"rgba(50,50,50,0.7)",borderWidth:0,padding:5,textStyle:{color:"#fff"},axisPointer:{lineStyle:{color:"#cccccc",width:1},crossStyle:{color:"#cccccc",width:1}}},timeline:{lineStyle:{color:"#005eaa",width:1},itemStyle:{normal:{color:"#005eaa",borderWidth:1},emphasis:{color:"#005eaa"}},controlStyle:{normal:{color:"#005eaa",borderColor:"#005eaa",borderWidth:.5},emphasis:{color:"#005eaa",borderColor:"#005eaa",borderWidth:.5}},checkpointStyle:{color:"#005eaa",borderColor:"rgba(49,107,194,0.5)"},label:{normal:{textStyle:{color:"#005eaa"}},emphasis:{textStyle:{color:"#005eaa"}}}},visualMap:{color:["#1790cf","#a2d4e6"]},dataZoom:{backgroundColor:"rgba(47,69,84,0)",dataBackgroundColor:"rgba(47,69,84,0.3)",fillerColor:"rgba(167,183,204,0.4)",handleColor:"#a7b7cc",handleSize:"100%",textStyle:{color:"#333333"}},markPoint:{label:{normal:{textStyle:{color:"#eeeeee"}},emphasis:{textStyle:{color:"#eeeeee"}}}}}});
;sugar.define("sugar:widgets/charts/theme/dark.ts",function(o,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=o("sugar:utils/i18n.ts");e.default={seriesCnt:"10",backgroundColor:"rgba(91,92,110, 0)",titleColor:"#ffffff",subtitleColor:"#cccccc",textColorShow:!1,textColor:"#333",markTextColor:"#eeeeee",color:["#9b8bba","#e098c7","#8fd3e8","#71669e","#cc70af","#7cb4cc"],borderColor:"#ccc",borderWidth:0,visualMapColor:["#8a7ca8","#e098c7","#cceffa"],legendTextColor:"#cccccc",kColor:"#e098c7",kColor0:"transparent",kBorderColor:"#e098c7",kBorderColor0:"#8fd3e8",kBorderWidth:"2",lineWidth:"3",symbolSize:"7",symbol:"circle",symbolBorderWidth:"2",lineSmooth:!0,graphLineWidth:1,graphLineColor:"#aaaaaa",mapLabelColor:"#000000",mapLabelColorE:"rgb(255,255,255)",mapBorderColor:"#444444",mapBorderColorE:"#444444",mapBorderWidth:.5,mapBorderWidthE:1,mapAreaColor:"#eeeeee",mapAreaColorE:"rgba(224,152,199,1)",axes:[{type:"all",name:r.default("通用坐标轴"),axisLineShow:!0,axisLineColor:"#cccccc",axisTickShow:!1,axisTickColor:"#333",axisLabelShow:!0,axisLabelColor:"#cccccc",splitLineShow:!1,splitLineColor:["#eeeeee","#333333"],splitAreaShow:!0,splitAreaColor:["rgba(250,250,250,0.05)","rgba(200,200,200,0.02)"]},{type:"category",name:r.default("类目坐标轴"),axisLineShow:!0,axisLineColor:"#333",axisTickShow:!0,axisTickColor:"#333",axisLabelShow:!0,axisLabelColor:"#333",splitLineShow:!1,splitLineColor:["#ccc"],splitAreaShow:!1,splitAreaColor:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]},{type:"value",name:r.default("数值坐标轴"),axisLineShow:!0,axisLineColor:"#333",axisTickShow:!0,axisTickColor:"#333",axisLabelShow:!0,axisLabelColor:"#333",splitLineShow:!0,splitLineColor:["#ccc"],splitAreaShow:!1,splitAreaColor:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]},{type:"log",name:r.default("对数坐标轴"),axisLineShow:!0,axisLineColor:"#333",axisTickShow:!0,axisTickColor:"#333",axisLabelShow:!0,axisLabelColor:"#333",splitLineShow:!0,splitLineColor:["#ccc"],splitAreaShow:!1,splitAreaColor:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]},{type:"time",name:r.default("时间坐标轴"),axisLineShow:!0,axisLineColor:"#333",axisTickShow:!0,axisTickColor:"#333",axisLabelShow:!0,axisLabelColor:"#333",splitLineShow:!0,splitLineColor:["#ccc"],splitAreaShow:!1,splitAreaColor:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]}],axisSeperateSetting:!1,toolboxColor:"#999999",toolboxEmpasisColor:"#666666",tooltipAxisColor:"#cccccc",tooltipAxisWidth:1,timelineLineColor:"#8fd3e8",timelineLineWidth:1,timelineItemColor:"#8fd3e8",timelineItemColorE:"#8fd3e8",timelineCheckColor:"#8fd3e8",timelineCheckBorderColor:"rgba(138,124,168,0.37)",timelineItemBorderWidth:1,timelineControlColor:"#8fd3e8",timelineControlBorderColor:"#8fd3e8",timelineControlBorderWidth:.5,timelineLabelColor:"#8fd3e8",datazoomBackgroundColor:"rgba(0,0,0,0)",datazoomDataColor:"rgba(255,255,255,0.3)",datazoomFillColor:"rgba(167,183,204,0.4)",datazoomHandleColor:"#a7b7cc",datazoomHandleWidth:"100",datazoomLabelColor:"#333333",tooltip:{backgroundColor:"rgba(50,50,50,0.7)",borderWidth:0,padding:5,textStyle:{color:"#fff"}}}});
;sugar.define("sugar:widgets/charts/theme/blue.ts",function(o,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=o("sugar:utils/i18n.ts");e.default={seriesCnt:"10",dashboardBC:"#030C3B",backgroundColor:"rgba(91,92,110, 0)",titleColor:"#73aae5",subtitleColor:"#cccccc",textColorShow:!1,textColor:"#333",markTextColor:"#eeeeee",color:["#24CBFF","#9000FF","#484CDC","#711D8E","#2D3C98","#3F8BD8","#2E33D1","#1589FF","#5C4AC9"],borderColor:"#ccc",borderWidth:0,visualMapColor:["#8a7ca8","#e098c7","#cceffa"],legendTextColor:"#cccccc",kColor:"#e098c7",kColor0:"transparent",kBorderColor:"#e098c7",kBorderColor0:"#8fd3e8",kBorderWidth:"2",lineWidth:"3",symbolSize:"7",symbol:"circle",symbolBorderWidth:"2",lineSmooth:!0,graphLineWidth:1,graphLineColor:"#aaaaaa",mapLabelColor:"#000000",mapLabelColorE:"rgb(255,255,255)",mapBorderColor:"#444444",mapBorderColorE:"#444444",mapBorderWidth:.5,mapBorderWidthE:1,mapAreaColor:"#eeeeee",mapAreaColorE:"rgba(224,152,199,1)",axes:[{type:"all",name:r.default("通用坐标轴"),axisLineShow:!0,axisLineColor:"#cccccc",axisTickShow:!1,axisTickColor:"#333",axisLabelShow:!0,axisLabelColor:"#cccccc",splitLineShow:!1,splitLineColor:["#eeeeee","#333333"],splitAreaShow:!0,splitAreaColor:["rgba(250,250,250,0.05)","rgba(200,200,200,0.02)"]},{type:"category",name:r.default("类目坐标轴"),axisLineShow:!0,axisLineColor:"#333",axisTickShow:!0,axisTickColor:"#333",axisLabelShow:!0,axisLabelColor:"#333",splitLineShow:!1,splitLineColor:["#ccc"],splitAreaShow:!1,splitAreaColor:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]},{type:"value",name:r.default("数值坐标轴"),axisLineShow:!0,axisLineColor:"#333",axisTickShow:!0,axisTickColor:"#333",axisLabelShow:!0,axisLabelColor:"#333",splitLineShow:!0,splitLineColor:["#ccc"],splitAreaShow:!1,splitAreaColor:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]},{type:"log",name:r.default("对数坐标轴"),axisLineShow:!0,axisLineColor:"#333",axisTickShow:!0,axisTickColor:"#333",axisLabelShow:!0,axisLabelColor:"#333",splitLineShow:!0,splitLineColor:["#ccc"],splitAreaShow:!1,splitAreaColor:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]},{type:"time",name:r.default("时间坐标轴"),axisLineShow:!0,axisLineColor:"#333",axisTickShow:!0,axisTickColor:"#333",axisLabelShow:!0,axisLabelColor:"#333",splitLineShow:!0,splitLineColor:["#ccc"],splitAreaShow:!1,splitAreaColor:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]}],axisSeperateSetting:!1,toolboxColor:"#999999",toolboxEmpasisColor:"#666666",tooltipAxisColor:"#cccccc",tooltipAxisWidth:1,timelineLineColor:"#8fd3e8",timelineLineWidth:1,timelineItemColor:"#8fd3e8",timelineItemColorE:"#8fd3e8",timelineCheckColor:"#8fd3e8",timelineCheckBorderColor:"rgba(138,124,168,0.37)",timelineItemBorderWidth:1,timelineControlColor:"#8fd3e8",timelineControlBorderColor:"#8fd3e8",timelineControlBorderWidth:.5,timelineLabelColor:"#8fd3e8",datazoomBackgroundColor:"rgba(0,0,0,0)",datazoomDataColor:"rgba(255,255,255,0.3)",datazoomFillColor:"rgba(167,183,204,0.4)",datazoomHandleColor:"#a7b7cc",datazoomHandleWidth:"100",datazoomLabelColor:"#333333",tooltip:{backgroundColor:"rgba(50,50,50,0.7)",borderWidth:0,padding:5,textStyle:{color:"#fff"}}}});
;sugar.define("sugar:widgets/charts/theme/warm.ts",function(o,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=o("sugar:utils/i18n.ts");e.default={seriesCnt:"10",dashboardBC:"#281E2F",backgroundColor:"rgba(91,92,110, 0)",titleColor:"#EA6C6D",subtitleColor:"#cccccc",textColorShow:!1,textColor:"#333",markTextColor:"#eeeeee",color:["#5BB3A8","#C38C55","#D15657","#6B4565","#EE5556","#49D0BF","#915387","#C47F3B","#EA6C6D","#40C0A7"],borderColor:"#ccc",borderWidth:0,visualMapColor:["#8a7ca8","#e098c7","#cceffa"],legendTextColor:"#cccccc",kColor:"#e098c7",kColor0:"transparent",kBorderColor:"#e098c7",kBorderColor0:"#8fd3e8",kBorderWidth:"2",lineWidth:"3",symbolSize:"7",symbol:"circle",symbolBorderWidth:"2",lineSmooth:!0,graphLineWidth:1,graphLineColor:"#aaaaaa",mapLabelColor:"#000000",mapLabelColorE:"rgb(255,255,255)",mapBorderColor:"#444444",mapBorderColorE:"#444444",mapBorderWidth:.5,mapBorderWidthE:1,mapAreaColor:"#eeeeee",mapAreaColorE:"rgba(224,152,199,1)",axes:[{type:"all",name:r.default("通用坐标轴"),axisLineShow:!0,axisLineColor:"#cccccc",axisTickShow:!1,axisTickColor:"#333",axisLabelShow:!0,axisLabelColor:"#cccccc",splitLineShow:!1,splitLineColor:["#eeeeee","#333333"],splitAreaShow:!0,splitAreaColor:["rgba(250,250,250,0.05)","rgba(200,200,200,0.02)"]},{type:"category",name:r.default("类目坐标轴"),axisLineShow:!0,axisLineColor:"#333",axisTickShow:!0,axisTickColor:"#333",axisLabelShow:!0,axisLabelColor:"#333",splitLineShow:!1,splitLineColor:["#ccc"],splitAreaShow:!1,splitAreaColor:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]},{type:"value",name:r.default("数值坐标轴"),axisLineShow:!0,axisLineColor:"#333",axisTickShow:!0,axisTickColor:"#333",axisLabelShow:!0,axisLabelColor:"#333",splitLineShow:!0,splitLineColor:["#ccc"],splitAreaShow:!1,splitAreaColor:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]},{type:"log",name:r.default("对数坐标轴"),axisLineShow:!0,axisLineColor:"#333",axisTickShow:!0,axisTickColor:"#333",axisLabelShow:!0,axisLabelColor:"#333",splitLineShow:!0,splitLineColor:["#ccc"],splitAreaShow:!1,splitAreaColor:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]},{type:"time",name:r.default("时间坐标轴"),axisLineShow:!0,axisLineColor:"#333",axisTickShow:!0,axisTickColor:"#333",axisLabelShow:!0,axisLabelColor:"#333",splitLineShow:!0,splitLineColor:["#ccc"],splitAreaShow:!1,splitAreaColor:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]}],axisSeperateSetting:!1,toolboxColor:"#999999",toolboxEmpasisColor:"#666666",tooltipAxisColor:"#cccccc",tooltipAxisWidth:1,timelineLineColor:"#8fd3e8",timelineLineWidth:1,timelineItemColor:"#8fd3e8",timelineItemColorE:"#8fd3e8",timelineCheckColor:"#8fd3e8",timelineCheckBorderColor:"rgba(138,124,168,0.37)",timelineItemBorderWidth:1,timelineControlColor:"#8fd3e8",timelineControlBorderColor:"#8fd3e8",timelineControlBorderWidth:.5,timelineLabelColor:"#8fd3e8",datazoomBackgroundColor:"rgba(0,0,0,0)",datazoomDataColor:"rgba(255,255,255,0.3)",datazoomFillColor:"rgba(167,183,204,0.4)",datazoomHandleColor:"#a7b7cc",datazoomHandleWidth:"100",datazoomLabelColor:"#333333",tooltip:{backgroundColor:"rgba(50,50,50,0.7)",borderWidth:0,padding:5,textStyle:{color:"#fff"}}}});
;sugar.define("sugar:widgets/charts/theme/cold.ts",function(o,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=o("sugar:utils/i18n.ts");e.default={seriesCnt:"10",dashboardBC:"#121929",backgroundColor:"rgba(91,92,110, 0)",titleColor:"#35F3FD",subtitleColor:"#cccccc",textColorShow:!1,textColor:"#333",markTextColor:"#eeeeee",color:["#4EFD95","#2EBDCC","#22597E","#2E33D1","#3BD2A6","#229EA8","#484CDC","#2C84B4","#35F3FD","#32ACEF"],borderColor:"#ccc",borderWidth:0,visualMapColor:["#8a7ca8","#e098c7","#cceffa"],legendTextColor:"#cccccc",kColor:"#e098c7",kColor0:"transparent",kBorderColor:"#e098c7",kBorderColor0:"#8fd3e8",kBorderWidth:"2",lineWidth:"3",symbolSize:"7",symbol:"circle",symbolBorderWidth:"2",lineSmooth:!0,graphLineWidth:1,graphLineColor:"#aaaaaa",mapLabelColor:"#000000",mapLabelColorE:"rgb(255,255,255)",mapBorderColor:"#444444",mapBorderColorE:"#444444",mapBorderWidth:.5,mapBorderWidthE:1,mapAreaColor:"#eeeeee",mapAreaColorE:"rgba(224,152,199,1)",axes:[{type:"all",name:r.default("通用坐标轴"),axisLineShow:!0,axisLineColor:"#cccccc",axisTickShow:!1,axisTickColor:"#333",axisLabelShow:!0,axisLabelColor:"#cccccc",splitLineShow:!1,splitLineColor:["#eeeeee","#333333"],splitAreaShow:!0,splitAreaColor:["rgba(250,250,250,0.05)","rgba(200,200,200,0.02)"]},{type:"category",name:r.default("类目坐标轴"),axisLineShow:!0,axisLineColor:"#333",axisTickShow:!0,axisTickColor:"#333",axisLabelShow:!0,axisLabelColor:"#333",splitLineShow:!1,splitLineColor:["#ccc"],splitAreaShow:!1,splitAreaColor:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]},{type:"value",name:r.default("数值坐标轴"),axisLineShow:!0,axisLineColor:"#333",axisTickShow:!0,axisTickColor:"#333",axisLabelShow:!0,axisLabelColor:"#333",splitLineShow:!0,splitLineColor:["#ccc"],splitAreaShow:!1,splitAreaColor:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]},{type:"log",name:r.default("对数坐标轴"),axisLineShow:!0,axisLineColor:"#333",axisTickShow:!0,axisTickColor:"#333",axisLabelShow:!0,axisLabelColor:"#333",splitLineShow:!0,splitLineColor:["#ccc"],splitAreaShow:!1,splitAreaColor:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]},{type:"time",name:r.default("时间坐标轴"),axisLineShow:!0,axisLineColor:"#333",axisTickShow:!0,axisTickColor:"#333",axisLabelShow:!0,axisLabelColor:"#333",splitLineShow:!0,splitLineColor:["#ccc"],splitAreaShow:!1,splitAreaColor:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]}],axisSeperateSetting:!1,toolboxColor:"#999999",toolboxEmpasisColor:"#666666",tooltipAxisColor:"#cccccc",tooltipAxisWidth:1,timelineLineColor:"#8fd3e8",timelineLineWidth:1,timelineItemColor:"#8fd3e8",timelineItemColorE:"#8fd3e8",timelineCheckColor:"#8fd3e8",timelineCheckBorderColor:"rgba(138,124,168,0.37)",timelineItemBorderWidth:1,timelineControlColor:"#8fd3e8",timelineControlBorderColor:"#8fd3e8",timelineControlBorderWidth:.5,timelineLabelColor:"#8fd3e8",datazoomBackgroundColor:"rgba(0,0,0,0)",datazoomDataColor:"rgba(255,255,255,0.3)",datazoomFillColor:"rgba(167,183,204,0.4)",datazoomHandleColor:"#a7b7cc",datazoomHandleWidth:"100",datazoomLabelColor:"#333333",tooltip:{backgroundColor:"rgba(50,50,50,0.7)",borderWidth:0,padding:5,textStyle:{color:"#fff"}}}});
;sugar.define("sugar:widgets/charts/theme/chalk.ts",function(o,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=o("sugar:utils/i18n.ts");e.default={seriesCnt:"3",backgroundColor:"rgba(41,52,65,0)",titleColor:"#ffffff",subtitleColor:"#dddddd",textColorShow:!1,textColor:"#333",markTextColor:"#293441",color:["#fc97af","#87f7cf","#f7f494","#72ccff","#f7c5a0","#d4a4eb","#d2f5a6","#76f2f2"],borderColor:"#ccc",borderWidth:0,visualMapColor:["#fc97af","#87f7cf"],legendTextColor:"#999999",kColor:"#fc97af",kColor0:"transparent",kBorderColor:"#fc97af",kBorderColor0:"#87f7cf",kBorderWidth:"2",lineWidth:"3",symbolSize:"0",symbol:"circle",symbolBorderWidth:"4",lineSmooth:!0,graphLineWidth:"1",graphLineColor:"#ffffff",mapLabelColor:"#893448",mapLabelColorE:"rgb(137,52,72)",mapBorderColor:"#999999",mapBorderColorE:"#eb8146",mapBorderWidth:.5,mapBorderWidthE:1,mapAreaColor:"#f3f3f3",mapAreaColorE:"rgba(255,178,72,1)",axes:[{type:"all",name:a.default("通用坐标轴"),axisLineShow:!0,axisLineColor:"#666666",axisTickShow:!1,axisTickColor:"#333",axisLabelShow:!0,axisLabelColor:"#aaaaaa",splitLineShow:!1,splitLineColor:["#e6e6e6"],splitAreaShow:!1,splitAreaColor:["rgba(250,250,250,0.05)","rgba(200,200,200,0.02)"]},{type:"category",name:a.default("类目坐标轴"),axisLineShow:!0,axisLineColor:"#333",axisTickShow:!0,axisTickColor:"#333",axisLabelShow:!0,axisLabelColor:"#333",splitLineShow:!1,splitLineColor:["#ccc"],splitAreaShow:!1,splitAreaColor:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]},{type:"value",name:a.default("数值坐标轴"),axisLineShow:!0,axisLineColor:"#333",axisTickShow:!0,axisTickColor:"#333",axisLabelShow:!0,axisLabelColor:"#333",splitLineShow:!0,splitLineColor:["#ccc"],splitAreaShow:!1,splitAreaColor:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]},{type:"log",name:a.default("对数坐标轴"),axisLineShow:!0,axisLineColor:"#333",axisTickShow:!0,axisTickColor:"#333",axisLabelShow:!0,axisLabelColor:"#333",splitLineShow:!0,splitLineColor:["#ccc"],splitAreaShow:!1,splitAreaColor:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]},{type:"time",name:a.default("时间坐标轴"),axisLineShow:!0,axisLineColor:"#333",axisTickShow:!0,axisTickColor:"#333",axisLabelShow:!0,axisLabelColor:"#333",splitLineShow:!0,splitLineColor:["#ccc"],splitAreaShow:!1,splitAreaColor:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]}],axisSeperateSetting:!1,toolboxColor:"#999999",toolboxEmpasisColor:"#666666",tooltipAxisColor:"#cccccc",tooltipAxisWidth:1,timelineLineColor:"#87f7cf",timelineLineWidth:1,timelineItemColor:"#87f7cf",timelineItemColorE:"#f7f494",timelineCheckColor:"#fc97af",timelineCheckBorderColor:"rgba(252,151,175,0.3)",timelineItemBorderWidth:1,timelineControlColor:"#87f7cf",timelineControlBorderColor:"#87f7cf",timelineControlBorderWidth:.5,timelineLabelColor:"#87f7cf",datazoomBackgroundColor:"rgba(255,255,255,0)",datazoomDataColor:"rgba(114,204,255,1)",datazoomFillColor:"rgba(114,204,255,0.2)",datazoomHandleColor:"#72ccff",datazoomHandleWidth:"100",datazoomLabelColor:"#333333",tooltip:{backgroundColor:"rgba(50,50,50,0.7)",borderWidth:0,padding:5,textStyle:{color:"#fff"}}}});
;sugar.define("sugar:widgets/charts/theme/modi.ts",function(o,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={color:["#588C79","#5F423A","#D22555","#5E3A56","#3D80D9","#D9B54A","#BB54BF","#84D0D9","#70AD31","#FF7C78"],backgroundColor:"rgba(0,0,0,0)",textStyle:{},title:{textStyle:{color:"#333333"},subtextStyle:{color:"#aaa"}},line:{itemStyle:{normal:{borderWidth:1}},lineStyle:{normal:{width:2}},symbolSize:4,symbol:"emptyCircle",smooth:!1},radar:{itemStyle:{normal:{borderWidth:1}},lineStyle:{normal:{width:2}},symbolSize:4,symbol:"emptyCircle",smooth:!1},bar:{itemStyle:{normal:{barBorderWidth:0,barBorderColor:"#ccc"},emphasis:{barBorderWidth:0,barBorderColor:"#ccc"}}},pie:{itemStyle:{normal:{borderWidth:0,borderColor:"#ccc"},emphasis:{borderWidth:0,borderColor:"#ccc"}}},scatter:{itemStyle:{normal:{borderWidth:0,borderColor:"#ccc"},emphasis:{borderWidth:0,borderColor:"#ccc"}}},boxplot:{itemStyle:{normal:{borderWidth:0,borderColor:"#ccc"},emphasis:{borderWidth:0,borderColor:"#ccc"}}},parallel:{itemStyle:{normal:{borderWidth:0,borderColor:"#ccc"},emphasis:{borderWidth:0,borderColor:"#ccc"}}},sankey:{itemStyle:{normal:{borderWidth:0,borderColor:"#ccc"},emphasis:{borderWidth:0,borderColor:"#ccc"}}},funnel:{itemStyle:{normal:{borderWidth:0,borderColor:"#ccc"},emphasis:{borderWidth:0,borderColor:"#ccc"}}},gauge:{itemStyle:{normal:{borderWidth:0,borderColor:"#ccc"},emphasis:{borderWidth:0,borderColor:"#ccc"}}},candlestick:{itemStyle:{normal:{color:"#c23531",color0:"#314656",borderColor:"#c23531",borderColor0:"#314656",borderWidth:1}}},graph:{itemStyle:{normal:{borderWidth:0,borderColor:"#ccc"}},lineStyle:{normal:{width:1,color:"#aaa"}},symbolSize:4,symbol:"emptyCircle",smooth:!1,color:["#c23531","#2f4554","#61a0a8","#d48265","#91c7ae","#749f83","#ca8622","#bda29a","#6e7074","#546570","#c4ccd3"],label:{normal:{textStyle:{color:"#eee"}}}},map:{itemStyle:{normal:{areaColor:"#eeeeee",borderColor:"#444444",borderWidth:.5},emphasis:{areaColor:"rgba(255,215,0,0.8)",borderColor:"#444",borderWidth:1}},label:{normal:{textStyle:{color:"#000000"}},emphasis:{textStyle:{color:"rgb(100,0,0)"}}}},geo:{itemStyle:{normal:{areaColor:"#eeeeee",borderColor:"#444444",borderWidth:.5},emphasis:{areaColor:"rgba(255,215,0,0.8)",borderColor:"#444",borderWidth:1}},label:{normal:{textStyle:{color:"#000000"}},emphasis:{textStyle:{color:"rgb(100,0,0)"}}}},categoryAxis:{axisLine:{show:!0,lineStyle:{color:"#333"}},axisTick:{show:!0,lineStyle:{color:"#333"}},axisLabel:{show:!0,textStyle:{color:"#333"}},splitLine:{show:!1,lineStyle:{color:["#ccc"]}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]}}},valueAxis:{axisLine:{show:!0,lineStyle:{color:"#333"}},axisTick:{show:!0,lineStyle:{color:"#333"}},axisLabel:{show:!0,textStyle:{color:"#333"}},splitLine:{show:!0,lineStyle:{color:["#ccc"]}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]}}},logAxis:{axisLine:{show:!0,lineStyle:{color:"#333"}},axisTick:{show:!0,lineStyle:{color:"#333"}},axisLabel:{show:!0,textStyle:{color:"#333"}},splitLine:{show:!0,lineStyle:{color:["#ccc"]}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]}}},timeAxis:{axisLine:{show:!0,lineStyle:{color:"#333"}},axisTick:{show:!0,lineStyle:{color:"#333"}},axisLabel:{show:!0,textStyle:{color:"#333"}},splitLine:{show:!0,lineStyle:{color:["#ccc"]}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]}}},toolbox:{iconStyle:{normal:{borderColor:"#999999"},emphasis:{borderColor:"#666666"}}},legend:{textStyle:{color:"#333333"}},tooltip:{backgroundColor:"rgba(50,50,50,0.7)",borderWidth:0,padding:5,textStyle:{color:"#fff"},axisPointer:{lineStyle:{color:"#cccccc",width:1},crossStyle:{color:"#cccccc",width:1}}},timeline:{lineStyle:{color:"#293c55",width:1},itemStyle:{normal:{color:"#293c55",borderWidth:1},emphasis:{color:"#a9334c"}},controlStyle:{normal:{color:"#293c55",borderColor:"#293c55",borderWidth:.5},emphasis:{color:"#293c55",borderColor:"#293c55",borderWidth:.5}},checkpointStyle:{color:"#e43c59",borderColor:"rgba(194,53,49,0.5)"},label:{normal:{textStyle:{color:"#293c55"}},emphasis:{textStyle:{color:"#293c55"}}}},visualMap:{color:["#bf444c","#d88273","#f6efa6"]},dataZoom:{backgroundColor:"rgba(47,69,84,0)",dataBackgroundColor:"rgba(47,69,84,0.3)",fillerColor:"rgba(167,183,204,0.4)",handleColor:"#a7b7cc",handleSize:"100%",textStyle:{color:"#333333"}},markPoint:{label:{normal:{textStyle:{color:"#eee"}},emphasis:{textStyle:{color:"#eee"}}}}}});
;sugar.define("sugar:widgets/charts/theme/_register-theme.ts",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.reportThemes=t.dashboardThemes=t.themeMap=t.baseTheme=void 0;var a=e("sugar:node_modules/echarts/dist/echarts.js"),r=e("sugar:widgets/charts/theme/sugar.ts"),s=e("sugar:widgets/charts/theme/colorui.ts"),h=e("sugar:widgets/charts/theme/aipage.ts"),d=e("sugar:widgets/charts/theme/vintage.ts"),o=e("sugar:widgets/charts/theme/westeros.ts"),i=e("sugar:widgets/charts/theme/essos.ts"),l=e("sugar:widgets/charts/theme/wonderland.ts"),m=e("sugar:widgets/charts/theme/walden.ts"),c=e("sugar:widgets/charts/theme/infographic.ts"),g=e("sugar:widgets/charts/theme/macarons.ts"),u=e("sugar:widgets/charts/theme/roma.ts"),f=e("sugar:widgets/charts/theme/shine.ts"),n=e("sugar:widgets/charts/theme/dark.ts"),T=e("sugar:widgets/charts/theme/blue.ts"),w=e("sugar:widgets/charts/theme/warm.ts"),p=e("sugar:widgets/charts/theme/cold.ts"),b=e("sugar:widgets/charts/theme/chalk.ts"),C=e("sugar:widgets/charts/theme/modi.ts");a.registerTheme("sugar",r.default),a.registerTheme("colorui",s.default),a.registerTheme("aipage",h.default),a.registerTheme("vintage",d.default),a.registerTheme("westeros",o.default),a.registerTheme("essos",i.default),a.registerTheme("wonderland",l.default),a.registerTheme("walden",m.default),a.registerTheme("infographic",c.default),a.registerTheme("macarons",g.default),a.registerTheme("roma",u.default),a.registerTheme("shine",f.default),a.registerTheme("dark",n.default),a.registerTheme("blue",T.default),a.registerTheme("warm",w.default),a.registerTheme("cold",p.default),a.registerTheme("chalk",b.default),a.registerTheme("modi",C.default),t.baseTheme={tooltip:{backgroundColor:"rgba(50,50,50,0.7)",borderWidth:0,padding:5,textStyle:{color:"#fff"},axisPointer:{lineStyle:{color:"#cccccc",width:1},crossStyle:{color:"#cccccc",width:1}}}},t.themeMap={sugar:{chartTheme:r.default},colorui:{chartTheme:s.default},modi:{chartTheme:C.default},aipage:{chartTheme:h.default},macarons:{chartTheme:g.default},infographic:{chartTheme:c.default},westeros:{chartTheme:o.default},wonderland:{chartTheme:l.default},walden:{chartTheme:m.default},roma:{chartTheme:u.default},chalk:{titleColor:"#ffffff",textColor:"#333",chartTheme:b.default},shine:{chartTheme:f.default},vintage:{chartTheme:d.default},essos:{chartTheme:i.default},dark:{titleColor:"#ffffff",textColor:"#333",chartTheme:n.default},blue:{dashboardBC:"#030C3B",titleColor:"#73aae5",textColor:"#333",chartTheme:T.default},warm:{dashboardBC:"#281E2F",titleColor:"#EA6C6D",textColor:"#333",chartTheme:w.default},cold:{dashboardBC:"#121929",titleColor:"#35F3FD",textColor:"#333",chartTheme:p.default}},t.dashboardThemes=["sugar","colorui","modi","aipage","macarons","infographic","westeros","wonderland","walden","roma","chalk","shine","dark","blue","warm","cold"].map(function(e){return{name:e,hash:e,registered:!0,config:t.themeMap[e]}}),t.reportThemes=["sugar","colorui","modi","aipage","macarons","infographic","westeros","wonderland","walden","roma","chalk","shine","vintage","essos","dark","blue","warm","cold"].map(function(e){return{name:e,hash:e,registered:!0,config:t.themeMap[e]}})});
;sugar.define("sugar:stores/chart-theme.ts",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChartTheme=void 0;var s=e("sugar:node_modules/tslib/tslib.js"),r=e("sugar:node_modules/mobx-state-tree/dist/mobx-state-tree.js"),i=e("sugar:node_modules/amis/lib/index.js"),a=e("sugar:widgets/charts/theme/_register-theme.ts"),n=e("sugar:utils/i18n.ts");t.ChartTheme=r.types.model("ChartTheme",{theme:r.types.optional(r.types.frozen(),{config:{}})}).actions(function(e){return{setTheme:function(t,r){if(t=t||"sugar",t.includes("theme_")){if((null===r||void 0===r?void 0:r.config)instanceof Object){var o=JSON.parse(JSON.stringify(r));return o.config.chartTheme=s.__assign(s.__assign({},a.baseTheme),o.config.chartTheme||{}),void(e.theme=o)}t="sugar",i.toast.error(n.default("自定义主题解析失败"))}e.theme={name:t,hash:t,registered:!0,config:a.themeMap[t]}}}})});
;sugar.define("sugar:stores/index.ts",function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.observer=e.inject=e.getRoot=e.UNDO_PATH_FILTER=e.undoManager=e.Sugar=void 0;var s=t("sugar:node_modules/mobx-state-tree/dist/mobx-state-tree.js"),o=t("sugar:utils/undo-manager.ts"),r=t("sugar:node_modules/mobx-react/index.js");Object.defineProperty(e,"observer",{enumerable:!0,get:function(){return r.observer}});var a=t("sugar:utils/storage.ts"),n=t("sugar:stores/user.ts"),i=t("sugar:stores/role.ts"),l=t("sugar:stores/company.ts"),p=t("sugar:stores/assist.ts"),d=t("sugar:stores/notice.ts"),u=t("sugar:stores/json.ts"),g=t("sugar:stores/billing-license.ts"),c=t("sugar:stores/group.ts"),y=t("sugar:stores/report.ts"),h=t("sugar:stores/chart.ts"),m=t("sugar:stores/condition.ts"),b=t("sugar:stores/editor.ts"),f=t("sugar:stores/dashboard.ts"),v=t("sugar:stores/self-report.ts"),P=t("sugar:stores/self-dashboard.ts"),M=t("sugar:stores/database.ts"),T=t("sugar:stores/sql-model.ts"),S=t("sugar:stores/api-adaptor.ts"),j=t("sugar:stores/rename-lib.ts"),R=t("sugar:stores/data-model/data-model.ts"),w=t("sugar:stores/html.ts"),C=t("sugar:stores/geo-json.ts"),E=t("sugar:stores/tab.ts"),H=t("sugar:stores/user-attr.ts"),N=t("sugar:stores/step.ts"),W=t("sugar:stores/scene.ts"),A=t("sugar:stores/demo.ts"),D=t("sugar:stores/news.ts"),_=t("sugar:stores/chart-condition.ts"),L=t("sugar:stores/custom-table.ts"),O=t("sugar:stores/chart-warning.ts"),x=t("sugar:stores/overview.ts"),F=t("sugar:stores/widget-template.ts"),U=t("sugar:stores/chart-theme.ts");e.Sugar=s.types.model("SugarStore",{user:s.types.optional(n.User,{}),role:s.types.optional(i.Role,{}),company:s.types.optional(l.Company,{admins:[]}),assist:s.types.optional(p.Assist,{}),notice:s.types.optional(d.Notice,{}),json:s.types.optional(u.Json,{}),license:s.types.optional(g.License,{}),group:s.types.optional(c.Group,{}),report:s.types.optional(y.Report,{}),chart:s.types.optional(h.Chart,{}),condition:s.types.optional(m.Condition,{}),chartCondition:s.types.optional(_.ChartCondition,{}),editor:s.types.optional(b.Editor,{}),dashboard:s.types.optional(f.Dashboard,{}),selfReport:s.types.optional(v.SelfReport,{}),selfDashboard:s.types.optional(P.SelfDashboard,{}),database:s.types.optional(M.Database,{}),sqlModel:s.types.optional(T.SqlModel,{}),apiAdaptor:s.types.optional(S.ApiAdaptor,{}),customTable:s.types.optional(L.CustomTableEntity,{}),chartWarning:s.types.optional(O.ChartWarningEntity,{}),renameLib:s.types.optional(j.RenameLib,{}),dataModel:s.types.optional(R.DataModel,{}),history:s.types.optional(o.UndoManager,{}),html:s.types.optional(w.Html,{}),geoJSON:s.types.optional(C.GeoJSON,{}),tab:s.types.optional(E.Tab,{}),userAttr:s.types.optional(H.UserAttr,{}),scene:s.types.optional(W.Scene,{}),demo:s.types.optional(A.Demo,{}),productNews:s.types.optional(D.ProductNews,{}),overview:s.types.optional(x.Overview,{}),step:s.types.optional(N.Step,{}),widgetTemplate:s.types.optional(F.WidgetTemplate,{}),chartTheme:s.types.optional(U.ChartTheme,{})}).actions(function(t){return G(t),{}});var q=/^(\/report\/current\/data|\/dashboard\/current\/data|\/chart\/list\/data|\/condition\/list\/data|\/dataModel\/current\/data|\/scene\/current\/scene)/i;e.UNDO_PATH_FILTER=q;var J;e.undoManager=J;var G=function(t){e.undoManager=J=t.history,J.setFilter(q)};e.default=function(t){var s=a.get("asideFolded"),o=a.get("groupPaths",{}),r=a.get("groupHistory",{}),n=a.get("iPaths",""),i=a.get("ctrlPanelWidth",315),l=a.get("ctrlPanelMin",!1),p=a.get("layerPanelWidth",150),d=a.get("layerPanelMin",!1),u=a.get("modelEditorLeftWidth",200),g=a.get("modelEditorTopHeight",180),c=a.get("closedNoticeHash","");t.assist={asideFolded:s,groupPaths:o,groupHistory:r,iPaths:n,ctrlPanelWidth:i,ctrlPanelMin:l,layerPanelWidth:p,layerPanelMin:d,modelEditorLeftWidth:u,modelEditorTopHeight:g},t.notice={closedNoticeHash:c};var y=e.Sugar.create(t);return y},e.getRoot=s.getRoot;var I=function(t){return function(e){var s=e.sugar;return t(s)}},k=function(t){return r.inject(I(t))};e.inject=k});
;sugar.define("sugar:widgets/ctrl-panel/data-bind-ctrl/debug-refresh-btn.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=e("sugar:node_modules/tslib/tslib.js"),i=e("sugar:utils/i18n.ts"),a=e("sugar:node_modules/react/index.js"),n=e("sugar:node_modules/amis/lib/index.js"),l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={disableDebug:!1,disableRefresh:!1},t}return s.__extends(t,e),t.prototype.componentWillMount=function(){this.handleDebugClick=this.handleDebugClick.bind(this),this.handleRefreshClick=this.handleRefreshClick.bind(this)},t.prototype.handleDebugClick=function(){var e=this;this.setState({disableDebug:!0}),setTimeout(function(){e.props.loadDebugData(),setTimeout(function(){e.setState({disableDebug:!1})},500)},"static"===this.props.dataType?1e3:10)},t.prototype.handleRefreshClick=function(){var e=this;this.setState({disableRefresh:!0}),setTimeout(function(){e.props.loadData("editor"),setTimeout(function(){e.setState({disableRefresh:!1})},500)},"static"===this.props.dataType?1e3:10)},t.prototype.render=function(){return a.createElement("div",{className:"text-center form-group form-item"},a.createElement(n.Button,{level:"success",disabled:this.state.disableDebug||"static"===this.props.dataType,onClick:this.handleDebugClick},i.default(this.props.debugText||"调试")),a.createElement(n.Button,{level:"primary",disabled:this.state.disableRefresh,onClick:this.handleRefreshClick,className:"m-l"},i.default(this.props.refreshText||"刷新数据")))},t.displayName="DebugAndRefreshBtn",t}(a.PureComponent);t.default=l});
;sugar.define("sugar:utils/xlsxCommon.js",function(r,e){"use strict";function t(r,e){for(var t=r.utils.sheet_to_formulae(e),n=[],o=e["!ref"].split(":")[1]?e["!ref"].split(":")[1]:e["!ref"].split(":")[0],s=o.match(/([A-Z]+)(\d+)/),d=0;d<parseInt(s[2]);++d){n[d]=[];for(var f=0;f<a(s[1]);++f)n[d][f]=""}for(var d=0;d<t.length;++d){var l=t[d].match(/([A-Z]+)(\d+)=(.*)/),h=a(l[1])-1,i=parseInt(l[2])-1,c=e[l[1]+l[2]].v;"n"==e[l[1]+l[2]].t&&e[l[1]+l[2]].w&&(e[l[1]+l[2]].w.match(/\w+,\s\w+\s\d\d,\s\d\d\d\d/)||e[l[1]+l[2]].w.match(/^\d\d?\/\d\d?\/\d\d(\d\d)?$/))&&(c=e[l[1]+l[2]].w),"string"==typeof c&&(c=c.replace(/\&\#x27;/g,"'")),n[i][h]=c}var u=e["!merges"];if(u&&u.length)for(var d=0;d<u.length;++d)for(var v=u[d],g=v.s.c;g<=v.e.c;++g)for(var p=v.s.r;p<=v.e.r;++p)n[p][g]=n[v.s.r][v.s.c];for(var m=0,d=1;d<n[0].length&&(null!=n[0][d]&&void 0!=n[0][d]&&""!=n[0][d]);++d)m+=1;if(m){m+=1;for(var d=0;d<n.length;++d)n[d]=n[d].slice(0,m);return n}return n}function a(r){for(var e=r.length,t=64,a=0,n=e-1;n>=0;--n)a+=(r[n].charCodeAt()-t)*Math.pow(26,e-1-n);return a}Object.defineProperty(e,"__esModule",{value:!0}),e.handleWorkSheet=void 0,e.handleWorkSheet=t});
;sugar.define("sugar:widgets/handsontable.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=e("sugar:node_modules/tslib/tslib.js"),r=e("sugar:utils/i18n.ts"),s=e("sugar:node_modules/react/index.js"),n=e("sugar:utils/xlsxCommon.js"),o=e("sugar:node_modules/amis/lib/index.js"),l=function(t){function l(e){var a=t.call(this,e)||this;return a.importExcelData=a.importExcelData.bind(a),a.loadFile=a.loadFile.bind(a),a}return a.__extends(l,t),l.prototype.shouldComponentUpdate=function(){return!1},l.prototype.componentDidMount=function(){var t=this,r=this.props.value||[],s=0;this.props.extraHeaders&&this.props.extraHeaders.length>0&&(s=this.props.extraHeaders.length,r=this.props.extraHeaders.concat(r)),r=JSON.parse(JSON.stringify(r)),this.tableData=r;var n={minCols:3,minRows:51,fixedRowsTop:s,rowHeaders:!0,colHeaders:!1,readOnlyCellClassName:"handsontablerReadOnlyCell",data:r,afterChange:function(e){if(e){var a=t.tableData;if(t.props.extraHeaders&&t.props.extraHeaders.length>0&&(a=t.tableData.slice(t.props.extraHeaders.length)),a=JSON.parse(JSON.stringify(a)),t.props.columnLength){for(var r=[],s=0,n=a;s<n.length;s++){var o=n[s];if(!o[0]&&!o[1])break;r.push([o[0]||"",o[1]||""])}a=r}t.props.onChange(a)}},cells:function(e){var a={};return t.props.extraHeaders&&t.props.extraHeaders.length>0&&e<t.props.extraHeaders.length&&(a.readOnly=!0),a}};Promise.resolve().then(function(){return new Promise(function(t){e(["sugar:node_modules/handsontable/dist/handsontable.full.js"],function(e){t(e)})})}).then(function(e){var r=new e(t.refs.table,a.__assign(a.__assign({},n),t.props.setting));r.addHook("beforeKeyDown",function(e){e.stopPropagation()}),r.render(),t.table=r})},l.prototype.componentWillReceiveProps=function(e){var t=this,a=e.value||[];if(this.props.extraHeaders&&this.props.extraHeaders.length>0&&(a=this.props.extraHeaders.concat(a)),a=JSON.parse(JSON.stringify(a)),this.tableData=a,this.table)this.hasLoaded=!0,this.table.loadData(a);else var r=setInterval(function(){t.table&&(t.hasLoaded||t.table.loadData(a),clearInterval(r))},100)},l.prototype.importExcelData=function(){var e=this.refs.fileInput;e.click()},l.prototype.loadFile=function(){var t=this,s=this.refs.fileInput,l=s.files?s.files[0]:null;if(l){l&&l.size>=2097152&&o.toast.error(r.default("请不要上传超过2M的文件"));var i=new FileReader;i.readAsArrayBuffer(l),i.onload=function(){return a.__awaiter(t,void 0,void 0,function(){var t=this;return a.__generator(this,function(){return i.result&&Promise.resolve().then(function(){return new Promise(function(t){e(["sugar:node_modules/xlsx/xlsx.js"],function(e){t(e)})})}).then(function(e){var a=e.read(new Uint8Array(i.result),{type:"array",cellDates:!1}),r=a.Sheets[a.SheetNames[0]],o=n.handleWorkSheet(e,r);t.props.columnLength&&(o=o.map(function(e){return e.slice(0,t.props.columnLength)})),t.props.onChange(o),s.value=""}),[2]})})}}},l.prototype.render=function(){return s.createElement("div",{style:{height:300,width:"100%",overflow:"hidden"},className:this.props.className||""},this.props.needExcel||this.props.label?s.createElement("div",{className:"object-array-editor__header"},s.createElement("label",{style:{width:"85%"}},this.props.label?this.props.label:r.default("手动录入或从Excel/CSV中导入数据")),this.props.needExcel?s.createElement("div",{className:"pull-right tool-btns"},s.createElement(o.TooltipWrapper,{tooltip:r.default("选择Excel/CSV文件"),placement:"top"},s.createElement("i",{className:"fa fa-upload",onClick:this.importExcelData}))):null):null,s.createElement("div",{ref:"table"}),s.createElement("input",{ref:"fileInput",type:"file",accept:".xlsx,.xls,.csv",style:{display:"none"},onChange:this.loadFile}))},l.displayName="HandsonTable",l}(s.Component);t.default=l});
;sugar.define("sugar:widgets/code-editor.tsx",function(e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var t=e("sugar:node_modules/tslib/tslib.js"),o=e("sugar:utils/i18n.ts"),s=e("sugar:node_modules/react/index.js"),i=e("sugar:utils/common-helper.ts"),r=e("sugar:node_modules/lodash/cloneDeep.js"),a=!1,l=[],d=function(e,n,o){for(var s=window.monaco,i=["AS","AVG","ASC","AND","ANY","ALL","BETWEEN","CASE","COUNT","CONCAT","DESC","EXISTS","ELSE","FROM","FULL OUTER JOIN","GROUP BY","HAVING","IN","IS NOT NULL","IS NULL","INNER JOIN","JOIN","UNION","LEFT JOIN","RIGHT JOIN","LIKE","LIMIT","NOW","THEN","MAX","MIN","SUM","NOT","NOT IN","ORDER BY","OR","SELECT","SELECT DISTINCT","VALUES","WHERE","WHEN"],r=[],a=0,d=i;a<d.length;a++){var u=d[a];r.push(o&&"SELECT"===u?{label:u,kind:s.languages.CompletionItemKind.Snippet,insertText:u,detail:"计算字段只需要写SQL表达式即可，不需要写完整的SQL语句"}:{label:u,kind:s.languages.CompletionItemKind.Keyword,insertText:u})}if(e){for(var p=["conditions","drillDowns","dependence","querys","YEAR","MONTH","DAY","HOUR","DATE","TIMESTAMP"],m=0,c=p;m<c.length;m++){var u=c[m];r.push({label:u,kind:s.languages.CompletionItemKind.Snippet,insertText:"{"+u+"}"})}r.push({label:"SUGAR_USER",kind:s.languages.CompletionItemKind.Snippet,insertText:"{{SUGAR_USER}}"})}if(n&&n.length)for(var g=0,E=n;g<E.length;g++){var u=E[g];r.push(t.__assign({kind:s.languages.CompletionItemKind.Field},u))}l=r},u=function(){return{suggestions:r(l)}},p=function(n){function r(){return null!==n&&n.apply(this,arguments)||this}return t.__extends(r,n),r.prototype.componentWillMount=function(){var n=this;e(["sugar:node_modules/amis/lib/components/Editor.js"],function(e){return n.setState({component:e.default})}),this._addSQLKeyWord=this._addSQLKeyWord.bind(this)},r.prototype.componentDidMount=function(){var e=this,n=setInterval(function(){window.monaco&&(e._addSQLKeyWord(),clearInterval(n))},100)},r.prototype._addSQLKeyWord=function(){var e=window.monaco;d(!!this.props.withSugarSQLKeyWords,this.props.otherSQLKeyWords||[],!!this.props.isCalc),a||(a=!0,e.languages.registerCompletionItemProvider("sql",{provideCompletionItems:u}))},r.prototype.render=function(){var e=this.state&&this.state.component,n=this.props,r=n.contaierClassName,a=void 0===r?"":r,l=n.options,d=void 0===l?{}:l,u=t.__rest(n,["contaierClassName","options"]);return u.onChange||(u=t.__assign(t.__assign({},u),{onChange:i.noop})),d.scrollbar={alwaysConsumeMouseWheel:!1},e?s.createElement("div",{className:"code-editor-container "+a},s.createElement(e,t.__assign({},u,{options:d}))):s.createElement("p",null,o.default("加载中。。。"))},r.displayName="CodeEditor",r}(s.PureComponent);n.default=p});
;sugar.define("sugar:widgets/dnd-sort.tsx",function(e,n){"use strict";function r(e,r){return void 0===r&&(r=!0),function(o){var d=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return t.__extends(n,e),n.prototype.componentDidMount=function(){var e=this;if(!this.props.dndDefaultDragPreview){var n=new Image;n.src="/static/dragAndMove.png",n.onload=function(){return e.props.connectDragPreview(n)}}},n.prototype.render=function(){var e=this.props,n=e.connectDragSource,r=e.connectDropTarget,g=(e.connectDragPreview,e.draggable),d=e.isDragging,c=(e.id,e.onMoving,e.onDroped,e.useIdToMoving,e.notCareIframe,e.dndDefaultDragPreview,e.canDrag),u=t.__rest(e,["connectDragSource","connectDropTarget","connectDragPreview","draggable","isDragging","id","onMoving","onDroped","useIdToMoving","notCareIframe","dndDefaultDragPreview","canDrag"]);return i.createElement(o,t.__assign({},u,{isDragging:d,ref:function(e){e&&(r(a.findDOMNode(e)),c!==!1&&g&&n(a.findDOMNode(e)))}}))},n.displayName="DndSortHOC",n.defaultProps={draggable:r},n}(i.Component);return g.DropTarget(e||function(e){return e.dndType},n.DropTargetSpec,function(e){return{connectDropTarget:e.dropTarget()}})(g.DragSource(e||function(e){return e.dndType},n.DragSourceSpec,function(e,n){return{connectDragSource:e.dragSource(),connectDragPreview:e.dragPreview(),isDragging:n.isDragging()}})(d))}}function o(e){return function(r){var o=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return t.__extends(n,e),n.prototype.render=function(){var e=this.props,n=(e.connectDragSource,e.connectDropTarget),o=(e.connectDragPreview,e.draggable,e.isDragging,e.id,e.onMoving,e.onDroped,e.useIdToMoving,e.notCareIframe,e.dndDefaultDragPreview,t.__rest(e,["connectDragSource","connectDropTarget","connectDragPreview","draggable","isDragging","id","onMoving","onDroped","useIdToMoving","notCareIframe","dndDefaultDragPreview"]));return i.createElement(r,t.__assign({},o,{ref:function(e){e&&n&&n(a.findDOMNode(e))}}))},n.displayName="DnDOnlyDropHOC",n}(i.Component);return g.DropTarget(e||function(e){return e.dndType},n.DropTargetSpec,function(e){return{connectDropTarget:e.dropTarget()}})(o)}}Object.defineProperty(n,"__esModule",{value:!0}),n.OnlyDrop=n.DropTargetSpec=n.DragSourceSpec=void 0;var t=e("sugar:node_modules/tslib/tslib.js"),i=e("sugar:node_modules/react/index.js"),a=e("sugar:node_modules/react-dom/index.js"),g=e("sugar:node_modules/react-dnd/lib/index.js");n.DragSourceSpec={beginDrag:function(e,n,r){var o=a.findDOMNode(r).getBoundingClientRect();return{id:e.id,index:e.index,height:o.height,width:o.width}},endDrag:function(e){e.onDroped&&e.onDroped(e.id)}},n.DropTargetSpec={hover:function(e,n,r){if(n&&r){var o=n.getItem(),t=o.index,i=e.index;if(t!==i){var g=a.findDOMNode(r).getBoundingClientRect(),d=o.height,c=o.width,u=g.height,D=g.width,s=!1,p=n.getClientOffset(),f=p.y-g.top,l=p.x-g.left;d>=u&&c>=D&&(s=!0),d>=f&&c>=l&&(s=!0),s&&(e.useIdToMoving?e.onMoving(o.id,e.id):e.onMoving(t,i),o.index=i)}}}},n.default=r,n.OnlyDrop=o});
;sugar.define("sugar:widgets/debounce-text.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=e("sugar:node_modules/tslib/tslib.js"),s=e("sugar:utils/i18n.ts"),o=e("sugar:node_modules/react/index.js"),a=e("sugar:node_modules/lodash/debounce.js"),r=e("sugar:node_modules/amis/lib/index.js"),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.componentWillMount=function(){this.setState({value:this.props.value||""}),this.propsOnChange=a(this.props.onChange,this.props.delay||300),this.onChange=this.onChange.bind(this)},t.prototype.componentWillReceiveProps=function(e){this.props.notReceiveProps||this.setState({value:e.value||""}),(this.props.delay!==e.delay||this.props.onChange!=e.onChange)&&(this.propsOnChange=a(this.props.onChange,e.delay||300))},t.prototype.onChange=function(e){this.setState({value:e}),this.propsOnChange(e)},t.prototype.render=function(){var e=this,t=this.props,a=(t.onChange,t.value,t.notReceiveProps,t.delay,t.textarea),i=n.__rest(t,["onChange","value","notReceiveProps","delay","textarea"]);return a?o.createElement(r.Textarea,n.__assign({autoComplete:"off",value:this.state.value,locale:s.lang,onChange:function(t){return e.onChange(t.currentTarget.value)}},i)):o.createElement(r.InputBox,n.__assign({type:"text",value:this.state.value,onChange:function(t){return e.onChange(t)}},i))},t.displayName="DebounceText",t}(o.PureComponent);t.default=i});
;sugar.define("sugar:sites/sugar-cxd.ts",function(e,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.classPrefix=s.appTheme=void 0;var a=e("sugar:node_modules/amis/lib/index.js");a.theme("sugar-cxd",{name:"sugar-cxd",classPrefix:"cxd-",components:{toast:{closeButton:!0}},renderers:{"range-control":{showInput:!1,clearable:!0}}}),a.setDefaultTheme("sugar-cxd"),s.appTheme=a.getTheme("sugar-cxd"),s.classPrefix=s.appTheme.classPrefix});
;sugar.define("sugar:widgets/object-array-editor/object-array-editor-item.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ObjectArrayEditorItemDraggable=t.redOrGreenOptions=void 0;var l=e("sugar:node_modules/tslib/tslib.js"),a=e("sugar:utils/i18n.ts"),n=e("sugar:node_modules/react/index.js"),r=e("sugar:node_modules/react-dom/index.js"),i=e("sugar:widgets/dnd-sort.tsx"),o=e("sugar:node_modules/classnames/index.js"),s=e("sugar:node_modules/amis/lib/components/ColorPicker.js"),u=e("sugar:node_modules/amis/lib/index.js"),d=e("sugar:widgets/debounce-text.tsx"),c=e("sugar:node_modules/rc-input-number/lib/index.js"),g=e("sugar:sites/sugar-cxd.ts");t.redOrGreenOptions=[{label:a.default("无"),value:""},{label:">",value:">"},{label:">=",value:">="},{label:"<",value:"<"},{label:"<=",value:"<="},{label:"=",value:"="},{label:"!=",value:"!="},{label:"in",value:"in"},{label:"not in",value:"notIn"},{label:a.default("正则"),value:"reg"}];var p=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return l.__extends(i,e),i.prototype.componentWillMount=function(){this.childrenOnChange=this.childrenOnChange.bind(this),this.popOverContainerCallback=this.popOverContainerCallback.bind(this)},i.prototype.childrenOnChange=function(e){this.props.onChange(this.props.index,e)},i.prototype.popOverContainerCallback=function(){var e=r.findDOMNode(this);if(!e)return document.body;for(var t=e.parentElement,l=null;t;)t.className&&~t.className.split(" ").indexOf(g.classPrefix+"Modal-content")?(l=t,t=null):t=t.parentElement;return l||document.body},i.prototype.render=function(){var e=this,r=this.props,i=r.rowValue,g=r.isDragging,p=r.index,m=r.onChange,b=r.onDelete,f=r.cols,h=r.sortable,v=f.map(function(r,o){var g=r.type,b=r.list,f=r.children,h=r.key,v=(r.name,r.placeholder),y=(r.defaultValue,r.tdStyle),_=r.style,C=r.className,S=r.hidden,O=r.multiple,E=r.labelField,k=r.valueField,x=l.__rest(r,["type","list","children","key","name","placeholder","defaultValue","tdStyle","style","className","hidden","multiple","labelField","valueField"]);if(S)return null;var N=null;switch(g){case"text":N=n.createElement(d.default,{value:i[h||""]||"",notReceiveProps:!0,onChange:function(e){var t;return m(p,(t={},t[h||""]=e,t))},placeholder:a.default(v||"请输入"),className:C,style:_});break;case"number":N=n.createElement(c.default,l.__assign({prefixCls:"a-Number",value:i[h||""]||0,onChange:function(e){var t;return m(p,(t={},t[h||""]=e,t))},placeholder:a.default(v||"请输入")},x));break;case"color":N=n.createElement(s.default,{value:i[h||""]||"",onChange:function(e){var t;return m(p,(t={},t[h||""]=e,t))},popOverContainer:e.popOverContainerCallback,format:"rgba",placement:"right-top-right-bottom"});break;case"select":N=O?n.createElement(u.Select,l.__assign({value:(""+i[h||""]||"").split(","),onChange:function(e){var t;return m(p,(t={},t[h||""]=e?e.map(function(e){return e.value}).join(","):"",t))},options:b,multiple:!0,placeholder:a.default(v||"请输入"),className:C||"full-width",style:_,popOverContainer:document.body,locale:a.lang,searchable:b&&b.length>10,labelField:E||"label",valueField:k||"value"},x)):n.createElement(u.Select,l.__assign({simpleValue:!0,value:""+i[h||""]||"",onChange:function(e){var t;return m(p,(t={},t[h||""]=e,t))},options:b,multiple:!!O,placeholder:a.default(v||"请输入"),className:C||"full-width",style:_,locale:a.lang,popOverContainer:document.body,searchable:b&&b.length>10,labelField:E||"label",valueField:k||"value"},x));break;case"redSetting":N=[n.createElement(u.Select,l.__assign({key:"redSetting",simpleValue:!0,value:i.redSetting||"",onChange:function(e){var t;return m(p,(t={},t.redSetting=e,t))},options:t.redOrGreenOptions,placeholder:a.default(v||"请输入"),locale:a.lang,popOverContainer:document.body,className:"full-width",labelField:E||"label",valueField:k||"value"},x)),i.redSetting?n.createElement(d.default,{key:"redSettingVal",value:i.redSettingVal||"",onChange:function(e){var t;return m(p,(t={},t.redSettingVal=e,t))},placeholder:v||a.default("in"===i.redSetting||"notIn"===i.redSetting?"英文逗号分割":"reg"===i.redSetting?"输入正则表达式":"请输入"),style:l.__assign({marginTop:3},_)}):null];break;case"greenSetting":N=[n.createElement(u.Select,l.__assign({key:"greenSetting",simpleValue:!0,value:i.greenSetting||"",onChange:function(e){var t;return m(p,(t={},t.greenSetting=e,t))},options:t.redOrGreenOptions,placeholder:a.default(v||"请输入"),locale:a.lang,popOverContainer:document.body,className:"full-width",labelField:E||"label",valueField:k||"value"},x)),i.greenSetting?n.createElement(d.default,{key:"greenSettingVal",value:i.greenSettingVal||"",onChange:function(e){var t;return m(p,(t={},t.greenSettingVal=e,t))},placeholder:v||a.default("in"===i.greenSetting||"notIn"===i.greenSetting?"英文逗号分割":"reg"===i.greenSetting?"输入正则表达式":"请输入"),style:l.__assign({marginTop:3},_)}):null];break;default:if(f){var j=f;N=n.createElement(j,l.__assign({rowValue:i,onChange:e.childrenOnChange},x))}}return n.createElement("td",{key:o,style:y},N)});return n.createElement("tr",{className:o("backg",{isDragging:g})},h?n.createElement("td",{className:"object-array-editor__sort"},n.createElement("i",{className:"fa fa-bars"})):null,v,n.createElement("td",{className:"object-array-editor__del"},n.createElement(u.TooltipWrapper,{tooltip:a.default("删除该行"),placement:"bottom"},n.createElement("i",{className:"fa fa-trash",onClick:function(){return b(p)}}))))},i.displayName="ObjArrEditorItem",i}(n.Component);t.default=p;var m=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return l.__extends(t,e),t=l.__decorate([i.default()],t)}(p);t.ObjectArrayEditorItemDraggable=m});
;sugar.define("sugar:widgets/confirm.tsx",function(e,t){"use strict";function n(e,t){return o?o.confirm(e,t):null}Object.defineProperty(t,"__esModule",{value:!0}),t.confirm=t.ConfirmComponent=void 0;var o,i=e("sugar:node_modules/tslib/tslib.js"),r=e("sugar:utils/i18n.ts"),s=e("sugar:node_modules/react/index.js"),l=e("sugar:node_modules/amis/lib/index.js"),a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={open:!1,message:"",title:""},t}return i.__extends(t,e),t.prototype.componentWillMount=function(){this.handleConfirm=this.handleConfirm.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this)},t.prototype.componentDidMount=function(){window.document.onkeydown=this.handleKeydown},t.prototype.handleKeydown=function(e){this.state.open&&13===e.keyCode&&this.handleConfirm()},t.prototype.handleConfirm=function(){this.setState({open:!1},this.defer.resolve)},t.prototype.handleCancel=function(){this.setState({open:!1},this.defer.reject)},t.prototype.confirm=function(e,t){var n=this;return this.setState({open:!0,message:e,title:t}),new Promise(function(e,t){n.defer={resolve:e,reject:t}})},t.prototype.render=function(){var e=this.props,t=e.title,n=e.confirmText,o=e.cancelText,i=this.state.open,r=this.state.message;return i?s.createElement(l.Modal,{show:!0},s.createElement(l.Modal.Header,{showCloseButton:!0,onClose:this.handleCancel},s.createElement(l.Modal.Title,null,this.state.title||t)),s.createElement(l.Modal.Body,null,r),s.createElement(l.Modal.Footer,null,s.createElement(l.Button,{onClick:this.handleCancel},o),s.createElement(l.Button,{level:"primary",onClick:this.handleConfirm},n))):null},t.displayName="Confirm",t.defaultProps={title:r.default("确认框"),confirmText:r.default("确认"),cancelText:r.default("取消")},t}(s.PureComponent),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i.__extends(t,e),t.prototype.render=function(){return s.createElement(a,i.__assign({},this.props,{ref:function(e){o=e}}))},t}(s.PureComponent);t.ConfirmComponent=d,t.confirm=n});
;sugar.define("sugar:widgets/object-array-editor/object-array-editor.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=e("sugar:node_modules/tslib/tslib.js"),a=e("sugar:utils/i18n.ts"),n=e("sugar:node_modules/react/index.js"),r=e("sugar:widgets/object-array-editor/object-array-editor-item.tsx"),l=e("sugar:node_modules/amis/lib/index.js"),i=e("sugar:widgets/object-array-editor/object-array-editor-item.tsx");Object.defineProperty(t,"ObjectArrayEditorCol",{enumerable:!0,get:function(){return i.ObjectArrayEditorCol}}),Object.defineProperty(t,"redOrGreenOptions",{enumerable:!0,get:function(){return i.redOrGreenOptions}});var s=e("sugar:widgets/confirm.tsx"),d=e("sugar:utils/frontendId.ts"),c=0,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={dialogOpen:!1,sort:!1},t}return o.__extends(t,e),t.prototype.componentWillMount=function(){this.toggleDialog=this.toggleDialog.bind(this),this.toggleSort=this.toggleSort.bind(this),this.removeAll=this.removeAll.bind(this),this.onDelete=this.onDelete.bind(this),this.onAdd=this.onAdd.bind(this),this.onRowValueChange=this.onRowValueChange.bind(this),this.handleItemMoving=this.handleItemMoving.bind(this),this.handleItemDroped=this.handleItemDroped.bind(this),c++},t.prototype.toggleDialog=function(){this.setState({dialogOpen:!this.state.dialogOpen})},t.prototype.toggleSort=function(){this.setState({sort:!this.state.sort})},t.prototype.removeAll=function(){var e=this;this.props.value&&this.props.value.length&&s.confirm(a.default("确定要清空所有行？")).then(function(){e.props.onChange([])}).catch(function(){})},t.prototype.onDelete=function(e){var t=this;s.confirm(a.default("确定要删除第「"+(e+1)+"」行？")).then(function(){var o=[].concat(t.props.value);o.splice(e,1),t.props.onChange(o)}).catch(function(){})},t.prototype.onAdd=function(){if(this.props.value&&this.props.value.length&&this.props.maxLines&&this.props.value.length>=this.props.maxLines)return void l.toast.error(this.props.maxLinesErrorMsg||a.default("最多只能添加「"+this.props.maxLines+"」行！"));var e=this.props.cols,t={id:d.generateId()};e.forEach(function(e){void 0!==e.defaultValue&&e.key&&(t[e.key]=e.defaultValue)}),this.props.autoFrontendId&&(t.frontendId=t.id),this.props.onChange(this.props.value?[].concat(this.props.value).concat([t]):[t])},t.prototype.onRowValueChange=function(e,t){var a=this.props.value.map(function(a,n){return e===n?o.__assign(o.__assign({},a),t):a});this.props.onChange(a)},t.prototype.handleItemMoving=function(e,t){var o=[].concat(this.props.value),a=o[e];o.splice(e,1),o.splice(t,0,a),this.props.onChange(o)},t.prototype.handleItemDroped=function(){},t.prototype.render=function(){var e=this,t=this.props,i=t.chartFrontendId,s=t.value,d=t.cols,p=t.label,u=t.containerClassName,h=t.disableDialog,m=t.toolBtns,g=t.addTipText,f=t.hideToolbar,b=this.state,y=b.dialogOpen,v=b.sort,E=n.createElement("div",{className:"object-array-editor "+(u||"")},n.createElement("div",{className:"object-array-editor__header"},p?n.createElement("label",null,p):null,n.createElement("div",{className:"pull-right tool-btns"},f?null:n.createElement(l.TooltipWrapper,{tooltip:a.default(v?"关闭排序":"开启排序，开启后可拖动每一行来排序"),placement:"bottom"},n.createElement("i",{className:"fa fa-sort",onClick:this.toggleSort})),f?null:n.createElement(l.TooltipWrapper,{tooltip:a.default("清空"),placement:"bottom"},n.createElement("i",{className:"fa fa-trash",onClick:this.removeAll})),m?m:null,h||f?null:n.createElement(l.TooltipWrapper,{tooltip:a.default(y?"缩小":"最大化"),placement:"bottom"},n.createElement("i",{className:"fa "+(y?"fa-compress":"fa-expand"),onClick:this.toggleDialog})))),n.createElement("div",{className:"object-array-editor__body"},n.createElement("table",{className:"table table-bordered"},n.createElement("thead",null,n.createElement("tr",null,v?n.createElement("th",{className:"object-array-editor__sort"},a.default("排序")):null,d.map(function(e,t){return e.hidden?null:n.createElement("th",{key:t,style:e.tdStyle},e.name)}),n.createElement("th",{className:"object-array-editor__del"},a.default("操作")))),n.createElement("tbody",null,s&&s.map?s.map(function(t,a){var l={cols:d,rowValue:t,index:a,onChange:e.onRowValueChange,onDelete:e.onDelete,key:(i||"")+(t.id||t.frontendId||a),sortable:v};return v&&s.length>1?(l=o.__assign(o.__assign({},l),{id:t.id||t.frontendId||a,onMoving:e.handleItemMoving,onDroped:e.handleItemDroped,dndType:"sugarObjectArrayEditor"+c,dndDefaultDragPreview:!0}),n.createElement(r.ObjectArrayEditorItemDraggable,o.__assign({},l))):n.createElement(r.default,o.__assign({},l))}):null))),n.createElement("div",{className:"object-array-editor__add text-center"},n.createElement(l.TooltipWrapper,{tooltip:a.default(g||"新增一行"),placement:"top"},n.createElement(l.Button,{className:"btn-icon btn-rounded",level:"info",onClick:this.onAdd},n.createElement("i",{className:"fa fa-plus"})))));return y?n.createElement(l.Modal,{show:!0,backdrop:"static",contentClassName:"big-modal"},n.createElement(l.Modal.Header,{showCloseButton:!0,onClose:this.toggleDialog},n.createElement(l.Modal.Title,null,p)),n.createElement(l.Modal.Body,null,E),n.createElement(l.Modal.Footer,null,n.createElement(l.Button,{level:"primary",onClick:this.toggleDialog},a.default("确定")))):E},t.displayName="ObjArrayEditor",t}(n.Component);t.default=p});
;sugar.define("sugar:widgets/sql-model-selector/field-type.tsx",function(e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var l=e("sugar:node_modules/tslib/tslib.js"),t=e("sugar:utils/i18n.ts"),n=e("sugar:node_modules/react/index.js"),u=e("sugar:node_modules/amis/lib/components/Select.js"),c=[{label:t.default("字符串"),value:"string"},{label:t.default("整数"),value:"int"},{label:t.default("小数"),value:"float"},{label:t.default("日期"),value:"date"},{label:t.default("时间"),value:"time"}],o=[{label:t.default("自动"),value:"auto"},{label:t.default("0位(四舍五入取整)"),value:0},{label:t.default("1位"),value:1},{label:t.default("2位"),value:2},{label:t.default("3位"),value:3},{label:t.default("4位"),value:4},{label:t.default("5位"),value:5},{label:t.default("6位"),value:6}],s=function(e){function a(){return null!==e&&e.apply(this,arguments)||this}return l.__extends(a,e),a.prototype.componentWillMount=function(){this.changeType=this.changeType.bind(this),this.changeAccuracy=this.changeAccuracy.bind(this)},a.prototype.changeType=function(e){this.props.onChange({type:e})},a.prototype.changeAccuracy=function(e){this.props.onChange({accuracy:e})},a.prototype.render=function(){{var e=this.props,a=e.rowValue;e.onChange}return[n.createElement("div",{key:"type",className:"inline-select-container"},n.createElement(u.default,{simpleValue:!0,value:a.type||"",onChange:this.changeType,options:c,placeholder:t.default("请输入"),locale:t.lang,popOverContainer:document.body,clearable:!1})),"float"===a.type?n.createElement("div",{key:"accuracy",className:"inline-select-container"},n.createElement(u.default,{simpleValue:!0,value:a.accuracy||0===a.accuracy?a.accuracy:2,onChange:this.changeAccuracy,options:o,placeholder:t.default("请输入"),popOverContainer:document.body,locale:t.lang,clearable:!1})):null]},a.displayName="FieldType",a}(n.Component);a.default=s});
;sugar.define("sugar:widgets/sql-model-selector/sql-model-editor.tsx",function(e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var t=e("sugar:node_modules/tslib/tslib.js"),l=e("sugar:utils/i18n.ts"),o=e("sugar:node_modules/react/index.js"),r=e("sugar:node_modules/amis/lib/index.js"),s=e("sugar:stores/index.ts"),n=e("sugar:widgets/code-editor.tsx"),i=e("sugar:widgets/object-array-editor/object-array-editor.tsx"),d=e("sugar:widgets/sql-model-selector/field-type.tsx"),u=e("sugar:utils/frontendId.ts"),c=e("sugar:widgets/progress.ts"),p=e("sugar:sites/amis-renderer.tsx"),m=function(e){function a(){return null!==e&&e.apply(this,arguments)||this}return t.__extends(a,e),a.prototype.componentWillMount=function(){this.generateModelFromSql=this.generateModelFromSql.bind(this),this.changeTemplate=this.changeTemplate.bind(this),this.onSubmit=this.onSubmit.bind(this),this.props.databaseSimpleList.loadData(),this.props.renameLibSimpleList.loadData()},a.prototype.changeTemplate=function(e,a,o,s){return t.__awaiter(this,void 0,void 0,function(){var a;return t.__generator(this,function(t){switch(t.label){case 0:return e?(c.default.show(),a=this.props.sqlModelStore.detailMap.mapByHash.get(e),a?[3,2]:[4,this.props.sqlModelStore.detailMap.loadDetail(e).catch(function(){e="",c.default.hide()})]):[2];case 1:t.sent(),t.label=2;case 2:return e&&a?s.updateData({databaseHash:a.databaseHash||"",sql:a.sql||"",openRow2Col:a.config.openRow2Col||!1,row2col_key:a.config.row2col_key||"",row2col_value:a.config.row2col_value||"",row2col_addKeyName:a.config.row2col_addKeyName||"",model:a.config.model||[]}):r.toast.error(l.default("获取模型失败")),c.default.hide(),[2]}})})},a.prototype.generateModelFromSql=function(e,a){var o=t.__assign({},e),s=o.sql||"",n=o.model||[];if(n&&n.length>0)return void r.toast.warning(l.default("请先清空所有字段模型！"));var i=s.split(/\sfrom\s/i);if(i.length<=1&&!i[0])return void r.toast.warning(l.default("分析SQL语句失败"));var d=i[0].match(/^\s*select\s([\s\S]+)$/i);if(d&&d[1]){for(var c=d[1].replace(/(\([^\)]+),([^\)]+\))/g,"$1__--sugar--__$2").replace(/(\([^\)]+),([^\)]+\))/g,"$1__--sugar--__$2").replace(/(\([^\)]+),([^\)]+\))/g,"$1__--sugar--__$2").replace(/(\([^\)]+),([^\)]+\))/g,"$1__--sugar--__$2").replace("sugarOpenUrl(","--opensugarurlfunc--").replace("true)","--opensugarurltruefunc--").replace("false)","--opensugarurlfalsefunc--").replace(/(\([^\)]+),([^\)]+\))/g,"$1__--sugar--__$2").replace(/(\([^\)]+),([^\)]+\))/g,"$1__--sugar--__$2").replace(/(\([^\)]+),([^\)]+\))/g,"$1__--sugar--__$2").replace(/(\([^\)]+),([^\)]+\))/g,"$1__--sugar--__$2").replace("--opensugarurltruefunc--","true)").replace("--opensugarurlfalsefunc--","false)").replace("--opensugarurlfunc--","sugarOpenUrl(").split(","),p=[],m=0;m<c.length;m++){var g=c[m].split(/\sas\s/i),f=g[0];g.length>1&&(f=g[g.length-1]),f=f.replace(/[\s`)]/g,"").replace(/__--sugar--__/g,",");var h=u.generateId();"*"!==f&&p.push({id:h,field:f,frontendId:h,type:"string"})}p.length?a(p):r.toast.warning(l.default("分析SQL语句失败，请手动添加字段模型"))}else r.toast.warning(l.default("分析SQL语句失败，请手动添加字段模型"))},a.prototype.onSubmit=function(e,a){var t=e||{},o=t.name,s=void 0===o?"":o,n=t.remark,i=void 0===n?"":n,d=t.databaseHash,u=void 0===d?"":d,c=t.sql,p=void 0===c?"":c,m=t.openRow2Col,g=void 0===m?!1:m,f=t.row2col_key,h=void 0===f?"":f,_=t.row2col_value,b=void 0===_?"":_,v=t.row2col_addKeyName,y=void 0===v?"":v,w=t.model,S=void 0===w?[]:w;if(!p)return void r.toast.error(l.default("请填写SQL语句"));if((null===S||void 0===S?void 0:S.length)<1)return void r.toast.error(l.default("请编辑SQL字段模型"));var L="";"update"===this.props.mode&&(L=this.props.sqlModelEntity.hash);var q={name:s,hash:L,remark:i,databaseHash:u,sql:p,config:{openRow2Col:g,row2col_key:h,row2col_value:b,row2col_addKeyName:y,model:S}};this.props.onSubmit(q,a)},a.prototype.render=function(){var e=this,a=this.props,s=a.mode,u=a.sqlModelEntity,c=a.onClose,m=a.databaseSimpleList,g=a.renameLibSimpleList,f=a.sqlModelStore,h=a.isInDebug,_=f.simpleList.data||[],b=location.pathname.split("/")[2],v=u||{config:{}},y=v.name,w=void 0===y?"":y,S=v.remark,L=void 0===S?"":S,q=v.databaseHash,k=void 0===q?"":q,x=v.sql,C=void 0===x?"":x,$=v.config,F=$.openRow2Col,Q=void 0===F?!1:F,M=$.row2col_key,N=void 0===M?"":M,E=$.row2col_value,H=void 0===E?"":E,T=$.row2col_addKeyName,D=void 0===T?"":T,R=$.model,K=void 0===R?[]:R,j={name:w,remark:L,databaseHash:k,sql:C,openRow2Col:Q,row2col_key:N,row2col_value:H,row2col_addKeyName:D,model:K},I=t.__spreadArrays([{name:l.default("不映射"),hash:""}],g.data||[]),B=[{type:"text",name:l.default("字段或表达式"),key:"field"},{type:"text",name:l.default("展示名称（中文名）"),key:"name"},{children:d.default,name:l.default("数据类型"),key:"type",defaultValue:"string"},{type:"select",key:"renameHash",name:l.default("数据值映射绑定"),defaultValue:"",list:I,tdStyle:{minWidth:80},labelField:"name",valueField:"hash"}],O=[{type:"group",controls:[{type:"text",name:"name",label:l.default("SQL模型名称"),required:!0,validations:{maxLength:30}},{type:"text",name:"remark",label:l.default("SQL模型简介")}]},{type:"group",controls:[{type:"select",name:"databaseHash",label:l.default("数据源"),description:'<a class="text-info" target="_blank" href="/group/'+b+'/manage/dbPreview?database=$databaseHash">'+l.default("--预览选中的数据源")+"</a>",required:!0,searchable:!0,clearable:!0,labelField:"name",valueField:"hash",options:m.data||[]},"add"===s?{type:"select",name:"sqlTempleteHash",placeholder:l.default("请选择已有的SQL模型"),label:l.default("基于已有SQL模型新建"),searchable:!0,clearable:!0,labelField:"name",valueField:"hash",onChange:this.changeTemplate,options:_}:{type:"static",label:" ",value:" "}]},{name:"sql",children:function(e){var a=e.onChange,t=e.value;return o.createElement("div",{className:"a-Form-item",style:{marginTop:20}},o.createElement("div",{className:"a-Form-label"},l.default("SQL语句（可换行）"),o.createElement("span",{className:"a-Form-star"},"*"),o.createElement("a",{style:{marginLeft:20},href:"/docs/DataBind-SQL-Condition",target:"_blank",className:"text-info"},l.default("如何在SQL中关联过滤条件?"))),o.createElement(n.default,{withSugarSQLKeyWords:!0,value:t,language:"sql",height:18*(j.sql||"").split("\n").length,onChange:function(e){return a(e)},style:{minHeight:150}}))}},{type:"switch",inline:!0,name:"openRow2Col",label:l.default("是否开启行转列"),description:'<a href="/docs/DataBind-SQL-Rowcol" target="_blank" class="text-info">'+l.default("什么是『行转列』?")+"</a>"},{type:"group",visibleOn:"openRow2Col",controls:[{type:"text",name:"row2col_key",label:l.default("行转列的名称字段")},{type:"text",name:"row2col_value",label:l.default("行转列的取值字段")},{type:"select",name:"row2col_addKeyName",placeholder:l.default("请选择数据值映射"),label:l.default("行转列字段名称映射"),searchable:!0,labelField:"name",valueField:"hash",options:I}]},{name:"model",children:function(a){var t=a.onChange,s=a.value,n=a.data;return o.createElement(i.default,{label:l.default("编辑SQL的字段模型"),disableDialog:!0,containerClassName:"m-t-md",addTipText:l.default("新增一个字段描述"),autoFrontendId:!0,cols:B,onChange:function(e){return t(e)},value:s,toolBtns:o.createElement(r.TooltipWrapper,{tooltip:l.default("从SQL语句中提取字段"),placement:"bottom"},o.createElement("i",{className:"fa fa-refresh",onClick:function(){return e.generateModelFromSql(n,t)}}))})}}],W=[{type:"button",label:l.default("取消"),onClick:c}];return h?W.push({type:"button",actionType:"submit",label:l.default("保存并关闭调试")},{type:"button",level:"primary",actionType:"submit",label:l.default("保存并继续调试")}):W.push({type:"button",level:"primary",actionType:"submit",label:l.default("确定")}),o.createElement(p.default,{schema:{type:"dialog",onClose:c,contentClassName:"big-modal",size:"xl",title:l.default("update"===s?"修改「"+w+"」":"新建SQL模型"),actions:W,body:{type:"form",title:"",mode:"vertical",data:j,onFinished:function(a,t){return e.onSubmit(a,h&&"primary"===(null===t||void 0===t?void 0:t.level)),!1},controls:O}}})},a.displayName="SqlModelEditorDialog",a=t.__decorate([s.inject(function(e){return{renameLibSimpleList:e.renameLib.simpleList,databaseSimpleList:e.database.simpleList,sqlModelStore:e.sqlModel}}),s.observer],a)}(o.Component);a.default=m});
;sugar.define("sugar:widgets/sql-model-selector/sql-model-selector.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=e("sugar:node_modules/tslib/tslib.js"),o=e("sugar:utils/i18n.ts"),s=e("sugar:node_modules/react/index.js"),a=e("sugar:stores/index.ts"),i=e("sugar:node_modules/amis/lib/index.js"),n=e("sugar:widgets/sql-model-selector/sql-model-editor.tsx"),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return l.__extends(t,e),t.prototype.componentWillMount=function(){var e=this,t=this.props.sqlModelStore;setTimeout(function(){t.simpleList.loadData(),e.props.value&&!/^mld_/.test(e.props.value)&&t.detailMap.loadDetail(e.props.value)},2),this.editSqlModel=this.editSqlModel.bind(this),this.addSqlModel=this.addSqlModel.bind(this),this.onClose=this.onClose.bind(this),this.onSubmit=this.onSubmit.bind(this),this.setState({openDialog:!1})},t.prototype.componentWillReceiveProps=function(e){this.props.value!==e.value&&e.value&&!/^mld_/.test(e.value)&&e.sqlModelStore.detailMap.loadDetail(e.value)},t.prototype.editSqlModel=function(){this.setState({mode:"update",openDialog:!0})},t.prototype.addSqlModel=function(){this.setState({mode:"add",openDialog:!0})},t.prototype.onClose=function(){this.setState({openDialog:!1})},t.prototype.onSubmit=function(e){var t=this,l=this.props.sqlModelStore;e.hash?l.update(e).then(function(e){e.res&&"done"===e.state&&(t.onClose(),i.toast.success(o.default("SQL模型更新成功")))}):l.add(e).then(function(e){if(e.res&&"done"===e.state){var l=e.res.data;t.props.onChange(l.hash),t.onClose(),i.toast.success(o.default("SQL模型新建成功"))}})},t.prototype.render=function(){var e=this.props,t=e.containerClassName,l=e.value,a=e.onChange,d=e.sqlModelStore,r=d.simpleList.data||[];return s.createElement("div",{className:(t||"")+" sql-model-selector"},s.createElement("div",{className:"sql-model-selector__select"},s.createElement(i.Select,{simpleValue:!0,className:"full-with",value:l,options:r.map(function(e){return{label:e.name,value:e.hash}}),onChange:a,locale:o.lang,placeholder:o.default("请新建或选择SQL模型"),searchable:r&&r.length>10})),s.createElement("div",{className:"sql-model-selector__btns"},l?s.createElement(i.TooltipWrapper,{tooltip:o.default("编辑选中的模型"),placement:"bottom"},s.createElement("i",{className:"fa fa-pencil",onClick:this.editSqlModel})):null,s.createElement(i.TooltipWrapper,{tooltip:o.default("新建SQL模型"),placement:"bottom"},s.createElement("i",{className:"fa fa-plus",onClick:this.addSqlModel}))),this.state.openDialog?s.createElement(n.default,{mode:this.state.mode,onClose:this.onClose,onSubmit:this.onSubmit,sqlModelEntity:"add"===this.state.mode?void 0:d.detailMap.mapByHash.get(l)}):null)},t.displayName="SqlModelSelector",t=l.__decorate([a.inject(function(e){return{sqlModelStore:e.sqlModel}}),a.observer],t)}(s.Component);t.default=d});
;sugar.define("sugar:widgets/data-model/data-model-filter/date-model-search-common.tsx",function(e,a){"use strict";function t(e){var a="",t="",i="";if(e.listMatch&&e.listMatch.mode){var d=[];d="list"==e.listMatch.mode?e.listMatch.list||[]:e.listMatch.manual||[],a=d.length>0?u.default("包含"):"",d.forEach(function(e){a+=e+" 或者 "}),a=a!==u.default("包含")?a.substr(0,a.length-4):""}return e.textMatch&&(t=u.default("AND"===e.textMatch.operator?"并且":"或者"),"string"!==e.type&&"int"!==e.type&&"float"!==e.type||!e.textMatch.value||e.textMatch.value.forEach(function(e){switch(e.type){case"include":i+=e.value?u.default("包含")+" "+e.value+" "+t+" ":"";break;case"start":i+=e.value?u.default("开头是")+" "+e.value+" "+t+" ":"";break;case"end":i+=e.value?u.default("结尾是")+" "+e.value+" "+t+" ":"";break;case"notIncluded":i+=e.value?u.default("不包含")+" "+e.value+" "+t+" ":"";break;case"equal":i+=""===e.value||e.value?u.default("等于")+" "+(e.value||u.default("空"))+" "+t+" ":"";break;case"ineq":i+=""===e.value||e.value?u.default("不等于")+" "+(e.value||u.default("空"))+" "+t+" ":"";break;case"null":i+=u.default("等于null")+" "+t+" ";break;case"notNull":i+=u.default("不等于null")+" "+t+" ";break;case"gt":i+=e.value?u.default("大于")+" "+e.value+" "+t+" ":"";break;case"gte":i+=e.value?u.default("大于等于")+" "+e.value+" "+t+" ":"";break;case"lt":i+=e.value?u.default("小于")+" "+e.value+" "+t+" ":"";break;case"lte":i+=e.value?u.default("小于等于")+" "+e.value+" "+t+" ":"";break;case"ineq":i+=e.value?u.default("不等于")+" "+e.value+" "+t+" ":""}}),i=i.substr(0,i.length-4)),{listFiltering:a,textFiltering:i,timeFiltering:"timestamp"===e.type||"datetime"===e.type||"date"===e.type?l(e).rangeTime:""}}function l(e){var a={};a="datetime"===e.type||"timestamp"===e.type?"timecus"===e.date.value?i.getDateTimeRangeByDefaultVal(e.date.value,e.date.detail.minDate,e.date.detail.maxDate):i.getDateTimeRangeByDefaultVal(e.date.value):"cus"===e.date.value?i.getDateLimitByRange(e.date.value,e.date.detail.minDate,e.date.detail.maxDate):i.getDateLimitByRange(e.date.value);var t,l,u;return"date"===e.type?(l=i.formatDate(a.minDate),u=i.formatDate(a.maxDate)):(l=i.formatDate(a.minDate,"$1-$2-$3 $4:$5:$6"),u=i.formatDate(a.maxDate,"$1-$2-$3 $4:$5:$6")),t=l+" - "+u,{rangeTime:t,minDate:l,maxDate:u}}Object.defineProperty(a,"__esModule",{value:!0}),a.selectedDate=a.getTableContent=void 0;var u=e("sugar:utils/i18n.ts"),i=e("sugar:utils/date-helper.ts");a.getTableContent=t,a.selectedDate=l});
;sugar.define("sugar:widgets/data-model/data-model-filter/data-model-filter-ctrl.tsx",function(e,l){"use strict";function a(e,l){var a=[],t=l?l.convert.type||l.dataType:"string";("dimension"===(null===l||void 0===l?void 0:l.type)&&("int"===t||"float"===t)||"string"===t)&&(a=[{title:u.default("列表筛选"),controls:[{name:"listMatch.mode",type:"radios",inline:!0,options:[{label:u.default("列表"),value:"list"},{label:u.default("手动"),value:"manual"}]},{type:"select",name:"listMatch.list",clearable:!0,multiple:!0,joinValues:!1,extractValue:!0,options:e,visibleOn:"data.listMatch.mode === 'list'",searchable:!0,desc:u.default("最多拉取1000行数据，数据太多请使用「手动」方式")},{type:"tag",name:"listMatch.manual",joinValues:!1,extractValue:!0,visibleOn:"data.listMatch.mode === 'manual'",placeholder:u.default("输入您要添加的项,回车确认"),desc:u.default("输入内容后要回车，可以输入多个")}]}]);var d=[{type:"tabs",activeKey:0,tabs:a}];return d}function t(e){var l=[{label:u.default("包含"),value:"include"},{label:u.default("开头是"),value:"start"},{label:u.default("结尾是"),value:"end"},{label:u.default("不包含"),value:"notIncluded"},{label:u.default("等于"),value:"equal"},{label:u.default("不等于"),value:"ineq"},{label:u.default("等于空"),value:"null"},{label:u.default("不等于空"),value:"notNull"}],a=[{label:u.default("大于"),value:"gt"},{label:u.default("大于等于"),value:"gte"},{label:u.default("等于"),value:"equal"},{label:u.default("小于"),value:"lt"},{label:u.default("小于等于"),value:"lte"},{label:u.default("不等于"),value:"ineq"},{label:u.default("等于空"),value:"null"},{label:u.default("不等于空"),value:"notNull"}],t=[{title:""+u.default("string"===e?"文本筛选":"int"===e||"float"===e?"数据筛选":"文本筛选"),controls:[{type:"select",name:"textMatch.operator",clearable:!0,options:[{label:u.default("包含以下所有条件"),value:"AND"},{label:u.default("包含以下任一条件"),value:"OR"}]},{type:"combo",multiple:!0,addable:!0,name:"textMatch.value",label:"",controls:[{type:"select",name:"type",clearable:!0,options:"string"===e?l:"int"===e||"float"===e?a:l},{hiddenOn:"this.type === 'null' || this.type === 'notNull'",type:"text",name:"value"}]}]}];return t}Object.defineProperty(l,"__esModule",{value:!0}),l.textTabsCtrl=l.listTabsCtrl=l.dateCtrl=l.timeCtrl=void 0;var u=e("sugar:utils/i18n.ts"),d=e("sugar:utils/date-helper.ts");l.timeCtrl=[{type:"radios",name:"date.value",inline:!1,label:u.default("时间范围"),inputFormat:"",format:"",options:[{label:u.default("10分钟前"),value:"10min"},{label:u.default("1小时前"),value:"1h"},{label:u.default("3小时前"),value:"3h"},{label:u.default("今天"),value:"today"},{label:u.default("昨天"),value:"yesterday"},{label:u.default("前天"),value:"beforeyesterday"},{label:u.default("自定义时间范围"),value:"timecus"}]},{type:"text",label:"",className:"p-l-md",placeholder:u.default("开始时间"),name:"date.detail.minDate",hiddenOn:"data.date.value != 'timecus'"},{type:"text",label:u.default("至"),className:"p-l-md",placeholder:u.default("截止时间"),name:"date.detail.maxDate",hiddenOn:"data.date.value != 'timecus'",desc:"可输入正负数，如: -1 表示一分钟前，+1 表示一分钟后。{ZERO} 表示当天零点（注意有大括号），{ZERO+60} 表示当天零点后的60分钟；如果想定义绝对日期时间，请填写绝对日期时间，例如：2018-01-01 12:30:00"}],l.dateCtrl=[{type:"radios",name:"date.value",inline:!1,label:u.default("日期范围"),inputFormat:"",format:"",options:[{label:u.default("近一周"),value:"week"},{label:u.default("近半月"),value:"halfMonth"},{label:u.default("近一月"),value:"month"},{label:u.default("近三月"),value:"threeMonth"},{label:u.default("近半年"),value:"halfYear"},{label:u.default("近一年"),value:"year"},{label:u.default("自定义日期范围"),value:"cus"}]},{type:"text",label:"",className:"p-l-md",placeholder:u.default("开始日期"),name:"date.detail.minDate",hiddenOn:"data.date.value != 'cus'"},{type:"text",label:u.default("至"),className:"p-l-md",placeholder:u.default("截止日期"),name:"date.detail.maxDate",hiddenOn:"data.date.value != 'cus'",desc:d.dateCusStringInfo}],l.listTabsCtrl=a,l.textTabsCtrl=t});
;sugar.define("sugar:widgets/data-model/data-model-filter/data-model-filter-modal-all.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.treeSelectOption=void 0;var a=e("sugar:node_modules/tslib/tslib.js"),i=e("sugar:utils/i18n.ts"),l=e("sugar:node_modules/react/index.js"),s=e("sugar:node_modules/lodash/cloneDeep.js"),n=e("sugar:node_modules/axios/index.js"),o=e("sugar:node_modules/amis/lib/index.js"),r=e("sugar:sites/amis-renderer.tsx"),d=e("sugar:widgets/data-model/data-model-filter/date-model-search-common.tsx"),c=e("sugar:widgets/data-model/data-model-filter/data-model-filter-ctrl.tsx"),m=e("sugar:sites/group/manage/data-model/editor/helper.ts"),h=function(e){function m(){var t=null!==e&&e.apply(this,arguments)||this;return t.getCategories=function(){return a.__awaiter(t,void 0,void 0,function(){var e,t,i,l,s;return a.__generator(this,function(a){switch(a.label){case 0:return e=this.props,t=e.dataModelEntity,i=e.groupHash,l=this.state.selectDimOrMeaId,[4,n.default.get("/api/group/"+i+"/dataModel/getSelectDimensionsValue?dataModelHash="+t.hash+"&dimensionsId="+l)];case 1:return s=a.sent().data,this.setState({categories:s&&s.data?s.data:[]}),[2]}})})},t}return a.__extends(m,e),m.prototype.componentWillMount=function(){this.update=this.update.bind(this),this.getSelectedDate=this.getSelectedDate.bind(this),this.onSubmit=this.onSubmit.bind(this),this.init=this.init.bind(this),this.getContent=this.getContent.bind(this),this.filterInit=this.filterInit.bind(this),this.toggleDialogHandle=this.toggleDialogHandle.bind(this),this.editDataModelFilter({}),this.props.onRef(this)},m.prototype.componentWillReceiveProps=function(e){var t=e.isModalShow,a=e.value;t&&this.editDataModelFilter(a)},m.prototype.editDataModelFilter=function(e,t){var a,i=this;this.setState({isModalShow:!0}),t&&this.setState({onChange:t});var l=this.props,n=l.isModalShow,o=l.value,r=n?o:e;if((null===(a=this.props.value)||void 0===a?void 0:a.id)&&!(null===e||void 0===e?void 0:e.id)&&!n&&this.setState({isModalShow:!1}),null===r||void 0===r?void 0:r.id){var d=r||{},c=this.props.dataModelEntity,m=c.config,h=m.dimensions,u=m.measures,p=s(d.searchParams);this.getContent(d.searchParams),this.setState({searchParams:d,filters:p,selectDimOrMea:h.get(r.id)||u.get(r.id),selectDimOrMeaId:r.id},function(){d.searchParams.listMatch&&("list"===d.searchParams.listMatch.mode?i.getCategories():null)})}else this.init()},m.prototype.getContent=function(e){var t=d.getTableContent(e);this.setState({listFiltering:t.listFiltering,textFiltering:t.textFiltering,timeFiltering:t.timeFiltering})},m.prototype.update=function(e){var t=this.filterInit(e);this.setState({filters:t.searchParams}),e.listMatch&&"list"===e.listMatch.mode&&this.getCategories(),this.getContent(t.searchParams)},m.prototype.getSelectedMenu=function(e){var t={textMatch:{operator:"AND"},listMatch:{mode:"list"},date:{value:"",detail:{minDate:"",maxDate:""}}};this.setState({filters:t,listFiltering:"",textFiltering:"",timeFiltering:""});var a=this.props.dataModelEntity,l=a.config,s=l.dimensions,n=l.measures,r=s.get(e.dimensionMenuSelect)||n.get(e.dimensionMenuSelect);if(r){this.setState({selectDimOrMeaId:e.dimensionMenuSelect,selectDimOrMea:r});var d=r?r.convert.type||r.dataType:"string";("dimension"===r.type&&("int"===d||"float"===d)||"string"===d)&&this.getCategories()}else o.toast.error(i.default("选择维度或度量无效，请重新选择！"))},m.prototype.getSelectedDate=function(e){var t=this.state.selectDimOrMea;this.setState({filters:e});var a={date:e.date,type:t?t.convert.type||t.dataType:"date"};this.setState({timeFiltering:d.selectedDate(a).rangeTime})},m.prototype.onSubmit=function(){var e=this.state,t=e.filters,a=e.onChange,i=this.filterInit(t);a?a(i):this.props.onChange(i),this.toggleDialogHandle(),this.props.initDataModelModalAllState&&this.props.initDataModelModalAllState()},m.prototype.filterInit=function(e){var t=this.state,a=t.selectDimOrMea,i=t.selectDimOrMeaId,l=a&&a.convert?a.convert.type||a.dataType:"string",n={type:a&&"measure"===a.type?"m":"d",id:i||"",searchParams:s(e)};if(n.searchParams.type=l,e.listMatch&&e.listMatch.mode)if("list"===e.listMatch.mode&&e.listMatch.list){var o=e.listMatch.list.join()?e.listMatch.list:[];n.searchParams.listMatch.list=o,delete n.searchParams.listMatch.manual}else if("manual"===e.listMatch.mode&&e.listMatch.manual){var o=e.listMatch.manual.join()?e.listMatch.manual:[];n.searchParams.listMatch.manual=o,delete n.searchParams.listMatch.list}return"timestamp"===l||"datetime"===l||"date"===l?(delete n.searchParams.textMatch,delete n.searchParams.listMatch):"int"===l||"float"===l?delete n.searchParams.date:delete n.searchParams.date,n},m.prototype.toggleDialogHandle=function(){this.init(),this.setState({isModalShow:!1}),this.props.initDataModelModalAllState&&this.props.initDataModelModalAllState()},m.prototype.init=function(){var e={textMatch:{operator:"AND",value:[]},listMatch:{mode:"list"},date:{value:"",detail:{minDate:"",maxDate:""}}};this.setState({filters:e,listFiltering:"",textFiltering:"",timeFiltering:"",selectDimOrMea:void 0,selectDimOrMeaId:"",categories:[],onChange:void 0})},m.prototype.render=function(){var e=this,a=this.state,n=a.listFiltering,d=a.textFiltering,m=a.selectDimOrMea,h=a.timeFiltering,u=a.selectDimOrMeaId,p=a.categories,g=a.filters,M=a.isModalShow,f=this.props,v=(f.showHiddenField,f.dataModelEntity),y=f.label,b=!1,D=!1,S=!1,E=!1,C=m?m.convert.type||m.dataType:"string";m&&(b="string"===C,D="int"===C||"float"===C,S="timestamp"===C||"datetime"===C,E="date"===C,E&&(c.dateCtrl[0].inputFormat="YYYY-MM-DD",c.dateCtrl[0].format="YYYY-MM-DD"));var x=s(c.listTabsCtrl(p,m));b&&(x[0].tabs=x[0].tabs.concat(c.textTabsCtrl(C)),x[0].activeKey=0,g.listMatch&&g.listMatch.mode?x[0].activeKey=g.listMatch.list&&g.listMatch.list.length||g.listMatch.manual&&g.listMatch.manual.length?0:1:g.textMatch&&g.textMatch.value&&g.textMatch.value.length&&(x[0].activeKey=1)),D&&(x[0].tabs=x[0].tabs.concat(c.textTabsCtrl(C)),x[0].activeKey=0);var F=S?c.timeCtrl:c.dateCtrl,P=[],O=[],w=[];if(v&&v.config){var I=v.config,H=I.dimensions,N=I.dimensionMenu,_=I.measures,T=I.measureMenu;O=t.treeSelectOption(N,H,"dimension",this.props.showHiddenField,!0),w=t.treeSelectOption(T,_,"measure",this.props.showHiddenField,!0),P=P.concat([{label:i.default("维度"),value:"dimensions",disabled:!0,children:O}]),P=P.concat([{label:i.default("度量"),value:"measure",disabled:!0,children:w}])}return l.createElement("div",null,M&&l.createElement(o.Modal,{className:"data-model-search-all-dialog",show:!0,backdrop:"static",size:"lg"},l.createElement(o.Modal.Header,{showCloseButton:!0,onClose:this.toggleDialogHandle},l.createElement(o.Modal.Title,null,y)),l.createElement(o.Modal.Body,{key:"modalBody"},l.createElement("div",{className:"data-model-search-all"},l.createElement("div",null,l.createElement(r.default,{schema:{type:"page",body:{title:"",type:"form",mode:"normal",actions:[],submitText:null,controls:[{type:"tree-select",name:"dimensionMenuSelect",hideRoot:!0,multiple:!1,cascade:!0,label:"",value:u,options:P,placeholder:i.default("请选择维度或度量字段")}]}},onChange:function(t){return e.getSelectedMenu(t)}})),l.createElement("div",{className:"data-model-search-all-content"},!(S||E)&&l.createElement(r.default,{onChange:this.update,data:g,schema:{type:"grid",className:"flex-1",columns:[{title:"",type:"form",mode:"normal",target:"listRight",controls:[x],actions:[]}]}}),(S||E)&&l.createElement("div",{className:"data-model-search-all-date"},l.createElement(r.default,{onChange:this.getSelectedDate,data:g,schema:{type:"page",body:{title:"",type:"form",mode:"normal",actions:[],controls:[F]}}})),l.createElement("div",{className:"data-model-search-all-sum"},l.createElement("h3",null,i.default("筛选汇总")),l.createElement("div",{className:"data-model-search-all-sum-list"},l.createElement("label",null,i.default("所选字段：")),l.createElement("span",null,m?m.alias:"--")),("dimension"===(null===m||void 0===m?void 0:m.type)&&D||b)&&l.createElement("div",{className:"data-model-search-all-sum-list"},l.createElement("label",null,i.default("列表筛选：")),l.createElement("span",null,n)),(b||D)&&l.createElement("div",{className:"data-model-search-all-sum-list"},l.createElement("label",null,i.default(b?"文本筛选：":D?"数据筛选：":"文本筛选：")),l.createElement("span",null,d)),(S||E)&&l.createElement("div",{className:"data-model-search-all-sum-list"},l.createElement("label",null,i.default("时间范围：")),l.createElement("span",null,h)))))),l.createElement(o.Modal.Footer,{key:"modalFooter"},l.createElement(o.Button,{onClick:this.toggleDialogHandle},i.default("取消")),l.createElement(o.Button,{level:"primary",onClick:this.onSubmit},i.default("确定")))))},m.displayName="DataModelFilterModalAll",m}(l.Component);t.default=h,t.treeSelectOption=function(e,t,a,i,l){void 0===l&&(l=!1);var s={label:"",value:"",children:[]},n=[];return e.map(function(e){s.label!==e.name&&(s={label:e.name,value:e.menuId,disabled:!0,children:[]}),e.nodes.length&&(e.nodes.map(function(e){var n=t.get(e);n&&(n.type!==a||!i&&n.isHidden?"hierarchy"===n.type&&n.pathIds&&n.pathIds.length&&n.pathIds.forEach(function(e){var a=t.get(e);!a||!i&&a.isHidden||s.children.push({label:a.alias.trim()||a.field,value:e})}):s.children.push({label:n.alias.trim()||n.field,value:e,disabled:m.isAggregatedExpression(n.expression,n.isAggregated)&&l}))}),n.push(s))}),n}});
;sugar.define("sugar:widgets/data-model/data-model-filter/data-model-filter-modal.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=e("sugar:node_modules/tslib/tslib.js"),a=e("sugar:utils/i18n.ts"),n=e("sugar:node_modules/react/index.js"),o=e("sugar:stores/index.ts"),r=e("sugar:node_modules/amis/lib/index.js"),i=e("sugar:widgets/data-model/data-model-filter/date-model-search-common.tsx"),s=e("sugar:widgets/data-model/data-model-filter/data-model-filter-modal-all.tsx"),d=e("sugar:sites/amis-renderer.tsx"),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return l.__extends(t,e),t.prototype.componentWillMount=function(){this.toggleDialogHandle=this.toggleDialogHandle.bind(this),this.getChangeFilterTree=this.getChangeFilterTree.bind(this),this.onRef=this.onRef.bind(this),this.setState({filterData:{filters:this.props.value},isModalShow:!1})},t.prototype.toggleDialogHandle=function(){this.props.toggleDialogHandle(!1),this.props.onChange(this.state.filterData)},t.prototype.getChangeFilterTree=function(e){this.setState({filterData:e})},t.prototype.onRef=function(e){this.child=e},t.prototype.render=function(){var e=this,t=this.props,o=t.value,u=t.dataModelEntity,c=t.groupHash,m=t.showHiddenField,g=t.label,f=this.state,p=f.filterData,h=f.onChange,y=f.editValue,E=f.isModalShow,b={filters:o};return Array.isArray(o)&&(b={filters:{connect:"AND",exprs:[]}},o.forEach(function(e){b.filters.exprs.push({filter:e})})),n.createElement("div",null,n.createElement(r.Modal,{show:!0,backdrop:"static",className:"data-model-filter-modal",contentClassName:"data-model-filter-modal-content"},n.createElement(r.Modal.Header,{showCloseButton:!0,onClose:function(){return e.props.toggleDialogHandle(!1)}},n.createElement(r.Modal.Title,null,g)),n.createElement(r.Modal.Body,{key:"modalBody"},n.createElement("div",null,n.createElement(d.default,{onChange:function(t){return e.setState({filterData:t})},data:Array.isArray(p.filters)?b:p,schema:{definitions:{queryItem:{type:"combo",multiple:!0,multiLine:!0,typeSwitchable:!1,draggable:!0,conditions:[{label:"条件",test:"!data.hasOwnProperty('connect')",scaffold:{},controls:[{name:"filter",value:{},children:function(t){var o=t.onChange,d=t.value,f=null;if((null===d||void 0===d?void 0:d.id)&&u){var p=u.config,h=p.dimensions,y=p.measures,E=h.get(d.id)||y.get(d.id),b=i.getTableContent(d.searchParams),v=void 0;v="string"===d.searchParams.type||"int"===d.searchParams.type||"float"===d.searchParams.type?a.default("「"+b.listFiltering+"」 「"+(b.listFiltering&&b.textFiltering?"且":"")+"」 「"+b.textFiltering+"」"):b.timeFiltering,f=n.createElement("tr",{key:""+d.id},n.createElement("td",null,E?E.alias:""),n.createElement("td",null,v),n.createElement("td",null,n.createElement("i",{className:"fa fa-pencil data-model-search-table-operation",onClick:function(){return e.setState({isModalShow:!0,editValue:d,onChange:o})}})))}else f=(null===d||void 0===d?void 0:d.id)?n.createElement("tr",null,n.createElement("td",null),n.createElement("td",{style:{textAlign:"center"}},n.createElement(r.Spinner,{size:"sm",overlay:!0})),n.createElement("td",null)):n.createElement("tr",null,n.createElement("td",null),n.createElement("td",{style:{textAlign:"center"}},n.createElement("span",null,n.createElement("i",{className:"fa fa-plus datamodel-filter-tree-add",onClick:function(){return e.child.editDataModelFilter({},o,!0)}}))),n.createElement("td",null));return n.createElement("div",null,n.createElement("table",{className:"data-model-search-table"},n.createElement("tbody",null,f)),n.createElement(s.default,l.__assign({},{onChange:o,value:d},{label:g,dataModelEntity:u,groupHash:c,showHiddenField:m,onRef:e.onRef})))}}]},{label:"组合",test:"data.hasOwnProperty('connect')",scaffold:{connect:"AND",exprs:[{}]},controls:[{type:"button-group",name:"connect",value:"AND",clearable:!1,size:"xs",options:[{label:"AND",value:"AND"},{label:"OR",value:"OR"}]},{$ref:"queryItem",name:"exprs",minLength:0,value:[]}]}]},queryGroup:{type:"combo",multiple:!1,multiLine:!0,controls:[{type:"button-group",name:"connect",value:"AND",clearable:!1,size:"sm",options:[{label:"AND",value:"AND"},{label:"OR",value:"OR"}]},{$ref:"queryItem",name:"exprs",minLength:0,value:[]}]}},type:"page",body:{title:"",type:"form",mode:"normal",actions:[],controls:[{$ref:"queryGroup",name:"filters",value:{},label:""}]}}}))),n.createElement(r.Modal.Footer,{key:"modalFooter"},n.createElement(r.Button,{onClick:function(){return e.props.toggleDialogHandle(!1)}},a.default("取消")),n.createElement(r.Button,{level:"primary",onClick:this.toggleDialogHandle},a.default("确定")))),E&&n.createElement(s.default,{dataModelEntity:u,groupHash:c,showHiddenField:m,onRef:this.onRef,label:g,isModalShow:E,value:y,onChange:h,initDataModelModalAllState:function(){return e.setState({isModalShow:!1})}}))},t.displayName="DataModelFilterModalBody",t=l.__decorate([o.observer],t)}(n.Component);t.default=u});
;sugar.define("sugar:widgets/data-model/data-model-filter/data-model-filter.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=e("sugar:node_modules/tslib/tslib.js"),l=e("sugar:utils/i18n.ts"),o=e("sugar:node_modules/react/index.js"),i=e("sugar:stores/index.ts"),d=e("sugar:node_modules/amis/lib/index.js"),r=e("sugar:widgets/data-model/data-model-filter/data-model-filter-modal.tsx"),s=e("sugar:node_modules/lodash/cloneDeep.js"),n=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.componentWillMount=function(){this.onChange=this.onChange.bind(this),this.toggleDialogHandle=this.toggleDialogHandle.bind(this),this.formatData=this.formatData.bind(this),this.setState({showModalDialog:!1})},t.prototype.formatData=function(e,t,a){var l,o;if(null===e||void 0===e?void 0:e.exprs)for(var i=(null===(l=null===e||void 0===e?void 0:e.exprs)||void 0===l?void 0:l.length)||0;i--;){var d=null===e||void 0===e?void 0:e.exprs[i];(null===d||void 0===d?void 0:d.filter)&&"{}"===JSON.stringify(null===d||void 0===d?void 0:d.filter)?(e.exprs.splice(i,1),!(null===(o=null===e||void 0===e?void 0:e.exprs)||void 0===o?void 0:o.length)&&Array.isArray(t)&&void 0!==a&&t.splice(a--,1)):this.formatData(d,e.exprs,i)}return e},t.prototype.onChange=function(e){var t=s(e.filters);this.props.onChange(this.formatData(t))},t.prototype.toggleDialogHandle=function(){var e=this.props,t=e.dataModelEntity,a=e.dataModelDetailMap,o=e.hash,i=e.editorFilter;i&&i();var r=o?a&&a.mapByHash.get(o):t||void 0;r&&r.hash?this.setState({showModalDialog:!0}):d.toast.error(l.default("请先绑定数据模型！"))},t.prototype.render=function(){var e,t=this,a=this.props,i=a.value,d=a.label,s=a.dataModelEntity,n=a.group,u=a.hash,g=this.state.showModalDialog,h=this.props.dataModelDetailMap,p=0,f=u?h.mapByHash.get(u):s||void 0,v=n.data.hash;p=Array.isArray(i)?i.length:i?null===(e=null===i||void 0===i?void 0:i.exprs)||void 0===e?void 0:e.length:0;var c={};return d&&(c={textAlign:"center",padding:"6px 0px 6px",border:"solid 1px #ccc",margin:"2px 0 15px",background:"#f0f3f4",borderRadius:2}),o.createElement("div",{className:"data-model-search"},o.createElement("div",null,d?o.createElement("label",null,d):null,o.createElement("div",{className:"data-model-search-title",style:c,onClick:this.toggleDialogHandle},o.createElement("i",{className:"fa fa-filter"}),""+(d||l.default("数据筛选"))+l.default("器"),"(",p,l.default("个"),")"),g?o.createElement(r.default,{groupHash:v,dataModelEntity:f,toggleDialogHandle:function(){return t.setState({showModalDialog:!1})},onChange:this.onChange,value:i||[],label:d||l.default("数据筛选"),showHiddenField:!d}):null))},t.displayName="DataModelFilter",t=a.__decorate([i.inject(function(e){return{dataModelDetailMap:e.dataModel.detailMap,group:e.group.current}}),i.observer],t)}(o.Component);t.default=n});
;sugar.define("sugar:widgets/form-dialog.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=e("sugar:node_modules/tslib/tslib.js"),o=e("sugar:utils/i18n.ts"),i=e("sugar:node_modules/react/index.js"),s=e("sugar:sites/amis-renderer.tsx"),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.render=function(){var e=this.props,t=e.show,n=e.title,a=e.controls,r=e.data,l=e.onClose,u=e.onConfirm,d=e.submitText,c=e.mode,m=e.wideLabel,f=e.size,p=e.className,g=e.api,b=e.redirect,y=e.confirmBtn,h=e.hideBtn,C=e.hideCancelBtn,_=e.onSubmit;if(!t)return null;var x=[{type:"button",actionType:"cancel",label:o.default("取消")},y||{type:"submit",primary:!0,label:o.default(d||"确定")}];return h?x=[]:C&&x.splice(0,1),i.createElement(s.default,{schema:{type:"dialog",className:"sugar-amis-form-dialog "+(p||""),onClose:l,onConfirm:function(e){u(e[0])},title:n,size:f,actions:x,body:{type:"form",mode:c||"horizontal",api:g,redirect:b,horizontal:{left:m?"col-sm-3":"col-sm-2"},onFinished:function(e){_&&_(e)},controls:a}},data:r})},t.displayName="FormDialog",t}(i.Component);t.default=a});
;sugar.define("sugar:widgets/data-model/data-model-summary-date-filter/custom-radios.tsx",function(e,s){"use strict";function a(e){var s=function(s){e.onChange({cusStr:s.value||"all"})};return o.createElement("div",{className:"custom-date-filter"},o.createElement("div",{className:"radios-groups"},e.options.map(function(a){var r;return o.createElement("div",{key:a.label,className:"custom-radios-group-item"},o.createElement("div",{className:"custom-radios-group-label"},a.label),o.createElement("div",{className:"custom-radios-group-radios "+l.classPrefix+"RadiosControl "+l.classPrefix+"Form-control is-inline"},o.createElement(t.Radios,{key:"dateFilter",className:l.classPrefix+"RadiosControl "+l.classPrefix+"Form-control",value:null===(r=e.value)||void 0===r?void 0:r.cusStr,locale:i.lang,inline:!0,options:a.options,onChange:s,columnsCount:1})))})))}Object.defineProperty(s,"__esModule",{value:!0}),s.CustomRadios=void 0;var o=e("sugar:node_modules/react/index.js"),t=e("sugar:node_modules/amis/lib/components/index.js"),i=e("sugar:utils/i18n.ts"),l=e("sugar:sites/sugar-cxd.ts");s.CustomRadios=a});
;sugar.define("sugar:widgets/data-model/data-model-summary-date-filter/custom-date-range.tsx",function(e,t){"use strict";function a(e){var t=function(t,n){var s=[];s[n]=t,s[+!n]=a(+!n),e.onChange({cusStr2:s.join(",")})},a=function(t){var a;return((null===(a=e.value)||void 0===a?void 0:a.cusStr2)||"").split(",")[t]||""};return n.createElement("div",{className:"custom-date-range"},n.createElement("div",{className:"custom-date-range__inputs"},n.createElement("label",null,s.default("日期范围")),n.createElement("div",{className:"flex-1"},n.createElement(u.InputBox,{type:"text",value:a(0),onChange:function(e){t(e,0)}})),n.createElement("span",null,s.default("至")),n.createElement("div",{className:"flex-1"},n.createElement(u.InputBox,{type:"text",value:a(1),onChange:function(e){t(e,1)}}))),n.createElement("span",{className:"a-Form-description"},l.dateCusStringInfo.replace(/\\\$/g,"$")))}Object.defineProperty(t,"__esModule",{value:!0}),t.CustomDateRange=void 0;var n=e("sugar:node_modules/react/index.js"),s=e("sugar:utils/i18n.ts"),l=e("sugar:utils/date-helper.ts"),u=e("sugar:node_modules/amis/lib/components/index.js");t.CustomDateRange=a});
;sugar.define("sugar:widgets/data-model/data-model-summary-date-filter/data-model-summary-date-filter.tsx",function(e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var l=e("sugar:node_modules/tslib/tslib.js"),t=e("sugar:utils/i18n.ts"),o=e("sugar:node_modules/react/index.js"),d=e("sugar:stores/index.ts"),n=e("sugar:widgets/form-dialog.tsx"),s=e("sugar:widgets/data-model/data-model-summary-date-filter/custom-radios.tsx"),i=e("sugar:widgets/data-model/data-model-summary-date-filter/custom-date-range.tsx"),u=[{label:"全部",options:[{label:"全部时间",value:"all"}]},{label:"按天",options:[{label:"今天",value:"0,0"},{label:"昨天",value:"-1d,-1d"},{label:"前天",value:"-2d,-2d"},{label:"明天",value:"1d,1d"},{label:"前7天",value:"-7d,-1"},{label:"前14天",value:"-14d,-1"},{label:"前28天",value:"-28d,-1"},{label:"前30天",value:"-30d,-1"},{label:"未来7天",value:"1,7d"},{label:"未来14天",value:"1,14d"},{label:"上周同期",value:"-7d,-7d"},{label:"上月同期",value:"-1m,-1m"}]},{label:"按周",options:[{label:"本周",value:"$MONDAY,$MONDAY+6"},{label:"上周",value:"$MONDAY-7,$MONDAY-1"},{label:"下周",value:"$MONDAY+7,$MONDAY+13"}]},{label:"按季度",options:[{label:"本季度",value:"$QUARTERFIRSTDAY,$QUARTERFIRSTDAY+3m-1"},{label:"上季度",value:"$QUARTERFIRSTDAY-3m,$QUARTERFIRSTDAY-1"},{label:"下季度",value:"$QUARTERFIRSTDAY+3m,$QUARTERFIRSTDAY+6m-1"}]}],r=function(e){function a(){return null!==e&&e.apply(this,arguments)||this}return l.__extends(a,e),a.prototype.componentWillMount=function(){this.onChange=this.onChange.bind(this),this.toggleDialogHandle=this.toggleDialogHandle.bind(this),this.setState({showModalDialog:!1})},a.prototype.onChange=function(e){{var a;"string"==typeof e.date?e.date:null===(a=e.date)||void 0===a?void 0:a.date}this.props.onChange(e),this.setState({showModalDialog:!1})},a.prototype.toggleDialogHandle=function(){this.setState({showModalDialog:!0})},a.prototype.render=function(){var e=this,a=this.props.value,d=this.state.showModalDialog;return o.createElement("div",{className:"data-model-summary-date"},o.createElement("div",null,o.createElement("div",{className:"data-model-summary-date-filter",onClick:this.toggleDialogHandle},o.createElement("i",{className:"fa fa-filter"}),t.default("基准日期范围")),d?o.createElement(n.default,{key:"custom-table-modal",show:this.state.showModalDialog,title:t.default("基准日期范围选择"),onClose:function(){return e.setState({showModalDialog:!1})},onConfirm:this.onChange,data:a,controls:[{type:"radios",name:"radios",label:t.default("筛选方式"),columnsCount:3,value:0,options:[{label:t.default("快捷方式"),value:0},{label:t.default("自定义日期范围"),value:2},{label:t.default("固定日期范围"),value:1}]},{type:"divider"},{name:"date",hiddenOn:"data.radios !== 0",children:function(e){var a=e.onChange,t=e.value;return o.createElement(s.CustomRadios,l.__assign({},{onChange:a,value:t,options:u}))}},{name:"date",hiddenOn:"data.radios !== 1",type:"date-range",embed:!0,ranges:[],format:"YYYYMMDD"},{name:"date",hiddenOn:"data.radios !== 2",children:function(e){var a=e.onChange,t=e.value;return o.createElement(i.CustomDateRange,l.__assign({},{onChange:a,value:t}))}}],size:"md"}):null))},a.displayName="DataModelSummaryDateFilter",a=l.__decorate([d.observer],a)}(o.Component);a.default=r});
;sugar.define("sugar:widgets/data-model/data-model-bind-url-param/bind-url-parma.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=e("sugar:node_modules/tslib/tslib.js"),l=e("sugar:utils/i18n.ts"),o=e("sugar:node_modules/react/index.js"),i=e("sugar:stores/index.ts"),n=e("sugar:node_modules/amis/lib/index.js"),r=e("sugar:widgets/form-dialog.tsx"),s=[["=",l.default("等于")],["!=",l.default("不等于")],[">",l.default("大于")],["<",l.default("小于")],[">=",l.default("大于等于")],["<=",l.default("小于等于")],["in",l.default("按照英文逗号分隔成等于多个")],["like",l.default("模糊匹配")],["begin",l.default("以它开头")],["end",l.default("以它结尾")]].map(function(e){return{label:e[1],value:e[0]}}),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.componentWillMount=function(){this.onChange=this.onChange.bind(this),this.toggleDialog=this.toggleDialog.bind(this),this.setState({showDialog:!1})},t.prototype.onChange=function(e){var t=e.querys||[];return t.length&&"saas"===window.sugarConfig.deployType&&!window.sugarConfig.nowProductConfig.dataModelBindUrlParam?void n.toast.error(l.default("您当前的版本不支持数据模型中关联URL参数，请升级版本")):(this.props.onChange(e.querys),void this.toggleDialog())},t.prototype.toggleDialog=function(){this.setState({showDialog:!this.state.showDialog})},t.prototype.render=function(){var e=this.props,t=e.value,a=e.label,i=e.group,n=e.dataModelHash,d=(this.state.showDialog,this.props.dataModelDetailMap),u=d.mapByHash.get(n||""),g=i.data.hash;if(!n||!u)return null;var p=[{type:"combo",name:"querys",multiple:!0,multiLine:!0,addable:!0,removable:!0,scaffold:{linkType:"="},controls:[{mode:"horizontal",horizontal:{left:"col-sm-4"},type:"tree-select",label:l.default("模型字段"),name:"colId",required:!0,searchable:!0,cascade:!0,source:"/api/group/"+g+"/dataModel/"+n+"/getFields"},{mode:"horizontal",horizontal:{left:"col-sm-4"},type:"select",label:l.default("关联方式"),name:"linkType",options:s},{mode:"horizontal",horizontal:{left:"col-sm-4"},type:"text",label:l.default("URL中参数名"),name:"param",required:!0},{mode:"horizontal",horizontal:{left:"col-sm-4"},type:"text",label:l.default("无该参数时默认值"),name:"default",requiredOn:"!data.noLimit"},{mode:"horizontal",horizontal:{left:"col-sm-4"},type:"switch",label:l.default("无该参数时不限制"),name:"noLimit"}]},{type:"tpl",tpl:'<div class="text-right"><a class="text-info" target="_blank" href="/docs/ChartAnalysis-url-param">'+l.default("什么是关联URL参数？")+"</a></div>"}],m={};return a&&(m={textAlign:"center",padding:"6px 0px 6px",border:"solid 1px #ccc",margin:"2px 0 15px",background:"#f0f3f4",borderRadius:2}),o.createElement("div",{className:"data-model-search"},o.createElement("div",null,a?o.createElement("label",null,a):null,o.createElement("div",{className:"data-model-search-title",style:m,onClick:this.toggleDialog},o.createElement("i",{className:"fa fa-paper-plane"}),l.default("关联URL参数"),"(",t?t.length:0,l.default("个"),")"),o.createElement(r.default,{show:this.state.showDialog,title:l.default("关联URL参数"),data:{querys:t||[]},mode:"normal",onClose:this.toggleDialog,onConfirm:this.onChange,controls:p})))},t.displayName="DataModelBindUrlParam",t=a.__decorate([i.inject(function(e){return{dataModelDetailMap:e.dataModel.detailMap,group:e.group.current}}),i.observer],t)}(o.Component);t.default=d});
;sugar.define("sugar:widgets/json-binder/json-binder.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=e("sugar:node_modules/tslib/tslib.js"),o=e("sugar:utils/i18n.ts"),s=e("sugar:node_modules/react/index.js"),n=e("sugar:stores/index.ts"),r=e("sugar:widgets/ctrl-panel/data-bind-ctrl/debug-refresh-btn.tsx"),i=e("sugar:node_modules/amis/lib/index.js"),l=e("sugar:widgets/code-editor.tsx"),p=e("sugar:node_modules/lodash/debounce.js"),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.componentWillMount=function(){var e=this;this.createNewJson=this.createNewJson.bind(this),this.editorContentChange=p(this.editorContentChange.bind(this),300),this.openDialog=this.openDialog.bind(this),this.closeDialog=this.closeDialog.bind(this),this.loadData=this.loadData.bind(this),this.loadDebugData=this.loadDebugData.bind(this),this.setState({isCreating:!1,needRefresh:!1}),this.props.value&&setTimeout(function(){return e.props.jsonStore.load(e.props.value)},0)},t.prototype.createNewJson=function(){var e=this;this.props.value||this.state.isCreating||(this.setState({isCreating:!0}),this.props.jsonStore.create(this.props.demoUrl,this.props.curUrl).then(function(t){e.setState({isCreating:!1}),"done"===t.state&&e.props.onChange(t.res.data.hash)}))},t.prototype.editorContentChange=function(e){var t=this.props.jsonStore.mapByHash.get(this.props.value);t&&t.change(e)},t.prototype.openDialog=function(){this.setState({dialogOpen:!0})},t.prototype.closeDialog=function(){this.setState({dialogOpen:!1}),this.props.jsonStore.update(this.props.value)},t.prototype.loadData=function(e){var t=this,a=this.props.jsonStore.update(this.props.value);a?a.then(function(a){"done"===a.state&&t.props.loadData&&t.props.loadData(e)}):this.props.loadData&&this.props.loadData(e)},t.prototype.loadDebugData=function(){var e=this,t=this.props.jsonStore.update(this.props.value);t?t.then(function(t){"done"===t.state&&e.props.loadDebugData&&e.props.loadDebugData()}):this.props.loadDebugData&&this.props.loadDebugData()},t.prototype.componentWillReceiveProps=function(e){this.props.value!==e.value&&(this.setState({needRefresh:!0}),this.props.value&&this.props.jsonStore.update(this.props.value),e.value&&this.props.jsonStore.load(e.value))},t.prototype.componentDidUpdate=function(){var e=this;this.state.needRefresh&&setTimeout(function(){e.setState({needRefresh:!1})},10)},t.prototype.componentWillUnmount=function(){var e=this;this.props.value&&setTimeout(function(){return e.props.jsonStore.update(e.props.value)},0)},t.prototype.render=function(){var e=this.props,t=e.value,a=e.jsonStore,n=e.loadData,p=e.loadDebugData,d=e.refreshText,u=e.debugText,h=this.state,c=h.dialogOpen,g=h.needRefresh;if(t){var m=a.mapByHash.get(t);if(g)return s.createElement(i.Spinner,{overlay:!0});if(m){if("pending"===m.loadState)return s.createElement(i.Spinner,{overlay:!0});if("error"===m.loadState)return s.createElement("div",{className:"text--center m-t"},o.default(m.loadError.message||"获取JSON数据错误"));var f=380;c&&document.body.clientHeight&&(f=Math.max(300,document.body.clientHeight-250));var v=s.createElement("div",{className:"sugar-json-binder"},c?null:s.createElement("div",{className:"sugar-json-binder__header"},s.createElement("label",null,o.default("请编辑：")),s.createElement("div",{className:"pull-right tool-btns"},s.createElement(i.TooltipWrapper,{tooltip:o.default("最大化"),placement:"bottom"},s.createElement("i",{className:"fa fa-expand",onClick:this.openDialog})))),s.createElement(l.default,{value:m.content,language:"json",height:f,onChange:this.editorContentChange}));return c?s.createElement(i.Modal,{show:!0,backdrop:"static",contentClassName:"big-modal"},s.createElement(i.Modal.Header,{showCloseButton:!0,onClose:this.closeDialog},s.createElement(i.Modal.Title,null,o.default("编辑JSON"))),s.createElement(i.Modal.Body,null,v),s.createElement(i.Modal.Footer,null,s.createElement(i.Button,{level:"primary",onClick:this.closeDialog},o.default("确定")))):s.createElement("div",null,v,n&&p?s.createElement("div",{className:"m-t"},s.createElement(r.default,{loadData:this.loadData,loadDebugData:this.loadDebugData,dataType:"json",refreshText:d,debugText:u})):null)}return s.createElement(i.Spinner,{overlay:!0})}return this.state.isCreating?s.createElement("div",{className:"text--center m-t"},o.default("创建中...")):t?s.createElement("div",{className:"text--center m-t"},"Error"):s.createElement(i.Button,{onClick:this.createNewJson},o.default("使用示例数据创建JSON"))},t.displayName="JsonBinder",t=a.__decorate([n.inject(function(e){return{jsonStore:e.json}}),n.observer],t)}(s.Component);t.default=d});
;sugar.define("sugar:widgets/ctrl-panel/data-bind-ctrl/exemption-condition.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=e("sugar:node_modules/tslib/tslib.js"),a=e("sugar:utils/i18n.ts"),l=e("sugar:node_modules/react/index.js"),o=e("sugar:stores/index.ts"),r=e("sugar:node_modules/amis/lib/components/Select.js"),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.render=function(){var e=this.props,t=e.value,n=e.onChange,o=e.conditionList;return l.createElement("div",{className:"form-group form-item form-group--relative m-t-md"},l.createElement("label",{className:"control-label"},a.default("豁免的过滤条件")),l.createElement(r.default,{className:"full-with",multiple:!0,value:t,onChange:function(e){n(e?e.map(function(e){return e.value}):[])},options:o.data.filter(function(e){return"container"!==e.type}).map(function(e){return{value:e.key,label:e.label}}),placeholder:a.default("请选择"),locale:a.lang,clearable:!0}),l.createElement("div",{className:"form-item__tip"},l.createElement("a",{href:"/docs/DataBind-SQL-Condition#过滤条件的豁免",target:"_blank"},a.default("什么是『豁免』?"))))},t.displayName="ExemptionCondition",t=n.__decorate([o.inject(function(e){return{conditionList:e.condition.list}}),o.observer],t)}(l.Component);t.default=i});
;sugar.define("sugar:widgets/ctrl-panel/common/switch-with-tip.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=e("sugar:node_modules/tslib/tslib.js"),l=e("sugar:utils/i18n.ts"),r=e("sugar:node_modules/react/index.js"),n=e("sugar:node_modules/amis/lib/index.js"),s=e("sugar:widgets/product-type/product-type-modal.tsx"),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.render=function(){var e=this.props,t=e.value,a=e.onChange,i=e.label,o=e.tipLink,u=e.tipText,m=e.notSupport,c=e.className,d=e.des,p=m&&!t;return r.createElement("div",{className:"orm-group a-Form-item a-Form-item--inline w-full form-group--relative "+c},r.createElement("label",{className:"a-Form-label"},i),r.createElement("div",{className:"a-Form-value"},r.createElement("div",{className:"a-SwitchControl a-Form-control",onClick:function(){return p&&s.showUpdate("product-type-drilldown")}},r.createElement(n.Switch,{locale:l.lang,value:t,inline:!0,trueValue:!0,falseValue:!1,onChange:a,disabled:p}))),r.createElement("div",{className:"form-item__tip top8"},r.createElement("a",{href:o,target:"_blank"},u)),d?r.createElement("span",{className:"form-item_des"},d):null)},t.displayName="SwitchWithTip",t}(r.PureComponent);t.default=i});
;sugar.define("sugar:widgets/amis-inline-switch.tsx",function(i,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.amisInlineSwitch=void 0,e.amisInlineSwitch=function(i,e,n,s,t,l){void 0===n&&(n="");var a={type:"switch",name:i,label:e,mode:"inline",className:"w-full single-form-item"};return n&&(a.hiddenOn=n),void 0!==s&&(a.value=s),t&&(a.description=t),void 0!==l&&(a.disabled=l),a},e.default=e.amisInlineSwitch});
;sugar.define("sugar:widgets/data-model/data-model-bind-chooser/data-model-bind-chooser-item.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.linkTypeMap=void 0;var a=e("sugar:node_modules/tslib/tslib.js"),n=e("sugar:utils/i18n.ts"),l=e("sugar:node_modules/react/index.js"),i=e("sugar:node_modules/amis/lib/index.js"),o=e("sugar:stores/index.ts"),s=e("sugar:utils/tree.ts");t.linkTypeMap=new Map([["=","等于"],["!=","不等于"],[">","大于"],["<","小于"],[">=","大于或等于"],["<=","小于或等于"],["in","等于多个"],["notIn","不等于多个"],["between","在范围之内"],["notBetween","在范围之外"],["like","模糊匹配"],["begin","以它开头"],["end","以它结尾"],["null","取值为Null"],["notNull","取值不为Null"]]);var d=function(e){function d(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(d,e),d.prototype.componentWillMount=function(){},d.prototype.getBindInfo=function(){var e=this.props,a=e.itemData,o=e.dataModelTreeList,d=e.dataModelDetailMap,r=e.usingDataModelHashs,c={dataModel:"",col:"",linkType:""};if(!a.dataModelHash||!a.colId)return l.createElement("div",{className:"text-danger"},n.default("绑定配置有误"));var u=s.find(o.data,function(e){return e.isLeaf&&e.value===a.dataModelHash});if(!u)return l.createElement("div",{className:"text-danger"},n.default("绑定的模型已被删除"));if(c.dataModel=u.name,!r.has(a.dataModelHash))return l.createElement("div",{className:"text-danger"},n.default("图表或依赖本条件的过滤条件不再使用此模型"));var m=d.mapByHash.get(a.dataModelHash);if(!m)return l.createElement(i.Spinner,{size:"sm",overlay:!0});var p=m.config.dimensions.get(a.colId);return p||(p=m.config.measures.get(a.colId)),c.col=p?p.alias:l.createElement("span",{className:"text-danger"},n.default("绑定的字段已被删除")),c.linkType=t.linkTypeMap.get(a.linkType),c.linkType=c.linkType||"动态选择",[l.createElement("div",{key:"model",className:"item-text"},l.createElement("i",{className:"fa fa-cubes"}),c.dataModel),l.createElement("div",{key:"col",className:"item-text"},l.createElement("i",{className:"fa fa-circle-o-notch"}),c.col)]},d.prototype.render=function(){var e=this.props,t=e.itemData,a=e.toggleDialog,o=e.index,s=e.onDelete,d=e.canDelete;return l.createElement("div",{className:"data-model-bind-ctrl__item",onClick:function(){return a(o,t)}},this.getBindInfo(),d?l.createElement(i.TooltipWrapper,{tooltip:n.default("删除"),placement:"bottom"},l.createElement("i",{className:"fa fa-trash",onClick:function(e){e.stopPropagation(),s(o)}})):null)},d.displayName="DataBindChooserItem",d=a.__decorate([o.inject(function(e){return{dataModelTreeList:e.dataModel.treeList,dataModelDetailMap:e.dataModel.detailMap}}),o.observer],d)}(l.Component);t.default=d});
;sugar.define("sugar:widgets/data-model/data-model-bind-drilldown/data-model-bind-param-item.tsx",function(e,a){"use strict";function t(e){return e instanceof Array?e.join(","):e}Object.defineProperty(a,"__esModule",{value:!0}),a.formatParamValues=void 0;var l=e("sugar:node_modules/tslib/tslib.js"),r=e("sugar:utils/i18n.ts"),n=e("sugar:node_modules/react/index.js"),d=e("sugar:node_modules/amis/lib/index.js"),i=e("sugar:stores/index.ts"),o=e("sugar:widgets/data-model/data-model-bind-drilldown/data-model-bind-drilldown.tsx"),m=e("sugar:widgets/data-model/data-model-bind-chooser/data-model-bind-chooser-item.tsx"),s=function(e){function a(){return null!==e&&e.apply(this,arguments)||this}return l.__extends(a,e),a.prototype.componentWillMount=function(){var e=this;setTimeout(function(){return e.getDataModeDetials()},0)},a.prototype.getDataModeDetials=function(e){e=e||this.props;var a=e.chartEntity,t=e.dataModelDetailMap;if("dataModel"===a.dataType&&a.dataModelHash&&a.dataModelHash.startsWith("mld_")){var l=t.mapByHash.get(a.dataModelHash);l||t.loadDetail(a.dataModelHash)}},a.prototype.getBindInfo=function(){var e=this.props,a=e.itemData,l=e.dataModelDetailMap,i=e.chartEntity,s=e.paramArr,p=e.drilldownLevel,c=e.chartName,u={chartName:c,paramField:"",paramValue:"",paramLevel:"",col:"",linkType:""};if(!a.paramName)return n.createElement("div",{className:"text-danger"},r.default("绑定配置有误"));var f=0,g=!1,h=r.default("联动");p&&p>0&&(g=!0,h=r.default("下钻"),f=a.paramLevel,u.paramLevel=o.getParamLevelLabel(a.paramLevel,p)),s&&s.length&&s[f]?(u.paramField=o.paramNameMap[a.paramName]||a.paramName,u.paramValue=n.createElement("span",{className:"text-danger"},r.default("未找到「"+h+"」参数取值")),void 0!==s[f].item[a.paramName]&&(u.paramValue=t(s[f].item[a.paramName]))):u.paramField=o.paramNameMap[a.paramName]||a.paramName;var v=l.mapByHash.get(i.dataModelHash||"");if(!v)return n.createElement(d.Spinner,{size:"sm",overlay:!0});if(a.colId){var y=v.config.dimensions.get(a.colId);y||(y=v.config.measures.get(a.colId)),u.col=y?y.alias:n.createElement("span",{className:"text-danger"},r.default("绑定的字段不存在"))}else u.col=n.createElement("span",{className:"text-danger"},r.default("点击绑定字段"));return u.linkType=m.linkTypeMap.get(a.linkType),u.linkType=u.linkType||"动态选择",[u.chartName?n.createElement(d.TooltipWrapper,{key:"level",tooltip:r.default("图表名称"),placement:"left"},n.createElement("div",{className:"item-text"},n.createElement("span",null,r.default("图表：")),u.chartName)):null,n.createElement(d.TooltipWrapper,{key:"field",tooltip:r.default("「"+h+"」参数字段"),placement:"left"},n.createElement("div",{className:"item-text"},n.createElement("span",null,r.default("参数：")),u.paramField)),n.createElement(d.TooltipWrapper,{key:"col",tooltip:r.default("数据模型字段"),placement:"left"},n.createElement("div",{className:"item-text"},n.createElement("span",null,r.default("字段：")),u.col))]},a.prototype.render=function(){var e=this.props,a=e.itemData,t=e.toggleDialog,l=e.index,i=e.onDelete,o=e.chartEntity,m=e.canDelete,s=e.chartName,p="",c=function(){};return"dataModel"===o.dataType&&o.dataModelHash&&o.dataModelHash.startsWith("mld_")?(p=this.getBindInfo(),c=function(){return t(l,a,{chartEntity:o,chartName:s})}):p=n.createElement("div",{className:"text-info"},r.default("图表未使用数据模型绑定数据")),n.createElement("div",{className:"data-model-bind-ctrl__item",onClick:c},p,m?n.createElement(d.TooltipWrapper,{tooltip:r.default("删除"),placement:"bottom"},n.createElement("i",{className:"fa fa-trash",onClick:function(e){e.stopPropagation(),i&&i(l)}})):null)},a.displayName="DMBindParamItem",a=l.__decorate([i.inject(function(e){return{dataModelDetailMap:e.dataModel.detailMap}}),i.observer],a)}(n.Component);a.default=s,a.formatParamValues=t});
;sugar.define("sugar:widgets/data-model/data-model-bind-drilldown/data-model-bind-drilldown.tsx",function(a,t){"use strict";function e(a,t){return d.default(0===a?"主图表":a===t-1?"上级下钻图表":"第「"+a+"」级下钻图表")}function i(a,t){var e="",i="",n=a.type,d=null,l=c.getChartByType(n);if(l&&t&&a.config.subChartConfig&&a.config.subChartConfig[t]?(a=a.config.subChartConfig[t],n=a.type,d=h(l,"subCharts."+n+".drillDownSuggestDataModelField",null)):n&&l&&(d=l.drillDownSuggestDataModelField||null),"dataModel"===a.dataType&&a.dataModelHash&&a.dataModelHash.startsWith("mld_")){e=a.dataModelHash;var o=a.dataConfig.dataModel;if(o){if(d){var r=o[d];if(r&&r instanceof Array)for(var s=0,g=r;s<g.length;s++){var u=g[s];if("d"===u.type){i=u.id;break}}}if(!i)for(var f in o)if(!i&&"filters"!==f&&"drillDownBind"!==f&&"querys"!==f){var p=o[f];if(p&&p instanceof Array)for(var m=0,_=p;m<_.length;m++){var D=_[m];if("d"===D.type){i=D.id;break}}}}}return{parentDataModelHash:e,suggestDimId:i,suggestField:d}}Object.defineProperty(t,"__esModule",{value:!0}),t.getChartDataModelHashAndSuggestDrillDownField=t.getParamLevelLabel=t.paramNameMap=t.getDataModelBindDrilldown=void 0;var n=a("sugar:node_modules/tslib/tslib.js"),d=a("sugar:utils/i18n.ts"),l=a("sugar:node_modules/react/index.js"),o=a("sugar:node_modules/amis/lib/index.js"),r=a("sugar:node_modules/amis/lib/index.js"),s=a("sugar:stores/index.ts"),g=a("sugar:widgets/data-model/data-model-bind-drilldown/data-model-bind-param-dialog.tsx"),u=a("sugar:widgets/data-model/data-model-bind-drilldown/data-model-bind-param-item.tsx"),h=a("sugar:node_modules/lodash/get.js"),c=a("sugar:widgets/charts/chart-manager.tsx"),f=a("sugar:utils/data-model-helper.ts");t.getDataModelBindDrilldown=function(a){var t=a.label,e=a.name,i=void 0===e?"drillDownBind":e,n=a.namePrefix,d=void 0===n?"dataConfig.dataModel":n,l=a.hiddenOn,o=a.config;return{label:t,type:"data-model-bind-drilldown",name:d+"."+i,hiddenOn:l,config:o}};var p=(function(a){function t(){return null!==a&&a.apply(this,arguments)||this}return n.__extends(t,a),t.prototype.render=function(){return l.createElement(p,n.__assign({},this.props))},t.displayName="DataModelBindDrilldownHigher",t=n.__decorate([o.FormItem({type:"data-model-bind-drilldown"})],t)}(l.Component),function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.state={dialogOpen:void 0,index:-1},t}return n.__extends(t,a),t.prototype.componentWillMount=function(){this.deleteBinding=this.deleteBinding.bind(this),this.changeBinding=this.changeBinding.bind(this),this.addBinding=this.addBinding.bind(this),this.toggleDialog=this.toggleDialog.bind(this);var a=this.props.config.chartEntity.drillDownLevel;this.initialState=this.props.config.initialStates||{paramName:"_sugar_dd_default_",paramLevel:a-1,colId:"",linkType:"="},this.addDefaultDrilldownBind()},t.prototype.addDefaultDrilldownBind=function(){var a,t,e=this.props,d=e.value,l=e.config,o=f.getChartDataModelHash(l.chartEntity,l.subChartKey);if(!(d&&d.length||o)){var r=l.chartEntity,s=r.getParentChart();if(!s)return;var g="";if(l.chartHub&&l.chartHub.drillDownData.drillDownItem&&l.chartHub.drillDownData.drillDownItem.length){var u=l.chartHub.drillDownData.drillDownItem,h=u[u.length-1];h&&h.fireKey&&(g=h.fireKey)}var c=i(s,g),p=c.parentDataModelHash,m=c.suggestDimId,_=n.__assign(n.__assign({},this.initialState),{colId:m}),D=void 0;l.subChartKey?(D=n.__assign(n.__assign({},r),{config:n.__assign(n.__assign({},r.config),{subChartConfig:n.__assign(n.__assign({},r.config.subChartConfig),(a={},a[l.subChartKey]=n.__assign(n.__assign({},r.config.subChartConfig[l.subChartKey]),{dataModelHash:p,dataConfig:n.__assign(n.__assign({},r.config.subChartConfig[l.subChartKey].dataConfig),{dataModel:n.__assign(n.__assign({},r.config.subChartConfig[l.subChartKey].dataConfig.dataModel),{drillDownBind:[_]})})}),a))})}),r.update(D,{config:{subChartConfig:(t={},t[l.subChartKey]={dataModelHash:p,dataConfig:{dataModel:{drillDownBind:[_]}}},t)}})):(D=n.__assign(n.__assign({},r),{dataModelHash:p,dataConfig:n.__assign(n.__assign({},r.dataConfig),{dataModel:n.__assign(n.__assign({},r.dataConfig.dataModel),{drillDownBind:[_]})})}),r.update(D,{dataConfig:{dataModel:{drillDownBind:[_]}},dataModelHash:p}))}},t.prototype.toggleDialog=function(a,t){this.setState({dialogOpen:t,index:t?a:-1})},t.prototype.generateItem=function(a){var t=this,e=this.props,i=e.value,n=e.config,o=n.chartHub.drillDownData.drillDownItem,r=!0;return i&&i.length<=1&&(r=!1),l.createElement("div",{className:"data-model-bind-ctrl__list"},i&&i.length?i.map(function(e,i){return l.createElement(u.default,{canDelete:r,paramArr:o,chartEntity:a,drilldownLevel:n.chartEntity.drillDownLevel,itemData:e,onDelete:t.deleteBinding,toggleDialog:t.toggleDialog,index:i,key:i})}):l.createElement("div",{className:"text--center"},d.default("未绑定下钻参数")))},t.prototype.deleteBinding=function(a){var t=this.props.value||[],e=[].concat(t);e.splice(a,1),this.props.onChange(e)},t.prototype.changeBinding=function(a,t){var e=this.props.value||[],i=[].concat(e);i[a]=t;for(var n=0;n<i.length;n++){var l=i[n];if(t.colId===l.colId&&a!==n)return void r.toast.error(d.default("您已配置过本字段绑定的下钻参数"))}this.props.onChange(i),this.toggleDialog(-1)},t.prototype.addBinding=function(a){for(var t=this.props.value||[],e=0,i=t;e<i.length;e++){var n=i[e];if(a.colId===n.colId)return void r.toast.error(d.default("您已配置过本字段绑定的下钻参数"))}var l=[].concat(t);l.push(a),this.props.onChange(l),this.toggleDialog(-1)},t.prototype.render=function(){var a=this,t=this.state,e=t.dialogOpen,i=t.index,n=this.props,o=n.config,s=n.dataModelDetailMap,u=o.chartEntity;o.subChartKey&&(u=u.config.subChartConfig[o.subChartKey]);var h=u.dataModelHash||"";if(!s||!s.mapByHash.get(h))return l.createElement(r.Spinner,null);var c=o.chartHub.drillDownData.drillDownItem;return l.createElement("div",{className:"data-model-bind-ctrl"},e?l.createElement(g.default,{chartEntity:u,drilldownLevel:o.chartEntity.drillDownLevel,toggleDialog:this.toggleDialog,data:e,index:i,bindParamConfig:o,onAdd:this.addBinding,onChange:this.changeBinding,paramArr:c}):null,this.generateItem(u),l.createElement("div",{className:"data-model-bind-ctrl__add"},l.createElement("div",{className:"text-center"},l.createElement(r.TooltipWrapper,{tooltip:d.default("添加关联"),placement:"bottom"},l.createElement(r.Button,{className:"btn-icon btn-rounded btn-sm",level:"info",onClick:function(){return a.toggleDialog(-1,a.initialState)}},l.createElement("i",{className:"fa fa-plus"}))))))},t.displayName="DataModelBindDrilldown",t=n.__decorate([s.inject(function(a){return{dataModelDetailMap:a.dataModel.detailMap}}),s.observer],t)}(l.Component));t.paramNameMap={_sugar_dd_default_:d.default("默认参数")},t.getParamLevelLabel=e,t.getChartDataModelHashAndSuggestDrillDownField=i});
;sugar.define("sugar:widgets/data-model/data-model-bind-drilldown/data-model-bind-param-dialog.tsx",function(a,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=a("sugar:node_modules/tslib/tslib.js"),l=a("sugar:utils/i18n.ts"),d=a("sugar:node_modules/react/index.js"),o=a("sugar:node_modules/amis/lib/index.js"),n=a("sugar:sites/amis-renderer.tsx"),r=a("sugar:stores/index.ts"),i=a("sugar:widgets/data-model/data-model-bind-drilldown/data-model-bind-drilldown.tsx"),s=a("sugar:widgets/data-model/data-model-bind-chooser/data-model-bind-chooser-item.tsx"),m=a("sugar:widgets/data-model/data-model-bind-drilldown/data-model-bind-param-item.tsx"),u=function(a){function e(e){var t=a.call(this,e)||this;return t.state={data:e.data},t.updateData=t.updateData.bind(t),t}return t.__extends(e,a),e.prototype.updateData=function(a,e){var l;for(var d in e)e.hasOwnProperty(d)&&this.setState({data:t.__assign(t.__assign({},this.state.data),(l={},l[d]=e[d],l))})},e.prototype.render=function(){var a=this.props,e=a.toggleDialog,t=a.group,r=a.bindParamConfig,u=a.onAdd,p=a.index,c=a.onChange,g=a.dataModelDetailMap,f=a.paramArr,b=a.chartEntity,h=a.drilldownLevel,v=a.chartName,y=this.state.data,M=[],w=!1,_=l.default("联动"),N=0;if(h&&h>0){w=!0,_=l.default("下钻"),N=y.paramLevel;for(var x=[],C=h-1;C>=0;C--)x.push({label:i.getParamLevelLabel(C,h),value:C});M.push({name:"paramLevel",label:l.default("请选择下钻参数所属图表层级"),type:"select",options:x})}var D=[];if(f&&f.length&&f[N]){for(var E in f[N].item){var P=void 0;void 0!==f[N].item[E]&&(P=m.formatParamValues(f[N].item[E])),("number"==typeof P||"string"==typeof P)&&D.push({label:(i.paramNameMap[E]||E)+" （"+P+"）",value:E})}M=M.concat([{name:"paramName",label:l.default("请选择「"+_+"」参数字段，括号中为对应参数当前动态取值"),type:"select",searchable:!0,options:D}])}else D.push({label:""+(i.paramNameMap[y.paramName]||y.paramName),value:y.paramName}),M=M.concat([{name:"paramName",label:l.default("请在图表中触发一次「"+_+"」后，再来这里配置「"+_+"」参数"),type:"select",searchable:!0,options:D,disabled:!0}]);var j="/api/group/"+t.current.data.hash+"/dataModel/"+(b.dataModelHash+"/getFields"),k=["=","!=",">","<",">=","<=","in","notIn","between","notBetween","like","begin","end"],B=k.map(function(a){return{label:s.linkTypeMap.get(a),value:a}});return M=M.concat([{label:l.default("请选择数据模型字段"),type:"tree-select",cascade:!0,name:"colId",source:j,searchable:!0},{name:"linkType",label:l.default("请选择关联方式"),type:"radios",inline:!1,options:B},{type:"tpl",tpl:"<div class='help-block'>"+l.default("在选择「等于多个」、「不等于多个」、「在范围之内」、「在范围之外」这几种关联方式时，「"+_+"」参数中的多个取值需使用英文逗号分割")+"</div>"}]),r&&r.amisConfig&&r.amisConfig.length&&(M=M.concat(r.amisConfig)),d.createElement(o.Modal,{show:!0,backdrop:"static"},d.createElement(o.Modal.Header,{showCloseButton:!0,onClose:function(){return e(-1)}},d.createElement(o.Modal.Title,null,"配置"+_+"参数对图表「"+(v||b.dynamicName||b.name)+"」数据模型的过滤方式")),d.createElement(o.Modal.Body,null,d.createElement(n.default,{data:y,onChange:this.updateData,schema:{type:"form",wrapWithPanel:!1,controls:M}})),d.createElement(o.Modal.Footer,null,d.createElement(o.Button,{level:"primary",onClick:function(){return y.paramName&&y.colId?(void 0!==p&&p>=0?c(p,y):u&&u(y),void g.loadDetail(b.dataModelHash||"")):void o.toast.error(l.default("请选择参数字段和数据字段"))}},l.default("确定"))))},e.displayName="DMBindParamDialog",e=t.__decorate([r.inject(function(a){return{group:a.group,dataModelDetailMap:a.dataModel.detailMap}}),r.observer,t.__metadata("design:paramtypes",[Object])],e)}(d.Component);e.default=u});
;sugar.define("sugar:widgets/dependence-ctrl/data-model-bind-dependence.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DMBindDependence=void 0;var a=e("sugar:node_modules/tslib/tslib.js"),n=e("sugar:utils/i18n.ts"),r=e("sugar:node_modules/react/index.js"),d=e("sugar:stores/index.ts"),i=e("sugar:widgets/data-model/data-model-bind-drilldown/data-model-bind-param-dialog.tsx"),o=e("sugar:widgets/data-model/data-model-bind-drilldown/data-model-bind-param-item.tsx"),l=e("sugar:widgets/data-model/data-model-bind-drilldown/data-model-bind-drilldown.tsx"),s=e("sugar:utils/data-model-helper.ts"),g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={dialogOpen:void 0,config:void 0,index:-1},t}return a.__extends(t,e),t.prototype.componentWillMount=function(){this.changeBinding=this.changeBinding.bind(this),this.toggleDialog=this.toggleDialog.bind(this),this.autoSetBindConfig()},t.prototype.componentWillReceiveProps=function(e){e.cddSubChartsConfig!==this.props.cddSubChartsConfig&&this.autoSetBindConfig(e)},t.prototype.autoSetBindConfig=function(e){for(var t=e||this.props,a=t.rowValue,n=t.parentChart,r=t.cddSubChartsConfig,d=t.chartList,i=t.updateBindConfig,o=[],g=0,c=r;g<c.length;g++){for(var u=c[g],h=u.frontendId,p=null,f=0,m=d;f<m.length;f++){var C=m[f];if(C.frontendId===h){p=C;break}}if(p){var b=a.cddSubChartsBindParamConfig||[];if(p.config.subChartConfig)for(var v in p.config.subChartConfig){var D=!1,y=s.getChartDataModelHash(p,v);if(y){for(var I=0,B=b;I<B.length;I++){var _=B[I];if(_.chartFrontendId===h&&_.subChartKey===v){o.push(_),D=!0;break}}if(!D){var w={paramName:"_sugar_dd_default_",chartFrontendId:h,subChartKey:v,paramLevel:0,colId:"",linkType:"="},N=l.getChartDataModelHashAndSuggestDrillDownField(n,a.cddFireKey),S=N.parentDataModelHash,x=N.suggestDimId;S===y&&(w.colId=x);var M=s.getReferenceDepBindConfig(y,b,d);M&&(w.colId=M.colId,w.linkType=M.linkType,w.paramName=M.paramName),o.push(w)}}}else{var D=!1,y=s.getChartDataModelHash(p);if(y){for(var k=0,F=b;k<F.length;k++){var _=F[k];if(_.chartFrontendId===h){o.push(_),D=!0;break}}if(!D){var w={paramName:"_sugar_dd_default_",chartFrontendId:h,paramLevel:0,colId:"",linkType:"="},E=l.getChartDataModelHashAndSuggestDrillDownField(n,a.cddFireKey),S=E.parentDataModelHash,x=E.suggestDimId;S===y&&(w.colId=x);var M=s.getReferenceDepBindConfig(y,b,d);M&&(w.colId=M.colId,w.linkType=M.linkType,w.paramName=M.paramName),o.push(w)}}}}}setTimeout(function(){return i(o)},0)},t.prototype.toggleDialog=function(e,t,a){this.setState({dialogOpen:t,config:a,index:t?e:-1})},t.prototype.generateItem=function(){var e=this,t=this.props,a=t.rowValue,n=t.chartList,d=a.cddSubChartsBindParamConfig||[];return r.createElement("div",{className:"data-model-bind-ctrl__list"},d&&d.length?d.map(function(t,a){for(var d=t.chartFrontendId,i=null,l="",s=0,g=n;s<g.length;s++){var c=g[s];if(c.frontendId===d){l=c.dynamicName||c.name,i=c;break}}return i&&t.subChartKey&&i.config.subChartConfig&&i.config.subChartConfig[t.subChartKey]&&(i=i.config.subChartConfig[t.subChartKey],i&&(l+=" -> "+i.name)),i?r.createElement(o.default,{canDelete:!1,paramArr:[],chartName:l,chartEntity:i,drilldownLevel:0,itemData:t,toggleDialog:e.toggleDialog,index:a,key:a}):null}):null)},t.prototype.changeBinding=function(e,t){var a=this.props.rowValue.cddSubChartsBindParamConfig||[],n=[].concat(a);n[e]=t,this.props.updateBindConfig(n),this.toggleDialog(-1)},t.prototype.render=function(){var e=this.state,t=e.dialogOpen,a=e.config,d=e.index,o=this.props,l=o.chartHub,s=o.rowValue,g=null;if(t&&a){var c=[],u=l.mapByFrontendId.get(t.chartFrontendId);u&&u.dependenceData.dependenceItem&&c.push(u.dependenceData.dependenceItem),g=r.createElement(i.default,{chartEntity:a.chartEntity,chartName:a.chartName,drilldownLevel:0,toggleDialog:this.toggleDialog,data:t,index:d,onChange:this.changeBinding,paramArr:c})}var h=null;return s&&s.cddSubChartsBindParamConfig&&s.cddSubChartsBindParamConfig.length&&(h=r.createElement("div",null,r.createElement("label",{className:"control-label"},n.default("联动参数关联配置：")),r.createElement("div",{className:"data-model-bind-ctrl"},g,this.generateItem()))),h},t.displayName="DMBindDependence",t=a.__decorate([d.inject(function(e){return{chartList:e.chart.list.data,chartHub:e.chart.hubMap}}),d.observer],t)}(r.Component);t.DMBindDependence=g});
;sugar.define("sugar:widgets/dependence-ctrl/dependence-ctrl-item.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=e("sugar:node_modules/tslib/tslib.js"),a=e("sugar:utils/i18n.ts"),l=e("sugar:node_modules/react/index.js"),r=e("sugar:node_modules/amis/lib/index.js"),d=e("sugar:widgets/debounce-text.tsx"),o=e("sugar:widgets/ctrl-panel/common/switch-with-tip.tsx"),i=e("sugar:stores/index.ts"),c=e("sugar:widgets/charts/chart-manager.tsx"),u=e("sugar:widgets/dependence-ctrl/data-model-bind-dependence.tsx"),s=function(e){function t(t){var n=e.call(this,t)||this;return n.updateBindConfig=n.updateBindConfig.bind(n),n}return n.__extends(t,e),t.prototype.getDependenceFireKeyConfig=function(){var e=this.props,t=e.rowValue,n=e.onRowValueChange,o=e.index,i=(e.hintText,e.isMultDependence),u=(e.menuList,e.onDelete,e.chartEntity),s=e.chartData;if("table"===u.type||"table-play"===u.type)return s.data&&s.data.columns&&s.data.columns.length?[l.createElement("label",{key:"select-label"},a.default("选定要触发联动的列，不选时默认为整行触发")),l.createElement(r.Select,{className:"full-with",key:"colId-select",simpleValue:!0,value:t.cddFireKey||"",onChange:function(e){return n(o,{cddFireKey:e})},options:[{label:a.default("整行"),value:""}].concat(s.data.columns.map(function(e){return{label:e.name,value:e.id}})),locale:a.lang,placeholder:a.default("请选择"),popOverContainer:document.body})]:[l.createElement("label",{key:"select-label2"},a.default("输入表格要触发联动的列id，不填时默认为整行触发")),l.createElement(d.default,{key:"colId-input",value:t.cddFireKey,notReceiveProps:!0,onChange:function(e){return n(o,{cddFireKey:e})},placeholder:a.default(i?"请输入触发ID":"无需绑定触发ID"),disabled:!i})];var p=c.getChartByType(u.type);if(p&&p.subCharts){var f=u.config.subChartConfig,m=Object.keys(f);if(f&&m&&m.length){var g=[];return m.forEach(function(e){var t=f[e];p.subCharts[t.type]&&p.subCharts[t.type].canFireDrilldown&&g.push({label:f[e].name,value:e,order:f[e].order})}),g.sort(function(e,t){return e.order-t.order}),[l.createElement("label",{key:"select-label"},a.default("请选择触发联动的子组件")),l.createElement(r.Select,{key:"colId-select",className:"full-with",simpleValue:!0,value:t.cddFireKey||"",onChange:function(e){return n(o,{cddFireKey:e})},options:g,locale:a.lang,placeholder:a.default("请选择"),popOverContainer:document.body})]}}return null},t.prototype.updateBindConfig=function(e){this.props.onRowValueChange(this.props.index,{cddSubChartsBindParamConfig:e})},t.prototype.render=function(){{var e=this.props,t=e.rowValue,n=e.onRowValueChange,d=e.index,i=(e.hintText,e.isMultDependence),c=e.menuList,s=e.onDelete,p=e.chartEntity;e.chartData}return l.createElement("div",{className:"drill-item form-normal"},this.getDependenceFireKeyConfig(),l.createElement("label",{className:"control-label"},a.default("请选择与本图表联动的下级图表：")),l.createElement(r.Select,{multiple:!0,className:"full-with",value:t.cddSubChartsConfig instanceof Array?t.cddSubChartsConfig.map(function(e){return e.frontendId}):[],onChange:function(e){var t=e?e.map(function(e){return{frontendId:e.value}}):[];n(d,{cddSubChartsConfig:t})},locale:a.lang,options:c,placeholder:a.default("请选择"),popOverContainer:document.body,searchable:c&&c.length>10}),l.createElement(u.DMBindDependence,{rowValue:t,parentChart:p,cddSubChartsConfig:t.cddSubChartsConfig,updateBindConfig:this.updateBindConfig}),i?l.createElement(o.default,{label:a.default("本项联动是否生效"),value:!!t.cddOpen,onChange:function(e){return n(d,{cddOpen:e})},tipText:"",tipLink:""}):null,l.createElement("div",{className:"drill-del"},l.createElement("div",{className:"text-center"},l.createElement(r.TooltipWrapper,{tooltip:a.default("删除此项联动"),placement:"top"},l.createElement(r.Button,{className:"btn-icon btn-rounded",level:"danger",onClick:function(){return s(d)}},l.createElement("i",{className:"fa fa-minus"}))))))},t.displayName="DependenceCtrlItem",t=n.__decorate([i.observer,n.__metadata("design:paramtypes",[Object])],t)}(l.Component);t.default=s});
;sugar.define("sugar:widgets/dependence-ctrl/dependence-ctrl.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=e("sugar:node_modules/tslib/tslib.js"),i=e("sugar:utils/i18n.ts"),s=e("sugar:node_modules/react/index.js"),a=e("sugar:node_modules/amis/lib/index.js"),o=e("sugar:widgets/confirm.tsx"),r=e("sugar:node_modules/classnames/index.js"),l=e("sugar:widgets/dependence-ctrl/dependence-ctrl-item.tsx"),d=e("sugar:stores/index.ts"),c=e("sugar:node_modules/lodash/cloneDeep.js"),u=e("sugar:services/chart-dependence.ts"),p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.getInitDependence=function(e){return void 0===e&&(e=!1),{cddOpen:e,cddFireKey:"",cddSubChartsConfig:[]}},t.prototype.componentWillMount=function(){this.onDelete=this.onDelete.bind(this),this.onAdd=this.onAdd.bind(this),this.getInitDependence=this.getInitDependence.bind(this),this.onRowValueChange=this.onRowValueChange.bind(this),this.initSingleDrillDown=this.initSingleDrillDown.bind(this),this.initSingleDrillDown()},t.prototype.initSingleDrillDown=function(){this.props.isMultDependence||this.props.value&&(!this.props.value||this.props.value.length)||this.onRowValueChange(0,this.getInitDependence(!0))},t.prototype.onDelete=function(e){var t=this;o.confirm(i.default("确定要删除第「"+(e+1)+"」个联动设置？")).then(function(){var n=c(t.props.value);n.splice(e,1),t.props.onChange(n)})},t.prototype.onAdd=function(){var e=this.getInitDependence(!0);this.props.onChange(c(this.props.value||[]).concat([e]))},t.prototype.onRowValueChange=function(e,t){var i,s=this.props.value;i=s&&s.length?this.props.value.map(function(i,s){return e===s?n.__assign(n.__assign({},i),t):i}):[n.__assign({},t)],this.props.onChange(i)},t.prototype.render=function(){var e=this,t=this.props,n=t.hintText,o=t.chartEntity,d=t.chartData,c=t.isMultDependence,p=t.value,h=t.chartList,g=h.data.filter(function(e){return e.frontendId!==o.frontendId&&~u.canDependChartType.indexOf(e.type)}).map(function(e){return{value:e.frontendId,label:e.dynamicName||e.name}});return c?s.createElement("div",{className:r("drill-ctrl-container multi")},p&&p.length?p.map(function(t,i){return s.createElement(l.default,{rowValue:t,onRowValueChange:e.onRowValueChange,onDelete:e.onDelete,index:i,hintText:n,isMultDependence:!!c,menuList:g,key:o.frontendId+"-"+i,chartData:d,chartEntity:o})}):s.createElement("p",{className:"text-center"},i.default("请点击下面的按钮来添加联动")),s.createElement("div",{className:"drill-add"},s.createElement("div",{className:"text-center"},s.createElement(a.TooltipWrapper,{tooltip:i.default("添加联动项"),placement:"top"},s.createElement(a.Button,{className:"btn-icon btn-rounded",level:"info",onClick:this.onAdd},s.createElement("i",{className:"fa fa-plus"})))))):p&&p[0]?s.createElement("div",{className:r("drill-ctrl-container")},s.createElement(l.default,{rowValue:p[0],onRowValueChange:this.onRowValueChange,onDelete:this.onDelete,index:0,hintText:n,isMultDependence:!!c,menuList:g,chartData:d,chartEntity:o})):null},t.displayName="ChartDependenceCtrl",t=n.__decorate([d.inject(function(e){return{chartList:e.chart.list}}),d.observer],t)}(s.Component);t.default=p});
;sugar.define("sugar:widgets/drill-down-ctrl/drill-down-ctrl-item.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=e("sugar:node_modules/tslib/tslib.js"),n=e("sugar:utils/i18n.ts"),a=e("sugar:node_modules/react/index.js"),d=e("sugar:node_modules/amis/lib/index.js"),r=e("sugar:widgets/debounce-text.tsx"),i=e("sugar:widgets/ctrl-panel/common/switch-with-tip.tsx"),o=e("sugar:stores/index.ts"),u=e("sugar:widgets/charts/chart-manager.tsx"),c=e("sugar:widgets/editor/toolbar.tsx"),s=e("sugar:widgets/product-type/product-type-modal.tsx"),p=e("sugar:sites/sugar-cxd.ts"),f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return l.__extends(t,e),t.prototype.componentWillMount=function(){this.handleChange=this.handleChange.bind(this)},t.prototype.getDrillDownFireKeyConfig=function(){var e=this.props,t=e.rowValue,l=e.onRowValueChange,i=e.index,o=e.drillDownType,c=e.chartEntity,s=e.chartData,p=e.isHierarchyDrillDown;if(("table"===c.type||"table-play"===c.type)&&!p)return s.data&&s.data.columns&&s.data.columns.length?[a.createElement("label",{key:"select-label"},n.default("选定要下钻的列，不选时默认为整行下钻")),a.createElement(d.Select,{key:"colId-select",className:"full-with",simpleValue:!0,value:t.ddFireKey||"",onChange:function(e){return l(i,{ddFireKey:e})},options:[{label:n.default("整行"),value:""}].concat(s.data.columns.map(function(e){return{label:e.name,value:e.id}})),locale:n.lang,placeholder:n.default("请选择"),popOverContainer:document.body})]:[a.createElement("label",{key:"select-label2"},n.default("输入表格要下钻的列id，不填时默认为整行下钻")),a.createElement(r.default,{key:"colId-input",value:t.ddFireKey,notReceiveProps:!0,onChange:function(e){return l(i,{ddFireKey:e})},placeholder:n.default("multiple"!==o?"无需绑定触发ID":"请输入触发ID"),disabled:"multiple"!==o})];var f=u.getChartByType(c.type);if(f&&f.subCharts){var m=c.config.subChartConfig||{},g=Object.keys(m);if(m&&g&&g.length){var y=[];return g.forEach(function(e){var t=m[e];f.subCharts[t.type]&&f.subCharts[t.type].canFireDrilldown&&y.push({label:m[e].name,value:e,order:m[e].order})}),y.sort(function(e,t){return e.order-t.order}),[a.createElement("label",{key:"select-label"},n.default("请选择触发下钻的子组件")),a.createElement(d.Select,{key:"colId-select",className:"full-with",locale:n.lang,simpleValue:!0,value:t.ddFireKey||"",onChange:function(e){return l(i,{ddFireKey:e})},options:y,placeholder:n.default("请选择"),popOverContainer:document.body})]}}return null},t.prototype.handleChange=function(e){var t=this.props,l=t.rowValue,a=t.onRowValueChange,d=t.index,r=t.menuList,i=t.chartEntity,o=t.isHierarchyDrillDown;if(l.ddType!==e){var p=(r.filter(function(e){return e.value===l.ddType})[0],window.sugarConfig.nowProductConfig);if(p&&!p.drill)return void s.showUpdate("product-type-drilldown");if("ddLink"!==e&&!~e.indexOf("HIERARCHY_")&&!c.canUseChart(e))return void s.showUpdate("product-type-chart");o?a(d,{ddType:e,chart:u.mergeSingleInitialState({type:i.type,name:(r.filter(function(t){return t.value===e})[0]||{label:n.default("未知")}).label,config:{}})}):a(d,{ddType:e,chart:u.mergeSingleInitialState({type:e,name:(r.filter(function(t){return t.value===e})[0]||{label:n.default("未知")}).label,config:{}})})}},t.prototype.render=function(){var e=this.props,t=e.rowValue,l=e.onRowValueChange,o=e.index,u=(e.hintText,e.drillDownType),c=e.menuList,s=e.onDelete,f=(e.chartEntity,e.chartData,e.isHierarchyDrillDown);return a.createElement("div",{className:"drill-item form-normal"},this.getDrillDownFireKeyConfig(),0===c.length?null:a.createElement("label",null,n.default(f?"请选择要使用的层级关系维度":"下钻后展示的图表类型")),f&&0===c.length?a.createElement("label",null,n.default("图表没有绑定层级字段，或是绑定的字段没有下一级，请先了解什么是层级下钻")):a.createElement(d.Select,{simpleValue:!0,className:"full-with",value:t.ddType,onChange:this.handleChange,locale:n.lang,options:c,placeholder:n.default("请选择"),popOverContainer:document.body,searchable:!0,clearable:!1}),"ddLink"===t.ddType?[a.createElement("label",{key:"ddLinkTypeLabel",style:{margin:"12px 0 5px"}},n.default("新页面的URL地址获取方式")),a.createElement(d.Radios,{key:"ddLinkType",className:p.classPrefix+"RadiosControl "+p.classPrefix+"Form-control",value:t.ddLinkType,locale:n.lang,inline:!1,options:[{label:n.default("手动输入"),value:"input"},{label:n.default("从下钻参数字段中取"),value:"dd"}],onChange:function(e){return l(o,{ddLinkType:e.value})},columnsCount:1}),"input"===t.ddLinkType?a.createElement("label",{key:"ddLinkKeyLabel",style:{margin:"12px 0 5px"}},n.default("新页面地址(URL中可嵌入下钻参数,"),a.createElement("a",{href:"/docs/ChartAnalysis-Drilldown",target:"_blank",className:"text-info"},n.default("下钻文档")),")"):a.createElement("label",{key:"ddLinkKeyLabel",style:{margin:"12px 0 5px"}},n.default("打开页面的url的数据字段")),"input"===t.ddLinkType?a.createElement(r.default,{key:"ddLinkUrl",textarea:!0,notReceiveProps:!0,value:t.ddLinkUrl,onChange:function(e){return l(o,{ddLinkUrl:e})},placeholder:n.default("请输入URL地址"),className:"a-TextareaControl a-Form-control m-b-md",minRows:2}):a.createElement(r.default,{key:"ddLinkKey",autoComplete:"off",notReceiveProps:!0,value:t.ddLinkKey,onChange:function(e){return l(o,{ddLinkKey:e})},className:"m-b",placeholder:n.default("一般是存有URL的字段, 默认取 _sugar_dd_default_")}),a.createElement(i.default,{key:"ddLinkDialog",label:n.default("超链接在本页面弹框中打开"),value:!!t.ddLinkDialog,onChange:function(e){return l(o,{ddLinkDialog:e})},tipText:"",tipLink:""}),t.ddLinkDialog?null:a.createElement(i.default,{key:"ddLinkTargetSelf",label:n.default("超链接在本页面打开"),value:!!t.ddLinkTargetSelf,onChange:function(e){return l(o,{ddLinkTargetSelf:e})},tipText:"",tipLink:""}),t.ddLinkTargetSelf&&!t.ddLinkDialog?a.createElement(i.default,{key:"ddLinkTopTargetSelf",label:n.default("作为iframe被嵌入时超链接在父页面中打开"),value:!!t.ddLinkTopTargetSelf,onChange:function(e){return l(o,{ddLinkTopTargetSelf:e})},tipText:"",tipLink:""}):null,a.createElement(i.default,{key:"ddLinkTargetBlank",label:n.default("超链接在新页面打开"),value:!!t.ddLinkTargetBlank,onChange:function(e){return l(o,{ddLinkTargetBlank:e})},tipText:"",tipLink:""}),"input"===t.ddLinkType?a.createElement(i.default,{key:"ddParamEncode",label:n.default("对URL地址中嵌入的各种参数进行编码"),value:!!t.ddParamEncode,onChange:function(e){return l(o,{ddParamEncode:e})},tipText:"",tipLink:""}):null,a.createElement(i.default,{key:"ddLinkAddQueryParams",label:n.default("dd"===t.ddLinkType?"新页面URL中附加过滤条件和下钻参数":"新页面URL中附加过滤条件参数"),value:!!t.ddLinkAddQueryParams,onChange:function(e){return l(o,{ddLinkAddQueryParams:e})},tipText:"",tipLink:""}),"dd"===t.ddLinkType?a.createElement(i.default,{key:"ddLinkAddEncode",label:n.default("超链URL是否编码"),value:!!t.ddLinkAddEncode,onChange:function(e){return l(o,{ddLinkAddEncode:e})},tipText:"",tipLink:""}):null]:null,"multiple"!==u||f?null:a.createElement(i.default,{label:n.default("本项下钻是否生效"),value:!!t.ddOpen,onChange:function(e){return l(o,{ddOpen:e})},tipText:"",tipLink:""}),a.createElement("div",{className:"drill-del"},a.createElement("div",{className:"text-center"},a.createElement(d.TooltipWrapper,{tooltip:n.default("删除此项下钻"),placement:"top"},a.createElement(d.Button,{className:"btn-icon btn-rounded",level:"danger",onClick:function(){return s(o)}},a.createElement("i",{className:"fa fa-minus"}))))))},t.displayName="DrillDownCtrlItem",t=l.__decorate([o.observer],t)}(a.Component);t.default=f});
;sugar.define("sugar:widgets/drill-down-ctrl/drill-down-ctrl.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=e("sugar:node_modules/tslib/tslib.js"),a=e("sugar:utils/i18n.ts"),n=e("sugar:node_modules/react/index.js"),r=e("sugar:node_modules/amis/lib/index.js"),l=e("sugar:widgets/confirm.tsx"),o=e("sugar:widgets/charts/chart-manager.tsx"),d=e("sugar:node_modules/classnames/index.js"),s=e("sugar:widgets/drill-down-ctrl/drill-down-ctrl-item.tsx"),h=e("sugar:utils/frontendId.ts"),c=e("sugar:node_modules/lodash/merge.js"),u=e("sugar:node_modules/lodash/get.js"),g=e("sugar:node_modules/lodash/isEmpty.js"),p=e("sugar:stores/index.ts"),D=e("sugar:node_modules/lodash/cloneDeep.js"),f=e("sugar:widgets/charts/chart-manager.tsx"),m=e("sugar:widgets/data-model/data-model-bind-drilldown/data-model-bind-drilldown.tsx"),y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isHierarchyDrillDown=!1,t.curX="",t}return i.__extends(t,e),t.prototype.getInitDrillDown=function(e,t){void 0===e&&(e=!1),void 0===t&&(t=0);var i=this.props,n=i.isHierarchyDrillDown,r=i.chartEntity,l="drc_"+h.generateId();return n?this.getHierarchyDrilldownConfig({},r.drillDownLevel,t):{ddOpen:e,ddType:"table",ddFireKey:"",ddLinkKey:"",size:"ddAuto",chart:f.mergeSingleInitialState({type:"table",width:8,height:300,frontendId:l,isDashChart:r.isDashChart,dataModelHash:"",drillDownLevel:r.drillDownLevel+1,drillDownIndex:t,name:a.default("表格")})}},t.prototype.componentWillMount=function(){this.onDelete=this.onDelete.bind(this),this.onAdd=this.onAdd.bind(this),this.getInitDrillDown=this.getInitDrillDown.bind(this),this.onRowValueChange=this.onRowValueChange.bind(this),this.initSingleDrillDown=this.initSingleDrillDown.bind(this),this.initSingleDrillDown()},t.prototype.initSingleDrillDown=function(){var e=this.props,t=e.drillDownType,i=e.value,a=e.isHierarchyDrillDown,n=!1;i&&i.length&&i[0].ddType&&(n=i[0].ddType.indexOf("HIERARCHY")>-1),("single"===t&&i&&!i.length||!a&&n||a&&!n)&&this.onRowValueChange(0,this.getInitDrillDown(!0))},t.prototype.onDelete=function(e){var t=this;l.confirm(a.default("确定要删除第「"+(e+1)+"」个下钻？")).then(function(){var i=[].concat(D(t.props.value));i.splice(e,1);for(var a=e;a<i.length;a++)i[a].chart.drillDownIndex=a;t.props.onChange(i)})},t.prototype.onAdd=function(){if(this.props.value){var e=this.props.value.length||0,t=this.getInitDrillDown(!0,e);this.props.onChange([].concat(this.props.value).concat([t]))}else{var t=this.getInitDrillDown(!0);this.props.onChange([t])}},t.prototype.onRowValueChange=function(e,t){var a,n=this,r=this.props,l=r.value,o=r.chartEntity,d=r.isHierarchyDrillDown,s=!1,h=t.ddType;if(d){if(!h)return void this.props.onChange([]);s=!!~h.indexOf("HIERARCHY_")}if(l&&l.length)a=this.props.value.map(function(i,a){var r;if(e===a){var l=D(i);if(t.chart){if(s)return n.getHierarchyDrilldownConfig({ddType:h},o.drillDownLevel,0);if(l.chart.config={},"dataModel"===l.chart.dataType){var d=null===(r=l.chart.dataConfig.dataModel)||void 0===r?void 0:r.drillDownBind;l.chart.dataConfig=d?{dataModel:{drillDownBind:d}}:{}}else l.chart.dataConfig={};return o.setChartHubData(i.chart.frontendId),c({},l,t)}return c({},i,t)}return i});else if(s){var u=this.getHierarchyDrilldownConfig({ddType:h},o.drillDownLevel,0);a=g(u)?[]:[u]}else a=[i.__assign({},t)];this.props.onChange(a)},t.prototype.getHierarchyDrilldownConfig=function(e,t,a){var n;void 0===t&&(t=0),void 0===a&&(a=0);var r=e.ddType,l=e.chart,o=this.props,d=o.chartEntity,s=o.dataModelDetailMap,c=o.drillDownType,u="",g=m.getChartDataModelHashAndSuggestDrillDownField(d,""),p=g.suggestField,D=g.suggestDimId,y=l||d;r=r||"HIERARCHY_"+D;var v="drc_"+h.generateId(),w=null===r||void 0===r?void 0:r.split("HIERARCHY_")[1],_=this.getDimNode(w),C=(null===_||void 0===_?void 0:_.alias)||(null===_||void 0===_?void 0:_.field)||"";if(!(d.dataModelHash&&s&&p&&_))return{};var H={},M="_sugar_dd_default_",I=this.getHierarchyDrillDownChildDim(w),E=this.getHierarchyDrillDownChildDim(I),x=this.getHierarchyDrillDownDefaultConfig(I),T=[],b=y.dataConfig.dataModel[p],R=y.config,A=R.mapAutoScopeField,L=R.mapScope;if("map"===d.type){var S=["china","province","city"],N=S.indexOf(L),j=S[N+1];M=A||M,_.renameHash&&(M+="_sugar_origin"),H={mapScope:j,mapAutoScopeField:A||p,mapProvince:"sugar_map_auto_scope",mapCity:"sugar_map_auto_scope"}}"multiple"===c?(T=(b||[]).map(function(e){return e.id===w?x:e}),M=C,_.renameHash&&(M+="_sugar_origin"),u=C):x&&(T=[x]);var B=y.dataConfig.dataModel.drillDownBind||[],F={paramName:M,paramLevel:t,colId:w,linkType:"="},V=f.getChartByType(y.type),k=(null===V||void 0===V?void 0:V.drillDownFieldName)||M,O=f.mergeSingleInitialState({type:d.type,frontendId:v,isDashChart:d.isDashChart,config:i.__assign(i.__assign(i.__assign({},d.config),H),{hierarchyDrillDownOpen:!!E}),dataConfig:i.__assign(i.__assign({},d.dataConfig),{dataModel:i.__assign(i.__assign({},d.dataConfig.dataModel),(n={drillDownBind:B.concat(F)},n[p]=T,n.chartCondition=[],n))}),drillDownLevel:++t,drillDownIndex:a,dataModelHash:d.dataModelHash,name:y.name+"-{drillDowns("+(t-1)+")."+k+"}"});return E&&(O.drillDown=[this.getHierarchyDrilldownConfig(i.__assign(i.__assign({},e),{ddType:"HIERARCHY_"+I,chart:O}),t)]),i.__assign(i.__assign({},e),{ddOpen:!0,ddLinkAddQueryParams:!1,ddLinkAddEncode:!1,ddFireKey:u,ddLinkKey:"",size:"ddAuto",width:8,height:300,ddType:r,chart:O})},t.prototype.getHierarchyMenuList=function(){var e=this,t=this.props,i=t.chartEntity,a=t.chartEntity,n=a.dataModelHash,r=a.dataType,l=a.dataConfig,o=t.dataModelDetailMap,d=m.getChartDataModelHashAndSuggestDrillDownField(i,"").suggestField;if(n&&"dataModel"===r&&o){var s=u(l,"dataModel."+d),h=o.mapByHash.get(n),c=null===h||void 0===h?void 0:h.config.dimensions;if(s&&c){var g=[],p=[];return s.forEach(function(t){var i=c.get(t.id);if(i&&i.hierarchyId&&!p.includes(i.hierarchyId)&&e.getHierarchyDrillDownChildDim(t.id)){var a=i.hierarchyId,n=i.alias,r=i.field;p.push(a),g.push({label:n||r,value:"HIERARCHY_"+t.id})}}),g}}},t.prototype.getHierarchyDrillDownChildDim=function(e){void 0===e&&(e="");var t=this.props,i=t.dataModelDetailMap,a=t.chartEntity.dataModelHash,n=null===i||void 0===i?void 0:i.mapByHash.get(a||"");return null===n||void 0===n?void 0:n.config.getChildDimension(e)},t.prototype.getDimNode=function(e){void 0===e&&(e="");var t=this.props,i=t.dataModelDetailMap,a=t.chartEntity.dataModelHash,n=null===i||void 0===i?void 0:i.mapByHash.get(a||"");return null===n||void 0===n?void 0:n.config.dimensions.get(e)},t.prototype.getHierarchyDrillDownDefaultConfig=function(e){return void 0===e&&(e=""),e?{frontendId:"F"+h.generateId().toUpperCase(),id:e,type:"d"}:void 0},t.prototype.render=function(){var e=this,t=this.props,i=t.chartEntity,l=t.chartData,h=t.hintText,c=t.drillDownType,u=t.value,g=t.isHierarchyDrillDown,p=[{label:a.default("下钻打开新页面"),value:"ddLink"}];if(p=p.concat(o.getCharts().filter(function(e){return e.canBeDrillChild}).map(function(e){return{label:e.drillChildName||e.name,value:e.type}})),g&&(p=this.getHierarchyMenuList()||[]),"multiple"!==c||g){var D=u&&u[0]?u[0]:{};return n.createElement("div",{className:g?"hierarchy-drill-ctrl-container":"drill-ctrl-container"},n.createElement(s.default,{rowValue:D,onRowValueChange:this.onRowValueChange,onDelete:this.onDelete,index:0,hintText:h,drillDownType:c,menuList:p,chartData:l,chartEntity:i,isHierarchyDrillDown:g}))}return n.createElement("div",{className:d("drill-ctrl-container multi")},u&&u.length&&u.map?u.map(function(t,a){return n.createElement(s.default,{rowValue:t,onRowValueChange:e.onRowValueChange,onDelete:e.onDelete,index:a,hintText:h,drillDownType:c,menuList:p,key:i.frontendId+t.chart.frontendId,chartData:l,chartEntity:i,isHierarchyDrillDown:g})}):n.createElement("p",{className:"text-center"},a.default("请点击下面的按钮来添加下钻")),n.createElement("div",{className:"drill-add"},n.createElement("div",{className:"text-center"},n.createElement(r.TooltipWrapper,{tooltip:a.default("添加下钻项"),placement:"top"},n.createElement(r.Button,{className:"btn-icon btn-rounded",level:"info",onClick:this.onAdd},n.createElement("i",{className:"fa fa-plus"}))))))},t.displayName="DrillDownCtrl",t=i.__decorate([p.inject(function(e){return{dataModelDetailMap:e.dataModel.detailMap}}),p.observer],t)}(n.Component);t.default=y});
;sugar.define("sugar:widgets/dnd-dustbin.tsx",function(n,r){"use strict";function e(n){return function(r){var e=function(n){function e(){return null!==n&&n.apply(this,arguments)||this}return o.__extends(e,n),e.prototype.render=function(){var n=this.props,e=n.isDragging,t=n.connectDragSource,s=(n.id,o.__rest(n,["isDragging","connectDragSource","id"]));return i.createElement(r,o.__assign({},s,{isDragging:!!e,ref:function(n){n&&t&&t(u.findDOMNode(n))}}))},e.displayName="DnDDustbinSourceHOC",e}(i.Component);return s.DragSource(n,a,function(n,r){return{connectDragSource:n.dragSource(),isDragging:r.isDragging()}})(e)}}function t(n){return function(r){var e=function(n){function e(){return null!==n&&n.apply(this,arguments)||this}return o.__extends(e,n),e.prototype.render=function(){var n=this.props,e=n.canDrop,t=n.isOver,s=n.connectDropTarget,a=(n.onDrop,o.__rest(n,["canDrop","isOver","connectDropTarget","onDrop"]));return i.createElement(r,o.__assign({},a,{isOver:!!t,canDrop:!!e,ref:function(n){n&&s&&s(u.findDOMNode(n))}}))},e.displayName="DnDDustbinTargetHOC",e}(i.Component);return s.DropTarget(n,c,function(n,r){return{connectDropTarget:n.dropTarget(),isOver:r.isOver(),canDrop:r.canDrop()}})(e)}}Object.defineProperty(r,"__esModule",{value:!0}),r.DnDTarget=r.DnDSource=void 0;var o=n("sugar:node_modules/tslib/tslib.js"),i=n("sugar:node_modules/react/index.js"),u=n("sugar:node_modules/react-dom/index.js"),s=n("sugar:node_modules/react-dnd/lib/index.js"),a={beginDrag:function(n){return{id:n.id}}};r.DnDSource=e;var c={drop:function(n,r){n.onDrop(r.getItem().id)}};r.DnDTarget=t});
;sugar.define("sugar:sites/group/manage/data-model/editor/menu-dim-mea-node.tsx",function(e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.MenuDimMeaNodeDnDSource=n.MenuDimMeaNodeOnlyDrop=n.MenuDimMeaNodeSort=n.MenuDimMeaNode=void 0;var t=e("sugar:node_modules/tslib/tslib.js"),a=e("sugar:node_modules/react/index.js"),s=e("sugar:node_modules/classnames/index.js"),r=e("sugar:stores/index.ts"),o=e("sugar:widgets/dnd-sort.tsx"),i=e("sugar:widgets/dnd-dustbin.tsx"),u=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return t.__extends(n,e),n.prototype.render=function(){var e=this.props,n=e.className,t=e.name,r=e.onClickHandle,o=e.onContextMenuHandle,i=e.onMouseEnterHandle,u=e.isMenu,d=e.isMenuClosed,l=e.iconClassName,c=e.isDraggingItem,m=e.isDragging,g=e.style;return a.createElement("div",{className:s(n,{isDragging:c||m}),onClick:r,onContextMenu:o,onMouseEnter:i,title:t,style:g},u?[a.createElement("i",{className:"fa fa-angle-"+(d?"right":"down"),key:"angle"}),a.createElement("i",{className:"fa fa-folder"+(d?"":"-open")+" folder",key:"icon"})]:a.createElement("i",{className:"sugar-icon "+(l||"")}),t,a.createElement("i",{className:"fa fa-cog setting",onClick:o}))},n.displayName="MenuDimMeaNode",n=t.__decorate([r.observer],n)}(a.Component);n.MenuDimMeaNode=u;var d=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return t.__extends(n,e),n=t.__decorate([o.default()],n)}(u);n.MenuDimMeaNodeSort=d;var l=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return t.__extends(n,e),n=t.__decorate([o.OnlyDrop()],n)}(u);n.MenuDimMeaNodeOnlyDrop=l;var c=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return t.__extends(n,e),n=t.__decorate([i.DnDSource("data-model")],n)}(u);n.MenuDimMeaNodeDnDSource=c});
;sugar.define("sugar:sites/group/manage/data-model/editor/dimension-list.tsx",function(e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var t=e("sugar:node_modules/tslib/tslib.js"),i=e("sugar:node_modules/react/index.js"),o=e("sugar:node_modules/classnames/index.js"),s=e("sugar:utils/common-helper.ts"),a=e("sugar:stores/index.ts"),d=e("sugar:node_modules/lodash/debounce.js"),r=e("sugar:sites/group/manage/data-model/editor/menu-dim-mea-node.tsx"),l=e("sugar:sites/group/manage/data-model/editor/helper.ts"),u=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return t.__extends(n,e),n.prototype.componentWillMount=function(){this.setState({menuClosed:{},activeId:"",isSorting:!1,draggingId:"",droppingId:""}),this.toggleMenuClosed=this.toggleMenuClosed.bind(this),this.clearActive=this.clearActive.bind(this),this.showMenuSetting=this.showMenuSetting.bind(this),this.showCommonSetting=this.showCommonSetting.bind(this),this.onSort=d(this.onSort.bind(this),100),this.onDroped=this.onDroped.bind(this)},n.prototype.clearActive=function(){this.state.activeId&&this.setState({activeId:"",isSorting:!1})},n.prototype.toggleMenuClosed=function(e){var n;this.setState({menuClosed:t.__assign(t.__assign({},this.state.menuClosed),(n={},n[e]=!this.state.menuClosed[e],n))})},n.prototype.showMenuSetting=function(e,n){"editor"===this.props.mode&&(e.stopPropagation(),e.preventDefault(),this.setState({activeId:this.props.dmSchema.dimensionMenu[n].menuId}),this.props.showMenuSetting&&this.props.showMenuSetting(n,e.clientX,e.clientY))},n.prototype.showCommonSetting=function(e,n,t,i){if("editor"===this.props.mode){e.stopPropagation(),e.preventDefault(),this.setState({activeId:t});var o=this.props.showDimensionSetting;"calculate"===i?o=this.props.showCalculateSetting:"hierarchy"===i&&(o=this.props.showHierarchySetting),o&&o(n,t,e.clientX,e.clientY)}},n.prototype.onSort=function(e,n){this.props.onSort&&e.id!==n.id&&(this.setState({isSorting:!0,draggingId:e.id,droppingId:n.id,activeId:""}),this.props.onSort(e,n))},n.prototype.onDroped=function(e){this.setState({draggingId:"",droppingId:"",activeId:e.id})},n.prototype.render=function(){var e=this,n=this.props.dmSchema,t=n.dimensions,a=n.dimensionMenu,d=this.props,u=d.mode,c=d.searchKey,m=this.state,p=m.menuClosed,g=m.activeId,h=m.isSorting,v=m.draggingId,y=m.droppingId,M=0,S=r.MenuDimMeaNode,C=r.MenuDimMeaNodeDnDSource;return"editor"===u&&(S=r.MenuDimMeaNodeOnlyDrop,C=r.MenuDimMeaNodeSort),i.createElement("div",{className:"dm-list "+u+" "+(h?"sorting":"")},a.map(function(n,a){var d=p[n.menuId];return i.createElement("div",{className:o("menu",{closed:d}),key:n.menuId},i.createElement(S,{className:o("title",{active:n.menuId===g||n.menuId===y&&d}),name:n.name,onClickHandle:function(){return e.toggleMenuClosed(n.menuId)},onContextMenuHandle:function(n){return e.showMenuSetting(n,a)},onMouseEnterHandle:e.clearActive,isMenu:!0,isMenuClosed:d,id:{id:n.menuId,type:"menu",menuClosed:d},index:M++,dndType:"dimension",useIdToMoving:!0,notCareIframe:!0,onMoving:e.onSort}),!d&&n.nodes.length?n.nodes.map(function(n){var d=t.get(n);if(!d)return null;var r=d.alias.trim()||d.field;if(c&&"dimension"===d.type&&(!r||!r.toLowerCase().includes(c)))return null;var u=null;return r&&"dimension"===d.type?u=i.createElement(C,{key:n,className:o("node",{active:n===g,isHidden:d.isHidden}),name:r,onClickHandle:s.noop,onMouseEnterHandle:e.clearActive,onContextMenuHandle:function(t){return e.showCommonSetting(t,a,n,d.calculated?"calculate":"dimension")},iconClassName:"icon-"+(d.calculated?l.isAggregatedExpression(d.expression)?"juhe":"cal":d.convert.label||d.convert.type||d.dataType),id:{id:n,type:"dimension",dataType:d.convert.type||d.dataType},index:M++,dndType:"dimension",useIdToMoving:!0,notCareIframe:!0,onMoving:e.onSort,onDroped:e.onDroped,isDraggingItem:v===n}):r&&"hierarchy"===d.type&&(u=i.createElement("div",{className:"hierarchy",key:n},i.createElement(S,{className:o("title",{active:n===g}),name:d.alias.trim(),onClickHandle:s.noop,onMouseEnterHandle:e.clearActive,onContextMenuHandle:function(t){return e.showCommonSetting(t,a,n,"hierarchy")},iconClassName:"icon-hierarchy",id:{id:n,type:"hierarchy"},index:M++,dndType:"dimension",useIdToMoving:!0,notCareIframe:!0,onMoving:e.onSort}),d.pathIds.map(function(n,d){var r=t.get(n),u=null;return r&&(u=i.createElement(C,{key:n,className:o("node",{active:n===g,isHidden:r.isHidden}),name:r.alias.trim()||r.field,onClickHandle:s.noop,onMouseEnterHandle:e.clearActive,onContextMenuHandle:function(t){return e.showCommonSetting(t,a,n,r.calculated?"calculate":"dimension")},iconClassName:"icon-"+(r.calculated?l.isAggregatedExpression(r.expression)?"juhe":"cal":r.convert.type||r.dataType),id:{id:n,type:"dimension",dataType:r.dataType},index:M++,dndType:"dimension",useIdToMoving:!0,notCareIframe:!0,onMoving:e.onSort,onDroped:e.onDroped,isDraggingItem:v===n,style:{paddingLeft:12*(d+1)+"px"}})),u}))),u}):null)}))},n.displayName="DimensionList",n=t.__decorate([a.observer],n)}(i.Component);n.default=u});
;sugar.define("sugar:sites/group/manage/data-model/editor/measure-list.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=e("sugar:node_modules/tslib/tslib.js"),o=e("sugar:node_modules/react/index.js"),s=e("sugar:node_modules/classnames/index.js"),i=e("sugar:utils/common-helper.ts"),a=e("sugar:stores/index.ts"),r=e("sugar:node_modules/lodash/debounce.js"),d=e("sugar:sites/group/manage/data-model/editor/menu-dim-mea-node.tsx"),u=e("sugar:sites/group/manage/data-model/editor/helper.ts"),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.componentWillMount=function(){this.setState({menuClosed:{},activeId:"",isSorting:!1,draggingId:"",droppingId:""}),this.toggleMenuClosed=this.toggleMenuClosed.bind(this),this.clearActive=this.clearActive.bind(this),this.showMenuSetting=this.showMenuSetting.bind(this),this.showCommonSetting=this.showCommonSetting.bind(this),this.onSort=r(this.onSort.bind(this),100),this.onDroped=this.onDroped.bind(this)},t.prototype.clearActive=function(){this.state.activeId&&this.setState({activeId:"",isSorting:!1})},t.prototype.toggleMenuClosed=function(e){var t;this.setState({menuClosed:n.__assign(n.__assign({},this.state.menuClosed),(t={},t[e]=!this.state.menuClosed[e],t))})},t.prototype.showMenuSetting=function(e,t){"editor"===this.props.mode&&(e.stopPropagation(),e.preventDefault(),this.setState({activeId:this.props.dmSchema.measureMenu[t].menuId}),this.props.showMenuSetting&&this.props.showMenuSetting(t,e.clientX,e.clientY))},t.prototype.showCommonSetting=function(e,t,n,o){if("editor"===this.props.mode){e.stopPropagation(),e.preventDefault(),this.setState({activeId:n});var s=this.props.showMeasureSetting;"calculate"===o&&(s=this.props.showCalculateSetting),s&&s(t,n,e.clientX,e.clientY)}},t.prototype.onSort=function(e,t){this.props.onSort&&e.id!==t.id&&(this.setState({isSorting:!0,draggingId:e.id,droppingId:t.id,activeId:""}),this.props.onSort(e,t))},t.prototype.onDroped=function(e){this.setState({draggingId:"",droppingId:"",activeId:e.id})},t.prototype.render=function(){var e=this,t=this.props.dmSchema,n=t.measures,a=t.measureMenu,r=this.props,l=r.mode,p=r.searchKey,m=this.state,c=m.menuClosed,g=m.activeId,h=m.isSorting,v=m.draggingId,M=m.droppingId,S=0,I=d.MenuDimMeaNode,f=d.MenuDimMeaNodeDnDSource;return"editor"===l&&(I=d.MenuDimMeaNodeOnlyDrop,f=d.MenuDimMeaNodeSort),o.createElement("div",{className:"dm-list "+l+" "+(h?"sorting":"")},a.map(function(t,a){var r=c[t.menuId];return o.createElement("div",{className:s("menu",{closed:r}),key:t.menuId},o.createElement(I,{className:s("title",{active:t.menuId===g||t.menuId===M&&r}),name:t.name,onClickHandle:function(){return e.toggleMenuClosed(t.menuId)},onContextMenuHandle:function(t){return e.showMenuSetting(t,a)},onMouseEnterHandle:e.clearActive,isMenu:!0,isMenuClosed:r,id:{id:t.menuId,type:"menu",menuClosed:r},index:S++,dndType:"measure",useIdToMoving:!0,notCareIframe:!0,onMoving:e.onSort}),!r&&t.nodes.length?t.nodes.map(function(t){var r=n.get(t);if(!r)return null;var d=r.alias.trim()||r.field;if(p&&(!d||!d.toLowerCase().includes(p)))return null;var l=null;return d&&"measure"===r.type&&(l=o.createElement(f,{key:t,className:s("node",{active:t===g,isHidden:r.isHidden}),name:d,onClickHandle:i.noop,onMouseEnterHandle:e.clearActive,onContextMenuHandle:function(n){return e.showCommonSetting(n,a,t,r.calculated?"calculate":"measure")},iconClassName:"icon-"+(r.calculated?u.isAggregatedExpression(r.expression,r.isAggregated)?"juhe":"cal":r.convert.type||r.dataType),id:{id:t,type:"measure",dataType:r.convert.type||r.dataType},index:S++,dndType:"measure",useIdToMoving:!0,notCareIframe:!0,onMoving:e.onSort,onDroped:e.onDroped,isDraggingItem:v===t})),l}):null)}))},t.displayName="MeasureList",t=n.__decorate([a.observer],t)}(o.Component);t.default=l});
;sugar.define("sugar:widgets/data-model/data-model-selector/data-model-selector.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=e("sugar:node_modules/tslib/tslib.js"),s=e("sugar:utils/i18n.ts"),l=e("sugar:node_modules/react/index.js"),r=e("sugar:stores/index.ts"),n=e("sugar:node_modules/amis/lib/index.js"),o=e("sugar:node_modules/amis/lib/renderers/Form/TreeSelect.js"),d=e("sugar:node_modules/amis/lib/components/SearchBox.js"),i=e("sugar:utils/tree.ts"),c=e("sugar:sites/group/manage/data-model/editor/dimension-list.tsx"),m=e("sugar:sites/group/manage/data-model/editor/measure-list.tsx"),u=e("sugar:sites/sugar-cxd.ts"),p=function(e){function t(t){var a=e.call(this,t)||this;return a.state={searchKey:""},a.handleSearch=a.handleSearch.bind(a),a}return a.__extends(t,e),t.prototype.handleSearch=function(e){this.setState({searchKey:(e||"").trim().toLowerCase()})},t.prototype.render=function(){var e=this.props,t=e.dataModelEntity,a=e.value,r=e.group,o=e.loadOrSetLast;return l.createElement("div",{className:"data-model-dim-mea"},l.createElement("div",{className:"t-bar"},l.createElement(d.default,{className:"max-w-full",placeholder:s.default("搜索"),onChange:this.handleSearch}),l.createElement(n.Button,{size:"sm",level:"link",placement:"left",tooltip:s.default("刷新维度和度量"),onClick:function(){o(a)}},l.createElement("i",{className:"fa fa-refresh"})),t.currentUserCanEdit?l.createElement(n.Button,{size:"sm",level:"link",placement:"left",tooltip:s.default("编辑")},l.createElement("a",{href:"/group/"+r.data.key+"/manage/dataModel/edit/"+a,target:"_blank"},l.createElement("i",{className:"fa fa-pencil"}))):null),l.createElement("div",{className:"dm-title d-flex"},s.default("维度")),l.createElement("div",{className:"dimension"},l.createElement(c.default,{mode:"normal",searchKey:this.state.searchKey,dmSchema:t.config})),l.createElement("div",{className:"dm-title"},s.default("度量")),l.createElement("div",{className:"measure"},l.createElement(m.default,{mode:"normal",searchKey:this.state.searchKey,dmSchema:t.config})))},t=a.__decorate([r.observer,a.__metadata("design:paramtypes",[Object])],t)}(l.Component),h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.componentWillMount=function(){var e=this;this.loadOrSetLast=this.loadOrSetLast.bind(this),this.onChange=this.onChange.bind(this);var t=this.props.value,a=this.props.dataModelTreeList;a.data?setTimeout(function(){return e.loadOrSetLast(t)},0):setTimeout(function(){return a.loadData().then(function(){e.loadOrSetLast(t)})},0)},t.prototype.componentWillReceiveProps=function(e){var t=this;this.props.value!==e.value&&setTimeout(function(){return t.loadOrSetLast(e.value)},0)},t.prototype.loadOrSetLast=function(e){if(!e||/mld_/.test(e)){var t="pending"!==this.props.dataModelTreeList.loadState&&this.props.dataModelTreeList.data,a=this.props.dataModelLastSelected.get();if(e)this.props.dataModelDetailMap.loadDetail(e),e!==a&&this.props.dataModelLastSelected.set(e);else if(t)if(a&&i.find(this.props.dataModelTreeList.data,function(e){return a===e.value}))this.props.onChange(a);else{var s=i.find(this.props.dataModelTreeList.data,function(e){return e.isLeaf});s&&this.props.onChange(s.value)}else a&&this.props.onChange(a)}},t.prototype.onChange=function(e){e&&i.find(this.props.dataModelTreeList.data,function(t){return t.isLeaf&&t.value===e})&&(this.props.dataModelLastSelected.set(e),this.props.onChange(e))},t.prototype.render=function(){var e=this.props,t=e.value,a=e.group,r=this.props.dataModelTreeList,d=this.props.dataModelDetailMap,i=null===a||void 0===a?void 0:a.manageCenter.showDataModelAddBtn;if("done"===r.loadState&&r.data&&0===r.data.length)return l.createElement("div",{className:"text--center"},s.default("空间中还没有数据模型或无权限"),i?l.createElement("div",null,l.createElement("a",{href:"/group/"+a.data.key+"/manage/dataModel",target:"_blank"},l.createElement(n.Button,{className:"m-t-md"},s.default("+ 创建数据模型")))):null);var c="",m=null;if(t){var h=d.mapByHash.get(t);h?h.config.dimensions&&h.config.dimensions.size||h.config.measures&&h.config.measures.size?(c=h.name,m=l.createElement(p,{dataModelEntity:h,group:a,value:t,loadOrSetLast:this.loadOrSetLast})):(c=h.name,m=l.createElement("div",{className:"data-model-dim-mea"},l.createElement("div",{className:"dm-empty"},s.default("该数据模型中没有任何维度和度量，请先编辑该数据模型")),h.currentUserCanEdit?l.createElement("div",{className:"text--center"},l.createElement("a",{href:"/group/"+a.data.key+"/manage/dataModel/edit/"+t,target:"_blank"},l.createElement(n.Button,{size:"sm",level:"primary"},s.default("编辑")))):null)):m=l.createElement("div",{className:"data-model-dim-mea"},l.createElement(n.Spinner,{overlay:!0}))}return l.createElement("div",{className:"data-model-selector"},l.createElement("div",{className:"data-model-hash"},l.createElement(o.default,{classnames:u.appTheme.classnames,classPrefix:u.classPrefix,translate:s.default,selectedOptions:[{name:c,value:t}],value:t,options:r.data||[],onChange:this.onChange,className:"dm-tree-list",clearable:!1,searchable:!1,extractValue:!0,showIcon:!1,iconField:"ico",labelField:"name",valueField:"value"}),l.createElement("span",{className:"arrow-down"})),m)},t.displayName="DataModelSelector",t=a.__decorate([r.inject(function(e){return{group:e.group.current,dataModelTreeList:e.dataModel.treeList,dataModelDetailMap:e.dataModel.detailMap,dataModelLastSelected:e.dataModel.lastSelected}}),r.observer],t)}(l.Component);t.default=h});
;sugar.define("sugar:widgets/charts/bmap-scatter/bmap-theme/blue.ts",function(e,l){"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.default=[{featureType:"land",elementType:"geometry",stylers:{visibility:"on",color:"#f1f1f1ff"}},{featureType:"water",elementType:"geometry",stylers:{visibility:"on",color:"#54afebff"}},{featureType:"water",elementType:"labels",stylers:{visibility:"off"}},{featureType:"green",elementType:"geometry",stylers:{visibility:"on",color:"#65a7fcff"}},{featureType:"building",elementType:"geometry",stylers:{visibility:"on"}},{featureType:"building",elementType:"geometry.fill",stylers:{color:"#ffffffb3"}},{featureType:"building",elementType:"geometry.stroke",stylers:{color:"#dadadab3"}},{featureType:"subwaystation",elementType:"geometry",stylers:{visibility:"on",color:"#b15454B2"}},{featureType:"education",elementType:"geometry",stylers:{visibility:"on",color:"#cdebffff"}},{featureType:"medical",elementType:"geometry",stylers:{visibility:"on",color:"#cdebffff"}},{featureType:"scenicspots",elementType:"geometry",stylers:{visibility:"on",color:"#cdebffff"}},{featureType:"highway",elementType:"geometry",stylers:{visibility:"on",weight:4}},{featureType:"highway",elementType:"geometry.fill",stylers:{color:"#9dcaffff"}},{featureType:"highway",elementType:"geometry.stroke",stylers:{color:"#fed66900"}},{featureType:"highway",elementType:"labels",stylers:{visibility:"on"}},{featureType:"highway",elementType:"labels.text.fill",stylers:{color:"#8f5a33ff"}},{featureType:"highway",elementType:"labels.text.stroke",stylers:{color:"#ffffffff"}},{featureType:"highway",elementType:"labels.icon",stylers:{visibility:"on"}},{featureType:"arterial",elementType:"geometry",stylers:{visibility:"on",weight:2}},{featureType:"arterial",elementType:"geometry.fill",stylers:{color:"#428ee9ff"}},{featureType:"arterial",elementType:"geometry.stroke",stylers:{color:"#428ee900"}},{featureType:"arterial",elementType:"labels",stylers:{visibility:"on"}},{featureType:"arterial",elementType:"labels.text.fill",stylers:{color:"#ffffffff"}},{featureType:"arterial",elementType:"labels.text.stroke",stylers:{color:"#428ee9ff"}},{featureType:"local",elementType:"geometry",stylers:{visibility:"on",weight:1}},{featureType:"local",elementType:"geometry.fill",stylers:{color:"#ffffffff"}},{featureType:"local",elementType:"geometry.stroke",stylers:{color:"#ffffffff"}},{featureType:"local",elementType:"labels",stylers:{visibility:"on"}},{featureType:"local",elementType:"labels.text.fill",stylers:{color:"#979c9aff"}},{featureType:"local",elementType:"labels.text.stroke",stylers:{color:"#ffffffff"}},{featureType:"railway",elementType:"geometry",stylers:{visibility:"off",weight:1}},{featureType:"railway",elementType:"geometry.fill",stylers:{color:"#949494ff"}},{featureType:"railway",elementType:"geometry.stroke",stylers:{color:"#ffffffff"}},{featureType:"subway",elementType:"geometry",stylers:{visibility:"off",weight:1}},{featureType:"subway",elementType:"geometry.fill",stylers:{color:"#d8d8d8ff"}},{featureType:"subway",elementType:"geometry.stroke",stylers:{color:"#ffffffff"}},{featureType:"subway",elementType:"labels",stylers:{visibility:"on"}},{featureType:"subway",elementType:"labels.text.fill",stylers:{color:"#979c9aff"}},{featureType:"subway",elementType:"labels.text.stroke",stylers:{color:"#ffffffff"}},{featureType:"continent",elementType:"labels",stylers:{visibility:"on"}},{featureType:"continent",elementType:"labels.icon",stylers:{visibility:"on"}},{featureType:"continent",elementType:"labels.text.fill",stylers:{color:"#333333ff"}},{featureType:"continent",elementType:"labels.text.stroke",stylers:{color:"#ffffffff"}},{featureType:"city",elementType:"labels.icon",stylers:{visibility:"off"}},{featureType:"city",elementType:"labels",stylers:{visibility:"on"}},{featureType:"city",elementType:"labels.text.fill",stylers:{color:"#ffffffff"}},{featureType:"city",elementType:"labels.text.stroke",stylers:{color:"#428ee9ff",weight:3}},{featureType:"town",elementType:"labels.icon",stylers:{visibility:"on"}},{featureType:"town",elementType:"labels",stylers:{visibility:"off"}},{featureType:"town",elementType:"labels.text.fill",stylers:{color:"#454d50ff"}},{featureType:"town",elementType:"labels.text.stroke",stylers:{color:"#ffffffff"}},{featureType:"road",elementType:"geometry.fill",stylers:{color:"#bddbfdff"}},{featureType:"poilabel",elementType:"labels.icon",stylers:{visibility:"off"}},{featureType:"poilabel",elementType:"labels.text.stroke",stylers:{color:"#428ee9ff",weight:3}},{featureType:"poilabel",elementType:"labels.text.fill",stylers:{color:"#ffffffff"}},{featureType:"districtlabel",elementType:"labels",stylers:{visibility:"on"}},{featureType:"manmade",elementType:"geometry",stylers:{color:"#cdebffff"}},{featureType:"restaurantlabel",elementType:"labels",stylers:{visibility:"off"}},{featureType:"restaurantlabel",elementType:"labels.icon",stylers:{visibility:"off"}},{featureType:"lifeservicelabel",elementType:"labels",stylers:{visibility:"off"}},{featureType:"lifeservicelabel",elementType:"labels.icon",stylers:{visibility:"off"}},{featureType:"carservicelabel",elementType:"labels",stylers:{visibility:"off"}},{featureType:"carservicelabel",elementType:"labels.icon",stylers:{visibility:"off"}},{featureType:"financelabel",elementType:"labels",stylers:{visibility:"off"}},{featureType:"financelabel",elementType:"labels.icon",stylers:{visibility:"off"}},{featureType:"otherlabel",elementType:"labels",stylers:{visibility:"off"}},{featureType:"otherlabel",elementType:"labels.icon",stylers:{visibility:"off"}},{featureType:"companylabel",elementType:"labels",stylers:{visibility:"off"}},{featureType:"companylabel",elementType:"labels.icon",stylers:{visibility:"off"}},{featureType:"businesstowerlabel",elementType:"labels",stylers:{visibility:"off"}},{featureType:"businesstowerlabel",elementType:"labels.icon",stylers:{visibility:"off"}},{featureType:"estatelabel",elementType:"labels",stylers:{visibility:"off"}},{featureType:"estatelabel",elementType:"labels.icon",stylers:{visibility:"off"}},{featureType:"poilabel",elementType:"labels",stylers:{visibility:"on"}},{featureType:"highwaysign",elementType:"labels",stylers:{visibility:"off"}},{featureType:"highwaysign",elementType:"labels.icon",stylers:{visibility:"off"}},{featureType:"nationalwaysign",elementType:"labels",stylers:{visibility:"off"}},{featureType:"nationalwaysign",elementType:"labels.icon",stylers:{visibility:"off"}},{featureType:"provincialwaysign",elementType:"labels",stylers:{visibility:"off"}},{featureType:"provincialwaysign",elementType:"labels.icon",stylers:{visibility:"off"}},{featureType:"tertiarywaysign",elementType:"labels",stylers:{visibility:"off"}},{featureType:"tertiarywaysign",elementType:"labels.icon",stylers:{visibility:"off"}},{featureType:"subwaylabel",elementType:"labels.icon",stylers:{visibility:"off"}},{featureType:"subwaylabel",elementType:"labels",stylers:{visibility:"off"}},{featureType:"nationalway",elementType:"geometry.fill",stylers:{color:"#78b6ffff"}},{featureType:"road",elementType:"geometry.stroke",stylers:{color:"#69acffff"}},{featureType:"entertainment",elementType:"geometry",stylers:{color:"#cdebffff"}},{featureType:"estate",elementType:"geometry",stylers:{color:"#cdebffff"}},{featureType:"shopping",elementType:"geometry",stylers:{color:"#cdebffff"}},{featureType:"transportation",elementType:"geometry",stylers:{color:"#cdebffff"}},{featureType:"tertiaryway",elementType:"geometry",stylers:{visibility:"on"}},{featureType:"tertiaryway",elementType:"labels",stylers:{visibility:"on"}},{featureType:"tertiaryway",elementType:"labels.text.fill",stylers:{color:"#ffffffff"}},{featureType:"tertiaryway",elementType:"labels.text.stroke",stylers:{color:"#428ee9ff"}},{featureType:"districtlabel",elementType:"labels.text.fill",stylers:{color:"#ffffffff"}},{featureType:"districtlabel",elementType:"labels.text.stroke",stylers:{color:"#428ee9ff"}},{featureType:"village",elementType:"labels",stylers:{visibility:"off"}},{featureType:"district",elementType:"labels.text",stylers:{fontsize:20}},{featureType:"district",elementType:"labels.text.fill",stylers:{color:"#ffffffff"}},{featureType:"district",elementType:"labels.text.stroke",stylers:{color:"#428ee9ff"}},{featureType:"highway",stylers:{curZoomRegionId:"0",curZoomRegion:"6,10",level:"6"}},{featureType:"highway",stylers:{curZoomRegionId:"0",curZoomRegion:"6,10",level:"7"}},{featureType:"highway",stylers:{curZoomRegionId:"0",curZoomRegion:"6,10",level:"8"}},{featureType:"highway",stylers:{curZoomRegionId:"0",curZoomRegion:"6,10",level:"9"}},{featureType:"highway",stylers:{curZoomRegionId:"0",curZoomRegion:"6,10",level:"10"}},{featureType:"highway",elementType:"geometry",stylers:{visibility:"off",curZoomRegionId:"0",curZoomRegion:"6,10",level:"6"}},{featureType:"highway",elementType:"geometry",stylers:{visibility:"off",curZoomRegionId:"0",curZoomRegion:"6,10",level:"7"}},{featureType:"highway",elementType:"geometry",stylers:{visibility:"off",curZoomRegionId:"0",curZoomRegion:"6,10",level:"8"}},{featureType:"highway",elementType:"geometry",stylers:{visibility:"off",curZoomRegionId:"0",curZoomRegion:"6,10",level:"9"}},{featureType:"highway",elementType:"geometry",stylers:{visibility:"off",curZoomRegionId:"0",curZoomRegion:"6,10",level:"10"}},{featureType:"highway",elementType:"labels",stylers:{visibility:"off",curZoomRegionId:"0",curZoomRegion:"6,10",level:"6"}},{featureType:"highway",elementType:"labels",stylers:{visibility:"off",curZoomRegionId:"0",curZoomRegion:"6,10",level:"7"}},{featureType:"highway",elementType:"labels",stylers:{visibility:"off",curZoomRegionId:"0",curZoomRegion:"6,10",level:"8"}},{featureType:"highway",elementType:"labels",stylers:{visibility:"off",curZoomRegionId:"0",curZoomRegion:"6,10",level:"9"}},{featureType:"highway",elementType:"labels",stylers:{visibility:"off",curZoomRegionId:"0",curZoomRegion:"6,10",level:"10"}},{featureType:"nationalway",stylers:{curZoomRegionId:"0",curZoomRegion:"6,10",level:"6"}},{featureType:"nationalway",stylers:{curZoomRegionId:"0",curZoomRegion:"6,10",level:"7"}},{featureType:"nationalway",stylers:{curZoomRegionId:"0",curZoomRegion:"6,10",level:"8"}},{featureType:"nationalway",stylers:{curZoomRegionId:"0",curZoomRegion:"6,10",level:"9"}},{featureType:"nationalway",stylers:{curZoomRegionId:"0",curZoomRegion:"6,10",level:"10"}},{featureType:"nationalway",elementType:"geometry",stylers:{visibility:"off",curZoomRegionId:"0",curZoomRegion:"6,10",level:"6"}},{featureType:"nationalway",elementType:"geometry",stylers:{visibility:"off",curZoomRegionId:"0",curZoomRegion:"6,10",level:"7"}},{featureType:"nationalway",elementType:"geometry",stylers:{visibility:"off",curZoomRegionId:"0",curZoomRegion:"6,10",level:"8"}},{featureType:"nationalway",elementType:"geometry",stylers:{visibility:"off",curZoomRegionId:"0",curZoomRegion:"6,10",level:"9"}},{featureType:"nationalway",elementType:"geometry",stylers:{visibility:"off",curZoomRegionId:"0",curZoomRegion:"6,10",level:"10"}},{featureType:"nationalway",elementType:"labels",stylers:{visibility:"off",curZoomRegionId:"0",curZoomRegion:"6,10",level:"6"}},{featureType:"nationalway",elementType:"labels",stylers:{visibility:"off",curZoomRegionId:"0",curZoomRegion:"6,10",level:"7"}},{featureType:"nationalway",elementType:"labels",stylers:{visibility:"off",curZoomRegionId:"0",curZoomRegion:"6,10",level:"8"}},{featureType:"nationalway",elementType:"labels",stylers:{visibility:"off",curZoomRegionId:"0",curZoomRegion:"6,10",level:"9"}},{featureType:"nationalway",elementType:"labels",stylers:{visibility:"off",curZoomRegionId:"0",curZoomRegion:"6,10",level:"10"}},{featureType:"district",stylers:{curZoomRegionId:"0",curZoomRegion:"8,10",level:"8"}},{featureType:"district",stylers:{curZoomRegionId:"0",curZoomRegion:"8,10",level:"9"}},{featureType:"district",stylers:{curZoomRegionId:"0",curZoomRegion:"8,10",level:"10"}},{featureType:"district",elementType:"labels",stylers:{visibility:"off",curZoomRegionId:"0",curZoomRegion:"8,10",level:"8"}},{featureType:"district",elementType:"labels",stylers:{visibility:"off",curZoomRegionId:"0",curZoomRegion:"8,10",level:"9"}},{featureType:"district",elementType:"labels",stylers:{visibility:"off",curZoomRegionId:"0",curZoomRegion:"8,10",level:"10"}},{featureType:"cityhighway",elementType:"geometry",stylers:{visibility:"on"}},{featureType:"cityhighway",stylers:{curZoomRegionId:"0",curZoomRegion:"6,9",level:"6"}},{featureType:"cityhighway",stylers:{curZoomRegionId:"0",curZoomRegion:"6,9",level:"7"}},{featureType:"cityhighway",stylers:{curZoomRegionId:"0",curZoomRegion:"6,9",level:"8"}},{featureType:"cityhighway",stylers:{curZoomRegionId:"0",curZoomRegion:"6,9",level:"9"}},{featureType:"cityhighway",elementType:"geometry",stylers:{visibility:"off",curZoomRegionId:"0",curZoomRegion:"6,9",level:"6"}},{featureType:"cityhighway",elementType:"geometry",stylers:{visibility:"off",curZoomRegionId:"0",curZoomRegion:"6,9",level:"7"}},{featureType:"cityhighway",elementType:"geometry",stylers:{visibility:"off",curZoomRegionId:"0",curZoomRegion:"6,9",level:"8"}},{featureType:"cityhighway",elementType:"geometry",stylers:{visibility:"off",curZoomRegionId:"0",curZoomRegion:"6,9",level:"9"}},{featureType:"cityhighway",elementType:"labels",stylers:{visibility:"off",curZoomRegionId:"0",curZoomRegion:"6,9",level:"6"}},{featureType:"cityhighway",elementType:"labels",stylers:{visibility:"off",curZoomRegionId:"0",curZoomRegion:"6,9",level:"7"}},{featureType:"cityhighway",elementType:"labels",stylers:{visibility:"off",curZoomRegionId:"0",curZoomRegion:"6,9",level:"8"}},{featureType:"cityhighway",elementType:"labels",stylers:{visibility:"off",curZoomRegionId:"0",curZoomRegion:"6,9",level:"9"}},{featureType:"districtlabel",elementType:"labels.icon",stylers:{visibility:"off"}},{featureType:"country",elementType:"labels.text.fill",stylers:{color:"#ffffffff"}},{featureType:"country",elementType:"labels.text.stroke",stylers:{color:"#428ee9ff",weight:6}},{featureType:"nationalway",elementType:"geometry",stylers:{visibility:"on"}},{featureType:"nationalway",elementType:"geometry.stroke",stylers:{color:"#ffffff00"}},{featureType:"provincialway",elementType:"geometry",stylers:{visibility:"on"}},{featureType:"cityhighway",elementType:"geometry.fill",stylers:{color:"#8ec1ffff"}},{featureType:"educationlabel",elementType:"labels",stylers:{visibility:"on"}},{featureType:"educationlabel",elementType:"labels.icon",stylers:{visibility:"off"}},{featureType:"governmentlabel",elementType:"labels",stylers:{visibility:"off"}},{featureType:"governmentlabel",elementType:"labels.icon",stylers:{visibility:"off"}},{featureType:"educationlabel",elementType:"labels.text.fill",stylers:{color:"#ffffffff"}},{featureType:"educationlabel",elementType:"labels.text.stroke",stylers:{color:"#428ee9ff",weight:3}},{featureType:"fourlevelway",elementType:"geometry",stylers:{visibility:"on"}},{featureType:"provincialway",elementType:"geometry.fill",stylers:{color:"#c8e1ffff"}},{featureType:"provincialway",elementType:"geometry.stroke",stylers:{color:"#ffffff0"}},{featureType:"poilabel",elementType:"labels.text",stylers:{fontsize:20}},{featureType:"cityhighway",elementType:"labels.text.fill",stylers:{color:"#ffffffff"}},{featureType:"cityhighway",elementType:"labels.text.stroke",stylers:{color:"#428ee9ff",weight:3}},{featureType:"provincialway",stylers:{curZoomRegionId:"0",curZoomRegion:"8,10",level:"8"}},{featureType:"provincialway",stylers:{curZoomRegionId:"0",curZoomRegion:"8,10",level:"9"}},{featureType:"provincialway",stylers:{curZoomRegionId:"0",curZoomRegion:"8,10",level:"10"}},{featureType:"provincialway",elementType:"geometry",stylers:{visibility:"off",curZoomRegionId:"0",weight:3,curZoomRegion:"8,10",level:"8"}},{featureType:"provincialway",elementType:"geometry",stylers:{visibility:"off",curZoomRegionId:"0",weight:3,curZoomRegion:"8,10",level:"9"}},{featureType:"provincialway",elementType:"geometry",stylers:{visibility:"off",curZoomRegionId:"0",weight:3,curZoomRegion:"8,10",level:"10"}}]});
;sugar.define("sugar:widgets/charts/bmap-scatter/bmap-theme/dark.ts",function(e,l){"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.default=[{featureType:"land",elementType:"geometry",stylers:{color:"#242f3eff"}},{featureType:"manmade",elementType:"geometry",stylers:{color:"#242f3eff"}},{featureType:"water",elementType:"geometry",stylers:{color:"#17263cff"}},{featureType:"water",elementType:"labels",stylers:{visibility:"off"}},{featureType:"road",elementType:"geometry.fill",stylers:{color:"#9e7d60ff"}},{featureType:"road",elementType:"geometry.stroke",stylers:{color:"#554631ff"}},{featureType:"districtlabel",elementType:"labels.text.fill",stylers:{color:"#d69563ff"}},{featureType:"districtlabel",elementType:"labels.text.stroke",stylers:{color:"#17263cff",weight:3}},{featureType:"poilabel",elementType:"labels",stylers:{visibility:"off"}},{featureType:"districtlabel",elementType:"all",stylers:{visibility:"off"}},{featureType:"subway",elementType:"geometry",stylers:{visibility:"off"}},{featureType:"railway",elementType:"geometry",stylers:{visibility:"off"}},{featureType:"poilabel",elementType:"labels.icon",stylers:{visibility:"off"}},{featureType:"subwaylabel",elementType:"labels",stylers:{visibility:"off"}},{featureType:"subwaylabel",elementType:"labels.icon",stylers:{visibility:"off"}},{featureType:"tertiarywaysign",elementType:"labels",stylers:{visibility:"off"}},{featureType:"tertiarywaysign",elementType:"labels.icon",stylers:{visibility:"off"}},{featureType:"provincialwaysign",elementType:"labels.icon",stylers:{visibility:"off"}},{featureType:"provincialwaysign",elementType:"labels",stylers:{visibility:"off"}},{featureType:"nationalwaysign",elementType:"labels.icon",stylers:{visibility:"off"}},{featureType:"nationalwaysign",elementType:"labels",stylers:{visibility:"off"}},{featureType:"highwaysign",elementType:"labels.icon",stylers:{visibility:"off"}},{featureType:"highwaysign",elementType:"labels",stylers:{visibility:"off"}},{featureType:"green",elementType:"geometry",stylers:{color:"#263b3eff"}},{featureType:"nationalwaysign",elementType:"labels.text.fill",stylers:{color:"#d0021bff"}},{featureType:"nationalwaysign",elementType:"labels.text.stroke",stylers:{color:"#ffffffff"}},{featureType:"city",elementType:"labels",stylers:{visibility:"on"}},{featureType:"city",elementType:"labels.icon",stylers:{visibility:"off"}},{featureType:"city",elementType:"labels.text.fill",stylers:{color:"#d69563ff"}},{featureType:"city",elementType:"labels.text.stroke",stylers:{color:"#17263cff"}},{featureType:"water",elementType:"labels.text.fill",stylers:{color:"#d69563ff"}},{featureType:"water",elementType:"labels.text.stroke",stylers:{color:"#242f3eff"}},{featureType:"local",elementType:"geometry.fill",stylers:{color:"#38414eff"}},{featureType:"local",elementType:"geometry.stroke",stylers:{color:"#ffffff0"}},{featureType:"fourlevelway",elementType:"geometry.fill",stylers:{color:"#38414eff"}},{featureType:"fourlevelway",elementType:"geometry.stroke",stylers:{color:"#ffffff00"}},{featureType:"tertiaryway",elementType:"geometry.fill",stylers:{color:"#38414eff"}},{featureType:"tertiaryway",elementType:"geometry.stroke",stylers:{color:"#ffffff0"}},{featureType:"tertiaryway",elementType:"labels.text.fill",stylers:{color:"#759879ff"}},{featureType:"fourlevelway",elementType:"labels.text.fill",stylers:{color:"#759879ff"}},{featureType:"highway",elementType:"labels.text.fill",stylers:{color:"#759879ff"}},{featureType:"highway",elementType:"geometry.fill",stylers:{color:"#9e7d60ff"}},{featureType:"highway",elementType:"geometry.stroke",stylers:{color:"#554631ff"}},{featureType:"provincialway",elementType:"geometry.fill",stylers:{color:"#9e7d60ff"}},{featureType:"provincialway",elementType:"geometry.stroke",stylers:{color:"#554631ff"}},{featureType:"tertiaryway",elementType:"labels.text.stroke",stylers:{color:"#1a2e1cff"}},{featureType:"fourlevelway",elementType:"labels.text.stroke",stylers:{color:"#1a2e1cff"}},{featureType:"highway",elementType:"labels.text.stroke",stylers:{color:"#1a2e1cff"}},{featureType:"nationalway",elementType:"labels.text.stroke",stylers:{color:"#1a2e1cff"}},{featureType:"nationalway",elementType:"labels.text.fill",stylers:{color:"#759879ff"}},{featureType:"nationalway",elementType:"geometry.fill",stylers:{color:"#9e7d60ff"}},{featureType:"nationalway",elementType:"geometry.stroke",stylers:{color:"#554631ff"}},{featureType:"cityhighway",elementType:"geometry.fill",stylers:{color:"#9e7d60ff"}},{featureType:"cityhighway",elementType:"geometry.stroke",stylers:{color:"#554631ff"}},{featureType:"arterial",elementType:"geometry.fill",stylers:{color:"#9e7d60ff"}},{featureType:"arterial",elementType:"geometry.stroke",stylers:{color:"#554631fa"}},{featureType:"medicallabel",elementType:"labels",stylers:{visibility:"off"}},{featureType:"medicallabel",elementType:"labels.icon",stylers:{visibility:"off"}},{featureType:"entertainmentlabel",elementType:"labels",stylers:{visibility:"off"}},{featureType:"entertainmentlabel",elementType:"labels.icon",stylers:{visibility:"off"}},{featureType:"estatelabel",elementType:"labels",stylers:{visibility:"off"}},{featureType:"estatelabel",elementType:"labels.icon",stylers:{visibility:"off"}},{featureType:"businesstowerlabel",elementType:"labels",stylers:{visibility:"off"}},{featureType:"businesstowerlabel",elementType:"labels.icon",stylers:{visibility:"off"}},{featureType:"companylabel",elementType:"labels",stylers:{visibility:"off"}},{featureType:"companylabel",elementType:"labels.icon",stylers:{visibility:"off"}},{featureType:"governmentlabel",elementType:"labels",stylers:{visibility:"off"}},{featureType:"governmentlabel",elementType:"labels.icon",stylers:{visibility:"off"}},{featureType:"restaurantlabel",elementType:"labels",stylers:{visibility:"off"}},{featureType:"restaurantlabel",elementType:"labels.icon",stylers:{visibility:"off"}},{featureType:"hotellabel",elementType:"labels",stylers:{visibility:"off"}},{featureType:"hotellabel",elementType:"labels.icon",stylers:{visibility:"off"}},{featureType:"shoppinglabel",elementType:"labels",stylers:{visibility:"off"}},{featureType:"shoppinglabel",elementType:"labels.icon",stylers:{visibility:"off"}},{featureType:"lifeservicelabel",elementType:"labels",stylers:{visibility:"off"}},{featureType:"lifeservicelabel",elementType:"labels.icon",stylers:{visibility:"off"}},{featureType:"carservicelabel",elementType:"labels",stylers:{visibility:"off"}},{featureType:"carservicelabel",elementType:"labels.icon",stylers:{visibility:"off"}},{featureType:"financelabel",elementType:"labels",stylers:{visibility:"off"}},{featureType:"financelabel",elementType:"labels.icon",stylers:{visibility:"off"}},{featureType:"otherlabel",elementType:"labels",stylers:{visibility:"off"}},{featureType:"otherlabel",elementType:"labels.icon",stylers:{visibility:"off"}},{featureType:"airportlabel",elementType:"labels",stylers:{visibility:"on"}},{featureType:"airportlabel",elementType:"labels.text.fill",stylers:{color:"#d69563ff"}},{featureType:"airportlabel",elementType:"labels.text.stroke",stylers:{color:"#17263cff"}},{featureType:"airportlabel",elementType:"labels.icon",stylers:{visibility:"off"}},{featureType:"highway",stylers:{curZoomRegionId:"0",curZoomRegion:"6,10",level:"6"}},{featureType:"highway",stylers:{curZoomRegionId:"0",curZoomRegion:"6,10",level:"7"}},{featureType:"highway",stylers:{curZoomRegionId:"0",curZoomRegion:"6,10",level:"8"}},{featureType:"highway",stylers:{curZoomRegionId:"0",curZoomRegion:"6,10",level:"9"}},{featureType:"highway",stylers:{curZoomRegionId:"0",curZoomRegion:"6,10",level:"10"}},{featureType:"highway",elementType:"geometry",stylers:{visibility:"off",curZoomRegionId:"0",curZoomRegion:"6,10",level:"6"}},{featureType:"highway",elementType:"geometry",stylers:{visibility:"off",curZoomRegionId:"0",curZoomRegion:"6,10",level:"7"}},{featureType:"highway",elementType:"geometry",stylers:{visibility:"off",curZoomRegionId:"0",curZoomRegion:"6,10",level:"8"}},{featureType:"highway",elementType:"geometry",stylers:{visibility:"off",curZoomRegionId:"0",curZoomRegion:"6,10",level:"9"}},{featureType:"highway",elementType:"geometry",stylers:{visibility:"off",curZoomRegionId:"0",curZoomRegion:"6,10",level:"10"}},{featureType:"nationalway",stylers:{curZoomRegionId:"0",curZoomRegion:"6,10",level:"6"}},{featureType:"nationalway",stylers:{curZoomRegionId:"0",curZoomRegion:"6,10",level:"7"}},{featureType:"nationalway",stylers:{curZoomRegionId:"0",curZoomRegion:"6,10",level:"8"}},{featureType:"nationalway",stylers:{curZoomRegionId:"0",curZoomRegion:"6,10",level:"9"}},{featureType:"nationalway",stylers:{curZoomRegionId:"0",curZoomRegion:"6,10",level:"10"}},{featureType:"nationalway",elementType:"geometry",stylers:{visibility:"off",curZoomRegionId:"0",curZoomRegion:"6,10",level:"6"}},{featureType:"nationalway",elementType:"geometry",stylers:{visibility:"off",curZoomRegionId:"0",curZoomRegion:"6,10",level:"7"}},{featureType:"nationalway",elementType:"geometry",stylers:{visibility:"off",curZoomRegionId:"0",curZoomRegion:"6,10",level:"8"}},{featureType:"nationalway",elementType:"geometry",stylers:{visibility:"off",curZoomRegionId:"0",curZoomRegion:"6,10",level:"9"}},{featureType:"nationalway",elementType:"geometry",stylers:{visibility:"off",curZoomRegionId:"0",curZoomRegion:"6,10",level:"10"}},{featureType:"nationalway",elementType:"labels",stylers:{visibility:"off",curZoomRegionId:"0",curZoomRegion:"6,10",level:"6"}},{featureType:"nationalway",elementType:"labels",stylers:{visibility:"off",curZoomRegionId:"0",curZoomRegion:"6,10",level:"7"}},{featureType:"nationalway",elementType:"labels",stylers:{visibility:"off",curZoomRegionId:"0",curZoomRegion:"6,10",level:"8"}},{featureType:"nationalway",elementType:"labels",stylers:{visibility:"off",curZoomRegionId:"0",curZoomRegion:"6,10",level:"9"}},{featureType:"nationalway",elementType:"labels",stylers:{visibility:"off",curZoomRegionId:"0",curZoomRegion:"6,10",level:"10"}},{featureType:"highway",elementType:"labels",stylers:{visibility:"off",curZoomRegionId:"0",curZoomRegion:"6,10",level:"6"}},{featureType:"highway",elementType:"labels",stylers:{visibility:"off",curZoomRegionId:"0",curZoomRegion:"6,10",level:"7"}},{featureType:"highway",elementType:"labels",stylers:{visibility:"off",curZoomRegionId:"0",curZoomRegion:"6,10",level:"8"}},{featureType:"highway",elementType:"labels",stylers:{visibility:"off",curZoomRegionId:"0",curZoomRegion:"6,10",level:"9"}},{featureType:"highway",elementType:"labels",stylers:{visibility:"off",curZoomRegionId:"0",curZoomRegion:"6,10",level:"10"}},{featureType:"provincialway",stylers:{curZoomRegionId:"0",curZoomRegion:"8,9",level:"8"}},{featureType:"provincialway",stylers:{curZoomRegionId:"0",curZoomRegion:"8,9",level:"9"}},{featureType:"provincialway",elementType:"geometry",stylers:{visibility:"off",curZoomRegionId:"0",curZoomRegion:"8,9",level:"8"}},{featureType:"provincialway",elementType:"geometry",stylers:{visibility:"off",curZoomRegionId:"0",curZoomRegion:"8,9",level:"9"}},{featureType:"provincialway",elementType:"labels",stylers:{visibility:"off",curZoomRegionId:"0",curZoomRegion:"8,9",level:"8"}},{featureType:"provincialway",elementType:"labels",stylers:{visibility:"off",curZoomRegionId:"0",curZoomRegion:"8,9",level:"9"}},{featureType:"cityhighway",stylers:{curZoomRegionId:"0",curZoomRegion:"6,10",level:"6"}},{featureType:"cityhighway",stylers:{curZoomRegionId:"0",curZoomRegion:"6,10",level:"7"}},{featureType:"cityhighway",stylers:{curZoomRegionId:"0",curZoomRegion:"6,10",level:"8"}},{featureType:"cityhighway",stylers:{curZoomRegionId:"0",curZoomRegion:"6,10",level:"9"}},{featureType:"cityhighway",stylers:{curZoomRegionId:"0",curZoomRegion:"6,10",level:"10"}},{featureType:"cityhighway",elementType:"geometry",stylers:{visibility:"off",curZoomRegionId:"0",curZoomRegion:"6,10",level:"6"}},{featureType:"cityhighway",elementType:"geometry",stylers:{visibility:"off",curZoomRegionId:"0",curZoomRegion:"6,10",level:"7"}},{featureType:"cityhighway",elementType:"geometry",stylers:{visibility:"off",curZoomRegionId:"0",curZoomRegion:"6,10",level:"8"}},{featureType:"cityhighway",elementType:"geometry",stylers:{visibility:"off",curZoomRegionId:"0",curZoomRegion:"6,10",level:"9"}},{featureType:"cityhighway",elementType:"geometry",stylers:{visibility:"off",curZoomRegionId:"0",curZoomRegion:"6,10",level:"10"}},{featureType:"cityhighway",elementType:"labels",stylers:{visibility:"off",curZoomRegionId:"0",curZoomRegion:"6,10",level:"6"}},{featureType:"cityhighway",elementType:"labels",stylers:{visibility:"off",curZoomRegionId:"0",curZoomRegion:"6,10",level:"7"}},{featureType:"cityhighway",elementType:"labels",stylers:{visibility:"off",curZoomRegionId:"0",curZoomRegion:"6,10",level:"8"}},{featureType:"cityhighway",elementType:"labels",stylers:{visibility:"off",curZoomRegionId:"0",curZoomRegion:"6,10",level:"9"}},{featureType:"cityhighway",elementType:"labels",stylers:{visibility:"off",curZoomRegionId:"0",curZoomRegion:"6,10",level:"10"}},{featureType:"arterial",stylers:{curZoomRegionId:"0",curZoomRegion:"9,10",level:"9"}},{featureType:"arterial",stylers:{curZoomRegionId:"0",curZoomRegion:"9,10",level:"10"}},{featureType:"arterial",elementType:"geometry",stylers:{visibility:"off",curZoomRegionId:"0",curZoomRegion:"9,10",level:"9"}},{featureType:"arterial",elementType:"geometry",stylers:{visibility:"off",curZoomRegionId:"0",curZoomRegion:"9,10",level:"10"}},{featureType:"arterial",elementType:"labels",stylers:{visibility:"off",curZoomRegionId:"0",curZoomRegion:"9,10",level:"9"}},{featureType:"arterial",elementType:"labels",stylers:{visibility:"off",curZoomRegionId:"0",curZoomRegion:"9,10",level:"10"}},{featureType:"building",elementType:"geometry.fill",stylers:{color:"#2a3341ff"}},{featureType:"building",elementType:"geometry.stroke",stylers:{color:"#1a212eff"}},{featureType:"road",elementType:"labels.text.fill",stylers:{color:"#759879ff"}},{featureType:"road",elementType:"labels.text.stroke",stylers:{color:"#1a2e1cff"}},{featureType:"provincialway",elementType:"labels.text.fill",stylers:{color:"#759879ff"}},{featureType:"cityhighway",elementType:"labels.text.fill",stylers:{color:"#759879ff"}},{featureType:"arterial",elementType:"labels.text.fill",stylers:{color:"#759879ff"}},{featureType:"provincialway",elementType:"labels.text.stroke",stylers:{color:"#1a2e1cff"}},{featureType:"cityhighway",elementType:"labels.text.stroke",stylers:{color:"#1a2e1cff"}},{featureType:"arterial",elementType:"labels.text.stroke",stylers:{color:"#1a2e1cff"}},{featureType:"local",elementType:"labels",stylers:{visibility:"off"}},{featureType:"manmade",elementType:"labels.text.fill",stylers:{color:"#d69563ff"}},{featureType:"manmade",elementType:"labels.text.stroke",stylers:{color:"#17263cff"}},{featureType:"subwaystation",elementType:"geometry",stylers:{visibility:"off"}},{featureType:"transportationlabel",elementType:"labels.icon",stylers:{visibility:"off"}},{featureType:"transportationlabel",elementType:"labels",stylers:{visibility:"off"}},{featureType:"estate",elementType:"geometry",stylers:{color:"#2a3341ff"}},{featureType:"nationalwaysign",elementType:"labels.icon",stylers:{visibility:"off"}},{featureType:"provincialwaysign",elementType:"labels.icon",stylers:{visibility:"off"}},{featureType:"tertiarywaysign",elementType:"labels.icon",stylers:{visibility:"off"}},{featureType:"subwaylabel",elementType:"labels.icon",stylers:{visibility:"off"}}]});
;sugar.define("sugar:widgets/charts/bmap-scatter/bmap-theme/transport.ts",function(e,l){"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.default=[{featureType:"estatelabel",elementType:"labels.text.fill",stylers:{color:"#8d694eff"}},{featureType:"restaurantlabel",elementType:"labels",stylers:{visibility:"off"}},{featureType:"restaurantlabel",elementType:"labels.icon",stylers:{visibility:"off"}},{featureType:"lifeservicelabel",elementType:"labels",stylers:{visibility:"off"}},{featureType:"lifeservicelabel",elementType:"labels.icon",stylers:{visibility:"off"}},{featureType:"transportationlabel",elementType:"labels.icon",stylers:{visibility:"off"}},{featureType:"transportationlabel",elementType:"labels",stylers:{visibility:"on"}},{featureType:"financelabel",elementType:"labels.icon",stylers:{visibility:"off"}},{featureType:"financelabel",elementType:"labels",stylers:{visibility:"off"}},{featureType:"land",elementType:"geometry",stylers:{color:"#ffffffff"}},{featureType:"building",elementType:"geometry.fill",stylers:{color:"#e7dfd6ff"}},{featureType:"building",elementType:"geometry.stroke",stylers:{color:"#b9a797ff"}},{featureType:"estatelabel",elementType:"labels.text.stroke",stylers:{color:"#ebe1d8ff"}},{featureType:"estatelabel",elementType:"labels.icon",stylers:{visibility:"off"}},{featureType:"estatelabel",elementType:"labels.text",stylers:{fontsize:28}},{featureType:"manmade",elementType:"labels.text.fill",stylers:{color:"#72533aff"}},{featureType:"manmade",elementType:"geometry",stylers:{color:"#ecececff"}},{featureType:"manmade",elementType:"labels.text",stylers:{fontsize:36}},{featureType:"manmade",elementType:"labels.text.stroke",stylers:{color:"#b6997fff"}},{featureType:"green",elementType:"geometry",stylers:{color:"#ecececff"}},{featureType:"education",elementType:"geometry",stylers:{color:"#ecececff"}},{featureType:"medical",elementType:"geometry",stylers:{color:"#ecececff"}},{featureType:"scenicspots",elementType:"geometry",stylers:{color:"#ecececff"}},{featureType:"entertainment",elementType:"geometry",stylers:{visibility:"off"}},{featureType:"estate",elementType:"geometry",stylers:{color:"#ecececff"}},{featureType:"shopping",elementType:"geometry",stylers:{color:"#ecececff",visibility:"on"}},{featureType:"transportation",elementType:"geometry",stylers:{color:"#ecececff"}},{featureType:"transportation",elementType:"labels.text.fill",stylers:{color:"#72533aff"}},{featureType:"transportation",elementType:"labels.text.stroke",stylers:{color:"#b6997fff"}},{featureType:"transportation",elementType:"labels.text",stylers:{fontsize:36}},{featureType:"medical",elementType:"labels.text.fill",stylers:{color:"#72533aff"}},{featureType:"medical",elementType:"labels.text.stroke",stylers:{color:"#b6997fff"}},{featureType:"medical",elementType:"labels.text",stylers:{fontsize:36}},{featureType:"education",elementType:"labels.text.fill",stylers:{color:"#72533aff"}},{featureType:"education",elementType:"labels.text.stroke",stylers:{color:"#b6997fff"}},{featureType:"education",elementType:"labels.text",stylers:{fontsize:36}},{featureType:"carservicelabel",elementType:"labels",stylers:{visibility:"off"}},{featureType:"carservicelabel",elementType:"labels.icon",stylers:{visibility:"off"}},{featureType:"shoppinglabel",elementType:"labels.icon",stylers:{visibility:"off"}},{featureType:"hotellabel",elementType:"labels.icon",stylers:{visibility:"off"}},{featureType:"governmentlabel",elementType:"labels.icon",stylers:{visibility:"off"}},{featureType:"companylabel",elementType:"labels.icon",stylers:{visibility:"off"}},{featureType:"businesstowerlabel",elementType:"labels.icon",stylers:{visibility:"off"}},{featureType:"entertainmentlabel",elementType:"labels",stylers:{visibility:"off"}},{featureType:"entertainmentlabel",elementType:"labels.icon",stylers:{visibility:"off"}},{featureType:"medicallabel",elementType:"labels.icon",stylers:{visibility:"off"}},{featureType:"educationlabel",elementType:"labels.icon",stylers:{visibility:"off"}},{featureType:"scenicspotslabel",elementType:"labels.icon",stylers:{visibility:"off"}},{featureType:"airportlabel",elementType:"labels.icon",stylers:{visibility:"off"}},{featureType:"airportlabel",elementType:"labels.text",stylers:{fontsize:36}},{featureType:"airportlabel",elementType:"labels.text.fill",stylers:{color:"#72533aff"}},{featureType:"airportlabel",elementType:"labels.text.stroke",stylers:{color:"#b6997fff"}},{featureType:"scenicspotslabel",elementType:"labels.text",stylers:{fontsize:28}},{featureType:"scenicspotslabel",elementType:"labels.text.fill",stylers:{color:"#4a4a4aff"}},{featureType:"scenicspotslabel",elementType:"labels.text.stroke",stylers:{color:"#ffffffff"}},{featureType:"educationlabel",elementType:"labels.text.fill",stylers:{color:"#8d694eff"}},{featureType:"educationlabel",elementType:"labels.text.stroke",stylers:{color:"#ebe1d8ff"}},{featureType:"educationlabel",elementType:"labels.text",stylers:{fontsize:26}},{featureType:"medicallabel",elementType:"labels.text.fill",stylers:{color:"#8d694eff"}},{featureType:"medicallabel",elementType:"labels.text.stroke",stylers:{color:"#ebe1d8ff"}},{featureType:"medicallabel",elementType:"labels.text",stylers:{fontsize:24}},{featureType:"businesstowerlabel",elementType:"labels.text.stroke",stylers:{color:"#ebe1d8ff"}},{featureType:"businesstowerlabel",elementType:"labels.text.fill",stylers:{color:"#8d694eff"}},{featureType:"businesstowerlabel",elementType:"labels.text",stylers:{fontsize:24}},{featureType:"companylabel",elementType:"labels",stylers:{visibility:"off"}},{featureType:"hotellabel",elementType:"labels.text.fill",stylers:{color:"#8d694eff"}},{featureType:"hotellabel",elementType:"labels.text.stroke",stylers:{color:"#ebe1d8ff"}},{featureType:"hotellabel",elementType:"labels.text",stylers:{fontsize:24}},{featureType:"shoppinglabel",elementType:"labels.text.fill",stylers:{color:"#8d694eff"}},{featureType:"shoppinglabel",elementType:"labels.text.stroke",stylers:{color:"#ebe1d8ff"}},{featureType:"transportationlabel",elementType:"labels.text.fill",stylers:{color:"#4a4a4aff"}},{featureType:"transportationlabel",elementType:"labels.text",stylers:{fontsize:24}},{featureType:"scenicspots",elementType:"labels.text.fill",stylers:{color:"#72533aff"}},{featureType:"scenicspots",elementType:"labels.text.stroke",stylers:{color:"#b6997fff"}},{featureType:"scenicspots",elementType:"labels.text",stylers:{fontsize:36}},{featureType:"governmentlabel",elementType:"labels.text.fill",stylers:{color:"#4a4a4aff"}},{featureType:"scenicspotslabel",elementType:"labels",stylers:{visibility:"off"}},{featureType:"district",elementType:"labels.text.fill",stylers:{color:"#ffffffff"}},{featureType:"district",elementType:"labels.text.stroke",stylers:{color:"#72533aff",weight:3.5}},{featureType:"town",elementType:"labels.text.stroke",stylers:{color:"#72533aff",weight:3}},{featureType:"town",elementType:"labels.text.fill",stylers:{color:"#ffffffff"}},{featureType:"village",elementType:"labels.text.stroke",stylers:{color:"#ffffffff",weight:2.5}},{featureType:"village",elementType:"labels.text.fill",stylers:{color:"#72533aff",weight:40}},{featureType:"village",elementType:"labels.text",stylers:{fontsize:20}},{featureType:"highway",elementType:"geometry.fill",stylers:{color:"#fdf0daff"}},{featureType:"highway",elementType:"geometry.stroke",stylers:{color:"#ffd993ff"}},{featureType:"highway",elementType:"labels.text.fill",stylers:{color:"#000000ff"}},{featureType:"highway",elementType:"labels.text.stroke",stylers:{color:"#ffffffff"}},{featureType:"nationalway",elementType:"geometry.fill",stylers:{color:"#fdf0daff"}},{featureType:"nationalway",elementType:"geometry.stroke",stylers:{color:"#ffd993ff"}},{featureType:"nationalway",elementType:"labels.text.fill",stylers:{color:"#000000ff"}},{featureType:"nationalway",elementType:"labels.text.stroke",stylers:{color:"#ffffffff"}},{featureType:"provincialway",elementType:"geometry.stroke",stylers:{color:"#ffd993ff"}},{featureType:"provincialway",elementType:"geometry.fill",stylers:{color:"#fdf0daff"}},{featureType:"provincialway",elementType:"labels.text.fill",stylers:{color:"#000000ff"}},{featureType:"provincialway",elementType:"labels.text.stroke",stylers:{color:"#ffffffff"}},{featureType:"subway",elementType:"geometry.fill",stylers:{color:"#f5a117ff"}},{featureType:"manmade",elementType:"labels",stylers:{visibility:"on"}}]});
;sugar.define("sugar:widgets/charts/bmap-scatter/bmap-theme/white.ts",function(e,l){"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.default=[{featureType:"water",elementType:"geometry",stylers:{visibility:"on",color:"#ccd6d7ff"}},{featureType:"green",elementType:"geometry",stylers:{visibility:"on",color:"#dee5e5ff"}},{featureType:"building",elementType:"geometry",stylers:{visibility:"on"}},{featureType:"building",elementType:"geometry.fill",stylers:{color:"#d1dbdbff"}},{featureType:"building",elementType:"geometry.stroke",stylers:{color:"#aab6b6ff"}},{featureType:"subwaystation",elementType:"geometry",stylers:{visibility:"off",color:"#888fa0ff"}},{featureType:"education",elementType:"geometry",stylers:{visibility:"on",color:"#e1e7e7ff"}},{featureType:"medical",elementType:"geometry",stylers:{visibility:"on",color:"#d1dbdbff"}},{featureType:"scenicspots",elementType:"geometry",stylers:{visibility:"on",color:"#d1dbdbff"}},{featureType:"highway",elementType:"geometry",stylers:{visibility:"on",weight:4}},{featureType:"highway",elementType:"geometry.fill",stylers:{color:"#ffffffff"}},{featureType:"highway",elementType:"geometry.stroke",stylers:{color:"#cacfcfff"}},{featureType:"highway",elementType:"labels",stylers:{visibility:"on"}},{featureType:"highway",elementType:"labels.text.fill",stylers:{color:"#999999ff"}},{featureType:"highway",elementType:"labels.text.stroke",stylers:{color:"#ffffffff"}},{featureType:"highway",elementType:"labels.icon",stylers:{visibility:"on"}},{featureType:"arterial",elementType:"geometry",stylers:{visibility:"on",weight:2}},{featureType:"arterial",elementType:"geometry.fill",stylers:{color:"#fbfffeff"}},{featureType:"arterial",elementType:"geometry.stroke",stylers:{color:"#cacfcfff"}},{featureType:"arterial",elementType:"labels",stylers:{visibility:"on"}},{featureType:"arterial",elementType:"labels.text.fill",stylers:{color:"#999999ff"}},{featureType:"arterial",elementType:"labels.text.stroke",stylers:{color:"#ffffffff"}},{featureType:"local",elementType:"geometry",stylers:{visibility:"on",weight:1}},{featureType:"local",elementType:"geometry.fill",stylers:{color:"#fbfffeff"}},{featureType:"local",elementType:"geometry.stroke",stylers:{color:"#cacfcfff"}},{featureType:"local",elementType:"labels",stylers:{visibility:"off"}},{featureType:"local",elementType:"labels.text.fill",stylers:{color:"#999999ff"}},{featureType:"local",elementType:"labels.text.stroke",stylers:{color:"#ffffffff"}},{featureType:"railway",elementType:"geometry",stylers:{visibility:"off",weight:1}},{featureType:"railway",elementType:"geometry.fill",stylers:{color:"#9494941a"}},{featureType:"railway",elementType:"geometry.stroke",stylers:{color:"#ffffff1a"}},{featureType:"subway",elementType:"geometry",stylers:{visibility:"off",weight:1}},{featureType:"subway",elementType:"geometry.fill",stylers:{color:"#c3bed433"}},{featureType:"subway",elementType:"geometry.stroke",stylers:{color:"#ffffff33"}},{featureType:"subway",elementType:"labels",stylers:{visibility:"off"}},{featureType:"subway",elementType:"labels.text.fill",stylers:{color:"#979c9aff"}},{featureType:"subway",elementType:"labels.text.stroke",stylers:{color:"#ffffffff"}},{featureType:"continent",elementType:"labels",stylers:{visibility:"on"}},{featureType:"continent",elementType:"labels.icon",stylers:{visibility:"on"}},{featureType:"continent",elementType:"labels.text.fill",stylers:{color:"#333333ff"}},{featureType:"continent",elementType:"labels.text.stroke",stylers:{color:"#ffffffff"}},{featureType:"city",elementType:"labels.icon",stylers:{visibility:"on"}},{featureType:"city",elementType:"labels",stylers:{visibility:"on"}},{featureType:"city",elementType:"labels.text.fill",stylers:{color:"#454d50ff"}},{featureType:"city",elementType:"labels.text.stroke",stylers:{color:"#ffffffff"}},{featureType:"town",elementType:"labels.icon",stylers:{visibility:"on"}},{featureType:"town",elementType:"labels",stylers:{visibility:"off"}},{featureType:"town",elementType:"labels.text.fill",stylers:{color:"#454d50ff"}},{featureType:"town",elementType:"labels.text.stroke",stylers:{color:"#ffffffff"}},{featureType:"road",elementType:"labels",stylers:{visibility:"off"}},{featureType:"road",elementType:"geometry.fill",stylers:{color:"#fbfffeff"}},{featureType:"poilabel",elementType:"labels.icon",stylers:{visibility:"off"}},{featureType:"districtlabel",elementType:"labels.icon",stylers:{visibility:"off"}},{featureType:"poilabel",elementType:"labels.text.fill",stylers:{color:"#999999ff"}},{featureType:"districtlabel",elementType:"labels.text.fill",stylers:{color:"#888fa0ff"}},{featureType:"transportation",elementType:"geometry",stylers:{color:"#d1dbdbff"}},{featureType:"companylabel",elementType:"labels",stylers:{visibility:"off"}},{featureType:"restaurantlabel",elementType:"labels",stylers:{visibility:"off"}},{featureType:"lifeservicelabel",elementType:"labels",stylers:{visibility:"off"}},{featureType:"carservicelabel",elementType:"labels",stylers:{visibility:"off"}},{featureType:"financelabel",elementType:"labels",stylers:{visibility:"off"}},{featureType:"otherlabel",elementType:"labels",stylers:{visibility:"off"}},{featureType:"village",elementType:"labels",stylers:{visibility:"off"}},{featureType:"district",elementType:"labels",stylers:{visibility:"off"}},{featureType:"land",elementType:"geometry",stylers:{color:"#edf3f3ff"}},{featureType:"nationalway",elementType:"geometry.stroke",stylers:{color:"#cacfcfff"}},{featureType:"provincialway",elementType:"geometry.stroke",stylers:{color:"#cacfcfff"}},{featureType:"cityhighway",elementType:"geometry.stroke",stylers:{color:"#cacfcfff"}},{featureType:"road",elementType:"geometry.stroke",stylers:{color:"#cacfcfff"}},{featureType:"subwaylabel",elementType:"labels.icon",stylers:{visibility:"off"}},{featureType:"subwaylabel",elementType:"labels",stylers:{visibility:"off"}},{featureType:"tertiarywaysign",elementType:"labels.icon",stylers:{visibility:"off"}},{featureType:"tertiarywaysign",elementType:"labels",stylers:{visibility:"off"}},{featureType:"provincialwaysign",elementType:"labels.icon",stylers:{visibility:"off"}},{featureType:"provincialwaysign",elementType:"labels",stylers:{visibility:"off"}},{featureType:"nationalwaysign",elementType:"labels.icon",stylers:{visibility:"off"}},{featureType:"nationalwaysign",elementType:"labels",stylers:{visibility:"off"}},{featureType:"highwaysign",elementType:"labels.icon",stylers:{visibility:"off"}},{featureType:"highwaysign",elementType:"labels",stylers:{visibility:"off"}},{featureType:"nationalway",elementType:"geometry.fill",stylers:{color:"#fbfffeff"}},{featureType:"nationalway",elementType:"labels.text.fill",stylers:{color:"#999999ff"}},{featureType:"provincialway",elementType:"labels.text.fill",stylers:{color:"#999999ff"}},{featureType:"cityhighway",elementType:"labels.text.fill",stylers:{color:"#999999ff"}},{featureType:"cityhighway",elementType:"labels.text.stroke",stylers:{color:"#ffffffff"}},{featureType:"highway",stylers:{curZoomRegionId:"0",curZoomRegion:"6,8",level:"6"}},{featureType:"highway",stylers:{curZoomRegionId:"0",curZoomRegion:"6,8",level:"7"}},{featureType:"highway",stylers:{curZoomRegionId:"0",curZoomRegion:"6,8",level:"8"}},{featureType:"highway",elementType:"geometry",stylers:{visibility:"off",curZoomRegionId:"0",curZoomRegion:"6,8",level:"6"}},{featureType:"highway",elementType:"geometry",stylers:{visibility:"off",curZoomRegionId:"0",curZoomRegion:"6,8",level:"7"}},{featureType:"highway",elementType:"geometry",stylers:{visibility:"off",curZoomRegionId:"0",curZoomRegion:"6,8",level:"8"}},{featureType:"highway",elementType:"labels",stylers:{visibility:"off",curZoomRegionId:"0",curZoomRegion:"6,8",level:"6"}},{featureType:"highway",elementType:"labels",stylers:{visibility:"off",curZoomRegionId:"0",curZoomRegion:"6,8",level:"7"}},{featureType:"highway",elementType:"labels",stylers:{visibility:"off",curZoomRegionId:"0",curZoomRegion:"6,8",level:"8"}},{featureType:"nationalway",stylers:{curZoomRegionId:"0",curZoomRegion:"6,8",level:"6"}},{featureType:"nationalway",stylers:{curZoomRegionId:"0",curZoomRegion:"6,8",level:"7"}},{featureType:"nationalway",stylers:{curZoomRegionId:"0",curZoomRegion:"6,8",level:"8"}},{featureType:"nationalway",elementType:"geometry",stylers:{visibility:"off",curZoomRegionId:"0",curZoomRegion:"6,8",level:"6"}},{featureType:"nationalway",elementType:"geometry",stylers:{visibility:"off",curZoomRegionId:"0",curZoomRegion:"6,8",level:"7"}},{featureType:"nationalway",elementType:"geometry",stylers:{visibility:"off",curZoomRegionId:"0",curZoomRegion:"6,8",level:"8"}},{featureType:"nationalway",elementType:"labels",stylers:{visibility:"off",curZoomRegionId:"0",curZoomRegion:"6,8",level:"6"}},{featureType:"nationalway",elementType:"labels",stylers:{visibility:"off",curZoomRegionId:"0",curZoomRegion:"6,8",level:"7"}},{featureType:"nationalway",elementType:"labels",stylers:{visibility:"off",curZoomRegionId:"0",curZoomRegion:"6,8",level:"8"}},{featureType:"provincialway",stylers:{curZoomRegionId:"0",curZoomRegion:"8,8",level:"8"}},{featureType:"provincialway",elementType:"geometry",stylers:{visibility:"off",curZoomRegionId:"0",curZoomRegion:"8,8",level:"8"}},{featureType:"provincialway",elementType:"labels",stylers:{visibility:"off",curZoomRegionId:"0",curZoomRegion:"8,8",level:"8"}},{featureType:"cityhighway",stylers:{curZoomRegionId:"0",curZoomRegion:"6,8",level:"6"}},{featureType:"cityhighway",stylers:{curZoomRegionId:"0",curZoomRegion:"6,8",level:"7"}},{featureType:"cityhighway",stylers:{curZoomRegionId:"0",curZoomRegion:"6,8",level:"8"}},{featureType:"cityhighway",elementType:"geometry",stylers:{visibility:"off",curZoomRegionId:"0",curZoomRegion:"6,8",level:"6"}},{featureType:"cityhighway",elementType:"geometry",stylers:{visibility:"off",curZoomRegionId:"0",curZoomRegion:"6,8",level:"7"}},{featureType:"cityhighway",elementType:"geometry",stylers:{visibility:"off",curZoomRegionId:"0",curZoomRegion:"6,8",level:"8"}},{featureType:"cityhighway",elementType:"labels",stylers:{visibility:"off",curZoomRegionId:"0",curZoomRegion:"6,8",level:"6"}},{featureType:"cityhighway",elementType:"labels",stylers:{visibility:"off",curZoomRegionId:"0",curZoomRegion:"6,8",level:"7"}},{featureType:"cityhighway",elementType:"labels",stylers:{visibility:"off",curZoomRegionId:"0",curZoomRegion:"6,8",level:"8"}},{featureType:"cityhighway",elementType:"geometry.fill",stylers:{color:"#fbfffeff"}},{featureType:"water",elementType:"labels.text.fill",stylers:{color:"#8f5a33ff"}},{featureType:"water",elementType:"labels.text.stroke",stylers:{color:"#ffffffff"}},{featureType:"country",elementType:"labels.text.fill",stylers:{color:"#8f5a33ff"}},{featureType:"country",elementType:"labels.text.stroke",stylers:{color:"#ffffffff"}},{featureType:"country",elementType:"labels.text",stylers:{fontsize:28}},{featureType:"manmade",elementType:"geometry",stylers:{color:"#dfe7e7ff"}},{featureType:"provincialway",elementType:"geometry.fill",stylers:{color:"#fbfffeff"}},{featureType:"tertiaryway",elementType:"geometry.fill",stylers:{color:"#fbfffeff"}},{featureType:"manmade",elementType:"labels.text.fill",stylers:{color:"#999999ff"}},{featureType:"manmade",elementType:"labels.text.stroke",stylers:{color:"#ffffffff"}},{featureType:"scenicspots",elementType:"labels.text.fill",stylers:{color:"#999999ff"}},{featureType:"scenicspots",elementType:"labels.text.stroke",stylers:{color:"#ffffffff"}},{featureType:"airportlabel",elementType:"labels.text.fill",stylers:{color:"#999999ff"}},{featureType:"airportlabel",elementType:"labels.icon",stylers:{visibility:"off"}},{featureType:"scenicspotslabel",elementType:"labels.text.fill",stylers:{color:"#999999ff"}},{featureType:"scenicspotslabel",elementType:"labels.icon",stylers:{visibility:"off"}},{featureType:"educationlabel",elementType:"labels.text.fill",stylers:{color:"#999999ff"}},{featureType:"educationlabel",elementType:"labels.icon",stylers:{visibility:"off"}},{featureType:"medicallabel",elementType:"labels.text.fill",stylers:{color:"#999999ff"}},{featureType:"medicallabel",elementType:"labels.icon",stylers:{visibility:"off"}},{featureType:"companylabel",elementType:"labels.icon",stylers:{visibility:"off"}},{featureType:"restaurantlabel",elementType:"labels.icon",stylers:{visibility:"off"}},{featureType:"hotellabel",elementType:"labels.icon",stylers:{visibility:"off"}},{featureType:"hotellabel",elementType:"labels",stylers:{visibility:"off"}},{featureType:"shoppinglabel",elementType:"labels.icon",stylers:{visibility:"off"}},{featureType:"shoppinglabel",elementType:"labels",stylers:{visibility:"off"}},{featureType:"lifeservicelabel",elementType:"labels.icon",stylers:{visibility:"off"}},{featureType:"carservicelabel",elementType:"labels.icon",stylers:{visibility:"off"}},{featureType:"transportationlabel",elementType:"labels.icon",stylers:{visibility:"off"}},{featureType:"transportationlabel",elementType:"labels",stylers:{visibility:"off"}},{featureType:"financelabel",elementType:"labels.icon",stylers:{visibility:"off"}},{featureType:"entertainment",elementType:"geometry",stylers:{color:"#d1dbdbff"}},{featureType:"estate",elementType:"geometry",stylers:{color:"#d1dbdbff"}},{featureType:"shopping",elementType:"geometry",stylers:{color:"#d1dbdbff"}},{featureType:"education",elementType:"labels.text.fill",stylers:{color:"#999999ff"}},{featureType:"education",elementType:"labels.text.stroke",stylers:{color:"#ffffffff"}},{featureType:"medical",elementType:"labels.text.fill",stylers:{color:"#999999ff"}},{featureType:"medical",elementType:"labels.text.stroke",stylers:{color:"#ffffffff"}},{featureType:"transportation",elementType:"labels.text.fill",stylers:{color:"#999999ff"}},{featureType:"transportation",elementType:"labels.text.stroke",stylers:{color:"#ffffffff"}}]});
;sugar.define("sugar:widgets/charts/bmap-scatter/bmap-theme/dark-blue.ts",function(e,l){"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.default=[{featureType:"land",elementType:"geometry",stylers:{visibility:"on",color:"#091220ff"}},{featureType:"water",elementType:"geometry",stylers:{visibility:"on",color:"#113549ff"}},{featureType:"water",elementType:"labels",stylers:{visibility:"off"}},{featureType:"green",elementType:"geometry",stylers:{visibility:"on",color:"#0e1b30ff"}},{featureType:"building",elementType:"geometry",stylers:{visibility:"on"}},{featureType:"building",elementType:"geometry.topfill",stylers:{color:"#113549ff"}},{featureType:"building",elementType:"geometry.sidefill",stylers:{color:"#143e56ff"}},{featureType:"building",elementType:"geometry.stroke",stylers:{color:"#dadada00"}},{featureType:"subwaystation",elementType:"geometry",stylers:{visibility:"on",color:"#113549B2"}},{featureType:"education",elementType:"geometry",stylers:{visibility:"on",color:"#12223dff"}},{featureType:"medical",elementType:"geometry",stylers:{visibility:"on",color:"#12223dff"}},{featureType:"scenicspots",elementType:"geometry",stylers:{visibility:"on",color:"#12223dff"}},{featureType:"highway",elementType:"geometry",stylers:{visibility:"on",weight:4}},{featureType:"highway",elementType:"geometry.fill",stylers:{color:"#12223dff"}},{featureType:"highway",elementType:"geometry.stroke",stylers:{color:"#fed66900"}},{featureType:"highway",elementType:"labels",stylers:{visibility:"on"}},{featureType:"highway",elementType:"labels.text.fill",stylers:{color:"#12223dff"}},{featureType:"highway",elementType:"labels.text.stroke",stylers:{color:"#ffffff00"}},{featureType:"highway",elementType:"labels.icon",stylers:{visibility:"on"}},{featureType:"arterial",elementType:"geometry",stylers:{visibility:"on",weight:2}},{featureType:"arterial",elementType:"geometry.fill",stylers:{color:"#12223dff"}},{featureType:"arterial",elementType:"geometry.stroke",stylers:{color:"#ffeebb00"}},{featureType:"arterial",elementType:"labels",stylers:{visibility:"on"}},{featureType:"arterial",elementType:"labels.text.fill",stylers:{color:"#2dc4bbff"}},{featureType:"arterial",elementType:"labels.text.stroke",stylers:{color:"#ffffff00"}},{featureType:"local",elementType:"geometry",stylers:{visibility:"on",weight:1}},{featureType:"local",elementType:"geometry.fill",stylers:{color:"#12223dff"}},{featureType:"local",elementType:"geometry.stroke",stylers:{color:"#ffffff00"}},{featureType:"local",elementType:"labels",stylers:{visibility:"on"}},{featureType:"local",elementType:"labels.text.fill",stylers:{color:"#979c9aff"}},{featureType:"local",elementType:"labels.text.stroke",stylers:{color:"#ffffffff"}},{featureType:"railway",elementType:"geometry",stylers:{visibility:"off",weight:1}},{featureType:"railway",elementType:"geometry.fill",stylers:{color:"#123c52ff"}},{featureType:"railway",elementType:"geometry.stroke",stylers:{color:"#12223dff"}},{featureType:"subway",elementType:"geometry",stylers:{visibility:"off",weight:1}},{featureType:"subway",elementType:"geometry.fill",stylers:{color:"#d8d8d8ff"}},{featureType:"subway",elementType:"geometry.stroke",stylers:{color:"#ffffff00"}},{featureType:"subway",elementType:"labels",stylers:{visibility:"on"}},{featureType:"subway",elementType:"labels.text.fill",stylers:{color:"#979c9aff"}},{featureType:"subway",elementType:"labels.text.stroke",stylers:{color:"#ffffffff"}},{featureType:"continent",elementType:"labels",stylers:{visibility:"on"}},{featureType:"continent",elementType:"labels.icon",stylers:{visibility:"on"}},{featureType:"continent",elementType:"labels.text.fill",stylers:{color:"#2dc4bbff"}},{featureType:"continent",elementType:"labels.text.stroke",stylers:{color:"#ffffff00"}},{featureType:"city",elementType:"labels.icon",stylers:{visibility:"off"}},{featureType:"city",elementType:"labels",stylers:{visibility:"on"}},{featureType:"city",elementType:"labels.text.fill",stylers:{color:"#2dc4bbff"}},{featureType:"city",elementType:"labels.text.stroke",stylers:{color:"#ffffff00"}},{featureType:"town",elementType:"labels.icon",stylers:{visibility:"on"}},{featureType:"town",elementType:"labels",stylers:{visibility:"off"}},{featureType:"town",elementType:"labels.text.fill",stylers:{color:"#454d50ff"}},{featureType:"town",elementType:"labels.text.stroke",stylers:{color:"#ffffffff"}},{featureType:"road",elementType:"geometry.fill",stylers:{color:"#12223dff"}},{featureType:"poilabel",elementType:"labels",stylers:{visibility:"on"}},{featureType:"districtlabel",elementType:"labels",stylers:{visibility:"off"}},{featureType:"road",elementType:"geometry",stylers:{visibility:"on"}},{featureType:"road",elementType:"labels",stylers:{visibility:"off"}},{featureType:"road",elementType:"geometry.stroke",stylers:{color:"#ffffff00"}},{featureType:"district",elementType:"labels",stylers:{visibility:"on"}},{featureType:"poilabel",elementType:"labels.icon",stylers:{visibility:"off"}},{featureType:"poilabel",elementType:"labels.text.fill",stylers:{color:"#2dc4bbff"}},{featureType:"poilabel",elementType:"labels.text.stroke",stylers:{color:"#ffffff00"}},{featureType:"manmade",elementType:"geometry",stylers:{color:"#12223dff"}},{featureType:"districtlabel",elementType:"labels.text.stroke",stylers:{color:"#ffffffff"}},{featureType:"entertainment",elementType:"geometry",stylers:{color:"#12223dff"}},{featureType:"shopping",elementType:"geometry",stylers:{color:"#12223dff"}},{featureType:"nationalway",stylers:{curZoomRegionId:"0",curZoomRegion:"6,10",level:"6"}},{featureType:"nationalway",stylers:{curZoomRegionId:"0",curZoomRegion:"6,10",level:"7"}},{featureType:"nationalway",stylers:{curZoomRegionId:"0",curZoomRegion:"6,10",level:"8"}},{featureType:"nationalway",stylers:{curZoomRegionId:"0",curZoomRegion:"6,10",level:"9"}},{featureType:"nationalway",stylers:{curZoomRegionId:"0",curZoomRegion:"6,10",level:"10"}},{featureType:"nationalway",elementType:"geometry",stylers:{visibility:"off",curZoomRegionId:"0",curZoomRegion:"6,10",level:"6"}},{featureType:"nationalway",elementType:"geometry",stylers:{visibility:"off",curZoomRegionId:"0",curZoomRegion:"6,10",level:"7"}},{featureType:"nationalway",elementType:"geometry",stylers:{visibility:"off",curZoomRegionId:"0",curZoomRegion:"6,10",level:"8"}},{featureType:"nationalway",elementType:"geometry",stylers:{visibility:"off",curZoomRegionId:"0",curZoomRegion:"6,10",level:"9"}},{featureType:"nationalway",elementType:"geometry",stylers:{visibility:"off",curZoomRegionId:"0",curZoomRegion:"6,10",level:"10"}},{featureType:"nationalway",elementType:"labels",stylers:{visibility:"off",curZoomRegionId:"0",curZoomRegion:"6,10",level:"6"}},{featureType:"nationalway",elementType:"labels",stylers:{visibility:"off",curZoomRegionId:"0",curZoomRegion:"6,10",level:"7"}},{featureType:"nationalway",elementType:"labels",stylers:{visibility:"off",curZoomRegionId:"0",curZoomRegion:"6,10",level:"8"}},{featureType:"nationalway",elementType:"labels",stylers:{visibility:"off",curZoomRegionId:"0",curZoomRegion:"6,10",level:"9"}},{featureType:"nationalway",elementType:"labels",stylers:{visibility:"off",curZoomRegionId:"0",curZoomRegion:"6,10",level:"10"}},{featureType:"cityhighway",stylers:{curZoomRegionId:"0",curZoomRegion:"6,9",level:"6"}},{featureType:"cityhighway",stylers:{curZoomRegionId:"0",curZoomRegion:"6,9",level:"7"}},{featureType:"cityhighway",stylers:{curZoomRegionId:"0",curZoomRegion:"6,9",level:"8"}},{featureType:"cityhighway",stylers:{curZoomRegionId:"0",curZoomRegion:"6,9",level:"9"}},{featureType:"cityhighway",elementType:"geometry",stylers:{visibility:"off",curZoomRegionId:"0",curZoomRegion:"6,9",level:"6"}},{featureType:"cityhighway",elementType:"geometry",stylers:{visibility:"off",curZoomRegionId:"0",curZoomRegion:"6,9",level:"7"}},{featureType:"cityhighway",elementType:"geometry",stylers:{visibility:"off",curZoomRegionId:"0",curZoomRegion:"6,9",level:"8"}},{featureType:"cityhighway",elementType:"geometry",stylers:{visibility:"off",curZoomRegionId:"0",curZoomRegion:"6,9",level:"9"}},{featureType:"cityhighway",elementType:"labels",stylers:{visibility:"off",curZoomRegionId:"0",curZoomRegion:"6,9",level:"6"}},{featureType:"cityhighway",elementType:"labels",stylers:{visibility:"off",curZoomRegionId:"0",curZoomRegion:"6,9",level:"7"}},{featureType:"cityhighway",elementType:"labels",stylers:{visibility:"off",curZoomRegionId:"0",curZoomRegion:"6,9",level:"8"}},{featureType:"cityhighway",elementType:"labels",stylers:{visibility:"off",curZoomRegionId:"0",curZoomRegion:"6,9",level:"9"}},{featureType:"subwaylabel",elementType:"labels",stylers:{visibility:"off"}},{featureType:"subwaylabel",elementType:"labels.icon",stylers:{visibility:"off"}},{featureType:"tertiarywaysign",elementType:"labels",stylers:{visibility:"off"}},{featureType:"tertiarywaysign",elementType:"labels.icon",stylers:{visibility:"off"}},{featureType:"provincialwaysign",elementType:"labels",stylers:{visibility:"off"}},{featureType:"provincialwaysign",elementType:"labels.icon",stylers:{visibility:"off"}},{featureType:"nationalwaysign",elementType:"labels",stylers:{visibility:"off"}},{featureType:"nationalwaysign",elementType:"labels.icon",stylers:{visibility:"off"}},{featureType:"highwaysign",elementType:"labels",stylers:{visibility:"off"}},{featureType:"highwaysign",elementType:"labels.icon",stylers:{visibility:"off"}},{featureType:"village",elementType:"labels",stylers:{visibility:"off"}},{featureType:"district",elementType:"labels.text",stylers:{fontsize:20}},{featureType:"district",elementType:"labels.text.fill",stylers:{color:"#2dc4bbff"}},{featureType:"district",elementType:"labels.text.stroke",stylers:{color:"#ffffff00"}},{featureType:"country",elementType:"labels.text.fill",stylers:{color:"#2dc4bbff"}},{featureType:"country",elementType:"labels.text.stroke",stylers:{color:"#ffffff00"}},{featureType:"water",elementType:"labels.text.fill",stylers:{color:"#2dc4bbff"}},{featureType:"water",elementType:"labels.text.stroke",stylers:{color:"#ffffff00"}},{featureType:"cityhighway",elementType:"geometry.fill",stylers:{color:"#12223dff"}},{featureType:"cityhighway",elementType:"geometry.stroke",stylers:{color:"#ffffff00"}},{featureType:"tertiaryway",elementType:"geometry.fill",stylers:{color:"#12223dff"}},{featureType:"tertiaryway",elementType:"geometry.stroke",stylers:{color:"#ffffff10"}},{featureType:"provincialway",elementType:"geometry.fill",stylers:{color:"#12223dff"}},{featureType:"provincialway",elementType:"geometry.stroke",stylers:{color:"#ffffff00"}},{featureType:"nationalway",elementType:"geometry.fill",stylers:{color:"#12223dff"}},{featureType:"nationalway",elementType:"geometry.stroke",stylers:{color:"#ffffff00"}},{featureType:"highway",elementType:"labels.text",stylers:{fontsize:20}},{featureType:"nationalway",elementType:"labels.text.stroke",stylers:{color:"#ffffff00"}},{featureType:"nationalway",elementType:"labels.text.fill",stylers:{color:"#12223dff"}},{featureType:"nationalway",elementType:"labels.text",stylers:{fontsize:20}},{featureType:"provincialway",elementType:"labels.text.fill",stylers:{color:"#12223dff"}},{featureType:"provincialway",elementType:"labels.text.stroke",stylers:{color:"#ffffff00"}},{featureType:"provincialway",elementType:"labels.text",stylers:{fontsize:20}},{featureType:"cityhighway",elementType:"labels.text.fill",stylers:{color:"#12223dff"}},{featureType:"cityhighway",elementType:"labels.text",stylers:{fontsize:20}},{featureType:"cityhighway",elementType:"labels.text.stroke",stylers:{color:"#ffffff00"}},{featureType:"estate",elementType:"geometry",stylers:{color:"#12223dff"}},{featureType:"tertiaryway",elementType:"labels.text.fill",stylers:{color:"#2dc4bbff"}},{featureType:"tertiaryway",elementType:"labels.text.stroke",stylers:{color:"#ffffff00"}},{featureType:"fourlevelway",elementType:"labels.text.fill",stylers:{color:"#2dc4bbff"}},{featureType:"fourlevelway",elementType:"labels.text.stroke",stylers:{color:"#ffffff00"}},{featureType:"scenicspotsway",elementType:"geometry.fill",stylers:{color:"#12223dff"}},{featureType:"scenicspotsway",elementType:"geometry.stroke",stylers:{color:"#ffffff00"}},{featureType:"universityway",elementType:"geometry.fill",stylers:{color:"#12223dff"}},{featureType:"universityway",elementType:"geometry.stroke",stylers:{color:"#ffffff00"}},{featureType:"vacationway",elementType:"geometry.fill",stylers:{color:"#12223dff"}},{featureType:"vacationway",elementType:"geometry.stroke",stylers:{color:"#ffffff00"}},{featureType:"fourlevelway",elementType:"geometry",stylers:{visibility:"on"}},{featureType:"fourlevelway",elementType:"geometry.fill",stylers:{color:"#12223dff"}},{featureType:"fourlevelway",elementType:"geometry.stroke",stylers:{color:"#ffffff00"}},{featureType:"transportationlabel",elementType:"labels",stylers:{visibility:"on"}},{featureType:"transportationlabel",elementType:"labels.icon",stylers:{visibility:"off"}},{featureType:"transportationlabel",elementType:"labels.text.fill",stylers:{color:"#2dc4bbff"}},{featureType:"transportationlabel",elementType:"labels.text.stroke",stylers:{color:"#ffffff00"}},{featureType:"educationlabel",elementType:"labels",stylers:{visibility:"on"}},{featureType:"educationlabel",elementType:"labels.icon",stylers:{visibility:"off"}},{featureType:"educationlabel",elementType:"labels.text.fill",stylers:{color:"#2dc4bbff"}},{featureType:"educationlabel",elementType:"labels.text.stroke",stylers:{color:"#ffffff00"}},{featureType:"transportation",elementType:"geometry",stylers:{color:"#113549ff"}},{featureType:"airportlabel",elementType:"labels.text.fill",stylers:{color:"#2dc4bbff"}},{featureType:"airportlabel",elementType:"labels.text.stroke",stylers:{color:"#ffffff00"}},{featureType:"scenicspotslabel",elementType:"labels.text.fill",stylers:{color:"#2dc4bbff"}},{featureType:"scenicspotslabel",elementType:"labels.text.stroke",stylers:{color:"#ffffff00"}},{featureType:"medicallabel",elementType:"labels.text.fill",stylers:{color:"#2dc4bbff"}},{featureType:"medicallabel",elementType:"labels.text.stroke",stylers:{color:"#ffffff00"}},{featureType:"medicallabel",elementType:"labels.icon",stylers:{visibility:"off"}},{featureType:"scenicspotslabel",elementType:"labels.icon",stylers:{visibility:"off"}},{featureType:"airportlabel",elementType:"labels.icon",stylers:{visibility:"off"}},{featureType:"entertainmentlabel",elementType:"labels.icon",stylers:{visibility:"off"}},{featureType:"entertainmentlabel",elementType:"labels.text.fill",stylers:{color:"#2dc4bbff"}},{featureType:"entertainmentlabel",elementType:"labels.text.stroke",stylers:{color:"#ffffff00"}},{featureType:"estatelabel",elementType:"labels.icon",stylers:{visibility:"off"}},{featureType:"estatelabel",elementType:"labels.text.fill",stylers:{color:"#2dc4bbff"}},{featureType:"estatelabel",elementType:"labels.text.stroke",stylers:{color:"#ffffff00"}},{featureType:"businesstowerlabel",elementType:"labels.text.fill",stylers:{color:"#2dc4bbff"}},{featureType:"businesstowerlabel",elementType:"labels.text.stroke",stylers:{color:"#ffffff00"}},{featureType:"businesstowerlabel",elementType:"labels.icon",stylers:{visibility:"off"}},{featureType:"companylabel",elementType:"labels.text.fill",stylers:{color:"#2dc4bbff"}},{featureType:"companylabel",elementType:"labels.text.stroke",stylers:{color:"#ffffff00"}},{featureType:"companylabel",elementType:"labels.icon",stylers:{visibility:"off"}},{featureType:"governmentlabel",elementType:"labels.icon",stylers:{visibility:"off"}},{featureType:"governmentlabel",elementType:"labels.text.fill",stylers:{color:"#2dc4bbff"}},{featureType:"governmentlabel",elementType:"labels.text.stroke",stylers:{color:"#ffffff00"}},{featureType:"restaurantlabel",elementType:"labels.text.fill",stylers:{color:"#2dc4bbff"}},{featureType:"restaurantlabel",elementType:"labels.text.stroke",stylers:{color:"#ffffff00"}},{featureType:"restaurantlabel",elementType:"labels.icon",stylers:{visibility:"off"}},{featureType:"hotellabel",elementType:"labels.icon",stylers:{visibility:"off"}},{featureType:"hotellabel",elementType:"labels.text.fill",stylers:{color:"#2dc4bbff"}},{featureType:"hotellabel",elementType:"labels.text.stroke",stylers:{color:"#ffffff00"}},{featureType:"shoppinglabel",elementType:"labels.text.fill",stylers:{color:"#2dc4bbff"}},{featureType:"shoppinglabel",elementType:"labels.text.stroke",stylers:{color:"#ffffff00"}},{featureType:"shoppinglabel",elementType:"labels.icon",stylers:{visibility:"off"}},{featureType:"lifeservicelabel",elementType:"labels.text.fill",stylers:{color:"#2dc4bbff"}},{featureType:"lifeservicelabel",elementType:"labels.text.stroke",stylers:{color:"#ffffff00"}},{featureType:"lifeservicelabel",elementType:"labels.icon",stylers:{visibility:"off"}},{featureType:"carservicelabel",elementType:"labels.text.fill",stylers:{color:"#2dc4bbff"}},{featureType:"carservicelabel",elementType:"labels.text.stroke",stylers:{color:"#ffffff00"}},{featureType:"carservicelabel",elementType:"labels.icon",stylers:{visibility:"off"}},{featureType:"financelabel",elementType:"labels.text.fill",stylers:{color:"#2dc4bbff"}},{featureType:"financelabel",elementType:"labels.text.stroke",stylers:{color:"#ffffff00"}},{featureType:"financelabel",elementType:"labels.icon",stylers:{visibility:"off"}},{featureType:"otherlabel",elementType:"labels.text.fill",stylers:{color:"#2dc4bbff"}},{featureType:"otherlabel",elementType:"labels.text.stroke",stylers:{color:"#ffffff00"}},{featureType:"otherlabel",elementType:"labels.icon",stylers:{visibility:"off"}},{featureType:"manmade",elementType:"labels.text.fill",stylers:{color:"#2dc4bbff"}},{featureType:"manmade",elementType:"labels.text.stroke",stylers:{color:"#ffffff00"}},{featureType:"transportation",elementType:"labels.text.fill",stylers:{color:"#2dc4bbff"}},{featureType:"transportation",elementType:"labels.text.stroke",stylers:{color:"#ffffff00"}},{featureType:"education",elementType:"labels.text.fill",stylers:{color:"#2dc4bbff"}},{featureType:"education",elementType:"labels.text.stroke",stylers:{color:"#ffffff00"}},{featureType:"medical",elementType:"labels.text.fill",stylers:{color:"#2dc4bbff"}},{featureType:"medical",elementType:"labels.text.stroke",stylers:{color:"#ffffff00"}},{featureType:"scenicspots",elementType:"labels.text.fill",stylers:{color:"#2dc4bbff"}},{featureType:"scenicspots",elementType:"labels.text.stroke",stylers:{color:"#ffffff00"}}]});
;sugar.define("sugar:widgets/charts/bmap-scatter/bmap-style.tsx",function(e,t){"use strict";function l(e){return e&&7===e.length?e+"FF":e}function a(e,t,l,a,s){var o=[];return t?(l&&e.forEach(function(e){o.push({featureType:e,elementType:"geometry.fill",stylers:{color:l}})}),a&&e.forEach(function(e){o.push({featureType:e,elementType:"labels.text.fill",stylers:{color:a}})}),s&&e.forEach(function(e){o.push({featureType:e,elementType:"labels.text",stylers:{fontsize:s}})})):e.forEach(function(e){o.push({featureType:e,elementType:"all",stylers:{visibility:"off"}})}),o}Object.defineProperty(t,"__esModule",{value:!0}),t.generateStyle=t.styleConfig=void 0;var s=e("sugar:utils/i18n.ts"),o=e("sugar:widgets/charts/bmap-scatter/bmap-theme/blue.ts"),i=e("sugar:widgets/charts/bmap-scatter/bmap-theme/dark.ts"),r=e("sugar:widgets/charts/bmap-scatter/bmap-theme/transport.ts"),y=e("sugar:widgets/charts/bmap-scatter/bmap-theme/white.ts"),n=e("sugar:widgets/charts/bmap-scatter/bmap-theme/dark-blue.ts"),p=e("sugar:widgets/amis-inline-switch.tsx"),u={blue:o.default,dark:i.default,transport:r.default,white:y.default,darkBlue:n.default};t.styleConfig=function(e,t){void 0===e&&(e="config"),void 0===t&&(t=!1);var l=[{type:"radios",name:e+".styleType",label:s.default("地图样式"),inline:!1,options:[{label:s.default("默认"),value:""},{label:s.default("使用地图主题样式"),value:"theme"},{label:s.default("自定义样式"),value:"custom"}]},{type:"select",name:e+".themeType",hiddenOn:e+".styleType !== 'theme'",options:[{label:s.default("交通"),value:"transport"},{label:s.default("浅色"),value:"white"},{label:s.default("深色"),value:"dark"},{label:s.default("蓝色"),value:"blue"},{label:s.default("深蓝（多层地图图表可用）"),value:"darkBlue"}]},{type:"color",name:e+".landColor",hiddenOn:e+".styleType !== 'custom'",label:s.default("陆地颜色")},{type:"color",name:e+".waterColor",hiddenOn:e+".styleType !== 'custom'",label:s.default("水系颜色")},{type:"color",name:e+".greenColor",hiddenOn:e+".styleType !== 'custom'",label:s.default("植被颜色")},{type:"color",name:e+".manmadeColor",hiddenOn:e+".styleType !== 'custom'",label:s.default("人造物颜色")},p.amisInlineSwitch(e+".showMapWaterName",s.default("显示水系名称"),e+".styleType !== 'custom'"),{type:"color",name:e+".mapWaterNameColor",hiddenOn:e+".styleType !== 'custom' || !"+e+".showMapWaterName",label:s.default("水系名称颜色")},{type:"number",name:e+".mapWaterNameSize",min:1,hiddenOn:e+".styleType !== 'custom' || !"+e+".showMapWaterName",label:s.default("水系名称文字大小")},p.amisInlineSwitch(e+".showRoad",s.default("显示道路"),e+".styleType !== 'custom'"),{type:"color",name:e+".roadColor",hiddenOn:e+".styleType !== 'custom' || !"+e+".showRoad",label:s.default("道路颜色")},{type:"color",name:e+".roadTextColor",hiddenOn:e+".styleType !== 'custom' || !"+e+".showRoad",label:s.default("道路文字颜色")},{type:"number",name:e+".roadTextSize",min:1,hiddenOn:e+".styleType !== 'custom' || !"+e+".showRoad",label:s.default("道路文字大小")},p.amisInlineSwitch(e+".showSubway",s.default("显示地铁"),e+".styleType !== 'custom'"),{type:"color",name:e+".subwayColor",hiddenOn:e+".styleType !== 'custom' || !"+e+".showSubway",label:s.default("地铁颜色")},{type:"color",name:e+".subwayTextColor",hiddenOn:e+".styleType !== 'custom' || !"+e+".showSubway",label:s.default("地铁文字颜色")},{type:"number",name:e+".subwayTextSize",min:1,hiddenOn:e+".styleType !== 'custom' || !"+e+".showSubway",label:s.default("地铁文字大小")},p.amisInlineSwitch(e+".showRailway",s.default("显示铁路"),e+".styleType !== 'custom'"),{type:"color",name:e+".railwayColor",hiddenOn:e+".styleType !== 'custom' || !"+e+".showRailway",label:s.default("铁路颜色")},p.amisInlineSwitch(e+".showPOI",s.default("显示兴趣点"),e+".styleType !== 'custom'"),{type:"color",name:e+".poiTextColor",hiddenOn:e+".styleType !== 'custom' || !"+e+".showPOI",label:s.default("兴趣点文字颜色")},{type:"number",name:e+".poiTextSize",min:1,hiddenOn:e+".styleType !== 'custom' || !"+e+".showPOI",label:s.default("兴趣点文字大小")},p.amisInlineSwitch(e+".showDistrict",s.default("显示行政区名称"),e+".styleType !== 'custom'"),{type:"color",name:e+".districtColor",hiddenOn:e+".styleType !== 'custom' || !"+e+".showDistrict",label:s.default("行政区文字颜色")},{type:"number",name:e+".districtSize",hiddenOn:e+".styleType !== 'custom' || !"+e+".showDistrict",label:s.default("行政区文字大小")}];return t||l.unshift({type:"divider"}),l},t.generateStyle=function(e){var t=[];if("theme"===e.styleType&&e.themeType&&u[e.themeType])t=u[e.themeType];else if("custom"===e.styleType){e.landColor&&t.push({featureType:"land",elementType:"geometry",stylers:{visibility:"on",color:l(e.landColor)}}),e.waterColor&&t.push({featureType:"water",elementType:"geometry",stylers:{visibility:"on",color:l(e.waterColor)}}),e.greenColor&&t.push({featureType:"green",elementType:"geometry",stylers:{visibility:"on",color:l(e.greenColor)}}),e.manmadeColor&&t.push({featureType:"manmade",elementType:"geometry",stylers:{visibility:"on",color:l(e.manmadeColor)}});var s=["highway","nationalway","provincialway","cityhighway","arterial","tertiaryway","fourlevelway","local","scenicspotsway","universityway","vacationway"];t=t.concat(a(s,e.showRoad,l(e.roadColor),l(e.roadTextColor),e.roadTextSize)),t=t.concat(a(["subway"],e.showSubway,l(e.subwayColor),l(e.subwayTextColor),e.subwayTextSize)),t=t.concat(a(["railway"],e.showRailway,l(e.railwayColor),l(e.railwayTextColor),e.railwayTextSize)),t.push({featureType:"highwaysign",elementType:"all",stylers:{visibility:"off"}},{featureType:"highwaysign",elementType:"labels.text.fill",stylers:{color:l(e.roadColor)}},{featureType:"nationalwaysign",elementType:"labels.icon",stylers:{visibility:"off"}},{featureType:"nationalwaysign",elementType:"labels.text.fill",stylers:{color:l(e.roadColor)}},{featureType:"provincialwaysign",elementType:"labels.icon",stylers:{visibility:"off"}},{featureType:"provincialwaysign",elementType:"labels.text.fill",stylers:{color:l(e.roadColor)}},{featureType:"tertiarywaysign",elementType:"labels.icon",stylers:{visibility:"off"}},{featureType:"tertiarywaysign",elementType:"labels.text.fill",stylers:{color:l(e.roadColor)}},{featureType:"subwaylabel",elementType:"labels.icon",stylers:{visibility:"off"}},{featureType:"subwaylabel",elementType:"labels.text.fill",stylers:{color:l(e.subwayColor)}}),e.showPOI?(e.poiTextColor&&t.push({featureType:"poilabel",elementType:"labels.text.fill",stylers:{color:l(e.poiTextColor)}}),e.poiTextSize&&t.push({featureType:"poilabel",elementType:"labels.text",stylers:{fontsize:e.poiTextSize}})):t.push({featureType:"poilabel",elementType:"labels",stylers:{visibility:"off"}},{featureType:"poilabel",elementType:"labels.icon",stylers:{visibility:"off"}}),e.showDistrict?(t.push({featureType:"districtlabel",elementType:"labels.icon",stylers:{visibility:"off"}},{featureType:"districtlabel",elementType:"labels.text.stroke",stylers:{opacity:0,color:"#f5a62300"}}),e.districtColor&&t.push({featureType:"districtlabel",elementType:"labels.text.fill",stylers:{color:l(e.districtColor)}}),e.districtSize&&t.push({featureType:"districtlabel",elementType:"labels.text",stylers:{fontsize:e.districtSize}})):t.push({featureType:"districtlabel",elementType:"all",stylers:{visibility:"off"}}),e.showMapWaterName?(t.push({featureType:"water",elementType:"labels",stylers:{visibility:"on"}}),e.mapWaterNameColor&&t.push({featureType:"water",elementType:"labels.text.fill",stylers:{color:l(e.mapWaterNameColor)}}),e.mapWaterNameSize&&t.push({featureType:"water",elementType:"labels.text",stylers:{fontsize:e.mapWaterNameSize}})):t.push({featureType:"water",elementType:"labels",stylers:{visibility:"off"}})}return t}});
;sugar.define("sugar:widgets/pagination.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=e("sugar:node_modules/tslib/tslib.js"),n=e("sugar:node_modules/react/index.js"),s=e("sugar:utils/common-helper.ts"),i=e("sugar:sites/amis-renderer.tsx"),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.render=function(){var e=this.props,t=e.items,a=e.maxButtons,o=void 0===a?3:a,r=e.activePage,l=e.onSelect,u=e.totalMsg;return n.createElement("div",{className:"amis-crud-toolbar-pagination"+(s.isMobile?" is-mobile":"")},u?n.createElement("div",{className:"d-inline pagination-total-msg text-primary"},u):null,n.createElement(i.default,{schema:{type:"pagination",className:"d-inline-block",showPageInput:t>9&&!s.isMobile,maxButtons:o,activePage:r,lastPage:t,onPageChange:function(e){l(e)}}}))},t}(n.Component);t.default=o});
;sugar.define("sugar:widgets/image-selector/image-selector.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=e("sugar:node_modules/tslib/tslib.js"),l=e("sugar:utils/i18n.ts"),s=e("sugar:node_modules/react/index.js"),n=e("sugar:node_modules/amis/lib/index.js"),i=e("sugar:node_modules/classnames/index.js"),o=e("sugar:widgets/pagination.tsx"),r=3,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={dialogOpen:!1,search:"",offset:0},t}return a.__extends(t,e),t.prototype.componentWillMount=function(){this.toggleDialog=this.toggleDialog.bind(this),this.changeSearch=this.changeSearch.bind(this),this.changeVal=this.changeVal.bind(this),this.onPageClick=this.onPageClick.bind(this)},t.prototype.toggleDialog=function(){this.setState({dialogOpen:!this.state.dialogOpen})},t.prototype.changeSearch=function(e){this.setState({search:e,offset:0})},t.prototype.changeVal=function(e,t){this.props.onChange(t?"":e),this.toggleDialog()},t.prototype.getTag=function(e){if(e)switch(e.toUpperCase()){case"GIF":return s.createElement("div",{className:"image-selector__selected__badge",style:{backgroundColor:"#108cee"}},"GIF");case"SVG":return s.createElement("div",{className:"image-selector__selected__badge",style:{backgroundColor:"#847AD1"}},"SVG")}return null},t.prototype.onPageClick=function(e){this.setState({offset:(e-1)*(this.props.limit||r)})},t.prototype.render=function(){var e,t=this,a=this.props,c=a.value,g=a.label,u=a.containerClassName,d=a.height,m=a.options,h=a.modalHeight,p=a.modalWidth,f=a.modalTitle,v=a.limit,_=a.searchTip,y=a.needSearch,E=a.useKey,b=this.state,C=b.dialogOpen,N=b.search,x=b.offset,k=d?d+"px":"300px",S=h?h+"px":"150px",M=p?p+"px":"200px",D=f||l.default("请选择图片"),w=c?c.split(".").pop():"",O=this.getTag(w);if(N)try{e=m.filter(function(e){for(var t=N.toUpperCase().split(" "),a=!0,l=0,s=t;l<s.length;l++){var n=s[l];if(n){var i=(e.label+e.type).toUpperCase();if(i.indexOf(n)<0){a=!1;break}}}return a})}catch(P){e=m}else e=m;var T=e.length,V=v||r,j=c;if(E){var G=m.filter(function(e){return e.value===c});G&&G.length&&(j=G[0].image)}var B=s.createElement("div",{className:"image-selector"},s.createElement("p",null,g),s.createElement("div",{className:"image-selector__selected",onClick:this.toggleDialog,style:{height:k,lineHeight:k,background:"url("+j+") #f0f3f4 no-repeat center/contain"}},s.createElement("span",{className:i("image-selector__selected__tip",{active:!j})},l.default("点击此处进行「"+l.default(j?"更换":"选择")+"」")),O?O:null));return C?s.createElement(n.Modal,{show:!0,size:"lg",backdrop:"static",contentClassName:"image-selector__modal"},s.createElement(n.Modal.Header,{showCloseButton:!0,onClose:this.toggleDialog},s.createElement(n.Modal.Title,null,D)),s.createElement(n.Modal.Body,null,s.createElement("div",{className:""+(u||"")},y?s.createElement("div",{className:"image-selector__header"},s.createElement("span",{className:"pull-left"},l.default("搜索：")),s.createElement("div",{className:"pull-left tool-btns"},s.createElement("input",{type:"text",className:"form-control",placeholder:l.default("搜索关键字以空格分隔。如：「"+(_?_:l.default("蓝色 地球 svg"))+"」"),value:N,onChange:function(e){return t.changeSearch(e.target.value)}}))):null,s.createElement("div",{className:"image-selector__body"},e.length?e.slice(x,Math.min(x+V,T)).map(function(e,a){var l=e.value===c;return s.createElement("div",{key:a,className:i("image-selector__dummy",{active:l}),onClick:function(){return t.changeVal(e.value,l)}},s.createElement("div",{style:{background:"url("+e.image+") no-repeat center/contain",height:S,width:M}},t.getTag(e.type)))}):s.createElement("p",{className:"image-selector__tip"},l.default("暂无此类别素材，我们会持续丰富素材种类。搜索关键字之间记得用空格分隔哦")))),s.createElement("div",{className:"text-center m-t-md"},s.createElement(o.default,{items:Math.floor(T/V)+(T%V?1:0),maxButtons:5,activePage:Math.floor(x/V)+1,onSelect:this.onPageClick})))):B},t.displayName="ImageSelector",t}(s.Component);t.default=c});
;sugar.define("sugar:utils/img-source-map.ts",function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.reportBackground=e.backgrounds=e.pics=e.borders=void 0;var i=t("sugar:node_modules/tslib/tslib.js");e.borders={"边框1":{url:"/static/img-templet/border-1.png",top:10,right:16,bottom:15,left:10},"边框2":{url:"/static/img-templet/border-2.png",top:10,right:16,bottom:15,left:10},"边框2-1":{url:"/static/img-templet/border-2-1.png",top:10,right:10,bottom:10,left:10},"边框10":{url:"/static/img-templet/border-121-0f05f2ce15011b2a.png",top:14,right:14,bottom:14,left:14},"边框3":{url:"/static/img-templet/border-2-647997910e4f2e40.png",top:10,right:10,bottom:10,left:10},"边框5":{url:"/static/img-templet/border-4D8PhZnr7fHiBHD2.png",top:10,right:10,bottom:10,left:10},"边框6":{url:"/static/img-templet/border-9qqu7FvN3i3ejGjx.png",top:17,right:4,bottom:4,left:36},"边框7":{url:"/static/img-templet/border-75-326aa8b5a6b87b2f.png",top:48,right:48,bottom:48,left:48},"边框8":{url:"/static/img-templet/border-93-63f1aa8a1c6516ca.png",top:35,right:35,bottom:35,left:35},"边框8-gif":{url:"/static/img-templet/border-236-7ab7e7d6ce1bc4b5.gif",top:35,right:35,bottom:35,left:35},"边框17-gif":{url:"/static/img-templet/border-229-6a0fdf839ec2ef45.gif",top:43,right:20,bottom:24,left:24},"边框19-gif":{url:"/static/img-templet/border-235-6841c1286c4094b6.gif",top:37,right:37,bottom:37,left:37},"边框9":{url:"/static/img-templet/border-120-88a3f27c6352fd96.png",top:122,right:192,bottom:63,left:207},"边框11":{url:"/static/img-templet/border-123-ddd7b5d4266a8aaa.png",top:60,right:60,bottom:60,left:60},"边框12":{url:"/static/img-templet/border-124-554d9d6ed0674ec2.png",top:40,right:40,bottom:40,left:40},"边框13":{url:"/static/img-templet/border-125-62ce2b374cfa1209.png",top:100,right:100,bottom:100,left:100},"边框14":{url:"/static/img-templet/border-7718acec67f35819.png",top:37,right:120,bottom:56,left:37},"边框14-gif":{url:"/static/img-templet/border-234-21caaaed0d132596.gif",top:37,right:120,bottom:56,left:37},"边框15":{url:"/static/img-templet/border-FL9pZhDg36ZNEGi4.png",top:50,right:50,bottom:50,left:50},"边框16":{url:"/static/img-templet/border-vVMmzK86nT24eHzC.png",top:60,right:75,bottom:60,left:75}},e.pics={"紫色圆形装饰动图gif":{url:"/static/img-templet/pic-228-2cff2e714fff18e2.gif"},"蓝色频谱音频装饰动图gif":{url:"/static/img-templet/pic-230-1abf980f5d966f30.gif"},"紫色圆形频谱音频装饰动图gif":{url:"/static/img-templet/pic-232-f5b366790d3979f7.gif"},"蓝色橙色圆形3D效果科技装饰动图gif":{url:"/static/img-templet/pic-233-e01e793cd1bdcdc9.gif"},"蓝色直线线条装饰动图gif":{url:"/static/img-templet/pic-237-dc21156e2c9fe530.gif"},"蓝色橙色标尺装饰动图gif":{url:"/static/img-templet/pic-238-0e821128f121a815.gif"},"蓝色直线科技装饰动图gif":{url:"/static/img-templet/pic-239-ce970cb4d39a64db.gif"},"蓝色边框科技装饰动图gif":{url:"/static/img-templet/pic-240-e9640eece337d0dc.gif"},"蓝色圆形3D立体透明科技图标":{url:"/static/img-templet/pic-86BKa8kymLuDfLG7.png"},"蓝色透明圆形科技图形装饰":{url:"/static/img-templet/pic-GhM7QJJFM28Z8jcP.svg"},"绿色科技电路电子透明装饰图标矢量":{url:"/static/img-templet/pic-3moMpFVj89T6bVMB.svg"},"白色绿色黄色透明圆形科技内容容器":{url:"/static/img-templet/pic-84-21292bc485c89a08.svg"},"红色灰色透明圆形六边形科技内容容器":{url:"/static/img-templet/pic-9-e2cbd920849c06fe.svg"},"蓝色透明科技直线边框装饰图标图形1":{url:"/static/img-templet/pic-27-07e1d5cca344220f.svg"},"粉色透明科技圆形内容容器":{url:"/static/img-templet/pic-46-1d3103c5e4f4b2a2.svg"},"蓝色黄色透明圆形科技多内容容器":{url:"/static/img-templet/pic-51-0da4922447ec2bed.svg"},"红色黑色透明圆形柱状装饰内容容器":{url:"/static/img-templet/pic-108-eab4f8f97693c58a.svg"},"蓝色透明矩形方形科技异形内容容器":{url:"/static/img-templet/pic-200-641cc54ae2668ab9.svg"},"蓝色黄色异形透明科技异形内容容器":{url:"/static/img-templet/pic-166-69870f0e73185f93.svg"},"蓝色黄色异形透明科技异形内容容器1":{url:"/static/img-templet/pic-165-352db3cacfdd6168.svg"},"蓝色红色透明圆形科技多内容容器":{url:"/static/img-templet/pic-215-01f168866dea4c73.svg"},"蓝色绿色黄色透明圆形科技3D图标":{url:"/static/img-templet/pic-125-ac14305bc4902088.svg"},"蓝色透明圆形科技3D图标":{url:"/static/img-templet/pic-4yvtgiMdd2c8fwn4.png"},"白色透明3D立体科技圆形图标":{url:"/static/img-templet/pic-6scio8hXYU2qCTa8.png"},"白色透明科技装饰图标":{url:"/static/img-templet/pic-e8bEx2j2Njx6YzMe.svg"},"彩色透明波浪点装饰图形图标装饰":{url:"/static/img-templet/pic-UfrKGs9JGY979pRo.svg"},"蓝色抽象透明地图地球3D立体图标":{url:"/static/img-templet/pic-157-8843d74dfcb5bb70.svg"},"彩色真实地图地球3D立体图标":{url:"/static/img-templet/pic-139-091a0b3cae26a353.png"},"蓝色紫色点状抽象透明地图地球3D立体图标":{url:"/static/img-templet/pic-142-8933834d7b2e57e4.png"},"白色点状抽象透明地图地球3D立体图标":{url:"/static/img-templet/pic-143-1471b2dcc36fdc59.png"},"蓝色点状抽象透明地图地球3D立体图标":{url:"/static/img-templet/pic-144-c93d4c577194bb71.svg"},"绿色网状抽象透明地图地球3D立体图标":{url:"/static/img-templet/pic-96-337f96e36fe9903f.svg"},"绿色线条抽象线状透明地图地球3D立体图标":{url:"/static/img-templet/pic-123-2fb2025bc0c60429.svg"},"绿色点状抽象透明地图地球3D立体图标":{url:"/static/img-templet/pic-147-8940a6a3e6cdc2b0.png"},"白色网状抽象透明地图地球3D立体图标":{url:"/static/img-templet/pic-148-efe393176a82c55d.svg"},"绿色真实地图地球3D立体图标":{url:"/static/img-templet/pic-176-3fbdfb0f2a0d46b6.svg"},"蓝色真实地图地球3D立体图标":{url:"/static/img-templet/pic-49-da7923b20ace00f4.svg"},"灰色网状抽象透明地图地球3D立体图标":{url:"/static/img-templet/pic-126-a47a0fe24cba84c7.svg"},"蓝色地图地球3D立体飞线图标":{url:"/static/img-templet/pic-77nxFJv3pkX4mpUQ.png"},"黑色地图地球3图标":{url:"/static/img-templet/pic-124-04eec188e228195f.svg"},"绿色地图透明点圆形图标":{url:"/static/img-templet/pic-aUM23LyRC6HZ9CCM.png"},"蓝色网状抽象透明地图地球3D立体图标":{url:"/static/img-templet/pic-55-79b6a45e5d4c9ea0.svg"},"蓝色网状抽象透明地图地球3D立体图标1":{url:"/static/img-templet/pic-191-7c407a8169229334.svg"},"蓝色透明科技直线边框装饰图标图形":{url:"/static/img-templet/pic-9DHkf6Cgsb7Th2Gr.svg"},"蓝色透明科技直线边框装饰图标图形3":{url:"/static/img-templet/pic-AWpRC9Qtdf8V6X4u.svg"},"蓝色透明科技直线边框装饰图标图形2":{url:"/static/img-templet/pic-d9rrvQa9PFo3Q4cH.svg"},"蓝色科技透明线条直线边框装饰图标图形":{url:"/static/img-templet/pic-NCEtF67c4xDDi4Bn.svg"},"蓝色透明科技直线线条边框图形装饰":{url:"/static/img-templet/pic-sgtd6Z3Yrc3MbTh8.svg"},"蓝色透明科技直线线条边框边角图形装饰":{url:"/static/img-templet/pic-vVX9D2Yc4F6gHDkk.svg"},"蓝色透明科技直线线条边框图形装饰2":{url:"/static/img-templet/pic-zCrpu94N77HVVzEj.svg"},"蓝色透明科技直线线条边框边角图形装饰1":{url:"/static/img-templet/pic-34-bb98078064cc875c.svg"},"蓝色透明科技直线线条边框边角图形装饰2":{url:"/static/img-templet/pic-38-b73017590f4c5f11.svg"},"蓝色黄色透明科技直线线条边框图形装饰":{url:"/static/img-templet/pic-50-31b8ee6aa9f8aadb.svg"},"蓝色透明科技圆弧线线条边框图形装饰":{url:"/static/img-templet/pic-52-83a06a6eaf7d2312.svg"},"蓝色黄色橙色透明科技直线线条刻度边框图形装饰":{url:"/static/img-templet/pic-221-b98b438e753c743b.svg"},"蓝色透明科技直线线条边框边角图形装饰3":{url:"/static/img-templet/pic-226-9ffbfc7b35d1f0cf.svg"},"蓝色透明科技直线线条边框边角图形装饰4":{url:"/static/img-templet/pic-1-0b9ab20a94567552.svg"},"蓝色透明科技折线线条边框图形装饰1":{url:"/static/img-templet/pic-2-120aa7b2dca83a6d.svg"},"蓝色透明科技三角线条边框图形装饰2":{url:"/static/img-templet/pic-6-eae8d0e0599cca62.svg"},"蓝色透明科技直线线条边框边角图形装饰5":{url:"/static/img-templet/pic-29-ae0ebef41fe61300.svg"},"蓝色透明科技线条边框图形装饰3":{url:"/static/img-templet/pic-45-b48fc090a2874d62.svg"},"白色透明电波频率脉动科技直线线条边框图形装饰":{url:"/static/img-templet/pic-132-9b13886b9c0b3372.svg"},"白色透明电波频率脉动科技直线线条边框图形装饰1":{url:"/static/img-templet/pic-137-2b4d97464e431f1b.svg"},"白色透明电波频率脉动科技直线线条边框图形装饰2":{url:"/static/img-templet/pic-138-8458be45afb4e2f5.svg"},"白色透明电波频率脉动科技直线线条边框图形装饰3":{url:"/static/img-templet/pic-140-6c1182b2c13aca2e.svg"},"白色透明电波频率脉动科技直线线条边框图形装饰4":{url:"/static/img-templet/pic-141-facc41f0f0e51831.svg"},"蓝色透明科技折线线条边框图形装饰":{url:"/static/img-templet/pic-179-508d36275fc64bd0.svg"},"蓝色透明科技折线线条边框图形装饰2":{url:"/static/img-templet/pic-180-8dae03bcaa6173b9.svg"},"灰色透明科技折线线条边框图形装饰":{url:"/static/img-templet/pic-186-f2da8e1f72ca9171.svg"},"灰色透明科技折线线条边框图形装饰1":{url:"/static/img-templet/pic-187-005708738902b64e.svg"},"蓝色透明科技折线线条边框图形装饰3":{url:"/static/img-templet/pic-199-9bad7c1391b74106.svg"},"蓝色透明科技折线线条边框图形装饰4":{url:"/static/img-templet/pic-1.png"},"蓝色透明科技折线线条边框图形装饰5":{url:"/static/img-templet/pic-2.png"},"蓝色渐变科技直线线条边框图形装饰":{url:"/static/img-templet/pic-3.png"},"灰色透明科技直线线条边框图形装饰":{url:"/static/img-templet/pic-9.png"},"黄色金色科技电路电子透明装饰图标矢量":{url:"/static/img-templet/pic-169-b8f8c4be0a2d53c7.svg"},"黄色金色科技电路电子透明装饰图标矢量1":{url:"/static/img-templet/pic-171-22b0419510763e61.svg"},"黄色金色科技电路电子透明装饰图标矢量2":{url:"/static/img-templet/pic-172-0fff6abf2aebcc1a.svg"},"蓝色科技电路电子透明装饰图标矢量内容容器":{url:"/static/img-templet/pic-173-cd67ff690490babc.svg"},"红色灰色透明圆形六边形科技内容容器1":{url:"/static/img-templet/pic-7-66aff86096decdb0.svg"},"蓝色黄色透明扇形科技内容容器":{url:"/static/img-templet/pic-53-0c47d12547b46a40.svg"},"蓝色透明圆形科技内容容器":{url:"/static/img-templet/pic-164-fb6de73e59a64ae0.svg"},"蓝色透明圆形科技内容容器1":{url:"/static/img-templet/pic-181-cea3796b23c3181d.svg"},"蓝色透明六边形科技内容容器":{url:"/static/img-templet/pic-201-18441f579c8a45cc.svg"},"蓝色橙色透明六边形科技内容容器":{url:"/static/img-templet/pic-210-b043b76f09e0c83e.svg"},"蓝色透明扇形科技内容容器":{url:"/static/img-templet/pic-225-2d470cc98271b249.svg"},"蓝色透明异形科技标题容器":{url:"/static/img-templet/pic-32-420aac906c0438fc.svg"},"蓝色透明异形科技标题容器1":{url:"/static/img-templet/pic-56-03e54e1b4b1059d3.svg"},"蓝色透明条纹异形科技标题容器":{url:"/static/img-templet/pic-43-398ce4ba45cc57b6.svg"},"蓝色透明异形圆形科技标题内容容器":{url:"/static/img-templet/pic-66-1987583dd5e62e30.svg"},"白色透明异形科技标题容器":{url:"/static/img-templet/pic-81-23e00367645be1d4.svg"},"绿色红色透明异形科技标题容器":{url:"/static/img-templet/pic-104-41f699c3a46283da.svg"},"红色透明异形圆形科技标题内容容器":{url:"/static/img-templet/pic-167-9fd826349545eaaa.svg"},"蓝色透明异形圆形科技标题内容容器1":{url:"/static/img-templet/pic-168-b18678be60e67ed0.svg"},"蓝色橙色透明异形圆形科技标题内容容器":{url:"/static/img-templet/pic-213-718b64f3032df04a.svg"},"蓝色透明异形科技标题容器2移动端":{url:"/static/img-templet/pic-11.png"},"蓝色透明异形科技标题容器2":{url:"/static/img-templet/pic-12.png"},"蓝色紫色透明条纹异形科技标题容器":{url:"/static/img-templet/pic-13.png"},"蓝色紫色透明条纹异形科技标题容器移动端":{url:"/static/img-templet/pic-14.png"},"紫色透明异形科技标题容器":{url:"/static/img-templet/nav-purple.png"},"绿色透明异形科技标题容器":{url:"/static/img-templet/nav-green.png"},"紫色透明矩形科技标题容器":{url:"/static/img-templet/title-purple.png"},"橙色透明矩形科技标题容器":{url:"/static/img-templet/title-orange.png"},"绿色箭头标题容器":{url:"/static/img-templet/arrow-green.png"},"粉色蓝色透明圆形科技图标内容容器":{url:"/static/img-templet/pic-60-e784d97a934bedde.svg"},"黄色蓝色透明圆形科技图标内容容器":{url:"/static/img-templet/pic-71-bcd98ae427e41ac4.svg"},"蓝色黄色透明圆形科技透明矢量":{url:"/static/img-templet/pic-10.svg"},"蓝色科技透明装饰圆形图标矢量":{url:"/static/img-templet/pic-2j9cxgF27LevmnVV.svg"},"蓝色透明圆形科技图标2":{url:"/static/img-templet/pic-7nsRcmid2R4aQo8B.svg"},"蓝色透明科技圆形三角形图标":{url:"/static/img-templet/pic-AkhJrUk69VyV77qY.svg"},"绿色透明圆形科技图标内容容器":{url:"/static/img-templet/pic-85-fbd9abba27acae38.svg"},"绿色透明圆形科技图标内容容器1":{url:"/static/img-templet/pic-86-1befd05f6e00cf33.svg"},"绿色透明圆形科技图标内容容器2":{url:"/static/img-templet/pic-87-af6eb9aaf69d4cc6.svg"},"绿色透明圆形科技图标内容容器3":{url:"/static/img-templet/pic-88-23a7177c804a80b7.svg"},"绿色透明圆形科技图标内容容器4":{url:"/static/img-templet/pic-89-2eb255f22a6be373.svg"},"绿色透明圆形科技图标内容容器5":{url:"/static/img-templet/pic-91-d3bc155064009f60.svg"},"绿色透明圆形科技图标内容容器6":{url:"/static/img-templet/pic-92-1da470d0f3248d53.svg"},"绿色透明圆形科技图标内容容器7":{url:"/static/img-templet/pic-93-c920a059a59a1101.svg"},"绿色透明圆形科技图标内容容器8":{url:"/static/img-templet/pic-95-eeef92d8db642b8a.svg"},"绿色透明圆形科技图标内容容器9":{url:"/static/img-templet/pic-97-f51ff4ed9582b183.svg"},"绿色透明圆形科技图标内容容器10":{url:"/static/img-templet/pic-99-4abc4eb1452d29b9.svg"},"绿色透明圆形科技图标内容容器11":{url:"/static/img-templet/pic-100-f3d8d1cf308e6045.svg"},"绿色透明圆形科技图标内容容器12":{url:"/static/img-templet/pic-101-1d3303ca27160431.svg"},"绿色透明圆形科技图标内容容器13":{url:"/static/img-templet/pic-102-650d1d49bbc3f90d.svg"},"绿色透明圆形科技图标内容容器14":{url:"/static/img-templet/pic-105-0b98f8b1c5eff91d.svg"},"蓝色透明圆形科技图标内容容器":{url:"/static/img-templet/pic-107-1cefca1222366880.svg"},"蓝色透明圆形科技图标内容容器1":{url:"/static/img-templet/pic-110-774c2e277572d7a7.svg"},"蓝色透明圆形科技图标内容容器2":{url:"/static/img-templet/pic-111-a2b8172296df62b8.svg"},"蓝色透明圆形科技图标内容容器3":{url:"/static/img-templet/pic-113-ed114f084a0dcc32.svg"},"蓝色透明圆形科技图标内容容器4":{url:"/static/img-templet/pic-114-3cb7037726e05de6.svg"},"蓝色透明圆形科技图标内容容器5":{url:"/static/img-templet/pic-116-1af468c2d3b26604.svg"},"蓝色透明圆形科技图标内容容器6":{url:"/static/img-templet/pic-117-9aaca96c31b673f2.svg"},"蓝色透明圆形科技图标内容容器7":{url:"/static/img-templet/pic-120-397a7ebdee216724.svg"},"蓝色透明圆形科技图标内容容器14":{url:"/static/img-templet/pic-Rx6skE3VN4Cg7sbv.svg"},"蓝色灰色透明圆形科技图标内容容器":{url:"/static/img-templet/pic-134-963e5094b0dba95b.png"},"透明圆形科技图标内容容器":{url:"/static/img-templet/pic-135-a0fa9e03938661a5.svg"},"灰色透明圆形科技图标内容容器":{url:"/static/img-templet/pic-136-ad9201b14eb6c652.png"},"彩色透明圆形科技图标内容容器":{url:"/static/img-templet/pic-145-21e245aedee0de09.png"},"黑色透明圆形科技图标内容容器":{url:"/static/img-templet/pic-146-8920af838646a629.png"},"蓝色透明圆形科技图标内容容器8":{url:"/static/img-templet/pic-149-b32beb8fd134fc54.svg"},"蓝色白色透明圆形科技图标内容容器15":{url:"/static/img-templet/pic-156-062a14b6e991e615.svg"},"绿色色透明圆形科技图标内容容器9":{url:"/static/img-templet/pic-159-fb51c15fde89ef4e.svg"},"蓝色透明圆形科技图标内容容器10":{url:"/static/img-templet/pic-161-0fa07c12b35c24bc.svg"},"蓝色透明圆形科技图标内容容器11":{url:"/static/img-templet/pic-162-bbb5036fa6d70cb8.svg"},"蓝色透明圆形科技图标内容容器12":{url:"/static/img-templet/pic-163-c6d2a5a97de8afdd.svg"},"黑色透明圆形科技图标内容容器1":{url:"/static/img-templet/pic-188-cf68ce857c5d2132.svg"},"蓝色橙色透明圆形科技图标内容容器":{url:"/static/img-templet/pic-212-ad675474e3a7d09e.svg"},"蓝色橙色透明圆形科技图标内容容器1":{url:"/static/img-templet/pic-216-50f3f5a9591c7434.svg"},"蓝色橙色透明圆形科技图标内容容器2":{url:"/static/img-templet/pic-218-5ecac56bde35e339.svg"},"蓝色透明圆形科技图标内容容器13":{url:"/static/img-templet/pic-220-086976b26747709b.svg"},"蓝色橙色透明圆形科技图标内容容器3":{url:"/static/img-templet/pic-222-45417b8ce51e5cd3.svg"},"蓝色橙色透明圆形科技图标内容容器4":{url:"/static/img-templet/pic-223-0b778807c1bb67c7.svg"},"白色透明圆形科技图标内容容器1":{url:"/static/img-templet/pic-158-372f8fd07356909e.svg"},"白色透明圆形科技图标内容容器2":{url:"/static/img-templet/pic-151-e2738068673585a6.svg"},"白色透明圆形科技图标内容容器3":{url:"/static/img-templet/pic-82-876dc97d669e605b.svg"},"白色透明圆形科技图标内容容器4":{url:"/static/img-templet/pic-10-0c8389df530a1f47.svg"},"白色透明圆形科技图标内容容器5":{url:"/static/img-templet/pic-11-a7b79f03819b1ddc.svg"},"白色透明圆形科技图标内容容器6":{url:"/static/img-templet/pic-12-18bee672b5372661.svg"},"白色透明圆形科技图标内容容器7":{url:"/static/img-templet/pic-15-e7bd6f9039099707.svg"},"白色透明圆形科技图标内容容器8":{url:"/static/img-templet/pic-16-cf89d109de8c597b.svg"},"白色透明圆形科技图标内容容器9":{url:"/static/img-templet/pic-17-6ac25079cb528b83.svg"},"白色透明圆形科技图标内容容器10":{url:"/static/img-templet/pic-18-c2a113c97bec03a1.svg"},"白色透明圆形科技图标内容容器11":{url:"/static/img-templet/pic-19-4a63c742183b7ae4.svg"},"白色透明圆形科技图标内容容器12":{url:"/static/img-templet/pic-20-313241f90bd9ec85.svg"},"白色透明圆形科技图标内容容器13":{url:"/static/img-templet/pic-21-e0398326340ae91a.svg"},"白色透明圆形科技图标内容容器14":{url:"/static/img-templet/pic-22-804854bdf2036602.svg"},"白色透明圆形科技图标内容容器15":{url:"/static/img-templet/pic-23-eb914baa717970db.svg"},"白色透明圆形科技图标内容容器16":{url:"/static/img-templet/pic-25-5dfbba4b28fd7ced.svg"},"蓝色黄色橙色透明圆形科技图标内容容器":{url:"/static/img-templet/pic-24-6c972ffdc6eef04b.svg"},"蓝色黄色橙色透明圆形科技图标内容容器1":{url:"/static/img-templet/pic-28-fb84e019b9bdb301.svg"},"蓝色黄色橙色透明圆形科技图标内容容器2":{url:"/static/img-templet/pic-31-49e8f158592534a2.svg"},"蓝色黄色橙色透明圆形科技图标内容容器3":{url:"/static/img-templet/pic-36-5521e112f6ac21cc.svg"},"蓝色黄色橙色透明圆形科技图标内容容器4":{url:"/static/img-templet/pic-39-3365c60858bb3739.svg"},"蓝色黄色橙色透明圆形科技图标内容容器5":{url:"/static/img-templet/pic-40-60c825b4f1220635.svg"},"蓝色黄色橙色透明圆形科技图标内容容器6":{url:"/static/img-templet/pic-41-6c197a1f3fd39f66.svg"},"蓝色黄色橙色透明圆形科技图标内容容器7":{url:"/static/img-templet/pic-42-2b7dabd8042669a7.svg"},"蓝色绿色透明三圆形内容容器":{url:"/static/img-templet/circle-three.png"},"蓝色透明圆形科技图标装饰":{url:"/static/img-templet/pic-6EuNuYY8tzmZTB38.png"},"蓝色圆形透明科技图标装饰":{url:"/static/img-templet/pic-k4Ko7fAZvg7kK2wQ.svg"},"蓝色圆形透明科技装饰图标":{url:"/static/img-templet/pic-s8HUxG6zkctQH64Z.svg"},"蓝色圆形透明科技装饰图标1":{url:"/static/img-templet/pic-115-2c4fac34a2f197e2.svg"},"蓝色圆形透明科技装饰图标2":{url:"/static/img-templet/pic-119-e1c730b10d3d61bb.svg"},"绿色橙色圆形透明科技装饰图标":{url:"/static/img-templet/pic-128-bc885985a9ca5567.svg"},"绿色橙色圆形透明科技装饰图标1":{url:"/static/img-templet/pic-129-2bfa8c3c2ab4abf1.svg"},"绿色橙色圆形透明科技装饰图标2":{url:"/static/img-templet/pic-130-41c09df5eb0fb173.svg"},"蓝色黄色圆形透明科技装饰图标":{url:"/static/img-templet/pic-174-0d5bd929901a81e0.svg"},"蓝色黄色圆形透明科技装饰图标1":{url:"/static/img-templet/pic-185-85c3c49c140a02fc.svg"},"绿色橙色圆形透明科技装饰图标3":{url:"/static/img-templet/pic-131-7381438346d9d5bd.svg"},"蓝色黄色圆形透明科技装饰图标2":{url:"/static/img-templet/pic-0-e2c04ad2159a7e94.svg"},"蓝色黄色圆形透明科技装饰图标3":{url:"/static/img-templet/pic-13-4336d40c1466ebb9.svg"},"蓝色黄色圆形透明科技装饰图标4":{url:"/static/img-templet/pic-30-d49e73f6f987589e.svg"},"绿色圆形透明科技装饰图标":{url:"/static/img-templet/pic-98-b9e8b5357eedec65.svg"},"绿色圆形透明科技装饰图标1":{url:"/static/img-templet/pic-8-198f394afa2fc518.svg"},"白色圆形透明科技装饰图标":{url:"/static/img-templet/pic-150-98b68ff152ccab34.svg"},"灰色圆形透明科技装饰图标":{url:"/static/img-templet/pic-170-7175d5b35cf6b39d.svg"},"灰色圆形透明科技装饰图标1":{url:"/static/img-templet/pic-177-a0cc458b90626397.svg"},"灰色圆形透明科技装饰图标2":{url:"/static/img-templet/pic-178-c35393468316dbbb.svg"},"蓝色圆形透明科技装饰图标3":{url:"/static/img-templet/pic-192-bdf02653c9ba19a9.svg"},"蓝色圆形透明科技装饰图标4":{url:"/static/img-templet/pic-194-22f90432f2fa547a.svg"},"蓝色圆形透明科技装饰图标5":{url:"/static/img-templet/pic-195-1e76330e19d0c984.svg"},"蓝色黄色圆形透明科技装饰图标5":{url:"/static/img-templet/pic-196-c38940ab17a3601b.svg"},"蓝色圆形透明科技装饰图标6":{url:"/static/img-templet/pic-197-722b800c19dae04f.svg"},"蓝色圆形透明科技装饰图标7":{url:"/static/img-templet/pic-198-65992fd8f5243196.svg"},"蓝色黄色透明科技3D立体圆形图标":{url:"/static/img-templet/pic-ak77ojdPz6y6xLgM.svg"},"红色蓝色绿色透明3D立体椭圆形科技图标图形":{url:"/static/img-templet/pic-PMx4yFtQ9Bwk24Ye.png"},"绿色橙色透明科技3D立体圆形图标":{url:"/static/img-templet/pic-127-a88e3546cdc09d2f.svg"},"绿色橙色透明科技3D立体圆形图标1":{url:"/static/img-templet/pic-133-e53efaa2142a941c.svg"},"绿色橙色透明科技3D立体圆形图标2":{url:"/static/img-templet/pic-76-11a3481aa07a64cd.svg"},"绿色透明科技3D立体圆形图标":{url:"/static/img-templet/pic-78-b9d8ee071b7ebd10.svg"},"绿色橙色透明科技3D立体圆形图标3":{url:"/static/img-templet/pic-79-e3f84b3639741ab0.svg"},"白色透明科技3D立体圆形图标":{url:"/static/img-templet/pic-122-73aa4f39f6e796bd.svg"},"绿色橙色透明科技3D立体圆形图标4":{url:"/static/img-templet/pic-80-001ba9a191f37c19.svg"},"绿色橙色透明科技3D立体圆形图标5":{url:"/static/img-templet/pic-26-cda6b50c1329139b.svg"},"蓝色透明科技图形线条装饰":{url:"/static/img-templet/pic-g2N6DyaQF6LPAs4B.png"},"蓝色黄色灰色科技圆形透明装饰":{url:"/static/img-templet/pic-112-a8c845277ebef04c.svg"},"蓝色透明六边形背景":{url:"/static/img-templet/pic-207-69a192eba784e360.svg"},"蓝色点状科技装饰":{url:"/static/img-templet/pic-37-633bb82ebc9b25e6.svg"},"橙色透明圆形科技装饰":{url:"/static/img-templet/pic-48-c1a5eef07b5d5425.svg"},"绿色透明圆形科技装饰":{url:"/static/img-templet/pic-90-68cde83e64dea400.svg"},"白色透明圆形科技装饰":{url:"/static/img-templet/pic-94-3c2bbf3b334c30d7.svg"},"蓝色透明圆形科技装饰":{url:"/static/img-templet/pic-103-ca39c088b6670cb7.svg"},"蓝色透明圆形科技装饰1":{url:"/static/img-templet/pic-106-cc56afa714949530.svg"},"绿色橙色透明圆形科技装饰":{url:"/static/img-templet/pic-121-c025ba5fee8e49dc.svg"},"蓝色白色透明圆形矩形科技装饰内容容器":{url:"/static/img-templet/pic-153-4b325ac603d45e98.svg"},"绿色白色透明圆形矩形科技装饰内容容器":{url:"/static/img-templet/pic-154-16c68d2f29f5807f.svg"},"蓝色白色透明圆形科技装饰内容容器":{url:"/static/img-templet/pic-155-0dfc47db174d5178.svg"},"蓝色粉色白色透明科技装饰":{url:"/static/img-templet/pic-175-35866228a0107071.svg"},"蓝色灰色透明圆形科技装饰内容容器":{url:"/static/img-templet/pic-203-5b445857587df025.svg"},"蓝色橙色透明波科技装饰":{url:"/static/img-templet/pic-211-447213f9bd0e126a.svg"},"白色透明科技装饰":{url:"/static/img-templet/pic-118-d604686a4668f382.svg"},"蓝色橙色透明正弦波科技装饰1":{url:"/static/img-templet/pic-44-f97d63699092a7e7.svg"},"灰色透明六边形背景":{url:"/static/img-templet/pic-77-0f404419b514713d.svg"},"蓝色红色透明圆形科技装饰内容容器":{url:"/static/img-templet/pic-204-514533d70da418f5.svg"},"蓝色红色透明网状科技装饰":{url:"/static/img-templet/pic-219-4cb48f0a3b6abef6.svg"},"透明蓝色网格科技装饰":{url:"/static/img-templet/map-square.png"},"紫色渐变四格科技装饰":{url:"/static/img-templet/area-purple.png"},"金色透明底部装饰城市楼图形":{url:"/static/img-templet/pic-rx8P7K2RLhNKMqY8.png"},"金色黑色透明圆形科技装饰内容容器":{url:"/static/img-templet/pic-202-348bab7afad0c590.svg"},"蓝色橙色六边形透明科技装饰":{url:"/static/img-templet/pic-205-9858b2081c5f1179.svg"},"蓝色橙色透明科技装饰":{url:"/static/img-templet/pic-208-42a0647d05bd7889.svg"},"蓝色橙色透明科技装饰1":{url:"/static/img-templet/pic-209-577587344e2f831e.svg"},"蓝色橙色透明科技装饰2":{url:"/static/img-templet/pic-214-26c11c2bbee87864.svg"},"蓝色透明科技装饰":{url:"/static/img-templet/pic-4-5074ded2524b8653.svg"},"蓝色透明科技装饰1":{url:"/static/img-templet/pic-5-37346ef73b29ddab.svg"},"蓝色矩形圆形透明科技装饰":{url:"/static/img-templet/pic-33-cb0b9d6e886347d1.svg"},"蓝色透明科技装饰2":{url:"/static/img-templet/pic-35-57b10f7af50c0760.svg"},"蓝色 动物 图标装饰":{url:"/static/img-templet/pic-54-9bf61eccdb1f08a9.svg"},"蓝色 盾牌 图标装饰":{url:"/static/img-templet/pic-57-cda46342106d6872.svg"},"蓝色 警告 图标装饰":{url:"/static/img-templet/pic-58-de1e31cd28b911ae.svg"},"蓝色 面包 图标装饰":{url:"/static/img-templet/pic-59-55c75b5996a78bf9.svg"},"蓝色 钩子 图标装饰":{url:"/static/img-templet/pic-61-8f520b384e4681f6.svg"},"蓝色 放射 图标装饰":{url:"/static/img-templet/pic-62-cdd1897181c725df.svg"},"蓝色 禁止 图标装饰":{url:"/static/img-templet/pic-63-5b5a09ecc00f9a22.svg"},"蓝色 齿轮 图标装饰":{url:"/static/img-templet/pic-64-08e131d1f602e788.svg"},"蓝色 闪电 图标装饰":{url:"/static/img-templet/pic-65-de27a00aa86ae8bb.svg"},"蓝色 标志 图标装饰":{url:"/static/img-templet/pic-67-6ed08002e9cadc17.svg"},"蓝色 柱状 图标装饰":{url:"/static/img-templet/pic-68-6c80fe43f37eec71.svg"},"蓝色 机器人飞船 图标装饰":{url:"/static/img-templet/pic-69-327e43d697e1454c.svg"},"蓝色 王冠 图标装饰":{url:"/static/img-templet/pic-70-434cac11d12141f4.svg"},"蓝色 靶子 图标装饰":{url:"/static/img-templet/pic-72-dab4640c78a9ca3c.svg"},"蓝色 火焰 图标装饰":{url:"/static/img-templet/pic-73-6e06c13b7bd5f9b1.svg"},"蓝色 堆叠 图标装饰":{url:"/static/img-templet/pic-74-78b941bb0fb55756.svg"},"蓝色 试剂 图标装饰":{url:"/static/img-templet/pic-75-9cc68e54f44122dd.svg"},"灰色图标装饰":{url:"/static/img-templet/pic-182-2cf86f77883f9ad9.svg"},"蓝色万花筒透明图标装饰":{url:"/static/img-templet/pic-190-12096598809eca43.svg"},"蓝色地球透明图标装饰":{url:"/static/img-templet/pic-193-c6fe2f0bc2f7150b.svg"},"白色透明百度云图标文字":{url:"/static/img-templet/pic-8.png"},"紫色图标文件文档透明":{url:"/static/img-templet/pic-4.png"},"橙色透明灯泡图标":{url:"/static/img-templet/pic-5.png"},"红色闪电图标透明":{url:"/static/img-templet/pic-6.png"},"绿色闪电图标透明":{url:"/static/img-templet/pic-7.png"}},e.backgrounds={"深色蓝色简约":{url:"/static/img-templet/background-1.png"},"深色蓝色网格标题":{url:"/static/img-templet/background-2.png"},"深色蓝色网格":{url:"/static/img-templet/background-3.png"},"深色蓝色星空":{url:"/static/img-templet/background-zKvVf3rb7brY6rK8.jpg"},"深色黑色星空星球地球":{url:"/static/img-templet/background-g4Q9Ar2kRDRpr8yK.jpg"},"深色紫色蓝色地球地图":{url:"/static/img-templet/background-88VwuczRK2Rx8iRx.jpg"},"深色渐变星空":{url:"/static/img-templet/background-49uxqXBm2G2jQqod.jpg"},"深色黑色金色标题":{url:"/static/img-templet/background-44cWxfnyxe4Vj3XF.jpg"},"透明":{url:"/static/img-templet/background-4.png"},"深色白色线条隧道穿越科技":{url:"/static/img-templet/background-0-607ef3b181b1ba9a.jpg"},"深色蓝色地球科技":{url:"/static/img-templet/background-1-41949a72a05e60d0.jpg"},"深色蓝色地球科技1":{url:"/static/img-templet/background-2-6dfcf39aa56ca711.jpg"},"深色金色蓝色线条":{url:"/static/img-templet/background-3-647572d6c5cce669.jpg"},"深色蓝色金色地球地图":{url:"/static/img-templet/background-6-aa4b2b1f271ad50a.jpg"},"深色蓝色白色线条宽屏":{url:"/static/img-templet/background-4-3a9445e651481957.jpg"},"深色红色科技线条宽屏":{url:"/static/img-templet/background-5-f6e7276179ee0caf.jpg"},"深色蓝色白色科技地球星空移动端":{url:"/static/img-templet/background-5.png"},"深色蓝色白色科技地球星空":{url:"/static/img-templet/background-6.png"},"深色蓝色红色圆形光点光线网格移动端":{url:"/static/img-templet/background-7.png"},"深色蓝色红色圆形光点光线网格":{url:"/static/img-templet/background-8.png"},"深色蓝色方形光点网格移动端":{url:"/static/img-templet/background-9.png"},"深色蓝色方形光点网格":{url:"/static/img-templet/background-10.png"},"深色蓝色星空科技标题容器":{url:"/static/img-templet/background-11.png"},"深色蓝色星空科技标题容器移动端":{url:"/static/img-templet/background-12.png"},"深色蓝色中国地图科技标题容器":{url:"/static/img-templet/background-13.png"},"深色蓝色中国地图科技标题容器移动端":{url:"/static/img-templet/background-14.png"},"深色蓝色地球图表容器科技":{url:"/static/img-templet/background-15.png"},"深色蓝色光点水滴唯美柔光网格标题容器科技":{url:"/static/img-templet/background-16.png"},"深色城市商圈背景三维":{url:"/static/img-templet/background-17.png"},"深蓝色小方格":{url:"/static/img-templet/background-square.png"}},e.reportBackground=i.__assign({"report-background-0-d3cd7acdef7eb9e6":{url:"/static/img-templet/report-background-0-d3cd7acdef7eb9e6.jpg"},"report-background-7-facb9606e23a7991":{url:"/static/img-templet/report-background-7-facb9606e23a7991.jpg"},"report-background-4-d2caa2423196efb8":{url:"/static/img-templet/report-background-4-d2caa2423196efb8.jpg"},"report-background-3-8bc63b34eef4961c":{url:"/static/img-templet/report-background-3-8bc63b34eef4961c.jpg"},"report-background-12-3fed03afa6446019":{url:"/static/img-templet/report-background-12-3fed03afa6446019.jpg"},"report-background-11-8ff22c718b1de031":{url:"/static/img-templet/report-background-11-8ff22c718b1de031.jpg"},"report-background-14-8ff13f3d5a883a2b":{url:"/static/img-templet/report-background-14-8ff13f3d5a883a2b.jpg"},"report-background-13-8959a419ef0fb766":{url:"/static/img-templet/report-background-13-8959a419ef0fb766.jpg"},"report-background-1-862420431fa4bdf4":{url:"/static/img-templet/report-background-1-862420431fa4bdf4.jpg"},"report-background-2-76672ba25c655854":{url:"/static/img-templet/report-background-2-76672ba25c655854.jpg"},"report-background-10-40051d20bf324f91":{url:"/static/img-templet/report-background-10-40051d20bf324f91.jpg"},"report-background-5-d03e769de6ea30f2":{url:"/static/img-templet/report-background-5-d03e769de6ea30f2.png"},"report-background-6-8ecd4a7e8d64edd9":{url:"/static/img-templet/report-background-6-8ecd4a7e8d64edd9.jpg"},"report-background-8-f9dcdbc1e07c2fa3":{url:"/static/img-templet/report-background-8-f9dcdbc1e07c2fa3.jpg"}},e.backgrounds)});
;sugar.define("sugar:widgets/sub-chart-ctrl/sub-chart-ctrl-item.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=e("sugar:node_modules/tslib/tslib.js"),r=e("sugar:utils/i18n.ts"),n=e("sugar:node_modules/react/index.js"),i=e("sugar:node_modules/amis/lib/index.js"),s=e("sugar:widgets/confirm.tsx"),o=e("sugar:node_modules/classnames/index.js"),l=e("sugar:widgets/dnd-sort.tsx"),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.onToggleHide=function(e,t){void 0===t&&(t=!1),this.props.chartEntity.setSubChartConfig(e,{hide:t})},t.prototype.onSelectSubChart=function(e){this.props.chartHub.setChartConfigData(a.__assign(a.__assign({},this.props.chartHub.configData),{subChartConfigKey:e}))},t.prototype.onDelete=function(e,t){var a=this.props,n=a.chartEntity,o=(a.chartHub,n.config.subChartConfig||{});return Object.keys(o).length<=1?void i.toast.error(r.default("不能删除最后一个子组件")):void s.confirm(r.default("确定要删除子组件「"+t+"」？与本组件相关的下钻和联动都会被删除")).then(function(){n.deleteSubChart(e)})},t.prototype.render=function(){var e=this,t=this.props,a=t.subChartConfig,s=t.isActive,l=t.subChartTypeName,u=t.handleChangeName,c=t.isDragging;return n.createElement("div",{className:o("sub-chart-ctrl__list__line",{isActive:s,isDragging:c})},n.createElement(i.TooltipWrapper,{tooltip:l,placement:"right"},n.createElement("div",{className:"sub-chart-ctrl__name pull-left",onClick:function(){return e.onSelectSubChart(a.key)}},a.name)),n.createElement("div",{className:"sub-chart-ctrl__tool-button pull-right"},n.createElement(i.TooltipWrapper,{tooltip:r.default("编辑状态下隐藏子组件"),placement:"left"},n.createElement("i",{className:"fa fa-eye"+(a.hide?"-slash":""),onClick:function(){return e.onToggleHide(a.key,!a.hide)}})),n.createElement(i.TooltipWrapper,{tooltip:r.default("编辑名称"),placement:"bottom"},n.createElement("i",{className:"fa fa-edit",onClick:function(){return u(a.key,a.name)}})),n.createElement(i.TooltipWrapper,{tooltip:r.default("删除"),placement:"bottom"},n.createElement("i",{className:"fa fa-trash",onClick:function(){return e.onDelete(a.key,a.name)}}))))},t.displayName="SubChartCtrlItem",t=a.__decorate([l.default("subChartCtrlItem")],t)}(n.Component);t.default=u});
;sugar.define("sugar:widgets/sub-chart-ctrl/sub-chart-ctrl.tsx",function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=t("sugar:node_modules/tslib/tslib.js"),n=t("sugar:utils/i18n.ts"),r=t("sugar:node_modules/react/index.js"),o=t("sugar:node_modules/amis/lib/index.js"),s=t("sugar:widgets/charts/chart-manager.tsx"),i=t("sugar:node_modules/classnames/index.js"),l=t("sugar:widgets/debounce-text.tsx"),c=t("sugar:widgets/sub-chart-ctrl/sub-chart-ctrl-item.tsx"),u=t("sugar:widgets/editor/toolbar.tsx"),d=t("sugar:widgets/product-type/product-type-modal.tsx"),h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.state={dialogOpen:!1,nowName:"",subChartKey:"",mini:!1},e}return a.__extends(e,t),e.prototype.componentWillMount=function(){this.toggleDialog=this.toggleDialog.bind(this),this.onAdd=this.onAdd.bind(this),this.toggleChangeNameDialog=this.toggleChangeNameDialog.bind(this),this.onDroped=this.onDroped.bind(this),this.onMoving=this.onMoving.bind(this)},e.prototype.onAdd=function(t){return u.canUseChart(t)?(this.props.chartEntity.addSubChart(t),void this.toggleDialog()):void d.showUpdate("product-type-chart")},e.prototype.toggleDialog=function(){this.setState({dialogOpen:!this.state.dialogOpen})},e.prototype.toggleCtrl=function(){this.setState({mini:!this.state.mini})},e.prototype.toggleChangeNameDialog=function(t,e){this.setState(t&&e?{subChartKey:t,nowName:e}:{subChartKey:"",nowName:""})},e.prototype.changeName=function(t,e){if(e){if(e.length>15)return void o.toast.error(n.default("子组件名称需小于15个字"));this.props.chartEntity.setSubChartConfig(t,{name:e}),this.setState({subChartKey:"",nowName:""})}},e.prototype.changeNameInput=function(t){this.setState({nowName:t})},e.prototype.onMoving=function(t,e){this.props.chartEntity.changeLayerIndex(t,e)},e.prototype.onDroped=function(){},e.prototype.renderSubChartList=function(){var t=this,e=this.props,a=e.chartEntity,n=e.chartHub,o=[],i=a.config.subChartConfig||{};for(var l in i)o.push(i[l]);o.sort(function(t,e){return t.order-e.order});var u="",d=o.map(function(e,o){var i=!1;e.key===n.configData.subChartConfigKey?i=!0:n.configData.subChartConfigKey||0!==e.order||(i=!0),i&&(u=e.name);var l=s.getChartByType(a.type),d="";return l&&l.subCharts&&l.subCharts[e.type]&&(d=l.subCharts[e.type].name||""),r.createElement(c.default,{chartEntity:a,chartHub:n,subChartConfig:e,subChartTypeName:d,isActive:i,handleChangeName:t.toggleChangeNameDialog,index:o,key:e.key,id:e.key,onMoving:t.onMoving,onDroped:t.onDroped})});return{activeName:u,finalRes:d}},e.prototype.renderSubChartItem=function(){var t=this,e=[],a=this.props.chartWidget.subCharts,n=150,o=150;if(a&&"object"==typeof a){var s=function(s){var l=a[s];e.push(r.createElement("div",{key:s,className:"sub-chart-ctrl__modal__add__item",onClick:function(){return t.onAdd(s)}},r.createElement("div",{className:i("sub-chart__icon",l.imgClassName),style:{height:n,width:o}},u.canUseChart(s)?null:r.createElement("div",{className:"sub-chart__icon__forbidden"},r.createElement("i",{className:"fa fa-lock","aria-hidden":"true"}))),r.createElement("div",{className:"item-name"},l.name)))};for(var l in a)s(l)}return e},e.prototype.render=function(){var t=this,e=this.state,a=e.dialogOpen,s=e.subChartKey,c=e.nowName,u=e.mini,d=this.renderSubChartList(),h="";return d.activeName&&(h+=d.activeName),r.createElement("div",{className:"sub-chart-ctrl"},r.createElement("div",{className:"sub-chart-ctrl__title"},r.createElement("div",{className:"pull-left"},r.createElement("span",{className:"sub-chart-ctrl__title__1"},n.default("子组件管理：")),r.createElement("span",{className:"sub-chart-ctrl__title__2",onClick:function(){return t.toggleCtrl()}},h)),r.createElement("div",{className:"sub-chart-ctrl__tool-button pull-right"},r.createElement(o.TooltipWrapper,{tooltip:n.default("新增子组件"),placement:"bottom"},r.createElement("i",{className:"fa fa-plus",onClick:this.toggleDialog})),r.createElement(o.TooltipWrapper,{tooltip:n.default("「"+n.default(u?"展开":"收起")+"」子组件管理"),placement:"bottom"},r.createElement("i",{className:"fa fa-caret-"+(u?"down":"up"),onClick:function(){return t.toggleCtrl()}})))),r.createElement("div",{className:i("sub-chart-ctrl__list",{mini:u})},r.createElement("div",null,d.finalRes),a?r.createElement(o.Modal,{show:!0,size:"lg",backdrop:"static",contentClassName:"sub-chart-ctrl__modal"},r.createElement(o.Modal.Header,{showCloseButton:!0,onClose:this.toggleDialog},r.createElement(o.Modal.Title,null,n.default("请选择要添加的子组件类型"))),r.createElement(o.Modal.Body,null,r.createElement("div",{className:"sub-chart-ctrl__modal__add"},this.renderSubChartItem()))):null,s?r.createElement(o.Modal,{show:!0,backdrop:"static",contentClassName:"sub-chart-ctrl__modal"},r.createElement(o.Modal.Header,{showCloseButton:!0,onClose:function(){return t.toggleChangeNameDialog()}},r.createElement(o.Modal.Title,null,n.default("请输入新的子组件名称"))),r.createElement(o.Modal.Body,null,r.createElement(l.default,{key:"colId-input",value:c,notReceiveProps:!0,onChange:function(e){return t.changeNameInput(e)},placeholder:n.default("请输入新的子组件名称")})),r.createElement(o.Modal.Footer,null,r.createElement(o.Button,{level:"primary",onClick:function(){return t.changeName(s,c)}},n.default("确定")))):null))},e.displayName="SubChartCtrl",e}(r.Component);e.default=h});
;sugar.define("sugar:widgets/ctrl-panel/chart-zoom-ctrl.tsx",function(e,l){"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.chartZoomCtrl=void 0;var a=e("sugar:utils/i18n.ts"),o=e("sugar:widgets/amis-inline-switch.tsx");l.chartZoomCtrl=[o.amisInlineSwitch("config.chartZoom.open",a.default("开启图表最大化展示")),{type:"color",format:"rgba",name:"config.chartZoom.dialogBackgroundColor",label:a.default("弹窗背景色"),visibleOn:"config.chartZoom && config.chartZoom.open"},{type:"select",name:"config.chartZoom.dialogSize",label:a.default("弹窗尺寸"),visibleOn:"config.chartZoom && config.chartZoom.open",value:"full",options:[{label:a.default("小"),value:"xs"},{label:a.default("标准"),value:"md"},{label:a.default("中"),value:"lg"},{label:a.default("大"),value:"xl"},{label:a.default("全屏"),value:"full"}]},{type:"select",name:"config.chartZoom.centering",label:a.default("弹窗居中方式"),visibleOn:"config.chartZoom && config.chartZoom.open",value:"center",options:[{label:a.default("左对齐"),value:"left"},{label:a.default("居中"),value:"center"},{label:a.default("右对齐"),value:"right"}]}]});
;sugar.define("sugar:widgets/charts/smart-chart/chart-recommend-list.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=e("sugar:node_modules/tslib/tslib.js"),n=e("sugar:utils/i18n.ts"),r=e("sugar:node_modules/amis/lib/index.js"),i=e("sugar:node_modules/classnames/index.js"),s=e("sugar:node_modules/react/index.js"),o=e("sugar:widgets/charts/chart-manager.tsx"),c=e("sugar:utils/data-model-helper.ts"),l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={showList:!1,tip:null},t}return a.__extends(t,e),t.prototype.componentWillMount=function(){this.showList=this.showList.bind(this),this.hideList=this.hideList.bind(this)},t.prototype.showList=function(){this.setState({showList:!0});var e=this.props,t=e.hubConfigData,a=e.chart,n=t.recommendChartEigenList;n||(n=a.getRecommendChartList())},t.prototype.hideList=function(){this.setState({showList:!1})},t.prototype.handleMouseOver=function(e,t,a){var r=[];r.push(1===t.length?s.createElement("div",{key:"need1"},n.default("字段需求：")):s.createElement("div",{key:"need2"},n.default("字段满足下列需求之一：")));for(var i=0,o=t;i<o.length;i++){var l=o[i],m=a.includes(l);r.push(s.createElement("li",{key:l,className:m?"text-info":"text-danger"},c.getMinDemandOfChartEigen(e[l])))}this.setState({tip:r})},t.prototype.handleMouseOut=function(){this.setState({tip:null})},t.prototype.switchChartType=function(e,t,a,n){t&&e.switchChartTypeInSmartChart(a,n)},t.prototype.getRecommendList=function(){var e=this,t=this.props,a=t.value,n=t.hubConfigData,c=t.chart,l=n.recommendChartEigenList;if(!l)return s.createElement(r.Spinner,{overlay:!0});var m=[];if(l&&l.length){for(var h=o.getChartEigens(),d=o.getChartEigenMap(),u=o.getCharts().map(function(e){return e.type}),p=0,v=u;p<v.length;p++){var f=v[p],g=d[f];if(g)for(var _=Object.keys(g).sort(),y=function(t){for(var n=g[t],r=+t,d=-1===r?o.getChartByType(f):o.getChartVariant(f,r),u=!1,p=[],v=0,_=n;v<_.length;v++)for(var y=_[v],E=0,C=l;E<C.length;E++){var N=C[E];if(N.originalChartEigenIndex===y){u=!0,p.push(N);break}}var L=!1;a.type===f&&(void 0===a.variantIndex&&-1===r?L=!0:a.variantIndex===r&&(L=!0)),d&&m.push(s.createElement("div",{className:i("chart-recommend__chart-list__item",{disabled:!u,chosen:L}),key:f+t,onClick:function(){return e.switchChartType(c,u,d,p[0])},onMouseOver:function(){return e.handleMouseOver(h,n,p.map(function(e){return e.originalChartEigenIndex}))},onMouseOut:function(){return e.handleMouseOut()}},s.createElement("div",{className:"tool-item__icon "+d.iconClassName}),s.createElement("div",{className:"tool-item__name"},d.name)))},E=0,C=_;E<C.length;E++){var N=C[E];y(N)}}return m}return null},t.prototype.render=function(){var e=this,t=this.props,a=t.value,i=t.chart,c=this.state.tip,l=s.createElement("div",{className:"text-center text-info"},n.default("将字段拖入下面任意虚线框获取推荐结果"));if(a&&a.type){var m=void 0===a.variantIndex?o.getChartByType(a.type):o.getChartVariant(a.type,a.variantIndex);m&&(l=[s.createElement(r.TooltipWrapper,{key:"title",tooltip:n.default("如果您确定使用【「"+m.name+"」】对数据进行展示<br>"+("可以将图表转换为【「"+m.name+"」】进行进一步的数据和样式配置")),placement:"left"},s.createElement(r.Button,{className:"chart-recommend__convert",level:"info",onClick:function(){return i.switchChartTypeFromSmartChart(m)}},n.default("进行高级配置"))),s.createElement("div",{key:"list",className:"chart-recommend__chart-container",onMouseOver:function(){return e.showList()},onMouseOut:function(){return e.hideList()}},s.createElement("div",{className:"chart-recommend__chart"},s.createElement("div",{className:"tool-item__icon "+m.iconClassName}),s.createElement("div",{className:"tool-item__name"},m.name),s.createElement("div",{className:"tool-item__bar"},s.createElement("i",{className:"fa fa-caret-up","aria-hidden":"true"}),s.createElement("i",{className:"fa fa-caret-down","aria-hidden":"true"}))),s.createElement("div",{className:"chart-recommend__chart-list"},s.createElement("div",{className:"chart-recommend__chart-list__container"},this.getRecommendList())),c?s.createElement("div",{className:"chart-recommend__tip"},c):null)])}return s.createElement("div",{className:"chart-recommend"},s.createElement("div",null,n.default("图表推荐")),s.createElement("div",{className:"chart-recommend__body"},l))},t.displayName="ChartRecommendList",t}(s.Component);t.default=l});
;sugar.define("sugar:utils/font-map.ts",function(a,l){"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.fonts=void 0;var e=a("sugar:utils/i18n.ts");l.fonts=[{label:"Arial",value:"Arial"},{label:"Arial Black",value:"Arial Black"},{label:"Bookman",value:"Bookman"},{label:"Candara",value:"Candara"},{label:"Courier New",value:"Courier New"},{label:"Courier",value:"Courier"},{label:"Garamond",value:"Garamond"},{label:"Georgia",value:"Georgia"},{label:"Helvetica",value:"Helvetica"},{label:"Impact",value:"Impact"},{label:"Roboto",value:"Roboto"},{label:"Monaco",value:"Monaco"},{label:"Palatino",value:"Palatino"},{label:"Times New Roman",value:"Times New Roman"},{label:"Verdana",value:"Verdana"},{label:e.default("微软雅黑"),value:"Microsoft Yahei"},{label:e.default("方正黑体简体"),value:"FZHei-B01S"},{label:e.default("方正楷体简体"),value:"FZKai-Z03S"},{label:e.default("方正书宋简体"),value:"FZShuSong-Z01S"},{label:e.default("方正仿宋简体"),value:"FZFangSong-Z02S"},{label:e.default("思源极细体"),value:"NotoSansSC-Thin"},{label:e.default("思源细体"),value:"NotoSansSC-Light"},{label:e.default("思源正常"),value:"NotoSansSC-DemiLight"},{label:e.default("思源常规"),value:"NotoSansSC-Regular"},{label:e.default("思源中等粗体"),value:"NotoSansSC-Medium"},{label:e.default("思源粗体"),value:"NotoSansSC-Bold"},{label:e.default("思源特粗"),value:"NotoSansSC-Black"},{label:e.default("站酷高端黑"),value:"zcool-gdh"},{label:e.default("站酷快乐体"),value:"HappyZcool"},{label:e.default("方正综艺简体"),value:"FZZongYi-M05S"},{label:e.default("方正兰亭黑简体"),value:"FZLanTingHeiS-R-GB"},{label:e.default("方正博雅宋简体"),value:"FZBoYaSongS-GB"},{label:e.default("方正粗黑宋简体"),value:"FZCuHeiSongS-B-GB"},{label:e.default("方正超粗黑简体"),value:"FZChaoCuHei-M10S"},{label:e.default("方正兰亭特黑简体"),value:"FZLanTingHeiS-H-GB"},{label:e.default("方正兰亭中黑简体"),value:"FZLanTingHei-DB-GBK"},{label:e.default("方正兰亭刊黑简体"),value:"FZLanTingKanHei-R-GBK"},{label:e.default("方正粗圆简体"),value:"FZCuYuan-M03S"},{label:e.default("方正准圆简体"),value:"FZZhunYuan-M02S"},{label:e.default("方正特粗光辉简体"),value:"FZTeCuGuangHuiS-R-GB"},{label:e.default("方正汉真广标简体"),value:"FZHanZhenGuangBiaoS-GB"},{label:e.default("方正剪纸简体"),value:"FZJianZhi-M23S"},{label:e.default("方正正大黑简体"),value:"FZZhengHeiS-EB-GB"},{label:e.default("方正正黑简体"),value:"FZZhengHeiS-R-GB"},{label:e.default("方正北魏楷书简体"),value:"FZBeiWeiKaiShu-S19S"},{label:e.default("方正铁筋隶书简体"),value:"FZTieJinLiShu-S17S"},{label:e.default("方正硬笔楷书简体"),value:"FZYingBiKaiShu-S15S"},{label:e.default("方正硬笔行书简体"),value:"FZYingBiXingShu-S16S"},{label:e.default("方正吕建德行楷简体"),value:"FZZJ-LJDFONT"},{label:e.default("方正静蕾简体"),value:"FZJingLeiS-R-GB"},{label:e.default("方正瘦金书简体"),value:"FZShouJinShu-S10S"},{label:e.default("方正喵呜体"),value:"FZMiaoWuS-GB"}]});
;sugar.define("sugar:utils/resize-sensor.ts",function(e,t){"use strict";function s(e,t){return e&&e.currentStyle?e.currentStyle[t]:window.getComputedStyle?window.getComputedStyle(e,void 0).getPropertyValue(t):e.style[t]}function i(e,t){if(e.resizedAttached){if(e.resizedAttached)return void e.resizedAttached.add(t)}else e.resizedAttached=new n,e.resizedAttached.add(t);e.resizeSensor=document.createElement("div"),e.resizeSensor.className="resize-sensor";var i="position: absolute; left: 0; top: 0; right: 0; bottom: 0; overflow: scroll; z-index: -1; visibility: hidden;",o="position: absolute; left: 0; top: 0;";e.resizeSensor.style.cssText=i,e.resizeSensor.innerHTML='<div class="resize-sensor-expand" style="'+i+'"><div style="'+o+'"></div></div><div class="resize-sensor-shrink" style="'+i+'"><div style="'+o+' width: 200%; height: 200%"></div></div>',e.appendChild(e.resizeSensor),{fixed:1,absolute:1}[s(e,"position")]||(e.style.position="relative");var r,d,l=e.resizeSensor.childNodes[0],c=l.childNodes[0],a=e.resizeSensor.childNodes[1],h=(a.childNodes[0],function(){c.style.width=l.offsetWidth+10+"px",c.style.height=l.offsetHeight+10+"px",l.scrollLeft=l.scrollWidth,l.scrollTop=l.scrollHeight,a.scrollLeft=a.scrollWidth,a.scrollTop=a.scrollHeight,r=e.offsetWidth,d=e.offsetHeight});h();var f=function(){e.resizedAttached&&e.resizedAttached.call()},u=function(e,t,s){e.attachEvent?e.attachEvent("on"+t,s):e.addEventListener(t,s)},v=function(){(e.offsetWidth!==r||e.offsetHeight!==d)&&f(),h()};u(l,"scroll",v),u(a,"scroll",v)}function o(e){if(e.resizeSensor){try{e.removeChild(e.resizeSensor)}catch(t){}delete e.resizeSensor,delete e.resizedAttached}}function r(e,t){i(e,t);var s=!1;return function(){s||(s=!0,o(e))}}Object.defineProperty(t,"__esModule",{value:!0}),t.resizeSensor=t.getComputedStyle=void 0;var n=function(){function e(){this.q=[]}return e.prototype.add=function(e){this.q.push(e)},e.prototype.call=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.q.forEach(function(t){t.apply(void 0,e)})},e}();t.getComputedStyle=s,t.resizeSensor=r});
;sugar.define("sugar:widgets/charts/utils/helper.ts",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.handleVisualMap=t.getColorRange=t.setChartTrueHeight=t.handleGrid=t.getTextStyle=t.formatVal=t.calcuGridByLegend=t.legendPositionConfig=void 0;var n=e("sugar:utils/i18n.ts"),i=e("sugar:utils/resize-sensor.ts"),o=e("sugar:utils/common-helper.ts");t.legendPositionConfig=function(e,t,i,o){void 0===i&&(i="bottom");var r={align:t.legendAlign||"auto"},l=t.legendPosition||i,a=t.legendScroll?"scroll":"plain";switch(l){case"bottom":r={type:a,bottom:t.legendMarginBottom||(o&&(o.timeline||"timeline"===o.displayMode)&&o.dataModel.timeline&&o.dataModel.timeline.length?50:0),orient:"horizontal"};break;case"right":r={type:a,right:t.legendMarginRight||0,orient:"vertical",align:t.legendAlign||"right",top:e.marginTop-6};break;case"top":r={type:a,top:t.legendMarginTop||0,orient:"horizontal"};break;case"left":r={type:a,left:t.legendMarginLeft||0,orient:"vertical",top:e.marginTop-6};break;case"custom":r={type:a,left:t.legendMarginLeft||null,right:t.legendMarginRight||null,top:t.legendMarginTop||null,bottom:t.legendMarginBottom||null}}return r.textStyle={},t.legendTextColor&&(r.textStyle.color=t.legendTextColor),t.legendFontSize&&(r.textStyle.fontSize=t.legendFontSize),t.legendFontFamily&&(r.textStyle.fontFamily=t.legendFontFamily),t.legendOrient&&(r.orient=t.legendOrient),t.legendSelector&&(r.selector=[{type:"all",title:n.default("全选")},{type:"inverse",title:n.default("反选")}],r.selectorPosition="start"),r},t.calcuGridByLegend=function(e,t,n){if(void 0===n&&(n="bottom"),!t.chartLegend)return e;var i=t.legendPosition||n;switch(i){case"bottom":e.marginBottom=e.marginBottom-20+(t.legendHeight||0);break;case"right":e.marginBottom=e.marginBottom-20,e.marginRight=e.marginRight+(t.legendWidth||0);break;case"top":e.marginBottom=e.marginBottom-20,e.marginTop=e.marginTop+(t.legendHeight||0);break;case"left":e.marginBottom=e.marginBottom-20,e.marginLeft=e.marginLeft+(t.legendWidth||0)}return e},t.formatVal=function(e){var t=e.value,n=void 0===t?"":t,i=e.format,r=e.accuracy,l=void 0===r?null:r,a=e.prefix,g=e.unit,m=e.unNeedThousandSplit,d=void 0===m?!1:m;return n=i&&!~["normal","log","none"].indexOf(i)?o.formatDataByType(n,i):o.formatStringOrNumber(n,l,!0,d),(a||"")+n+(g||"")},t.getTextStyle=function(e){var t={};return e instanceof Object&&(e.textColor&&(t.color=e.textColor),e.fontSize&&(t.fontSize=e.fontSize),e.fontFamily&&(t.fontFamily=e.fontFamily),e.fontWeight&&(t.fontWeight=e.fontWeight)),t},t.handleGrid=function(e,t){return{marginTop:o.parsePercent(e.marginTop,t.chartHeight)||t.marginTop,marginBottom:o.parsePercent(e.marginBottom,t.chartHeight)||t.marginBottom,marginLeft:o.parsePercent(e.marginLeft,t.chartWidth)||t.marginLeft,marginRight:o.parsePercent(e.marginRight,t.chartWidth)||t.marginRight}},t.setChartTrueHeight=function(e,t){var n=document.getElementById(e);if(n){var r=n.scrollHeight,l=void 0,a=o.getParentDomByClassName(n,"chart-item");a&&(l=Number(i.getComputedStyle(a,"border-width").replace("px",""))),l&&!isNaN(l)&&(r+=2*l);var g=Number(i.getComputedStyle(n,"margin-bottom").replace("px",""));r+=g,l&&!isNaN(l)&&(r+=2*l);var m=document.getElementById("chart-condition-"+t.frontendId);m&&(r+=m.clientHeight||0);var d=Math.floor(r/10)+4;t.hideTitle||(d+=4),r&&d!==t.height&&t.update({},{height:d})}},t.getColorRange=function(e){return(e||[]).filter(function(e){return e})},t.handleVisualMap=function(e){var n;if(!(null===(n=e.visualMap)||void 0===n?void 0:n.length))return null;var i=[];return e.visualMap.forEach(function(e){var n,o;if(null===e||void 0===e?void 0:e.type){var r={type:e.type,show:e.show,min:e.min,max:e.max,align:e.align||"auto",textStyle:{color:e.textColor||"",fontSize:e.fontSize||12}};e.left&&(r.left=e.left),e.right&&(r.right=e.right),e.top&&(r.top=e.top),e.bottom&&(r.bottom=e.bottom),e.orient&&(r.orient=e.orient),(null===(n=e.seriesIndex)||void 0===n?void 0:n.length)&&(r.seriesIndex=e.seriesIndex);var l=t.getColorRange(e.colors),a=t.getColorRange(e.outColors);l.length&&(r.inRange={color:l}),a.length&&(r.outOfRange={color:a}),"continuous"===e.type?e.splitNumber>0?(r.type="piecewise",r.splitNumber=e.splitNumber):r.text=[e.max,e.min]:"piecewise"===e.type&&(delete r.min,delete r.max,delete r.inRange,(null===(o=e.pieces)||void 0===o?void 0:o.length)&&(r.pieces=e.pieces.map(function(e){var t={color:e.color||null};return e.left&&"number"==typeof e.leftNum&&(t[e.left]=e.leftNum),e.right&&"number"==typeof e.rightNum&&(t[e.right]=e.rightNum),t}))),i.push(r)}}),i}});
;sugar.define("sugar:widgets/charts/utils/common.tsx",function(e,l){"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.getVisualMapCtrl=l.gridCtrl=l.getSeriesUnitCtrl=l.dataUnitCtrl=l.chartTextCtrl=l.getLabelCtrl=l.labelPosition=l.labelBasicCtrl=l.getLegendCtrl=l.legendBasicCtrl=l.getTooltipCtrl=l.tooltipBasicCtrl=l.getTooltipCss=l.yTypeOptions=void 0;var t=e("sugar:utils/i18n.ts"),a=e("sugar:node_modules/react/index.js"),o=e("sugar:utils/font-map.ts"),n=e("sugar:widgets/amis-inline-switch.tsx"),i=e("sugar:widgets/charts/utils/helper.ts");l.yTypeOptions=[{label:t.default("数值"),value:"normal"},{label:t.default("百分比(*100 %)"),value:"percent"},{label:t.default("对数(log)"),value:"log"},{label:t.default("秒转时分秒"),value:"chartTimeVal"},{label:t.default("字节转MB/GB"),value:"chartByteVal"},{label:t.default("字节转Mbps（带宽）"),value:"chartBps"}],l.getTooltipCss=function(e){var l="";if(e){var t=e.tooltipFontSize||"",a=e.tooltipFontFamily||"",o=e.tooltipTextColor||"",n=e.tooltipBackgroundColor||"";t&&(l+="font-size: "+t+"px;"),a&&(l+="font-family: "+a+";"),o&&(l+="color: "+o+";"),n&&(l+="background-color: "+n+";")}return l},l.tooltipBasicCtrl=[{type:"group",controls:[{type:"select",name:"config.tooltipFontFamily",clearable:!0,label:t.default("字体"),options:o.fonts},{type:"number",label:t.default("字号"),name:"config.tooltipFontSize",step:1,min:8,max:100}]},{type:"group",controls:[{type:"color",name:"config.tooltipTextColor",clearable:!0,label:t.default("字体颜色")},{type:"color",format:"rgba",name:"config.tooltipBackgroundColor",clearable:!0,label:t.default("背景色")}]},n.amisInlineSwitch("config.tooltipConfine",t.default("Tooltip顶部限制在图表内"))],l.getTooltipCtrl=function(e,a){var o=[];return e instanceof Array&&(o=o.concat(e)),"percent"===a&&o.push(n.amisInlineSwitch("config.tooltipPercent",t.default("展示百分比")),n.amisInlineSwitch("config.tooltipNum",t.default("展示具体数值"))),{type:"fieldset",title:t.default("提示设置(tooltip)"),collapsable:!0,collapsed:!0,headingClassName:"fieldset-title",controls:l.tooltipBasicCtrl.concat(o)}},l.legendBasicCtrl=[n.amisInlineSwitch("config.chartLegend",t.default("显示图例(legend)")),{type:"group",controls:[{type:"select",name:"config.legendFontFamily",label:t.default("字体"),clearable:!0,options:o.fonts},{type:"number",label:t.default("字号"),name:"config.legendFontSize",step:1,min:8,max:100}]},{type:"group",controls:[{type:"color",name:"config.legendTextColor",clearable:!0,label:t.default("字体颜色")},{type:"select",name:"config.legendAlign",label:t.default("图例对齐方式"),clearable:!0,options:[{label:t.default("自动"),value:"auto"},{label:t.default("居左"),value:"left"},{label:t.default("居右"),value:"right"}]}]},{type:"select",name:"config.legendOrient",label:t.default("图例排列方向"),clearable:!0,options:[{label:t.default("水平方向"),value:"horizontal"},{label:t.default("垂直方向"),value:"vertical"}]},{type:"select",name:"config.legendPosition",label:t.default("图例位置"),clearable:!0,options:[{label:t.default("底部"),value:"bottom"},{label:t.default("右侧"),value:"right"},{label:t.default("顶部"),value:"top"},{label:t.default("左侧"),value:"left"},{label:t.default("自定义"),value:"custom"}]},{type:"group",controls:[{type:"text",name:"config.legendMarginLeft",clearable:!0,placeholder:t.default("居中为center"),label:t.default("左边距")},{type:"text",name:"config.legendMarginRight",clearable:!0,label:t.default("右边距")}]},{type:"group",controls:[{type:"text",name:"config.legendMarginTop",clearable:!0,placeholder:t.default("居中为middle"),label:t.default("顶边距")},{type:"text",name:"config.legendMarginBottom",clearable:!0,label:t.default("底边距")}]},n.amisInlineSwitch("config.legendSelector",t.default("图例开启全选/反选")),n.amisInlineSwitch("config.legendScroll",t.default("图例过多时使用滚动条"))],l.getLegendCtrl=function(e){return{type:"fieldset",title:t.default("图例设置(legend)"),collapsed:!0,collapsable:!0,headingClassName:"fieldset-title",controls:e instanceof Array?l.legendBasicCtrl.concat(e):l.legendBasicCtrl}},l.labelBasicCtrl=[n.amisInlineSwitch("config.chartLabel",t.default("显示标签(label)"),"config.isPlay"),{type:"group",controls:[{type:"select",name:"config.labelFontFamily",label:t.default("字体"),clearable:!0,options:o.fonts},{type:"number",label:t.default("字号"),name:"config.labelFontSize",step:1,min:8,max:100}]},{type:"color",name:"config.labelColor",clearable:!0,label:t.default("标签颜色")}],l.labelPosition={type:"select",name:"config.labelPosition",clearable:!0,label:t.default("位置"),options:[{label:t.default("顶部"),value:"top"},{label:t.default("左侧"),value:"left"},{label:t.default("右侧"),value:"right"},{label:t.default("底部"),value:"bottom"},{label:t.default("内部"),value:"inside"},{label:t.default("内部左侧"),value:"insideLeft"},{label:t.default("内部右侧"),value:"insideRight"},{label:t.default("内部顶部"),value:"insideTop"},{label:t.default("内部底部"),value:"insideBottom"},{label:t.default("内部左上"),value:"insideTopLeft"},{label:t.default("内部左下"),value:"insideBottomLeft"},{label:t.default("内部右上"),value:"insideTopRight"},{label:t.default("内部右下"),value:"insideBottomRight"}]},l.getLabelCtrl=function(e,a,o){var i=[];return e instanceof Array&&(i=i.concat(e)),("pie"===a||"sunburst"===a||"treemap"===a)&&i.push(n.amisInlineSwitch("config.labelShowName",t.default("展示名称")),n.amisInlineSwitch("config.labelShowNum",t.default("展示数值")),n.amisInlineSwitch("config.labelShowPercent",t.default("展示百分比"))),o instanceof Array&&(i=i.concat(o)),{type:"fieldset",title:t.default("标签设置(label)"),collapsed:!0,collapsable:!0,headingClassName:"fieldset-title",controls:l.labelBasicCtrl.concat(i)}},l.chartTextCtrl=[{type:"divider"},{type:"fieldset",collapsed:!0,title:t.default("图表字体设置（低优先级）"),collapsable:!0,headingClassName:"fieldset-title",controls:[{type:"group",controls:[{type:"select",name:"config.fontFamily",label:t.default("字体"),clearable:!0,options:o.fonts},{type:"number",label:t.default("字号"),name:"config.fontSize",step:1,min:8,max:100}]},{type:"group",controls:[{type:"color",name:"config.textColor",clearable:!0,placement:"top",label:t.default("字体颜色")},{type:"text",name:"config.fontWeight",clearable:!0,label:t.default("字重")}]}]}],l.dataUnitCtrl={type:"group",controls:[{type:"text",name:"config.prefix",clearable:!0,label:t.default("数据前置单位"),key:"prefix"},{type:"text",name:"config.unit",clearable:!0,label:t.default("数据单位"),key:"unit"}]},l.getSeriesUnitCtrl=function(e,l){return{type:"group",hiddenOn:l,controls:[{type:"text",name:e+".prefix",clearable:!0,label:t.default("数据前置单位"),key:"prefix"},{type:"text",name:e+".unit",clearable:!0,label:t.default("数据单位"),key:"unit"}]}},l.gridCtrl={type:"fieldset",title:t.default("坐标轴边距设置"),collapsable:!0,collapsed:!0,headingClassName:"fieldset-title",controls:[{type:"group",controls:[{type:"text",name:"config.marginLeft",clearable:!0,placeholder:t.default("居中为center"),label:t.default("左边距")},{type:"text",name:"config.marginRight",clearable:!0,placeholder:t.default("数字、百分比、50%"),label:t.default("右边距")}]},{type:"group",controls:[{type:"text",name:"config.marginTop",clearable:!0,placeholder:t.default("居中为middle"),label:t.default("顶边距")},{type:"text",name:"config.marginBottom",clearable:!0,placeholder:t.default("数字、百分比、50%"),label:t.default("底边距")}]}]};var r=[{label:t.default("大于"),value:"gt"},{label:t.default("小于"),value:"lt"},{label:t.default("大于等于"),value:"gte"},{label:t.default("小于等于"),value:"lte"}];l.getVisualMapCtrl=function(e,l){var o,n,u=[l&&(null===(n=null===(o=e.data)||void 0===o?void 0:o.series)||void 0===n?void 0:n.length)?{type:"select",name:"seriesIndex",multiple:!0,extractValue:!0,joinValues:!1,clearable:!0,options:e.data.series.map(function(e,l){return{label:e.name,value:l}}),label:t.default("系列"),description:t.default("如果不选择，当前规则会应用到所有系列，建议多条规则不要使用相同的系列")}:{type:"static",value:t.default("单系列图表建议视觉映射只添加一条规则")},{type:"radios",name:"type",required:!0,label:t.default("类型"),inputClassName:"d-flex",description:'<a class="text-info" href="/docs/BestPractise-visualMap" target="_blank">\n                             '+t.default("文档说明")+"\n                           </a>",options:[{label:t.default("分段型"),value:"piecewise"},{label:t.default("连续型"),value:"continuous"}]},{type:"group",visibleOn:'type === "continuous"',controls:[{type:"number",name:"min",label:t.default("最小值"),placeholder:""},{type:"number",name:"max",label:t.default("最大值"),placeholder:""}]},{type:"number",name:"splitNumber",min:1,clearable:!0,visibleOn:'type === "continuous"',label:t.default("分段个数"),description:t.default("分段个数会将最小值到最大值平均分成多个数值范围")},{type:"table",name:"pieces",label:"",visibleOn:'type === "piecewise"',addable:!0,removable:!0,showAddBtn:!0,needConfirm:!1,columnsTogglable:!1,description:t.default("建议填写具体范围避免图形没有颜色或出错"),columns:[{type:"color",name:"color",label:t.default("颜色"),quickEdit:{type:"color",name:"color"}},{name:"left",label:t.default("条件"),quickEdit:{type:"select",name:"left",clearable:!0,options:r}},{name:"leftNum",label:t.default("数值"),quickEdit:{type:"number",name:"leftNum"}},{name:"right",label:t.default("条件"),quickEdit:{type:"select",name:"right",clearable:!0,options:r}},{name:"rightNum",label:t.default("数值"),quickEdit:{type:"number",name:"rightNum"}}]},{type:"array",name:"colors",visibleOn:'type === "continuous"',label:t.default("范围内颜色"),placeholder:"",description:t.default("从上到下对应数值从小到大的颜色"),addable:!0,removable:!0,draggable:!0,items:{type:"color"}},{visibleOn:'type === "continuous"',children:function(e){var l=e.data,t=e.classnames,o=i.getColorRange(l.colors),n="";return o.length>1?n="linear-gradient(to right, "+o.join(",")+")":o[0]&&(n=o[0]),a.createElement("div",{className:t("Form-item Form-item--horizontal")},a.createElement("label",{className:t("Form-label Form-itemColumn--2")+" text--right"}),a.createElement("div",{className:t("Form-value Form-itemColumn--10")},a.createElement("div",{style:{height:26,background:n}})))}},{type:"array",name:"outColors",label:t.default("范围外颜色"),placeholder:"",addable:!0,removable:!0,draggable:!0,items:{type:"color"}},{type:"switch",name:"show",label:t.default("显示图例")},{type:"panel",visibleOn:"show",controls:[{type:"group",controls:[{type:"number",label:t.default("字号"),name:"fontSize",step:1,min:8,max:100},{type:"color",name:"textColor",clearable:!0,label:t.default("字体颜色")}]},{type:"group",controls:[{type:"select",name:"align",label:t.default("对齐方式"),clearable:!0,options:[{label:t.default("自动"),value:"auto"},{label:t.default("居左"),value:"left"},{label:t.default("居右"),value:"right"}]},{type:"select",name:"orient",label:t.default("排列方向"),clearable:!0,options:[{label:t.default("水平方向"),value:"horizontal"},{label:t.default("垂直方向"),value:"vertical"}]}]},{type:"group",controls:[{type:"text",name:"left",clearable:!0,placeholder:t.default("数字、百分比、50%"),label:t.default("左边距")},{type:"text",name:"right",clearable:!0,placeholder:t.default("数字、百分比、50%"),label:t.default("右边距")}]},{type:"group",controls:[{type:"text",name:"top",clearable:!0,placeholder:t.default("数字、百分比、50%"),label:t.default("顶边距")},{type:"text",name:"bottom",clearable:!0,placeholder:t.default("数字、百分比、50%"),label:t.default("底边距")}]}]}];return{type:"fieldset",title:t.default("视觉映射(visualMap)"),collapsable:!0,collapsed:!0,className:"overflow-hidden",headingClassName:"fieldset-title",controls:[{type:"button",level:"primary",label:t.default("添加规则"),actionType:"dialog",dialog:{title:t.default("视觉映射"),size:"lg",body:{type:"form",data:{type:"piecewise",show:!1,colors:[]},onFinished:function(l){e.chart.handleVisualMap(l)},controls:u}}},{type:"table",name:"config.visualMap",removable:!0,description:"<div>\n                                "+t.default("如果出现部分图形没有颜色，需要填写范围外颜色，单系列图表建议只保留一条规则")+'\n                                <a class="text-info" href="/docs/BestPractise-visualMap" target="_blank">'+t.default("文档说明")+"</a>\n                             </div>",columns:[{type:"mapping",name:"type",label:t.default("类型"),map:{continuous:t.default("连续型"),piecewise:t.default("分段型")}},{type:"tpl",label:t.default("范围"),tpl:"$min - $max"},{type:"operation",label:t.default("编辑"),buttons:[{type:"button",actionType:"dialog",label:t.default("编辑"),dialog:{title:t.default("视觉映射"),size:"lg",body:[{type:"form",onFinished:function(l){e.chart.handleVisualMap(l,l.__super.index)},controls:u}]}}]}]}]}}});
;sugar.define("sugar:widgets/dashboard-ctrl-panel/chart-ctrl.tsx",function(e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.getAutoRefreshCtrl=a.autoRefreshStep=a.autoRefreshMinInterval=a.notNeedZoomCharts=void 0;var t=e("sugar:node_modules/tslib/tslib.js"),l=e("sugar:utils/i18n.ts"),n=e("sugar:node_modules/react/index.js"),o=e("sugar:stores/index.ts"),i=e("sugar:widgets/charts/chart-manager.tsx"),r=e("sugar:widgets/dependence-ctrl/dependence-ctrl.tsx"),d=e("sugar:sites/amis-renderer.tsx"),s=e("sugar:services/chart-dependence.ts"),u=e("sugar:widgets/drill-down-ctrl/drill-down-ctrl.tsx"),c=e("sugar:widgets/ctrl-panel/common/switch-with-tip.tsx"),f=e("sugar:widgets/object-array-editor/object-array-editor.tsx"),p=e("sugar:widgets/data-model/data-model-selector/data-model-selector.tsx"),m=e("sugar:widgets/amis-inline-switch.tsx"),g=e("sugar:utils/exception.ts"),h=e("sugar:widgets/charts/bmap-scatter/bmap-style.tsx"),b=e("sugar:widgets/image-selector/image-selector.tsx"),y=e("sugar:utils/img-source-map.ts"),v=e("sugar:widgets/sub-chart-ctrl/sub-chart-ctrl.tsx"),C=e("sugar:widgets/ctrl-panel/chart-zoom-ctrl.tsx"),_=e("sugar:widgets/charts/smart-chart/chart-recommend-list.tsx"),w=e("sugar:widgets/widget-template/template-dialog.tsx"),I=e("sugar:widgets/charts/utils/common.tsx"),D=[];for(var T in y.borders)D.push({label:T,type:y.borders[T].url.split(".").pop().toUpperCase(),value:T,image:y.borders[T].url});var x=[{type:"color",name:l.default("颜色"),key:"color",defaultValue:"#23b7e5"}],S=[{type:"color",name:l.default("颜色1"),key:"color",defaultValue:"#23b7e5",tdStyle:{minWidth:100}},{type:"color",name:l.default("颜色2(渐变色)"),key:"color1",defaultValue:"",tdStyle:{minWidth:100}},{type:"number",name:l.default("渐变位置（0-100）"),key:"ratio",defaultValue:90,tdStyle:{minWidth:140}}],O=new Set(["bar","calendar-heatmap","candlestick","cartesian-heatmap","funnel","gauge","line","liquid-fill","map","pie","pie-nested","radar","river","sankey","scatter","sunburst","treemap"]);a.notNeedZoomCharts=["scene"],a.autoRefreshMinInterval="private"===window.sugarConfig.deployType?1:10,a.autoRefreshStep="private"===window.sugarConfig.deployType?1:5,a.getAutoRefreshCtrl=function(e,t){return void 0===e&&(e="false"),void 0===t&&(t=!1),[{type:"divider",hiddenOn:e},m.amisInlineSwitch("dataConfig.needAutoRefresh",l.default("打开数据自动刷新"),"data.dataType == 'static' || "+e),{type:"number",name:"dataConfig.autoRefreshInterval",hiddenOn:"data.dataType == 'static' || data.dataConfig.needAutoRefresh == false || "+e,step:a.autoRefreshStep,min:a.autoRefreshMinInterval,label:l.default("自动刷新间隔(秒)")},m.amisInlineSwitch("dataConfig.autoDestory",l.default("自动刷新时销毁并重绘"),"data.dataType == 'static' || data.dataConfig.needAutoRefresh == false || "+e+" || "+t),m.amisInlineSwitch("dataConfig.showNullData",l.default("数据为空则展示空数据"),"data.dataType == 'static' || data.dataConfig.needAutoRefresh == false || "+e+" || "+t),{type:"tpl",label:"",value:'<div class="help-block">'+l.default("数据的自动刷新在非编辑模式下有效，最小刷新间隔为「"+a.autoRefreshMinInterval+"」秒")+"</div>",hiddenOn:"data.dataType == 'static' || data.dataConfig.needAutoRefresh == false || "+e}]};var L=function(e){function y(){return null!==e&&e.apply(this,arguments)||this}return t.__extends(y,e),y.prototype.componentWillMount=function(){},y.prototype.componentDidCatch=function(e,a){g.captureException(e,a)},y.prototype.render=function(){var e=this.props,o=e.chartEntity,g=e.dashboardEntity,y=e.updateChart,T=e.sqlModelStore,L=e.dataModelTreeList,R=e.chartHub,E=e.chartList,k=e.conditionList,N=e.isDrillDown,B=e.groupHash,A=e.widgetTemplate,M=R.data,U=i.getChartByType(o.type);if(!U)return l.default("当前系统没有这种图表「"+o.type+"」");var z=o.getParentChart(),H=!1;z&&(H=z.config.hierarchyDrillDownOpen&&N||!1);var W={groupHash:B,chart:o,hubConfigData:R.configData,data:M.data,other:M.other,sqlModelStore:T,dataModelTreeList:L,isHierarchyDrillDown:H};("tab"===U.type||"smart-audio"===U.type)&&(W.chartList=E,W.conditionList=k);var P=g.config.grid,V=P&&P>1?Math.round(P):1,j=[{type:"group",controls:[{type:"text",name:"name",label:l.default("图表名称")},{type:"text",name:"remark",label:l.default("图表简介")}]},O.has(U.type)?{name:"config.useSVG",children:function(e){var a=e.onChange,o=e.value;return n.createElement(c.default,t.__assign({},{onChange:a,value:o,label:l.default("使用 SVG 渲染"),tipText:l.default("文档说明"),tipLink:"/docs/Chart-Common#SVG 渲染"}))}}:null,m.amisInlineSwitch("config.hideLoading",l.default("隐藏loading效果(浏览模式下)")),{type:"divider"},{type:"fieldset",collapsed:!0,title:l.default("宽高和位置"),collapsable:!0,headingClassName:"fieldset-title",controls:[{type:"group",controls:[{type:"number",name:"width",step:V,min:0,label:l.default("宽度")},{type:"number",name:"height",label:l.default("高度"),step:V,min:0}]},m.amisInlineSwitch("config.fixRatio",l.default("固定比例缩放")),{type:"group",controls:[{type:"number",name:"left",step:V,label:l.default("X坐标")},{type:"number",name:"top",label:l.default("Y坐标"),step:V}]},{type:"tpl",tpl:"<div class='help-block'>"+l.default("当前网格间距：「"+g.config.grid+"」px，可在大屏控制面板中调整")+"</div>"},{type:"group",controls:[{type:"range",name:"config.rotate",label:l.default("旋转"),step:1,min:0,max:360},{type:"range",name:"config.opacity",label:l.default("透明度"),step:.1,min:0,max:1}]}]},{type:"divider"},{type:"fieldset",collapsed:!0,title:l.default("图表自定义背景和边框"),collapsable:!0,headingClassName:"fieldset-title",controls:[{type:"radios",label:l.default("图片边框设置"),name:"config.outBorderType",inline:!1,value:0,options:[{label:l.default("无"),value:0},{label:l.default("内置图片边框"),value:2},{label:l.default("自定义图片边框"),value:3}]},{name:"config.outBorderImageType",visibleOn:"config.outBorderType === 2",children:function(e){var a=e.onChange,l=e.value;return n.createElement(b.default,t.__assign({},{onChange:a,value:l},{options:D,containerClassName:"form-group form-item",label:"请选择边框素材：",useKey:!0,limit:20}))}},{type:"image",name:"config.customOutBorderImg",maxLength:1,allowInput:!0,maxSize:2097152,reciever:"/api/image/upload",visibleOn:"config.outBorderType === 3"},{type:"group",visibleOn:"config.outBorderType === 3",controls:[{type:"number",name:"config.outBorderTop",min:0,step:1,label:l.default("边框图片顶部切割像素")},{type:"number",name:"config.outBorderBottom",min:0,step:1,label:l.default("边框图片底部切割像素")}]},{type:"group",visibleOn:"config.outBorderType === 3",controls:[{type:"number",name:"config.outBorderLeft",min:0,step:1,label:l.default("边框图片左侧切割像素")},{type:"number",name:"config.outBorderRight",min:0,step:1,label:l.default("边框图片右侧切割像素")}]},{name:"config.chartCustomStyle",children:function(e){var a=e.onChange,o=e.value;return n.createElement(c.default,t.__assign({},{onChange:a,value:o,label:l.default("开启自定义背景和线条边框"),tipText:l.default("文档说明"),tipLink:"/docs/Chart-Common#自定义图表的背景和边框等样式"}))}},{type:"group",hiddenOn:"!data.config.chartCustomStyle",controls:[{type:"color",name:"config.chartBackgroundColor",label:l.default("背景颜色"),format:"rgba"},{type:"number",name:"config.chartBorderRadius",min:0,step:1,label:l.default("圆角")}]},{type:"group",hiddenOn:"!data.config.chartCustomStyle || config.outBorderType",controls:[{type:"color",name:"config.borderColor",format:"rgba",label:l.default("边框颜色")},{type:"number",label:l.default("边框宽度"),name:"config.borderWidth",min:0,step:1,max:20}]},{type:"select",name:"config.chartBorderStyle",label:l.default("边框样式"),options:[{label:l.default("实线"),value:"solid"},{label:l.default("点状"),value:"dotted"},{label:l.default("双线"),value:"double"},{label:l.default("虚线"),value:"dashed"}],hiddenOn:"!data.config.chartCustomStyle || config.outBorderType"},{type:"number",label:l.default("阴影宽度"),name:"config.shadowWidth",min:0,step:1,max:20,hiddenOn:"!data.config.chartCustomStyle"},{type:"group",hiddenOn:"!data.config.chartCustomStyle",controls:[{type:"number",label:l.default("阴影偏移"),name:"config.shadowOffset",min:0,step:1,max:20},{type:"color",name:"config.chartShadowColor",format:"rgba",label:l.default("阴影颜色")}]}]}],q=[{type:"select",label:l.default("入场动画"),name:"config.enterAnimate",options:[{label:l.default("无动画"),value:""},{label:"backInDown",value:"animate__backInDown"},{label:"backInLeft",value:"animate__backInLeft"},{label:"backInRight",value:"animate__backInRight"},{label:"backInUp",value:"animate__backInUp"},{label:"bounceIn",value:"animate__bounceIn"},{label:"bounceInDown",value:"animate__bounceInDown"},{label:"bounceInLeft",value:"animate__bounceInLeft"},{label:"bounceInRight",value:"animate__bounceInRight"},{label:"bounceInUp",value:"animate__bounceInUp"},{label:"fadeIn",value:"animate__fadeIn"},{label:"fadeInDown",value:"animate__fadeInDown"},{label:"fadeInLeft",value:"animate__fadeInLeft"},{label:"fadeInRight",value:"animate__fadeInRight"},{label:"fadeInUp",value:"animate__fadeInUp"},{label:"flip",value:"animate__flip"},{label:"flipInX",value:"animate__flipInX"},{label:"flipInY",value:"animate__flipInY"},{label:"lightSpeedInRight",value:"animate__lightSpeedInRight"},{label:"lightSpeedInLeft",value:"animate__lightSpeedInLeft"},{label:"rotateIn",value:"animate__rotateIn"},{label:"rotateInDownLeft",value:"animate__rotateInDownLeft"},{label:"rotateInDownRight",value:"animate__rotateInDownRight"},{label:"rotateInUpLeft",value:"animate__rotateInUpLeft"},{label:"rotateInUpRight",value:"animate__rotateInUpRight"},{label:"zoomIn",value:"animate__zoomIn"},{label:"zoomInDown",value:"animate__zoomInDown"},{label:"zoomInLeft",value:"animate__zoomInLeft"},{label:"zoomInRight",value:"animate__zoomInRight"},{label:"zoomInUp",value:"animate__zoomInUp"},{label:"slideInDown",value:"animate__slideInDown"},{label:"slideInLeft",value:"animate__slideInLeft"},{label:"slideInRight",value:"animate__slideInRight"},{label:"slideInUp",value:"animate__slideInUp"}]}];if(O.has(U.type)&&(q=q.concat([m.amisInlineSwitch("config.enableAnimation",l.default("开启图表动画"),"",!0),{type:"number",name:"config.animationThreshold",label:l.default("动画阀值"),description:l.default("数据量大于这个值的时候关闭动画"),visibleOn:"config.enableAnimation"},{type:"number",name:"config.animationDurationUpdate",label:l.default("数据变更时的动画时长（毫秒）"),visibleOn:"config.enableAnimation"},{type:"group",visibleOn:"config.enableAnimation",controls:[{type:"number",name:"config.animationDuration",label:l.default("动画时长（毫秒）")},{type:"number",name:"config.animationDelay",label:l.default("动画延迟（毫秒）")}]}]),~["line","bar","pie"].indexOf(U.type))){var K=[{label:l.default("线性"),value:"linear"},{label:l.default("缓入"),value:"quadraticIn"},{label:l.default("缓出"),value:"quadraticOut"},{label:l.default("缓入缓出"),value:"quadraticInOut"}];q=q.concat([{type:"group",visibleOn:"config.enableAnimation",controls:[{type:"select",name:"config.animationEasing",label:l.default("动画缓动效果"),options:K,visibleOn:"config.enableAnimation",size:"full"},{type:"select",name:"config.animationEasingUpdate",label:l.default("动画更新缓动效果"),options:K,visibleOn:"config.enableAnimation",size:"full"}]}])}j=j.concat([{type:"divider"},{type:"fieldset",collapsed:!0,title:l.default("图表动画设置"),collapsable:!0,headingClassName:"fieldset-title",controls:q}]);var F=[];if(U.commonCustomColor||U.commonCustomColorGradient){var G=["文字颜色","轴线颜色","可增加多个配色项，依次对应各项颜色"];if(U.commonCustomColorTitle&&3===U.commonCustomColorTitle.length)for(var X=0;X<U.commonCustomColorTitle.length;X++){var Y=U.commonCustomColorTitle[X];Y&&(G[X]=Y)}F=F.concat([{name:"config.openCustomColor",children:function(e){var a=e.onChange,o=e.value;return n.createElement(c.default,t.__assign({},{onChange:a,value:o,label:l.default("开启图表自定义配色"),tipText:l.default("自定义配色说明"),tipLink:"/docs/Chart-Common#图表的自定义配色"}))}},{type:"group",hiddenOn:"!data.config.openCustomColor",controls:[{type:"color",name:"config.textColor",format:"rgba",label:G[0]},{type:"color",name:"config.lineColor",format:"rgba",label:G[1]}]}]);var Z=[];["scatter","3d-scatter","bar","bar-alien","bar-polar","3d-bar","line"].includes(U.type)&&Z.push({type:"color",name:"config.splitLineColors",format:"rgba",label:l.default("网格线颜色")}),["bar-pic","bar","bar-alien","bar-polar","river","line"].includes(U.type)&&Z.push({type:"color",name:"config.axisPoiLineColor",format:"rgba",label:l.default("鼠标悬停时轴对齐线颜色")}),F.push({type:"group",hiddenOn:"!data.config.openCustomColor",controls:Z}),F.push({name:"config.customColors",hiddenOn:"!data.config.openCustomColor",children:function(e){var a=e.onChange,i=e.value;return n.createElement(f.default,t.__assign({},{onChange:a,value:i},{chartFrontendId:o.frontendId,containerClassName:"form-group form-item",label:G[2],addTipText:l.default("新增配色项"),cols:U.commonCustomColorGradient?S:x}))}})}F.length&&(j=j.concat([{type:"divider"},{type:"fieldset",collapsed:!0,title:l.default("自定义配色"),collapsable:!0,headingClassName:"fieldset-title",controls:F}])),U.commonCustomShadow&&(j=j.concat([{type:"divider"},{type:"fieldset",collapsed:!0,title:l.default("图形阴影设置"),collapsable:!0,headingClassName:"fieldset-title",controls:[m.amisInlineSwitch("config.openCustomShadow",l.default("开启图形阴影")),{type:"group",hiddenOn:"!data.config.openCustomShadow",controls:[{type:"number",name:"config.shadowBlur",label:l.default("阴影模糊大小"),min:0},{type:"color",name:"config.shadowColor",format:"rgba",label:l.default("阴影颜色")}]},{type:"group",hiddenOn:"!data.config.openCustomShadow",controls:[{type:"number",name:"config.shadowOffsetX",min:0,label:l.default("水平方向偏移")},{type:"number",name:"config.shadowOffsetY",min:0,label:l.default("垂直方向偏移")}]}]}])),U.type.match(/^bmap/i)&&(j=j.concat([{type:"divider"},{type:"fieldset",collapsed:!0,title:l.default("地图样式设置"),collapsable:!0,headingClassName:"fieldset-title",controls:h.styleConfig("config",!0)}])),U.basicCtrl&&(j=j.concat("function"==typeof U.basicCtrl?U.basicCtrl(W):U.basicCtrl)),"commonChart"===U.kind&&(j=j.concat(I.chartTextCtrl));var J=R.configData.subChartConfigKey||o.getActiveSubChartKey(),Q=[],$="";if(U.subCharts&&o.config.subChartConfig&&o.config.subChartConfig[J]){var ea=o.config.subChartConfig[J],aa=U.subCharts[ea.type].dataBindCtrl;aa&&(Q=aa(t.__assign(t.__assign({},W),{activeSubChartKey:J}))),$="config.subChartConfig."+J+"."}else U.dataBindCtrl&&(Q="function"==typeof U.dataBindCtrl?U.dataBindCtrl(W):U.dataBindCtrl);if(U.needDashboardAutoFresh&&Q.length){var ta="false";U.loadDataPremiseField&&(ta="!data.config."+U.loadDataPremiseField),Q=Q.concat(a.getAutoRefreshCtrl(ta))}var la=Q;window.sugarConfig.enableDataModel&&U.dataModelPanelShow&&i.needShowDataModelPanel(U.dataModelPanelShow,o,$)&&(la=[{type:"hbox",columns:[{columnClassName:"data-bind",controls:Q},{columnClassName:"data-model",controls:[{name:$+"dataModelHash",children:function(e){var a=e.onChange,t=e.value;return n.createElement(p.default,{onChange:a,value:t})}}]}]}]);var na=[{title:l.default("基础"),controls:j.concat([m.amisInlineSwitch("config.pointerEventsNone",l.default("开启鼠标事件穿透(浏览模式下)")),{type:"tpl",label:"",value:'<div class="help-block">'+l.default("鼠标事件穿透是指鼠标的悬停、点击等操作对该图层无效，会直接穿透到该图层的下面图层（例如将一张图片覆盖在一个图表的上面作为装饰，但是期望鼠标的点击等操作能对下层的图表生效，此时将图片这一图层开启鼠标事件穿透即可），该属性只在浏览时生效，编辑时不生效！")+"</div>"}])}];la.length&&!H&&na.push({title:l.default(U.dataBindTabTitle||"数据"),controls:la});var oa=[];if(U.subCharts&&o.config.subChartConfig&&o.config.subChartConfig[J]){var ea=o.config.subChartConfig[J],ia=U.subCharts[ea.type].advancedCtrl;ia&&(oa=ia(t.__assign(t.__assign({},W),{activeSubChartKey:J})))}else U.advancedCtrl&&(oa="function"==typeof U.advancedCtrl?U.advancedCtrl(W):U.advancedCtrl,F.length&&oa.length&&(oa=oa.concat([{type:"divider"},{type:"fieldset",collapsed:!1,title:l.default("自定义配色"),collapsable:!0,headingClassName:"fieldset-title",controls:F}])));oa.length&&na.push({title:l.default(U.advancedTabTitle||"高级"),controls:oa});var ra=[];if(U.drillDownType&&!H){var da=!1,sa=window.sugarConfig.nowProductConfig;sa&&!sa.drill&&(da=!0);var ua=[{name:"drillDownOpen",children:function(e){var a=e.onChange,o=e.value;return n.createElement(c.default,t.__assign({},{onChange:a,notSupport:da,value:o,label:l.default("开启自由下钻"),tipText:l.default("什么是下钻？"),tipLink:"/docs/ChartAnalysis-Drilldown"}))}},{type:"tpl",label:"",hiddenOn:"!data.drillDownOpen",value:'<div class="help-block">'+l.default("在本图表中点击并触发下钻即可编辑下钻图表，传递到下钻图表中的上层图表信息及查询条件可以在下钻图表的控制面板中点击「调试」进行查看。")+"</div>"},{name:"drillDown",hiddenOn:"!data.drillDownOpen",children:function(e){var a=e.onChange,l=e.value;return n.createElement(u.default,t.__assign({},{onChange:a,value:l},{chartEntity:o,chartData:M,containerClassName:"form-group form-item",drillDownType:U.drillDownType,hintText:U.drillDownTip}))}}];U.canHierarchyDrillDown&&ua.push({name:"config.hierarchyDrillDownOpen",children:function(e){var a=e.onChange,o=e.value;return n.createElement(c.default,t.__assign({},{onChange:a,notSupport:da,value:o,label:l.default("开启层级关系下钻"),tipText:l.default("什么是层级关系下钻？"),tipLink:"/docs/ChartAnalysis-Drilldown"}))}},{name:"drillDown",visibleOn:"config.hierarchyDrillDownOpen",children:function(e){var a=e.onChange,l=e.value;return n.createElement(u.default,t.__assign({},{onChange:a,value:l},{chartEntity:o,chartData:M,containerClassName:"form-group form-item",drillDownType:U.drillDownType,isHierarchyDrillDown:!0,hintText:U.drillDownTip}))}}),da||o.drillDownLevel||ua.push({type:"select",name:"config.ddShowType",label:l.default("默认展示方式"),options:[{label:l.default("弹框展示"),value:0},{label:l.default("弹框全屏展示"),value:1},{label:l.default("原图表区域展示"),value:2}],description:l.default("如果改动展示方式，会将该图表所有的下钻图表展示方式统一成当前所选方式")}),ra.push({type:"fieldset",collapsable:!0,title:l.default("下钻"),controls:ua})}if(~s.canBeDependencedChartType.indexOf(U.type)&&0===o.drillDownLevel&&!H){var ca=[{name:"config.dependenceOpen",children:function(e){var a=e.onChange,o=e.value;return n.createElement(c.default,t.__assign({},{onChange:a,value:o,label:l.default("开启图表联动"),tipText:l.default("什么是图表联动？"),tipLink:"/docs/ChartAnalysis-Dependence"}))}},{type:"tpl",label:"",hiddenOn:"!data.config.dependenceOpen",value:'<div class="help-block">'+l.default("在本图表中点击数据项可触发下级图表联动的更新数据。触发联动后，在下级图表的控制面板中点击「调试」可以查看传递到下级图表的本图表点击数据项的信息。")+"</div>"},{name:"config.dependences",hiddenOn:"!data.config.dependenceOpen",children:function(e){var a=e.onChange,l=e.value;return n.createElement(r.default,t.__assign({},{onChange:a,value:l,hintText:U.drillDownTip,isMultDependence:"multiple"===U.drillDownType,chartEntity:o,chartData:M}))}}];ra.length>1&&ra.push({type:"divider"}),ra.push({type:"fieldset",collapsable:!0,title:l.default("联动"),controls:ca})}return R.drillDownDialogOpen||a.notNeedZoomCharts.includes(o.type)||(ra.length>1&&ra.push({type:"divider"}),ra.push({type:"fieldset",collapsed:!0,collapsable:!0,title:l.default("图表放大"),controls:C.chartZoomCtrl})),o.isExploreChart||"smart-chart"===o.type||"smart-audio"===o.type||na.push({title:l.default("交互"),className:"interaction-tab",controls:ra}),n.createElement("div",{className:"chart-ctrl-wrapper"},n.createElement("div",{className:"sub-chart-manager"},U.subCharts?n.createElement(v.default,{chartEntity:o,chartWidget:U,chartHub:R}):null),n.createElement("div",{className:"chart-recommend-container"},"smart-chart"===o.type?n.createElement(_.default,{value:o.config.smartChart,chart:o,hubConfigData:R.configData}):null),n.createElement("div",{className:"chart-config"},n.createElement(d.default,{data:o.toJSON(),onChange:y,schema:{type:"form",wrapWithPanel:!1,controls:[{type:"tabs",mode:"card",tabs:na,className:"overflow-hidden h-full d-flex flex-col",contentClassName:"flex-1 overflow-y-auto p-relative",activeKey:1}]}})),n.createElement(w.WidgetTemplateForm,{key:"dashboard_chartItem_add_"+o.hash,isDash:!0,show:A.showAddTemplate,name:o.name,isDemo:"custom-iframe"===o.type&&"demo"===o.config.htmlHash,toggle:A.toggleAddTemplate,onSubmit:o.addWidgetTemplate}),n.createElement(w.SelectWidgetTemplate,{key:"dashboard_chartItem_select_"+o.hash,isDash:!0,groupHash:B,type:o.type,show:A.showSelectTemplate,useTemplate:o.useTemplate,toggle:A.toggleSelectTemplate}))},y.displayName="DashChartCtrl",y=t.__decorate([o.inject(function(e){return{dataModelTreeList:e.dataModel.treeList,chartList:e.chart.list,conditionList:e.condition.list,groupHash:e.group.current.data.hash,widgetTemplate:e.widgetTemplate}}),o.observer],y)}(n.Component);a.default=L});
;sugar.define("sugar:widgets/api-adaptor-selector/api-adaptor-item.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ApiAdaptorItem=void 0;var a=e("sugar:node_modules/tslib/tslib.js"),n=e("sugar:utils/i18n.ts"),r=e("sugar:node_modules/react/index.js"),i=e("sugar:node_modules/classnames/index.js"),s=e("sugar:stores/index.ts"),o=e("sugar:widgets/dnd-sort.tsx"),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.render=function(){var e=this.props,t=e.apiAdaptorStore,a=e.hash,s=e.isDragging,o=e.index,d=e.deleteItem,u=e.editApiAdaptor,l=t.simpleList.data.find(function(e){return e.hash===a});return l?r.createElement("div",{className:i("adaptor-item",{isDragging:s}),title:l.name},r.createElement("i",{className:"fa fa-times delete",onClick:function(){return d(o)}}),l.name,r.createElement("i",{className:"fa fa-edit icon setting",onClick:function(){return u(o)}})):r.createElement("div",{className:i("adaptor-item err-item",{isDragging:s})},n.default("未找到数据转换器「"+a+"」"),r.createElement("i",{className:"fa fa-trash icon",onClick:function(){return d(o)}}))},t.displayName="ApiAdaptorItem",t=a.__decorate([s.observer],t)}(r.Component);t.ApiAdaptorItem=d;var u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t=a.__decorate([o.default()],t)}(d);t.default=u});
;sugar.define("sugar:widgets/api-adaptor-selector/api-adaptor-editor.tsx",function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=t("sugar:node_modules/tslib/tslib.js"),n=t("sugar:utils/i18n.ts"),o=t("sugar:node_modules/react/index.js"),i=t("sugar:stores/index.ts"),s=t("sugar:sites/amis-renderer.tsx"),r=n.default("data是传入的数据，下面您可以对data做格式转换或计算"),u=n.default("最后需要return转换后的数据"),l="function adaptor(data) {\n    // "+r+"\n    // "+u+"\n    \n}",d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a.__extends(e,t),e.prototype.componentWillMount=function(){this.onSubmit=this.onSubmit.bind(this)},e.prototype.onSubmit=function(t,e){var a=t||{},n=a.name,o=void 0===n?"":n,i=a.content,s=void 0===i?"":i,r="";"update"===this.props.mode&&(r=this.props.apiAdaptorEntity.hash);var u={name:o,hash:r,content:s};this.props.onSubmit(u,e)},e.prototype.render=function(){var t=this,e=this.props,a=e.mode,i=e.apiAdaptorEntity,r=e.onClose,u=e.isInDebug,d=i||{},p=d.name,m=void 0===p?"":p,c=d.hash,b=void 0===c?"":c,y=d.content,h=void 0===y?l:y,f={name:m,hash:b,content:h},v=[{type:"button",label:n.default("取消"),onClick:r}];return u?v.push({type:"button",label:n.default("保存并关闭调试"),actionType:"submit"},{type:"button",level:"primary",label:n.default("保存并继续调试"),actionType:"submit"}):v.push({type:"button",level:"primary",label:n.default("确定"),actionType:"submit"}),o.createElement(s.default,{schema:{type:"dialog",size:"lg",title:n.default("update"===a?"修改「"+m+"」":"新建API数据转换器"),onClose:r,actions:v,body:i||"update"!==a?{type:"form",title:"",mode:"vertical",data:f,onFinished:function(e,a){return t.onSubmit(e,u&&"primary"===(null===a||void 0===a?void 0:a.level)),!1},controls:[{type:"text",name:"name",inputClassName:"max-width-500",label:n.default("数据转换器名称"),required:!0,validations:{maxLength:30}},{type:"editor",name:"content",label:n.default("数据转换器代码内容"),language:"javascript",size:"lg",required:!0,options:{formatOnPaste:!1}}]}:{type:"spinner",overlay:!0}}})},e.displayName="ApiAdaptorDialog",e=a.__decorate([i.observer],e)}(o.Component);e.default=d});
;sugar.define("sugar:widgets/api-adaptor-selector/api-adaptor-selector.tsx",function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=t("sugar:node_modules/tslib/tslib.js"),o=t("sugar:utils/i18n.ts"),i=t("sugar:node_modules/react/index.js"),s=t("sugar:stores/index.ts"),p=t("sugar:node_modules/amis/lib/index.js"),n=t("sugar:widgets/api-adaptor-selector/api-adaptor-item.tsx"),r=t("sugar:widgets/api-adaptor-selector/api-adaptor-editor.tsx"),d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a.__extends(e,t),e.prototype.componentWillMount=function(){var t=this.props.apiAdaptorStore;setTimeout(function(){t.simpleList.loadData()},2),this.editApiAdaptor=this.editApiAdaptor.bind(this),this.addApiAdaptor=this.addApiAdaptor.bind(this),this.onClose=this.onClose.bind(this),this.onSubmit=this.onSubmit.bind(this),this.selectApiAdaptor=this.selectApiAdaptor.bind(this),this.deleteItem=this.deleteItem.bind(this),this.onMoving=this.onMoving.bind(this),this.setState({openDialog:!1})},e.prototype.editApiAdaptor=function(t){var e,a=this.props.value[t];null===(e=this.props.apiAdaptorStore)||void 0===e?void 0:e.detailMap.loadDetail(a),this.setState({mode:"update",openDialog:!0,adaptorHash:a})},e.prototype.addApiAdaptor=function(){this.setState({mode:"add",openDialog:!0})},e.prototype.onClose=function(){this.setState({openDialog:!1})},e.prototype.selectApiAdaptor=function(t){var e=this.props.value||[];this.props.onChange([].concat(e,[t]))},e.prototype.deleteItem=function(t){var e=[].concat(this.props.value);e.splice(t,1),this.props.onChange(e)},e.prototype.onMoving=function(t,e){var a=this.props.value||[],o=[].concat(a),i=o[t];o[t]=o[e],o[e]=i,this.props.onChange(o)},e.prototype.onSubmit=function(t){var e=this,a=this.props.apiAdaptorStore;t.hash?a.update(t).then(function(t){t.res&&"done"===t.state&&(e.onClose(),p.toast.success(o.default("数据转换器更新成功")))}):a.add(t).then(function(t){if(t.res&&"done"===t.state){var a=t.res.data;e.selectApiAdaptor(a.hash),e.onClose(),p.toast.success(o.default("数据转换器新建成功"))}})},e.prototype.render=function(){var t=this,e=this.props,a=e.containerClassName,s=e.value,d=e.apiAdaptorStore,l=d.simpleList.data||[];return i.createElement("div",{className:(a||"")+" api-adaptor-selector"},s&&s.length&&d.simpleList.data?i.createElement("div",{className:"api-adaptor-selector__item-container"},s.map(function(e,a){return i.createElement(n.default,{apiAdaptorStore:d,hash:e,index:a,deleteItem:t.deleteItem,editApiAdaptor:t.editApiAdaptor,id:a+e,dndType:"adaptor-item-list",notCareIframe:!0,dndDefaultDragPreview:"yes",onMoving:t.onMoving,key:a+e})})):null,i.createElement("div",{className:"api-adaptor-selector__add"},i.createElement("div",{className:"api-adaptor-selector__select"},i.createElement(p.Select,{simpleValue:!0,className:"full-with",value:"",options:l.map(function(t){return{label:t.name,value:t.hash}}),onChange:this.selectApiAdaptor,locale:o.lang,placeholder:o.default("请新建或选择数据转换器"),searchable:l&&l.length>10})),i.createElement("div",{className:"api-adaptor-selector__btns"},i.createElement(p.TooltipWrapper,{tooltip:o.default("新建API数据转换器"),placement:"left"},i.createElement("i",{className:"fa fa-plus",onClick:this.addApiAdaptor})))),this.state.openDialog?i.createElement(r.default,{mode:this.state.mode,onClose:this.onClose,onSubmit:this.onSubmit,apiAdaptorEntity:"add"===this.state.mode?void 0:d.detailMap.mapByHash.get(this.state.adaptorHash)}):null)},e.displayName="ApiAdaptorSelector",e=a.__decorate([s.inject(function(t){return{apiAdaptorStore:t.apiAdaptor}}),s.observer],e)}(i.Component);e.default=d});
;sugar.define("sugar:widgets/ctrl-panel/data-bind-ctrl/index.tsx",function(a,e){"use strict";function t(a){var e=a.field||{},t=e.dataType,n=void 0===t?"dataConfig.dataType":t,l=e.needAutoRefresh,i=void 0===l?"dataConfig.needAutoRefresh":l,o=e.autoRefreshInterval,u=void 0===o?"dataConfig.autoRefreshInterval":o,r=e.autoDestory,s=void 0===r?"dataConfig.autoDestory":r,f=e.showNullData,c=void 0===f?"dataConfig.showNullData":f,m=e.isDashChart,p=void 0===m?0:m;return p?[h.amisInlineSwitch(i,d.default("自动刷新本图层数据"),"data."+n+" == 'json'"),{type:"number",name:u,hiddenOn:"data."+n+" == 'json' || !data."+i,step:b.autoRefreshStep,min:b.autoRefreshMinInterval,label:d.default("自动刷新间隔(秒)")},h.amisInlineSwitch(s,d.default("自动刷新时销毁并重绘"),"data."+n+" == 'json' || !data."+i),h.amisInlineSwitch(c,d.default("数据为空则展示空数据"),"data."+n+" == 'json' || !data."+i)]:[]}function n(a,e){return{type:"number",label:d.default("查询结果行数"),name:a+".dataConfig.dataModel.limit",hiddenOn:e,value:1e4,max:2e4,min:1,step:1}}Object.defineProperty(e,"__esModule",{value:!0}),e.commonBindUrlParamForDataModel=e.commonFilterForDataModel=e.commonFilterForSummaryDate=e.getCommonLimitForDataModel=e.commonLimitForDataModel=e.generateSQLFieldList=e.getAutoRefreshConfig=e.getDataBindCommon=e.getDebugAndRefreshBtn=e.apiPostTypeMap=void 0;var l=a("sugar:node_modules/tslib/tslib.js"),d=a("sugar:utils/i18n.ts"),i=a("sugar:node_modules/react/index.js"),o=a("sugar:widgets/ctrl-panel/data-bind-ctrl/debug-refresh-btn.tsx"),u=a("sugar:utils/url.ts"),r=a("sugar:widgets/handsontable.tsx"),s=a("sugar:widgets/sql-model-selector/sql-model-selector.tsx"),f=a("sugar:widgets/data-model/data-model-filter/data-model-filter.tsx"),c=a("sugar:widgets/data-model/data-model-summary-date-filter/data-model-summary-date-filter.tsx"),m=a("sugar:widgets/data-model/data-model-bind-url-param/bind-url-parma.tsx"),p=a("sugar:widgets/json-binder/json-binder.tsx"),g=a("sugar:widgets/ctrl-panel/data-bind-ctrl/exemption-condition.tsx"),v=a("sugar:widgets/ctrl-panel/common/switch-with-tip.tsx"),h=a("sugar:widgets/amis-inline-switch.tsx"),b=a("sugar:widgets/dashboard-ctrl-panel/chart-ctrl.tsx"),y=a("sugar:widgets/object-array-editor/object-array-editor.tsx"),C=a("sugar:widgets/api-adaptor-selector/api-adaptor-selector.tsx"),_=[{value:"json",label:"JSON"},{value:"form",label:"form-data"},{value:"x",label:"x-www-form-urlencode"}];e.apiPostTypeMap={},_.forEach(function(a){return e.apiPostTypeMap[a.value]=a.label}),e.getDebugAndRefreshBtn=function(a){var e=(a.field||{}).dataType,t=void 0===e?"dataType":e;return[{hiddenOn:t+' === "json"',children:i.createElement(o.default,l.__assign({},a))}]},e.getDataBindCommon=function(a){var e=window.sugarConfig.enableDataModel,t=a.field||{},n=t.dataType,o=void 0===n?"dataType":n,f=t.dataApiUrl,c=void 0===f?"dataApiUrl":f,m=t.staticData,b=void 0===m?"dataConfig.data":m,O=t.dataModelHash,x=void 0===O?"dataModelHash":O,P=t.dataJsonHash,T=void 0===P?"dataConfig.dataJsonHash":P,S=t.exemption,M=void 0===S?"dataConfig.exemption":S,q=t.cacheTTL,w=void 0===q?"dataConfig.cacheTTL":q,D=t.apiProOpen,I=void 0===D?"dataConfig.apiPro_open":D,A=t.apiProMethod,L=void 0===A?"dataConfig.apiPro_method":A,F=t.apiProGetAuto,E=void 0===F?"dataConfig.apiPro_getAuto":F,H=t.apiProHeaderList,j=void 0===H?"dataConfig.apiPro_headerList":H,R=t.apiProPostType,k=void 0===R?"dataConfig.apiPro_postType":R,U=t.apiProPostList,B=void 0===U?"dataConfig.apiPro_postList":U,N=t.apiProPostAuto,W=void 0===N?"dataConfig.apiPro_postAuto":N,J=t.apiProAdaptorOpen,Q=void 0===J?"dataConfig.apiPro_adaptorOpen":J,z=t.apiProAdaptorHash,G=void 0===z?"dataConfig.apiPro_adaptorHash":z,V=t.continuity,$=void 0===V?"dataConfig.continuity":V,K=t.continuity_type,X=void 0===K?"dataConfig.continuity_type":K,Y=t.continuity_time_step,Z=void 0===Y?"dataConfig.continuity_time_step":Y,ae=t.continuity_empty_val,ee=void 0===ae?"dataConfig.continuity_empty_val":ae,te=t.continuity_time_start_zero,ne=void 0===te?"dataConfig.continuity_time_start_zero":te,le=t.continuity_time_end_24,de=void 0===le?"dataConfig.continuity_time_end_24":le,ie=t.continuity_sequence_field,oe=void 0===ie?"dataConfig.continuity_sequence_field":ie,ue=t.continuity_sequence_start,re=void 0===ue?"dataConfig.continuity_sequence_start":ue,se=t.continuity_sequence_end,fe=void 0===se?"dataConfig.continuity_sequence_end":se,ce=(t.continuity_sequence_dig,d.default(a.label||"数据绑定方式")),me={sugarFlag:"dataTypeCtrl",type:e?"select":"radios",name:""+o,label:ce,desc:a.desc,options:[],popOverContainer:document.body,hiddenOn:"data.isExploreChart === 1"},pe=null,ge=null,ve=null,he=null;if(e&&a.dataTypeOptions.indexOf("dataModel")>=0&&me.options.push({label:d.default("数据模型"),value:"dataModel"}),a.dataTypeOptions.indexOf("sql")>=0){me.options.push({label:d.default("SQL建模"),value:"sql"}),pe=[{name:x,hiddenOn:"data."+o+" != 'sql'",children:function(a){var e=a.onChange,t=a.value;return i.createElement(s.default,l.__assign({},{onChange:e,value:t,containerClassName:"form-group form-item"}))}}];var be=a.sql||{hideExemption:!1,needContinuitySetting:!1};pe=pe.concat([{name:w,type:"select",label:d.default("数据缓存"),options:[{label:d.default("不缓存"),value:-1},{label:d.default("1 小时"),value:3600},{label:d.default("2 小时"),value:7200},{label:d.default("6 小时"),value:21600},{label:d.default("12 小时"),value:43200},{label:d.default("1 天"),value:86400},{label:d.default("3 天"),value:259200},{label:d.default("7 天"),value:604800}],value:-1,hiddenOn:"data."+o+" != 'sql' && data."+o+" != 'dataModel'"}]),pe=pe.concat([{type:"tpl",className:"text-info",tpl:d.default("可以在「数据源管理」中手动清理缓存"),visibleOn:"data."+w+" != -1 && data."+o+" === 'sql'"}]),be.hideExemption||pe.push({name:M,hiddenOn:"data."+o+" != 'sql'",children:function(a){var e=a.onChange,t=a.value;return i.createElement(g.default,l.__assign({},{onChange:e,value:t}))}}),be.needContinuitySetting&&be.sqlFieldList&&(pe=pe.concat([{type:"divider",hiddenOn:"data."+o+" != 'sql'"},{name:$,hiddenOn:"data."+o+" != 'sql'",children:function(a){var e=a.onChange,t=a.value;return i.createElement(v.default,l.__assign({},{onChange:e,value:t,label:d.default("数据自动补全"),tipText:d.default("什么是自动补全"),tipLink:"/docs/DataBind-SQL-Continue"}))}},{type:"radios",name:X,inline:!1,hiddenOn:"data."+o+" != 'sql' || !data."+$,label:d.default("数据补全方式"),options:[{label:d.default("按日期补全"),value:"date"},{label:d.default("按时间补全"),value:"time"},{label:d.default("按数字序列补全"),value:"sequence"},{label:d.default("简单补全"),value:"simple"}]},{type:"select",name:Z,hiddenOn:"data."+o+" != 'sql' || !data."+$+" || data."+X+" != 'time'",label:d.default("时间粒度"),options:[{label:d.default("6小时"),value:"6Hour"},{label:d.default("4小时"),value:"4Hour"},{label:d.default("3小时"),value:"3Hour"},{label:d.default("2小时"),value:"2Hour"},{label:d.default("1小时"),value:"1Hour"},{label:d.default("半小时"),value:"halfHour"},{label:d.default("15分钟"),value:"15Min"},{label:d.default("10分钟"),value:"10Min"},{label:d.default("5分钟"),value:"5Min"},{label:d.default("1分钟"),value:"1Min"},{label:d.default("30秒"),value:"30Sec"},{label:d.default("15秒"),value:"15Sec"},{label:d.default("10秒"),value:"10Sec"},{label:d.default("5秒"),value:"5Sec"},{label:d.default("1秒"),value:"1Sec"}]},{type:"select",name:ee,hiddenOn:"data."+o+" != 'sql' || !data."+$,label:d.default("补全类型"),options:[{label:d.default("补空"),value:"0"},{label:d.default("补零"),value:"1"}]},h.amisInlineSwitch(ne,"时间起点是0点","data."+o+" != 'sql' || !data."+$+" || data."+X+" != 'time'"),h.amisInlineSwitch(de,"时间补全到24点","data."+o+" != 'sql' || !data."+$+" || data."+X+" != 'time'"),{type:"select",name:oe,hiddenOn:"data."+o+" != 'sql' || !data."+$+" || data."+X+" != 'sequence'",label:d.default("序列字段"),placeholder:d.default("请选择"),options:be.sqlFieldList},{type:"number",name:re,hiddenOn:"data."+o+" != 'sql' || !data."+$+" || data."+X+" != 'sequence'",label:d.default("序列起始值（置空则为原序列最小值）"),step:1},{type:"number",name:fe,hiddenOn:"data."+o+" != 'sql' || !data."+$+" || data."+X+" != 'sequence'",label:d.default("序列结束值（置空则为原序列最大值）"),step:1},{type:"divider",hiddenOn:"data."+o+" != 'sql'"}]))}a.dataTypeOptions.indexOf("api")>=0&&(me.options.push({label:d.default("API拉取"),value:"api"}),ge=[{type:"textarea",name:""+c,placeholder:d.default("请输入API的url"),hiddenOn:"data."+o+" != 'api'"},{type:"tpl",hiddenOn:"data."+o+" != 'api'",tpl:'<div class="help-block" style="margin-top:-5px;margin-bottom:8px;">'+d.default('<a class="text-info" href="/docs/DataBind-API-Common" target="_blank">使用说明</a>。可使用示例地址：\\$CUR_HOST「'+a.api.demoUrl+"」，\\$CUR_HOST会自动被替换成当前域名「"+u.host+'」。您还可以在API中使用宏定义，详见\n        <a style="color:#108cee;" href="/docs/DataBind-API-Macro" target="_blank">API宏定义</a>。')+"</div>"},{type:"divider",hiddenOn:"data."+o+" != 'api'"},{name:I,hiddenOn:"data."+o+" != 'api'",children:function(a){var e=a.onChange,t=a.value;return i.createElement(v.default,l.__assign({},{onChange:e,value:t,label:d.default("开启API高级配置"),tipText:d.default("什么是API高级配置"),tipLink:"/docs/DataBind-API-Pro"}))}},{name:L,hiddenOn:"data."+o+" != 'api' || !data."+I,type:"select",label:d.default("API请求方式"),value:"post",options:[{value:"post",label:"POST"},{value:"get",label:"GET"}]},h.amisInlineSwitch(E,d.default("自动将过滤条件、联动等参数加到URL中"),"data."+o+" != 'api' || !data."+I+" || data."+L+" !== 'get'"),{name:j,hiddenOn:"data."+o+" != 'api' || !data."+I,children:function(e){var t=e.onChange,n=e.value;return i.createElement(y.default,l.__assign({},{onChange:t,value:n},{chartFrontendId:a.frontendId,containerClassName:"form-group form-item",label:d.default("Header头部设置"),addTipText:d.default("新增Header字段"),cols:[{type:"text",key:"k",name:d.default("字段名"),tdStyle:{minWidth:150}},{type:"text",key:"v",name:d.default("取值"),tdStyle:{minWidth:194}},{type:"select",key:"t",name:d.default("取值类型"),defaultValue:"str",list:[{label:d.default("字符串"),value:"str"},{label:d.default("数值"),value:"num"},{label:d.default("布尔"),value:"bool"}],tdStyle:{minWidth:110,maxWidth:120}}]}))}},{name:k,hiddenOn:"data."+o+" != 'api' || !data."+I+" || data."+L+" === 'get'",type:"select",label:d.default("POST数据方式"),value:"json",options:_},h.amisInlineSwitch(W,d.default("自动将过滤条件、联动等参数加到POST内容中"),"data."+o+" != 'api' || !data."+I+" || data."+L+" === 'get'",!0),{name:B,hiddenOn:"data."+o+" != 'api' || !data."+I+" || data."+L+" === 'get'",children:function(e){var t=e.onChange,n=e.value;return i.createElement(y.default,l.__assign({},{onChange:t,value:n},{chartFrontendId:a.frontendId,containerClassName:"form-group form-item",label:d.default("POST数据内容设置"),addTipText:d.default("新增POST字段"),cols:[{type:"text",key:"k",name:d.default("字段名"),tdStyle:{minWidth:150}},{type:"text",key:"v",name:d.default("取值"),tdStyle:{minWidth:194}},{type:"select",key:"t",name:d.default("取值类型"),defaultValue:"str",list:[{label:d.default("字符串"),value:"str"},{label:d.default("数值"),value:"num"},{label:d.default("布尔"),value:"bool"},{label:d.default("JSON对象或数组"),value:"json"}],tdStyle:{minWidth:110,maxWidth:120}}]}))}},{name:Q,hiddenOn:"data."+o+" != 'api' || !data."+I,children:function(a){var e=a.onChange,t=a.value;return i.createElement(v.default,l.__assign({},{onChange:e,value:t,label:d.default("开启API数据转换器"),tipText:d.default("什么是API数据转换器"),tipLink:"/docs/DataBind-API-Pro"}))}},{name:G,hiddenOn:"data."+o+" != 'api' || !data."+I+" || !data."+Q,children:function(a){var e=a.onChange,t=a.value;return i.createElement(C.default,l.__assign({},{onChange:e,value:t,containerClassName:"form-group form-item"}))}}]),a.dataTypeOptions.indexOf("static")>=0&&(me.options.push({label:d.default("静态录入"),value:"static"}),ve=a.static.simpleInput?[{type:"text",name:""+b,hiddenOn:"data."+o+" != 'static'",placeholder:d.default("请输入")}]:[{name:""+b,hiddenOn:"data."+o+" != 'static'",children:function(e){var t=e.onChange,n=e.value;return i.createElement(r.default,{className:"m-b-md",value:n,onChange:t,needExcel:!0,columnLength:a.static.columnLength,extraHeaders:a.static.headers,setting:{minCols:a.static.columnLength||2,stretchH:"all"}})}}]),a.dataTypeOptions.indexOf("json")>=0&&(me.options.push({label:d.default("静态JSON"),value:"json"}),he=[{name:T,hiddenOn:"data."+o+" != 'json'",children:function(e){var t=e.onChange,n=e.value;return i.createElement(p.default,l.__assign({},{onChange:t,value:n,loadData:a.loadData,loadDebugData:a.loadDebugData,debugText:a.debugText,refreshText:a.refreshText,demoUrl:a.api?a.api.demoUrl:"",curUrl:a.curUrl||""}))}}]);var ye=[me];return pe&&(ye=ye.concat(pe)),ge&&(ye=ye.concat(ge)),ve&&(ye=ye.concat(ve)),he&&(ye=ye.concat(he)),a.needAutoRefresh&&(ye=ye.concat()),ye},e.getAutoRefreshConfig=t,e.generateSQLFieldList=function(a){var e=a&&a.config&&a.config.model&&a.config.model.length?a.config.model.map(function(a){return{label:a.name&&a.name.trim()?a.name.trim()+"("+a.field+")":a.field,value:a.frontendId}}):[];return e},e.commonLimitForDataModel={type:"number",label:d.default("查询结果行数"),name:"dataConfig.dataModel.limit",hiddenOn:"dataType != 'dataModel'",value:1e4,max:window.sugarConfig.queryResultMaxRows||2e4,min:1,step:1},e.getCommonLimitForDataModel=n,e.commonFilterForSummaryDate=function(a,e,t){return void 0===a&&(a="dataConfig.dataModel.filterSummaryDate"),void 0===e&&(e="dataType != 'dataModel"),void 0===t&&(t=d.default("对比日期筛选")),{name:a,hiddenOn:e,children:function(a){var e=a.onChange,t=a.value;return i.createElement(c.default,l.__assign({},{onChange:e,value:t}))}}},e.commonFilterForDataModel=function(a,e,t,n){return void 0===e&&(e="dataConfig.dataModel.filters"),void 0===t&&(t="dataType != 'dataModel'"),void 0===n&&(n=d.default("数据筛选")),{name:e,hiddenOn:t,children:function(e){var t=e.onChange,d=e.value;return i.createElement(f.default,l.__assign({},{onChange:t,value:d,hash:a,label:n}))}}},e.commonBindUrlParamForDataModel=function(a,e,t){return void 0===e&&(e="dataConfig.dataModel.querys"),void 0===t&&(t="dataType != 'dataModel'"),{name:e,hiddenOn:t,children:function(e){var t=e.onChange,n=e.value;return i.createElement(m.default,l.__assign({},{onChange:t,value:n,dataModelHash:a,label:d.default("关联URL参数")}))}}}});
;sugar.define("sugar:widgets/ctrl-panel/condition/condition-dependence-ctrl.tsx",function(e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var t=e("sugar:node_modules/tslib/tslib.js"),o=e("sugar:utils/i18n.ts"),a=e("sugar:node_modules/react/index.js"),l=e("sugar:stores/index.ts"),i=e("sugar:node_modules/amis/lib/components/Select.js"),r=e("sugar:services/condition-dependence.ts"),s=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return t.__extends(n,e),n.prototype.render=function(){var e=this.props,n=e.value,t=e.onChange,l=e.conditionSelfKey,s=e.conditionList;return a.createElement("div",{className:"form-group form-item form-group--relative m-t-md"},a.createElement("label",{className:"control-label"},o.default("依赖的其他过滤条件")),a.createElement(i.default,{className:"full-with",multiple:!0,value:n,onChange:function(e){t(e?e.map(function(e){return e.value}):[])},options:s.data.filter(function(e){return e.key!==l&&~r.canBeDependencedConditionType.indexOf(e.type)}).map(function(e){return{value:e.key,label:e.label}}),placeholder:o.default("请选择"),locale:o.lang,clearable:!0}),a.createElement("div",{className:"text-info"},a.createElement("a",{href:"/docs/Condition-Dependence",target:"_blank"},o.default("什么是『依赖/级联』?"))))},n.displayName="ConditionDependenceCtrl",n=t.__decorate([l.inject(function(e){return{conditionList:e.condition.list}}),l.observer],n)}(a.Component);n.default=s});
;sugar.define("sugar:widgets/pop-menu/pop-menu.tsx",function(e,t){"use strict";function n(e,t){s&&s.show(e,t)}function i(){s&&s.hide()}function o(){return s?s.getPopMenuTree():null}function r(e){return s?s.setPopMenuTree(e):void 0}Object.defineProperty(t,"__esModule",{value:!0}),t.popMenu=t.PopMenuComponent=void 0;var s,u=e("sugar:node_modules/tslib/tslib.js"),a=e("sugar:node_modules/react/index.js"),h=e("sugar:node_modules/classnames/index.js"),p=e("sugar:node_modules/lodash/cloneDeep.js"),l=e("sugar:utils/exception.ts"),c=function(e,t){void 0===t&&(t=1);var n=t;return e.forEach(function(e){if(e.children&&e.children.length){var i=c(e.children,t+1);i>n&&(n=i)}}),n},d=function(e){function t(t){var n=e.call(this,t)||this;return n.popMenuTree=[],n.state={show:!1,horizontalDirection:"right",x:0,y:0,activePath:[]},n}return u.__extends(t,e),t.prototype.getPopMenuTree=function(){return this.popMenuTree?p(this.popMenuTree):null},t.prototype.setPopMenuTree=function(e){e&&(this.popMenuTree=e)},t.prototype.componentDidCatch=function(e,t){l.captureException(e,t)},t.prototype.componentWillMount=function(){this.itemHover=this.itemHover.bind(this),this.generateMenu=this.generateMenu.bind(this),this.show=this.show.bind(this),this.hide=this.hide.bind(this),this.selfHide=this.selfHide.bind(this)},t.prototype.itemHover=function(e){this.setState({activePath:e})},t.prototype.generateMenu=function(e,t,n,i){var o=this;if(void 0===i&&(i=!1),e&&e.length){var r=9;e.forEach(function(e){r+=e.divider?7:32});var s={};if(i){var u=this.state.x;u+200+10>window.innerWidth&&(u=window.innerWidth-210),t+r+10>window.innerHeight&&(t=window.innerHeight-r-10),s.left=u+"px",s.top=t+"px"}else{var p=t;t+r+10>window.innerHeight&&(t=window.innerHeight-r-10),s={left:"right"===this.state.horizontalDirection?"198px":"-199px",top:t-p+"px"}}return t+=1,a.createElement("ul",{className:h("pop-menu",{"sub-menu":!i}),style:s},e.map(function(e,i){if(e.divider)return t+=7,a.createElement("li",{className:"divider",key:i});var r="";e.children&&e.children.length?r=a.createElement("span",{className:"shortCut"},a.createElement("i",{className:"fa fa-angle-right"})):e.shortCut&&(r=a.createElement("span",{className:"shortCut"},e.shortCut));var s=t;t+=0===i?35:32;var u=n.concat([i]);return a.createElement("li",{className:h("pop-menu-item",{active:o.state.activePath.slice(0,u.length).join(",")===u.join(",")}),onClick:e.cb,key:i,style:e.style||{},onMouseEnter:function(){return o.itemHover(n.concat([i]))}},a.createElement("i",{className:e.icon+" menu-icon"}),e.name,r,e.children&&e.children.length?o.generateMenu(e.children,s,u):null)}))}return null},t.prototype.show=function(e,t){if(!isNaN(e)&&!isNaN(t)){var n=c(this.popMenuTree),i="right";e+200*n+10>window.innerWidth&&(i="left"),this.setState({x:e,y:t,show:!0,horizontalDirection:i})}},t.prototype.hide=function(){this.state.show&&this.setState({show:!1,activePath:[]})},t.prototype.selfHide=function(e){e.stopPropagation(),e.preventDefault(),this.hide()},t.prototype.render=function(){return this.state.show&&this.popMenuTree&&this.popMenuTree.length?a.createElement("div",{onClick:this.selfHide,onContextMenu:this.selfHide},a.createElement("div",{className:"pop-menu-backdrop"}),this.generateMenu(this.popMenuTree,this.state.y,[],!0)):null},t.displayName="PopMenu",t}(a.Component),f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return u.__extends(t,e),t.prototype.componentWillUnmount=function(){s=null},t.prototype.render=function(){return s?null:a.createElement(d,u.__assign({},this.props,{ref:function(e){return s=e}}))},t}(a.PureComponent);t.PopMenuComponent=f,t.popMenu={show:n,hide:i,getPopMenuTree:o,setPopMenuTree:r}});
;sugar.define("sugar:widgets/data-model/data-model-field-holder/helper.ts",function(e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.getCommon2LevelMenu=void 0,n.getCommon2LevelMenu=function(e,n,i,r,t,a){var o=t.map(function(e){return"divider"===e[0]&&e[1]?{divider:!0}:e[1]||0===e[1]?{icon:r===e[1]?"fa fa-check":"fa",name:e[0],cb:function(){return a(i,e[1])}}:{icon:r?"fa":"fa fa-check",name:e[0],cb:function(){return a(i,"")}}});return{icon:e,name:n,children:o}}});
;sugar.define("sugar:utils/color-helper.ts",function(r,t){"use strict";function e(r,t,e){var o=/^rgb|RGB\((([0-9]|[1-9]\d|1\d\d|2([0-4]\d|5[0-5])),){2}([0-9]|[1-9]\d|1\d\d|2([0-4]\d|5[0-5]))\)$/,a=/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i,i=[],u=[];a.test(r)?i=n(r):o.test(r)&&(i=r.substring(3,15).split(",")),a.test(t)?u=n(t):o.test(r)&&(u=t.substring(3,15).split(","));for(var g=i[0],f=i[1],l=i[2],d=u[0],c=u[1],p=u[2],v=(d-g)/e,b=(c-f)/e,h=(p-l)/e,I=[],C=0;e>C;C++)I.push(s(parseInt(v*C+g),parseInt(b*C+f),parseInt(h*C+l)));return I}function n(r){var t=r.toLowerCase().substring(1,r.length),e=[];return e.push(parseInt(t.substring(0,2),16)),e.push(parseInt(t.substring(2,4),16)),e.push(parseInt(t.substring(4,6),16)),e}function s(r,t,e){var n="#"+o(r.toString(16))+o(t.toString(16))+o(e.toString(16));return n}function o(r){var t="00"+r;return t.substring(t.length-2,t.length)}function a(r){var t="0x"+r.replace(/#/g,""),e="000000"+(16777215-Number(t)).toString(16);return"#"+e.substring(e.length-6,e.length)}function i(r){var t=/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/,e=r.toLowerCase();if(e&&t.test(e)){if(4===e.length){for(var n="#",s=1;4>s;s+=1)n+=e.slice(s,s+1).concat(e.slice(s,s+1));e=n}for(var o=[],s=1;7>s;s+=2)o.push(parseInt("0x"+e.slice(s,s+2)));return"rgb("+o.join(",")+")"}return e}function u(r){var t="";t=~r.indexOf("rgb")?r:i(r);var e=t.match(/^rgba{0,1}\((\d+),\s*(\d+),\s*(\d+),*\s*(\d*)\)$/);if(e){var n=parseInt(e[1]),s=parseInt(e[2]),o=parseInt(e[3]),a=void 0;return a=299*n+587*s+114*o,a/=255e3,a>=.5?!0:!1}return!1}Object.defineProperty(t,"__esModule",{value:!0}),t.getContrastYIQ=t.colorRgb=t.colorReverse=t.fAddZero=t.fColorToHex=t.fAnalysisRGB=t.fColorGradualChange=void 0,t.fColorGradualChange=e,t.fAnalysisRGB=n,t.fColorToHex=s,t.fAddZero=o,t.colorReverse=a,t.colorRgb=i,t.getContrastYIQ=u});
;sugar.define("sugar:widgets/data-model/data-model-field-holder/field-color-picker.tsx",function(e,l){"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.colorTemplateList=void 0;var t=e("sugar:node_modules/tslib/tslib.js"),o=e("sugar:utils/i18n.ts"),a=e("sugar:node_modules/react/index.js"),r=e("sugar:node_modules/amis/lib/index.js"),s=e("sugar:node_modules/amis/lib/components/ColorPicker.js"),n=e("sugar:sites/amis-renderer.tsx"),c=e("sugar:utils/color-helper.ts"),i=e("sugar:node_modules/lodash/cloneDeep.js"),u=e("sugar:node_modules/lodash/isEqual.js");l.colorTemplateList=[{label:o.default("天蓝"),value:["#a9dbff","#54a8f7"]},{label:o.default("冰绿"),value:["#9ef8ea","#00c4c0"]},{label:o.default("石绿"),value:["#b1ea50","#449522"]},{label:o.default("桃红"),value:["#ffc3bf","#f86b6b"]},{label:o.default("品红"),value:["#f4505f","#a0051c"]},{label:o.default("浅橙"),value:["#ffebb4","#ffb539"]},{label:o.default("橘黄"),value:["#fad760","#f76d1d"]},{label:o.default("红-绿"),value:["#a0051c","#449522"]},{label:o.default("橙-蓝"),value:["#f76d1d","#0099ff"]},{label:o.default("天蓝-冰绿"),value:["#56a9f7","#58f5ca"]},{label:o.default("冰绿-亮黄"),value:["#00c4c0","#ffdf5d"]},{label:o.default("桃红-洋红"),value:["#f86b6b","#ff70bf"]}];var d=function(e){function d(){return null!==e&&e.apply(this,arguments)||this}return t.__extends(d,e),d.prototype.componentWillMount=function(){var e=this.props.value;this.toggleDialogHandle=this.toggleDialogHandle.bind(this),this.toggleColorSelect=this.toggleColorSelect.bind(this),this.colorLevelSet=this.colorLevelSet.bind(this),this.confirmDialogHandle=this.confirmDialogHandle.bind(this),this.initColor=this.initColor.bind(this),this.setState({showColorPickerDialog:!1,showColorSelect:!1,hasLevel:!1,reverse:!1,isColorReverse:!1,levelCount:5,levelColors:[],selectColor:{label:o.default("天蓝"),value:["#a9dbff","#54a8f7"]},defaultSelectColor:{label:o.default("天蓝"),value:["#a9dbff","#54a8f7"]}}),e&&this.initColor(e)},d.prototype.componentWillReceiveProps=function(e){var l=e.value,t=this.state.selectColor;l&&!u(l.colors,t.value)&&this.initColor(l)},d.prototype.initColor=function(e){if(e.colors&&e.colors.length){var t=l.colorTemplateList.find(function(l){return l.value[0]===e.colors[0]&&l.value[1]===e.colors[1]});this.setState({selectColor:t||{label:o.default("自定义"),value:e.colors},defaultSelectColor:t||{label:o.default("自定义"),value:e.colors}})}e.hasLevel&&this.setState({levelColors:c.fColorGradualChange(e.colors[0],e.colors[1],e.levelCount)}),this.setState({levelCount:e.levelCount||5,reverse:e.reverse||!1,isColorReverse:e.reverse||!1,hasLevel:e.hasLevel||!1})},d.prototype.toggleDialogHandle=function(){var e=this.state.showColorPickerDialog;this.setState({showColorPickerDialog:!e})},d.prototype.toggleColorSelect=function(){var e=this.state.showColorSelect;this.setState({showColorSelect:!e})},d.prototype.toggleColor=function(e){this.setState({selectColor:e,defaultSelectColor:e,hasLevel:!1,reverse:!1,isColorReverse:!1,levelCount:5,levelColors:[]}),this.toggleColorSelect()},d.prototype.changeColor=function(e,l){var t=this.state,a=t.selectColor,r=t.hasLevel,s=t.levelCount,n=i(a);e&&"left"===l&&(n={label:o.default("自定义"),value:[e,a.value[1]]}),e&&"right"===l&&(n={label:o.default("自定义"),value:[a.value[0],e]}),r&&this.setState({levelColors:c.fColorGradualChange(JSON.parse(e).value[0],JSON.parse(e).value[1],s)}),this.setState({selectColor:n,defaultSelectColor:i(n)})},d.prototype.colorLevelSet=function(e){var l,t,a=this.state,r=a.selectColor,s=a.defaultSelectColor,n=a.isColorReverse;e&&e.hasOwnProperty("hasLevel")&&this.setState({hasLevel:e.hasLevel,levelCount:e.levelCount||5,levelColors:c.fColorGradualChange(r.value[0],r.value[1],e.levelCount||5)}),e&&e.reverse&&!n&&(l=[r.value[1],r.value[0]],r.value[0]=l[0],r.value[1]=l[1],this.setState({reverse:e.reverse,isColorReverse:e.reverse,selectColor:{label:o.default("自定义"),value:r.value},levelColors:c.fColorGradualChange(r.value[0],r.value[1],e.levelCount||5)})),e&&!e.reverse&&(n?(t=[r.value[1],r.value[0]],r.value[0]=t[0],r.value[1]=t[1],t):null,this.setState({reverse:e.reverse,isColorReverse:e.reverse,selectColor:i(s),levelColors:c.fColorGradualChange(s.value[0],s.value[1],e.levelCount||5)}))},d.prototype.confirmDialogHandle=function(){var e=this.state,l=e.reverse,t=e.selectColor,o=e.hasLevel,a=e.levelCount,r=(e.levelColors,{reverse:l,levelCount:a,hasLevel:o,colors:t.value});this.props.onChange(r),this.toggleDialogHandle()},d.prototype.render=function(){var e=this,t=this.state,c=t.showColorPickerDialog,i=t.showColorSelect,u=t.selectColor,d=t.reverse,v=t.hasLevel,f=t.levelCount,h=t.levelColors,m={reverse:d,levelCount:f,hasLevel:v},C=this.props,g=C.label,p=C.containerClassName;return a.createElement("div",{className:"field-color-picker"},g?a.createElement("label",null,g):null,a.createElement("div",{className:"field-color-picker-color "+(p||""),style:{backgroundImage:"linear-gradient(to right, "+u.value[0]+", "+u.value[1]+")"},onClick:this.toggleDialogHandle}),a.createElement(r.Modal,{show:c,backdrop:"static",className:"field-color-picker-modal",contentClassName:"field-color-picker-modal-content"},a.createElement(r.Modal.Header,{showCloseButton:!0,onClose:function(){return e.setState({showColorPickerDialog:!1})}},a.createElement(r.Modal.Title,null,g||o.default("编辑连续颜色"))),a.createElement(r.Modal.Body,{key:"modalBody"},a.createElement("div",{className:"field-color-picker-content"},a.createElement("div",{className:"field-color-picker-content-row"},a.createElement("span",null,o.default("选择颜色模板")),a.createElement("div",{className:"field-color-picker-content-row-select"},a.createElement("div",{className:"field-color-picker-content-row-select-box",onClick:this.toggleColorSelect},a.createElement("div",null,a.createElement("span",{className:"field-color-picker-content-row-select-box-showicn",style:{backgroundImage:"linear-gradient(to right, "+u.value[0]+", "+u.value[1]+")"}}),a.createElement("span",null,u.label)),a.createElement("span",{className:"fas a-Select-arrow"})),i&&a.createElement("ul",{className:"field-color-picker-content-row-select-menu"},l.colorTemplateList.map(function(l,t){return a.createElement("li",{key:t,onClick:function(){return e.toggleColor(l)},className:"field-color-picker-content-row-select-menu-option"},a.createElement("span",{className:"field-color-picker-content-row-select-box-showicn",style:{backgroundImage:"linear-gradient(to right, "+l.value[0]+", "+l.value[1]+")"}}),a.createElement("span",null,l.label))})))),a.createElement("div",{className:"field-color-picker-content-row"},a.createElement("div",{className:"field-color-picker-content-row-rect-left"},a.createElement(s.default,{value:u.value[0],onChange:function(l){return e.changeColor(l,"left")}})),v?a.createElement("div",{className:"field-color-picker-content-row-rect-center"},h.map(function(e,l){return a.createElement("div",{key:l,style:{width:100/f+"%",height:"50px",background:e}})})):a.createElement("div",{className:"field-color-picker-content-row-rect-center",style:{backgroundImage:"linear-gradient(to right, "+u.value[0]+", "+u.value[1]+")"}}),a.createElement("div",{className:"field-color-picker-content-row-rect-right"},a.createElement(s.default,{value:u.value[1],onChange:function(l){return e.changeColor(l,"right")}}))),a.createElement("div",{className:"field-color-picker-content-row2"},a.createElement(n.default,{data:m,schema:{type:"page",body:{title:"",type:"form",mode:"horizontal",actions:[],submitText:null,controls:[{type:"group",controls:[{type:"checkbox",name:"hasLevel",className:"dm-field-ctrl",value:!1,label:!1,option:o.default("色阶")},{type:"number",name:"levelCount",label:o.default("色阶个数"),min:1,max:20,value:5,disabledOn:"!hasLevel"},{type:"checkbox",name:"reverse",value:!1,label:!1,className:"text-right",option:o.default("反转")}]}]}},onChange:this.colorLevelSet})))),a.createElement(r.Modal.Footer,{key:"modalFooter"},a.createElement(r.Button,{level:"primary",onClick:this.confirmDialogHandle},o.default("确定")),a.createElement(r.Button,{onClick:function(){return e.setState({showColorPickerDialog:!1})}},o.default("取消")))))},d.displayName="FieldColorPicker",d}(a.Component);l.default=d});
;sugar.define("sugar:widgets/data-model/data-model-field-holder/field-ctrl.tsx",function(e,l){"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.conditionalFormattingMeaCtrl=l.conditionalFormattingSummaryCtrl=l.conditionalFormattingDimCtrl=void 0;var a=e("sugar:node_modules/tslib/tslib.js"),t=e("sugar:utils/i18n.ts"),u=e("sugar:node_modules/react/index.js"),o=e("sugar:widgets/data-model/data-model-field-holder/field-color-picker.tsx");l.conditionalFormattingDimCtrl=[{type:"select",name:"value.target",label:t.default("显示类型"),value:"background",clearable:!0,options:[{label:t.default("背景颜色"),value:"background"},{label:t.default("文字颜色"),value:"text"}]},{type:"combo",multiple:!0,multiLine:!0,addable:!0,draggable:!0,name:"value.conditions",value:[{}],className:"dm-field-ctrl",addButtonText:t.default("添加显示规则"),label:"显示规则",description:t.default("注：规则读取顺序由上至下，后一条规则覆盖前一条生效"),controls:[{type:"group",label:t.default("如果值"),controls:[{type:"select",name:"match.type",clearable:!0,options:[{label:t.default("包含"),value:"include"},{label:t.default("不包含"),value:"exclude"},{label:t.default("开头是"),value:"start"},{label:t.default("结尾是"),value:"end"},{label:t.default("等于"),value:"eq"},{label:t.default("不等于"),value:"ineq"}]},{type:"text",name:"match.value"}]},{type:"group",label:t.default("显示为"),controls:[{type:"color",name:"color"}]}]},{type:"checkbox",visibleOn:"this.value && this.value.target === 'background'",label:t.default("突出字体"),option:"",name:"value.colorReverse",value:!1},{type:"radios",name:"value.displayRange",label:t.default("显示范围"),value:"cell",inline:!0,options:[{label:t.default("单元格"),value:"cell"},{label:t.default("整行"),value:"row"}]}],l.conditionalFormattingSummaryCtrl=[{type:"combo",name:"value.conditions",multiple:!0,multiLine:!0,addable:!0,draggable:!0,value:[{}],className:"dm-field-ctrl",addButtonText:t.default("添加显示规则"),label:"显示规则",description:t.default("注：规则读取顺序由上至下，后一条规则覆盖前一条生效"),controls:[{type:"group",label:t.default("如果值"),controls:[{type:"select",name:"min.type",clearable:!0,options:[{label:t.default("大于"),value:"gt"},{label:t.default("大于等于"),value:"gte"},{label:t.default("等于"),value:"eq"},{label:t.default("不设置"),value:"none"},{label:t.default("为空"),value:"null"}]},{type:"number",name:"min.value",disabledOn:"this.min && this.min.type === 'none'",hiddenOn:"this.min && this.min.type === 'null'"}]},{type:"group",label:t.default("且"),hiddenOn:"this.min && this.min.type === 'eq'",controls:[{type:"select",name:"max.type",clearable:!0,options:[{label:t.default("小于"),value:"lt"},{label:t.default("小于等于"),value:"lte"},{label:t.default("不设置"),value:"none"}]},{type:"number",name:"max.value",disabledOn:"this.max && this.max.type === 'none'"}]},{type:"color",name:"color",label:t.default("则显示为"),className:"dm-field-ctrl"}]}],l.conditionalFormattingMeaCtrl=[{type:"radios",name:"type",inline:!0,label:t.default("展示方式"),strictMode:!1,defaultValue:"gradient",options:[{label:t.default("颜色变化"),value:"gradient"},{label:t.default("条形图"),value:"bar"},{label:t.default("突出显示单元格"),value:"cell"}]},{visibleOn:"type === 'cell'",type:"group",direction:"vertical",controls:[l.conditionalFormattingSummaryCtrl[0],{type:"checkbox",label:t.default("突出字体"),option:"",name:"value.colorReverse",value:!1},{type:"radios",name:"value.displayRange",label:t.default("显示范围"),value:"cell",inline:!0,options:[{label:t.default("单元格"),value:"cell"},{label:t.default("整行"),value:"row"}]}]},{visibleOn:"type === 'bar'",type:"group",direction:"vertical",controls:[{type:"group",label:t.default("条形颜色"),className:"dm-field-ctrl dm-field-ctrl-bar",direction:"vertical",controls:[{type:"color",name:"value.background.color",placeholder:"",label:!1,className:"dm-field-ctrl-bar-color-label-none",hiddenOn:"this.value && this.value.diff"},{type:"group",visibleOn:"this.value && this.value.diff",className:"dm-field-ctrl",direction:"vertical",controls:[{type:"group",controls:[{type:"color",name:"value.background.positive",placeholder:"",label:t.default("正数")},{type:"color",name:"value.background.negative",placeholder:"",label:t.default("负数")}]}]},{type:"checkbox",name:"value.diff",className:"dm-field-ctrl-bar-color-label-none",value:!1,label:!1,option:t.default("区分正负值")}]},{type:"checkbox",label:t.default("突出字体"),option:"",name:"value.colorReverse",value:!1},{type:"radios",name:"value.range.type",label:t.default("数值范围"),inline:!0,value:"auto",options:[{label:t.default("自动"),value:"auto"},{label:t.default("自定义"),value:"custom"}]},{type:"group",className:"dm-field-ctrl",visibleOn:"this.value && this.value.range && this.value.range.type === 'custom'",controls:[{type:"number",name:"value.range.min",placeholder:t.default("最小值")},{type:"number",name:"value.range.max",label:"-",className:"dm-field-ctrl-bar-color-label-none",placeholder:t.default("最大值")}]}]},{type:"group",visibleOn:"type === 'gradient'",direction:"vertical",controls:[{type:"select",name:"value.target",clearable:!0,label:t.default("显示类型"),value:"background",options:[{label:t.default("背景颜色"),value:"background"},{label:t.default("文字颜色"),value:"text"}]},{type:"group",label:t.default("颜色"),controls:[{name:"value.color",value:{reverse:!1,levelCount:5,hasLevel:!1,colors:["#a9dbff","#54a8f7"]},children:function(e){var l=e.onChange,t=e.value;return u.createElement(o.default,a.__assign({},{onChange:l,value:t}))}}]},{type:"checkbox",name:"value.colorReverse",label:t.default("突出字体"),option:"",value:!1,visibleOn:"this.value && this.value.target === 'background'"},{type:"select",name:"value.nullValue.type",clearable:!0,label:t.default("空值处理"),value:"none",options:[{label:t.default("不显示颜色"),value:"none"},{label:t.default("自定义"),value:"cus"}]},{type:"color",name:"value.nullValue.color",visibleOn:"this.value && this.value.nullValue && this.value.nullValue.type === 'cus'",className:"dm-field-ctrl"}]}]});
;sugar.define("sugar:widgets/data-model/data-model-field-holder/dimension-field.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DimensionFieldSortable=t.DimensionField=t.textAlignOptions=void 0;var a=e("sugar:node_modules/tslib/tslib.js"),l=e("sugar:utils/i18n.ts"),i=e("sugar:node_modules/react/index.js"),o=e("sugar:node_modules/classnames/index.js"),n=e("sugar:stores/index.ts"),s=e("sugar:widgets/dnd-sort.tsx"),d=e("sugar:widgets/pop-menu/pop-menu.tsx"),r=e("sugar:widgets/form-dialog.tsx"),u=e("sugar:widgets/data-model/data-model-field-holder/helper.ts"),h=e("sugar:node_modules/lodash/cloneDeep.js"),c=e("sugar:node_modules/lodash/set.js"),p=e("sugar:widgets/data-model/data-model-field-holder/field-ctrl.tsx"),f=e("sugar:utils/date-helper.ts");t.textAlignOptions=[{label:l.default("自动"),value:"auto"},{label:l.default("居左"),value:"left"},{label:l.default("居中"),value:"center"},{label:l.default("居右"),value:"right"}];var m=function(e){function s(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(s,e),s.prototype.componentWillMount=function(){this.setState({showAliasDialog:!1,showTableDimColDialog:!1,showTablePlayDimColDialog:!1,showConditionalFormattingDialog:!1,showSortCusDialog:!1,showChartConDialog:!1,showChartConDateDialog:!1}),this.showContextMenu=this.showContextMenu.bind(this),this.deleteField=this.deleteField.bind(this),this.changeValue=this.changeValue.bind(this),this.changeAlias=this.changeAlias.bind(this),this.changeTableDimCol=this.changeTableDimCol.bind(this),this.changeTablePlayDimCol=this.changeTablePlayDimCol.bind(this),this.changeConditionalFormatting=this.changeConditionalFormatting.bind(this),this.changeSort=this.changeSort.bind(this),this.changeSortCus=this.changeSortCus.bind(this),this.changeChartCon=this.changeChartCon.bind(this),this.changeChartDateCon=this.changeChartDateCon.bind(this),this.reloadChartConditionData=this.reloadChartConditionData.bind(this)},s.prototype.deleteField=function(){this.props.deleteField(this.props.index)},s.prototype.changeValue=function(e,t){var a=h(this.props.value);c(a,e,t),this.props.onChange(this.props.index,a)},s.prototype.changeAlias=function(e){this.changeValue("alias",(e.alias||"").trim()),this.setState({showAliasDialog:!1})},s.prototype.changeTableDimCol=function(e){var t=(e.alias,a.__rest(e,["alias"])),l=h(this.props.value);c(l,"alias",(e.alias||"").trim()),c(l,"tableCol",t),this.props.onChange(this.props.index,l),this.setState({showTableDimColDialog:!1})},s.prototype.changeTablePlayDimCol=function(e){var t=(e.alias,a.__rest(e,["alias"])),l=h(this.props.value);c(l,"alias",(e.alias||"").trim()),c(l,"tableCol",t),this.props.onChange(this.props.index,l),this.setState({showTablePlayDimColDialog:!1})},s.prototype.changeConditionalFormatting=function(e){var t=(e.alias,a.__rest(e,["alias"])),l=h(this.props.value);c(l,"alias",(e.alias||"").trim()),c(l,"conditionFormat",t),this.props.onChange(this.props.index,l),this.setState({showConditionalFormattingDialog:!1})},s.prototype.changeSort=function(e,t){var a=h(this.props.value);"cus"!==t?(c(a,e,t),c(a,"sortCus",{}),this.props.onChange(this.props.index,a),this.reloadChartConditionData()):(c(a,e,t),a.sortCus||c(a,"sortCus",{other:"asc"}),this.props.onChange(this.props.index,a),this.setState({showSortCusDialog:!0}))},s.prototype.changeSortCus=function(e){var t=e.bottom,a=e.top,l=e.other;this.changeValue("sortCus",{bottom:t,top:a,other:l}),this.setState({showSortCusDialog:!1}),this.reloadChartConditionData()},s.prototype.reloadChartConditionData=function(){if(this.props.chart&&this.props.chartCondition){var e=this.props.chart.frontendId+"-"+this.props.value.frontendId,t=this.props.chartCondition.chartConditionData.mapByChartAndDimFrontendId.get(e);t&&t.loadData(this.props.chart,this.props.value)}},s.prototype.changeChartCon=function(e){var t=e.type,a=void 0===t?"multi":t,l=e.mutex,i=e.singleValue,o=e.multiValue,n=e.alias,s=e.forceUI,d=e.disableCheckAll,r="multi"===a?o:i,u=h(this.props.value);c(u,"alias",(n||"").trim()),c(u,"chartCon",{type:a,mutex:l,defaultValue:r,forceUI:s,disableCheckAll:d}),this.props.onChange(this.props.index,u),this.props.chartCondition&&this.props.chart&&this.props.chartCondition.chartConditionValue.setValueByDeafaultVal(this.props.chart.frontendId,this.props.value,r),this.setState({showChartConDialog:!1})},s.prototype.changeChartDateCon=function(e){var t=e.alias,a=e.date,l=e.config,i=h(this.props.value);"cus"!==a&&(l={});var o={defaultValue:{date:a,config:l}};c(i,"alias",(t||"").trim()),c(i,"chartCon",o),this.props.onChange(this.props.index,i),this.props.chartCondition&&this.props.chart&&(null===a||void 0===a?void 0:a.length)&&this.props.chartCondition.chartConditionValue.setValueByDeafaultVal(this.props.chart.frontendId,this.props.value,o.defaultValue),this.setState({showChartConDateDialog:!1})},s.prototype.showContextMenu=function(e){var t,a=this;e.stopPropagation(),e.preventDefault();var i=this.props,o=i.value,n=i.dimConfig;if(null!==n.contextMenu){var s=this.props.dmSchema.dimensions.get(o.id),r=s.convert.type||s.dataType,h=[{icon:"fa fa-edit",name:l.default("修改展示名称"),cb:function(){return a.setState({showAliasDialog:!0})}}],c=[];n.contextMenu&&n.contextMenu.forEach(function(e){switch(e){case"divider":c.push({divider:!0});break;case"tableDimCol":c.push({icon:"fas fa-columns",name:l.default("维度列设置"),cb:function(){return a.setState({showTableDimColDialog:!0})}});break;case"tablePlayDimCol":c.push({icon:"fas fa-columns",name:l.default("维度列设置"),cb:function(){return a.setState({showTablePlayDimColDialog:!0})}});break;case"conditionalFormatting":c.push({icon:"fas fa-th-list",name:l.default("条件格式"),cb:function(){return a.setState({showConditionalFormattingDialog:!0})}});break;case"chartCon":("string"===r||"int"===r)&&c.push({icon:"fas fa-filter",name:l.default("过滤条件设置"),cb:function(){return a.setState({showChartConDialog:!0})}}),("date"===r||"timestamp"===r||"datetime"===r)&&c.push({icon:"fas fa-filter",name:l.default("过滤条件设置"),cb:function(){return a.setState({showChartConDateDialog:!0})}})}});var p=[],f=[[l.default("无"),""],[l.default("年"),"YEAR"],[l.default("年-季度"),"YEAR-QUARTER"],[l.default("年-月"),"YEAR-MONTH"],[l.default("年-周(跨年)"),"TRUNC-FULLWEEK"],[l.default("年-周(不跨年)"),"YEAR-WEEK"],[l.default("年-月-日"),"YEAR-MONTH-DAY"],["divider",!0],[l.default("季度"),"QUARTER"],[l.default("月"),"MONTH"],[l.default("周"),"WEEK"],[l.default("星期"),"DAYOFWEEK"],[l.default("日"),"DAY"]];if(("timestamp"===r||"datetime"===r)&&(f.splice(7,0,[l.default("年-月-日-小时"),"YEAR-MONTH-DAY-HOUR"],[l.default("年-月-日 小时-分"),"YEAR-MONTH-DAY-HOUR-MINUTE"]),f.push([l.default("小时"),"HOUR"],[l.default("分钟"),"MINUTE"],[l.default("秒"),"SECOND"])),("date"===r||"timestamp"===r||"datetime"===r)&&(!n.contextMenu||n.contextMenu&&!~(null===(t=n.contextMenu)||void 0===t?void 0:t.indexOf("chartCon")))){var m=l.default("日期数据聚合");m=l.default("timestamp"===r||"datetime"===r?"时间数据聚合":"日期数据聚合"),p=[{divider:!0},u.getCommon2LevelMenu("fa fa-calendar-alt",m,"dateTimeType",o.dateTimeType,f,this.changeValue)]}var g=u.getCommon2LevelMenu("fa fa-sort-amount-up-alt",l.default("排序"),"sort",o.sort,[[l.default("无"),""],[l.default("升序"),"asc"],[l.default("降序"),"desc"]],this.changeSort);("string"===r||"int"===r&&s.renameHash)&&g.children.push({icon:"cus"===o.sort?"fa fa-check":"fa",name:l.default("自定义"),cb:function(){return a.changeSort("sort","cus")},children:[{name:l.default("自定义配置"),cb:function(){return a.changeSort("sort","cus")}}]});var C=[{divider:!0},g,{icon:"fa fa-trash",name:l.default("删除"),cb:this.deleteField}];d.popMenu.setPopMenuTree(h.concat(c,p,C)),d.popMenu.show(e.clientX,e.clientY)}},s.prototype.render=function(){var e,n=this,s=this.props,d=s.dmSchema,u=s.value,h=s.isDragging,c=s.sortable,m=s.index,g=s.deleteField,C=s.dimConfig,b=s.chart,v=s.group,y=s.dataModel,D=s.chartCondition,w=d.dimensions.get(u.id),x=this.state,T=x.showAliasDialog,S=x.showTableDimColDialog,E=x.showTablePlayDimColDialog,V=x.showConditionalFormattingDialog,A=x.showSortCusDialog,_=x.showChartConDialog,M=x.showChartConDateDialog;if(!w)return i.createElement("div",{className:o("dm-item err-item",{isDragging:h,sortable:c})},l.default("未找到维度「"+u.id+"」"),i.createElement("i",{className:"fa fa-trash icon",onClick:function(){return g(m)}}));var O=w.alias;u.alias&&(O=O+" ["+u.alias+"]");var F=null;C.otherIcon?F=i.createElement("i",{className:"fa icon other-icon "+C.otherIcon(u)}):u.sort&&(F=i.createElement("i",{className:"fa icon other-icon "+("asc"===u.sort?"fa-sort-amount-up-alt":"desc"===u.sort?"fa-sort-amount-down":"fa-sort")}));var I=u.chartCon||{},N=[];if(_&&D&&D.chartConditionData&&b){var k=D.chartConditionData.mapByChartAndDimFrontendId.get(b.frontendId+"-"+u.frontendId);k&&"done"===k.loadState&&k.data&&(N=k.data)}var L=a.__assign({},null===(e=u.chartCon)||void 0===e?void 0:e.defaultValue);if(M&&D&&D.chartConditionValue&&b){var H=D.chartConditionValue.mapByChartAndDimFrontendId.get(b.frontendId+"-"+u.frontendId);H&&H.defaultValue&&(L.date=H.date,H.defaultValue.config&&(L.config=H.config))}var R=null;return null!==C.contextMenu&&(R=i.createElement("i",{className:"fa fa-cog setting icon",onClick:this.showContextMenu})),[i.createElement("div",{className:o("dm-item dim-item",{isDragging:h,sortable:c}),title:O,onContextMenu:this.showContextMenu,key:"main"},i.createElement("i",{className:"fa fa-times delete",onClick:this.deleteField}),O,R,F),i.createElement("div",{key:"dialog",className:"dm-item-dialog-contaier"},i.createElement(r.default,{show:T,title:O,data:{alias:u.alias||""},onClose:function(){return n.setState({showAliasDialog:!1})},onConfirm:this.changeAlias,controls:[{type:"text",label:l.default("展示名称"),name:"alias",validations:"maxLength:80"}]}),i.createElement(r.default,{show:S,wideLabel:!0,title:O,data:a.__assign(a.__assign({},u.tableCol),{alias:u.alias||""}),onClose:function(){return n.setState({showTableDimColDialog:!1})},onConfirm:this.changeTableDimCol,controls:[{type:"text",label:l.default("表头名称"),name:"alias",validations:"maxLength:40"},{type:"text",label:l.default("表头备注"),name:"remark",validations:"maxLength:40"},{type:"select",label:l.default("对齐方式"),name:"textAlign",value:"auto",options:t.textAlignOptions},{type:"text",label:l.default("宽度"),name:"width",placeholder:l.default("像素如：100px，也可百分比如：20%")},{type:"switch",label:l.default("自动换行"),name:"autoWrap",value:!1},{type:"switch",label:l.default("当成HTML展示"),name:"isHtml",value:!1},{type:"textarea",label:l.default("HTML再包装"),name:"format",placeholder:l.default('如：「<div style="color: red;">{value}</div>，{value}」表示原始的值'),hiddenOn:"!isHtml"},{type:"color",label:l.default("表头背景色"),name:"headerBgColor"},{type:"color",label:l.default("列背景色"),name:"bgColor"},{type:"switch",label:l.default("隐藏本列"),name:"hide",value:!1},{type:"switch",label:l.default("导出Excel时包含本列"),name:"hideButExport",value:!1,hiddenOn:"!hide"}]}),i.createElement(r.default,{show:E,wideLabel:!0,title:O,data:a.__assign(a.__assign({},u.tableCol),{alias:u.alias||""}),onClose:function(){return n.setState({showTablePlayDimColDialog:!1})},onConfirm:this.changeTablePlayDimCol,controls:[{type:"text",label:l.default("表头名称"),name:"alias",validations:"maxLength:40"},{type:"text",label:l.default("表头备注"),name:"remark",validations:"maxLength:40"},{type:"select",label:l.default("对齐方式"),name:"textAlign",value:"auto",options:t.textAlignOptions},{type:"number",key:"width",label:l.default("列宽度(百分数)"),name:"width",placeholder:l.default("均分")},{type:"switch",label:l.default("自动换行"),name:"autoWrap",value:!1},{type:"switch",label:l.default("当成HTML展示"),name:"isHtml",value:!1},{type:"textarea",label:l.default("HTML再包装"),name:"format",placeholder:l.default('如：「<div style="color: red;">{value}</div>，{value}」表示原始的值'),hiddenOn:"!isHtml"},{type:"color",label:l.default("列背景色"),name:"bgColor"},{type:"switch",label:l.default("隐藏本列"),name:"hide",value:!1},{type:"switch",label:l.default("导出Excel时包含本列"),name:"hideButExport",value:!1,hiddenOn:"!hide"}]}),i.createElement(r.default,{show:V,wideLabel:!0,size:"md",title:O,data:a.__assign(a.__assign({},u.conditionFormat),{alias:u.alias||""}),onClose:function(){return n.setState({showConditionalFormattingDialog:!1})},onConfirm:this.changeConditionalFormatting,controls:p.conditionalFormattingDimCtrl}),i.createElement(r.default,{show:A,size:"md",title:O,data:a.__assign({},u.sortCus),onClose:function(){return n.setState({showSortCusDialog:!1})},onConfirm:this.changeSortCus,controls:[{type:"service",api:"/api/group/"+v.hash+"/dataModel/getSelectDimensionsValue?dataModelHash="+y.hash+"&dimensionsId="+u.id+"&notOrigin=1&asOptions=1",controls:[{label:l.default("置顶数据项"),name:"top",type:"transfer",source:"$options",sortable:!0,searchable:!0,joinValues:!1,extractValue:!0},{label:l.default("置底数据项"),name:"bottom",type:"transfer",source:"$options",sortable:!0,searchable:!0,joinValues:!1,extractValue:!0},{label:l.default("其它数据项排序"),name:"other",type:"radios",inline:!0,options:[{label:l.default("升序"),value:"asc"},{label:l.default("降序"),value:"desc"}]}]}]}),i.createElement(r.default,{show:_,title:O+" "+l.default("过滤条件"),wideLabel:!0,data:{alias:u.alias||"",type:I.type||"multi",mutex:!!I.mutex,singleValue:"single"===I.type?I.defaultValue:void 0,multiValue:"single"!==I.type?I.defaultValue:void 0,forceUI:I.forceUI,disableCheckAll:I.disableCheckAll},onClose:function(){return n.setState({showChartConDialog:!1})},onConfirm:this.changeChartCon,controls:[{type:"text",label:l.default("展示名称"),name:"alias",validations:"maxLength:80"},{type:"select",label:l.default("类型"),name:"type",options:[{label:l.default("多选"),value:"multi"},{label:l.default("单选"),value:"single"}]},{type:"select",label:l.default("默认值"),name:"multiValue",multiple:!0,searchable:N&&N.length>10,joinValues:!1,extractValue:!0,options:N,hiddenOn:"data.type === 'single'"},{type:"select",label:l.default("默认值"),name:"singleValue",searchable:N&&N.length>10,options:N,hiddenOn:"data.type !== 'single'"},{type:"switch",label:l.default("禁用全选功能"),name:"disableCheckAll",hiddenOn:"data.type === 'single'"},{type:"switch",label:l.default("默认值和其它取值互斥"),name:"mutex",hiddenOn:"data.type === 'single' || (data.multiValue && data.multiValue.length > 1)"},{type:"switch",label:l.default("强制为下拉样式"),name:"forceUI"}]}),i.createElement(r.default,{show:M,title:O+" "+l.default("过滤条件"),wideLabel:!0,data:{alias:u.alias||"",dataType:u.dataType,date:L.date,config:L.config},onClose:function(){return n.setState({showChartConDateDialog:!1})},onConfirm:this.changeChartDateCon,controls:[{type:"text",label:l.default("类型"),name:"dataType",hiddenOn:"true"},{type:"text",label:l.default("展示名称"),name:"alias",validations:"maxLength:80"},{type:"radios",name:"date",inline:!1,visibleOn:"dataType === 'datetime' || dataType === 'timestamp'",label:l.default("默认值"),options:[{label:l.default("无"),value:""},{label:l.default("近10分钟"),value:"10min"},{label:l.default("近1小时"),value:"1h"},{label:l.default("近3小时"),value:"3h"},{label:l.default("最近一周"),value:"week"},{label:l.default("最近半月"),value:"halfMonth"},{label:l.default("最近一月"),value:"month"},{label:l.default("自定义"),value:"cus"}]},{type:"text",label:"",className:"p-l-md",placeholder:l.default("开始时间"),name:"config.cusDefaultValBegin",visibleOn:"data.date === 'cus' && (data.dataType === 'datetime' || data.dataType === 'timestamp')"},{type:"text",label:l.default("至"),className:"p-l-md",placeholder:l.default("截止时间"),name:"config.cusDefaultValEnd",visibleOn:"data.date === 'cus' && (data.dataType === 'datetime' || data.dataType === 'timestamp')",desc:"可输入正负数，如: -1 表示一分钟前，+1 表示一分钟后。{ZERO} 表示当天零点（注意有大括号），{ZERO+60} 表示当天零点后的60分钟；如果想定义绝对日期时间，请填写绝对日期时间，例如：2018-01-01 12:30:00"},{type:"radios",name:"date",inline:!1,label:l.default("默认值"),visibleOn:"dataType === 'date'",options:[{label:l.default("无"),value:""},{label:l.default("最近一周"),value:"week"},{label:l.default("最近半月"),value:"halfMonth"},{label:l.default("最近一月"),value:"month"},{label:l.default("自定义"),value:"cus"}]},{type:"text",label:"",className:"p-l-md",placeholder:l.default("开始日期"),name:"config.cusDefaultValBegin",visibleOn:"data.date === 'cus' && data.dataType === 'date'"},{type:"text",label:l.default("至"),className:"p-l-md",placeholder:l.default("截止日期"),name:"config.cusDefaultValEnd",visibleOn:"data.date === 'cus' && data.dataType === 'date'",desc:f.dateCusStringInfo}]}))]},s.displayName="DimensionField",s=a.__decorate([n.inject(function(e){return{group:e.group.current.data,chartCondition:e.chartCondition}}),n.observer],s)}(i.Component);t.DimensionField=m;var g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t=a.__decorate([s.default()],t)}(m);t.DimensionFieldSortable=g});
;sugar.define("sugar:widgets/data-model/data-model-field-holder/measure-field.tsx",function(e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.MeasureFieldSortable=a.MeasureField=void 0;var t=e("sugar:node_modules/tslib/tslib.js"),l=e("sugar:utils/i18n.ts"),n=e("sugar:node_modules/react/index.js"),i=e("sugar:node_modules/classnames/index.js"),o=e("sugar:stores/index.ts"),s=e("sugar:sites/group/manage/data-model/editor/helper.ts"),r=e("sugar:widgets/dnd-sort.tsx"),u=e("sugar:widgets/pop-menu/pop-menu.tsx"),d=e("sugar:widgets/form-dialog.tsx"),c=e("sugar:widgets/data-model/data-model-field-holder/helper.ts"),h=e("sugar:node_modules/lodash/cloneDeep.js"),m=e("sugar:node_modules/lodash/isEqual.js"),g=e("sugar:node_modules/lodash/set.js"),f=e("sugar:node_modules/amis/lib/index.js"),p=e("sugar:widgets/data-model/data-model-field-holder/dimension-field.tsx"),v=e("sugar:widgets/data-model/data-model-field-holder/field-ctrl.tsx"),y=e("sugar:utils/common-helper.ts"),b={SUM:l.default("求和"),AVG:l.default("均值"),MAX:l.default("最大值"),MIN:l.default("最小值"),COUNT:l.default("计数"),COUNTD:l.default("去重计数")},C=function(e){function a(){return null!==e&&e.apply(this,arguments)||this}return t.__extends(a,e),a.prototype.componentWillMount=function(){this.setState({showAliasDialog:!1,showRadarMaxAndMinDialog:!1,showTableMeaColDialog:!1,showSummaryMeaDialog:!1,showTablePlayMeaColDialog:!1,showUnitDialog:!1,conditionalFormattingCtrl:v.conditionalFormattingMeaCtrl}),this.showContextMenu=this.showContextMenu.bind(this),this.deleteField=this.deleteField.bind(this),this.changeValue=this.changeValue.bind(this),this.changeAlias=this.changeAlias.bind(this),this.changeUnit=this.changeUnit.bind(this),this.changeRadarMaxAndMin=this.changeRadarMaxAndMin.bind(this),this.changeTableMeaCol=this.changeTableMeaCol.bind(this),this.changeSummarySetting=this.changeSummarySetting.bind(this),this.changeTablePlayMeaCol=this.changeTablePlayMeaCol.bind(this),this.changeConditionalFormatting=this.changeConditionalFormatting.bind(this)},a.prototype.deleteField=function(){this.props.deleteField(this.props.index)},a.prototype.changeValue=function(e,a){var t=h(this.props.value);g(t,e,a),"dataFormat"===e&&"percent"===a?(g(t,"unit","%"),t.accuracy&&-1!==t.accuracy&&4!==t.accuracy||g(t,"accuracy",2)):"dataFormat"!==e||"%"!==t.unit&&" "!==t.unit||""!==a&&"numFunc"!==a&&"none"!==a?"dataFormat"!==e||"timeFunc"!==a&&"byteFunc"!==a&&"bpsFunc"!==a||g(t,"unit"," "):g(t,"unit",""),this.props.onChange(this.props.index,t)},a.prototype.changeAlias=function(e){this.changeValue("alias",(e.alias||"").trim()),this.setState({showAliasDialog:!1})},a.prototype.changeUnit=function(e){var a=e.unit;a&&(a=a.replace(/\s+$/,"")||" "),this.changeValue("unit",a),this.setState({showUnitDialog:!1})},a.prototype.changeRadarMaxAndMin=function(e){var a=e.maxType,t=e.max,n=e.minType,i=e.min;if("max"!==a){if(null==t)return void f.toast.error(l.default("请输入最大值相关信息"));if(t=parseFloat(t),!t&&0!==t)return void f.toast.error(l.default("请输入最大值相关信息(必须是数字)"))}if("zero"!==n&&"min"!==n){if(null==i)return void f.toast.error(l.default("请输入最小值相关信息"));if(i=parseFloat(i),!i&&0!==i)return void f.toast.error(l.default("请输入最小值相关信息(必须是数字)"))}this.changeValue("radarMaxAndMin",{maxType:a,max:t,minType:n,min:i}),this.setState({showRadarMaxAndMinDialog:!1})},a.prototype.changeTableMeaCol=function(e){var a=(e.alias,t.__rest(e,["alias"])),l=h(this.props.value);g(l,"alias",(e.alias||"").trim()),g(l,"tableCol",a),this.props.onChange(this.props.index,l),this.setState({showTableMeaColDialog:!1})},a.prototype.changeTablePlayMeaCol=function(e){var a=(e.alias,t.__rest(e,["alias"])),l=h(this.props.value);g(l,"alias",(e.alias||"").trim()),g(l,"tableCol",a),this.props.onChange(this.props.index,l),this.setState({showTablePlayMeaColDialog:!1})},a.prototype.changeSummarySetting=function(e){var a=(e.alias,t.__rest(e,["alias"])),l=h(this.props.value);g(l,"alias",(e.alias||"").trim()),g(l,"summarySetting",a),this.props.onChange(this.props.index,l),this.setState({showSummaryMeaDialog:!1})},a.prototype.changeConditionalFormatting=function(e){"cell"===e.type?(e.value&&e.value.hasOwnProperty("color")?delete e.value.color:null,e.value&&e.value.hasOwnProperty("nullValue")?delete e.value.nullValue:null,e.value&&e.value.hasOwnProperty("background")?delete e.value.background:null,e.value&&e.value.hasOwnProperty("diff")?delete e.value.diff:null,e.value&&e.value.hasOwnProperty("range")?delete e.value.range:null,e.value&&e.value.hasOwnProperty("target")?delete e.value.target:null):"bar"===e.type?(e.value&&e.value.hasOwnProperty("color")?delete e.value.color:null,e.value&&e.value.hasOwnProperty("nullValue")?delete e.value.nullValue:null,e.value&&e.value.hasOwnProperty("displayRange")?delete e.value.displayRange:null,e.value&&e.value.hasOwnProperty("conditions")?delete e.value.conditions:null,e.value&&e.value.hasOwnProperty("target")?delete e.value.target:null):"gradient"===e.type&&(e.value&&e.value.hasOwnProperty("displayRange")?delete e.value.displayRange:null,m(this.state.conditionalFormattingCtrl,v.conditionalFormattingSummaryCtrl)||(e.value&&e.value.hasOwnProperty("conditions")?delete e.value.conditions:null),e.value&&e.value.hasOwnProperty("background")?delete e.value.background:null,e.value&&e.value.hasOwnProperty("diff")?delete e.value.diff:null,e.value&&e.value.hasOwnProperty("range")?delete e.value.range:null);var a=(e.alias,t.__rest(e,["alias"])),l=h(this.props.value);g(l,"alias",(e.alias||"").trim()),g(l,"conditionFormat",a),this.props.onChange(this.props.index,l),this.setState({showConditionalFormattingDialog:!1})},a.prototype.showContextMenu=function(e){var a=this;e.stopPropagation(),e.preventDefault();var t=this.props,n=t.value,i=t.meaConfig,o=this.props.dmSchema.measures.get(n.id),r=o.convert.type||o.dataType,d=[{icon:"fa fa-edit",name:l.default("修改展示名称"),cb:function(){return a.setState({showAliasDialog:!0})}}];if(!o.calculated||!s.isAggregatedExpression(o.expression,o.isAggregated)){var h=[[l.default("计数"),"COUNT"],[l.default("去重计数"),"COUNTD"]];"string"!==r&&(h=[[l.default("求和"),"SUM"],[l.default("均值"),"AVG"],[l.default("最大值"),"MAX"],[l.default("最小值"),"MIN"]].concat(h)),d.push(c.getCommon2LevelMenu("fa fa-calculator",l.default("聚合方式"),"aggregator",n.aggregator,[[l.default("默认(「"+b[o.defaultAggregator||"SUM"]+"」)"),""]].concat(h),this.changeValue))}var m=[];i.contextMenu&&i.contextMenu.forEach(function(e){switch(e){case"divider":m.push({divider:!0});break;case"lineChartType":m.push(c.getCommon2LevelMenu("fa fa-dashboard",l.default("图表类型"),"lineChartType",n.lineChartType,[[l.default("折线"),""],[l.default("柱图"),"bar"]],a.changeValue));break;case"chartTopShow":m.push(c.getCommon2LevelMenu("fa fa-eye",l.default("图形上展示数据"),"chartTopShow",n.chartTopShow,[[l.default("是"),!0],[l.default("否"),!1]],a.changeValue));break;case"dataCal":m.push(c.getCommon2LevelMenu("fa fa-plus-square",l.default("二次计算"),"dataCal",n.dataCal,[[l.default("无"),""],[l.default("累计和"),"sum"],[l.default("差异"),"diff"],[l.default("百分比"),"percent"],[l.default("差异百分比(环比)"),"rate"]],a.changeValue));break;case"radarMaxAndMin":m.push({icon:"fa fa-edit",name:l.default("最大、最小值设置"),cb:function(){return a.setState({showRadarMaxAndMinDialog:!0})}});break;case"tableMeaCol":m.push({icon:"fas fa-columns",name:l.default("度量列设置"),cb:function(){return a.setState({showTableMeaColDialog:!0})}});break;case"tablePlayMeaCol":m.push({icon:"fas fa-columns",name:l.default("数据列设置"),cb:function(){return a.setState({showTablePlayMeaColDialog:!0})}});break;case"summaryMea":m.push({icon:"fas fa-cog",name:l.default("指标设置"),cb:function(){return a.setState({showSummaryMeaDialog:!0})}});break;case"conditionalFormatting":m.push({icon:"fas fa-th-list",name:l.default("条件格式"),cb:function(){return a.setState({showConditionalFormattingDialog:!0,conditionalFormattingCtrl:v.conditionalFormattingMeaCtrl})}});break;case"summaryConditionalFormatting":m.push({icon:"fas fa-th-list",name:l.default("条件格式"),cb:function(){return a.setState({showConditionalFormattingDialog:!0,conditionalFormattingCtrl:v.conditionalFormattingSummaryCtrl})}})}});var g=n.unit||o.format.unit||"",f=[{divider:!0},c.getCommon2LevelMenu("fa fa-random",l.default("数据格式化"),"dataFormat",n.dataFormat,[[l.default("无"),"none"],[l.default("跟随数据模型设置"),""]].concat(y.dataFormatFunList),this.changeValue),{icon:"fa fa-certificate",name:l.default("数据单位")+(g&&g.length<4?"("+g+")":""),cb:function(){return a.setState({showUnitDialog:!0})}}];if("float"===(o.convert.type||o.dataType)){var p=null==n.accuracy||-1===n.accuracy?o.format.accuracy:n.accuracy;f.splice(2,0,c.getCommon2LevelMenu("sugar-icon icon-float",l.default("小数位数")+"("+(-1===p?l.default("自动"):(p||"0")+l.default("位"))+")","accuracy",n.accuracy,y.floatAccuracyList,this.changeValue))}var C=f.concat([{divider:!0},c.getCommon2LevelMenu("fa fa-sort-amount-up-alt",l.default("排序"),"sort",n.sort,[[l.default("无"),""],[l.default("升序"),"asc"],[l.default("降序"),"desc"]],this.changeValue),{icon:"fa fa-trash",name:l.default("删除"),cb:this.deleteField}]);u.popMenu.setPopMenuTree(d.concat(m,C)),u.popMenu.show(e.clientX,e.clientY)},a.prototype.render=function(){var e=this,a=this.props,o=a.dmSchema,r=a.value,u=a.isDragging,c=a.sortable,h=a.index,m=a.deleteField,g=a.meaConfig,f=o.measures.get(r.id),v=this.state,y=v.showAliasDialog,C=v.showRadarMaxAndMinDialog,w=v.showTableMeaColDialog,M=v.showSummaryMeaDialog,x=v.showTablePlayMeaColDialog,S=v.showConditionalFormattingDialog,F=v.showUnitDialog,_=v.conditionalFormattingCtrl;if(!f)return n.createElement("div",{className:i("dm-item err-item",{isDragging:u,sortable:c})},l.default("未找到度量「"+r.id+"」"),n.createElement("i",{className:"fa fa-trash icon",onClick:function(){return m(h)}}));var D=f.alias;f.calculated&&s.isAggregatedExpression(f.expression,f.isAggregated)||(D=b[r.aggregator||f.defaultAggregator]+"("+f.alias+")"),r.alias&&(D=D+" ["+r.alias+"]");var T=null;return g.otherIcon?T=n.createElement("i",{className:"fa icon other-icon "+g.otherIcon(r)}):r.sort&&(T=n.createElement("i",{className:"fa icon other-icon "+("asc"===r.sort?"fa-sort-amount-up-alt":"fa-sort-amount-down")})),[n.createElement("div",{className:i("dm-item mea-item",{isDragging:u,sortable:c}),title:D,onContextMenu:this.showContextMenu,key:"main"},n.createElement("i",{className:"fa fa-times delete",onClick:this.deleteField}),D,n.createElement("i",{className:"fa fa-cog setting icon",onClick:this.showContextMenu}),T),n.createElement("div",{key:"dialog",className:"dm-item-dialog-contaier"},n.createElement(d.default,{show:y,title:D,data:{alias:r.alias||""},onClose:function(){return e.setState({showAliasDialog:!1})},onConfirm:this.changeAlias,controls:[{type:"text",label:l.default("展示名称"),name:"alias",validations:"maxLength:80"}]}),n.createElement(d.default,{show:F,title:D,data:{unit:r.unit||""},onClose:function(){return e.setState({showUnitDialog:!1})},onConfirm:this.changeUnit,controls:[{name:"unit",label:l.default("数据单位"),type:"text",validations:"maxLength:40",desc:l.default("%、千克、顿、元等")}]}),n.createElement(d.default,{show:C,title:l.default("「"+D+"」--雷达指标的最大最小值设置"),wideLabel:!0,data:t.__assign({},r.radarMaxAndMin),onClose:function(){return e.setState({showRadarMaxAndMinDialog:!1})},onConfirm:this.changeRadarMaxAndMin,controls:[{type:"select",label:l.default("最大值类型"),name:"maxType",value:"max",options:[{label:l.default("数据中最大值"),value:"max"},{label:l.default("数据中最大值的倍数"),value:"maxM"},{label:l.default("手动设定"),value:"static"}]},{type:"text",label:l.default("请输入"),name:"max",hiddenOn:'data.maxType === "max"'},{type:"divider"},{type:"select",label:l.default("最小值类型"),name:"minType",value:"zero",options:[{label:l.default("零"),value:"zero"},{label:l.default("数据中最小值"),value:"min"},{label:l.default("数据中最小值的倍数"),value:"minM"},{label:l.default("手动设定"),value:"static"}]},{type:"text",label:l.default("请输入"),name:"min",hiddenOn:'data.minType === "min" || data.minType === "zero"'}]}),n.createElement(d.default,{show:w,wideLabel:!0,title:D,data:t.__assign(t.__assign({},r.tableCol),{alias:r.alias||""}),onClose:function(){return e.setState({showTableMeaColDialog:!1})},onConfirm:this.changeTableMeaCol,controls:[{type:"text",label:l.default("表头名称"),name:"alias",validations:"maxLength:40"},{type:"text",label:l.default("表头备注"),name:"remark",validations:"maxLength:40"},{type:"select",label:l.default("对齐方式"),name:"textAlign",value:"auto",options:p.textAlignOptions},{type:"text",label:l.default("宽度"),name:"width",placeholder:l.default("像素如：100px，也可百分比如：20%")},{type:"color",label:l.default("表头背景色"),name:"headerBgColor"},{type:"color",label:l.default("列背景色"),name:"bgColor"},{type:"switch",label:l.default("隐藏本列"),name:"hide",value:!1},{type:"switch",label:l.default("导出Excel时包含本列"),name:"hideButExport",value:!1,hiddenOn:"!hide"}]}),n.createElement(d.default,{show:M,wideLabel:!0,title:D,data:t.__assign(t.__assign({},r.summarySetting),{alias:r.alias||""}),onClose:function(){return e.setState({showSummaryMeaDialog:!1})},onConfirm:this.changeSummarySetting,controls:[{type:"text",label:l.default("指标展示名称"),name:"alias",validations:"maxLength:40"},{type:"text",label:l.default("指标备注"),name:"remark",validations:"maxLength:40"}]}),n.createElement(d.default,{show:x,wideLabel:!0,title:D,data:t.__assign(t.__assign({},r.tableCol),{alias:r.alias||""}),onClose:function(){return e.setState({showTablePlayMeaColDialog:!1})},onConfirm:this.changeTablePlayMeaCol,controls:[{type:"text",label:l.default("表头名称"),name:"alias",validations:"maxLength:40"},{type:"text",label:l.default("表头备注"),name:"remark",validations:"maxLength:40"},{type:"select",label:l.default("对齐方式"),name:"textAlign",value:"auto",options:p.textAlignOptions},{type:"number",key:"width",label:l.default("列宽度(百分数)"),name:"width",placeholder:l.default("均分")},{type:"color",label:l.default("列背景色"),name:"bgColor"},{type:"switch",label:l.default("隐藏本列"),name:"hide",value:!1},{type:"switch",label:l.default("导出Excel时包含本列"),name:"hideButExport",value:!1,hiddenOn:"!hide"}]}),n.createElement(d.default,{show:S,wideLabel:!0,size:"md",title:D,data:r.conditionFormat?t.__assign(t.__assign({},r.conditionFormat),{alias:r.alias||""}):{type:"gradient"},onClose:function(){return e.setState({showConditionalFormattingDialog:!1})},onConfirm:this.changeConditionalFormatting,controls:_}))]},a.displayName="MeasureField",a=t.__decorate([o.observer],a)}(n.Component);a.MeasureField=C;var w=function(e){function a(){return null!==e&&e.apply(this,arguments)||this}return t.__extends(a,e),a=t.__decorate([r.default()],a)}(C);a.MeasureFieldSortable=w});
;sugar.define("sugar:widgets/data-model/data-model-field-holder/data-model-field-holder.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getChartConditionsHolder=t.getDataModelFieldHolder=void 0;var a=e("sugar:node_modules/tslib/tslib.js"),n=e("sugar:utils/i18n.ts"),o=e("sugar:node_modules/react/index.js"),i=e("sugar:node_modules/amis/lib/index.js"),d=e("sugar:node_modules/classnames/index.js"),l=e("sugar:node_modules/amis/lib/index.js"),r=e("sugar:widgets/dnd-dustbin.tsx"),s=e("sugar:stores/index.ts"),u=e("sugar:widgets/data-model/data-model-field-holder/dimension-field.tsx"),p=e("sugar:widgets/data-model/data-model-field-holder/measure-field.tsx"),h=e("sugar:utils/frontendId.ts"),c=e("sugar:widgets/amis-inline-switch.tsx");t.getDataModelFieldHolder=function(e){var t=e.label,a=e.name,n=e.namePrefix,o=void 0===n?"dataConfig.dataModel":n,i=e.hiddenOn,d=void 0===i?"dataType != 'dataModel'":i,l=e.config,r=e.desc;return{label:t,type:"data-model-field-holder",name:o+"."+a,hiddenOn:d,config:l,desc:r}},t.getChartConditionsHolder=function(e,t,a,o,i,d){void 0===a&&(a=!1),void 0===o&&(o="dataConfig.dataModel"),void 0===i&&(i="dataType != 'dataModel'"),void 0===d&&(d="config");var l=[];return!/\/edit\/report\//.test(location.pathname)||t.isDashChart?l:t.drillDownLevel?l:(l.push({label:n.default("本图表的交互过滤条件"),type:"data-model-field-holder",name:o+".chartCondition",hiddenOn:i,config:{dataModelHash:e,chart:t,holderId:t.frontendId+".chartCondition",maxCount:30,onlyDimension:!0,canRepeat:!1,onlyDataTypes:["string","int","date","datetime","timestamp"],onlyDataTypesToast:n.default("图表的交互过滤条件只支持字符串和整数类型的字段"),dimConfig:{contextMenu:["chartCon"]}}}),l=l.concat([c.amisInlineSwitch(d+".chartConditionShow",n.default("开启过滤条件可选"),i),{type:"number",label:n.default("默认展示数量"),name:d+".chartConditionDisplayNum",visibleOn:d+".chartConditionShow",hiddenOn:i,step:1,min:0,value:0},c.amisInlineSwitch(d+".chartConditionForceSelect",n.default("强制显示为下拉"),"!"+d+".chartConditionShow || "+i),c.amisInlineSwitch(d+".chartConditionCustomHeight",n.default("自定义过滤条件最大高度"),"!"+d+".chartConditionShow || "+i),{type:"number",label:n.default("图表级过滤条件最大高度"),name:d+".chartConditionHeight",visibleOn:d+".chartConditionShow && "+d+".chartConditionCustomHeight",hiddenOn:i,step:1,min:30,value:100}]),a&&l.push(c.amisInlineSwitch(o.replace(/\.dataModel$/,".")+"conAutoGroup",n.default("多选过滤时分组展示"),i)),l=l.concat({type:"divider",hiddenOn:i}))};var m=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.componentWillMount=function(){this.onDrop=this.onDrop.bind(this)},t.prototype.onDrop=function(e){var t,a,o,i=this.props,d=i.config,r=d.maxCount,s=void 0===r?1e3:r,u=d.onlyDimension,p=d.onlyMeasure,c=d.canRepeat,m=d.onlyDataTypes,f=d.onlyDataTypesToast,g=d.canNotNoEnumerable,v=d.dataModelHash,y=i.dataModelDetailMap,C=this.props.value||[];if(u&&"dimension"!==e.type)return void l.toast.error(n.default("只能拖入维度字段"));if(p&&"measure"!==e.type)return void l.toast.error(n.default("只能拖入度量字段"));if(m&&m.length&&!~m.indexOf(e.dataType))return void l.toast.error(f?f:n.default("只能拖入「"+m.join("、")+"」类型的字段"));if(C.length>=s)return void l.toast.error(n.default("最多可拖入「"+s+"」个字段，已满！"));if(!c&&C.find(function(t){return t.id===e.id}))return void l.toast.error(n.default("已经拖入了该字段，不能重复拖入"));if(g&&y&&v&&"dimension"===e.type){var M=y.mapByHash.get(v||"");if(M){var D=M.config.dimensions.get(e.id);if(D&&D.noEnumerable)return void l.toast.error(n.default("该字段是不可枚举型维度(数据量巨大)，不能拖入到这里"))}}var b={frontendId:"F"+h.generateId().toUpperCase(),id:e.id,type:"dimension"===e.type?"d":"m",dataType:e.dataType};if(/\.chartCondition/.test(this.props.name)&&y){var M=y.mapByHash.get(v||"");if(M){var D=M.config.dimensions.get(e.id);D&&D.alias&&(b.alias=D.alias)}if("retention"===(null===(t=this.props.config.chart)||void 0===t?void 0:t.dataConfig.tableType)&&("date"===(null===e||void 0===e?void 0:e.dataType)||"datetime"===(null===e||void 0===e?void 0:e.dataType)||"timestamp"===(null===e||void 0===e?void 0:e.dataType))){var T={cusDefaultValBegin:"{ZERO-20160}",cusDefaultValEnd:"{ZERO-8641}"};"date"===(null===e||void 0===e?void 0:e.dataType)&&(T={cusDefaultValBegin:"$MONTHFIRSTDAY-2W",cusDefaultValEnd:"$MONTHFIRSTDAY-1W"}),null===(o=null===(a=this.props)||void 0===a?void 0:a.chartCondition)||void 0===o?void 0:o.chartConditionValue.setValueByDeafaultVal(this.props.data.frontendId,b,{date:"cus",config:T}),b.chartCon={defaultValue:{date:"cus",config:T}}}}var x=C.concat([b]);this.props.onChange(x)},t.prototype.render=function(){return o.createElement(m,a.__assign({},this.props,{onDrop:this.onDrop}))},t.displayName="DataModelFieldHolderHigher",t=a.__decorate([i.FormItem({type:"data-model-field-holder"}),s.inject(function(e){return{dataModelDetailMap:e.dataModel.detailMap,chartCondition:e.chartCondition}})],t)}(o.Component),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.componentWillMount=function(){this.onMoving=this.onMoving.bind(this),this.deleteField=this.deleteField.bind(this),this.onChange=this.onChange.bind(this)},t.prototype.onMoving=function(e,t){var a=this.props.value||[],n=[].concat(a),o=n[e];n[e]=n[t],n[t]=o,this.props.onChange(n)},t.prototype.deleteField=function(e){var t=this.props.value||[],a=[].concat(t);a.splice(e,1),this.props.onChange(a)},t.prototype.onChange=function(e,t){var a=this.props.value||[],n=[].concat(a);n[e]=t,this.props.onChange(n)},t.prototype.render=function(){var e=this,t=this.props,a=t.canDrop,i=t.isOver,r=t.config,s=r.dataModelHash,h=r.holderId,c=this.props.value||[],m=this.props.dataModelDetailMap,f=m.mapByHash.get(s||""),g=u.DimensionField,v=p.MeasureField,y=!1;return c.length>1&&(g=u.DimensionFieldSortable,v=p.MeasureFieldSortable,y=!0),o.createElement("div",{className:d("data-model-field-holder",{"can-drop":i&&a})},f?c.map(function(t,a){return"d"===t.type?o.createElement(g,{key:h+"-"+t.frontendId,id:h+"-"+t.frontendId,dndType:h,notCareIframe:!0,dndDefaultDragPreview:"yes",onMoving:e.onMoving,index:a,dataModel:f,dmSchema:f.config,value:t,dimConfig:r.dimConfig||{},chart:r.chart,sortable:y,deleteField:e.deleteField,onChange:e.onChange}):o.createElement(v,{key:h+"-"+t.frontendId,id:h+"-"+t.frontendId,dndType:h,notCareIframe:!0,dndDefaultDragPreview:"yes",onMoving:e.onMoving,index:a,dmSchema:f.config,value:t,meaConfig:r.meaConfig||{},sortable:y,deleteField:e.deleteField,onChange:e.onChange})}):s?o.createElement(l.Spinner,{size:"sm",overlay:!0}):"",c.length>=(r.maxCount||1e3)?"":r.onlyDimension?o.createElement("div",{className:"place-holder"},n.default("拖入维度")):r.onlyMeasure?o.createElement("div",{className:"place-holder"},n.default("拖入度量")):o.createElement("div",{className:"place-holder"},n.default("拖入字段")))},t.displayName="DataModelFieldHolder",t=a.__decorate([r.DnDTarget("data-model"),s.inject(function(e){return{dataModelDetailMap:e.dataModel.detailMap}}),s.observer],t)}(o.Component))});
;sugar.define("sugar:widgets/data-model/data-model-bind-chooser/data-model-bind-chooser-dialog.tsx",function(e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var t=e("sugar:node_modules/tslib/tslib.js"),o=e("sugar:utils/i18n.ts"),s=e("sugar:node_modules/react/index.js"),n=e("sugar:node_modules/amis/lib/index.js"),d=e("sugar:sites/amis-renderer.tsx"),l=e("sugar:stores/index.ts"),r=e("sugar:utils/tree.ts"),i=function(e){function a(a){var t=e.call(this,a)||this;return t.usingDataModelHashOps=[],t.state={data:a.data},t.updateData=t.updateData.bind(t),t}return t.__extends(a,e),a.prototype.updateData=function(e,a){var o;for(var s in a)a.hasOwnProperty(s)&&this.setState({data:t.__assign(t.__assign({},this.state.data),(o={},o[s]=a[s],o))})},a.prototype.componentWillMount=function(){var e=this,a=this.props,t=a.dataModelTreeList,o=a.usingDataModelHashs;this.usingDataModelHashOps=[],o.forEach(function(a){var o=r.find(t.data,function(e){return e.isLeaf&&e.value===a});o&&e.usingDataModelHashOps.push({label:o.name,value:a})})},a.prototype.render=function(){var e=this.props,a=e.toggleDialog,t=e.group,l=e.bindChooserConfig,r=e.onAdd,i=e.index,u=e.onChange,c=e.dataModelDetailMap,p=this.state.data,h="/api/group/"+t.current.data.hash+"/dataModel/${dataModelHash}/getFields";l.supportFieldType&&l.supportFieldType.length&&(h+="?fieldType="+l.supportFieldType.join(","));var g=[{name:"dataModelHash",label:o.default("请选择数据模型"),type:"select",searchable:!0,options:this.usingDataModelHashOps},{label:o.default("请选择数据字段"),type:"tree-select",cascade:!0,name:"colId",source:h,initFetchOn:"data.dataModelHash",searchable:!0},{children:function(){return s.createElement("div",{className:"text--right"},s.createElement("a",{className:"text-info",href:"/docs/Condition-ChartData#无法选中过滤字段",target:"_blank"},o.default("无法选中过滤字段？")))}}];return l.amisConfig&&l.amisConfig.length&&(g=g.concat(l.amisConfig)),s.createElement(n.Modal,{show:!0,backdrop:"static"},s.createElement(n.Modal.Header,{showCloseButton:!0,onClose:function(){return a(-1)}},s.createElement(n.Modal.Title,null,o.default("选择数据模型、字段和关联方式"))),s.createElement(n.Modal.Body,null,s.createElement(d.default,{data:p,onChange:this.updateData,schema:{type:"form",wrapWithPanel:!1,controls:g}})),s.createElement(n.Modal.Footer,null,s.createElement(n.Button,{level:"primary",onClick:function(){return p.dataModelHash&&p.colId?(void 0!==i&&i>=0?u(i,p):r(p),void c.loadDetail(p.dataModelHash)):void n.toast.error(o.default("请选择数据模型和数据字段"))}},o.default("确定"))))},a.displayName="DataModelBindChooserDialog",a=t.__decorate([l.inject(function(e){return{group:e.group,dataModelDetailMap:e.dataModel.detailMap}}),l.observer,t.__metadata("design:paramtypes",[Object])],a)}(s.Component);a.default=i});
;sugar.define("sugar:widgets/data-model/data-model-bind-chooser/data-model-bind-chooser.tsx",function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getDataModelBindChooser=void 0;var a=t("sugar:node_modules/tslib/tslib.js"),n=t("sugar:utils/i18n.ts"),i=t("sugar:node_modules/react/index.js"),o=t("sugar:node_modules/amis/lib/index.js"),d=t("sugar:stores/index.ts"),s=t("sugar:widgets/data-model/data-model-bind-chooser/data-model-bind-chooser-dialog.tsx"),l=t("sugar:widgets/data-model/data-model-bind-chooser/data-model-bind-chooser-item.tsx"),r=t("sugar:utils/data-model-helper.ts");e.getDataModelBindChooser=function(t){var e=t.label,a=t.name,n=void 0===a?"dataModelBind":a,i=t.namePrefix,o=void 0===i?"dataConfig.dataModel":i,d=t.hiddenOn,s=t.config;return{label:e,type:"data-model-bind-chooser",name:o+"."+n,hiddenOn:d,config:s}};var c=(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a.__extends(e,t),e.prototype.render=function(){return i.createElement(c,a.__assign({},this.props))},e.displayName="DataModelBindChooserHigher",e=a.__decorate([o.FormItem({type:"data-model-bind-chooser"})],e)}(i.Component),function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.state={dialogOpen:void 0,index:-1},e}return a.__extends(e,t),e.prototype.componentWillMount=function(){this.deleteBinding=this.deleteBinding.bind(this),this.changeBinding=this.changeBinding.bind(this),this.addBinding=this.addBinding.bind(this),this.toggleDialog=this.toggleDialog.bind(this),this.getDataModeDetials();var t=this.props.dataModelTreeList;"pending"===t.loadState||t.data||t.loadData()},e.prototype.componentWillReceiveProps=function(t){this.props.config.conditionEntity,t.config.conditionEntity},e.prototype.getDataModeDetials=function(t){var e=this;t=t||this.props;var a=t.value,n=new Set;a&&a.length&&a.forEach(function(t){t.dataModelHash&&n.add(t.dataModelHash)}),n.forEach(function(t){return e.props.dataModelDetailMap.loadDetail(t)})},e.prototype.toggleDialog=function(t,e){this.setState({dialogOpen:e,index:e?t:-1})},e.prototype.generateItem=function(t){var e=this,a=this.props,o=a.value,d=(a.config,!0);return i.createElement("div",{className:"data-model-bind-ctrl__list"},o&&o.length?o.map(function(a,n){return i.createElement(l.default,{canDelete:d,usingDataModelHashs:t,itemData:a,onChange:e.changeBinding,onDelete:e.deleteBinding,toggleDialog:e.toggleDialog,index:n,key:n})}):i.createElement("div",{className:"text--center"},n.default("点击下方按钮添加")))},e.prototype.deleteBinding=function(t){var e=this.props.value||[],a=[].concat(e),n=a[t].dataModelHash;a.splice(t,1),this.props.config.conditionEntity.updateChartAndConditionBinding([],[n]),this.props.onChange(a)},e.prototype.changeBinding=function(t,e){var a=this.props.value||[],i=[].concat(a),d=i[t].dataModelHash;i[t]=e;for(var s=0;s<i.length;s++){var l=i[s];if(e.dataModelHash===l.dataModelHash&&t!==s)return void o.toast.error(n.default("您已在此过滤条件中绑定过该模型"))}e.dataModelHash!==d&&this.props.config.conditionEntity.updateChartAndConditionBinding([e.dataModelHash],[d]),this.props.onChange(i),this.toggleDialog(-1)},e.prototype.addBinding=function(t){for(var e=this.props,a=e.value||[],i=0,d=a;i<d.length;i++){var s=d[i];if(t.dataModelHash===s.dataModelHash)return void o.toast.error(n.default("您已在此过滤条件中绑定过该模型"))}var l=[].concat(a);l.push(t),e.onChange(l),e.config.conditionEntity.updateChartAndConditionBinding([t.dataModelHash],[]),this.toggleDialog(-1)},e.prototype.render=function(){var t=this,e=this.state,a=e.dialogOpen,d=e.index,l=this.props,c=l.config,g=l.chartList,h=l.conditionList,p=l.dataModelTreeList;if(p&&("pending"===p.loadState||!p.data))return i.createElement(o.Spinner,{size:"sm",overlay:!0});if(p&&"done"===p.loadState&&p.data&&0===p.data.length)return i.createElement("div",{className:"text--center"},n.default("空间中还没有数据模型"));var u=r.findUsingDataModelHashsInReport(g||[],h,c.conditionEntity);return i.createElement("div",{className:"data-model-bind-ctrl"},a?i.createElement(s.default,{usingDataModelHashs:u,dataModelTreeList:p,toggleDialog:this.toggleDialog,data:a,index:d,bindChooserConfig:c,onAdd:this.addBinding,onChange:this.changeBinding}):null,this.generateItem(u),i.createElement("div",{className:"data-model-bind-ctrl__add"},i.createElement("div",{className:"text-center"},i.createElement(o.TooltipWrapper,{tooltip:n.default("添加关联"),placement:"bottom"},i.createElement(o.Button,{className:"btn-icon btn-rounded btn-sm",level:"info",onClick:function(){return t.toggleDialog(-1,c.initialStates||{})}},i.createElement("i",{className:"fa fa-plus"}))))))},e.displayName="DataModelBindChooser",e=a.__decorate([d.inject(function(t){return{dataModelTreeList:t.dataModel.treeList,dataModelDetailMap:t.dataModel.detailMap,chartList:t.chart.list.data,conditionList:t.condition.list.data}}),d.observer],e)}(i.Component))});
;sugar.define("sugar:widgets/data-model/data-model-condition-chart-chooser/data-model-condition-chart-chooser.tsx",function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getConditionChartChooser=void 0;var a=t("sugar:node_modules/tslib/tslib.js"),n=t("sugar:utils/i18n.ts"),o=t("sugar:node_modules/react/index.js"),i=t("sugar:node_modules/amis/lib/index.js"),r=t("sugar:node_modules/amis/lib/index.js"),s=t("sugar:stores/index.ts"),d=t("sugar:utils/tree.ts"),l=t("sugar:utils/data-model-helper.ts"),h=t("sugar:utils/common-helper.ts");e.getConditionChartChooser=function(t){var e=t.label,a=t.name,n=t.namePrefix,o=void 0===n?"dataConfig.dataModel":n,i=t.hiddenOn,r=t.config;return{label:e,type:"data-model-condition-chart-chooser",name:o+"."+a,hiddenOn:i,config:r}};var u=(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a.__extends(e,t),e.prototype.render=function(){return o.createElement(u,a.__assign({},this.props))},e.displayName="ConditionChartChooserHigher",e=a.__decorate([i.FormItem({type:"data-model-condition-chart-chooser"})],e)}(o.Component),function(t){function e(e){var a=t.call(this,e)||this;return a.sortChartKeyList=[],a.bindHover=a.bindHover.bind(a),a.handleMouseOverList=a.handleMouseOverList.bind(a),a.handleMouseOutList=a.handleMouseOutList.bind(a),a}return a.__extends(e,t),e.prototype.bindHover=function(t){t?(this.listEle=t,t.addEventListener("mouseover",this.handleMouseOverList),t.addEventListener("mouseout",this.handleMouseOutList)):this.listEle&&(this.listEle.removeEventListener("mouseover",this.handleMouseOverList),this.listEle.removeEventListener("mouseout",this.handleMouseOutList),this.listEle=null)},e.prototype.changeChartOrConditionHoverStatus=function(t,e){var a=this.props.classPrefix+"Checkbox",n=h.getParentDomByClassName(t,a);if(n&&this.listEle)for(var o=this.listEle.getElementsByClassName(a),i=0;i<o.length;i++)if(o[i]===n){var r=this.sortChartKeyList[i];if(r){var s=r.split("#")[0];if(s)if("condition"===this.props.config.mode)for(var d=0,l=this.props.conditionList;d<l.length;d++){var u=l[d];u.key===s&&u.changeHoverStatus(e)}else for(var c=0,m=this.props.chartList;c<m.length;c++){var p=m[c];p.frontendId===s&&p.changeHoverStatus(e)}}break}return!1},e.prototype.handleMouseOverList=function(t){var e=t.target;!e||"SPAN"!==e.tagName&&"I"!==e.tagName||this.changeChartOrConditionHoverStatus(e,!0)},e.prototype.handleMouseOutList=function(t){var e=t.target;!e||"SPAN"!==e.tagName&&"I"!==e.tagName||this.changeChartOrConditionHoverStatus(e,!1)},e.prototype.getRelatedChartsOrConditions=function(){var t=this.props,e=t.config,a=t.chartList,n=t.conditionList,o=e.dataModelBindConfig,i=new Set;return o&&o.length&&o.forEach(function(t){t.dataModelHash&&i.add(t.dataModelHash)}),"condition"!==e.mode?l.findChartsUsingDataModelsInReport(a,i):l.findConditionsUsingDataModelsInReport(n,i,e.conditionEntity)},e.prototype.generateItem=function(){var t=this.props,e=t.dataModelTreeList,a=t.render,n=t.onChange,i=t.value,r=t.config;this.sortChartKeyList=[];var s=i&&i.list?i.list:[],h=this.getRelatedChartsOrConditions(),u=[],c={name:"list",type:"checkboxes",extractValue:!0,joinValues:!1,options:[]},m=function(t){var a=h[t],n=d.find(e.data,function(e){return e.isLeaf&&e.value===t});if(n){for(var o={label:n.name,children:[]},i=0,m=a;i<m.length;i++){var g=m[i],v=void 0;v="condition"!==r.mode?l.formatChartPathAndName(g):l.formatConditionPathAndName(g),o.children.push({label:v.name,value:v.path}),s.includes(v.path)&&u.push(v.path),p.sortChartKeyList.push(v.path)}c.options.push(o)}},p=this;for(var g in h)m(g);return o.createElement("div",{className:"condition-chart-bind-ctrl__list",ref:this.bindHover},a("inner",{type:"form",mode:"normal",wrapWithPanel:!1,controls:[c]},{data:{list:u},onChange:n,lazyFormChange:!1,lazyChange:!1}))},e.prototype.render=function(){var t=this.props,e=(t.config,t.dataModelTreeList);return!e||"pending"!==e.loadState&&e.data?e&&"done"===e.loadState&&e.data&&0===e.data.length?o.createElement("div",{className:"text--center"},n.default("空间中还没有数据模型")):o.createElement("div",{className:"condition-chart-bind-ctrl"},this.generateItem()):o.createElement(r.Spinner,{size:"sm",overlay:!0})},e.displayName="ConditionChartChooserChooser",e=a.__decorate([s.inject(function(t){return{dataModelTreeList:t.dataModel.treeList,dataModelDetailMap:t.dataModel.detailMap,chartList:t.chart.list.data,conditionList:t.condition.list.data}}),s.observer,a.__metadata("design:paramtypes",[Object])],e)}(o.Component))});
;sugar.define("sugar:widgets/ctrl-panel/condition-ctrl.tsx",function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.selectCustomColorCtrl=e.addFontSizeCtrl=e.dateCustomColorCtrl=void 0;var a=t("sugar:node_modules/tslib/tslib.js"),o=t("sugar:utils/i18n.ts"),l=t("sugar:node_modules/react/index.js"),r=t("sugar:stores/index.ts"),n=t("sugar:widgets/conditions/condition-manager.tsx"),i=t("sugar:sites/amis-renderer.tsx"),d=t("sugar:widgets/amis-inline-switch.tsx"),s=t("sugar:utils/exception.ts"),c=t("sugar:widgets/data-model/data-model-selector/data-model-selector.tsx"),u=t("sugar:widgets/charts/chart-manager.tsx"),f=t("sugar:widgets/dashboard-ctrl-panel/chart-ctrl.tsx"),p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a.__extends(e,t),e.prototype.componentWillMount=function(){},e.prototype.componentDidCatch=function(t,e){s.captureException(t,e)},e.prototype.render=function(){var t=this.props,e=t.conditionEntity,a=t.updateCondition,r=t.sqlModelStore,s=t.chartList,p=t.conditionList,m=t.dashboardEntity,g=n.getConditionByType(e.type);if(!g)return"Error, can not find condition type ["+e.type+"]";var b={condition:e,sqlModelStore:r,chartList:s,conditionList:p},y=[{type:"text",name:"label",label:o.default("条件名称")},{type:"text",name:"key",label:o.default("查询key值")},d.amisInlineSwitch("required",o.default("是否必填"))];if(m){var h=m.config.grid,C=h&&h>1?Math.round(h):1;y=y.concat([{type:"divider"},{type:"group",controls:[{type:"number",name:"width",step:C,min:0,label:o.default("宽度")},{type:"number",name:"height",label:o.default("高度"),step:C,min:0}]},{type:"group",controls:[{type:"number",name:"left",step:C,label:o.default("X坐标")},{type:"number",name:"top",label:o.default("Y坐标"),step:C}]}])}else g.canHalfWidth&&(y=y.concat([d.amisInlineSwitch("halfWidth",o.default("宽度减半"))]));g.basicCtrl&&(y=y.concat("function"==typeof g.basicCtrl?g.basicCtrl(b):g.basicCtrl));var v=[{title:o.default("基础"),controls:y}];if(g.dataBindCtrl){var w=g.dataBindCtrl;"function"==typeof w&&(w=w(b)),m&&g.needDashboardAutoFresh&&w.length&&(w=w.concat(f.getAutoRefreshCtrl("false",!0)));var x=w;window.sugarConfig.enableDataModel&&g.dataModelPanelShow&&u.needShowDataModelPanel(g.dataModelPanelShow,e,"")&&(x=[{type:"hbox",columns:[{columnClassName:"data-bind",controls:x},{columnClassName:"data-model",controls:[{name:"dataModelHash",children:function(t){var e=t.onChange,a=t.value;return l.createElement(c.default,{onChange:e,value:a})}}]}]}]),x.length&&v.push({title:o.default("数据"),controls:x})}if(g.advancedCtrl){var M=g.advancedCtrl;"function"==typeof M&&(M=M(b)),v.push({title:o.default("高级"),controls:M})}var S="",N="",_=[{type:"tabs",mode:"card",tabs:v,className:"overflow-hidden h-full d-flex flex-col",contentClassName:"flex-1 overflow-y-auto p-relative",activeKey:1}];return"container"===e.type&&g.basicCtrl&&(_=g.basicCtrl,S="wrapper",N="container-ctrl"),l.createElement("div",{className:"chart-ctrl-wrapper"},l.createElement("div",{className:"chart-config"+N},l.createElement(i.default,{data:e.toJSON(),onChange:a,schema:{type:"form",className:S,wrapWithPanel:!1,controls:_}})))},e.displayName="ConditionCtrl",e=a.__decorate([r.observer],e)}(l.Component);e.default=p,e.dateCustomColorCtrl=function(t){return[{type:"divider"},{type:"fieldset",collapsed:!0,title:o.default("过滤条件样式自定义"),collapsable:!0,headingClassName:"fieldset-title",controls:e.addFontSizeCtrl(t,[{type:"group",controls:[{type:"color",name:"config.background",label:o.default("背景颜色"),format:"rgba"},{type:"color",name:"config.fontColor",label:o.default("字体颜色"),format:"rgba"}]},{type:"group",controls:[{type:"color",name:"config.activeBgColor",label:o.default("高亮背景颜色"),format:"rgba"},{type:"color",name:"config.activeFontColor",label:o.default("高亮字体颜色"),format:"rgba"}]},{type:"group",controls:[{type:"color",name:"config.borderColor",label:o.default("边框颜色"),format:"rgba"}]}])}]},e.addFontSizeCtrl=function(t,e){return t?a.__spreadArrays([{type:"number",name:"config.fontSize",label:o.default("字体大小（px）"),placeholder:o.default("默认是16"),step:1,min:10}],e):e},e.selectCustomColorCtrl=[{type:"group",hiddenOn:'config.uiMode === "list"',controls:[{type:"color",name:"config.background",label:o.default("背景颜色"),format:"rgba"},{type:"color",name:"config.highlightBgColor",label:o.default("选项高亮背景颜色"),format:"rgba"}]},{type:"group",controls:[{type:"color",name:"config.fontColor",label:o.default("字体颜色"),format:"rgba"},{type:"color",name:"config.selectActiveFontColor",label:o.default("选项高亮字体颜色"),format:"rgba"}]},{type:"color",name:"config.borderColor",hiddenOn:'config.uiMode === "list"',label:o.default("边框颜色"),format:"rgba"}]});
;sugar.define("sugar:widgets/conditions/select/select-ctrl.tsx",function(e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.dataBindCtrl=a.conDemoUrl=a.basicCtrl=void 0;var t=e("sugar:node_modules/tslib/tslib.js"),d=e("sugar:utils/i18n.ts"),l=e("sugar:node_modules/react/index.js"),o=e("sugar:widgets/ctrl-panel/data-bind-ctrl/index.tsx"),i=e("sugar:widgets/ctrl-panel/condition/condition-dependence-ctrl.tsx"),n=e("sugar:widgets/data-model/data-model-field-holder/data-model-field-holder.tsx"),s=e("sugar:widgets/data-model/data-model-bind-chooser/data-model-bind-chooser.tsx"),c=e("sugar:widgets/amis-inline-switch.tsx"),r=e("sugar:widgets/data-model/data-model-condition-chart-chooser/data-model-condition-chart-chooser.tsx"),u=e("sugar:widgets/data-model/data-model-bind-chooser/data-model-bind-chooser-item.tsx"),f=e("sugar:utils/data-model-helper.ts"),g=e("sugar:widgets/ctrl-panel/condition-ctrl.tsx");a.basicCtrl=function(e){return[c.amisInlineSwitch("dataConfig.showAll",d.default("是否自动添加『全部』选项")),{type:"text",label:d.default("全部选项名称"),name:"dataConfig.showAllLabel",placeholder:d.default("默认名称为全部"),visibleOn:"dataConfig.showAll"},{type:"divider"},{type:"radios",label:d.default("展示样式"),name:"config.uiMode",inline:!1,options:[{label:d.default("单选列表"),value:"list",disabledOn:"data.halfWidth"},{label:d.default("单选下拉"),value:"select"}]},{type:"radios",name:"defaultVal",inline:!1,label:d.default("默认值"),options:[{label:d.default("第一项"),value:"__showx_default_value_first"},{label:d.default("第二项"),value:"__showx_default_value_second"},{label:d.default("最后一项"),value:"__showx_default_value_last"},{label:d.default("自定义"),value:"__sugar_showx_custom",hiddenOn:"data.type === 'dateTimeGranularity'"}]},{type:"text",label:"",className:"p-l-md",placeholder:d.default("请输入取值，而不是名称"),name:"config.cusDefaultVal",hiddenOn:"data.defaultVal != '__sugar_showx_custom'"},c.amisInlineSwitch("config.disableSeachable",d.default("禁用数据较多时的搜索功能"),"data.config.uiMode === 'list'"),{type:"divider"},{type:"fieldset",collapsed:!0,title:d.default("过滤条件样式自定义"),collapsable:!0,headingClassName:"fieldset-title",controls:t.__spreadArrays(g.addFontSizeCtrl(!!e.condition.isDashCondition,g.selectCustomColorCtrl))}]},a.conDemoUrl="$CUR_HOST/openapi/demo/condition?type=select",a.dataBindCtrl=function(e){var a=[c.amisInlineSwitch("dataConfig.showAll",d.default("自动添加『全部』选项")),{type:"text",label:d.default("全部选项名称"),name:"dataConfig.showAllLabel",placeholder:d.default("默认名称为全部"),visibleOn:"dataConfig.showAll"}],g=o.getDebugAndRefreshBtn({loadData:e.condition.loadData,loadDebugData:e.condition.loadDebugData,dataType:e.condition.dataType,refreshText:d.default("刷新条件")}),m=o.getDataBindCommon({frontendId:e.condition.frontendId,dataTypeOptions:["dataModel","api","static","sql"],api:{demoUrl:"/openapi/demo/condition?type=select"},"static":{columnLength:2,headers:[["名称","取值"]]},sql:{hideExemption:!0}}),h=e.condition.dataModelHash||"",p=e.sqlModelStore.detailMap.mapByHash.get(e.condition.dataModelHash||""),b=o.generateSQLFieldList(p),C=[n.getDataModelFieldHolder({name:"value",label:d.default("取值字段"),config:{dataModelHash:h,holderId:e.condition.frontendId+"-value",maxCount:1,onlyDimension:!0}}),n.getDataModelFieldHolder({name:"name",label:d.default("名称字段(不填时用取值字段替代)"),config:{dataModelHash:h,holderId:e.condition.frontendId+"-name",maxCount:1,onlyDimension:!0}}),o.commonFilterForDataModel(h),o.commonBindUrlParamForDataModel(h),o.commonLimitForDataModel,{type:"select",name:"dataConfig.sqlNameField",hiddenOn:"data.dataType != 'sql'",label:d.default("名称字段(给用户展示的单选内容)"),placeholder:d.default("请选择"),clearable:!0,options:b},{type:"select",name:"dataConfig.sqlValueField",hiddenOn:"data.dataType != 'sql'",label:d.default("取值字段(不选时用名称字段代替)"),placeholder:d.default("请选择"),clearable:!0,options:b}];C=C.concat(a,g);var y=f.findUsingDataModelHashsInReport(e.chartList,e.conditionList);if(y.size){var _=["=","!=","like","begin","end"],v=_.map(function(e){return{label:u.linkTypeMap.get(e),value:e}});C=C.concat([s.getDataModelBindChooser({label:d.default("选择要过滤的数据模型"),config:{amisConfig:[{name:"linkType",label:d.default("请选择关联方式"),type:"radios",inline:!1,options:v}],initialStates:{linkType:"="},conditionEntity:e.condition}}),r.getConditionChartChooser({label:d.default("关联的图表"),name:"chartBind",config:{conditionEntity:e.condition,dataModelBindConfig:e.condition.dataConfig.dataModel?e.condition.dataConfig.dataModel.dataModelBind||[]:[]}}),r.getConditionChartChooser({label:d.default("关联依赖本条件的过滤条件"),name:"conditionBind",config:{mode:"condition",conditionEntity:e.condition,dataModelBindConfig:e.condition.dataConfig.dataModel?e.condition.dataConfig.dataModel.dataModelBind||[]:[]}})])}return C=C.concat([{name:"config.dependences",hiddenOn:"data.dataType != 'sql' && data.dataType != 'api' && data.dataType != 'dataModel'",children:function(a){var d=a.onChange,o=a.value;return l.createElement(i.default,t.__assign({},{onChange:d,value:o,conditionSelfKey:e.condition.key}))}}]),m.concat(C,{type:"divider"},c.amisInlineSwitch("config.slideShow",d.default("开启选项轮播"),"!data.isDashCondition"),{type:"number",name:"config.slideInterval",hiddenOn:"!config.slideShow",label:d.default("轮播间隔毫秒数"),step:500,min:500})}});
;sugar.define("sugar:widgets/conditions/select/list.tsx",function(e,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var t=e("sugar:node_modules/tslib/tslib.js"),n=e("sugar:node_modules/react/index.js"),a=e("sugar:node_modules/classnames/index.js"),i=e("sugar:stores/index.ts"),l=e("sugar:widgets/conditions/select/select.tsx"),r=function(e){function s(){return null!==e&&e.apply(this,arguments)||this}return t.__extends(s,e),s.prototype.render=function(){var e=this.props,s=e.data,t=e.value,i=e.disabled,r=e.onChange,d=e.cls,o=void 0===d?"":d,c=t;return n.createElement("div",{className:"clearfix select-list-container "+o},s.data.map(function(e,s){var t=l.processLabelAndValue(e),d=t.label,o=t.value,u=c===o;return n.createElement("div",{className:a("select-list",{active:u,disabled:i}),key:s,onClick:function(){!i&&!u&&r(o,s)}},d)}))},s.displayName="SelectList",s=t.__decorate([i.observer],s)}(n.Component);s.default=r});
;sugar.define("sugar:widgets/conditions/_hoc/debug/debug-dialog.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=e("sugar:node_modules/tslib/tslib.js"),l=e("sugar:utils/i18n.ts"),n=e("sugar:node_modules/react/index.js"),s=e("sugar:node_modules/lodash/get.js"),i=e("sugar:node_modules/amis/lib/index.js"),d=e("sugar:stores/index.ts"),o=e("sugar:widgets/code-editor.tsx"),r=e("sugar:widgets/sql-model-selector/sql-model-editor.tsx"),m=e("sugar:widgets/ctrl-panel/data-bind-ctrl/index.tsx"),c=e("sugar:widgets/api-adaptor-selector/api-adaptor-editor.tsx"),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.componentWillMount=function(){this.onClose=this.onClose.bind(this),this.onSQLModelUpdate=this.onSQLModelUpdate.bind(this),this.onShowApiAdaptorDialog=this.onShowApiAdaptorDialog.bind(this),this.onApiAdaptorUpdate=this.onApiAdaptorUpdate.bind(this),this.setState({showQuickModifySQLDialog:!1,showQuickModifyApiAdaptorDialog:!1,adaptorHash:""})},t.prototype.onClose=function(){this.setState({showQuickModifySQLDialog:!1,showQuickModifyApiAdaptorDialog:!1})},t.prototype.onShowApiAdaptorDialog=function(e){this.setState({showQuickModifyApiAdaptorDialog:!0,adaptorHash:e}),this.props.apiAdaptorStore.detailMap.loadDetail(e)},t.prototype.onSQLModelUpdate=function(e,t){var a=this;this.props.sqlModelStore.update(e).then(function(e){e.res&&"done"===e.state&&(a.onClose(),i.toast.success(l.default("SQL模型更新成功")),t?a.props.dataKey?a.props.condition.loadDebugOtherData(a.props.dataKey):a.props.condition.loadDebugData():a.props.onClose())})},t.prototype.onApiAdaptorUpdate=function(e,t){var a=this;this.props.apiAdaptorStore.update(e).then(function(e){e.res&&"done"===e.state&&(a.onClose(),i.toast.success(l.default("数据转换器更新成功")),t?a.props.dataKey?a.props.condition.loadDebugOtherData(a.props.dataKey):a.props.condition.loadDebugData():a.props.onClose())})},t.prototype.getTable=function(e,t,a){return e.length&&t&&t.length?n.createElement("div",{className:"dataset-table",key:"table-"+a},n.createElement("table",{className:"table table-bordered"},n.createElement("thead",null,n.createElement("tr",null,t.map(function(e,t){return n.createElement("th",{key:t},e.name||e)}))),n.createElement("tbody",null,e.map(function(e,a){return a>=1e3?null:n.createElement("tr",{key:a},t.map(function(t,a){return n.createElement("td",{key:a},e[t.id||t])}))})))):n.createElement("div",{className:"dataset-table",key:"table-"+a},"没有查询到数据")},t.prototype.getDataset=function(e,t){var a=this,i=e.data,d=i.dataset,o=i.multiData,r=i.isMulti,m=i.datasetColumnHeader,c=i.runSqlTime,u=(r?o.dataset:d)||[],p=(r?o.datasetColumnHeader:m)||[],g=r?s(u,"[0][0]"):u[0];if(g&&!p.length)for(var f in g)p.push([f]);return n.createElement("div",{className:"col-md-"+t},n.createElement("div",{className:"info-title"},"SQL查询结果",n.createElement("span",{className:"text-info-lter"},l.default("（耗时 「"+((r?(o.runSqlTime||[]).reduce(function(e,t){return e+t},0):c)||0)+"」ms, 共「"+((r?u.map(function(e){return(null===e||void 0===e?void 0:e.length)||0}).reduce(function(e,t){return e+t},0):u.length)||0)+"」行"),!r&&u.length>1e3?l.default("，下面展示前1000行"):"","）"),"："),r?u.map(function(e,t){return[n.createElement("div",{key:"time-"+t},l.default("耗时 「"+s(o,"runSqlTime["+t+"]")+"」ms，共「"+e.length+"」行"),e.length>1e3?l.default("，下面展示前1000行"):""),a.getTable(e,p[t],t)]}):this.getTable(u,p,0))},t.prototype.getDataModelSql=function(e){var t=e.data,a=t.sql,n=t.isMulti,i=t.multiData;return n?((null===i||void 0===i?void 0:i.sql)||[]).map(function(e,t){return"/* "+l.default("耗时")+s(i,"generateSqlTime["+t+"]","")+"ms */\n"+e}).join("\n\n")||"":a||""},t.prototype.render=function(){var e=this,t=this.props,s=t.dataKey,d=t.condition,u=t.debugData,p=t.onClose,g=s?u.other.get(s):u,f=s?d.dataConfig.otherData[s]:d,h=n.createElement("div",null,"TODO");if("pending"===g.loadState)h=n.createElement(i.Spinner,{overlay:!0});else if("error"===g.loadState)h=n.createElement("div",null,g.loadError.message?g.loadError.message:l.default("获取调试信息错误，如果使用的SQL模型，可能是SQL查询结果太大导致内存溢出"));else if("api"===f.dataType){var E=null;if(0===g.data.status?(0!==g.data.data.status?E=n.createElement("div",{className:"error"},l.default(g.data.data.msg||"API返回的status不为0")):g.data.data.data||(E=n.createElement("div",{className:"warning"},l.default("无数据"))),E&&(E=n.createElement("div",{className:"col-md-12"},n.createElement("div",{className:"info-title"},l.default("数据调试结论：")),E))):E=n.createElement("div",{className:"col-md-12"},n.createElement("div",{className:"info-title"},l.default("数据调试结论：")),n.createElement("div",{className:"error"},l.default(g.data.msg||"后端post请求错误"))),g.data.apiProOpen){var v=JSON.stringify(g.data.headers||{},null,2),N=JSON.stringify(g.data.postData||{},null,2),y=JSON.stringify(g.data.apiProPostList||{},null,2),S={minHeight:120,maxHeight:240},b=18*Math.max(v.split("\n").length,N.split("\n").length,y.split("\n").length),D=null,A=null,O=null,C=null;"GET"===g.data.apiProMethod?(D=n.createElement("div",{className:"col-md-12"},n.createElement("div",{className:"info-title"},l.default("API请求方式"),"：",n.createElement("span",{className:"text-info-lter"},"GET"))),O=n.createElement("div",{className:"col-md-6"},n.createElement("div",{className:"info-title"},l.default("可使用的参数（过滤条件等）：")),n.createElement(o.default,{contaierClassName:"p-l-sm",value:N,language:"json",style:a.__assign({},S),height:b,options:{readOnly:!0}})),A=n.createElement("div",{className:"col-md-6"},n.createElement("div",{className:"info-title"},l.default("Header头部：")),n.createElement(o.default,{contaierClassName:"p-l-sm",value:v,language:"json",style:a.__assign({},S),height:b,options:{readOnly:!0}}))):(D=n.createElement("div",{className:"col-md-12"},n.createElement("div",{className:"info-title"},l.default("API请求方式"),"：",n.createElement("span",{className:"text-info-lter"},"POST"),"，",l.default("POST数据方式"),"：",n.createElement("span",{className:"text-info-lter"},m.apiPostTypeMap[g.data.apiProPostType]))),O=n.createElement("div",{className:"col-md-4"},n.createElement("div",{className:"info-title"},l.default("可使用的参数（过滤条件等）：")),n.createElement(o.default,{contaierClassName:"p-l-sm",value:N,language:"json",style:a.__assign({},S),height:b,options:{readOnly:!0}})),A=n.createElement("div",{className:"col-md-4"},n.createElement("div",{className:"info-title"},l.default("Header头部：")),n.createElement(o.default,{contaierClassName:"p-l-sm",value:v,language:"json",style:a.__assign({},S),height:b,options:{readOnly:!0}})),C=n.createElement("div",{className:"col-md-4"},n.createElement("div",{className:"info-title"},l.default("POST数据内容：")),n.createElement(o.default,{contaierClassName:"p-l-sm",value:y,language:"json",style:a.__assign({},S),height:b,options:{readOnly:!0}})));var M=n.createElement("div",{className:"col-md-12"},n.createElement("div",{className:"info-title"},l.default("API的URL地址为：")),n.createElement("div",{className:"post-url"},l.default(decodeURI(g.data.url||"无")))),w=null,x=null;if(0===g.data.status){var T=JSON.stringify(g.data.data||null,null,2);x=n.createElement(o.default,{contaierClassName:"p-l-sm",value:T,language:"json",style:{minHeight:200,maxHeight:500},height:18*T.split("\n").length,options:{readOnly:!0}})}if(g.data.adaptorDebugList&&g.data.adaptorDebugList.length){var L=g.data.adaptorDebugList.map(function(t,a){return n.createElement("div",{className:"col-md-12",key:a},n.createElement("div",{className:"row"},n.createElement("div",{className:"col-md-12"},n.createElement("div",{className:"adaptor-name text-info"},t.name),t.status?n.createElement("div",{className:"error"},t.msg||l.default("数据转换器执行错误")):null),n.createElement("div",{className:"col-md-6"},n.createElement("div",{className:"info-title with-btn"},l.default("转换器执行耗时")," ",n.createElement("span",{className:"text-info-lter"},t.time,"ms "),n.createElement(i.Button,{level:"info",size:"sm",onClick:function(){return e.onShowApiAdaptorDialog(t.hash)}},l.default("修改本数据转换器"))),n.createElement(o.default,{contaierClassName:"p-l-sm",value:t.content,language:"javascript",height:391,options:{readOnly:!0}})),n.createElement("div",{className:"col-md-6"},n.createElement("div",{className:"info-title"},l.default("转换器输入数据："),a?null:l.default("（API请求的返回结果）")),n.createElement(o.default,{contaierClassName:"p-l-sm",value:t.input,language:"json",height:180,options:{readOnly:!0}})),n.createElement("div",{className:"col-md-6"},n.createElement("div",{className:"info-title"},l.default("转换器输出数据：")),n.createElement(o.default,{contaierClassName:"p-l-sm",value:t.output,language:"json",height:180,options:{readOnly:!0}})),a!==g.data.adaptorDebugList.length-1?n.createElement("div",{className:"adaptor-debug-divider col-md-12"}):null))});w=n.createElement("div",{className:"col-md-12"},n.createElement("div",{className:"info-title",style:{marginTop:25}},l.default("API数据转换器执行情况"),g.data.time?n.createElement("span",{className:"text-info-lter"},l.default("（API请求耗时 「"+g.data.time+"」ms）")):null,"："),n.createElement("div",{className:"adaptor-debug-container"},n.createElement("div",{className:"row"},L)))}h=n.createElement("div",{className:"row debug-dialog"},E,D,M,n.createElement("div",{className:"col-md-12"},n.createElement("div",{className:"row"},O,A,C)),w,x?n.createElement("div",{className:"col-md-12"},n.createElement("div",{className:"info-title"},l.default(g.data.adaptorDebugList&&g.data.adaptorDebugList.length?"最终返回结果是":"API请求的结果是"),!g.data.time||g.data.adaptorDebugList&&g.data.adaptorDebugList.length?null:n.createElement("span",{className:"text-info-lter"},l.default("（API请求耗时 「"+g.data.time+"」ms）")),"："),x):null)}else{var M=n.createElement("div",{className:"col-md-12"},n.createElement("div",{className:"info-title"},window.sugarConfig.name," ",l.default("后端使用『POST』方式访问您绑定的API，各个语言下获取参数的方式请"),n.createElement("a",{href:"/docs/DataBind-API-Common",className:"post-url",target:"_blank"},l.default("参考这里")),l.default("，API的URL地址为：")),n.createElement("div",{className:"post-url"},l.default(decodeURI(g.data.url||"无")))),v=JSON.stringify(g.data.headers||{},null,2),N=JSON.stringify(g.data.postData||{},null,2),S={minHeight:200,maxHeight:400},b=18*Math.max(v.split("\n").length,N.split("\n").length),A=n.createElement("div",{className:"col-md-6"},n.createElement("div",{className:"info-title"},l.default("POST请求的『Headers』为：")),n.createElement(o.default,{contaierClassName:"p-l-sm",value:v,language:"json",style:a.__assign({},S),height:b,options:{readOnly:!0}})),O=n.createElement("div",{className:"col-md-6"},n.createElement("div",{className:"info-title"},l.default("POST的数据为（过滤条件等）：")),n.createElement(o.default,{contaierClassName:"p-l-sm",value:N,language:"json",style:a.__assign({},S),height:b,options:{readOnly:!0}})),x=null;if(0===g.data.status){var T=JSON.stringify(g.data.data||null,null,2);x=n.createElement(o.default,{contaierClassName:"p-l-sm",value:T,language:"json",style:{minHeight:200,maxHeight:2e3},height:18*T.split("\n").length,options:{readOnly:!0}})}h=n.createElement("div",{className:"row debug-dialog"},E,M,n.createElement("div",{className:"col-md-12"},n.createElement("div",{className:"row"},A,O)),x?n.createElement("div",{className:"col-md-12"},n.createElement("div",{className:"info-title"},l.default("POST请求的结果是"),g.data.time?n.createElement("span",{className:"text-info-lter"},l.default("（请求耗时 「"+g.data.time+"」ms）")):null,"："),x):null)}}else if("sql"===f.dataType||"dataModel"===f.dataType){var P=null;0===g.data.status?g.data.data||(P=n.createElement("div",{className:"warning"},l.default("无数据"))):g.data.isMulti?(P=[],(g.data.multiData.msg||[]).forEach(function(e,t){[0,404].includes((g.data.multiData.status||[])[t])||P.push(n.createElement("div",{className:"error",key:"error-"+t},l.default(e||"SQL生成或者执行时发生未知错误")))})):P=n.createElement("div",{className:"error"},l.default(g.data.msg||"SQL生成或者执行时发生未知错误")),P&&(P=n.createElement("div",{className:"col-md-12"},n.createElement("div",{className:"info-title"},l.default("数据调试结论：")),P));var N=JSON.stringify(g.data.postData||{},null,2),S={minHeight:100,maxHeight:400},b=18*N.split("\n").length,O="{}"!==JSON.stringify(g.data.postData)?n.createElement("div",{className:"col-md-12"},n.createElement("div",{className:"info-title"},l.default("POST的数据为（过滤条件等）：")),n.createElement(o.default,{contaierClassName:"p-l-sm",value:N,language:"json",style:a.__assign({},S),height:b,options:{readOnly:!0}})):null,_=this.getDataModelSql(g),k=18*Math.max((g.data.originSql||"").split("\n").length,_.split("\n").length),q=void 0!==g.data.originSql?n.createElement("div",{className:"col-md-6"},n.createElement("div",{className:"info-title with-btn"},l.default("原始伪SQL："),n.createElement(i.Button,{level:"info",size:"sm",onClick:function(){return e.setState({showQuickModifySQLDialog:!0})}},l.default("修改SQL模型"))),n.createElement(o.default,{contaierClassName:"p-l-sm",value:g.data.originSql||"",language:"sql",style:{minHeight:100},height:k,options:{readOnly:!0}})):null,H=n.createElement("div",{className:"col-md-"+(void 0!==g.data.originSql?6:12)},n.createElement("div",{className:"info-title with-btn"},l.default("生成的SQL"),n.createElement("span",{className:"text-info-lter"},l.default("（耗时 "),(g.data.isMulti?(g.data.multiData.generateSqlTime||[]).reduce(function(e,t){return e+t},0):g.data.generateSqlTime)||0,"ms）"),"："),n.createElement(o.default,{contaierClassName:"p-l-sm",value:_||"",language:"sql",style:{minHeight:100},height:k,options:{readOnly:!0}})),Q=6,j=!1;g.data.datasetInternal&&JSON.stringify(g.data.dataset||[])!==JSON.stringify(g.data.datasetInternal||[])&&(Q=4,j=!0);var I=this.getDataset(g,Q),J=g.data.datasetInternal||[],U=[];if(J.length)for(var B in J[0])U.push(B);var K=j?n.createElement("div",{className:"col-md-"+Q},n.createElement("div",{className:"info-title"},l.default("中间结果(行转列或数据补全等)："),n.createElement("span",{className:"text-info-lter"},l.default("（共「"+J.length+"」行"),J.length>1e3?l.default("，下面展示前1000行"):"","）"),"："),n.createElement("div",{className:"dataset-table"},n.createElement("table",{className:"table table-bordered"},n.createElement("thead",null,n.createElement("tr",null,U.map(function(e,t){return n.createElement("th",{key:t},e)}))),n.createElement("tbody",null,J.map(function(e,t){return t>=1e3?null:n.createElement("tr",{key:t},U.map(function(t,a){return n.createElement("td",{key:a},null!=e[t]&&e[t].toString?e[t].toString():e[t])}))}))))):null,T=JSON.stringify(g.data.data||{},null,2),R=T.length<2e4?n.createElement("div",{className:"col-md-"+Q},n.createElement("div",{className:"info-title"},l.default("格式化后结果"),null!=g.data.formatDataTime?n.createElement("span",{className:"text-info-lter"},l.default("（耗时 「"+g.data.formatDataTime+"」ms）")):null,"："),n.createElement(o.default,{contaierClassName:"p-l-sm",value:T,language:"json",style:{minHeight:200},height:18*T.split("\n").length,options:{readOnly:!0}})):n.createElement("div",{className:"col-md-"+Q},n.createElement("div",{className:"info-title"},l.default("格式化后结果，结果太大已截取前20000字符"),null!=g.data.formatDataTime?n.createElement("span",{className:"text-info-lter"},l.default("（耗时")," ",g.data.formatDataTime,"ms）"):null,"："),n.createElement("textarea",{style:{width:"100%",height:500},value:T.substr(0,2e4)}));h=n.createElement("div",{className:"row debug-dialog"},P,O,n.createElement("div",{className:"col-md-12 row"},q,H),n.createElement("div",{className:"col-md-12 row"},I,K,R))}return[n.createElement(i.Modal,{show:!0,backdrop:"static",contentClassName:"bigger-modal",key:"debug-dialog"},n.createElement(i.Modal.Header,{showCloseButton:!0,onClose:p},n.createElement(i.Modal.Title,null,l.default("过滤条件「"+s+"」数据调试：「"+d.label+"」"))),n.createElement(i.Modal.Body,null,h),n.createElement(i.Modal.Footer,null,n.createElement(i.Button,{level:"primary",onClick:p},l.default("确定")))),this.state.showQuickModifySQLDialog?n.createElement(r.default,{key:"sql-model-editor",mode:"update",onClose:this.onClose,onSubmit:this.onSQLModelUpdate,sqlModelEntity:this.props.sqlModelStore.detailMap.mapByHash.get(f.dataModelHash),isInDebug:!0}):null,this.state.showQuickModifyApiAdaptorDialog?n.createElement(c.default,{key:"api-adaptor-dialog",mode:"update",onClose:this.onClose,onSubmit:this.onApiAdaptorUpdate,apiAdaptorEntity:this.props.apiAdaptorStore.detailMap.mapByHash.get(this.state.adaptorHash),isInDebug:!0}):null]},t.displayName="ConditionDebugDialog",t=a.__decorate([d.inject(function(e){return{sqlModelStore:e.sqlModel,apiAdaptorStore:e.apiAdaptor}}),d.observer],t)}(n.Component);t.default=u});
;sugar.define("sugar:widgets/conditions/_hoc/debug/debug.tsx",function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=t("sugar:node_modules/tslib/tslib.js"),n=t("sugar:node_modules/react/index.js"),i=t("sugar:stores/index.ts"),a=t("sugar:widgets/conditions/_hoc/debug/debug-dialog.tsx");e.default=function(t){var e;return i.observer((e=function(e){function i(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={open:!1,dataKey:void 0},t}return o.__extends(i,e),i.prototype.componentWillMount=function(){this.openDialog=this.openDialog.bind(this),this.closeDialog=this.closeDialog.bind(this)},i.prototype.openDialog=function(t){void 0===t&&(t=""),this.state.open||this.setState({open:!0,dataKey:t})},i.prototype.closeDialog=function(){this.setState({open:!1})},i.prototype.render=function(){var e=this,i=this.props,s=i.hub,u=o.__rest(i,["hub"]);return s.debugData&&"pending"===s.debugData.loadState?setTimeout(this.openDialog,10):s.debugData&&s.debugData.other&&s.debugData.other.forEach(function(t,o){t&&"pending"===t.loadState&&setTimeout(function(){return e.openDialog(o)},10)}),[n.createElement(t,o.__assign({},this.props,{key:"component"})),this.state.open&&s.debugData?n.createElement("div",{key:"event",style:{display:"none"},onMouseDown:function(t){t.stopPropagation()}},n.createElement(a.default,{key:"debugDialog",dataKey:this.state.dataKey,condition:u.condition,debugData:s.debugData,onClose:this.closeDialog})):null]},i}(n.Component),e.displayName="ConditionDebugHOC",e))}});
;sugar.define("sugar:widgets/conditions/select/style.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.listStyle=t.selectStyle=void 0;var o=e("sugar:node_modules/tinycolor2/tinycolor.js"),i=e("sugar:sites/sugar-cxd.ts"),r=i.appTheme.classnames;t.selectStyle={background:function(e,t,i){return void 0===t&&(t=""),void 0===i&&(i=""),[[["."+r("Select-popover")],{background:e}],[[" ."+r("Select")],{background:t||e}],[[" ."+r("Select")+":hover"],{background:i||e}],[[" ."+r("Select")+".is-opened"," ."+r("Select")+".is-focused"],{background:o(e).setAlpha(.8).toString()}]]},fontColor:function(e){return[[[" ."+r("Select-clear")+" svg"],{fill:o(e).setAlpha(.8).toString()}],[[" ."+r("Select-input")+" > svg"],{fill:e}],[[" ."+r("Select")," ."+r("Select-arrow")+" .icon-caret","."+r("Select-popover")],{color:e}],[[" ."+r("Select-placeholder")," ."+r("Select-input")+" > input::placeholder"],{color:o(e).setAlpha(.8).toString()}]]},borderColor:function(e){return[[[" ."+r("Select-value")," ."+r("Select")," ."+r("Select")+":hover"," ."+r("Select-input")],{"border-color":e}],[["."+r("Select-popover")],{border:"1px solid "+e,"border-top-color":"transparent"}]]},fontSize:function(e){void 0===e&&(e=16);var t=+(e/14).toFixed(2);return[[[" ."+r("Select")],{height:(30*t).toFixed(2)+"px",overflow:"hidden","padding-left":(10*t).toFixed(2)+"px"}],[[" ."+r("Select-valueWrap")],{transform:"scale("+t+")","transform-origin":"0 center",display:"flex","align-items":"center"}],[[" ."+r("Select-arrow")],{"margin-right":(4*t).toFixed(2)+"px",width:(10*t).toFixed(2)+"px"}],[[" ."+r("Select-clear")],{padding:"3px "+(3*t).toFixed(2)+"px"}],[[" ."+r("Select-clear")+" svg"," ."+r("Select-arrow")+" svg"],{width:(10*t).toFixed(2)+"px",height:(10*t).toFixed(2)+"px"}],[[" ."+r("Select-option")],{"font-size":e+"px"}],[[" ."+r("Select-input")],{"font-size":e+"px",height:(29*t+1).toFixed(2)+"px"}],[[" ."+r("Select-input")+" svg"],{width:(.875*e).toFixed(2)+"px",height:(.875*e).toFixed(2)+"px"}],[[" ."+r("Select-menu")],{"max-height":(18.75*e).toFixed(2)+"px"}]]},selectActiveFontColor:function(e){return[[[" ."+r("Select-option")+".is-highlight"," ."+r("Select-option")+".is-active"],{color:e}]]},highlightBgColor:function(e){return[[[" ."+r("Select-option")+".is-highlight"],{background:e}]]}},t.listStyle={fontColor:function(e){return[[[" .select-list"],{color:e}]]},selectActiveFontColor:function(e){return[[[" .select-list-container .select-list.active"," .select-list-container .select-list:hover"],{color:e,"border-color":e}]]},fontSize:function(e,t){void 0===e&&(e=16);var o=+(e/14).toFixed(2);return[[[" .select-list-container"],{transform:"scale("+o+")","transform-origin":"0 center",width:((t-30)/o).toFixed(2)+"px"}]]}}});
;sugar.define("sugar:widgets/conditions/select/select.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setColor=t.setSelectDefaultColor=t.defaultValOrUrlVal2view=t.view2Display=t.processLabelAndValue=void 0;{var a=e("sugar:node_modules/tslib/tslib.js"),n=e("sugar:utils/i18n.ts"),l=e("sugar:node_modules/react/index.js"),o=e("sugar:node_modules/amis/lib/index.js"),i=e("sugar:node_modules/amis/lib/components/Select.js"),s=e("sugar:widgets/conditions/condition-manager.tsx"),r=e("sugar:stores/index.ts"),d=e("sugar:widgets/conditions/select/select-ctrl.tsx"),u=e("sugar:widgets/conditions/select/list.tsx"),c=e("sugar:widgets/conditions/_hoc/debug/debug.tsx"),h=e("sugar:sites/sugar-cxd.ts"),f=e("sugar:utils/condition-helper.ts"),v=e("sugar:widgets/conditions/select/style.tsx");h.appTheme.classnames}t.processLabelAndValue=function(e){var t,a;return e instanceof Array?(t=e[0],a=e[1]):"object"==typeof e?(t=e.hasOwnProperty("name")?e.name:e.label,a=e.value):t=a=e,"number"==typeof t?t=t.toString():null===t?t="null":void 0===t&&(t="undefined"),{label:t,value:a}};var g=function(e){function s(){var t=null!==e&&e.apply(this,arguments)||this;return t.sliderIntervalEvent="",t.slideIndex=0,t.dom=null,t}return a.__extends(s,e),s.prototype.componentWillMount=function(){this.props.condition.loadData(this.props.mode,!0),this.handleChange=this.handleChange.bind(this)},s.prototype.handleChange=function(e,a){var n=this;if(void 0==a){var l=this.props.hub.data;if(!(l&&l.data&&l.data.length&&l.data.map))return;var o=l.data.map(function(e){return t.processLabelAndValue(e)});o.some(function(t,a){return t.value===e&&(n.slideIndex=a),t.value===e})}else this.slideIndex=a;this.props.handleChange(e)},s.prototype.componentWillUnmount=function(){this.sliderIntervalEvent&&clearInterval(this.sliderIntervalEvent)},s.prototype.render=function(){var e=this,a=this.props,s=(a.mode,a.disabled),r=a.hub,d=a.condition,c=a.container,h=a.conditionConfig,v=r.data,g=r.value.value,p=null;this.sliderIntervalEvent&&clearInterval(this.sliderIntervalEvent);var m=d.type+"-"+h.hash+" condition_"+d.frontendId;if(v)if("pending"===v.loadState)p=l.createElement(o.Spinner,{inline:!0,size:"sm"});else if("error"!==v.loadState&&v.data&&v.data.length&&v.data.map){var C=v.data.map(function(e){return t.processLabelAndValue(e)}),_=d.config,b=_.slideShow,y=_.slideInterval;f.insertRule("."+d.type+"-"+h.hash+".condition_"+d.frontendId,t.setColor(this.props)),b&&(this.sliderIntervalEvent=setInterval(function(){var t=(e.slideIndex+1)%C.length;e.handleChange(C[t].value,t)},y||2e3)),p="list"!==d.config.uiMode||d.halfWidth?l.createElement(i.default,{className:"condition__form-item",popoverClassName:m,searchable:v.data.length>=10&&!d.config.disableSeachable,simpleValue:!0,disabled:!!s,value:g,clearable:!0,options:C,onChange:this.handleChange,placeholder:n.default("请选择"),locale:n.lang,popOverContainer:c?function(){return c}:null}):l.createElement(u.default,{disabled:s,data:v,value:g,onChange:this.handleChange})}else p=l.createElement("div",{className:"no-data"},n.default("无数据"));else p=l.createElement("div",{className:"no-data"},n.default("请绑定数据"));return l.createElement("div",{className:"col-xs-12 "+m},p)},s.displayName="SelectCondition",s=a.__decorate([c.default,r.observer],s)}(l.Component);t.default=g,t.view2Display=function(e,a,n){if(null==e)return"";if(n&&n.length){var l=e;return n.forEach(function(a){var n=t.processLabelAndValue(a);return n.value===e?void(l=n.label):void 0}),l}return e},t.defaultValOrUrlVal2view=function(e,t,a,n,l){if(void 0===e&&(e=null),void 0===l&&(l=!1),l&&null!=n&&(e=n),"__sugar_showx_custom"===e&&(e=t.cusDefaultVal),!a||"done"!==a.loadState||!a.data||!a.data.length)return e;if("string"==typeof e&&/^__showx_default_value_/.test(e)){var o=a.data,i=0;"__showx_default_value_second"===e?i=1:"__showx_default_value_last"===e&&(i=o.length-1);var s=o[i];return s instanceof Array?s[1]:"object"==typeof s?s.value:s}return e};var p=function(e){var t=e.dataConfig.dataModel,a=(t.name,t.value),n=void 0===a?[]:a;return n.length?!0:!1};t.setSelectDefaultColor=function(e,t){var a=f.getCommonColor(e,!!t.isDashCondition),n=f.getStyleOptions(["backgroundDefault","fontColor","borderColor","highlightBgColor","selectActiveFontColor"],v.selectStyle,a,t).concat(f.getStyleOptions(["fontColor","selectActiveFontColor"],v.listStyle,a,t));return n},t.setColor=function(e){var t=e.condition,a=e.condition,n=a.config,l=a.config.uiMode;return"list"===l?f.getStyleOptions(["fontColor","selectActiveFontColor","fontSizeList"],v.listStyle,n,t):f.getStyleOptions(["background","fontSizeSelect","borderColor","fontColor","selectActiveFontColor","highlightBgColor"],v.selectStyle,n,t)},s.register({type:"select",name:n.default("单选列表"),iconClassName:"condition-list",variants:[{name:n.default("下拉单选"),iconClassName:"condition-select",initialState:{config:{uiMode:"select"}}}],initialState:{defaultVal:"__showx_default_value_first",dataType:"api",dataApiUrl:d.conDemoUrl,config:{uiMode:"list"}},component:g,canHalfWidth:!0,defaultValOrUrlVal2view:t.defaultValOrUrlVal2view,view2Display:t.view2Display,basicCtrl:d.basicCtrl,dataBindCtrl:d.dataBindCtrl,dataModelBindMonitorField:"value",dataModelPanelShow:[["dataType","dataModel"]],initialDashboardState:{width:400,height:180},needDashboardAutoFresh:!0,loadDataWhenDataModelConfigChange:p})});
;sugar.define("sugar:widgets/conditions/date/date-limit-ctrl.tsx",function(e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.dateLimitCtrl=void 0;var l=e("sugar:utils/i18n.ts"),t=e("sugar:utils/date-helper.ts");a.dateLimitCtrl=[{type:"radios",name:"config.range",inline:!1,label:l.default("日期可选范围"),options:[{label:l.default("无限制"),value:""},{label:l.default("近半月"),value:"halfMonth"},{label:l.default("近一月"),value:"month"},{label:l.default("近三月"),value:"threeMonth"},{label:l.default("自定义"),value:"cus"}]},{type:"text",label:"",className:"p-l-md",placeholder:l.default("开始日期"),name:"config.rangeCusBegin",hiddenOn:"data.config.range != 'cus'"},{type:"text",label:l.default("至"),className:"p-l-md",placeholder:l.default("截止日期"),name:"config.rangeCusEnd",hiddenOn:"data.config.range != 'cus'",desc:t.dateCusStringInfo}]});
;sugar.define("sugar:widgets/conditions/date/hot-key.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getHotKeyCtrl=void 0;var a=e("sugar:utils/i18n.ts"),n=e("sugar:utils/date-helper.ts"),l=e("sugar:widgets/amis-inline-switch.tsx");t.getHotKeyCtrl=function(e){return"date"===e?[l.amisInlineSwitch("config.openHotKeys",a.default("开启自定义快捷键")),{type:"combo",name:"config.hotKeys",hiddenOn:"data.config.openHotKeys != true",multiple:!0,multiLine:!0,controls:[{type:"text",name:"name",label:a.default("快捷键名称")},{type:"text",name:"value",label:a.default("快捷日期"),placeholder:a.default("请按照下面说明填写"),desc:n.dateCusStringInfo}]}]:"dateTime"===e?[l.amisInlineSwitch("config.openHotKeys",a.default("开启自定义快捷键")),{type:"combo",name:"config.hotKeys",hiddenOn:"data.config.openHotKeys != true",multiple:!0,multiLine:!0,controls:[{type:"text",name:"name",label:a.default("快捷键名称")},{type:"number",name:"value",label:a.default("快捷时间为几分钟前")}]}]:"dateRange"===e?[l.amisInlineSwitch("config.openHotKeys",a.default("开启自定义快捷键")),{type:"combo",name:"config.hotKeys",hiddenOn:"data.config.openHotKeys != true",multiple:!0,multiLine:!0,controls:[{type:"text",name:"name",label:a.default("快捷键名称")},{type:"text",name:"value.start",label:a.default("快捷起始日期"),placeholder:a.default("请按照下面说明填写")},{type:"text",name:"value.end",label:a.default("快捷结束日期"),placeholder:a.default("请按照下面说明填写"),desc:n.dateCusStringInfo}]}]:[l.amisInlineSwitch("config.openHotKeys",a.default("开启自定义快捷键")),{type:"combo",name:"config.hotKeys",hiddenOn:"data.config.openHotKeys != true",multiple:!0,multiLine:!0,controls:[{type:"text",name:"name",label:a.default("快捷键名称")},{type:"number",name:"value.start",label:a.default("快捷起始时间为几分钟前")},{type:"number",name:"value.end",label:a.default("快捷结束时间为几分钟前")}]}]}});
;sugar.define("sugar:widgets/conditions/date/date-ctrl.tsx",function(t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.advancedCtrl=a.dataBindCtrl=a.basicCtrl=void 0;var e=t("sugar:utils/i18n.ts"),d=t("sugar:widgets/conditions/date/date-limit-ctrl.tsx"),i=t("sugar:widgets/conditions/date/hot-key.tsx"),o=t("sugar:utils/date-helper.ts"),n=t("sugar:widgets/data-model/data-model-bind-chooser/data-model-bind-chooser.tsx"),l=t("sugar:widgets/data-model/data-model-condition-chart-chooser/data-model-condition-chart-chooser.tsx"),s=t("sugar:widgets/data-model/data-model-bind-chooser/data-model-bind-chooser-item.tsx"),r=t("sugar:utils/data-model-helper.ts"),c=t("sugar:widgets/ctrl-panel/condition-ctrl.tsx");a.basicCtrl=function(t){return[{type:"divider"},{type:"radios",name:"defaultVal",inline:!1,label:e.default("默认值"),options:[{label:e.default("无"),value:""},{label:e.default("昨天"),value:"yesterday"},{label:e.default("前天"),value:"beforeYesterday"},{label:e.default("今天"),value:"today"},{label:e.default("自定义"),value:"cus"}]},{type:"text",label:"",className:"p-l-md",placeholder:e.default("输入自定义的默认值"),name:"config.cusDefaultVal",hiddenOn:"data.defaultVal != 'cus'",desc:o.dateCusStringInfo},{type:"divider"}].concat(d.dateLimitCtrl,c.dateCustomColorCtrl(!!t.condition.isDashCondition))},a.dataBindCtrl=function(t){var a=r.findUsingDataModelHashsInReport(t.chartList,t.conditionList);if(!a.size)return[];var d=["=","!=",">","<",">=","<="],i=d.map(function(t){return{label:s.linkTypeMap.get(t),value:t}}),o=[n.getDataModelBindChooser({label:e.default("选择要过滤的数据模型"),config:{amisConfig:[{name:"linkType",label:e.default("请选择关联方式"),type:"radios",inline:!1,options:i}],initialStates:{linkType:"="},conditionEntity:t.condition,supportFieldType:["date","datetime","timestamp"]}}),l.getConditionChartChooser({label:e.default("关联的图表"),name:"chartBind",config:{conditionEntity:t.condition,dataModelBindConfig:t.condition.dataConfig.dataModel?t.condition.dataConfig.dataModel.dataModelBind||[]:[]}}),l.getConditionChartChooser({label:e.default("关联依赖本条件的过滤条件"),name:"conditionBind",config:{mode:"condition",conditionEntity:t.condition,dataModelBindConfig:t.condition.dataConfig.dataModel?t.condition.dataConfig.dataModel.dataModelBind||[]:[]}})];return o},a.advancedCtrl=i.getHotKeyCtrl("date")});
;sugar.define("sugar:widgets/conditions/date/style.tsx",function(t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var e=t("sugar:node_modules/tinycolor2/tinycolor.js"),d=t("sugar:sites/sugar-cxd.ts"),o=d.appTheme.classnames;r.default={background:function(t,r,d){return void 0===r&&(r=""),void 0===d&&(d=""),[[[" .rdt td.rdtDay","."+o("PopOver")," ."+o("DatePicker")," ."+o("CalendarInput")," ."+o("DatePicker-shortcuts")," .rdtYear.rdtDisabled > span"],{background:t}],[[" ."+o("DatePicker")],{background:r||t}],[[" ."+o("DatePicker")+":not(.is-disabled):hover"],{background:d||e(t).setAlpha(.9).toString()}]]},fontColor:function(t){return[[[" .rdtSwitch"," .rdtPrev"," .rdtNext"," td.rdtDay"," .rdtYears .rdtYear"," ."+o("DatePicker")," ."+o("DatePicker-placeholder")," ."+o("DatePicker-toggler")," .rdt tfoot td span"," .rdtMonths .rdtMonth"],{color:t}],[[" ."+o("DatePicker-toggler")+":hover"," .rdt .rdtPicker .dow"],{color:e(t).setAlpha(.9).toString()}],[[" ."+o("DatePicker-clear")+" svg"],{fill:t}],[[" ."+o("DatePicker-clear")+":hover svg"],{fill:e(t).setAlpha(.9).toString()}],[[" ."+o("DatePicker-placeholder")," .rdtPicker td.rdtOld"," .rdtPicker td.rdtNew"," .rdtYear.rdtDisabled > span"],{color:e(t).setAlpha(.6).toString()}]]},borderColor:function(t){return[[[" ."+o("DatePicker")," ."+o("CalendarInput"),"."+o("PopOver")],{"border-color":t}],[[" ."+o("DatePicker")+":not(.is-disabled):hover"],{"border-color":e(t).setAlpha(.9).toString()}]]},activeBgColor:function(t){return[[[" ."+o("DatePicker-ranger")+" a"," ."+o("DatePicker-shortcut")+" a"," ."+o("CalendarInput")],{color:t}],[[" .rdt .rdtPicker td.rdtToday:before"],{"border-bottom-color":t}],[[" .rdtPicker td.rdtBetween"],{background:e(t).setAlpha(.1).toString()}],[[" .rdt .rdtPicker td.rdtActive"," .rdtPicker td.rdtActive:hover"," .rdtBtnConfirm"," .rdt .rdtPicker td.rdtDay:hover"," td.rdtYear.rdtActive > span"," .rdtYears .rdtYear:hover > span"," td.rdtMonth.rdtActive > span"," .rdtMonths .rdtMonth:hover > span"],{background:t}]]},activeFontColor:function(t){return[[[" .rdt .rdtPicker td.rdtActive"," .rdtPicker td.rdtActive:hover"," .rdtBtnConfirm"," .rdt .rdtPicker td.rdtDay:hover"," td.rdtYear.rdtActive > span"," .rdtYears .rdtYear:hover > span"," td.rdtMonth.rdtActive > span"," .rdtMonths .rdtMonth:hover > span"],{color:t}]]},fontSize:function(t,r){void 0===t&&(t=16);var e=+(t/14).toFixed(2);return[[[" ."+o("DatePicker")],{height:(30*e).toFixed(2)+"px",display:"flex","align-items":"center"}],[[" ."+o("DatePicker-clear")+" svg"],{width:(10*e).toFixed(2)+"px",height:(10*e).toFixed(2)+"px","margin-right":3*(e-1)+"px"}],[[" ."+o("DatePicker-toggler")],{"margin-right":(3*e).toFixed(2)+"px"}],[[" .rdt"," ."+o("DatePicker-shortcuts")],{transform:"scale("+e+")","transform-origin":"top left"}],[[" ."+o("DatePicker")," ."+o("DatePicker-placeholder")," ."+o("DatePicker-toggler")],{"font-size":t+"px"}],[[" .rdt"],{width:0,top:r?(28.12*(e-1)).toFixed(2)+"px":0}],[["."+o("PopOver")],{width:(250*e).toFixed(2)+"px",height:((r?264:243)*e).toFixed(2)+"px"}]]}}});
;sugar.define("sugar:widgets/conditions/date/date.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setDateDefaultColor=void 0;var a=e("sugar:node_modules/tslib/tslib.js"),n=e("sugar:utils/i18n.ts"),o=e("sugar:node_modules/react/index.js"),i=e("sugar:node_modules/amis/lib/components/DatePicker.js"),r=e("sugar:node_modules/moment/moment.js"),s=e("sugar:widgets/conditions/condition-manager.tsx"),l=e("sugar:stores/index.ts"),d=e("sugar:widgets/conditions/date/date-ctrl.tsx"),u=e("sugar:utils/date-helper.ts"),c=e("sugar:sites/sugar-cxd.ts"),g=e("sugar:utils/condition-helper.ts"),m=e("sugar:widgets/conditions/date/style.tsx"),f=(c.appTheme.classnames,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.componentWillMount=function(){this.handleChange=this.handleChange.bind(this)},t.prototype.handleChange=function(e){this.props.handleChange(e)},t.prototype.render=function(){var e=this.props,t=e.hub,a=e.condition,s=e.disabled,l=e.container,d=e.conditionConfig,c=t.value.value,m=a.config,f=m.range,p=m.rangeCusBegin,h=m.rangeCusEnd,v=u.getDateLimitByRange(f,p,h),D=[];a.config.openHotKeys&&(D=u.getShortcutByHotKey("date",a.config.hotKeys||[]));var y=a.type+"-"+d.hash+" condition_"+a.frontendId;return g.insertRule("."+a.type+"-"+d.hash+".condition_"+a.frontendId,C(this.props)),o.createElement("div",{className:"col-xs-12 "+y},o.createElement(i.default,{className:"condition__form-item",popoverClassName:y,value:c,onChange:this.handleChange,type:"date",timeFormat:!1,dateFormat:"YYYY-MM-DD",inputFormat:"YYYY-MM-DD",disabled:s,clearable:!0,minDate:v.minDate?r(v.minDate):void 0,maxDate:v.maxDate?r(v.maxDate):void 0,popOverContainer:l?function(){return l}:null,placeholder:n.default("请选择日期"),shortcuts:D,locale:n.lang,overlayPlacement:g.getPlacement(this.props,530,245)}))},t.displayName="DateCondition",t=a.__decorate([l.observer],t)}(o.Component));t.default=f;var p=function(e,t){return void 0===e&&(e=""),u.getDateByDefaultVal(e,t.cusDefaultVal)},h=function(e){var t=r(e).toDate();return!t||isNaN(t.getTime())?void 0:u.formatDate(t)},v=function(e){var t=r(e).toDate();return!t||isNaN(t.getTime())?"":u.formatDate(t)};t.setDateDefaultColor=function(e,t){var a=g.getCommonColor(e,!!t.isDashCondition);return g.getStyleOptions(["backgroundDefault","fontColor","borderColor","activeBgColor","activeFontColor"],m.default,a,t)};var C=function(e){var t=e.condition,a=e.condition.config,n=g.getStyleOptions(["background","fontSize","borderColor","fontColor","activeFontColor","activeBgColor"],m.default,a,t);return n};s.register({type:"date",name:n.default("日期"),iconClassName:"condition-date",component:f,canHalfWidth:!0,defaultValOrUrlVal2view:p,view2value:h,view2Display:v,basicCtrl:d.basicCtrl,dataBindCtrl:d.dataBindCtrl,advancedCtrl:d.advancedCtrl})});
;sugar.define("sugar:widgets/conditions/date-range/date-range-ctrl.tsx",function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.advancedCtrl=e.dataBindCtrl=e.basicCtrl=void 0;var a=t("sugar:utils/i18n.ts"),d=t("sugar:widgets/conditions/date/date-limit-ctrl.tsx"),i=t("sugar:widgets/conditions/date/hot-key.tsx"),n=t("sugar:utils/date-helper.ts"),o=t("sugar:widgets/data-model/data-model-bind-chooser/data-model-bind-chooser.tsx"),l=t("sugar:widgets/data-model/data-model-condition-chart-chooser/data-model-condition-chart-chooser.tsx"),s=t("sugar:widgets/data-model/data-model-bind-chooser/data-model-bind-chooser-item.tsx"),r=t("sugar:utils/data-model-helper.ts"),c=t("sugar:widgets/ctrl-panel/condition-ctrl.tsx");e.basicCtrl=function(t){return[{type:"divider"},{type:"radios",name:"defaultVal",inline:!1,label:a.default("默认值"),options:[{label:a.default("无"),value:""},{label:a.default("最近一周"),value:"week"},{label:a.default("最近半月"),value:"halfMonth"},{label:a.default("最近一月"),value:"month"},{label:a.default("自定义"),value:"cus"}]},{type:"text",label:"",className:"p-l-md",placeholder:a.default("开始日期"),name:"config.cusDefaultValBegin",hiddenOn:"data.defaultVal != 'cus'"},{type:"text",label:a.default("至"),className:"p-l-md",placeholder:a.default("截止日期"),name:"config.cusDefaultValEnd",hiddenOn:"data.defaultVal != 'cus'",desc:n.dateCusStringInfo},{type:"divider"}].concat(d.dateLimitCtrl,c.dateCustomColorCtrl(!!t.condition.isDashCondition))},e.dataBindCtrl=function(t){var e=r.findUsingDataModelHashsInReport(t.chartList,t.conditionList);if(!e.size)return[];var d=["between","notBetween"],i=d.map(function(t){return{label:s.linkTypeMap.get(t),value:t}}),n=[o.getDataModelBindChooser({label:a.default("选择要过滤的数据模型"),config:{amisConfig:[{name:"linkType",label:a.default("请选择关联方式"),type:"radios",inline:!1,options:i}],initialStates:{linkType:"between"},conditionEntity:t.condition,supportFieldType:["date","datetime","timestamp"]}}),l.getConditionChartChooser({label:a.default("关联的图表"),name:"chartBind",config:{conditionEntity:t.condition,dataModelBindConfig:t.condition.dataConfig.dataModel?t.condition.dataConfig.dataModel.dataModelBind||[]:[]}}),l.getConditionChartChooser({label:a.default("关联依赖本条件的过滤条件"),name:"conditionBind",config:{mode:"condition",conditionEntity:t.condition,dataModelBindConfig:t.condition.dataConfig.dataModel?t.condition.dataConfig.dataModel.dataModelBind||[]:[]}})];return n},e.advancedCtrl=i.getHotKeyCtrl("dateRange").concat([{type:"divider"},{type:"number",label:a.default("日期最大跨度"),placeholder:a.default("默认不限制"),name:"config.dateRangeLimit",desc:a.default("例如起止日期跨度不可超过15天，请填写15，默认不做限制"),resetValue:""}])});
;sugar.define("sugar:widgets/conditions/date-range/style.tsx",function(t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var e=t("sugar:node_modules/tinycolor2/tinycolor.js"),a=t("sugar:sites/sugar-cxd.ts"),o=a.appTheme.classnames;r.default={background:function(t,r,a){return void 0===r&&(r=""),void 0===a&&(a=""),[[[" .rdt .rdtPicker td.rdtDay","."+o("PopOver")," ."+o("DateRangePicker-rangers")," .rdtYear.rdtDisabled > span"," td.rdtMonth.rdtDisabled > span"],{background:t}],[[" ."+o("DateRangePicker")],{background:r||t}],[[" ."+o("DateRangePicker")+":not(.is-disabled):hover"],{background:a||e(t).setAlpha(.8).toString()}],[[" ."+o("Button--default")],{background:e(t).isLight()?"#fff":"#333",color:e(t).isLight()?"#000":"#fff","border-color":e(t).isLight()?"#ccc":"#555"}]]},fontColor:function(t){return[[[" .rdtSwitch"," .rdtPrev"," .rdtNext"," td.rdtDay"," .rdtYears .rdtYear"," ."+o("DateRangePicker")," ."+o("DateRangePicker-toggler")," ."+o("DateRangePicker")+":not(.is-disabled):hover ."+o("DateRangePicker-toggler")," .rdt .rdtPicker .rdtMonths .rdtMonth"],{color:t}],[[" ."+o("DateRangePicker-toggler")+":hover"," .rdt .rdtPicker .dow"],{color:e(t).setAlpha(.9).toString()}],[[" ."+o("DateRangePicker-clear")+" svg"],{fill:t}],[[" ."+o("DateRangePicker-clear")+":hover svg"],{fill:e(t).setAlpha(.9).toString()}],[[" ."+o("DateRangePicker-placeholder")," .rdtPicker td.rdtOld"," .rdtPicker td.rdtNew"," .rdtYear.rdtDisabled > span"],{color:e(t).setAlpha(.6).toString()}]]},borderColor:function(t){return[[[" ."+o("DateRangePicker")+":not(.is-disabled):hover"],{"border-color":e(t).setAlpha(.8).toString()}],[[" ."+o("DateRangePicker"),"."+o("PopOver")],{"border-color":t}]]},activeBgColor:function(t){return[[[" ."+o("DateRangePicker-ranger")+" a"],{color:t}],[[" .rdt .rdtPicker td.rdtToday:before"],{"border-bottom-color":t}],[[" .rdt .rdtPicker td.rdtBetween"],{background:e(t).setAlpha(.15).toString()}],[[" ."+o("Button--primary")+".is-disabled"],{background:e(t).setAlpha(.8).toString(),"border-color":e(t).setAlpha(.8).toString()}],[[" ."+o("Button--primary")],{background:t,"border-color":e(t).setAlpha(.8).toString()}],[[" .rdt .rdtPicker td.rdtActive"," .rdt .rdtPicker td.rdtActive:hover"," .rdtBtnConfirm"," .rdt .rdtPicker td.rdtDay:hover"," td.rdtYear.rdtActive > span"," .rdtYears .rdtYear:hover > span"," td.rdtMonth.rdtActive > span"," .rdtMonths .rdtMonth:hover > span"," ."+o("Button--primary")+":not(:disabled):not(.is-disabled):hover"," ."+o("Button--default")+":not(:disabled):not(.is-disabled):hover"],{background:t}],[[" ."+o("Button")+":hover"],{"text-decoration":"underline"}]]},activeFontColor:function(t){return[[[" .rdtPicker td.rdtActive"," .rdtPicker td.rdtActive:hover"," .rdtBtnConfirm"," .rdt .rdtPicker td.rdtDay:hover"," td.rdtYear.rdtActive > span"," td.rdtMonth.rdtActive > span"," .rdtYears .rdtYear:hover > span"," .rdtMonths .rdtMonth:hover > span"],{color:t}],[[" ."+o("Button--primary")+".is-disabled"],{color:e(t).setAlpha(.8).toString()}],[[" ."+o("Button--primary")],{color:t}]]},fontSize:function(t,r){void 0===t&&(t=16);var e=+(t/14).toFixed(2);return[[[" ."+o("DateRangePicker")," ."+o("DateRangePicker-placeholder")," ."+o("DateRangePicker-toggler")],{"font-size":t+"px"}],[[" ."+o("DateRangePicker")],{height:(30*e).toFixed(2)+"px",display:"flex","align-items":"center"}],[[" ."+o("DateRangePicker-start")+" .rdtPicker"," ."+o("DateRangePicker-end")+" .rdtPicker"," ."+o("DateRangePicker-rangers")," ."+o("DateRangePicker-actions")],{transform:"scale("+e+")","transform-origin":"0 0"}],[[" ."+o("DateRangePicker-clear")+" svg"],{width:10*e+"px",height:10*e+"px","margin-right":3*(e-1)+"px"}],[[" ."+o("DateRangePicker-toggler")],{"margin-right":(3*e).toFixed(2)+"px"}],[[" ."+o("DateRangePicker-rangers")," ."+o("DateRangePicker-actions")],{width:"510px"}],[[" ."+o("DateRangePicker-actions")],{"margin-top":(27.6*e-19.6).toFixed(2)+"px"}],[["."+o("PopOver")],{width:(532*e).toFixed(2)+"px",height:((r?319:298)*e).toFixed(2)+"px"}],[[" ."+o("DateRangePicker-start")," ."+o("DateRangePicker-end")],{width:(250*e).toFixed(2)+"px",height:(226*e).toFixed(2)+"px",top:r?(28.12*(e-1)).toFixed(2)+"px":0}]]}}});
;sugar.define("sugar:widgets/conditions/date-range/date-range.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setDateRangeDefaultColor=void 0;var a=e("sugar:node_modules/tslib/tslib.js"),n=e("sugar:utils/i18n.ts"),o=e("sugar:node_modules/react/index.js"),r=e("sugar:widgets/conditions/condition-manager.tsx"),i=e("sugar:stores/index.ts"),s=e("sugar:utils/date-helper.ts"),d=e("sugar:widgets/conditions/date-range/date-range-ctrl.tsx"),l=e("sugar:node_modules/amis/lib/components/DateRangePicker.js"),u=e("sugar:node_modules/moment/moment.js"),g=e("sugar:sites/sugar-cxd.ts"),c=e("sugar:utils/condition-helper.ts"),m=e("sugar:widgets/conditions/date-range/style.tsx"),f=(g.appTheme.classnames,[{name:n.default("7天"),value:{start:-7,end:-1}},{name:n.default("14天"),value:{start:-14,end:-1}},{name:n.default("30天"),value:{start:-30,end:-1}}]),D=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.componentWillMount=function(){this.handleDateChange=this.handleDateChange.bind(this),this.handleChange=this.handleChange.bind(this)},t.prototype.handleDateChange=function(e){return e||this.handleChange({startDate:void 0,endDate:void 0}),"string"==typeof e&&(e=e.split(",")),this.handleChange({startDate:e[0],endDate:e[1]})},t.prototype.formatValue=function(e){return"string"!=typeof e?u(e).format("X"):e},t.prototype.handleChange=function(e){this.props.handleChange(e)},t.prototype.render=function(){var e=this.props,t=e.hub,a=e.condition,r=e.disabled,i=e.container,d=e.conditionConfig,g=t.value.value,m=a.config,D=m.range,h=m.rangeCusBegin,p=m.rangeCusEnd,v=s.getDateLimitByRange(D,h,p),y=s.getShortcutByHotKey("dateRange",f);a.config.openHotKeys&&(y=s.getShortcutByHotKey("dateRange",a.config.hotKeys||[]));var b=a.type+"-"+d.hash+" condition_"+a.frontendId;return c.insertRule("."+a.type+"-"+d.hash+".condition_"+a.frontendId,C(this.props)),o.createElement("div",{className:"col-xs-12 "+b},o.createElement(l.default,{className:"condition__form-item",popoverClassName:b,value:g&&g.startDate?this.formatValue(g.startDate)+","+this.formatValue(g.endDate):"",onChange:this.handleDateChange,mode:"date",clearable:!0,timeFormat:!1,delimiter:",",disabled:r,minDate:v.minDate?u(v.minDate):void 0,maxDate:v.maxDate?u(v.maxDate):void 0,popOverContainer:i?function(){return i}:null,ranges:y,locale:n.lang,overlayPlacement:c.getPlacement(this.props,530,310)}))},t.displayName="DateRangeCondition",t=a.__decorate([i.observer],t)}(o.Component);t.default=D;var h=function(e,t){void 0===e&&(e="");var a=s.getDateRangeByDefaultVal(e,t.cusDefaultValBegin,t.cusDefaultValEnd);return{startDate:a.minDate?u(a.minDate).format("X"):void 0,endDate:a.maxDate?u(a.maxDate).format("X"):void 0}},p=function(e){var t=u(e.startDate,"X").toDate(),a=u(e.endDate,"X").toDate();return!e||isNaN(t.getTime())||isNaN(a.getTime())?void 0:s.formatDate(t)+","+s.formatDate(a)},v=function(e){var t=u(e.startDate,"X").toDate(),a=u(e.endDate,"X").toDate();return!e||isNaN(t.getTime())||isNaN(a.getTime())?"":s.formatDate(t)+"--"+s.formatDate(a)};t.setDateRangeDefaultColor=function(e,t){var a=c.getCommonColor(e,!!t.isDashCondition);return c.getStyleOptions(["backgroundDefault","fontColor","borderColor","activeBgColor","activeFontColor"],m.default,a,t)};var C=function(e){var t=e.condition,a=e.condition.config,n=c.getStyleOptions(["background","fontSizeRange","borderColor","fontColor","activeFontColor","activeBgColor"],m.default,a,t);return n},y=function(e,t){var a=t.dateRangeLimit;if(e.startDate&&e.endDate){var o=u(e.startDate,"X").toDate(),r=u(e.endDate,"X").toDate();if(o.setHours(0,0,0,0),r.setHours(0,0,0,0),+o-+r>0)return n.default("起始时间不应该大于结束时间");if(a&&0!==parseInt(a,10)&&+r-+o>=864e5*(a+1))return n.default("起止时间跨度大于约定值「"+a+"」天")}return!0};r.register({type:"dateRange",name:n.default("日期范围"),iconClassName:"condition-date-range",component:D,canHalfWidth:!0,defaultValOrUrlVal2view:h,view2value:p,view2Display:v,validate:y,basicCtrl:d.basicCtrl,dataBindCtrl:d.dataBindCtrl,advancedCtrl:d.advancedCtrl,dataModelLinkType:"between"})});
;sugar.define("sugar:widgets/conditions/multi-select/multi-select-ctrl.tsx",function(e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.dataBindCtrl=a.conDemoUrl=a.basicCtrl=void 0;var t=e("sugar:node_modules/tslib/tslib.js"),o=e("sugar:utils/i18n.ts"),d=e("sugar:node_modules/react/index.js"),l=e("sugar:widgets/ctrl-panel/data-bind-ctrl/index.tsx"),n=e("sugar:widgets/ctrl-panel/condition/condition-dependence-ctrl.tsx"),i=e("sugar:widgets/data-model/data-model-field-holder/data-model-field-holder.tsx"),s=e("sugar:widgets/data-model/data-model-bind-chooser/data-model-bind-chooser.tsx"),c=e("sugar:widgets/data-model/data-model-condition-chart-chooser/data-model-condition-chart-chooser.tsx"),r=e("sugar:widgets/data-model/data-model-bind-chooser/data-model-bind-chooser-item.tsx"),u=e("sugar:utils/data-model-helper.ts"),f=e("sugar:widgets/amis-inline-switch.tsx"),g=e("sugar:widgets/ctrl-panel/condition-ctrl.tsx");a.basicCtrl=function(e){return[{type:"divider"},{type:"radios",label:o.default("展示样式"),name:"config.uiMode",inline:!1,options:[{label:o.default("多选列表"),value:"list",disabledOn:"data.halfWidth"},{label:o.default("多选下拉"),value:"select"}]},{type:"group",visibleOn:'config.uiMode === "list"',controls:[{type:"text",name:"config.optionWidth",label:o.default("选项最小宽度"),placeholder:o.default("数字、百分比、50%")},{type:"text",name:"config.optionHeight",label:o.default("选项高度"),placeholder:o.default("数字、百分比、50%")}]},{type:"radios",name:"defaultVal",inline:!1,label:o.default("默认值"),options:[{label:o.default("全选"),value:"__showx_default_value_all"},{label:o.default("选中前N项"),value:"__showx_default_value_top_N"},{label:o.default("自定义"),value:"__sugar_showx_custom"}]},{type:"text",label:o.default("多选取值请用英文逗号隔开"),placeholder:o.default("请输入多选取值"),name:"config.cusDefaultVal",hiddenOn:"data.defaultVal != '__sugar_showx_custom'"},{type:"text",label:o.default("选中前N项"),placeholder:o.default("请输入N的取值"),name:"config.defaultTopN",hiddenOn:"data.defaultVal != '__showx_default_value_top_N'",validations:"isInt"},{type:"text",label:o.default("最多可选择数量"),placeholder:o.default("0表示无限制"),name:"config.maxNum",validations:"isInt"},f.default("config.disableCheckAll",o.default("禁用全选功能")),f.default("config.disableSeachable",o.default("禁用数据较多时的搜索功能"),"data.config.uiMode === 'list'"),{type:"divider"},{type:"fieldset",collapsed:!0,title:o.default("过滤条件样式自定义"),collapsable:!0,headingClassName:"fieldset-title",controls:t.__spreadArrays(g.addFontSizeCtrl(!!e.condition.isDashCondition,g.selectCustomColorCtrl),[{type:"group",controls:[{type:"color",name:"config.checkboxBgColor",label:o.default("复选框背景颜色"),format:"rgba"},{type:"color",name:"config.checkboxColor",label:o.default("复选框选中颜色"),format:"rgba"}]},{type:"color",name:"config.checkboxFontColor",label:o.default("复选框字体颜色"),format:"rgba"}])}]},a.conDemoUrl="$CUR_HOST/openapi/demo/condition?type=select",a.dataBindCtrl=function(e){var a=l.getDebugAndRefreshBtn({loadData:e.condition.loadData,loadDebugData:e.condition.loadDebugData,dataType:e.condition.dataType,refreshText:o.default("刷新条件")}),f=l.getDataBindCommon({frontendId:e.condition.frontendId,dataTypeOptions:["dataModel","api","static","sql"],api:{demoUrl:"/openapi/demo/condition?type=select"},"static":{columnLength:2,headers:[["名称","取值"]]},sql:{hideExemption:!0}}),g=e.condition.dataModelHash||"",m=e.sqlModelStore.detailMap.mapByHash.get(e.condition.dataModelHash||""),p=l.generateSQLFieldList(m),h=[i.getDataModelFieldHolder({name:"value",label:o.default("取值字段"),config:{dataModelHash:g,holderId:e.condition.frontendId+"-value",maxCount:1,onlyDimension:!0}}),i.getDataModelFieldHolder({name:"name",label:o.default("名称字段(不填时用取值字段替代)"),config:{dataModelHash:g,holderId:e.condition.frontendId+"-name",maxCount:1,onlyDimension:!0}}),l.commonFilterForDataModel(g),l.commonBindUrlParamForDataModel(g),l.commonLimitForDataModel,{type:"select",name:"dataConfig.sqlNameField",hiddenOn:"data.dataType != 'sql'",label:o.default("名称字段(给用户展示的多选项内容)"),placeholder:o.default("请选择"),clearable:!0,options:p},{type:"select",name:"dataConfig.sqlValueField",hiddenOn:"data.dataType != 'sql'",label:o.default("取值字段(不选时用名称字段代替)"),placeholder:o.default("请选择"),clearable:!0,options:p}];h=h.concat(a);var b=u.findUsingDataModelHashsInReport(e.chartList,e.conditionList);if(b.size){var y=["in","notIn","like","begin","end"],C=y.map(function(e){return{label:r.linkTypeMap.get(e),value:e}});h=h.concat([s.getDataModelBindChooser({label:o.default("选择要过滤的数据模型"),config:{amisConfig:[{name:"linkType",label:o.default("请选择关联方式"),type:"radios",inline:!1,options:C}],initialStates:{linkType:"in"},conditionEntity:e.condition}}),c.getConditionChartChooser({label:o.default("关联的图表"),name:"chartBind",config:{conditionEntity:e.condition,dataModelBindConfig:e.condition.dataConfig.dataModel?e.condition.dataConfig.dataModel.dataModelBind||[]:[]}}),c.getConditionChartChooser({label:o.default("关联依赖本条件的过滤条件"),name:"conditionBind",config:{mode:"condition",conditionEntity:e.condition,dataModelBindConfig:e.condition.dataConfig.dataModel?e.condition.dataConfig.dataModel.dataModelBind||[]:[]}})])}return h=h.concat([{name:"config.dependences",hiddenOn:"data.dataType != 'sql' && data.dataType != 'api' && data.dataType != 'dataModel'",children:function(a){var o=a.onChange,l=a.value;return d.createElement(n.default,t.__assign({},{onChange:o,value:l,conditionSelfKey:e.condition.key}))}}]),f.concat(h)}});
;sugar.define("sugar:widgets/conditions/multi-select/multi-select-list.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=e("sugar:node_modules/tslib/tslib.js"),s=e("sugar:utils/i18n.ts"),a=e("sugar:node_modules/react/index.js"),n=e("sugar:stores/index.ts"),i=e("sugar:node_modules/amis/lib/index.js"),u=e("sugar:widgets/conditions/select/select.tsx"),c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.allChecked=!1,t}return l.__extends(t,e),t.prototype.render=function(){var e=this.props,t=e.data,l=e.value,n=void 0===l?[]:l,c=e.disabled,r=e.onChange,o=e.cls,d=void 0===o?"":o,h=e.optionWidth,m=e.optionHeight,g=e.disableCheckAll;h=h>0?h-0:h,m=m>0?m-0:m;var _=[],p=(t.data||[]).map(function(e){return u.processLabelAndValue(e)});return p.forEach(function(e){e.checked=n.length?n.includes(e.value):!1,e.checked&&_.push(e.value)}),this.allChecked=!1,_.length&&p.length===_.length&&(this.allChecked=!0,_.push("sugar_multi_all_select")),g||p.unshift({label:s.default("全选"),value:"sugar_multi_all_select",checked:this.allChecked}),a.createElement("div",{className:"clearfix multi-select-list-container "+d},a.createElement("div",{className:"multi-select-list-options"},p.map(function(e,t){return a.createElement("div",{style:{minWidth:h,height:m},key:"option"+e.value+t},a.createElement(i.Checkbox,{className:"multi-select-checkbox",disabled:c,checked:e.checked,onChange:function(t){r("sugar_multi_all_select"===e.value?t?p.map(function(e){return e.value}):[]:t?_.concat([e.value]):_.filter(function(t){return!(t===e.value||"sugar_multi_all_select"===t)}))}},a.createElement("span",null,e.label)))})))},t.displayName="MultiSelectList",t=l.__decorate([n.observer],t)}(a.Component);t.default=c});
;sugar.define("sugar:widgets/conditions/multi-select/style.tsx",function(e,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.listStyle=o.selectStyle=void 0;var t=e("sugar:node_modules/tinycolor2/tinycolor.js"),c=e("sugar:sites/sugar-cxd.ts"),i=c.appTheme.classnames;o.selectStyle={background:function(e,o,c){return void 0===o&&(o=""),void 0===c&&(c=""),[[[" ."+i("Select-option"),"."+i("Select-popover")," ."+i("Select-valueIcon")+":hover"],{background:e}],[[" ."+i("Select")],{background:o||e}],[[" ."+i("Select")+":hover"],{background:c||e}],[[" ."+i("Select-option")+".is-active"," ."+i("Select")+".is-opened"," ."+i("Select")+".is-focused"],{background:t(e).setAlpha(.8).toString()}],[[" ."+i("Select-value")],{background:t(e).setAlpha(.6).toString()}]]},fontColor:function(e){return[[[" ."+i("Select-value")," ."+i("Select")," ."+i("Select-arrow")+" .icon-caret"," ."+i("Checkbox")],{color:e}],[[" ."+i("Select-clear")+" svg"," ."+i("Select-input")+" > svg"],{fill:e}],[[" ."+i("Select-placeholder")," ."+i("Select-input")+" > input::placeholder"],{color:t(e).setAlpha(.8).toString()}]]},borderColor:function(e){return[[[" ."+i("Select-value")," ."+i("Select")," ."+i("Select-valueIcon")," ."+i("Select")+":hover"," ."+i("Checkbox")+" > i"," ."+i("Checkbox--full")+".cxd-Checkbox--checkbox input:checked + i"," ."+i("Checkbox--checkbox")+" input:checked + i"," ."+i("Select-input")],{"border-color":e}],[["."+i("Select-popover")],{border:"1px solid "+e}]]},checkboxFontColor:function(e){return[[[" ."+i("Select-option")+".is-active ."+i("Checkbox")+" > i:before"],{"border-color":e}]]},checkboxColor:function(e){return[[[" ."+i("Select-option")+".is-active ."+i("Checkbox")+" > i"," ."+i("Checkbox--checkbox")+" input:checked + i:before"," ."+i("Checkbox--checkbox")+" input:checked + i"],{background:e}]]},checkboxBgColor:function(e){return[[[" ."+i("Checkbox")+" > i"],{background:e}]]},selectActiveFontColor:function(e){return[[[" ."+i("Select-option")+".is-highlight ."+i("Checkbox")],{color:e}]]},highlightBgColor:function(e){return[[[" ."+i("Select-option")+".is-highlight"],{background:e}]]},fontSize:function(e){void 0===e&&(e=16);var o=+(e/14).toFixed(2);return[[[" ."+i("Select-valueWrap")],{transform:"scale("+o+")","transform-origin":"0 center"}],[[" ."+i("Select-arrow")],{"margin-right":(4*o).toFixed(2)+"px",width:(10*o).toFixed(2)+"px"}],[[" ."+i("Select-clear")],{padding:"3px "+(3*o).toFixed(2)+"px"}],[[" ."+i("Select-clear")+" svg"," ."+i("Select-arrow")+" svg"],{width:(10*o).toFixed(2)+"px",height:(10*o).toFixed(2)+"px"}],[[" ."+i("Select")],{padding:"0px "+(4*o).toFixed(2)+"px",height:(30*o).toFixed(2)+"px",overflow:"hidden",display:"flex","align-items":"center"}],[[" ."+i("Select-option")],{"font-size":e+"px"}],[[" ."+i("Select-input")],{"font-size":e+"px",height:(29*o+1).toFixed(2)+"px"}],[[" ."+i("Select-input")+" svg"],{width:(.875*e).toFixed(2)+"px",height:(.875*e).toFixed(2)+"px"}],[[" ."+i("Select-menu")],{"max-height":(18.75*e).toFixed(2)+"px"}],[[" ."+i("Checkbox--checkbox")],{display:"flex","align-items":"center"}],[[" ."+i("Checkbox--checkbox")+" i"],{width:(13*o).toFixed(2)+"px",height:(13*o).toFixed(2)+"px"}],[[" ."+i("Checkbox--checkbox")+" span"],{"margin-left":(4*o).toFixed(2)+"px"}]]}},o.listStyle={checkboxBgColor:function(e){return[[[" ."+i("Checkbox")+" > i"],{background:e}]]},checkboxFontColor:function(e){return[[[" ."+i("Checkbox--checkbox")+" input:checked + i:before"],{"border-color":e}]]},checkboxColor:function(e){return[[[" ."+i("Checkbox--checkbox")+" input:checked + i"," ."+i("Checkbox--checkbox")+" input:checked + i:before"],{background:e}],[[" ."+i("Checkbox")+":hover > input:not(:disabled) + i"],{"border-color":e}]]},selectActiveFontColor:function(e){return[[[" ."+i("Checkbox--checkbox")+" input:checked + i + span"],{color:e}]]},borderColor:function(e){return[[[" ."+i("Checkbox--checkbox")+" input:checked + i"],{"border-color":e}]]},fontColor:function(e){return[[[" ."+i("Checkbox")],{color:e}]]},fontSize:function(e,o){void 0===e&&(e=16);var t=+(e/14).toFixed(2);return[[[" .multi-select-list-container"],{transform:"scale("+t+")","transform-origin":"0 center",width:((o-30)/t).toFixed(2)+"px"}]]}}});
;sugar.define("sugar:widgets/conditions/multi-select/multi-select.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setMultiSelectDefaultColor=void 0;var o=e("sugar:node_modules/tslib/tslib.js"),a=e("sugar:utils/i18n.ts"),n=e("sugar:node_modules/react/index.js"),i=e("sugar:node_modules/amis/lib/components/Select.js"),l=e("sugar:node_modules/amis/lib/index.js"),s=e("sugar:widgets/conditions/condition-manager.tsx"),r=e("sugar:stores/index.ts"),d=e("sugar:widgets/conditions/multi-select/multi-select-ctrl.tsx"),c=e("sugar:widgets/conditions/multi-select/multi-select-list.tsx"),u=e("sugar:widgets/conditions/select/select.tsx"),g=e("sugar:widgets/conditions/_hoc/debug/debug.tsx"),h=e("sugar:sites/sugar-cxd.ts"),f=e("sugar:utils/condition-helper.ts"),m=e("sugar:widgets/conditions/multi-select/style.tsx"),p=(h.appTheme.classnames,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.__extends(t,e),t.prototype.componentWillMount=function(){this.props.condition.loadData(this.props.mode,!0),this.handleChange=this.handleChange.bind(this)},t.prototype.handleChange=function(e){this.props.handleChange(e)},t.prototype.render=function(){var e=this,t=this.props,o=(t.mode,t.disabled),s=t.hub,r=t.condition,d=t.container,g=t.conditionConfig,h=s.data,m=s.value.value,p=r.type+"-"+g.hash+" condition_"+r.frontendId;f.insertRule("."+r.type+"-"+g.hash+".condition_"+r.frontendId,b(this.props));var C=null;return C=h?"pending"===h.loadState?n.createElement(l.Spinner,{inline:!0,size:"sm"}):"error"!==h.loadState&&h.data&&h.data.length&&h.data.map?"list"!==r.config.uiMode||r.halfWidth?n.createElement(i.default,{className:"condition__form-item",popoverClassName:p,searchable:h.data.length>=10&&!r.config.disableSeachable,multiple:!0,checkAll:!r.config.disableCheckAll,disabled:!!o,value:m,options:h.data.map(function(e){return u.processLabelAndValue(e)}),onChange:function(t){e.handleChange(t?t.map(function(e){return e.value}):[])},clearable:!0,placeholder:a.default("请选择"),locale:a.lang,popOverContainer:d?function(){return d}:null}):n.createElement(c.default,{optionWidth:r.config.optionWidth,optionHeight:r.config.optionHeight,disableCheckAll:r.config.disableCheckAll,disabled:o,data:h,value:m,onChange:this.handleChange}):n.createElement("div",{className:"no-data"},a.default("无数据")):n.createElement("div",{className:"no-data"},a.default("请绑定数据")),m instanceof Array&&r.config.maxNum&&parseInt(r.config.maxNum,10)>0&&r.config.maxNum<m.length&&setTimeout(function(){r.changeConditionValue(m.concat().splice(0,r.config.maxNum),e.props.mode),l.toast.error(a.default('多选列表"「'+r.label+'」"设置了最多可选择数量：「'+r.config.maxNum+"」个，已自动截取前「"+r.config.maxNum+"」项"))},10),n.createElement("div",{className:"col-xs-12 "+p},C)},t.displayName="MultiSelectCondition",t=o.__decorate([g.default,r.observer],t)}(n.Component));t.default=p;var C=function(e,t,o){if(!(e&&e.length&&e instanceof Array))return"";if(o&&o.length){var a={};o.forEach(function(e){var t=u.processLabelAndValue(e);a[t.value]=t.label});var n=e.map(function(e){return void 0!==a[e]?a[e]:""});return n.join(",")}return e.join(",")},v=function(e,t,o,a,n){if(void 0===e&&(e=null),void 0===n&&(n=!1),n&&null!=a&&(e=a),"__sugar_showx_custom"===e&&"string"==typeof t.cusDefaultVal&&t.cusDefaultVal)return t.cusDefaultVal.split(",");if("__sugar_showx_custom"===e&&!t.cusDefaultVal)return[];if(!o||"done"!==o.loadState||!o.data||!o.data.length)return e;if("string"==typeof e&&/^__showx_default_value_/.test(e)){var i=o.data,l=[];if("__showx_default_value_all"===e)for(var s=0;s<i.length;s++)l.push(s);else if("__showx_default_value_top_N"===e)for(var s=0;s<Math.min(i.length,t.defaultTopN);s++)l.push(s);var r=[];return l.map(function(e){var t=i[e];r.push(t instanceof Array?t[1]:"object"==typeof t?t.value:t)}),r}return e},_=function(e){var t=e.dataConfig.dataModel,o=(t.name,t.value),a=void 0===o?[]:o;return a.length?!0:!1};s.register({type:"multiSelect",name:a.default("多选列表"),iconClassName:"condition-multi-list",variants:[{name:a.default("下拉多选"),iconClassName:"condition-multi-select",initialState:{config:{uiMode:"select"}}}],initialState:{defaultVal:"__sugar_showx_custom",dataType:"static",dataApiUrl:d.conDemoUrl,config:{uiMode:"list"}},defaultValOrUrlVal2view:v,component:p,canHalfWidth:!0,view2Display:C,basicCtrl:d.basicCtrl,dataBindCtrl:d.dataBindCtrl,dataModelBindMonitorField:"value",dataModelLinkType:"in",initialDashboardState:{width:420,height:140},needDashboardAutoFresh:!0,dataModelPanelShow:[["dataType","dataModel"]],loadDataWhenDataModelConfigChange:_}),t.setMultiSelectDefaultColor=function(e,t){var o=f.getCommonColor(e,!!t.isDashCondition),a=f.getStyleOptions(["backgroundDefault","fontColor","borderColor","checkboxBgColor","highlightBgColor"],m.selectStyle,o,t).concat(f.getStyleOptions(["fontColor","borderColor","checkboxBgColor"],m.listStyle,o,t));return a};var b=function(e){var t=e.condition,o=e.condition,a=o.config,n=o.config.uiMode;return"list"===n?f.getStyleOptions(["checkboxBgColor","selectActiveFontColor","checkboxColor","borderColor","fontColor","fontSizeList"],m.listStyle,a,t):f.getStyleOptions(["background","fontSizeSelect","borderColor","fontColor","highlightBgColor","selectActiveFontColor","checkboxFontColor","checkboxColor","checkboxBgColor"],m.selectStyle,a,t)}});
;sugar.define("sugar:widgets/conditions/tree-select/tree-select-ctrl.tsx",function(e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.dataBindCtrl=a.basicCtrl=void 0;var d=e("sugar:node_modules/tslib/tslib.js"),t=e("sugar:utils/i18n.ts"),n=e("sugar:node_modules/react/index.js"),o=e("sugar:widgets/ctrl-panel/data-bind-ctrl/index.tsx"),i=e("sugar:widgets/amis-inline-switch.tsx"),l=e("sugar:widgets/ctrl-panel/condition/condition-dependence-ctrl.tsx"),s=e("sugar:widgets/data-model/data-model-field-holder/data-model-field-holder.tsx"),r=e("sugar:widgets/data-model/data-model-bind-chooser/data-model-bind-chooser.tsx"),c=e("sugar:widgets/data-model/data-model-bind-chooser/data-model-bind-chooser-item.tsx"),u=e("sugar:widgets/data-model/data-model-condition-chart-chooser/data-model-condition-chart-chooser.tsx"),f=e("sugar:utils/data-model-helper.ts");a.basicCtrl=[{type:"divider"},i.amisInlineSwitch("config.isMultiple",t.default("多选模式")),i.amisInlineSwitch("config.isMerge",t.default("附加融合子节点"),"data.config.isMultiple != true"),{type:"text",label:t.default("请输入默认值"),placeholder:t.default("多选取值请用英文逗号隔开"),name:"config.cusDefaultVal"},{type:"number",label:t.default("默认展开级数"),name:"config.unfoldedLevel",placeholder:t.default("默认为全部展开"),step:1,min:0,max:100}],a.dataBindCtrl=function(e){var a=o.getDebugAndRefreshBtn({loadData:e.condition.loadData,loadDebugData:e.condition.loadDebugData,dataType:e.condition.dataType,refreshText:t.default("刷新条件")}),i=o.getDataBindCommon({frontendId:e.condition.frontendId,dataTypeOptions:["dataModel","api","sql"],api:{demoUrl:"/openapi/demo/condition?type=tree"},sql:{hideExemption:!0}}),g=e.condition.dataModelHash||"",m=e.sqlModelStore.detailMap.mapByHash.get(e.condition.dataModelHash||""),p=o.generateSQLFieldList(m),h=[s.getDataModelFieldHolder({name:"parentNodeId",label:t.default("父节点id"),config:{dataModelHash:g,holderId:e.condition.frontendId+"-parentNodeId",maxCount:1,onlyDimension:!0}}),s.getDataModelFieldHolder({name:"nodeId",label:t.default("节点id"),config:{dataModelHash:g,holderId:e.condition.frontendId+"-nodeId",maxCount:1,onlyDimension:!0}}),s.getDataModelFieldHolder({name:"value",label:t.default("取值字段"),config:{dataModelHash:g,holderId:e.condition.frontendId+"-value",maxCount:1,onlyDimension:!0}}),s.getDataModelFieldHolder({name:"name",label:t.default("名称字段(不填时用取值字段替代)"),config:{dataModelHash:g,holderId:e.condition.frontendId+"-name",maxCount:1,onlyDimension:!0}}),o.commonFilterForDataModel(g),o.commonBindUrlParamForDataModel(g),o.commonLimitForDataModel,{type:"select",name:"dataConfig.parentIdField",hiddenOn:"data.dataType != 'sql'",label:t.default("父节点id字段"),placeholder:t.default("请选择"),options:p},{type:"select",name:"dataConfig.idField",hiddenOn:"data.dataType != 'sql'",label:t.default("节点id字段"),placeholder:t.default("请选择"),options:p},{type:"select",name:"dataConfig.nameField",hiddenOn:"data.dataType != 'sql'",label:t.default("节点名称字段(不选时使用节点id代替)"),placeholder:t.default("请选择"),options:p},{type:"select",name:"dataConfig.valueField",hiddenOn:"data.dataType != 'sql'",label:t.default("节点取值字段(不选时使用节点名称代替)"),placeholder:t.default("请选择"),options:p}];h=h.concat(a);var y=f.findUsingDataModelHashsInReport(e.chartList,e.conditionList);if(y.size){var M=["=","!=","like","begin","end"],b=M.map(function(e){return{label:c.linkTypeMap.get(e),value:e}});h=h.concat([r.getDataModelBindChooser({label:t.default("选择要过滤的数据模型"),config:{amisConfig:[{name:"linkType",label:t.default("请选择关联方式"),type:"radios",inline:!1,options:b}],initialStates:{linkType:"="},conditionEntity:e.condition}}),u.getConditionChartChooser({label:t.default("关联的图表"),name:"chartBind",config:{conditionEntity:e.condition,dataModelBindConfig:e.condition.dataConfig.dataModel?e.condition.dataConfig.dataModel.dataModelBind||[]:[]}}),u.getConditionChartChooser({label:t.default("关联依赖本条件的过滤条件"),name:"conditionBind",config:{mode:"condition",conditionEntity:e.condition,dataModelBindConfig:e.condition.dataConfig.dataModel?e.condition.dataConfig.dataModel.dataModelBind||[]:[]}})])}return h=h.concat([{name:"config.dependences",hiddenOn:"data.dataType != 'sql' && data.dataType != 'api' && data.dataType != 'dataModel'",children:function(a){var t=a.onChange,o=a.value;return n.createElement(l.default,d.__assign({},{onChange:t,value:o,conditionSelfKey:e.condition.key}))}}]),i.concat(h)}});
;sugar.define("sugar:widgets/input-tree-selector/input-tree-selector.tsx",function(e,t){"use strict";function n(e,t,a){return void 0===a&&(a=1),e.map(function(e,r){t(e,r,a),e.children&&Array.isArray(e.children)&&n(e.children,t,a+1)})}Object.defineProperty(t,"__esModule",{value:!0}),t.eachTree=void 0;var a=e("sugar:node_modules/tslib/tslib.js"),r=e("sugar:node_modules/react/index.js"),l=e("sugar:node_modules/amis/lib/index.js");t.eachTree=n;var s=function(e){function t(t){var n=e.call(this,t)||this;return n.clickOnMenuFlag=!1,n.state={showTree:!1},n}return a.__extends(t,e),t.prototype.renderClear=function(){var e=this,t=this.props,n=t.multiple,a=t.joinValues,l=t.disabled;return l?null:r.createElement("span",{key:"value-clear",className:"sg-input-tree-selecter__side-control clear-zone ",onMouseDown:function(){e.props.onChange(n?a?"":[]:a?"":{}),e.input.blur()}},r.createElement("span",null,"×"))},t.prototype.renderValueList=function(e){var t=this,a=this.props,l=a.data,s=a.joinValues,i=a.delimiter,u=a.disabled,o=a.nameField;return r.createElement("span",{key:"value-wrapper",className:"sg-input-tree-selecter__value-wrapper"},e.map(function(a,c){var p="";return n(l,function(e){e.value==a&&(p=e[o||"name"])}),r.createElement("div",{key:c,className:"sg-input-tree-selecter__value"},u?null:r.createElement("span",{className:"sg-input-tree-selecter__value-icon",onMouseDown:function(){var n=e.concat();n.splice(c,1),t.props.onChange(s?n.join(i):n.map(function(e){var t;return t={value:e},t[o||"name"]=p,t}))}},"×"),r.createElement("span",{className:"sg-input-tree-selecter__value-label"},p))}))},t.prototype.renderToggleListButton=function(){var e=this;return r.createElement("span",{key:"list-control",className:"sg-input-tree-selecter__side-control toggle-list",onMouseDown:function(){e.setState({showTree:!e.state.showTree}),e.input.blur()}},r.createElement("span",null))},t.prototype.renderValue=function(){var e=this.props,t=e.value,a=e.multiple,l=e.joinValues,s=e.delimiter,i=e.data,u=e.nameField,o=e.noClear,c=e.placeHolder;if(a){var p=[];return p=l?t?t.split(s):[]:t,[p instanceof Array&&p.length?[this.renderValueList(p),o?null:this.renderClear()]:r.createElement("span",{key:"value-placeholder",className:"sg-input-tree-selecter__single-value"},c||"请选择"),this.renderToggleListButton()]}var d="";return l?n(i,function(e){e.value==t&&(d=e[u||"name"])}):t&&t.name?d=t.name:t&&t.value&&n(i,function(e){e.value==t.value&&(d=e[u||"name"])}),[r.createElement("span",{className:"sg-input-tree-selecter__single-value",key:"single-value"},d?d:c||"请选择"),d&&!o?this.renderClear():null,this.renderToggleListButton()]},t.prototype.render=function(){var e,t=this,n=this.props,s=n.data,i=void 0===s?[]:s,u=n.value,o=n.multiple,c=n.joinValues,p=n.disabled,d=n.onChange,m=n.className,g=n.noClear,v=a.__rest(n,["data","value","multiple","joinValues","disabled","onChange","className","noClear"]);e=o?u:c?u:u.value;var h={paddingRight:30};return g&&(h.paddingRight=18),r.createElement("div",{ref:function(e){return t.input=e},className:"sg-input-tree-selecter "+m+" "+(this.state.showTree?" is-open":"")+(p?" is-disabled":""),tabIndex:0,onBlur:function(e){t.clickOnMenuFlag?e.target===t.input&&(t.clickOnMenuFlag=!1):t.setState({showTree:!1})},onFocus:function(){p||t.setState({showTree:!0})}},r.createElement("div",{className:"sg-input-tree-selecter__value-container",style:h},this.renderValue()),this.state.showTree?r.createElement("div",{className:"sg-input-tree-selecter__tree-container",onMouseDown:function(e){window.navigator.userAgent.indexOf("Chrome")>-1&&o&&("LABEL"===e.target.tagName||"LABEL"===e.target.parentElement.tagName)&&(t.clickOnMenuFlag=!0)}},r.createElement(l.Tree,a.__assign({options:i,value:e,multiple:o,joinValues:c,disabled:p,onChange:function(e){o||(t.setState({showTree:!1}),t.input.blur()),d(e)}},v))):null)},t.defaultProps={multiple:!1,disabled:!1,withChildren:!1,joinValues:!0,delimiter:",",nameField:"name"},t}(r.Component);t.default=s});
;sugar.define("sugar:widgets/conditions/tree-select/tree-select.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=e("sugar:node_modules/tslib/tslib.js"),a=e("sugar:utils/i18n.ts"),l=e("sugar:node_modules/react/index.js"),o=e("sugar:widgets/conditions/condition-manager.tsx"),s=e("sugar:stores/index.ts"),i=e("sugar:widgets/conditions/tree-select/tree-select-ctrl.tsx"),r=e("sugar:node_modules/amis/lib/index.js"),d=e("sugar:node_modules/mobx/lib/mobx.js"),u=e("sugar:widgets/conditions/_hoc/debug/debug.tsx"),c=e("sugar:node_modules/amis/lib/components/Tree.js"),p=e("sugar:node_modules/amis/lib/components/Overlay.js"),h=e("sugar:node_modules/amis/lib/components/PopOver.js"),m=e("sugar:node_modules/amis/lib/components/icons.js"),f=e("sugar:widgets/input-tree-selector/input-tree-selector.tsx"),g=e("sugar:sites/sugar-cxd.ts"),v=g.appTheme.classnames,b=function(e){function t(t){var n=e.call(this,t)||this;return n.showTree=!1,n.state={isOpened:!1,isFocused:!1},n.target=l.createRef(),n.handleFocus=n.handleFocus.bind(n),n.handleBlur=n.handleBlur.bind(n),n.handleKeyPress=n.handleKeyPress.bind(n),n.handleClick=n.handleClick.bind(n),n.open=n.open.bind(n),n.close=n.close.bind(n),n.clearValue=n.clearValue.bind(n),n.handleChange=n.handleChange.bind(n),n.renderOuter=n.renderOuter.bind(n),n.renderValues=n.renderValues.bind(n),n}n.__extends(t,e),t.prototype.componentWillMount=function(){this.props.condition.loadData(this.props.mode,!0)},t.prototype.handleFocus=function(){this.setState({isFocused:!0})},t.prototype.handleBlur=function(){this.setState({isFocused:!1})},t.prototype.handleKeyPress=function(e){" "===e.key&&this.handleClick()},t.prototype.handleClick=function(){var e=this;this.state.isOpened?this.close():this.open(function(){return e.input&&e.input.current&&e.input.current.focus()})},t.prototype.open=function(e){this.props.disabled||this.setState({isOpened:!0},e)},t.prototype.close=function(){this.setState({isOpened:!1})},t.prototype.handleChange=function(e){var t=this.props,n=t.condition,a=t.mode;n.config.isMultiple&&e instanceof Array?n.changeConditionValue(e.map(function(e){return e.value}),a):(n.changeConditionValue(e,a),this.close())},t.prototype.removeItem=function(e,t){t&&t.stopPropagation();var n=this.props,a=n.hub,l=n.condition,o=n.mode,s=a.value.value.slice(0);s.splice(e,1),l.changeConditionValue(s,o)},t.prototype.clearValue=function(){var e=this.props.condition;this.handleChange(e.config.multiple?[]:""),this.handleBlur()},t.prototype.renderOuter=function(){var e=this,t=this.props,n=t.hub,o=t.condition,s=t.disabled,i=t.container,r=n.data,d=n.value.value;return l.createElement(p.default,{container:i?function(){return i}:null,placement:"left-bottom-left-top right-bottom-right-top",target:function(){return e.target.current},show:!0},l.createElement(h.default,{className:v("TreeSelect-popover"),style:{minWidth:this.target.current?this.target.current.offsetWidth:void 0},onHide:this.close,locale:a.lang,overlay:!0},l.createElement(c.default,{className:"condition__form-item max-height-400 overflow-auto",options:r.data,onChange:this.handleChange,initiallyOpen:!o.config.unfoldedLevel&&0!==o.config.unfoldedLevel,unfoldedLevel:o.config.unfoldedLevel,joinValues:!o.config.isMultiple,value:d,disabled:s,locale:a.lang,multiple:o.config.isMultiple,withChildren:o.config.isMerge,labelField:"name"})))},t.prototype.renderValues=function(){var e=this,t=this.props,n=t.hub,o=t.condition,s=t.disabled,i=n.value.value,r=n.data.data;if(o.config.isMultiple)return i instanceof Array&&i.length?i.map(function(t,n){var a="";return f.eachTree(r,function(e){e.value==t&&(a=e.name)}),l.createElement("div",{key:n,className:v("ResultBox-value",{disabled:s})},l.createElement("span",{className:v("ResultBox-valueIcon"),onClick:e.removeItem.bind(e,n)},"×"),l.createElement("span",{className:v("ResultBox-valueLabel")},a))}):l.createElement("span",{className:v("ResultBox-placeholder")},a.default("请选择"));if(i instanceof Array||!i)return l.createElement("span",{className:v("ResultBox-placeholder")},a.default("请选择"));var d="";return f.eachTree(r,function(e){e.value==i&&(d=e.name)}),l.createElement("div",{className:v("ResultBox-value")},d)},t.prototype.render=function(){var e=this.props,t=e.hub,n=e.condition,o=e.disabled,s=t.data,i=t.value.value,d=null;return d=s?"pending"===s.loadState?l.createElement(r.Spinner,{inline:!0,size:"sm"}):"error"!==s.loadState&&s.data&&s.data.length?l.createElement("div",{tabIndex:0,onKeyPress:this.handleKeyPress,onFocus:this.handleFocus,onBlur:this.handleBlur,ref:this.target,className:v("TreeSelectControl")},l.createElement("div",{onClick:this.handleClick,className:v("ResultBox TreeSelect",{"TreeSelect--multi":n.config.isMultiple,"is-opened":this.state.isOpened,"is-focused":this.state.isFocused,"is-disabled":o})},l.createElement("div",{className:v("TreeSelect-valueWrap")},this.renderValues()),i.length?l.createElement("a",{onClick:this.clearValue,className:v("ResultBox-clear")},l.createElement(m.Icon,{icon:"close",locale:a.lang,className:"icon"})):null,l.createElement("span",{className:v("TreeSelect-arrow")})),this.state.isOpened?this.renderOuter():null):l.createElement("div",{className:"no-data"},a.default("无数据")):l.createElement("div",{className:"no-data"},a.default("请绑定数据")),l.createElement("div",{className:"col-sm-12"},d)};var i;return t.displayName="TreeSelect",n.__decorate([d.observable,n.__metadata("design:type",Object)],t.prototype,"showTree",void 0),t=n.__decorate([u.default,s.observer,n.__metadata("design:paramtypes",["function"==typeof(i="undefined"!=typeof o.IConditionComponentProps&&o.IConditionComponentProps)?i:Object])],t)}(l.Component);t.default=b;var y=function(e,t,n,a,l){if(void 0===e&&(e=null),void 0===l&&(l=!1),l&&null!=a&&(e=a),"__sugar_showx_custom"===e){var o=void 0;return o="string"==typeof t.cusDefaultVal?t.isMultiple?t.cusDefaultVal.split(","):t.cusDefaultVal:t.isMultiple?[]:""}return e},C=function(e){var t=e.dataConfig.dataModel,n=(t.name,t.value),a=void 0===n?[]:n,l=t.parentNodeId,o=void 0===l?[]:l,s=t.nodeId,i=void 0===s?[]:s;return a.length&&o.length&&i.length?!0:!1};o.register({type:"treeSelect",name:a.default("树形选择"),iconClassName:"condition-tree-select",initialState:{defaultVal:"__sugar_showx_custom",dataType:"api",config:{uiMode:"dialog"}},defaultValOrUrlVal2view:y,component:b,canHalfWidth:!0,basicCtrl:i.basicCtrl,dataBindCtrl:i.dataBindCtrl,dataModelBindMonitorField:"value",dataModelPanelShow:[["dataType","dataModel"]],loadDataWhenDataModelConfigChange:C})});
;sugar.define("sugar:widgets/conditions/text/text-ctrl.tsx",function(a,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dataBindCtrl=t.basicCtrl=void 0;var e=a("sugar:node_modules/tslib/tslib.js"),o=a("sugar:utils/i18n.ts"),n=a("sugar:node_modules/react/index.js"),i=a("sugar:widgets/ctrl-panel/data-bind-ctrl/index.tsx"),d=a("sugar:widgets/ctrl-panel/common/switch-with-tip.tsx"),l=a("sugar:widgets/ctrl-panel/condition/condition-dependence-ctrl.tsx"),r=a("sugar:widgets/data-model/data-model-bind-chooser/data-model-bind-chooser.tsx"),s=a("sugar:widgets/data-model/data-model-condition-chart-chooser/data-model-condition-chart-chooser.tsx"),g=a("sugar:widgets/data-model/data-model-bind-chooser/data-model-bind-chooser-item.tsx"),c=a("sugar:utils/data-model-helper.ts");t.basicCtrl=[{type:"divider"},{type:"text",label:o.default("默认值"),placeholder:o.default("请输入默认值"),name:"config.cusDefaultVal"},{type:"text",label:o.default("默认占位符"),placeholder:o.default("未输入时的提示"),name:"config.defaultPlaceholder"}],t.dataBindCtrl=function(a){var t="suggestion",f=i.getDebugAndRefreshBtn({loadData:function(e){a.condition.loadOtherData(e,t)},loadDebugData:function(){a.condition.loadDebugOtherData(t)},dataType:a.condition.dataConfig.otherData[t].dataType,refreshText:o.default("刷新条件")}),p=i.getDataBindCommon({frontendId:a.condition.frontendId,label:o.default("Suggestion数据绑定"),field:{dataType:"dataConfig.otherData."+t+".dataType",dataApiUrl:"dataConfig.otherData."+t+".dataApiUrl",staticData:"dataConfig.otherData."+t+".dataConfig.data",dataModelHash:"dataConfig.otherData."+t+".dataModelHash",apiProOpen:"dataConfig.otherData."+t+".dataConfig.apiPro_open",apiProMethod:"dataConfig.otherData."+t+".dataConfig.apiPro_method",apiProGetAuto:"dataConfig.otherData."+t+".dataConfig.apiPro_getAuto",apiProHeaderList:"dataConfig.otherData."+t+".dataConfig.apiPro_headerList",apiProPostType:"dataConfig.otherData."+t+".dataConfig.apiPro_postType",apiProPostList:"dataConfig.otherData."+t+".dataConfig.apiPro_postList",apiProPostAuto:"dataConfig.otherData."+t+".dataConfig.apiPro_postAuto",apiProAdaptorOpen:"dataConfig.otherData."+t+".dataConfig.apiPro_adaptorOpen",apiProAdaptorHash:"dataConfig.otherData."+t+".dataConfig.apiPro_adaptorHash"},dataTypeOptions:["api","sql"],api:{demoUrl:"/openapi/demo/condition?type=suggestion"},sql:{hideExemption:!0}}),u=a.condition.dataConfig.otherData&&a.condition.dataConfig.otherData[t]&&a.condition.dataConfig.otherData[t].dataModelHash,h=a.sqlModelStore.detailMap.mapByHash.get(u||""),C=i.generateSQLFieldList(h),m=[{type:"select",name:"dataConfig.otherData."+t+".dataConfig.valueField",hiddenOn:"data.dataConfig.otherData."+t+".dataType != 'sql'",label:o.default("绑定Suggestion数据字段"),placeholder:o.default("请选择"),options:C}],D=[{name:"config.openSuggestion",children:function(a){var t=a.onChange,i=a.value;return n.createElement(d.default,e.__assign({},{onChange:t,value:i,label:o.default("开启Suggestion"),tipText:o.default("什么是Suggestion"),tipLink:"/docs/Condition-text"}))}},{type:"number",label:o.default("Suggestion拉取延迟毫秒数"),hiddenOn:"!config.openSuggestion",placeholder:o.default("默认为500ms"),name:"config.suggestDelay",step:100,min:200}],y=a.condition.config.openSuggestion;y&&(D=D.concat(p,m,[{name:"config.dependences",hiddenOn:"data.dataConfig.otherData."+t+".dataType != 'sql' && data.dataConfig.otherData."+t+".dataType != 'api'",children:function(t){var o=t.onChange,i=t.value;return n.createElement(l.default,e.__assign({},{onChange:o,value:i,conditionSelfKey:a.condition.key}))}}],f));var b=c.findUsingDataModelHashsInReport(a.chartList,a.conditionList);if(!b.size)return D;var P=["=","!=",">","<",">=","<=","in","notIn","between","notBetween","like","begin","end"],M=P.map(function(a){return{label:g.linkTypeMap.get(a),value:a}});return D=D.concat([r.getDataModelBindChooser({label:o.default("选择要过滤的数据模型"),config:{amisConfig:[{name:"linkType",label:o.default("请选择关联方式"),type:"radios",inline:!1,options:M},{type:"tpl",tpl:"<div class='help-block'>"+o.default("在选择「等于多个」、「不等于多个」、「在范围之内」、「在范围之外」这几种关联方式时，输入框内的多个取值请使用英文逗号分隔")+"</div>"}],initialStates:{linkType:"="},conditionEntity:a.condition}}),s.getConditionChartChooser({label:o.default("关联的图表"),name:"chartBind",config:{conditionEntity:a.condition,dataModelBindConfig:a.condition.dataConfig.dataModel?a.condition.dataConfig.dataModel.dataModelBind||[]:[]}}),s.getConditionChartChooser({label:o.default("关联依赖本条件的过滤条件"),name:"conditionBind",config:{mode:"condition",conditionEntity:a.condition,dataModelBindConfig:a.condition.dataConfig.dataModel?a.condition.dataConfig.dataModel.dataModelBind||[]:[]}})])}});
;sugar.define("sugar:widgets/conditions/text/InputAutoSuggest.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=e("sugar:node_modules/tslib/tslib.js"),n=e("sugar:utils/i18n.ts"),u=e("sugar:node_modules/react/index.js"),o=e("sugar:node_modules/react-autosuggest/dist/index.js"),i=e("sugar:node_modules/lodash/debounce.js"),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s.__extends(t,e),t.prototype.componentWillMount=function(){this.updateUpper=i(this.updateUpper,this.props.delay||500),this.onChange=this.onChange.bind(this),this.setState({value:this.props.value||""})},t.prototype.componentWillReceiveProps=function(e){this.props.value!==e.value&&this.setState({value:e.value})},t.prototype.updateUpper=function(e){this.props.onChange(e)},t.prototype.onChange=function(e,t){var s=t.newValue;this.setState({value:s}),this.updateUpper(s)},t.prototype.render=function(){var e=this.props,t=e.placeholder,i=e.suggestions,a=e.disabled,r=s.__rest(e,["placeholder","suggestions","disabled"]),p=this.state.value,l={placeholder:t?t:n.default("请输入"),value:p?p:"",onChange:this.onChange,disabled:a};return u.createElement(o,s.__assign({suggestions:i?i:[],onSuggestionsFetchRequested:function(){},getSuggestionValue:function(e){return e},onSuggestionsClearRequested:function(){},renderSuggestion:function(e){return u.createElement("div",null,e)},inputProps:l},r))},t.displayName="InputAutoSuggest",t}(u.Component);t.default=a});
;sugar.define("sugar:widgets/conditions/text/text.tsx",function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=t("sugar:node_modules/tslib/tslib.js"),n=t("sugar:utils/i18n.ts"),o=t("sugar:node_modules/react/index.js"),s=t("sugar:widgets/conditions/condition-manager.tsx"),i=t("sugar:widgets/conditions/text/text-ctrl.tsx"),u=t("sugar:stores/index.ts"),d=t("sugar:widgets/conditions/text/InputAutoSuggest.tsx"),r=t("sugar:widgets/conditions/_hoc/debug/debug.tsx"),l="suggestion",g=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a.__extends(e,t),e.prototype.componentWillMount=function(){this.onChange=this.onChange.bind(this)},e.prototype.pullSuggestionData=function(){var t=this.props,e=t.condition,a=t.mode;e.loadOtherData(a,l)},e.prototype.onChange=function(t){{var e=this.props,a=e.condition;e.mode}a.changeConditionValue(t,this.props.mode);var n=a.config.openSuggestion;n&&t&&this.pullSuggestionData(t)},e.prototype.render=function(){var t=this.props,e=t.hub,a=t.condition,n=t.disabled,s=parseInt(a.config.suggestDelay||"200",10),i=e.data.other.get(l),u=i&&i.data&&i.data.length?i.data:[],r=e.value.value;return o.createElement("div",{className:"col-sm-12"},o.createElement(d.default,{placeholder:a.config.defaultPlaceholder,value:r,onChange:this.onChange,suggestions:u,disabled:!!n,delay:s}))},e.displayName="TextCondition",e=a.__decorate([r.default,u.observer],e)}(o.Component);e.default=g;var c=function(t,e,a,n,o){return void 0===t&&(t=null),void 0===o&&(o=!1),o&&null!=n&&(t=n),"__sugar_showx_custom"===t?"string"==typeof e.cusDefaultVal?e.cusDefaultVal:"":t};s.register({type:"text",name:n.default("输入框"),iconClassName:"condition-text",component:g,initialState:{defaultVal:"__sugar_showx_custom",dataType:"static",dataConfig:{otherData:{suggestion:{dataType:"api"}}},config:{suggestDelay:200}},defaultValOrUrlVal2view:c,canHalfWidth:!0,basicCtrl:i.basicCtrl,dataBindCtrl:i.dataBindCtrl})});
;sugar.define("sugar:widgets/conditions/logic/config.js",function(e,l){"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.locale=l.available=void 0;var t=e("sugar:utils/i18n.ts");l.available=["=",">",">=","<","<=","!=","in","notIn","between","like","begin","end","null","notNull"],l.locale={"=":t.default("等于"),">":t.default("大于"),">=":t.default("大于或等于"),"<":t.default("小于"),"<=":t.default("小于或等于"),"!=":t.default("不等于"),"in":t.default("等于多个"),notIn:t.default("不等于多个"),between:t.default("范围"),like:t.default("模糊匹配"),begin:t.default("以它开头"),end:t.default("以它结尾"),"null":t.default("数值为Null"),notNull:t.default("数值不为Null")}});
;sugar.define("sugar:widgets/conditions/logic/logic-ctrl.tsx",function(a,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dataBindCtrl=t.basicCtrl=void 0;var e=a("sugar:node_modules/tslib/tslib.js"),o=a("sugar:utils/i18n.ts"),d=a("sugar:node_modules/react/index.js"),i=a("sugar:widgets/conditions/logic/config.js"),n=a("sugar:widgets/ctrl-panel/data-bind-ctrl/index.tsx"),l=a("sugar:widgets/ctrl-panel/common/switch-with-tip.tsx"),s=a("sugar:widgets/amis-inline-switch.tsx"),r=a("sugar:widgets/data-model/data-model-bind-chooser/data-model-bind-chooser.tsx"),g=a("sugar:widgets/data-model/data-model-condition-chart-chooser/data-model-condition-chart-chooser.tsx"),c=a("sugar:utils/data-model-helper.ts"),p=a("sugar:widgets/data-model/data-model-field-holder/data-model-field-holder.tsx"),f=i.available.map(function(a){return{label:i.locale[a],value:a}});t.basicCtrl=[{type:"divider"},{type:"checkboxes",label:o.default("启用选项："),name:"config.options",joinValues:!0,checkAll:!0,options:f},{type:"text",label:o.default("默认值(格式:逻辑值,取值1,取值2...)"),placeholder:o.default("请输入默认值"),name:"config.cusDefaultVal"},{type:"text",label:o.default("输入框自定义Label"),placeholder:o.default("请输入"),name:"config.cusLabelName"}],t.dataBindCtrl=function(a){var t=[{name:"config.openSuggestion",children:function(a){var t=a.onChange,i=a.value;return d.createElement(l.default,e.__assign({},{onChange:t,value:i,label:o.default("开启Suggestion"),tipText:o.default("什么是Suggestion"),tipLink:"/docs/Condition-text"}))}},{type:"number",label:o.default("Suggestion拉取延迟毫秒数"),hiddenOn:"!config.openSuggestion",placeholder:o.default("默认为500ms"),name:"config.suggestDelay",step:100,min:200}],i="suggestion",f=n.getDebugAndRefreshBtn({loadData:function(t){a.condition.loadOtherData(t,i)},loadDebugData:function(){a.condition.loadDebugOtherData(i)},dataType:a.condition.dataConfig.otherData[i].dataType,refreshText:o.default("刷新条件")}),u=n.getDataBindCommon({frontendId:a.condition.frontendId,label:o.default("Suggestion数据绑定"),field:{dataType:"dataConfig.otherData."+i+".dataType",dataApiUrl:"dataConfig.otherData."+i+".dataApiUrl",staticData:"dataConfig.otherData."+i+".dataConfig.data",dataModelHash:"dataConfig.otherData."+i+".dataModelHash",apiProOpen:"dataConfig.otherData."+i+".dataConfig.apiPro_open",apiProMethod:"dataConfig.otherData."+i+".dataConfig.apiPro_method",apiProGetAuto:"dataConfig.otherData."+i+".dataConfig.apiPro_getAuto",apiProHeaderList:"dataConfig.otherData."+i+".dataConfig.apiPro_headerList",apiProPostType:"dataConfig.otherData."+i+".dataConfig.apiPro_postType",apiProPostList:"dataConfig.otherData."+i+".dataConfig.apiPro_postList",apiProPostAuto:"dataConfig.otherData."+i+".dataConfig.apiPro_postAuto",apiProAdaptorOpen:"dataConfig.otherData."+i+".dataConfig.apiPro_adaptorOpen",apiProAdaptorHash:"dataConfig.otherData."+i+".dataConfig.apiPro_adaptorHash"},dataTypeOptions:["api","sql"],api:{demoUrl:"/openapi/demo/condition?type=suggestion"},sql:{hideExemption:!0},desc:o.default('当用户选择"模糊匹配"或"等于"且未绑定可选数据时，可在此绑定用户输入时的suggestion列表数据')}),h=a.condition.dataConfig.otherData&&a.condition.dataConfig.otherData[i]&&a.condition.dataConfig.otherData[i].dataModelHash,m=a.sqlModelStore.detailMap.mapByHash.get(h||""),C=n.generateSQLFieldList(m),D=[{type:"select",name:"dataConfig.otherData."+i+".dataConfig.valueField",hiddenOn:"data.dataConfig.otherData."+i+".dataType != 'sql'",label:o.default("绑定Suggestion数据字段"),placeholder:o.default("请选择"),options:C}],b=a.condition.config.openSuggestion;b&&(t=t.concat(u,D,f)),t=t.concat([{type:"divider"},s.amisInlineSwitch("config.openDataBind",o.default("开启数据绑定")),{type:"tpl",hiddenOn:"data.dataType != 'sql'",tpl:'<span class="text-muted help-block">'+o.default("绑定数据后，用户不能输入，只能在数据中选择")+"</span>",className:"m-t-n-sm"}]);var y=n.getDebugAndRefreshBtn({loadData:a.condition.loadData,loadDebugData:a.condition.loadDebugData,dataType:a.condition.dataType,refreshText:o.default("刷新条件")}),M=n.getDataBindCommon({frontendId:a.condition.frontendId,dataTypeOptions:["dataModel","api","static","sql"],api:{demoUrl:"/openapi/demo/condition?type=select"},"static":{columnLength:2,headers:[["名称","取值"]]},sql:{hideExemption:!0}}),P=a.condition.dataModelHash||"",x=a.sqlModelStore.detailMap.mapByHash.get(a.condition.dataModelHash||""),v=n.generateSQLFieldList(x),B=[p.getDataModelFieldHolder({name:"value",label:o.default("取值字段"),config:{dataModelHash:P,holderId:a.condition.frontendId+"-value",maxCount:1,onlyDimension:!0}}),p.getDataModelFieldHolder({name:"name",label:o.default("名称字段(不填时用取值字段替代)"),config:{dataModelHash:P,holderId:a.condition.frontendId+"-name",maxCount:1,onlyDimension:!0}}),n.commonFilterForDataModel(P),n.commonBindUrlParamForDataModel(P),n.commonLimitForDataModel,{type:"select",name:"dataConfig.sqlNameField",hiddenOn:"data.dataType != 'sql'",label:o.default("名称字段(给用户展示的单选内容)"),placeholder:o.default("请选择"),clearable:!0,options:v},{type:"select",name:"dataConfig.sqlValueField",hiddenOn:"data.dataType != 'sql'",label:o.default("取值字段(不选时用名称字段代替)"),placeholder:o.default("请选择"),clearable:!0,options:v}],T=a.condition.config.openDataBind;T&&(t=t.concat(M,B,y));var H=c.findUsingDataModelHashsInReport(a.chartList,a.conditionList);return H.size?t=t.concat([r.getDataModelBindChooser({label:o.default("选择要过滤的数据模型"),config:{amisConfig:[{type:"tpl",tpl:"<div class='help-block'>"+o.default("与字段的关联类型可在「基础」选项卡中配置，用户可动态选择")+"</div>"}],initialStates:{},conditionEntity:a.condition}}),g.getConditionChartChooser({label:o.default("关联的图表"),name:"chartBind",config:{conditionEntity:a.condition,dataModelBindConfig:a.condition.dataConfig.dataModel?a.condition.dataConfig.dataModel.dataModelBind||[]:[]}}),g.getConditionChartChooser({label:o.default("关联依赖本条件的过滤条件"),name:"conditionBind",config:{mode:"condition",conditionEntity:a.condition,dataModelBindConfig:a.condition.dataConfig.dataModel?a.condition.dataConfig.dataModel.dataModelBind||[]:[]}})]):t}});
;sugar.define("sugar:widgets/conditions/logic/logic.tsx",function(e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var t=e("sugar:node_modules/tslib/tslib.js"),n=e("sugar:utils/i18n.ts"),i=e("sugar:node_modules/react/index.js"),l=e("sugar:widgets/conditions/logic/logic-ctrl.tsx"),s=e("sugar:widgets/conditions/condition-manager.tsx"),o=e("sugar:stores/index.ts"),c=e("sugar:node_modules/amis/lib/index.js"),u=e("sugar:widgets/conditions/select/select.tsx"),r=e("sugar:widgets/conditions/text/InputAutoSuggest.tsx"),d=e("sugar:widgets/conditions/_hoc/debug/debug.tsx"),g=e("sugar:widgets/conditions/logic/config.js"),h=e("sugar:utils/common-helper.ts"),p=e("sugar:node_modules/amis/lib/components/Select.js"),f=e("sugar:sites/sugar-cxd.ts"),m=function(e){function a(){return null!==e&&e.apply(this,arguments)||this}return t.__extends(a,e),a.prototype.componentWillMount=function(){var e=this.props,a=e.condition,t=e.mode;a.config.openDataBind&&a.loadData(t,!0),this.onNeedSuggestionValueChange=this.onNeedSuggestionValueChange.bind(this),this.changeValue=this.changeValue.bind(this),this.handleRangeStartChange=this.handleRangeStartChange.bind(this),this.handleRangeEndChange=this.handleRangeEndChange.bind(this),this.handleMultiChange=this.handleMultiChange.bind(this),this.makeInput=this.makeInput.bind(this)},a.prototype.pullSuggestionData=function(){var e=this.props,a=e.condition,t=e.mode;a.loadOtherData(t,"suggestion")},a.prototype.onNeedSuggestionValueChange=function(e){{var a=this.props,t=a.condition;a.mode,a.hub}this.changeValue([e]);var n=t.config.openSuggestion;n&&e&&this.pullSuggestionData(e)},a.prototype.changeValue=function(e,a){var n=this.props,i=n.condition,l=n.hub,s=l.value.value,o={};o="string"==typeof s?{}:t.__assign({},s),o.logic=""===a?"":a?a:o.logic,o.vals=e?e:o.vals,i.changeConditionValue(o,this.props.mode)},a.prototype.handleRangeStartChange=function(e){var a=t.__spreadArrays(this.props.hub.value.value.vals);a[0]=e,this.changeValue(a)},a.prototype.handleRangeEndChange=function(e){var a=t.__spreadArrays(this.props.hub.value.value.vals);a[1]=e,this.changeValue(a)},a.prototype.handleMultiChange=function(e){"string"==typeof e?this.changeValue(e.split(",")):e instanceof Array&&this.changeValue(e.map(function(e){return e.value}))},a.prototype.makeInput=function(e,a,t,l,s){var o=this,c=this.props,d=c.hub,g=c.condition,m=c.disabled,v=c.container;e=e||[];var b=parseInt(g.config.suggestDelay||"500",10);if(e.length&&e.map)return e=e.map(function(e){return u.processLabelAndValue(e)}),t?(a=a?a:[],i.createElement(p.default,{className:"condition__form-item",searchable:!h.isMobile&&e.length>=10,multiple:!0,disabled:!!m,value:a,options:e,onChange:l,placeholder:n.default("请选择"),locale:n.lang,popOverContainer:v?function(){return v}:null})):i.createElement(p.default,{className:"condition__form-item",searchable:!h.isMobile&&e.length>=10,disabled:!!m,value:a,options:e,simpleValue:!0,onChange:l||function(e){o.changeValue([e])},placeholder:n.default("请选择"),locale:n.lang,popOverContainer:v?function(){return v}:null});if("="===s||"like"===s){var C=d.data.other.get("suggestion"),y=C&&C.data&&C.data.length?C.data:[];return i.createElement(r.default,{value:a,onChange:this.onNeedSuggestionValueChange,suggestions:y,disabled:!!m,placeholder:n.default(g.config.cusLabelName?g.config.cusLabelName:"请输入"),delay:b})}return i.createElement("div",{className:f.classPrefix+"TextControl-input"},i.createElement("input",{disabled:!!m,value:a?a:"",placeholder:g.config.cusLabelName?g.config.cusLabelName:n.default(t?"多个值请用英文逗号隔开":"请输入"),onChange:function(e){l?l(e.target.value):o.changeValue([e.target.value])}}))},a.prototype.renderSelect=function(){var e=this,a=this.props,t=(a.mode,a.disabled),l=a.hub,s=a.condition,o=a.container,c=l.value.value,u=s.config.options?s.config.options.split(","):[],r=g.available.filter(function(e){return~u.indexOf(e)}).map(function(e){return{label:g.locale[e],value:e}});return i.createElement("div",{className:"col-xs-4",key:"logic-select"},i.createElement(p.default,{className:"condition__form-item",searchable:!h.isMobile&&r.length>=10,disabled:!!t,value:c?c.logic:"",options:r,simpleValue:!0,onChange:function(a){e.changeValue([],a)},clearable:!0,placeholder:n.default("请选择"),locale:n.lang,popOverContainer:o?function(){return o}:null}))},a.prototype.renderValue=function(){var e=this.props,a=(e.mode,e.disabled,e.hub),t=(e.condition,a.data.data),l=a.value.value,s=null;switch(l?l.logic:""){case"=":case">":case">=":case"<":case"<=":case"!=":s=i.createElement("div",{className:"col-xs-8",key:"logic-value"},this.makeInput(t,l.vals[0],!1,void 0,l.logic));break;case"in":case"notIn":s=i.createElement("div",{className:"col-xs-8",key:"logic-value"},this.makeInput(t,l.vals,!0,this.handleMultiChange));break;case"between":s=i.createElement("div",{className:"col-xs-8 row logic-range",key:"logic-value"},i.createElement("div",{className:"col-xs-5"},this.makeInput(t,l.vals[0],!1,this.handleRangeStartChange)),i.createElement("div",{className:"col-xs-1 like-label"},n.default("至")),i.createElement("div",{className:"col-xs-5"},this.makeInput(t,l.vals[1],!1,this.handleRangeEndChange)));break;case"like":case"begin":case"end":s=i.createElement("div",{className:"col-xs-8",key:"logic-value"},this.makeInput(null,l.vals[0],!1,void 0,l.logic));break;case"null":case"notNull":}return s},a.prototype.render=function(){var e=this.props.hub.data,a=null;return a=e&&"pending"===e.loadState?i.createElement(c.Spinner,{inline:!0,size:"sm"}):[this.renderSelect(),this.renderValue()]},a.displayName="LogicCondition",a=t.__decorate([d.default,o.observer],a)}(i.Component);a.default=m;var v=function(e,a,t,n,i){if(void 0===e&&(e=null),void 0===i&&(i=!1),i&&null!=n&&(e=n),"__sugar_showx_custom"===e&&"string"==typeof a.cusDefaultVal){var l={logic:"",vals:[]},s=a.cusDefaultVal.split(",");if(a.options&&~a.options.indexOf(s[0]))l.logic=s[0];else if(a.options)for(var o=0,c=a.options.split(",");o<c.length;o++){var u=c[o];if(g.locale[u]===s[0]){l.logic=u;break}}switch(l.logic){case"=":case">":case">=":case"<":case"<=":case"!=":case"like":case"begin":case"end":l.vals=s.slice(1,2);break;case"in":case"notIn":l.vals=s.slice(1);break;case"between":l.vals=s.slice(1,3);break;case"null":case"notNull":}return l}return e},b=function(e){var a=e.dataConfig.dataModel,t=(a.name,a.value),n=void 0===t?[]:t;return n.length?!0:!1};s.register({type:"logic",name:n.default("多重逻辑"),iconClassName:"condition-logic",component:m,initialState:{defaultVal:"__sugar_showx_custom",dataType:"static",dataConfig:{otherData:{suggestion:{dataType:"api"}}},config:{suggestDelay:500}},defaultValOrUrlVal2view:v,canHalfWidth:!1,basicCtrl:l.basicCtrl,dataBindCtrl:l.dataBindCtrl,dataModelBindMonitorField:"value",dataModelLinkType:"",dataModelPanelShow:[["dataType","dataModel"],["config.openDataBind",!0]],loadDataWhenDataModelConfigChange:b})});
;sugar.define("sugar:widgets/conditions/date-time/date-time-ctrl.tsx",function(t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.advancedCtrl=a.dataBindCtrl=a.basicCtrl=void 0;var e=t("sugar:utils/i18n.ts"),d=t("sugar:widgets/conditions/date/date-limit-ctrl.tsx"),i=t("sugar:widgets/conditions/date/hot-key.tsx"),o=t("sugar:widgets/data-model/data-model-bind-chooser/data-model-bind-chooser.tsx"),n=t("sugar:widgets/data-model/data-model-condition-chart-chooser/data-model-condition-chart-chooser.tsx"),l=t("sugar:widgets/data-model/data-model-bind-chooser/data-model-bind-chooser-item.tsx"),s=t("sugar:utils/data-model-helper.ts"),r=t("sugar:widgets/ctrl-panel/condition-ctrl.tsx");a.basicCtrl=function(t){return[{type:"divider"},{type:"radios",name:"defaultVal",inline:!1,label:e.default("默认值"),options:[{label:e.default("无"),value:""},{label:e.default("10分钟前"),value:"10min"},{label:e.default("1小时前"),value:"1h"},{label:e.default("3小时前"),value:"3h"},{label:e.default("自定义"),value:"cus"}]},{type:"text",label:"",className:"p-l-md",placeholder:e.default("输入自定义的默认值"),name:"config.cusDefaultVal",hiddenOn:"data.defaultVal != 'cus'",desc:"可输入正负数，如: -1 表示一分钟前，+1 表示一分钟后。{ZERO} 表示当天零点（注意有大括号），{ZERO+60} 表示当天零点后的60分钟；如果想定义绝对日期时间，请填写绝对日期时间，例如：2018-01-01 12:30:00"},{type:"divider"}].concat(d.dateLimitCtrl,r.dateCustomColorCtrl(!!t.condition.isDashCondition))},a.dataBindCtrl=function(t){var a=s.findUsingDataModelHashsInReport(t.chartList,t.conditionList);if(!a.size)return[];var d=["=","!=",">","<",">=","<="],i=d.map(function(t){return{label:l.linkTypeMap.get(t),value:t}}),r=[o.getDataModelBindChooser({label:e.default("选择要过滤的数据模型"),config:{amisConfig:[{name:"linkType",label:e.default("请选择关联方式"),type:"radios",inline:!1,options:i}],initialStates:{linkType:"="},conditionEntity:t.condition,supportFieldType:["date","datetime","timestamp"]}}),n.getConditionChartChooser({label:e.default("关联的图表"),name:"chartBind",config:{conditionEntity:t.condition,dataModelBindConfig:t.condition.dataConfig.dataModel?t.condition.dataConfig.dataModel.dataModelBind||[]:[]}}),n.getConditionChartChooser({label:e.default("关联依赖本条件的过滤条件"),name:"conditionBind",config:{mode:"condition",conditionEntity:t.condition,dataModelBindConfig:t.condition.dataConfig.dataModel?t.condition.dataConfig.dataModel.dataModelBind||[]:[]}})];return r},a.advancedCtrl=i.getHotKeyCtrl("dateTime")});
;sugar.define("sugar:widgets/conditions/date-time/style.tsx",function(t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var e=t("sugar:node_modules/tinycolor2/tinycolor.js"),d=t("sugar:sites/sugar-cxd.ts"),o=d.appTheme.classnames;r.default={background:function(t,r,d){return void 0===r&&(r=""),void 0===d&&(d=""),[[[" .rdt .rdtPicker td.rdtDay","."+o("PopOver")," ."+o("CalendarInput")," ."+o("DatePicker-shortcuts")," .rdtYear.rdtDisabled > span"],{background:t}],[[" ."+o("DatePicker")],{background:r||t}],[[" ."+o("DatePicker")+":not(.is-disabled):hover"],{background:d||e(t).setAlpha(.9).toString()}]]},fontColor:function(t){return[[[" .rdtSwitch"," .rdtPrev"," .rdtNext"," td.rdtDay"," .rdtYears .rdtYear"," ."+o("DatePicker")," ."+o("DatePicker-placeholder")," ."+o("DatePicker-toggler")," .rdt tfoot td span"," .rdtMonths .rdtMonth"],{color:t}],[[" ."+o("DatePicker-toggler")+":hover"," .rdt .rdtPicker .dow"],{color:e(t).setAlpha(.9).toString()}],[[" ."+o("DatePicker-clear")+" svg"],{fill:t}],[[" ."+o("DatePicker-clear")+":hover svg"],{fill:e(t).setAlpha(.9).toString()}],[[" ."+o("DatePicker-placeholder")," .rdtPicker td.rdtOld"," .rdtPicker td.rdtNew"," .rdtYear.rdtDisabled > span"],{color:e(t).setAlpha(.6).toString()}]]},borderColor:function(t){return[[[" ."+o("DatePicker")+":not(.is-disabled):hover"],{"border-color":e(t).setAlpha(.9).toString()}],[[" ."+o("DatePicker")," ."+o("CalendarInput"),"."+o("PopOver")],{"border-color":t}]]},activeBgColor:function(t){return[[[" ."+o("DatePicker-ranger")+" a"," ."+o("CalendarInput")],{color:t}],[[" .rdt .rdtPicker td.rdtToday:before"],{"border-bottom-color":t}],[[" .rdtPicker td.rdtBetween"],{background:e(t).setAlpha(.1).toString()}],[[" .rdt .rdtPicker td.rdtActive"," .rdtPicker td.rdtActive:hover"," .rdtBtnConfirm"," .rdt .rdtPicker td.rdtDay:hover"," td.rdtYear.rdtActive > span"," .rdtYears .rdtYear:hover > span"," td.rdtMonth.rdtActive > span"," .rdtMonths .rdtMonth:hover > span"],{background:t}]]},activeFontColor:function(t){return[[[" .rdtPicker td.rdtActive"," .rdtPicker td.rdtActive:hover"," .rdtBtnConfirm"," .rdt .rdtPicker td.rdtDay:hover"," td.rdtYear.rdtActive > span"," .rdtYears .rdtYear:hover > span"," td.rdtMonth.rdtActive > span"," .rdtMonths .rdtMonth:hover > span"],{color:t}]]},fontSize:function(t,r){void 0===t&&(t=16);var e=+(t/14).toFixed(2);return[[[" ."+o("DatePicker")," ."+o("DatePicker-placeholder")," ."+o("DatePicker-toggler")],{"font-size":t+"px"}],[[" ."+o("DatePicker-clear")+" svg"],{width:10*e+"px",height:10*e+"px","margin-right":3*(e-1)+"px"}],[[" ."+o("DatePicker-toggler")],{"margin-right":(3*e).toFixed(2)+"px"}],[[" ."+o("DatePicker-clear")+" svg"],{width:10*e+"px",height:10*e+"px","margin-right":3*(e-1)+"px"}],[[" ."+o("DatePicker")],{height:(30*e).toFixed(2)+"px",display:"flex","align-items":"center"}],[[" .rdt"," ."+o("DatePicker-shortcuts")],{transform:"scale("+e+")","transform-origin":"top left"}],[["."+o("PopOver")],{width:(252*e).toFixed(2)+"px",height:((r?300:279)*e).toFixed(2)+"px"}],[[" .rdt"],{width:0,top:r?(28.12*(e-1)).toFixed(2)+"px":0}]]}}});
;sugar.define("sugar:widgets/conditions/date-time/date-time.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setDateTimeDefaultColor=void 0;var a=e("sugar:node_modules/tslib/tslib.js"),n=e("sugar:utils/i18n.ts"),o=e("sugar:node_modules/react/index.js"),i=e("sugar:widgets/conditions/condition-manager.tsx"),r=e("sugar:stores/index.ts"),s=e("sugar:widgets/conditions/date-time/date-time-ctrl.tsx"),l=e("sugar:utils/date-helper.ts"),d=e("sugar:node_modules/amis/lib/components/DatePicker.js"),u=e("sugar:node_modules/moment/moment.js"),c=e("sugar:sites/sugar-cxd.ts"),m=e("sugar:utils/condition-helper.ts"),g=e("sugar:widgets/conditions/date-time/style.tsx"),f=(c.appTheme.classnames,[{name:n.default("10min前"),value:10},{name:n.default("1h前"),value:60}],function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.componentWillMount=function(){this.handleChange=this.handleChange.bind(this)},t.prototype.handleChange=function(e){this.props.handleChange(e)},t.prototype.render=function(){var e=this.props,t=e.hub,a=e.condition,i=e.disabled,r=e.container,s=e.conditionConfig,c=t.value.value,g=a.config,f=g.range,p=g.rangeCusBegin,h=g.rangeCusEnd,v=l.getDateLimitByRange(f,p,h),D=[];a.config.openHotKeys&&(D=l.getShortcutByHotKey("dateTime",a.config.hotKeys||[]));var y=a.type+"-"+s.hash+" condition_"+a.frontendId;return m.insertRule("."+a.type+"-"+s.hash+".condition_"+a.frontendId,C(this.props)),o.createElement("div",{className:"col-xs-12 "+y},o.createElement(d.default,{className:"condition__form-item",popoverClassName:y,value:c,onChange:this.handleChange,inputFormat:"YYYY-MM-DD HH:mm:ss",timeFormat:"HH:mm:ss",disabled:i,clearable:!0,minTime:v.minDate?u(v.minDate):void 0,maxTime:v.maxDate?u(v.maxDate):void 0,popOverContainer:r?function(){return r}:null,placeholder:n.default("请选择时间"),shortcuts:D,locale:n.lang,overlayPlacement:m.getPlacement(this.props,530,280)}))},t.displayName="DateTimeCondition",t=a.__decorate([r.observer],t)}(o.Component));t.default=f;var p=function(e,t){return void 0===e&&(e=""),l.getDateTimeByDefaultVal(e,t.cusDefaultVal)},h=function(e){var t=u(e).toDate();return!t||isNaN(t.getTime())?void 0:l.formatDate(t,"$1-$2-$3 $4:$5:$6")},v=function(e){var t=u(e).toDate();return!t||isNaN(t.getTime())?"":l.formatDate(t,"$1-$2-$3 $4:$5:$6")};t.setDateTimeDefaultColor=function(e,t){var a=m.getCommonColor(e,!!t.isDashCondition);return m.getStyleOptions(["backgroundDefault","fontColor","borderColor","activeBgColor","activeFontColor"],g.default,a,t)};var C=function(e){var t=e.condition,a=e.condition.config,n=m.getStyleOptions(["background","fontSize","borderColor","fontColor","activeFontColor","activeBgColor"],g.default,a,t);return n};i.register({type:"dateTime",name:n.default("时间"),iconClassName:"condition-date-time",component:f,canHalfWidth:!0,defaultValOrUrlVal2view:p,view2value:h,view2Display:v,basicCtrl:s.basicCtrl,dataBindCtrl:s.dataBindCtrl,advancedCtrl:s.advancedCtrl})});
;sugar.define("sugar:widgets/image-to-palette/palette.ts",function(t,e){"use strict";function o(t,e,o){var n=t+e+o;return n>90&&700>n}function n(t,e){var n=t,i=n.length,u=[],r=(null===e||void 0===e?void 0:e.quality)||i/((null===e||void 0===e?void 0:e.colorCount)||10)/100;r=Math.ceil(r);for(var a=0,d=void 0,l=void 0,v=void 0,f=void 0,c=void 0;i>a;a+=r)d=4*a,l=n[d],v=n[d+1],f=n[d+2],c=n[d+3],("undefined"==typeof c||c>125)&&o(l,v,f)&&u.push([l,v,f]);return u}Object.defineProperty(e,"__esModule",{value:!0}),e.getPalette=void 0;var i=t("sugar:node_modules/quantize/quantize.js");e.getPalette=function(t,e){var u=n(t.data,e),r=i(u,(null===e||void 0===e?void 0:e.colorCount)||10),a=[];return r&&(a=r.palette()||[],a=a.filter(function(t){return o(t[0],t[1],t[2])}).map(function(t){return"rgb("+t.join(",")+")"})),a}});
;sugar.define("sugar:widgets/image-to-palette/index.tsx",function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ImageToPalette=void 0;var a=t("sugar:node_modules/tslib/tslib.js"),i=t("sugar:node_modules/react/index.js"),o=t("sugar:node_modules/amis/lib/index.js"),s=t("sugar:widgets/image-to-palette/palette.ts"),r=function(t){function e(e){var a=t.call(this,e)||this;return a.state={show:!1},a.canvasRef=i.createRef(),a.inputRef=i.createRef(),a.colorRef=i.createRef(),a.ratio=window.devicePixelRatio,a.upload=a.upload.bind(a),a.onChange=a.onChange.bind(a),a.showDrawer=a.showDrawer.bind(a),a.loadImage=a.loadImage.bind(a),a.drawImage=a.drawImage.bind(a),a.pick=a.pick.bind(a),a.move=a.move.bind(a),a}return a.__extends(e,t),e.prototype.shouldComponentUpdate=function(t,e){return e.show!==this.state.show},e.prototype.upload=function(){this.inputRef.current.click()},e.prototype.onChange=function(t){var e=this;t.target.files[0]&&(this.file=t.target.files[0],this.setState({show:!0},function(){e.showDrawer()}))},e.prototype.showDrawer=function(){if(this.canvasRef.current&&(this.ctx=this.canvasRef.current.getContext("2d"),this.canvasRef.current.onclick=this.pick,this.canvasRef.current.onmousemove=this.move,this.file)){var t=new FileReader;t.readAsDataURL(this.file),t.onload=this.loadImage}},e.prototype.loadImage=function(t){var e=this;if(t){var a=new Image;a.src=t.target.result,a.onload=function(){e.drawImage(a)}}},e.prototype.drawImage=function(t){var e=this.props,a=e.afterUpload,i=e.colorCount,o=this.canvasRef.current,r=o.offsetWidth,n=o.offsetHeight,c=t.width/t.height,l=n*this.ratio,h=l*c;c>r/n&&(h=r*this.ratio,l=h/c),this.ctx.clearRect(0,0,r*this.ratio,n*this.ratio),this.ctx.drawImage(t,0,0,h,l);var d=s.getPalette(this.ctx.getImageData(0,0,h,l),{colorCount:i||10});"function"==typeof a&&a(d)},e.prototype.move=function(t){var e=t.layerX*this.ratio,a=t.layerY*this.ratio,i=this.ctx.getImageData(e,a,1,1);this.colorRef.current.style.backgroundColor="rgb("+i.data.slice(0,3).join(",")+")"},e.prototype.pick=function(t){var e=t.layerX*this.ratio,a=t.layerY*this.ratio,i=this.ctx.getImageData(e,a,1,1),o="rgb("+i.data.slice(0,3).join(",")+")";"function"==typeof this.props.onPick&&this.props.onPick(o)},e.prototype.render=function(){var t=this.props,e=t.width,a=t.height,s=t.buttonLabel,r=t.description,n=t.colorLabel,c=t.className,l=t.buttonClassName,h=t.canvasClassName;return e=e||480,a=a||270,i.createElement("div",{className:c,style:{position:"relative"}},this.state.show?i.createElement("canvas",{className:h,width:e*this.ratio,height:a*this.ratio,style:{width:e,height:a,cursor:"pointer"},ref:this.canvasRef}):null,i.createElement("input",{style:{display:"none"},type:"file",accept:"image/*",ref:this.inputRef,onChange:this.onChange}),i.createElement(o.Button,{className:l,onClick:this.upload},s||"+"),this.state.show?[i.createElement("div",{key:"color",style:{display:"inline-block",verticalAlign:"middle",width:20,height:20,margin:"0 10px"},ref:this.colorRef}),n]:null,r)},e}(i.Component);e.ImageToPalette=r});
;sugar.define("sugar:sites/group/manage/chart-theme/chart-theme-ctrl.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChartThemeSelect=t.chartThemeForm=t.shareTypeMap=void 0;var a=e("sugar:node_modules/tslib/tslib.js"),l=e("sugar:node_modules/react/index.js"),n=e("sugar:node_modules/amis/lib/index.js"),o=e("sugar:utils/i18n.ts"),r=e("sugar:stores/index.ts"),i=e("sugar:sites/amis-renderer.tsx"),s=e("sugar:widgets/image-to-palette/index.tsx"),d=e("sugar:widgets/product-type/product-type-modal.tsx");t.shareTypeMap={user:o.default("用户"),company:o.default("组织"),group:o.default("空间")};var c=function(e){return new Promise(function(t,a){var l=new FileReader;l.readAsText(e),l.onload=function(e){var l;if(null===(l=null===e||void 0===e?void 0:e.target)||void 0===l?void 0:l.result)try{var n=JSON.parse(e.target.result);n instanceof Object?t(n):a(null)}catch(o){a(null)}}})},u=function(e,t,a,l){e&&c(e).then(function(e){(null===e||void 0===e?void 0:e.config)instanceof Object?l.updateData({config:e.config}):n.toast.error(o.default("导入失败"))})},h=function(e,t,l,r){e&&c(e).then(function(e){var t=(null===e||void 0===e?void 0:e.theme)||e;t instanceof Object?r.updateData({config:a.__assign(a.__assign({},r.data.config),{chartTheme:t})}):n.toast.error(o.default("导入失败"))})},p=function(e){var t,l=e.data,n=l.name,o=l.type,r=l.shareType,i=JSON.parse(JSON.stringify(e.data.config));return i instanceof Object?(i.dashboardBC=3===o?i.pageBC:"",i.conditionBC=i.chartBC||"",(null===(t=i.chartTheme)||void 0===t?void 0:t.color)&&(i.chartTheme.color=i.chartTheme.color.slice(0,30)),a.__assign(a.__assign({},e),{data:{name:n,type:o,shareType:r,config:JSON.stringify(i)}})):void 0};t.chartThemeForm=function(e){var t=e.mode,n=e.groupHash,r=e.type,i=void 0===r?1:r,c=e.initApi,m=e.onFinished,f=[{type:"group",controls:[{type:"text",name:"name",label:o.default("主题名称"),required:!0,validations:"maxLength:30"},{type:"select",name:"type",clearable:!0,label:o.default("主题类型"),options:[{label:o.default("报表"),value:1},{label:o.default("大屏"),value:3}]}]},{type:"group",controls:[{type:"color",format:"rgba",name:"config.chartBC",clearable:!0,label:o.default("图表背景色")},{type:"color",format:"rgba",name:"config.pageBC",clearable:!0,label:o.default("页面背景色")}]},{children:function(e){return l.createElement("div",{className:e.classnames("Form-item Form-item--horizontal")},l.createElement("label",{className:e.classnames("Form-label Form-itemColumn--2")},o.default("图片选取颜色")),l.createElement("div",{className:e.classnames("Form-value")},l.createElement(s.ImageToPalette,{buttonLabel:o.default("上传图片"),canvasClassName:"d-block m-b",colorLabel:o.default("在图片上点击可添加该点颜色"),colorCount:12,afterUpload:function(t){t&&e.store.setValueByName("config.chartTheme.color",t)},onPick:function(t){var l,n=(null===(l=e.data.config.chartTheme)||void 0===l?void 0:l.color)||[];e.store.setValueByName("config.chartTheme.color",a.__spreadArrays([t],n))}})))}},{type:"array",name:"config.chartTheme.color",removable:!0,draggable:!0,inline:!0,required:!0,label:o.default("图表颜色"),items:{type:"color",required:!0}},{type:"radios",name:"shareType",inline:!1,label:o.default("共享"),options:[{label:o.default("空间，仅创建时的空间可使用"),value:"group"},{label:o.default("组织，当前组织下所有空间可使用"),value:"company"}]},{type:"file",name:"echartsTheme",accept:".json",maxSize:51200,maxLength:1,asBlob:!0,label:o.default("导入Echarts主题"),onChange:h,description:o.default("限小于50kb json文件")+'<a class="m-l" target="_blank" href="https://echarts.apache.org/zh/theme-builder.html">'+o.default("Echarts主题构建工具")+"</a>"}],g={type:"form",mode:"horizontal",actions:[],title:""};if("function"==typeof m&&(g.onFinished=m),"edit"===t)g.api={url:"/api/manage/group/"+n+"/chartTheme/$hash/edit",method:"put",requestAdaptor:p},c&&(g.initApi={url:"/api/manage/group/"+n+"/chartTheme/$hash/info",method:"get",adaptor:function(e){var t=e.data||{},l=t.config||{};return a.__assign(a.__assign({},e),{data:a.__assign(a.__assign({},t),{config:l})})}});else if("add"===t||"import"===t){var y=window.sugarConfig,b=y.productType,v=y.deployType;"saas"!==v||"advan"===b?g.api={url:"/api/manage/group/"+n+"/chartTheme/add",method:"post",requestAdaptor:p}:g.onFinished=function(){d.showUpdate()},g.data={name:"",type:i,shareType:"group",config:{chartTheme:{}},echartsTheme:""}}return"import"===t?(g.data.config=null,g.data.importTheme="",g.controls=[{type:"container",visibleOn:"!!config",label:!1,controls:f},{type:"file",name:"importTheme",hiddenOn:"!!config",accept:".json",maxSize:51200,maxLength:1,asBlob:!0,label:o.default("导入图表主题"),onChange:u,description:o.default("限小于50kb json文件")}]):g.controls=f,g};var m=function(e){function n(t){var a=e.call(this,t)||this;return a.toggle=a.toggle.bind(a),a.handleUse=a.handleUse.bind(a),a.handleEdit=a.handleEdit.bind(a),a.handleReload=a.handleReload.bind(a),a.state={show:!1},a}return a.__extends(n,e),n.prototype.toggle=function(){this.setState({show:!this.state.show})},n.prototype.handleUse=function(e,t){var a=t.data,l=this.props,n=l.chartTheme,o=l.onChange;n.setTheme(a.hash,a),"function"==typeof o&&o(a.hash)},n.prototype.handleEdit=function(e){var t=this.props.chartTheme;e.hash===t.theme.hash&&this.handleUse(null,{data:e})},n.prototype.handleReload=function(e){e&&this.handleUse(null,{data:e})},n.prototype.render=function(){var e=this.props,n=e.groupHash,r=void 0===n?"":n,s=e.chartTheme,d=e.themes,c=e.dashboard,u=s.theme,h=c?3:1;return l.createElement(l.Fragment,null,l.createElement(i.default,{data:a.__assign(a.__assign({},u),{editable:!!u.editable}),schema:{type:"card",body:[{children:function(){return l.createElement("div",null,u.shareType?l.createElement("span",null,t.shareTypeMap[u.shareType],"-"):null,l.createElement("span",null,o.default(3===u.type?"大屏":"报表")),l.createElement("span",{className:"m-l"},u.name))}},{children:function(){var e,t,a=(null===(t=null===(e=u.config)||void 0===e?void 0:e.chartTheme)||void 0===t?void 0:t.color)||[];return a.slice(0,10).map(function(e,t){return l.createElement("div",{key:e+t,style:{width:20,height:20,backgroundColor:e}})})}}],actions:[{type:"button",label:o.default("选择主题"),onClick:this.toggle},{type:"button",visibleOn:"editable",label:o.default("编辑"),actionType:"dialog",dialog:{title:o.default("编辑图表主题"),size:"md",body:t.chartThemeForm({mode:"edit",groupHash:r,onFinished:this.handleEdit})}},{children:function(){return u.registered?null:l.createElement("a",{className:"no-underline",href:"/api/manage/group/"+r+"/chartTheme/"+u.hash+"/info?fileType=json",download:u.name+".theme.json"},o.default("下载"))}}]}}),l.createElement(i.default,{schema:{type:"drawer",title:o.default("选择主题"),show:this.state.show,position:"right",size:"md",actions:[],overlay:!1,closeOnOutside:!0,onClose:this.toggle,body:{type:"tabs",mode:"line",activeKey:u.registered?0:1,tabs:[{title:o.default("内置主题"),body:[{type:"cards",items:d,valueField:"hash",selected:u.registered?[{hash:u.hash}]:[],multiple:!1,columnsCount:2,card:{body:[{type:"text",name:"name"},{className:"justify-between",children:function(e){var t=e.data,a=t.config.chartTheme.color||[];return a.slice(0,10).map(function(e,t){return l.createElement("div",{key:e+t,style:{width:20,height:20,backgroundColor:e}})})}}],actions:[{type:"button",label:o.default("使用"),onClick:this.handleUse}]}}]},{title:o.default("自定义主题"),body:[{type:"crud",mode:"cards",name:"sugar-chart-theme-cards",multiple:!1,pickerMode:!0,value:u.registered?[]:[{hash:u.hash}],hideCheckToggler:!0,keepItemSelectionOnPageChange:!0,columnsCount:2,headerToolbar:[],footerToolbar:["statistics","pagination"],defaultParams:{page:1,perPage:10},filter:{title:"",data:{searchKey:"",type:h},actions:[],controls:[{type:"group",controls:[{type:"text",name:"searchKey",clearable:!0,placeholder:o.default("搜索")},{type:"select",name:"type",clearable:!0,placeholder:o.default("主题类型"),options:[{label:o.default("报表"),value:1},{label:o.default("大屏"),value:3}]},{type:"button",actionType:"submit",label:o.default("搜索")}]},{type:"button",level:"primary",label:o.default("添加"),actionType:"dialog",dialog:{title:o.default("添加图表主题"),size:"md",actions:[{type:"button",actionType:"cancel",label:o.default("取消")},{type:"button",name:"action-use",level:"primary",actionType:"submit",reload:"sugar-chart-theme-cards",tooltip:o.default("添加并使用"),tooltipPlacement:"top",label:o.default("确认")}],body:t.chartThemeForm({mode:"add",groupHash:r,type:h,onFinished:this.handleReload})}},{type:"button",level:"primary",label:o.default("导入"),actionType:"dialog",dialog:{title:o.default("导入图表主题"),size:"md",actions:[{type:"button",actionType:"cancel",label:o.default("取消")},{type:"button",name:"action-use",level:"primary",actionType:"submit",reload:"sugar-chart-theme-cards",tooltip:o.default("添加并使用"),tooltipPlacement:"top",label:o.default("确认")}],body:t.chartThemeForm({mode:"import",groupHash:r,type:h,onFinished:this.handleReload})}},{type:"button",actionType:"submit",label:o.default("刷新")}]},syncLocation:!1,primaryField:"hash",api:{url:"/api/manage/group/"+r+"/chartTheme/getByType?searchKey=$searchKey&type=$type&page=$page&perPage=$perPage",method:"get"},card:{body:[{children:function(e){var a=e.data;return l.createElement("div",null,a.shareType?l.createElement("span",null,t.shareTypeMap[a.shareType],"-"):null,l.createElement("span",null,o.default(3===a.type?"大屏":"报表")),l.createElement("span",{className:"m-l"},a.name))}},{children:function(e){var t,a,n=e.data,o=(null===(a=null===(t=n.config)||void 0===t?void 0:t.chartTheme)||void 0===a?void 0:a.color)||[];return o.slice(0,10).map(function(e,t){return l.createElement("div",{key:e+t,style:{width:20,height:20,backgroundColor:e}})})}}],actions:[{type:"button",label:o.default("使用"),onClick:this.handleUse},{type:"button",visibleOn:"data.editable",label:o.default("编辑"),actionType:"dialog",dialog:{title:o.default("编辑图表主题"),size:"md",body:t.chartThemeForm({mode:"edit",groupHash:r,onFinished:this.handleEdit})}},{children:function(e){var t=e.data;return l.createElement("a",{className:"no-underline",href:"/api/manage/group/"+r+"/chartTheme/"+t.hash+"/info?fileType=json",download:t.name+".theme.json"},o.default("下载"))}}]}}]}]}}}))},n=a.__decorate([r.inject(function(e){return{groupHash:e.group.current.data.hash,chartTheme:e.chartTheme}}),r.observer,a.__metadata("design:paramtypes",[Object])],n)}(l.Component);t.ChartThemeSelect=m});
;sugar.define("sugar:widgets/ctrl-panel/report-ctrl.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.waterRemarkCtrl=void 0;var a=e("sugar:node_modules/tslib/tslib.js"),l=e("sugar:utils/i18n.ts"),n=e("sugar:node_modules/react/index.js"),o=e("sugar:stores/index.ts"),r=e("sugar:utils/img-source-map.ts"),i=e("sugar:sites/amis-renderer.tsx"),d=e("sugar:node_modules/lodash/cloneDeep.js"),u=e("sugar:widgets/charts/theme/_register-theme.ts"),s=e("sugar:widgets/amis-inline-switch.tsx"),c=e("sugar:utils/exception.ts"),p=e("sugar:widgets/image-selector/image-selector.tsx"),f=e("sugar:widgets/object-array-editor/object-array-editor.tsx"),m=e("sugar:widgets/ctrl-panel/common/switch-with-tip.tsx"),g=e("sugar:sites/group/manage/chart-theme/chart-theme-ctrl.tsx"),b=[];for(var y in r.reportBackground)b.push({label:y,type:r.reportBackground[y].url.split(".").pop().toUpperCase(),value:r.reportBackground[y].url,image:r.reportBackground[y].url});var h=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(r,e),r.prototype.componentWillMount=function(){},r.prototype.componentDidCatch=function(e,t){c.captureException(e,t)},r.prototype.render=function(){var e=this.props,o=e.reportEntity,r=e.updateReport,c=d(o.toJSON());c.config.theme=c.config.theme||"sugar",c.config.autoRefreshInterval=c.config.autoRefreshInterval||30;var y=[{key:"key",name:l.default("名称（大写字母及下划线）"),type:"text",tdStyle:{width:180}},{key:"value",name:l.default("取值"),type:"text"}];return n.createElement(i.default,{onChange:r,data:c,schema:{type:"page",bodyClassName:"wrapper",title:"",body:{title:"",type:"form",wrapWithPanel:!1,controls:a.__spreadArrays([{type:"text",name:"name",label:l.default("报表名称")},{type:"text",name:"remark",label:l.default("报表简介")},{type:"group",controls:[s.amisInlineSwitch("isPublic",l.default("报表是否公开")),s.amisInlineSwitch("isDev",l.default("开启开发模式"))]},s.amisInlineSwitch("config.autoRefresh",l.default("报表自动刷新(浏览模式才生效)")),{type:"number",name:"config.autoRefreshInterval",label:l.default("自动刷新间隔(秒)"),step:"private"===window.sugarConfig.deployType?1:5,min:"private"===window.sugarConfig.deployType?2:10,hiddenOn:"!data.config.autoRefresh"},{type:"divider"},{name:"config.theme",children:function(e){var t=e.onChange;return n.createElement(g.ChartThemeSelect,{themes:u.reportThemes,onChange:t})}},{type:"divider"},{type:"fieldset",collapsed:!0,title:l.default("自定义报表背景和图表样式"),collapsable:!0,headingClassName:"fieldset-title",controls:[{name:"config.reportCustomStyle",children:function(e){var t=e.onChange,o=e.value;return n.createElement(m.default,a.__assign({},{onChange:t,value:o,label:l.default("自定义报表背景和图表样式"),tipText:l.default("文档说明"),tipLink:"/docs/Chart-Report-Action#报表页面的背景和图表样式"}))}},{type:"radios",name:"config.backgroundType",inline:!1,label:l.default("报表背景设置"),hiddenOn:"!data.config.reportCustomStyle",options:[{label:l.default("内置背景图片"),value:0},{label:l.default("上传背景图片"),value:1},{label:l.default("只使用背景色"),value:2}]},{name:"config.backgroundUrl",visibleOn:"config.backgroundType === 0 && config.reportCustomStyle",children:function(e){var t=e.onChange,o=e.value;return n.createElement(p.default,a.__assign({},{onChange:t,value:o},{options:b,height:160,modalHeight:430,modalWidth:290,containerClassName:"form-group form-item",label:l.default("请选择报表背景模式图片："),searchTip:l.default("星空 蓝色"),limit:9}))}},{type:"image",name:"config.imgUrl",maxLength:1,allowInput:!0,maxSize:10485760,reciever:"/api/image/upload",visibleOn:"config.backgroundType === 1 && config.reportCustomStyle"},{type:"radios",name:"config.backgroundScaleType",inline:!1,label:l.default("背景图缩放方式"),options:[{label:l.default("拉伸铺满"),value:0},{label:l.default("水平拉伸铺满，垂直重复"),value:1},{label:l.default("垂直拉伸铺满，水平重复"),value:2},{label:l.default("不拉伸，水平垂直重复"),value:3}],hiddenOn:"config.backgroundType === 2 || !config.reportCustomStyle"},s.amisInlineSwitch("config.backgroundFixed",l.default("背景图不随页面滚动"),"config.backgroundType === 2 || !config.reportCustomStyle"),{type:"group",hiddenOn:"config.backgroundType === 2 || !config.reportCustomStyle",controls:[{type:"range",name:"config.backgroundBlur",max:20,min:0,step:1,label:l.default("背景图片模糊度")},{type:"range",name:"config.backgroundOpacity",max:10,min:0,step:1,label:l.default("背景图片透明度")}]},{type:"color",name:"config.backgroundColor",label:l.default("报表背景颜色(背景图片透明时可见)"),format:"rgba",hiddenOn:"!data.config.reportCustomStyle"},{type:"group",hiddenOn:"!data.config.reportCustomStyle",controls:[{type:"color",name:"config.chartBackgroundColor",label:l.default("图表背景颜色"),format:"rgba"},{type:"color",name:"config.chartTitleColor",label:l.default("图表标题颜色"),format:"rgba"}]},{type:"group",hiddenOn:"!data.config.reportCustomStyle",controls:[{type:"color",name:"config.chartTitleBgColor",label:l.default("图表标题背景颜色"),format:"rgba",size:"full"},{type:"number",name:"config.chartTitleFontSize",label:l.default("图表标题字号"),min:0,step:1}]},{type:"group",hiddenOn:"!data.config.reportCustomStyle",controls:[{type:"number",name:"config.chartBorderRadius",min:0,step:1,label:l.default("图表圆角")},{type:"select",name:"config.chartBorderStyle",label:l.default("图表边框样式"),options:[{label:l.default("实线"),value:"solid"},{label:l.default("点状"),value:"dotted"},{label:l.default("双线"),value:"double"},{label:l.default("虚线"),value:"dashed"}]}]},{type:"group",visibleOn:"config.reportCustomStyle",controls:[{type:"number",label:l.default("图表边框宽度"),name:"config.borderWidth",min:0,step:1,max:20},{type:"color",name:"config.borderColor",format:"rgba",label:l.default("图表边框颜色")}]},{type:"group",visibleOn:"config.reportCustomStyle",controls:[{type:"number",label:l.default("图表阴影宽度"),name:"config.shadowWidth",min:0,step:1,max:20},{type:"number",label:l.default("图表阴影偏移"),name:"config.shadowOffset",min:0,step:1,max:20}]},{type:"color",name:"config.shadowColor",format:"rgba",label:l.default("图表阴影颜色"),visibleOn:"config.reportCustomStyle"}]},{type:"divider"},{type:"fieldset",collapsed:!0,title:l.default("页面宏定义变量"),collapsable:!0,headingClassName:"fieldset-title",controls:[{name:"config.macro",children:function(e){var t=e.onChange,o=e.value;return n.createElement("div",null,n.createElement("div",{className:"a-Form-label form-group--relative a-Form-item--inline w-full"},n.createElement("span",{className:"a-Form-label"},l.default("报表宏定义变量（保存后生效）")),n.createElement("a",{className:"text-info form-item__tip top8",href:"/docs/DataBind-API-Macro#大屏、报表级别宏定义",target:"_blank"},l.default("文档说明"))),n.createElement(f.default,a.__assign({},{onChange:t,value:o},{chartFrontendId:c.hash,containerClassName:"form-group form-item",addTipText:l.default("新增宏定义变量"),label:"",cols:y})))}}]},{type:"divider"}],t.waterRemarkCtrl,[{type:"tpl",label:"",value:'<div class="help-block">'+l.default("报表的删除、目录结构调整等，请在管理中心的『报表管理』中进行！")+"</div>"}])}}})},r.displayName="ReportCtrl",r=a.__decorate([o.observer],r)}(n.Component);t.default=h,t.waterRemarkCtrl=[{type:"fieldset",collapsed:!0,title:l.default("水印设置"),collapsable:!0,headingClassName:"fieldset-title",controls:[s.amisInlineSwitch("config.wrOpen",l.default("开启水印")),{type:"radios",name:"config.wrType",inline:!1,label:l.default("水印内容"),options:[{label:l.default("浏览者的邮箱（公开分享时失效）"),value:"email"},{label:l.default("自定义"),value:"cus"}],hiddenOn:"!data.config.wrOpen"},{type:"text",name:"config.wrTxt",label:" ",placeholder:l.default("请输入自定义水印内容"),hiddenOn:"!data.config.wrOpen || data.config.wrType != 'cus'"},{type:"group",hiddenOn:"!data.config.wrOpen",controls:[{type:"color",name:"config.wrColor",label:l.default("水印颜色")},{type:"number",name:"config.wrAlpha",label:l.default("水印透明度"),min:.02,max:1,step:.01}]},{type:"group",hiddenOn:"!data.config.wrOpen",controls:[{type:"number",name:"config.wrFontsize",label:l.default("水印字体大小"),min:10,max:50,step:1},{type:"number",name:"config.wrWidth",label:l.default("水印宽度"),min:30,max:1e3,step:10}]},{type:"group",hiddenOn:"!data.config.wrOpen",controls:[{type:"number",name:"config.wrXspace",label:l.default("水印之间水平间距"),min:10,max:1e3,step:10},{type:"number",name:"config.wrYspace",label:l.default("水印之间垂直间距"),min:10,max:1e3,step:10}]}]},{type:"divider"},{type:"fieldset",collapsed:!0,title:l.default("禁用导出和其它"),collapsable:!0,headingClassName:"fieldset-title",controls:[s.amisInlineSwitch("config.banDownLoad",l.default("禁用导出数据功能（CSV、Excel、图片）")),s.amisInlineSwitch("config.hideError",l.default("隐藏异常提示信息（公开分享页面时生效）")),{name:"config.lang",label:l.default("分享页面语言环境"),type:"radios",inline:!1,value:"default",options:[{label:l.default("默认"),value:"default"},{label:l.default("中文"),value:"zh_cn"},{label:l.default("英文"),value:"en"}]}]}]});
;sugar.define("sugar:widgets/dashboard-ctrl-panel/dashboard-ctrl.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.customConditionCtrl=void 0;var a=e("sugar:node_modules/tslib/tslib.js"),l=e("sugar:utils/i18n.ts"),n=e("sugar:node_modules/react/index.js"),o=e("sugar:stores/index.ts"),i=e("sugar:utils/img-source-map.ts"),r=e("sugar:sites/amis-renderer.tsx"),s=e("sugar:node_modules/lodash/cloneDeep.js"),d=e("sugar:widgets/charts/theme/_register-theme.ts"),u=e("sugar:widgets/amis-inline-switch.tsx"),c=e("sugar:widgets/ctrl-panel/common/switch-with-tip.tsx"),m=e("sugar:utils/exception.ts"),p=e("sugar:widgets/image-selector/image-selector.tsx"),g=e("sugar:widgets/object-array-editor/object-array-editor.tsx"),f=e("sugar:widgets/ctrl-panel/report-ctrl.tsx"),h=e("sugar:sites/group/manage/chart-theme/chart-theme-ctrl.tsx"),b=[];for(var y in i.backgrounds)b.push({label:y,type:i.backgrounds[y].url.split(".").pop().toUpperCase(),value:i.backgrounds[y].url,image:i.backgrounds[y].url});var C=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(i,e),i.prototype.componentWillMount=function(){},i.prototype.componentDidCatch=function(e,t){m.captureException(e,t)},i.prototype.render=function(){var e=this.props,o=e.dashboardEntity,i=e.updateDashboard,m=s(o.toJSON());m.config.theme=m.config.theme||"sugar";var y=[{key:"key",name:l.default("名称（大写字母及下划线）"),type:"text",tdStyle:{width:180}},{key:"value",name:l.default("取值"),type:"text"}];return n.createElement(r.default,{onChange:i,data:m,schema:{type:"page",bodyClassName:"wrapper",title:"",body:{title:"",type:"form",wrapWithPanel:!1,controls:a.__spreadArrays([{type:"text",name:"name",label:l.default("大屏名称")},{type:"text",name:"remark",label:l.default("大屏简介")},{name:"isDev",children:function(e){var t=e.onChange,o=e.value;return n.createElement(c.default,a.__assign({},{onChange:t,value:o,label:l.default("开启开发模式"),tipText:l.default("什么是开发模式？"),tipLink:"/docs/GettingStarted-Page-Dashboard#大屏开发模式"}))}},{type:"divider"},{name:"config.theme",children:function(e){var t=e.onChange;return n.createElement(h.ChartThemeSelect,{dashboard:!0,themes:d.dashboardThemes,onChange:t})}},{type:"divider"},{type:"fieldset",collapsed:!0,title:l.default("宽高和缩放"),collapsable:!0,headingClassName:"fieldset-title",controls:[{type:"group",controls:[{type:"number",name:"width",label:l.default("大屏宽度"),step:10,min:10},{type:"number",name:"height",label:l.default("大屏高度"),step:10,min:10}]},{type:"number",name:"config.grid",label:l.default("网格间距"),step:1,min:1},u.amisInlineSwitch("config.showGrid",l.default("显示网格")),{type:"radios",name:"scaleType",inline:!1,label:l.default("缩放方式"),options:[{label:l.default("自适应高宽"),value:3},{label:l.default("拉伸至全屏"),value:0},{label:l.default("宽度铺满，高度按比例缩放"),value:1},{label:l.default("高度铺满，宽度按比例缩放"),value:2}]},u.amisInlineSwitch("config.stayScaleWhenBrowse",l.default("在系统内浏览页保持缩放方式"))]},{type:"divider"},{type:"fieldset",collapsed:!0,title:l.default("背景设置"),collapsable:!0,headingClassName:"fieldset-title",controls:[{type:"radios",name:"config.backgroundType",inline:!1,label:l.default("背景图片"),options:[{label:l.default("内置背景"),value:0},{label:l.default("自定义背景"),value:1},{label:l.default("只使用背景色"),value:2}]},{name:"config.backgroundUrl",visibleOn:"config.backgroundType === 0",children:function(e){var t=e.onChange,o=e.value;return n.createElement(p.default,a.__assign({},{onChange:t,value:o},{options:b,height:160,modalHeight:230,modalWidth:400,containerClassName:"form-group form-item",label:l.default("请选择大屏背景："),searchTip:l.default("星空 蓝色"),limit:8}))}},{type:"image",name:"imgUrl",maxLength:1,allowInput:!0,maxSize:10485760,reciever:"/api/image/upload",visibleOn:"config.backgroundType === 1"},{type:"group",hiddenOn:"config.backgroundType === 2",controls:[{type:"range",name:"config.backgroundBlur",max:20,min:0,step:1,label:l.default("背景图片模糊度")},{type:"range",name:"config.backgroundOpacity",max:10,min:0,step:1,label:l.default("背景图片透明度")}]},{type:"color",name:"config.backgroundColor",label:l.default("背景颜色(背景图片透明时可见)"),format:"rgba"}]},{type:"divider"},{type:"fieldset",collapsed:!0,title:l.default("页面宏定义变量"),collapsable:!0,headingClassName:"fieldset-title",controls:[{name:"config.macro",children:function(e){var t=e.onChange,o=e.value;return n.createElement("div",null,n.createElement("div",{className:"a-Form-label form-group--relative a-Form-item--inline w-full"},n.createElement("span",{className:"a-Form-label"},l.default("大屏宏定义变量（保存后生效）")),n.createElement("a",{className:"text-info form-item__tip top8",href:"/docs/DataBind-API-Macro#大屏、报表级别宏定义",target:"_blank"},l.default("文档说明"))),n.createElement(g.default,a.__assign({},{onChange:t,value:o},{chartFrontendId:m.hash,containerClassName:"form-group form-item",label:"",addTipText:l.default("新增宏定义变量"),cols:y})))}}]},{type:"divider"}],f.waterRemarkCtrl,[{type:"divider"},{type:"fieldset",collapsed:!0,title:l.default("过滤条件样式自定义"),collapsable:!0,headingClassName:"fieldset-title",controls:a.__spreadArrays([u.amisInlineSwitch("config.useLightConditions",l.default("过滤条件使用浅色主题"))],t.customConditionCtrl)},{type:"tpl",label:"",value:'<div class="help-block">'+l.default("大屏的删除、目录结构调整等，请在管理中心的『大屏管理』中进行！")+"</div>"}])}}})},i.displayName="DashboardCtrl",i=a.__decorate([o.observer],i)}(n.Component);t.default=C,t.customConditionCtrl=[u.amisInlineSwitch("config.openCustomCondition",l.default("开启过滤条件样式自定义")),{type:"group",controls:[{type:"color",name:"config.conBgColor",label:l.default("背景颜色"),format:"rgba",hiddenOn:"!config.openCustomCondition"},{type:"color",name:"config.conFontColor",label:l.default("字体颜色"),format:"rgba",hiddenOn:"!config.openCustomCondition"}]},{type:"group",controls:[{type:"color",name:"config.conActiveFontColor",label:l.default("高亮字体颜色"),format:"rgba",hiddenOn:"!config.openCustomCondition"},{type:"color",name:"config.conActiveBgColor",label:l.default("高亮背景颜色"),format:"rgba",hiddenOn:"!config.openCustomCondition"}]},{type:"color",name:"config.conBorderColor",label:l.default("边框颜色"),format:"rgba",hiddenOn:"!config.openCustomCondition"}]});
;sugar.define("sugar:widgets/conditions/condition-list-container/condition-list-container-ctrl.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.basicCtrl=void 0;var l=e("sugar:node_modules/tslib/tslib.js"),a=e("sugar:utils/i18n.ts"),o=e("sugar:node_modules/react/index.js"),n=e("sugar:widgets/amis-inline-switch.tsx"),i=e("sugar:widgets/ctrl-panel/common/switch-with-tip.tsx"),d=e("sugar:widgets/dashboard-ctrl-panel/dashboard-ctrl.tsx");t.basicCtrl=[{type:"text",name:"label",label:a.default("过滤条件名称")},{type:"button-group",name:"config.titleAlign",label:a.default("标题对齐"),labelClassName:"m-r-sm",options:[{label:a.default("左"),value:"left"},{label:a.default("中"),value:"center"},{label:a.default("右"),value:"right"}]},n.amisInlineSwitch("config.hideTitle",a.default("隐藏标题")),{type:"color",name:"config.conditionTitleColor",label:a.default("标题颜色"),format:"rgba"},{type:"color",name:"config.conditionTitleBgColor",label:a.default("标题背景颜色"),format:"rgba"},{type:"number",name:"config.conditionTitleFontSize",label:a.default("标题字号"),min:0,step:1},n.amisInlineSwitch("config.labelWide",a.default("过滤条件名称加宽")),n.amisInlineSwitch("config.conditionPanelMin",a.default("过滤条件默认收起"),"",void 0,a.default("浏览模式下生效")),{type:"range",name:"width",max:12,min:1,label:a.default("宽度")},{type:"number",name:"height",label:a.default("高度"),step:1,min:5},{type:"divider"},{type:"fieldset",collapsed:!0,title:a.default("过滤条件组样式自定义"),collapsable:!0,headingClassName:"fieldset-title",controls:[{name:"config.chartCustomStyle",children:function(e){var t=e.onChange,n=e.value;return o.createElement(i.default,l.__assign({},{onChange:t,value:n,label:a.default("开启过滤条件组自定义背景和边框"),tipText:a.default("文档说明"),tipLink:"/docs/Chart-Common#自定义过滤条件组的背景和边框等样式"}))}},{type:"group",hiddenOn:"!data.config.chartCustomStyle",controls:[{type:"color",name:"config.chartBackgroundColor",label:a.default("条件组背景颜色"),format:"rgba",size:"full"},{type:"number",name:"config.chartBorderRadius",min:0,step:1,label:a.default("条件组圆角"),size:"full"}]},{type:"group",hiddenOn:"!data.config.chartCustomStyle",controls:[{type:"number",label:a.default("条件组边框宽度"),name:"config.borderWidth",min:0,step:1,max:20},{type:"select",name:"config.chartBorderStyle",label:a.default("条件组边框样式"),options:[{label:a.default("实线"),value:"solid"},{label:a.default("点状"),value:"dotted"},{label:a.default("双线"),value:"double"},{label:a.default("虚线"),value:"dashed"}]}]},{type:"group",hiddenOn:"!data.config.chartCustomStyle",controls:[{type:"color",name:"config.borderColor",format:"rgba",label:a.default("条件组边框颜色")},{type:"number",label:a.default("条件组阴影宽度"),name:"config.shadowWidth",min:0,step:1,max:20}]},{type:"group",hiddenOn:"!data.config.chartCustomStyle",controls:[{type:"number",label:a.default("条件组阴影偏移"),name:"config.shadowOffset",min:0,step:1,max:20},{type:"color",name:"config.chartShadowColor",format:"rgba",label:a.default("条件组阴影颜色")}]},{type:"color",name:"config.conditionItemTitleColor",label:a.default("组内过滤条件标题颜色"),format:"rgba",hiddenOn:"!data.config.chartCustomStyle"}]},{type:"divider"},{type:"fieldset",collapsed:!0,title:a.default("过滤条件样式自定义"),collapsable:!0,headingClassName:"fieldset-title",controls:l.__spreadArrays([n.amisInlineSwitch("config.useConditionDarkTheme",a.default("过滤条件使用深色背景"))],d.customConditionCtrl)}]});
;sugar.define("sugar:widgets/conditions/condition-list-container/condition-list-container.tsx",function(o,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var e=o("sugar:node_modules/tslib/tslib.js"),r=o("sugar:utils/i18n.ts"),i=o("sugar:node_modules/react/index.js"),d=o("sugar:widgets/conditions/condition-manager.tsx"),a=o("sugar:stores/index.ts"),n=o("sugar:node_modules/amis/lib/index.js"),s=o("sugar:widgets/conditions/condition-list-container/condition-list-container-ctrl.tsx"),l=function(o){function t(){var t=null!==o&&o.apply(this,arguments)||this;return t.recordHeight=30,t.setActive=function(o,e){void 0===e&&(e=!1);var r=t.props;"editor"===r.mode&&r.setActive&&r.setActive(r.condition.frontendId),e||o.stopPropagation()},t.toggleBody=function(){var o=t.props;"editor"!==o.mode&&o.toggleBody&&o.toggleBody()},t}return e.__extends(t,o),t.prototype.componentWillMount=function(){this.recordHeight=this.props.condition.height},t.prototype.render=function(){var o=this.props,t=o.mode,e=o.deleteConditionList,d=o.condition,a=o.min,s=o.reportConfig,l=o.theme,c=d.config,h=c.titleAlign,u=c.conditionTitleColor,f=c.chartCustomStyle,g=c.conditionTitleBgColor,p=c.conditionTitleFontSize,b={color:"#555",paddingLeft:"editor"===t?41:8,textAlign:h||"left",fontSize:14},m={shadowOffset:0,shadowWidth:0,shadowColor:""},C={background:l.config.conditionBC||"#fff",borderWidth:1,borderStyle:"solid",borderColor:"#fff",borderRadius:2,color:"#555"},w={color:"#108cee"};s.reportCustomStyle&&(C.background=s.chartBackgroundColor||C.background,C.borderWidth=void 0!==s.borderWidth?s.borderWidth:0,C.borderStyle=s.chartBorderStyle||C.borderStyle,C.borderColor=s.borderColor||C.borderColor,C.borderRadius=void 0!==s.chartBorderRadius?s.chartBorderRadius:C.borderRadius,C.color=s.chartTitleColor||C.color,w.color=s.chartTitleColor||w.color,b.color=s.chartTitleColor||b.color,void 0!==s.chartTitleBgColor&&(b.background=s.chartTitleBgColor),b.fontSize=s.chartTitleFontSize||b.fontSize,m.shadowColor=s.shadowColor||m.shadowColor,m.shadowOffset=void 0!==s.shadowOffset?s.shadowOffset:m.shadowOffset,m.shadowWidth=void 0!==s.shadowWidth?s.shadowWidth:m.shadowWidth,C.boxShadow=m.shadowOffset+"px "+m.shadowOffset+"px "+m.shadowWidth+"px "+m.shadowColor);var v=d.config,y=v.chartBackgroundColor,W=v.borderWidth,S=v.borderColor,x=v.chartBorderRadius,k=v.chartShadowColor,_=v.shadowWidth,B=v.shadowOffset,O=v.chartBorderStyle;return f&&(C.background=y||C.background,C.borderWidth=void 0!==W?W:C.borderWidth,C.borderStyle=O||C.borderStyle,C.borderColor=S||C.borderColor,C.borderRadius=void 0!==x?x:C.borderRadius,m.shadowColor=k||m.shadowColor,m.shadowOffset=void 0!==B?B:m.shadowOffset,m.shadowWidth=void 0!==_?_:m.shadowWidth,C.boxShadow=m.shadowOffset+"px "+m.shadowOffset+"px "+m.shadowWidth+"px "+m.shadowColor),b.color=u||b.color,b.background=g||b.background,b.fontSize=p||b.fontSize,b.borderRadius=C.borderRadius+"px "+C.borderRadius+"px 0 0",i.createElement("div",{className:"condition-list",onClick:this.setActive,style:C},i.createElement("div",{className:"condition-list__header"},"editor"===t?[i.createElement(n.TooltipWrapper,{tooltip:r.default("删除"),placement:"top",key:"delete"},i.createElement("span",{className:"fa fa-times chart-item__button delete",onClick:e})),i.createElement(n.TooltipWrapper,{tooltip:r.default("移动图表"),placement:"top",key:"move"},i.createElement("span",{className:"fa fa-arrows-alt chart-item__button move"}))]:null,d.config.hideTitle?null:i.createElement("div",{className:"condition-list__title",style:b},d.label),"editor"!==t?i.createElement("div",{className:"pull-right shrink",key:"toggle",onClick:this.toggleBody},i.createElement("i",{className:"fa fa-angle-double-"+(a?"up":"down")})):null),this.props.children)},t.displayName="ConditionListContainer",t=e.__decorate([a.observer],t)}(i.Component);t.default=l,d.register({type:"container",name:r.default("过滤条件"),iconClassName:"condition-list-container",component:l,basicCtrl:s.basicCtrl})});
;sugar.define("sugar:widgets/conditions/date-time-range/date-time-range-ctrl.tsx",function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.advancedCtrl=e.dataBindCtrl=e.basicCtrl=void 0;var a=t("sugar:utils/i18n.ts"),d=t("sugar:widgets/conditions/date/date-limit-ctrl.tsx"),i=t("sugar:widgets/conditions/date/hot-key.tsx"),n=t("sugar:widgets/amis-inline-switch.tsx"),o=t("sugar:widgets/data-model/data-model-bind-chooser/data-model-bind-chooser.tsx"),l=t("sugar:widgets/data-model/data-model-condition-chart-chooser/data-model-condition-chart-chooser.tsx"),s=t("sugar:widgets/data-model/data-model-bind-chooser/data-model-bind-chooser-item.tsx"),c=t("sugar:utils/data-model-helper.ts"),r=t("sugar:widgets/ctrl-panel/condition-ctrl.tsx");e.basicCtrl=function(t){return[{type:"divider"},{type:"radios",name:"defaultVal",inline:!1,label:a.default("默认值"),options:[{label:a.default("无"),value:""},{label:a.default("近10分钟"),value:"10min"},{label:a.default("近1小时"),value:"1h"},{label:a.default("近3小时"),value:"3h"},{label:a.default("自定义"),value:"cus"}]},{type:"text",label:"",className:"p-l-md",placeholder:a.default("开始时间"),name:"config.cusDefaultValBegin",hiddenOn:"data.defaultVal != 'cus'"},{type:"text",label:a.default("至"),className:"p-l-md",placeholder:a.default("截止时间"),name:"config.cusDefaultValEnd",hiddenOn:"data.defaultVal != 'cus'",desc:"可输入正负数，如: -1 表示一分钟前，+1 表示一分钟后。{ZERO} 表示当天零点（注意有大括号），{ZERO+60} 表示当天零点后的60分钟；如果想定义绝对日期时间，请填写绝对日期时间，例如：2018-01-01 12:30:00"},{type:"divider"}].concat(d.dateLimitCtrl,r.dateCustomColorCtrl(!!t.condition.isDashCondition))},e.dataBindCtrl=function(t){var e=c.findUsingDataModelHashsInReport(t.chartList,t.conditionList);if(!e.size)return[];var d=["between","notBetween"],i=d.map(function(t){return{label:s.linkTypeMap.get(t),value:t}}),n=[o.getDataModelBindChooser({label:a.default("选择要过滤的数据模型"),config:{amisConfig:[{name:"linkType",label:a.default("请选择关联方式"),type:"radios",inline:!1,options:i}],initialStates:{linkType:"between"},conditionEntity:t.condition,supportFieldType:["date","datetime","timestamp"]}}),l.getConditionChartChooser({label:a.default("关联的图表"),name:"chartBind",config:{conditionEntity:t.condition,dataModelBindConfig:t.condition.dataConfig.dataModel?t.condition.dataConfig.dataModel.dataModelBind||[]:[]}}),l.getConditionChartChooser({label:a.default("关联依赖本条件的过滤条件"),name:"conditionBind",config:{mode:"condition",conditionEntity:t.condition,dataModelBindConfig:t.condition.dataConfig.dataModel?t.condition.dataConfig.dataModel.dataModelBind||[]:[]}})];return n},e.advancedCtrl=i.getHotKeyCtrl("dateTimeRange").concat([{type:"divider"},n.amisInlineSwitch("config.inSameDay",a.default("起止时间同一天")),{type:"number",label:a.default("时间最大跨度"),placeholder:a.default("默认不限制"),name:"config.timeRangeLimit",desc:a.default("例如起止时间跨度不可超过30分钟，请填写30，默认不做限制"),resetValue:""}])});
;sugar.define("sugar:widgets/conditions/date-time-range/style.tsx",function(t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var e=t("sugar:node_modules/tinycolor2/tinycolor.js"),o=t("sugar:sites/sugar-cxd.ts"),d=o.appTheme.classnames;r.default={background:function(t,r,o){return void 0===r&&(r=""),void 0===o&&(o=""),[[[" .rdt .rdtPicker td.rdtDay","."+d("PopOver")," ."+d("CalendarInput")," .rdtYear.rdtDisabled > span"," td.rdtMonth.rdtDisabled > span"],{background:t}],[[" ."+d("DateRangePicker")],{background:r||t}],[[" ."+d("DateRangePicker")+":not(.is-disabled):hover"],{background:o||e(t).setAlpha(.8).toString()}],[[" ."+d("Button--default")],{background:e(t).isLight()?"#fff":"#333",color:e(t).isLight()?"#000":"#fff","border-color":e(t).isLight()?"#ccc":"#555"}]]},fontColor:function(t){return[[[" .rdtSwitch"," .rdtPrev"," .rdtNext"," td.rdtDay"," .rdtYears .rdtYear"," ."+d("DateRangePicker")," ."+d("DateRangePicker-placeholder")," ."+d("DateRangePicker-toggler")," ."+d("DateRangePicker")+":not(.is-disabled):hover ."+d("DateRangePicker-toggler")," .rdt tfoot td span"," .rdtMonths .rdtMonth"],{color:t}],[[" ."+d("DateRangePicker-toggler")+":hover"," .rdt .rdtPicker .dow"],{color:e(t).setAlpha(.9).toString()}],[[" ."+d("DateRangePicker-clear")+" svg"],{fill:t}],[[" ."+d("DateRangePicker-clear")+":hover svg"],{fill:e(t).setAlpha(.9).toString()}],[[" ."+d("DateRangePicker-placeholder")," .rdtPicker td.rdtOld"," .rdtPicker td.rdtNew"," .rdtYear.rdtDisabled > span"],{color:e(t).setAlpha(.6).toString()}]]},borderColor:function(t){return[[[" ."+d("DateRangePicker")+":not(.is-disabled):hover"],{"border-color":e(t).setAlpha(.8).toString()}],[[" ."+d("DateRangePicker")," ."+d("CalendarInput"),"."+d("PopOver")],{"border-color":t}]]},activeBgColor:function(t){return[[[" ."+d("DateRangePicker-ranger")+" a"," ."+d("CalendarInput")],{color:t}],[[" .rdt .rdtPicker td.rdtToday:before"],{"border-bottom-color":t}],[[" .rdt .rdtPicker td.rdtBetween"],{background:e(t).setAlpha(.1).toString()}],[[" .rdt .rdtPicker td.rdtActive"," .rdt .rdtPicker td.rdtActive:hover"," .rdtBtnConfirm"," .rdt .rdtPicker td.rdtDay:hover"," td.rdtYear.rdtActive > span"," .rdtYears .rdtYear:hover > span"," td.rdtMonth.rdtActive > span"," .rdtMonths .rdtMonth:hover > span"," ."+d("Button--primary")+":not(:disabled):not(.is-disabled):hover"],{background:t}],[[" ."+d("Button--primary")+".is-disabled"],{background:e(t).setAlpha(.6).toString(),"border-color":e(t).setAlpha(.8).toString()}],[[" ."+d("Button--primary")],{background:t,"border-color":e(t).setAlpha(.8).toString()}],[[" ."+d("Button")+":hover"],{"text-decoration":"underline"}]]},activeFontColor:function(t){return[[[" ."+d("Button--primary")+".is-disabled"," ."+d("Button--primary")+":not(:disabled):not(.is-disabled):hover"],{color:e(t).setAlpha(.6).toString()}],[[" ."+d("Button--primary")],{color:t}],[[" .rdtPicker td.rdtActive"," .rdtPicker td.rdtActive:hover"," .rdtBtnConfirm"," .rdt .rdtPicker td.rdtDay:hover"," td.rdtYear.rdtActive > span"," td.rdtMonth.rdtActive > span"," .rdtMonths .rdtMonth:hover > span"],{color:t}]]},fontSize:function(t,r){void 0===t&&(t=16);var e=+(t/14).toFixed(2);return[[[" ."+d("DateRangePicker")," ."+d("DateRangePicker-placeholder")," ."+d("DateRangePicker-toggler")],{"font-size":t+"px"}],[[" ."+d("DateRangePicker")],{height:(30*e).toFixed(2)+"px",display:"flex","align-items":"center"}],[["."+d("PopOver")],{width:(524*e+2).toFixed(2)+"px",height:((r?343:322)*e+2).toFixed(2)+"px"}],[[" ."+d("DateRangePicker-wrap")],{transform:"scale("+e+")","transform-origin":"0 0",width:"526px"}],[[" ."+d("DateRangePicker-clear")+" svg"],{width:10*e+"px",height:10*e+"px","margin-right":3*(e-1)+"px"}],[[" ."+d("DateRangePicker-toggler")],{"margin-right":(3*e).toFixed(2)+"px"}]]}}});
;sugar.define("sugar:widgets/conditions/date-time-range/date-time-range.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setDateTimeRangeDefaultColor=void 0;var a=e("sugar:node_modules/tslib/tslib.js"),n=e("sugar:utils/i18n.ts"),o=e("sugar:node_modules/react/index.js"),i=e("sugar:widgets/conditions/condition-manager.tsx"),r=e("sugar:stores/index.ts"),s=e("sugar:utils/date-helper.ts"),d=e("sugar:widgets/conditions/date-time-range/date-time-range-ctrl.tsx"),l=e("sugar:node_modules/moment/moment.js"),u=e("sugar:node_modules/amis/lib/components/DateRangePicker.js"),m=e("sugar:sites/sugar-cxd.ts"),g=e("sugar:utils/condition-helper.ts"),c=e("sugar:widgets/conditions/date-time-range/style.tsx"),f=(m.appTheme.classnames,[{name:n.default("近10分钟"),value:{start:10,end:0}},{name:n.default("近1h"),value:{start:60,end:0}}]),D=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.componentWillMount=function(){this.handleDateChange=this.handleDateChange.bind(this),this.handleChange=this.handleChange.bind(this)},t.prototype.handleDateChange=function(e){return e||this.handleChange({startDate:void 0,endDate:void 0}),"string"==typeof e&&(e=e.split(",")),this.handleChange({startDate:e[0],endDate:e[1]})},t.prototype.formatValue=function(e){return"string"!=typeof e?l(e).format("X"):e},t.prototype.handleChange=function(e){this.props.handleChange(e)},t.prototype.render=function(){var e=this.props,t=e.hub,a=e.condition,i=e.disabled,r=e.container,d=e.conditionConfig,m=t.value.value,c=a.config,D=c.range,h=c.rangeCusBegin,p=c.rangeCusEnd,v=s.getDateLimitByRange(D,h,p),C=s.getShortcutByHotKey("dateTimeRange",f);a.config.openHotKeys&&(C=s.getShortcutByHotKey("dateTimeRange",a.config.hotKeys||[]));var $=a.type+"-"+d.hash+" condition_"+a.frontendId;return g.insertRule("."+a.type+"-"+d.hash+".condition_"+a.frontendId,y(this.props)),o.createElement("div",{className:"col-xs-12 "+$},o.createElement(u.default,{className:"condition__form-item",popoverClassName:$,value:m&&m.startDate?this.formatValue(m.startDate)+","+this.formatValue(m.endDate):"",onChange:this.handleDateChange,mode:"date",clearable:!0,inputFormat:"YYYY-MM-DD HH:mm:ss",timeFormat:"HH:mm:ss",disabled:i,ranges:C,minDate:v.minDate?l(v.minDate):void 0,maxDate:v.maxDate?l(v.maxDate):void 0,popOverContainer:r?function(){return r}:null,placeholder:n.default("请选择时间范围"),locale:n.lang,overlayPlacement:g.getPlacement(this.props,530,345)}))},t.displayName="DateTimeRangeCondition",t=a.__decorate([r.observer],t)}(o.Component);t.default=D;var h=function(e,t){void 0===e&&(e="");var a=s.getDateTimeRangeByDefaultVal(e,t.cusDefaultValBegin||"0",t.cusDefaultValEnd||"0");return{startDate:a.minDate?l(a.minDate).format("X"):void 0,endDate:a.maxDate?l(a.maxDate).format("X"):void 0}},p=function(e){var t=l(e.startDate,"X").toDate(),a=l(e.endDate,"X").toDate();return!e||isNaN(t.getTime())||isNaN(a.getTime())?void 0:s.formatDate(t,"$1-$2-$3 $4:$5:$6")+","+s.formatDate(a,"$1-$2-$3 $4:$5:$6")},v=function(e){var t=l(e.startDate,"X").toDate(),a=l(e.endDate,"X").toDate();return!e||isNaN(t.getTime())||isNaN(a.getTime())?"":s.formatDate(t,"$1-$2-$3 $4:$5:$6")+"--"+s.formatDate(a,"$1-$2-$3 $4:$5:$6")},C=function(e,t){var a=t.timeRangeLimit;if(e.startDate&&e.endDate){var o=l(e.startDate,"X").toDate(),i=l(e.endDate,"X").toDate();if(o.setSeconds(0,0),i.setSeconds(0,0),+o-+i>0)return n.default("起始时间不应该大于结束时间");if(0!==parseInt(a,10)&&+i-+o>=6e4*(a+1))return n.default("起止时间跨度大于约定值「"+a+"」分钟");if(t.inSameDay&&(o.setHours(0,0,0,0),i.setHours(0,0,0,0),+o-+i!==0))return n.default("起止时间必须在同一天")}return!0};t.setDateTimeRangeDefaultColor=function(e,t){var a=g.getCommonColor(e,!!t.isDashCondition);return g.getStyleOptions(["backgroundDefault","fontColor","borderColor","activeBgColor","activeFontColor"],c.default,a,t)};var y=function(e){var t=e.condition,a=e.condition.config,n=g.getStyleOptions(["background","fontSizeRange","borderColor","fontColor","activeFontColor","activeBgColor"],c.default,a,t);return n};i.register({type:"dateTimeRange",name:n.default("日期时间范围"),iconClassName:"condition-date-time-range",canHalfWidth:!0,component:D,defaultValOrUrlVal2view:h,view2value:p,view2Display:v,validate:C,basicCtrl:d.basicCtrl,advancedCtrl:d.advancedCtrl,dataBindCtrl:d.dataBindCtrl,dataModelLinkType:"between",initialDashboardState:{width:420,height:100}})});
;sugar.define("sugar:widgets/conditions/date-time-granularity/date-time-granularity-ctrl.tsx",function(a,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.dataBindCtrl=void 0;var t=a("sugar:utils/i18n.ts"),l=a("sugar:node_modules/react/index.js"),d=a("sugar:widgets/data-model/data-model-bind-chooser/data-model-bind-chooser.tsx"),n=a("sugar:widgets/data-model/data-model-condition-chart-chooser/data-model-condition-chart-chooser.tsx"),i=a("sugar:widgets/data-model/data-model-bind-chooser/data-model-bind-chooser-item.tsx"),o=a("sugar:utils/data-model-helper.ts"),u=a("sugar:widgets/ctrl-panel/data-bind-ctrl/index.tsx"),s=a("sugar:widgets/handsontable.tsx"),r=[{label:t.default("秒"),value:"1s"},{label:t.default("5秒"),value:"5s"},{label:t.default("10秒"),value:"10s"},{label:t.default("30秒"),value:"30s"},{label:t.default("分钟"),value:"1i"},{label:t.default("5分钟"),value:"5i"},{label:t.default("10分钟"),value:"10i"},{label:t.default("30分钟"),value:"30i"},{label:t.default("小时"),value:"1h"},{label:t.default("3小时"),value:"3h"},{label:t.default("6小时"),value:"6h"},{label:t.default("9小时"),value:"9h"},{label:t.default("12小时"),value:"12h"},{label:t.default("天"),value:"1d"},{label:t.default("3天"),value:"3d"},{label:t.default("7天"),value:"7d"},{label:t.default("14天"),value:"14d"},{label:t.default("周"),value:"1w"},{label:t.default("月"),value:"1m"},{label:t.default("3月"),value:"3m"},{label:t.default("6月"),value:"6m"},{label:t.default("季度"),value:"1q"},{label:t.default("年"),value:"1y"}];e.dataBindCtrl=function(a){var e=u.getDebugAndRefreshBtn({loadData:a.condition.loadData,loadDebugData:a.condition.loadDebugData,dataType:a.condition.dataType,refreshText:t.default("刷新条件")}),f=[{name:"dataConfig.dateGranularityConfig.type",label:t.default("选择时间粒度范围"),type:"select",placeholder:t.default("请选择"),clearable:!0,options:[{label:t.default("时间粒度"),value:"default"},{label:t.default("自定义"),value:"gran_custom"}]},{label:"",name:"dataConfig.dateGranularityConfig.options",visibleOn:"dataConfig.dateGranularityConfig.type === 'default'",type:"checkboxes",columnsCount:3,joinValues:!1,options:r},{name:"dataConfig.data",visibleOn:"dataConfig.dateGranularityConfig.type === 'gran_custom'",children:function(a){var e=a.onChange,d=a.value;return l.createElement(s.default,{className:"m-b-md",value:d,onChange:e,needExcel:!0,columnLength:2,extraHeaders:[["名称","取值"]],label:t.default("手动录入或从Excel中导入数据 注: 输入数据默认单位为ms，可以输入带有单位的数据(秒: s, 分钟: i, 小时: h, 天: d, 周: w, 月: m, 季度: q, 年: y), eg: 1d"),setting:{minCols:2,stretchH:"all"}})}}];"gran_custom"===a.condition.dataConfig.dateGranularityConfig.type&&(f=f.concat(e));var c=o.findUsingDataModelHashsInReport(a.chartList,a.conditionList);if(c.size){var g=["="],b=g.map(function(a){return{label:i.linkTypeMap.get(a),value:a}});f=f.concat([d.getDataModelBindChooser({label:t.default("选择要过滤的数据模型"),config:{amisConfig:[{name:"linkType",label:t.default("请选择关联方式"),type:"radios",inline:!1,options:b}],initialStates:{linkType:"="},conditionEntity:a.condition,supportFieldType:["date","datetime","timestamp"]}}),n.getConditionChartChooser({label:t.default("关联的图表"),name:"chartBind",config:{conditionEntity:a.condition,dataModelBindConfig:a.condition.dataConfig.dataModel?a.condition.dataConfig.dataModel.dataModelBind||[]:[]}}),n.getConditionChartChooser({label:t.default("关联依赖本条件的过滤条件"),name:"conditionBind",config:{mode:"condition",conditionEntity:a.condition,dataModelBindConfig:a.condition.dataConfig.dataModel?a.condition.dataConfig.dataModel.dataModelBind||[]:[]}})])}return f}});
;sugar.define("sugar:widgets/conditions/date-time-granularity/date-time-granularity.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=e("sugar:node_modules/tslib/tslib.js"),n=e("sugar:utils/i18n.ts"),i=e("sugar:node_modules/react/index.js"),l=e("sugar:widgets/conditions/condition-manager.tsx"),s=e("sugar:stores/index.ts"),r=e("sugar:widgets/conditions/date-time-granularity/date-time-granularity-ctrl.tsx"),o=e("sugar:widgets/conditions/select/select-ctrl.tsx"),d=e("sugar:widgets/conditions/select/select.tsx"),u=e("sugar:widgets/conditions/select/list.tsx"),c=e("sugar:node_modules/amis/lib/components/Select.js"),p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.sliderIntervalEvent="",t.slideIndex=0,t}return a.__extends(t,e),t.prototype.componentWillMount=function(){this.handleChange=this.handleChange.bind(this),this.props.condition.loadData(this.props.mode,!0)},t.prototype.handleChange=function(e,t){var a=this;if(void 0==t){var n=this.props.hub.data;if(!n||!n.data||!n.data.length)return;var i=n.data.map(function(e){return d.processLabelAndValue(e)});i.some(function(t,n){return t.value===e&&(a.slideIndex=n),t.value===e})}else this.slideIndex=t;this.props.handleChange(e)},t.prototype.componentWillUnmount=function(){this.sliderIntervalEvent&&clearInterval(this.sliderIntervalEvent)},t.prototype.render=function(){var e=this,t=this.props,a=(t.mode,t.disabled),l=t.hub,s=t.condition,r=t.container,o=t.handleChange,p=t.condition.dataConfig.dateGranularityConfig,g=l.data,h=l.value.value,v=null;this.sliderIntervalEvent&&clearInterval(this.sliderIntervalEvent);var f=p.options||[];"gran_custom"===p.type&&(f=g.data&&g.data.map(function(e){return d.processLabelAndValue(e)}));var m=s.config,y=m.slideShow,C=m.slideInterval;return y&&(this.sliderIntervalEvent=setInterval(function(){var t=(e.slideIndex+1)%f.length;e.handleChange(f[t].value,t)},C||2e3)),d.setColor(this.props),v=g.data?"list"!==s.config.uiMode||s.halfWidth?i.createElement(c.default,{className:"condition__form-item",popoverClassName:"condition_"+s.frontendId,searchable:g.data&&g.data.length>=10,simpleValue:!0,disabled:!!a,value:h,clearable:!0,options:f,onChange:function(e){return o(e)},locale:n.lang,placeholder:n.default("请选择"),popOverContainer:r?function(){return r}:null}):i.createElement(u.default,{disabled:a,data:g,value:h,onChange:function(e){return o(e)}}):i.createElement("div",{className:"no-data"},n.default("请绑定数据")),i.createElement("div",{className:"col-xs-12 condition_"+s.frontendId},v)},t.displayName="DateTimeGranularityCondition",t=a.__decorate([s.observer],t)}(i.Component);t.default=p,l.register({type:"dateTimeGranularity",name:n.default("时间粒度"),iconClassName:"condition-date-time-granularity",component:p,canHalfWidth:!0,defaultValOrUrlVal2view:d.defaultValOrUrlVal2view,view2Display:d.view2Display,initialState:{defaultVal:"__showx_default_value_first",dataType:"static",config:{uiMode:"select"},dataConfig:{dateGranularityConfig:{type:"default",options:[]}}},basicCtrl:o.basicCtrl,dataBindCtrl:r.dataBindCtrl,dataModelBindMonitorField:"value"})});
;sugar.define("sugar:widgets/conditions/date-time-line/date-time-line-ctrl.tsx",function(e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.advancedCtrl=a.dataBindCtrl=a.basicCtrl=void 0;var t=e("sugar:node_modules/tslib/tslib.js"),l=e("sugar:utils/i18n.ts"),o=e("sugar:node_modules/react/index.js"),n=e("sugar:widgets/ctrl-panel/data-bind-ctrl/index.tsx"),d=e("sugar:widgets/ctrl-panel/condition/condition-dependence-ctrl.tsx"),i=e("sugar:widgets/data-model/data-model-field-holder/data-model-field-holder.tsx"),s=e("sugar:widgets/data-model/data-model-bind-chooser/data-model-bind-chooser.tsx"),c=e("sugar:widgets/amis-inline-switch.tsx"),r=e("sugar:widgets/data-model/data-model-condition-chart-chooser/data-model-condition-chart-chooser.tsx"),f=e("sugar:widgets/data-model/data-model-bind-chooser/data-model-bind-chooser-item.tsx"),u=e("sugar:utils/data-model-helper.ts"),m=e("sugar:widgets/dashboard-ctrl-panel/chart-ctrl.tsx");a.basicCtrl=[],a.dataBindCtrl=function(e){var a=n.getDebugAndRefreshBtn({loadData:e.condition.loadData,loadDebugData:e.condition.loadDebugData,dataType:e.condition.dataType,refreshText:l.default("刷新条件")}),c=n.getDataBindCommon({frontendId:e.condition.frontendId,dataTypeOptions:["dataModel","api","static","sql"],api:{demoUrl:"/openapi/demo/condition?type=select"},"static":{columnLength:1,headers:[["取值"]]},sql:{hideExemption:!0}}),m=e.condition.dataModelHash||"",g=e.sqlModelStore.detailMap.mapByHash.get(e.condition.dataModelHash||""),p=n.generateSQLFieldList(g),b=[i.getDataModelFieldHolder({name:"value",label:l.default("取值字段"),config:{dataModelHash:m,holderId:e.condition.frontendId+"-value",maxCount:1,onlyDimension:!0}}),n.commonFilterForDataModel(m),n.commonBindUrlParamForDataModel(m),n.commonLimitForDataModel,{type:"select",name:"dataConfig.sqlValueField",hiddenOn:"data.dataType != 'sql'",label:l.default("取值字段"),placeholder:l.default("请选择"),clearable:!0,options:p}];b=b.concat(a);var h=u.findUsingDataModelHashsInReport(e.chartList,e.conditionList);if(h.size){var y=["=","!=","like","begin","end"],v=y.map(function(e){return{label:f.linkTypeMap.get(e),value:e}});b=b.concat([s.getDataModelBindChooser({label:l.default("选择要过滤的数据模型"),config:{amisConfig:[{name:"linkType",label:l.default("请选择关联方式"),type:"radios",inline:!1,options:v}],initialStates:{linkType:"="},conditionEntity:e.condition}}),r.getConditionChartChooser({label:l.default("关联的图表"),name:"chartBind",config:{conditionEntity:e.condition,dataModelBindConfig:e.condition.dataConfig.dataModel?e.condition.dataConfig.dataModel.dataModelBind||[]:[]}}),r.getConditionChartChooser({label:l.default("关联依赖本条件的过滤条件"),name:"conditionBind",config:{mode:"condition",conditionEntity:e.condition,dataModelBindConfig:e.condition.dataConfig.dataModel?e.condition.dataConfig.dataModel.dataModelBind||[]:[]}})])}return b=b.concat([{name:"config.dependences",hiddenOn:"data.dataType != 'sql' && data.dataType != 'api' && data.dataType != 'dataModel'",children:function(a){var l=a.onChange,n=a.value;return o.createElement(d.default,t.__assign({},{onChange:l,value:n,conditionSelfKey:e.condition.key}))}}]),c.concat(b)},a.advancedCtrl=[{type:"select",name:"config.axisType",label:l.default("轴类型"),placeholder:l.default("请选择"),options:[{label:l.default("数值轴"),value:"value"},{label:l.default("类目轴"),value:"category"}]},c.amisInlineSwitch("config.autoPlay",l.default("自动播放")),c.amisInlineSwitch("config.inverse",l.default("反方向放置")),{type:"number",name:"config.playInterval",label:l.default("播放间隔"),step:1,min:m.autoRefreshMinInterval,placeholder:l.default("自动")},{type:"color",name:"config.normalColor",value:"#999",label:l.default("标签颜色")},{type:"color",name:"config.emphasisColor",value:"#23b7e5",label:l.default("标签高亮颜色")},{type:"color",name:"config.lineStyleColor",value:"#555",label:l.default("线条颜色")},{type:"number",name:"config.labelFontSize",label:l.default("文本字体大小"),step:1,min:10},{type:"fieldset",title:l.default("位置设置"),collapsable:!0,collapsed:!0,headingClassName:"fieldset-title",controls:[{type:"number",name:"config.top",label:l.default("顶部距离"),step:1,min:0},{type:"number",name:"config.bottom",label:l.default("底部距离"),step:1,min:0},{type:"number",name:"config.left",label:l.default("左侧距离"),step:1,min:0},{type:"number",name:"config.right",label:l.default("右侧距离"),step:1,min:0}]},{type:"fieldset",title:l.default("标记设置"),collapsable:!0,collapsed:!0,headingClassName:"fieldset-title",controls:[{type:"select",name:"config.symbol",label:l.default("标记图形"),placeholder:l.default("请选择"),options:[{label:l.default("圆形"),value:"circle"},{label:l.default("矩形"),value:"rect"},{label:l.default("圆角矩形"),value:"roundRect"},{label:l.default("三角形"),value:"triangle"},{label:l.default("菱形"),value:"diamond"},{label:l.default("标记"),value:"pin"},{label:l.default("箭头"),value:"arrow"},{label:l.default("无"),value:"none"}]},{type:"color",name:"config.symbolColor",value:"#fff",label:l.default("标记图形颜色")},{type:"color",name:"config.symbolBorderColor",value:"#fff",label:l.default("标记图形边框颜色")}]},{type:"fieldset",title:l.default("控制按钮设置"),collapsable:!0,collapsed:!0,headingClassName:"fieldset-title",controls:[c.amisInlineSwitch("config.showNextBtn",l.default("前进按钮")),c.amisInlineSwitch("config.showPrevBtn",l.default("后退按钮")),c.amisInlineSwitch("config.showPlayBtn",l.default("播放按钮")),{type:"color",name:"config.controlStyleColor",value:"#fff",label:l.default("控制按钮颜色")},{type:"color",name:"config.controlStyleBorderColor",value:"#fff",label:l.default("控制按钮边框颜色")}]}]});
;sugar.define("sugar:widgets/conditions/_mixin/echarts.tsx",function(i,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var e=i("sugar:utils/i18n.ts"),s=i("sugar:node_modules/react/index.js"),n=i("sugar:node_modules/echarts/dist/echarts.js"),o=i("sugar:node_modules/react-dom/index.js"),a=i("sugar:node_modules/lodash/debounce.js"),h=i("sugar:node_modules/lodash/isEqual.js"),d=i("sugar:utils/resize-sensor.ts"),r=i("sugar:node_modules/amis/lib/index.js"),l={componentWillMount:function(){var i,t;null===(i=this.props)||void 0===i?void 0:i.condition.loadData(null===(t=this.props)||void 0===t?void 0:t.mode,!0),this._refresh=this._refresh.bind(this),this._initChart=this._initChart.bind(this),this._disposeChart=this._disposeChart.bind(this),this._resize=this._resize.bind(this),this._initResizeSensor=this._initResizeSensor.bind(this)},componentDidMount:function(){"pending"!==this.props.hub.data.loadState&&this._refresh(this.props)},componentWillReceiveProps:function(i){var t;(!h(i.condition.config,this.cacheConditionConfig)||i.hub.data&&(null===(t=i.hub.data.data)||void 0===t?void 0:t.length)&&!h(i.hub.data.data,this.cacheConditionData))&&(this.cacheConditionData=i.hub.data.data,this.cacheConditionConfig=i.condition.config,this._refresh(i))},componentWillUnmount:function(){this._disposeChart(),this.unWatchResize&&this.unWatchResize(),this.willUnmount&&this.willUnmount.call(this)},_initChart:function(){var i=o.findDOMNode(this.refs.conditionEchart);this.chart=n.init(i),this._initResizeSensor(),this.chartChange()},_disposeChart:function(){try{var i=this.chart;i&&i.clear&&i.clear(),i&&i.dispose&&i.dispose(),this.chart=null}catch(t){console&&console.log(t.message||e.default("echarts销毁出错！")),this.chart=null}},_initResizeSensor:function(){this.unWatchResize&&this.unWatchResize();var i=o.findDOMNode(this.refs.conditionEchart);this.unWatchResize=d.resizeSensor(i,a(this._resize,250))},_refresh:function(i){this.chart||(this._disposeChart(),this._initChart(i)),this.refresh(i)},_resize:function(){try{this.chart&&this.chart.resize&&this.chart.resize()}catch(i){console&&console.log(i.message||e.default("echarts resize出错！"))}},render:function(){var i,t,n=null===(i=this.props)||void 0===i?void 0:i.hub.data,o=null;return"pending"===(null===n||void 0===n?void 0:n.loadState)?o=s.createElement("div",{className:"loading-container"},s.createElement(r.Spinner,{overlay:!0})):(null===n||void 0===n?void 0:n.data)?"error"!==(null===n||void 0===n?void 0:n.loadState)&&(null===n||void 0===n?void 0:n.data)&&(null===(t=null===n||void 0===n?void 0:n.data)||void 0===t?void 0:t.length)||(o=s.createElement("div",{className:"no-data"},e.default("无数据"))):o=s.createElement("div",{className:"no-data"},e.default("请绑定数据")),s.createElement("div",{className:"col-xs-12",style:{width:"100%",height:60}},o,s.createElement("div",{ref:"conditionEchart",style:{width:"100%",height:"100%"}}))}};t.default=l});
;sugar.define("sugar:widgets/conditions/_hoc/echarts.tsx",function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=t("sugar:node_modules/tslib/tslib.js"),s=t("sugar:node_modules/react/index.js"),r=t("sugar:stores/index.ts");e.default=function(t){var e;return r.observer((e=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(r,e),r.prototype.render=function(){var e=this.props,r=e.hub,o=e.condition,i=r.data;return s.createElement(t,n.__assign({},this.props,{conditionData:i&&i.data,conditionConfig:o.config}))},r}(s.Component),e.displayName="EchartsHOC",e))}});
;sugar.define("sugar:widgets/conditions/date-time-line/date-time-line.tsx",function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.defaultValOrUrlVal2view=void 0;var o=t("sugar:node_modules/tslib/tslib.js"),a=t("sugar:utils/i18n.ts"),l=t("sugar:node_modules/react/index.js"),n=t("sugar:widgets/conditions/condition-manager.tsx"),i=t("sugar:widgets/conditions/date-time-line/date-time-line-ctrl.tsx"),r=t("sugar:widgets/conditions/_hoc/debug/debug.tsx"),d=t("sugar:node_modules/react-mixin/index.js"),s=t("sugar:widgets/conditions/_mixin/echarts.tsx"),u=t("sugar:widgets/conditions/_hoc/echarts.tsx"),c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.cacheConditionData=[],e}return o.__extends(e,t),e.prototype.chartChange=function(){var t=this;this.chart&&this.chart.on("timelinechanged",function(e){var o=t.props,a=o.hub.data,l=o.handleChange,n=a.data&&a.data[e.currentIndex];l(n.label,!0)})},e.prototype.refresh=function(t){var e=t.hub.data,o=t.condition.config,a=this.chart,l={baseOption:{timeline:{axisType:o.axisType,orient:"horizontal",autoPlay:o.autoPlay,inverse:o.inverse,playInterval:1e3*o.playInterval,left:o.left,right:o.right,top:o.top,bottom:o.bottom,width:null,height:null,label:{color:o.normalColor,fontSize:o.labelFontSize},symbol:o.symbol,lineStyle:{color:o.lineStyleColor},checkpointStyle:{color:o.symbolColor,borderColor:o.symbolBorderColor,borderWidth:2},controlStyle:{showNextBtn:o.showNextBtn,showPrevBtn:o.showPrevBtn,showPlayBtn:o.showPlayBtn,color:o.controlStyleColor,borderColor:o.controlStyleBorderColor},emphasis:{label:{color:o.emphasisColor},controlStyle:{color:"#aaa",borderColor:"#aaa"}},data:[]}}};e.data&&e.data.length&&(e.data.forEach(function(t){l.baseOption.timeline.data.push(t.label)}),a.setOption(l,!0))},e.displayName="TimeLineCondition",e=o.__decorate([r.default,u.default,d.decorate(s.default)],e)}(l.Component);e.default=c,e.defaultValOrUrlVal2view=function(t,e,o,a,l){var n,i;return void 0===t&&(t=null),void 0===l&&(l=!1),l&&null!=a&&(t=a),o&&"done"===o.loadState&&o.data&&o.data.length&&"done"===(null===o||void 0===o?void 0:o.loadState)&&(null===(n=null===o||void 0===o?void 0:o.data)||void 0===n?void 0:n.length)&&"string"==typeof t&&/^__showx_default_value_/.test(t)?null===(i=null===o||void 0===o?void 0:o.data[0])||void 0===i?void 0:i.value:t};var h=function(t){var e=t.dataConfig.dataModel,o=(e.name,e.value),a=void 0===o?[]:o;return a.length?!0:!1};n.register({type:"dateTimeLine",name:a.default("时间轴"),iconClassName:"condition-date-time-line",component:c,canHalfWidth:!0,defaultValOrUrlVal2view:e.defaultValOrUrlVal2view,initialState:{defaultVal:"__showx_default_value_first",dataType:"static",config:{axisType:"category",autoPlay:!0,inverse:!1,playInterval:10,symbol:"circle",symbolColor:"#bbb",symbolBorderColor:"#777",lineStyleColor:"#555",labelFontSize:12,emphasisColor:"#23b7e5",normalColor:"#999",showNextBtn:!0,showPrevBtn:!1,showPlayBtn:!0,controlStyleColor:"#666",controlStyleBorderColor:"#666",left:30,right:30,top:8,bottom:0}},basicCtrl:i.basicCtrl,dataBindCtrl:i.dataBindCtrl,advancedCtrl:i.advancedCtrl,dataModelBindMonitorField:"value",dataModelPanelShow:[["dataType","dataModel"]],needDashboardAutoFresh:!0,loadDataWhenDataModelConfigChange:h})});
;sugar.define("sugar:widgets/conditions/register-condition.ts",function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),t("sugar:widgets/conditions/select/select.tsx"),t("sugar:widgets/conditions/date/date.tsx"),t("sugar:widgets/conditions/date-range/date-range.tsx"),t("sugar:widgets/conditions/multi-select/multi-select.tsx"),t("sugar:widgets/conditions/tree-select/tree-select.tsx"),t("sugar:widgets/conditions/text/text.tsx"),t("sugar:widgets/conditions/logic/logic.tsx"),t("sugar:widgets/conditions/date-time/date-time.tsx"),t("sugar:widgets/conditions/condition-list-container/condition-list-container.tsx"),t("sugar:widgets/conditions/date-time-range/date-time-range.tsx"),t("sugar:widgets/conditions/date-time-granularity/date-time-granularity.tsx"),t("sugar:widgets/conditions/date-time-line/date-time-line.tsx")});
;sugar.define("sugar:widgets/charts/smart-chart/smart-chart-ctrl.tsx",function(a,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.dataBindCtrl=e.basicCtrl=e.chartEigens=void 0;var t=a("sugar:node_modules/tslib/tslib.js"),l=a("sugar:utils/i18n.ts"),n=a("sugar:widgets/ctrl-panel/data-bind-ctrl/index.tsx"),o=a("sugar:widgets/amis-inline-switch.tsx"),r=a("sugar:widgets/data-model/data-model-field-holder/data-model-field-holder.tsx");e.chartEigens=[{field:[{name:"x-smart",type:"a",minCount:0,maxCount:10,canRepeat:!0},{name:"y-smart",type:"a",minCount:0,maxCount:10,canRepeat:!0},{name:"value-smart",type:"a",minCount:0,maxCount:10,canRepeat:!0},{name:"color-smart",type:"a",minCount:0,maxCount:10,canRepeat:!0},{name:"size-smart",type:"m",minCount:0,maxCount:10,canRepeat:!0},{name:"name-smart",type:"d",minCount:0,maxCount:10}],noRecommend:!0}],e.basicCtrl=function(a){return a.chart.isDashChart?[o.amisInlineSwitch("config.smartChart.onlyShowOnAsk",l.default("只在提问时展示图表（浏览模式下生效）")),{type:"color",format:"rgba",name:"config.smartChart.dialogBackgroundColor",label:l.default("弹窗背景色"),visibleOn:"config.smartChart.onlyShowOnAsk"},{type:"select",name:"config.smartChart.dialogSize",label:l.default("弹窗尺寸"),visibleOn:"config.smartChart.onlyShowOnAsk",value:"full",options:[{label:l.default("小"),value:"xs"},{label:l.default("标准"),value:"md"},{label:l.default("中"),value:"lg"},{label:l.default("大"),value:"xl"},{label:l.default("全屏"),value:"full"}]},{type:"select",name:"config.smartChart.centering",label:l.default("弹窗居中方式"),visibleOn:"config.smartChart.onlyShowOnAsk",value:"center",options:[{label:l.default("左对齐"),value:"left"},{label:l.default("居中"),value:"center"},{label:l.default("右对齐"),value:"right"}]}]:[]},e.dataBindCtrl=function(a){var e=n.getDebugAndRefreshBtn({loadData:a.chart.loadData,loadDebugData:a.chart.loadDebugData,dataType:a.chart.dataType,refreshText:l.default("刷新图表")}),o=a.chart.dataModelHash||"",d=t.__spreadArrays([r.getDataModelFieldHolder({name:"x-smart",label:l.default("列/X轴"),config:{dataModelHash:o,holderId:a.chart.frontendId+"-x-smart",maxCount:10,canRepeat:!0}}),r.getDataModelFieldHolder({name:"y-smart",label:l.default("行/Y轴"),config:{dataModelHash:o,holderId:a.chart.frontendId+"-y-smart",maxCount:10,canRepeat:!0}}),r.getDataModelFieldHolder({name:"value-smart",label:l.default("指标/取值"),config:{dataModelHash:o,holderId:a.chart.frontendId+"-value-smart",maxCount:10,canRepeat:!0}}),r.getDataModelFieldHolder({name:"color-smart",label:l.default("颜色/分类"),config:{dataModelHash:o,holderId:a.chart.frontendId+"-color-smart",maxCount:10,canRepeat:!0}}),r.getDataModelFieldHolder({name:"size-smart",label:l.default("大小/角度"),config:{dataModelHash:o,holderId:a.chart.frontendId+"-size-smart",onlyMeasure:!0,maxCount:10,canRepeat:!0}}),r.getDataModelFieldHolder({name:"name-smart",label:l.default("标签/名称"),config:{dataModelHash:o,holderId:a.chart.frontendId+"-value-smart",onlyDimension:!0,maxCount:10}}),n.commonFilterForDataModel(o),a.chart.isExploreChart?void 0:n.commonBindUrlParamForDataModel(o)],r.getChartConditionsHolder(o,a.chart,!0),[n.commonLimitForDataModel]);return d.concat(e)}});
;sugar.define("sugar:widgets/charts/_hoc/chart-zoom/chart-zoom-dialog.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=e("sugar:node_modules/tslib/tslib.js"),o=e("sugar:node_modules/react/index.js"),r=e("sugar:node_modules/amis/lib/index.js"),s=e("sugar:node_modules/classnames/index.js"),l=e("sugar:widgets/charts/chart-manager.tsx"),n=e("sugar:utils/i18n.ts"),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.render=function(){var e=this.props,t=e.mode,a=e.chart,i=e.backgroundColor,d=e.onClose,u=a.config.chartZoom||{},c=u.dialogSize,m=u.centering,h=u.dialogBackgroundColor,g=this.props.children,f="#fff";a.isDashChart&&(f=i||"rgba(0,0,0,0.85)"),h&&(f=h);var p="smart-chart"===a.type&&a.config.smartChart&&a.config.smartChart.type?a.config.smartChart.type:a.type,C=l.getChartForbiddenInfo(p,a),y=!C&&"normal"===t||"editor"===t?g:null,b={position:"relative",backgroundColor:f,height:"22rem"},_="";return"left"===m?_="pull-left":"right"===m&&(_="pull-right"),o.createElement(r.Modal,{show:!0,size:c||"full",className:"common-modal chart-zoom-modal",contentClassName:s("full"===c?"w-full ma-none":_,{"modal-transparent":h})},o.createElement(r.Modal.Header,{showCloseButton:!0,onClose:d,style:{backgroundColor:f}},o.createElement(r.Modal.Title,null,a.isDashChart||a.hideTitle?"":a.dynamicName||a.name||n.default("放大查看"))),o.createElement(r.Modal.Body,{style:b},y))},t}(o.Component);t.default=i});
;sugar.define("sugar:widgets/charts/_hoc/chart-zoom/index.tsx",function(t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var n=t("sugar:node_modules/tslib/tslib.js"),e=t("sugar:utils/i18n.ts"),r=t("sugar:node_modules/react/index.js"),i=t("sugar:stores/index.ts"),a=t("sugar:widgets/pop-menu/pop-menu.tsx"),s=t("sugar:widgets/dashboard-ctrl-panel/chart-ctrl.tsx"),h=t("sugar:widgets/charts/_hoc/chart-zoom/chart-zoom-dialog.tsx");o.default=function(t){var o;return i.inject(function(t){var o,n,e,r;return{backgroundColor:null===(r=null===(e=null===(n=null===(o=t.dashboard)||void 0===o?void 0:o.current)||void 0===n?void 0:n.data)||void 0===e?void 0:e.config)||void 0===r?void 0:r.backgroundColor}})(i.observer((o=function(o){function i(){var t=null!==o&&o.apply(this,arguments)||this;return t.chartFrontendId="",t}return n.__extends(i,o),i.prototype.componentWillMount=function(){this.handleInitPopMenu=this.handleInitPopMenu.bind(this),this.bindContextEvent=this.bindContextEvent.bind(this),this.toggleChartZoom=this.toggleChartZoom.bind(this),this.removeContextEvent=this.removeContextEvent.bind(this),this.chartFrontendId=this.props.chart.frontendId},i.prototype.componentDidMount=function(){this.bindContextEvent(),this.toggleChartZoom()},i.prototype.componentWillUnmount=function(){this.removeContextEvent()},i.prototype.handleInitPopMenu=function(){var t=this.props,o=t.chart,n=t.hub,r=n.configData.isChartZooming,i=a.popMenu.getPopMenuTree()||[];o.config.chartZoom&&o.config.chartZoom.open&&!r&&!n.drillDownDialogOpen&&i&&!i.some(function(t){return"sugar-chartZoom"===t.key})&&(o.isDashChart&&s.notNeedZoomCharts.includes(o.type)||i.push({key:"sugar-chartZoom",icon:"fa fa-expand",name:e.default("放大图表"),cb:function(){n.setChartConfigData({isChartZooming:!0})}})),a.popMenu.setPopMenuTree(i)},i.prototype.removeContextEvent=function(){var t=document.getElementById("chart_"+this.chartFrontendId);t?t.removeEventListener("contextmenu",this.handleInitPopMenu):null},i.prototype.bindContextEvent=function(){var t=this.props.chart,o=document.getElementById("chart_"+t.frontendId);o?o.addEventListener("contextmenu",this.handleInitPopMenu):null},i.prototype.toggleChartZoom=function(){var t=this.props,o=t.chart,n=t.hub,r=n.configData.isChartZooming,i=this.props.toolbarHandler||{},a=i.removeToolbarItem,h=i.addToolbarItem;a&&h&&(!n.drillDownDialogOpen&&!r&&o.config.chartZoom&&o.config.chartZoom.open?o.isDashChart&&s.notNeedZoomCharts.includes(o.type)||h({key:"sugar-chartZoom",label:e.default("放大图表"),icon:"fa fa-expand m-r text-info-dker",onClick:function(){n.setChartConfigData({isChartZooming:!0})}}):a("sugar-chartZoom"))},i.prototype.render=function(){var o=this,e=this.props.hub.configData.isChartZooming;return[r.createElement(t,n.__assign({},this.props,{key:"component"})),e?r.createElement("div",{key:"event",style:{display:"none"},onMouseDown:function(t){t.stopPropagation()}},r.createElement(h.default,n.__assign({},this.props,{onClose:function(){o.props.hub.setChartConfigData({isChartZooming:!1})}}),r.createElement(t,n.__assign({},this.props)))):null]},i}(r.Component),o.displayName="ChartZoomHOC",o)))}});
;sugar.define("sugar:widgets/charts/smart-chart/smart-chart.tsx",function(t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var e=t("sugar:node_modules/tslib/tslib.js"),r=t("sugar:utils/i18n.ts"),s=t("sugar:node_modules/classnames/index.js"),n=t("sugar:node_modules/react/index.js"),o=t("sugar:widgets/charts/chart-manager.tsx"),i=t("sugar:stores/index.ts"),l=t("sugar:widgets/charts/smart-chart/smart-chart-ctrl.tsx"),d=t("sugar:widgets/charts/_hoc/chart-zoom/index.tsx"),c=t("sugar:node_modules/amis/lib/index.js"),h=function(t){function a(a){return t.call(this,a)||this}e.__extends(a,t),a.prototype.render=function(){var t=this.props,a=t.chart,i=t.hub,l=t.mode,d=a.config.smartChart||{},h=d.type,m=d.onlyShowOnAsk,u=r.default("请在控制面板中拖入字段来获取图表推荐");a.isExploreChart&&(u=(window.sugarConfig.enableNLP?r.default("在顶部输入问题或"):"")+r.default("在右侧控制面板中拖入字段来进行探索"));var g=null;if(h||i.chartTip||(g=n.createElement("div",{className:"smart-chart-tip"},n.createElement("div",{className:"smart-chart-tip__content"},u))),u=i.chartTip,u&&(g=n.createElement("div",{className:"smart-chart-tip"},n.createElement("div",{className:"smart-chart-tip__content"},u))),g=o.create(h,e.__assign(e.__assign({},this.props),{chart:e.__assign(e.__assign({},a),{type:h})})),m&&"normal"===l){if(i.configData.showOnAsk){var p=a.config.smartChart||{},f=p.dialogSize,C=p.centering,_=p.dialogBackgroundColor,y="#fff";a.isDashChart&&(y="rgba(0,0,0,0.85)"),_&&(y=_);var x={position:"relative",backgroundColor:y,height:"22rem"},v="";return"left"===C?v="pull-left":"right"===C&&(v="pull-right"),n.createElement(c.Modal,{show:!0,size:f||"full",className:"common-modal",contentClassName:s("full"===f?"w-full ma-none":v,{"modal-transparent":_})},n.createElement(c.Modal.Header,{showCloseButton:!0,onClose:function(){i.setChartConfigData({showOnAsk:!1})},style:{backgroundColor:y}},n.createElement(c.Modal.Title,null,a.isDashChart||a.hideTitle?"":a.dynamicName||a.name||r.default("放大查看"))),n.createElement(c.Modal.Body,{style:x},g))}return null}return g};var l;return a.displayName="SmartChart",a=e.__decorate([d.default,i.observer,e.__metadata("design:paramtypes",["function"==typeof(l="undefined"!=typeof o.IChartComponentProps&&o.IChartComponentProps)?l:Object])],a)}(n.Component);a.default=h;var m=function(t,a,r,s){var n=(a.config.smartChart||{}).type,i=o.getChartByType(n);i&&i.exportExcel&&i.exportExcel(t,e.__assign(e.__assign({},a),{type:n}),r,s)},u=function(t,a,r,s,n){var i=(a.config.smartChart||{}).type,l=o.getChartByType(i);return l&&l.exportRows?l.exportRows(t,e.__assign(e.__assign({},a),{type:i}),r,s,n):void 0},g=function(t,a,r,s){var n=(a.config.smartChart||{}).type,i=o.getChartByType(n);i&&i.exportCSV&&i.exportCSV(t,e.__assign(e.__assign({},a),{type:n}),r,s)},p=function(t){var a=t.dataConfig;if(a.dataModel)for(var e in a.dataModel)if(/-smart$/.test(e)&&a.dataModel[e].length)return t.recommendChartType(),!0;return!1};o.register({kind:"smart",type:"smart-chart",name:r.default("智能图表"),iconClassName:"chart-smart",initialState:{dataType:"dataModel",height:550,width:6,config:{},dataConfig:{conAutoGroup:!0}},initialDashboardState:{width:800,height:800,config:{}},component:h,needDashboardAutoFresh:!1,basicCtrl:l.basicCtrl,dataBindCtrl:l.dataBindCtrl,exportCSV:g,exportExcel:m,exportRows:u,loadDataWhenDataModelConfigChange:p,dataModelPanelShow:[["dataType","dataModel"]],chartEigens:l.chartEigens})});
;sugar.define("sugar:widgets/charts/line/line-series-ctrl.tsx",function(e,l){"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.seriesCtrl=void 0;var a=e("sugar:node_modules/tslib/tslib.js"),t=e("sugar:utils/i18n.ts"),n=e("sugar:widgets/amis-inline-switch.tsx"),i=e("sugar:widgets/charts/utils/common.tsx");l.seriesCtrl=function(e){if(!e.data)return null;var l=e.data.series,s=e.chart.config;if(!l||!l.reduce)return null;var r=[],u=l.reduce(function(e,l){var u=[],o=[],d=[],c="!config.openCustomSeries || config.seriesConfig.current != '"+l.name+"'",f="config.seriesConfig."+l.name;return l.type&&"line"!==l.type||(d=[{hiddenOn:c,type:"fieldset",collapsed:!0,title:t.default("线"),controls:[{type:"group",controls:[{type:"select",name:f+".lineType",label:t.default("线条样式"),placeholder:t.default("请选择"),options:[{label:t.default("实线"),value:"solid"},{label:t.default("虚线"),value:"dashed"},{label:t.default("点线"),value:"dotted"}]},{type:"number",label:t.default("线条粗度"),name:f+".lineWidth",step:1,min:1,max:30}]},n.amisInlineSwitch(f+".showSymbol",t.default("显示标志")),{type:"group",hiddenOn:f+" && !"+f+".showSymbol",controls:[{type:"select",name:f+".symbolType",label:t.default("标志类型"),placeholder:t.default("默认是空心圆"),options:[{label:t.default("空心圆"),value:"emptyCircle"},{label:t.default("实心圆"),value:"circle"},{label:t.default("空心方形"),value:"emptyRect"},{label:t.default("实心方形"),value:"rect"},{label:t.default("圆角方形"),value:"roundRect"},{label:t.default("三角形"),value:"triangle"},{label:t.default("菱形"),value:"diamond"},{label:"pin",value:"pin"},{label:t.default("箭头"),value:"arrow"}]},{type:"number",label:t.default("标志大小"),name:f+".symbolSize",placeholder:t.default("默认是4"),max:50,min:4,step:1}]}]}]),u=[{hiddenOn:c,type:"text",label:t.default("别名"),name:f+".alias"}],s.openCustomSeries&&s.seriesConfig&&s.seriesConfig.current===l.name&&s.seriesConfig[l.name]&&s.seriesConfig[l.name].alias&&u.push(n.amisInlineSwitch(f+".openAliasDrillDown",t.default("使用别名下钻和联动"))),o.push({type:"color",name:f+".color",label:t.default("颜色"),hiddenOn:c,key:"color"},{type:"color",name:f+".labelColor",clearable:!0,hiddenOn:c,key:"labelColor",label:t.default("标签颜色")},i.getSeriesUnitCtrl(f,c)),r.push({label:l.name,value:l.name}),e.concat(a.__spreadArrays(o,d))},[]);return{type:"fieldset",title:t.default("系列设置(series)"),collapsable:!0,collapsed:!0,headingClassName:"fieldset-title",controls:a.__spreadArrays([n.amisInlineSwitch("config.openCustomSeries",t.default("开启自定义系列设置")),{type:"select",name:"config.seriesConfig.current",label:t.default("系列名"),options:r,value:r.length?r[0].value:null,hiddenOn:"!config.openCustomSeries"}],u)}}});
;sugar.define("sugar:widgets/charts/_mixin/forecast.ts",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addForecast=t.forecastCtrl=void 0;var a=e("sugar:node_modules/tslib/tslib.js"),s=e("sugar:node_modules/axios/index.js"),i=e("sugar:node_modules/amis/lib/index.js"),r=e("sugar:node_modules/lodash/set.js"),l=e("sugar:widgets/amis-inline-switch.tsx"),n=e("sugar:utils/i18n.ts"),o=window.sugarConfig;t.forecastCtrl=function(){if(o.enableForecast){var e=o.productType;return!e||e&&"advan"===e?[{type:"divider"},{type:"fieldset",title:n.default("智能预测"),collapsable:!0,collapsed:!0,headingClassName:"fieldset-title",controls:[{type:"static",tpl:n.default("X 轴需要是日期格式，比如 2020-08-08")},l.amisInlineSwitch("config.enableForecast",n.default("开启预测")),{type:"number",name:"config.forecastNumber",label:n.default("预测数量"),max:10,min:1,step:1,value:5,visibleOn:"config.enableForecast"}]}]:[{type:"divider"},{type:"fieldset",title:n.default("智能预测"),collapsable:!0,collapsed:!0,headingClassName:"fieldset-title",controls:[{type:"static",tpl:n.default("仅高级版本支持此功能")}]}]}return[]},t.addForecast=function(e,t,l){return a.__awaiter(this,void 0,void 0,function(){var d,u,c,f,p,g,h,m,b,y,v,_,w,x,O,S,j,F;return a.__generator(this,function(a){switch(a.label){case 0:if(!o.enableForecast)return[2];if(d=t.forecastNumber||5,u=l.xAxis[0].data,!u||0===u.length)return console.warn("无数据，不进行预测"),[2];for(c=u[u.length-1],"string"==typeof c&&c.match(/\d{4}-(0[1-9]|1[0-2])-(0[1-9]|[12]\d|3[01])/)||i.toast.error(n.default("X 轴需要是日期格式，比如 2020-08-08")),f=[],p=864e5,g=1;d>=g;g++)h=new Date,h.setTime(Date.parse(c)+p*g),f.push(h.toISOString().split("T")[0]);l.xAxis[0].data=u.concat(f),e.setOption(l),m=l.series.length,b=0,a.label=1;case 1:if(!(m>b))return[3,4];for(y=JSON.parse(JSON.stringify(l.series[b])),v=[],_=0;_<y.data.length;_++)v.push([u[_],y.data[_]]);return[4,s.default.post("/openapi/forecast",{freq:"D",periods:d,data:v})];case 2:if(w=a.sent(),w.data&&w.data.data.yhat){for(x=y.data,O=Object.values(w.data.data.yhat),S=[],"line"===y.type?(j=x.length-1,S[j]=x[j],r(y,"itemStyle.normal.lineStyle.type","dotted")):"bar"===y.type&&r(y,"itemStyle.normal.opacity",.5),F=0;F<O.length;F++)S[y.data.length+F]=O[F];y.data=S,l.series.push(y),e.setOption(l)}a.label=3;case 3:return b++,[3,1];case 4:return[2]}})})}});
;sugar.define("sugar:widgets/charts/bar/bar-mark-ctrl.tsx",function(a,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=a("sugar:utils/i18n.ts"),t=a("sugar:widgets/amis-inline-switch.tsx");e.default=[{type:"group",controls:[t.amisInlineSwitch("config.chartMarkMax",l.default("标记最大值")),t.amisInlineSwitch("config.chartMarkMin",l.default("标记最小值"))]},{type:"group",controls:[{type:"color",name:"config.chartMarkBgColor",label:l.default("标记背景颜色"),hiddenOn:"!config.chartMarkMax && !config.chartMarkMin"},{type:"color",name:"config.chartMarkTextColor",label:l.default("标记文字颜色"),hiddenOn:"!config.chartMarkMax && !config.chartMarkMin"}]},{type:"select",name:"config.chartMarkShape",label:l.default("标记图形"),placeholder:l.default("请选择"),value:"pin",hiddenOn:"!config.chartMarkMax && !config.chartMarkMin",options:[{label:l.default("圆形"),value:"circle"},{label:l.default("矩形"),value:"rect"},{label:l.default("圆角矩形"),value:"roundRect"},{label:l.default("三角形"),value:"triangle"},{label:l.default("菱形"),value:"diamond"},{label:l.default("标记"),value:"pin"},{label:l.default("箭头"),value:"arrow"},{label:l.default("无"),value:"none"}]}]});
;sugar.define("sugar:widgets/charts/line/line-ctrl.tsx",function(e,a){"use strict";var t;Object.defineProperty(a,"__esModule",{value:!0}),a.advancedCtrl=a.dataBindCtrl=a.chartEigens=a.chartDemoUrl=void 0;var l=e("sugar:node_modules/tslib/tslib.js"),n=e("sugar:utils/i18n.ts"),i=e("sugar:node_modules/react/index.js"),o=e("sugar:widgets/ctrl-panel/data-bind-ctrl/index.tsx"),d=e("sugar:widgets/object-array-editor/object-array-editor.tsx"),c=e("sugar:widgets/ctrl-panel/common/switch-with-tip.tsx"),r=e("sugar:widgets/amis-inline-switch.tsx"),u=e("sugar:widgets/charts/line/line-series-ctrl.tsx"),f=e("sugar:widgets/data-model/data-model-field-holder/data-model-field-holder.tsx"),s=e("sugar:widgets/charts/_mixin/forecast.ts"),m=e("sugar:widgets/charts/utils/common.tsx"),p=e("sugar:widgets/charts/bar/bar-mark-ctrl.tsx"),g="/openapi/demo/chart?type=line";a.chartDemoUrl="$CUR_HOST/openapi/demo/chart?type=line",a.chartEigens=[{field:[{name:"x",type:"d",minCount:1,maxCount:3},{name:"y",type:"m",minCount:1,maxCount:50,canRepeat:!0},{name:"y2",type:"m",minCount:0,maxCount:0,canRepeat:!0},{name:"color",type:"d",minCount:0,maxCount:3}],configSp:{"dataConfig.doubleY":!1}},{field:[{name:"x",type:"d",minCount:1,maxCount:3},{name:"y",type:"m",minCount:1,maxCount:50,canRepeat:!0},{name:"y2",type:"m",minCount:1,maxCount:50,canRepeat:!0},{name:"color",type:"d",minCount:0,maxCount:3}],configSp:{"dataConfig.doubleY":!0},multiUnit:!0,variantIndex:0}];var h="private"===window.sugarConfig.deployType?!0:null===(t=window.sugarConfig)||void 0===t?void 0:t.nowProductConfig;a.dataBindCtrl=function(e){var a=e.chart.dataModelHash||"",t=e.sqlModelStore.detailMap.mapByHash.get(a),u=o.generateSQLFieldList(t),s=o.getDebugAndRefreshBtn({loadData:e.chart.loadData,loadDebugData:e.chart.loadDebugData,dataType:e.chart.dataType,refreshText:n.default("刷新图表")}),m=o.getDataBindCommon({frontendId:e.chart.frontendId,dataTypeOptions:["dataModel","api","sql","json"],api:{demoUrl:g},sql:{needContinuitySetting:!0,sqlFieldList:u},loadData:e.chart.loadData,loadDebugData:e.chart.loadDebugData,curUrl:e.chart.dataApiUrl}),p=[{type:"select",list:u,key:"frontendId",name:n.default("绑定字段"),tdStyle:{minWidth:150}},{type:"text",key:"columnName",name:n.default("字段重命名"),tdStyle:{minWidth:120}},{type:"select",key:"chartType",name:n.default("类型"),defaultValue:"line",list:[{label:n.default("折线"),value:"line"},{label:n.default("柱状"),value:"bar"}],tdStyle:{minWidth:90},hidden:!e.chart.dataConfig.lineBar},{type:"select",key:"yAxisIndex",name:n.default("Y轴"),defaultValue:"0",list:[{label:n.default("第一Y轴"),value:"0"},{label:n.default("第二Y轴"),value:"1"}],tdStyle:{minWidth:120},hidden:!e.chart.dataConfig.doubleY},{type:"select",key:"dashed",name:n.default("是否虚线"),defaultValue:"0",list:[{label:n.default("是"),value:"1"},{label:n.default("否"),value:"0"}],tdStyle:{minWidth:80}}],h=l.__spreadArrays([f.getDataModelFieldHolder({name:"x",label:n.default("X轴/类别轴"),config:{dataModelHash:a,holderId:e.chart.frontendId+"-x",maxCount:3,onlyDimension:!0,canNotNoEnumerable:!0}}),f.getDataModelFieldHolder({name:"y",label:n.default("Y轴/值轴"),config:{dataModelHash:a,holderId:e.chart.frontendId+"-y",maxCount:50,onlyMeasure:!0,canRepeat:!0,meaConfig:{otherIcon:e.chart.dataConfig.lineBar?function(e){return"bar"===e.lineChartType?"fa fa-bar-chart":"fa fa-line-chart"}:void 0,contextMenu:["chartTopShow","dataCal"].concat(e.chart.dataConfig.lineBar?["lineChartType"]:[])}}}),f.getDataModelFieldHolder({name:"y2",label:n.default("第二Y轴/值轴"),hiddenOn:"dataType != 'dataModel' || !dataConfig.doubleY",config:{dataModelHash:a,holderId:e.chart.frontendId+"-y2",maxCount:50,onlyMeasure:!0,canRepeat:!0,meaConfig:{otherIcon:e.chart.dataConfig.lineBar?function(e){return"bar"===e.lineChartType?"fa fa-bar-chart":"fa fa-line-chart"}:void 0,contextMenu:["chartTopShow","dataCal"].concat(e.chart.dataConfig.lineBar?["lineChartType"]:[])}}}),f.getDataModelFieldHolder({name:"color",label:n.default("颜色图例"),config:{dataModelHash:a,holderId:e.chart.frontendId+"-color",maxCount:3,onlyDimension:!0,canNotNoEnumerable:!0}}),r.amisInlineSwitch("dataConfig.lineBar",n.default("开启线柱混搭"),"data.dataType != 'dataModel'"),r.amisInlineSwitch("dataConfig.doubleY",n.default("开启双Y轴"),"data.dataType != 'dataModel'"),r.amisInlineSwitch("dataConfig.narrativeMode",n.default("开启叙事模式"),"data.dataType != 'dataModel'"),r.amisInlineSwitch("dataConfig.timeline",n.default("开启时间轴"),"data.dataType != 'dataModel'"),f.getDataModelFieldHolder({name:"timeline",label:n.default("时间轴"),hiddenOn:"dataType != 'dataModel' || !dataConfig.timeline",config:{dataModelHash:a,holderId:e.chart.frontendId+"-timeline",maxCount:1,onlyDimension:!0}}),f.getDataModelFieldHolder({name:"extra",label:n.default("下钻附加字段"),config:{dataModelHash:a,holderId:e.chart.frontendId+"-extra",maxCount:1,onlyDimension:!0,canNotNoEnumerable:!0,dimConfig:{contextMenu:null}},desc:n.default("请确保该字段在X轴的聚合结果中值是相同的，从而获得正确的结果")}),o.commonFilterForDataModel(a),o.commonBindUrlParamForDataModel(a)],f.getChartConditionsHolder(a,e.chart,!0),[o.commonLimitForDataModel,{type:"select",name:"dataConfig.categories",hiddenOn:"data.dataType != 'sql'",label:n.default("X轴绑定字段"),placeholder:n.default("请选择"),options:u},{type:"select",name:"dataConfig._sugar_extras",hiddenOn:"data.dataType != 'sql'",label:n.default("下钻附加字段"),placeholder:n.default("请选择"),options:u},{type:"select",name:"dataConfig.categoriesSort",hiddenOn:"data.dataType != 'sql'",label:n.default("X轴数据排序"),placeholder:n.default("请选择"),options:[{label:n.default("默认"),value:"default"},{label:n.default("从小到大"),value:"asc"},{label:n.default("从大到小"),value:"desc"}]},r.amisInlineSwitch("dataConfig.lineBar",n.default("开启线柱混搭"),"data.dataType != 'sql'"),r.amisInlineSwitch("dataConfig.doubleY",n.default("开启双Y轴"),"data.dataType != 'sql'"),{name:"dataConfig.autoBindData",hiddenOn:"dataType != 'sql'",children:function(e){var a=e.onChange,t=e.value;return i.createElement(c.default,l.__assign({},{onChange:a,value:t,label:n.default("绑定所有字段到Y轴"),tipText:n.default("不了解？"),tipLink:"/docs/Chart-line"}))}},{name:"dataConfig.series",hiddenOn:"data.dataType != 'sql'",children:function(a){var t=a.onChange,o=a.value;return i.createElement(d.default,l.__assign({},{onChange:t,value:o},{chartFrontendId:e.chart.frontendId,containerClassName:"form-group form-item",label:n.default("绑定Y轴数据项"),addTipText:n.default("新增Y轴数据项"),cols:p}))}}]);return t&&t.config.openRow2Col&&h.push({name:"dataConfig.addAllRow2Col",children:function(e){var a=e.onChange,t=e.value;return i.createElement(c.default,l.__assign({},{onChange:a,value:t,label:n.default("绑定所有的行转列"),tipText:n.default("不了解？"),tipLink:"/docs/DataBind-SQL-Rowcol"}))}}),m.concat(h,s)},a.advancedCtrl=function(e){var a=[r.amisInlineSwitch("config.chartSmooth",n.default("线条平滑")),r.amisInlineSwitch("config.chartStep",n.default("阶梯线图")),{type:"select",name:"config.chartStepType",label:n.default("阶梯拐点"),placeholder:n.default("请选择"),hiddenOn:"!config.chartStep",options:[{label:n.default("当前点拐弯"),value:"start"},{label:n.default("两点中间拐弯"),value:"middle"},{label:n.default("下个点拐弯"),value:"end"}]},r.amisInlineSwitch("config.chartTopShow",n.default("折线/柱体展示数据")),r.amisInlineSwitch("config.sampling",n.default("开启数据点合并"),"",!1,n.default("在数据量很大的时候可以提升展现效果及性能")),{type:"select",name:"config.samplingMethod",label:n.default("数据合并方法"),hiddenOn:"!config.sampling",value:"average",options:[{label:n.default("平均值"),value:"average"},{label:n.default("最大值"),value:"max"},{label:n.default("最小值"),value:"min"},{label:n.default("总和"),value:"sum"}]},r.amisInlineSwitch("config.connectNulls",n.default("连接空数据让线条连续")),r.amisInlineSwitch("config.chartStack",n.default("堆积图(数值叠加)")),r.amisInlineSwitch("config.hideTotalTip",n.default("Tooltip中不显示合计"),"!config.chartStack"),r.amisInlineSwitch("config.showPercent",n.default("悬停Tooltip中显示占比"),"!config.chartStack"),{type:"group",controls:[r.amisInlineSwitch("config.notShowZero",n.default("不展示全零数据项")),r.amisInlineSwitch("config.notShowNull",n.default("不展示全空数据项"))]},{type:"group",controls:[r.amisInlineSwitch("config.chartStackY1",n.default("第一Y轴堆积")),r.amisInlineSwitch("config.chartStackY2",n.default("第二Y轴堆积"))]},{type:"group",controls:[r.amisInlineSwitch("config.chartArea",n.default("设置为面积图")),r.amisInlineSwitch("config.areaStyleLinearColor",n.default("堆积/面积颜色渐变"))]},{type:"group",controls:[{type:"range",name:"config.areaOpacity",max:100,min:5,step:5,label:n.default("堆积或面积的透明度")},{type:"number",label:n.default("线条粗度"),name:"config.lineWidth",step:1,min:1,max:30}]},{type:"divider"},{type:"fieldset",collapsed:!0,title:n.default("Y轴设置"),collapsable:!0,headingClassName:"fieldset-title",controls:[r.amisInlineSwitch("config.chartScale",n.default("Y轴数值不从0开始(自动适配)")),{type:"group",controls:[r.amisInlineSwitch("config.hideYSplitLine",n.default("隐藏Y轴网格线")),r.amisInlineSwitch("config.hideYSplitArea",n.default("隐藏Y轴区域分割"))]},r.amisInlineSwitch("config.noMillion",n.default("Y轴百万千万展示为万")),{type:"number",label:n.default("Y轴字号"),name:"config.yFontSize",step:1,min:8,max:100},{type:"html",html:'<div class="fieldset-title">'+n.default("第一Y轴")+"</div>"},{type:"group",controls:[r.amisInlineSwitch("config.hideY",n.default("隐藏Y轴")),r.amisInlineSwitch("config.yInverse",n.default("Y轴数值反向"))]},{type:"group",controls:[{type:"number",name:"config.maxY",label:n.default("Y坐标轴最大值"),step:.1,placeholder:n.default("自动")},{type:"number",name:"config.minY",label:n.default("Y坐标轴最小值"),step:.1,placeholder:n.default("自动")}]},{type:"group",controls:[{type:"select",name:"config.yType",label:n.default("Y轴类型"),clearable:!0,placeholder:n.default("请选择"),options:m.yTypeOptions},{type:"number",name:"config.yLabelRotate",placeholder:n.default("-90至90"),label:n.default("Y轴标签倾斜度"),min:-90,max:90}]},m.dataUnitCtrl,{type:"text",name:"config.yName",label:n.default("Y轴名称")},{type:"html",html:'<div class="fieldset-title">'+n.default("第二Y轴（双Y轴才生效）")+"</div>"},{type:"group",controls:[r.amisInlineSwitch("config.hideSecondY",n.default("隐藏第二Y轴")),r.amisInlineSwitch("config.secondYInverse",n.default("第二Y轴反向"))]},{type:"group",controls:[{type:"number",name:"config.maxSecondY",label:n.default("第二Y坐标轴最大值"),step:.1,placeholder:n.default("自动")},{type:"number",name:"config.minSecondY",label:n.default("第二Y坐标轴最小值"),step:.1,placeholder:n.default("自动")}]},{type:"group",controls:[{type:"select",name:"config.secondYType",clearable:!0,label:n.default("第二Y轴类型"),placeholder:n.default("请选择"),options:m.yTypeOptions},{type:"number",name:"config.secondYLabelRotate",placeholder:n.default("-90至90"),label:n.default("第二Y轴标签倾斜度"),min:-90,max:90}]},{type:"group",controls:[{type:"text",name:"config.secondYPrefix",clearable:!0,label:n.default("第二Y轴前置单位")},{type:"text",name:"config.secondYUnit",clearable:!0,label:n.default("第二Y轴单位")}]},{type:"text",name:"config.secondYName",label:n.default("第二Y轴名称")}]},{type:"divider"},{type:"fieldset",collapsed:!0,title:n.default("X轴设置"),collapsable:!0,headingClassName:"fieldset-title",controls:[r.amisInlineSwitch("config.xLableAllShow",n.default("X轴标签全部展示")),{type:"number",name:"config.xLabelRotate",label:n.default("强制X轴标签倾斜度(-90至90)"),hiddenOn:"!config.xLableAllShow",min:-90,max:90,step:5},r.amisInlineSwitch("config.xLableVertical",n.default("竖着显示文字")),r.amisInlineSwitch("config.xLableShowMin",n.default("强制显示X轴首个标签")),r.amisInlineSwitch("config.xLableShowMax",n.default("强制显示X轴末尾标签")),{type:"group",controls:[r.amisInlineSwitch("config.hideX",n.default("隐藏X轴")),r.amisInlineSwitch("config.chartDataZoom",n.default("开启X轴缩放"))]},{type:"number",name:"config.dataZoomStart",label:n.default("默认缩放起始百分比(%)"),hiddenOn:"!config.chartDataZoom",step:5,max:95,min:0},{type:"number",name:"config.dataZoomEnd",label:n.default("默认缩放结束百分比(%)"),hiddenOn:"!config.chartDataZoom",step:5,max:100,min:5},{type:"number",name:"config.xLabelRotateCommon",label:n.default("X轴标签倾斜度(-90至90)"),min:-90,max:90,step:5},{type:"group",controls:[{type:"number",label:n.default("X轴字号"),name:"config.xFontSize",step:1,min:8,max:100},{type:"text",name:"config.xName",label:n.default("X轴名称")}]}]},{type:"divider"},m.getTooltipCtrl([r.amisInlineSwitch("config.tooltipSort",n.default("Tooltip中数据按大小排序")),r.amisInlineSwitch("config.showDayRate",n.default("Tooltip中展示环比")),r.amisInlineSwitch("config.hideNullTip",n.default("Tooltip中隐藏空数据项")),r.amisInlineSwitch("config.slideShow",n.default("开启提示轮播")),{type:"number",name:"config.slideInterval",hiddenOn:"!config.slideShow",label:n.default("轮播间隔秒数"),step:1,min:1},{type:"number",name:"config.slideIntervalLastNumber",hiddenOn:"!config.slideShow",label:n.default("只轮播末尾的几项数据"),step:1,min:0},r.amisInlineSwitch("config.openSlideDep",n.default("轮播同步图表联动（联动开启时生效）"),"!config.slideShow"),r.amisInlineSwitch("config.echartsGroup",n.default("加入Tooltip多图同步对齐")),r.amisInlineSwitch("config.tooltipHide",n.default("关闭Tooltip"))]),{type:"divider"},m.getLegendCtrl([{type:"number",name:"config.legendHeight",label:n.default("图例高度"),step:1,min:15,hiddenOn:'!config.chartLegend || (config.legendPosition != "bottom" && config.legendPosition != "top")'},{type:"number",name:"config.legendWidth",label:n.default("图例宽度"),step:1,min:10,hiddenOn:'!config.chartLegend || (config.legendPosition != "left" && config.legendPosition != "right")'},{type:"number",name:"config.defaultLegendCount",label:n.default("默认展示的图例数(0为都展示)"),min:0,hiddenOn:"!config.chartLegend"}]),{type:"divider"},m.getLabelCtrl(),{type:"divider"},{type:"fieldset",title:n.default("标记和标线设置"),collapsed:!0,collapsable:!0,headingClassName:"fieldset-title",controls:l.__spreadArrays(p.default,[r.amisInlineSwitch("config.chartMarkAvg",n.default("展示折线的均值线")),r.amisInlineSwitch("config.chartMarkLine",n.default("开启基准标线")),r.amisInlineSwitch("config.weekendMarkline",n.default("开启周六标线(X轴为日期时)")),r.amisInlineSwitch("config.chartMarkLineOnY2",n.default("基准标线展示在第二Y轴"),"!config.chartMarkLine"),{type:"number",name:"config.markLineVal",label:n.default("基准值"),step:.1,hiddenOn:"!config.chartMarkLine"},{type:"color",name:"config.markLineColor",label:n.default("基准线颜色"),hiddenOn:"!config.chartMarkLine"},r.amisInlineSwitch("config.chartMarkLine2",n.default("开启第二基准标线")),r.amisInlineSwitch("config.chartMarkLine2OnY2",n.default("第二基准标线展示在第二Y轴"),"!config.chartMarkLine2"),{type:"number",name:"config.markLineVal2",label:n.default("第二基准值"),step:.1,hiddenOn:"!config.chartMarkLine2"}])},{type:"divider"},m.gridCtrl,{type:"divider"},{type:"fieldset",title:n.default("线条上数据标志点设置(symbol)"),collapsed:!0,collapsable:!0,headingClassName:"fieldset-title",controls:[r.amisInlineSwitch("config.chartHideSymbol",n.default("隐藏线条上标志")),{type:"group",controls:[{type:"select",name:"config.showAllSymbol",label:n.default("是否显示所有标志"),value:"auto",options:[{label:n.default("智能适配"),value:"auto"},{label:n.default("显示所有"),value:"yes"},{label:n.default("跟随坐标轴标签"),value:"no"}]},{type:"select",name:"config.symbolType",label:n.default("标志类型"),placeholder:n.default("默认是空心圆"),options:[{label:n.default("空心圆"),value:"emptyCircle"},{label:n.default("实心圆"),value:"circle"},{label:n.default("空心方形"),value:"emptyRect"},{label:n.default("实心方形"),value:"rect"},{label:n.default("圆角方形"),value:"roundRect"},{label:n.default("三角形"),value:"triangle"},{label:n.default("菱形"),value:"diamond"},{label:"pin",value:"pin"},{label:n.default("箭头"),value:"arrow"}]}]},{type:"group",controls:[{type:"number",label:n.default("标志大小"),name:"config.symbolSize",placeholder:n.default("默认是4"),max:50,min:4,step:1},{type:"number",name:"config.borderWidth",value:0,label:n.default("边框大小"),min:0}]},{type:"color",name:"config.borderColor",value:"#fff",label:n.default("边框颜色")}]},{type:"divider"},{type:"fieldset",title:n.default("柱体设置"),collapsable:!0,collapsed:!0,headingClassName:"fieldset-title",controls:[{type:"tpl",tpl:'<span class="text-muted help-block">'+n.default("柱体设置在折柱混搭时生效")+"</span>",className:"m-t-n-sm"},{type:"number",name:"config.barMaxWidth",label:n.default("柱体最大宽度(0为自适应)"),min:0},{type:"group",controls:[{type:"number",name:"config.barBorderRadius",label:n.default("柱体圆角"),min:0},{type:"number",name:"config.barGap",label:n.default("不同系列的柱体间距"),min:0,max:100,step:5}]}]},{type:"divider"},{type:"fieldset",title:n.default("时间轴设置(timeline)"),collapsed:!0,collapsable:!0,headingClassName:"fieldset-title",hidden:!(h||(null===h||void 0===h?void 0:h.timeline)),controls:[{type:"group",controls:[{type:"select",name:"config.tlAxisType",label:n.default("轴类型"),placeholder:n.default("请选择"),value:"category",options:[{label:n.default("数值轴"),value:"value"},{label:n.default("类目轴"),value:"category"}]},{type:"number",name:"config.tlPlayInterval",label:n.default("播放间隔"),value:1,step:1,min:1,placeholder:n.default("自动")}]},{type:"group",controls:[r.amisInlineSwitch("config.tlAutoPlay",n.default("自动播放")),r.amisInlineSwitch("config.tlInverse",n.default("反方向放置"))]},{type:"group",controls:[{type:"color",name:"config.tlNormalColor",value:"#999",label:n.default("标签颜色")},{type:"color",name:"config.tlEmphasisColor",value:"#23b7e5",label:n.default("标签高亮颜色")}]},{type:"group",controls:[{type:"color",name:"config.tlLineStyleColor",value:"#555",label:n.default("线条颜色")},{type:"number",name:"config.tlLabelFontSize",label:n.default("文本字体大小"),value:12,step:1,min:10}]},{type:"group",controls:[{type:"select",name:"config.tlSymbol",label:n.default("标记图形"),placeholder:n.default("请选择"),value:"circle",options:[{label:n.default("圆形"),value:"circle"},{label:n.default("矩形"),value:"rect"},{label:n.default("圆角矩形"),value:"roundRect"},{label:n.default("三角形"),value:"triangle"},{label:n.default("菱形"),value:"diamond"},{label:n.default("标记"),value:"pin"},{label:n.default("箭头"),value:"arrow"},{label:n.default("无"),value:"none"}]},{type:"color",name:"config.tlItemStyleColor",value:"#bbb",label:n.default("图形颜色")}]},{type:"group",controls:[{type:"color",name:"config.tlSymbolColor",value:"#bbb",label:n.default("标记图形颜色")},{type:"color",name:"config.tlSymbolBorderColor",value:"#777",label:n.default("标记图形边框颜色")}]},r.amisInlineSwitch("config.tlShowPlayBtn",n.default("播放按钮"),"",!0),{type:"group",controls:[r.amisInlineSwitch("config.tlShowNextBtn",n.default("前进按钮"),"",!0),r.amisInlineSwitch("config.tlShowPrevBtn",n.default("后退按钮"))]},{type:"group",controls:[{type:"color",name:"config.tlControlStyleColor",value:"#666",label:n.default("控制按钮颜色")},{type:"color",name:"config.tlControlStyleBorderColor",value:"#666",label:n.default("控制按钮边框颜色")}]},r.amisInlineSwitch("config.showGraphic",n.default("时间轴内容"),"",!0),{type:"number",name:"config.graphicToBottom",label:n.default("底部边距"),value:40,step:1,min:10},{type:"number",name:"config.graphicToRight",label:n.default("右侧边距"),value:20,step:1,min:10},{type:"number",name:"config.graphicFontSize",label:n.default("文本字体大小"),value:22,step:1,min:12}]},{type:"divider"},m.getVisualMapCtrl(e,!0),{type:"divider"},u.seriesCtrl(e)];return a=a.concat(s.forecastCtrl())}});
;sugar.define("sugar:widgets/charts/_mixin/common.tsx",function(a,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=a("sugar:utils/i18n.ts"),r=a("sugar:node_modules/react/index.js"),d=a("sugar:widgets/charts/chart-manager.tsx"),i=a("sugar:utils/common-helper.ts"),c=["3d-map-line","3d-map-bar","3d-bar","3d-scatter","3d-word-cloud","scene"],s={auth:function(a){var e=a.hub.data,s=d.getChartByType(a.chart.type),n=!(!s||!s.canEmptyData),l=s&&s.loadDataPremiseField||"",u=!l||a.chart.config[l]===!0;if(!e)return r.createElement("div",null);if("error"===e.loadState&&u)return r.createElement("div",{className:"chart-tip"},t.default(e.loadError.message||"获取数据失败"));if("done"===e.loadState&&0!==e.data&&!e.data&&!n)return r.createElement("div",{className:"chart-tip"},t.default("无数据"));if("done"===e.loadState&&e.data){var o=d.validate(e.data,a.chart.type,a.chart.config);if(~c.indexOf(a.chart.type)){var m=i.webGLDetector();m!==!0&&(o=m)}if(o!==!0)return r.createElement("div",{className:"chart-tip"},t.default(o||"数据格式有误"))}return!0}};e.default=s});
;sugar.define("sugar:widgets/charts/_hoc/echarts.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=e("sugar:node_modules/tslib/tslib.js"),r=e("sugar:node_modules/react/index.js"),n=e("sugar:stores/index.ts"),a=e("sugar:node_modules/react-mixin/index.js"),i=e("sugar:widgets/charts/_mixin/common.tsx");t.default=function(e){var t;return n.observer(a.decorate(i.default)((t=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return s.__extends(n,t),n.prototype.render=function(){var t=this.props,n=t.hub,a=t.chart,i=n.data,o=this.auth(this.props);return o!==!0?o:r.createElement(e,s.__assign({},this.props,{scaleX:this.props.scaleX,scaleY:this.props.scaleY,chartData:i&&i.data,chartConfig:a.config,drillDownOpen:a.drillDownOpen||a.config.hierarchyDrillDownOpen,dependenceState:n.dependenceData.dependenceState}))},n}(r.Component),t.displayName="EchartsHOC",t)))}});
;sugar.define("sugar:widgets/charts/map/china-geo.ts",function(e,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.default={type:"FeatureCollection",name:"China",features:[{id:"110000",type:"Feature",geometry:{type:"MultiPolygon",coordinates:[["@@@@áiki^w­W°·{sO¡b@z@@p¡Xj¹CKa]@@@@@@c@gR@@@@}g@@]YIYNgWT@@­_uyãVc\\»YRUoNoÇriD³zA®WT\\É¡]^{IDb@@U³S©kgrEbm@@CEA@B@A@·\\Gyf@@Ëo_DJcQNafTAV{iSÓX@@qB}¥XaÂtKk_NÁCS`}Wcfk@@Jc@@@@IOe@@]Y@@­J[r@@@@@@[J@@EAA@B@@BAABBCN@@CF@@CL@@cV@@AP@@}a@@Q|wmHV@@\\fIÔ¡VHZ@@n] X^l«jXUb@@PN¯^DlPJ~VÂhTpżv@@f~mMP^Cz¤Ð|adÖ­HýîT¦Th|fBPx¶PnnÄ_TopJĀ |GR`Hv¢vyOLbŘKXPwĕìLt^xâM{®PxÂB@@¢Ver MN_Vok¥Qcg®QÜÅD{¢_Č\\JMúKÐ}MnbÈZîWj][oZ@@¯d{[h"]],encodeOffsets:[[[120172,41562]]]},properties:{center:[116.41166495284281,39.91132325517341],name:"北京",cp:[116.4263799377984,40.19611214026013],childNum:16}},{id:"120000",type:"Feature",geometry:{type:"MultiPolygon",coordinates:[["@@ÅNukIt¯GYZ}_¥¡`g¶ZÚwBØAljEJeT@@H@@@@@@F[@@E@@PC@@LW@@FC@@S@@ZqzQ@qyW¹[Yý§ÅdċQmyyÃÍZuiėgBraÎc@­WiÓgcåYáF_ÁĭQ]tjx@@@@{m@@@n_Z{PóBC@D@@@@@C@ÑOe¼ÅF@@¡TQ~\\ wlA]jvzA@@|`@@~@@@¸H²AB@@BAGF[ÀtT@@SÆd ehgWnJAl@¡`CvjnHª´T@Vvf@@XW@@J]@@`fG@@`Ā{@@Ctl[Ø@@E|`¡Cj`ºDGxiQÃp@@WÌ ¢KÖdb^Z@@~h@@@@hQ@d@@@@@@b^LvjH°sJnYJe@@HC@@@@DO@@DK@@hwB@@ApmyWGyrF@@ta@@DQ@@[}@@sAÅhgU³Ail@@¡HWiOA@@AC@@IM@@l@@·]q^kOcg¤oK}sby^lYR|dR@@ZfÂONÆmyNa@@W}eDsEåO"],["@@iFgræPLwO"]],encodeOffsets:[[[120599,40353]],[[120640,40325]]]},properties:{center:[117.19678856634137,39.13129504908793],name:"天津",cp:[117.35343845174394,39.29430753156955],childNum:16}},{id:"130000",type:"Feature",geometry:{type:"MultiPolygon",coordinates:[["@@@@Y\\pi^íXÇYmaNÏ~ùLINċ[¡`C|ÛÆR­hRdl¦Up`MNqf¡U@@ÁAOw|­áNw]KsĖëxWOŗLKaPuzu¡_GQ{HÿoISpÃ`mmµOOwA{egSS¥þí®GÕbcÏ{y£]DONne}@@ŻuSoÁg}UIkOC°]OM@@VaW¬i]kWm^@@YG¢UJÓ[e@@UGxn{ R@@b~@@BO@@dU@@DK@@DE@@DMAABB@AA@B@FB@@\\I@@@@@@\\q®I@@^Z@@PfJ@@ @@Id@@ lde~XT_ÂDMl` LsbÁ¦W~rA@@ÔWjTU|BSeMbRIdC`Ìp@@zeH¸[B@A@B@DF@@anFqlhGimuD_¢@kBmIXhfgcTÅ@@sS\\¿EHAB@@BA±·G@@}@@@{_@@Buyi^Bxk[R}¢S@@ÆEf»ÒPD@@@@@C@D@ôA|OY`m@@@|n@@@@iw^sĮRÂ `âEæZAç IW§gL¨©ÆIúhjWS{«wg¡mkJqqQ£ıI{s@@³Uy½Såd£kïRSÙT¡aě\\çU\\§±@m{u_a·»y]ÿõg[{­¦AABBAAY`uc}X[cn@@aSfag¸o£Hqf¿_iJ½Y£oKć¹D}uR«áÉhoÇgoC{ƉE{µ_­ÅULqÛµ­dvKg]|³C²\\K{aHc@@RUPċel[c×sUy­SSoT¬f@@@@@@CB@@aa¹`iL[aC££écX[¨¯JAaïG[]ãG©eCn­~«N]h¡PSf©NUtUfaY}lOw@@@Jfb¡UZv­Jiag©{KPeF·oEmºDv£RLzfe}RJ|µXUh~¨DO\\h¨BäGÈjvG@gEh¾~i|d}`^@¸`l¢r`Ð¼V¢lnÌèĈG|r²Un»n×[Fp¢ª{Feøm`À{LJÄÅÀj¨KÛXQOxKyTsZÔZmvBÔ|T¸öJfÀ°Ex¬IEf¹gtQØRvFúàIIXxZ\\fA@@t¤PpWÒrĀDrSvz²E¹vlbM¢pDÒzJRô­QgÃJoDĠN^ub^WğSBZÑQWpt^chkěrgMgBvĳ~¤d~â|Qx^`z{Ì@@rte`°PjMÎjGÂnj¥Fp£iSZËRu¬\\^^jX´gDRd«ÂiyrBxoO|veV[¦`P¿\\kėð£z¸h²Alhqi}iX_nvRhÈ×lNdp\\jEpn°pÎRňqQÌJN¾l^}Rd]æØ¾ÂRvÊW¸V|ZnFP¦lôoxXâI^JfQAZ¯Rõ`sak­UxNÑO¹ž\\YnĄkR¬RTpNj{ÊT`t~xjêb¸N®äpDîptfUÂfÑX}@A@B@Ax[ÆO|~kt`~Ò@fpX ØX|ÂZwi¼Fz~zAPK~d¸Hl MìVØÂsAĪS`kÊUÎrz@@A@@@XR@@^L@@RJ@@tZ@@H@@@bA@@^P@@F`@@PN@@ÂN@@`j]¬A@@ò\\@@¶i@@¶BnRE¤mC@@ Bzd°YNZÂBÈkNÒ|lKGw¸d{ľÿv_ª¡YcÕ}Fi´Ôua£Pe¶qÞKvxOnvVQrsSqQªalgM¡UÒµKwÓBUµNO§niH¢sP¯ôZ°gloZYhĮpĐQ JÆwz|ÖlB¸bYĦWÜD|Y\\tzLTImBhqÁ¹O@yÓXwu^¾UYoQ@@»X]Q{ħuuzMWk°MVw¦dJvw¼B¨vfYf^R®KUs YńT¤Mtj²KZqekªeãX¬¿W@@P|Z^ÓqoV@@HK@@~R@@aQ@@RYdw{Kmpy»SeFmiL¡mi¡`½Hĝßąȣ ½BuñkÃ»q·{[so«ILl°}MoiVo­KĻr·uTo±aûyÃ»£CħÂWKÿr w° »QDg@zX@ryRYr@@T@@ED@@KX@@OD@@F@@\\E@@@@@@G@@SIf PKxtFC~fX@@MbzÅnMÁPYe@@Q{cQkZ]aztL~£pdhP]l^r¸@@k@@JN@@BD@@BjPX¢G@@jk´BhVÆgtB@@\\~@@CR@@sb@@qEHzzXonB@@Agx@@CL@@CP@@@@GD@@fImZI¯tGuiDiºWo¢@@ya@P¢|t¯¸®X]xljâj@@g\\c|°"],["@@caLÕ¡XË@@ÄojRHw¹C_Di¢_F{@@\\×skD@@ÿ|_@@eH_@@I^@@WX@@uea@C|J]¢^ÊS[X­yBC´qjpÈMVpQ¼Zd[äUvz®`@@ShXMJZ"],["@@k×BAÙxµY_h¦¢~`ZY°HJsvlÆMhq"],["@@WV¦"]],encodeOffsets:[[[120294,41632]],[[120030,41051]],[[120619,40328]],[[121730,40089]]]},properties:{center:[114.50892247229918,38.05160788527559],name:"河北",cp:[115.47515310848642,38.04308025193143],childNum:11}},{id:"140000",type:"Feature",geometry:{type:"MultiPolygon",coordinates:[["@@zqj¬Á cQhCW³]i[]v«ÌQTY¤jo¦EiÁmHÍiNi¯O_fqs@@|Ë_y]w {R}á£cĴ}AuhhNĜqldgs]XoÒRAYĠTXa]vM]CğpÄIh®RóQIyCÑoN¡kaºu±FyTuqÿCÑqoX£Os@@eB[YWwJJùßEQuR×hsºeFJw«¯Fe¿õIS·{AÓnuYYÓtzSLwPRÜWLi§Æ¿IÃ|K¿n_f÷|E©¡EoØ\\¼mVmq±H{çćmËkU¡»_Ïqk¡·_@]~_cj{}½gF@hHiuHÇã§A[gPC}§Vg¶WI{~QfyeK¤QuCn¹JqkJbK°uNgµGbS\\¹skOa}RL¿a½pßgnic»J~aD@pV¡]¹s¡@ZO­½n«ACoB_¿me¹lÏPUmL±WCk¥g¿^¥§©Aý´TĽOĹjoeã@b½csfĽvBj»uvS¯LoUgpA`ĻiE}ËyÙifW{uYkuTmÁP¥od­u\\k}íf}§éa·r}Íys·WrH¡ĉFßqxÁmZéT¹ºI~xuÆDr¢A¦^P®ÔŦLþÚÜzð¬ĊxþÎMĊiADJ[z\\ronAqiøR¾fn@¶]lxÈDan]ÌPt£khPjWRªbaNd~£vV`ÒBhYQfbzAn²¤¼ÐRr~JWb­XUZ\\ÀĄ\\htXÂpjoO|Vc~ËrTpP]±hïŎÓLinKîdS¾fhFXèpVºB\\ØfZ[\\G´VX¼kLc C~¦¨þ[jjlM{dzl´VTvSd²üKZDmlNrYHrHdz`ĬKÒ`v´ fS~h¸hT_ªnz@ü{|V¾m^]¾e¸]ºdYtVĖ~~¸¶èRtBn¤¤@ÊVBÌJ²ĲêµWĔ¦ļŔ¦JƚrqÍÒ@Ħ^¼\\ņČÚv²µN¸ ÀD¨ZfhGx~ÐOxjp¦P"]],encodeOffsets:[[[116881,41722]]]},properties:{center:[112.55565490751108,37.86330053190941],name:"山西",cp:[112.31118363708956,37.624790714576264],childNum:11}},{id:"150000",type:"Feature",geometry:{type:"Polygon",coordinates:["@@TVtAK  t@rNefwëO·ÉSm]ïęMyÝM{`}Mm£jI}ŅĆ[`ûukVtIn×ĝËßG»º}yö©É§zGfµ¡c»j[[¡××¡xÉ¥¿ÅgS{¯råÍi×E£uÿ^gv©ĖÃefAg§MQS²S«C|·y±M½Põ]gNÃ[aµBk]Ñcā¡Y¿{ķQQbTUWc»_ß|}CYh\\vUªćlhġj¡o÷|Ë¨W`z h½Òût¥©Pgw¡Jg_EÉXëpábtéwFÓÕ²İÐ¤æ^Ō İ |æĊĮĀdîGzn¯^gbð{jIx`@s®{RËo@d«}][ĝhĻ{`ÿUm]¹XkjqU¥Ée·Tiw_§n©ëÇA­miRk­l£coPw¹\\oUR]kÏq¯kwOÅ\\ºãÃJß¿éw±LK¯coōG¿^õQÿqgÛoé«Ƌ]»yƵ_ǃO[EWíai£a¯Iÿ¸ŻĜ»ƁŎ±fȃÂƪNªƔÊwľÔ¥ªόȪŸǺň¤pI°bÞĻŚt®bÊőđJĽőƕëmíÉÑ£¯mŁýĽjɣªVŁÔĉmßȍ¡[ġ_Ëmþõz]úå|[őçÉÙąÕĕ~Ñ¶ų¨åZovfKtý\\K~àĥŭyO¸¹tuypM¦kþ@ǦœAčcĝZDæµJįpqÂZÃàĹdñ°çZ­`éÚűxǡYwVfZ[NƲäøNò¦zòª¤ƌà@ɜÖÞKĊYVĭŮ§ÑBˁpęï͡VCġ¡m»b³öǍÝbI«diæĉu¶ËʃġU̎ëjÅ¤\\ƝĄËÒɯɬ_ȜưǋˤŷɎŉǴǕ˶Ģ[ҤŲ̀­̐]ΔҦϨäBɤY¬°ф_Gήíɠ³ǴgMØÏǊǛpO̘ãüfæOøAʼŁƺÃǲåIΐÙǰFȔĢhĤ^KǳƒcĪNĶDðÏȄƘ¾CĀ¢ǢüŸ¼ɬè˦ĲzXȬäƢ¦ɠzȂ¢ƎCÔƌFǠW¢ThÈFŲr¼mȠJƠ{ĀD gŚ®Rɠmǐn´^Şð¨hƠ¶ǞLǬÈö¸ƊĆºîE`¤®T¨¤ǚƴ¦xæn`ƞ´nĜGpǀƄĈBºjh°UÚõĮćÐÑrvēĢcO²wßtYX¨Ąd`vSÐrºÔÊæÔĠŞêĊÌLoʂQPĐÏ¸ÏĨ©Śò@ĎcÞo͜keú[äò¼Â^ªƄ`ªvĺÐZ¾º¨ºÐjX¾¤bŨƨ©ÀMǎdǀIȆ¤ĨfƐĨÔ¼øzRpæK¸TLt|vAQ²VP|úŢƖtFĆĄvZôÔDÊzlzOȄgŴVľMXOlb ²Äy®ÜhĎFvOfÀJn`M¶hEt ÊNVb®@Þ ÌJ vNpĂWoŜW®zmĤU@~¶®ÌHCW¼pÀÍ¤|`¤U¾BÂVb_´ºSÊJa¶RvkIiÀV~Q\\°Y¬@pehaÂN¨Ç\\]¢§¢G`TÜÄõª¹BQ°ĝ¦Yt«hgtH¦Ɖ«jcḷ̌ĚǣȆŁHif¡BkSÉJjBTõKsXca±a÷E×\\×QʅȝSiuEĝıʑƸǹÎóHķMǻ­ƿœ­gYţķ{K̟ȨƶJ~_jʀĐZDoɌ~ȪɄRV{¨͊ҶʐΔfB˪ŹǬ·ǨEź·ƞ­bîJx`QÒF ªxS°RÂ\\pÎb^f[r¶TKBn~KÈ~ÊUn\\~EƢdSĞNRGf[®¢hHUvfLpjpXº~joM^ckwjcbj^§T¬QLvxPXD ]zb^Â`Q`BhV´ÎUPhaZOªâ°z¨r¢N¢MpdWtfNb¨wpZWq|hcdÖnAÂp\\Gb¼TXh\\ipFnbanp¨^[|ðB®ÌnJvMbänB~ÌGAtĞfLvZsVCjvvX\\pMzvj¤TªHizXwlE~RIhKr|gd vThHkhJßk`Ã{ěNāÏR£AuX]¢¼ÊÎ`pKÚvCl°`Z¢`¬Üèr`~xJF~ðbCe| T``®K\\TĘM`}vRÒIælzrâMìdJ]ÒxHi@gGJs¶qB~Q]yÏk£]«iKgbg{y­muoMkç«ÁMaq±¯ik°RW|¸YHm¸ajDryJtc¤Bqi{¶¡As°SÔsºC d|¸J¨\\UZvZE^|HTq|iĒL`_br@Xcizf«Kè[taþVi¦Vv]igF«u[¿E^setQ^»hqJF¹o{hWN«o|£JkuosgLoi[l[ubm|SH}Uhc@ÈP¸mĔe@UÂ_hKXtOn`ĶP@ZâXCp¨´ì¢NiZ\\²RÜCfjLÂM HtQKÊkn|EbvFZfÄIWÈLºrX|fJæYl|´qxVp²Tjl@vpY¼|DDqJY^ZºKxq\\|mĔ×wJEBElWBUDOØ«©h[B¶@[\\ÇOpbpIcêsP{v]smFqiDxkwyQZU­YToc[qbsQ]Ymo^kW_nmMalyqAaqYb_uw¡JcUjy_Md[]ruQVeÉFyqMNiwJOyWoÃFYiozSEoIWiuZaI\\kgeQU}FRsxY[]iI\\m½]AcilOKµHdqdDIcv\\ZrDH·oFd«[aAl]iiJhk]ÇCyeëLf³[Ûlc[Yhi³©­Y@NeOSuXqZmÍo·zi_in¡mdeM£ziKmkyjM»dcqmwAYs¥S\\XG£FKRx³W\\|mjnwlX ¯Ļ×µs¹ſķį×ŁěoȥËÛ«©ķĩ£Ýoë¹ƟÉ¥©ÿó§nlm±ªÄ}AĢyPMsÉG{raO_¤I²pCÃ\\õøNnW¨tvS¼JÂrfC|Ø\\XÌCz±MEUð¯Âv_ĉpe´CZjBzBKovii¦[DíyŇEĝQ¡aAF§ytéUihIN§IR¥B÷àñ¬¥§¥CqETMqoɅuƉy±y@ikÍ{QÏIkSLc@QÒ¥¶ëBV½H¡_atğrM ĥ|Gb¹EilqAµq¢X_cXs¡E[WµPYelq¢uĈ[Bd°\\ÊQcÍOq{ExR¾ĔX}BßüiQÍs£DTÕk¡o]X­O{A¤āDÌUua\\O¦RR_w[yTµfÄczH¶CRÇEči¯¢oƐH^łDx¶ªĄzƚĂX¸JZoWbwys^ÌmäýTÀeqwWmQF±]}Qv_ÐčK©_{Cuf£uQB÷JZmvMOmýl±ct[w¢Of]¹nzPtZÂ¡ĄHKĉOX}]j{}I­§©OF¿]ģwÃM×ËJ{g¶wğ}¹ßRqifAEe¿¡\\I`ãGyQ`I|gRĳ`ïYj­ÊMl]Ã¡@oµ][`ÁV³@¡@ótU\\qáUDmsSJ§£YX[{_V¯}£A½´HlyÃKw^i¡CçTM{Ç_§YgAcsWn·^§U@u­VSs{SLqią£Za_čvaNµsVÃR]WWi~OGcJwIIk³­X»VU|tQeCêpE¨u^Etqbk¢}fOd[ąEÅz¿ZOp§ZeR@pJrg¥{ícËKk]TlOLwAyQÇ§¯AbUcXekÇi[twBgkP¡ÖwHmµAAkI}oYCÇali¹±WyK[s{ZÛCĥXZ·aAÕky{ÅxIďRĭogZYkp¯hYóO°¡tGmjP¨¶MVAÔLxÑ¶VN¢kh©b RTrqtRuUPmuwÝLµrOfb¤Óv³EjÖ~Zd©¢`uĽĀc|·HxkLÑ{MÇlÁAMY¯ZcAynDF£mQµAµjñ[«B^_iÁMOME_]OaBG@sYQI]KWQB@qyVÍlÉ_ĩTtBÁU×ëNk·G}cLO yBy}»EjxÁYW{×WeoÑ@_}ls{}ÅPw\\@B@A@BW~ÒÁeeVosíCão­M·éawi}_sÉSi|oMS«QQălmZŽ[PºMÒw ®Vbl_tQöY°BRIe]áJwWóp¥kOmEY{·UÉXQu½Áå×^Qc~k]½MIRËŇrÍQ¯oomiF[oMcØkgÇuQ`mWjj~rgkB±·g¤yĘïlÀ[_O\\¥fU{upPAw¥OioPw}ÏHweg§Y¿C·M±¶ÙuŅċ»[ĥ]Ñ@Îqrƙ¥Iœ¥ĻēXé¶ı±IËAUÉ@££AmQsµç}·}UĕsZ¹c^·½f]^½n{Uû|y@©m`gSg·T}eu³Ñ_īLy_c"],encodeOffsets:[[113800,40318]]},properties:{center:[111.67741976306763,40.824033768690825],name:"内蒙古",cp:[115.08378545846068,43.33741790841639],childNum:12}},{id:"210000",type:"Feature",geometry:{type:"MultiPolygon",coordinates:[["@@@@¨YPoÀYÆyĆF\\cP~el¡raFsv]F§oéfDRsV{¼UW´®JlxJIHd}PXjXQ^ÄtU¶MbuĎb`YĆ¤rjK|TTt®U@v@@¨V¸]mXdtBZh¨È`|SNè¢Djx]ÄLzGk¾³B¤°~`U\\|ZW¤I¨tTCnâVrV[ôs@@¢´ÂU\\_¶^@pÄ¢k^ÉNi®ðZĴ_hQJ{_zRäHJ_¢[À@@@@FfBjeràQºĠ~µxhI|ØÌÄNĤx^ÀEP¨ªJ®~i|~^WPLĊL lC¤d¾}@@K«|]@@^ÌgÌ»ÈZdaE{°EX\\k¢CVq[}þ³ºýáq®FfaUy§eQÂBĶ¸jtZFpn@h|R¤fJ|ĈbL¹¡|FsoãP·bpC elµymnpUGza¸N]Nompgk_QSYeAf_]R¤MXmoo@WnM§ªCVuF@@oHD«N[ÑyM_ºGYčr@@HK@@ZE@@E³_xIÊh_^W|«zS]s{B§\\yIRjLxgcunmHRT{®BTYi­¬WsOk}vKYS¡qE]{UIÊteh¹OwURgËIruK£AkKEHn]oduKaåQÉM½yUYBaµPevã¹ā©a¥ă}ħÑoK{çÅS{{m½sAGsCwqmă©Hčo©dś\\cQę][f{EEw}iLsU©sM_íoGpHÛFGbW[NE}Piw~ýkVWwMk}RçBYokŃFYw¯s£aÝPµqo¯é{sNY]SrwU[¡Z¥¥~`ÅVQU¨y^wµy·|]ªFewÉXOaEÂuU¡Uµ@­\\¯µġIT³G»Ã½Bs¬bpcÀfd`Ix¬DpeÒ~ÆRo® ºàLÖdpzzxªtE¨¢@cxJEn¤SI`pē¹C§^DfVExßh}Kajeq`B¶¼cteqDbvGľpDBhxX]¶¤Xp~Q°bÔ²ÆI^Tb´|vî¢ ºIRmBSðF\\`@¾T~azpwTrvbcrWBllQhfBBăÎat^¶u]±QtÕN_~Cò§H|wÂOsE]¥a±\\§KoiDyDux¹FBĉD©TaoK]{·n©I£«TcÙ[GnAn_[oVmDH¥HsëE[Nu]§ÿ¯MowUw©[DiiLÃ_iD¡±máEĉ¡ģwkFŧIogÃAQZ@@Rb@@}Q@@GL@@Upr]Ô{YO@@X«ÀWfä© flYr±Lsi£NŃSZtV­L]Qe eZ§u»AuxcI¥Ux¯NXlyNvv|Ĩ^R¼W@@pRZ½V]xvÔWz@PÂºgrAJnS²XºkjÈbDpZJ~Bl¶BGnÕxO¢hlAsxj\\lÈWfdaVB¨°RÈzBKxkPS^LlÌîd¦|hqI@ofQ"],["@@JAďBãP¬¢Ve"],["@@gxd¦XSo^yZ}s"],["@@ABAB½CNTĖLXe¯oIv"],["@@uWw~jHm"],["@@\\[¥r`¾I"],["@@YIDd"],["@@YNrSFog"],["@@~MGo"],["@@a^B¬²]Ji"],["@@FdQQ"]],encodeOffsets:[[[122435,43311]],[[125625,40219]],[[125279,40096]],[[125644,40181]],[[125712,39969]],[[125982,40502]],[[125451,40190]],[[123693,41451]],[[126048,40380]],[[126124,39968]],[[126693,40706]]]},properties:{center:[123.43572520225906,41.80244393685758],name:"辽宁",cp:[122.61179789392311,41.3058900045263],childNum:14}},{id:"220000",type:"Feature",geometry:{type:"MultiPolygon",coordinates:[["@@@CieAR{wRq]bi_SP¡±Bv[gmÏgfÉsJV^|rFT¢ZuLl~tP«Xj®SZ­AS|QGmndvwhiKQJ[zA¨|^tyT{¬X]`ÉgwJ`F´@@YF@@GL@@q ZĎH¹N`ÒzM\\¬ CGp@@EvU©DN¨mX@ppnW£NQ^e`BfTZRl`ohnMp^·MybHoVmznk¶foDaO¸päEt{¢Kºća{IeQ£g{m@EosYiĵ·ÁAR¨fVzeb­Erþâ¹ý´\\~Ur¡D[lW¯FF|cbÇYË¼Ëh]@@{^L¬@@½~£cDkKăGÁ¢sYOmyºe^¡P\\xs²dþk@@PnuNYnøIAvRe¤Dv|`ªLÏĎu`~R^E²nRXrx¿fSãþËn]ztaxXYp·IWƙāăyµ©wCŁ]ƏG¡pj°FĎQÈµDGyÃdeS¶\\zxQ`¥QP[vbËVC£Ă|BPW®p^l¢SÖ¤CtRÎûjAàW~ē½Qw|FPrÎdÉR¯[Acć\\¡vkrZfO¶X@@F\\¢Wt`dW¡¶rrBjkºFHaĦ{NĠqsb¢`GU¾ìA¦µRÑd@ KTlÐJR|Îjlz@z²ƊɆvrpNSrFD¦ÎvoHk@@ÖVnSvÐ@@zÎLªC¨NÖ @lf|pDOxyom`~GUotqmclYKrWLs§On}OIz}ÄiL}Cx¿\\kDyFkW[itGeosÄbXMQ{p_¼Pjaalraè`xWXIx¨]Ä`Q rb f YC¬vvCpÄCrÃQokaxªUºf¬]dh{rSn²BdcînvUzNpBóc_°uPwtBÆJQJ}¦PiªCp]¸lT[¦lRdÀL ĮtlSz\\ÜwIUu @°{LoÂVĜ[N»^Gg³g§Qms_¥Z·«SZgC¿PqxJnS C_c¢Y^xĮOƒ³Zq{§NgWC¡mwþĉ¥^LupïM]®ut^Kbe¦Dpþ`¤zEtyXXX¤l\\_tjhaHUìb^ÄnDZàr~SMkrK{yMtge¿dSkl¶ÅTµt{|WE³ºVY~hSj§}gGf¥\\¥ÔZZ]¨_rd²PªnpS¾D_ZEf^iÚoh`[¸lVpPdr¾IĺD¢XOGhEnÒÆ¤ZYxpHzW¯J[yf¨adJtx@T°°@TlXFA§uy¯[_foQfwByf¥rK¨R\\gÎS@@ºGMILe²K¤ if£naE¬¨ÈpĮéfvE¸IV^EIegf£oKÑ[¥yIdWU¹gC©Ccb[EKM{{så^a[z¡ÁUj¹qzAc{F[W`B¿{E{yÇ]¹dqeÄ^ÂËU}«]I§k@qÃTJ¦wVCxºFHmbe_WlnsT]]xh¬P_zF¼\\¾hg\\£ETQhtRMnpl\\cIq\\CS³SNLWkf{yGU©gaI±wa¯|s}HUT{¹Hizo¡¯¥¨z§PmPlJZssFkub[ï[Qg|k©nQ_gECixGN{£i­ÃGS{}_Ja[C·¯OđtaQb}Aib}KQmċMh½AġPǡG³mÔ§T«W­R¥Wb¹M¬«b«aÁJiÇK¯qVjfÑB¤QkidNm_udY_b×NăG¡Sch¯@akS»VMaC[f@BYÅj@`¡f«No^oY_¬@OnPTdÅ|hvMJuxEZkPÏk}lQÝ¨yCIoaYP_yafm_Áš]cwv¹mÃÁemOÅě³"]],encodeOffsets:[[[129224,42108]]]},properties:{center:[125.33107201037413,43.892575677007876],name:"吉林",cp:[126.17788454210708,43.70960674928309],childNum:9}},{id:"230000",type:"Feature",geometry:{type:"MultiPolygon",coordinates:[["@@@@ÏumTÕU@@lGpÍu¨«¦ßòAøQ¦¨JMJjgêV s¨zEB¢bĞRňFzCî¥\\jujLpyAAYi³DofĊ`Áuï°VF²NDyËW×[D{qeÁ»IuT§smXM÷[öDÄ±o£JP`qbH|ÊNtOġz@@BÃ~@@©²nk@@mô¨Ā¦ªƠÊìºÞpĪ¤ĸª¬ÜȦÌpłĜİØƀĸº¶tļØ@@°Wxkimn[{X´QwL¤EHW[¦TZtxBrncd¼iNlzLnyjN¤cf¢nm `jyj¸pnÎYWrTvPfM@Z ª®j´gZ\\dÜk´\\KeìfzD^Ègl Ijjk^B\\bc¬pEG¸qC[YuJdCrcGcL¶kPdjB¾^[njJ\\^wZQtEV~Rhf[lJbvYXjJFpyTjpZÄEp XPzxIjMrNEzÊUfvRq \\^c`NizdV¢Ivx`ZabrrBzkNbmnX`]lpn^ZRtrad\\Sp®ZYVRxzl wCrjnEtu^O|tédoJoaP[È\\µ@A@@g\\@@ª@@×¬@@CP@@AV@@kX@@AF@@IF@@@@xēØn{[wr¹L]YZICr{C»Zuo@ik±SUorw³k{åZeIW{¹qÇKXÃJYeEauFm{ÉlLsRGÁNKeiÛD±QY[j ¡Më§³DoáW@YĵOm_sPWLgÁ`@Vēf·nÇO@gdVG~{Tanvk\\j\\KphptvIl{¤p¬MgXp|EºIgr]¼sRf]tÀF \\vE¬jhu^¥UjýUsbç\\L¬yejWdq@a_`đK{jSr{GF]uYVY§[I·{c¹DÓt¯TBtµ¢j|r£AsdIqziC·bGn·Z{X¯Ql°j²brÂNè¬lNvp®n|zahLh¬j^¤ÐlzR^}AµrIthH@jwGÑI^ø\\Ğ´G¾rºZŴF¨MH¦ÈORìp}¾}¼\\IÐXÆKøJÂOÊN¦jĞnDSVªZCîmºCfwvUXVgv^|MXgwqCfF¢a|¢DªUÊ@ĸ¯xDÊ³ÌtLö¢×SpqªMTSÈIxLôA_Q{n_®KHhkê|ÌTĔB¬K¶cÂxAĠ¨W@xU¶|tFviFm¶[I§Ó}DXQhzDlb²@vMBsÌ§\\{|ufAHÂGWÉcz£WcÅDqkEojuwrLXläÆgXsÂR¸§vIw_NĘWHkF]}K{Y¸O®gI¶qNa£çuJ]EehuI u¡t¥_\\}ªIT_Ud¿boŢN]wyP_cØOlugÉJoN}CZZYrdTjêVZ[Mw¥ud½JÝÀÈÇÀs~yüŅºuTkaLÜçSk{¹XW¸aL¿ØsƂH»gïçK½¢¥H_eÃF¨ÒKj_FÉxÞè]¬bªGÎ¨GÂ[¶pH´mĢHVèUaºYz~¸YVq¥C~Säh¼qæU¤ën[¸CzZ¨E°EjXG `f¸PÎcxybăgþfSO£qÀCboQqXiKl{_cfiìg®mĚ¿fsCŎº@~¶G¦hÒ@RÉÇā«AoÊeVeJãvUÄv²ERy}Datw}}QeuGû»Oo»UĎ±j_ÐċJādicðIÊZ®~NòQĄ`ôU`URnk¨H¤ª@ì{ÚRÚYrîSÒFRG~Rbnj HĈöQpA¨ltts@n|f@ s¦AÄÆĞrfVvtÞrªB¶S¾oĚlUĀPx¼rZÎUvF¢Ê¦NbªJÄh²BrV K^®ƔBÌnÂ\\Ü]ĴDÊ´Jxf\\ÌWBfxkIåũýûMïÏåÉF§R¨OfcOgRĂ¯L¡õßW¥§§yQSkųMUEi»qsiiß®hwF¡U{ãWq_³sX§A_x}gkE¥gÑù{Ñ¥Fs¦E QgÁgOo®M]mVwQuIXa}}xg}i·S_{²¹Iu¹½I½AF{tMiiDuuID[OdOQu[BUpa·YV}G§sQPóA§IykMDÁu[Ta¯X¥`QZD§EcugAq¹ON¥đh̵èȁ¬ƝwnT[ª}HµGgJFjg¯SReÁ³Ç}adc]¯n{MsVoAguWT±aGh`ÏqXsocħN}I@s¢CJwr]EylOǖ֍WgábKQ³³Gf·a_LdWmµLgm½ÞxLU·JuFeĭêÇo«§Fmbe¤j£±LKfJN¹H@@ÍT[h§QqLe¦zAexpRe\\`°vzB¨EWkS¯@¯Sw@Isc§be\\zI°yXGwoYZÅ£mÑFHgP¡WĹC½JcqOUo·k\\g_pjÙe]F`YC½oT©m±Oqc§`Y^ÓY [¦¦eH~hi¨gT}Z¹UF´{Xs|S¶ÆµklcTfÀshzNL|qNl}TqßCYÃma]ëVGgbsi`[kW£WzWFs£yý_o¥CafLs]­vN^oðv]K¦ýĊnx¢DhX¨M|YrƑ´ĭP]w¡Z`dDTImwOrDÀYhT¬Y¸`¦nt¨Rh´h]HM¼ě\\ÁUKp¯|@vJVÛxy[kTĭs¿KQc¥kS\\·ko^©Dj¥OI~RIÅsAOx¯v`dAôoyMVuímcd±ATmq|cg«^¹e©VwbplRqÄÃDouDuD«ZeaqRÃ_§^JwWXwç_qbkbbi»Oo`R|NWÃatfpsH\\jXElzC[lÀw~DKÃjy~JPm~¨PKtqXLkZndsrVp}H_pnwzPoCe{k@Õ§M©DÍKy"]],encodeOffsets:[[[126542,47340]]]},properties:{center:[126.6490649317503,45.76274263234975],name:"黑龙江",cp:[127.69942004825057,48.046773516679686],childNum:13}},{id:"310000",type:"Feature",geometry:{type:"MultiPolygon",coordinates:[["@@SÞNl¦NôM¸raò~ ¢anNhBa~|d¶ÈNa¬n@@Z¼İëàiļÑòęŘŋ¥\\¡Fė`wYȇJã[ë}ûÁ©óCC_|[©N^ YmpzwdP¤WÜbQiN"],["@@jĽ[{ûÑRŗ®³Tß~ħºKoéÂťŘuLæÜÆz¶J¾ ÁÊcĎ¥IÒqɖ³"],["@@§ſæ¿XXSf{ƀ¡¨B]Q"],["@@Ql¬GĚöYÜGL[s©åxëBûXCx"],["@@ªoIW"],["@@PZ¶OY»Aa´"],["@@K]u"]],encodeOffsets:[[[123810,31768]],[[124910,32382]],[[124709,32069]],[[124732,32116]],[[124553,32206]],[[124877,31972]],[[124815,31997]]]},properties:{center:[121.47917622247735,31.23766067156306],name:"上海",cp:[121.4451336279875,31.078921633091007],childNum:16}},{id:"320000",type:"Feature",geometry:{type:"MultiPolygon",coordinates:[["@@@@TJ@@HL@@bg@g¾ÅØc®Gbx¦Tt İySÄDÌĠONvRĐy~JĚsim{DÕAFv´AZhøStZV p]ò^EYî¦²PLi´@v]¤^|gdJh Dz¤J~²ÐDèÆt\\Sî^ôAnäVdQh[O^_GMiuÉF±W^¿jyAoÆSÀHC`¶}C@ħCÚGÎ]»½Ĕµk~oŞ­~}ŶuŠÉǬíD©ÙhóĲț^¦ħÊýÆśrċz}Ehy]rw~įCk^grĥrQĉg[¢c`co¸OŐÛĮêQ[{růgL©ìscaȠÝZuìÝõæůJďɕ´ÑrJč¦ÉdÂ½µIÅyåÛvKŦŗêÁyY@@«mMbÇµ{cb}AgmM¡b}bñ·qóN¥MkMTÝwd¥Uq¡R[_rkJ£EyÅPqg»Ý]L{ÜcjMºWcÅ_Z¾¯_ýKÕTh·¤§n[qÄQ§Zau}ÃSSaw`¯qkÇ¨ÑGml¡E^qYHyYËh@t@§C_ùN}IħJÛW¦}DKt¦lQ´XzdĜDfGmº³GyÂuOWýb@l®hYzÍW]_ZXp©XnÀbLlĝ¨t°JúXÊI^zŒ`~cªvcÚLÎ¿K^b°vHp|^ovb|Kt@@`sn`xknnÆtcHB@A@B@®©ÄVÁ¶ t_lÌfV~mFÊwİÑE·¬äwF·gDFb@@AEsCUÇÉA@@Iãf¥cÃrÏqWTÛQnwDY¬{QlBÀ§DcÈflVXn@q|A|qòEÞv{£ġCd£|UCEbf®WzT¬p´aVĴKn² MÔ~«@w¡VÏ{·b©Eos`ThĬKbW²A¶ay_s®{náH´iVgYÅF½MvÝpk`v®çÀ\\Äm`Rt»hågOp©f»BÍjDfē¾[`Cj³UfÐyJJNJĂĦZ´^Pb²AĔkBxLZ@ÄN©B\\{yIf¬Y¢QXT ÷WxýædJjZK|"]],encodeOffsets:[[[120134,35398]]]},properties:{center:[118.7739275401509,32.04749630515097],name:"江苏",cp:[119.49289917813071,32.98983676715044],childNum:13}},{id:"330000",type:"Feature",geometry:{type:"MultiPolygon",coordinates:[["@@ s´oftnd®¹f`feb¼@@@ÄsjĢÁ\\}üÙ[¿Eev@@cU°TlvN af\\NJØ¼O^W`~Wª²ÊOS´p`dk~Ī^J´\\¤`xU®ÂGÜČÜC²FPüoI¦lB@bÞq^wÆFÖwÖw|feØ]NV~@¤~pm®vTÀD¼Ur­kzzuìlh¢ldH°GÊ¢PxlHeLfZC®¬GÈhfst°x_TbÄT~bv¨YRrÃ\\¨m¸£gÖSþL°`Y½Æ`XdN¹di|Û^K¼ÞrhÆOzFI¤ql\\`¢Qr¦VcxMRjaXÛO£xcyonZ]ªM\\`{Dy¥_ù¡úå}ĒMwpĒãÂÕØīdB ¿l_ÀB¨îªFyŐTHog·»Ç[ĕākf´]­IuyJhscuCl[Y¥°KDeUJ³oBBceGç®qg£p@W´e}UěPsqA¹®}A|±Dñ@d·_ïėwbSÑYX§rnÅ]qtPTmç¡UQh¥D§­­yÁDyÉïWPiĂY\\£ĩoÂ£KÂX@w~MA¥Y@@GQ@@]]@@d|CjC­°TÏėj¿©o»§FaÆç{¹O½ïsÏja{ß­i}Nµ¼C zRñĖEÉUUYñ@DcY©uLc£Skā{ÙP\\nVXzudPLÊep}F^PIfVÃOcBíyck³]s¥k_KÝRuZRQ«Zeh@Fm}u£Xà|J¨¢KÈĪUÎÃ~onH¶]¢XFhAXºiCqoL±gMrăiCqbU"],["@@CUfá[¥ÊXdMp£¾jnĀ T¶ŠYKwniCgCrÝv"],["@@qrTztP["],["@@DAq¹^fV"],["@@dL~}¬VJyęBB"],["@@\\l^m@fy]ÇßVă Ė"],["@@bpÖ@T©bMgãPL"],["@@T|gcMZx"],["@@QBSJ]ZOvlje\\Zl@Y^{J]¸"],["@@ß\\_ZE¬ĄS¸aC"],["@@rBsW"],["@@°agSt]]½wz\\"],["@@|dpcU"],["@@xZdJ·fsÂk¸«N÷´y|sö"],["@@O~I{s"],["@@X®k]ufÀ¢N^®Xi{"],["@@EIRUI@IACAGRBDGDBDB@BDRHACDA"],["@@oPZzV"],["@@hzlUc"],["@@oRVFi±"],["@@eOt\\Ti"],["@@KLIÄR®KRµ·qZ"],["@@B@d@d"],["@@rHFwz"],["@@Oe|v\\"],["@@jht¢LXi"],["@@nQar~t"],["@@A@C@VdyV"],["@@NzZbI[q"],["@@@@@A@B"],["@@D`k½YV"],["@@fpC@mSsV"],["@@qhn`j[ek"],["@@»VªDs¯o"],["@@]`vn[«q"],["@@DAFG@AUEAHCBFFLB"],["@@y`p\\J{"],["@@Qw\\n"],["@@|B]s]r"],["@@||`Qi"],["@@B@BCE@BD"],["@@D@B@E@"]],encodeOffsets:[[[121283,28974]],[[125102,30715]],[[125154,30917]],[[125170,30431]],[[125373,31483]],[[125102,31065]],[[125260,30982]],[[124962,29886]],[[125316,30617]],[[125376,31145]],[[124769,29467]],[[125206,30569]],[[124721,29787]],[[124877,31522]],[[124822,29162]],[[125122,30369]],[[125408,30669]],[[125519,31386]],[[124802,29112]],[[125336,30697]],[[125002,30911]],[[124782,30703]],[[123979,28145]],[[124886,29895]],[[124974,30481]],[[124892,31021]],[[124874,30844]],[[125094,30697]],[[125230,30444]],[[124049,28460]],[[125206,31003]],[[125225,30584]],[[125735,31438]],[[124012,28615]],[[124101,28641]],[[125400,30682]],[[125791,31442]],[[125140,30695]],[[124965,30681]],[[123957,28657]],[[125418,30652]],[[125091,30697]]]},properties:{center:[120.16010475263418,30.29339488572421],name:"浙江",cp:[120.11636288468237,29.187764563084855],childNum:11}},{id:"340000",type:"Feature",geometry:{type:"MultiPolygon",coordinates:[["@@@@o°@@¡°Pz~doFrihV¹w¡J@@OO¨¿tLDjza|btXYxL¨o¶QRhh´VDi_\\Ĕ½CeÎi¼AªePoæh¼gQsn_[Ãè¿u­l_ÞoNu¾ÆEhZUj ³Gâ|mt­`bzBµ±XLagī_StpªF¸aÐ|¢Ux¬@}NÓ±LmUĳ³boS«Xye­aFDV¤{DcĢ|¤uFÝrñB{r{@WmUekdÇ¨CA¿k|RZ«CxmÜRXSÐrÄq¦deJä@@ÊBVÈtDFB@@EaC¸hxEã¸«ÒFxįEÉnU}Ëe`ksµÂÃU­ªA@B@A@GdÅsmmwlm__t@@s{Luap{]Goua¯]ÀLKÍdÙud©}ő_]yJÉWIùs¯Ğ§Kkam¿ªWWoY^`ÎXZyg­@kþaXvPzÁ´Hn¹HcBU[vKěyc³WkRs¥L~C¥ÜXĨI~JúMD`¨@@sÌgzZGZr]¢FnkÒHÈ§rltsgeHÇ­«DeYKfkGw¡OHÉ¯Gc¡kgëkvyy®lVqC»¿S­uon£}}@UM×^f{eÕxxÕExÅr]Ý@aAkJ¥pOû±EDċÛHÛ­ÁwV_£[I³ĩ]}clo_T³ÉP±³nQ®`d¡ROnZÏ{»CßpÅiLW}hoÃEiNpNxB¾¬L¢QoyisZR_{XMiC¯}¦\\oyoHÏFkuSÅqËMi~ItÃ zrNDPABMVsFöþfUĐĐd²oC yOevuE­nEyŕwWµCĿ»¿{Go¯XQMà¯ÔdÈYtT¢ÒTpÉ¢YçpXr{u^ÈmpUyh{GK§¢jÊÌHZ¸_\\bÊvÂxC[´AQnËZDr«i{gBg_ÝöT©c{¨@E}äMVlg`be~pÂhQf~thEļê°Wja@@`SzkdDr²UphºM jĮ{¾[ƎÊf|\\~teR}ÓËc{{hïShqmjK¡n[rBB@B@@C@Urõ´FvěmB~Kq`AeÚEºTl`kvPPağRJtsPÇIwhR|EYÈ_FL|rKt¦_ńDv¨\\E\\dE°´Iv@HoyL`vY|@@®lhzax¨VĈGFZÜRÖ@º°Z`YdĀëL~ÚBpz²D`~¢C~bÖ[LsrA@vxe®Ce£Þ±G±fovBn`ÀH®ÜZ^n|I@¤pÔXRvÂgZRCè"],["@@dACeuLV\\"],["@@NUBACOqMu\\h`tE"],["@@D@@@@AAAAD"]],encodeOffsets:[[[119405,34837]],[[121728,32283]],[[119507,30427]],[[118288,33254]]]},properties:{center:[117.28960111387359,31.866967646899777],name:"安徽",cp:[117.23329846078855,31.855547493510652],childNum:16}},{id:"350000",type:"Feature",geometry:{type:"MultiPolygon",coordinates:[["@@FMrA@AcgËZwk\\u°QDg±MÍ`}ud·{¥NFb¯mFŖMÙß^euRvXM©Ç½±OA¼ËNãXŏo×¢epy[ġQM«~@ ñE±{gÁ«Q»cwMµµ]}gÑDgWg¿Ps·ñ³ZUQ½]RÛ}íIUjĉQ@ÊroKËOÄyM®@sÈjTJÊyRm²HÀÄ®mHJ¼oNJq~RfÃÔlfyLD°ÒtğkamZ{aobVÊK}~FpLl`mMe£u«QN{H{¢}íF«²}MÝr_\\mn°D§¸°~iwPPyIÚxh²El~_®~Àc°rFp^k¾vlA¸Gn¸¨h£@¢\\KlnNSzrĖêY¸YXP]xºrTlbh¤U@¢NN¶~¢wA[·¢^`ZØI¬[~J®¢~ ŜQ¸tv_îO ĖĂn¤ZHhRFÀtzmMØumolP|irI|df_ldt¼_~N@~LªNÌw`Hp°bNrvXpQ¨_®đYwnV¤²CÎ¦°HtlWxĈgCZOrjWtĪ`JÄ^~PqzĠÎTEV aDrĄjNq²hpKrjD¹ WBgEW¡^GµpmÄ}VÍĩLÇ¡I§{ß¤W~vEn@fg¬YRQvYÞQL`¦lt´^lzdîAdÄPUeJO]~EfoKÉcOvyUW[mÚOĂ|l¤TdvKªZCdò@ZVÊVFòĕyQD¶»·UgğPZ­iOJiGwÙ©ZÁE[Å[JKjwF}EV©qz¯q}\\±D{kTaå§^pÒ¦|¢@p~ErÌ¢SdğCI«ReSz}hĹGwmc­wxuÄnÐO¢w¤ŇAi¶ß¬fRmCe^_GbāmW»»^¥{\\ÃNpkyěµ[ScCůmS@{¹@ÏmJÀMKªN|IpALn^Bbrî¨J«®aWeªm_@Isnq~CDq»DoRíKJOn© D[Rq_{©Q]PrY¢map{}¿HlxknJryJq^æ©@z_¥T»Å@sbZ¤gXiZucFMØin§NbªI¢£gNh¡{zY· o{|zQgõuY¾x·KSFFnMhePÅc]lzN_rDKa@uançm¬Á|GP]Ï`G"],["@@OtÍgs«`©Yo¡~X[¬hR´y´"],["@@wJA~lx]tPa£qGct\\"],["@@Bn~h"],["@@Kxzddeu"],["@@FI"],["@@Fqygt"],["@@U¥¹`_xtàªh oX"],["@@Ss}Y"],["@@pjjcmu"],["@@DxJImS"],["@@°dD{CW\\"],["@@bl[a_\\"],["@@cf\\i"],["@@xRhHa"],["@@a|npY\\Tmo«O"]],encodeOffsets:[[[121868,25576]],[[121261,25110]],[[122346,25808]],[[122457,26249]],[[122863,26826]],[[121075,24993]],[[122792,27337]],[[121048,25100]],[[122815,26768]],[[122521,26763]],[[122922,27131]],[[122541,26269]],[[122642,27259]],[[123026,27195]],[[123256,27570]],[[122547,27274]]]},properties:{center:[119.31274248535382,26.081376135578243],name:"福建",cp:[118.0129436390603,26.07562574788706],childNum:9}},{id:"360000",type:"Feature",geometry:{type:"MultiPolygon",coordinates:[["@@X©}X_]»PI×M[beMuSk¯dV@@fuFÀÚ\\~ûÂ[ġti@Ã@@a»f_eºec­smpet³SFğÍryO]}IÃĩ_sXiPqYDćhwkXs¯GÍ¥D£±mUxZ­Ē`§oRWquM¯aGox_MË©K@}}M»`cs`kce{qJjO{knpvN×nsyE¿QGgYm£ĕāPíu`·sRś}­¡I\\}«JY×]_¸¡\\xB}¡Mµ¡M@Vg£akqSw¹^OWZZ·ĕéqTyMmkL¡[@¤§gm·HB·ukl½o]Eqd¯}¿`­k}Fg±ÙwJzOxOj¯}¨·¯CnmMleaDxfacKsÅZaiuZEkdFm·LkÁAcºÇjE]¾fºÁg]©pSWi×cãiuHiVÁ{}Xaáqgme]r©GR¶M±lĕÕuXWÈwhÁIUpË^kĔVTp®tN¶°r`OÖºvBh¦Hxlz²NUrxÒlA£bPXP¤{ÝR¾·~ÁJQ¡sÉjgM±N]dÙ]uyD_wmpX°lÉªjx·AdðpDEÐuXøNTº´´@ög¼Sh_Xìn¢i¨Váu[gÙ`§[p\\L¨zOnv¤c|p@J¨hvEøõdmzëC«¨MĘc®\\¬b{®diÀCPÊîvÌe^f@ŧye`AWvbnKrIj|A²DlÄ¸M¾y^p¸Ò¢nSf¦[nv~@Hp°Sntmpæh\\¶GXDnF`°|AÜPzBfÃn_v«r¦S`Śgfb¦{^¡SiHWoxHccLlg¢T¢tz¬ĚZèdNĠ¤jGÄdta®BÐxx¨`ÌQfqtpxE®l|Ot`Ul[Ze{eyzUvzej¬zs°^CÌ_FØZp¤sTI|Â}ØJff¨Z¶¶¨RÒ|ĎB²RW²ØÖq²@ì¢rR°Wp|HÀŀ¼¶DxXŖzF®mvFufzPDpc±ďďeVõýg_v[yÄJsj}ÌNrÆTlvEÐGzp[p¥°~DjN|W`QYtjpzRK¡«A½wMMojÄFp~gXKÆjào¼DÐ|YPmQ¢_cR­´m"]],encodeOffsets:[[[121037,30108]]]},properties:{center:[115.89863778631067,28.682531197462737],name:"江西",cp:[115.73957082758929,27.64179243428184],childNum:11}},{id:"370000",type:"Feature",geometry:{type:"MultiPolygon",coordinates:[["@@gQgRµ§pkmLÃYnMuũkWSpùZW¿dÏK\\­°yö`fm¾ğ®»]cZzP^¿E{ «E}kb³Fwk³Tz|Tbr l®h~ÒbEzbîĬCdvaRfPÄEÐ¶¤TWÂ^ĒŢpĂJÐ`FlS\\nlQRHÖ\\ÂE^¶êMÉ¹ûeoTgIeÛQ§ÃAÏORUEM_yY©·{yd|ĆUTîBàApOČQV@@GdbL|±[D{´^huLc¶®rÜVK®Æ`|¶FƊ D|phÈgpâÊ¬QvC~ºLĈ¤p¾ZjIÀ`reG¤·pbhebT@@m\\dWd~v_ZBBAABB®¥\\|hĀöz^¸¼b`|v@n¨²[èVĜ[¢bÚSTðQ¤læcT¾zV´@@|tĲJ¤rRIrnlh¢x DmĸÛxXÈGÆoĪkÖIx[fd°U|¥dOnT¦fTà\\ĜLĆcÈxćĠÙbÕyªfxªQdÃ{ĥcuQéHŇ[k¥ýF}¸ƭ[^¥~_NdCRqÌ¤[i`üsDµxqTÈ@ÀTòOĐ~h RîúPx~S N~êTpºp²Llb¶bàªrpL¶`El¥\\PlŠJò¸ÀMÖ^pGÜĘSND|NÆ[F¨uĊJpqch_Ygty]ò@®\\QSGJ¸dĀJfº~gĜOŴPØjh¶R\\\\¾HZi»xd¸XmK]²cäDÐhPk¸Môn_vJXuke`qHsMtDÏ¥]N{¡N£qKÏUmvEèjPcZsÇ]Kv£BnÕEIicÃRIB¯VI\\pYz±El aJQGmuOQøqIƅ·Kyg§MghÛăhqG¤Ânbp·ySO¹]NZU[@ùié£ÕH{`QctªKla{Xwe{DV}¡«oVl}ÍIÅÓ¦½åFQ¥CVĽ^yD{]yLkgN@aßE¹EãJÌĮHloM\\EEbMIdK}D{_PsO|y¶GG¶~OhHJv]UI³£MsGº¯y@Ym¡W½dsÓ¯AMg~SÍ\\oµyXKt}P¡PC|E³uBuē«TqK§l­[ÿ~a­gB¡EgRcãUmóBí][TÅsCç±ÏI}y£CgIhc{£]u^³@Kj±Oí¥ZF]^ñoUsY÷TYg³BEuBCÖ|njęt}IďzQMuğPCËTÃįzs¥Saw­H×d½Æ@hha@@GK@@SI@@L{iYIåcwþXøSWR¡«ZezJ[|AMªÃ@YwKAēl±BOa³]ĥYIāMIzIeÏ"],["@@q@ynP~"],["@@HPsl"],["@@Dx\\X_"],["@@Q¦Q"],["@@odhVHy"],["@@Zjl{o_Ur"],["@@s~DI"],["@@\\Wk"],["@@ABBB@A@A"],["@@D@@ACB"],["@@@@B@@AA@@B"],["@@VFPQsSN`"]],encodeOffsets:[[[119174,35478]],[[123634,38865]],[[123596,38902]],[[123901,37294]],[[123656,39072]],[[123828,39272]],[[123050,36630]],[[123529,38863]],[[123709,39210]],[[124413,38485]],[[124409,38487]],[[124411,38487]],[[118274,36764]]]},properties:{center:[117.00729904786878,36.68215318771068],name:"山东",cp:[118.19409406231229,36.38230554605333],childNum:16}},{id:"410000",type:"Feature",geometry:{type:"MultiPolygon",coordinates:[["@@BC\\q¢mLnirTgðg||dÔÌ~fQs}[e{É\\ƍ|½iĭNg¹Voq±ClcyT_@@bi¯XĻégFse}RgoÁ}faAi§PD|lNÔfoB¡¤KeRekÕfy³rßu]TgjUéL¯´qFUN[Àp^ĐHeoñ]f«TµGµæf·Q]{qÓU{iLºrk}GoBuVX¹vÁ KxOÌ{]VbTHTP@d]v\\T¥Ms©ħé©xoG`RąÐst«iE}KUn{G«sQQãZo]whíEgDÑVfmKp]w­HyµzKĹÒOmvLÙ¤c¤£snu·]t¥PāÐÉAKz¿¡a±¬d½EÔï|ckgW ~]ËE[RevYB¿¬Ú@}¼~@Vo¶B|óv¯¨Px]Fy¥h§@qpA`XJz¥ÎYHànZz¢i`Ã`KjJËtUpHª}²Ï@@êXx\\RXYÂnwàrĊE¢Gq¸Xzt~Î q¸êb~¨îel~[®vc¦pÂOnvSlvZ|XeÚjÌzF~ļj_BhopVKT°uvi¼Aľute¾daä@pfĺiľPSþ³ªB¦¨À]¦hDl²XKVnÐOºknf`ÀpAD¬B¾mP®Y¢@ºt^¢Uo@C}bId¼mjàhob¾KÀ~QbPtl[ºaT¶HMh¯v LaIrlIpF¸EOfL|ªhjb®IYu¢V aIe@@@Px~kbZeVVsªMTe¢O^g¬M®}DmªfäH\\^ðHBb°I\\§Wêd¤D¤\\bKjº_bb@@DA@@@@@@e«pST®TVzØt\\dfkBoßAíSV{ązc|ª¸zZtTÐÄB¨ÜRJfhSpüfÊºNé]µÁFÕ[GQRmk[TkEÏ_āIođš]XÁ£SÏµÃFOQeubcDíīyaFÑag}­kaqSy{´Sxl´Ela~¬F|ÀF] OYyd¼^Ġ­n½_ezõ®¯[ÐLÀcXúYoXTŪlNvmÄZnKlKZwsWab{yCiKÀsP§P@@¢IºxUjgqEp}cOy¢¯@@p¯@@DçYQÁhQuÓW£o@{J]mÛY­¿G_muAepH²Ý²f¤­Dwf@uqBKtÕ\\}a¡D_}Cy±Ao}ÙìKcÿZY_¯@¹ÕÛQEYćHUw§ybkg@­{@Z_uzKpGu@J³F¯[cF§[uŃC¥`sL{qK`EZÇFQ{gxÈJtOIsĠQbOOluk_SF¹fÙBr_LA}ĜnEuö³Vq"],["@@SOSGh|@c"]],encodeOffsets:[[[118288,33254]],[[116506,33066]]]},properties:{center:[113.67187173242553,34.76405140392973],name:"河南",cp:[113.62619569468205,33.90878273868377],childNum:18}},{id:"420000",type:"Feature",geometry:{type:"MultiPolygon",coordinates:[["@@ZufQ\\ÌF^}Xlhdð{Ó¾Fc²«b¢ÀLyÊBĂÏ¦Os¸^vm¤td£Ú£KnuPĺÑL¶yz®G^xonLeÒUPBTED@Fîxgp^äYRtR¬|HVmLF~¬jtsĆÏ_QpHªwêĨtª¦NS[^ug{Ua^|ËwPLÂºuWvUApHl~qK¹|jÔV|r^¸Re¶å¶H¬Seò^fpG]ďo\\¿VMrE°³êKVih^Sàvqz´ÖeflQfL¢£pAeMÓkC{¨OjBh_kUN~ãF@§d|ªSÞõh`A|hj¬CqÌYRmB\\³DÁwÉua`[Y·ËGiÉ¨¡L|HzgVno]Çv|WqèoZÊ¡SoÑS¡ZscÇ°ÓNß¡që±@Õr×±X±QčA{QÑµ§µ§Yee×IÁ~J{tSo£YE×Ë`D¯]t«yfiuyVyz|fYf\\Vk_s{P­kwFsoerËR§_wÏw­AsbÃcH£iMğçcęYy«¡sSckRJx{MSswuwKw°|xB|@tlÆ|b\\°´Lp¬ÝÊTäxr°oRaµe¹TMpfxOrEǍũčĝ¯©µTmkiîoBë§ŒH^öÔlâ©}¥cTEØLNwdOOAÉI¯±eHiSU`Ëb}oz»J]±µHyShn¦Í~TsonÉFkvqGVÀÉ­fVHuh@@B§«hU@@egC@@īLu©MVcWKUtÅq|ǯRď\\I¤Õ^ĕYR·m½¥qÏPKMÈue£aV¡¨Q¿áÃ±ghi¡×MYÏ¦·P÷géJUVùaosJ_[bi«_YtÕJiohwÕmNOsfFiRF¥n¡CRí¯{dg[ZCav«oY{¢®fLÔ©sFa}ÁO^ØMJe~nSW~Qf~¿o`rU½]ºH¨k°µR¡pki@ioALiKD­tÀ_¤jD®dGÌeNl®aL~þ\\ioL{K{nzgl`®G\\[XgèÐMRV§ffk~X°¾àÂC|z_LK[V[¢t@@®°¦^} £q{fÂÖbČÎRs~Nb RGlnàÆ¤`Æ¦iÄHV­|yCÎĦDfrR@gBA´xzLhglsČNĂÅDat¥ErÙT³ġMf¦fJwtKÔ¡h½Q`LÀ^@j}¼e`xV¨@¸²dWjLk~dU xbEx¢ØÀcxXĄPf[Òaþ`¼_ }ÈN@~mª£¦DîT^t|­h¿¿Dgb¥LScµUsxjàTäù_^ĥK­z­B}Z¼°`~þCZ~oFoæLVÄc´utRiŒd®ÊPªWxtS@@ÖKÎìIbç|qx\\ª»¦®ÔNHZ´U¨pBÀ«U]CSXQ"],["@@ORF@JQ"],["@@AWRDTV^"],["@@hCC@SFOA"],["@@xcKM{bPP"]],encodeOffsets:[[[113718,33972]],[[111732,31311]],[[113719,34006]],[[115429,33141]],[[115619,30513]]]},properties:{center:[114.30514938118115,30.590009285298237],name:"湖北",cp:[112.27788231469204,30.99324657894263],childNum:17}},{id:"430000",type:"Feature",geometry:{type:"MultiPolygon",coordinates:[["@@{vE¬KVhúxÚqoÓ[eYuvJ]rprÌ¼edplGrt`aÆºkYw`oÔKªx@ULKa||iuPKLsÆbtGmda~Ĵ®ĦmjUs`dÆau³Co[ÏOsdm§¡ÃDx®ăesqÉFy@@ÅAñÌôl¢°e°jÐtQ¸JèA|t{°NHªĐØ´dUfh[\\L³EV^ \\°q~iôffbxzu`ÊrB¤zÂj\\­vaaMrjqfGÔ\\~A [¯]aZkQàej~Htµ|LrWævÐDxtxOrÓhODY\\ch°|Qî¢Dm¦EjQEteP nMxÖgjpÖIZs¬`aj\\`IptúbUVêIøh ¸OÐ¥ZNØj¢g²hâÄÀ§RU¢bf¤vÇNLÐO¦r¾nQ¸ĖZÖ]J£Đ[ǰQr{ÆVsLXdUªNvĬK@@Dfh@@V¬g¨A@@vgGU®eÊU¿rHluÊEpmtSÎ}m¥TgzG²¶^¼Iy~pÌaV_Tj fG²J°ÊB|aF×dS~¦ªkáõÓG]őì¨pAjínlS¶°ªĎĞǎŪFqPewNoºS¶fbpQ¯wqã SÞÉo«³K[¯{akÅs@A{{wx¯LvxxtT|NIwlQdh¡KkddGpwXGj¢T|]a¥heřT_¥¬q`uÄmAeyOBÛ¯{_ECmWµHg[ånoms¯TGo}@mu¥\\emTÑ¡o·z]N½Ã·Ck±B{JiqLmuaXB_zfŨ@ef]uËÉíODj¿c|­a«[­dNė¬§ìDnyöc÷FguI§o@{du£Pm§yKo[\\¨Ú_\\hâvUj§¡ëm`WgT»h@õ³³S¹M÷vWFÏoCcï·IS±eq§JU|ÇUMcËMwkKr±N}aBwKE¢¿pmI¥·sZg]e}Å{EoS{EZóUº`M£¹}Mu¨·¥~±DusåB}sý@E¨XAwxC¶«¦NÅ]ĕx]y¥¤¥_YeBQv¥Fo·Hms©H{Cu²OËeosJ÷ÏSÕ~k[­@M`¯C}`ÙHy{J}­LeOyEil~dÌ}ºCnnCzvZP~§rf»MgG­i½MA÷ùq®aÌ¸^ºĪ²SÌf ÀtE LxrxØEfCÚürxQØ¬\\utÛEMr}@¥IiVkªĂVmhldO²bGnJ_¦¥So^HxıHé|Bnv{YAcM\\ē}ÝOkpH}mt}OrwYK¥©ÉcZsÃÃĩË[O¦Ë¦YËQ~èAÍC¹zÇ·IÉ¥\\roh¿]UUpéSK\\dIhåx[~wyDq"],["@@KL@@LK"]],encodeOffsets:[[[112117,26661]],[[112164,27392]]]},properties:{center:[112.98885707086882,28.19975198869135],name:"湖南",cp:[111.7180933091368,27.63552940203767],childNum:14}},{id:"440000",type:"Feature",geometry:{type:"MultiPolygon",coordinates:[["@@HÆW¼®P®C¤`@@xdrĎJØ°¨o¨XxÊEb[@@XG@@ºVNt ®NY@@Gz@@mPNOæZzvn|g¤ª¬YGiY¤p¢z kxP¢Q{PBÒq¬[AnhYzzSðbCl®ERtG¸b º`ÊSZŞŢb¤W|n[^@MqbWÀfnHo~Wpj[vKrbÎzEªÊNĀÌ\\ºC@jª¸PLÀxzS@@Bôa^tY°dR¶GzepĈP®_ZL¨KxMJn^C ª|rCbSvf]nÀdTøÐtIfpPÌ±DvG|tªGnp¸¦ERu AZf¦`¦£z^ĖwÆ^M¬¥DµxwBWF§þ@~tæAvtC}²¦§¸Nvº~¤N¹_VYôFT|pFÆ|f~^Yh¸t¦nJÀoF¡xLA~b²MqLxlÌNNdÈVV{¨IrfT²¸J¸BiwÊ©kW¯no`xzCvÚ^^c²MNhÊi¢tRIÂ¸}½ÞQ|O£WO¤aBÑkqwVMy±wk¥GAg¹uPÕq_¯Mµ­sSoēUlÌ]oVÂJxgXÇvWĖÖ²kNµQªH qf^nrhbâ~WÂ|jUvGjäØdXjTªo^hÂ ¹e^½FÈid¹ÂBl¸KEnclFYjvYbtÆdLb eCwbkfN`[Þq~N¬±îE~|¡|GM¬R¤vfNn_KkEo~}LÉUpab|nYbĠls¯ÑCKzkeÄÓQer}IpMI»nGÃ­G¿n±zQIÉiStÇ@N­zPÃÌpLq@ÉěsFHnwNsi{A@EB@÷đbÍnG]½^cċq_q`kQheÃ±LÉcÅ÷ñ¹¡|¹euF¡c¯§JQÐwrÃRnÏ[yÊEËTē [£@zWÄeNõML¤MBxÿcO}kbYāÉcqIÓUg®ĵSC¨_fNÖ^rikóSqI©}ÄLpm±Rm_^c½au}jGÂÈZ¹]wq¿mSZ³LQ_½Q[m¥O±NkiCG¹odYä­¬}¨kÔej¯Uåpġ¡goI·ÃEbIHmÉmSZomWAÙaiEEh@ZCË}cĥ¡S©­`ëþO©¬I¾[lK¯µó»}J©Ü£Běġ«ģG©fe[W±¿wĩKEtTI¬±Hčã¥CW|o¯{}F¯yÝolrµCg_»wcf¥sXw_§Z½e{}ÉwKKpSNģwËEËaėÁOûNyQ±­­ÓoûW\\¥yJÅÿ£O{GqkH÷tºg¸PÆ\\ë]¥fW²RjZÉ¨ċS«¥ÁwgD«QÛD©§AõIÅgtNâ¯ºHt~vM £^wªBg£J]Ċe²ôSÈfŞBÌööKĸZZĊLÄSZÙFX"],["@@E±eUhSo`åLCflq[r`w"],["@@iGy¥b}mfku¦¤¸KyZf¸j¶Go"],["@@HbUltÒlD}uWv{¥^OyQ"],["@@RfÀ^RQãq"],["@@ptEi`"],["@@TD®zvmÄHb¥įU¶×xB^"],["@@ekÕEÃqKÆÅP¹KkĝsT¤Æ |° Qd¾¶b"],["@@o|NQ"],["@@I|rAgy"],["@@MRaMem"],["@@dvLNo"],["@@Sn¤[Q"],["@@}V¢^cs"],["@@¨RÆI£R§{³}ÇMfĎx²a°ĥXRl"],["@@cl\\i"],["@@RpB"],["@@Deµ£B[¢ºY"],["@@|®Pk"],["@@nt¸Bh[pÏwg§^zU"],["@@xd §CuyEvY"],["@@@@@A@B"],["@@@@@@@@"]],encodeOffsets:[[[112427,21979]],[[119964,24026]],[[115569,22269]],[[115239,22108]],[[116980,22552]],[[115141,22191]],[[113093,21698]],[[113177,21592]],[[116503,22496]],[[116460,22455]],[[115866,22362]],[[116559,22940]],[[116938,22521]],[[116901,22509]],[[119579,21277]],[[115745,22379]],[[113062,21181]],[[113307,21445]],[[113217,20822]],[[118733,21611]],[[118716,21492]],[[118622,23275]],[[118622,23275]]]},properties:{center:[113.28704868796393,23.131513779259098],name:"广东",cp:[113.43642010256288,23.340654628336395],childNum:21}},{id:"450000",type:"Feature",geometry:{type:"MultiPolygon",coordinates:[["@@¿cm^ueTaDq{©D]ImwNLK§`YO­ćfoyµHQcZ¯]sóbA@@yTwK¿O©·@i¹DË[Mÿ©ÉyFaÍLqu\\oiXp}GemX¿raN@\\]mX{a£ŝšYÉT¹_·aHQs­FDkïaTyyZmgB«\\rAÑ|OR¡wOly¡£oZHjZ©«£h{muYyPåMnO@@Hy@@Z­MMs¹U@@WH@@a\\ÉFw§W§p¯I×qčwc@@£_­DO­X»ÅGåL£~ÂOw}wU{bË]Ɲ[¹¡E¡JMÊlG²yBWHIPŽV³£_^±oIqug_EĉĹāmËPċ£g^²QE¥ïUÇëUyªXAtyzuU}`āğgedy¹T\\doc¡qPMÆÈK{q`Gdn¯Ùb@xDz»sqVQÉd³GYp©F¡]plRÊq^tn|r[®enM¢ċ^tzyèxbE|îy¸DĪphW~¬|ds^I@GAEAsCÇ¬N^VcysdsAnkùBIiáT{nZdÁÒ«T¡Oi`ÇKs«XÃY_iÒNszPcÙ`o[§B_ĦaLa¨n²²¨eK³ÀE¸¶ PThCjsnT¨g\\V\\|²iz¼R¸kÒ²~ghdX}ÆLfGT[lQVcoL}_ybcuMLzlu[N¯iĂV»OħñvUn½|[loheY»c¾ C\\wL§ÖQj¥~uIKÁv¿{¥Ca`Ýj©EgbcqLYmfáYgÉ¢}Rfj[rDuĂ{b}ĲàÈm¡Ú_tyÐ`r°nŒKzX´HE^ZABtClvVy`ÈCbÂYz¹HoÜYNTmöY¾¥º_vàIhÀp¨È~¢nCüQ©ÌArzU¨Fz^ĠP\\Îj|H¤J ^ajpWÆ`I`¦|heAÞqLqâJf¬¨\\C¨ĸfh|pEH£YÖéywTQdhgWpµ¤VRocÁGÄ nK¼zLDµJs jUCzu{ÜSv´\\ÖâEbzºR°SÈ¨^}~\\¸wUdxVVmmf£¬bĪýHwJx{ĈNºxz°ZbFtFFXºM`©emwXpÄLAYº^ÜÀ`iÀÄHxdG­¡@@­IGvpOS\\¸X|[b|¤WWbi¸ @¡øudW~XÔhDÂu¬zj rzC x\\}æwgcJ[LêTVoV^gÀqp¦[ÊJÈ¸ºyÎDBç}ÌRZÌ¥P¥Ì\\ ĪÄÄtdYªÊL¦Zxq~Ps~nGloÞPĔ~[dNB |ZuAmê{ĲGGwp]¦T`¥mIHaP±kcngUāl©UJj¦~@NqÜFvs«[R×wûqDÙeFw×qKwsF¿eTËĩ±]¹·bË­úrBøN¾j® HNh¼e¨qO}uYDymmD~¹cË}jk FzPf®KI~|zÚG~_°DN_®@l\\Ö}"],["@@]YGFdVBA"],["@@BbHvRLuumKNqS"]],encodeOffsets:[[[114720,25340]],[[107626,25533]],[[111713,21526]]]},properties:{center:[108.32655684226347,22.829861501979117],name:"广西",cp:[108.80093952584085,23.83914031759751],childNum:14}},{id:"460000",type:"Feature",geometry:{type:"MultiPolygon",coordinates:[["@@¢ĊFk|¬ÎJĜCĀr||]x×K~ÀoÐ`tS Ɨ~ñxœSa«Oó©Íµ¥µio¹{µőɭJY­á@ċŋgTéćÓuěgm£_đ^œūoaÃCÝµt»Jstï`É¦ħIP}²ďA½OØoxėtñLEânĜUÈ»ÐFÀªMâ¬OðfŔÔ¦Ò\\¦¤fÖ²ÄÀ²Ð®^nU®ÔÔrHHj¤g¾GôkzÐ¶Ör®J¦¬ZSVÈA[XÄ"]],encodeOffsets:[[[112756,20514]]]},properties:{center:[110.33773578304327,20.037673144085705],name:"海南",cp:[109.76138994883688,19.195530703634862],childNum:19}},{id:"500000",type:"Feature",geometry:{type:"MultiPolygon",coordinates:[["@@x^~ÈB°Imfzµ¸`qeE}lk[Q¤fO·µNkdQHnHnqv`|{rnqLqPaÌ¡_z×C]Oh¯JNYCp¤_f­D^@@­[HdÔQl^|Nº¶YJ UPÚxdĈH¦kF_zMf~tIU|RFr¹p@FCDMBn|»M^vVJæDjrpJk¦A@@KÐfLRjs°KöB¼@lgXÑ¬xVHZGVxY`hªExZV®º[D`f¨o{U@@A@@@A@B@A@j¥yIxU@raP¬S^@@Vftc¨MXLBNBEBAFFvjI~pGĲļ®~Ð¨¤~è®X_\\¶¨ he|@@_zb¾MÌu¢® RjiFrDÂuĖövTKÐIj´vTe¢dNÂô[x]P´^úÌ¾R®FCr`jOø\\FCJ ¬tF¨zx@zQ|nÓpOsIjKrNëĚ¢~sfb`czT´ap|­´gN@@@B@@Sd|læU|foKüÍ¶Hd}y¦QÄ¯ìIČ¥ÊHæeHmuc|_AuČYÄf´M ^G_¾R¢gLÓxseIe¥ĢN´ÚSqF¦bsÆCāMtċhkgKwyB³hA@QeqCÍĥD{zU®ÃG¥jÅ£_ßÅmHkQa}MQtċÍaÁÕer|¤]~¯¥­@@¡sFJIRBBFJBtLKy`{DßÁ¯½}Wele¨UQNçÏWh\\[H_­hky|m|LpKj[}ýbKk­fMHËcC­£i`¿®sCjLKpB@jjol¢¶Ql¯G§^¹¾V_qÀp}eRX}Tmf}IN]×ÂPb~EtªKÓe­|¡pZ¬buPÔgPqswCwuÏXåKq¶{Gs}fißRlbY°^\\BgG­AÉÓ{h]c¹kµÛxKxyDg¡bW®llÜoTjv¦SgIai¢RkXs³SfGl@zmzYÈRMª~»ÕkCW½Pę^¶@ZKVW¦udkìRyZm§¿eáčMasuA_³p\\¦^tú½¼¡·l¯Da]cÌë|eLhS_Gt¥]bzaw}¿EWÇe]}wTQbdFX~ÅhĿIFkUJÙQ{§uHkqÇpLmÑAomyilQWj§aSvÅvËcH tQ~|enHdAr{Bux@ñÜk]R³~gÃsaSÍuIw[×y"],["@@EIAAE@K@\\As"],["@@QLNADC@E"],["@@PQEIU\\L@"],["@@EEABAFJA"]],encodeOffsets:[[[108935,29217]],[[111731,31326]],[[108124,30854]],[[111724,31320]],[[109635,30771]]]},properties:{center:[106.51155987543073,29.538849605036805],name:"重庆",cp:[107.89030348774348,30.073611928491257],childNum:38}},{id:"510000",type:"Feature",geometry:{type:"MultiPolygon",coordinates:[["@@@@£T[}x_¤GÀÏĀ_aVÌ³ĐwOj´ÇhMªev¥Z¶ÄOs³Ã£dMr½^§½¹maFMÄednr@ć`~v|ÙèVÌ¤X|TzWZh¦N|ráhb´ë¨I¬ÇÎZEjGBF²Iø§Ja}J»}kR­GC»EM±~mSájoħËc¶©Oy^ºn^J°kÒ\\n¬i¶NgUÜj¢P¸cľHzY¾R¸@nÔaĐPFmČPmÎvĬJ®îYxeĄPt±ÔOXmbhi®AĬÔK¢Z|aT_ø´|K«d¯Ê­|m|nT dsAÕl|iZ x¤Kæë|JxÜÎB\\ŉâc|ZÅÌO´{BO¢XrwxFìhDf¡­ôtXxk²Trÿ¸cSwrŝÊ»H_X³DWlÃJ}Rë¨QxÃPQb©b¹¨JRÄL¦a¶yTz¼ÀjðXqnts¼}TV~S¼ºº^Ô¬JâÌãp£zÕJ°X´ÕJphÞcJvanArvLEÆCrfQâxzU~M¦úĎnr@@Pb@@ĐT´eĆÙ N¸]¦oªAðV¢IHoX¡sqVezqzJ|©BwrJhu_x£ SLw|_G~u gbsKÑiýOD§®ËÄEHcaT\\È_ÒUfjQX·nîPl\\ÞĘo~¥ªBL_¸SZL²t¶wpd_Bvª@ªÐ·PègO@¸·Knß©¯l{äQfqlDxæoºiµf@ ¿z¿¸auZhHÐVXeDkæÀJ®atjL n¢qFÈÄ\\ĊY¯bVK°IWtZ`E|v^­ĀRv`t[âNîğXJM¤bfìBzsÜÅxMx²¤vÊ·dyv^¼¦ÖnPÞOL\\d¢E\\¤qpAµ}aySÍĝBgºXy_Ç]ld\\¸\\¼U^@px¼x]`gbtsôt\\ºH\\_¸^rO°¦^IAª_Vÿºx¼µMy|­HfQĭĔd¸gnpS|b|o D^¼~°[ZĖ\\gNµ¬dZxLªBf¶CH~ªXizGiV¤[piC£´£[SxDTVkEbywçXYÀUlfWKyÚ}äT~¤®JxñsMXz~bªOnmnPôêpĴWÆb¶oÖÁk³tÏuPªYj±æRcy«`}SjHpÅv£Ó®CqaK[µFUdÇÎ[Ă×¬L^s´MTu¨®V²PrhtQ«LĐª[Øp~hH|[H¤vl~æhJubÊ@@_txTL®PcG|uT³lHRÍlHV{æv¨NTclF®pKhWngvnGk»AK¤°mäG\\iN QS~ WjhÊhKZÂ¦GTm~Of¢CTcČb®YKmT¡y· ¹Â]lªsr®tbr°UDÃnWGPÒz¦FcxÅN¸ùªv\\e°§KÌj´Y\\hne¾®ÐàtW°fsD{eåV{kTc@@@A@@hM®³o{³bySd_eat¡}ìęMLqitJPÔo{mRyw@§ysE«IDE÷[iP_DqEQ­½ùË³]O^\\wÁócMf¡S³uiJLÏ SuĕõÁvqCEijQ¡­Ëv½Na`y@@{fgµ§`[W­}ç§£}Ï­ıĻoHJ}uiIBM CF@BCAA@ABA@BIW§NsdUe@@]«TOqb@wVJzi¦B@A@B@@@B@@@|V§p_eC¹\\U­wY©F_gwZUHGC@G@MwU« WÒh@k»õA¯LitQKeLÏ@@¥BlIoiqåCCBEDKO]u¼Nm{RKºoEqQV{Js}Ney`lE¥ćGwcOÙVIµZ¹M]{kRÓGc®\\@@]®C`eo£DZM°IPg^ØD`y¢bËOrrKqm|_{ruGmGmRlc¶M¸PeR£l\\~k Frf_¶·eynJA¯Ç]}wJ}KWDÏ¦[m\\Mc¯Z}¤d{×¡aIÙÛJqVuiYv{gDU±·_WáOVË_¦YNxJ@@px{r¥e{ß¤rĲ²ªA¾wºËi¯I¯i_EjAZ¥Á¥YÓt³CH³iKb¯[gsåVWCm³Aae¦H©¤ËLñscPF¶it`­buÌª]¾mX{eJethed£Bµr»kCIÓ·`o}q]DaebÇk{qNc¡¤cUµ¤£t¼¯pG^Ì@z¢lG¤VG~Ph~Yz}@wlOH{ww¼ZĄMÀH^hFPz«n·bqzks»P«Qktėw~mW e½Lcoi¢ÅAi³Mur£}µ©DS¡xÑ{¿¿ÝzoxX|Ë\\©ËNÉm£u]ÉÏoAi}µKÑ­P×E{»osZÅ£õac@jTýěrsBõ¬ÍdIt¿QQt³Ej]Rĝd@@myECÍVo}çE]vµ¡Q{}·§V·~²Q~·t{qď¡G©ĕCmËmyG·ÇYsl}M¥kGHVZ¨n¹a°Xp`jzsVDÑÆZo¡Iw¼NZºBAjyh¼Ü¡dgYZoTcC~yfÐ¯fBEªFDpýjÒWRtÔEn"],["@@GY@N@HHD"],["@@BAB@DB@ADEKAAJB@"],["@@DAUILPFC"]],encodeOffsets:[[[103603,27858]],[[108822,30941]],[[109551,30817]],[[108100,30916]]]},properties:{center:[104.07221517047132,30.665531299496966],name:"四川",cp:[102.6999232288402,30.680596447508155],childNum:21}},{id:"520000",type:"Feature",geometry:{type:"MultiPolygon",coordinates:[["@@[}HÓreiNqbb®ui[yÁA£q_Évyaweejór}[¯U] F´[K\\gVe³cď×G©¯Ms|B{ç·IRÏsi¯f¡¯ókòËÆB@@EzÊtrĄfw­ÄC¨¢ntcÐPp\\´DvbcÅ_Vtniĥĳ­b}\\}TEVÍ@©wÓLpx_lZ¹bÅs_Hqokfc»qËqo^IvufZÔ\\rpwÙùgU«LF|ui«yvÁgCWÓX}c÷v@¢·ajX£Xa{{\\·WT[oPuH®J@@®¢HcGwÃj¿_¿Û¹]BZÃKWoxfn_ª¹NWEsEEa¯YwyM¹|ćIwxGĩþ«ae¤nUnUwcV·x}[~§]TÇQ¯y¹aáFÕ³[uÛTv|yDiVItC¶yK»mLÃHdÂQp£Uo¶XhcgRSzxÕêZG¤oFg{ķeD§§[e«IrárKBÝf{g_¥JÅ_oXib]I£G{ÍiO[ğy]§EVqyBªËRûmD¡Ç}o§¿g ßJu¹`½¦õZSnMÛZGpyºÁZaÇD_zUkusDcUW³Lyőmq¯Ï_szÙ`¢Çn\\rE¶ ¸¤z¼¦y¸ÅNÆdTOx|h¢©lLa°jXUvãLz§@N¼}P¥oC\\ľF@_m_xdlO²h³Fm¤fĦ{vvädvupbèUÜ]zSª~¼Kv¦ÄÊdrgjBdNvwFRonËUynRÆumÇOlKaF½vQ«ÃA··E±RñQdEp«]VÆ\\z¡tgªb´´p_XkXk²w~{F«BxmxZd[OxFZrÀL¬ê¬A`Æ`R¦zbDx¸pgºHDÊ­|P¸ÙIA¢Z°¼Ė­|@ñ~HqŦby®iIjOĈ¬¶¬@ÂsCs¨ÎB¬vtyr¢|QhZÖòtÌKª£Gf¥b´BDnXæUht°\\La´jG´DÔs¦ZÂ¦YiBFj`°Jj°¹Ì½x©Bı±£q|àfq¦|ow@@wIMZ¥`UÌPXâ¸`V²hC|ZuvjrUÜIJÚ¢b|Øc~£°YdNn[\\Ð¥CX~LIzØx\\vJTÎtbÄ}hQ´l^òÛ@vw|ABqcGfm}{RsGÌdÆuTubi¨XRkzjnpBnÒoKÈlrvG¨|RIÚVElŀJÆgW}EacRxS^~ÈfXF~Àxyba^s¦H`gTK f{ìdËb^°Ck¢¸¾»sù][¥´o`vBbtĎN âfÀn¨zYQlëvcX¥ULY@]µĚ¾ODXÖl¼}N©QZÇny@ykHe´TWtQl¡bjJTh¥uipSkÛkX­a¢hzCLwÜwl¶º^dg|ÔBÊ®Hh"],["@@SF[~ncHastÅ@@VUÎ"],["@@vOj{{b"]],encodeOffsets:[[[111904,29185]],[[112111,27480]],[[112164,27392]]]},properties:{center:[106.71999412186334,26.58428544056653],name:"贵州",cp:[106.88698921159921,26.83221277555023],childNum:9}},{id:"530000",type:"Feature",geometry:{type:"MultiPolygon",coordinates:[["@@YÕRg¡{qzusA«§ÍDtÁt«@µć«iPJj­azťr}Gò{@ĕ®¯»Y¡BJ·Ú{OÉ®C¹Gohw·CyaQ¥Å_B_««é¿KYqEPw\\YcnwAw¬|Ex}l±lWW`³oa³h©¢s[yUÅ^¬Fo còR²Q¸FB¸¬ÄR¾uELbkPÈvnÅQzmÌVpmQxEMucAhiqÉc¥ÃLu}»T©y^VÛçoavcuuãu|eĥn£´EgP±ck`w`n@E[ĽpD¦~OM»¨@yäKVuiWb¯kK¡ª{gPwSÅcÆMz·¥y»£·Fµ[qß~ı|avāC\\qei~QÊ¡ZheâZnKdrhaªFÞib_¦DÀ|ÂuLvJ¦}Ri¨ÕxK[Dd½¼Zgf p\\k¾{VmòuĨ¼PUjā°Mv\\kKyNdva`zK~dpUR\\kSHKe~ÅWgch±}lÑQ·y»j±[{U[§hmSitDgSO·µ¿F´L§f±±mb§f³ø{QgyxÃÑm­±\\»}yZœÓSr}YOÏ[bß»[×WwSJwÁQß|Ë{Û«§T_d°Y\\_ęcyE©iéYe@µ_ÏÀeBWd·ÖćàuzÙÿ\\©×gP©¶kJ²Å«\\C{K­¿sJ·nÃOYÃI³J¦W®µmEĥâW¥{e­]oÁ©gj§£ÅSÇą\\ùT]ëvË{ÏRM«LD|§¦·yEq×py÷½[a}¤ÝL{ycªĝg¼HAkJ{Yoēh[ZÙxFlwq¥PBbs}RÕgÓ`WB¡H}»½C}¤ÇmcfZÍhýs©AąË°rCv½Ú¬`C¤r]VC¢½Hl|_âlI°XvD×ÇÙSÏsmq__oMĥ¹«hYÚñI©§ÁU{sHWlQ¼]j¾àF·Ĳ`ðnXd®Nď\\AěÇ@ÉDEGa\\Y{|ñ{G¹ZÙDÁ¤FYn xfA¦u¢dîèovŚqzX\\¸V`Ä¾fuÌVlìz{aVº§dG»j|ÇyuoËnå[µzR¦±Gātcp´R}nE¢QÆ¶£[mÐd@rXW¨ojXp°õFwbaÊ`w^xjvU¬DôØe¬smNčKwN«u¢·IKAĕO_Ļ^o_ÃKMBE@uMIAąU_çaKJ«]RWUwTMrO\\ĕ¢B`´jRĀÆn°s^B³BC®hSªåc·Nr¢bĦCĘklvêtzîGnW~³YÎXÄQpC¬àĪ[zCÊÄAfÂ\\~BKjÚu¬^vgªÞYÊÃXnÚzPÐ¢fHª^¬ÄrJòbzeÒ¥oGWðwÄ¶xpKJ©ºOzn|kRRÌªbÖQR`ºEÊhfRgP~qL`Ēªvxqľ~bF«rBÄcÐxVM¦fbLG¨_ZbejlÎWgÇFFb¸gs¹\\[WAĕ§MiVMÄwÒ£eĶc¦TSvĢilI L¦~Ôo`Bxþvb¹rO¿hg@¥S|SÆÈcr¾zAºMxèg¢¡VMhfĬÔbxàbts¬\\^¢f Y²zIáLċrm¼FTn¦RB±nPúô¸kÎsnKjaZfÞ\\Q·Z½GydĽO·i¡VÛhMjµ«[mlÑI¯m]¹z]PªdµÌĨipânT}N²¼FDHQ®l¼~Ib~¨IJ÷±EAHFiYÈÍJ«ì§a³âgq{¥MYgyX{SW£ËUÚçu{}Ĉ_@mqfcNÃbEn¾º¨¾]NqcÄ¤t´ PÃYµ¦fuN©Ègi³xP´ďUËb`ÐÿH¿`£~w \\¤S@@FmsÓXQiÑþCoEF©A°eÏzeD}dpSYhZ¢c»ÛzgiB¹AMYx»¢JpYÒÅCtUiy_Wo¯ºb m§YUGlH¦~NtkÈZ¸zHnÌDnĖª¢HĐ|r¸sR}±¸}¨U~¸|¢R¶^uèFp~UDÎFnz@c@QĞi^Fs´RRsÀcJ«ÎAöqtĜSþi@bdö¤ÆtY¼pF|Ø®OLÒ¶j~pBÊÐv^n¤MÊªÌ[{ÌwWypÞÀÀÒ|¢wTC¶ª¤~qNv´Bj¡ÆjpKdf¾nX}Ęxsl¬R¼Oltrya¸¬mOyEg]¿GNYăx»|xGPxk~@Zyg}OH}UH£¡kyË@H]°o»¤s¶£dV¢£drM|ÈlfabC^~r_pÔ¸JlD¼¶q¤AfcgfsI|fnW^½©vË®a_jsEµdO"]],encodeOffsets:[[[107843,28376]]]},properties:{center:[102.71866484796189,25.046887943641675],name:"云南",cp:[101.49163589371577,25.01456951515638],childNum:16}},{id:"540000",type:"Feature",geometry:{type:"MultiPolygon",coordinates:[["@@oCé«ŉaµp[y~qKÙ¾[Ä}GaÖFW¬BÐZp[£`smDõm]¡[e@WjjLpqs]­©wT[{ùkh}kmihS¦ã¼_\\]E}ĳfúM_dgKpC|¯]u«ÉWMÑne¨[i­uRýGiqjwQR\\}kÿwe}DEwL±@kO¨»F}~YZsÂ±FÂ»MJaÜ_Cmx_qÙv·Ö{JfcĨov[ðħ~gìJÔÆ£ÜLÂwâLhtØIa^ÜZvCA¦¸OÈºQfzmèqjoÊi uJfNºóÀRhÄAvºinef[Y²²~YXt²_¢^teìYNRºgVfÐkoTÈjGvfGJÝfVÒPdt]zNlMP~Q v¨C\\§tC^wĒ ¤ÐN~_Ì[T¢E¨lfqªYhnM{jhÀ°@]Dd´\\lQpÎzTIxÂGÎnryĊµt½rEhoRn±WdÎwde@@NRÔDÄTT_Ë_ąUcxiĐNrvACý@@ªDBzFq^ăww¹KN}SEm¨ăpKUx°`ŨÉ|Ml¬èìAL{ÜÉÐcZaRé¨G\\¤pVN{Rb«rJ¼hLXuxDrUĎBfÙx£u¨i¤ vb~´WXp¦nÒvIT`rmRU¶iXĐIKb¢upn}ÒhngĊGWfpvYhjvdf¦J_jlTMĨnR¤pRvĖ\\¢¼­ZCztlbc|X^qNŊg\\Z GÄIXk´C`W¼GŞÉxqdTĀ·Sql±Wwsó®¢CegEëwxWq  ¡P|AP³ÆËYd{ŊáA[ÛÍIw{åì£LwYjk{ÖBtcSmn{®{°É¬cL³{`÷bSY{L¡ÓBīj­agnWP²ÓOsfăZwíI­uīnÍOnċOEbďÓ@mÝ[YebiLtmlÍó·Où²mA¥QSm»EqnKČâyJ±Ze¡[]t«asßawÓīeNg¢Uh¡ çNwB¹½yqÇdÅ{TT@¦ghPÀq aºýuAwp_Ó¥}KJkrO|No]svZĥĢC{B lAÎ©°§X}av¡[\\gk_]H|g£qQ|icG£E\\U£sa\\y^c²PFcM¿\\s¿Ai¥kïãÃKB[ÒM°Ãn·S`uÓvkQ¯W~í¦MÜdcFs@Ëloôå_ă@oeïJ«yDQqhEq¡JÅkūÑùkesgÍooÝǿċ©WË½££]±{·_¿œ¯LaHUÛF³ÕßùéïÏķŗOĹqiÏSĹ»³c˯ķu»Fšęgĵ¬JĉU©gûgĳSóoõ]`Ę£æXc²Lº|nT jvR»Ĳ®U~ÁUětïwJ±Difbi|RnªhØ¬ÅDb¶BM¹bÇ|HsŽ°µóh«k]N¡ñV½X]fÅQpGt½Zpġ¯mn±dad­CazÍÄÅQbovFk£}\\eavtÙMáfU¹wĩQÁÕ}C¥¯eÁÉûãw³«¯Ĺ«Em­[Ç{¦É}¯×Së®}VR¬gD®}Eyxu¾^°uF|CjOÎtqØc@Gî}X¡¨õ@}qg±OW±±Z{}MuTē¡Wzo\\bs[kl­`¯c©tēfG§³·NBlÑacķJFµDfKmu­J±pÎċRQ~VkvUÑlXih¡XQ_m@SzJU±kEo¡BUuGknëpvEuĢfPÚ§«WwFGÓāÓm©L«~ áÐE¢unc¢¿pŨHý£{Bç½LW}rÝ_¿´}]Çjbkìª|¬IXh{ÏC»¿]síBgëÙpB{Pef¿\\×UzUº}JHtÉ\\SQ¿IKºjæqf}GC``K¼v`L|ÓB[ÃT§G][X»y}AiÕI»U¹Ne|{C³âyJ[ uzOºD·ä£HSÆ£z«GIlLeÝÀQe¿_¯A]|TaÇH ã[hd£Î¿Oov`cnDmQÃÍGL°plc^yvJª\\ty[Na]UÉzħXnýc`U¹»XPWatquSK¥x]k[Zkk{Gµ¥ÇHr·UyRiKÿT\\q`G¦°El¿CmÿdćĀwD¹¡H]·X_jÓJ»FhÑyċ{¶r]¬J»zZml¯GÝð{H»Qo¿ÎáQCgTY`£ĕgk¨q`ío£^ÔpÉÀMt~gKoÃX°JuBV®Z®XrOMµĢ§TÚzKjµćD|ç¾ceÈBdr¾wDzqn\\²Èz|Ú^ftºTVnO zXl°pB£klëzÀ}ÈÀLWl V²lVf¾JjQuz¨u¦¥LZ¾Uz¬§n oĘn¢SfbzXbng²¯Vc«¡P¼×ÔZÐ@yPlô´k¶PS°LyRVÀQhá|J´ÚHÄ xW¦g`Z`´bfpôKhlR^¨zlQøzdeÀMj¬P_ÔhÎNniĂIrvMÆPº¤c|ðezZQ¢¤öi|ZMN~PPcxhªYX UĦèM|vĘJăôh´®B¶¾ZÎsfZ[f´_{CsÐGîT¦i~LgÀBopzDBnnJHki¦@x Ffn|O¤dng²CN_´RƢB¨xÊP¤WØXzEbpzqÜJtA`dàxrdP|vCz^n¨]¶J´HaPêapeâ¤z^nâ@j]ÖMUrS©xÁÎmjuªQÖxz_®IÒ_B®kHDm¶Rn_²tĜDZOôZjČjÒofbjglÖn¸Tü¬zNnuÄ^´p¶NÜntGÌĺ¢®\\lx¶`ĀSŀÐ­Ũg¢ VâjĶxrMÊZKðÌfGF~lÀpHvcdJÈ¾V~|âEÀ\\¼_blÊIĎn¢úAvRrDZfªt²Y^À[XzpĊT²`xpOZ_V¯ČY¦fĤrU¸dZOæR`r|pOîLQ¢tIhjDìYQh®GºRzØ^LÈiÜÛd@f`K°b¤Eo¢WruÔL¼ÁJQĪÛĖsjaĆa"]],encodeOffsets:[[[91872,36966]]]},properties:{center:[91.13881033157789,29.666115438652298],name:"西藏",cp:[88.39486661130323,31.569510661598894],childNum:7}},{id:"610000",type:"Feature",geometry:{type:"MultiPolygon",coordinates:[["@@@@sTw©XÉO­őcjsQ³vÃdUåKpE}pYýD_}»¯~Y®A®yĦL`]úSãißtw¶VTd¦KhaÀCÀ®g{]sSCí¤¥©}n@MÇ~»`ý_Ñbe\\ăOWdw¿¡×FwwaVc}lKXic±·@§Uwf_~»@i]K¿H]³NÃeċZBv{`vdGnåfGÉċ¦ëJÃ°¥Rzc~µGûÎLpCt¯esXßÏ½­mf[g³ZËiL¯¨fu[©·úMwÆd¥EÑyOHmXCÄ¯Vqasq­©tkÁ^ºz¸S¢Ln­ZċaSd¡De}PSn¥HÁYLÉgigX}TRM[jãH¯n£JBBJI@l¼mHuhmXgoLE­kSd§MåuU|kGQÎkGS´{vH|LWt{¢Df`àVüW²°R¤Wph UuAoE¦¡±E¿pOj\\F°İEVMXzj^ÜGP]Sâm¨bÆ¢crÀDTåêgÂI²Â©XJ¨u|_¡QaÂ¾E¬G¤¸Jrwäsra|°¨WZwNha|Zn[válwÀ«RB^¹hķ[N¨uVĘÄªS{^z~Vf@pqºLy^ÄOTl@@vnj´JeüXHfņkÀ`¤yBlÐKN¡~uIx©ÂW¨ÂDfa`²aÊK¶²Ef{^ÈFĎtjjat@@@GH@@²W¢{¦x^XÐVPĆtiĀNUcČPxär Od¶X¤`kņG¸|SGvlÀsîhOhß¤kĀ`Kâ{¢h`~~¸GPz~K~ÞÇĬIĖTt¦±J«HygoB«au^qßSanLK|@@drqAÇÑpYxem¹¢lPaÉyDwvM|bĉvufgS©{[§b§OK±ħCyhuYeÊ@@Gz@@C cZxtuzDvg~R¬_tČB¾pÎEgt¦F¼¬LEjOºn\\ºÔTz`j_v~ZQjp¢ĢigĈkV©[uZg~Dà{¼`XdV SRaĸRÀ|¢ZĂÒdl^¶A\\bMÄ^hOöN¾z²{¸D¬T±TRNh¨BefĕÄuª]hĀvF¤Ø jæÎ°q|TÆhÀÊ¦wØ¢¢Ø\\i\\¼d¶¢eHyÊ¨õª~z¼¹àHÌĞØmsJUvlü\\_ņą~J¤inN~|_ÞNzNðĚn^ÊT¸ìPxfeM@qsLBUsSGGqZMqnkCLY±ûTcuS³Ukcy|Nik\\iý¥§D}dlKW»UH³[\\eY×[¹AoUWçEegT½cLíjmKÔðō²g^OSoÌqd}{UPpoiWÁgsă[[¿VY®WaX}IQq»Ï±£BmyaReZAg_ÑU¤uc}bMaQ©XOigl¤Os^ËbmCwÇ^k@µemQ½j÷rBpm[q\\yICBjNĉÍýw«ĉyïÙÛKýť­Ó]OB¥q¡CvÅwJ}º¹êSWQ[Wwé@@Ð~±©oGVÌsILiÄ_j_y¡mYGßZ¦ÍIyWB_or¨@¦gzE^Ow°§ôu{ApµIC@IJG}~»@ÙoA§³VYGÓM¥­©¼w[{raèJÍëÕL"],["@@@UIH@JJD"],["@@AIIABLJ@"]],encodeOffsets:[[[113055,33980]],[[113698,34289]],[[108630,33557]]]},properties:{center:[108.95443762207665,34.26942467492985],name:"陕西",cp:[108.89388130335954,34.26936676343279],childNum:10}},{id:"620000",type:"Feature",geometry:{type:"MultiPolygon",coordinates:[["@@ºD|YtbZ{|MXlÜ@²]Z¢KDzW~¨ÝÜÀxACnSipZ¬dvtJn³@@_z@@snqcBrPY|]õeXxNZÈeyvF·¨uBMzzkLjglvk¢FA¶HWf@@INä¦wa|~Ìi@@Uta[@@Q©pS²Az¤KFjbk¢ÀXP²o`fQlmplFaÖjZKþDAÆsh¢P®HdD@@Hy@@fÉvZzgĨD²L¨P¨a|\\ªhTveĊuaN{xuCÊzbkOº¡fnZwÒoÈrBcq@@L{KbmàTrv]b¬AhpGz¬²I¥SsJĕÈī}ÝLy}O·H}}_g|¡Lá_lÿà£Pggtík¿HuT·{ŅH_l£µWcPãqwċOVdÿMsjąOÏU]Ww|¥X¡±@@HG@@@bsiičsÇE]e|±FµÉL±b_ebÁC§ÁXwªJ}vM¢ÏLkA£z¿_ŅlGeûWfIi³um@@SkPÃz]Kr¹o@e}U]y|©TėÃvUM§ĸ\\ºgA]Q¬x¿âku\\m{YgbMYx§X{¯btqxãq·IH£F«Á½b¢R`{vI§ªWÁJ±ÁéhSæ¿Cq¡dÅ§aánT^OÛH]yiWNUįF¯E[PiÀo²F¢F¥pvBVgXoQ£±¯XûßUe_¡Cs|X{Kd­OKwS`s@@ÉvaIågk}£uG\\G{}g×o©\\ďK¬sRqg±O­U§Sv³N]t«KāØÍ\\cÈV¶E\\Lbr­DÔu¤oÆGi~T¬_zdåQi²©ZOvsÐl´ÕÂµpÅaĳXéoómOmn©P}aWyNtwò­I}£ãSÙ~LzXke¿VWZxèazFUlSwCT¤\\³D¤oj£\\UjH yj©WG}µDe©AKYw«c¶Mhĕ[Y\\}¯]»C{p{aTmo·hcĮēRe®Gz{¶Nw»¹ĀU`B©]J¯¥qP·][`G¹s[tóash_w^w»@o]»V·[[ck^`ÈWz¹AhĞTÎz~bB¶or[£¡F[ci}UąPSÀJA|ézÕmGqUéZÅzga§QTt[plH¦@lĉfyI{°zP`¯S mLÈpÌUZp¶ ^v²PQÊ©LäO``UKwg¶UDoH¢iÄQTo bè®ËzR`dEzpR¤O^znmpH¶qV¶Izzcz¤RLÆækæ¨S@@nZ­ª¦[¦aGùDwVekJ]CìJŊKÎxè[ip ÜzrGflDLpQn^´¶^´Hzµfj~VN|}nL¸lTþqxSf¼øH|Iľg¢­Gdl¾`¨BiH¢kÈzrL¢~YĆI]TzYÌ|ÌgvbnH§ºnNdBl¾Ldd`Hpđs©BQZDBMhC@µĞlpzgxLT^J­{ºXzvK¬xOãî«ds¤Ruv¥\\´¨eºĂvºIÚkCNrIpnR\\»hÍBlđ|i©xkExÂyÉ\\rY«FÕemUqŏXjÓÖPû~Ýií×TlMpzUvuIħÎWm\\M|Gjsf«VÕä^ąZoo¥J{rb_mwTOy[ßZP{ªogÜÝh¥uGmtWqjÐqÕxKGnÍ±TSlkA¡Lŏ¦Í}LÉiv­p³¢wÈ§Q¾h[Ñ ËpåÂÓFr«pđX£ra|ËpAj×DY}q[¥¥aXc{·tËE{pHjLcxÇVYNWyN×Û­o~dgrőŅk¢ĉÛrµz}MoxCāxáNåCV±S¨³W±Psw½D¡TM\\nK[«¢}SeP·āën}f«R^s}qgo×DmqSÑÇX£dWTÅǝ¢í@ÁVk£_Wneĥ]¹Ë|KnEa´»X«nglWÁ£oHÇ¡}ho]hUûf³_}xgEqªZct§]ubÑVù_mk£MŝB÷ckc\\@¼_fşˊ÷CʷkSÇJí~uja\\\\ĪJ@¥@ė¶ɵSƭgjµPfĸdVªwhÓÃEt§QkkďCęwħD±W@k£GjAm¦IúlŬĢĪŪ¢Ť¸ǲ¨ʈĢƂ\\æPƲӞÜɊ`¼ňWðĊĖĒŌƤż̌ȦǼ¸æ¬¤Ĝ¨PČrJ|aIq®åª¡à¸¦¨vłÜî~ĔTX®DŤ´¶|¾¨jB½ĄĐÊřĠBvr¾ónLº¤xÂfȂĖ̘|ȐAǢǖ˵ŊǳŸɍǌˣțƯ`ɰɫÌÑƞă[Æ£ìiV̍ʄĢµÌĊvjåcJ¬aǎÞ´õ¼an¢DĢ͢UĚð˂oÒA¨ĮŭZULĉÕÝ@ɛƋß©£yññ¥÷MƱãM\\eYxUǢZŲwêÙ®_èYò¯ĺcÄßYrÁİo¶ICåĞYĎdŔB@ǥlýN¥ovzºsP·ŮzĦ}ßLþ[LsepuæYŴ§µÒĖ}ĆÖÊÚŒè{\\ùæy^ýöÌnĢ`\\Ȏ¢àĊnłÓUɤ©ľiłþ°nÒ¤îÊìnƖŒľĒIŒaÉs­ļřÝaJ¯oŇ£ŷǹϋȩ¦©ÓxĽƓÉM©ƩȄÁ²eƂō¼żěĀ·°J¤bX[ÈHÖxVk¨El\\ƄwcªWmwuRq³äL¸äRp[v½iB¦Iyh`ÎuCh«M¥ÈFwpgLimTEY­Qc}rIy^qS~\\B«[F»r|Qlyas@fUÅq»Fq{¿eûtÅ eu[T§z|jGFr_tĨWÔ_¶QguaxwsQmaF`Víl¦NİyLsrJBSŵEĞt~j]dTEKDQDCKUL_TB~»bpwAF§àýwJ¢F´|¬DªiN~q@qf¬hIgÎs¸J@NFDD"],["@@XMcSKAT"],["@@NgCAMjD@"],["@@TsSAK`LV"],["@@MEI@\\JCC"]],encodeOffsets:[[[109070,36602]],[[108600,36357]],[[105307,37245]],[[108626,36305]],[[109068,36600]]]},properties:{center:[103.83002313164361,36.064142766893724],name:"甘肃",cp:[103.83278779042064,36.06548103743941],childNum:14}},{id:"630000",type:"Feature",geometry:{type:"MultiPolygon",coordinates:[["@@NiRYªAtĒGo_cc½KkcAM¹m¨Gamhu{ËZËSy^ąJ}Z¡qKylÇ¡jGA§½_ck®H¡Ľh{JG»÷TewýrkSK·~mM{}Ui¶eGy³µ]]³mRKoCekqHyÛjoç\\ÍwLIŉDë^lIfxUúC bH\\¥¥®©mY@@§TåålKÅ£QdyyyJUµµroGmn]y£PoQycF_yQ­ÌçaSpÃR¡jGCpµVhLxV__ãPKÉªR±Ou]oµVYËoÇnKT°O_y|¯zJĊe@kG¥ok\\Ss¨RhbÆyêYVHrÖnêyB{IT¿ĆO~VjPKOÝÕm¥]»zu¸cuÉ±£NwwÛÆtyëAaeN£WIíĠáM\\s_Qu®ÿu]F{_YXs¯JLU°aZ[ĉÇÃE¡rmKsi­b¿IålCfUWGÏYgv·byÀÀe@j¶¹åpwCkerãRk|ª°màL·¸@PçhOÏ¸@©u©Ac`oxsµK±Y·TK`©A}¦ėpÝk[íOmW¸iReÑVÇ`S[bGdFÃ­ÌC¨PjþLÒath}vH{`KxTw¤`gvqIAx{ªyIyrfUtrW¢pG¡JïU©B¥p·^MąÚ³fďS@@Oa@@mqčù¥N}yVáweRqÅDFuKBqmbIudgÝoÖIW³¯ÖI¤yäoáË«I]Ó¹¹»TU}~St»srmïW¿iy»zSbµK¥ÃIQº§ªaRaÄORwì§~QH[YŉhMr]W{adskDy®Y¡» [ĕQuo£mQħNSk`i¥IceugiuZeoXĉHmhÑg~om¡vaLďJjWVµnQ_qSJuÑ¥mWo³X}au£§jvw¤eÚčAVqCvwWgKI»¬qQa|MoU[£§HQêYbÏdÛÊK|ëB«çNk{Êŧ¯_wVoL§ĄFnTM~ºLxx]ĄrEAy©C@@þDuBMqďwjdĆVÌ``SÃSÓCMQ@@cfÍxcXm²QpgqFs¾ĉ¶qzmÍÁHJwySoÍkR³[Cc^¯@g¿i|Ngm©Zer§k¡FSË\\}`ÏM£đ]xsD[¨§Du}RONkyM^csÑOeUÞIeHuHÇiSpÏleU¹hMQëZsf¡]±`WsZ±}±Ze\\fm¹juÃBg¿Q¹ôMeIvÉjipçryneR¹Ç·P¥BuDYÛ]b×JsgáKÁxKÛÅ¤ÓëIh}ïĨu\\ħpedIÕ|u¸rÚw`DnÛ`IbNÁ¼EÁ²Yt}ZE~§¼lP@²KFx~CxflĀ[~QRixjrHQþvj®§\\mfNÒÊXv¬^{°oDLhc`ùNe~ĴF[^»`¥ägTjnlg~úl|\\xS®ªt^oriKiX@\\f¢n^Cön_t¤o\\ÏY«AXÕEHbÃ~½\\LÚ}r\\z¶oŊbê¬pD°e®LĀAxWHÔ¬znPqjC^kò__ÌkuöAĊu®A´`àiNİ¡§eÔX´àĐex¤F²fj¼rtĢoRXG°qTęj×CixÍBePqH^¦XwJÐvAĄøÐLºO¬`^ÚVN| f_ôFY|ZclK¸õFÊ¹¦Do[¾ux­b½]VbyzTő¢µNOd¹TEА^ĦŇQUSÇÓHţĔ²¥HcfA¸hbĲEÈTeØVzCÀH¢DC`rw|TÄ_ƦjÒfnEǐ°l²KŮÊ²BưZ\\ĦNÖVB^ðŤÄCrnÆfİCVKx¤H@l²XĨCĚxĐDll¨RsÄFÔxgU©ceķ¶OiƮhɶTĘµ¦@@ĩI[[bviî}ÈIlTʸøDŠˉ`e@»[ldødŞA¤Nnlú`ÒUva¨^dsYr©hF~w´`üeV^gp~gÈ¢pGÂ¤Xhk¬m¼Wb³FLmÌ{º^ĦfXm¤`UlÂî@Ǟ¡SÆcXW¤ÒÈTrnØChpr~]t¬Q~eìmĂO¸Tf¡~\\¬mL[NSC¢x¾OtX²§´²TUæDâMĂwDpw~N¶yÜqĊl¡ņ Œhqcp}Ü®ØMXzMZÈUdwKGi|oÌF¸s|Wd¦b¦r\\Z~ØCBiÌob{¤qĒW¬oEqÔæÁÌoÒ\\g½¨RxÇ´¡®ojuÊ~KÎŐ¥K¢lBTk²SmÎHwLÖÏrirXnsvH¦ÞghÛp|©YOàz\\PxS`na|q¦IppĆY]ÖãU¬teiH{Nn[XĨÍvJVuyNokØSîjÞü} OÔÕWiŐrVfnÖ¬EZ[qÊzwÁlFªwjĒ{AkÎ¼gQ[mJoqMlDÙ¹Jāuf¹³§¦[vuQt£¬cäíwP«uLWy|¹®IS] wKhyko¶ĝ"]],encodeOffsets:[[[105305,37245]]]},properties:{center:[101.78537338682746,36.629351767152805],name:"青海",cp:[96.05008433419158,35.73220864632291],childNum:8}},{id:"640000",type:"Feature",geometry:{type:"MultiPolygon",coordinates:[["@@G­ ¡OgÅtBCýLiYÕbEokknR_e±pWO¿l¡iaE£LBy±TªoR@@b\\Vs@@j}Ëb{¥xãJM@@XeGBµ¡ElkuhKiylNyvA¸§EzufYÇwMWfö^Z{OqArdtm@@`y@@´ImscuY«joTDmwB¿ÞÛ}§yXC¡LY±^@ÛWk{NY|sa{Z¹C[I·thÍgJe«rr@M}jC©{«³¡EIxßþE¨Boxa}¼StCDDBBJIFFLNWqIKtįzMk¥î_UEbRntxbwhvµR`ÓħXsq`EiHy{S¨v\\fsÆfüÀr|¼Er ÆeV@btkz{RqE¼\\A¬[}rT]zJqd~®RFZSjnKho xÇEN¦g¬DÍvg_z¥JAju¾o\\Qã·ãKr´vQnxX©dƃxk[§FUlÕwÇGW\\jîbX \\FǄPƶ`¼zƌ^ê¬ÜphĀröRÀ]ŎHdpL°²KêxÀIàÄ¹ä[PÆxlr°Ð^lQpV[xºOdpk¤®QlnjB®ìÈmª¨`xSjf¸¦ÊrVliºW^Vn_Āļ|Ğg\\~^ ¬c@Ìp|Qt­@_Jw|iïha°]mHycíĭÿåĉ{į]ŋ£åįÏÖ±ÔxEêsâaìoÊWFh`¢IhxªO¦üs¾Ñ gy_XÌ§ø{RiYu}i`y_ÓS[¹¹mPFiK»«¥EhsFoÍ½Asċ`«Q }hCuysvYw"],["@@Li^}ĝsFŶ"],["@@AICACRJE"]],encodeOffsets:[[[109850,37997]],[[108601,36347]],[[108627,36313]]]},properties:{center:[106.28473979498277,38.47218279101865],name:"宁夏",cp:[106.17634895504617,37.29732217010901],childNum:5}},{id:"650000",type:"Feature",geometry:{type:"MultiPolygon",coordinates:[["@@ȁĕÁe£wK¹ômq½AuŚğďÉ¾ăAi½§µ{ţ³­CWēSí}ŁÛ§u·¥ß©¢­æJrb{qIċOě§«£·åǻ̋ȥƣŻđŋĉĕXï»Ňɉ_ӝÛOƱ[åġƁ§ʇ·Ǳ¡ţĩũūġkJùn¥BiLwUįDÅeqmÃDţïA]ÕUĥMY[Ư±AŭÉ±L¯kǏmFÑeƥiÃ`Sx{qD_¡C¿GDy×UfÇSıFgaB·de¦G±ŤēÔGTÈVňR]ĥFЏºSPc¶MŒ¡SzyaU¾^®avw\\½pCº¥EÉöL·dkYZ{óE`eM{ÙU]«_¹PÏKă÷uBIÏxW]¥rGOfÎAjwØDĚirSH¯WpQsġqi»eE±£wďf³ßÓWf¨į¢Mßj³_­BĉvõBvËl`ñ`]lDriOm«yGÓwXÿB­K¯fąbibĕtĩÜRI»ÂÓKqv¡Xp£F¯aL_ec@ÛÜÇjK×]y¹Q­HRgëZCgiJ¡sRíKoPq{_åQYP·cVģq¥eċZU°`YoP_w±ĉSoWy¿\\]±Z©sYeCquQùB¡čmÉJak»`¿[áF}{½UIÇdcuoGk¿E}eHïËLÉYqNĵwiáU¡ŧh®ÏĿÿTµ_kw­[Ĺ¡ËsHÛmµM³oÃ]vmyMû«·SÕmkihaeÑpċiióYYPěC±sm`µQCnG­lAÑ`­Jy`Õw©RviÍnwÂTªqVÕNi^á@]m£yáofébObG³µI^m§y]D{uOqcßw_cBIsrÛoyaFy×W£XÉO§wơAQ³M`±Dmh£c{PemEw¥@jGlImmAyCpo¿Ah}K¥jíSÏHDt|³`e\\eYÍtYµ½­Ag³ĄóėIuN{ĥçVZWg©dwO}OMNYj{£õR¡Yfyïd{¹£ÅONquāJjmÍMÓg`«Oi¿Ncf÷yRyk§Q]Çz]p·kÍÇl`xjMjÕ`­cPGad¥H³Q¨}X©CÃh_zD®¯ZDbbLĘToh` zuQ_^EÆ¤HòO¨d¼®N|vxûEgmgn·YXEs~]O~euLmY|cm£JY`¹NÇm¯PvoqTĥkď¨kl×hg»rµ¬á]ÛĀċrw¢ljOvd|xJ½VGÉbÏGM[½B[`fÌ¡Èg¢«HaS^YÄr¤LIÂ¦GKx³ºO¶ĄÉ¼ntÛÚÁëõlQ§TA\\m¶R®Gd¦ËN³\\WÛzHnğOVukßcXEo¨unFE]u­B}²Ûc_o£U¦SC~p^URehxHpu¾ vA `Ădbúb¼p J^]xvoxWrUXAf»z£Ġ|bFtP¶axÕ jeO¸^¦HµècÄZ¢o²\\^cIäN¢ÉHß¶uMÇ^~§K`ËPĻ@élÇs@gsn³@mcïXuJ­vVp©ðX²¾}jTrN¸ojMg]FmA¢Vc®a^Fa|kFXvA®§øzf¬RĊWøTVtS\\~nDpZ}ĺcjÃ\\HÚ¾H¼ÎÎXÄ`øB\\fŖjfwRcÞª¨¦vªh²ArDŀCcZĩĖjdHt` [ÔQxX|c¨SpÒ_Bvr@À°Þrê¤¤VQgF±`ò_}sa¯fgj¿~d DvT]¦GcV¢®wnD@PÂGW¤j²FooJ¡¤ R[ª^zLF¦\\zTnhCl}@p hTþh´l@ª°B¾l[ÌDbo¼{ÌfºmÈªCº_DoÄN¨]L\\´V~O¬rS`vTmNlfÎÊWĺ¨JP¨z¼_z^^Òbø_Z\\¢EL\\ÂHÔz®Î]thUj\\ðHtHÈ®ZzOlrÆb|tàF²J\\¤|~]¸VY¦AÈlp|ìXªGÐjCÒxƔJ¬W¨s`y°rBJ¢ÄT¬pNvinX¯Tj°b¶a`¤nCjàFdT¶MÎHv¬jČXW|ĕt÷¤etÈZÖz¶^²GtYjdWT]pAgpPëZMZ¦´T¦^NK¢ț˔WøTdwtBÈQ~±¦ZnK¤XÈ[aĄê¾ĸWpñÚ×fmRzch­}yDóoOf`zç´zPh|NÚ H^ªvpURdªy¢B¢H~{RzDj¢|teäEòpxðGs@P¸I²h~ºOJd¼h¤Qn®EddNteÈlPfHPzÀnGĢzÁ¢©ÔJºdIIwfWĈtòV¨yŤÚpth\\ĺ¯äĉƓÞ_ænB¼¨´R¦[ºN¬¸¼P´ƤúŠİǚ¢Ę^àĂ¢rAv Ğ\\è²¨ĔG æN^jeI`u[¤NfYV¤·ZØ¡|GRkŀwCaÊXĴ Whb¨Hc¢OÂZtĂQ VW°`æ´fĘF~\\¤D}Ìmd{ÊÃjCrlPĂll|Ô|Âx¤o|TðRĖKBº@xfsvÀcÍÌF¬ÑϪ]h@ t~TVX~b@ÂÊbŀfŘHƢSjÚBWƐ´^Jb¬^TnÌ¨T^w¬bv¤hDhqPwÄDÄpZ`JnÈAXôSrnČ]xuÈCê]¢oÚx_~l\\ETØFpjÀGTxOAstClme\\aoe¤@}z[aJ[¿GieAeSVmosApoCÈp`ÊovNAq¿a£eXoÌyÈCnqlJHögeCwÞpAhhQZBBc]¹hcN~YTjiÜuvwĬR^sÖdoàVÚc¨^vxªHljĮcÒR~kG¦sLì_v½ĞCôRFäWtRjcaL¸¯DgĬo¬M|n±Ð¥L_oTKfi½ßfOØñÚóÂHÐlkNz[_­¨@ivG¡e¡có¦EViemaW³}qYé¿²ßO]·M­\\ŗďûñíėūKā¬m¤DuÝQxLgj^cäTbQâNatKVaþMgªh@¨«¾yŐSĞdêIƞRKŞÅÚZ]ÄJòc dŘNĂtÌYRUTgÎM¼PUØPào¾W@^ÀQ¶}ÚZĔĒP{˾ŏð¡ÀaZm¬¦i|ÉLäYð¦[Ê©¤³@¶iĴw®ŊbĢNƦnbcgcg½IÛq½¨E¢_ĐCĄŷnÉ¼ı~ÓĺƱlŗ§ψˡpơ"]],encodeOffsets:[[[98707,43760]]]},properties:{center:[87.62414772920293,43.79897217508546],name:"新疆",cp:[85.3011627793574,41.37785479052713],childNum:24}},{id:"710000",type:"Feature",geometry:{type:"MultiPolygon",coordinates:[["@@ŭømz×Ɗ§ƨ_Ėē WtÂǾv¦\\ƐwêPĨÖĘÐô´ÜŐºÆfº¦Îv¶Â®´ ĤÖ´¾ÌànĈÜ¤¬^ à~FÜ¤Ģ\\¬fâú¦B]©_P}AºsÚF~ęA{á¿õđEđl¿|­Móc§±aëĵƑWGjµñƅÃȇC¯oÃeą§sÛ`·kea×}Ã¡ËwÅ¡û«geÉ¯ÇȏWƧTK­¡Nóe[ÓOX²a¦VEòeôÏĶ« Õ"],["@@WfWjp^tGd_qwP"],["@@Kx~|[C¯Uon"],["@@¡}AazH®QRzÌGZ«H"],["@@p|YTmewRap"],["@@h@KÅEjA¢"],["@@fk@F"],["@@|Rz[M§"],["@@v^Kyi\\"],["@@ AAZM"],["@@ÆCA|]Sw»vuvF"],["@@rGW}Y"],["@@Aa}_"],["@@zzX[]"]],encodeOffsets:[[[123342,22987]],[[127531,26514]],[[126408,26344]],[[122525,24123]],[[126621,26533]],[[122381,24199]],[[122373,23955]],[[122434,24241]],[[125003,26246]],[[124390,23228]],[[124434,22623]],[[125035,26118]],[[122294,23781]],[[123251,22870]]]},properties:{center:[121.51561010052754,25.050003881919682],name:"台湾",cp:[120.97791595406282,23.755749227212693],childNum:0}},{id:"810000",type:"Feature",geometry:{type:"MultiPolygon",coordinates:[["@@¦P\\n¾RR`´KTY@WzhFM@@tejsLóµglwc^k¸P ¦~G@AiiR¥k@BA@A@BIµ{@@CyAm[ib×¿LCtK tzqh§LsKqolS{o_psXsQRÒZ[oÐ¦fWiZC¨¸pZ"],["@@rSWu@H¾fs"],["@@@@xee[Q"],["@@@@ABFFB@B@@AGE"],["@@@F@@@E"],["@@@@BBBCCB"],["@@BA@@AB"],["@@@@B@A@"],["@@@B@A@@"]],encodeOffsets:[[[116776,23051]],[[116889,22754]],[[117056,22916]],[[117071,22925]],[[117056,22913]],[[117066,22841]],[[117070,22926]],[[117124,22866]],[[117075,22839]]]},properties:{center:[114.17991799676649,22.325726013305196],name:"香港",cp:[114.14084473500542,22.38362023981097],childNum:18}},{id:"820000",type:"Feature",geometry:{type:"MultiPolygon",coordinates:[["@@@gFjFdex½£q"],["@@UM@NV@"]],encodeOffsets:[[[116287,22645]],[[116320,22740]]]},properties:{center:[113.55558575045498,22.20496701424488],name:"澳门",cp:[113.57352300375912,22.16503911502682],childNum:8}},{id:"100000",type:"Feature",geometry:{type:"MultiPolygon",coordinates:[["@@AECEEAEAE@EDEDADAF@HɾदBFDFFBFBFAFAFCDE@E@Eɽथ"],["@@ECEAE@E@EDCDAF@H@FDDشݜDDFBFBFAFCDCBEBEAECEرݛ"],["@@CEECEAEBEBEDCDAF@FDHҪࡢDDDDFBH@FADCDEBE@EAEҩࡡ"]],encodeOffsets:[[[125466,24031]],[[124081,21305]],[[122342,18440]]]},properties:{name:""}},{type:"Feature",properties:{name:"南海诸岛",center:[130.765,21.375],cp:[127.775,22.5]},geometry:{type:"MultiPolygon",coordinates:[["@@Ŋč@嘿ŉċ@埚"],["@@呾@Ŋċ嚑@ŊČ"],["@@@埚ŉč@嘿Ŋċ"],["@@ŊĎ嚑@Ŋč呾@"],["@@@W[[AAC]BA·§V^CSiPyQoiÃWSWTUKaZimSoFQb·eoi³y\\Qk[kBOskDIeZHwXeQkg_AyNaÉpwM@k\\MYHµGHr{E@mo\\»QIegUTK½UWGoKYxßKCtSTJRjsX[U³cMi_C_F`U{yNU|OT_WaOw[iVC{}NOcWWKNFKOIQUGF]SACm_RQvgt[WVKt`±S]aqEpATbxCDUu_IRW]KAmQ[ACcZa@aPasA]WcÕoKueiP­KbvE~weQk\\aGy_oF@Í±ssÓEsbRYMMw[×ECZsJEvDÅa©sAkzIfW_iD[¥W\\XqbAySS}cQwRYsLcONSg_mcEGh^GJjÓ[AQÍuG¹FeIukW¹KkN_eDi½_}oI]kbEo_UDd_SH_RSqZKJ\\iR§KsoscSuBocI£B_@ohµCkYZH|DZj\\IpNcvBb[jFS¤Wx}KXÎ@¸G¼PNÂFpKL£BmL«F`wiIEwo[KOģMa}Ay^FGbn`XCxe@ODEHďJhQiPWonEYcfYOifmCÃ»¿WHÃqYNtzKhmCmr_±Kd¯IgtmLAZe^aKgP½gÑSYRq[JTR_n}QwoaHG}sEgWwPER}Vn¥PBjt\\B\\baYsLKbRCQXDuqSh`XL_pTZkVfZQvYVGrÅPb\\cdRClft]B|¶`RO`^XdaNE@E@CAaAvJPwJW[aRalyAoX]c·aw@GS©JeVPRJGYPE[Ɉ"],["@@¤NZbºNTX°ITS@Qx^FI@@t[hg~JïebwY^a´L¤~E@@iaR_@@A@@@BIk@ACuy@kp[_b±»JEhIrlo`¥HgKyocjMyc_dePeQ|PxÐT]aÎ\\QiTC¶zpv~R"],["@@rrÄB|UhvFÎejApd¼Xl^fMdnChaYRbIëhdÉKOG³ukaysU_{gaÉkŕFiOw©a@¥íSsJ­_k_¿c­YWOÉPñeoÓ]QA§_ZDa\\±Pr×CmHgxÇ@Iu_\\ÉZµFyhE`®ODxvIivIXÊphNvrT¢xb|N^bMv bDDbvRQC´Ufl XFcLvI|LAjM|Ld"],["@@ā_\\¡æòS¬ÉpOZĠdrRè@Eވ@@O_W¡ssaT{[csQSi}sicuo¹w{QYkyħOóLgEwwqJWM¡jsIuLmzUrNdAY¼p¡b"],["@@CeQ`MmVáJA\\`cxUf`k"],["@@iEwbmmd_g¢GyTf~´^´xEko"],["@@HZU`jÐ`DouOvmw£TOkK"],["@@TrNhan"],["@@pMWi@Hfe"],["@@ABx]eSOp"],["@@R\\¼XRMße"],["@@RD®lrcÀFZ¡ñQÕjDV"],["@@nhC}iV"],["@@Yi±G£oG¦ÁJ·G_ėgRÂ|KZ¼s´X"],["@@@vgpHvhFb[x¡e"],["@@olJQu"],["@@fwk@Fx"],["@@x¸@¦U@¥¹¬²W"],["@@GlpAgi"],["@@Kz~LWIec"],["@@UXôhboÑm¦Ói"],["@@iQu¡Icf"],["@@ZvJLc"],["@@L~L°k«PocH¡Ď]ĉI[TG¢"],["@@Qd¢UM"],["@@{P Vce"],["@@@ATMr"],["@@ÂCA|UUi·jshFz"],["@@XzIHg£G"],["@@¤NÄGRyoÅI\\ĈjcĝRR`"],["@@°dAnÑAÄf|QHyi@"],["@@c`Viu"],["@@Jã¡P_èrßJTÎ"],["@@ppĘpÄĨ¦°ÀŦ¾´XAz_^]m×Y½ÝaŇąeÍAÇpk~"],["@@ZJ¦ufiqqkx"],["@@lBGe"],["@@BXFhPJgscKJoM"],["@@Rrnq@"],["@@vKvggwY"],["@@GthT_"],["@@PAaR"],["@@xjNxOBgÓYuZ"],["@@x^tDMz"],["@@AtiËI]hrN"],["@@@am]n"],["@@xv|KioIYr"],["@@ÈTY{Qq"],["@@ª~ZpUoé_KoX"],["@@¾La}AIt"],["@@ÐàĪìÊXüCòakS[ť`ãU­oãáµ¡E@l"],["@@ztWi`"],["@@D[¡B[~¸U"],["@@wF\\|ĺjpqiùO"],["@@¸TÉCp"],["@@ê¤LLw_§TsK`"],["@@ĈbvGIg¯D¿ewBtn"],["@@@@ABFDB@@@@@EE"],["@@|N_q"],["@@PNi£DJV"],["@@@tyUS"],["@@p`Iw«ĶXNmÛo­IRK~v"],["@@dxÀYF_il"],["@@°@^_£Eif"],["@@ðzzKykÁYmX"],["@@TzBmÁ\\S"],["@@NĂe`U}¡L«d[~"],["@@jdZeS]"],["@@xlXSW"],["@@NTÖnVW×aV"],["@@Omigz"],["@@BÄHQÃG"],["@@n|t@ygb"],["@@h`lLKb"],["@@Zv°®GMkå±YB"],["@@b~àFJ»s§R@f"],["@@mymffhvS"],["@@VV©MW¬"],["@@vJNsj"],["@@OjØXQß"],["@@ÈNA__{r"],["@@VÞ^BK÷gX"],["@@_wGQh"],["@@t]KmD^"],["@@L^OkI^"],["@@\\YimN"],["@@DlĄZ\\Yģk"],["@@jkke@_¦P"],["@@Ggcal"],["@@fdc£kKj"],["@@JvvpzAJuy^"],["@@´pW£gE"],["@@dbk]s|"],["@@lr hZY½gD"],["@@ºVRe­C]T"],["@@DRĖ~YåaU"],["@@ \\M[H"],["@@BqsYr"],["@@hWiB"],["@@AFBA@C"],["@@l^ZmUTf"],["@@`zrU@mJ"],["@@nh¶@fSp«u]¥VlUt"],["@@°\\CJaąJ"],["@@ZpfOBb"],["@@JlFTs]k@Yn"],["@@xSy[G^"],["@@Jhk¥iO"],["@@pjv_ocuZ"],["@@`PiJ"],["@@|x´SLko[Fo^"],["@@jRdmyISf"],["@@n]ah"],["@@v\\CgyC{hYv"],["@@LOawV"],["@@IqYQd"],["@@ttruwiml"],["@@vDkkIh"],["@@tÚL }Yo¯Bã^"],["@@^£I"],["@@ZKguN"],["@@j\\ngD"],["@@¢CY]b"],["@@h@}JGl"],["@@dt ^b]wD"],["@@^j~EMr"],["@@JbC]"],["@@tZV}AKj"],["@@nj|SQ}GY"],["@@B@AA@B"],["@@@@B@BACB"],["@@YdZnDfaQgK"],["@@bt°OaA"],["@@NdÊVUI_J"],["@@xViuJI"],["@@Zf¼GA}@u`"],["@@RMo^"],["@@dC{X"],["@@Jt¹wcOo"],["@@LpOJiUk|"],["@@Dg_i\\"],["@@``L`s[d"],["@@zTHgT"],["@@@@@A@B"],["@@BAA@@B"],["@@FPQB"],["@@RRk_Wz"],["@@`BiJ"],["@@}\\jfIq{"],["@@_x¨YOiwL"],["@@@@B@A@"],["@@txC{oD"],["@@VtÆHIuew`"],["@@v^[}Y`"],["@@XDmV"],["@@ÂZA}§@Wd"],["@@¤`_©}x"],["@@HFun"],["@@_u]v~@"],["@@@@@@@@"],["@@OkEQf¢L"],["@@\\jgW"],["@@Bqkcj"],["@@@B@A@@@@"],["@@MkevtI"],["@@lWQeY~"],["@@Ljpi{@"],["@@SI@JT@"],["@@®NDy¹NH^"],["@@@syNzf"],["@@@oLC`D"],["@@JgAgzV"],["@@vJD}iMO"],["@@SwoJXtlE"],["@@jIkkBv"],["@@CAEAE@E@EBCDAD@F@DDD؀֌DBFBF@F@FADCBCBEACCC׿֋"],["@@CCECE@E@EBCBCDAD@FBDҎٚDDFBFBF@FADADCBE@CACҍٙ"],["@@@@Aq@ECCCCEAE@E@EDCBADAFBr@ل@FDDDDFBF@F@FADCBCBE@ك"],["@@ƐˌĦʄBDDDFBF@F@FADCDC@C@Eĥʃ@AƑˋAAƁǥCCECE@E@EBCBCDAF@DDDƂǦ"],["@@EAEAE@E@CDEBAF@DBDBDׂՀDBFBF@F@FADCBCBEACCCֿԿ"],["@@Ǟ ˒ĬFBF@FADCDCBC@CAECCEAˑīA@ǡ¡@@яóE@E@EBCDAD@FBDBDFDFBюô"],["@@@BoČ@BȞ@BDʺBDrĀBDDDFDF@F@FADADCBE@CsýCʷȝnĉzµBC@CCCCCEAEAE@EBCDAD{¶"],["@@ºú¦úŎnĸLŪCÖBDBDDDFBFBFAFADADC@EDÕ@AKũ@AoĹ@@ő@A§ù@A¹ù@AÑñCCEAEAEBEBCBCDAFBDBDÐò"],["@@µƊăƔăĶ³ÄǽǴADADBDBFDBFDF@F@FADCǾǳ@A¶Á@@Ćķ@AĆƕ@A¶Ƌ@A`³@EACACECE@EAEBCBCDAF_´"]],encodeOffsets:[[[128379,27495]],[[128512,16384]],[[139428,16282]],[[139295,27392]],[[135765,27392]],[[133816,26916]],[[131246,25614]],[[138126,26851]],[[135960,27375]],[[133095,26507]],[[132837,26395]],[[132634,17343]],[[133933,26737]],[[134038,26818]],[[133978,26628]],[[131437,26210]],[[132791,26451]],[[131559,26170]],[[133539,26664]],[[133683,26600]],[[137495,27341]],[[133326,19501]],[[133651,26580]],[[133260,26531]],[[132134,24101]],[[132491,17330]],[[133722,26824]],[[136291,23137]],[[133960,26615]],[[133941,26609]],[[138800,26976]],[[138821,26680]],[[132658,17374]],[[135655,26017]],[[132315,23644]],[[133188,26542]],[[132281,23697]],[[133647,19221]],[[133808,19912]],[[133800,19892]],[[130560,26115]],[[131440,25945]],[[132324,23773]],[[132655,19899]],[[133691,19136]],[[132471,23715]],[[133959,19852]],[[132657,24066]],[[137440,27250]],[[134287,20657]],[[134236,20468]],[[135046,20328]],[[133674,19274]],[[130742,19088]],[[135341,19904]],[[131619,26087]],[[132807,23546]],[[132848,19893]],[[134127,20903]],[[132760,23705]],[[134050,26819]],[[131538,25761]],[[132167,23785]],[[132743,24012]],[[135478,20693]],[[134820,20427]],[[134271,19567]],[[134154,19515]],[[133754,19465]],[[134590,19662]],[[134787,20174]],[[138060,26788]],[[133583,19953]],[[135466,20062]],[[134244,21202]],[[134436,20919]],[[132216,23795]],[[134285,20981]],[[131109,19372]],[[133805,19907]],[[135645,21256]],[[132293,23855]],[[132832,23781]],[[132334,23586]],[[133730,20478]],[[135534,20354]],[[134362,19546]],[[134686,20578]],[[135716,20724]],[[134287,23633]],[[135158,20141]],[[133605,20090]],[[134272,19247]],[[136336,20869]],[[134154,20839]],[[134286,21234]],[[133986,20598]],[[135581,20739]],[[131461,19514]],[[133309,19489]],[[134669,19720]],[[132140,19723]],[[134041,26813]],[[133883,20957]],[[135998,20641]],[[135110,26168]],[[133958,23572]],[[131574,19460]],[[134832,19708]],[[132189,19219]],[[132270,19805]],[[131473,19353]],[[132727,19929]],[[132439,19492]],[[135475,20385]],[[133571,18930]],[[135107,26110]],[[134486,21033]],[[134137,23350]],[[135190,20529]],[[133904,23557]],[[135984,20832]],[[134408,19078]],[[132638,19884]],[[132274,19268]],[[133045,19925]],[[132851,18330]],[[134222,19884]],[[134407,19447]],[[133130,19663]],[[136060,20529]],[[135622,23732]],[[135058,26995]],[[134047,26778]],[[133160,25323]],[[134125,23566]],[[133716,25160]],[[132930,17982]],[[132253,19409]],[[132660,19905]],[[133091,19376]],[[132884,18219]],[[132847,18257]],[[133562,20605]],[[134731,22501]],[[133738,23285]],[[134050,26820]],[[135058,26995]],[[133103,17911]],[[132868,17979]],[[132731,18238]],[[132662,23390]],[[132653,23938]],[[134085,26790]],[[132815,18296]],[[132901,18106]],[[133312,18589]],[[135262,20265]],[[134457,19207]],[[132197,19355]],[[133789,23470]],[[134459,23574]],[[134053,26777]],[[135675,20002]],[[132931,23745]],[[135001,20719]],[[131976,25562]],[[135980,20859]],[[135020,20762]],[[132949,23720]],[[133564,26728]],[[132838,20250]],[[134247,23378]],[[136300,21021]],[[136037,21040]],[[133943,20170]],[[134319,20350]],[[132873,18425]],[[138491,25898]],[[137392,24449]],[[137217,22952]],[[136932,21026]],[[134751,18911]],[[132700,17161]],[[130019,18370]],[[131229,21088]],[[131131,23049]]]}}],UTF8Encoding:!0}
});
;sugar.define("sugar:widgets/charts/map/china.ts",function(e,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a=e("sugar:node_modules/echarts/dist/echarts.js"),t=e("sugar:widgets/charts/map/china-geo.ts");a.registerMap("china",t.default)});
;sugar.define("sugar:widgets/charts/map/world.ts",function(e,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var t=e("sugar:node_modules/echarts/dist/echarts.js"),r={type:"FeatureCollection",features:[{geometry:{type:"Polygon",coordinates:["@@࠿@ᠳ࡚с̶ʩт˷˔ƹͮɠͲ˖рԜ׷҄̕ҴNܾͰؼ÷۸ήԪҮƴ̮¿ঞɪֶϤϲŹƛе²֭ĝǱƊĠǔōϭñėށ؅ਓɁȥԯ঻ƻԓࣗඩअ৯۝ڻो֑য়ߝล໥ϓ؇UļāļƫȖɩ̌]ᶼ̈́͘ɮ͜ɪ͚®ĞĚ۪ƼɦːϪǰ;Ąߞᢌᣮ"],encodeOffsets:[[49130,8189]]},properties:{name:"索马里",childNum:1,cp:[46.177734375,5.14453125]}},{geometry:{type:"Polygon",coordinates:["@@ƛ¬Ð@ĞÆÒªǱ"],encodeOffsets:[[9810,48188]]},properties:{name:"列支敦士登",childNum:1,cp:[9.4951171875,47.1455078125]}},{geometry:{type:"Polygon",coordinates:["@@⌗øĒ୬ͪࣆيʊˆ҄ؔ^˶ȇɪÈצϲ֌ĐФ؜ְദ׼ҢڴήࡔլİtʍԾ΃ʤ՘ĲʢË΢ǒŎɽĠPĀmǶVǢgΤ̑ĮவňȵǑ¼ýĈå²yĞÇÞ³ëąÍĥʹ೵]É³Ɨ{ΡŉƑcăZÉSÍƫH˃ǨǓѭǇƣġǥÕȿÕǃñÿśıƇħěŽđұĿЍUƉÝåSĵ^čfʉdʇǍ·ণ֣oۋ@Ĺ"],encodeOffsets:[[-8891,28445]]},properties:{name:"摩洛哥",childNum:1,cp:[-7.0517578125,31.8408203125]}},{geometry:{type:"Polygon",coordinates:["@@⌘@ķœ@@@Ŕ@@̷@̩@ǕBȍ@ȋ@ƍ@ĩ᫫@@ɋ@΃@ɭ@ŕ@қ@΃Oх̉űƽw½gΉɩķƯtįQJǳ՟TšRšPėRŏᇷCฝCċα`ý§¨Ƙ࢘Ӕ׎ŰшΞ׎ǇĹèƤ࠴݂Ģָ͌܌۴КͲޞŚƀ","@@i˷@@j˸"],encodeOffsets:[[-13351,28480],[-8984,28120]]},properties:{name:"西撒哈拉",childNum:2,cp:[-12.89013671875,24.3095703125]}},{geometry:{type:"Polygon",coordinates:["@@A@ƟwđĵȏÒʁč«Ǔƅ@ã̌Ο˘SǴʒÊÆ`Å_֡˰ϟʊkIDZʪĠɁ˔˶àϷˈȘѬ˻W²ɤ˲ÚͩǀºĬȋːÈĆѠŎǊĘȘoø`Ȓg¤_cº·¶ÙȈėÒ÷´fFfV\\T^Qhɿ՘ɳkĝƱƨ÷YißMµGuODƎĨãɰİÈßĜhŴĬŬ~Ũ±âZ]ãNÇk¹ėǌƽɣȭkěHãƺ˝Ǵč¬­¡İÃƩǝÿďȫẸ̀Qßço}ß]ĕUΥ@Ʌ±@@"],encodeOffsets:[[22080,43262]]},properties:{name:"塞尔维亚",childNum:1,cp:[20.90869140625,44.02197265625]}},{geometry:{type:"Polygon",coordinates:["@@хǑޟܯőࡡԧ¡á͘з¤̧սշŊƉˏͭąٝ°̺׿ٓɥɓӱз·ʫɫƚν@ӧʟƆƋʇğԻzЛϭĭ޿ॕʳכ]ʛŷѿĘࣻõЍĺٵȀ͋ĠШъȒȢȌȜxèFƆ·ǴăĆˁȡ|ɍZ{ƒZØaŤDĠƲDèĳ̎őͨaŦ̰̚˽êóļ@͒ƂǲȸZíĊ´ubSv\\vÀTÎ hňǞjΔö´ƌFgÈèTɶǓЀ«Ȁǫ͊î̲ǆzĺîĢƘ؜Ɣ˒Ř˞ǈ°òńƲъÖŖ¾ŚǶRɄJǮˊרȋ¦HʲpȮńċľsĺ¤ÚR|¼[þJ¬wNwNÌÛļûĢmǌÂpp^ªô¤ʂĸ®T¸SZ^b\\~VvL¤QȂƓî§R¦¼¶^ê}ĞlôÒÈŒǐ`ƐǢbÀèHĎ±ĸ^ǠŶˌ̆ѨīÞŗ­ɃaÎJĊtÄB~oűځĈʁŔů࠰˨ȦȨˈŢƠ®ĈRľsª_ÂW\\a÷ËvkĄOΘĈ²ʹkÒČÑ¼­§MÕryWJ·oğ}ƽáHiĸã|u^Q"],encodeOffsets:[[76331,37911]]},properties:{name:"阿富汗",childNum:1,cp:[67.68896484375,33.90771484375]}},{geometry:{type:"MultiPolygon",coordinates:[["@@ÂR̮cҮƠ͎Åǖ@ǔ|ɔDªĞƶHǊŖ̈ƄĺTǊ|ʖĞGR_¿ƽA½n½¦ʬGɼEҾi°oČ଩ýٵ͔ӑĠճēśnʕ¬ÓIàþÖÚ~ɈqɘM͚Ĳ̴ŐŢdܓ×މoěG±ðƁIĵY൑@ȗ@@ڟ@ˑ@ˑBౝǶ֡া࡙ࢳǑ೟Ƶҧƀ਩¼ҹͺሹTᅍeғ̴ʟÌՋȭǃNOėFǗģµƇo͆ƖËܼɠˌ҆ლζ֌θɌƴȞǀЊ¢ݐс޴˫ߚ̢̤hˊүஒґۤݴɦƌOՎNዲQĮĘÇƈǕϡÐŻĚƉÆ˕Ԃۻ"],["@@̆Ƅ_øęÞËr___ğıͅ˭DeÌ·ӏɫθƅːОΖ"]],encodeOffsets:[[[18002,-8293]],[[12802,-4697]]]},properties:{name:"安哥拉",childNum:2,cp:[17.86376953125,-11.22412109375]}},{geometry:{type:"Polygon",coordinates:["@@Π˗ä̋ÝԍȄ́ɊßQÙÚŷűŻȉ̍ǝ©¡aquwW@yÐğBƧůÙPÑXkAűˬѽ̨ŚAĹɐȨࠐDŮȡæ½ʮ̾ϦŒŷɴÒ"],encodeOffsets:[[20546,43569]]},properties:{name:"阿尔巴尼亚",childNum:1,cp:[20.15625,41.1416015625]}},{geometry:{type:"MultiPolygon",coordinates:[["@@Ł^ĊĤ³"],["@@ɨ÷ϫƯħƾƊ¡sƜƖ"]],encodeOffsets:[[[20135,61632]],[[20470,61800]]]},properties:{name:"奥兰群岛",childNum:2,cp:[19.8984375,60.236328125]}},{geometry:{type:"Polygon",coordinates:["@@Ɵ½íIir[ò\\¢Ö ÈOŢ~y@esQm"],encodeOffsets:[[1747,43524]]},properties:{name:"安道尔",childNum:1,cp:[1.57763671875,42.54052734375]}},{geometry:{type:"MultiPolygon",coordinates:[["@@ʙOǘøĂç"],["@@šȆĶãŷ"],["@@ø֟˗ȫÁǸǣïԿƖw´ŷѡĹÂĹ˧څ[˥ççᒣʾ߳४oǪǘÚȱɴѼƸॺí̆ĐȾĚ̌҂ৎࠠŞɦò_m̙ź"]],encodeOffsets:[[[55223,24758]],[[54613,24841]],[[57650,26267]]]},properties:{name:"阿联酋",childNum:3,cp:[53.97900390625,24.3427734375]}},{geometry:{type:"MultiPolygon",coordinates:[["@@ؠQۓƫĵÜǪĢ"],["@@nᇜ͠έǇvµǥˠŸɏ׶УࢸНࢴŧʕȣ࢑įԭņ౳¦"],["@@ȴǛߖȡפϿବӗɒ˳͉ӡȧɇ˽ͫЛoÁıξบɿɮȜǴGƌùÚDæ¶ÌEæ¶Ì rºʒàǞȔɌͦʮbΰƠ¥ʐĒɜũȈԵƛ۩ЧʩхŃɫˇԽ˳ƩǟXࢣ਍ʉƽƯɃƅę¡ě½õĳģă¾ɣÙßdƕqùşȅißlgĝëĿēk©z¿HÃiÉZÇÁEÕáųeû¤ͩɅŷĻҩžѻőēȰ͗آ˯͆˿Ʒ̛fʳɔɧ˜¥ÞщܿਟՍ̍൱ͷઃŻأУƊϋȰŉŁMĒå¯̩ŽÍīʩžБůǻӃǿ֋¥਻ΤɛŧŬਅϘŷƋŴcˎňƗ¢θĖƒƙZ΍Εƻϟ̲ЛŹ³ýתǭѫȁ΋͏Yש͏͍R̅ҧكʗցڛþؖ͟ӁٺóɖɁÛʗΉǁʔ@ľĩൿࡕǿʛş֡γƻ·̒LƷˋÉ͎KƨůԹ˻˃ѹƄƒеίăрýѬ֯ౡ̊࿩fЩϘÊܞƛØգŋ̉Ԩ«֊þŴ˜\\Đʊ͐ƢÌ̮ȒĠvɌǃȞƠ͒ψʔ̶ȬưƧЮȴǨī̀ͮȺȹ̒ϏÚmŎڬRĐǠ«Ĵԛ¶ŞϢȋӨżĢͩȺب̜ǤƉͬiߪȊʼğǤƄž»͖ƲŚ֖Ҙˤʷ۾qޚŘˎմϲUҐŝɶƌČ˺܆ǚÜ߆ɝèÀˊ˻ڨĠł˥͚ÆΞǰłƀ֌ǒFĦƶīĆÉيǘȄƞׄМЪˠ٪Ɉ\\ɰƖɭцƪˈƫ؞Ǫˠƫ̂ʾ̘ݨ̞̈ࢂƽưǢʾɼʚ̆Ē¼ĘİxzEÜ}ǘşöãîSƖ`Ѷ_͘ĳèţħčÔƧ¢ÇdǊʒѾ°࣠Ǽʗî·ƚ÷ƄƣΔӍ׶Ћ"]],encodeOffsets:[[[-66098,-56029]],[[-70300,-56170]],[[-62550,-24224]]]},properties:{name:"阿根廷",childNum:3,cp:[-63.61083984375,-38.41650390625]}},{geometry:{type:"Polygon",coordinates:["@@́{ř̮ǯŔfƖ˟§ʭôķƶɛ½Г˲Իðą̘ŸȦʁ͚՚Ú؞ÞǆǀťıÑѢȓǫƣÜşєʣßǫʳ¡Ժ͏ɼīŷȀƭƹúʇ"],encodeOffsets:[[47607,39841]]},properties:{name:"亚美尼亚",childNum:1,cp:[45.0126953125,40.08447265625]}},{geometry:{type:"Polygon",coordinates:["@@āɆƃë"],encodeOffsets:[[-174823,-14695]]},properties:{name:"美属萨摩亚",childNum:1,cp:[-170.69384765625,-14.30859375]}},{geometry:{type:"MultiPolygon",coordinates:[["@@īƨǜMïƙ"],["@@΂ŜªūȩÃŚÕٸǔȢťƙțȃúͽñȐŵɖ¨ĻƣࠅƦƇƥƫJÌ҈ħĊȜͼŒǗëȃŐy"],["@@ƥÈè þħ"]],encodeOffsets:[[[70946,-50236]],[[70846,-50288]],[[53079,-47554]]]},properties:{name:"南极洲",childNum:3,cp:[61.10791015625,-48.01513671875]}},{geometry:{type:"Polygon",coordinates:["@@ťowîÐÒĎŏ"],encodeOffsets:[[-63197,17446]]},properties:{name:"安提瓜和巴布达",childNum:1,cp:[-61.80126953125,17.091796875]}},{geometry:{type:"MultiPolygon",coordinates:[["@@ēǡÎƮŸÔı"],["@@Ȫb࢈ͥ;ðŀùŢƨϸQƖƂɂyĄþȺÙńଡŇȶʏԑlԟƇñĈ§ĐŸþȏêķǁŻȲ­ΧȻºæĳǡ˱˙Ĕщ£ƞǴ¼˫p͕̮ʏאɨɗ¢ŚƹǪą¥FƪЅՊĵΆÔʸ˚ĩ"],["@@£ÝÏÒĴL"],["@@éżBÑ"],["@@ÞƯ͑êʴĆ"],["@@ʠȓbƿǩõ˵͢ȞĨ"],["@@÷ǲƌ˖Š̻ǳƋ"],["@@Çȏ|ƾ"],["@@˪ZǎŁϟȅƩȩüϡ¥ǷŤĈŢגƀɀyXı"],["@@ĥɩRʨĔ}"],["@@ǿɪcɂȤѫ"],["@@čǘ¾̞ǂǀéǆĨðþ˫ɭֿ"],["@@þCȷǡȸĨ"],["@@ŅÁĮƶXĳ"],["@@ĕPŊÀř"],["@@jɇǗȞƮj"],["@@ľàēģi"],["@@̉ƙŒɲʚÔĢĵǃµ"],["@@ųÈÈĮìƵ"],["@@ÕgIżàœ"],["@@ěWÌŖĽ"],["@@ƪdũʉǤģ³ğҷèö̆Țǂ¸Ņ"],["@@īPþŸnƇ"],["@@ƃ×ʤǮşŕ"],["@@Ŭřҿ|żňƴŢŠƒ˽"],["@@ͼȶŨɪȹӳЩρʸŅΨȠƹ"],["@@Ñ»ɆΪƳ̭"],["@@ğɠĂÌ^˫"],["@@Í̉ʖ˱ƺڭʟǪԝǤĩјȚƦɕ՞ϙŜ௳ˠЉƂǶ؇ÿՙʪɽ¦ΣٌΓɼ^˘͡ࡢѧŀǇŻZĥѪқȾϟɀܥĴ¨ŶƇȰŔŦϸͧxƦĔƞ࢑ʼ˙֬˵ʤЋ˜ǣǔͱɔȗÒ͑ưů¡ਗϬ࢝εӯཝñܹ͓ԡõͥ˫ȩzá̏ťѩ֯W̃ſáĜq̡ЁÉћԟۏɗාϝȯകƍࡧؕ՝ÁĴƕŊ®ÇʱȭɾȉŧȢͥŌŪŢÇŴƷL˩əȯƈǎGǪɆȓǈеȥɨÕृԡࣩκؗĬŋįƛr΍ʌԷưԗնÔӪŅʔٓڔǬ¶ĤóMȢٕɡ˳|˞ӶkɖͳԀͭࠉڷąŌ˘̈́DĒلςӨã͈ŠĚǫѠNȳ̷̉ǡλڵͳҏՋàˑƩĴŧÝѳ̖ĀĊȞÿȗԸˣ˪ĉʢƵŜʳtŅƼÕȘńdNƶӋ˺ϟpϣȒҗ§࣏ј̣ĝഁ±༱ԕ୷ঃӭџŏإݵଗÙ÷İտ¢ಧů͹ͥұģٓэҭģࣃĢѽǊΟ̴ұƞ_ج̬Ŀ˘ϔ`఼Է॔ȃ஖ׇࣀř؞۽঒Ś½ƎȎБŸĒĂbƘϩԴ´ĪɘșVʣŊĬŚʵĊÓŀĖAπڟஔÔӈɤϜшĥɶ˸َĎ¬fջȢŢ˨Ѥغ˨Ұϰא̈́טÉښ̄ҪĨ̒ɢМஊκ˸ʆи۾ј̬ǕӀĪΎϬ̊ɀ̎Ӿ࣫~ЬȨ÷Ǟ͑άŔØeǊĺŊǃƼİɌĻІ]̯ĔXƔƈhÔȲŧďĻǶ¸ɞĺEŌȈ̶ƗTŔƍEÏŲǘƀˊīƫ;ͶȚ¢ȐÞȧƄ¼ÐůŌļѤŊsØƉŨŨƖšǰǤIƖńҰʍ؈֯ġԱðĖĊÕáɊʹɦМğƂɵ¬ʐ̮ɥFʐǲnȳƴþøˍƒ˦Όň΂ΠɪĿƂǀȚɨǾJǺȶŃLǆΘʦŬǫՂGǄĂƂğČƈǞXçö͖ǗƂͷbȿƢŜĸǎŉƬô̌ʁɺĈȊʡ؀ŁќȅˀÌʦǫǂwעͪǽ͑ʮdÖȗƮWÌňáŎǌȆɶɱƬc¨ęΉι¶ǿŏȅƕò̯ƓxՋҥە¤ƑلЗðƓΎīäǫǾ`ל̕ҔС٠ƱȨίڌ̽ЎàˎǮϰߜˬ஀đӲÒˊĹ̘ƢҎˆˈǢɃȼVŠƴ̀úßǨजʎȪŰ©ŁȐȭþץʴŏ"],["@@ëµ¹ĸÈ¤Þĥ"]],encodeOffsets:[[[150893,-44438]],[[148525,-41765]],[[151795,-41487]],[[148260,-41478]],[[151887,-41274]],[[151553,-40711]],[[147383,-41078]],[[148803,-39414]],[[140899,-36596]],[[157224,-28094]],[[115900,-26678]],[[156752,-26368]],[[154775,-24054]],[[118217,-21286]],[[152621,-20778]],[[149789,-18668]],[[142807,-17525]],[[142857,-16970]],[[140384,-16156]],[[127588,-15771]],[[128204,-14929]],[[139996,-14135]],[[139508,-14156]],[[139611,-11880]],[[133591,-11959]],[[133754,-11649]],[[139877,-11651]],[[135776,-11574]],[[146616,-12241]],[[145690,-10961]]]},properties:{name:"澳大利亚",childNum:30,cp:[133.2822265625,-27.10205078125]}},{geometry:{type:"Polygon",coordinates:["@@ñǱʀ͋ãʣթɊśȝŕV̡ͥťŕƻࣃÑ˿ǥ܋ĶǭśFƵ^׃Čù~·¶½ÚĩČo¦I\\wPͥąȻXā]ǁMġÑÝ½iÇOĉLÍfÏ¬ğPčBuTDÆÅjǹőҫǦ«ǶĈǒď´ȌªúoŎÀvqL±Ŕ{cíƼò¨ŔSƨLêoŌGƚŃ२ȐdxMÀZR¸_ð@Ŝcǌ_î}t_aDuvkÎø}Dd~bÒLÚſÊ²ƘǋǼϤǐĜ|òÀ¦ƞXN`TŲAŲNZJłXhȠƑբE͂ͰࠬȱФΆǓ"],encodeOffsets:[[17360,49766]]},properties:{name:"奥地利",childNum:1,cp:[13.3359375,47.69921875]}},{geometry:{type:"MultiPolygon",coordinates:[["@@Փň֍ը£¬ɜ¾ĸƵʮóˠ¨eƕǰœŚ̭"],["@@ݒ࢙ˎǻ΀áƸȋϓ̯ĻȏӯɑǓˋŷĔƃʝ\\͹ɵqԃόʞƒǁȆǾƄ˛ʈ౉ٷùʈƺǿƮĬŸɻԹ͐ʴ¢àǬѓʤÛŠǬƤѡȔĲÒƿŦǺŐÂvڲɟ̂ěĔXüÒðT­´ˁƐķǎȸǄˎßӌѽЈéڂը"]],encodeOffsets:[[[47222,39811]],[[49739,42849]]]},properties:{name:"阿塞拜疆",childNum:2,cp:[47.5673828125,40.1513671875]}},{geometry:{type:"Polygon",coordinates:["@@guûƿcy¤«£ŇR§èöcĘÐOōiƃ͇͟ϟչȕů˃LǇԮZپǭ˪ôľʎǳʶ^ƜàÀ̈́ǀÝʔĔŨñ"],encodeOffsets:[[31287,-2457]]},properties:{name:"布隆迪",childNum:1,cp:[29.9130859375,-3.3837890625]}},{geometry:{type:"Polygon",coordinates:["@@ʦq̈ʣȋ˥wAá\\ğí£Í}©͋ʁw՝ɸ£̪ɯǉͫVtɴСºÿƞ˓°Ɠȼ̇{ȟ̆ۚɾèōЂ˘ƮڰêƸǅӨŁđͅ"],encodeOffsets:[[5831,51994]]},properties:{name:"比利时",childNum:1,cp:[4.43359375,50.49072265625]}},{geometry:{type:"Polygon",coordinates:["@@ÁÁŏEĕŶǽbmlʻàƋ¿ǃĿQͻɷȍɽ׏ɧÓ֩aлɍÙÃAck_wL˝óVŃjån»k¥cÇ{ȍ࣫ŹžàȹזĀJqႬǷʾ±ՔӇ͞ŚԜѴϠҮyΆДo˚τƌڒׁ"],encodeOffsets:[[3682,11977]]},properties:{name:"贝宁",childNum:1,cp:[2.29931640625,9.30078125]}},{geometry:{type:"Polygon",coordinates:["@@­ΏȀɃ ɯǂɥӪ̃ǱNC˕ӠͿҒÈĸȡŹƁˈ΋΅Гҭzѳϟ΃ҽƊȗ¨˟ȩΑê຋WíͿļƇVֽ^óºĽV«ko¥¥D·ØsÜÜ­­ÃĆ¿ÇYʕǫM͟ŕïÅćÕDķÚĉSąґӂɗĚԮȬ˪ϞӶȼɪɘ©ˮɈĸď˚ƬǀǠĄΜǿȎĈ®͆ʢUÞʬʌɸЊ¹Şʎޤ̨ʐȒѲXϠŭ"],encodeOffsets:[[223,15270]]},properties:{name:"布基纳法索",childNum:1,cp:[-1.56689453125,12.2421875]}},{geometry:{type:"MultiPolygon",coordinates:[["@@÷r¢ǆǷ"],["@@ç\\ƪnā"],["@@ęÏΒÒ́"],["@@ũĀŠĐȟ"],["@@əqƒɚƫѐĀzɮ͇ùͩ"],["@@|JeƊÊAɪ̻ɖnńĊæŶɫD͍oȉZ¬WɆÕв«ாDΚȍéāőo[Aġğɷ­ĳǽǗĳ|̓ŧǃͱǖӻÞŌİǩÈWŎÖFȠÖŰŦQĀ@ô¦LÆ[ǞLòχzˁĒǍx¥Î՗\\ÏPVЇƉʧŒŵūŨуɣ͐ǉনÇ«ˉӴɛȱɩʑή©ӆ£ƛʉ˔ǃſѝƲ͓͝ҁƇ¶ŜɨɉőþÈ̎ơЛȱǻïђḍūǋɓŶ͸ŉ̜iǰ¥ǔàŬǡÌuȦ¿¶ËľŐˠ\\Ê\\ĮNUå¨ťjƉĜĥNátÉÄ¯ÞL`¤ĖǜLúAºäìȐİ@̚\\ÊõïƂɡ̗ɲ~ȸƶƜĚĦ­ĐXfæŰƒȏɐ"]],encodeOffsets:[[[94157,22025]],[[94079,22357]],[[93339,22708]],[[93755,22920]],[[92957,22620]],[[91076,26876]]]},properties:{name:"孟加拉国",childNum:6,cp:[90.328125,23.67822265625]}},{geometry:{type:"Polygon",coordinates:["@@ĵ̓˧NǡǭνͻɿѼнҏmƱŐ¥\\ȝéɧuÇËÏŵsySyFyĵxÿckkgÞŵXñg¥ÍţśfɏŧŋiБĦƫòwr§î}FγyoµkQ́ÕċAđZ½SōGëÁȫ^ôͺƕɈЯːà^p~àèRQnół~ǴˬŦƪǞįÄ¢«®ǳĎƹ˞GäĜlĄÀŠŠ˸ƩƇŉ¨ħᓞƏ؀˲ܸƈ˶ŭϬ˴Ƿ̨}"],encodeOffsets:[[29272,44793]]},properties:{name:"保加利亚",childNum:1,cp:[25.46533203125,42.74951171875]}},{geometry:{type:"Polygon",coordinates:["@@ÛĝƄHɜĬXl̛"],encodeOffsets:[[51822,26505]]},properties:{name:"巴林",childNum:1,cp:[50.537109375,26.0244140625]}},{geometry:{type:"MultiPolygon",coordinates:[["@@řǵѡGBņƂôʎƪƄĵ"],["@@ʚďΏ¬Ķ¤"],["@@Ï{̶̀¡ǀĖ`\\ǉ̵˙"],["@@ǽWņɀĭ"],["@@͏ɬþĒƻʹЎٱ"],["@@̻źxÌ̄ȅ"],["@@ĹĉrŖĈ"],["@@ćïŞ¬®áWͯǓ\\ȓϾ˼|"],["@@Ǐ»Ăńˋ΢ΚЩ"],["@@Ƿ`ʊvÑ"],["@@CȳʣƧďǦȃ¨ËêǊvҌȤęȚ̓"],["@@ʰſǾǇЭųƚĚJ¬ʠǫǌɁĴƇIÐŚ¾Ý"],["@@ӐۑǅȯǄǀěǜǺĖÍ"],["@@ƩĸƀŎPͼɫʈη¶Έ@Ͼ̽xǑŇý·˱"]],encodeOffsets:[[[-74779,21702]],[[-74794,22968]],[[-75987,22747]],[[-75834,23269]],[[-76636,23444]],[[-77480,24013]],[[-76215,24646]],[[-79521,24832]],[[-77115,24781]],[[-79203,25615]],[[-79609,25301]],[[-78488,26100]],[[-80376,27371]],[[-79079,26526]]]},properties:{name:"巴哈马",childNum:14,cp:[-75.8662109375,23.93994140625]}},{geometry:{type:"Polygon",coordinates:["@@˼Xȗѫϸˇ˵ßɂ˓ʩğ{D©OS«^­To_ðƛSÃ¡M®ëNď¿Ù«§ǟœ_nǇäŕġå٥˲çÆÌ̓τࠉ֮Ṷ̌ͬȶªΎȬVɞƱȦǨ͚¼ݨǗ܌@ƤǍƞ["],encodeOffsets:[[19464,45947]]},properties:{name:"波黑",childNum:1,cp:[17.66064453125,43.9189453125]}},{geometry:{type:"Polygon",coordinates:["@@ŘñࣸįkŻº¹ÎŰÊ®fº@ät¶²ZĘQǈR͢ƭʀąKơãÇUoHyÂ±æïh¥@ůŕs­[¯PmƼóŚ~oÝőĢĪƉĖăȌíƎ¯sX}WÅãyÈeƞJǬ_ɀŅɈˇ»OÇaĝ˝ƭʕ^ƳĂɁI{Uo½ßw¶³øÑüÁ~jȏOȃpw¤mÊāJqǃNȑEŅ¯ȥGŕÿ÷µóåëĿ§ýzÃ»TÃj©ƵåʏǢۃăȳȶC¡uw§SßkıěLd£ðÉh֡~ƅĩSĂͥrubŅŜËRķMƯbࠥŸண±çýŹġůÕwKñÓ\\íHýĭQM¢ѮБȸجОαজØiƦMϨ}æwʬòŮIlpĶvƪWÆlÊºʂàwl¥{ÚǊ¿Ħïd¹BSjj¬êÄÚzNvSņŘǜĘxň`èÚĸ^ʺQ ØņÌ_jáZƻXrX|¦Ü¢ĊpÜFϬƎѲӒ̂"],encodeOffsets:[[28824,57491]]},properties:{name:"白俄罗斯",childNum:1,cp:[27.9404296875,53.708984375]}},{geometry:{type:"MultiPolygon",coordinates:[["@@ÝŝĔɜuĽ"],["@@˵CÒྪzƀ˞KʄИȒv­ħȀOĿƽԭÌÿğݑӥد"]],encodeOffsets:[[[-89961,17841]],[[-91027,16272]]]},properties:{name:"伯利兹",childNum:2,cp:[-88.529296875,17.1806640625]}},{geometry:{type:"Polygon",coordinates:["@@ŏgǎĞ½õ"],encodeOffsets:[[-66283,33069]]},properties:{name:"百慕大",childNum:1,cp:[-64.76513671875,32.32861328125]}},{geometry:{type:"Polygon",coordinates:["@@ĭއҀޕU฿̇ѥޗAх̽গǉȤࣟ¯ʑѽǉc¡ÈÓƨČĪçŤ͗Ĵѵ`ƕ_íTõäǗŠÛ|Hwyįė»̅đɻʙǡʽƕǽǷZí´Cˢʯ݀Uˌ̣ͰØɰɗƜ[˾ǖŰDÄgįĮEhļƊĦńMpkx̭ʐġŀUž¡ƀÅ̾«Ŝ¨Āǁî}nǕξ@B@UÒĽŠl¢ԔҸWƔǄŚ̽ǄǡѐȾͼǝɰ^ƘЪՂǟФĂڬʚ͆ݥನ̌G͌±ƜďɾĀ˜ˆä|ƀXĨiʲʘۺЬরǀĈι]ęçś³S·Ħ͕VōÇȅǢх͸ʹؚ̨͋˼ǝɼVʬ˟ծƋnçŴƑÐÁî±ǶBÄaĂ^ʌz¬RӐʥŒՇČ֛ŇIƳI¬ŴƥŚƋΟhȗXŗ൚¹DÖf¢r~AIǥĵƅO§fǭƛlŹ¢¡̜șðgÔj»RĉĲɵÚƥúûßÅŵϟµƳÆŉΏיɪȡuÕi»]ÕăÅ["],encodeOffsets:[[-59555,-20648]]},properties:{name:"玻利维亚",childNum:1,cp:[-63.5703125,-16.3017578125]}},{geometry:{type:"MultiPolygon",coordinates:[["@@ËXȦņƦÑ̯"],["@@åĦłĴș"],["@@ǇMŲƘƉ"],["@@ȗ}İĊĨË"],["@@×§àĬFÓ"],["@@ÚǼÊĥţĕ"],["@@ĉćĮːcȇ"],["@@ř¯ĘĄ§"],["@@ėeɐ̮ŒξʖĞĀĿī̗ҳ΋"],["@@јÆ؊őυࣽǣĽőĐ½ƽɭôçǛǻßɕòχëɅҢĨŸpŏtñƞŴՒͮƀԶĥ"],["@@ɯǑģĐǐƨǄå"],["@@͕f˜ƬŌçÑĩ"],["@@ƯʓΟÈÈǂ҈"],["@@cūƯ¾ɂҌ˧ÿĵ"],["@@ĝiƂȈĺÿȵ"],["@@ƁyǾŰ\\ǟ"],["@@ŁĲǡÀ¿Nwʫ̃şݭĘ˝ŒõXŷOƅI½øŻŌʰ˕ΆƥN¶ƢHLżĢ`¢¶ʲÉªňĠfàǜH¤nȒȦGðnÒvQ°ÍÌgФtϴċ´^~PøLÀ²µÀ­âÁnPptzvĖdffHȐĩ̄¢¸VĈ¢ØORÄvJV¥§¦żQrçArYi¡èʬñ̦ȠܪťːˊɌպ֦݈Ęɀ˞ǽь࿫Ɍʯтƛ¸йͩ˝ϯԧѷʵוઁȻJλǃ׼ࢬհǤەʌɇͺƸɾā;ǎ˓ޥƮŸȸӴȂòʀ˼ȺŁĨŎıôfȾˮ΂ҶÌŜąjŞ࿄ؕṇ̌Ɇɂ̘ɣµÅņ®ĨʳǿǳĀĝȒǤ®ǓśÍƗőՋʈɔǬЊļmñ˅ɔȎВæÚłόõ׀˝̼ͬƛࡌĸєÇనܗΪн΢́˚ķńǗӬƹ࢔ƂķҸ๱Aߑэ੓ΡЅŃ`LƉљՕ̵ƿΑͭơ˭EŶˣ܇ˣЭ͏̿ʏ˾ƉƕôįÑȩǏǽ·ȉĎu¹ίĚ\\įԽƮ৫˓ૃ¤ѳйңŏ્ǽƛͧ۟ͥ˯Ƒ˧ýɣ гףʻɱɩ¿̭ޓiǑȰÍɡ֥ğÙʢ¢ǃĊ٫ŧŵĔÉً˛śǝяNݩχषڣºŏɯȻbĚǻÕƝɋØĻʔėɝȹöùȳŇ÷ǎީÇ݉ƭпЅʝЋЭҭࣁԹۧऱܙoʆ͐²΄ʢĢ̞ƴrǆɄǘwɺŔYdƼϯīɯˬŠˣĿ͗ÛÞŭαϹɹȅуÈʁѱࠃ׿ԕwJÅzË®@РhÀ|ô¸îêĄĚöì´ύɸƇ̄ƃĖʥĈ̶̯ϕǦ±ç͑ͺtqMo]ţģÅßU«B[ôhż΅͞Υ˺ʍÿŝ˳n³Ö¢ƆĚưɄʊƾࢤ਎ǠWƪԾ˴ɬˈцńШʪƜ۪ȇԶɛŪʏđƟ¦JŤŚǴĊžۆƬ¨ÀtfǕŪƻơ̈ƉĉoħgûZã\\£wð@Ö_Ę¹ºi áކŇƆMĐăĒţxǕ@±bűƠ«`˝ƹ঱ŸZʼĦڨíʶÁoǊm¦|¬[²kÖÆ\\ÖĄ¼^ÖjvƙŮďôΒך]ń©F¶ƴŶϠàÆùüÙƦıɶQĊ¼ÓiïhǷŴţæ¡¢kźƜeǮP¨ĶƆJǦ}B¡qÕeC൙ºWŘgȘΠřƌųƦ«ʼTċ֜őՈӏʦ«Qʋyā]ɹ`í²ÏÂųƒmèխƌȿǊ«ŖɹU˽Ǟؙ̧͌ͷʺǡц²̔ĥ͖T¸´èŜ^Ěćκযƿ۹ЫʱʗħjſWã{˛˅ɽÿƛĐ͋²ȝPĭGăEƑlķFė«ŻÃÏa©E¥R·éà¿}୞¶ƶÇs{]ͻ˹×ȉŗۻ]ǕвۣĊĴŪĶŪGńąĢŏƐĉÆ·ƦjŵĦƵЄXþ|¯^Õì©ti|jjp|KńǸ|vŘȖԸτĉ̲vÎ Ąƶʢþњ²zŐxú¶ŜĞĮĬĆΊȴܸżĞĶÈ´à^ǆQłd¾v«à¯Ģ^Ú¤LvLÆfɺ಄ɨఈȟּν̶b׾ӨŶˎÑƅ͢ґRHղචXãŀÀŢɐȧ҈̲ʀ΍ѥǦѼϥʌf͈ǖƄşŽêF̴ΖݲΠǒͶӜȌɌցúƥ࣮ϕΦĳɜǲŕ͒[ƞǓָ^К̍ŨΦʪŜɐ·˨ĊҔːɸfͰΐËǸx{TøhǊ¨nÖUĀ¸ČgŶſƃңϘƱ"]],encodeOffsets:[[[-49649,-28433]],[[-49750,-27035]],[[-46346,-24462]],[[-45188,-23697]],[[-39837,-13796]],[[-39673,-13411]],[[-45567,-3010]],[[-45960,-1349]],[[-53076,-1468]],[[-50819,-234]],[[-51868,-134]],[[-50630,-115]],[[-50931,275]],[[-51636,143]],[[-51356,403]],[[-51506,1986]],[[-61132,4458]]]},properties:{name:"巴西",childNum:17,cp:[-54.41748046875,-14.24169921875]}},{geometry:{type:"Polygon",coordinates:["@@ıjǜȂųÇÑ"],encodeOffsets:[[-60921,13396]]},properties:{name:"巴巴多斯",childNum:1,cp:[-59.53662109375,13.19287109375]}},{geometry:{type:"MultiPolygon",coordinates:[["@@Ĩ@ŴҟƷãє"],["@@ɽƳĀ˙ƽ̗ӷҰ̢ÌӒ̤Ĺ"]],encodeOffsets:[[[117788,5018]],[[117788,5018]]]},properties:{name:"文莱",childNum:2,cp:[114.677734375,4.5302734375]}},{geometry:{type:"Polygon",coordinates:["@@ǝŰīĞGČhQ®í×«ÛyÉSLiÅL»q§gſCƝ§ŻJ½º{@ŝÝҟcͥĲşéýƯ}ƭmŻdoºɇÎƹě¤ƵĆĳǶlĸâTf´Ű҄Ԅ² ĮªĆ|ÊÌæêb̰É^w{Ĺh[ľSźPîMʲď´HŰĆ P]¼ɲĉSƍ"],encodeOffsets:[[93832,28427]]},properties:{name:"不丹",childNum:1,cp:[90.41162109375,27.5068359375]}},{geometry:{type:"Polygon",coordinates:["@@_ƧגࠁȖԋࡔҿĒͅͰqSһ̂Ыࡘȱbȃǎ½àß¦ȡgĭÅÉĭęïՇǳͭΏֵέȿ֍ǽŽƓƽ¯ɡµĉĵͥޑʯÿݏ\\řĠȉNÙtщʺȫFɩƙɿ֥£ÝɇƛŁǇã±ȇ×§ąߣOĉĚŸ۞̧٦ϙ̶EᙶࡄIᵦሶˎ͌ϯզξʌ{͆Ț̌z"],encodeOffsets:[[25865,-18220]]},properties:{name:"博茨瓦纳",childNum:1,cp:[24.67138671875,-22.32080078125]}},{geometry:{type:"Polygon",coordinates:["@@ڊअoЛŻȍÎʣԠųŨ̽ҾŻ̈ˡgɁĈŉ࣪ڕ­ƯǦ͗Պ̃ɒԩ˥úȿřટɀϭ́صvݷˣҫ¼ωӵ༩˞˧̰ΛɔʱγȣЋқ`ܱŕŨˁĻ֙ǀ݋Ƴţ֣ʇҽĵ՜޹ޘÃϪ˩ˊƗ֬®ӮƻƤʶȮϾުɰˊВaΞƨƖƶȪ˃ܪζޒ¾ҜԢȇƲÐĒୖǂβɺވݒô̔؈̮̔Ý"],encodeOffsets:[[23409,11182]]},properties:{name:"中非",childNum:1,cp:[20.91748046875,6.6337890625]}},{geometry:{type:"MultiPolygon",coordinates:[["@@ˣ\\͠¤»¿"],["@@œ­ĂƪĻ"],["@@ĵÌƚR£Ý"],["@@ƍWʈĸĹğ"],["@@ͥyɰĶǰŦùȡ"],["@@ȬǍɽ˒¢ɸǼɭWκ̖Ôī̤nǽۥ̍ԡcƓŤϢҎՂϲǨÜɡƋϻԡ˙"],["@@ŊĀҪŝघAуǿKȍЫøń´ƉĎàüȡſΫÐįƘ̑xsƦɃͨΞÿʉɶʵ"],["@@ŢqȡuìǈѺǲѥ̑"],["@@ĉǔȪĉǥ"],["@@ॴΠͰӮࢨҔ܈Ǥذɶࢢ޺ਞֆႺӲૼkԶˋʡɦųēɣއͷ֕Ƙٹƕ̂іųȰȫԘƪʢĹǫ̙ͿɣЦ§ȧ˺ӧՂÙì·ȋï̔ƍࡄį¥ýɤuѸȸƮǱʆŤħÌŏƯ×ΰÙቱկʡKǟ͝ƒďƁÇĊıTǹ৥ۇɋűȠȧfÉˤ˚Φɹŏ²Î൤ۨˀ˃ǎ؎ŮోSҸИƕ{ųŠūʷगΑȍĀêĎ΍ˑε{ɃĒȯHÇΰ̳ľIଘέɜכœħǸǉٝىʏګӋՓϳhǃʃᥫEA"],["@@zùƓŚ¸"],["@@țûÝâʺZ"],["@@ĦéʯÇPĮƺ"],["@@ʡĦZĴǂLĆȥ"],["@@ਫŌோ֌̔°੮ȣ࢖Οĸŧė"],["@@įˈȒǋġĻ"],["@@෺˕նڋۮʱоաĚôâɓɗó˿Âৡ̀ɪɢƺĩǕҿã˵ƄƺĀʵÀbźӫImǌ΂è͟ ͇ȌǯÃœɒċïıĤͫˊΚjƮӻíʍȸάĮ؄ȃ"],["@@Ŀůϓ¹Șʛ޳ࡵ÷ͥդтdƥֆՙ̧ɪ¨ǽǿײįĪŖĻέ܎ϔ°ǓЬĦ˴ĵƱӳ̓ʸpħĕɔ§΃ɗࣲȬĝțЉǍĳʥËȚIȍȓǈś̌͞ΖĬʭԍȌƌǺňȁϯݥǩÀɡáOю΋ʳƏ˘ҺŝˈǟĔʝϥ\\Ŧ͏ƋϫЕЇŋŲάŦרшӧGǫǏҩɖøRȐޓɇಿƔٽƇǡƔ¤ɒ߈Ѷ۱˚ǂÃąǆ©ˀФΎąĝøĴŸǯzmņǔƀȌ«œǰвڰɈĠĳìɚˀ̔˒րȤˮćrĜǪ"],["@@ȋŸİèĜȟ"],["@@ɓ¸̼Üħœ"],["@@ÑʞǊôķ͑"],["@@વʬǊŖײhͺϩ"],["@@Ĵɯ˳ѢƫœĻ˦ƍ»ĥƪWßřߍՊlǺͷŚژ¸"],["@@ΝƙȕÉЊŹõɵʔŤ˄Ͷƕäơ"],["@@ſrðǂÐǳ"],["@@֛̈́ÈòюǏǆǇÿÝ"],["@@ůĩˍ¢Ɍǔǲŋ"],["@@̒yŘṯ̌ʭ̈¬̌ϼĚʑۧ͝ĵͳĸ˔xΛƜȟˤ˒ͤ"],["@@jŸŰcƙœ"],["@@̤Ɍœǯȏ"],["@@áäВƮͯɑ"],["@@ȩ͋M˞ˁ˳ɧÉȄ˒ϋȣѼծß̟ɞΜ˰˫"],["@@Ěř̽ŎɤL"],["@@ûÓÆƒvý"],["@@ǋã¦ƺŦĕ"],["@@Íʝàĉłΰœ"],["@@őØɾɮɦřΑǫ"],["@@ŗWΪĐʑ÷"],["@@ԋʆդZʟ"],["@@Œū˳ƒǢe"],["@@ɒƏȅЯγϗȊJʔ˪ʆ͎f"],["@@̞oYıΡHÞŚ"],["@@έ¤ϡɶٸŝĘƻ"],["@@sȋҕ˝ϕǋֵ£Ǳʚ҆Ϛୂ¦"],["@@̀ȣ·ĳӿʸֈ "],["@@ֿǎȚĀИƭqğ"],["@@ΘǔΖȫႆӗ̾γǯǑࢸØѶ˟سʧ૧ȶõȄ۱Ǽૡۭٓǃ́Ӧ୏īȂˈְȢĹήʦ߾Ѩ͔͈ƟÁȣːȽ"],["@@Οƴ­ɒͤſêʅ"],["@@аåĉëډŠʍ̠ԶƓ¼ƙ"],["@@ʌMśşůŮ"],["@@ǅNϤłɝŏ"],["@@§ëǛĤĒȢŲə"],["@@ߝŏȨ৴ÇòǧǷS"],["@@ʟĎÉɜɐǤɾĹƣϓ"],["@@ԈűĻ׵ӟƧএ̡κƮɘѼ˨ޜ"],["@@ǇÒȆö}Ƈ"],["@@ѕźϘD¾Ž"],["@@ѥƪĦƌʮĒʣ"],["@@ϱĄʜŦɾÓħƕ"],["@@͇~ɖ̊ȁ"],["@@ǛkŚƄĭ"],["@@Ǣވ˲ϑλγė"],["@@ŋƕƉİʖ¦"],["@@͑ŊǈƔѨ×˝ȅ"],["@@šƮˀĩƝÃ"],["@@ÜǏʗÛǴñǩdɈ̦"],["@@ʳÜˀÆKš"],["@@UěڷĿێȜ"],["@@ĹſгFÎĿۇư̶Ğ࠲S"],["@@फ़ʣҤϑОÓ࣏॑̕Ô܉ʤ͏Ǜň̋ÍȫĆƠࡀǠùȨъĭƅ˺ΈÄ̎ǿ"],["@@̖įٟîΊ"],["@@­Gȟ{ͻǕΗʭ̯ȍՑԩٵ@ܥFɗMĿ˝įöœr­MƟõÆÓɏƇࣗ͏ٽıЕŧϻǵϷǵɁ@ϝʨɲӄ̘̾܌ªĆ̅ౚÇɜ̱ƞ֡ʤļƬūĺ̥ũΘˉGȋǭ̚ǍäӧȬࡩΔ҇ǲ҉ǴՓȰࣝʳૻŔȷÀ˿ŕԱȴ˽sÇ@ïƄ˯ŐΟ¼ĳWˣùŧæ٥ŖûĸùŜµɌNʧÆMͅȣBܑ@Ω@ܑ@੻@⿿@、@、@ᅍ@Χ@Ω@੻@ີ@ć@čąƓʂ̌Ŝͭ¯ö˰˽ʃлǦŐƨűȠĂʕ²¤΂ĵʷʟēсȼɱͰǔϢǗ̝ΕaÁŶďƵϟ̓øҚİԡsŞƄŭzJǈĩšΧ¡յʄʐϨؒĄիHˣȕƳǐ°Ѥ̜ƒǐѺ˫ЕͬȰʚÉúǃ؍̧ʻсɋ̶ːƆĈȒ˧ƵȀҢʽíƇˆұȐùƔˈƞ§ų̃śΈEǢţɻǪϽÒõǊȜĤΫaʣΡʱƕ٫ЈʖΆΖĆϩ£̃Ȭܴ࢔ȟĈɅхݦëƄ˅\\ÁĞƟەʘ̑ǞȧÄĆɳł¸Æ¢®ÍÞšŌěþϛϘɯɲɫɾ֟̆ģøÁÎʅǆɡöěʒˇƒ˭]ԳĽĿǁiĥʵȟCˁğŵ«ƉíçZÓʼ؋͔ҧˮˇŚ¢ö¶Ĝ@ÂŽGχUʟũЕĮÕåȥȩ@Ӭ@݄@௰@݄@௰@݄@௰@݂@݄໒ŕྞҧग़çܨǕ֯ʒ̨¬˭îȀǘͲEŶƈֺT¢ǢѼƥʛɉࡖƴȼǐј|íâ˚ࡸǞЄȄ؄ɨĐxǏহ̃गį݉ˡԍ̣ɾćǕöْZšȚ޲̒϶Ñɘøþȭܒі਀ȸɑƓĔċǜ¨চђУƄưžٞɷࠎف؎ǋ̒ÜƹǖӶ̨ȇμľŰ͑ʂÝǵ˙ںrцΞߦLजŽ۔ɽណϻঘÛƹŘڪےǏր̅ōō֙F̥řʳȕʨëᕊŗ౜ĞޔǞόɓӾƼɥȨƨՀ˻EƉчEਤ׋ϛ˺]ȴӌđک߀ƈǾାƐ֤͢שÛųƅࡕuĩƁӵgͩŦ;˂ᅰʸДùʸΑ،ƷƔƕ࡚ªॺ͇٠ૼŪઘĥђæȁɠপϥȼȨҁļϡ¯ϩφζΤÎŋŘўwθȭҠ²ʕɭلǰͯةȒȧΞµō̦{EţࡇՔιȽː՘ZŢˀͣЎǆʄ׺¦ઞҢ͹͎ǳǹ҇fѢːƝǆՔĔŇǇǺɊاşǎǁÓॣȎӯ΂ɈʨΚOŨ̹©ʓƖĒβ͔ƤмÝƂžϹæग़ΈΪǽҾmڢЗ·஖ٍ֣´Ǉŋ҈Åމ̵ӜJʹţ׮ĪȧĳࡲÍЏǃ́fِͻāͿ̴ǽަ࠼ࢴ˹ΆӍáąϡ˳ߢٯڤʰޘ৾ٴÖȩÒȶȖѳƄĵԨ᝜ŻȔ÷̩ęώíêƉ܌¿ӣʫӜČǉՏǗՙWˤʩǮ¤˧ִ̩ơΫ࿃ו्Ԑʵ²ɣĹ͂xўɃ̖ϿΥà˭ëࠍ̢कpƋؐȯళٻѣT๻ӲşÉಋâ͖ı¶øࢺśߚε࿒ųࣟ࡝ױǅ͏ĸÎũПÀǏŲȗƼƹʿn\\ʏցğছȰ̙ଝ̠ŘɿʒqĝĜਆɍʷŗԼŤܺɉɬ͇ؿɓދ`ΦȑԫǷǑȨƳ֫ǒʦűΫʁȻRɨƥԍʇԅ݃ɃęwਗƙǗ֞̑ΙǬτߎUظ୿ུ̫ͭˮ࿘Ϳܾ͑ӾϑྡྷЗ˺ǇŭɧʰǦॴ|౤ȹƤɉǣӋʄΩųڋ׊ԇȓǫ̤g݆ҋŪɻ΃ɛ̼ƶ̾qٌѩ͝ΤͲϊʢƑŚəƠʠɁɸ҆Фʝ̙ͨࡂĖ̄ȷĆĂÐӅф࿀Զঞބà׊ʅ٠̤̅ଝ֎يזʞ̈́ćŕĚǐ˲ʝÈŐ¶ȓʀƬĬʋĈǜƚӻT֖ئэɶĥϚٖʒಲɍxŗϖŐ׬Ǒ[Ą߈ɘࡤ̉íʅɢèɼùƾŵƩý̎ĐȒÓǹƩδɿ०÷ʊǱЪƸĊǋ̕΁ð̩࠙¥ޞěªӝ˴ƿηĭ£ŕŔ̷Ǐ̬ÑѦǐӖjˈƉŸɑŅˑַɕՄŰͤθŐǃƧſʶɠàΏĞȈ܈ɸ̠ʨ̢̡͞˔Ǡ˴ˇźʎĐÁžξç̳ŶsȦ;KťŘ̖΢ˊ¿äą̉ƅРª¶˓ƜæʲʻǏōƜēȤ²ľřұş؈\\ǙȚVƪǥ֍˽˞ŚԬNǽɯϗƻٴŜƲƳ̆»SʥѷĻӘË±ơզȥˡुĶٔɳǝđў¿ʍŉ̊]Âƙů©̢Ň̄ÚƴǷȄ¶ÉœǼƙΥΝܞȾÎĥɂiͱ̥Ӡ͖ɘ¥Ǿʽ͎ÃμĐҶʅʛǣءƃǕƭৃǷ˓ȧȿ¶ʜƕȕȃඬײ׺Ĩ͍płĨٴÅʀ̷͛ƯǊţЬɪ͂tоʙƘɑIӍѫĉӠÏ}ġȟ~ˈɋ੿ֱಅƋୁࠓ໵ǳǍňڝÌṽ÷Ϗǽαթއŵୣ࠻૿Ɏॸʃú×ȁ̝ׯԋҿ˿ԣğएБзЅһȣɷ|˺ƻ؟˻"],["@@ʻºȘǊäɃ"],["@@ߎ¸ʈʢҐఞɭԿ̛Ȃ±ం̤ϣ̆ոq੆εӊ۝̀ćюɦ޳੊ǬǘಠŹࣈ΁ࡼৱŇљ޲εюĹzŪ଼̓ĪţѨq¼αуƜƏŵ҅ŮΏŅqƕ܁þΔƟÑɣ֤ɬʹWǄυࢍǙඩ¤҅¢ðƊਿĨ͛ȶٿοޥÉछɑᵽƳЩ̀Ý̚ྣôݩŢֵՊᔔɐ࿢ñࡌìᄿ͎ምĕഅ֩ɒIŬ៺ϬᕏďʑÚОǊ۹UͻĬȆؚɸɣƐ̈ǦᰶتδÙžȏЃБ"],["@@൏ҼʶǺઞÒؘǃɡ֕͡"],["@@ੂVࣤƓࡰտ൹®ఝŝсÎ̥ͰӿĠÓ͘ાÇ"],["@@ߐŢҤAɬĻľԒ՝ÈӓʐӸȸࢎǁҷɜȀÌ׽ʷʨ͚ȚࡌƁ৕ʺࢎ̎ՔªƆຆżҒăैܩߝϩ԰ŜˁҗزʨʢȋžɸĪۦƥOȕ΢ƋɷȄƎɀসơ߽ʖؘɊႤŹո̃ܵёࡨ͐׌ķęŗݛŏшʝϧђΰ֤ļ̯͑ТƸ҂ʯćɊ͂Š੖ƋΌƫɟȝϋU׍ɛݞǺ̺ÑҜŒź³õɓे̣ԪÎŹ̻ϘϠࡾɞ௢ȡŎŇ෍ρ੾Ɗȗȋɞֺ͂אʁŤʭڣਗɏئÆ੶įѪůRť෗ÂՑőՀØӪę§ʁ஻ÖञŻɬƭ৒ÇʑōĠɓǎÂÈāƨΚÐșϓтȦàů̘Ğʗ]ǢвŸĉȳ͐¬ڎɱƃǿׇFܨïȶĨҨţ։΋تńӪɌŠ٪̛ƥŋԃîҬɩ͕ÁԅĈhƯҖǇՏgȰƵɵǋѓdʑǐŧȗ¡˂u͗ȱʩةȴÜȔʇʅ܅ծߦҬҷȩۑåƚǪ΁Óޡж÷ďȗèɓփƂךεƕĕБՍʆʏ¥Ҁķ~ǩːąÏǫ̰àϞǟǿÿ՜ѿÀƼΞɹɴƐ֐ɉɉŃϤÉśő̯SΊɟЮ@ĵĥ͚ǫɇϯѷѦļсͬ˹ЫV®ʳफИIĭƻȫȨǏ৏֐ƞʽ٫ʬΕk٨ѿϸá»ë๎ڧť˅ᎋ̦ӷƚЀՋIӅŮʯüƈĲ͵¯թ̎ԤƐޅŮĮƒ˗ÍߥӚƸƸ՝IŻŹÅƸ˥ȁƼȧÅȌɥࡩx©ōࣵŻݻĺʇŞ¥τؠɐɌ఼ȍ͕̈́ĂƖχʐՎ[ࡺȂӲeܫֶ୐ҼȶʬӌȊࣃऒ҉LA˖ʝ^ņŷɽMԻɢƪȦ༳̅zʼԔlʲƴۉɎȚǌё÷̇ÀȚŞ؛ÐƵͦёSڃ̀˵ǟҖƅwɝԿ÷ᅗĶؘ̌եǲؓėܙƠ׫ೕŲ̇ÙҕĞÙːேǿߍȼ֡ӊഢįפÈᖑϜ³ߘঀ࠮ࠢː๨ńࡈŇࢭ΃տӵςۙ৐ҝೇ˻"],["@@܀ǵదƀрÁƚƃԽƏ̒ī९ϑڈòѐͳҊêŬƃ̗ȕǀЩ߿ǡԉšǄľΉϵśһîଷ٠ԩƐџCࠟϘъ˂޲̙ڎªöǢɤÏ΃ʔײ`ғŪѯëՑǲҠĨϢųχ˼ࠈHUŴ"],["@@ס³ϋêขǶӓȫ"],["@@ߔǁഄiȸŃร࣑ჿHφõǺȹЛͣࠃ_ӿܸھ޼νǾƊƈຬĴ"],["@@ѾîôƵӖȖࡼY၊ԧÂƯᱝىҩ͍֕÷σקܑĭɷ²ଃ̍ދӪએʞңLႢຐݯӤᧈǔ࿈ʿơĵ"],["@@ͧ_ˬĮ¼č"],["@@ҙÞ˺°Ǡō"],["@@٣ĤҔʂנȱЏų"],["@@}̟߱ჃͪըΌࣜƾࠂǩ̮ͧ"],["@@۱ŋÉŌԬŨʐŧ"],["@@̽ƴ̨ÆVȹ"],["@@ЧµӟĄ๘к׏҇"],["@@ӛéՊʬ­ȁ"],["@@ȀÛӑƅء_ɰżߋ^ƺĔωVĝŔ഼ŀтʕ"],["@@ࠆőɓđ࢟Yȑɮіºªé"],["@@ǃץМóÒɅˇôȍùǢʏ̷ÖÙƗᄩsȽƲ˴¸Ӈƈ౤ʖ᭣ƹǭðոɴঠÝχ¢ϩȦ̀ŒӛĪׄĀದсȹǌӒzܻĆξÎ܏ǲࡠĞޤƕưȔࡔȑ"],["@@͗t଀ňߧŻ"],["@@ӎ½ʡǅڰðʬǱȤ̂࢜ßĨˁӕҗࢽƋ૑h̙Ĳᶿկॷաɚఐɔ঒ӠȦᔱƿšǆ͖ƂңdŷǍ̃ÀǁӋģͥŜ˅ūعǠࣵ¾ʶȐল޺Ƽઃýاº̤ńຼľඡ¾ϤȦலmࢗĈۖȒڰ̶ȵूI൪չᄘMDƂާȘ͒Ǻ۟ȌৼϊՌ×Ʀֱ"],["@@ۣȒΜĒφą}ȝ"],["@@ੱ¨ߌĎ˦ŵ"],["@@ࣆţʯ˓ҐƢෆ¼ٚƻܻᅌŻĹĥ၁ᅊΥ̱ȗؖģɬǤόūІÂǆùʂŐલȇkŒ႔ʒאË࣪æ໨ǝۀ̳ܻȍ࠘įҗë͹Îîˋඩģڝ´ډ̺SˇݥÝՕĊÓ÷ʷḙ̂ďᔫIģ˴ࡱɵ࠳¶˝ǤɇƗΑL۷ԜǢӪݿѐᆵ÷ٟȈ͜ĈਕżД¸̙ƦކĀಮŹ"],["@@ٹȍѨǕωʲǅࢫƯȟȿّľĦͲމʕʏ͛пǞ°ˡ͗śзσ̜̫Ǘ્¹ǰʻw͒ȀߪĎᐄܐሺǑłѺè߮ƹ"],["@@ͧ±ٟİs˄রŷLȉ"],["@@ցۏҶϖG࢜ͯ_Ǐ"],["@@ᆸ«ȯɯᏋdǩǼ׮ü"],["@@ַÏŸ੊§ǆāׇ"],["@@ϣ׉ǎղƌм˕"],["@@۰y਱ȫ״ÑȧᆣƉڕƔ§̾ᙎǘ"],["@@˦˭ඹÐ̇ģԩúࣻḚ́ƚနɤࢾë"],["@@ઐšΏƑͪűႱɧ֗ʆ״¾कƤʃϖߚRবɁ"],["@@܎νܺǘӚɷ׌fۚȣό؏झqڣ̤ಃ°Ľĺ৹ġۇüūǚ૶YϙĄղĐہǪرƳŰȀڏLlǮńæ࿰O"],["@@ŹɍथƤHǐݴ̤ť"],["@@ਰґஂé͈˿ւ¯˙ʴ܌ȹɱߐǡˋˁߪ°ˤſ̠ŐԘ˝ྑʹևʣΡˎ¶ϫّ¢åͯ৷Ξјϓ٫ƘˉƫรƎйŮࠚèୱÆ̱ŤЌtߣźೊ̔਺ø౫ÞणƅƩĤ࠱ĥҹȦ੖Ǭ૳Ù܋ɌƷȂᅄó͒Ŭॣ¹ࠩư܂ª̔ͅှƉೱɼ҆ǰ෎¨޷Ș়`ॲǳ"],["@@ᣈ÷႟ɯᦜŪˆĒЖĻܨ̧ͨ٬Ð࣪ßȉɏᛏχᇃŁჁ˕ᾆǘ♩टঋƀϔʱຓġద}ۍ˥ࢣÉ࿧ưޠıĢɃᅡ÷୩ĈઞɭऺSƇǍ῅טŏൂÄ๨ɋ͡ǥ಍ਈƷ֟ˉᅫÃÃΩՍƩ༩w࣯ǰ̜Ƴً¡ʨýቒOѦʫ׆îʲȇʩƹᑝͭƥʠرrڿȔʠɍ൷[˵Ȉ§ˋܭ«િɾȏǩ֣ÒŕŚOǗݯhċ̰¥̏ۗ¬ŉ̒ऐɸ೰æܳɂ˯̊੘âখͷ܌čࡤ®ࡖκĬŤহϫ౓vɏ̲޴ɦͤgֿÂņʎڭΗՍyʢɘ࠱ǻ՛¦شԈະŜผţ౪ǦׁÓဇþzĺڶÅᜁږßΎᙲ{ႊҗ৲ã̐ÂݕpဏՊㄾҖ༓ò໦ДℹٳགྷÝ֌ǎᇏȵ໩̑Ĉ߶ɖጎȊᐯħಣ̫֣L঍ɠᗄĂಊɂያǥጉ¡˗ŞتàϷàნǔݍ྿ƅԂȖఃÃ̗ĨᳮΌ࢜ř͢þ೨Ë೑Ȣ฀Țቜ̹ĆƜᣒͫ᠛Қ٢ľλĠੈ³ŭǨቘċ୿Ȝᒌ_ഞ̣όØಷͲᗮJ์ʕڃƸՊƪۢh࢘ǗŧƲपКĉ"]],encodeOffsets:[[[-61222,44995]],[[-68364,45755]],[[-62424,46582]],[[-75463,46680]],[[-75332,46561]],[[-62571,47048]],[[-65342,47584]],[[-63400,48420]],[[-55528,48580]],[[-76501,46084]],[[-129118,50539]],[[-55863,50779]],[[-55391,50939]],[[-129680,50797]],[[-63284,50273]],[[-128188,51300]],[[-130250,51856]],[[-56789,52774]],[[-130994,52710]],[[-81289,53199]],[[-131449,53659]],[[-82669,54014]],[[-134915,54473]],[[-131637,54211]],[[-132267,54393]],[[-132964,54444]],[[-133361,55254]],[[-135839,55427]],[[-134069,55787]],[[-133709,56085]],[[-81897,57557]],[[-80830,57617]],[[-63225,58936]],[[-81629,58896]],[[-70819,60458]],[[-65952,61816]],[[-69871,61687]],[[-80416,62187]],[[-66388,62839]],[[-66591,63365]],[[-81454,63910]],[[-66379,64061]],[[-72025,64050]],[[-83968,64466]],[[-79745,64994]],[[-78517,64916]],[[-86957,66828]],[[-86706,67149]],[[-85735,67376]],[[-110686,68614]],[[-64185,68666]],[[-110489,69020]],[[-75388,69411]],[[-88673,69362]],[[-77492,69963]],[[-80878,69830]],[[-107049,70048]],[[-76678,69990]],[[-104290,70233]],[[-102622,70459]],[[-102394,70670]],[[-81111,70498]],[[-92364,71086]],[[-78843,70804]],[[-103599,71063]],[[-97805,71244]],[[-69544,71210]],[[-79901,71389]],[[-81337,71463]],[[-99778,71315]],[[-88998,71796]],[[-76501,46084]],[[-99105,74688]],[[-117270,74336]],[[-107815,74670]],[[-81446,75423]],[[-88667,72716]],[[-102401,75721]],[[-100628,75642]],[[-95406,75941]],[[-122609,75892]],[[-99692,76315]],[[-97594,76294]],[[-106618,76838]],[[-95787,76829]],[[-98384,77323]],[[-96795,77568]],[[-121168,77394]],[[-80960,77749]],[[-104680,77840]],[[-106519,78422]],[[-100045,78302]],[[-103655,78418]],[[-110891,77883]],[[-91879,78344]],[[-116286,78586]],[[-96558,78759]],[[-118324,79220]],[[-91989,79123]],[[-107067,78994]],[[-97776,79660]],[[-104134,79562]],[[-116564,79621]],[[-113109,79978]],[[-112451,80539]],[[-98513,80417]],[[-105908,81220]],[[-101162,81901]],[[-94090,83081]],[[-71156,85010]]]},properties:{name:"加拿大",childNum:110,cp:[-96.82763671875,62.39599609375]}},{geometry:{type:"Polygon",coordinates:["@@ÅÑ@ĝ«ÏƜBAҬǥǺŒÆiÅCŉOÏĩȟÐ·K¥]u­mÁNwzµfĿ¡STďľ¯Ląků§¹B§TďƨyAā^čɵíǡťǕȍǦÎ®̡ƚóǘÓÇ¿ųíõȫ֑ēǕÕplÉü³ĿĪ[ɀƯlűMěñ½ŝħãIRAÂÆp¼ʌɾǂhÞxĮƘ²nlŐĘŌĔvnj@bč°ÌºƘǨ³ɮƆ۴HĘxX^G\\]NčMVStŘߜɃĐ³ćǑ@A"],encodeOffsets:[[9757,48405]]},properties:{name:"瑞士",childNum:1,cp:[8.212890625,46.796875]}},{geometry:{type:"MultiPolygon",coordinates:[["@@ɫªƎŞĞǇ"],["@@ɓśŽĬәșȬࢲFƔƧ"],["@@ڪĉό¸ŽǑˤċȠ͙ۋǊoǬʫÎƓŅƬƥȗӋʠĄɞƴ"],["@@ƾċ͚¸ĶǣƫÁ߱ʎϐl"],["@@̲áķɗˣŤЍÏɗɈǶƌԚŭ"],["@@ąʹSɶǿǟǑϱĻĚɘɳƑŉXēɎѿƸͰŖѰÓ"],["@@ؚŭѦʅγ ʥǮ͹`ω˪˞ƣ"],["@@mᇛ۩IȥŬٱą૫ƶąĈņĂ؄SʂĮĆƃ͞ҩΘIȐ˰ɎŸ̟ȿeĀŋ̮ȱάÖШɁǬŴߋʢƍȄºƔآʲɿè׉ħʖˀŤȿǆϐËѬˮȸƳ͆úƆÛ"],["@@ʊ˭ƃˁƁPɅМʂƄ"],["@@½ĳΩCȯȑŖ̆ΖÒƬÍ"],["@@ğë_ʄʾ{ƽƛ"],["@@ͥĺ˦Ϛćƭƽ"],["@@ʃ˕ɁźĨăȊАn"],["@@ıܝƙIįʈƀʪȣĝėˍН¼ȲʢƉŔ͌öĽĺɖǀ®Ȓ̌Ð͋"],["@@şƪâЬƲÜȜԑ̏ş"],["@@̙ʏР\\ƖʬŖˢم"],["@@űÖˮƻĩ"],["@@ŷÅȋĂ͈ЬCѧ"],["@@ƽƜĂĜüɷ"],["@@ȯãƙð¡ŐȦʴβƣǫɫ"],["@@ɣǑɲԕʍűԏהĮƦͼìĒȾʔőķ"],["@@ŧāƿ¦˨"],["@@˻Wɭł̎ாђčĖʟ¡ɯˋĳ̔̏ˁȅoƿ"],["@@ƻ_ĦðÖÏ"],["@@ŻĒĢÑ"],["@@ƾƯ̇ࢁݧ̝ʽ̗Ƭ́ǩ˟Ƭ؝Ʃˇɮхɯƕɇ[˟٩ЛЩƝ׃ǗȃÊىĬąĥƵǑEſ֋ǯŁÅΝ˦͙ğŁ˼ڧ¿ˉɞç߅ǙÛ˹܅ƋċŞɵVҏճϱŗˍrޙʸ۽җˣř֕Ʊ¼͕ƃŽĠǣȉʻjߩƊ̛ͫǣاͪȹŻġȌӧŝϡԜµ¬ĳďǟګQnōϐÙȺ̑ͭȹĬ̿ȳǧƨЭȫƯ̵χʓƟ͑ǄȝuɋȑğḘ̈͏ơďʉ˛[ýų¬։̊ԧդŌƜ×ÉܝЪϗ࿪eౢ̉ڟŶ͉ɑথʯǙࡓʩĕ݃ɂȧʂЄĮ¦ʑĎ¨ɄϞǘ¾ȈƉ ݝ̱ɫ˟хǼ˘Кɲ©˰ƐԚ׷ìǱĕɱø·ҍѭȤͼŊİȂĵŕ˻¿έ Ɂ҆βŇŴƀΤãϸǪȌȿęƹżňďʸŔƶɫǈ΁Ĵӌ̃ޗȭȟȶύĬɢÀS̐ܿǠɻ͎΄h÷ǈŎĠɺŃȐˣ˪ĵŶϐ˕˫ǩ˺Ȣq֭ˈʞȂ̀i̫ǰưϢKɏƲƆ΄ʉЕũČtڲ˨ĶϷVġϸৌūǿŸę˴ȋɯʉΫɢĸŔʔģĞö̉ƈ˘ȼŽͦşlµıгŨnȔҳƽĢȡɵȔڂҞţʈކĜɪƒüŐǏԟ̻ƉΨÂöʴŦvɑȫϱĔɆ֖śΚϸŒ˨ęѕǸèɔԾȴ¸ŞbƄԏɤɪžÔȘáʶˊʆ÷̶ØƐŢGşɄŢ¶Ȁǁñ΂˗ÔϴɔŴȋǉ·ƨʏɟ͏NġĤƊƿÄŽͰʜॾɖƤƺӆʙ׸²ЀǓ˼A̜¼Ÿ͖nĊДѾޮƤͲЪȆ޲˴њßҶʒμɋႀʢɨǀìвǟ؊ǲɈȄܞƈȎɼ੒ÇҞɤԤŅѺƴ࣠Ǜʼ~ǖȚǪɄరįՎࡨɕଢаŜľǺ¥ʌƖ®ĊÞÚÈǖν~mǂí§ÿ¬śÆ̽¢ſVŽĢĿȦǟÖ²lwPoħŃĻƉFgİĭhCÃǕů\\˽ɘƛ×ɯ̤ͯVˋʰܿDˡʦÍǾƖ"]],encodeOffsets:[[[-68903,-57115]],[[-68689,-56477]],[[-71375,-56237]],[[-72695,-56184]],[[-73103,-55329]],[[-74673,-54765]],[[-76170,-54192]],[[-70277,-53916]],[[-76618,-52869]],[[-76348,-52507]],[[-77109,-51896]],[[-76856,-51503]],[[-76909,-50008]],[[-76263,-50327]],[[-77322,-49933]],[[-76356,-49758]],[[-76914,-48985]],[[-76096,-46788]],[[-75399,-45897]],[[-74737,-45854]],[[-75504,-45460]],[[-75582,-44879]],[[-75543,-44386]],[[-80695,-34453]],[[-111902,-27791]],[[-68807,-23369]]]},properties:{name:"智利",childNum:26,cp:[-88.220703125,-36.64111328125]}},{geometry:{type:"MultiPolygon",coordinates:[["@@ŀ˯̻̩ǃҙ͓ʥҡȕۉˊ٦ԤϨċNðĪބƠΖßÂƌȦū"],["@@ŘScĭȉĖü"],["@@ĳaļòGÏ"],["@@QƜægÓų"],["@@ý§\\Ěâ±"],["@@ĵolǦĮ¡cœ"],["@@ĵoØŢı"],["@@ɭ¦¯ŊˆÙXĕ"],["@@˽´ʷɌնʿ"],["@@ɽǬKŮ˽ĚǙҧ͑̿݅͟§ȴ͉şȁ߿ŦȍȦǱهۏऋϏѷϣɋƍϣڻɽܝҡʯ¥wśУŏ³ǂӖǂ«ĤǈƔҗAQƆɀĂ@ǦʆĘЊӺυζėŅү°׏֛ࣳГΏӏ֯īɍƈƥȽ˳·ȑǬˁȼŇަşŲ˻ŗ̳ˮǋЈbҪϾ¯´аżݠ̻ΖÌԢŁȃ˭Öķƭĩ΃ń݇̇ȱjîǁƹ}ÕʃȵÛÅƤŧsõëǆőܗַɛϝčࣈЋԔ੏c̕ШȣÀǿϞ͝VħƻRˡŬ͇VϟȤПƛְ¢ÔƏܼпǾͷϭŅԅι̹ɉūʦ¾ŜƛՀƞΜ˙ͼĝӛ͕κĸoЃǙĸȗÁǊȫśiĺåƿǭŔ̉˳ÏŁĖƿʑǯuîĳȵʻjƗˡ˅ǉΧǡ»·ȢħįĹ²ʘϙΗɻ˗ÈǊơʌ°á΋êǙω¸ĘǽʷmËɽɫÿhǵӍLåũƏOǶȓΫ΅ƋHĉɃÝłǩŕƟÌ¥ǍșĉÎÛƇĉËȝǿͱƯǱªšőʫĈ˻ǙǝŜćȏʍXɁyͩ̌BɠčsǃǅȈˉG̳ͳų»ŐœʥũȅƗȏǜ¯ȣ̣Ğ˹ʓӯ¡ϙʟſľɍͥǲě«ƓǖŹƕȉϱÎðìʱЀfǸɀ̌ȳķƔkŹͩĥƒˣƭɪħHnɫƫ¼ßŕɱ¥ǳŬ΃͉ˆʵ°ħѮȖɸȧŊə§ŋĦʯ¡Ӊ΢Ήǫƫ˃˅ıȓĆǛɓˑȮŅǋƓƴ́˓ѕʬÃƛȭ»©£ʇRçĒkJQqs³uß©©mǲΩN£HƟqʓÞđaO±¡oMƋìɕ¥\\ovY®RÄÆlĪµ¹ǀЋʃϧRǧɸoɨ؋Ĉ˄۬õĠүĺθŽɾƄǼԻUխǙŦˌƩɚªʄżĂè͎ǆŐɺǆ`˔ɸûǬĸĮ®ԆóڌǕìŻęȣՖϳ˦½MęſÙċgŉėʛȅë»٫˼ϧÜԽ̳࢓ƇϫɝʱҍӁ¢׍rKºÄMlVzÊ¬ÜØ¯îRćgğHůĪǠTƎɻĎ÷°Oůą³GʱĐíNŹOĽTg\\|ĺ]xŃįrĻRéaåÉËą{ĭ©±ӷس· ÉÊaüæȶhĐŜȏðŵçŵői_B¿Ƚ`ȧÑ˧Nűbķøïûûn¤yrÛP»cĹĝãġÀåþ·]ůÍqd¾åŪåîå¶ɣCǕb÷p´ĤôAjVµNǵ³·NӉ̐­ŀ¡ĶuÂáïv̑ăΫή޹Ϝƫɚǁǳrȋ¥Ƌȳß­Ǉǔĥ®ֵɺbĬʃǤɓÜɵĊɿ˶̧áXȐ½ǆȲȗȚîƔy®̈b·ƒšɄŞqш¨Ķm®ƏĶëîå͆³ǢȲǸľÑҍǺƗ˺éǂ̂ȱ`̑gŷǡǯ¾ĥ¢bą¨ËWĪ£QĭœuÕA}fÝżƃÈ¾˪mÜeÂýņËĕ ÿdħZ¡Ū}~ʕÖėe¹_ǓêûB·]]R{vķäGjƾâĢ~¶pXIzÖq¨NȒźȋǺçܠ҅ǘɃĵȋÊėȺĠĪǕɖ|ƘIªǈìøPzĜ¤Gjzz¦°Ď¬Ä۶ʈ{Č°~VŜĚHŊvɾŮCĺˍǎE͘ņ¼áÞìºĈņîdäj¢ĬƐìâ`ԂŚĄŢIƖtȈǦbøäʦŤҨȈЈĮØĆÎhʴdfVXbŊMҜ˰ŜůƜͪĲα޼ń԰ԡƚǀļ൐˾Ɇǁ˒¸Ɍÿøʤʟƞ׸೺ࠤǹմDĴšטȞƠǆŋ֊ȊЂڦŦɒѪўĀQČȸªE¸ƋŇĳô÷ǒ±yãŷˤéĔËĔg¦ÇRćĚ¥ƀËâYŊñδvèqǼƫ®Eâj¢ÎQÚōôĺsdkĂųÒȁŬƹÔąìeÐ}ÑÚœ×Бÿ¤ÓJÍ˷ѕǺˡƢl҆ş۶ÉžDǬrؔù৒ӿ՚Õqȧǚïˬ֫ѴұېÎቚȅѠĠĒMζ­ӖÅͺYê]æo˂ʅƸ·ΘÅмï՜ɉʊʶ¤ǌ@ǿ̦]ĸ£ÌjÆ¢æØİҮȈݸʜ୶ƆѠոlĔdߨˌԜӊܸ˶®ŔѽҬиגŔdäeʤIôĈÿĠ˾ÕɄeǨ{âaÆdȌŐŸ ¨z˶ȚŠǀƮ|ƲȲXѦÌѢʀ´W¦_̌͸ʞĊЌup|AĎ\\`ĞDǎÏˤŰðXŸĄ[ƨWÌTØSĸÌĨsǢąƜqŤZŬmðDlĶ~ƼƽʖՉшÁřĵÍÄĻĸÍؗHΕ˯Å^ǹŞı~§bşbĝIśsœJ½`ïCſËåßăqɿǀûɌĪ²ŬÀVĈIĠ|ĺܦਸ৆ʻӠ˦ڸȈðǲƵńݺ৐ֶжÿЄӳÈvżݢкᔺɘৢ΋ɚÎӘƉ׊ֱӪ੗͐ͣ~̛Ɇş΁Ϙȝע̤ȍθ^הй̜AɑɄɕÑ˓Ȕʹ౞LȚȜξƄ˘Qۚɶ̺ĵċȗƾʵӭ΍ʱࢯΧգȿġÓ̩ƫč࣫ʠͽ˽Ϸŝɰ٭D׋ǁЏէƥĒǇ"],["@@ƅǦüĻ"],["@@ɂzDȵ˥ÎàŮ"],[],["@@těřlĦð"],["@@Ɨ׏ԛژƇδºцބ୊ҬȰ˰ʧѿຩ͝ҩ"]],encodeOffsets:[[[113551,20472]],[[113035,21600]],[[115348,22160]],[[115498,22121]],[[121020,25085]],[[122697,26068]],[[124162,28761]],[[125232,30683]],[[124788,32249]],[[133660,43557]],[[116734,22744]],[[116752,23053]],[],[[121250,25111]],[[123913,23164]]]},properties:{name:"中国",childNum:15,cp:[104.18017578125,35.8828125]}},{geometry:{type:"Polygon",coordinates:["@@ҒӁĆĊTĸÙÖCŶŖ͠ŖǬNʖÈZÀÄą®°òŷt¸×¨C¤lpT£gåʱ´iË¤ſĀӻÕoOwfY¯qķ÷ƛБɣףȔࢍǤģƗ»ɻ̑¦ŶŭȉٯưЧ×ӒKܥû͏Ôí¹ʲi܏ĳ്և{ȆÙƼՒ¯ʔƳÈÿXÑĴmÖîÿ¨ʱʧƠɜΰëЮkǆàWĶvøƞUĚĮǰúýXÛZżN¢ʄnŊUîû@oɤșŦZǌľÂkánȐȭäcВƐǄˢɞɶñ̲ǓÈǘɐNpmĶLÆT´nnƞăȜƂºˋC}£ùFcĺ¹èMńĦX¢ªŴŚNƤŁĶL"],encodeOffsets:[[-5388,10568]]},properties:{name:"科特迪瓦",childNum:1,cp:[-5.546875,7.53515625]}},{geometry:{type:"Polygon",coordinates:["@@ɯˉϽީʵȭƼƣ­ӭƘ֫˪ˉÄϩ޺ޗĶ՛ĽӿˉȨ۵Ĉ˗ƾઇÕĂඉǯEgōț@ʱ@ڻ@ġ|KIlsNlȢńҐɵϬĀðĽWïƾƸ°ċĦ¤úǣT·ťΥƚçϴɏİIŽĭ²ƨЌʂܸатʒ˼p®hƐĲĖÚrdjkô]ĶBǊƼ̊ʉàáÖȫ gìZƒêŲƎzǊàÀǢƒāžÖǨȴǼ׌ƞˀƮ|ÎŊŴrÌÎΖ®ļɨŚÒЈŨŔĸθƐɦǊɢöÒÜðHºh̜ȌºքčŮȷ¸óøķՎƲAǼ±͖ѧȠց©ؙĒϷŦʕ͈̋உwɡʍ̘Чڄիθ٧Íɛ"],encodeOffsets:[[15852,7705]]},properties:{name:"喀麦隆",childNum:1,cp:[12.36181640625,7.3779296875]}},{geometry:{type:"Polygon",coordinates:["@@͔ϵͼʛȢuʦƴмħȴȂǪsѤԕ˂ūàǯƞ@æőÌçŷ̯üǍį͡ϔƻÜȍહ਍Qˏǻͳşణ͉˧ÅЋɉǣdȡĶíǮ˩YٽǈԭBß˵CÁfëǚѡªŵZÓU«ėǃU¹vŭš¦ãĴȇöÙƎģŨĥĚĹĎƓĀɍ̂؝༓ʕyʥϿσǠϡܷɗࡡČȵӦҋΠÍnǆʌÔiઁȃǄ̑űƿ|ʅόƭöśˌ۵ʔΑծ˭͕ڡÚ֩ɢ»ΊމǣWʌͱɒÅģÉ̳͙ĳɗPɇrÙ}ýÕßJ«ÔmʖĔŜğմ͓Ӓþٴċବ¯pҽjɻFʫH¥m¾B¾ÀƾQ^ĝJʕǉ{ĹU̇ƁŕGǉĝƵC©{ɓǓǕ@͍ÆүƟ̫dÁQԁۼÅ˖ęƊÏżϢƇǖėÈĭዱRՍMƋPؙŧȩȰɬծ¨ÒnfȞȮĲĠ``^¤CɺȝȶĮ¶ɢȊ}ΖƼüųëŕȷʠ¥ંबȒآCܒ˚˴˶Ԫܼ֪ˎᓀΚފĴҮ_ܲЌҜδȤʲΜɓ˨̯༪˝ϊӶҬ»ݸˤضuϮ̂ઠȿɀŚ˦ù"],encodeOffsets:[[28061,5232]]},properties:{name:"刚果金",childNum:1,cp:[21.7333984375,-4.0625]}},{geometry:{type:"Polygon",coordinates:["@@ĳҭΙމˍᒿܻ֩˵ԩ˙˳Dܑȑءઁफʟ¦ȸìŖûŴΕƻȉ~µɡȵĭɹȞ£D]q`ÝÊ÷Ĝ`̅ƃНΕȫςխղĖȎɨƞƴƋǌb°̆ǿŢǎȇŬÊдϬÏ͐ê]ʹƄĒǠėǖ͋ЊçɦɎź˝ĚsǦŘŘȆ˞øૈԩ̶øҶ̾ɪĚɸȽЀˣ¢ՓƛҒĸ̼ઈ˘ƽ۶ćˊȧľԀʈҾŤ֤݌ƴ֚ƿ˂ļŖŧ"],encodeOffsets:[[19057,3562]]},properties:{name:"刚果",childNum:1,cp:[14.87060546875,-.658203125]}},{geometry:{type:"Polygon",coordinates:["@@՛ǏʑЁχ̣Ư˿ŗם̟ԃʶÆɘųŌЙɴ˹çٙɞŹǜ˳݆͢ĔԜŗמۣߤԨŐ̈́ğPȿ̍և}ٙǌե̎ϕҡԹȬ@΄͹ˬকǥѦɿΎ̱҇ɏȨ¿šäĿඟWGձҒQƆ͡ˍÒӧŵa׽ξ̵ȠֻɧఇɹಃeǛƼÕƘµ~ͩ՜़Ëfã¥°ɿŒÓZµÂǫľ­X·gñgéÉǙkƋĢǋÒ¥[Å½Ã»©ȟ×؇N£°Ƒ¾ϔʥŚƗώǕªÃÒ¹xÉÎŃÅx§Þéɪ¡À£¢½¼ÙÁs®i˱Ųū³Яǒг̌ȉǟݵƄÑȰȡǜГŌ֭ЦƓƘȞȎǺÙ]ӪƦń̌tɆǨئ৔ƽi]ƒãħ§ʬĥƘƼÈ˘ñԐƉǴʈȲȁͮĎͰҁպŜЂȊŏ˾΀ʁѶĔƈѮӋÓįŚ^͊ůɚզΒɀ͚̈́îɼŢЎƛ¿ɚϾԐоќħƻőĬćɐҲۤsࢎԀŞʦΞȚϞíŀʏƵƹ"],encodeOffsets:[[-73031,12147]]},properties:{name:"哥伦比亚",childNum:1,cp:[-72.95068359375,4.0927734375]}},{geometry:{type:"MultiPolygon",coordinates:[["@@Ð½ǏtĆƂ»"],["@@|ɳʇƼɌø"],["@@ȧŲÔ̈́ĀÔЯ"]],encodeOffsets:[[[44840,-12602]],[[45544,-12371]],[[44509,-12186]]]},properties:{name:"科摩罗",childNum:3,cp:[43.86669921875,-11.87109375]}},{geometry:{type:"MultiPolygon",coordinates:[["@@ŏk±ŪƖlƍ"],["@@yƾú±¿ŋ"],["@@»ûǛ̰ʰˏ"],["@@ȌÉcŁȽDǈ"],["@@°§ǭxãęÙłʼH"],["@@ý¢ŠƵ"],["@@ǥ^Ƃø¤ĕ"],["@@śU{žʬî°åǃů"]],encodeOffsets:[[[-24891,15213]],[[-23738,15501]],[[-24006,15369]],[[-23467,16627]],[[-24665,17022]],[[-23437,17059]],[[-25484,17222]],[[-25773,17354]]]},properties:{name:"佛得角",childNum:8,cp:[-24.0146484375,16.005859375]}},{geometry:{type:"Polygon",coordinates:["@@ʜԑӌթǸýIecgµƁði_¹{}W]i@͛¸GĊÅZǃƧ¾ėVũaƓĭŰɡȳʂȢʵĲƮʧɃǅƚĶǄĻ̄܁Θő˦ѩ˾Aœ̎ʉǅǿȧǬʹüȍ͞ƶϞȫźƎƐƈń֦ȳɴĎ׸ʻǦ¨ÒŎ"],encodeOffsets:[[-85649,11180]]},properties:{name:"哥斯达黎加",childNum:1,cp:[-84.2353515625,9.63037109375]}},{geometry:{type:"MultiPolygon",coordinates:[["@@ͭŋȋŸǰAğǘúŶɸ«Ÿˋ"],["@@ȽŘʈđ"],["@@ƋØĆĶƝ"],["@@ӚKİďж¢ʈƅҜ³ҚЕӸࢤӍŞQïĎðc̔ȑȅĨŇźĘȚɑ२ȁńĭŅɽۼÁ̴ɡ̄û\\Ľ߳ɡĚśīܱĆಳœԤҬŁȤݗĲ̽ʖȥҎՉMܻʌɉɂҥ¥űǎċƃӃĔȓƤ̰ĠŅƨݱbաϹѫ«ŉȑЅƕBż͕ÕҼǾʮˆʎڎʨஜǐ"]],encodeOffsets:[[[-84543,22090]],[[-79533,22479]],[[-79748,22659]],[[-83801,23719]]]},properties:{name:"古巴",childNum:4,cp:[-79.52001953125,21.50927734375]}},{geometry:{type:"Polygon",coordinates:["@@ȳèƍȨ΂ˏ"],encodeOffsets:[[-70401,12350]]},properties:{name:"库拉索岛",childNum:1,cp:[-68.95458984375,12.220703125]}},{geometry:{type:"MultiPolygon",coordinates:[["@@ɚʡuÐ"],["@@çSƎ°å"]],encodeOffsets:[[[-83322,19814]],[[-81739,20186]]]},properties:{name:"开曼群岛",childNum:2,cp:[-80.5732421875,19.5185546875]}},{geometry:{type:"Polygon",coordinates:["@@ѹÃýƌϵÙǧìƖRÀǮ֔ߖʶԩ̳Àȑ"],encodeOffsets:[[34821,35907]]},properties:{name:"北塞浦路斯",childNum:1,cp:[33.634765625,35.33154296875]}},{geometry:{type:"Polygon",coordinates:["@@Ǩë϶ÚþƋѺÄÛ̍eׇͳҹƆōȌ_ňΊö"],encodeOffsets:[[33498,36016]]},properties:{name:"塞浦路斯",childNum:1,cp:[33.17626953125,34.87109375]}},{geometry:{type:"Polygon",coordinates:["@@òFòrVņ࡜ͷɲŚçǫųήˑ̎Ŕğǆ҈ơʌ¬ÙǅȺŧźÂ҆ſɪ̱֟ɇÙǉ˝ƩԻƵȯ΅ǔУࠫȲ́ͯաFȟƒ¤í¼řêęGnП̒ȡìʓ˚ĺŚ΍θ@m´ÁzrȴǀϼĈƒhী͜£ŜȎ^zGS·oÆcFrXb"],encodeOffsets:[[15165,52080]]},properties:{name:"捷克",childNum:1,cp:[15.46630859375,49.81884765625]}},{geometry:{type:"MultiPolygon",coordinates:[["@@ɭćȼ̶ǩ"],["@@CďѣŬ̸˒řªƩ"],["@@ʂŵŹǝܨſʀÂIǕǓęĚáМ§װȊϸʤϠ³ΚɧɶXŢʥͦĻƣĮɭCÉCcýÙáŻÿU¯ŀăɖŗĘį¥ć_ÑhÄyÔƗųȽŘǣyé^iƲ»~yx˷ñēŗIYWaqEÅdpT¸yH]ȍ¤śি͛ƑgϻćȳƿyqÂ±n@SQ@ǤōǾɑĹřʔ˙ȢëР̑mĚHŚéî»£WgIŁYʣK]SYM¥Ɲñ¿ě{ϣǏǌǻ±ƗƀÉKÙaÑc}Cõ~ÏulCv`bsí~Џ¤YQN¿cw॥ȏ½JñÔo~DhŋHépƧKTő©ƻñdîœ|A~Itur¿ō ùpȋ©ߛɄŗTsUĎN^MH[W[åWqa۳GBӄѦۈֹƮ׷R͡ʖŤ̄ʁİÇ¸y¼NðȌ˦̇ʤ°żǅŀɮİÌʬȿ̒ܐƒÛĨʾʦʋìź˔ƒՎĻǐǰǠ؊TČȉŘmôƊƌǱļИӲeӠʩЅʰ͡Ě[ʞɿþ˜Ĩɿξ࣎ß"],["@@ŦɦÓŽɀOˑė"]],encodeOffsets:[[[14539,55214]],[[14039,55688]],[[9974,56142]],[[8508,56102]]]},properties:{name:"德国",childNum:4,cp:[10.4111328125,51.16748046875]}},{geometry:{type:"Polygon",coordinates:["@@˕п̩æٓčKצӰپ~zv|OȌŏÂ¸Ŭ®dAĺĤȤ˻xɳثѿıX¾ÙϬüǠõ"],encodeOffsets:[[44284,11776]]},properties:{name:"吉布提",childNum:1,cp:[42.5869140625,11.8447265625]}},{geometry:{type:"Polygon",coordinates:["@@ÿké΀ƴęIɹ"],encodeOffsets:[[-62752,15615]]},properties:{name:"多米尼克",childNum:1,cp:[-61.3671875,15.4306640625]}},{geometry:{type:"MultiPolygon",coordinates:[["@@͆ívŅʷ§ΟŨpƘʬ£"],["@@α§žŲɴĉ"],["@@ɉhsƎɾƵ"],["@@ĥĎˢʰǻͽ"],["@@͹äæǎ̰ŵĻ"],["@@ŠЏ˽íϡĬŅ̐چĂ"],["@@ĩ¢ľÈë"],["@@̓ˋǖƯ˕ĉ̻ǁǩΐ̯dʵѢ̀ʰǢǊɑ ɪ̒Ŵ̠¯Sɻ"],["@@ƭTʨ¼ĹÏ"],["@@࣍à¯ўНƴࡎѐģǼȪƮ¸Ŋû¶ʼɗHȃʓʭ»ƹǀˮɒۄÂѼ΀ծƀ˝भզƫơǛι{ŕ̇ɻkĶçεɣäȑǽȏɺÑPţ"]],encodeOffsets:[[[11635,56210]],[[12851,56285]],[[10303,56204]],[[10992,56065]],[[15450,56343]],[[10901,56945]],[[12970,56931]],[[12871,57124]],[[11318,58627]],[[9974,56142]]]},properties:{name:"丹麦",childNum:10,cp:[10.2768332,56.1773879]}},{geometry:{type:"Polygon",coordinates:["@@ċøǜǜk~ĤŊ״ÆٖɳȦǼ̹юw̻Åcõ߂ǳ̄ʗ̇ͫȻǊ˷зH׫ȏƑĴ͏ÁΉՙǉŜŗɠHƐxÊsÐġÚÉĄ»ð\\XĶHļĴbÐM¬ÕŌƈǬ"],encodeOffsets:[[-73366,19657]]},properties:{name:"多米尼加",childNum:1,cp:[-70.16943359375,18.77490234375]}},{geometry:{type:"Polygon",coordinates:["@@Ţŵ׳CɃēăçĳėȵؙչj̥˾ҝȢįȄїװЃĮϛÂȻʜ१ǫĩж޿ĢୡƗϣŖי͡ʟɡҬ؟ɊحŠėʒÆےȥϰڝ␣ᕧ൩୧ഝ˯ܹſȣĮŖʶĿτ௏Ѻ×ƪϏɚiʆ᣽ၮ᜿༸ἡኒ@̸@Ȳpیত֤¸ʈǎʊcĎeĶ]TÞæƊЎVҲŀžĒĨĜǲʤǄòɀÖǦÖƤĢѮǈǧǔG˄ÎƬÊTĄYƒd΢Ŋ|´ƘÊ೶^ĦʺªźÝ´ĝÈ±zćæ»þǒŇȶĭஶ˯Ȃ¹¸yØҞâ਺֮͆{̢ˤֆʀഺƂ͊ƸڲĤࠖ@ҌȻৈπφƓʾ¤ľצȣ֔ærēͥ˃"],encodeOffsets:[[8405,37396]]},properties:{name:"阿尔及利亚",childNum:1,cp:[1.64306640625,28.0400390625]}},{geometry:{type:"MultiPolygon",coordinates:[["@@šm¤ȰŦîƠ³ȇȻ"],["@@āà¬ĳ"],["@@ǅn˒ǖŋȃ"],["@@ǩĄVĂɚĆÜƣšħ"],["@@ƹbƆƾ|ǣ"],["@@ʙÂòĢǨƣ"],["@@ЈٷęǁȍáʍpÛŖ̀ʪȽɬ¹ɞƗtȢļøč"],["@@çüÈSě"],["@@˻_KÒÐ£ÈƇƒƳṬĉ]vw`YųӍѥԏӷί঳Ι͉ЫĕÚʫ܏ˁƧđ¥e³X¡I±_i½kġåB¿|Ëô³ØĄ]Ō½»ÕYïQ¡~ı²čÀÙ·]ăė÷D¯S¸úńčFIa¦jº¬Œu´rf¥ˢåǂ̤ȘȞӢĥіéЗĕQpǠɹ̑խπƠˬţܚ̊ȘĊɚƢǗɄμѲՈূΠȾ֮ХДŋȢǛÒȯݶƃȊǠд̋аǑ"]],encodeOffsets:[[[-82054,-3044]],[[-92594,-1372]],[[-91564,-932]],[[-92502,-790]],[[-93620,-471]],[[-92747,-342]],[[-93462,26]],[[-80803,1283]],[[-77091,-109]]]},properties:{name:"厄瓜多尔",childNum:9,cp:[-83.44775390625,-1.76708984375]}},{geometry:{type:"Polygon",coordinates:["@@քนƕǥ˱੉ƯɃϭʄљѪֳ஀ǥ˿Ҏࣅղ֕DʓʦΟĢ҉ਠᆣӸҋȱcšǌ۩҂ˉբՍ⮿AªŸï°ŝǙƗOᢱBᢳ@@᳾@ᴀɵࡦɐВĝրʢːȚšіĜଖȱʖƑࠎƋҴȁܞͬʖƢǘѺĠ̡ųςæŠψŧ̬êȺǙȳŢķǅ˦ǗưĜÅþ͘ȋࣂ¾ҀǊ¢ĩ"],encodeOffsets:[[35068,31958]]},properties:{name:"埃及",childNum:1,cp:[30.7880859375,26.8251953125]}},{geometry:{type:"MultiPolygon",coordinates:[["@@ɐĭΣwêļgŋÌbŨƺǋ"],["@@ąħ´ä"],["@@ĳňԉˎ׃Ę˫µ¿Ē½ ¥@yƷĕʵµÕHǭȆǿò·Ö¹ÁťĥɁ¹œßƣqIZȿʠțƳǳŏOŗ£eCʎkǊoǠkǊŞȖ̈޺sˠúƨEÈhż\\ªDĞgȮj ¶ưȢŔЄł\\nj¶v¤ĚǀƴΦޛɞএФڟà̄˺ϥࠆͥКՙӲͩż̿ľRɰ̙Ƣ³~üêÙĭģĹcB«·ūÁȋŐ{Pu}yõĔÃüùĠƵĤûŦāƄͷˆΣО"]],encodeOffsets:[[[41105,16073]],[[41039,16469]],[[41922,14319]]]},properties:{name:"厄立特里亚",childNum:3,cp:[39.77197265625,15.193359375]}},{geometry:{type:"MultiPolygon",coordinates:[["@@ąƏƧĬɮ¤"],["@@˯ɯwĉǰłƆʂM"],["@@ŝĄÈðżýåõ"],["@@ëȓȩŧȻ˨ڂȤǯǏ"],["@@ŕħƅɔĬȔЬŬÑПɥë"],["@@ƓɞÒðǞĵěȗ"],["@@ťŨ̢Ȋ]ȗȧā"],["@@ǁA~ĆƄă"],["@@ȅ]ŀƪǺºçƭĵ"],["@@ˈý͛ͫɭìċƂǛÃŉĀڐͰ[Ư"],["@@ΩĮ[Ė̼}Êǅ"],["@@͒Ɨ¥ƿƈ¤׶ʩ৾ğÆžؚȽ[¡ģîJƠ¾żÌĖÕমàХȱƩޟЕࢥȍˋȩƪčʛěޡँĺϧ΀ʭ؇ωʙҟĀśԙÏˁƣЃԡ቉·ʵǱйéǃʍɝğΑƌ˿ϘƖɶƭçϽϔҕċҤФϮůMȥɶ̄ԊҍԘΘjŤĮâȊŗŪȈƨı֔׺ѮˣŠÛɨѹɍŭؽkħ˚ѕǑġƐǒƚĿXðłçȔȃĘǢʵƮ´ǔްɞOŠɄĬтϊƻ৸ú૖ȕޘĔҺŭƜêҎŃҘä"]],encodeOffsets:[[[-18317,28478]],[[-15770,28823]],[[-17597,28695]],[[-16726,29062]],[[-14537,28846]],[[-18262,29178]],[[-14045,29606]],[[1633,39601]],[[1480,39853]],[[3221,40746]],[[4397,40799]],[[-1837,44450]]]},properties:{name:"西班牙",childNum:12,cp:[-2.9366964,40.3438963]}},{geometry:{type:"MultiPolygon",coordinates:[["@@צƝӿȁ̝[̿ʉǈȊʱĜgȢيľ"],["@@ȟĠȊUVĉ"],["@@͋ŗōƤ̕äӾŦɖą\\Ə"],["@@Ŝğ׻ӱÌӇɶ̍ȣÑţŏ¡ś͕æηßȟÐ՛ˎ͗öƋ®շŽăJǦОΏó̅ĂɑʢƠňȽŐÀɴӶĄʠƲࣂ¤ÆĲ௺ǁࢌ"]],encodeOffsets:[[[23161,60029]],[[23904,59956]],[[23474,60239]],[[28685,60912]]]},properties:{name:"爱沙尼亚",childNum:4,cp:[25.00732421875,58.583984375]}},{geometry:{type:"Polygon",coordinates:["@@ÖGʶ¶ƸĖz¦@¾Àđˬ¶ׄėԊˍĴŇΤН͸˅ĂƃüťƶģúğÄûöēӯٽLץٔĎ̪åɟͱƺͭ˸˓ʪст̵ᠴ࡙ࡀ@ᢋᣭߝͽăϩǯɥˏ۩ƻĝę­ūBɋ_ğcŵCǙĨɋǺޡΟ©ąŏƩƍķݗŦſJȏ\\ś~޳ԘȽƂݑ´ɑ˸MŤnžl¨±ǀΙj½ @Hʅ̬ɯڬիӆƉʄݻ͠ʂҌ֢NĴĐJޔȞؖϾȒȆǘőƈĲƲߞҸڴϤŒͰాfDŘ¤ŐPǴȜƴɀʟYrJÞƤ¼ŔĤɂÄŦº¸ÕȀñǮȅ"],encodeOffsets:[[39354,14775]]},properties:{name:"埃塞俄比亚",childNum:1,cp:[40.48876953125,9.15478515625]}},{geometry:{type:"MultiPolygon",coordinates:[["@@ȬÉ¯řʃĸĈì"],["@@ų¥ÙŠȎù"],["@@ǖƋƛłŒ"],["@@ɫªͦZĹÃ"],["@@ҩı̞Áʩ̏ǶʣֆŅզͥޟٵࢌও͗ďĝ́ȀēȇƩЀǟ˓ЈȱSƭљʉৄѵ̒˕̅ͻహ޹ལࡓਖ਼ĽǲǉǙΟ¦äŏɷ×ďÈ৯ʿࠛωƛƬǦʋǀƋŷʋyĺ̐९ǺƜ࠶̋ͰĥـюʦėƒٲĘǴ˴ࣈؘٖͤ߬¸ºԴ֡ǈǂЇ­ϣϔʎҸ̇ˌþʚɻƺдڇΎܙźିѠόJ@ƢѸºۊҭގÑѾƂࣴǳڴͬ˘מϠȊԐQԶƄ୨ͥǈǕХʝĶŽ"]],encodeOffsets:[[[22708,61820]],[[21966,61983]],[[21727,64760]],[[25445,66551]],[[29662,70679]]]},properties:{name:"芬兰",childNum:5,cp:[26.07861328125,64.94091796875]}},{geometry:{type:"MultiPolygon",coordinates:[["@@ѻŭ͂ǀź"],["@@ăÒ¬òƃ"],["@@ʾɽÜέױƷՑƾµǶȬ˘˂Ŷϲb"],["@@đAĒƮ@ƫ"],["@@s@²@ê@ŞĈĩȥ"],["@@ÏĊĞyÑ"],["@@λϿHġ̦ȔCȍё½ǻĀǏƿʧÛǫǂðƔȆSغ͎ϔĆ@_"]],encodeOffsets:[[[182772,-19429]],[[183654,-18536]],[[182559,-17788]],[[184320,-17370]],[[-184294,-17331]],[[-184247,-16898]],[[184320,-16556]]]},properties:{name:"斐济",childNum:7,cp:[0,-17.63671875]}},{geometry:{type:"MultiPolygon",coordinates:[["@@ŤQÑŷǓĜł®"],["@@ݲĒĴÉչҕ˙cęŹ˩¡ɳŌ؈ʈ˿º˲Ö˕ʀʂĕ"],["@@ƍĬǤwó"],["@@Τ¯éƅȦùZƂʄƘőŷÅƚ«ݡʥ~ƍҗæņŽɯm¯ĥɅƤàǬјȬǌȸȆ"]],encodeOffsets:[[[-62483,-53028]],[[-61733,-52697]],[[-61554,-52629]],[[-60262,-52500]]]},properties:{name:"马尔维纳斯群岛",childNum:4,cp:[-59.4677734375,-51.78857421875]}},{geometry:{type:"MultiPolygon",coordinates:[["@@ιÆŉǺàż̎EƬșǛ"],["@@ġænȲŌċȋ"],["@@֥݇ɋչˏˉܩŦ̥ȟʫòç¢jqZXRNB¦ÖìŪɄ¼ĖtƨŨ`ŀƤ®ĄsƲˇΦŇڂҼ޶ࡪ˿ԞНƝĖüƌũ²̫ƦʄƦӗ"],["@@ȥw¬ŔǝȸʊýĎɕ"],["@@ãJ¼Ĥhĭ"],["@@ƛ°Xʘǐëɛ"],["@@ǍC¨ɺʤȿŽu"],["@@Ð֧̩س͇ǠäĦɟȘâƐœɚȾɀмĘ¦ʮİǱ"],["@@ñƥȞǮū"],["@@Þ_zY~mªQÀR~¾\\Ǝ͢ʕ׸QֺƭѥۇAӃɭƅǧ´ƗÉ¹Č¯@akiwŋēŏėkmƗ±cƣʹǩWĳkƗŁÅBÁQäJĨŞò¾ĜŲNưk\\ȿŀĩ´¦·dȗƹ̘̟ÉšϋƟ̜ȫýЯΚǓˌvŧͭޡӋϡŁ׫ž̅Ǽ̇ÑکǄյ̵ǧɷƆПভßĕÖËŻHĎšÇPÕؙȾÅŽ৽Ġ׵ʪƇ£¦ǀ͑ƘʺƀȪ࠸ƚŊÛØýćƒܮ҂ҁȯϾͽȸƐvĩӐ՟ǢɭʜȒƫŀƚĤʈµțĂѹBÜƆ˽cĤ౱ǔ̯Ǽ̌ŌȹĴˮ\\БºôȚƚદȆҐʯȸĤϊÅĈĪѼǃŸcͮɭКԈGĶʕࠌûӤŸʋº¶ǎࢸʞ̆ɈäՐܒǲȠ̅̈|ƔȻ˔¯ĀƝТ¹sɳͬUɰǊ¤̩՞ɷʂx"]],encodeOffsets:[[[57137,-21851]],[[46265,-13288]],[[-52892,4159]],[[-62286,14843]],[[-62700,16272]],[[-63067,16392]],[[-62799,16620]],[[9708,43833]],[[-1206,47006]],[[5929,50728]]]},properties:{name:"法国",childNum:10,cp:[2.8719426,46.8222422]}},{geometry:{type:"MultiPolygon",coordinates:[["@@ÐýəzǊÄ"],["@@qœƹvĬƗϓˬҔµ"],["@@ś«SŴŰć"]],encodeOffsets:[[[-7359,63631]],[[-6790,63722]],[[-6559,63753]]]},properties:{name:"法罗群岛",childNum:3,cp:[-6.89208984375,62.154296875]}},{geometry:{type:"MultiPolygon",coordinates:[["@@ōY£ŦƈLjŗ"],["@@ÛåĴƤý"]],encodeOffsets:[[[162115,6978]],[[141459,9729]]]},properties:{name:"密克罗尼西亚",childNum:2,cp:[148.19140625,8.19775390625]}},{geometry:{type:"Polygon",coordinates:["@@ķ̻ґՔƜˤ¡ȾϿęɷ̽ɩ÷ҵԪ̵÷ેȅ˝ŗǥŗętŹ˞ɥɍЉèǕ͌ǟĘƃđ^ͳ͏éϫÐÉгȈūǍȀš¯̅ǋaƳƌɧƝĕȍڃݺԿҞ˸éοƸ˙϶ƸPǽÐȓѠʂ˕ƶÞǥ¨ǆţµśì̥רȴć̌˴¸׎ĨƷˠīǤŴϣĐȅɌƞĦĺówϤ^zzJ²Iz£`wĒமEѼG՜hŎǰFඊÖā"],encodeOffsets:[[13613,2214]]},properties:{name:"加蓬",childNum:1,cp:[11.5888671875,-.806640625]}},{geometry:{type:"MultiPolygon",coordinates:[["@@ƻďʽàɀĜȺë"],["@@Ů_˗ƟǍɄɆĲă"],["@@γ{̛̈ˉɯʁVїɪ̪ƲſĔ̢Î˨˘زŰτăˌ˝ƉƩʞnĦƍǛ¤Äɵ΋ȅǗ"],["@@ȏ\\ȔǴɕ"],["@@ÖȡȿófƔǣÙ|Ģˬĺ"],["@@ďà̆Ȏȵʭ"],["@@҇§ƤǔŭĸƸ˼Žaū"],["@@ƉɠŦSdɋ"],["@@TǇϴ½ɵǧïƀʍBρȪϤȘƊƕ"],["@@pű˩Ìʺæ"],["@@̗ɩňÓҵɫčÄȐĠȓɒ̠N§ĦҐǜś"],["@@đǍٷ̣ěƮɷȭؚŌૢKʘȓڽދ׽ǕΦǰŧֿȍΩÊجťϘÚϞĽЮ˧Τܯ८ӯķă˒΍͕ņ͝Y̮ӄ̙îƧʻɇȠąɼƄиOԐǥøʅŽ̝̋ůƗνÕŜƃϻęࠬđaƱοɋ։ų࣭UՋŎèÛƵÕћmIĹߵĨͽëɳͣѝź҃đ͟ɃчX஺ड़ࢪ`נҊܡ̍ԇǜ˿mŦúʛæџĩɡĪ]ǬߺˠȦɜķ̾ӧğΒ˴ۺǒˤãƖˆį˅ǠȀԺˍMͻ˶ĘʲάưћI΁ƕܡÆÿſķÒŝȌиѠǏ̺ʌÆɓĦĜΫɭŦʾ˛ǝũԙƥ¯ȐϾėɆΠנϷȏЗƦ͸Ŭŋ¦ʦˤțŪǴƘƍĺŘǴϜ@ɍǂÚƚˤpQʰӬ­তŘǦ]³ĵ"],["@@ɜĻҍÄlƆɆč"],["@@ɌýȹӇRɴ̻ňʐ¦ǓƌǪĬ²Ó"]],encodeOffsets:[[[-1091,51907]],[[-4297,54602]],[[-6367,55387]],[[-5227,56780]],[[-6275,57273]],[[-6113,57155]],[[-5916,57697]],[[-7423,58487]],[[-6292,58886]],[[-7378,59068]],[[-6347,59765]],[[-3184,59920]],[[-3130,60447]],[[-1339,61991]]]},properties:{name:"英国",childNum:14,cp:[-2.5830348,54.4598409]}},{geometry:{type:"Polygon",coordinates:["@@˂Ə®³SïûÑēẂĜڱɠÁuǹŏsYƑe؝Ýէuȑ«Wz~nmhûųĪítÒ^ÓNÙMaOoWčĳғ²ďÁRß~ĿvÇhǈǂ¾ɞɱׄշͺ̽êПɰÆ¼ÌӂgʚīŢɲĒµĶ³র¥ȚßRö»ЀŧÄƈ½`eEsUlmÆmŎI zĊlȐòƨɠōâŊjTÔuňöeƶũȂLŤloýȫH}ӘǷǾĉȷǃĸǍ"],encodeOffsets:[[47417,42504]]},properties:{name:"格鲁吉亚",childNum:1,cp:[43.32568359375,42.3154296875]}},{geometry:{type:"Polygon",coordinates:["@@àāă̇ϼ͍ĭիàğşʘÃҡĭû˂ͻƽڷŔǉĝхǰͯϚ̧ȥɻׅ«ቕ࠵थ˜ʢÄ¼ɼƘǣĤȓࢎɤפƜВĸø°rZePxÖpÿӼ£ƀÌ³jʲTŊU¬¹ľ]ôU־Ļƈî΀ຌXΒéˠȪȘ§"],encodeOffsets:[[-70,11383]]},properties:{name:"加纳",childNum:1,cp:[-1.01953125,7.96484375]}},{geometry:{type:"Polygon",coordinates:["@@ħǥǔƷ̺ǆȊʳκ˂ѪƵͬȎǬ̐¿ȎЕGȽ΢ʳɣ̛ˢeÐщɔƏbƅƏǃdБȮãmȏânĽÁYǋȚťpɣŅüŉVʃmO¡WŻÜþWùĭǯVě÷ƛuǕ³ơŊȗΧȑ̃ǘĀʎůդɛǈʁěéøï§GÛV]đĳ½ŇLs\\Æƪʌī̸ģng\\Ex¾ŜJzÙĄʏͶőŜq¬Ëf՗GșįʉnŉǋǕ˥ǝġĳǋǷiť̸ɉĬBͤŉȍɈ͍ĜƵʪbǼëßĉȰģóƑÛPĘª°äƒˬºÜvàFŸŀÖÀ~ŤOƚZȄÒDȊM¦ßŏľ¾Ìń`òǺ¹ĬHæլlťŊ҂ǉࡔÄ"],encodeOffsets:[[-11662,12703]]},properties:{name:"几内亚",childNum:1,cp:[-11.373046875,9.94580078125]}},{geometry:{type:"Polygon",coordinates:["@@½ɸžŒɌǣࠤǖשiǻĕǭȴࢬAèŠˎîמʷήŴŕΛƟݻːŕƇѷÑiƗۃEĩ÷"],encodeOffsets:[[-17165,13378]]},properties:{name:"冈比亚",childNum:1,cp:[-15.3251953125,13.4384765625]}},{geometry:{type:"MultiPolygon",coordinates:[["@@ËovŒġ"],["@@Ĺ°Ɯê¡ř"],["@@ķX¸ĸÀŏ"],["@@©ĻĩİƔL"],["@@Ń_½ËǰƙN¥CȉȃÑʽI¿}ĿÕŷßEu·ÛƓ˫­á«§ÒŌƗģLŀƩ¾ƮĽ^΀ǀƁöƵÓõĠĴ͜łܧƵlŶǽiǃŒêƼǉɱŴ°TŖaĖhƦÚĈ^ʰgɞ¬͈Ǆ܆GʆA˰AGåºīñǹ"]],encodeOffsets:[[[-16277,11349]],[[-16501,11325]],[[-16283,11741]],[[-16370,12168]],[[-14090,12557]]]},properties:{name:"几内亚比绍",childNum:5,cp:[-15.19189453125,11.810546875]}},{geometry:{type:"MultiPolygon",coordinates:[["@@Fѻ஭đ_xy¤±JyIy]Pnõ¼ĽrΞڎwŠlȤtMT¯{Ġڼ@ʲ@Ȝ@H՛"],["@@Ƥ@ŋȯ͹ȓUƼɬʶ"]],encodeOffsets:[[[11605,1566]],[[8946,3849]]]},properties:{name:"赤道几内亚",childNum:2,cp:[9.900390625,2.35986328125]}},{geometry:{type:"MultiPolygon",coordinates:[["@@˄ºµċȶŕୂW¾ȍѺǊŻʝଫíûžȵÒܷĆmɸĒiÄŢĬĵ"],["@@ėŐŸȈ̗"],["@@ťƎĔǍ"],["@@ŅzBǶѠɚŧ̳ȳŕ"],["@@ĥĬØå"],["@@ǅČúú«"],["@@ɠƠŘ}ͷš"],["@@īA˒Ĩǥĥ"],["@@ċ]ŤŎŅ"],["@@ơňĪã"],["@@õāŢƎłjȕ"],["@@ĉN¸àí"],["@@÷ÐŴe»©"],["@@´Ęɞˑŧ"],["@@ċ¯ƇŎɔÝ"],["@@É£úžoę"],["@@ȘďǭÃɛâȲò"],["@@ĘąƥǗǆÔØǒĽ"],["@@{ÇəɦɎ³ũ"],["@@ŰʿȥÓńĉ­Ǯʜ¦û"],["@@ǝtČĠũȄ˄Ç˓"],["@@ŏuŞɘMȡ"],["@@ői¯ǈǂƝ"],["@@ĠũԒƏŰέˀą©ť˗ŚƟɮ͝¬̞͍ͯÎ͚ƊƂÕ"],["@@ƺɿęviď̡ĜƒİǙđȓĖ˒Ƥȶ"],["@@ǋzȧʲɾNãėȚȡ"],["@@åƥěðƿGŮ͊a"],["@@ɑĞŪŴƫ"],["@@޷ɤʽŗˇøͧȉˍpĔˡ̄ùŌƯίǰƻ{ȪǷiűʁɒȧǜ˷ؗЎtǈʗăϫآܣơ×Nƀȫ¤ŕƲŏлƛֺǥβʹʄÝ¶œIϳѥ̜ϷſϠρ˟ęνǬμँϋ̆ʏˋ̇ҬĿÁɅʹ̀ĆʴүъɼʰɊkƔŸ࡬̡˲Ɣٗʲďç̕²бùšƒwħǅV˿Ь˾lNŒͽL΋ʔġȀûĄćÌlBWÒÚOƨŰAÏĞ@zxXvr¢bǞªȊ̎ŲżÙŸRÚԤfªxŸ°ǶƲǆxʺĢlĸ¸ź̺SìÂŐH¼TĒYČB͂ÖlRp¶ˤEĐ~EɌǑȂRŞ£ĲÓ֠ÌŦÌh¦Uò·ƶllĀdĶwɖīǗʙƍBʅʗȑ"]],encodeOffsets:[[[24425,36389]],[[27829,36317]],[[23608,37059]],[[28512,36792]],[[26095,37267]],[[27096,37464]],[[27597,37609]],[[26480,37674]],[[27669,37847]],[[25886,37959]],[[26159,37855]],[[25113,38017]],[[26013,38318]],[[26655,38431]],[[25863,38503]],[[24941,38479]],[[27469,38719]],[[21390,38713]],[[25592,38666]],[[21108,39305]],[[26721,39136]],[[21184,39536]],[[25267,39741]],[[23978,39894]],[[27045,40274]],[[20560,40380]],[[26049,40943]],[[25369,41590]],[[26664,41705]]]},properties:{name:"希腊",childNum:29,cp:[23.939453125,38.33935546875]}},{geometry:{type:"Polygon",coordinates:["@@@ƢĞĝǯ"],encodeOffsets:[[-63196,12301]]},properties:{name:"格林纳达",childNum:1,cp:[-61.66064453125,12.1181640625]}},{geometry:{type:"MultiPolygon",coordinates:[["@@ĩķ΁ĈӪƼ½Ƌ"],["@@ǧàǈĦ`ǅ"],["@@ǁwŗǨȴǊΒÛ˫ʝ"],["@@ּřŪǝත̉ԕŮѲ¾ƓÚँƢŎȤϸOяǈϬƸࣚģӆɕ"],["@@ύ`ZĈδħ"],["@@~ɥۇǗ͗ČறÇΘΪ࠸ڬƘ͘Ĺ"],["@@Οò̼Ɯ¤ɍ"],["@@ҥȑխž৔Ô"],["@@Ԟ̷੹ƻˊܘö"],["@@х͚Ǡɰʦ։"],["@@ۓĘࢴȟË"],["@@ࢣėЏŎॾǠјušǟ"],["@@བྷɞѩʸܼచǯ¬ͭ"],["@@ↂʭ㇓Ƨď㞆ƨպʁ᝚ȱಇʹ㏱ƍʵę̀ī෢Ġᗆ¡ܘʧৄʾ๠´ĜϽབྷەᰦܦᆦȯ૮͈཈ຶōࡈȍෑ̳૛ā§ȕቍǃۖūҩƧ೧áଝî؃ȷ঄۩ᅡѧԅߙܰǠ଺ǉpŹ׍ľѧÑϘȿ޴ūܜÉЙဏŤॅțӏĚΣ÷ؚŋ͞ʩ୒«ԂϱcӝߩŒএʓӫĆҎŽ׬Ģľρώ˶ζ@זέçəݙAͫũ઩ĜX˒͇ɛƾʽ๤ţš̗໳ȉݕňޥ̮ѧƋۿɀؖ˹੩ɏ৩ƶؔƿࡩġǶÏኔˠަ\\ᄄЭɍڣ๳͈ҽҐၷ˓༂ƾƎˍϽȡϜøᗨ׉ѩ̣ÀœĲƸҠȖߝܣÁ«ͮɇΡ՗\\եǘӹӖ૕̊ঢ়°gÿਫ਼«Čʟࠍțද΀ćßǑࡃɇᏚfęࠟțƪŏ̚Ǯ఼Ŷ༦ǵ୐[Cûعŏ_ĝۇ±łůҳEBūݥƭĆāԗɳڇǵᙡͅԳ\\ϗĳͷ¸Ġő̱³ଉ͂Ǝϑ࠯̩࢕ࠅࠫͻ֭ǆȦʧؽʹŭƪśǻͭæ̅Ƿқo֨֞݅æͼĽ̛͙͉ĘˈʡခŽԄǹ̟ǕˇýۥªĲțʼ ЊλԋɏڣÜҦƫΎVÊͿȋǇɯg˷ϝϥPˣŜҒȣɱȡࢃaڐŵƙΓǲʝЍŝȨċ̵܍˝ȱ݅Ò׬ǡúˣǓŏՓĈʠƕȽǭ`¨Ā̅Eǂ̐͛ɍ١ƼXƜͤîȀǨԽȁ֓ƞăƊɬψࡇ͵ળ¡ΊȔԭNƶгṷ́ˀûʦҪǄڛåÐȠٟȬjȾъ˔ԅȇ࣡ېß̪ઌǪȏK¦Ė७ǭĻĐʮɒތȖМȷĥɎͩÀϋκȪ͹нƙŊ֕ґ˱޾ɹƤޘ͔ѸÀՋ«۟ɗǭňοHþ͐ʉÒᆖ۪ົ֯х¿Ķє͊Ƭն°ࢳυǰðʄॎ˦ႬȅҵƔǞĨڝÍӣĊଢ଼ʋӪք଺ų˖¸ȸʮࠧǕহǛ˂κĈࠚƣ֬ŰŚŒχÝƒ͜ڌٻڈڰ࿳٥Ȳ࠭Ĵѡɺ̬ĶନÍྰ͕Ǭ¬օƞÈɞѣƂيQ̛İോ¾ĬɸऺǶඛýʜȔэҲɳϘϿҕǉ´Ǘ؍ùݽƼɺҶЎȶحƩ¯ĸ˺®ʳČ֪Ĳǀʨ˭Ťǹç͉Ú͊ˌۅȚɠǜ̶͗ࡋGѲĀUǮϲĈኻۜˈźɡƶᖟЀᄓǎҩœϵČࢿƽыĞӷċѷØˊȣఉø૭˨଴ɄಷîiɈޙƗѹǨɺŬཔj۾Ƹุĉʩʹ࠹Ɓ޷àؕœহȜΞŢঁyಝ͌̄ʎےŢᖂȞԮƲᒪŖࢄ۞ԨĊᖏmǧʶᒈԬژ¶׌Ɨŀˢ௾íӾ؆ಾ|ᖖѫᕭզ◴݆̂ƿĬѕ֚҄ᅈΩ଒p୧ϸݲö⪴׉ЮӴૉ͈ᶰÇюÎ♣ĠǤي፾ȸ෬ƍߌȚᇚ˫ӽ̺ࡶń㹪Ê"]],encodeOffsets:[[[-47377,62241]],[[-37920,67105]],[[-52237,71222]],[[-53996,71624]],[[-52915,72556]],[[-26042,72624]],[[-54820,72746]],[[-56337,74539]],[[-18432,77218]],[[-19028,77868]],[[-73387,79182]],[[-18035,81742]],[[-45941,84054]],[[-30671,85571]]]},properties:{name:"格陵兰",childNum:14,cp:[-42.12353515625,71.69091796875]}},{geometry:{type:"Polygon",coordinates:["@@˶DʔŁRƾ̮ȅÿáˍɉɷǩƳãáǧºǑQ¿īÝÛĩǯsvůс˳ƕїǊ٩¼ܛҲÜΘ^tr ĥȺĖƦŀǪȄ̮ʬBϢ@ɶ@ƴ@ÚDYøTĊø@­¤ĕz·@°sÈ§ÞɟƆη͚ǶAǠCHӂໞAÑྩ"],encodeOffsets:[[-91374,16270]]},properties:{name:"危地马拉",childNum:1,cp:[-90.23095703125,15.77685546875]}},{geometry:{type:"Polygon",coordinates:["@@ýƚȐƾÆǗʻ"],encodeOffsets:[[148216,13578]]},properties:{name:"关岛",childNum:1,cp:[144.79541015625,13.4375]}},{geometry:{type:"Polygon",coordinates:["@@ĽǳĠŝķƧ͋{ǥƛÒŷǩӇ΂ש̀aĘѱвۇȆāУsËh¯ÎuRǗ§ā¯óœ¡£mǛGßğg©ŅʱÊµ_¡ġKŻơGµM΅Ʀʯ˖ŋ CĄÓ_vB̼œöĕ˞Šݮʬ̄Mx¿ÀıǢłϗƲƄҤŵƀċhÿ·ĽWǉ÷gՓפ]ôĢàäÆoƞB¾}ÈmÚ¶ĚάÖ̮Ƞ~øGg`ĵbµm»X¥²í˘ǤɸИȬĞt~Į´d¶ƻȲۈЋׄ֩~̟ǉխɒϮδÅϊϡˀŹՉ"],encodeOffsets:[[-58567,5682]]},properties:{name:"圭亚那",childNum:1,cp:[-58.9365234375,4.8759765625]}},{geometry:{type:"Polygon",coordinates:["@@ȯǵǪӰŗŉq"],encodeOffsets:[[75477,-54412]]},properties:{name:"赫德岛和麦克唐纳群岛",childNum:1,cp:[73.544921875,-53.07958984375]}},{geometry:{type:"Polygon",coordinates:["@@ݷȱĝxǷŲĽµ×ƛűɩѳϟgMOǓĸ³îʓɽ]țhĽWsaW¡PÁȓhÿeyÁIå[ùǹ¥_ɹYŵ̾˙ĺÈʖazÏ¤÷Jĉ_ƇĞʡŗF]¨MºO^ԝ͢ȯǈǈRÀ¹ǒâǨƴäɸǪˎɊĀâĆyɎƮ౤ąΞƞ¥ÐфĽєøΐƿʤjиΕǩĪřw`ûƘMƖƣɚDůŬɶŇâƉÄÌ¥ɍ`Ĺĉč"],encodeOffsets:[[-85642,15234]]},properties:{name:"洪都拉斯",childNum:1,cp:[-86.259765625,14.501953125]}},{geometry:{type:"MultiPolygon",coordinates:[["@@ŘËͳøɜk"],["@@Ҍá˱mǙĐ"],["@@٦˱æŃ׋̪ٹǾԺı"],["@@ʛ`ĎϊÓė"],["@@Æ×ƕĤĐ"],["@@ƧȬhɞƀщ"],["@@̟ĒĶŪȪȻ"],["@@ÇąȌˏ¹īͪƿ˱Ù±ɣƝ\\ƣǎ܋@ݧǘ͙»ȥǧɝƲȫU©΍̮ȵǔͫࠊ֭̈́σÅËֵϢёŶ΃oڥոÁì̊`Ы˦ŁВʯǼȥϝп˿ը̤­Ю®¶pŢŶpK¶áŦÿƊlƀ£ŌSĈvYOÐäÝÖ̀ňpĺQÄÍ¼IbкǮǸŸĚUöq®]ƮËļÝτ˽иǥҨƨbĎĂȬr"]],encodeOffsets:[[[18031,43796]],[[17051,44029]],[[18092,43927]],[[17189,44310]],[[15741,45030]],[[14836,45732]],[[15166,46057]],[[19360,47035]]]},properties:{name:"克罗地亚",childNum:8,cp:[16.458984375,44.484375]}},{geometry:{type:"MultiPolygon",coordinates:[["@@cÏɋêǗƎЈƧ"],["@@ƇǫÖŋN«aÏĻĳĵG[W¼ïÊăĢÙtÏșíâýÊĩۇÝёČ̥½řůӽ΄úƦƆூȑΎŞ|ĎϵͬĜ̴؟ʀȂƊӦdΖſ͖¡²ll}ǛǛČ÷"]],encodeOffsets:[[[-74551,19229]],[[-73366,19657]]]},properties:{name:"海地",childNum:2,cp:[-73.06201171875,18.970703125]}},{geometry:{type:"Polygon",coordinates:["@@ĺDˢɯƾqĜƍ݃χ݅ਇ̣ūħėȑqd£`ȑh÷_ȗpǉėًſčāaƧҧзǦσ˾ĽÞƫÌ­^ț̜ǅL̢ŦUͦȞŖɉŜժäʤԬȣ߲dÊǴ۬Ȉ˚Û͐ŰƀȚ߲tˆǵ̪Ê"],encodeOffsets:[[22663,49568]]},properties:{name:"匈牙利",childNum:1,cp:[19.4853515625,47.1533203125]}},{geometry:{type:"MultiPolygon",coordinates:[["@@ĹVhŘѴʌ ƧЁɑ"],["@@ƭʚĠīť"],["@@ùŐľƋ"],["@@ٮө¢ãœƙɑóʙĂҙΨџÊŃǀ˲ŶլÈÐÕ"],["@@՟՗֯ǕţÞĤǈŃĤĶ̒˞ɰȸñƌȨВȺ^ġǲV£ŭŝoĜʣ"],["@@Ň°ä¤č"],["@@õĺŜŤwƧÍ"],["@@áJ¾ʴĢ÷ýȅ"],["@@ʗǊƈĴeï"],["@@ŃǧÔÅ̅u͏ŀȂ_ʶ˺Ȝˊōßɷ"],["@@ŝǝǿêʾȶ Ł"],["@@̹ʙ˕ȸǪí͔úŲé"],["@@˧âȞŖĊǷ"],["@@ÅƺƤĝȁ"],["@@Ќæŭفõ¦ȜŪ"],["@@ʞÑăíǟÆFú"],["@@्ʋȣìïďʗeСŐ՟±ďƈÈɺآƮۮ˱Ѭĺ̚ơѸ˘ÎèƉƄäøȇȉʃ"],["@@ñȶɒƀ˃ǁ"],["@@̴ĐőǴİǠ̷͑Éòć̓mċƴǃƓेɑɭþ Њˢƒ͸·ȪʇƎaɠŖΛɀ¹Ǌ̦xŀǏ"],["@@ɎɃҹω÷ɶωǎũǲЄiǺĸʚõ"],["@@ĿïĕȦǢatœ"],["@@ˡʃγÄȯĉƪ˒ȨͬŔǈă"],["@@£ĢĖc±ý"],["@@ȩŋիfδېǶńЌ¤Ȁʱϟӟ"],["@@ǱDrˀъӔþëûÏg̟ʣ̻"],["@@șîƠZºć"],["@@ş¤ĈÆĩ"],["@@őFOĈŢč"],["@@׽ĳͳŶŢƢǚhނNĊñȕŧ"],["@@Ɓfjüʲßƙ"],["@@ŋtŜúOĭ"],["@@ǵ΁ț`b̦ôXãɦΠɁ"],["@@ʘǩ֐Ï̈щ฼Ɓ΄ѰŚWǬɁ̠ҠȵϞĠʛŪé@ȻȀėРÇӖú˶ƅmԥǒ̫ૣОӗĹঙĔݹƀ૙ώғʏŉ҅ÖՏɄۡĔÄˆ˓ŀ߉þĬƞĨįƞˀŎZè˸ǦǞـƷȆǎ˞ē"],["@@ƓSׄ¨ѯ"],["@@ŏPĔÞ|í"],["@@Ł½§ʲƪȳ"],["@@ӵɯʉɬŮ®ƪřŀŖIȖʈƨɻ"],["@@åïʘ֜eɏǋ˛"],["@@ɍƀɖGĥ"],["@@ăĆìA"],["@@ȟƴĘƺņñBɻ"],["@@åıɿÊĨɀwʬ˪Ű¸˅ūǡŋ"],["@@`ɫşØé͝ǸǍǿÕſɟƕP·ƦưɺòӼȆȚĘƏ"],["@@¨­ʧǂɀœ"],["@@ƕĩęǔȲ~ī"],["@@Ɲ«ºļĤÏ"],["@@ʡą«ÒͺƸ«ƃ"],["@@Ɵ½ĈĈØ"],["@@ȳŝJҦǦǦԭ"],["@@̮ʭFȯҙǅЅȀƃƸˆٮf"],["@@ťÔƘAqÑ"],["@@ՀĽǆšʒσ¯ʋ߯Ҁ˧CĿԕȀ̅ǵ͑ʔȗ˵qɲ˒̚ږƸĕʺŮɪã"],["@@ũɕ˼KǜɌǹ{Ƴ"],["@@ŷȕǓŠȱĻ§ʐĒ̖ƞ͆ƕÚŏéƗ"],["@@ǁáwʜǺǹ"],["@@ȣðȚɬˉ"],["@@ǉ̀ºĐŐЏ"],["@@ʶܑįûĆ՘®"],["@@ÆɽƛÛѕƲԬƨ"],["@@ȀMłƑݫŅóŬôǘҪ"],["@@சǧ֑āهʪ"],["@@īĀŰ©"],["@@ːڛϠğǧˑ²Ʃ֙ȺǳզշŜ˜Ͼł¢ĬǡhǔǄzŖƏ"],["@@ĩpƮÌǝ"],["@@ӹÉƕŜɄɎь˟"],["@@tǽǔŸĦčġȥVďƭmʾɕʃážĆɀʰV"],["@@ȹąZʖɤ­š"],["@@ēDŔƚ¯ç"],["@@˯ƘȍΌØȒɎbˬ֣ēų"],["@@ǿ¼ğʞ̠ͯ"],["@@є×М̱ǯĵȽƙ̘č¹əȘ"],["@@ťh¬ŢúƉ"],["@@ƉŴÎVģ"],["@@băȏoǮĴ"],["@@@ǋDᲗħͥĨƓBᇳࠉޢĪɮƳƫҥóŗǨ̝ɋǖմ˹˰ΰ¼˥°ȵǚɜàΧўţͨàĘƥŞŎɃuȴٿѨ։ń՛ʎڅäѡ̺xľưbԵOĳŲơkʝ˴ƎΦş¡ɷœįХŷƍ˫JƇ̔ĬŸıɎٽьɔĞдğϺ̐ђƽ®ƤŶºħĈŊǈ߫Ɲս~ʅɄýβ՗ƖʡǐɒÈʺҠŸӸ̈ϴ½ԬʷфeŚđŻǀ̣Ź̝öӳɞѯpɀŨØͫŢrʧ̪ƅȢp̺̌Ҁ؈ִƘČâ¡ƺֶ̞သܫ۪ćŀƉȎE"],["@@ĮōȑǉėǐǼň"],["@@ĬűÝšɴǗĳ×řİƉLƎƗŤrƒŌÑĤô"],["@@ŉqNȮƐKǯ"],["@@ɳSôŌǀķ"],["@@϶ũÀş˫Ï͏ɲɶɏůċ½ŮśÏˁƂłŘϚÌ"],["@@űAİʲĕȎȆɍíɯ"],["@@ȐęҷĀĄǨȤǍ"],["@@ũP¢ŴĈƃ"],["@@ҋĢ`Țиȕtĥ"],["@@ĝpÄ¾í"],["@@ϷƶpĘɲùƖǓ"],["@@Ĭ]×ƧőèþĞ"],["@@ÞƕñǽŗȀƿĢƔȊ"],["@@ŭðo˒ƾƍ_ȳ"],["@@ϚЭģ·ŗãȦǕĨ˛ДɶĪł×"],["@@PŇЍɸϾů"],["@@ϱѳ֣ƑЧlɥƖဝ©ιð͗ɓƭϵ¦̟ƬˁɶƝŴˣК~ΪіͦĕʼƨԠD¹Ć˼ôǪß°Ň³ȏЋĔշջ͡řǩǝʝb޾ࡻĜʗūΛπϵƄhr˝ŷªԗǙÝʕϗÖďƮŌШ؍Ӓƌ̔CΔơĘȍkͣʁƨُaއšѹŶϏГ\\ȟĭƇêǓʠȠڔ|ШſѬЇqŃŞë֪ʸȨȖҬYѬǘфǠȎŐƱĹٰŦň³ǖĖǦ̚Ѷ˨įɠͰǶÚ˔ëǀƧ܄¥ͶơȔĆܪûԒ͌ΎψƐ\\ļƷ́э"],["@@Vʏǿ³ùʐʤ´"],["@@Ű_ðǮǌĬ¾ȲϺƠ^ϻ͹ȕţ̎Ʒʐ˫ޕɌăƣúҟϔէ͇ǀ̕϶bѼƝ˖ÐȦƯʖǠנ;̘ṷ̋ľŋ@̵̝ˉäƓ"],["@@ȏŢƸaĿ"],["@@ƃcÝɚ͒ʦòĻÅȿƛƟ"],["@@սʞùƜƮÂѬ̽Ž"],["@@čiČĨBý"],["@@ËǘŨïÛħ"],["@@CËéĮî¡"],["@@ġŶŐqmŃ"],["@@ūtɬǂʟ"],["@@ōƽ¥óƒȢb"],["@@ǹ^ŦĘȭƢȸȠŨșÝʝ"],["@@ğāʾ͗؃ÇʒǑLțɒŉœň·½άяɷʓ৐࢛ϙƗ˵¼ʅȌ¬ǭȁƅȇг·ҹĊϓկϝƣƮ\\ʃБϧŰ@xśřǻɂƅǯǱ\\̋ƏúǇʧϿਖ਼ӗƗژãėď@ǮěŁŻèͅƩāɔɡ§ʹ˂¿ɇǳœƃá˅äΩșжŅƘٝƳčÚÎòǑĥŇŊˉÙƇ߸ŗŜpӴǏɜѹǢĨƚɁȺŖΠʿ˚yҴȆƢĴķ[ÆɌʬΪɂĘùōĬɿܐمԄǂתɨŎĜʞʒĶϼPÂŏԮǕɾǖԠdˌѺɪͤɮĉĤɖňŌǪRȌ঄ƴžռnӰЊƕ"],["@@ĥĠǀûðǢƐɏĕɍ"],["@@ࢰoלړ¸ˑ஦އږ࠳̪ȭ¹ʜǾ^βӃҘɁ̶ԋբɛqƍϧǗڐʢ˪ȍĪȭ̝ȩoƛĖēÏġʂʻ՞ŷžٿˢɯǍуːȌΨSծ؍Ǜяòǿĉˣ²܅śڷͱɦɣǑωȎ̻éW٧ۚઙެ·Ҭңδ׃ޚ˄ҟज՛ܺѕʴӁౚݧдġЦǗňΟԌѱȮܭ܄̹ԺlʀͶш˃̠Å"]],encodeOffsets:[[[125900,-11171]],[[124809,-10844]],[[126379,-10549]],[[122893,-9599]],[[128070,-9740]],[[118385,-8980]],[[125929,-8750]],[[122332,-8950]],[[126278,-8555]],[[119441,-8820]],[[127270,-8529]],[[126900,-8471]],[[142229,-8589]],[[120378,-8568]],[[127566,-8336]],[[130892,-8293]],[[125730,-8818]],[[134003,-8518]],[[121081,-8517]],[[118219,-8350]],[[132955,-8145]],[[129845,-7851]],[[130478,-7806]],[[141861,-8472]],[[134478,-8191]],[[135150,-7374]],[[131759,-7355]],[[123674,-7289]],[[116577,-7275]],[[118147,-7138]],[[107779,-6799]],[[137766,-6596]],[[109951,-6151]],[[123421,-6449]],[[115425,-5950]],[[135995,-5991]],[[137981,-5843]],[[136117,-6043]],[[104825,-5610]],[[126594,-5398]],[[124972,-5568]],[[125589,-5395]],[[126137,-4660]],[[136777,-4347]],[[126201,-4211]],[[131649,-3671]],[[131355,-3762]],[[119219,-3547]],[[119095,-3960]],[[129906,-3161]],[[109452,-3077]],[[132869,-2934]],[[102836,-3259]],[[110805,-3069]],[[102609,-2806]],[[102240,-2399]],[[129081,-2510]],[[129049,-1832]],[[133482,-1731]],[[127969,-1746]],[[138726,-1630]],[[111568,-1658]],[[108591,-1709]],[[126564,-1745]],[[131229,-1700]],[[126170,-1199]],[[112344,-1209]],[[138205,-1142]],[[101544,-1820]],[[134146,-1347]],[[138633,-667]],[[130356,-799]],[[133762,-541]],[[124790,-416]],[[144357,-2672]],[[106982,-342]],[[130629,-326]],[[130304,-507]],[[106227,-356]],[[133953,-4]],[[100823,-543]],[[107294,-180]],[[105764,555]],[[105501,765]],[[105907,1074]],[[105643,892]],[[106522,1209]],[[107096,1246]],[[104886,1014]],[[99822,1501]],[[104952,1495]],[[127887,1020]],[[104150,2129]],[[130799,869]],[[99671,2126]],[[131537,2102]],[[98779,2417]],[[111501,2976]],[[108299,2932]],[[108837,3233]],[[120483,3360]],[[128674,3519]],[[120714,4287]],[[110916,3779]],[[120397,4271]],[[129861,4131]],[[98809,5355]]]},properties:{name:"印度尼西亚",childNum:107,cp:[118.091796875,-2.64990234375]}},{geometry:{type:"Polygon",coordinates:["@@̽ĥ̤ˬZȅ"],encodeOffsets:[[-4517,55486]]},properties:{name:"曼岛",childNum:1,cp:[-4.59814453125,54.240234375]}},{geometry:{type:"MultiPolygon",coordinates:[["@@ʬ@ĤмӼþʜόώeլԟ͚ƺ̃͠đUz­ƓíȘșKąuū¾ǅWǫ̑âʀ˵ɶĉɔÛʄǣaīֶɹĦ­rÓ`·O¹yiŕĿœāŭƛíƃ½ůBėoĻÁÏqėĽhƀěĈ³Ā¯¼Mbn|Î_Ө˃ָϿP¢r^¤YÚƨĝƐíƬ`¢[ÛpßҲůä^ÀjĖQǐ»èeɚĪŜÁɂãň¥£\\Aĥ¥юɳĐsɴČâWªš´Ǵ׎ǵ˄ĶɬǏłÂμ\\Ŭ¯Zz´ƀ¦ŜGèĸįƄS¢ƎԬFĀxAÀ`ŒjŶŶèȐï±СbûÊÉ¸SeķákĴǵʒũƺɈÏp¹ĐI¬YƮnư~êþŠͦıҠdŞÞ|@À¹źIƞ¨ĐP°K¨hֶӠ£ʨҎϬɢࢎƈՎ̰Ϧ×٢˿áƷfÙǞɵC¡ůdſƎԙࠩԵšƕRʃċjiF{şɫ˗ʽĩȱŴįǭϯĭƍëŷǿϙ͡ŔȗeŁÜ޳aũ£Ŀˋê̝ùųęǥ¯]±léĂçv·ĵ±[ÐÍ՘w¦đǎy˂ñφǝIÅ\\¥K@óRÿƷǻEȟǕ½įǪÝŋǕӼǄͲ̈́ŨĴ{Ǿǘ®ĴĠɸBĢp\\ŒêĂΙȎ஽Cб¬ɅÖ«XYpȊC͎ŵɬĉåmŃɕɩ̼ÉBfƉ{IɏƑȐůeåW®ďęĥƵƛȷ}̘ɱɢðƁö[É̙į@ëȏ¹ãBùKĕǛ]£M²ÝÈÃâsĦMƊěŦiæ§VM[ĭ[Éō˟ÊĽÀµvȥƢoy˿jǯŊ̛m˳ßBĐʅǋúħƇGΞĉĮµϱśƃŦŕǑÒŜϐɇȢǾɅ˯ͧԻƵȷƭĥɓŐͿȋ͗̽ʳŋ őףȏßHPǈɋŋÉƋɖ֝с֕۩ำ৑č҉йȗЏPʳӡ˧Ř̓ƹȫ՗łԃÉɟǎؑųȔÿěɾȳħ̵֟כƓ֧Ět¦šUܽѯÇׅ̿äț͢şγÜҷƏȓǵŏэҕʱϝȦљӲȓҤçЎŐ͙êEĥ͖ųƐЅੴٹৠӁྰεӤů˔Ō@Ƈƨ¼òŷ¤ǡ̄ԍᓶĆіřƫĔRȂƦkǗîĵϾȐۼãϐǅɈĤČķSоʐӍ­ƂɴƭHƸɌÖՁļåċȥɡƢāǓȩ̿ࠫΕʱDӻ̔ঁ৒æŬȎŵݴʌˀѢųű֥Ʊέöԁ˼ȉ͎̠ɾҕɉÍɔİÒĊnĜbĈAŚCHʨXxh^lNhIzDvìgÈ\\ÌcĬAǬPĬEȸěʘĺǈÌɎÀfQ¯p«ä´O¨Pbææh°C¾B~ÙŢL vwÎÏŔÕƞȍ̢EȲáÁiµGƷtƑǠ¤πǜէɌĈ̶ˠʦżȄĂż¤¨ƆúîCŠïÀƗĚ¹ÜJʼİ̞˞þfî¸ŊƲƚƐ̎¦°ҾɸВݾάƆÞÌ ¼QºÐbêĢîˤ̼@ŊÈļÚO]ýÖbÚºǢY¸ÑǄ`ª|®æÒĔ¸˨ŠÊ`ĬâŜWN"]],encodeOffsets:[[[77130,33061]]]},properties:{name:"印度",childNum:1,cp:[82.63525390625,20.69970703125]}},{geometry:{type:"Polygon",coordinates:["@@¿µáƠĆŏAƨƁ"],encodeOffsets:[[74232,-7554]]},properties:{name:"英属印度洋领地",childNum:1,cp:[72.42138671875,-7.3271484375]}},{geometry:{type:"MultiPolygon",coordinates:[["@@ˋÄɨt¤÷"],["@@Ňŭˎ࡛λӧŜĉӅñÙøࣽΣ̏Â¼űϵŽޣġǲǨԃãѬɰدÙδ˖ЗZÒӮőźɰŦ܊ŎǧÜƹĵحÅϜɆƔɲ̴Ģӫ~ӝƦsŖͬ²Ƴļ˖à@Ø˯_¸Țȣ¼ĒౖaßĘЬʚՋ͘ǪĒɎԜĢRʇ̌ͨ̈Ņɍũ˧˗̡Íƀē̩ƱјɩʂUˊɰ̜̇δ|"]],encodeOffsets:[[[-10186,55208]],[[-6367,55387]]]},properties:{name:"爱尔兰",childNum:2,cp:[-8.20849609375,53.42041015625]}},{geometry:{type:"MultiPolygon",coordinates:[["@@ȝȃեĝϜȂIŖѮHû}"],["@@͂|ొٸ˜ʇǽƃǂȅʝƑԄϋɶrüқǰʑ߬ǋ͸ͣӰɫ࣒ķೠʸŮ@ȣÝʔ±ѴڈńǚʶКɰݠ|ƚƚنƈȱނʵҰdТơźɏԞʑɺ˙ٺLþϝ¹ǵČğTȻhÇE³ƋõiΓŇǝgĥã¿S[uTuvańŽȷYƁǱ@͑ôĻ˾é̙̯bťŒͧĴ̍CçƱCğHǻ|ƑYɎȢ{˄Ăą¸ǳEƅwçȋțȑȡЧщǈǏİķب࠷ܺ́j͵}҇ΐY|Q¼±HwÁRǕQ]±wcƟܙƥÓőĩXʃţ»{ƛuŷamÍ©McT·ĝqʡyë¯MĵÿؽƲŹżġĿߍƜ΅ÃȽŘ௳Ȧʣࡒʵ˞ԡ`ଝՙїǈҕ|࡛ԈǹʘϏǪχʻɤǻԂǏŨRǊǙìsɰЗтćɸѡƛѷʰǒŜȅé͕̻ƃËēȼ˅ưIѲ˥Z@ͰØǚÜǌīŢĻŸáÀƵʰfƏOҩ̰ǉĄálƻNgfYª@¸¼ôJ²ŁƼԻҲŪȴéɊĤŘOȌȲȘĶªü lÎŀşǞÈŲŦæVzė¢͡BΏǌķ˺©VD¹¾ʍ֞|ŰȃŨbɴ͇ǔȨΪŵªuϚȽҔ̮ǖ̆Ȗı֎էՔŇ"]],encodeOffsets:[[[57537,27568]],[[47222,39811]]]},properties:{name:"伊朗",childNum:2,cp:[53.66455078125,32.43603515625]}},{geometry:{type:"Polygon",coordinates:["@@ŗPģêɉũȳԼұłƻI±»ó@·Z©heɞyǊăҪ̯ƎPeƶʯâ¿ļŷĬšÛǋ×Ǚ@ͯ˦YJѱˆƯǺ˕ûqċfǳìƅ{Gy˭ĪзąȯϳŗǅÙóƋƍƧ൝Ŋ߉վ෗ਚഃۀğ˻²˗¢ҷèŮĴĜǥɣ࣊ᇴࢴǪ˸ƆܸµزĶŌ̺êӐјĆhưĸĘĦTĀÌSžӪşƊGƪúĐWgbMųä×Ü¢ǢĲÂE¾Ooʎ֝º½CªUĸ˹ΐǋ͢AĘ¡U{åťÇűŠǝĿkÍûķ©ȯȗȋ"],encodeOffsets:[[46733,35404]]},properties:{name:"伊拉克",childNum:1,cp:[43.66064453125,33.21826171875]}},{geometry:{type:"Polygon",coordinates:["@@ߔźѫɋΜėŇɋκpåǱʴÈҤĻƿƏǦˍϏʙ˹H÷ɃϝƣݽťڵʻধŷŋƫקŇಙŲʝŌäĲȥÉуǨఽį¥Ɍǈû˔¢،˸ӷÅĒǜ̢Ĥџỵ̈ɚଏ³ǧŀਦƶݬDĦŞؕR֒ɂࢷŐ࠹ơӛİȒø͢ÛȡȨАćˤÐҟČʶɅŘ̀NeƂθǗ̠ƃƤGƊуŤϴ®ՍÔƠúѦBࡨͻʅʅeѼϧ˚̶̌ÅȺѼ׾˧ĚʶҌĞעϙŽΤ͠]̚ƭͮȨ˄Ý̔Ð±ɂʔÜɜQϊʉ"],encodeOffsets:[[-15916,67818]]},properties:{name:"冰岛",childNum:1,cp:[-19.037109375,64.96533203125]}},{geometry:{type:"Polygon",coordinates:["@@ǷÿGkcȋÉNå¤açjģlŅ×¯Ĺ¯ƫȹWqsPclMÐlØkÜÉɅŭÏȟӐĤБྣÍßփบĒìDÐƨƎ£¸NPǎʮβীʬOϨ̚ЛŁǷ"],encodeOffsets:[[36647,33521]]},properties:{name:"以色列",childNum:1,cp:[35.080078125,31.455078125]}},{geometry:{type:"MultiPolygon",coordinates:[["@@Бٗǒ͹Ƶ̯ԣĢ̝ʲȥEء͆ѽĬǣȎʤ̨ƚů͜Ƃкǯ૤Ơ͊ŚàÏ"],["@@µċ¯ŮĦ¡"],["@@ãĪľç"],["@@Ƣ͏ƋșåएыÔ÷ɳˉȗɼňՒŝàẦɿ̠ɘ̈Áր΂͚ȫbœ"],["@@rŧʍzɜĮ"],["@@ǰFgeqË½¥M}PmlYúLÂǁƘģģýûƸΟ@޵˙¡ǡʢɯɳȷŮлঘշϒݍѾϏՆʻ࠸ɛ͑ႮܛьηįͱɟĬǳ˾Ͽ¼ǹƌɃͿׯӾ̯º͍ҵǕÑ͡Чϻ˩EßĄȜӢˌŪ\\ƴѣࢤدȾEȘƳǘΧÍĶŊΓêʻΤթPϩȎ࠱یзĒvŪϫʹǋ˝࠘டЌٕҝљğŨͮˋuΙǔþа̛ȬόƠÊŢ̗̠ȘƺkÖoǖ֒ĔöȬŴîÈÀÔôǗ̢ƙP_£ÃƨƕÐ`ư̾ĎɶĂ]zBĐƧ¨SºAŰ¨Ćl°KĒĽS¢Teŀy¶xMnÂv®¦^¸LȠÏi¸W´PÎ ŊvSĎAĠOÐ«ÎeĊKÈPj¾ÐÞĢǂNĂ^ȼWͦĆxOJ[p¥Īċ¾Ù¸µú}ׄċƶ]ŜEǮgµ[×ƍćlė"]],encodeOffsets:[[[15951,39138]],[[8683,40006]],[[8485,42025]],[[9864,41864]],[[10645,43887]],[[13744,47322]]]},properties:{name:"意大利",childNum:6,cp:[12.54833984375,41.8857421875]}},{geometry:{type:"Polygon",coordinates:["@@ފʱŞȧ˃¡˟ĞùĿƧíƑƁĲͿɵʞʛĪļƈ˾ØԦÃ"],encodeOffsets:[[-79115,18901]]},properties:{name:"牙买加",childNum:1,cp:[-77.2744140625,18.119140625]}},{geometry:{type:"Polygon",coordinates:["@@ǻ¯`øǜ"],encodeOffsets:[[-2067,50413]]},properties:{name:"泽西岛",childNum:1,cp:[-2.126953125,49.2216796875]}},{geometry:{type:"Polygon",coordinates:["@@ůįYӱŭɛÇԱŽɹÍɍÃ࡬࠯į³ǋāgcacãƗ¿őka׵Ň©ĥƑīƟǋŝǵŻऱŸnǞВྤĸْiƂdȌHlǸĀӬ̇ϒÏ࿦ࢲɤࣉǦěŭĳ"],encodeOffsets:[[40085,32896]]},properties:{name:"约旦",childNum:1,cp:[37.1220703125,31.287109375]}},{geometry:{type:"MultiPolygon",coordinates:[["@@ǩúĆƐ«ç"],["@@Ɓƙ©öǾŶQÑ"],["@@ƥS^ŜƈŇ"],["@@͡ǭÁʑų·ɊԌǄuƂǸHȕ"],["@@ĉNPƜúƩ"],["@@ïåǝĺѴɤȥʷ"],["@@ƩDµļĠÞŪÛiŁ"],["@@õ Ǆ͔čγ"],["@@ŝȂ®ãý"],["@@Ĺ\\¤ɺƄhǛįġ"],["@@ȔōǛwƮ"],["@@áĤĦƲÔŝėŷ"],["@@ķǘƺßř"],["@@ķQĲàğ"],["@@Ѯ@ƅˡ̠g£ŗżȡ˻Ε˕ࢻɡxƱ΋ȭø׈ķXĉŽ͓͙Ĩ­İŮxŴőƘN˒ϐѼţ¦Ʀʹ̄ģÓ¤ɇŶD\\ŵʉÎʉǙ¸żŭˮˀǫΉ͔|ĜȠkeĬҐǔĴǚȚĀȦ³Ȇɥ"],["@@Ʈȣ¶Ô"],["@@ÿlzƨļµƉ"],["@@ɼ{ĐͿ̣ǳǏ̡ȉǜ˛À̅ŵʷѣơ÷ƋTÊŠǷ\\çќ͉÷Ԣ̌ʖ;ɐƋ͜ìlȐ̄ĖΆû"],["@@č»ÍĄƜ"],["@@ĝïƁü˲ɀÑɋ"],["@@ıbƸˈÅ˩"],["@@ōqĪö Úŗ"],["@@ĳPrȾɈȦ¥ȫĸSȗȳ"],["@@Ȑsֳ̰γưܥÛˋ̇̕á̟̝ÅūǃࢅΫݑʦыΓǷđˡѕɡc͎ɪʐəÔƹȽtɓǛŲȋiƍρȽȁ̘Đ¦ƹČѽѹթÌЙçǴǆʽ¾ûďtʬý^ɫ̹̈ȳuġѱū΍ԫȃÙȱÈ˙Ϣwʀˆˢ֧Ůб§ɹƿۛȋС±˿àƕУͽǶۓÛ{ʊĬŌ̌j೎ईࢶGৌȬŸȅ̔mȈĔǊƊẘՊՀŪՠЖŞΡͻİɽȖëɤǖڲɢӆՂДɊςڂɚزÏȘɅÆɨ˸ó˴̜ȼÂ̜ʄOĸ̫ǀĢƶ·ł˖ύÇDĪŔɄʖŏ"],["@@¥ĴńÝŻ"],["@@ų¤ĀĐŅ"],["@@Á¿ǒĐŏ"],["@@ݠǁռͲȕ֑ǚ̡аìމ͕ߝĳґϳǉΗ୕ӠύΝǣɵǴȓHŻɟۘЧŵÉ˷àɱʟʥí÷ŤĦ˰ɭ̬rʮӔ̼̊ظĻȤČ͘ৠƫ֢ìȶɪĞߒ۵߆ҭ"]],encodeOffsets:[[[126862,24863]],[[127277,25105]],[[128455,25337]],[[131337,27293]],[[132095,28387]],[[132560,28886]],[[133758,30990]],[[134103,31127]],[[133511,33202]],[[133205,33004]],[[131754,33571]],[[132175,33629]],[[132600,34021]],[[132911,34559]],[[134323,34410]],[[135441,34760]],[[132383,34943]],[[137583,35079]],[[137577,35312]],[[138172,35112]],[[132491,35179]],[[136572,37073]],[[141665,38730]],[[144619,42366]],[[142829,43091]],[[144687,46203]],[[144459,46421]],[[147277,45176]]]},properties:{name:"日本",childNum:28,cp:[134.7568359375,34.89501953125]}},{geometry:{type:"Polygon",coordinates:["@@ķȤøÍŖøĤ£ǲ»ǢŸłEŶRÚ^́ǋɉŋĵ½"],encodeOffsets:[[78898,35953]]},properties:{name:"锡亚琴冰川地区",childNum:1,cp:[77.28369140625,35.38623046875]}},{geometry:{type:"MultiPolygon",coordinates:[["@@ǁèĪŨÑŏŪÿ"],["@@ѝɑѩڥťȉЁŌ։ƟǅחȝĳŢճCࠣǺ׷೹ʠƝ÷ʣɋĀˑ·Ʌǂ൏˽ƿĻԢƙŃԯβ޻ͩıŰƛ˯śNқśĨűĢγ½vȍƴĀbᅛǔ˹řUӝTûR§GěđՓØ۳˰˕ĝˣŉęʥyğÒƹåVă¢Ϋ´ďÞǭɣâџÄȷ¯û`Ɠ£̧ͥ®ûທەӍңWɇɿȳźÆȂƩƘਏcǯۆЩVúࠢʟħʳζӹͼϳƍਡÞ৻ŗࠛݸᏟঊᓡһBᶡҗsӣ֚؝̶ࣃƿҿ̯ĒࠖוĠʁʐˏ`LʶЃװнŐáŖƂƌ॒ý҅͠΀ξຈuΩȮ̤ԴÅ֐ӱŔ́Ƌ߭ʀકѝҏÛīƳׅɦbŶͶdڕ޸ֻĄǃÁȑаͻưͤˢ̂ȕǼòˤҒ֊ɶjՊѩΤÐőֺזȪƦȚؼǦҠτ̶çƲƟ݀Ƞ̐ȑ٤@ڪχΒщòЎ࢚έڲξѨβƧͮǞѨwѲ̳ӎ×ÐŅʐöȸɦ̮ƝѤbϔƒƔ϶ࣹ˜ιʂ߸ͺȃ˶ɰʠ࢈ΡȈϯº~ƄʲÞұĊɄͮזÓᒂπՄ͜ʄᖮ̔¨Ƹ٪Ȕ৤ȏҲŤϖץý͗ފMƴĶɖ͑ƨǊԜƩМîͿ˭ĎɓϞƠвōČƆ٦ȺǼǐ୴̒ƵʟȝNÂŇୀهᅂᐳπƞrȦʌĢͤđ±ȇˈWàǻࡸWɤƒԄĐӴȁ͆҉֖ƫȲϏߖĭдɸ£ǵגБ"]],encodeOffsets:[[[51389,45932]],[[89419,50264]]]},properties:{name:"哈萨克斯坦",childNum:2,cp:[66.9921875,48.00634765625]}},{geometry:{type:"Polygon",coordinates:["@@Κi²ƿk§mŽNţɒ˷ݒ³ȾƁڒяŢćŜ}Ȑ[ƀIݘťƎĸŐƪªĆޢΠɌǹǚħŶDĠdɌ`ŬAɩ͙ɭ͛̓͗^ᶻɪ̋ƬȕĂĻVĹɟȿ̓áPȷɇɧΟůęҿɉ˛̵ݵɥǷഩ৐Ϟḭ႘নǾδɀɚÒƦˈǞƬЌBŤYǚå̘nÀϩָǎO°ǌGŁďäj´­hſ˦ǜǘǠǜɔɊȨȠǦǞƸƲ¶Ņ"],encodeOffsets:[[36174,5494]]},properties:{name:"肯尼亚",childNum:1,cp:[37.89404296875,.400390625]}},{geometry:{type:"Polygon",coordinates:["@@·ƭé¬¿¨ɛ×Ūȓ²\\Ú[zl֝ǫʡǊৡ¿«ʪúz¨¸kÈTIÒE~мƴՐȓ͢ɾ˂͜œςʌɐWZŴǞ©ѺʬЉʛƤÍGåsuXKþa°£\\ÁmÿnãPiĮÅĒ^³tôwO}Hŕ»¹AáWǥ_Yʁ|ȿÔŃƨҫƞ֨ϬƦ ǒîHpgjçā³ec­ų̈ͦƔ¤ü_ȸ°Ͷ½ĪEɤãǬĒÝά³Ą¡æUÑƺzĠĚʦˤŊ˖Ğ۴˯Ք×ĜĒ¨HüQӞSŘV˼ᅜǓÜġþ»Ôµ¼ÁвÏŲġŜħŉWaeUʳcÍg×ą࡯˵Ǘččãa÷ȇǥƕsšJăřԁ á_ëīƏ¡icãíćŅë¹Ý»â͗ŅǍFĹˎDɽŭŉuęGśÃÅ|ċΙǇƙƁcÿ«Ã¯ďy£iyH£ěOy¥ěuë[ƉXéc§}ďŁYϿr","@@ćXÍ`]@LgÐÓ¬Gø|","@@nƀů³ÎeFÁìăAaå¬SüC¨R"],encodeOffsets:[[74384,40332],[72361,40812],[72916,40850]]},properties:{name:"吉尔吉斯斯坦",childNum:3,cp:[74.74609375,41.224609375]}},{geometry:{type:"Polygon",coordinates:["@@ұȲʃđĮƴȆǃɎƭȍǛOwҠƩ˂]ÉǓ͐f˲ɋȴƍݞǮt̨ҪʒǐೢĄʜǛ¬®²\\TFwl¹·ĖùƴǪÏüĝÖ«ƌE¶ņyàûŖsä|\\Ƃ`t`ôSòWü¼°Â|{uÈÔ««iĀ^rC°ÂS BƸƨôPĖŢƿӟɰׁŉ΁֓ħĕƱљ˙ʉ}]ɗͣÒŽĻJ˹ʰɍFȱʻÎćł̋ùęɧÈBǭǑƕΣĻ"],encodeOffsets:[[106933,10662]]},properties:{name:"柬埔寨",childNum:1,cp:[104.97119140625,12.55859375]}},{geometry:{type:"MultiPolygon",coordinates:[["@@ƔĭͷƌŤ¯ÒĊÝâĶ³iĥ"],["@@ÄŃőÞÎ¦"]],encodeOffsets:[[[-161118,1901]],[[-163163,4018]]]},properties:{name:"基里巴斯",childNum:2,cp:[-158.2919921875,2.83203125]}},{geometry:{type:"MultiPolygon",coordinates:[["@@ƉöƠŰӂ°yƣҝı"],["@@ģÖȆĎġƣ"],["@@ƑŘÒ ĀƷ"],["@@UćƳvŞȞË"],["@@ÿ½ƁňƮŤÔǭ"],["@@IōýfWǘĠï"],["@@࢚ೃ]ࡍƚCŹҫ˽̿ӅkÉȗ΁Ŷ˓ÉBȝʽĐÚǓŻƋŵêÖǬ̋ˇţÖȇǕɣ̠ɖrÌńơAŇˤ˔ΖĿÜɞȌǳʜ«ѸʳCiä˜Ȣʢ·òĽĘĪȗɊĥӴϦфߖr˰ˆ"]],encodeOffsets:[[[129359,34021]],[[129264,35196]],[[129201,35565]],[[131140,35642]],[[131831,35634]],[[129558,38643]],[[131456,39551]]]},properties:{name:"韩国",childNum:7,cp:[127.79052734375,35.923828125]}},{geometry:{type:"MultiPolygon",coordinates:[["@@āYĉǀĔưƎǑÕƃ"],["@@٫SȧϨݵĚƌƎÚôŘǆȰϴиĆĠiȎÿvŭŚəƣȹȉˢ͢ڿ"]],encodeOffsets:[[[49434,30336]],[[49606,29228]]]},properties:{name:"科威特",childNum:2,cp:[47.48779296875,29.3154296875]}},{geometry:{type:"Polygon",coordinates:["@@ϤЋâȓÞDxödRŒŁĉΑÁȄʻĚ©Ɇ»ƠéϺȾĀżýȠƣ§û­sÑrcĖUĺJ`ÁlgŲEñAÃħĩYÉ·çŽŕOʉØǓMEe{çXå¿ă¯sI੊ջAµĵxù̀Ɂ¼ÝÎÿĒȷˆ˓ɚǕÄÕþšÜ£pÝP±ZƛĢƃêªfUıϸʹGû}ƟéoĪƷ¸·Ȏƙ¶å¯gÅÑ½ÙÝrÃjU­Jĥ­§ďOóƷƧAT­ÁqDÿ]j¬Ó¬Çv{|ɵđós_Ɓ_{[tãþŕxßµŅƋFÕ¬ûĞǩÐƳĕú¸mºCx¼lĊ¤ä°®¸l¼tɆpöYĠð@ňŀȚpĈDÒeȉŊNƄÙ¦Ƴ²ďÊȓʲËƴMȤ`Ǌ´ȊÛƊʽȦėİŃƢŭȒĉĒ§oęlƍÆšķJß]EauÁg§µëğȳé÷­JygK`eĀÿhę¾ǡƂNÇñóÓ³fóŧĻËQQšÿȷȁ¿eǑĔȢҺMŦñĶEȪ҈õ̎pƆQ¾חJīǠĺΠǝǪċßÿsXPºN²°ǼÆŠÜÆèzƂB¶IhËJw^ÐƔɒ͆Ǽ¸Č¶kĩÅQÃZ­pu[ƌ ĊFƌëpN²¢bPÝĒrʔGƠM¤ǱΪnªªªŔrRlIæđƸ¨Èu"],encodeOffsets:[[104579,22917]]},properties:{name:"老挝",childNum:1,cp:[103.88427734375,18.208984375]}},{geometry:{type:"Polygon",coordinates:["@@ϧ̙ʫPҐ঒ˠ͌΄z¯ƃƦÉäǯʳʝòï͇ñ¤ƕƓŹ"],encodeOffsets:[[36730,34235]]},properties:{name:"黎巴嫩",childNum:1,cp:[35.84716796875,33.8671875]}},{geometry:{type:"Polygon",coordinates:["@@àūìЭɛίʨƟʲĀ§òǑÒĳĀWƴÇ°ʓƻՑV˿|ȅ׵Ȫܻ϶१ࡰ࡝ԢǹȀȪ˜͞ʲȘȄÞʾ®°ƂÀÜʠ¨Hðê÷ʂĜɜǇŰգÿʍ̄ǗȒȘΨƢŉ"],encodeOffsets:[[-8690,7740]]},properties:{name:"利比里亚",childNum:1,cp:[-9.453125,6.44482421875]}},{geometry:{type:"Polygon",coordinates:["@@ʡˏĞտɏБɶࡥ@᳿@᳽Aေ࠽M@нủཤ↏Ⴒࡉϕٛ̓؟Ҽౙ˴ϯڞۑȦʑÅşĘɉخҫؠɢ͢ʠŕךƘϤġୢе߀ǬĪ͂ƄņżƀǠďֲƈȆǜ¨ŐǌǾŶƮüƎìǄöŮÌ~ºCªãİ@ŞLĬPÌǼŸÁƀsϼȟЊµѾĨཤѯѼ߷ᅀн۶їϢűӸȈͰЌƻܖǐʹо̦ࡠ̚Ҩeݺʥ`ʋƲı۾ǡؾsɮˡ"],encodeOffsets:[[25755,32415]]},properties:{name:"利比亚",childNum:1,cp:[17.23095703125,26.33984375]}},{geometry:{type:"Polygon",coordinates:["@@³ĕķŰƒȒZɫ"],encodeOffsets:[[-62356,14154]]},properties:{name:"圣卢西亚",childNum:1,cp:[-60.9833984375,13.90576171875]}},{geometry:{type:"MultiPolygon",coordinates:[["@@|ÙſŊń¯"],["@@ɪaϬίѠܣŪ×¦ʃϞܟY͙ȋЍލϑϧ~ƟŦȣ֪ũ଒ĦɵŪ݌ƜʾY̰˼ą͏ƚÁƎ"]],encodeOffsets:[[[81792,9268]],[[81902,10049]]]},properties:{name:"斯里兰卡",childNum:2,cp:[80.79443359375,7.896484375]}},{geometry:{type:"Polygon",coordinates:["@@ɉkɛ̓Ñęʭ͝˒ƛ˴ŗˆȦĚψӢȊÈŀĀŰàȪðĤlZ֨ёîȕĹ±Ŀŵőǿϛǧ"],encodeOffsets:[[29335,-30849]]},properties:{name:"莱索托",childNum:1,cp:[28.22216796875,-29.60595703125]}},{geometry:{type:"MultiPolygon",coordinates:[["@@µPǸˤƁ˳"],["@@Ù~m¦xʁßÉ¹ÅkƩXuĵkoϙçåx~Ս×jǠë¶ñĥédJwfépÏLµïŖHÐŠʸɏǀгJ۱ǚDǆƧ̞OǮO ɦĲ˶ńβüڔUþ_Ú³ÜNÜަđڂŒƖǓԀăްοCqÛ¡ĉ¥ÛW{qƼWâY`iƥţʹR]ÙķçŇ_ėwŗǛTŅMuyÃÙ«éiTiŪeÀĥǉ"]],encodeOffsets:[[[21461,56606]],[[26187,55440]]]},properties:{name:"立陶宛",childNum:2,cp:[23.83837890625,55.150390625]}},{geometry:{type:"Polygon",coordinates:["@@ţ̃ƍ½[}¿Q©R}nyZÝ`YĐɼ|¨¦ÐĠîĨYjNEMïz»È·ÊyǸõ"],encodeOffsets:[[6643,50994]]},properties:{name:"卢森堡",childNum:1,cp:[6.11572265625,49.80712890625]}},{geometry:{type:"Polygon",coordinates:["@@ӑ́ѱϫƍޯπӿĄƕǔځőʵÆԯÛÝMƕÔړV̓åÝU˵Ńɥırوքغۚź؞Փ̢ıؠɼ¹ԶIĄոžƌ­͘õ՜ˍȠÏθàȄÏŞYŤCÎÿɐħoTO«Ǉ̋Ɩl[ĥĬşĄ¯P¸ĻnÑT±­į"],encodeOffsets:[[28824,57491]]},properties:{name:"拉脱维亚",childNum:1,cp:[24.62451171875,56.86572265625]}},{geometry:{type:"Polygon",coordinates:["@@řŰƒ࢖Ɨ˲ϩ̦Տۄ̥ĘlǨþ®_˞@˒Ěڔ˫êFמƵTЋːǓĮ˟ŮåƄ¯ÆĕOċUïǨī±ǓcS͇ĔŹZå÷gFGł]fFƿËF¿\\ÕÀĥ£qÝĉÑġSí½·ėµÏÏNŭǁg]«"],encodeOffsets:[[28890,46542]]},properties:{name:"摩尔多瓦",childNum:1,cp:[28.37548828125,46.96484375]}},{geometry:{type:"MultiPolygon",coordinates:[["@@ĥƷǘ͠ñǧ"],["@@ŉkkŀĲÀƓ"],["@@Ͱ՝ʢඇȼչɱәǁƄŃ̂ȓÃƦ߷Ó˟ˉΧzփīο஭₵́గ͋ލϗ̥Ӎãճ˩ʫOছӚ̫אª٪ϧ६tϜǰӜʤƪԖ੎дǭ̔KˬǋϞ»ݬϊׄ°Тζ˄ȊĴïɌĐƮϪÜȰƽËǰŦǚϼʚƂǷMʆɔ͒Ħ¬\\ʝʞ̺ǆǇʬȈΆĥź¶ŨĊÈǺĻҔϞļάŏ̲Ūɲ̠˨̑"]],encodeOffsets:[[[51135,-17308]],[[49503,-13684]],[[50728,-12730]]]},properties:{name:"马达加斯加",childNum:3,cp:[46.87451171875,-18.82470703125]}},{geometry:{type:"MultiPolygon",coordinates:[["@@ōAɼìŭé"],["@@ƾǸöƩɳ"],["@@ĕ¥ŘŘñ"],["@@zĥƉǆŐß"],["@@ȩȴŘиύŚʝ"],["@@ĿƻǤêg"],["@@ƵĴɞÂʣ"],["@@Ûȣȡàú̚Ŝèȡ"],["@@˹Ɋùɠ͖ɩȿ"],["@@ѫ೑ƥཉâͻϖҕÿʓtʚ̵Ϯӊહؘ܇Ɣѵјҍţ^ʚŇÿÞҎÉ͒ƽ˶̇ނɜ֘όǨϼ¼ƿ͊ÓɒƘËɶÿUזϲ͆ǜǼŜࣀ҄ɠଔʜϬَƁÀČƱxˬfǰƝªɩŻ̩еұi̳ȷȋéȄ|ȟșFÿż|ɕۻĵƟƣɂr˄ɛ̯ȑuʃЗ˝LyſໝBGӁǟDǵBθ͙ɠƅ¨ÝtÇ@¯¸Ėy®£@÷SĉZ÷ÙCƳ@ɵ@ϡ@ʫAȃ̭ĿǩĕƥĦȹqs]ÛΗඳ౐ϩȚ©·ΦǧևƶØĪǟyËŎƋšȆË˭࣡Пԁ̓ƸӍ¶ٟ˴ȯȖޭƺঁКْ࣏ٿĔدɚЃцࡵИҗ֖ƿΆΆǌÇƦƹ²ɲʼz̸ȇņǽ̴H˶ūʨ॥ੈۣӺȨĥ^ňρłˣϼȖ]թˈùżȭ³ŤɆʻšǁŔʲȎɮê«ƅʀǧƪɫOǃ̈́ηźǷʾÀˎӻĔ࢑ࢪݫൎXѺӝƖŕǲǁÒǛĹڅͦŦɇýЫ˨॓ڜջɌχʚŅĦʉȈóŘԉͼʩϼ܃ƎćăʤȎƟɺޗԖޟxѵʖȭÂȪʀƑ̆љɌƳÙˏѕɟ̙װ૏ߜĳ[ɩʢF؜ʵբե̴œ̦ĭŽ˛ÍȱȶԓɄāǴϡʰĚϼ·ɨöCąȜčõȴě^Ǿаݛިإͼ͙ࢢȟƔȜˡ̦¹ƜĐĮȑŬɽҊ፺ƴġǧẘষᛠJFϚ๠WʢˉচگЌ߿ͦʓߊ͙ɶǾɸҊ̄ĴۢāּԁϪܕڔٻ¤Э̊ԡผәȖø"]],encodeOffsets:[[[-93884,19126]],[[-89026,20791]],[[-109058,22130]],[[-113220,25604]],[[-114746,25135]],[[-113766,26646]],[[-117934,28744]],[[-114895,29702]],[[-115871,29750]],[[-99477,26585]]]},properties:{name:"墨西哥",childNum:10,cp:[-101.9453125,23.630859375]}},{geometry:{type:"Polygon",coordinates:["@@аˏƖɇó͹ōI·ŹķġkʹǅwǵƱŷ¯©wԣeɉàȃ̂ÞԎƆ@¬ǔʂĎȐÑĒĶƠxB@Ɇ²ѼV"],encodeOffsets:[[22881,43330]]},properties:{name:"北马其顿",childNum:1,cp:[21.74658203125,41.58251953125]}},{geometry:{type:"Polygon",coordinates:["@@Nᅫħ՛ɹտ˕ǿ_ŃύÒ·ïෛÍ̑ʑؗÏϟŮѱWʏȑޣ̧ŝʍЉºʋɷÝʫʡV­ͅȍćΛȀǟăƫƿĐ˙ɇķª˭ɩɗӵȻϝȫ˩ԭ\\řMų©W¡ŃĥéNķºEd¤úD~¹ˌțƁçtõÐmoS±KÅnĵoɏMÇǗ̱ǔɵòˡɝaƆɓƐÏъˡfɤ̜ΡʴHȾȍЖ̏Àǫͫȍѩƶιˁȉʴ̹ǅǓƸĨǦAҌȵάǑ­ȇˊĀȰ·˦ǫɄ«̎ƨÁpjºɘԶìòƤŀ WюЋɄɬي£жîAĮl¢Ú°`ŵoẀKŸڊűƆĳńyȬyȾyȾyȼíظǙฮ̵᨜íظ³к{ȾuȒʴ@ˠ@ˌBی@ᝀ༷᣾ၭjʅϐəØƩௐѹŀσŕʵȤĭܺƀ"],encodeOffsets:[[4330,19603]]},properties:{name:"马里",childNum:1,cp:[-4.0224609375,17.56982421875]}},{geometry:{type:"Polygon",coordinates:["@@ŉíƀǸĿ"],encodeOffsets:[[14916,36714]]},properties:{name:"马耳他",childNum:1,cp:[14.458984375,35.900390625]}},{geometry:{type:"MultiPolygon",coordinates:[["@@Ã±ƤƤğı"],["@@¾ǳǅŬňÈ"],["@@sǥÿz·ȌƬ"],["@@¥ưŦŅÿ©"],["@@ÁģÁÊń"],["@@ĽũřC˼Đã"],["@@KƏɤ¦ē"],["@@ÑHĀĢmĩ"],["@@ÅćoŪǴǲĽɓ"],["@@ā¬¾ǘɃ"],["@@ǟƸɎC­Ƴ"],["@@ȚŉąũKĥƚÐÂ"],["@@lřčǒâ·"],["@@ZăĝɐĄƋ"],["@@·ċͅǻõǉi}]ÏxÌIJgµƁAçyÛÅÅş¯ǻM±ĳÀ£ÃRƛĉɗxǳΉ§ƃ˛қë̙¼ǕʏÑܹ̹ÏɒȑØб؜ۑȆթƦò¬ÅÏƝȍŋֵ̭ƏVȑ̲ԭӊե[ֻʀЛǮ٣Υ֧εύ¯ЃŝŽćբǮʼÈԖŔňȫf¼ФąjàĒđۂ̿ی§˧ÆUϖǅЮĠ@ǧǦďࡢŁŨŢҤ̍ƧӔ̉ʲ¶̵ťˏ˫ǣȯɚŖ˕ҽɳ̽ϑó˺ƛɫȟO¥̬șɹԜɗΗǽß̬ಬΙ঎ÚRƧŸqͨĭ͙ȉńǳ˾˨ŋƤǞ͗ˮĄŘϩƂĵǱŅǼÆʬȧǙÀƎŽȈYɣͱиŧфŶŬʨőƊUЈOĪźB¦wǌďĚǦúŴé̞ŀˌŪ¤b ޴łÛȘf͢œȀϚìŸĮƎǮϰųİĪȲ˘ʾpŤàØ°E|kjČQʄŢƖࠪԶԚƀƍŰcD¢ǝɶeÚâƸò¾ʚȆĖjŎÚČĚƀ¾Nϴ˥ȤՕżĚǖëôڋ­ԅķĭüǫ˓ɷǅ_ŏɹǅç͍Żā©ʃƪəťˋծǚԼVƃǻžɽηҰĹöğ˃۫،ćpɧǨɷϨQЌʄºƿ"]],encodeOffsets:[[[100539,10172]],[[100567,11216]],[[100920,12027]],[[100881,12191]],[[100420,12688]],[[100776,12901]],[[100675,13414]],[[97081,16199]],[[96745,16329]],[[99917,16644]],[[95940,19133]],[[95964,20028]],[[95736,20370]],[[95243,20403]],[[103567,22086]]]},properties:{name:"缅甸",childNum:15,cp:[96.65966796875,19.19775390625]}},{geometry:{type:"Polygon",coordinates:["@@Ϡʉ֢˯ʑÉTǳɳÑőŸ̽ϥ¾ʭݿ׈ĠæáŖmǈb|z^Ŕ`CĆ¬ĚÚ¬ĐÀìM­¢NTÄąŞV~p`®Sª]TªP|Crë"],encodeOffsets:[[19680,44493]]},properties:{name:"黑山共和国",childNum:1,cp:[19.390625,42.7060546875]}},{geometry:{type:"Polygon",coordinates:["@@ܷ˵ԛӉߧˋēcշkџ୵ƅݷʛҭȇįå×Å¡ËiНÂ@Ȁǋʵ£ʉ՛ɊлðΗÆƷ¸ˁʆåpé^͹ZӕÆε®đNџğ቙ȆۏÍѳҲ˫֬ǙðrȨՙÖ৑ԀؓúǫqŽCɁvţϏP҅Šơkǹˢ˸іIÎ£ÔĀØВÙŔÒÏ~ëfǿʀÑȂßþa¶clĹtóÙŎÍR¡ái­FǻƬçrγuÛ¢­áZſÌę¦QĈ¥ÈēhēÌˣêäŸȓìõøŊĴ³äRUĸD¬nòÞǐφǖâXroUĐzÐ~nÂŸ_â¤ĖØdSƼΆǆԐňº ɘĠǲÈVNØC®̜ƠʦCôRƎƎÒ»ǚī°I¶xÌÞVîWƌƣ॰¡Ĕ˫ɔǕ¼H`ǲ@ƴĝΊoҘòȾć֞eȈŵŶVȖƜΐĒȺʎ|ȚœÇ£ǡ˸ɸоҌˊɆˈࡺ̥ĨeǐMȪGÊY܂ɕǄ^ɀʔËH«cTĝµjȃĐģyŏࡠ͓ˢ¿ø`ânɶmરːۮƛŴ\\ǦVŘ_ȖĭČġĒ­øĪEʆGʈ¤ʙψɏĬ¯üeԼXǼÚu֞ċȔ¦ʀÝĲp̈́ŚŎªþ[մèΒĞǠsĞbĞŠ¢ÜÔĖżÞńÊņÆ؊ɢϐɖăɬǃøÄ_ƆSňKàtŌǪºèCŔǚµŎąܥ਷{ĹJğUćū¿ĩ±üɋʀƿĄræàƀÌðD¾_ŔIŜtĞJŠa¨aĲ}ǺŝÆ]Ζ˰ؘGÎļķÎÃĶŘÄՊчƾʕƻĳkïCūnţYƛrǡĆħt­[É¯×TËSƧXă\\ŷïWˣůǍÐĝC_[čBo{Ћvʝĉ̋ͷ`X¥³ѡɿѥËȱWƱƭ{şƿɃŷñáǟÙȋŏÅcҍÄ˽ÖğćĀó ʣJãfœcзבѾҫ­œ"],encodeOffsets:[[114564,44729]]},properties:{name:"蒙古",childNum:1,cp:[103.82080078125,46.85693359375]}},{geometry:{type:"Polygon",coordinates:["@@èĞ¦Ïō"],encodeOffsets:[[149250,15497]]},properties:{name:"北马里亚纳群岛",childNum:1,cp:[145.76806640625,15.19970703125]}},{geometry:{type:"Polygon",coordinates:["@@MˎÃȨfɜĥ¼఺ƽӌɇΈɏࣤŢĒࡂࡄÛƊŜАр֦ǷԄÔʈųƎʘӦĭఐÒƞࡏʄס;ڡz̒Əո᠂ࠒκүبŤŌơחʛҁʂЩ;χƮśƯº£ÞGÒZdlSʐ§ƚ©ÆU\\ÚƺĮǸȬĠ| ČĐࣈuzgǊƁǦǛɞħŢŅƌȝɈͷǤÇȆEĜƹߎȼЌ®ĐƖZŐEȈHȤQðkºFÊhżŊłCƞéþÑ`½Ī֤ŞͦťƚƸĂǐʊӒĳиȸۢɊƠüЌ̚ŰǓĿēĢÅǍуň֟ЧĀţť̇ŎCvख़ĶûÍ˗ňİÎʟȏͭũ֕ߵǋÍ®šٓҋ߃ɧݳйʱɇ҇ٵş¨wţ͍ōݿۍʣĤĚĵ§յɸ˩ʊ܁¢طÊµÖ˶Öŏ׷ǣۭƞu©ȭлӭၽ۷̷ћɒɛĘƺkƙӟEe҃YŹzñK"],encodeOffsets:[[32884,-27483]]},properties:{name:"莫桑比克",childNum:1,cp:[35.53857421875,-18.66259765625]}},{geometry:{type:"MultiPolygon",coordinates:[["@@ÃćĐŒƀ}Ƈ"],["@@ŷډṿL³ƦSk£Bĭгíً¤ɃɫэЌʯǙËƱȽűǅ¹oiʭŦ˛Ȱ̵φʯЦ̅ĨĥqγζׅĆٷǉЃ ǝ˝ěmƯá@ϖÔ˄ζઌƵबʧ̞ǬŴŝȠيȁΦǉeɇϞĹ¥ȝ_þČβพD६BϪBȖ@Ȗ@Ŷ@QŐOĘQŢSŢՠ·˚ĸưŖöƀĔĴà¾hƾx̌ŲNц@΄@Ҝ@Ŗ@ɮ@΄@Ɍ൞@޴@̼@ƾ@Ǡ@@Ī@Ǝ@ȌAȎ@ǖ@̪ἢኑۋ@ˋA˟@ʳ@ǔก̶ᨛǚอîطzȻzȽ´ЩĴŃŲƅ"]],encodeOffsets:[[[-16766,20180]],[[-5488,16674]]]},properties:{name:"毛里塔尼亚",childNum:2,cp:[-10.94287109375,21.01611328125]}},{geometry:{type:"Polygon",coordinates:["@@Ó~ĖÁ"],encodeOffsets:[[-63640,17143]]},properties:{name:"蒙特塞拉特",childNum:1,cp:[-62.1845703125,16.75244140625]}},{geometry:{type:"Polygon",coordinates:["@@˩¶ĈȲȮǎŔȇşɭ"],encodeOffsets:[[59035,-20976]]},properties:{name:"毛里求斯",childNum:1,cp:[57.55517578125,-20.23681640625]}},{geometry:{type:"Polygon",coordinates:["@@ŏFƕYYÍȻЋƺߍFěÈȅ͸ǣȞɇņƋĨšǜɝƂǥȃďࣇċğ{ȫĭǷÙƹV[ªÅ¨ƙTʏckÑYÝH¹¤ ưƭŜͽψʁЪʜ҂טŋƢاţЧՄƕËƷːŃĊʠ̬PѰҌ̔ƟóǐªΠÑɰ\\Ĥȸñʲ̴ʤĝƌ_QĮǻǔtì\\üďĒďžŷeÙǸࠀəĚƦ˚ȣȾёĈҩ¹ʍƔɕĮ« Ínī"],encodeOffsets:[[35799,-11856]]},properties:{name:"马拉维",childNum:1,cp:[34.2822265625,-13.26904296875]}},{geometry:{type:"MultiPolygon",coordinates:[["@@ßnnˤ²̑"],["@@û²Ėŝ"],["@@ȡa¸þƪÛ"],["@@ćW°ƺþµ¥ī"],["@@ÐęƥăćžǞ "],["@@ȪÏǎʹӀϡˌҷpྕ̼̑΀ܛ˭ŕrŏǰTƙʟIǷĵĻǼՉʺளࡼJ̲ӭ״ä´Ʊ̎ɫഢȋϪŤȮìŏΆ÷ĴǷưEÑЅŎőϊɪĺŇǐ ȒΖ"],["@@ЉƖӯջmƳŽȋঃǩQŇŋɕĊģͣɭɩˋѹԟcɽǕԭǖÁŐϻOʑĵěʝɧōשԃǁ܏نīʀúŎȢɛРܾ˕ǍƌȪӨ¹ȪȢDÌ̤ఎΚ޾ࣨŞ̊Ӹүƾ̘ÿ˚ɾƴäѓƸųҠȠưƈœːƺǄŘÏŘæܺନĎų¿ȃ˺̨Đ{ÄəˆƑìƋ¥̉ţįфƚĦǅƱÙå͊ČȰǵՆƯĕůʳŗշÙƇ̈́˛[ĻґŇʽþĹơ"],["@@½«aŨǚüFŋĿ«"]],encodeOffsets:[[[114063,2474]],[[106723,2798]],[[120714,4287]],[[102696,5422]],[[102245,6621]],[[104552,6393]],[[120397,4271]],[[119954,7341]]]},properties:{name:"马来西亚",childNum:8,cp:[109.45654296875,4.107421875]}},{geometry:{type:"Polygon",coordinates:["@@ݨƈϪɦ§Ɏȋ̋yͅșʋ|եν͋ϰስˍJᵥࡃFᙵ@ᲃ@šυĻȏƃÉƙë܍¬ܧǂċǒVȜƝŘōĐĻµ·ùmŋµŇŝíؓնͅӤǝ݆Ɵǆŉઆ˯ۨๆࡗಂʁؚ׭੐ֵިɀRфƈnĤ¸ǘĘEPǄMՌȬʠËҔ̱ᅌfሼSҺ͹ਨ»Ҫſೠƶࢴǒ"],encodeOffsets:[[23942,-18064]]},properties:{name:"纳米比亚",childNum:1,cp:[18.49658203125,-22.955078125]}},{geometry:{type:"MultiPolygon",coordinates:[["@@č_@ĈĎç"],["@@ņ]eƝŹsŷȼƤ²ný"],["@@˟ƎÚƂĴőêȰYĒΫ"],["@@ȞٌХЄл੾ەxțǑ­ʱĶಓ߼ُںğ˶Ťĕ"]],encodeOffsets:[[[171566,-23166]],[[172044,-21944]],[[171419,-21668]],[[168144,-20731]]]},properties:{name:"新喀里多尼亚",childNum:4,cp:[166.10009765625,-21.3896484375]}},{geometry:{type:"Polygon",coordinates:["@@ǠఉΦӋgȅ͂͗ȓωɕᠵङঃޛଵ¶ȷĎίƭEēϝȅǻĹǇȝ౉ɺЛȷ¥UӍϫΏVϛðʛŸ̡Țŝƕ^ؙ˱ɅĜщҨīJ̃Đ̅ĜÛ[­mĵáӝqѡɳǙֵʧȵ©۫ڑׂσƋp˙ˇΌźƂķȢґÇӟ΀D˖ǲMө̄ǁɦɰǿɄ®ΐؘÐ̒ʒොÎ¸ðώÑ`ń˖ȀɺրĨ՜Mᅬഞ˰൪୨␤ᕨౚ˳ؠһٜ̈́"],encodeOffsets:[[15339,23549]]},properties:{name:"尼日尔",childNum:1,cp:[8.06396484375,17.607421875]}},{geometry:{type:"MultiPolygon",coordinates:[["@@ƇoòŎÖĝ"],["@@Ɇěؚ˲Ɩ]Şվ͑ϜïΐUӎϬVȸ¦МొɹǈȞٮ̀ƮF˜ϑŎƯĄϹtƓô÷ȸ·Ďŭ¹փ̛ȋ¹gïGÙ÷ÑǉɡƏɥķηŧœÑЇɧř­ĻÍΕqËŉųȻÓýƧßŗǻ׋ǧȳÕĂŽǡƑÝ¿{ǉͭɑ¡hÕȬßẩʊǉƻĵAó^ilc oėÙƏı­go¯ġÅıƛħЯсʁܷǙˑɿƶº̋ձħŊȷěǩƚàǝșĻŽˬþ̏ȑ­ŖsœʓPļćŻǟ¼͏ʸŝʤÃƸþręCŤƴŘƍÓƽŎɎàŇĄǷÇɃ͔ί˔ࠗâɢƞʋÕāŅՇw|ȎdÈl¦k¼kæUńôK˞`xdlBçݨÔ֪ɨɾאɸȎͼŀRÀǄßƌʼk±´ŵǾFĖÂŐÄÎÆc٤ʨȶǚֶѢɴӞrĶâ®nÜ\\ڶǵъҧ"]],encodeOffsets:[[[7476,4525]],[[6968,13423]]]},properties:{name:"尼日利亚",childNum:2,cp:[8.66162109375,9.07568359375]}},{geometry:{type:"Polygon",coordinates:["@@Ñōǥ§׷ʼɳč֥ȴƇŃྦྷེîàƊĹò¶ɺZ¦`úǺæ\\ÂJfz«˔OÂX¢tbľXȜg^ĀŊòĂ¾¤Z´íǔķPhNLdE²¤¨ЊˢŲɪǖȒǸűĞwݸȲĊĎĸɐ_wqÁĳÃöÍÛĪÝĤ΃ȋ˿Ż֩²ރĭ¢ɈƉǱØБñ½Ǖľ¬Ƶǹ˻Ȏ͏"],encodeOffsets:[[-85649,11180]]},properties:{name:"尼加拉瓜",childNum:1,cp:[-85.41357421875,12.8720703125]}},{geometry:{type:"Polygon",coordinates:["@@ũVĪĚį"],encodeOffsets:[[-173878,-19541]]},properties:{name:"纽埃",childNum:1,cp:[-169.87548828125,-19.0244140625]}},{geometry:{type:"MultiPolygon",coordinates:[["@@£ħīɪƐƁ"],["@@˗ƭЁçŎ݂R"],["@@łù́¼ɀ~"],["@@ƩƪŮ@ĥ"],["@@ٷżʜ²ѾĿɧŀƮ\\ȣǚҊоʊՎʖhЄʸѾŚو͎ƃƑՍ˓ŹʌëʽʥÜħ܏Ƒɀ̑ËʫɭįǆĿ¯ŻʥrĒ͆ӧłƷǆگé"],["@@ŕLͤɍ©"]],encodeOffsets:[[[-69842,12437]],[[4328,52620]],[[4044,52982]],[[5004,54345]],[[4328,52620]],[[5454,54668]]]},properties:{name:"荷兰",childNum:6,cp:[5.0752777,52.358465]}},{geometry:{type:"MultiPolygon",coordinates:[["@@Hıōɒņş"],["@@ƅCÀĤĆğ"],["@@ʣÜɨ¶|ő"],["@@ƷhВİlč˅"],["@@ЭJʀĞǮħ"],["@@ů­ȴɂăǓ"],["@@ȌܱȇÒƒӔĖ"],["@@^˛ۉ Ր˲Ɯµ"],["@@ӌˆǆȱҙȗ෽ǱॾΦÐάӆɒʍح"],["@@тù­ʵϳAͽƷɭ¶ǈʔ̠hŤǸ"],["@@ǅ{ÎŜĸğ"],["@@˃Yzńʘ`Mŉ"],["@@̒¡ɯǗҥȭջiȀǮ˚\\Ϫϴļƫ"],["@@Ȫŝ΁ǄƘ¥"],["@@ϥɡǿƌԘƠÎÉ"],["@@ʩIÀƼȪƱ"],["@@ԥɱЁu̩Ţ௒Ɔ"],["@@QȵֱĈýǟחœΟɵĵžЦʞǇǖ୧ͦԵƃԏRϟȉ˗םڳͫࣳǴѽƁލÒۉҮѷ¹@ơϋIы_ȚƟͅбඕǘ͗ӷӻŜғǫտϿɶ̷ࠗӅ¼Ʒ߅ƩÁۣ۟؁άįÂʓƱƅٍ¼ΉÙԯ͹ƧʯʮࡋŭӃ،̳ƣʕ΋µʚҩđ˿گѝİʫŽ̧ƟaéńҭŮȩӤΓى˱§ʇżČšఫۛঋķŃńʋ­ÎƔߟɖŵϜҚĕɞŊɝ£ǭŬÀǜ϶ȼਯ͓ÌͶȘŲʦ«ώƂУԴЬȌPǩЀ̠۽ƓࡍקºϘО͹èůȬіȰͻıŅÈě͸๨ĔɖǃDŜӄĴɑøĆŔɧɧӕľǻŽ޳́ðĕȶ˰¬·ȌDƘࣰù׸è௵ÈĽȊ٠ɎƦÉк¸Ħ¼ҳ»ǼǠદĩĞюĊ઻¥ǦǬՌƚѼOѮȵϹˆВƲɱƀǺĒҺOhőҔƒ˘ȝتÐƎժƲǏĀʂĖųͣŅjŵ݉ɏЧǎ࠾ײߪ˜ĠÎ˱¹ǌȆ֜Ǡ̊ã΂ȬлŽʃĂҰԼ̀°ȽŦੂǔޓÇþΈؼźʵĦϨǴ઴êࠉÌѪʮՎȏĈƢϋæ²Ǝϗď±ŪˮƐЦqʱĶ׊ƈʮ̇ĝμଌĠ࢏ĚೲԾƄ˂րœʧžӪɎѲåָ̛ѪɩԥζǮɆkįͤҔqɨľҖƭԳͰߺ̨Ģ֚͟sȊࣼдƁŀͨƦԜƃцT؋سലۦÛѽͼĐǎȜ̦¼ʽȚ̌Ũڜĭгʟ̾SáΛ՜Ԭހǻ˞²݈έֱű௫ڠīǈȽʞUŲŨǆŝψ¾"],["@@ҢūҩɣÖɬĞ"],["@@ߞ˴Aŕߛǝ"],["@@̝ļ˔HŃ"],["@@μeɌ̉ॸß˭ƃຈȡጇЩŌʊํÿ،϶஥Ұ୊İ"],["@@ܮͅ࠵ȘӁτ׊ʕ"],["@@ղMີ«ԺĬҊ±"],["@@ࢢęƓΏؔȀʀ˽৺ǥ׼¨ٺ̭෱ŋ᠏ၽይվ̵ɰטbȎƐᄨĞĳĎᛗŃ·ɎՄmఐ˒ਂүŒˬƈଫǅʢ̱ş˝ú§ʳѷť߯຅״ߪȩ̒щb̷ŻЃ͠Èɺ̄åҬĔӮěOĒஎîũਇũٺJגȗӂϢเۓѷצΰ̰Ҕţ"],["@@࢙UᅮĠओĉ"],["@@ୢǙƊ̒ҶÔĚʋশƤᓂǛ˴Ʌವч෋ǫ࢙Ʋ၉[؛üϡĐठƂႷXЁƚԎĜ߃Ěபṳ͞঒ȓ"]],encodeOffsets:[[[5208,61755]],[[5078,62551]],[[8298,64858]],[[8675,65196]],[[11501,66423]],[[13284,69504]],[[14206,69904]],[[15573,70598]],[[16139,70207]],[[17924,71267]],[[30676,71472]],[[21278,71772]],[[19718,71749]],[[20242,71902]],[[24183,72243]],[[24595,72261]],[[24004,72516]],[[31611,71459]],[[26201,72850]],[[-9168,72540]],[[19681,76177]],[[22127,80482]],[[11521,80498]],[[29745,80806]],[[17190,81825]],[[33307,82042]],[[21400,82176]]]},properties:{name:"挪威",childNum:27,cp:[12.33837890625,69.25146484375]}},{geometry:{type:"Polygon",coordinates:["@@R¡ĲƃķJç¥ś³ſyYקmɫǐ˃ĵ׍ǶǳµõǂáVɵĉčtэɲ¨BĦ[¤Ň¦ɁäśÂəĩçfǏ¼ĕR¿i]ãҳŰmÞÞ¡\\ƫ_ƏîƧĞÙ£Z]¡qOֹЀӥ˄Í`m{a»Nÿ°ĉ´ŽĜgľĘrÂÐpļCĘÀŰîƄŮƜɪȂzjº¸Pǰşà®ƌȴȌ¦Ǵqǂƪə޼ϛάί̒ĆðuâvÁ¢ĵ®Ŀӊ̏¸MǶ´¶MUBióģ³øoǖaɤDæµæíæũ½cÎr^Ű¸æýĢ¿äĞĺ¼dÜOzq£Ƹ­ðĸ÷Ųa˨MȨÒȾ_Łأ"],encodeOffsets:[[90096,27786]]},properties:{name:"尼泊尔",childNum:1,cp:[84.10693359375,28.3740234375]}},{geometry:{type:"MultiPolygon",coordinates:[["@@§ÓėØƀC"],["@@lë̓ǲɨƔiǝ"],["@@ďÑǔŗ׿ǁɼ̐cǨƠJǄƕ"],["@@ĳŉ¸ð¼"],["@@ǡŁuĘĝoƶȫƳûĩäØƺʗzʂĚ͜o"],["@@őµƸǪ¥ų"],["@@ۦ̖ů̇ǜɺʬsɛȇ˨Śʧ˙\\ȭǘÏࢽਡԇʝĤéǩğƖjĨƩɢ±OǕӁmĮƷşɕƔŨǍ߃̱āկūBĪŅ΍էÚƽ̙Ï؛ԡ́Í߭`ǋȲ̅GʫǼƝý՗ƺȬɡëÌŸȍÙIŐѠĴǥÈǌĪɍWRÚƪ¼¥ĆʊċØĶǡƖȞÃĴǺŖ²ŋfǀʪƨĺÍ©ƐԎЂ؆İSŘ֐Ȭ΀̼ƀeýØʸ`óêŢ¢ÎËȢʾƕ`ǄʈȢƢ֔ϲɌǈӺтΰʮAǯqyĽʆƱńα"],["@@Ǔ¾ŞżǛ"],["@@ƮútđՌǑƁƬ®ɔҏƹW΀їãҁӞŷðǳƂJç؎ʾɑ˰އঔ̉آςѸŗɥܟʕƝÉѣ͕Ɣϑůř˩ƞıɣПܟࢱ֡ͭŧǌʅM_ǜȗÇѸ֘ü˨ĉƦūƎࣙϊƝǆæưҮƪǘƬǢݜńü˽צŰįǐŌŭŠʱDʋϘǴğQ̦ĿÜ]ïǻńĹǶFğȾʹĥաۊǶȊȿƳ¿¶ǓȦØǄСҼ˴vãęʲͱ"]],encodeOffsets:[[[173239,-53757]],[[170211,-51979]],[[172181,-47986]],[[170987,-46264]],[[-180405,-44790]],[[178089,-41844]],[[177271,-42269]],[[179757,-37149]],[[177428,-35773]]]},properties:{name:"新西兰",childNum:9,cp:[.8447265625,-43.4990234375]}},{geometry:{type:"MultiPolygon",coordinates:[["@@åO@ńȲ˾ÈƏȓʡ"],["@@ɄёОЩ൲ϵրܙͦŵmʏέ؅Ѝ͕ΟץɝdƦÙSʵ́ŭӇĈ։ࠣɛωٟݻŧȉɏhɝǯʁ࠷ϩȵѱĥछጊᠾ࠾֐၌ϣמ\\˦˨چÁĺѢĺ³ŸƕxՀǤðÂǷ˘Ȭ"],["@@Źn̚ñ`˨ʎĩי"]],encodeOffsets:[[[60132,20704]],[[57742,25579]],[[57650,26267]]]},properties:{name:"阿曼",childNum:3,cp:[55.90087890625,21.5]}},{geometry:{type:"Polygon",coordinates:["@@MΥ٫֕ۖߕÄ޽ںՓe˂ȕDƳ¦Ȟ_d[iűĩĒǖJ̆ƷáśīÉ_˧şĕ·ãÑ{­_©ÒǃZ·¹ǡaÙüÕ`NĻÙŇÇ@ˣ̻ġíaéÏR¹»ÝËΫƅГݽһɷ§¯ƍ̍Ʊƙ·ŉeí˟ý̛ʻįÛIęº¿Ƙȍôƅù§¥āŻŹȅ˟ʣć̵ըɋǛ£οƐǟ¼iľI´HÄjàHȱȎ̡ÖƟÐővÍuKÚšA}½¯Dgååa§O³Pão¬R°eɏ¿ǅËʗĹõNç¬Ù¢īDǫMīBËdÇ[ëhuC¡¦kMg_WuGʧȡFěaĉmıÑ£ēɋŲǇų̟̂řӨϿĖG̬̿͂ǉĝ˰£ළřıĻԋȀх¥ÃţྥqjbzêrʤĜSºNdÎªbnvŸ|Ɯ¼ʄŤĪWÔŒܚƦdƠ²xR^QǖÂ Gx²»{RΏZ~҈iͶܹ̂ا࠸ıĸǅǐ͌ğٶǿЎĹࣼöҀėʜŸל^ॖʴĮ߀МϮԼyʈĠƅƌӨʠξ@ɬƙΈʬиɔӲٔɦ̹؀ٞ¯ͮĆːŉƊվո£̨͗и¢âࡢԨ۸Ŋ"],encodeOffsets:[[74844,37750]]},properties:{name:"巴基斯坦",childNum:1,cp:[68.0888671875,30.3095703125]}},{geometry:{type:"MultiPolygon",coordinates:[["@@ȽĸŜê|łʏ"],["@@¿ƌÞr]ƽ"],["@@ēƇʂѵ˽ͿȉŐśЁѩۨŒ~Ūʜ͎Ʌ˵̨ĽċƧĞUųĕɰӓ̴ΝwƯĳŇǱÆ׫͍Bŗϔӛսɱȟ¨ƍԼǡɱȣĄȉΔγ¶ÛĮϋVƽÙ[ƧůɢƔĮbUŪ½ĘÄżĤ¯ØĉÆ·H@͜^jX|~`ºlƂïäÐÂ­ŊāǿŶc³ƇƖąʢnĩƶҐ̟ѢĚװ˔Ҧ͜శ̥תӝ"]],encodeOffsets:[[[-83561,7509]],[[-80791,8473]],[[-79231,8867]]]},properties:{name:"巴拿马",childNum:3,cp:[-80.111328125,8.41259765625]}},{geometry:{type:"Polygon",coordinates:["@@ԷσȕŗȳÏLŃo{iij{sªÖë°] {WýƶЃŶħgRI«°ñĊÅŐƏĆġHŃĵũĳũۤĉǖбۼ^ȊŘØͼ˺|^Èty©m­MÝଢ଼À~êß¸¦OªFÐbżÄĘ¬ĸEƒkĄFݦಧʙͅāګǠУЩՁ]ƗǞɯȽͻǢя̾ǃǃřXƓԓҷk¡ľşVÑ@@AÙÉĉÛƕ­¦ʋĽǹЯśޙ֎Ǐ͚޹Ӱ੕юୁڒίњͳɠω٪İºδԝ࡮ˏʐÉͬ΍͂đϜϙغӛఈԫڀԯࣈ७ײmƴȞ¤Ǧϡߺ¬̆پۜƮĞæǁ¦ˡeq³őv«i¹b¥JĎEùŃ·T°Cø ĄĘ¸^ÚĎ¿Ĳ±¢}ðRÖZ¼¾^ŋă²×ÎóÀ{æAĢl¾j²^Môf´¤ƨĔ˂ʬܐĖÙ͊Ь঴ΚӸΰѦԐŴӎZƄwS̤ƑƴÇƈÏ¤ÑLʊgǞü˰űlt­ÂÚ¾»¤¡¢¿êɩ¨ÝǊ·ÊÍºwÄÑǖ©Ƙύʦřϓƒ½¤¯؈MȠØªÄ¼Ä¾¨\\ǌÑƌġǚlêÊòh¸hɚŕ¶ÁÔYʀő¦¯äÌe՛ऻǤíEÄhJ}¶ÖƗŴģ¨×KÅu£KÙ ġ]ß°u¬½ŁcǅRß]ƥƩܷŻΉȳąĭīśĝùµŏw±yýљƵʡăuÍĊ̱"],encodeOffsets:[[-74892,-6621]]},properties:{name:"秘鲁",childNum:1,cp:[-75.01025390625,-9.197265625]}},{geometry:{type:"MultiPolygon",coordinates:[["@@έƽ̀ɚîÛ"],["@@ɂŕĭÏΗêʄļ"],["@@őYŃȼȎÞɠśȗƣ"],["@@ōýbĦĬg"],["@@©Û·ôržêfFƻ"],["@@ËoKľØč"],["@@šUWĀźé"],["@@éœķöǢ"],["@@ƾĤ˙Ƒ̙Ȑģþɿo̵ŔŽXίͧ͝Eҗ̩ࡰŕÏʷӕǪȋâУˑ͉ĩЄʯǍ׷̜œƠýӶȆ͸ғΠơSďͳʛʘɅƝ©ǊƧЉہƫfȚˎض֘ǲŜɸ͒ɨΒɩ¥͑ͰƲǨ̶˜ŚΆɮēÌƄʐWwخ҈λ"],["@@ÉÔèȄĊɑħ"],["@@Ѕǁƽrĳǌ̚ˌƌrȮŏdȩ"],["@@ǏǢƠ˒pѳ"],["@@Ļ}¸ƺƀÏûë"],["@@ģ¡AƶƐŐ©ɣ"],["@@ŗIŅɖʯƎƋ˸ÒŜ͔ŀΖƔ͐ɰĜɈÏ¶ţͿޓWɑƞ˩ǃǫ"],["@@`Ѥո઴ܽʯɫˣ֭"],["@@¸ŏáBjŎ"],["@@ýÓŎ̄༾๜èиȺ˺u̡ƈϟˉơƫɡ·ŧ̅ևऽۇ"],["@@űč´Ŏþ"],["@@̘|ĆƉ[ΧɊБŁıŻƬ˭ȷŖLԨĽƲǻīԦȴǉ"],["@@ĿMĻưŴlĈǍ"],["@@˼g´ŻɜĂȽˇʟƓۇ͇Ų৖ƿǰĨϾɽ"],["@@ÿYëɚƦFǵ"],["@@ņ¬òǩʯGĿʖǸŏ"],["@@șŪƲ¨Ƶ"],["@@äǥǺŉԇè̙ƌǁхĄǕǒįǼÞǨң͚ŵΖߐ"],["@@˘ˑJǵӑ϶ˇʓâքЖʝ"],["@@ãȽùȎàɢŦ°§ʡ"],["@@HñƁʸźȅ"],["@@ðŷ·΀˘ɇ"],["@@мːʧdбū˳Ɓå˃ʖɫքʿȲÀĖʮ"],["@@ǚÝġɑƥľîǲ"],["@@ƭčŗŎƾΐǊǧÁȧ"],["@@č̋ÿ͐ǎ"],["@@شˏǌĞƆĲyħڙ̰ґ͑߃ґɃXɛǷ́ʮӳËŽŜ΍ϐȧÜÈóŶάƜʴŉƘοǐðnȎиȋSīɍÛɨ̓ƃ̜ÙéϿƵļÒȐՙņŭͮӋϺŃkǘЭÉǛȉ˞ԉΖɵăƁǋȽ~ɉǤǟãi͒ʲʰfŸ̛ȤJͯű{ǁ˸Ɨ¶ʹ୼¶ÒˢɻǬÀU౺ȰܶтĜ"],["@@ă«ĲƘmī"],["@@TùſîŬL"]],encodeOffsets:[[[123137,5383]],[[124068,6222]],[[125024,6583]],[[125888,7587]],[[119890,8073]],[[120172,8412]],[[127803,9363]],[[126667,9460]],[[129031,9545]],[[129085,10001]],[[127585,10023]],[[128707,10153]],[[122795,10738]],[[125594,10725]],[[126087,9282]],[[126332,9677]],[[126728,11555]],[[120127,8643]],[[122739,11802]],[[127565,11616]],[[127600,11769]],[[125437,11894]],[[122920,11985]],[[122983,12460]],[[125599,12605]],[[128246,12829]],[[126686,12583]],[[125025,12652]],[[126746,12753]],[[126241,13162]],[[123602,13803]],[[124841,13866]],[[127339,13960]],[[124963,15366]],[[124008,19063]],[[124848,19349]],[[124438,19827]]]},properties:{name:"菲律宾",childNum:37,cp:[121.77587890625,12.21630859375]}},{geometry:{type:"Polygon",coordinates:["@@áŦŔƾ±ˣ"],encodeOffsets:[[137826,7560]]},properties:{name:"帕劳",childNum:1,cp:[134.583984375,7.5478515625]}},{geometry:{type:"MultiPolygon",coordinates:[["@@ȌġǧɡĨéǌ˨ŷ"],["@@ƅÁćÞɎ["],["@@]ßĉĨ"],["@@ǺÂÅȧɫĒƷ͐ʰʻ"],["@@ɔÑĘȿϩÔöÑƨü\\"],["@@ȡŎĊžĤµtȕ"],["@@˒ġ^ŝϝǘĮ¨"],["@@dÑĳʀĦĘU˅"],["@@ɝĪɔoJù"],["@@ȵǘ\\Ŕɖĳ{Ƿ"],["@@ȧƧ̿ŢšΎϋ̈́}Ф̬Ƨ̼ѱ̘ȡŔʳ"],["@@ƝŀłĮȭ"],["@@ę˔üĆĂǡãǷ"],["@@ŕ¸Ħņpƽ"],["@@ǜìʐŅ¯Й̯ɅƆʁÇďǯę̍Zʉً̯˿ۏwɩǲʃٗϔĂǔުĥЈ¼ŌÜņμä·ćȧĢǷ׼ÞΪФ̂Þßֶ˔ă"],["@@qóđłĄ¬ù"],["@@AᇴħƔĨͦCᲘ@ǌྴׯԖġҶ̽ΊiԠѯȺζοkӣ໒ջȢɏ̇؏·ƑħȤҙ޾؍ĶϙǢşŐ̙ԬhÄϹؼǅȿıĨǧࠌȇ͹Ñǜǯ˝ŗʫÞəȌအʄكִ­ˢ˩Ğԇܾࢷɲġƞ̓Ä̯ǅЧʠʌНĝí˅zĄǙࣷķƩżşyɦƣ˖r˂ŇɠʍUǗ؁̭ΕƄअ©ƁĒ"],["@@ÕÛŷǒÑш͛Ҧ৳وˑøäƔ২֭ࠠܕĬȷƕͻ"],["@@ɫBǡƾɠøǞïPǇ"],["@@̶ĉșĻևuĠȠΌ\\"],["@@ȁèĲƺǙ"]],encodeOffsets:[[[157221,-11751]],[[157984,-11634]],[[154521,-10818]],[[154707,-10260]],[[154142,-9570]],[[153954,-9721]],[[156295,-9174]],[[154734,-8943]],[[147033,-8685]],[[151579,-5966]],[[159701,-6847]],[[150709,-5562]],[[158359,-5563]],[[149524,-4839]],[[155562,-4399]],[[156335,-3208]],[[144360,-9337]],[[156637,-4870]],[[154048,-2725]],[[150598,-2007]],[[153360,-1590]]]},properties:{name:"巴布亚新几内亚",childNum:21,cp:[148.41015625,-6.4912109375]}},{geometry:{type:"Polygon",coordinates:["@@βছثНВȷ¡ѭºǩδοċÁĀɹıķɕ֥ГˣʗµÉX¯ºŉX·uĽŢ÷ʷQÅRϟņ͋ǞҹNǯēыÐʱǡʧpdƘ˧ȎʗǕˇĤɩ̲҅ƀŹÁȹŨÚǆʋ«҇ƢĠǅ̍œέ˒ǬŴřèɱ࡛͸UŅñqñEJZĔŘòy˸{zƱ¼]jzêŗǤŴȾÓƘÃzg`Ò¦ĈėİɕŘĿĄV°żĀÚâþDdDÊŽϒ˘ùsƸ̅ņဌ˸̾ɜ๜ʆμŻ˕¼ʹ̿٤øԖ࿮»ӂSN¶ÐKêoexIêcĦòìµǟ"],encodeOffsets:[[24049,55235]]},properties:{name:"波兰",childNum:1,cp:[19.11279296875,51.9560546875]}},{geometry:{type:"MultiPolygon",coordinates:[["@@ūɸGŋw"],["@@тÁPś̍ɥ਍jÉ̶ĘŔࡼ¯"]],encodeOffsets:[[[-66995,18541]],[[-67716,18888]]]},properties:{name:"波多黎各",childNum:2,cp:[-66.27880859375,18.2373046875]}},{geometry:{type:"Polygon",coordinates:["@@ƈȝϛĳЕЃ¡ܗ̯ŋۣԃߋ̉ơӗ͢ĻӴϯ˯˅ߕqϥуɝĆɅŕ̇ȲΉɕĲ˓ôǾŴџ¢̈́άФň͕ĴȮО£ȨӯȚŗťɵ͞ѸϤऌϐوېǲȎȥࠀťŠȂȳ݆͊῭͒͠ǚҨ˾ęLŭɾǫ"],encodeOffsets:[[133660,43557]]},properties:{name:"朝鲜",childNum:1,cp:[127.52490234375,40.3623046875]}},{geometry:{type:"MultiPolygon",coordinates:[["@@мġ˙ăǩĖĐ"],["@@ϼGQÕҙAģŌǔ«"],["@@è͝GÿĢͶÇ"],["@@ǛÖŨ´ħ"],["@@ʻļɒpªū"],["@@ũYlĒľ÷"],["@@έƣٙĮͳõƸͰÉࡠǴmŋĀΏÏǬȖøȖ˨́˯ȃĻĎĘҒҌٸŸ՘ÏߒōÆĢƪіǒĨ˙ؾlɎŮѺÜɧˤş׹ѭĲ֓ȇƧŘũáȉţĭΗiҎԗ̃ԉȦɵŰNУϭң"]],encodeOffsets:[[[-17603,33658]],[[-26264,38750]],[[-28822,39376]],[[-29328,39450]],[[-27725,39571]],[[-31884,40353]],[[-7583,38072]]]},properties:{name:"葡萄牙",childNum:7,cp:[-8.7440694,39.9251454]}},{geometry:{type:"Polygon",coordinates:["@@lÕ\\±«{p¥pǉÂîʵĥڧYʻলŷ˞ƺ¬_ïĚñ²_ǖ@ŤwĄđNđňƃâޅjº¹`ė@Õxï¤ä[üYĨhĊp̜ƊƼõÎÍňÛɑŽۅĉřǳIţaίʭɋͥǝȓʑßq¹ËµFåËåµÙCƋúǳHɭțนɾνĲpÂͬМ˾ȨɈ͊Ӣɑ˴ଫӘףЀߕȢȳǜ׵ЌΓӎƃƤƙöíºB|sx̾ঘBцѦޘเ̈ޖVވѿj̅"],encodeOffsets:[[-59555,-20648]]},properties:{name:"巴拉圭",childNum:1,cp:[-58.44580078125,-23.419921875]}},{geometry:{type:"MultiPolygon",coordinates:[["@@đëì]~ɼɘ D_ƫȝ"],["@@ÐȠɆŮÛÊ×lÏkkNOdÔȺ°Ƭ°ĺņØĤkêi`æ£ÊKjƃķّӏģ"]],encodeOffsets:[[[35173,32044]],[[35718,32121]]]},properties:{name:"巴勒斯坦",childNum:2,cp:[34.88525390625,31.8720703125]}},{geometry:{type:"MultiPolygon",coordinates:[["@@ŨIĿƅŊȥE³ƞɌ¶Ɨ"],["@@°£Ə¢ĠB"],["@@ǒʳóĢŔ"],["@@ËÈÖIć"],["@@ŧemŎƴG]ğ"]],encodeOffsets:[[[-152905,-18114]],[[-146883,-17018]],[[-142360,-9927]],[[-143437,-9652]],[[-143434,-9124]]]},properties:{name:"法属波利尼西亚",childNum:5,cp:[-144.23095703125,-13.3291015625]}},{geometry:{type:"Polygon",coordinates:["@@÷iíkÏ@³RlÓì©Ģ¼XýіȾӨɒƠʀȿ·ͅľЅƱ͓Ƈ½"],encodeOffsets:[[52499,25198]]},properties:{name:"卡塔尔",childNum:1,cp:[51.18212890625,25.359375]}},{geometry:{type:"Polygon",coordinates:["@@ĘēŒ¯˲©MÎĦiˢĨƲbƐ£ŚġůΕёï Ǿǡ³ʱধ̧~˳Ǹϫ˵ŮܷƇ׿˱ᓝƐ§ĨƈŊ˗ƈaVǋƾºĘÆlæM^Yáŧ²ū}ųīěgƷŀɯħäƍCvP¶HàNZjƧøĞƲl՗ɴgʀ]R[SeUeE³ÑøȇĘįŒrȒĘŬĨ̤݆ਈ݄ψƮºìæÂEǤāȄLߚÃʹǧТƾȌlȂɈtÖÒ¤zúŘvƪ~̦ėՐۃϪ̥Ƙ˱Ƒ࢕Śů"],encodeOffsets:[[28890,46542]]},properties:{name:"罗马尼亚",childNum:1,cp:[24.97412109375,45.9658203125]}},{geometry:{type:"MultiPolygon",coordinates:[["@@ýÎɚbƛï"],["@@̢µջ˯˝ɑ}ƱāǦظՄ"],["@@ֻ˝ɋ[ٓӕ̊Ϟ՜̶ƂŎķɤjШȒtŭȧ"],["@@ȭ£ѠήӺƾܫӇ"],["@@ɻËӆ˂ʉȵ"],["@@ǗcǶ̒]˭"],["@@ѱɕŻ¬qǢϲĒΖ̸ƧЁ"],["@@ȥØǬŊĤeéƻ"],["@@ӂறƙ݉ŦϛѢଋݮൣ֑ԠˇÀՃħѿृa˫ֈߋɦĂ͡ů˧űѾףŢсڃȷ҄Ǫׄ×ϔǾΨ˅ئɴیÛࢾŠӼПќ½ҌǐѪҞˌƀ͒¡ưϖ̷͔ΪĨ"],["@@Ļƣ˹~϶Ŧ"],["@@ɠ·С̵ɑǮȕé̂΀̨ĕ"],["@@۲ǙдIɐƿşʷGÏðŕԇFࡹಉÊ̶ϲҞÖ͊ʖ¶O̥ʟʹáǌ ˢ"],["@@IũݥԎѲdyū͸˛"],["@@ĵǒĚÛš"],["@@ƏÿʒьھǦ˯ࠗʁ"],["@@ǣȿƤʌ"],["@@̳ÀűƾӘ±±ǋ"],["@@ަƻƲǩԄĹƅɔÖӝȒ܆ɫ¿Ïሴҝ{ˑ̺äŸóÙ؍ΠïĠǋʺňhȱʔǤϩǔŪʼϵŮܶ°ѮÛƓĩÄĩÈź֢ХĦ৲ŏઊӵāāʬ¶ĿϺu­ŧ׫ŏŁȳىǂˆʣڧ_݃ƼҨȍÛƯ̑w͂ÔƁܹșʆuċƋоǷ˱AƏĨµǕ˅©ɀͷƥ۹̒ۗîϫǬȩϮ߳ŤεġޣOѵҌǊeȂ͚˹Ƿɳǂƹǳ̗lęʃπ͑կϙ@ȶ@ȶ@ȴ@ȶ@ȶ@ȴ@ȶ@ȴ@ȶ@ȶ@ȴ@ȶ@ȶ@ȴ@ȶBȶǜ"],["@@՛˛׹įЅÀĳ϶ѴȎ͊b࢒˙"],["@@͓ъ΢Ȟا"],["@@ܑìНȤвĬࡢőƣʩ"],["@@UǫګIœŪҥvεΦѺŤ୸ѳ"],["@@ʐűƛȹٯˈռä"],["@@ƫɼ૆δ@қख़Ɠ"],["@@ȻëխĚن¸Ťå"],["@@ذģԢʣཡȹӫÖ@Ҝ़"],["@@ٗt݆˄Ԯů؛Ǉ"],["@@ܱňҀȲ˲̹"],["@@ЕĐdŒٚʧǁ"],["@@ϿŷâԸ"],["@@ठěʵͧ׿ɍėԩং۟ঞͅЕŝٕŨĪƕڿŀ࣯W৽ǌʌǶТطǸDǄఉ¯ΩƢÒ΢֜¸ΆǨɊ˨˱ļڒŀıɢಬǢѠá"],["@@Ցµ˒ߎž־˷ߝá"],["@@঄˝Ğ˳༕ä޹Š݃ąતіऎ~"],["@@ؙh˨¼Ͳã"],["@@ԍßǹˆ܂Lyȱ"],["@@ԕʱ੻ɐ͂VǤƼબů"],["@@ͲDĿŷ֙Àͨô"],["@@ǍƟ˕¶ƎϠÂNă"],["@@൘ƄƩሜãƩǱࢣƟધxᅭͰ͐͜ɐǯ"],["@@йiȺϦЂȩȁǑ"],["@@٤Ǖ֜юসɯࡢ@ඤ˩૷У܋ÔχȄǴ͂ՑkğʣޮΡջűСƞกŧӱİӧʵࡍŠ१Ѻ˼niͶπTūǒծƆײèै̱"],["@@țſࠩþÎØॸU"],["@@®ƝҿƪђK"],["@@فWࡐŒɍĹ"],["@@㎅ޡ࣡ʵȌđ۝ʛιêǗǧыZêɫ܍ǳUȵϋÎȖƯӟʕ҅Í஡ƀקđҋΒ݊ǌזϮڞÞүŌޔˤׁƖȎÎ҈ăɰɆٚSϜ˒ۖǊ୮Ȯ֎qɔǮ๨రŢᧂՐ۬ÝϦȏ঩Ё"],["@@࡟O੒ƾȱƭ"],["@@̹ЊìďĹ"],["@@ƇȞđǈըƦǂАC׌ɯٮϸŞ;˾࣬ʟƬĎÔ̪ɀĢΨդʲࢰӮΎƽʶČȘ̹Ķۙɵ˗RνƃșțౝKȓʺÒ˔ɃɖBɒ̛דкη]̣ȎסϗȞ΂ɅŠ}̜͏ͤө੘׉ֲӗƊəÍৡΌᔹɗݡйuŻӴÇĀЃֵеݹ৏ƶŃïǱڷȇӟ˥৅ʼōĆǙ¶őéDǩ·ŋÝsŉLƅTÃ`÷ɫǄɕĄϏ؉ɣŅÅŃÉŻÝÓĕÛş¡ĝĝaǟtΑĝճçý\\ō©̓řıoɿÞęGĹ֝ČÙvǻԻWùfĭ°χɐ£ʚʇʅHĩF÷đ®ċĢȕĮŗ`ǥUų[ۭƜયˏϏ_ŗvÙnį\\࡟͔zŐďĤiȄ¶SĞdG¬ŏ|ƃȿǃ]܁ɖÉZȩHǏNħfǝĮۛȸɅˇҋˉɷнńŉÞǭ¤ÈÚWºo{șȷʍէɭŵUȇŸ֝dȽĈҗñΉpƳĞĳJýI_»G¥ÄǭŒēˬ९¢ƋƤëXÝUËµw¯J¡ŷàÑ¼¹[ēű͙M̛Ɵ­×DMÇUǱƷûßc¹ԍŇ·ǅTƻ×cĕá£ŷ`mÁÏ}ďyVqpWáǕυµÏgĿñ«mķC©FȷċÿRבВ¤ǶгɷߕĮȱϐ֕ƬͅҊӳȂԃďɣƑࡷXßǼˇX²ȈͣĒʋġqȥοƝᅁᐴିوÁňȞMƶʠ୳̑ǻǏ٥ȹċƅбŎϝƟčɔ΀ˮЛíԛƪƧǉɕ͒ƳĵމNþ͘ϕצұţৣȐ٩ȓ§Ʒᖭ̓͛ʃՃᒁοוÔɃͭҲĉʱÝ}ƃϰ¹΢ȇࢇɯʟȄ˵߷͹κʁࣺ˛ƓϵϓƑѣa̭ƞȷɥʏõÏņӍØѱ̴ѧxͭǝαƨѧڱν࢙ήñЍΑъکψ٣@̏ȒܿȟƱƠ̵èҟσػǥƥșוȩŒֹΣÏՉѪɵiґ։ñˣȖǻˡ́ͣͼƯȒЯǄÂּăږ޷͵caŵ׆ɥҡɁǃȱܓ̍ƛĄÈųƭʿե׵ԌͳžҡƺˢƷ܋ठ৅ځէЇêӋѾˍàǽĊӗǺG|þȬkpţȁKƵŪõfŇÓviSáŉáþ¡tř\\ƩȏñĉkyōJÅnknVYƅ¾ÅϿŨõ¼Qșàয¦ĵ´đ¶ɱšş¾Ź®Ӂh»ËųWॿۆ҉Ōˣɼ̗GʓɸӝƮ˂ŜȃèŪ²̈ŽθĘǀːξæÆĥĔƈʺIӡˈŭȖؠx½ŲܖʘćƎƟFăą́sǮĤҡƛżѦҀȶ݈Ʈ͎Ĺɰǅ¤ŮǼǰ\\ˉƾ΢Ȳy˚ʥIԗʆɍևȒǱōԽЮګǝхǘѳɻ֦Ȼƈ܋ªýΤɶĐ֍ӄથʿɍ̟¨IrÉĂ¡nqxPȄiȐ}ûÂ÷Òµ´xĚĺp|Vζ÷ʖ]˞ƮĞÈb¼Pɇˈȿņǩ`ƟIÇfÒŀXÆW~tƍ°ȋîĕĄĩƊġäĴE^}př ƻôOn\\°t®ŰŖ@g¦åðÁ²GzVpäÈLƢɿĆ͡ƮǇQėR±YµãsħeůÉÍ¹ºlżࣷİŗò®İS²mÒ·ļOǯǐUê|\\ƕkǈ̌P¬SpɏĨwà`ıH¢ŜŤŐȤÒɵ̎Ëӈ׼ӲśĠʢɶõƸƀΰiǘƞࠎŁ¦ìϛȦշEΧƸŉʪ׹şཤࡔ఺޺̆ͼ̑˖ৃѶњʊTƮЇȲ˔ϿǠȈƪǿĔĞ͂͘Đࢋঔޠٶեͦօņǵʤʪ̝̐ÂҪĲΠɶטŔþǠֲćRȶ֬ñϚĨYŦ࡮șýĵإÔǚǏԺQiđЎ¼ˁ̟ҘȮᆤı༼пט˯ड़ʅɊ[]þӒˍӰıͤчƛ͏࣯ѵௗșᥟ˞ׁǸ˻»Ď઩ǌȁȰࢇÚ๖׿ʛħلĕӢɯîƷ̵̹Ոߥ٢ĕӀ˩ࣞǃѶŖĀŤĝȔ٧öҹ˼÷ǂ̈Ȟᝂԃʦǎ͘PիӒfȼආѴؠͬ࡮ĕΜƑģŃʪfɖő˚ްիˈΠ࠾ܷΜ׸ĿༀËڤՋঋûՃ˿ֈȑ˖ʛԜù঎ƨȀԞ߬ĆáǸͶsᛶ֘͸ƽ˚Ŏͅľ௪͚ׄE׍íŒЇ֝Ɨ৺x͖ýҴ̮Հæ࣪āࢠ˰ݒĮ˂ɣɫʛՄûƜ̖ӾnώɐٙԖبɌ᪂ʿפʋᄚ̽଴ҹ٦՘ԇbҋњ͋ĖҹĠƗŝ͚঺šĊυeÁɚൊԐ૾તłą๚zાȇȧ֭ץү۲гŅဵ࡞УϝʧÓΏਁٓЙƤɹۃƏ˽êʸŦ΁¹ͿƆևaǡƲǭ४ȣࡦdҸħ;ðĄȔୀκʂΚ׎̐ͅռǂ˦౺Ȍ̐DټёÃׅԈǫॴh૫ƌÜςˤÎ˿զ൳˨ӣHԗůࠓ¬ɑֈ٠ٴ੍ܮӮʹૐʦǣ֖̮ӶҳϽ˳¸ԯആǵֈؚȥԸHŢÌзQ̿ɮ๻ʊͳ̞۶ĺހǑϤĮǻŞѯikĶوƼ৔F૸ʓݲ̻आ¢Ўăމ΃ƅ֋¶ǝծҸƊ̧̽̇ͰĽMƸ֌ɨӭҶ͒Ӥ˫ǆұ¨ҩ˸੡Ȉ^ϰΕʂƆ˴┰Ÿ්Ɣऍϗݔ˥ا̌঴ƄϚǒ࠿ζӍÔͨŒфĽ˨௃ʀΊƞϚő͞ĆΨȠѹ°ÊĐ֒ᑜϲ὞˒হE̴Ǆዎк±ΟǃܖĨWĩᆒ̐ञǵȕȗʼŎsǦࡧ̂ႌيï֛Ĳ¾θശѤ୼Ȇႜ˷༙ʍᘪÉШĝࡡΏસTϮǺ᧮§מǧŵċ֪Fˣ԰ǖʔ̟ʘ|ʏ̑फɘцɑʌОƉڧλᣭ׋}ŷഡЍޭÕӻʑЫm࢛ѿӄº٨ʬ੮೤˄Ѳ_࡚ɒউZҰɰڜßÚĪΚq˓»ƢşظĳհǼǒ£͒ɟɓǁˬħ̧џҌǑϗƠ֞Ғ́ƆໞǔᲄƑΏÕuǽૐɣᑔĉаvřĸҞÕϲȨōЊࢨîࢴʭրĎʢǵЖǴ׬Åଢ̳уǽΘmȞƕۧƛܨćňɫЍñ्̖Ł࣐ҫʤƊɀƩԯÛޚҙٴȑȂÐɞǻ࡜мԲֶ࢈Я࡜ܚȈҀT༌УăĀЂĊͩ¸ˆǲҞΰƹٲ ɕ̩ͦÈۢȪࡗwƔϮƔఔúɫʰ੆ƛ⇈ɻcû௫ԙĻŀÇᒌĒ׽̍ĮǊЅöCʇ׉]ŀȗݒĦৄѨሪƍѠɥ߿čãĕൎƝхʙܶżԬÿєɛˣغů↨ɒଐ­ૄȽվЗɷσ঴ɝŀяɲĭϡϋ׮̮{ЌՈȜࢊĒᴴǷࢊȔϒϥࡐǉʤʙެϪȂ΍ҎΟ˜КᚔʅƊļᐜ©ᬐՕؐɳ@ᾕకϵ٫Īܱ̪ҏג¡ƼřŻÙࡏƤ౗ɵ౎ȄʜǗǭĵઊƬLˋɈŝ̜ïƺŪŸē̎ӿʓ½ʬǯ¤ŪԄͥŇśʾˑϙ̭ໟɺ ƶ˅IŖǹᕩإݟěЯʹɱÀ¨ƁїŧEėງՃɍЁ̱ĐًѼࣷmއƕߡҧŗļǺь੣͗ŋɉέǾΉƍlð͡͇ȷûЕ्ܕƱ̷β̟ɚȚӔƃϑεXЛŌŷˬâϣʍǁǧlǱƔΈʒ̯ťȕϋƝ̡ӽ͎سЙȣ܏tו̑șͽƴջρĞ۹ˡɯľŘƅĭЫ͛ӕ੍ڭċȏΊſैɇ̚ЫှÅОάଆܮԄņƨŭ˂ԸhǺȄԞU޼є՘Ԟྀࡲ˄˄ൢϚſĠϞˌǛİͺۦ͠ƬԢąǬÖ࠽ɐࣱŹˁևȪǇƟŇȕŒϳൃރӽīǦ͚ӵÍѦ߀ٍƥ̧ǮळƧԍ͓Ľ଱࠱صʱ֫җťʯےáǄɓםvϓşˇŲ˫UҗʍлĖțĵٕǣǨड़Šދ˴ܩÇƸ¾ࡳǶӝŝŞţ΁­ƅȄIȥġЁƀرūࠏǂЧʉеȲጥԣŉຑ޽˿Щ຅܉ࠃۛᎯ৑IǯԀůߒßۇξd]̢ѴĐ˝ƷжŹӥͳה¶Ӟ̘şˍʛǜZȾ˪ή֎ė͚ìֱּ࠘ʭǉɷ˻ÔΔȹĻͻ̒ɏıɏηʧ΋ۍĔ׽ƋƝ°˅࣓̅೫௻Ƚћշ؋ಗૣɣīر܇षӟ܍ɁϙƮͽPJβωǿÔǨٽ֧ϗ~ŀőŭȃ"],["@@ǵÕࣇè੾Q"],["@@ЅΙ୚˂նɥ׎½ƖˍӑƇ࿏ŵ೽Hෟǹჸା֊ÿźƪЖƭ"],["@@ૺű߃O͵Ƃ"],["@@ળŴŭǐᓘŁवȁ"],["@@ો܂ĨЊų"],["@@٧|ՀŒŨƍ"],["@@mͯߎʖ௸ɳ͉ϟ՝}ݚ˧ౣƣᝋʼѕک̌७ĀྔԐʜÇ፤ņ"],["@@зì˞ÒƚŽ"],["@@ûɻথ`ǴɈࢮT"],["@@ফzіǄ࠼œ˥é"],["@@Խɏ˰ᆲųܛqχǏ"],["@@ԓFÆňҎō"],["@@ࡈ¡ȨơࠓŎೃˋƟļࣃᒌȲ"],["@@ûǽࡱǕٯÜՅÁµ͖ᓚd"],["@@நȩᝣ˫ƖǇਭåƀƂݷ±̅İ੄ȔৈYƂʲࢄĘ"],["@@ޭĴŰࣀUɅď"],["@@ࢿ¤ୈĖˇŹ"],["@@ๆįञȱීŃ৷ĢԻŐ֤ȴ"],["@@ʶǭէÇࣙɄ۶ĐӖÝ"],["@@ٿźᇮ̀ՔɟჁș"],["@@˿Ý૓Ěඔ{"],["@@૾ʿ܁ȑɰəᵥɛᅋ̌ศζ֛UĲüᏘͰՠTؐǣ"],["@@وŅף§õǕႭfȿļጀȢ"],["@@ಛÐഔP·ß"],["@@ƉĦॆvĂāࢽ"]],encodeOffsets:[[[150236,44794]],[[149717,45566]],[[152166,46406]],[[153281,46738]],[[155651,48023]],[[158526,50496]],[[159664,51510]],[[160159,51874]],[[146188,55700]],[[140471,56423]],[[141252,56415]],[[21746,56591]],[[170650,56156]],[[154205,60436]],[[167563,60010]],[[36676,66747]],[[71702,68099]],[[-184113,70595]],[[51472,70847]],[[165343,70555]],[[173262,71251]],[[61902,71614]],[[54174,73078]],[[183155,72527]],[[141271,73224]],[[-183169,73295]],[[79496,74027]],[[81410,74468]],[[76453,74623]],[[123148,74844]],[[56648,75068]],[[72371,74850]],[[145598,75670]],[[85555,75850]],[[144395,75776]],[[116109,76187]],[[88733,76781]],[[84145,77230]],[[150319,77180]],[[139212,77220]],[[143410,77649]],[[98850,78109]],[[115178,78460]],[[152730,78500]],[[69392,78068]],[[98597,78876]],[[91663,79042]],[[133824,43318]],[[110281,80007]],[[105354,81157]],[[78079,81563]],[[94908,81598]],[[52644,81863]],[[61122,81875]],[[100019,82083]],[[51254,81997]],[[58449,82280]],[[54806,82110]],[[59348,82047]],[[55722,82405]],[[48581,82795]],[[63660,82775]],[[51485,82870]],[[81948,82789]],[[62609,82894]],[[56033,83063]],[[60030,82987]],[[64895,82637]],[[93765,83089]],[[98844,83022]],[[59198,83504]],[[65179,83568]],[[59695,83677]]]},properties:{name:"俄罗斯",childNum:73,cp:[100,60]}},{geometry:{type:"Polygon",coordinates:["@@aM¡Ýľƅà{ª½¨ĕÂӣkĹuÕÇ¡PµSÁoEŧòʓēƿÞ¿̓ƛßʵ]ʍǴóĽĵîcȢɊǤÆЌ͊˨Ⱦ¬Ėœΰͪ¬X¶EA"],encodeOffsets:[[31243,-1092]]},properties:{name:"卢旺达",childNum:1,cp:[29.876953125,-1.935546875]}},{geometry:{type:"MultiPolygon",coordinates:[["@@ÔôĈț̙ǪºȊńʋ"],["@@ݶęȨϧ٬T̮իWƟφș¿¯Ȗɍضѥš`Ǧ̵·ǩĽVѶࡱĞĻ¸ÿâãľǍk´QÐ@îløjÐÖNďȗɒ­pǩߴ३ᒤʽèèϤם֏။ᠽ࠽ុΑܵΥӽשř˱ʣƑƕNȻʾ৉͙ŀਙđлǈȑƁu֛̫ˉыࣂҙϚѧژЃ֭ࣞі̑ľϝӬƵ˰®Ǭƅ̦ØװԇऴқЊ́Ě̥ѺîŠį˦࿿ᘲϩĄćÅ˜઎लŷǶżǌŞĮƠĤƒª׶ňlbÀŒäƘbdhdǌĂİ´сѐ̽̈ūŘɎÄɺÎԲžɜÈӲŮZŰİȊ˰£˖¡˼±ĠഄڿෘਙߊսൠŉƦ"]],encodeOffsets:[[[42996,17117]],[[47649,29795]]]},properties:{name:"沙特阿拉伯",childNum:2,cp:[45.13330078125,24.24853515625]}},{geometry:{type:"Polygon",coordinates:["@@²·˦БAÍęÄSĹªܣɺધड़ۃƿƳsWwWuµmi[ЃŃȡőµƯƋIá_ĝh©C[gŻFÇùƧt˟̇޹ŝȕlǉpǟ¬ЗͯఽϣőҷڳƱߝƇıǗŒȑȅϽȝؕǥü̘³ˎٵӄ³ܢłԤБL^ǵ֑EɢʝèԷ৏ઑЁËكҠͯǳōʝбƥŕɥڛFƙɰڳXΑŉةּ½ȦիÝŧɿѥɇݙ͓ȅԟŴÍʤżȎpМډआÀΨ˥ȠUΈĝàĵӾΣdđĦ͸ҐĹЂζ̦Ɓ͜ʐƠɘτD̸ƞƜܮfRṴ@о࠾NBဲᢴ@ᢲAƘPŞǚð¯©ŷ⯀B"],encodeOffsets:[[37757,22525]]},properties:{name:"苏丹",childNum:1,cp:[30.21826171875,15.4345703125]}},{geometry:{type:"Polygon",coordinates:["@@Iޓĳď֡Mʁҋݼ͟ƊʃլӅɰګʆ̫ƷƱǥǝȧȟɓɉǟǛǛǗȟȡơơá³Яŀ֋ƣǗƽ˳ʂɁĿͩĞˁʛåŒƝ@ßǰˁŬѣԖǩtȳȁлĨʥƳȡvͻʜ͓϶ɑԪՉ̄ǥ͘®ưࣩږćŊhɂ̇ˢҽżŧ͔̾ȆɈݚʀѦŨլÞ¾ȥتֻΒŊڴWƚɯڜEŖɦвƦŎʞͰǴلҟЂÌ৐઒çԸɡʞ֒F]ǶВKŁԣ´ܡٶӃ´ˍû̗Ǧ"],encodeOffsets:[[34896,9689]]},properties:{name:"南苏丹",childNum:1,cp:[29.7080078125,7.857421875]}},{geometry:{type:"Polygon",coordinates:["@@¬̍ǬɃ¸˥ÿȯȈˉǒ®ȶΫBҋࡓÃҁǊŉkŦի˯BʅB܅HƵùǑĉɝ«ʯhć]ƥÙĕgŕb¯S£ƞˊìŽĘũŉgДĪøۄFjƘѸÒŖƈݼˏΜƠųŖέםʸˍíçşࢫBǣˊŲŖƣ̓ՖƫöĉÝùĔ͜Ɩʮ̺ɮφĔânưĜǞ˞ЄٸǊ׆ąδεĦr̆ħʰХ̶υ˜ȯņã"],encodeOffsets:[[-12575,15165]]},properties:{name:"塞内加尔",childNum:1,cp:[-14.4619140625,14.50927734375]}},{geometry:{type:"Polygon",coordinates:["@@ˍKƘĸŶī"],encodeOffsets:[[106465,1364]]},properties:{name:"新加坡",childNum:1,cp:[103.81005859375,1.38671875]}},{geometry:{type:"Polygon",coordinates:["@@Ͳ´ŻːVѺїʋēڧѸصƠZŀͯސµ"],encodeOffsets:[[-37993,-55363]]},properties:{name:"南乔治亚岛和南桑威奇群岛",childNum:1,cp:[-36.9072265625,-54.43701171875]}},{geometry:{type:"Polygon",coordinates:["@@ùMÚĊ`û"],encodeOffsets:[[-5828,-16381]]},properties:{name:"圣赫勒拿",childNum:1,cp:[-5.73681640625,-15.95458984375]}},{geometry:{type:"MultiPolygon",coordinates:[["@@őaϧːӺʭ"],["@@ȕÿĥÈȜļĠă"],["@@͞Çɦ̳ӱĘȽŶ§ǢǉVĺΈƵ"],["@@NŧŧôˢƸɭ"],["@@ȂƇ͔X϶χƛÅ܅ƒǅʘ\\Ɔŀ"],["@@ȪŧʫºÂî"],["@@ŷ¤þèĊÿ"],["@@ƛ«yƞǐ|Fŭ"],["@@ƩŰƖŨTʗ"],["@@ȼʡ«ƿǶƋǬձԃծµΤĽƖƆ¸"],["@@ŔɝßėșƔ}ƨɋÁíÐɰʢɮɵ"],["@@ǳĀÆŬƌÕ]ƕ"],["@@ƩǺ¦ŒȼűķǙ"],["@@޻дУиɶ¹הΥΌʡǩ"],["@@ƋP¾ĮĎĽ"],["@@ā˷ĐկּӠɇƌɥʚƛ"]],encodeOffsets:[[[164431,-12081]],[[170121,-11015]],[[165597,-10636]],[[165425,-9856]],[[163585,-9495]],[[164013,-9211]],[[163010,-9342]],[[161903,-8892]],[[161167,-8922]],[[164608,-8513]],[[161550,-8439]],[[160944,-8302]],[[160449,-8113]],[[163717,-8739]],[[159580,-7267]],[[161267,-7506]]]},properties:{name:"所罗门群岛",childNum:16,cp:[160.90576171875,-9.22607421875]}},{geometry:{type:"MultiPolygon",coordinates:[["@@ΧŔ˲ÈĒ¯[ū"],["@@ÚăIy½śFwh[ĤmĬ̷ƩʋÅt[R¤UG¾ĒĴ^ÞUE{ţĻǯįÝʽȗȃ͝ʱȩ˛ࠓЖL̰ǽŹĒė˜ǉÎĽǺǀKǈǤʍ«qɢŮȝƘǸjĴǌǠĢǔ˦ŊǌʊmȚİ՘HÌer«Œśʐ͵"]],encodeOffsets:[[[-12826,7615]],[[-11016,9611]]]},properties:{name:"塞拉利昂",childNum:2,cp:[-11.787109375,8.4521484375]}},{geometry:{type:"Polygon",coordinates:["@@ȰԞ͡P]N¹^§ErŐÊŀƈĝĊ`øIÐ£byÇʕű˹ىĐƤćક͂ʓƪ Ɩт˴uŰǰt"],encodeOffsets:[[-91507,14762]]},properties:{name:"萨尔瓦多",childNum:1,cp:[-88.90478515625,13.79833984375]}},{geometry:{type:"Polygon",coordinates:["@@įehɼĈɕ"],encodeOffsets:[[-57617,47963]]},properties:{name:"圣皮埃尔和密克隆群岛",childNum:1,cp:[-56.3251953125,46.9599609375]}},{geometry:{type:"MultiPolygon",coordinates:[["@@ŝ¯©ƊȀƬÀƉ÷Ļ"],["@@ýìĄRŋ"]],encodeOffsets:[[[6820,124]],[[7602,1606]]]},properties:{name:"圣多美和普林西比",childNum:2,cp:[6.9462890625,.8828125]}},{geometry:{type:"Polygon",coordinates:["@@tƱ­ăĿƣ_ŧcĳO³»ĕũɃőıAMWQBqèŻR¥ ¨U¤uGÅQ×Pć¡·U¡̃ȏĪmuĕsyoQÄm®á¶¿ ±K¿O÷ùϳČȅĂбۈėѲ˿b΁תǪӈÑŸǦƜ͌|ĸƨğŞľǴȌώؠě˴ƻWǌɘþۄFټƱuʱͱ֓ňځˈΥ"],encodeOffsets:[[-55331,3717]]},properties:{name:"苏里南",childNum:1,cp:[-56.03125,3.91796875]}},{geometry:{type:"Polygon",coordinates:["@@]œƃÿƿŷįWƍ̩É˅Ƕ߱sſș͏ů˙Ü۫ȇÉǳ߱cԫȤɿ͌òǲƶȰԼ ˞ƪÚǊ֠Ɉˈģʘǖ˨ȍcƗʨoʲǢьÏǰĔҺM͌ǝϠŅÆQ"],encodeOffsets:[[23080,50251]]},properties:{name:"斯洛伐克",childNum:1,cp:[19.70263671875,48.6845703125]}},{geometry:{type:"Polygon",coordinates:["@@õręVǷŷйǭaJàĿoĹ̿ŇÞÕÏãPZćuŋTſ¤ƉkťĀ·âmLiyãíµqЭ«ʧöɢÜYòƗĤÁǂùKkZOnN~¾¦ÌfrEhǯkĘƎĈØ\\j¶܌ĵ̀ǦࣄÒŖƼǆKȜ̛"],encodeOffsets:[[16913,47616]]},properties:{name:"斯洛文尼亚",childNum:1,cp:[14.95849609375,46.14599609375]}},{geometry:{type:"MultiPolygon",coordinates:[["@@će˚Ԧٶзࢯ"],["@@əŇĀʷٗБŞƎűЊͶɰ̨îƨã"],["@@Ïµ¤Įǒeƥ"],["@@ࢭÍכłūɝׁǃūǕ´Ǝǉλˇٍ͎̃ԃᅿ׃ʙƳŴčʗęɛĈŌʋǟćΣLȈɳɑ̭úƵɥÇůĸܿΆƑʜ®ݮӁİɥࡋͯԄɱʇવϣٛc׬ťɫ·@޷ʫړѭӭ࢛wŇ̑±ƽŧłʯƗŋઋ^ô˲хҖˤuŧƪǜXtƒϱʐࠅ৲eȆƵzďԶ¤øǊêŃƠbž̨įʬڰўḔʙҪΌ¶Ƥʖ؋̴Ůӄʭࡌƨʰ԰ͺΊÚَ»ƲƆÁʔΫİۤ؂Â۠߆ƪ»Ƹ࠘ӆɵ̸րЀҔǬӼś͘ӸඖǗ͆вșƠь`ୀџܚŹڈ΍ƹгɼýʙ̈ˋʍҷϤϓ"]],encodeOffsets:[[[16926,57642]],[[19535,59224]],[[19617,59313]],[[24736,67385]]]},properties:{name:"瑞典",childNum:4,cp:[17.65185546875,62.21728515625]}},{geometry:{type:"Polygon",coordinates:["@@Ħ»eɛÄȧNˍóz}MwţkǳZŏǹGɯ^Ǐ´ǯłĿǔ¯ļÛNYlR̎ʈζĴŚņô ZGьȇvX"],encodeOffsets:[[32715,-26580]]},properties:{name:"斯威士兰",childNum:1,cp:[31.4541015625,-26.52587890625]}},{geometry:{type:"Polygon",coordinates:["@@DýƅƪÔ¦îő"],encodeOffsets:[[56874,-4805]]},properties:{name:"塞舌尔",childNum:1,cp:[55.46337890625,-4.671875]}},{geometry:{type:"Polygon",coordinates:["@@ӏї̹éĵŋ¶رƅܷǩ˷ᇳࢳ࿥ࢱϑÐӫ̈łǸМƔź£Ɩ͈òñðʴʞãǰƥÊ°Ƅ΃yÕڔśŶÚɸ®ÊØMƈßvDǌƜzƘɖÀJ|ēǎR¤¨ǐÜ~rĲSƒ±æ¥̶SôǒÆƾ¨ʈĜӘǫŠDǜ]ȾBŨlƺˤòׄɮ঴¸Ƣ¤ĜêR_jIķ"],encodeOffsets:[[43376,38e3]]},properties:{name:"叙利亚",childNum:1,cp:[39.06201171875,34.8076171875]}},{geometry:{type:"Polygon",coordinates:["@@ǂ·ǇFþ"],encodeOffsets:[[-74068,22376]]},properties:{name:"特克斯和凯科斯群岛",childNum:1,cp:[-72.2392578125,21.80517578125]}},{geometry:{type:"Polygon",coordinates:["@@QṳܭeƝƛC̷ɗσʏƟƂ͛ε̥ĺЁͷҏĒĥΤcĶӽĞßV·˦ȟ¿Χ̭Þ؇̓ó̓އݑαɹ୕ǁÏđȈƱқԡޑ½ܩεȩ˄ƕƵΝƧБbÎɜη٨ڃլ̗Шɢʎஊx͇̌ťʖđϸªؚȟւ͕Ѩǻ²ƱBōư˛ϒčΰµȸޜଶच঄ɖᠶȔΐ͘hȆΥӌǟఊࡊϖ←ႱỨལ"],encodeOffsets:[[24556,19965]]},properties:{name:"乍得",childNum:1,cp:[18.71435546875,15.4765625]}},{geometry:{type:"Polygon",coordinates:["@@řԛӈ͝²ՓǸʽrႫÿIȺוŽßλŃϙ̨ǯͰĞцœǊƾڸˁͼĮüҢʗÄĠŠßĮլϻ͎Ą̈ßĂҾƉ΄"],encodeOffsets:[[923,11258]]},properties:{name:"多哥",childNum:1,cp:[.84619140625,8.60302734375]}},{geometry:{type:"MultiPolygon",coordinates:[["@@ĥŁt͠ĨåuƷ"],["@@ĝƑmŜŌv"],["@@ĿOqƞŲƍ"],["@@O¹tWƬŠǞǩĹΟĬǟזIT½oƅö̍ȩ҇FòĵNťȡҹ Ų½ÀfȸȂŢĀRRļÌôŨ´eÔòôÈ MǢƁĚ½ĀgÄō_hL̸ǤĠ¶ì¨ÂhbvFà^ĸIŢƎÅĚk¨pĊđŮȑńơĘįʾȥÜƉ³ȉ_ǉNȣÎƳȒʱĐÉƴ±Ú¥MƃȊŉfCÏoćĿț@ŇïZğoõsɅk»­·ã¯ĉ£»k[S±«­ʛǜೡăʑǏ̧ҩǭsƎݝɌȳe˱ǔ͏˷и­ÿףҀ޿\\Äٺ̟Ŗ̯éȵȭČǕŁ̗rѧە།öࢯӦpżחŞƉäĮȫɠ࢓ę®·ɖąTwȊăƧɚΉԂ˝ЖJԔԻȑΕǏĹňωɩōŒÒІƯFĳǸ΅øëŐţȭΡκrȖƕĨŘȧbăȸƻČuƜəƠíǒĽôƃƓĭ¢ÁҖϰ஠°ЄζώΦ֨ǭ٤ɿМ\\ּӉզ̱ԮUȒ̮ƐֶȎŌÐƞ«Æƥñȅժ؛ے×вɑȒ̺ÐÒܺǖʐ̚»ҜìƄ˜Ί¨wǴɘƜĊÄQ¤Ĵ¿"]],encodeOffsets:[[[100771,8092]],[[102473,9817]],[[104886,12277]],[[102526,20805]]]},properties:{name:"泰国",childNum:4,cp:[101.5078125,13.03125]}},{geometry:{type:"MultiPolygon",coordinates:[["@@ĕÃÏÔMh^@Î_ĈW"],["@@̟ɝՏȔлƳF}åÇ·ly§ù¬ʩৢÀʢǉ֞Ǭk\\yWCȔ± ũɜØÀ§ê«ΈƮЀqłZĐ¨~êdƊWJ©{ƗǖɕğĩĘȹȌÉɄĶ҆ǗèܟȌǹȑŹ_TċÒÑʻr÷E±ΗćăPuløÌb[ÁX©`ĽtćQƟ­˅šȧȧ࠯˧œŰćʂŲڂ}pÃAćsÏIb®ɄÝŘѧĬˋ̅ǟŵ]²ķGč¿çÍœnƏǏ_őÑÇkó~ĝ]é»µ¥Qí¨ȁƔ£RuK}Ua[]Y·T­Sʁķó£]©oo£RŧÓġnĻüÙĞÔ`ȰҊ،əɘϢοÊŘʑîÌȾʘƀشíƨʪȖÎÁŤƖ˻Þը~Ë̴Ŵǚ̚ġׂ͆̌ʿ͉˳ʀƷʲ"]],encodeOffsets:[[[72361,40812]],[[72662,41205]]]},properties:{name:"塔吉克斯坦",childNum:2,cp:[71.23876953125,38.8662109375]}},{geometry:{type:"Polygon",coordinates:["@@¥GקȌǭˉɃIǵQřŕ½ÕƯщŃ¯ñ˝Ǉˑŗ؛ƓƗĥțÝĹ¹ƛā͉íǿǬϿ¬ɵǔçSSȼċĠºǶýϞٹKɹ˚ԝʒŹɐСƢүcށʶƇȲمƙƙݟ{ЙɯǙʵڇŃചƏɔ̱ŎƯÛầ̰½ŋĸ^Ȯнà¢ǵșɾÏ̂Ǯ՞ǜǵЄKɈƛѐµŢ̬fǖԝϖʓԊ՝oǍıŽɝѕ̙ӤӀ̰ࣄǀ؞̵Ӥ֙Ҙt࢔·ĎòŻю˜ɢѰÈǸʢϐǁ˓ˢ˚ĦĮٞϣՌĥȧɒƛĿ\\̟̬ƭڎɈò΀ƵӤय઀ۅҞƷબا̞LՔɏãǛ]ƽAşXġ"],encodeOffsets:[[68119,38245]]},properties:{name:"土库曼斯坦",childNum:1,cp:[59.55029296875,38.97509765625]}},{geometry:{type:"MultiPolygon",coordinates:[["@@΄ŶƋȧȷò"],["@@ěʤŞp¤ŮǱU]ĢɌʜǠÔਨĮ̆Ŧˤĝ͋ʓ౏һ˷ȣ"],["@@ÇƟÓŜŔ"]],encodeOffsets:[[[127014,-9565]],[[128070,-9740]],[[128662,-8335]]]},properties:{name:"东帝汶",childNum:3,cp:[125.6669921875,-8.82568359375]}},{geometry:{type:"MultiPolygon",coordinates:[["@@êßőǥƀǜ¿"],["@@īAĎÚ^×"]],encodeOffsets:[[[-179365,-21677]],[[-178128,-19086]]]},properties:{name:"汤加",childNum:2,cp:[-174.65771484375,-19.91357421875]}},{geometry:{type:"Polygon",coordinates:["@@ݥÅ΀ǘlˮơĬ؞ĺĭƝl҇"],encodeOffsets:[[-62476,10378]]},properties:{name:"特立尼达和多巴哥",childNum:1,cp:[-61.4111328125,10.455078125]}},{geometry:{type:"MultiPolygon",coordinates:[["@@ȡbpŴɮÅ»ď"],["@@ŻÑŎŜnÉ"],["@@ƇȅĐ֯ſǟŅŽ́ƃʛ२ÁȼĭϜׯЄȃјȡİ˽Ҟiؚ̦պȶĘèĴÛϜ״šŶͦ˄qĔतͺŴOƣĴ˒£ĆΣĴ¥բ˺ÔǕձחĪʍΎɅĮͥίҿӓͯÍȉɌ˟΄TƥȢĦʤˉ¯¹ʪÉCuǅOËKɇäıD©}¹ŭËǃõƍëƭû¯¹ƍûŏǋǛ§"]],encodeOffsets:[[[11221,34532]],[[11549,35588]],[[10522,32446]]]},properties:{name:"突尼斯",childNum:3,cp:[9.525390625,33.78515625]}},{geometry:{type:"MultiPolygon",coordinates:[["@@ʩ@ɀĐªď"],["@@N£ʂ͙ŷȥĆ̗ԼïД˱¤«ȕĲṶ̈̄̅ȾғvϙŶ©ȧΩ͈ǓaɳȄŧ{ůp½PÁFǡıÛ¡JÎNŴa hďXƩùƇHӫŠŽƋ SėĥƯķągĸ iL^Qěéơ£঳·ɉõιƷˣñƹŧkȽAǛ^şCӗǬʇěƽ§ǑÅóğHŝRķEã¦²ƑıT}qÛ§ǏQ£Ċȉɕ¿yƗũÅ¡ĕuCƇà×Nçͦ͆̊ŝɄտ˯׃ȰࡑՓݳūΕŰ̗֛̐ɠשÄǕԃٍħϹƘɇ֑͠ĆʇƫÆİՋҪĴȦǔࠕ©ŲȠϻдƀÊRɈ߉ʢŴ̪ȞʱЂĮȥ~ťȒɂƬǗØżƟƪǼɎډçWĐäΞҴΈҠ²ǆŕɆRĶ¬ĭĎŤĬowĵ࢜jȁŦƞĆݠŊءƬʄᄚħǠǲ܊Έࣚʎ଴½ɌĚŰŗƦƋɖāв¢̖΁̺öʎƯ૆ɓ࢜ƶ۶ũیʦ˦ƌĄĀǈà}QĒÂҒ±ĎĴpXbPÚNÔM]ÑîsŴĩüng}mXy¬Ȓ"],["@@ҐnƸΑܠ˗čȅڅÔ֡ěȭʉУǃӍΟ¨ȪҐʾֽ_ÉĮʘȒAʆʚƎǘɕĬîŶtÐ~¨dɨvêƶd¨b¨[ưŏ"]],encodeOffsets:[[[26594,41100]],[[44476,42144]],[[28135,42954]]]},properties:{name:"土耳其",childNum:3,cp:[35.2431640625,38.962890625]}},{geometry:{type:"MultiPolygon",coordinates:[["@@ĝʮʌǏ˟"],["@@ÜǳûÇʣʀńϚǀϝ"],["@@īҍđÚvψǈl"],["@@Ḯ႗ϝപ৏ΕୃÎɗ֠׉ɏгCɧŢsZǕŗεŮнǄȿìڵبϵЋ̙ƟûۡɉзȷӑĴǏʉƷāƙͥŦ֡ŝī_¾ýÒƝêŁDŻŉÉgũfȡRȉGmĬÎĭ¬ƓɖºʎćҪȽђ˙Ȥęƥ߿ɚƏîہɦqĦhËjŧMįĔěŶć ɱIĝ¼ÛÞ½öğʀ˃զÿɎčƔęĺŧĦƍĤõÚĳȈ¥äŢuŮVºĘǄV¬YÔ©ŶǙѢeìDÂà˶A ˆKȔŰϠպ͈͠jƄ}ŎÑPėõd¹rmfQ¨¤ň£¬dzüǀhvFÂp¸T OÈvÖlĺWĊÞKͼ§Ė©¾ß|ĽƆÞN¢bTHŸXÎÊZ^GlG౶@ಀ@"]],encodeOffsets:[[[40665,-8168]],[[40445,-6322]],[[40822,-5023]],[[34717,-1026]]]},properties:{name:"坦桑尼亚",childNum:4,cp:[34.89404296875,-6.35205078125]}},{geometry:{type:"Polygon",coordinates:["@@BµF«WίͩĕŔȽ«ŠతǼʹRː઺਎ÛȎϓƼİ͢ûǎŸ̰Ëè˂ʜͪĝɂŀ˴ʁǘƾ֌ƤаĿâ´ƢƢȠȢƀ˥®gk³ĒãłHǋP¯ǍϪַm¿æ̗ZǙAţƫЋˇǝÑƥȿəǽγধ౿@౷@iF]JÉYÍÕeáNSG"],encodeOffsets:[[31243,-1092]]},properties:{name:"乌干达",childNum:1,cp:[32.27734375,1.37548828125]}},{geometry:{type:"MultiPolygon",coordinates:[["@@Ś£ӯĒ¯Įцƛ"],["@@֝aؽ̡ȡ¤؛śڿѥɠƤ¥Ɗ͉ɁƢЩκ͓״Řͼ¹Ƴ˟ѭ¹ͯþ͓ʝԯåһ˫ϫƔĖҜ࢟ʲঀҘÏŲƏȑİ؍ûթǖƪŰϟľڲáǼŠ҃vʇӐĨҿ˹^ĦƇůԙÛӝֻӹŧÞϱřĢƏ¤Ʊaˡħĥj]ol˱ªő°ėĔ¬^Ǆh^°mþÐÐĘ¶¾¸TîĢĊÒrÞ¤¿Ħ[ÖEÀǀÌE^eHŁhEȠÞ͈ēTǔd²ǧĬVðPČq¸ʱŖĭˠˏǔSЌםƶéEړˬˏę˟@­`ǧýkƩ}ɻȥɇsȁȋkСƽͳǨߙÄȁKǥĂÁFəŝěƌƽrˡɰķCVƎŸİĀǀŔƄ^ʸRšø³̰¶Êˤʘ֦ДɖĲĸHðćǊČÂγπ§ǸþĮîGÖ[ðxLŰÖźĢèþத²ࠨŷƮaĸNÌQżŽͦqTāƆĪ֢}Êg¤ïcKĲĜàl¨Tx¢vDȴȵۄĄʐǡƶæiªSÄ¼yÄ¨þìŀôæú¶ŔĀȦHņ°ȒFǄM̠§ˀɎદ֎ӃɵďþΣ܌©ȼƇɼ֥ѴцǗڬǞԾЭǲŎֈȑɎԘʅʦJz˙Ρȱˊƽǯ[ŭǻǆ£ĺɯƭ͍݇ѿȵŻѥ"]],encodeOffsets:[[[32781,47313]],[[39132,48222]]]},properties:{name:"乌克兰",childNum:2,cp:[31.12109375,48.36669921875]}},{geometry:{type:"Polygon",coordinates:["@@½ɤĄĴĤ¾öJÌ´Õ˴mxfÈĸʎΦ˹Ά͝gŻ\\óŌTȸǲrNs͒͹è²ϖǥ̵̰Ϫǝƈ̃А˫õëăęíéó·{g¿@ПƊñ£«Ï¿Ɨǩțŋ͏ʑ؝ə٫ƂӛĿޝϖօqӏӄؘʀʎŘǆĂàŴHÖÂYÈjÊGÄyÀlªŀĔìǆjàŠȄrücƖÚà"],encodeOffsets:[[-59198,-31599]]},properties:{name:"乌拉圭",childNum:1,cp:[-55.76220703125,-32.51953125]}},{geometry:{type:"MultiPolygon",coordinates:[["@@ʥ¸ƕ֮ȔɞWɘՐɿͨЁٷљ"],["@@Ľ_ÝžƜOō"],["@@ǬhʎǍΙŷÑǒǽŮĦðĊđ"],["@@т»ŭĉα´ÞĒ"],["@@ƐűЋXƍɢʼĮƎȵ"],["@@ȣmƱŎǮƴȒGiʋ"],["@@ýMǨ¤ĩ"],["@@Ǖƿ˖ͤĿǣ"],["@@ș֊`͂Ǻࢋ"],["@@b×ɡժɀӑ"],["@@ǳĠŌèş"],["@@ǫU͊ČƝõ"],["@@ıkƂĘë"],["@@¨ÕůJĽŮȆá"],["@@ǩĄưZzĝ"],["@@˪©ɓ»ÕĦ"],["@@ũeź¶Ьˏãǫ"],["@@įŵŦǼuÅ"],["@@ÏÃ֬Şઓ΁ۑÓŖǮʲņߖÔ̐Ɗȣƕ"],["@@ɉlǈĢÂō"],["@@ˍcǶĊĘå"],["@@ĕmĪƺSƋ"],["@@ȋĦƌĦĽ"],["@@ĭpŌþÿ"],["@@Ǆȝ̝ʪĨƆð÷ŻÅľÓ"],["@@úśüķ٦ŕŨåˤúĴXΠ»˰ŏðƃÈ@˾tԲȳ̀ŖǠNÍૼœࣞʴՔȯҊǳ҈ǱࡪΓӨȫǎãǮ̙ȌˊHŪΗ̦ŬĹĻƫ֢ʣ̲ƝÈɛ̆ౙ©ą̗܋Ӄ̽ɱϞʧɂ@ϸǶϼǶЖŨپĲࣘ͐ɐƈÅÔöę̢Ɯ¼Ƃ´ŀɘNܦEٶ@ՒԪ̰ȎΘʮͼǖȠ|ĊJᥬFǄʄϴgӌՔʐڬٞيǊĨǷלŔήɛJଗ̴ĽÈίȰGŚ˻ǡŷկĉǽǉāĲʣJçȽɻæ¦Țϵӫʛ÷ðÇđ{ĨŽȅƁêǵõҭבăȳǺǝηʕʶđˀЅΦÎȩɞŎYŌį|ʅשţưϽȋhɌĹÃĳĪŏΓ୵ÿࢿ҅Ĭʮĉǎ˭˱͕ʖŇěԣ^Ǣؕ࠭Ƈ©¶ǐՃ̂Đʦ̊ǎ˝ŷƽǅǐҡʮ˅ĉƽŰƑݩੱȸˆҲǇdO͠ǉçǵƀBƐȺtǑŐŅ£ƢŦƉČǎŊčĠêļɸ¼ŅŌĎïØˋə­æ÷ƭųŦţŋ½ƐבʃȲR×˞ϙѵʬmćģŸșǞКȕʏYȻȐJڂϵãǽůNԱОҾзȴćǷř|«ĥʭȚЊϟį»ȗȘԳĜӠſƺɵШ`Ϻࣿ΍۸ƹƢ̣˟ƔCŏķ×˧čƥǶPɫրZ[ɻȖɨĂį]ǑͱʗˇóŖƏďʡĆѶɏɟɻʓƐĂŉȘëʎ¤Ă­ßýܙȫĭņǡ̷ȯƫ́sȖ¹ɏͣLλǋ̑Еƈ¥ɧѻ̇ŅnOţΟƕɫXƈ÷ėœȇƈĞțΙ˱ ùǋȽìMǥƭþõŹÃ×ͭɢࡑ؎વ½ǵň̷ŹɶF̄ñƫJȞűƮǿזೕÛࠋ̝ԓՁûsƠǐơĔɁ϶̍ŶȱюŊǔǯœvΆȕĥǕǰɯτʸ̨ɧĎÄƽōÉčŘǈ࢔ࢗ࢐̋ƬɟÕƁ޻ȑāò@ÚĊëİ˓ȸÔƒŵĵחȜ˦NőòߍŹǺüWŜơġǗǏxČƣŇ͑Ǻ¼ȃ͸Ľ˝٧¤ΓÏɣƯҋǠǥùåřȦģπŦÖ±ųğƸēȘŤ ȏ̯ǙפΕŝƻãÄşčÇǴ׹̀ĘǛƅșƕǆ̹ƏҏƂŞ|ćȸɟQ͇ʀȯŗ¨ęƩޏȆյ­]Ɋ£ʓܳʯȞƐɃAǞɿŔ˧͕Ϳ߯ЍȊŦοǇĪȀɁɉĭćäÅȏˉ§`éĚĝ̝ůŤƕų˻ˡňÚƛǪ¥ÍɩĴЙʐѱȕ÷ปӚ̉Ԣ£ЮړټϩܖֻԂۡẴĳɷ҉ɵǽ߉͚ͥʔЋࠀঙڰʡˊ๟XEϙᛟIẗসĢǨ፹Ƴ˵٘ԧΪˣlăɰՙĂϱʴܿ¬ƏĞ[ҘǕòǺ͑ɂӿռÐѪӳ̚ĕˮ®Ɍ̀ˏ˃МÒ ڐ¤ܱöŅˋΉȔÇÇúǪڗװōܲѱԂʈࣶϽଔ݈͠Ȃཔ»դ٨ÅȵİԛRz˚Ċơ´ȒȉǠɨĎɥÔwåȥעʉˆ¡΀ؠǱࡄāǐÂĺɋĹţ°ˉ΁ǼlŧOfâѠφţʳĈˍǅÙ»ĲǗǓ˜ÿɖ¡ΎƈȐɳŰĞŒɕƠƢaƐ£ĞĽb¸ÇŞ୎@෤@Ϊ@Ψ@ܒ@੼@。@。@　@੼@ܒ@Ϊ@ܒ@ȤAN͆ʨÅM¶ɋ"],["@@Á¹ÁĜń¡"],["@@ƯnÔüƳŜѲÛȡƩ"],["@@ѭ_ҼȔǳ"],["@@Šŋёōɚ͎Ęĳ"],["@@ȉØļ¨ĎĿ"],["@@ƑjΚǚɇȃ"],["@@Ѿ³ڿƁÚτZ"],["@@ŽBŲĬƀ·ųµ"],["@@ԱYࠪǎŇĎɢĔļ«Ùțҳč"],["@@ˏ̼ú«ŕ"],["@@ԾƉсċυƼˊÚ"],["@@िћͲͪʺ´þǼϮPŗƍ"],["@@ȲĈŢÅ˃ǧǆ«зȃޯŷըȐĶƠǨ«ÊÊ̩ČÌň̪Ä¶ė"],["@@ǹa}Ĭǎǚęů{"],["@@VŰŤóŹ»"],["@@ŕìƜ¬ŗ"],["@@ĆƑʞūɱÈ௹ˇÁǂ΄ʤ֠Ť˦Ë"],["@@đāÔƚ~×"],["@@TǇəŚvȨȐƹ"],["@@̕ǥ°ǚʈŴ^ŧ"],["@@ȴCóǩ؉Զ˨ùȢˍ"],["@@[ßƣØǀH"],["@@ŎÆÆǏʵÒɔ÷"],["@@́ɱñȒδ "],["@@ƟRŦĂzē"],["@@ǫʁɓǞ˃ȱëɂȆΒ̘ľɬȑfȩ"],["@@̨gĚȕоǏΦΏ˵ĨĵķǶTǰɑȘ_õеࢭԪƈÌÙǌիǐςŖŉĬ̷Ñǲƴǌ"],["@@ɉĀŐĦɮųƏ"],["@@iƓŻ[̹ŲɾΜˀɇŕ"],["@@ħ²ǰćó"],["@@ʀƃ£Ļø"],["@@ǛĘȒɲǿƭ¥"],["@@ɂǍǯѯȫ§Ę͊ʏ͎ȘĀźñ"],["@@̶ÕɅÙ³ʙǬƞ˫˛еҶԦK"],["@@̯ÓöŐ̈́ĉy"],["@@̌Տ½уʣʬĈƈϓŤŌǤɉȈ̛ȫUɬ̾ɈДƷ"],["@@ЀD­ĹɢŃǑĹѹɘŹԁĳϫƣøû͓ƵȠǲϙźăȇ˫ѴҶǤά̃ŹҶ̔ōɪÄ´ƪʼÙ¡Õ"],["@@İɅɢŐ͢ğ_Ǖ̱¡̠¢ȱՏƼŅȷǿvփѴȺȺƬķ¦Č̪ "],["@@φcΖџЁΔ͌׉ԕʹ|τνܼȲǋ"],["@@ϊ¥āōǗÖįʏzˣƙϟĀ;ǮǢeÍŚΦ³"],["@@ų´Ȭà÷œ"],["@@ǱüΔńǡǿ"],["@@ȿWǊĊ¶ñ"],["@@ŌӲΐƊs׹ѧ"],["@@;ÍŚͳҳűࠫȴʟǖԌV̢ƒ˺B"],["@@ʖѡřëŔʸ"],["@@ŇɭēĸȜŶ"],["@@іƃͻ|ΉȪʰġ"],["@@ή¯آĂضʳ۴¿ćԓʽǷţƔࡻ˔ڃÿī̐ʄ¿"],["@@@݁@௯@݃@௯@݃@௯@݃@ӫȪȦÖæЖĭʠŪψVžH@Áµě¡õˈřҨ˭،͓ÔʻèYƊîŶ¬˂ĠȠDĦʶǂjŀԴľˮ^ˈƑĜʑɢõʆǅÂÍĤ÷֠̅ɬɽɰɱϜϗĜýŢŋÎÝ¡­·ÅƴŀkÕąȨÃǝ̒ۖʗƠÂĝˆ[ìƃǙޥ̣ɋɱǓ̌ʤƈ͇դĂņفǱǗ˻ơÄ©ż̨΀ʘ ˱ʙƮգՖաĮƵЂ҂ÛΙɢ˺̩ ƍãʷȒżϒ˧ʇӉȄӳߺśǻΌߧЙƔ˛WũΠǼÜǅqŏƦÛʃٙɨÏƉϐÃŊǇɒ_Ɛűҟǫ޽˴ࠃӬ੏̤ɔƞBɌȎ˽ÆǬȞ`ϋƪࠧʩࠩǊ@Ǹɗŭੳń৛åŔ׹ƺǮˬҵʏճĈȊƢݩàƮèȷðƀ˄ºങȇĩàɈɂӹƅCǥǱwʦŵ͑ƻѪîž÷ϻзۯTŅĜǟ˯ĭŲñƳǡ ǉǽ΅G˝ˁȽ¨үģǱÜÆĸРŊ̔Ɍ͹Ĺ͹ŎϨвϖޒʨମŭࠓʜԶˢҗȃՕl࠙ˑߓ׷П~̬ʡҩŽĲŏҹ¿ѳЭٔǑgǣ܍ϙŧٕť٩ϕփǩǋ̋ງӗřĻɶįȓőñĺǕǓ؝ƩŗƹģǺؓʭݏƓ½ŢȰ~˅ÚҳЕʿñȳǎȿǅɉĢWůǡÝ´ʂ̺Ø৬װМĪˈwęęǞŏĆĮΒÅȻǜȦʶ୒ӌȲó^ȶ˸ɒЌȖ͒kȟƢð̺ΖŤʛºƘҤ˄ƔͰ˩ɍࢣɛʿȤàŲ̂m˻ĦɋƇŋj҃Ƌ؁ьȿùωȚݑɃĩŉڅsΞŴäˆ˱ŸϊӽאϬΌ؇ΩĪɻटǁϳĄݑԔ˝Ҥ̎Фķ­ƭ̼ƤɨƧʸƖСĆː¤ƍÈȵĕवÌȸƮΉ¶LĘʕơʡȞfǜʵT_Ė̠ɧĜϺÈāȘњ̼ξpƚǴǟïMʜΒĦqƺϺ˜ĹķğȞøǼ¹֔Ȃ˶ɚʸÛܾĘ˒ɖǫζхƶҸŨÜƪɱƜՇğࢡχͫɸºȓӍƒ੟œএň˳ŪÆǖљȘ٬ňਹŘֹȢහФ٦Yũǀ૆ɨ۔[ɋBŝ̡˴ō๘ДȪΞýïŪڝÞՃͦƴŤ٪ЧଠŇǊх¶҅ıϫŰŘːຽèӿшᖉن΀ÆƞϮঔEনżဤજǉƛࣞŤ݊ʌɂʿ¨Ȁάx׍ĢʹŶ̮üÂŉૼĤ௄Ң@ĭݠƝӉǉƤïڴɎࠆʡ߲Ōذ§ɐÑƓǃՊ»Ƨĝᖨ¤ೂʃཐµՀŵဖĞіéદ͉;E@݃"]],encodeOffsets:[[[-159315,19469]],[[-160613,21272]],[[-160242,21435]],[[-160986,21725]],[[-161586,21972]],[[-163197,22459]],[[-82989,25311]],[[-82311,25746]],[[-99502,26788]],[[-82111,27934]],[[-93996,30209]],[[-86945,30355]],[[-91365,30807]],[[-121188,34187]],[[-122924,34733]],[[-122759,34898]],[[-77357,36086]],[[-75912,40634]],[[-74250,41970]],[[-71657,42256]],[[-72202,42370]],[[-72951,42488]],[[-69823,45397]],[[-125331,48533]],[[-125514,49313]],[[-97078,50179]],[[-180517,53036]],[[-182148,52890]],[[-181399,52958]],[[-180831,53112]],[[184042,53152]],[[181674,53128]],[[-177718,53388]],[[-176603,53527]],[[-178869,53284]],[[177893,53617]],[[176960,54286]],[[-171995,54626]],[[-170614,55195]],[[-169821,55369]],[[-169534,55436]],[[-166193,56164]],[[-167399,56301]],[[-163343,56476]],[[-134491,56402]],[[-163709,56452]],[[-136050,56212]],[[-164177,56666]],[[-164541,56643]],[[-136504,56877]],[[-159299,57161]],[[-134122,56821]],[[-136771,57692]],[[-135966,57598]],[[-135283,57456]],[[-157909,57872]],[[-173829,57995]],[[-135932,57883]],[[-137205,58210]],[[-136567,58372]],[[-156679,58496]],[[-138209,58728]],[[-156567,59212]],[[-138987,59643]],[[-137912,59558]],[[-156074,59761]],[[-156145,59889]],[[-164781,59983]],[[-151574,61507]],[[-151281,61249]],[[-170122,61833]],[[-149907,61901]],[[-151202,61902]],[[-176888,61909]],[[-175578,65168]],[[-144386,70425]]]},properties:{name:"美国",childNum:76,cp:[-99,38]}},{geometry:{type:"MultiPolygon",coordinates:[["@@§QûD«TæBbëĄÂfE´ÍŰmſ"],["@@d´fĂèhiGo࢟ӹҬƝńƧɀÓǂ@Ā{`ZZǦƺt¸Ƥó´s]ÆđjĭäOĀmÂn¤[b¯LývWŴ|ʜƣЊѹʫǝªYųɏXρʋ͛Ŕˁ_ʱɿƸ͊˴̋ˀׁ̙ͅĢųǙÌ̳է}˼ÝƕÂţȕÍƧʩسîʗſËȽʒí ŗπÉϡɚɗ҉؋_ȯÓMx«xýI÷ÙQĹ£ĽtŃČȭʱoWĢBŠ^ƾäǜՓɐ̝KફبҝƸ੿ۆӣरͿƶɇñڍ̫Ʈ[̠ŀɑƜȨՋĦٝϤĥĭ˙˔ˡϏǂǷʡѯÇ˛ɡżэčñ࢓¸AᶢᓢҼᏠউࠜݷৼŘਢÝϴƎӺͻʴεʠĨùࠡЪUǰۅਐdƪƗÅȁȴŹʀXɈӎҤຘۖ"]],encodeOffsets:[[[72916,40850]],[[72650,43263]]]},properties:{name:"乌兹别克斯坦",childNum:2,cp:[64.5546875,41.3642578125]}},{geometry:{type:"Polygon",coordinates:["@@ÿŊňÒǛ"],encodeOffsets:[[-62642,13474]]},properties:{name:"圣文森特和格林纳丁斯",childNum:1,cp:[-61.203125,13.2587890625]}},{geometry:{type:"MultiPolygon",coordinates:[["@@Ñäźļ®ķŕç"],["@@ķǦĈíÅ"],["@@ËȳСĂǄĖƺíưŊ"],["@@|SwÌǷͯΏɷeғˏ˧ĉɏ¸ʩśŧΥЙַ̎]Ɲǔ͑\\ǱŖĴɛϖΥƦ࣭ւùɋӛȋǑ͵ݱΟ̳ΕéEžƃŠ͇ǕʋeѻϦ˫খ΃ͺȫ@ҢԺ̍ϖǋզ~ٚ̎ֈOɀ̓ĠԧŏߣםۤԛŘ͡ē݅Ǜ˴ɝźèٚɳ˺ŋКɗŴʵÅ̠ԄŘמừψ̤ʒЂ՜ǐ՗ʕĸ͉ǌƩõeŘ˱ѥۻв٣͆Ħƀǀ̜ω۞tδਤ΄ŖŮʖWǖ́¡ÿɘìǲǖä̼וڮ¡ήɫĒЅƀǑཤŞͪ̿؈ƿɼz֌̠Ϧџ§þ᎚ĘсǍ҃]Ȓȯ¯ȝǆŨȖΗČČÊ»CƂâG˺˿}ƶƬäڞ҃ȗǥȋү̷E˄ƽцƴՒrŴÉƼȱcµĭ³s}ĝЗȫǣɷĤǷuğ¦±¼W¶nÖC ]h_H}÷³˕ƫΫÕµęnÙ~ÇA½pƝÅßãóġ^ǬțǶȥǲȡ"]],encodeOffsets:[[[-62461,9081]],[[-62280,9358]],[[-65381,11399]],[[-62199,5327]]]},properties:{name:"委内瑞拉",childNum:4,cp:[-66.59814453125,6.43359375]}},{geometry:{type:"Polygon",coordinates:["@@Ƽʷ£ļþ"],encodeOffsets:[[-66320,18222]]},properties:{name:"美属维尔京群岛",childNum:1,cp:[-64.734375,17.74853515625]}},{geometry:{type:"MultiPolygon",coordinates:[["@@̥ƙ˼Ǹj"],["@@ĹmŸŊ}ě"],["@@ǗĽÔƨń©"],["@@ҿȉ±ȕǃęЙªÐɟǟǩnœӵϟ̥ࠇɢϵԢұgȑĝx௴ணǒRڔߟМ౫ӝŸ˗j̗ğŶĭėðɉĉrOׅƅŏ«ɋݡσÿƩث˓ɉɚ·ɕȃŖķÏŖi`űʗF˒Ƴǅɍϫ̦άэãſչψˠͿTǓ֗ʭ͕ϵ́łŲÝ²vڮȪ͞ʁǨśȥȮΤļǒƖAǮɨÇúĚ̌ĈŁʼÍEȲʯɎI˺žļͤÑ^ɘʊ~њ˚ƲĨĖ֔Ŋ΂ɯׂǀӠIĨV®iqÄÚÞ¾ÒhÆ°µæĕØķĂ·¸ĩƸpƠê~HüϹʺĲeV©éġƄYƜO²oÞțɜɛǖ˃˔ēȸÏĀ¹Ü˿Ʉwú¶ĶD੉ռHtĄ°ÀWæêfzFǔNʊ×PžŖ¶è\\ÊĨĪBÄòűFkh_ÂIĹĕVqbÒ®t¨üȟƤŻþÿϹȽƟêɅ¼ęªȁʼÂĊΒĕ®{ÔcQwõÝCáȔϣЌ¤¼ªƜȮÄіʫ̂˔ƔƳņǌ˒ȭǜɔȔąˆĲƬ˄ΊǬӊΡʰ¢Ōĥɚ¨ȨŉȕɷĨѭʶ¯͊˅΄Ǵū"]],encodeOffsets:[[[106562,10641]],[[110102,21429]],[[110186,21727]],[[110564,22025]]]},properties:{name:"越南",childNum:4,cp:[105.78662109375,15.9716796875]}},{geometry:{type:"MultiPolygon",coordinates:[["@@ŧéŉŮ~ŌȴǏ"],["@@̇Ì|ȒņZǆʷ"],["@@ŞŹ»đ̭ôĪƄƢT"],["@@ɟsƖʾš"],["@@̯ĜȠŮŐɉ"],["@@Τ̓͗ėčʹǓØ¢ǐŖÞƯ"],["@@ȥ_ˠƚùŹ"],["@@Ä˥ɠȆŀэęř˯§ŃȎÁٜƬƹ"],["@@ŻgĈĄ²àĳ"],["@@ąĲöâPǓ"]],encodeOffsets:[[[173560,-20009]],[[173399,-19394]],[[172489,-17963]],[[172490,-17181]],[[172336,-16728]],[[171431,-16482]],[[171942,-15806]],[[170748,-15182]],[[171607,-14603]],[[171509,-14240]]]},properties:{name:"瓦努阿图",childNum:10,cp:[168.0302734375,-16.666015625]}},{geometry:{type:"MultiPolygon",coordinates:[["@@ϧœŨϊmŲƕ"],["@@ƀȁ¡ĳʻZȱɲϐª"]],encodeOffsets:[[[-175569,-14383]],[[-176469,-13788]]]},properties:{name:"萨摩亚",childNum:2,cp:[-172.1162109375,-13.75537109375]}},{geometry:{type:"MultiPolygon",coordinates:[["@@Τv˘ġ͍ǉ·͹ǶȀƶȔß"],["@@ÇĖþ½"],["@@ÿÌºtą"],["@@ُ̕Ź˱ʧݧίဇӳֳӳ֭Cӧ͗ԳǑोŃԳѭΝBԥǫ̷Řūɋӌ¨ΨǋˌŹެãǎǕČŢĀçˠĺ̈́˸̬ˊv֜ȒƂмǇਚĒ͚Ŀ৊ȼʽƖMʤƒŚ˲ӾתܶΦូΒजጉ"]],encodeOffsets:[[[55054,12941]],[[43783,14034]],[[43815,14307]],[[54360,17048]]]},properties:{name:"也门",childNum:4,cp:[48.5849609375,15.658203125]}},{geometry:{type:"MultiPolygon",coordinates:[["@@ɡǘÐÊę"],["@@ƾӋÃ౑ӯǶŅóĳřʇεH̹ÜM°ĻŀǓǰŁǐ³ɰ]ǺHYŐlǴxŤ~NôyòLźyΤVĠD̏଍ȽΟߙٍ଩࿋౫ફହݫկȧԻnșʣӑ¾ƩǏșIݭƴίõ׵Òʷ·ϧʭੑùё˓؇ƞĺțŤɡ[áʀɃuȧğƄæІӧݞĪĴƆǜȴīٚܧઢͭ࢔ǭͨʕ͢ʶƒ¶nŌü¶¶ļŎďƞŗöέܨǁ܎«ìÊƚȐƄφļ@Ţ@ᲄϜ̵̦٥ŷ۝ĊęߤP¨ĆȈØä²łǈɈƜÞ¦ɾ֦ɪƚȬEъʹÚsȊMŚğݐ[ʰĀͦޒĶČɠ¶°͒˼ɀ֎ֶήͮΐՊǴĘðÊĮİÆȠhZBʈ Ȭʎěɨɂ̦Uļú³ɐࣣɈ·","@@Ɯ˳͞ˑʮÒĚɜ̈́ɊlϜǨȀŶŒ²ŀĺíȖ֧ђYģkȩïůßĿÿȉÇχӡȥęŘ˅"]],encodeOffsets:[[[38766,-48070]],[[32563,-24465],[27847,-30659]]]},properties:{name:"南非",childNum:2,cp:[27.15283203125,-34.54443359375]}},{geometry:{type:"Polygon",coordinates:["@@ĐŽĐđ[ûuëǾǓRį`ĞƋ̳ʣòʱģȷ[Mįàſ©ΟôǏƠҋ̓Oѯʟ̫ńĉƸˏƖÌ®Ó᠁ࠑƐշޅ­ӗʓŷҙ̩۟މࢿȭéϑĦ˳إƪɍȌɥ¨ϩݧƇঽ࡚ǵ֢A౞@˒@˒@ڠȘ@൒@ĶZåǄH²pĜØފcܔͲɑXʋފǤ¼Ή֪ɡڢÙˮ͖Βխ۶ʓŜˋƮõʆϋǀ{̒ŲȄǃjંʋÓmǅΟÎӥҌċȶɘࡢܸǟϢЀτzʦ༔ʖâǇ¾õÜÝĞ»ɰJĊð¹lûİēȶFÝlۂɥƎíÜǷŸf"],encodeOffsets:[[33944,-9834]]},properties:{name:"赞比亚",childNum:1,cp:[27.82080078125,-13.1171875]}},{geometry:{type:"Polygon",coordinates:["@@ǵḀ̄TɁ}ɩʍĜȩʇYA¥ßàǍ¾aȄࡗȲ́ЬTҼͯrđ͆ࡓӀȕԌבࠂ`ƨئƩ˴ϒĥȮêފࣀ̪۠ŸҚӘʔކ®̑ڢyעͽࡐʃÑƝĮఏʗӥŴƍÓʇǸԃп֥śЏÜƉࡁࡃšđ"],encodeOffsets:[[32039,-22939]]},properties:{name:"津巴布韦",childNum:1,cp:[29.1181640625,-19.02197265625]}},{geometry:{type:"Polygon",coordinates:["@@ڽը¿ުەߖ٬֖NΦxHޠцǒŴ\\ǔéº`Ęfú[ǜ¹~}¢ũYĨĀcĖÌ£¢áfÁnÛ½˩ƄÇÞŻ~eÖBŒvİ¤RXĩÌĄ§a÷Îŕ÷ĸȣ¡ıǽûsmQ}«»ď§řjʅõōDđ³Û«ŷ³அɘŅĭāuƕɳ`«Ī¢§NÙéõʠ{ɩɥƤǵšɇ"],encodeOffsets:[[75785,34052]]},properties:{name:"未明确地区1",childNum:1,cp:[74.68017578125,35.14501953125]}},{geometry:{type:"MultiPolygon",coordinates:[["@@͙̄͟ƹիԠύfʛϋӻýģлʫ@˭ƪǕIđmɜ\\cȝ`¥CƴˁȖƈʊƣǶɪɦʟ|öÜêO¡¨ĩ_¬ƖɴĂxĮņஆɗŸ´Ü¬Ĕ´ŌCʆöŚiĐ¨®¼P~tnǾü~Ðd¢̀ǊŰÜŀÄĒ¬Ȳ_́êǁƘ˹ҎǹÒĽȱǷ´ǡæͅìíƐĵn­ĵ§rчɃŝƑŢa¸ȵw"]],encodeOffsets:[[[80376,33312]]]},properties:{name:"未明确地区2",childNum:1,cp:[76.48291015625,33.89111328125]}}],UTF8Encoding:!0};
t.registerMap("world",r)});
;sugar.define("sugar:widgets/charts/_mixin/echarts.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=e("sugar:node_modules/tslib/tslib.js"),s=e("sugar:utils/i18n.ts"),n=e("sugar:node_modules/react/index.js"),a=e("sugar:node_modules/echarts/dist/echarts.js");e("sugar:node_modules/echarts/extension/bmap/bmap.js"),e("sugar:widgets/charts/map/china.ts"),e("sugar:widgets/charts/map/world.ts"),e("sugar:node_modules/echarts-gl/dist/echarts-gl.js"),e("sugar:node_modules/echarts-wordcloud/dist/echarts-wordcloud.js"),e("sugar:node_modules/echarts-liquidfill/dist/echarts-liquidfill.js");var r=e("sugar:node_modules/amis/lib/index.js"),o=e("sugar:node_modules/react-dom/index.js"),h=e("sugar:node_modules/lodash/debounce.js"),d=e("sugar:utils/resize-sensor.ts"),p=e("sugar:widgets/pop-menu/pop-menu.tsx"),c=e("sugar:node_modules/lodash/get.js");e("sugar:widgets/charts/theme/_register-theme.ts");var l=["3d-map-line","3d-map-bar","bmap-scatter","bmap-line"],u={componentWillMount:function(){this._refresh=this._refresh.bind(this),this._initChart=this._initChart.bind(this),this._disposeChart=this._disposeChart.bind(this),this._initResizeSensor=this._initResizeSensor.bind(this),this._resize=this._resize.bind(this),this._export_as_image=this._export_as_image.bind(this),this._handleInitPopMenu=this._handleInitPopMenu.bind(this),this._bindClickEvent=this._bindClickEvent.bind(this),this._handleDrillDown=this._handleDrillDown.bind(this),this._handleDependence=this._handleDependence.bind(this),this._toggleExportData=this._toggleExportData.bind(this),this._handleMouseDownInMap=this._handleMouseDownInMap.bind(this),this.getDrillDownParam&&(this.getDrillDownParam=this.getDrillDownParam.bind(this)),this.getDependenceParam&&(this.getDependenceParam=this.getDependenceParam.bind(this)),this.highLightState={seriesIndex:-1,dataIndex:-1},this.props&&this._toggleExportData(this.props.banDownLoad),this.hierarchyDDType=""},componentDidMount:function(){"pending"!==this.props.hub.data.loadState&&this._refresh(this.props)},componentWillReceiveProps:function(e){if(this.willReceiveProps&&this.willReceiveProps(this.props,e),this.props.chartConfig!==e.chartConfig||this.props.chartData!==e.chartData||this.props.theme!==e.theme||this.props.drillDownOpen!==e.drillDownOpen){var t=!1;this.props.chartData!==e.chartData&&this.props.chart.isDashChart&&"calendar-heatmap"!==this.props.chart.type&&"editor"!==this.props.mode&&(t=!0),this._refresh(e,t)}else if(this.props.dependenceState!==e.dependenceState){var i=this.props.dependenceState,s=e.dependenceState;i&&s?(i.seriesIndex!==s.seriesIndex||i.dataIndex!==s.dataIndex)&&this._refresh(e,!0,!0):(!i&&s||i&&!s)&&this._refresh(e,!0,!0)}this.props.banDownLoad!==e.banDownLoad&&this._toggleExportData(e.banDownLoad);var n=e.chart.drillDown;e.chart.config.hierarchyDrillDownOpen&&n&&n.length?n[0].ddType!==this.ddType&&(this._bindClickEvent(e),this.ddType=n[0].ddType):this.ddType="",e.index!==this.props.index&&this._initResizeSensor()},shouldComponentUpdate:function(){return!1},componentWillUnmount:function(){this._disposeChart(),this.unWatchResize&&this.unWatchResize(),this.props&&this.props.toolbarHandler&&this.props.toolbarHandler.removeToolbarItem("export_echarts_as_image"),this.willUnmount&&this.willUnmount.call(this)},_toggleExportData:function(e){var t=this,i=c(this,"props.toolbarHandler",{}),n=i.removeToolbarItem,a=i.addToolbarItem;n&&a&&(e?n("export_echarts_as_image"):a({type:"button",key:"export_echarts_as_image",label:s.default("导出图片"),icon:"fa fa-file-image-o m-r text-info-dker",onClick:function(){t._export_as_image()}},!0))},_export_as_image:function(){g(this.chart,this.props.chart.name)},_initChart:function(e){var t=o.findDOMNode(this),i="canvas";e.chartConfig&&e.chartConfig.useSVG&&(i="svg");var s=e.theme.registered?e.theme.hash:e.theme.config.chartTheme;this.chart=a.init(t,s||"sugar",{renderer:i}),t&&t.addEventListener("contextmenu",this._handleInitPopMenu),this._initResizeSensor()},_disposeChart:function(){try{var e=o.findDOMNode(this);e&&e.removeEventListener("contextmenu",this._handleInitPopMenu);var t=this.chart;t&&t.clear&&t.clear(),t&&t.dispose&&t.dispose(),this.chart=null}catch(i){console&&console.log(i.message||s.default("echarts销毁出错！")),this.chart=null}},_initResizeSensor:function(){this.unWatchResize&&this.unWatchResize();var e=o.findDOMNode(this);this.unWatchResize=d.resizeSensor(e,h(this._resize,250))},_refresh:function(e,t,i){void 0===t&&(t=!1),t&&this.chart||(this._disposeChart(),this._initChart(e)),this.refresh(e,i),this._bindClickEvent(e),e.chartConfig&&e.chartConfig.echartsGroup&&(this.chart.group="sugar",a.disConnect("sugar"),a.connect("sugar"))},_resize:function(){try{this.chart&&this.chart.resize&&this.chart.resize()}catch(e){console&&console.log(e.message||s.default("echarts resize出错！"))}},_bindClickEvent:function(e){this.chart&&e.chart&&e.drillDownOpen&&e.chart.drillDown&&e.chart.drillDown.length&&e.chart.drillDown[0].ddOpen?this.chart.on("click",this._handleDrillDown):this.chart&&e.chartConfig&&e.chartConfig.dependenceOpen&&e.chartConfig.dependences&&e.chartConfig.dependences.length&&e.chartConfig.dependences[0].cddOpen&&this.chart.on("click",this._handleDependence)},_handleDependence:function(e){if("timeline"!==(null===e||void 0===e?void 0:e.componentType)&&"graphic"!==(null===e||void 0===e?void 0:e.componentType)){var t=this.props.chartConfig;if(t.dependenceOpen&&t.dependences&&t.dependences.length&&t.dependences[0].cddOpen){var n=null;if(this.getDependenceParam&&(n=this.getDependenceParam(e)),!n||void 0!==n.item){if(!n||!n.item||!n.state)return void r.toast.error(s.default("图表「"+this.props.chart.name+"」联动参数错误"));var a=this.highLightState.seriesIndex,o=this.highLightState.dataIndex,h=n.state.seriesIndex,d=n.state.dataIndex;a===h&&o===d?(this.props.chart.handleEvent("cancelDependence",this.props.mode),this.highLightState={seriesIndex:-1,dataIndex:-1}):(this.props.chart.handleEvent("dependence",this.props.mode,{dependenceIndex:0,dependenceState:n.state,dependenceItem:{item:n.item,fireKey:""}}),this.highLightState=i.__assign({},n.state))}}}},_handleDrillDown:function(e){if("timeline"!==(null===e||void 0===e?void 0:e.componentType)&&"graphic"!==(null===e||void 0===e?void 0:e.componentType)){var t=this.props.chart.drillDown;if(this.props.drillDownOpen&&t&&t.length&&t[0].ddOpen){var i=null;if(this.getDrillDownParam&&(i=this.getDrillDownParam(e)),void 0!==i)return i?void this.props.chart.handleEvent("drillDown",this.props.mode,{drillDownIndex:0,drillDownItem:{item:i,fireKey:""}}):void r.toast.error(s.default("图表「"+this.props.chart.name+"」下钻参数错误"))}}},_handleInitPopMenu:function(){var e=this,t=p.popMenu.getPopMenuTree()||[];t&&!c(this,"props.banDownLoad")&&t.push({icon:"fa fa-file-image-o",name:s.default("导出图片"),cb:function(){return g(e.chart,e.props.chart.name)}}),p.popMenu.setPopMenuTree(t)},_handleMouseDownInMap:function(e){this.props.chart.isDashChart||"editor"!==this.props.mode||l.includes(this.props.chart.type)&&e.stopPropagation()},render:function(){return n.createElement("div",{onMouseDown:this._handleMouseDownInMap,className:"chart echarts",style:{height:"100%"}})}};t.default=u;var g=function(e,t){if(e&&e.getDataURL){var i="svg"===e.getZr().painter.getType(),s=i?"svg":"png",n=document.createElement("a");n.download=t+"."+s,n.target="_blank";var a=e.getDataURL({type:s,pixelRatio:2});n.href=a;var r=navigator.userAgent,o=r.match(/MSIE\s([\d.]+)/)||r.match(/Trident\/.+?rv:(([\d.]+))/),h=r.match(/Edge\/([\d.]+)/);if("function"!=typeof MouseEvent||o||h)if(window.navigator.msSaveOrOpenBlob){for(var d=atob(a.split(",")[1]),p=d.length,c=new Uint8Array(p);p--;)c[p]=d.charCodeAt(p);var l=new Blob([c]);window.navigator.msSaveOrOpenBlob(l,t+"."+s)}else{var u='<body style="margin:0;"><img src="'+a+'" style="max-width:100%;" /></body>',g=window.open();g.document.write(u)}else{var m=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!1});n.dispatchEvent(m)}}}});
;sugar.define("sugar:widgets/charts/_hoc/debug/debug-dialog.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=e("sugar:node_modules/tslib/tslib.js"),l=e("sugar:utils/i18n.ts"),s=e("sugar:node_modules/react/index.js"),n=e("sugar:node_modules/lodash/get.js"),i=e("sugar:node_modules/amis/lib/index.js"),d=e("sugar:stores/index.ts"),r=e("sugar:widgets/charts/chart-manager.tsx"),o=e("sugar:widgets/code-editor.tsx"),m=e("sugar:widgets/sql-model-selector/sql-model-editor.tsx"),c=e("sugar:widgets/ctrl-panel/data-bind-ctrl/index.tsx"),u=e("sugar:widgets/api-adaptor-selector/api-adaptor-editor.tsx"),p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.componentWillMount=function(){this.onClose=this.onClose.bind(this),this.onSQLModelUpdate=this.onSQLModelUpdate.bind(this),this.onShowApiAdaptorDialog=this.onShowApiAdaptorDialog.bind(this),this.onApiAdaptorUpdate=this.onApiAdaptorUpdate.bind(this),this.setState({showQuickModifySQLDialog:!1,showQuickModifyApiAdaptorDialog:!1,adaptorHash:""})},t.prototype.onClose=function(){this.setState({showQuickModifySQLDialog:!1,showQuickModifyApiAdaptorDialog:!1})},t.prototype.onShowApiAdaptorDialog=function(e){this.setState({showQuickModifyApiAdaptorDialog:!0,adaptorHash:e}),this.props.apiAdaptorStore.detailMap.loadDetail(e)},t.prototype.onSQLModelUpdate=function(e,t){var a=this;this.props.sqlModelStore.update(e).then(function(e){e.res&&"done"===e.state&&(a.onClose(),i.toast.success(l.default("SQL模型更新成功")),t?a.props.dataKey?a.props.chart.loadDebugOtherData(a.props.dataKey):a.props.chart.loadDebugData():a.props.onClose())})},t.prototype.onApiAdaptorUpdate=function(e,t){var a=this;this.props.apiAdaptorStore.update(e).then(function(e){e.res&&"done"===e.state&&(a.onClose(),i.toast.success(l.default("数据转换器更新成功")),t?a.props.dataKey?a.props.chart.loadDebugOtherData(a.props.dataKey):a.props.chart.loadDebugData():a.props.onClose())})},t.prototype.getDataset=function(e,t){var a=this,i=e.data,d=i.dataset,r=i.multiData,o=i.isMulti,m=i.datasetColumnHeader,c=i.runSqlTime,u=(o?r.dataset:d)||[],p=(o?r.datasetColumnHeader:m)||[],g=o?n(u,"[0][0]"):u[0];if(g&&!p.length)for(var f in g)p.push([f]);return s.createElement("div",{className:"col-md-"+t},s.createElement("div",{className:"info-title"},l.default("SQL查询结果"),s.createElement("span",{className:"text-info-lter"},l.default("（耗时 「"+((o?(r.runSqlTime||[]).reduce(function(e,t){return e+t},0):c)||0)+"」ms, 共「"+((o?u.map(function(e){return(null===e||void 0===e?void 0:e.length)||0}).reduce(function(e,t){return e+t},0):u.length)||0)+"」行"),!o&&u.length>1e3?l.default("，下面展示前1000行"):"","）"),"："),o?u.map(function(e,t){return[s.createElement("div",{key:"time-"+t},l.default("耗时 「"+n(r,"runSqlTime["+t+"]")+"」ms，共「"+e.length+"」行"),e.length>1e3?l.default("，下面展示前1000行"):""),a.getTable(e,p[t],t)]}):this.getTable(u,p,0))},t.prototype.getTable=function(e,t,a){return e.length&&t&&t.length?s.createElement("div",{className:"dataset-table",key:"table-"+a},s.createElement("table",{className:"table table-bordered"},s.createElement("thead",null,s.createElement("tr",null,t.map(function(e,t){return s.createElement("th",{key:t},e.name||e)}))),s.createElement("tbody",null,e.map(function(e,a){return a>=1e3?null:s.createElement("tr",{key:a},t.map(function(t,a){return s.createElement("td",{key:a},null!=e[t.id||t]&&e[t.id||t].toString?e[t.id||t].toString():e[t.id||t])}))})))):s.createElement("div",{className:"dataset-table",key:"table-"+a},"没有查询到数据")},t.prototype.getDataModelSql=function(e){var t=e.data,a=t.sql,s=t.isMulti,i=t.multiData;return s?((null===i||void 0===i?void 0:i.sql)||[]).map(function(e,t){return"/* "+l.default("耗时")+n(i,"generateSqlTime["+t+"]","")+"ms */\n"+e}).join("\n\n")||"":a||""},t.prototype.render=function(){var e,t=this,n=this.props,d=n.dataKey,p=n.chart,g=n.debugData,f=n.onClose,h=null===(e=null===g||void 0===g?void 0:g.data)||void 0===e?void 0:e.isOnlyDataset,E=d?g.other.get(d):g,v=d?p.config.subChartConfig[d]:p,N=s.createElement("div",null,"TODO");if("pending"===E.loadState)N=s.createElement(i.Spinner,{overlay:!0,size:"lg"});else if("error"===E.loadState)N=s.createElement("div",null,E.loadError.message?E.loadError.message:l.default("获取调试信息错误，如果使用的SQL模型，可能是SQL查询结果太大导致内存溢出"));else if("api"===v.dataType){var y=null;if(0===E.data.status){if(0!==E.data.data.status)y=s.createElement("div",{className:"error"},l.default(E.data.data.msg||"API返回的status不为0"));else if(E.data.data.data){var S=r.validate(E.data.data.data,p.type,v.config,!0,d?v.type:"");y=S!==!0?s.createElement("div",{className:"error"},l.default(S||"数据格式有误")):s.createElement("div",{className:"success"},l.default("格式正确"))}else y=s.createElement("div",{className:"warning"},l.default("无数据"));y=s.createElement("div",{className:"col-md-12"},s.createElement("div",{className:"info-title"},l.default("数据调试结论：")),y)}else y=s.createElement("div",{className:"col-md-12"},s.createElement("div",{className:"info-title"},l.default("数据调试结论：")),s.createElement("div",{className:"error"},l.default(E.data.msg||"后端post请求错误")));if(E.data.apiProOpen){var b=JSON.stringify(E.data.headers||{},null,2),D=JSON.stringify(E.data.postData||{},null,2),O=JSON.stringify(E.data.apiProPostList||{},null,2),C={minHeight:120,maxHeight:240},A=18*Math.max(b.split("\n").length,D.split("\n").length,O.split("\n").length),M=null,w=null,x=null,T=null;"GET"===E.data.apiProMethod?(M=s.createElement("div",{className:"col-md-12"},s.createElement("div",{className:"info-title"},l.default("API请求方式"),"：",s.createElement("span",{className:"text-info-lter"},"GET"))),x=s.createElement("div",{className:"col-md-6"},s.createElement("div",{className:"info-title"},l.default("可使用的参数（过滤条件等）：")),s.createElement(o.default,{contaierClassName:"p-l-sm",value:D,language:"json",style:a.__assign({},C),height:A,options:{readOnly:!0}})),w=s.createElement("div",{className:"col-md-6"},s.createElement("div",{className:"info-title"},l.default("Header头部：")),s.createElement(o.default,{contaierClassName:"p-l-sm",value:b,language:"json",style:a.__assign({},C),height:A,options:{readOnly:!0}}))):(M=s.createElement("div",{className:"col-md-12"},s.createElement("div",{className:"info-title"},l.default("API请求方式"),"：",s.createElement("span",{className:"text-info-lter"},"POST"),"，",l.default("POST数据方式"),"：",s.createElement("span",{className:"text-info-lter"},c.apiPostTypeMap[E.data.apiProPostType]))),x=s.createElement("div",{className:"col-md-4"},s.createElement("div",{className:"info-title"},l.default("可使用的参数（过滤条件等）：")),s.createElement(o.default,{contaierClassName:"p-l-sm",value:D,language:"json",style:a.__assign({},C),height:A,options:{readOnly:!0}})),w=s.createElement("div",{className:"col-md-4"},s.createElement("div",{className:"info-title"},l.default("Header头部：")),s.createElement(o.default,{contaierClassName:"p-l-sm",value:b,language:"json",style:a.__assign({},C),height:A,options:{readOnly:!0}})),T=s.createElement("div",{className:"col-md-4"},s.createElement("div",{className:"info-title"},l.default("POST数据内容：")),s.createElement(o.default,{contaierClassName:"p-l-sm",value:O,language:"json",style:a.__assign({},C),height:A,options:{readOnly:!0}})));var L=s.createElement("div",{className:"col-md-12"},s.createElement("div",{className:"info-title"},l.default("API的URL地址为：")),s.createElement("div",{className:"post-url"},l.default(decodeURI(E.data.url||"无")))),P=null,_=null;if(0===E.data.status){var k=JSON.stringify(E.data.data||null,null,2);_=s.createElement(o.default,{contaierClassName:"p-l-sm",value:k,language:"json",style:{minHeight:200,maxHeight:500},height:18*k.split("\n").length,options:{readOnly:!0}})}if(E.data.adaptorDebugList&&E.data.adaptorDebugList.length){var H=E.data.adaptorDebugList.map(function(e,a){return s.createElement("div",{className:"col-md-12",key:a},s.createElement("div",{className:"row"},s.createElement("div",{className:"col-md-12"},s.createElement("div",{className:"adaptor-name text-info"},e.name),e.status?s.createElement("div",{className:"error"},e.msg||l.default("数据转换器执行错误")):null),s.createElement("div",{className:"col-md-6"},s.createElement("div",{className:"info-title with-btn"},l.default("转换器执行耗时")," ",s.createElement("span",{className:"text-info-lter"},e.time,"ms "),s.createElement(i.Button,{level:"info",size:"sm",onClick:function(){return t.onShowApiAdaptorDialog(e.hash)}},l.default("修改本数据转换器"))),s.createElement(o.default,{contaierClassName:"p-l-sm",value:e.content,language:"javascript",height:391,options:{readOnly:!0}})),s.createElement("div",{className:"col-md-6"},s.createElement("div",{className:"info-title"},l.default("转换器输入数据："),a?null:l.default("（API请求的返回结果）")),s.createElement(o.default,{contaierClassName:"p-l-sm",value:e.input,language:"json",height:180,options:{readOnly:!0}})),s.createElement("div",{className:"col-md-6"},s.createElement("div",{className:"info-title"},l.default("转换器输出数据：")),s.createElement(o.default,{contaierClassName:"p-l-sm",value:e.output,language:"json",height:180,options:{readOnly:!0}})),a!==E.data.adaptorDebugList.length-1?s.createElement("div",{className:"adaptor-debug-divider col-md-12"}):null))});P=s.createElement("div",{className:"col-md-12"},s.createElement("div",{className:"info-title",style:{marginTop:25}},l.default("API数据转换器执行情况"),E.data.time?s.createElement("span",{className:"text-info-lter"},l.default("（API请求耗时 「"+E.data.time+"」ms）")):null,"："),s.createElement("div",{className:"adaptor-debug-container"},s.createElement("div",{className:"row"},H)))}N=s.createElement("div",{className:"row debug-dialog"},y,M,L,s.createElement("div",{className:"col-md-12"},s.createElement("div",{className:"row"},x,w,T)),P,_?s.createElement("div",{className:"col-md-12"},s.createElement("div",{className:"info-title"},l.default(E.data.adaptorDebugList&&E.data.adaptorDebugList.length?"最终返回结果是":"API请求的结果是"),!E.data.time||E.data.adaptorDebugList&&E.data.adaptorDebugList.length?null:s.createElement("span",{className:"text-info-lter"},l.default("（API请求耗时 「"+E.data.time+"」ms）")),"："),_):null)}else{var L=s.createElement("div",{className:"col-md-12"},s.createElement("div",{className:"info-title"},window.sugarConfig.name," ",l.default("后端使用『POST』方式访问您绑定的API，各个语言下获取参数的方式请"),s.createElement("a",{href:"/docs/DataBind-API-Common",className:"post-url",target:"_blank"},l.default("参考这里")),l.default("，API的URL地址为：")),s.createElement("div",{className:"post-url"},l.default(decodeURI(E.data.url||"无")))),b=JSON.stringify(E.data.headers||{},null,2),D=JSON.stringify(E.data.postData||{},null,2),C={minHeight:200,maxHeight:400},A=18*Math.max(b.split("\n").length,D.split("\n").length),w=s.createElement("div",{className:"col-md-6"},s.createElement("div",{className:"info-title"},l.default("POST请求的『Headers』为：")),s.createElement(o.default,{contaierClassName:"p-l-sm",value:b,language:"json",style:a.__assign({},C),height:A,options:{readOnly:!0}})),x=s.createElement("div",{className:"col-md-6"},s.createElement("div",{className:"info-title"},l.default("POST的数据为（过滤条件等）：")),s.createElement(o.default,{contaierClassName:"p-l-sm",value:D,language:"json",style:a.__assign({},C),height:A,options:{readOnly:!0}})),_=null;if(0===E.data.status){var k=JSON.stringify(E.data.data||null,null,2);_=s.createElement(o.default,{contaierClassName:"p-l-sm",value:k,language:"json",style:{minHeight:200,maxHeight:2e3},height:18*k.split("\n").length,options:{readOnly:!0}})}N=s.createElement("div",{className:"row debug-dialog"},y,L,s.createElement("div",{className:"col-md-12"},s.createElement("div",{className:"row"},w,x)),_?s.createElement("div",{className:"col-md-12"},s.createElement("div",{className:"info-title"},l.default("POST请求的结果是"),E.data.time?s.createElement("span",{className:"text-info-lter"},l.default("（请求耗时 「"+E.data.time+"」ms）")):null,"："),_):null)}}else if("sql"===v.dataType||"dataModel"===v.dataType){var j=null;if(0===E.data.status)if(E.data.data){var S=r.validate(E.data.data,p.type,v.config,!0,d?v.type:"");j=S!==!0?s.createElement("div",{className:"error"},l.default(S||"数据格式有误")):s.createElement("div",{className:"success"},l.default("格式正确"))}else j=s.createElement("div",{className:"warning"},l.default("无数据"));else E.data.isMulti?(j=[],(E.data.multiData.msg||[]).forEach(function(e,t){[0,404].includes((E.data.multiData.status||[])[t])||j.push(s.createElement("div",{className:"error",key:"error-"+t},l.default(e||"SQL生成或者执行时发生未知错误")))})):j=s.createElement("div",{className:"error"},l.default(E.data.msg||"SQL生成或者执行时发生未知错误"));j=s.createElement("div",{className:"col-md-12"},s.createElement("div",{className:"info-title"},l.default("数据调试结论：")),j);var D=JSON.stringify(E.data.postData||{},null,2),C={minHeight:100,maxHeight:400},A=18*D.split("\n").length,x=s.createElement("div",{className:"col-md-12"},s.createElement("div",{className:"info-title"},l.default("POST的数据为（过滤条件等）：")),s.createElement(o.default,{contaierClassName:"p-l-sm",value:D,language:"json",style:a.__assign({},C),height:A,options:{readOnly:!0}})),q=this.getDataModelSql(E),Q=18*Math.max((E.data.originSql||"").split("\n").length,(q||"").split("\n").length),I=void 0!==E.data.originSql?s.createElement("div",{className:"col-md-6"},s.createElement("div",{className:"info-title with-btn"},l.default("原始伪SQL："),s.createElement(i.Button,{level:"info",size:"sm",onClick:function(){return t.setState({showQuickModifySQLDialog:!0})}},l.default("修改SQL模型"))),s.createElement(o.default,{contaierClassName:"p-l-sm",value:E.data.originSql||"",language:"sql",style:{minHeight:100},height:Q,options:{readOnly:!0}})):null,J=s.createElement("div",{className:void 0!==E.data.originSql?"col-md-6":"col-md-12"},s.createElement("div",{className:"info-title with-btn"},l.default("生成的SQL"),s.createElement("span",{className:"text-info-lter"},l.default("（耗时 "),(E.data.isMulti?(E.data.multiData.generateSqlTime||[]).reduce(function(e,t){return e+t},0):E.data.generateSqlTime)||0,"ms）"),"："),s.createElement(o.default,{contaierClassName:"p-l-sm",value:q||"",language:"sql",style:{minHeight:100},height:Q,options:{readOnly:!0}})),U=6,B=!1;E.data.datasetInternal&&JSON.stringify(E.data.dataset||[])!==JSON.stringify(E.data.datasetInternal||[])&&(U=4,B=!0);var K=this.getDataset(E,U),R=E.data.datasetInternal||[],z=[];if(R.length)for(var G in R[0])z.push(G);var F=B?s.createElement("div",{className:"col-md-"+U},s.createElement("div",{className:"info-title"},l.default("中间结果(行转列或数据补全等)："),s.createElement("span",{className:"text-info-lter"},l.default("（共「"+R.length+"」行"),R.length>1e3?l.default("，下面展示前1000行"):"","）"),"："),s.createElement("div",{className:"dataset-table"},s.createElement("table",{className:"table table-bordered"},s.createElement("thead",null,s.createElement("tr",null,z.map(function(e,t){return s.createElement("th",{key:t},e)}))),s.createElement("tbody",null,R.map(function(e,t){return t>=1e3?null:s.createElement("tr",{key:t},z.map(function(t,a){return s.createElement("td",{key:a},null!=e[t]&&e[t].toString?e[t].toString():e[t])}))}))))):null,k=JSON.stringify(E.data.data||{},null,2),W=k.length<3e4?s.createElement("div",{className:"col-md-"+U},s.createElement("div",{className:"info-title"},l.default("格式化后结果"),null!=E.data.formatDataTime?s.createElement("span",{className:"text-info-lter"},l.default("（耗时 「"+E.data.formatDataTime+"」ms）")):null,"："),s.createElement(o.default,{contaierClassName:"p-l-sm",value:k,language:"json",style:{minHeight:200},height:18*k.split("\n").length,options:{readOnly:!0}})):s.createElement("div",{className:"col-md-"+U},s.createElement("div",{className:"info-title"},l.default("格式化后结果，结果太大已截取前30000字符"),null!=E.data.formatDataTime?s.createElement("span",{className:"text-info-lter"},l.default("（耗时 「"+E.data.formatDataTime+"」ms）")):null,"："),s.createElement("textarea",{style:{width:"100%",height:500},value:k.substr(0,3e4),readOnly:!0}));N=s.createElement("div",{className:"row debug-dialog"},j,x,s.createElement("div",{className:"col-md-12 row"},I,J),s.createElement("div",{className:"col-md-12 row"},K,F,W))}else if("json"===v.dataType){var y=null;if(0===E.data.status){if(0!==E.data.data.status)y=s.createElement("div",{className:"error"},E.data.data.msg||l.default("JSON中status字段不为0"));else if(E.data.data.data){var S=r.validate(E.data.data.data,p.type,v.config,!0,d?v.type:"");y=S!==!0?s.createElement("div",{className:"error"},S||l.default("数据格式有误")):s.createElement("div",{className:"success"},l.default("格式正确"))}else y=s.createElement("div",{className:"warning"},l.default("无数据"));y=s.createElement("div",{className:"col-md-12"},s.createElement("div",{className:"info-title"},l.default("数据调试结论：")),y)}else y=s.createElement("div",{className:"error"},E.data.msg||l.default("获取静态JSON时发生未知错误"));var V=null;E.data.jsonContent&&(V=s.createElement(o.default,{contaierClassName:"p-l-sm",value:E.data.jsonContent,language:"json",style:{minHeight:200,maxHeight:2e3},options:{readOnly:!0},height:18*E.data.jsonContent.split("\n").length})),N=s.createElement("div",{className:"row debug-dialog"},y,s.createElement("div",{className:"col-md-12"},s.createElement("div",{className:"info-title"},l.default("请求的JSON结果是："),E.data.time?s.createElement("span",{className:"text-info-lter"},l.default("（请求耗时 「"+E.data.time+"」ms）")):null,"："),V))}return[h?null:s.createElement(i.Modal,{show:!0,backdrop:"static",contentClassName:"bigger-modal",key:"debug-dialog"},s.createElement(i.Modal.Header,{showCloseButton:!0,onClose:f},s.createElement(i.Modal.Title,null,l.default("图表数据调试：「"+v.name+"」"))),s.createElement(i.Modal.Body,null,N),s.createElement(i.Modal.Footer,null,s.createElement(i.Button,{level:"primary",onClick:f},l.default("确定")))),this.state.showQuickModifySQLDialog?s.createElement(m.default,{key:"sql-model-editor",mode:"update",onClose:this.onClose,onSubmit:this.onSQLModelUpdate,sqlModelEntity:this.props.sqlModelStore.detailMap.mapByHash.get(v.dataModelHash),isInDebug:!0}):null,this.state.showQuickModifyApiAdaptorDialog?s.createElement(u.default,{key:"api-adaptor-dialog",mode:"update",onClose:this.onClose,onSubmit:this.onApiAdaptorUpdate,apiAdaptorEntity:this.props.apiAdaptorStore.detailMap.mapByHash.get(this.state.adaptorHash),isInDebug:!0}):null]},t.displayName="ChartDebugDialog",t=a.__decorate([d.inject(function(e){return{sqlModelStore:e.sqlModel,apiAdaptorStore:e.apiAdaptor}}),d.observer],t)}(s.Component);t.default=p});
;sugar.define("sugar:widgets/charts/_hoc/debug/debug.tsx",function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=t("sugar:node_modules/tslib/tslib.js"),n=t("sugar:node_modules/react/index.js"),s=t("sugar:stores/index.ts"),i=t("sugar:widgets/charts/_hoc/debug/debug-dialog.tsx"),a=t("sugar:utils/exception.ts");e.default=function(t){var e;return s.observer((e=function(e){function s(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={open:!1,dataKey:void 0},t}return o.__extends(s,e),s.prototype.componentWillMount=function(){this.openDialog=this.openDialog.bind(this),this.closeDialog=this.closeDialog.bind(this)},s.prototype.componentDidCatch=function(t,e){a.captureException(t,e)},s.prototype.openDialog=function(t){void 0===t&&(t=""),this.state.open||this.setState({open:!0,dataKey:t})},s.prototype.closeDialog=function(){this.setState({open:!1})},s.prototype.render=function(){var e=this,s=this.props,a=s.hub,r=s.chart,u=a.debugData;return u&&"pending"===u.loadState?setTimeout(this.openDialog,10):u&&u.other&&u.other.forEach(function(t,o){t&&"pending"===t.loadState&&setTimeout(function(){return e.openDialog(o)},10)}),[n.createElement(t,o.__assign({},this.props,{key:"component"})),this.state.open&&u?n.createElement("div",{key:"event",style:{display:"none"},onMouseDown:function(t){t.stopPropagation()}},n.createElement(i.default,{key:"debugDialog",chart:r,debugData:u,onClose:this.closeDialog,dataKey:this.state.dataKey})):null]},s}(n.Component),e.displayName="ChartDebugHOC",e))}});
;sugar.define("sugar:widgets/ctrl-panel/chart-ctrl.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=e("sugar:node_modules/tslib/tslib.js"),l=e("sugar:utils/i18n.ts"),n=e("sugar:node_modules/react/index.js"),o=e("sugar:stores/index.ts"),i=e("sugar:widgets/charts/chart-manager.tsx"),r=e("sugar:sites/amis-renderer.tsx"),d=e("sugar:widgets/object-array-editor/object-array-editor.tsx"),s=e("sugar:widgets/data-model/data-model-selector/data-model-selector.tsx"),c=e("sugar:widgets/drill-down-ctrl/drill-down-ctrl.tsx"),u=e("sugar:widgets/ctrl-panel/chart-zoom-ctrl.tsx"),f=e("sugar:widgets/ctrl-panel/common/switch-with-tip.tsx"),p=e("sugar:widgets/amis-inline-switch.tsx"),m=e("sugar:services/chart-dependence.ts"),g=e("sugar:widgets/dependence-ctrl/dependence-ctrl.tsx"),h=e("sugar:utils/exception.ts"),b=e("sugar:widgets/charts/bmap-scatter/bmap-style.tsx"),y=e("sugar:widgets/sub-chart-ctrl/sub-chart-ctrl.tsx"),C=e("sugar:widgets/data-model/data-model-bind-drilldown/data-model-bind-drilldown.tsx"),v=e("sugar:widgets/charts/smart-chart/chart-recommend-list.tsx"),w=e("sugar:widgets/widget-template/template-dialog.tsx"),D=e("sugar:widgets/charts/utils/common.tsx"),x=[{type:"color",name:l.default("颜色"),key:"color",defaultValue:"#23b7e5"}],T=[{type:"color",name:l.default("颜色1"),key:"color",defaultValue:"#23b7e5",tdStyle:{minWidth:100}},{type:"color",name:l.default("颜色2(渐变色)"),key:"color1",defaultValue:"",tdStyle:{minWidth:100}},{type:"number",name:l.default("渐变起点（0-100）"),key:"ratio",step:5,min:0,max:100,defaultValue:90,tdStyle:{minWidth:140}}],S=new Set(["bar","bubble","calendar-heatmap","candlestick","cartesian-heatmap","funnel","gauge","line","liquid-fill","map","pie","pie-nested","radar","river","sankey","scatter","sunburst","treemap"]),_=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.componentWillMount=function(){},t.prototype.componentDidCatch=function(e,t){h.captureException(e,t)},t.prototype.render=function(){var e=this.props,t=e.chartEntity,o=e.updateChart,h=e.chartHub,_=e.sqlModelStore,O=e.isDrillDown,E=e.groupHash,N=e.widgetTemplate,k=h.data,z=i.getChartByType(t.type);if(!z)return l.default("当前系统没有这种图表「"+t.type+"」");var A=t.getParentChart(),B=!1;A&&(B=A.config.hierarchyDrillDownOpen&&O||!1);var H={groupHash:E,chart:t,hubConfigData:h.configData,data:k.data,other:k.other,sqlModelStore:_,isHierarchyDrillDown:B},L=[{type:"group",controls:[{type:"text",name:"name",label:l.default("图表标题")},{type:"text",name:"remark",label:l.default("图表简介"),size:"full"}]},{type:"group",controls:[{type:"range",name:"width",max:12,min:1,label:l.default("宽度")},{type:"number",name:"height",label:l.default("高度"),step:1,min:5}]}];if(z.canAutoHeight){var M=0===t.drillDownLevel?l.default("<br>建议：图表宽度为12时再开启此项设置，否则可能会导致页面布局被打乱"):"";L.push(p.amisInlineSwitch("config.chartAutoHeight",l.default("高度自适应"))),L.push({type:"tpl",tpl:'<span class="text-muted help-block">'+l.default("高度自适应是指图表高度自动调整，图表内部不出现纵向滚动条")+M+"<br>"+l.default("注意：预览时才生效，编辑模式下不生效")+"</span>",className:"m-t-n-sm"})}if(S.has(z.type)&&L.push({name:"config.useSVG",children:function(e){var t=e.onChange,o=e.value;return n.createElement(f.default,a.__assign({},{onChange:t,value:o,label:l.default("使用 SVG 渲染"),tipText:l.default("文档说明"),tipLink:"/docs/Chart-Common#SVG 渲染"}))}}),L=L.concat(t.drillDownLevel?[{type:"text",name:"link",label:l.default("标题链接")}]:[{type:"divider"},{type:"fieldset",collapsed:!0,title:l.default("标题设置"),collapsable:!0,headingClassName:"fieldset-title",controls:[{type:"group",controls:[{type:"button-group",name:"titleAlign",label:l.default("标题对齐"),labelClassName:"m-r-sm",size:"full",options:[{label:l.default("左"),value:"left"},{label:l.default("中"),value:"center"},{label:l.default("右"),value:"right"}]},{type:"color",name:"config.chartTitleColor",label:l.default("标题颜色"),format:"rgba",size:"full"}]},{type:"group",controls:[{type:"color",name:"config.chartTitleBgColor",label:l.default("标题背景颜色"),format:"rgba",size:"full"},{type:"number",name:"config.chartTitleFontSize",label:l.default("标题字号"),min:0,step:1}]},{type:"text",name:"link",label:l.default("标题链接")},p.amisInlineSwitch("hideTitle",l.default("标题隐藏"))]}]),t.drillDownLevel||(L=L.concat([{type:"divider"},{type:"fieldset",collapsed:!0,title:l.default("图表自定义背景和边框"),collapsable:!0,headingClassName:"fieldset-title",controls:[{name:"config.chartCustomStyle",children:function(e){var t=e.onChange,o=e.value;return n.createElement(f.default,a.__assign({},{onChange:t,value:o,label:l.default("开启图表自定义背景和边框"),tipText:l.default("文档说明"),tipLink:"/docs/Chart-Common#自定义图表的背景和边框等样式"}))}},{type:"group",hiddenOn:"!data.config.chartCustomStyle",controls:[{type:"color",name:"config.chartBackgroundColor",label:l.default("图表背景颜色"),format:"rgba",size:"full"},{type:"number",name:"config.chartBorderRadius",min:0,step:1,label:l.default("图表圆角"),size:"full"}]},{type:"group",hiddenOn:"!data.config.chartCustomStyle",controls:[{type:"number",label:l.default("图表边框宽度"),name:"config.borderWidth",min:0,step:1,max:20},{type:"select",name:"config.chartBorderStyle",label:l.default("图表边框样式"),options:[{label:l.default("实线"),value:"solid"},{label:l.default("点状"),value:"dotted"},{label:l.default("双线"),value:"double"},{label:l.default("虚线"),value:"dashed"}]}]},{type:"group",hiddenOn:"!data.config.chartCustomStyle",controls:[{type:"color",name:"config.borderColor",format:"rgba",label:l.default("图表边框颜色")},{type:"number",label:l.default("图表阴影宽度"),name:"config.shadowWidth",min:0,step:1,max:20}]},{type:"group",hiddenOn:"!data.config.chartCustomStyle",controls:[{type:"number",label:l.default("图表阴影偏移"),name:"config.shadowOffset",min:0,step:1,max:20},{type:"color",name:"config.chartShadowColor",format:"rgba",label:l.default("图表阴影颜色")}]}]}])),t.drillDownLevel&&(L=L.concat([{type:"divider"},{type:"color",name:"config.drillDownChartBackgroundColor",label:l.default("图表背景颜色"),format:"rgba"},{type:"select",name:"ddShowType",label:l.default("展示方式"),options:[{label:l.default("弹框展示"),value:0},{label:l.default("弹框全屏展示"),value:1},{label:l.default("原图表区域展示"),value:2}]}])),S.has(z.type)){var W=[p.amisInlineSwitch("config.enableAnimation",l.default("开启图表动画"),"",!0),{type:"number",name:"config.animationDurationUpdate",label:l.default("数据变更时的动画时长（毫秒）"),visibleOn:"config.enableAnimation",size:"full"},{type:"number",name:"config.animationThreshold",label:l.default("动画阀值"),description:l.default("数据量大于这个值的时候关闭动画"),visibleOn:"config.enableAnimation",size:"full"},{type:"group",visibleOn:"config.enableAnimation",controls:[{type:"number",name:"config.animationDuration",label:l.default("动画时长（毫秒）"),size:"full"},{type:"number",name:"config.animationDelay",label:l.default("动画延迟（毫秒）"),size:"full"}]}];if(~["line","bar","pie"].indexOf(z.type)){var I=[{label:l.default("线性"),value:"linear"},{label:l.default("缓入"),value:"quadraticIn"},{label:l.default("缓出"),value:"quadraticOut"},{label:l.default("缓入缓出"),value:"quadraticInOut"}];W=W.concat([{type:"group",visibleOn:"config.enableAnimation",controls:[{type:"select",name:"config.animationEasing",label:l.default("动画缓动效果"),options:I,visibleOn:"config.enableAnimation",size:"full"},{type:"select",name:"config.animationEasingUpdate",label:l.default("动画更新缓动效果"),options:I,visibleOn:"config.enableAnimation",size:"full"}]}])}L=L.concat([{type:"divider"},{type:"fieldset",collapsed:!0,title:l.default("图表动画设置"),collapsable:!0,headingClassName:"fieldset-title",controls:W}])}var P=[];if(z.commonCustomColor||z.commonCustomColorGradient){var V=[l.default("文字颜色"),l.default("轴线颜色"),l.default("可增加多个配色项，依次对应各项颜色")];if(z.commonCustomColorTitle&&3===z.commonCustomColorTitle.length)for(var j=0;j<z.commonCustomColorTitle.length;j++){var q=z.commonCustomColorTitle[j];q&&(V[j]=q)}P=P.concat([{name:"config.openCustomColor",children:function(e){var t=e.onChange,o=e.value;return n.createElement(f.default,a.__assign({},{onChange:t,value:o,label:l.default("开启图表自定义配色"),tipText:l.default("自定义配色说明"),tipLink:"/docs/Chart-Common#图表的自定义配色"}))}},{type:"group",hiddenOn:"!data.config.openCustomColor",controls:[{type:"color",name:"config.textColor",format:"rgba",label:V[0],size:"full"},{type:"color",name:"config.lineColor",format:"rgba",label:V[1],size:"full"}]}]);var K=[];["scatter","3d-scatter","bar","bar-alien","bar-polar","3d-bar","line"].includes(z.type)&&K.push({type:"color",name:"config.splitLineColors",format:"rgba",label:l.default("网格线颜色")}),["bar-pic","bar","bar-alien","bar-polar","river","line"].includes(z.type)&&K.push({type:"color",name:"config.axisPoiLineColor",format:"rgba",label:l.default("鼠标悬停时轴对齐线颜色")}),P.push({type:"group",hiddenOn:"!data.config.openCustomColor",controls:K}),P.push({name:"config.customColors",hiddenOn:"!data.config.openCustomColor",children:function(e){var o=e.onChange,i=e.value;return n.createElement(d.default,a.__assign({},{onChange:o,value:i},{chartFrontendId:t.frontendId,containerClassName:"form-group form-item",label:V[2],addTipText:l.default("新增配色项"),cols:z.commonCustomColorGradient?T:x}))}})}P.length&&(L=L.concat([{type:"divider"},{type:"fieldset",collapsed:!0,title:l.default("自定义配色"),collapsable:!0,headingClassName:"fieldset-title",controls:P}])),z.commonCustomShadow&&(L=L.concat([{type:"divider"},{type:"fieldset",collapsed:!0,title:l.default("图形阴影设置"),collapsable:!0,headingClassName:"fieldset-title",controls:[p.amisInlineSwitch("config.openCustomShadow",l.default("开启图形阴影")),{type:"group",controls:[{type:"number",name:"config.shadowBlur",hiddenOn:"!data.config.openCustomShadow",label:l.default("阴影模糊大小"),min:0},{type:"color",name:"config.shadowColor",format:"rgba",hiddenOn:"!data.config.openCustomShadow",label:l.default("阴影颜色")}]},{type:"group",hiddenOn:"!data.config.openCustomShadow",controls:[{type:"number",name:"config.shadowOffsetX",min:0,label:l.default("水平方向偏移")},{type:"number",name:"config.shadowOffsetY",min:0,label:l.default("垂直方向偏移")}]}]}])),z.type.match(/^bmap/i)&&(L=L.concat([{type:"divider"},{type:"fieldset",collapsed:!0,title:l.default("地图样式设置"),collapsable:!0,headingClassName:"fieldset-title",controls:b.styleConfig("config",!0)}])),z.basicCtrl&&(L=L.concat("function"==typeof z.basicCtrl?z.basicCtrl(H):z.basicCtrl)),"commonChart"===z.kind&&(L=L.concat(D.chartTextCtrl));var G=h.configData.subChartConfigKey||t.getActiveSubChartKey(),F=[],U="";if(z.subCharts&&t.config.subChartConfig&&t.config.subChartConfig[G]){var J=t.config.subChartConfig[G],R=z.subCharts[J.type].dataBindCtrl;R&&(F=R(a.__assign(a.__assign({},H),{activeSubChartKey:G}))),U="config.subChartConfig."+G+"."}else z.dataBindCtrl&&(F="function"==typeof z.dataBindCtrl?z.dataBindCtrl(H):z.dataBindCtrl);var X=F;if(window.sugarConfig.enableDataModel&&z.dataModelPanelShow&&i.needShowDataModelPanel(z.dataModelPanelShow,t,U)){if(t.drillDownLevel>0){var Y="";U&&(Y=G);var Z=0;F.forEach(function(e,t){"dataTypeCtrl"===e.sugarFlag&&(Z=t+1)}),F.splice(Z,0,C.getDataModelBindDrilldown({label:l.default("下钻参数关联配置"),namePrefix:U+"dataConfig.dataModel",config:{chartEntity:t,subChartKey:Y,chartHub:h}}))}X=[{type:"hbox",inputClassName:"ma-none",columns:[{columnClassName:"data-bind",controls:F},{columnClassName:"data-model",controls:[{name:U+"dataModelHash",children:function(e){var t=e.onChange,a=e.value;return n.createElement(s.default,{onChange:t,value:a})}}]}]}]}var Q=[];t.isExploreChart||Q.push({title:l.default("基础"),controls:L}),X.length&&!B&&Q.push({title:l.default(z.dataBindTabTitle||"数据"),controls:X});var $=[];if(z.subCharts&&t.config.subChartConfig&&t.config.subChartConfig[G]){var J=t.config.subChartConfig[G],et=z.subCharts[J.type].advancedCtrl;et&&($=et(a.__assign(a.__assign({},H),{activeSubChartKey:G})))}else z.advancedCtrl&&($="function"==typeof z.advancedCtrl?z.advancedCtrl(H):z.advancedCtrl,P.length&&$.length&&($=$.concat([{type:"divider"},{type:"fieldset",collapsed:!1,title:l.default("自定义配色"),collapsable:!0,headingClassName:"fieldset-title",controls:P}])));$.length&&Q.push({title:l.default(z.advancedTabTitle||"高级"),controls:$});var tt=[];if(z.drillDownType&&!B){var at=!1,lt=window.sugarConfig.nowProductConfig;lt&&!lt.drill&&(at=!0);var nt=[{name:"drillDownOpen",children:function(e){var t=e.onChange,o=e.value;return n.createElement(f.default,a.__assign({},{onChange:t,notSupport:at,value:o,label:l.default("开启自由下钻"),tipText:l.default("什么是下钻？"),tipLink:"/docs/ChartAnalysis-Drilldown"}))}},{type:"tpl",label:"",hiddenOn:"!data.drillDownOpen",value:'<div class="help-block">'+l.default("在本图表中点击并触发下钻即可编辑下钻图表，传递到下钻图表中的上层图表信息及查询条件可以在下钻图表的控制面板中点击「调试」进行查看。")+"</div>"},{name:"drillDown",visibleOn:"data.drillDownOpen",children:function(e){var l=e.onChange,o=e.value;return n.createElement(c.default,a.__assign({},{onChange:l,value:o},{chartEntity:t,chartData:k,containerClassName:"form-group form-item",drillDownType:z.drillDownType,hintText:z.drillDownTip}))}}],ot=t.dataConfig.tableType,it=t.config,rt=it.mapType,dt=it.mapScope,st=z.canHierarchyDrillDown&&"crossPivot"!==ot&&!["cityHeatmap","scatter"].includes(rt)&&"world"!==dt;st&&nt.push({name:"config.hierarchyDrillDownOpen",children:function(e){var t=e.onChange,o=e.value;return n.createElement(f.default,a.__assign({},{onChange:t,notSupport:at,value:o,label:l.default("开启层级关系下钻"),tipText:l.default("什么是层级关系下钻？"),tipLink:"/docs/ChartAnalysis-Drilldown"}))}},{name:"drillDown",visibleOn:"config.hierarchyDrillDownOpen",children:function(e){var l=e.onChange,o=e.value;return n.createElement(c.default,a.__assign({},{onChange:l,value:o},{chartEntity:t,chartData:k,containerClassName:"form-group form-item",drillDownType:z.drillDownType,isHierarchyDrillDown:!0,hintText:z.drillDownTip}))}}),at||t.drillDownLevel||nt.push({type:"select",name:"config.ddShowType",label:l.default("默认展示方式"),options:[{label:l.default("弹框展示"),value:0},{label:l.default("弹框全屏展示"),value:1},{label:l.default("原图表区域展示"),value:2}],description:l.default("如果改动展示方式，会将该图表所有的下钻图表展示方式统一成当前所选方式")}),tt.push({type:"fieldset",collapsable:!0,title:l.default("下钻"),controls:nt})}if(~m.canBeDependencedChartType.indexOf(z.type)&&0===t.drillDownLevel&&!B){var ct=[{name:"config.dependenceOpen",children:function(e){var t=e.onChange,o=e.value;return n.createElement(f.default,a.__assign({},{onChange:t,value:o,label:l.default("开启图表联动"),tipText:l.default("什么是图表联动？"),tipLink:"/docs/ChartAnalysis-Dependence"}))}},{type:"tpl",label:"",hiddenOn:"!data.config.dependenceOpen",value:'<div class="help-block">'+l.default("在本图表中点击数据项可触发下级图表联动的更新数据。触发联动后，在下级图表的控制面板中点击「调试」可以查看传递到下级图表的本图表点击数据项的信息。")+"</div>"},{name:"config.dependences",hiddenOn:"!data.config.dependenceOpen",children:function(e){var l=e.onChange,o=e.value;return n.createElement(g.default,a.__assign({},{onChange:l,value:o,hintText:z.drillDownTip,isMultDependence:"multiple"===z.drillDownType,chartEntity:t,chartData:k}))}}];tt.length>1&&tt.push({type:"divider"}),tt.push({type:"fieldset",collapsable:!0,title:l.default("联动"),controls:ct})}return h.drillDownDialogOpen||(tt.length>1&&tt.push({type:"divider"}),tt.push({type:"fieldset",collapsed:!0,collapsable:!0,title:l.default("图表放大"),controls:u.chartZoomCtrl})),t.isExploreChart||"smart-chart"===t.type||"smart-audio"===t.type||Q.push({title:l.default("交互"),className:"interaction-tab",controls:tt}),n.createElement("div",{className:"chart-ctrl-wrapper"},n.createElement("div",{className:"sub-chart-manager"},z.subCharts?n.createElement(y.default,{chartEntity:t,chartWidget:z,chartHub:h}):null),n.createElement("div",{className:"chart-recommend-container"},"smart-chart"===t.type?n.createElement(v.default,{value:t.config.smartChart,chart:t,hubConfigData:h.configData}):null),n.createElement("div",{className:"chart-config"},n.createElement(r.default,{data:t.toJSON(),onChange:o,schema:{type:"form",wrapWithPanel:!1,controls:[{type:"tabs",mode:"card",tabs:Q,className:"overflow-hidden h-full d-flex flex-col",contentClassName:"flex-1 overflow-y-auto p-relative",activeKey:t.isExploreChart?0:1}]}})),n.createElement(w.WidgetTemplateForm,{key:"report_chartItem_add_"+t.hash,show:N.showAddTemplate,name:t.name,isDemo:"custom-iframe"===t.type&&"demo"===t.config.htmlHash,toggle:N.toggleAddTemplate,onSubmit:t.addWidgetTemplate}),n.createElement(w.SelectWidgetTemplate,{key:"report_chartItem_select_"+t.hash,groupHash:E,type:t.type,show:N.showSelectTemplate,useTemplate:t.useTemplate,toggle:N.toggleSelectTemplate}))},t.displayName="ChartCtrl",t=a.__decorate([o.inject(function(e){return{groupHash:e.group.current.data.hash,widgetTemplate:e.widgetTemplate}}),o.observer],t)}(n.Component);t.default=_});
;sugar.define("sugar:utils/xssOption.ts",function(e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.xssOption=void 0;var s=e("sugar:node_modules/tslib/tslib.js"),t=e("sugar:node_modules/xss/lib/index.js"),o=s.__assign(s.__assign({},t.getDefaultWhiteList()),{button:["name"],iframe:["src"]});for(var a in o)o[a].push("style","class","title"),"private"===window.sugarConfig.deployType&&o[a].push("onclick");var n=s.__assign(s.__assign({},t.getDefaultCSSWhiteList()),{"float":!0,"z-index":!0,left:!0,"line-break":!0,"line-height":!0,opacity:!0,overflow:!0,"overflow-wrap":!0,"overflow-x":!0,"overflow-y":!0,position:!0,top:!0,"vertical-align":!0,visibility:!0,"white-space":!0,"wrap-flow":!0});i.xssOption={whiteList:o,css:{whiteList:n},onIgnoreTagAttr:function(e,i,s){return"a"===e&&"rel"===i?i+'="'+t.escapeAttrValue(s)+'"':void 0}}});
;sugar.define("sugar:widgets/charts/_hoc/drill-down/drill-down-dialog.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=e("sugar:node_modules/tslib/tslib.js"),a=e("sugar:utils/i18n.ts"),n=e("sugar:node_modules/react/index.js"),r=e("sugar:node_modules/classnames/index.js"),l=e("sugar:node_modules/amis/lib/index.js"),i=e("sugar:widgets/charts/chart-manager.tsx"),s=e("sugar:stores/index.ts"),d=e("sugar:utils/chart-helper.ts"),c=e("sugar:widgets/ctrl-panel/chart-ctrl.tsx"),u=e("sugar:widgets/pop-menu/pop-menu.tsx"),h=e("sugar:node_modules/react-router/lib/index.js"),p=e("sugar:node_modules/xss/lib/index.js"),m=e("sugar:utils/xssOption.ts"),g=e("sugar:widgets/product-type/product-type-modal.tsx"),f=function(e){function t(t){var o=e.call(this,t)||this;return o.handleDialog=o.handleDialog.bind(o),o.handleInitPopMenu=o.handleInitPopMenu.bind(o),o.bindContext=o.bindContext.bind(o),o}return o.__extends(t,e),t.prototype.handleInitPopMenu=function(){var e=this.props,t=e.drillDownConfig,o=e.drillDownChartHub,n=e.theme,r=t.chart,l=i.getChartByType(r.type),s=u.popMenu.getPopMenuTree();if(s&&l&&!this.props.banDownLoad){l.exportCSV&&s.push({icon:"fa fa-file-text-o",name:a.default("导出数据为CSV"),cb:function(){return l.exportCSV(o.data,r,o,n)}}),l.exportExcel&&s.push({icon:"fa fa-file-excel-o",name:a.default("导出数据为Excel"),cb:function(){return l.exportExcel(o.data,r,o,n)}});var d=window.sugarConfig,c=d.productType,h=d.deployType;"saas"===h&&/^\/(report|explore|dashboard)\//i.test(window.location.pathname)&&"advan"!==c||s.push({icon:"fa fa-file-excel-o",name:a.default("导出页面数据为Excel"),cb:function(){return r.exportPageExcel()}}),u.popMenu.setPopMenuTree(s)}},t.prototype.bindContext=function(e){e?(this.dom=e,this.dom.addEventListener("contextmenu",this.handleInitPopMenu)):(this.dom&&this.dom.removeEventListener("contextmenu",this.handleInitPopMenu),this.dom=e)},t.prototype.handleDialog=function(){this.props.handleClose(),this.props.drillDownChartHub.setDrillDownDialogOpen(!1)},t.prototype.render=function(){var e=this.props,t=e.mode,o=e.theme,s=e.drillDownConfig,u=e.drillDownChartHub,f=e.handleClose,b=e.sqlModel,x=e.banDownLoad,C=e.backgroundColor,w=u.data,y=s.chart,_=s.ddType;_.indexOf("HIERARCHY_")>-1&&(_=s.chart.type);var E=i.create(_,{index:0,mode:t,theme:o,chart:y,hub:u,banDownLoad:x}),v=i.getChartForbiddenInfo(y.type,y),D="editor"===t,k=!!y.isDashChart,M=!D&&1===y.ddShowType,N=y.dynamicName||y.name,j={border:"none",textAlign:y.titleAlign,color:y.config.chartTitleColor||(k?"#fff":"")},P={color:y.config.chartTitleColor||"#108cee"},T=k?C||"rgba(0, 0, 0, 0.85)":"#fff";y.config.drillDownChartBackgroundColor&&(T=y.config.drillDownChartBackgroundColor),D||(j.background=T);var B=M?"full":"lg",I=y.link;I&&(I=d.replaceSomeParam(I,y.frontendId,this.props.sugarRoot,null,!0),/^http/.test(I)||/^\//.test(I)||(I="http://"+I),(I.indexOf(location.host)>=0||/^\//.test(I)&&!/^\/\//.test(I))&&!/\/(docs|home)/.test(I)&&"editor"!==t?(/^http/.test(I)&&(I="/"+I.split("/").slice(3).join("/")),N=n.createElement(h.Link,{className:"chart-item__title__link",style:P,to:I},N)):N=n.createElement("a",{className:"chart-item__title__link",style:P,href:I,target:"_blank"},N));var H=y.width;2>H&&(H=2);var S="common-modal no-close-tooltip drill-down-modal "+(k?"dashboard":"")+" "+(D?"editor":"")+" dialog-"+H,O=D?600:y.height-0||600,L=D?y.height-0||300:"100%";return!D&&y.config.chartAutoHeight&&(O=L="auto"),n.createElement(l.Modal,{show:!0,size:B,className:S,contentClassName:r(M?"ma-none w-full":"",{"modal-transparent":y.config.drillDownChartBackgroundColor})},n.createElement(l.Modal.Header,{showCloseButton:!0,onClose:this.handleDialog,style:j},n.createElement("span",null,N)," ",y.remark?n.createElement(l.TooltipWrapper,{tooltip:p(y.remark,m.xssOption),placement:"bottom"},n.createElement("i",{className:"fa fa-question-circle"})):null),n.createElement(l.Modal.Body,{style:{height:O,background:T,padding:15,position:"relative"}},n.createElement("div",{className:"chart-item",ref:this.bindContext,style:{height:"100%",marginRight:D?370:0}},n.createElement("div",{className:"chart-item__content",style:{width:"100%",height:L}},!v&&"normal"===t||"editor"===t?E:null,v?n.createElement("div",{className:"chart-item__forbidden"},v.info,n.createElement(l.Button,{level:"primary",onClick:function(){return g.showUpdate(v.showUpdateInfo)}},a.default("查看各版本支持情况"))):null,w&&"pending"===w.loadState?n.createElement("div",{className:"loading-container"},n.createElement(l.Spinner,{containerClass:"text-center m-t",overlay:!0})):null)),D?n.createElement("div",{className:"editor-ctrl-panel"},n.createElement("div",{className:"editor-ctrl-panel__header"},a.default("控制面板")),n.createElement("div",{className:"editor-ctrl-panel__body"},n.createElement(c.default,{chartHub:u,chartEntity:y,updateChart:y.update,sqlModelStore:b,isDrillDown:!0}))):null),k||M||y.config.drillDownChartBackgroundColor?null:n.createElement(l.Modal.Footer,{style:{background:j.background}},n.createElement(l.Button,{level:"primary",onClick:f},a.default("确定"))))},t.displayName="ChartDrillDownDialog",t=o.__decorate([s.inject(function(e){return{sugarRoot:e}}),s.observer,o.__metadata("design:paramtypes",[Object])],t)}(n.Component);t.default=f});
;sugar.define("sugar:widgets/charts/_hoc/drill-down/drill-down.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=e("sugar:node_modules/tslib/tslib.js"),r=e("sugar:utils/i18n.ts"),n=e("sugar:node_modules/react/index.js"),a=e("sugar:widgets/charts/chart-manager.tsx"),i=e("sugar:stores/index.ts"),l=e("sugar:widgets/charts/_hoc/drill-down/drill-down-dialog.tsx");t.default=function(e){var t;return i.inject(function(e){return{chartStore:e.chart,sqlModel:e.sqlModel,dashboard:e.dashboard}})(i.observer((t=function(t){function i(){var e=null!==t&&t.apply(this,arguments)||this;return e.state={open:!1},e}return o.__extends(i,t),i.prototype.componentWillMount=function(){this.openDialog=this.openDialog.bind(this),this.closeDialog=this.closeDialog.bind(this),"editor"!==this.props.mode?this.closeDialog():this.initShowType()},i.prototype.openDialog=function(){this.state.open||this.setState({open:!0})},i.prototype.closeDialog=function(){this.setState({open:!1}),this.props.hub.drillDownData.setDrillDownIndex(-1)},i.prototype.initShowType=function(){var e=this.props.chart;if(e.drillDownLevel&&"number"!=typeof e.ddShowType){var t=e.getParentChart();if(!t)return;var o={ddShowType:(e.drillDownLevel>1?t.ddShowType:t.config.ddShowType)||0};e.update(o,o)}},i.prototype.render=function(){var t,i=this.props.hub,s=this.props,d=s.chartStore,h=s.sqlModel,c=(s.dashboard,o.__rest(s,["chartStore","sqlModel","dashboard"])),p=i.drillDownData.drillDownIndex;if(p>-1&&p<this.props.chart.drillDown.length){var u=this.props.chart.drillDown[p];if("ddLink"!==u.ddType&&u.ddOpen){var g=d.getChartHub(u.chart.frontendId);if("editor"!==c.mode&&2===u.chart.ddShowType){c.index=0,c.chart=u.chart,c.hub=g;var w=null===(t=a.getChartByType(c.chart.type))||void 0===t?void 0:t.component;return w?n.createElement(w,o.__assign({},c,{key:"chart",navActions:o.__spreadArrays(this.props.navActions||[n.createElement("span",{key:"back",style:{cursor:"pointer",marginRight:5},className:"text-info--hover",onClick:this.closeDialog},r.default("返回")," >")],[g.drillDownData.drillDownIndex>-1?n.createElement("span",{key:c.chart.drillDownLevel,style:{marginRight:5}},n.createElement("span",{style:{cursor:"pointer"},className:"text-info--hover",onClick:function(){g.drillDownData.setDrillDownIndex(-1)}},g.drillDownData.itemName||r.default("层级")+c.chart.drillDownLevel)," ",n.createElement("span",null,">")):n.createElement("span",{key:"end"},g.drillDownData.itemName||r.default("层级")+c.chart.drillDownLevel)])})):null}return n.createElement(n.Fragment,null,n.createElement(e,o.__assign({},c,{key:"chart"})),n.createElement("div",{key:"event",style:{display:"none"},onMouseDown:function(e){e.stopPropagation()}},n.createElement(l.default,{key:"drilldown-dialog",sqlModel:h,mode:this.props.mode,theme:this.props.theme,backgroundColor:this.props.dashboard.current.data.config.backgroundColor,drillDownConfig:u,drillDownChartHub:g,handleClose:this.closeDialog,banDownLoad:this.props.banDownLoad})))}}else if("editor"!==this.props.mode&&2===this.props.chart.ddShowType&&this.props.chart.drillDownLevel>0)return n.createElement("div",{style:{width:"100%",height:"100%",display:"flex",flexDirection:"column"}},n.createElement("div",{style:{flex:"1 1 0",overflow:"hidden"}},n.createElement(e,o.__assign({},c,{key:"chart"}))),n.createElement("div",{style:{padding:5,overflowX:"hidden",color:this.props.chart.config.textColor||(this.props.chart.isDashChart?"white":"")}},this.props.navActions||null));return n.createElement(e,o.__assign({},c,{key:"chart"}))},i}(n.Component),t.displayName="ChartDrillDownHOC",t)))}});
;sugar.define("sugar:widgets/charts/_hoc/toolbar/toolbar.tsx",function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=t("sugar:node_modules/tslib/tslib.js"),a=t("sugar:utils/i18n.ts"),n=t("sugar:node_modules/react/index.js"),i=t("sugar:widgets/charts/chart-manager.tsx"),r=t("sugar:stores/index.ts"),l=t("sugar:node_modules/amis/lib/index.js"),s=t("sugar:sites/amis-renderer.tsx");e.default=function(t){var e;return r.observer((e=function(e){function r(){var t=null!==e&&e.apply(this,arguments)||this;return t.items=[],t.banDownLoad=!1,t.state={items:[]},t}return o.__extends(r,e),r.prototype.componentWillMount=function(){this.addToolbarItem=this.addToolbarItem.bind(this),this.removeToolbarItem=this.removeToolbarItem.bind(this),this.cancelDependence=this.cancelDependence.bind(this),this.toggleExportData=this.toggleExportData.bind(this),this.randId=+new Date,this.toggleExportData(this.props.banDownLoad)},r.prototype.componentWillReact=function(){var t=this.props.banDownLoad;this.banDownLoad!==t&&this.toggleExportData(t)},r.prototype.toggleExportData=function(t){var e=this.props,o=e.chart,n=e.hub,r=e.theme,l=i.getChartByType(o.type);if(t)this.removeToolbarItem("sugar-exportCSV"),this.removeToolbarItem("sugar-exportExcel"),this.removeToolbarItem("sugar-exportExcelOfPage");else if(l){l.exportCSV&&this.addToolbarItem({type:"button",key:"sugar-exportCSV",label:a.default("导出数据为CSV"),icon:"fa fa-file-text-o m-r text-info-dker",onClick:function(){l.exportCSV(n.data,o,n,r)}}),l.exportExcel&&this.addToolbarItem({type:"button",key:"sugar-exportExcel",label:a.default("导出数据为Excel"),icon:"fa fa-file-excel-o m-r text-info-dker",onClick:function(){l.exportExcel(n.data,o,n,r)}});var s=window.sugarConfig,d=s.productType,p=s.deployType;"saas"===p&&/^\/(report|explore|dashboard)\//i.test(window.location.pathname)&&"advan"!==d||this.addToolbarItem({type:"button",key:"sugar-exportExcelOfPage",label:a.default("导出页面数据为Excel"),icon:"fa fa-file-excel-o m-r text-info-dker",onClick:function(){o.exportPageExcel()}})}},r.prototype.addToolbarItem=function(t,e){t.key&&(this.items.some(function(e){return e.key===t.key})||(e?this.items.unshift(t):this.items.push(t),this.setState({items:this.items})))},r.prototype.removeToolbarItem=function(t){if(t){var e=this.items.findIndex(function(e){return e.key===t});~e&&(this.items.splice(e,1),this.setState({items:this.items}))}},r.prototype.cancelDependence=function(){this.props.chart.handleEvent("cancelDependence",this.props.mode)},r.prototype.render=function(){var e,r=this.props,d=r.chart,p=r.hub;this.banDownLoad=this.props.banDownLoad;var c={},h={};if("dataModel"===d.dataType&&d.dataConfig&&d.dataConfig.dataModel&&d.dataConfig.dataModel.chartCondition&&d.dataConfig.dataModel.chartCondition.length&&!d.drillDownLevel)if(null===(e=d.config)||void 0===e?void 0:e.chartConditionShow){var m=10*(d.height-1)/3+42,f=d.config.chartConditionCheckedCount||0,u=d.dataConfig.dataModel.chartCondition.length;f>u&&(f=u);var g=42*(f+1);d.config.chartConditionCustomHeight&&d.config.chartConditionHeight&&(m=d.config.chartConditionHeight),m>g?(c.top=-33-g,h.top=-32-g):(c.top=-33-m,h.top=-32-m)}else c.top=-33-42*d.dataConfig.dataModel.chartCondition.length,h.top=-32-42*d.dataConfig.dataModel.chartCondition.length;if(d.hideTitle&&!d.drillDownLevel&&(c={top:c.top?c.top+43:3},h={top:h.top?h.top+44:4}),d.drillDownLevel){var b=this.props.chart.getTopParentChart();b&&b.hideTitle&&2===d.ddShowType&&(c.top=3,h.top=4,"dataModel"===b.dataType&&b.dataConfig&&b.dataConfig.dataModel&&b.dataConfig.dataModel.chartCondition&&b.dataConfig.dataModel.chartCondition.length&&(c.top=43,h.top=44))}var C=this.items,x=i.getChartByType(this.props.chart.type),v=d.drillDownOpen||d.config.hierarchyDrillDownOpen;if(v){for(var y=!0,T=0,E=d.drillDown;T<E.length;T++){var D=E[T];if(D.ddOpen){y=!1;break}}y&&(v=!1)}var k=d.config.dependenceOpen,w=d.config.dependences;if(k&&w&&w.length){for(var y=!0,I=0,M=w;I<M.length;I++){var D=M[I];if(D.cddOpen){y=!1;break}}y&&(k=!1)}var O=!!p.dependenceData.dependenceState,S=null;return(v||k||O)&&(S=n.createElement("div",{className:"chart-tips",key:"tips",style:h},v?n.createElement("div",{className:"chart-tip-item"},n.createElement(l.TooltipWrapper,{tooltip:a.default("本图表可下钻"),placement:"top"},n.createElement("i",{className:"fa fa-sort-amount-asc"}))):null,k?n.createElement("div",{className:"chart-tip-item"},n.createElement(l.TooltipWrapper,{tooltip:a.default("本图表有下级联动"),placement:"top"},n.createElement("i",{className:"fa fa fa-link"}))):null,O&&x&&!x.noCancelDependenceButton?n.createElement("div",{className:"chart-tip-item"},n.createElement(l.TooltipWrapper,{tooltip:a.default("本图表的下级图表将会恢复初始状态"),placement:"top"},n.createElement("button",{type:"button",className:"btn btn-xs",onClick:this.cancelDependence},a.default("取消下级联动")))):null)),[S,C&&C.length?n.createElement("div",{className:"chart-toolbar",key:"toolbar",style:c},n.createElement(s.default,{onAction:function(){},schema:{type:"dropdown-button",label:"",size:"xs",align:"right",iconOnly:!0,closeOnClick:!0,closeOnOutside:!0,buttons:C}})):null,n.createElement(t,o.__assign({},this.props,{key:"component",toolbarHandler:{addToolbarItem:this.addToolbarItem,removeToolbarItem:this.removeToolbarItem}}))]},r}(n.Component),e.displayName="ToolbarHOC",e))}});
;sugar.define("sugar:widgets/charts/_hoc/chart-warning/chart-warning-rules-detail.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=e("sugar:node_modules/tslib/tslib.js"),i=e("sugar:utils/i18n.ts"),a=e("sugar:node_modules/react/index.js"),l=e("sugar:stores/index.ts"),o=e("sugar:node_modules/amis/lib/index.js"),s=e("sugar:sites/amis-renderer.tsx"),d=e("sugar:utils/frontendId.ts"),r=e("sugar:node_modules/amis/lib/index.js"),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.componentWillMount=function(){this.onSubmit=this.onSubmit.bind(this),this.getMeasureCondition=this.getMeasureCondition.bind(this),this.getOptions=this.getOptions.bind(this),this.editChartWarningRulesDetail({}),this.props.onRef(this)},t.prototype.componentWillReceiveProps=function(e){var t=e.isModalShow,n=e.value;t&&this.editChartWarningRulesDetail(n)},t.prototype.editChartWarningRulesDetail=function(e,t){var n;this.setState({isModalShow:!0,loadingStatus:!0}),t&&(this.onChange=t);var i=this.props,a=i.isModalShow,l=i.value,o=a?l:e;(null===(n=this.props.value)||void 0===n?void 0:n.id)&&!(null===e||void 0===e?void 0:e.id)&&!a&&this.setState({isModalShow:!1}),this.init(),(null===o||void 0===o?void 0:o.id)&&this.setState({dimConditions:o.dimConditions,measureConditions:o.measureConditions})},t.prototype.init=function(){this.setState({dimConditions:[],measureConditions:{meaField:"",symbol:"",threshold:""},dimAndMeaData:{},loadingStatus:!1,dimField:""})},t.prototype.onSubmit=function(){var e=this.props.onClose,t=this.state,n=t.dimConditions,a=t.measureConditions,l=this.onChange;if(a.meaField&&a.symbol&&a.threshold){var s={id:d.generateId(),dimConditions:n,measureConditions:a};l?l(s):this.props.onChange(s),this.setState({isModalShow:!1}),e&&e()}else o.toast.error(i.default("度量数据未选择"))},t.prototype.getMeasureCondition=function(e){this.setState({measureConditions:e.measureConditions})},t.prototype.getOptions=function(e){var t=e||"",n=[{label:i.default("大于"),value:t+"gt"},{label:i.default("大于等于"),value:t+"gte"},{label:i.default("等于"),value:t+"equal"},{label:i.default("小于"),value:t+"lt"},{label:i.default("小于等于"),value:t+"lte"},{label:i.default("不等于"),value:t+"ineq"}];return n},t.prototype.render=function(){var e=this,t=this.props,n=t.label,l=t.onClose,d=t.dimConditionOptions,u=t.meaConditionOptions,c=t.dateConditionOptions,m=t.dimConditionValue,h=(t.chart,t.hub,this.state),p=h.loadingStatus,g=(h.dimField,h.dimConditions),v=h.measureConditions,f=h.isModalShow,C=[{label:i.default("与前一项比"),value:"contrast",children:[{label:i.default("变化"),value:"change",children:this.getOptions("change")},{label:i.default("增长"),value:"increase",children:this.getOptions("increase")},{label:i.default("减少"),value:"reduce",children:this.getOptions("reduce")},{label:i.default("变化(%)"),value:"changePercent",children:this.getOptions("changePercent")},{label:i.default("增长(%)"),value:"increasePercent",children:this.getOptions("increasePercent")},{label:i.default("减少(%)"),value:"reducePercent",children:this.getOptions("reducePercent")}]}];return 1===c.length?C.unshift.apply(C,this.getOptions()):C=this.getOptions(),a.createElement("div",{className:"chart-warning-rules-detail"},f&&a.createElement(o.Modal,{contentClassName:"chart-warning-rules-detail-modal",className:"chart-warning-rules-detail-dialog",show:!0,backdrop:"static",enforceFocus:!1},a.createElement(o.Modal.Header,{showCloseButton:!0,onClose:l},a.createElement(o.Modal.Title,null,n)),a.createElement(o.Modal.Body,{key:"modalBody"},p&&a.createElement(o.Spinner,{overlay:!0,size:"lg"}),!p&&a.createElement("div",{className:"chart-warning-rules-detail-dialog-content"},a.createElement("div",{className:"chart-warning-rules-detail-dialog-content-left"},(null===d||void 0===d?void 0:d.length)||(null===g||void 0===g?void 0:g.length)?a.createElement(s.default,{schema:{type:"page",body:{title:"",type:"form",mode:"normal",actions:[],submitText:null,controls:[{type:"combo",name:"dimConditions",canAccessSuperData:!0,label:i.default("维度数据"),multiple:!0,multiLine:!0,minLength:0,value:g,controls:[{type:"select",name:"dimField",label:i.default("维度"),options:d||[]},{name:"dimSelect",children:function(e){var t=e.onChange,n=e.value,l=e.data;return a.createElement("div",{style:{width:"100%"}},a.createElement("label",{style:{width:"100%"}},i.default("数据项")),a.createElement(r.Select,{className:"chart-warning-rules-detail-dialog-content-left-dimSelect",size:"lg",simpleValue:!0,value:n,multiple:!0,checkAll:!0,clearable:!0,options:m[null===l||void 0===l?void 0:l.dimField]||[],onChange:t}))}}]}]}},onChange:function(t){e.setState({dimConditions:t.dimConditions})}}):a.createElement("span",null,"暂无维度数据")),a.createElement("div",{className:"chart-warning-rules-detail-dialog-content-right"},(null===u||void 0===u?void 0:u.length)?a.createElement(s.default,{schema:{type:"page",body:{title:"",type:"form",mode:"normal",actions:[],submitText:null,controls:[{type:"combo",name:"measureConditions",label:i.default("度量数值"),value:v,multiLine:!0,controls:[{type:"select",name:"meaField",options:u||[]},{type:"tree-select",name:"symbol",checkAll:!0,options:C},{type:"text",name:"threshold"}]}]}},onChange:function(t){return e.setState({measureConditions:t.measureConditions})}}):a.createElement("span",null,"暂无度量数据")))),a.createElement(o.Modal.Footer,{key:"modalFooter"},a.createElement(o.Button,{onClick:function(){e.setState({isModalShow:!1}),l&&l()}},i.default("取消")),a.createElement(o.Button,{level:"primary",onClick:this.onSubmit},i.default("确定")))))},t.displayName="ChartWarningRulesDetail",t=n.__decorate([l.inject(function(e){return{group:e.group.current}}),l.observer],t)}(a.Component);t.default=u});
;sugar.define("sugar:widgets/charts/_hoc/chart-warning/chart-warning-rules.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=e("sugar:node_modules/tslib/tslib.js"),a=e("sugar:utils/i18n.ts"),l=e("sugar:node_modules/react/index.js"),i=e("sugar:stores/index.ts"),o=e("sugar:node_modules/amis/lib/index.js"),d=e("sugar:widgets/charts/_hoc/chart-warning/chart-warning-rules-detail.tsx"),r=e("sugar:sites/amis-renderer.tsx"),u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.getDataset=function(){return n.__awaiter(t,void 0,void 0,function(){return n.__generator(this,function(e){switch(e.label){case 0:return[4,this.props.chart.loadDebugDataset()];case 1:return e.sent(),[4,this.getDimAndMeaSelect()];case 2:return e.sent(),[2]}})})},t.getDimAndMeaSelect=function(){return n.__awaiter(t,void 0,void 0,function(){var e,t,l,i,d,r,u,s,c,v,m,f,h,p;return n.__generator(this,function(){return e=this.props,t=e.chart,l=e.hub,i=e.groupHash,d=l.debugData.data||{},r=d.dataModelProxyDatasetDatamodel||{},u=[],s=[],c=[],v=[],m=null===(p=t.dataConfig)||void 0===p?void 0:p.dataModel,"table"===t.type&&"normal"===t.dataConfig.tableType&&(c=(null===m||void 0===m?void 0:m.x)||[]),"table"===t.type&&"crossPivot"===t.dataConfig.tableType&&(c=((null===m||void 0===m?void 0:m.x2)||[]).concat((null===m||void 0===m?void 0:m.y)||[],(null===m||void 0===m?void 0:m.value)||[])),("line"===t.type||"bar"===t.type)&&(c=((null===m||void 0===m?void 0:m.x)||[]).concat((null===m||void 0===m?void 0:m.y)||[],(null===m||void 0===m?void 0:m.y2)||[],(null===m||void 0===m?void 0:m.color)||[])),"pie"===t.type&&(c=((null===m||void 0===m?void 0:m.color)||[]).concat((null===m||void 0===m?void 0:m.size)||[])),"pie-nested"===t.type&&(c=((null===m||void 0===m?void 0:m.color)||[]).concat((null===m||void 0===m?void 0:m.color2)||[],(null===m||void 0===m?void 0:m.size)||[])),"summary"===t.type&&(c=(null===m||void 0===m?void 0:m.value)||[]),f=new Map,c.forEach(function(e){var t,n,a;if("d"===(null===e||void 0===e?void 0:e.type)){var l=null===(t=r.config)||void 0===t?void 0:t.dimensions[e.id];if(f.set(e.id,e.frontendId),l){u.push({label:l.alias||l.field,value:e.id});var i=["date","datetime","timestamp"];(~i.indexOf(l.dataType)||~i.indexOf(null===(n=null===l||void 0===l?void 0:l.convert)||void 0===n?void 0:n.type))&&v.push({label:l.alias||l.field,value:e.id})}}if("m"===(null===e||void 0===e?void 0:e.type)){var o=null===(a=r.config)||void 0===a?void 0:a.measures[e.id];o&&s.push({label:o.alias||o.field,value:e.id})}}),h={},u.forEach(function(e){var t=f.get(e.value),n=[];((null===d||void 0===d?void 0:d.datasetInternal)||[]).forEach(function(e){e[t]&&!n.find(function(n){return n.value===e[t]})&&n.push({label:e[t],value:e[t]})}),h[e.value]=n}),0===s.length&&o.toast.error(a.default("度量为空，无法添加数据预警！")),this.setState({dimConditionOptions:u,meaConditionOptions:s,dateConditionOptions:v,dimConditionValue:h,chartWarningRulesLoadingStatus:!1}),[2]})})},t}return n.__extends(t,e),t.prototype.componentWillMount=function(){this.onRef=this.onRef.bind(this),this.setState({isModalShow:!1,rulesConnect:"OR",chartWarningRulesLoadingStatus:!0,dateConditionOptions:[],dimConditionOptions:[],meaConditionOptions:[],warningRules:{},dimConditionValue:{}}),this.getDataset()},t.prototype.chartWarningRulesValTranslation=function(e){var t,n=this.state,l=n.dimConditionOptions,i=n.meaConditionOptions,o="",d="",r=!1,u=!1;null===(t=e.dimConditions)||void 0===t?void 0:t.forEach(function(t,n){var i=null===l||void 0===l?void 0:l.find(function(e){return e.value===t.dimField});i?o+=a.default("【「"+(null===i||void 0===i?void 0:i.label)+"」为 [「"+t.dimSelect+"」] 其中一项】"):o=a.default("维度失效"),r=!i,n!==e.dimConditions.length-1?o+=a.default("且"):null});var s=null===i||void 0===i?void 0:i.find(function(t){return t.value===e.measureConditions.meaField});return d=s?(null===s||void 0===s?void 0:s.label)+" "+this.connectorTranslation(e.measureConditions.symbol)+" "+e.measureConditions.threshold:a.default("度量失效"),u=!s,{dimStr:o,meaStr:d,dimEffective:r,meaEffective:u}},t.prototype.connectorTranslation=function(e){var t="",n="",l="",i=e.match(/changePercent|change|increasePercent|reducePercent|increase|reduce /i);switch(n=i?i[0]:""){case"change":l=a.default("变化");break;case"increase":l=a.default("增长");break;case"reduce":l=a.default("减少");break;case"changePercent":l=a.default("变化(%)");break;case"increasePercent":l=a.default("增长(%)");break;case"reducePercent":l=a.default("减少(%)");break;default:l=""}switch(e){case n+"gt":t=""+l+a.default("大于");break;case n+"gte":t=""+l+a.default("大于等于");break;case n+"equal":t=""+l+a.default("等于");break;case n+"lt":t=""+l+a.default("小于");break;case n+"lte":t=""+l+a.default("小于等于");break;case n+"ineq":t=""+l+a.default("不等于");break;default:t=""}return t},t.prototype.onRef=function(e){this.child=e},t.prototype.render=function(){var e,t,i,u=this,s=this.state,c=(s.rulesConnect,s.isModalShow),v=(s.warningRules,s.editValue),m=s.onChange,f=s.dimConditionOptions,h=s.meaConditionOptions,p=s.dimConditionValue,g=s.dateConditionOptions,b=s.chartWarningRulesLoadingStatus,C=this.props,y=C.label,E=C.value,S=C.chart,w=C.hub,O=C.onChange,_=C.disabled,R="done"===(null===(e=null===w||void 0===w?void 0:w.debugData)||void 0===e?void 0:e.loadState)?!1:!0;return _?null:l.createElement("div",{className:"chart-warning-rules"},l.createElement("label",null,y),l.createElement("div",{className:"chart-warning-rules-content"},b?l.createElement(o.Spinner,{overlay:!0,size:"lg"}):l.createElement(r.default,{onChange:O,data:E,schema:{type:"page",body:{title:"",type:"form",mode:"normal",actions:[],submitText:null,controls:[{type:"group",mode:"horizontal",visible:1===g.length,className:"dateConnectGroup",controls:[{type:"tpl",label:!1,tpl:a.default("当")+" "+((null===(t=g[0])||void 0===t?void 0:t.label)||""),className:"dateConnectLabel"},{type:"select",name:"dateConnect",label:a.default("为"),value:"LATEST",options:[{label:a.default("任意一项"),value:"ANY"},{label:a.default("最近一项"),value:"LATEST"},{label:a.default("最近n项"),value:"LATESTN"}]},{type:"hidden",name:"dateField",className:"dateField",label:!1,value:(null===(i=g[0])||void 0===i?void 0:i.value)||""},{type:"number",name:"dateConnectVal",label:!1,className:"dateConnectVal",min:1,step:1,visibleOn:'this.dateConnect === "LATESTN"'}]},{type:"group",mode:"horizontal",className:"rulesConnectGroup",controls:[{type:"select",name:"rulesConnect",label:a.default("满足以下"),value:"OR",options:[{label:a.default("任意规则"),value:"OR"},{label:a.default("全部规则"),value:"AND"}]},{type:"tpl",tpl:a.default("时触发报警")}]},{type:"group",mode:"horizontal",controls:[{type:"combo",multiple:!0,multiLine:!0,typeSwitchable:!1,draggable:!0,name:"warningCondition",label:!1,controls:[{name:"warningCondition",value:{},children:function(e){var t=e.onChange,i=e.value,r=null;if(null===i||void 0===i?void 0:i.id){var s=u.chartWarningRulesValTranslation(i);r=l.createElement("tr",{key:""+i.id},l.createElement("td",{style:{color:s.dimEffective?"#c73522":""}},s.dimStr),l.createElement("td",{style:{color:s.meaEffective?"#c73522":""}},s.meaStr),l.createElement("td",null,l.createElement("i",{className:"fa fa-pencil chart-warning-table-operation",onClick:function(){u.setState({isModalShow:!0,editValue:i,onChange:t})}})))}else(null===i||void 0===i?void 0:i.id)||(r=l.createElement("tr",null,l.createElement("td",null),l.createElement("td",{style:{textAlign:"center"}},l.createElement("span",null,l.createElement("i",{className:"fa fa-plus datamodel-filter-tree-add",onClick:function(){return u.child.editChartWarningRulesDetail({},t,!0)}}))),l.createElement("td",null)));return R&&(r=l.createElement("tr",null,l.createElement("td",null),l.createElement("td",{style:{textAlign:"center"}},l.createElement(o.Spinner,null)),l.createElement("td",null))),l.createElement("div",null,l.createElement("table",{className:"chart-warning-table"},l.createElement("thead",null,l.createElement("tr",null,l.createElement("th",null,a.default("维度")),l.createElement("th",null,a.default("度量")),l.createElement("th",null,a.default("操作")))),l.createElement("tbody",null,r)),l.createElement(d.default,n.__assign({},{onChange:t,value:i},{chart:S,hub:w,label:"设置预警规则数值",onRef:u.onRef,dimConditionOptions:f,meaConditionOptions:h,dateConditionOptions:g,dimConditionValue:p})))}}]}]}]}}})),c&&l.createElement(d.default,n.__assign({},{onChange:m,value:E},{chart:S,hub:w,label:"设置预警规则数值",isModalShow:c,value:v,onClose:function(){return u.setState({isModalShow:!1})},onRef:this.onRef,dimConditionOptions:f,meaConditionOptions:h,dateConditionOptions:g,dimConditionValue:p})))},t.displayName="ChartWarningRules",t=n.__decorate([i.observer],t)}(l.Component);t.default=u});
;sugar.define("sugar:widgets/charts/_hoc/chart-warning/chart-warning-modal-detail-ctrl.tsx",function(e,a){"use strict";function t(e,a,t){var r=[{label:i.default("邮箱"),value:"email"}];"saas"===window.sugarConfig.deployType&&window.sugarConfig.enableWechat&&r.push({label:i.default("微信公众号"),value:"wechat"}),"private"===window.sugarConfig.deployType&&(window.sugarConfig.enableCompanywechat&&r.push({label:i.default("企业微信"),value:"companywechat"}),window.sugarConfig.enableDD&&r.push({label:i.default("钉钉"),value:"dd"}));var d=[{name:"frontendId",type:"hidden",value:a.frontendId},{name:"type",type:"hidden",value:a.isDashChart?"dashBoard":"report"},{name:"reportOrDashboardHash",type:"hidden",value:a.reportHash||a.dashboardHash},{name:"url",type:"hidden",value:location.href},{tpl:'<div class="chart-warning-detail-doclink text--info"><a href="/docs/QuickGuide-chartWarning" target="_blank">'+i.default("什么是数据预警？")+"</a></div>",type:"tpl"},{type:"text",label:i.default("预警名称"),className:"",placeholder:i.default("预警名称"),name:"name",size:"lg",required:!0},{type:"switch",name:"enable",label:i.default("是否启用"),value:1,trueValue:1,falseValue:0},{type:"radios",name:"dataPermission",label:i.default("数据权限"),value:0,size:"lg",columnsCount:4,required:!0,options:[{label:i.default("不区分权限"),value:0},{label:i.default("区分权限"),value:1}],hiddenOn:"!data.enable"},{name:"warningConditions",children:function(r){var d=r.onChange,u=r.value,o=r.disabled;return n.createElement(s.default,l.__assign({},{onChange:d,value:u,disabled:o},{label:i.default("预警规则"),chart:a,hub:t,groupHash:e}))},disabledOn:"!data.enable"},{type:"button-group",name:"detectionTime.frequency",label:i.default("定时配置"),value:"daily",options:[{label:i.default("每小时"),value:"hourly"},{label:i.default("每天"),value:"daily"},{label:i.default("每周"),value:"weekly"},{label:i.default("每月"),value:"monthly"},{label:i.default("高级设置"),value:"advance"}],hiddenOn:"!data.enable"},{name:"detectionTime.date",label:i.default("日期"),type:"number",value:1,min:1,max:31,required:!0,visibleOn:'data.enable && this.detectionTime && this.detectionTime.frequency == "monthly"'},{name:"detectionTime.day",label:i.default("星期几"),type:"select",options:[{label:i.default("星期日"),value:0},{label:i.default("星期一"),value:1},{label:i.default("星期二"),value:2},{label:i.default("星期三"),value:3},{label:i.default("星期四"),value:4},{label:i.default("星期五"),value:5},{label:i.default("星期六"),value:6}],value:1,required:!0,visibleOn:'data.enable && this.detectionTime && this.detectionTime.frequency == "weekly"'},{name:"detectionTime.hour",label:i.default("小时点"),type:"number",size:"lg",value:10,min:0,max:23,required:!0,visibleOn:'data.enable && this.detectionTime && (this.detectionTime.frequency == "daily" || this.detectionTime.frequency == "weekly" || this.detectionTime.frequency == "monthly")'},{name:"detectionTime.minute",label:i.default("分钟点"),type:"number",size:"lg",value:0,min:0,max:60,required:!0,visibleOn:'data.enable && this.detectionTime && (this.detectionTime.frequency == "daily" || this.detectionTime.frequency == "weekly" || this.detectionTime.frequency == "monthly" || this.detectionTime.frequency == "hourly")'},{name:"detectionTime.cron",description:i.default("使用 crontab 的语法"),label:i.default("定时配置"),type:"text",required:!0,size:"lg",visibleOn:'data.enable && this.detectionTime && this.detectionTime.frequency == "advance"'},{type:"radios",label:i.default("通知方式"),name:"notificationMethod",value:"email",required:!0,columnsCount:4,options:r,hiddenOn:"!data.enable"},{type:"text",name:"setting.emailTitle",label:i.default("邮件标题"),visibleOn:"data.enable && this.notificationMethod === 'email'"},{type:"textarea",label:i.default("邮件正文"),name:"setting.emailBody",value:"以上数据触发预警规则：$数据预警规则$，请及时查看。",visibleOn:"data.enable && this.notificationMethod === 'email'"},{type:"text",name:"setting.webhookTitle",label:i.default("预警标题"),hiddenOn:"this.notificationMethod === 'email' || !data.enable"},{type:"textarea",label:i.default("预警模板"),name:"setting.webhookMsg",value:"$数据预警规则$，请及时查看",hiddenOn:"this.notificationMethod === 'email' || !data.enable"},{name:"setting.receiverList",label:i.default("收件人"),type:"select",multiple:!0,size:"lg",requiredOn:"!(this.setting && this.setting.receiverRoleList && this.setting.receiverRoleList.length)",joinValues:!1,extractValue:!0,searchable:!0,source:"/api/manage/group/"+e+"/user/all",visibleOn:"this.notificationMethod === 'email' && data.enable"},{name:"setting.receiverList",label:i.default("收件人"),labelRemark:i.default("使用微信接收数据预警提醒时，需要在微信【公众号】中关注【sugar】公众号，在公众号中将微信与Sugar账号绑定！"),type:"select",multiple:!0,size:"lg",requiredOn:"!(this.setting && this.setting.receiverRoleList && this.setting.receiverRoleList.length)",joinValues:!1,extractValue:!0,searchable:!0,source:"/api/manage/group/"+e+"/user/tripartiteapp?type=wechat",visibleOn:"this.notificationMethod === 'wechat' && data.enable"},{name:"setting.receiverList",label:i.default("收件人"),labelRemark:i.default("使用企业微信接收数据预警提醒时，需要在企业微信【工作台】中添加【sugar】应用，在应用中将企业微信与Sugar账号绑定！"),type:"select",multiple:!0,size:"lg",requiredOn:"!(this.setting && this.setting.receiverRoleList && this.setting.receiverRoleList.length)",joinValues:!1,extractValue:!0,searchable:!0,source:"/api/manage/group/"+e+"/user/tripartiteapp?type=companywechat",visibleOn:"this.notificationMethod === 'companywechat' && data.enable"},{name:"setting.receiverList",label:i.default("收件人"),labelRemark:i.default("使用钉钉接收数据预警提醒时，需要在钉钉【工作台】中添加【sugar】应用，在应用中将企业微信与Sugar账号绑定！"),type:"select",multiple:!0,size:"lg",requiredOn:"!(this.setting && this.setting.receiverRoleList && this.setting.receiverRoleList.length)",joinValues:!1,extractValue:!0,searchable:!0,source:"/api/manage/group/"+e+"/user/tripartiteapp?type=dd",visibleOn:"this.notificationMethod === 'dd' && data.enable"},{name:"setting.receiverRoleList",label:i.default("收件角色"),type:"select",requiredOn:"!(this.setting && this.setting.receiverList && this.setting.receiverList.length)",multiple:!0,size:"lg",joinValues:!1,extractValue:!0,searchable:!0,source:"/api/manage/group/"+e+"/role/rolelist",hiddenOn:"!data.enable"},{name:"setting.isRepeat",label:i.default("是否重复发送"),labelRemark:i.default("关闭重复发送时，只发送一次邮件提醒"),type:"switch",value:1,trueValue:1,falseValue:0,hiddenOn:"!data.enable"}];return d}Object.defineProperty(a,"__esModule",{value:!0}),a.chartWarningCtrl=void 0;var l=e("sugar:node_modules/tslib/tslib.js"),i=e("sugar:utils/i18n.ts"),n=e("sugar:node_modules/react/index.js"),s=e("sugar:widgets/charts/_hoc/chart-warning/chart-warning-rules.tsx");a.chartWarningCtrl=t});
;sugar.define("sugar:widgets/charts/_hoc/chart-warning/chart-warning-modal-detail.tsx",function(a,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var t=a("sugar:node_modules/tslib/tslib.js"),i=a("sugar:utils/i18n.ts"),o=a("sugar:node_modules/react/index.js"),s=a("sugar:widgets/form-dialog.tsx"),r=a("sugar:widgets/charts/_hoc/chart-warning/chart-warning-modal-detail-ctrl.tsx"),e=a("sugar:node_modules/lodash/isEqual.js"),d=function(a){function n(){return null!==a&&a.apply(this,arguments)||this}return t.__extends(n,a),n.prototype.componentWillMount=function(){this.onSubmit=this.onSubmit.bind(this)},n.prototype.onSubmit=function(a){var n=this.props,i=n.chartWarning,o=n.chart,s=n.editChartWarningInfo;if(a.warningConditions.warningCondition.forEach(function(n,t){e(n.warningCondition,{})&&a.warningConditions.warningCondition.splice(t,1)}),null===s||void 0===s?void 0:s.hash){var r=t.__assign(t.__assign({},a),{hash:null===s||void 0===s?void 0:s.hash,chartHash:o.hash,datamodelHash:o.dataModelHash});null===i||void 0===i?void 0:i.list.update(r)}else{var r=t.__assign(t.__assign({},a),{chartHash:o.hash,datamodelHash:o.dataModelHash});null===i||void 0===i?void 0:i.list.add(r)}this.props.onClose()},n.prototype.render=function(){var a,n=this.props,t=n.group,e=n.chart,d=n.hub,l=n.onClose,h=n.editChartWarningInfo,u=t&&t.data.hash||"",g=null===(a=h)||void 0===a?void 0:a.toJSON(),c=r.chartWarningCtrl(u,e,d);return o.createElement("div",null,o.createElement(s.default,{key:"chart-warning-dialog",className:"chart-warning-dialog",show:!0,wideLabel:!0,size:"md",title:i.default("数据预警配置"),data:g,onClose:l,onConfirm:this.onSubmit,controls:c}))},n.displayName="ChartWarningModalDetail",n}(o.Component);n.default=d});
;sugar.define("sugar:widgets/charts/_hoc/chart-warning/index.tsx",function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=t("sugar:node_modules/tslib/tslib.js"),n=t("sugar:utils/i18n.ts"),r=t("sugar:node_modules/react/index.js"),o=t("sugar:stores/index.ts"),i=t("sugar:widgets/form-dialog.tsx"),l=t("sugar:widgets/charts/_hoc/chart-warning/chart-warning-modal-detail.tsx"),s=t("sugar:widgets/product-type/product-type-modal.tsx"),d=t("sugar:widgets/pop-menu/pop-menu.tsx"),h=t("sugar:node_modules/amis/lib/index.js"),c=t("sugar:node_modules/lodash/get.js");e.default=function(t){var e;return o.inject(function(t){var e,a,n,r,o;return{chartWarning:t.chartWarning,group:t.group.current,reportShareToken:null===(a=null===(e=t.report)||void 0===e?void 0:e.current)||void 0===a?void 0:a.data.token,dashboardShareToken:null===(r=null===(n=t.dashboard)||void 0===n?void 0:n.current)||void 0===r?void 0:r.data.token,report:null===(o=t.report)||void 0===o?void 0:o.current}})(o.observer((e=function(e){function o(){var t=null!==e&&e.apply(this,arguments)||this;return t.chartFrontendId="",t.getDataset=function(){return a.__awaiter(t,void 0,void 0,function(){return a.__generator(this,function(t){switch(t.label){case 0:return[4,this.props.chart.loadDebugDataset()];case 1:return t.sent(),[2]}})})},t}return a.__extends(o,e),o.prototype.componentWillMount=function(){this.removeChartWarning=this.removeChartWarning.bind(this),this.editChartWarning=this.editChartWarning.bind(this),this.toggleChartWarning=this.toggleChartWarning.bind(this),this.handleInitPopMenu=this.handleInitPopMenu.bind(this),this.bindContextEvent=this.bindContextEvent.bind(this),this.removeContextEvent=this.removeContextEvent.bind(this),this.getDataset=this.getDataset.bind(this),this.setState({isModalShow:!1,chartWarningDialogShow:!1,chartWarningDetailDialogShow:!1,editHash:""});var t=this.props.chart;this.chartFrontendId=t.frontendId,this.canAddMenuOrToolbarChartWarning()&&/HeadlessChrome/.test(window.navigator.userAgent)&&(window["chartWarningGetData_"+t.frontendId]=this.getDataset)},o.prototype.componentDidMount=function(){this.bindContextEvent(),this.toggleChartWarning()},o.prototype.componentWillUnmount=function(){this.removeContextEvent(),window["chartWarningGetData_"+this.chartFrontendId]&&delete window["chartWarningGetData_"+this.chartFrontendId]},o.prototype.canAddMenuOrToolbarChartWarning=function(){var t;if(window.sugarConfig.disableChartWarning)return!1;var e=this.props,a=e.chart,n=e.reportShareToken,r=e.dashboardShareToken,o=e.report,i=e.mode;if(a.drillDownLevel)return!1;var l=(a.isDashChart?r:n)||"",s=window.location.href.split("/"),d=a.isDashChart?!0:3!==(null===(t=null===o||void 0===o?void 0:o.data)||void 0===t?void 0:t.type),h=["bar","line","pie","pie-nested","table","summary","bar-alien","bar-pic","bar-polar"],c=""===l?!0:!~s.indexOf(l||""),u=c&&d&&"normal"===i&&"dataModel"===a.dataType&&(~h.indexOf(a.type)||"normal"===a.dataConfig.tableType||"crossPivot"===a.dataConfig.tableType);return u},o.prototype.toggleChartWarning=function(){var t=this,e=c(this,"props.toolbarHandler",{}),a=e.removeToolbarItem,r=e.addToolbarItem;if(a&&r){var o=this.canAddMenuOrToolbarChartWarning();o?r({key:"sugar-chartWarning",label:n.default("数据预警"),icon:"fa fa-bell m-r text-info-dker",onClick:function(){var e=t.props,a=e.chartWarning,n=e.chart;t.setState({chartWarningDialogShow:!0}),null===a||void 0===a?void 0:a.list.loadData(n.hash)}}):a("sugar-chartWarning")}},o.prototype.handleInitPopMenu=function(){var t=this,e=d.popMenu.getPopMenuTree()||[],a=this.canAddMenuOrToolbarChartWarning();a&&e&&!e.some(function(t){return"sugar-chartWarning"===t.key})&&e.push({key:"sugar-chartWarning",icon:"fa fa-bell",name:n.default("数据预警"),cb:function(){{var e=t.props,a=e.chartWarning,n=e.chart;e.group}t.setState({chartWarningDialogShow:!0}),null===a||void 0===a?void 0:a.list.loadData(n.hash)}}),d.popMenu.setPopMenuTree(e)},o.prototype.removeContextEvent=function(){var t=document.getElementById("chart_"+this.chartFrontendId);t?t.removeEventListener("contextmenu",this.handleInitPopMenu):null},o.prototype.bindContextEvent=function(){var t=this.props.chart,e=document.getElementById("chart_"+t.frontendId);e?e.addEventListener("contextmenu",this.handleInitPopMenu):null},o.prototype.removeChartWarning=function(t){var e=this.props,a=e.chartWarning,n=e.chart;null===a||void 0===a?void 0:a.list.delete(t,n.reportHash||n.dashboardHash,n.hash)},o.prototype.editChartWarning=function(t){var e=this;this.setState({isModalShow:!0});var a=this.props,n=a.chartWarning,r=a.chart;null===n||void 0===n?void 0:n.chartWarningDetailMap.loadDetail(t,r.reportHash||r.dashboardHash).then(function(){var a=null===n||void 0===n?void 0:n.chartWarningDetailMap.mapByHash.get(t);e.setState({editChartWarningInfo:a})})},o.prototype.render=function(){var e,o=this,d=this.state,c=d.isModalShow,u=d.editChartWarningInfo,g=d.chartWarningDialogShow,p=d.chartWarningDetailDialogShow,m=d.editHash,f=this.props,v=f.chart,w=f.hub,b=this.props,W=b.chartWarning,C=b.group,E=(b.reportShareToken,b.dashboardShareToken,a.__rest(b,["chartWarning","group","reportShareToken","dashboardShareToken"])),y=null===W||void 0===W?void 0:W.list,S=null===W||void 0===W?void 0:W.list.loadState;return[r.createElement(t,a.__assign({},E,{key:"component"})),g?r.createElement("div",{key:"chart-warning-dialog-content",className:"chart-warning-container",onMouseDown:function(t){t.stopPropagation()}},r.createElement(i.default,{key:"chart-warning-dialog",className:"chart-warning-dialog",show:!0,wideLabel:!0,size:"lg",title:n.default("数据预警"),onClose:function(){return o.setState({chartWarningDialogShow:!1})},onConfirm:function(){return o.setState({chartWarningDialogShow:!1})},controls:[{name:"chartWarning",value:{},children:function(t){{var e=t.onChange;t.value}return r.createElement("div",null,r.createElement("div",{className:"chart-warning-link"},r.createElement("a",{href:"/docs/QuickGuide-chartWarning",target:"_blank"},n.default("什么是数据预警？"))),r.createElement("div",{className:"chart-warning-table-content"},y?"pending"===S?r.createElement(h.Spinner,{overlay:!0}):"error"===S?r.createElement("div",{style:{textAlign:"center"}},y.loadError&&y.loadError.message?y.loadError.message:n.default("拉取数据预警错误")):r.createElement("div",null,r.createElement("table",{className:"chart-warning-table"},r.createElement("thead",null,r.createElement("tr",null,r.createElement("th",null,n.default("序号")),r.createElement("th",null,n.default("预警名称")),r.createElement("th",null,n.default("操作")))),r.createElement("tbody",null,y.data.length?y.data.map(function(t,e){return r.createElement("tr",{key:t.hash},r.createElement("td",null,e+1),r.createElement("td",{style:{color:t.overdueData.length?"#c73522":""}},t.name),r.createElement("td",null,r.createElement("i",{className:"fa fa-pencil chart-warning-table-operation",onClick:function(){var e=window.sugarConfig.nowProductConfig;e&&!e.chartWarning?s.showUpdate("product-type-report-chartWarning"):o.editChartWarning(t.hash)}}),r.createElement("i",{className:"fa fa-eye chart-warning-table-operation",style:{paddingLeft:"10px"},onClick:function(){return o.setState({chartWarningDetailDialogShow:!0,editHash:t.hash})}}),r.createElement("i",{className:"fa fa-trash-o data-model-search-table-operation",style:{paddingLeft:"10px"},onClick:function(){return o.removeChartWarning(t.hash)}})))}):null,0===y.data.length?r.createElement("tr",null,r.createElement("td",{colSpan:3,style:{textAlign:"center"}},n.default("暂无数据"))):null)),r.createElement("div",{className:"add-btn"},r.createElement(h.TooltipWrapper,{tooltip:n.default("新增数据预警"),placement:"bottom"},r.createElement(h.Button,{className:"btn-icon btn-rounded",level:"info",size:"small",onClick:function(){var t=window.sugarConfig.nowProductConfig;t&&!t.chartWarning?s.showUpdate("product-type-report-chartWarning"):o.setState({isModalShow:!0,editChartWarningInfo:void 0})}},r.createElement("i",{className:"fa fa-plus"}))))):null),c&&r.createElement(l.default,{group:C,chart:v,hub:w,chartWarning:W,editChartWarningInfo:u,onClose:function(){return o.setState({isModalShow:!1})},onChange:e}))}}]}),p?r.createElement(i.default,{key:"chart-warning-detail-dialog",className:"chart-warning-detail-dialog",show:!0,wideLabel:!0,size:"md",title:n.default("数据预警记录"),onClose:function(){return o.setState({chartWarningDetailDialogShow:!1})},onConfirm:function(){return o.setState({chartWarningDetailDialogShow:!1})},controls:[{type:"crud",api:"/api/manage/group/"+(null===(e=null===C||void 0===C?void 0:C.data)||void 0===e?void 0:e.hash)+"/chartWarning/listTasks?hash="+m,title:null,columns:[{name:"run_at",type:"date",label:n.default("执行时间"),format:"YYYY-MM-DD HH:mm:ss"},{name:"status",label:n.default("执行结果"),type:"mapping",map:{0:n.default("未开始"),1:n.default("运行中"),2:n.default("成功"),"-1":n.default("失败"),"-2":n.default("超时")}}]}]}):null):null]},o}(r.Component),e.displayName="ChartWarningHOC",e)))}});
;sugar.define("sugar:widgets/charts/line/line-helper.ts",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.lineTooltipFormatter=t.formatYValue=t.generateLineYAxis=t.notShowNullOrNotShowZero=void 0;var a=e("sugar:utils/i18n.ts"),o=e("sugar:utils/common-helper.ts"),r=function(e,t){var a=[];return e.forEach(function(e){var o,r,n=!0;if(e.data)for(var l=0;l<e.data.length;l++){var i=e.data[l];if((null===(o=e.data[l])||void 0===o?void 0:o.hasOwnProperty("value"))&&(i=null===(r=e.data[l])||void 0===r?void 0:r.value),"both"===t){if(null!==i&&0!==i){n=!1;break}}else if(i!==t){n=!1;break}}n||a.push(e)}),a};t.notShowNullOrNotShowZero=function(e,t){return t.notShowNull&&(e=r(e,null)),t.notShowZero&&(e=r(e,0)),t.notShowZero&&t.notShowZero&&(e=r(e,"both")),e},t.generateLineYAxis=function(e,t,a,r){void 0===t&&(t=!1);var n=e.hideYSplitLine,l=e.hideYSplitArea,i=e.yName,u=e.yType,d=e.prefix,s=e.unit||a,v=!!e.yInverse,f=e.maxY,c=e.minY;t&&(i=e.secondYName,u=e.secondYType,d=e.secondYPrefix,s=e.secondYUnit,v=!!e.secondYInverse,f=e.maxSecondY,c=e.minSecondY),r&&(u=r);var h={type:"log"===u?"log":"value",scale:"log"===u?!0:!!e.chartScale,name:i?i:void 0,nameTextStyle:{color:e._textColor,fontSize:e.yFontSize||e.defaultFontSize},nameGap:8,axisLabel:{color:e._textColor,fontSize:e.yFontSize||e.defaultFontSize,rotate:(t?e.secondYLabelRotate:e.yLabelRotate)||0,formatter:function(t){return e.chartContrast&&0>t&&(t=-1*t),u&&!~["normal","log","none"].indexOf(u)?""+(d||"")+o.formatDataByType(t,u)+(s||""):""+(d||"")+o.formatNumberWithMagnitude(t,e.noMillion)+(s||"")}},axisLine:{lineStyle:{color:e._lineColor,width:1}},inverse:v,splitLine:{show:!n,lineStyle:{color:e.splitLineColors||(e._isDashChart?"#333333":"#ddd")}},splitArea:{show:!l}};return e.hideY&&!t&&(h.show=!1),e.hideSecondY&&t&&(h.show=!1),null!=f&&""!==f&&(h.max=parseFloat(f)),null!=c&&""!==c&&(h.min=parseFloat(c)),h};var n=function(e,t,o,r){var n,l,i,u,d;if(!e||!e.showDayRate)return"";if(0===r)return"";var s=t[o]?t[o]:{},v=s.data&&null!=s.data[r-1]?s.data[r-1]:0,f=s.data&&null!=s.data[r]?s.data[r]:0;s.data&&(null===(n=s.data[r-1])||void 0===n?void 0:n.hasOwnProperty("value"))&&(v=null==(null===(l=s.data[r-1])||void 0===l?void 0:l.value)?0:null===(i=s.data[r-1])||void 0===i?void 0:i.value,f=null==(null===(u=s.data[r])||void 0===u?void 0:u.value)?0:null===(d=s.data[r])||void 0===d?void 0:d.value);var c=parseFloat(v),h=parseFloat(f);if(0===c&&h>0)return" (+∞)";if(0===c&&0>h)return" (-∞)";if(0===c&&0===h)return" (+0%)";if(c===h)return" (+0%)";if(0>c)return a.default(" (环比: ")+"-)";var p=((h-c)/c*100).toFixed(2);return parseFloat(p)>0?a.default(" (环比: ")+p+"%)":a.default(" (环比: ")+p+"%)"};t.formatYValue=function(e,t){return e=t&&!~["normal","log","none"].indexOf(t)?o.formatDataByType(e,t):o.formatStringOrNumber(e,null,!0)},t.lineTooltipFormatter=function(e,r,l,i,u){e instanceof Array||(e=[e]),r.chartContrast&&(e[0].value=-1*e[0].value);for(var d=e[0].name,s=0;s<e.length;++s)""!==e[s].name&&(d=e[s].name);r.weekendMarkline&&(d=o.getWeekByDate(d)),r.tooltipSort&&e.sort(function(e,t){return parseFloat(e.value||0)<parseFloat(t.value||0)?1:-1});var v={};l.forEach(function(e){v[e.name]=e});var f=0,c=0,h=0,p=0;if(r.chartStack||r.chartContrast)for(var s=0;s<e.length;++s){var m=e[s].seriesName,S=parseFloat(e[s].value||0),g=S.toString().split(".");v[m]&&1===v[m].yAxisIndex?(g.length>1&&g[1].length>p&&(p=g[1].length),c+=S):(g.length>1&&g[1].length>h&&(h=g[1].length),f+=S)}var x=r.tooltipFontSize||r.defaultFontSize+3,y=Math.floor(.7*x),Y=[];if(e.forEach(function(e){var a,o=e.value,i=e.seriesName,u=v[i]?v[i].yAxisIndex:0,d=r.yType,s=r.unit,h=r.prefix;1===u&&(d=r.secondYType,s=r.secondYUnit,h=r.secondYPrefix),v[i]&&(v[i].unit&&(s=v[i].unit),v[i].prefix&&(h=v[i].prefix),v[i].dataFormat&&(d=v[i].dataFormat));var p=r.openCustomSeries?(null===(a=r.seriesConfig)||void 0===a?void 0:a[i])||{}:{};if((null===p||void 0===p?void 0:p.unit)&&(s=p.unit),(null===p||void 0===p?void 0:p.prefix)&&(h=p.prefix),o=t.formatYValue(o,d),null!=o&&0!=o||!r.hideNullTip){null==o&&(o="-");var m="",S=u?c:f;S&&e.value&&(r.chartStack||r.chartContrast)&&r.showPercent&&(m=" ("+(e.value/S*100).toFixed(2)+"%)");var g=e.color,x="background-color:"+g+";";g&&g.colorStops&&g.colorStops[0]&&g.colorStops[0].color&&(x="background-image: linear-gradient(180deg, "+g.colorStops[0].color+", "+g.colorStops[g.colorStops.length-1].color+");");var F=n(r,l,e.seriesIndex,e.dataIndex),w='<span\n                      style="display:inline-block;\n                        margin-right:5px;\n                        border-radius:50%;\n                        width:'+y+"px;\n                        height:"+y+"px;\n                        "+x+'"\n                    ></span>';(i||h||s||F||m)&&Y.push(""+w+i+(i?": ":"")+(h||"")+o+(s||"")+m+F)}}),(r.chartStack||r.chartContrast)&&0===c&&!r.hideTotalTip){var F=u||r.yType,w=i||r.unit||"",b=r.prefix||"";f=t.formatYValue(h?parseFloat(f.toFixed(h)):f,F),Y.push(""+a.default("合计: ")+b+f+w)}return'<div style="line-height:1.3">'+d+(Y.length?"<br/>"+Y.join("<br/>"):"")+"</div>"}});
;sugar.define("sugar:utils/export-file/export-csv.ts",function(e,s){"use strict";function r(e,s){if(e&&e.length&&e[0]&&e[0].length){var r=[];e[0].forEach(function(s,n){var o=[];e.forEach(function(e){o.push(null==e[n]?null:e[n])}),r.push(o)}),n(r,s)}}function n(e,s){var r=o(e);t(r,s)}function o(e){var s=[];return e.forEach(function(e){var r=e.join("__@@@sugar@@@__");s.push(r.replace(/,/g,"，").replace(/__@@@sugar@@@__/g,",").replace(/[\r\n]/g," "))}),s.join("\r\n")}function t(e,s){var r=new Blob(["﻿"+e],{type:"text/csv;charset=utf-8"});u.saveAs(r,s)}Object.defineProperty(s,"__esModule",{value:!0}),s.saveAsCsv=s.exportCsvByRows=s.exportCsvByColumns=void 0,e("sugar:utils/export-file/blob.js");var u=e("sugar:node_modules/file-saver/dist/FileSaver.min.js");s.exportCsvByColumns=r,s.exportCsvByRows=n,s.saveAsCsv=t});
;sugar.define("sugar:utils/animation.ts",function(n,i){"use strict";function a(n,i,a){(a[n]||0===a[n])&&(i[n]=a[n])}function t(n,i){"enableAnimation"in i&&(i.enableAnimation?(n.animation=!0,a("animationThreshold",n,i),a("animationDuration",n,i),a("animationDelay",n,i),a("animationDurationUpdate",n,i),a("animationEasing",n,i),a("animationEasingUpdate",n,i)):n.animation=!1)}Object.defineProperty(i,"__esModule",{value:!0}),i.setAnimationOption=void 0,i.setAnimationOption=t});
;sugar.define("sugar:widgets/charts/line/line.tsx",function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var a=e("sugar:node_modules/tslib/tslib.js"),o=e("sugar:utils/i18n.ts"),r=e("sugar:node_modules/react/index.js"),i=e("sugar:widgets/charts/chart-manager.tsx"),n=e("sugar:node_modules/echarts/dist/echarts.js"),l=e("sugar:widgets/charts/line/line-ctrl.tsx"),s=e("sugar:widgets/charts/_hoc/echarts.tsx"),d=e("sugar:node_modules/react-mixin/index.js"),c=e("sugar:node_modules/lodash/merge.js"),h=e("sugar:widgets/charts/_mixin/echarts.tsx"),m=e("sugar:widgets/charts/_hoc/debug/debug.tsx"),u=e("sugar:widgets/charts/_hoc/drill-down/drill-down.tsx"),g=e("sugar:widgets/charts/_hoc/toolbar/toolbar.tsx"),p=e("sugar:widgets/charts/_hoc/chart-warning/index.tsx"),f=e("sugar:widgets/charts/_hoc/chart-zoom/index.tsx"),y=e("sugar:node_modules/lodash/cloneDeep.js"),v=e("sugar:node_modules/lodash/get.js"),S=e("sugar:utils/chart-helper.ts"),x=e("sugar:widgets/charts/line/line-helper.ts"),b=e("sugar:utils/common-helper.ts"),C=e("sugar:utils/export-file/export-csv.ts"),w=e("sugar:utils/export-file/export-excel.ts"),_=e("sugar:widgets/charts/utils/helper.ts"),L=e("sugar:utils/animation.ts"),I=e("sugar:widgets/charts/_mixin/forecast.ts"),T=e("sugar:widgets/charts/utils/common.tsx"),A=12,M=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.sliderIntervalEvent="",t.sliderIndex=-1,t.nowTimelineIndex=0,t.legendSelected={},t.narrativeModeChartSetIntervalEvent="",t}return a.__extends(t,e),t.prototype.willReceiveProps=function(e,t){e.chartConfig.defaultLegendCount!==t.chartConfig.defaultLegendCount&&(this.legendSelected={})},t.prototype.willUnmount=function(){this.sliderIntervalEvent&&clearInterval(this.sliderIntervalEvent)},t.prototype.getDrillDownParam=function(e){var t,a=y(this.props.chartData),o=a.categories,r=a.categories_sugar_origin,i=a.extras,n=a.options,l={name:e.seriesName||"",value:e.value,category:e.name,type:e.seriesType,_sugar_dd_default_:e.name};if(r){var s=o.indexOf(e.name);l.categories_sugar_origin=void 0!==r[s]?r[s]:"",l._sugar_dd_default_=l.categories_sugar_origin}if(n){var d=n[this.nowTimelineIndex],c=null===d||void 0===d?void 0:d.extras;if(c){var h=(null===(t=null===d||void 0===d?void 0:d.xAxis[0])||void 0===t?void 0:t.data)||[],s=h.indexOf(e.name);l._sugar_dd_default_=void 0!==(null===d||void 0===d?void 0:d.extras[s])?d.extras[s]:""}}else if(i){var s=o.indexOf(e.name);l._sugar_dd_default_=void 0!==i[s]?i[s]:""}return l},t.prototype.getDependenceParam=function(e){return{item:this.getDrillDownParam(e),state:{seriesIndex:e.seriesIndex,dataIndex:e.dataIndex}}},t.prototype.generateLinearAreaStyle=function(e,t,a){var o=this.props.theme,r=null;if(o.config.chartTheme instanceof Object&&(r=o.config.chartTheme.color||[]),t.openCustomColor&&t.customColors&&t.customColors.length&&(r=t.customColors.map(function(e){return e.color&&e.color1&&!isNaN(e.ratio)?e:e.color||e.color1})),t.openCustomSeries&&t.seriesConfig&&t.seriesConfig[a]&&t.seriesConfig[a].color&&(r=[t.seriesConfig[a].color]),r){var i=r[e%r.length];if("string"==typeof i){i=i.trim();var n=i,l=i;if(/^#/.test(i)){i=i.replace("#","");var s=parseInt(i.substring(0,2),16),d=parseInt(i.substring(2,4),16),c=parseInt(i.substring(4,6),16);n="rgba("+s+", "+d+", "+c+", 100)",l="rgba("+s+", "+d+", "+c+", 0)"}else/^rgb\(/i.test(i)?(n=i.substr(0,i.length-1)+", 100)",l=i.substr(0,i.length-1)+", 0)"):/^rgba\(/i.test(i)&&(l=i.replace(/\d+\)/,"0)"));return{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:n},{offset:1,color:l}],global:!1}}}}return{}},t.prototype.refresh=function(e,t){var r,i=this,l=e.chartData,s=e.chartConfig,d=e.chart,h=e.hub;if(l){var m,u,g=y(l),p=g.options,f=g.timeline,b=g.yUnit,C=g.y2Unit,w=g.yDataFormat,M=g.y2DataFormat,D=g.series,B=g.categories,O=this.chart,k=[],N=!!s.yInverse,E=O.getWidth(),Y=O.getHeight(),F=_.handleGrid(s,{marginTop:20,marginBottom:55,marginLeft:80,marginRight:35,chartWidth:E,chartHeight:Y}),R=F.marginTop,z=F.marginBottom,P=F.marginLeft,W=F.marginRight,U="boolean"==typeof s.chartLegend?s.chartLegend:!0,V=parseInt(s.defaultLegendCount||"0",10),G="{}"===JSON.stringify(this.legendSelected),j={},H=!1,Z=!1,X=d.isDashChart?"#ccc":"#333";s.openCustomColor&&(m=s.textColor,u=s.lineColor),m=m||X,u=u||X;var $=!1,J=!1,q="private"===window.sugarConfig.deployType?!0:null===(r=window.sugarConfig)||void 0===r?void 0:r.nowProductConfig;(p||[{}]).forEach(function(e,r){var n;D=x.notShowNullOrNotShowZero(g.series||e.series,s),B=g.categories||(null===(n=null===e||void 0===e?void 0:e.xAxis[0])||void 0===n?void 0:n.data),D.forEach(function(e,r){var n,l,m;e.name=e.name+"",e.connectNulls=!!s.connectNulls,(q||(null===q||void 0===q?void 0:q.narrativeMode))&&d.dataConfig.narrativeMode&&(e.emphasis={focus:"series"},e.endLabel={show:!0,formatter:function(e){return e.seriesName+": "+e.value}}),k.push(e.name),j[e.name]=!0;var u=s.openCustomSeries?(null===(n=s.seriesConfig)||void 0===n?void 0:n[e.name])||{}:{},g=u.prefix||e.preifx||(e.yAxisIndex?s.secondYPrefix:s.prefix)||"",p=u.unit||e.unit||(e.yAxisIndex?s.secondYUnit:s.unit)||"";if(e.type=e.type||"line","bar"===e.type){Z=!0;var f=16;s.barMaxWidth&&parseInt(s.barMaxWidth,10)>0&&(f=parseInt(s.barMaxWidth,10)),e.barMaxWidth=f,s.barBorderRadius&&(e.itemStyle={barBorderRadius:s.barBorderRadius}),(s.barGap||0===s.barGap)&&(e.barGap=s.barGap+"%")}var y=e.yAxisIndex||0;if(y=y>1?1:y,e.yAxisIndex=y,y>0&&(H=!0),s.openCustomShadow&&s.shadowBlur&&(e.itemStyle=c({},e.itemStyle,{shadowBlur:s.shadowBlur,shadowColor:s.shadowColor||"rgba(0, 0, 0, 0.5)",shadowOffsetX:s.shadowOffsetX||0,shadowOffsetY:s.shadowOffsetY||0})),"line"===e.type&&s.borderWidth&&(e.itemStyle=c({},e.itemStyle,{borderWidth:s.borderWidth,borderColor:s.borderColor||"#fff"})),e.smooth=!!s.chartSmooth,s.sampling&&(e.sampling=s.samplingMethod||"average"),s.chartStep&&(e.step=s.chartStepType||"start"),s.chartStack||s["chartStackY"+(y+1)]){e.stack="stack_"+y;var v={};s.areaStyleLinearColor&&(v=i.generateLinearAreaStyle(r,s,e.name)),e.areaStyle=a.__assign({type:"default",opacity:(parseInt(s.areaOpacity,10)||50)/100},v)}if(s.chartArea){var v={};s.areaStyleLinearColor&&(v=i.generateLinearAreaStyle(r,s,e.name)),e.areaStyle=a.__assign({type:"default",opacity:(parseInt(s.areaOpacity,10)||50)/100},v)}if(e.chartTopShow||s.chartLabel||s.chartTopShow)if(e.label={show:!0,fontFamily:s.labelFontFamily||null,fontSize:s.labelFontSize||A,position:"top",color:"inherit",formatter:function(t){var a=e.dataFormat||(y>0?s.secondYType:s.yType);return _.formatVal({value:t.value,format:a,prefix:g,unit:p})}},e.data=e.data.map(function(e){var t=e instanceof Object?a.__assign({},e):{value:e};return t.label={position:t.value<0?"bottom":"top"},t}),u.labelColor)e.label.color=u.labelColor;else if(s.labelColor)e.label.color=s.labelColor;else if(s.openCustomColor&&s.textColor)e.label.color=s.textColor;else if(s.openCustomColor&&s.customColors&&s.customColors.length){var x=r%s.customColors.length,b=s.customColors[x];b&&b.color&&b.color1&&(e.label.color=b.color1)}var C=[],w=[];if(s.chartMarkLine&&!$&&(s.chartMarkLineOnY2&&y||!s.chartMarkLineOnY2&&!y)){$=!0;var L=parseFloat(s.markLineVal||0);C.push({yAxis:L,name:o.default("基准线")})}if(s.chartMarkLine2&&!J&&(s.chartMarkLine2OnY2&&y||!s.chartMarkLine2OnY2&&!y)){J=!0;var L=parseFloat(s.markLineVal2||0);C.push({yAxis:L,name:o.default("基准线")})}if(s.weekendMarkline&&B.length<365)for(var I=0;I<B.length;I++){var T=B[I].toString();8===T.length&&/^2\d+$/.test(T)&&(T=T.slice(0,4)+"-"+T.slice(4,6)+"-"+T.slice(6,8)),10===T.length&&6===new Date(T).getDay()&&C.push([{name:o.default("周六"),type:"dashed",xAxis:B[I],yAxis:N?"max":"min",lineStyle:{color:"#ddd"},label:{formatter:o.default("周六"),color:"#ddd"}},{name:"",xAxis:B[I],y:"10%"}])}if(s.chartMarkAvg&&C.push({name:o.default("均值"),type:"average",lineStyle:{color:s.chartMarkLine||s.chartMarkLine2?"#aaa":"#dc143c"},label:{position:s.chartMarkLine||s.chartMarkLine2?"middle":"end",color:s.chartMarkLine||s.chartMarkLine2?"#aaa":"#dc143c",formatter:function(t){var a=e.dataFormat||(y>0?s.secondYType:s.yType);return o.default("均值:")+_.formatVal({value:t.value,format:a,prefix:g,unit:p})}}}),C&&C.length){var M=2,D=[["chartMarkLine","markLineVal"],["chartMarkLine2","markLineVal2"]];D.forEach(function(e){if(s[e[0]]){var t=parseFloat(s[e[1]]||0).toString().split(".");t&&t.length>1&&t[1].length>M&&(M=t[1].length)}}),e.data&&e.data.length&&e.data.forEach(function(e){var t=parseFloat(e||0).toString().split(".");t&&t.length>1&&t[1].length>M-1&&(M=t[1].length+1)}),e.markLine={lineStyle:{color:s.markLineColor||"#dc143c"},symbolSize:0,precision:M,label:{position:"end",color:s.markLineColor||"#dc143c",formatter:function(t){var a=e.dataFormat||(y>0?s.secondYType:s.yType);return _.formatVal({value:t.value,format:a,prefix:g,unit:p})}},data:C}}if(s.chartMarkMax&&w.push({name:o.default("最大值"),type:"max"}),s.chartMarkMin&&w.push({name:o.default("最小值"),type:"min"}),w&&w.length&&(e.markPoint={label:{show:!0,textBorderWidth:2,color:s.chartMarkTextColor||"#fff",textBorderColor:s.textBorderColor||"auto",formatter:function(t){var a=e.dataFormat||(y>0?s.secondYType:s.yType);return _.formatVal({value:t.value,format:a,prefix:g,unit:p})}},symbol:s.chartMarkShape||"pin",data:w,itemStyle:{color:s.chartMarkBgColor||""}}),G&&V&&V>r&&(i.legendSelected[e.name]=!0),null==i.legendSelected[e.name]&&(i.legendSelected[e.name]=!1),"line"===e.type&&(e.lineStyle=e.lineStyle?a.__assign(a.__assign({},e.lineStyle),{opacity:1}):{opacity:1},e.symbolSize=parseInt(s.symbolSize,10)||4,!s.openCustomSeries&&!u.showSymbol&&(null===(l=d.dataConfig)||void 0===l?void 0:l.narrativeMode)&&(e.showSymbol=!1),e.symbol=s.symbolType||"emptyCircle",s.chartHideSymbol&&(e.symbolSize=0),"yes"===s.showAllSymbol?e.showAllSymbol=!0:"no"===s.showAllSymbol&&(e.showAllSymbol=!1),!s.chartTopShow||s.showAllSymbol&&"auto"!==s.showAllSymbol||(e.showAllSymbol=!1),s.lineWidth&&(e.lineStyle=c({},e.lineStyle,{width:parseInt(s.lineWidth,10)}))),e.itemStyle=c({},e.itemStyle,{opacity:1}),s.openCustomSeries&&u&&(u.lineType&&(e.lineStyle=c({},e.lineStyle,{type:u.lineType})),u.lineWidth&&(e.lineStyle=c({},e.lineStyle,{width:u.lineWidth})),u.color&&(e.itemStyle=c({},e.itemStyle,{color:u.color})),u.showSymbol&&(e.showSymbol=!0,e.symbolSize=u.symbolSize||4,u.symbolType&&(e.symbol=u.symbolType)),(null===(m=e.label)||void 0===m?void 0:m.show)&&(e.label.formatter=function(t){var a=e.dataFormat||(y>0?s.secondYType:s.yType);return _.formatVal({value:t.value,format:a,prefix:g,unit:p})})),h.dependenceData.dependenceState){var O=h.dependenceData.dependenceState,E=O.seriesIndex,Y=O.dataIndex;E===r?e.data=e.data.map(function(t,o){var r=t instanceof Object?a.__assign({},t):{value:t};return"bar"===e.type?(r.itemStyle={opacity:o===Y?1:.4},r):(e.lineStyle=e.lineStyle?a.__assign(a.__assign({},e.lineStyle),{opacity:1}):{opacity:1},r.itemStyle={opacity:.4},o===Y&&(r.itemStyle={opacity:1},r.symbol=s.symbolType||"circle",r.symbolSize=(parseInt(s.symbolSize,10)||4)+6),r)}):("line"===e.type&&(e.lineStyle=e.lineStyle?a.__assign(a.__assign({},e.lineStyle),{opacity:.4}):{opacity:.4}),e.itemStyle=c({},e.itemStyle,{opacity:.4}))}t||S.isValidSlideDependence(s)&&s.slideShow||("line"===e.type&&(e.lineStyle=e.lineStyle?a.__assign(a.__assign({},e.lineStyle),{opacity:1}):{opacity:1}),e.itemStyle=c({},e.itemStyle,{opacity:1}))}),(q||(null===q||void 0===q?void 0:q.timeline))&&f&&f.length&&s.showGraphic&&!e.graphic&&(e.graphic={elements:[{type:"text",right:s.graphicToRight||20,bottom:s.graphicToBottom||40,style:{text:f[r],font:"bolder "+(s.graphicFontSize||22)+"px monospace",fill:"rgba(100, 100, 100, 0.25)"},z:100}]})});var K=[{show:!s.hideX,name:s.xName||"",nameGap:8,nameTextStyle:{color:m,fontSize:s.xFontSize||A},type:"category",splitLine:{show:!1},boundaryGap:Z,axisLine:{lineStyle:{color:u,width:1}},axisLabel:{color:m,fontSize:s.xFontSize||A},axisTick:{alignWithLabel:!0}}];s.xLableShowMin&&(K[0].axisLabel.showMinLabel=!0),s.xLableShowMax&&(K[0].axisLabel.showMaxLabel=!0),s.xLabelRotateCommon&&parseInt(s.xLabelRotateCommon,10)&&(K[0].axisLabel.rotate=parseInt(s.xLabelRotateCommon,10)),s.xLableAllShow&&(K[0].axisLabel.interval=0),s.xLableAllShow&&s.xLabelRotate&&parseInt(s.xLabelRotate,10)&&(K[0].axisLabel.rotate=parseInt(s.xLabelRotate,10)),s.xLableVertical&&(K[0].axisLabel.formatter=function(e){return(e+"").split("").join("\n")});var Q=[x.generateLineYAxis(a.__assign({_textColor:m,_lineColor:u,_isDashChart:d.isDashChart,defaultFontSize:A},s),!1,b,w)];H&&(Q.push(x.generateLineYAxis(a.__assign({_textColor:m,_lineColor:u,_isDashChart:d.isDashChart,defaultFontSize:A},s),!0,C,M)),W+=20,(s.yName||s.secondYName)&&(R+=10)),s.xName&&(W+=25);var et=_.calcuGridByLegend({marginLeft:P,marginBottom:z,marginRight:W,marginTop:R},s);z=f?et.marginBottom+50:et.marginBottom,P=et.marginLeft,W=et.marginRight,R=et.marginTop;var tt=void 0;s.chartDataZoom&&k.length&&(z+=40,Y&&(tt=Y-z+30,tt+32>Y&&(tt=Y-32)));var at=_.legendPositionConfig({marginLeft:P,marginBottom:z,marginRight:W,marginTop:R},s,"bottom",d.dataConfig),ot={legend:a.__assign(a.__assign({},at),{data:k,show:U,selected:U&&V?this.legendSelected:j,textStyle:{color:s.legendTextColor||m,fontSize:s.legendFontSize||A,fontFamily:s.legendFontFamily||null}}),dataZoom:{show:!!s.chartDataZoom,realtime:!0,start:s.chartDataZoom?s.dataZoomStart||0:0,end:s.chartDataZoom?s.dataZoomEnd||100:100,y:tt},grid:{left:P,top:R,right:W,bottom:z},xAxis:K,yAxis:Q,series:D,tooltip:{show:s.tooltipHide===!0?!1:!0,trigger:"axis",confine:s.tooltipConfine||!1,extraCssText:T.getTooltipCss(s),axisPointer:{lineStyle:s.openCustomColor&&s.axisPoiLineColor?{color:s.axisPoiLineColor}:{}},formatter:function(e){return x.lineTooltipFormatter(e,a.__assign({defaultFontSize:A},s),D,b,w)}}};s.openCustomColor&&s.customColors&&s.customColors.length&&(ot.color=s.customColors.map(function(e){return e.color&&e.color1&&!isNaN(e.ratio)?new n.graphic.LinearGradient(s.chartReverse?1:0,0,0,s.chartReverse?0:1,[{offset:0,color:e.color1},{offset:Math.max(1-e.ratio/100,0),color:e.color},{offset:1,color:e.color}]):e.color||e.color1})),ot.visualMap=_.handleVisualMap(s),s.openCustomShadow&&s.shadowBlur&&(ot.lineStyle=c({},ot.lineStyle,{shadowBlur:s.shadowBlur,shadowColor:s.shadowColor||"rgba(0, 0, 0, 0.5)",shadowOffsetX:s.shadowOffsetX||0,shadowOffsetY:s.shadowOffsetY||0}));var rt=ot,it={baseOption:{},options:[]};if((q||(null===q||void 0===q?void 0:q.timeline))&&f&&f.length){var nt={axisType:s.tlAxisType,orient:"horizontal",autoPlay:s.tlAutoPlay,inverse:s.tlInverse,playInterval:1e3*s.tlPlayInterval,label:{color:s.tlNormalColor,fontSize:s.tlLabelFontSize},symbol:s.tlSymbol,lineStyle:{color:s.tlLineStyleColor},checkpointStyle:{color:s.tlSymbolColor,borderColor:s.tlSymbolBorderColor,borderWidth:2},controlStyle:{showNextBtn:s.tlShowNextBtn,showPrevBtn:s.tlShowPrevBtn,showPlayBtn:s.tlShowPlayBtn,color:s.tlControlStyleColor,borderColor:s.tlControlStyleBorderColor},itemStyle:{color:s.tlItemStyleColor},progress:{itemStyle:{color:s.tlEmphasisColor},lineStyle:{color:s.tlEmphasisColor}},emphasis:{controlStyle:{color:"#aaa",borderColor:"#aaa"}},tooltip:{},data:[]};nt.data=f,it.baseOption=a.__assign({textStyle:_.getTextStyle(s),timeline:nt},ot),delete it.baseOption.series,it.options=p,rt=it,O.on("timelinechanged",function(e){i.nowTimelineIndex=e.currentIndex})}else ot.xAxis[0].data=B,ot.textStyle=_.getTextStyle(s),rt=ot;var lt=s;(q||(null===q||void 0===q?void 0:q.timeline))&&f&&f.length&&(lt=a.__assign(a.__assign({},s),{enableAnimation:!0,animationDuration:s.animationDuration||1e3,animationDurationUpdate:s.animationDurationUpdate||4e3,animationEasing:s.animationEasing||"linear",animationEasingUpdate:s.animationEasingUpdate||"linear"})),d.dataConfig.narrativeMode&&(lt.enableAnimation?null:lt.enableAnimation=!0,lt.animationDuration?null:lt.animationDuration=1e4),L.setAnimationOption(rt.baseOption||rt,lt),(q||(null===q||void 0===q?void 0:q.narrativeMode))&&d.dataConfig.narrativeMode?(O.setOption(rt,!0),this.narrativeModeChartSetIntervalEvent=setInterval(function(){O.clear(),O.setOption(rt,!0)},12e3)):O.setOption(rt,!0),s.enableForecast&&I.addForecast(O,s,rt.baseOption||rt),V&&O.on("legendselectchanged",function(e){i.legendSelected=e.selected});var st=v(this,"_handleDependence");if(!t&&(this.sliderIntervalEvent&&clearInterval(this.sliderIntervalEvent),s.slideShow)){var dt=function(){try{if(!i.props.chartData&&S.isValidSlideDependence(s))return;i.sliderIndex++;var e=i.sliderIndex%B.length;if(s.slideIntervalLastNumber&&s.slideIntervalLastNumber<B.length&&(e=B.length-s.slideIntervalLastNumber+i.sliderIndex%s.slideIntervalLastNumber),O.dispatchAction({type:"hideTip"}),O.dispatchAction({type:"showTip",seriesIndex:0,dataIndex:e}),st&&S.isValidSlideDependence(s)){var t=0,a=v(D,"["+t+"].data["+e+"]");st({name:B[e],dataIndex:e,seriesName:v(D,"["+t+"].name"),seriesIndex:t,seriesType:v(D,"["+t+"].type"),value:a instanceof Object?a.value:a})}}catch(o){}};dt(),this.sliderIntervalEvent=setInterval(dt,1e3*(parseInt(s.slideInterval,10)||3))}}},t.displayName="Line",t=a.__decorate([u.default,m.default,g.default,p.default,f.default,s.default,d.decorate(h.default)],t)}(r.Component);t.default=M;var D=function(e){if(!e)return o.default("无数据");if(e.options)e.options.forEach(function(t,a){var r=e.timeline&&e.timeline[a]?e.timeline[a]+"的":"";if(!(t.xAxis&&t.series&&t.xAxis instanceof Array&&t.series instanceof Array))return o.default("在「"+r+"」数据中缺少xAxis或series字段");if(!t.xAxis.length||!t.series.length)return o.default("在「"+r+"」无数据");if(!b.isArrayOfTypes(t.xAxis,["string","number","null","array"]))return o.default("在「"+r+"」X轴绑定的数据类型不对，不是字符串、数字或数组");for(var i=0;i<t.series.length;i++){var n=t.series[i];if(!n.data)return o.default(n.name?"在「"+r+"」Y轴在「"+r+"」「"+n.name+"」数据为空":"在「"+r+"」第「"+(i+1)+"」条折线或柱状数据为空");if(!b.isArrayOfTypes(n.data,["null","numberString","number"]))return o.default(n.name?"在「"+r+"」Y轴在「"+r+"」「"+n.name+"」数据中不全是数字，格式错误":"在「"+r+"」第「"+(i+1)+"」条折线或柱状数据不全是数字，格式错误")}});else{if(!(e.categories&&e.series&&e.categories instanceof Array&&e.series instanceof Array))return o.default("数据中缺少categories或series字段");if(!e.categories.length||!e.series.length)return o.default("无数据");if(!b.isArrayOfTypes(e.categories,["string","number","null"]))return o.default("X轴绑定的数据类型不对，不是字符串或数字");for(var t=0;t<e.series.length;t++){var a=e.series[t];if(!a.data)return o.default(a.name?"Y轴「"+a.name+"」数据为空":"第「"+(t+1)+"」条折线或柱状数据为空");if(!b.isArrayOfTypes(a.data,["null","numberString","number"]))return o.default(a.name?"Y轴「"+a.name+"」数据中不全是数字，格式错误":"第「"+(t+1)+"」条折线或柱状数据不全是数字，格式错误")}}return!0},B=function(e,t){var a=N(e);w.exportExcelByColumns(a,""+(t.dynamicName||t.name||"export"))},O=function(e,t){var a=N(e);C.exportCsvByColumns(a,(t.dynamicName||t.name||"export")+".csv")},k=function(e){var t=N(e);return w.exportRowsByColumns(t)},N=function(e){var t,a=[],r="private"===window.sugarConfig.deployType?!0:null===(t=window.sugarConfig)||void 0===t?void 0:t.nowProductConfig;if(e&&e.data&&e.data.categories&&e.data.series&&e.data.categories.length&&e.data.series.length||e.data.options&&e.data.options.length){var i=0;(e.data.options||[]).forEach(function(t){var a=e.data.categories||t.xAxis[0].data;i<a.length&&(i=a.length)}),(e.data.options||[{}]).forEach(function(t,n){var l=e.data.series||t.series,s=e.data.categories||t.xAxis[0].data;if((r||(null===r||void 0===r?void 0:r.timeline))&&e.data.timeline&&e.data.timeline.length){for(var d=[],c=0;i>c;c++)d.push(s.length>c?e.data.timeline[n]:null);a.push([o.default("时间轴")].concat(d))}a.push([o.default("X轴")].concat(s)),l.forEach(function(e){a.push([e.name||""].concat(e.data))})})}return a},E=function(e){var t=e.dataConfig,a=t.doubleY,o=t.dataModel,r=o.x,i=void 0===r?[]:r,n=o.y,l=void 0===n?[]:n,s=o.y2,d=void 0===s?[]:s;return i.length?!a&&!l.length||a&&!l.length&&!d.length?!1:!0:!1};i.register({kind:"commonChart",type:"line",name:o.default("折线图"),iconClassName:"chart-line",enableTemplate:!0,commonCustomShadow:!0,commonCustomColorGradient:!0,useChartEigenIndex:[0],variants:[{name:o.default("双Y轴折线"),iconClassName:"chart-dy-line",initialState:{dataApiUrl:"$CUR_HOST/openapi/demo/chart?type=DYLine",dataConfig:{doubleY:!0}},useChartEigenIndex:[1]},{name:o.default("区域堆积图"),iconClassName:"chart-stack-line",initialState:{config:{chartStack:!0}},useChartEigenIndex:[0]},{name:o.default("标点折线"),iconClassName:"chart-line-dot",initialState:{dataApiUrl:"$CUR_HOST/openapi/demo/chart?type=coreCitySellGrow",config:{hideY:!0,chartTopShow:!0,symbolSize:11,symbolType:"circle",borderWidth:1,marginLeft:35}},useChartEigenIndex:[0]},{name:o.default("线柱混搭"),iconClassName:"chart-line-bar",initialState:{dataApiUrl:"$CUR_HOST/openapi/demo/chart?type=lineBar",config:{barBorderRadius:8,chartSmooth:!0},dataConfig:{lineBar:!0,doubleY:!0}},useChartEigenIndex:[1]},{name:o.default("叙事折线图"),iconClassName:"chart-narrativemode-line",version:["advan"],initialState:{dataApiUrl:"$CUR_HOST/openapi/demo/chart?type=narrativemodeLine",width:12,height:580,config:{enableAnimation:!0,chartLegend:!1,marginRight:120},dataConfig:{narrativeMode:!0}},initialDashboardState:{width:665,height:270}}],initialState:{dataType:"api",dataApiUrl:l.chartDemoUrl,dataConfig:{categoriesSort:"default",continuity_type:"simple",continuity_empty_val:"1",continuity_time_step:"1Hour",doubleY:!1,timeline:!1,conAutoGroup:!0},config:{chartLegend:!0,legendHeight:20,legendWidth:55,dataZoomStart:60,dataZoomEnd:100,marginLeft:70,marginTop:20,marginRight:35,marginBottom:55,defaultLegendCount:0,barMaxWidth:16,barBorderRadius:0,markLineVal:0,yType:"normal",secondYType:"normal",xLabelRotate:-25,hideYSplitArea:!0,areaStyleLinearColor:!1,areaOpacity:50,slideInterval:3,chartStepType:"start",tlAxisType:"category",tlAutoPlay:!0,tlPlayInterval:6,tlItemStyleColor:"#bbb",tlLineStyleColor:"#555",tlControlStyleColor:"#666",tlControlStyleBorderColor:"#666",tlSymbol:"circle",tlSymbolColor:"#bbb",tlEmphasisColor:"#177cdc",tlNormalColor:"#999",tlShowNextBtn:!0,tlShowPlayBtn:!0,showGraphic:!0}},initialDashboardState:{config:{hideYSplitLine:!0,tlNormalColor:"#fff",tlLineStyleColor:"#fff",tlControlStyleBorderColor:"#fff"}},component:M,validate:D,exportCSV:O,exportExcel:B,exportRows:k,dataBindCtrl:l.dataBindCtrl,needDashboardAutoFresh:!0,advancedCtrl:l.advancedCtrl,drillDownType:"single",canBeDrillChild:!0,dataModelPanelShow:[["dataType","dataModel"]],drillDownSuggestDataModelField:"x",canHierarchyDrillDown:!0,loadDataWhenDataModelConfigChange:E,drillDownFieldName:"category",chartEigens:l.chartEigens})});
;sugar.define("sugar:widgets/charts/bar/bar-series-ctrl.tsx",function(e,l){"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.seriesCtrl=l.barCtrl=void 0;var a=e("sugar:node_modules/tslib/tslib.js"),t=e("sugar:utils/i18n.ts"),r=e("sugar:widgets/amis-inline-switch.tsx"),n=e("sugar:widgets/charts/utils/common.tsx");l.barCtrl=function(e,l,a){return e.type&&"bar"!==e.type?null:{hiddenOn:l,type:"fieldset",collapsed:!0,title:t.default("柱"),controls:[r.amisInlineSwitch(a+".chartTopShow",t.default("柱顶展示数据")),{type:"group",hiddenOn:"!"+a+".chartTopShow",controls:[{type:"color",name:a+".labelColor",clearable:!0,label:t.default("标签颜色")},{type:"number",label:t.default("数据字号"),name:a+".labelFontSize",step:1,min:8,max:100}]},{type:"number",name:a+".barMaxWidth",label:t.default("柱体最大宽度(0为自适应)"),min:0},{type:"number",name:a+".barBorderRadius",label:t.default("柱体圆角"),min:0}]}},l.seriesCtrl=function(e){if(!e.data)return null;var i=e.data.series;if(!i||!i.reduce)return null;var s=[],o=i.reduce(function(e,r){var i=[],o="!config.openCustomSeries || config.seriesConfig.current != '"+r.name+"'",u="config.seriesConfig."+r.name;return i.push({type:"select",name:u+".colorSchemeType",hiddenOn:o,label:t.default("颜色分配方式")+'\n                   <a class="text-info pull-right" href="/docs/BestPractise-visualMap" target="_blank">\n                     '+t.default("文档说明")+"\n                   </a>",options:[{label:t.default("按数据系列"),value:0},{label:t.default("按数据索引"),value:1},{label:t.default("按数据名称"),value:2},{label:t.default("按数据数值"),value:3}]},{type:"table",name:u+".seriesColors",hiddenOn:o,addable:!0,editable:!0,removable:!0,showAddBtn:!0,needConfirm:!0,columns:[{label:t.default("分项"),name:"name",quickEdit:{type:"text",clearable:!0}},{label:t.default("颜色(渐变起点)"),name:"color",type:"color",quickEdit:{type:"color",clearable:!0}},{label:t.default("颜色(渐变终点)"),name:"color1",type:"color",quickEdit:{type:"color",clearable:!0}},{label:t.default("渐变位置"),name:"ratio",quickEdit:{type:"number",placeholder:t.default("0-100"),min:0,max:100}}]},n.getSeriesUnitCtrl(u,o)),s.push({label:r.name,value:r.name}),e.concat(a.__spreadArrays(i,[l.barCtrl(r,o,u)]))},[]);return{type:"fieldset",title:t.default("系列设置(series)"),collapsable:!0,collapsed:!0,headingClassName:"fieldset-title",controls:a.__spreadArrays([r.amisInlineSwitch("config.openCustomSeries",t.default("开启自定义系列设置")),{type:"select",name:"config.seriesConfig.current",label:t.default("系列名"),options:s,value:s.length?s[0].value:null,hiddenOn:"!config.openCustomSeries"}],o)}}});
;sugar.define("sugar:widgets/charts/bar/bar-ctrl.tsx",function(e,a){"use strict";var t;Object.defineProperty(a,"__esModule",{value:!0}),a.advancedCtrl=a.dataBindCtrl=a.chartEigens=a.chartDemoUrl=void 0;var l=e("sugar:node_modules/tslib/tslib.js"),n=e("sugar:utils/i18n.ts"),i=e("sugar:node_modules/react/index.js"),o=e("sugar:widgets/ctrl-panel/data-bind-ctrl/index.tsx"),d=e("sugar:widgets/object-array-editor/object-array-editor.tsx"),r=e("sugar:widgets/ctrl-panel/common/switch-with-tip.tsx"),c=e("sugar:widgets/amis-inline-switch.tsx"),f=e("sugar:widgets/charts/bar/bar-series-ctrl.tsx"),u=e("sugar:widgets/data-model/data-model-field-holder/data-model-field-holder.tsx"),s=e("sugar:widgets/charts/_mixin/forecast.ts"),m=e("sugar:widgets/charts/utils/common.tsx"),g=e("sugar:widgets/charts/bar/bar-mark-ctrl.tsx"),p="/openapi/demo/chart?type=bar";a.chartDemoUrl="$CUR_HOST/openapi/demo/chart?type=bar",a.chartEigens=[{field:[{name:"x",type:"d",minCount:1,maxCount:3},{name:"y",type:"m",minCount:1,maxCount:50,canRepeat:!0},{name:"color",type:"d",minCount:0,maxCount:3}]}];var h="private"===window.sugarConfig.deployType?!0:null===(t=window.sugarConfig)||void 0===t?void 0:t.nowProductConfig;a.dataBindCtrl=function(e){var a=o.getDebugAndRefreshBtn({loadData:e.chart.loadData,loadDebugData:e.chart.loadDebugData,dataType:e.chart.dataType,refreshText:n.default("刷新图表")}),t=e.chart.dataModelHash||"",c=e.sqlModelStore.detailMap.mapByHash.get(t),f=o.generateSQLFieldList(c),s=o.getDataBindCommon({frontendId:e.chart.frontendId,dataTypeOptions:["dataModel","api","sql","json"],api:{demoUrl:p},sql:{needContinuitySetting:!0,sqlFieldList:f},loadData:e.chart.loadData,loadDebugData:e.chart.loadDebugData,curUrl:e.chart.dataApiUrl}),m=[{type:"select",list:f,key:"frontendId",name:n.default("绑定字段"),tdStyle:{minWidth:150}},{type:"text",key:"columnName",name:n.default("字段重命名"),tdStyle:{minWidth:120}}],g=l.__spreadArrays([u.getDataModelFieldHolder({name:"x",label:n.default("X轴/类别轴"),config:{dataModelHash:t,holderId:e.chart.frontendId+"-x",maxCount:3,onlyDimension:!0,canNotNoEnumerable:!0}}),u.getDataModelFieldHolder({name:"y",label:n.default("Y轴/值轴"),config:{dataModelHash:t,holderId:e.chart.frontendId+"-y",maxCount:50,onlyMeasure:!0,canRepeat:!0,meaConfig:{contextMenu:["chartTopShow","dataCal"]}}}),u.getDataModelFieldHolder({name:"color",label:n.default("颜色图例"),config:{dataModelHash:t,holderId:e.chart.frontendId+"-color",maxCount:3,onlyDimension:!0,canNotNoEnumerable:!0}}),{type:"select",label:n.default("展示方式"),name:"dataConfig.displayMode",hiddenOn:"data.dataType != 'dataModel'",value:e.chart.dataConfig.timeline?"timeline":"",clearable:!0,options:[{label:n.default("时间轴"),value:"timeline"},{label:n.default("叙事模式"),value:"narrativeMode"}]},u.getDataModelFieldHolder({name:"timeline",label:n.default(e.chart.dataConfig.timeline||"timeline"===e.chart.dataConfig.displayMode?"时间轴":"叙事顺序"),hiddenOn:"dataType != 'dataModel' || !(dataConfig.timeline || dataConfig.displayMode)",config:{dataModelHash:t,holderId:e.chart.frontendId+"-timeline",maxCount:1,onlyDimension:!0}}),u.getDataModelFieldHolder({name:"extra",label:n.default("下钻附加字段"),config:{dataModelHash:t,holderId:e.chart.frontendId+"-extra",maxCount:1,onlyDimension:!0,canNotNoEnumerable:!0,dimConfig:{contextMenu:null}},desc:n.default("请确保该字段在X轴的聚合结果中值是相同的，从而获得正确的结果")}),o.commonFilterForDataModel(t),o.commonBindUrlParamForDataModel(t)],u.getChartConditionsHolder(t,e.chart,!0),[o.commonLimitForDataModel,{type:"select",name:"dataConfig.categories",hiddenOn:"data.dataType != 'sql'",label:n.default("X轴绑定字段"),placeholder:n.default("请选择"),options:f},{type:"select",name:"dataConfig._sugar_extras",hiddenOn:"data.dataType != 'sql'",label:n.default("下钻附加字段"),placeholder:n.default("请选择"),options:f},{type:"select",name:"dataConfig.categoriesSort",hiddenOn:"data.dataType != 'sql'",label:n.default("X轴数据排序"),placeholder:n.default("请选择"),options:[{label:n.default("默认"),value:"default"},{label:n.default("从小到大"),value:"asc"},{label:n.default("从大到小"),value:"desc"}]},{name:"dataConfig.series",hiddenOn:"data.dataType != 'sql'",children:function(a){var t=a.onChange,o=a.value;return i.createElement(d.default,l.__assign({},{onChange:t,value:o},{chartFrontendId:e.chart.frontendId,containerClassName:"form-group form-item",label:n.default("绑定Y轴数据项"),addTipText:n.default("新增Y轴数据项"),cols:m}))}}]);return c&&c.config.openRow2Col&&g.push({name:"dataConfig.addAllRow2Col",children:function(e){var a=e.onChange,t=e.value;return i.createElement(r.default,l.__assign({},{onChange:a,value:t,label:n.default("绑定所有的行转列"),tipText:n.default("不了解？"),tipLink:"/docs/DataBind-SQL-Rowcol"}))}}),s.concat(g,a)},a.advancedCtrl=function(e){var a=[c.amisInlineSwitch("config.chartReverse",n.default("X/Y轴翻转")),c.amisInlineSwitch("config.chartContrast",n.default("设为双向对比柱图")),c.amisInlineSwitch("config.chartStack",n.default("设为堆积图"),"config.chartContrast"),c.amisInlineSwitch("config.hideTotalTip",n.default("Tooltip中不显示合计"),"!config.chartContrast && !config.chartStack"),c.amisInlineSwitch("config.showPercent",n.default("悬停Tooltip中显示占比"),"!(config.chartStack || config.chartContrast)"),c.amisInlineSwitch("config.chartTopShow",n.default("柱顶展示数据")),c.amisInlineSwitch("config.topShowTotal",n.default("柱顶展示数据为合计"),"!config.chartStack || !config.chartTopShow"),c.amisInlineSwitch("config.dataSort",n.default("按照数值大小排序")),{type:"select",name:"config.dataSortTarget",label:"",placeholder:n.default("请选择"),hiddenOn:"!config.dataSort || !config.chartStack || config.chartContrast",value:"first",options:[{label:n.default("按照第一系列排序"),value:"first"},{label:n.default("按照堆积的合计值排序"),value:"stack"}]},{type:"select",name:"config.dataSortType",label:"",placeholder:n.default("请选择"),hiddenOn:"!config.dataSort",options:[{label:n.default("从大到小"),value:"desc"},{label:n.default("从小到大"),value:"asc"}]},{type:"divider"},{type:"fieldset",collapsed:!0,title:n.default("Y轴设置"),collapsable:!0,headingClassName:"fieldset-title",controls:[{type:"group",controls:[c.amisInlineSwitch("config.yInverse",n.default("Y轴数值反向")),c.amisInlineSwitch("config.hideY",n.default("隐藏Y轴"))]},{type:"group",controls:[c.amisInlineSwitch("config.hideYSplitLine",n.default("隐藏Y轴网格线")),c.amisInlineSwitch("config.hideYSplitArea",n.default("隐藏Y轴区域分割"))]},c.amisInlineSwitch("config.noMillion",n.default("Y轴百万千万展示为万")),{type:"group",controls:[{type:"select",name:"config.yType",label:n.default("Y轴类型"),clearable:!0,placeholder:n.default("请选择"),options:m.yTypeOptions}]},{type:"group",controls:[{type:"number",name:"config.maxY",label:n.default("Y坐标轴最大值"),step:.1,placeholder:n.default("自动")},{type:"number",name:"config.minY",label:n.default("Y坐标轴最小值"),step:.1,placeholder:n.default("自动")}]},{type:"group",controls:[{type:"number",name:"config.yLabelRotate",placeholder:n.default("-90至90"),label:n.default("Y轴标签倾斜度"),min:-90,max:90},{type:"number",label:n.default("Y轴字号"),name:"config.yFontSize",step:1,min:8,max:100}]},m.dataUnitCtrl,{type:"text",name:"config.yName",label:n.default("Y轴名称")}]},{type:"divider"},{type:"fieldset",collapsed:!0,title:n.default("X轴设置"),collapsable:!0,headingClassName:"fieldset-title",controls:[c.amisInlineSwitch("config.xLableAllShow",n.default("X轴标签全部展示")),{type:"number",name:"config.xLabelRotate",label:n.default("强制X轴标签倾斜度(-90至90)"),hiddenOn:"!config.xLableAllShow",min:-90,max:90,step:5},c.amisInlineSwitch("config.xLableVertical",n.default("竖着显示文字")),c.amisInlineSwitch("config.xLableShowMin",n.default("强制显示X轴首个标签")),c.amisInlineSwitch("config.xLableShowMax",n.default("强制显示X轴末尾标签")),{type:"group",controls:[c.amisInlineSwitch("config.hideX",n.default("隐藏X轴")),c.amisInlineSwitch("config.chartDataZoom",n.default("开启X轴缩放"))]},{type:"number",name:"config.dataZoomStart",label:n.default("默认缩放起始百分比(%)"),hiddenOn:"!config.chartDataZoom",step:5,max:95,min:0},{type:"number",name:"config.dataZoomEnd",label:n.default("默认缩放结束百分比(%)"),hiddenOn:"!config.chartDataZoom",step:5,max:100,min:5},{type:"number",name:"config.xLabelRotateCommon",label:n.default("X轴标签倾斜度(-90至90)"),min:-90,max:90,step:5},{type:"group",controls:[{type:"number",label:n.default("X轴字号"),name:"config.xFontSize",step:1,min:8,max:100},{type:"text",name:"config.xName",label:n.default("X轴名称")}]}]},{type:"divider"},m.getTooltipCtrl([c.amisInlineSwitch("config.tooltipSort",n.default("Tooltip中按大小排序")),c.amisInlineSwitch("config.hideNullTip",n.default("Tooltip中隐藏空数据项")),c.amisInlineSwitch("config.slideShow",n.default("开启提示轮播")),{type:"number",name:"config.slideInterval",hiddenOn:"!config.slideShow",label:n.default("轮播间隔秒数"),step:1,min:1},{type:"number",name:"config.slideIntervalLastNumber",hiddenOn:"!config.slideShow",label:n.default("只轮播末尾的几项数据"),step:1,min:0},c.amisInlineSwitch("config.openSlideDep",n.default("轮播同步图表联动（联动开启时生效）"),"!config.slideShow"),c.amisInlineSwitch("config.echartsGroup",n.default("加入Tooltip多图同步对齐")),c.amisInlineSwitch("config.tooltipHide",n.default("关闭Tooltip"))]),{type:"divider"},m.getLegendCtrl([{type:"number",name:"config.legendHeight",label:n.default("图例高度"),step:1,min:15,hiddenOn:'!config.chartLegend || (config.legendPosition != "bottom" && config.legendPosition != "top")'},{type:"number",name:"config.legendWidth",label:n.default("图例宽度"),step:1,min:10,hiddenOn:'!config.chartLegend || (config.legendPosition != "left" && config.legendPosition != "right")'},{type:"number",name:"config.defaultLegendCount",label:n.default("默认展示的柱体系列数(0为都展示)"),min:0}]),{type:"divider"},m.getLabelCtrl([m.labelPosition,c.amisInlineSwitch("config.topShowTotal",n.default("柱顶展示数据为合计"),"!config.chartStack")]),{type:"divider"},{type:"fieldset",title:n.default("标记和标线设置"),collapsable:!0,collapsed:!0,headingClassName:"fieldset-title",controls:l.__spreadArrays(g.default,[c.amisInlineSwitch("config.chartMarkAvg",n.default("展示均值线")),c.amisInlineSwitch("config.chartMarkLine",n.default("开启基准标线")),{type:"number",name:"config.markLineVal",label:n.default("基准值"),step:.1,hiddenOn:"!config.chartMarkLine"},{type:"color",name:"config.markLineColor",label:n.default("基准线颜色"),hiddenOn:"!config.chartMarkLine"},c.amisInlineSwitch("config.chartMarkLine2",n.default("开启第二基准标线")),{type:"number",name:"config.markLineVal2",label:n.default("第二基准值"),step:.1,hiddenOn:"!config.chartMarkLine2"}])},{type:"divider"},{type:"fieldset",title:n.default("柱体设置"),collapsable:!0,collapsed:!0,headingClassName:"fieldset-title",controls:[{type:"number",name:"config.barMaxWidth",label:n.default("柱体最大宽度(0为自适应)"),min:0},{type:"number",name:"config.barGap",label:n.default("不同系列的柱体间距"),min:0,max:100,step:5},{type:"group",controls:[{type:"number",name:"config.barBorderRadius",label:n.default("柱体圆角"),min:0},{type:"number",name:"config.barMinHeight",label:n.default("柱体最小高度"),min:0}]},c.amisInlineSwitch("config.showBackground",n.default("开启柱体背景色(胶囊柱图)")),{type:"group",hiddenOn:"!config.showBackground",controls:[{type:"color",name:"config.bgColor",label:n.default("背景色"),format:"rgba"},{type:"number",name:"config.bgBorderW",label:n.default("背景描边宽度"),min:0}]},{type:"group",hiddenOn:"!config.showBackground",controls:[{type:"color",name:"config.bgBorderC",label:n.default("背景描边颜色"),format:"rgba"},{type:"number",name:"config.bgBorderRadius",label:n.default("背景圆角"),min:0}]}]},{type:"divider"},m.gridCtrl,{type:"divider"},{type:"fieldset",title:n.default("时间轴设置(timeline)"),collapsed:!0,collapsable:!0,headingClassName:"fieldset-title",hidden:!(h||(null===h||void 0===h?void 0:h.timeline)),controls:[{type:"group",controls:[{type:"select",name:"config.tlAxisType",label:n.default("轴类型"),placeholder:n.default("请选择"),value:"category",options:[{label:n.default("数值轴"),value:"value"},{label:n.default("类目轴"),value:"category"}]},{type:"number",name:"config.tlPlayInterval",label:n.default("播放间隔"),value:1,step:1,min:1,placeholder:n.default("自动")}]},{type:"group",controls:[c.amisInlineSwitch("config.tlAutoPlay",n.default("自动播放")),c.amisInlineSwitch("config.tlInverse",n.default("反方向放置"))]},c.amisInlineSwitch("config.valueAnimation",n.default("值变化动画"),"",!0),{type:"number",name:"config.precision",label:n.default("值变化精度"),value:1,min:0},{type:"group",controls:[{type:"color",name:"config.tlNormalColor",value:"#999",label:n.default("标签颜色")},{type:"color",name:"config.tlEmphasisColor",value:"#23b7e5",label:n.default("标签高亮颜色")}]},{type:"group",controls:[{type:"color",name:"config.tlLineStyleColor",value:"#555",label:n.default("线条颜色")},{type:"number",name:"config.tlLabelFontSize",label:n.default("文本字体大小"),value:12,step:1,min:10}]},{type:"group",controls:[{type:"select",name:"config.tlSymbol",label:n.default("标记图形"),placeholder:n.default("请选择"),value:"circle",options:[{label:n.default("圆形"),value:"circle"},{label:n.default("矩形"),value:"rect"},{label:n.default("圆角矩形"),value:"roundRect"},{label:n.default("三角形"),value:"triangle"},{label:n.default("菱形"),value:"diamond"},{label:n.default("标记"),value:"pin"},{label:n.default("箭头"),value:"arrow"},{label:n.default("无"),value:"none"}]},{type:"color",name:"config.tlItemStyleColor",value:"#bbb",label:n.default("图形颜色")}]},{type:"group",controls:[{type:"color",name:"config.tlSymbolColor",value:"#bbb",label:n.default("标记图形颜色")},{type:"color",name:"config.tlSymbolBorderColor",value:"#777",label:n.default("标记图形边框颜色")}]},c.amisInlineSwitch("config.tlShowPlayBtn",n.default("播放按钮"),"",!0),{type:"group",controls:[c.amisInlineSwitch("config.tlShowNextBtn",n.default("前进按钮"),"",!0),c.amisInlineSwitch("config.tlShowPrevBtn",n.default("后退按钮"))]},{type:"group",controls:[{type:"color",name:"config.tlControlStyleColor",value:"#666",label:n.default("控制按钮颜色")},{type:"color",name:"config.tlControlStyleBorderColor",value:"#666",label:n.default("控制按钮边框颜色")}]},c.amisInlineSwitch("config.showGraphic",n.default("时间轴内容"),"",!0),{type:"number",name:"config.graphicToBottom",label:n.default("底部边距"),value:140,step:1,min:10},{type:"number",name:"config.graphicToRight",label:n.default("右侧边距"),value:80,step:1,min:10},{type:"number",name:"config.graphicFontSize",label:n.default("文本字体大小"),value:50,step:1,min:12}]},{type:"divider"}];return"narrativeMode"===e.chart.dataConfig.displayMode?(null===h||void 0===h?void 0:h.narrativeMode)&&a.push({type:"fieldset",title:n.default("叙事模式设置"),collapsed:!0,collapsable:!0,headingClassName:"fieldset-title",controls:[{type:"group",controls:[{type:"number",name:"config.narrativeModeValueRate",label:n.default("值变化速度(毫秒)"),value:2e3,min:500},{type:"number",name:"config.narrativeModePrecision",label:n.default("值变化精度"),value:1,min:0}]},c.amisInlineSwitch("config.narrativeModeShowGraphic",n.default("叙事模式内容"),"",!0),{type:"number",name:"config.narrativeModeGraphicToBottom",label:n.default("底部边距"),value:40,step:1,min:10},{type:"number",name:"config.narrativeModeGraphicToRight",label:n.default("右侧边距"),value:20,step:1,min:10},{type:"number",name:"config.narrativeModeGraphicFontSize",label:n.default("文本字体大小"),value:22,step:1,min:12}]},{type:"divider"}):a.push(m.getVisualMapCtrl(e,!0),{type:"divider"},f.seriesCtrl(e)),a=a.concat(s.forecastCtrl())}});
;sugar.define("sugar:widgets/charts/bar/bar.tsx",function(e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.chartDataSort=void 0;var t=e("sugar:node_modules/tslib/tslib.js"),o=e("sugar:utils/i18n.ts"),r=e("sugar:node_modules/react/index.js"),i=e("sugar:node_modules/echarts/dist/echarts.js"),n=e("sugar:node_modules/tinycolor2/tinycolor.js"),l=e("sugar:widgets/charts/chart-manager.tsx"),s=e("sugar:widgets/charts/bar/bar-ctrl.tsx"),d=e("sugar:widgets/charts/_hoc/echarts.tsx"),c=e("sugar:node_modules/react-mixin/index.js"),u=e("sugar:widgets/charts/_mixin/echarts.tsx"),h=e("sugar:widgets/charts/_hoc/debug/debug.tsx"),g=e("sugar:widgets/charts/_hoc/drill-down/drill-down.tsx"),m=e("sugar:widgets/charts/_hoc/toolbar/toolbar.tsx"),f=e("sugar:widgets/charts/_hoc/chart-warning/index.tsx"),p=e("sugar:widgets/charts/_hoc/chart-zoom/index.tsx"),v=e("sugar:node_modules/lodash/cloneDeep.js"),x=e("sugar:node_modules/lodash/get.js"),y=e("sugar:utils/chart-helper.ts"),S=e("sugar:widgets/charts/line/line-helper.ts"),b=e("sugar:widgets/charts/utils/helper.ts"),C=e("sugar:utils/common-helper.ts"),_=e("sugar:utils/export-file/export-csv.ts"),w=e("sugar:node_modules/lodash/merge.js"),M=e("sugar:utils/export-file/export-excel.ts"),T=e("sugar:utils/animation.ts"),L=e("sugar:widgets/charts/_mixin/forecast.ts"),I=e("sugar:widgets/charts/utils/common.tsx"),B=12,A=function(e){function r(){var a=null!==e&&e.apply(this,arguments)||this;return a.sliderIntervalEvent="",a.narrativeModeSetTimeoutEvent="",a.narrativeModeChartSetIntervalEvent="",a.sliderIndex=-1,a.nowTimelineIndex=0,a.legendSelected={},a}return t.__extends(r,e),r.prototype.willReceiveProps=function(e,a){e.chartConfig.defaultLegendCount!==a.chartConfig.defaultLegendCount&&(this.legendSelected={})},r.prototype.willUnmount=function(){this.sliderIntervalEvent&&clearInterval(this.sliderIntervalEvent),this.narrativeModeSetTimeoutEvent&&clearTimeout(this.narrativeModeSetTimeoutEvent),this.narrativeModeChartSetIntervalEvent&&clearInterval(this.narrativeModeChartSetIntervalEvent)},r.prototype.getDrillDownParam=function(e){var t,o=v(this.props.chartData);this.props.chartConfig.dataSort&&(o=a.chartDataSort(o,this.props.chartConfig.dataSortType,this.props.chartConfig.chartStack&&!this.props.chartConfig.chartContrast&&"stack"===this.props.chartConfig.dataSortTarget));var r=o.categories,i=o.categories_sugar_origin,n=o.series,l=o.options,s=o.extras,d={name:e.seriesName||"",value:e.value,category:e.name,_sugar_dd_default_:e.name};if(n&&(d.field=n[e.seriesIndex]?n[e.seriesIndex].field:""),i){var c=r.indexOf(e.name);d.categories_sugar_origin=void 0!==i[c]?i[c]:"",d._sugar_dd_default_=d.categories_sugar_origin}if(l){var u=l[this.nowTimelineIndex],h=null===u||void 0===u?void 0:u.extras,g=null===u||void 0===u?void 0:u.series;if(h){var m=(null===(t=null===u||void 0===u?void 0:u.xAxis[0])||void 0===t?void 0:t.data)||[],c=m.indexOf(e.name);d._sugar_dd_default_=void 0!==(null===u||void 0===u?void 0:u.extras[c])?u.extras[c]:""}g&&(d.field=g[e.seriesIndex]?g[e.seriesIndex].field:"")}else if(s){var c=r.indexOf(e.name);d._sugar_dd_default_=void 0!==s[c]?s[c]:""}return d},r.prototype.getDependenceParam=function(e){return{item:this.getDrillDownParam(e),state:{seriesIndex:e.seriesIndex,dataIndex:e.dataIndex}}},r.prototype.narrativeModeChartSet=function(e,a,o,r){var i=this,n=e.options||[],l=v(e);n.forEach(function(n,s){l=t.__assign(t.__assign({},e),{options:n}),l.baseOption.legend.data=[a[s]];var d=t.__assign(t.__assign({},l.baseOption),l.options);i.narrativeModeSetTimeoutEvent=setTimeout(function(){delete d.timeline,d.animationDuration=2e3,d.animationDurationUpdate=2e3,d.yAxis[0].animationDuration=300,d.yAxis[0].animationDurationUpdate=300,d.series[0].realtimeSort=!0,o.setOption(d,!0)},s*(r.narrativeModeValueRate||2e3))})},r.prototype.refresh=function(e,r){var l,s,d,c,u=this,h=e.chartData,g=e.chartConfig,m=e.chart,f=e.hub,p=e.theme,C=v(h);g.dataSort&&(C=a.chartDataSort(C,g.dataSortType,g.chartStack&&!g.chartContrast&&"stack"===g.dataSortTarget));var _,M,A=C.options,R=C.timeline,k=C.yUnit,D=C.yDataFormat,E=C.series,F=C.categories,O=this.chart,N=[],P=O.getWidth(),U=O.getHeight(),G=b.handleGrid(g,{marginTop:20,marginBottom:55,marginLeft:80,marginRight:35,chartWidth:P,chartHeight:U}),z=G.marginTop,V=G.marginBottom,W=G.marginLeft,j=G.marginRight,H=void 0!==g.chartLegend?g.chartLegend:!0,Y=parseInt(g.defaultLegendCount||"0",10),Z="{}"===JSON.stringify(this.legendSelected),X={},$="private"===window.sugarConfig.deployType?!0:null===(l=window.sugarConfig)||void 0===l?void 0:l.nowProductConfig,q=m.isDashChart?"#ccc":"#333";g.openCustomColor&&(_=g.textColor,M=g.lineColor),_=_||q,M=M||q,(A||[{}]).forEach(function(e,a){var i;E=C.series||e.series,F=C.categories||(null===(i=null===e||void 0===e?void 0:e.xAxis[0])||void 0===i?void 0:i.data);var n=E.length;E.forEach(function(a,i){var l,s;a.name=a.name+"",N.push(a.name),X[a.name]=!0;var d=g.openCustomSeries?(null===(l=g.seriesConfig)||void 0===l?void 0:l[a.name])||{}:{},c=d.prefix||a.preifx||(a.yAxisIndex?g.secondYPrefix:g.prefix)||"",h=d.unit||a.unit||(a.yAxisIndex?g.secondYUnit:g.unit)||"";0===i&&g.chartContrast&&(a.data=a.data.map(function(e){return e?-1*e:e})),0===i&&g.slideShow&&(a.data=a.data.map(function(e){return null===e?0:e})),a.type="bar";var p=0;a.yAxisIndex=p;var v=16;g.barMaxWidth&&parseInt(g.barMaxWidth,10)>0&&(v=parseInt(g.barMaxWidth,10)),a.barMaxWidth=v,g.barMinHeight&&(a.barMinHeight=parseInt(g.barMinHeight,10)||0),g.barBorderRadius&&(a.itemStyle={barBorderRadius:g.barBorderRadius,borderRadius:g.barBorderRadius}),g.showBackground&&(a.showBackground=!0,a.backgroundStyle={},g.bgColor&&(a.backgroundStyle.color=g.bgColor),g.bgBorderW&&(a.backgroundStyle.borderWidth=g.bgBorderW),g.bgBorderC&&(a.backgroundStyle.borderColor=g.bgBorderC),g.bgBorderRadius&&(a.backgroundStyle.barBorderRadius=g.bgBorderRadius,a.backgroundStyle.borderRadius=g.bgBorderRadius)),g.openCustomShadow&&g.shadowBlur&&(a.itemStyle=w({},a.itemStyle,{shadowBlur:g.shadowBlur,shadowColor:g.shadowColor||"rgba(0, 0, 0, 0.5)",shadowOffsetX:g.shadowOffsetX||0,shadowOffsetY:g.shadowOffsetY||0})),(g.barGap||0===g.barGap)&&(a.barGap=g.barGap+"%"),(g.chartStack||g.chartContrast)&&(a.stack="stack_"+p);var x=[],S=[];if(g.chartMarkLine&&0===i){var _=parseFloat(g.markLineVal||0),M={name:o.default("基准线")};g.chartReverse?M.xAxis=_:M.yAxis=_,x.push(M)}if(g.chartMarkLine2&&0===i){var _=parseFloat(g.markLineVal2||0),M={name:o.default("基准线")};g.chartReverse?M.xAxis=_:M.yAxis=_,x.push(M)}if(g.chartMarkAvg&&x.push({name:o.default("均值"),type:"average",lineStyle:{color:g.chartMarkLine||g.chartMarkLine2?"#aaa":"#dc143c"},label:{position:g.chartMarkLine||g.chartMarkLine2?"middle":"end",color:g.chartMarkLine||g.chartMarkLine2?"#aaa":"#dc143c",formatter:function(e){return o.default("均值:「"+b.formatVal({value:0===i&&g.chartContrast&&e.value?-1*e.value:e.value,format:a.dataFormat||g.yType,prefix:c,unit:h})+"」")}}}),x&&x.length){var T=2,L=[["chartMarkLine","markLineVal"],["chartMarkLine2","markLineVal2"]];L.forEach(function(e){if(g[e[0]]){var a=parseFloat(g[e[1]]||0).toString().split(".");a&&a.length>1&&a[1].length>T&&(T=a[1].length)}}),a.data&&a.data.length&&a.data.forEach(function(e){var a=parseFloat(e||0).toString().split(".");a&&a.length>1&&a[1].length>T-1&&(T=a[1].length+1)}),a.markLine={lineStyle:{color:g.markLineColor||"#dc143c"},symbolSize:0,precision:T,label:{position:"end",color:g.markLineColor||"#dc143c",formatter:function(e){return b.formatVal({value:e.value,format:a.dataFormat||g.yType,prefix:c,unit:h})}},data:x}}if(g.chartMarkMax&&S.push({name:o.default("最大值"),type:"max",label:{formatter:function(e){return b.formatVal({value:0===i&&g.chartContrast&&e.value?-1*e.value:e.value,format:a.dataFormat||g.yType,prefix:c,unit:h})}}}),g.chartMarkMin&&S.push({name:o.default("最小值"),type:"min",label:{formatter:function(e){return b.formatVal({value:0===i&&g.chartContrast&&e.value?-1*e.value:e.value,format:a.dataFormat||g.yType,prefix:c,unit:h})}}}),S&&S.length&&(a.markPoint={label:{show:!0,textBorderWidth:2,color:g.chartMarkTextColor||"#fff",textBorderColor:g.textBorderColor||"auto",formatter:function(e){return b.formatVal({value:e.value,format:a.dataFormat||g.yType,prefix:c,unit:h})}},symbol:g.chartMarkShape||"pin",data:S,itemStyle:{color:g.chartMarkBgColor||""}}),f.dependenceData.dependenceState){var I=f.dependenceData.dependenceState,A=I.seriesIndex,k=I.dataIndex;A===i?a.data=a.data.map(function(e,a){return{value:e,itemStyle:{opacity:a===k?1:.5}}}):a.itemStyle=w({},a.itemStyle,{opacity:.5})}else a.itemStyle=w({},a.itemStyle,{opacity:1});if(r||y.isValidSlideDependence(g)&&g.slideShow||(a.data=a.data.map(function(e){return e instanceof Object?e.value:e})),(a.chartTopShow||g.chartTopShow||g.chartLabel||d.chartTopShow)&&(a.data=a.data.map(function(o,r){var l=o&&0>o;0===i&&g.chartContrast&&(l=!0);var s="top";l&&(s="bottom"),g.chartReverse&&!g.yInverse?(s="right",l&&(s="left")):!g.chartReverse&&g.yInverse?(s="bottom",l&&(s="top")):g.chartReverse&&g.yInverse&&(s="left",l&&(s="right"));var u=g.labelFontSize;d.chartTopShow&&d.labelFontSize&&(u=d.labelFontSize);var f={show:!0,color:"inherit",fontFamily:g.labelFontFamily||null,fontSize:u||B,position:g.labelPosition||s,formatter:function(t){var o;if(g.topShowTotal&&g.chartStack){F=C.categories||(null===(o=null===e||void 0===e?void 0:e.xAxis[0])||void 0===o?void 0:o.data);for(var l=F.indexOf(t.name),s=n-1,d=n-1;d>=0;d--)if(E[d].data[r].value){s=d;break}if(i===s&&~l){var u=E,m=0,f=0;return u.forEach(function(e){var a=parseFloat(e.data[l].value||0)||0,t=a.toString().split(".");t.length>1&&t[1].length>f&&(f=t[1].length),m+=a}),b.formatVal({value:f?parseFloat(m.toFixed(f)):m,format:a.dataFormat||g.yType,prefix:c,unit:h})}return""}return b.formatVal({value:0===i&&g.chartContrast&&t.value?-1*t.value:t.value,format:a.dataFormat||g.yType,prefix:c,unit:h})}};return($||(null===$||void 0===$?void 0:$.timeline)||(null===$||void 0===$?void 0:$.narrativeMode))&&(m.dataConfig.timeline||"timeline"===m.dataConfig.displayMode||"narrativeMode"===m.dataConfig.displayMode)&&R&&R.length&&(f.precision=m.dataConfig.timeline||"timeline"===m.dataConfig.displayMode?g.precision||1:"narrativeMode"===m.dataConfig.displayMode?g.narrativeModePrecision||1:1,f.valueAnimation=g.valueAnimation||!1),d.labelColor?f.color=d.labelColor:g.labelColor?f.color=g.labelColor:g.openCustomColor&&g.textColor&&(f.color=g.textColor),o instanceof Object?t.__assign(t.__assign({},o),{label:f}):{value:o,label:f}})),Z&&Y&&Y>i&&(u.legendSelected[a.name]=!0),null==u.legendSelected[a.name]&&(u.legendSelected[a.name]=!1),g.openCustomSeries&&d){if((null===(s=d.seriesColors)||void 0===s?void 0:s.length)>0){var D={};d.seriesColors.forEach(function(e){var a=d.colorSchemeType?e.name:0;e.color&&e.color1?D[a]={type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:e.color},{offset:Math.min((e.ratio||0)/100,1),color:e.color1},{offset:1,color:e.color1}]}:e.color?D[a]=e.color:e.color1&&(D[a]=e.color1)}),a.itemStyle=1===d.colorSchemeType?w({},a.itemStyle,{color:function(e){return D[e.dataIndex+1]||e.color}}):2===d.colorSchemeType?w({},a.itemStyle,{color:function(e){return D[e.name]||e.color}}):3===d.colorSchemeType?w({},a.itemStyle,{color:function(e){return D[e.value]||e.color}}):w({},a.itemStyle,{color:D[0]})}else d.color&&(a.itemStyle=w({},a.itemStyle,{color:d.color}));d.barMaxWidth&&parseInt(d.barMaxWidth,10)>0&&(a.barMaxWidth=parseInt(d.barMaxWidth,10)),d.barBorderRadius&&(a.itemStyle=w({},a.itemStyle,{barBorderRadius:d.barBorderRadius}))}}),($||(null===$||void 0===$?void 0:$.timeline)||(null===$||void 0===$?void 0:$.narrativeMode))&&((m.dataConfig.timeline||"timeline"===m.dataConfig.displayMode)&&g.showGraphic||"narrativeMode"===m.dataConfig.displayMode&&g.narrativeModeShowGraphic)&&!e.graphic&&R&&R.length&&(e.graphic={elements:[{type:"text",right:m.dataConfig.timeline||"timeline"===m.dataConfig.displayMode?g.graphicToRight||40:"narrativeMode"===m.dataConfig.displayMode?g.narrativeModeGraphicToRight||80:80,bottom:m.dataConfig.timeline||"timeline"===m.dataConfig.displayMode?g.graphicToBottom||20:"narrativeMode"===m.dataConfig.displayMode?g.narrativeModeGraphicToBottom||140:140,style:{text:R[a],font:"bolder "+(m.dataConfig.timeline||"timeline"===m.dataConfig.displayMode?g.graphicFontSize||22:"narrativeMode"===m.dataConfig.displayMode?g.narrativeModeGraphicFontSize||50:50)+"px monospace",fill:"rgba(100, 100, 100, 0.25)"},z:100}]})});var J=[{show:!g.hideX,type:"category",name:g.xName||"",nameGap:8,nameTextStyle:{color:_,fontSize:g.xFontSize||B},splitLine:{show:!1},boundaryGap:!0,axisLine:{lineStyle:{color:M,width:1}},axisLabel:{color:_,fontSize:g.xFontSize||B},axisTick:{alignWithLabel:!0},data:F}];g.xLableShowMin&&(J[0].axisLabel.showMinLabel=!0),g.xLableShowMax&&(J[0].axisLabel.showMaxLabel=!0),g.xLabelRotateCommon&&parseInt(g.xLabelRotateCommon,10)&&(J[0].axisLabel.rotate=parseInt(g.xLabelRotateCommon,10)),g.xLableAllShow&&(J[0].axisLabel.interval=0),g.xLableAllShow&&g.xLabelRotate&&parseInt(g.xLabelRotate,10)&&(J[0].axisLabel.rotate=parseInt(g.xLabelRotate,10)),g.xLableVertical&&(J[0].axisLabel.formatter=function(e){return(e+"").split("").join("\n")});var K=[S.generateLineYAxis(t.__assign({_textColor:_,_lineColor:M,_isDashChart:m.isDashChart,defaultFontSize:B},g),!1,k,D)];g.xName&&(j+=30);var Q=b.calcuGridByLegend({marginLeft:W,marginBottom:V,marginRight:j,marginTop:z},g);V=R?Q.marginBottom+50:Q.marginBottom,W=Q.marginLeft,j=Q.marginRight,z=Q.marginTop;var ea=void 0;g.chartDataZoom&&N.length&&(V+=40,U&&(ea=U-V+30,ea+32>U&&(ea=U-32)));var aa=b.legendPositionConfig({marginLeft:W,marginBottom:V,marginRight:j,marginTop:z},g,"bottom",m.dataConfig),ta={legend:t.__assign(t.__assign({},aa),{data:N,show:H,selected:H&&Y?this.legendSelected:X,textStyle:{fontFamily:g.legendFontFamily||null,fontSize:g.legendFontSize||B,color:g.legendTextColor||_}}),dataZoom:{show:!!g.chartDataZoom,realtime:!0,start:g.chartDataZoom?g.dataZoomStart||0:0,end:g.chartDataZoom?g.dataZoomEnd||100:100,y:ea},grid:{left:W,top:z,right:j,bottom:V},xAxis:g.chartReverse?K:J,yAxis:g.chartReverse?J:K,series:E,tooltip:{show:g.tooltipHide===!0?!1:!0,trigger:"axis",confine:g.tooltipConfine||!1,extraCssText:I.getTooltipCss(g),axisPointer:{lineStyle:g.openCustomColor&&g.axisPoiLineColor?{color:g.axisPoiLineColor}:{}},formatter:function(e){return S.lineTooltipFormatter(e,t.__assign({defaultFontSize:B},g),E,k,D)}}};if(g.chartDataZoom&&N.length||delete ta.dataZoom,null===(d=null===(s=p.config.chartTheme)||void 0===s?void 0:s.color)||void 0===d?void 0:d.length){var oa=p.config.chartTheme.color;ta.color=oa.map(function(e){return new i.graphic.LinearGradient(g.chartReverse?1:0,0,0,g.chartReverse?0:1,[{offset:0,color:e},{offset:1,color:n(e).spin(18).toString()}])})}g.openCustomColor&&g.customColors&&g.customColors.length&&(ta.color=g.customColors.map(function(e){return e.color&&e.color1&&!isNaN(e.ratio)?new i.graphic.LinearGradient(g.chartReverse?1:0,0,0,g.chartReverse?0:1,[{offset:0,color:e.color1},{offset:Math.max(1-e.ratio/100,0),color:e.color},{offset:1,color:e.color}]):e.color||e.color1})),ta.visualMap=b.handleVisualMap(g);var ra=ta,ia={baseOption:{},options:[]};if(($||(null===$||void 0===$?void 0:$.timeline)||(null===$||void 0===$?void 0:$.narrativeMode))&&R&&R.length){if(m.dataConfig.timeline||"timeline"===m.dataConfig.displayMode){var na={axisType:g.tlAxisType,orient:"horizontal",autoPlay:g.tlAutoPlay,inverse:g.tlInverse,playInterval:1e3*g.tlPlayInterval,label:{color:g.tlNormalColor,fontSize:g.tlLabelFontSize},symbol:g.tlSymbol,lineStyle:{color:g.tlLineStyleColor},checkpointStyle:{color:g.tlSymbolColor,borderColor:g.tlSymbolBorderColor,borderWidth:2},controlStyle:{showNextBtn:g.tlShowNextBtn,showPrevBtn:g.tlShowPrevBtn,showPlayBtn:g.tlShowPlayBtn,color:g.tlControlStyleColor,borderColor:g.tlControlStyleBorderColor},itemStyle:{color:g.tlItemStyleColor},progress:{itemStyle:{color:g.tlEmphasisColor},lineStyle:{color:g.tlEmphasisColor}},emphasis:{controlStyle:{color:"#aaa",borderColor:"#aaa"}},data:[]};na.data=R,ia.baseOption=t.__assign({textStyle:b.getTextStyle(g),timeline:na},ta),delete ia.baseOption.series}else ia.baseOption=t.__assign({textStyle:b.getTextStyle(g)},ta),delete ia.baseOption.series;if(ia.options=A,g.chartReverse){var la=[];A&&A.forEach(function(e){var a={yAxis:e.xAxis,series:e.series};e.graphic?a.graphic=e.graphic:null,la.push(a)}),ia.options=la}ra=ia,O.on("timelinechanged",function(e){u.nowTimelineIndex=e.currentIndex})}else ta.textStyle=b.getTextStyle(g),ra=ta;var sa=g;if(($||(null===$||void 0===$?void 0:$.timeline))&&(m.dataConfig.timeline||"timeline"===m.dataConfig.displayMode)&&R&&R.length&&(sa=t.__assign(t.__assign({},g),{enableAnimation:!0,animationDuration:g.animationDuration||1e3,animationDurationUpdate:g.animationDurationUpdate||5e3,animationEasing:g.animationEasing||"linear",animationEasingUpdate:g.animationEasingUpdate||"linear"})),T.setAnimationOption(ra.baseOption||ra,sa),($||(null===$||void 0===$?void 0:$.narrativeMode))&&"narrativeMode"===m.dataConfig.displayMode){var da=v((null===(c=null===ra||void 0===ra?void 0:ra.baseOption)||void 0===c?void 0:c.legend)?ra.baseOption.legend.data:ra.legend.data),ca=ra.options||[];this.narrativeModeChartSet(ra,da,O,g),this.narrativeModeChartSetIntervalEvent=setInterval(function(){u.narrativeModeChartSet(ra,da,O,g)},(g.narrativeModeValueRate||2e3)*ca.length)}else O.setOption(ra,!0);g.enableForecast&&L.addForecast(O,g,ra.baseOption||ra),Y&&O.on("legendselectchanged",function(e){u.legendSelected=e.selected});var ua=x(this,"_handleDependence");if(!r&&(this.sliderIntervalEvent&&clearInterval(this.sliderIntervalEvent),g.slideShow)){var ha=function(){try{if(!u.props.chartData&&y.isValidSlideDependence(g))return;u.sliderIndex++;var e=u.sliderIndex%F.length;if(g.slideIntervalLastNumber&&g.slideIntervalLastNumber<F.length&&(e=F.length-g.slideIntervalLastNumber+u.sliderIndex%g.slideIntervalLastNumber),O.dispatchAction({type:"hideTip"}),O.dispatchAction({type:"showTip",seriesIndex:0,dataIndex:e}),ua&&y.isValidSlideDependence(g)){var a=x(E,"[0].data["+e+"]"),t=F[e];ua({name:t,dataIndex:e,seriesName:x(E,"[0].name"),seriesIndex:0,value:a},!0)}}catch(o){}};ha(),this.sliderIntervalEvent=setInterval(ha,1e3*(parseInt(g.slideInterval,10)||3))}},r.displayName="Bar",r=t.__decorate([g.default,h.default,m.default,f.default,p.default,d.default,c.decorate(u.default)],r)}(r.Component);a.default=A;var R=function(e){if(!e)return o.default("无数据");if(e.options)e.options.forEach(function(a,t){var r=e.timeline&&e.timeline[t]?e.timeline[t]+"的":"";if(!(a.xAxis&&a.series&&a.xAxis instanceof Array&&a.series instanceof Array))return o.default("在「"+r+"」数据中缺少xAxis或series字段");if(!a.xAxis.length||!a.series.length)return o.default("在「"+r+"」无数据");if(!C.isArrayOfTypes(a.xAxis,["string","number","null","array"]))return o.default("在「"+r+"」X轴绑定的数据类型不对，不是字符串、数字或数组");for(var i=0;i<a.series.length;i++){var n=a.series[i];if(!n.data)return o.default(n.name?"在「"+r+"」Y轴「"+n.name+"」数据为空":"在「"+r+"」第「"+(i+1)+"」条折线或柱状数据为空");if(!C.isArrayOfTypes(n.data,["null","numberString","number"]))return o.default(n.name?"在「"+r+"」Y轴「"+n.name+"」数据中不全是数字，格式错误":"在「"+r+"」第「"+(i+1)+"」条折线或柱状数据不全是数字，格式错误")}});else{if(!(e.categories&&e.series&&e.categories instanceof Array&&e.series instanceof Array))return o.default("数据中缺少categories或series字段");if(!e.categories.length||!e.series.length)return o.default("无数据");if(!C.isArrayOfTypes(e.categories,["string","number","null"]))return o.default("X轴绑定的数据类型不对，不是字符串或数字");for(var a=0;a<e.series.length;a++){var t=e.series[a];if(!t.data)return o.default(t.name?"Y轴「"+t.name+"」数据为空":"第「"+(a+1)+"」系列柱状数据为空");if(!C.isArrayOfTypes(t.data,["null","numberString","number"]))return o.default(t.name?"Y轴「"+t.name+"」数据中不全是数字，格式错误":"第「"+(a+1)+"」系列柱状数据不全是数字，格式错误")}}return!0};a.chartDataSort=function(e,a,t){void 0===t&&(t=!1);var o=e.options,r=e.categories_sugar_origin;return(o||[{}]).forEach(function(o,i){var n,l=e.series||o.series,s=e.categories||(null===(n=null===o||void 0===o?void 0:o.xAxis[0])||void 0===n?void 0:n.data),d=s.map(function(e,a){var t={c:e};r&&(t.co=r[a]);var o=0;return t.s=l.map(function(e){return o+=parseFloat(e.data[a])||0,e.data[a]}),t.total=o,t}),c="asc"===a?1:-1;d.sort(function(e,a){return t?e.total>a.total?c:-1*c:parseFloat(e.s[0])>parseFloat(a.s[0])?c:-1*c}),d.forEach(function(a,t){var n,l;e.categories&&(e.categories[t]=a.c),o.xAxis&&(null===(n=null===o||void 0===o?void 0:o.xAxis[0])||void 0===n?void 0:n.data)&&(e.options[i].xAxis[0].data[t]=a.c),r&&(e.categories&&(e.categories[t]=a.c,e.categories_sugar_origin[t]=a.co),o.xAxis&&(null===(l=null===o||void 0===o?void 0:o.xAxis[0])||void 0===l?void 0:l.data)&&(e.options[i].xAxis[0].data[t]=a.c,e.options[i].categories_sugar_origin[t]=a.co)),a.s.map(function(a,r){e.series&&(e.series[r].data[t]=a),o.series&&(e.options[i].series[r].data[t]=a)})})}),e};var k=function(e,a){var t=F(e,a);return M.exportExcelByColumns(t,""+(a.dynamicName||a.name||"export"))},D=function(e,a){var t=F(e,a);_.exportCsvByColumns(t,(a.dynamicName||a.name||"export")+".csv")},E=function(e,a){var t=F(e,a);return M.exportRowsByColumns(t)},F=function(e,t){var r,i=[],n="private"===window.sugarConfig.deployType?!0:null===(r=window.sugarConfig)||void 0===r?void 0:r.nowProductConfig;if(e&&e.data&&e.data.categories&&e.data.series&&e.data.categories.length&&e.data.series.length||e.data.options&&e.data.options.length){var l=0;(e.data.options||[]).forEach(function(a){var t,o=e.data.categories||(null===(t=null===a||void 0===a?void 0:a.xAxis[0])||void 0===t?void 0:t.data);l<o.length&&(l=o.length)}),(e.data.options||[{}]).forEach(function(r,s){var d,c=e.data.series||r.series,u=e.data.categories||(null===(d=null===r||void 0===r?void 0:r.xAxis[0])||void 0===d?void 0:d.data),h=e.data.categories_sugar_origin||r.categories_sugar_origin,g={series:c,categories:u,categories_sugar_origin:h};if(t.config.dataSort&&(g=a.chartDataSort(v(g),t.config.dataSortType,t.config.chartStack&&!t.config.chartContrast&&"stack"===t.config.dataSortTarget)),(n||(null===n||void 0===n?void 0:n.timeline)||(null===n||void 0===n?void 0:n.narrativeMode))&&e.data.timeline&&e.data.timeline.length){for(var m=[],f=0;l>f;f++)m.push(u.length>f?e.data.timeline[s]:null);i.push([o.default("时间轴")].concat(m))}i.push([o.default("X轴")].concat(u)),c.forEach(function(e){i.push([e.name||""].concat(e.data))})})}return i},O=function(e){var a=e.dataConfig.dataModel,t=a.x,o=void 0===t?[]:t,r=a.y,i=void 0===r?[]:r;return o.length&&i.length?!0:!1};l.register({kind:"commonChart",type:"bar",name:o.default("柱状图"),iconClassName:"chart-bar",enableTemplate:!0,commonCustomShadow:!0,commonCustomColorGradient:!0,variants:[{name:o.default("横向柱图"),iconClassName:"chart-flip-bar",initialState:{config:{chartReverse:!0}},initialDashboardState:{config:{chartLegend:!1}}},{name:o.default("多系列柱图"),iconClassName:"chart-double-bar",initialState:{dataApiUrl:"$CUR_HOST/openapi/demo/chart?type=line",config:{barGap:0},dataConfig:{conAutoGroup:!0}}},{name:o.default("堆积柱图"),iconClassName:"chart-stack-bar",initialState:{dataApiUrl:"$CUR_HOST/openapi/demo/chart?type=line",config:{chartStack:!0,topShowTotal:!0},dataConfig:{conAutoGroup:!0}}},{name:o.default("正负柱图"),iconClassName:"chart-negative-bar",initialState:{dataApiUrl:"$CUR_HOST/openapi/demo/chart?type=negativeBar",config:{chartReverse:!0,chartStack:!0,barBorderRadius:4}}},{name:o.default("双向对比柱图"),iconClassName:"chart-contrast-bar",initialState:{dataApiUrl:"$CUR_HOST/openapi/demo/chart?type=contrastBar",config:{chartContrast:!0,chartReverse:!0,chartStack:!0,barBorderRadius:4}}},{name:o.default("渐变色柱图"),iconClassName:"chart-gradient-bar",initialState:{dataApiUrl:"$CUR_HOST/openapi/demo/chart?type=line",config:{barBorderRadius:8,openCustomColor:!0,customColors:[{id:"jps66ck826ik2",color:"#f43f3b",color1:"#ec008c",ratio:50},{id:"jps66jon2evqt",color:"#39b54a",color1:"#0081ff",ratio:50},{id:"jps69drr565e0",color:"#9000ff",color1:"#5e00ff",ratio:50}]}}},{name:o.default("胶囊柱图"),iconClassName:"chart-capsule-bar",initialState:{config:{barBorderRadius:10,showBackground:!0,bgColor:"rgba(221, 221, 221, 0.83)",bgBorderW:1,bgBorderC:"rgba(101, 115, 142, 1)",bgBorderRadius:11}},initialDashboardState:{config:{bgColor:"rgba(186, 186, 186, 0.1)"}}},{name:o.default("叙事柱图"),version:["advan"],iconClassName:"chart-narrativemode-bar",initialState:{dataApiUrl:"$CUR_HOST/openapi/demo/chart?type=narrativemodeBar",width:12,height:580,dataConfig:{displayMode:"narrativeMode"},config:{chartReverse:!0,chartTopShow:!0,narrativeModeShowGraphic:!0,narrativeModeValueRate:2e3,narrativeModePrecision:1,marginLeft:110}},initialDashboardState:{width:665,height:270,config:{chartLegend:!1}}}],initialState:{dataType:"api",dataApiUrl:s.chartDemoUrl,dataConfig:{categoriesSort:"default",continuity_type:"simple",continuity_empty_val:"1",continuity_time_step:"1Hour",timeline:!1},config:{chartLegend:!0,legendHeight:20,legendWidth:70,dataZoomStart:60,dataZoomEnd:100,marginLeft:65,marginTop:20,marginRight:20,marginBottom:55,yType:"normal",defaultLegendCount:0,barMaxWidth:16,barMinHeight:2,barBorderRadius:0,xLabelRotate:-25,hideYSplitArea:!0,dataSortType:"desc",slideInterval:3,tlAxisType:"category",tlAutoPlay:!0,tlPlayInterval:3,tlItemStyleColor:"#bbb",tlLineStyleColor:"#555",tlControlStyleColor:"#666",tlControlStyleBorderColor:"#666",tlSymbol:"circle",tlSymbolColor:"#bbb",tlEmphasisColor:"#177cdc",tlNormalColor:"#999",tlShowNextBtn:!0,tlShowPlayBtn:!0,showGraphic:!1}},initialDashboardState:{config:{hideYSplitLine:!0,tlNormalColor:"#fff",tlLineStyleColor:"#fff",tlControlStyleBorderColor:"#fff"}},component:A,dataBindCtrl:s.dataBindCtrl,advancedCtrl:s.advancedCtrl,exportCSV:D,exportExcel:k,exportRows:E,needDashboardAutoFresh:!0,validate:R,drillDownType:"single",canBeDrillChild:!0,dataModelPanelShow:[["dataType","dataModel"]],drillDownSuggestDataModelField:"x",canHierarchyDrillDown:!0,loadDataWhenDataModelConfigChange:O,drillDownFieldName:"category",chartEigens:s.chartEigens})});
;sugar.define("sugar:widgets/charts/bar-alien/bar-alien-series-ctrl.tsx",function(e,l){"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.seriesCtrl=l.barCtrl=void 0;var a=e("sugar:node_modules/tslib/tslib.js"),t=e("sugar:utils/i18n.ts"),r=e("sugar:widgets/amis-inline-switch.tsx"),n=e("sugar:widgets/charts/utils/common.tsx");l.barCtrl=function(e,l,a){return e.type&&"pictorialBar"!==e.type?null:{hiddenOn:l,type:"fieldset",collapsed:!0,title:t.default("峰柱"),controls:[r.amisInlineSwitch(a+".chartTopShow",t.default("柱顶展示数据")),{type:"group",hiddenOn:"!"+a+".chartTopShow",controls:[{type:"color",name:a+".labelColor",clearable:!0,label:t.default("标签颜色")},{type:"number",label:t.default("数据字号"),name:a+".labelFontSize",step:1,min:8,max:100}]},{type:"number",name:a+".barMaxWidth",label:t.default("柱体最大宽度(0为自适应)"),min:0},{type:"number",name:a+".barOpacity",label:t.default("柱体透明度"),min:.1,max:.9,step:.1}]}},l.seriesCtrl=function(e){if(!e.data)return null;var i=e.data.series;if(!i||!i.reduce)return null;var s=[],o=i.reduce(function(e,r){var i=[],o="!config.openCustomSeries || config.seriesConfig.current != '"+r.name+"'",u="config.seriesConfig."+r.name;return i.push({type:"select",name:u+".colorSchemeType",hiddenOn:o,label:t.default("颜色分配方式")+'\n                   <a class="text-info pull-right" href="/docs/BestPractise-visualMap" target="_blank">\n                     '+t.default("文档说明")+"\n                   </a>",options:[{label:t.default("按数据系列"),value:0},{label:t.default("按数据索引"),value:1},{label:t.default("按数据名称"),value:2},{label:t.default("按数据数值"),value:3}]},{type:"table",name:u+".seriesColors",hiddenOn:o,addable:!0,editable:!0,removable:!0,showAddBtn:!0,needConfirm:!0,columns:[{label:t.default("分项"),name:"name",quickEdit:{type:"text",clearable:!0}},{label:t.default("颜色(渐变起点)"),name:"color",type:"color",quickEdit:{type:"color",clearable:!0}},{label:t.default("颜色(渐变终点)"),name:"color1",type:"color",quickEdit:{type:"color",clearable:!0}},{label:t.default("渐变位置"),name:"ratio",quickEdit:{type:"number",placeholder:t.default("0-100"),min:0,max:100}}]},n.getSeriesUnitCtrl(u,o)),s.push({label:r.name,value:r.name}),e.concat(a.__spreadArrays(i,[l.barCtrl(r,o,u)]))},[]);return{type:"fieldset",title:t.default("系列设置(series)"),collapsable:!0,collapsed:!0,headingClassName:"fieldset-title",controls:a.__spreadArrays([r.amisInlineSwitch("config.openCustomSeries",t.default("开启自定义系列设置")),{type:"select",name:"config.seriesConfig.current",label:t.default("系列名"),options:s,value:s.length?s[0].value:null,hiddenOn:"!config.openCustomSeries"}],o)}}});
;sugar.define("sugar:widgets/charts/bar-alien/bar-alien-ctrl.tsx",function(e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.advancedCtrl=a.dataBindCtrl=a.chartEigens=a.chartDemoUrl=void 0;var t=e("sugar:node_modules/tslib/tslib.js"),l=e("sugar:utils/i18n.ts"),n=e("sugar:node_modules/react/index.js"),i=e("sugar:widgets/ctrl-panel/data-bind-ctrl/index.tsx"),d=e("sugar:widgets/object-array-editor/object-array-editor.tsx"),o=e("sugar:widgets/ctrl-panel/common/switch-with-tip.tsx"),r=e("sugar:widgets/amis-inline-switch.tsx"),c=e("sugar:widgets/charts/bar-alien/bar-alien-series-ctrl.tsx"),s=e("sugar:widgets/data-model/data-model-field-holder/data-model-field-holder.tsx"),f=e("sugar:widgets/charts/utils/common.tsx"),u=e("sugar:widgets/charts/bar/bar-mark-ctrl.tsx"),m="/openapi/demo/chart?type=barAlien";a.chartDemoUrl="$CUR_HOST/openapi/demo/chart?type=barAlien",a.chartEigens=[{field:[{name:"x",type:"d",minCount:1,maxCount:3},{name:"y",type:"m",minCount:1,maxCount:20,canRepeat:!0},{name:"color",type:"d",minCount:0,maxCount:3}]}],a.dataBindCtrl=function(e){var a=i.getDebugAndRefreshBtn({loadData:e.chart.loadData,loadDebugData:e.chart.loadDebugData,dataType:e.chart.dataType,refreshText:l.default("刷新图表")}),r=e.chart.dataModelHash||"",c=e.sqlModelStore.detailMap.mapByHash.get(r),f=i.generateSQLFieldList(c),u=i.getDataBindCommon({frontendId:e.chart.frontendId,dataTypeOptions:["dataModel","api","sql","json"],api:{demoUrl:m},sql:{needContinuitySetting:!0,sqlFieldList:f},loadData:e.chart.loadData,loadDebugData:e.chart.loadDebugData,curUrl:e.chart.dataApiUrl}),g=[{type:"select",list:f,key:"frontendId",name:l.default("绑定字段"),tdStyle:{minWidth:150}},{type:"text",key:"columnName",name:l.default("字段重命名"),tdStyle:{minWidth:120}}],p=t.__spreadArrays([s.getDataModelFieldHolder({name:"x",label:l.default("X轴/类别轴"),config:{dataModelHash:r,holderId:e.chart.frontendId+"-x",maxCount:3,onlyDimension:!0,canNotNoEnumerable:!0}}),s.getDataModelFieldHolder({name:"y",label:l.default("Y轴/值轴"),config:{dataModelHash:r,holderId:e.chart.frontendId+"-y",maxCount:20,onlyMeasure:!0,canRepeat:!0}}),s.getDataModelFieldHolder({name:"color",label:l.default("颜色图例"),config:{dataModelHash:r,holderId:e.chart.frontendId+"-color",maxCount:3,onlyDimension:!0,canNotNoEnumerable:!0}}),i.commonFilterForDataModel(r),i.commonBindUrlParamForDataModel(r)],s.getChartConditionsHolder(r,e.chart),[i.commonLimitForDataModel,{type:"select",name:"dataConfig.categories",hiddenOn:"data.dataType != 'sql'",label:l.default("X轴绑定字段"),placeholder:l.default("请选择"),options:f},{type:"select",name:"dataConfig.categoriesSort",hiddenOn:"data.dataType != 'sql'",label:l.default("X轴数据排序"),placeholder:l.default("请选择"),options:[{label:l.default("默认"),value:"default"},{label:l.default("从小到大"),value:"asc"},{label:l.default("从大到小"),value:"desc"}]},{name:"dataConfig.series",hiddenOn:"data.dataType != 'sql'",children:function(a){var i=a.onChange,o=a.value;return n.createElement(d.default,t.__assign({},{onChange:i,value:o},{chartFrontendId:e.chart.frontendId,containerClassName:"form-group form-item",label:l.default("绑定Y轴数据项"),addTipText:l.default("新增Y轴数据项"),cols:g}))}}]);return c&&c.config.openRow2Col&&p.push({name:"dataConfig.addAllRow2Col",children:function(e){var a=e.onChange,i=e.value;return n.createElement(o.default,t.__assign({},{onChange:a,value:i,label:l.default("绑定所有的行转列"),tipText:l.default("不了解？"),tipLink:"/docs/DataBind-SQL-Rowcol"}))}}),u.concat(p,a)};var g=[r.amisInlineSwitch("config.chartTopShow",l.default("柱顶展示数据")),r.amisInlineSwitch("config.dataSort",l.default("按照数值大小排序")),{type:"select",name:"config.dataSortType",label:"",placeholder:l.default("请选择"),hiddenOn:"!config.dataSort",options:[{label:l.default("从大到小"),value:"desc"},{label:l.default("从小到大"),value:"asc"}]},{type:"divider"},{type:"fieldset",collapsed:!0,title:l.default("柱体设置"),collapsable:!0,headingClassName:"fieldset-title",controls:[{type:"select",name:"config.barType",label:l.default("柱体形状"),placeholder:l.default("请选择"),options:[{label:l.default("三角形"),value:"triangle"},{label:l.default("山峰"),value:"mountain"}]},{type:"group",controls:[{type:"number",name:"config.barMinHeight",label:l.default("柱体最小高度"),min:0},{type:"number",name:"config.barOpacity",label:l.default("柱体透明度"),min:.1,max:.9,step:.1}]},{type:"range",name:"config.barCategoryGap",max:70,min:-200,step:1,label:l.default("X轴不同标签柱体间间隔（负值代表重叠）")},{type:"range",name:"config.barGap",max:10,min:-100,step:1,label:l.default("X轴同标签柱体间间隔（负值代表重叠）")}]},{type:"divider"},{type:"fieldset",collapsed:!0,title:l.default("Y轴设置"),collapsable:!0,headingClassName:"fieldset-title",controls:[{type:"group",controls:[r.amisInlineSwitch("config.hideY",l.default("隐藏Y轴")),r.amisInlineSwitch("config.yInverse",l.default("Y轴数值反向"))]},{type:"group",controls:[r.amisInlineSwitch("config.hideYSplitLine",l.default("隐藏Y轴网格线")),r.amisInlineSwitch("config.hideYSplitArea",l.default("隐藏Y轴区域分割"))]},{type:"group",controls:[{type:"select",name:"config.yType",label:l.default("Y轴类型"),clearable:!0,placeholder:l.default("请选择"),options:f.yTypeOptions},{type:"number",label:l.default("Y轴字号"),name:"config.yFontSize",step:1,min:8,max:100}]},f.dataUnitCtrl]},{type:"divider"},{type:"fieldset",collapsed:!0,title:l.default("X轴设置"),collapsable:!0,headingClassName:"fieldset-title",controls:[r.amisInlineSwitch("config.hideX",l.default("隐藏X轴")),r.amisInlineSwitch("config.xLableAllShow",l.default("X轴标签全部展示")),{type:"number",name:"config.xLabelRotate",label:l.default("X轴标签倾斜度(-90至90)"),hiddenOn:"!config.xLableAllShow",min:-90,max:90,step:5},r.amisInlineSwitch("config.xLableVertical",l.default("竖着显示文字")),r.amisInlineSwitch("config.chartDataZoom",l.default("开启X轴缩放")),{type:"number",name:"config.dataZoomStart",label:l.default("默认缩放起始百分比(%)"),hiddenOn:"!config.chartDataZoom",step:5,max:95,min:0},{type:"number",name:"config.dataZoomEnd",label:l.default("默认缩放结束百分比(%)"),hiddenOn:"!config.chartDataZoom",step:5,max:100,min:5},{type:"number",label:l.default("X轴字号"),name:"config.xFontSize",step:1,min:8,max:100}]},{type:"divider"},f.getTooltipCtrl([r.amisInlineSwitch("config.tooltipSort",l.default("Tooltip中按大小排序"))]),{type:"divider"},f.getLegendCtrl([{type:"number",name:"config.legendHeight",label:l.default("图例高度"),step:1,min:15,hiddenOn:'!config.chartLegend || (config.legendPosition != "bottom" && config.legendPosition != "top")'},{type:"number",name:"config.legendWidth",label:l.default("图例宽度"),step:1,min:10,hiddenOn:'!config.chartLegend || (config.legendPosition != "left" && config.legendPosition != "right")'},{type:"number",name:"config.defaultLegendCount",label:l.default("默认展示的柱体系列数(0为都展示)"),min:0}]),{type:"divider"},f.getLabelCtrl([f.labelPosition]),{type:"divider"},{type:"fieldset",title:l.default("标记和标线设置"),collapsed:!0,collapsable:!0,headingClassName:"fieldset-title",controls:t.__spreadArrays(u.default,[r.amisInlineSwitch("config.chartMarkAvg",l.default("展示均值线")),r.amisInlineSwitch("config.chartMarkLine",l.default("开启基准标线")),{type:"number",name:"config.markLineVal",label:l.default("基准值"),step:.1,hiddenOn:"!config.chartMarkLine"},r.amisInlineSwitch("config.chartMarkLine2",l.default("开启第二基准标线")),{type:"number",name:"config.markLineVal2",label:l.default("第二基准值"),step:.1,hiddenOn:"!config.chartMarkLine2"}])},{type:"divider"},f.gridCtrl];a.advancedCtrl=function(e){return g.concat([{type:"divider"},f.getVisualMapCtrl(e,!0),{type:"divider"},c.seriesCtrl(e)])}});
;sugar.define("sugar:widgets/charts/bar-alien/bar-alien.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=e("sugar:node_modules/tslib/tslib.js"),r=e("sugar:utils/i18n.ts"),o=e("sugar:node_modules/react/index.js"),i=e("sugar:node_modules/echarts/dist/echarts.js"),n=e("sugar:widgets/charts/chart-manager.tsx"),l=e("sugar:widgets/charts/bar-alien/bar-alien-ctrl.tsx"),s=e("sugar:widgets/charts/_hoc/echarts.tsx"),c=e("sugar:node_modules/react-mixin/index.js"),d=e("sugar:widgets/charts/_mixin/echarts.tsx"),g=e("sugar:widgets/charts/_hoc/debug/debug.tsx"),h=e("sugar:widgets/charts/_hoc/drill-down/drill-down.tsx"),u=e("sugar:widgets/charts/_hoc/toolbar/toolbar.tsx"),m=e("sugar:widgets/charts/_hoc/chart-warning/index.tsx"),f=e("sugar:widgets/charts/_hoc/chart-zoom/index.tsx"),p=e("sugar:widgets/charts/line/line-helper.ts"),y=e("sugar:widgets/charts/utils/helper.ts"),x=e("sugar:utils/common-helper.ts"),b=e("sugar:utils/export-file/export-csv.ts"),S=e("sugar:widgets/charts/bar/bar.tsx"),v=e("sugar:utils/export-file/export-excel.ts"),C=e("sugar:widgets/charts/utils/common.tsx"),L=e("sugar:node_modules/lodash/cloneDeep.js"),_=e("sugar:node_modules/lodash/merge.js"),w=12,T=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.legendSelected={},t}return a.__extends(t,e),t.prototype.willReceiveProps=function(e,t){e.chartConfig.defaultLegendCount!==t.chartConfig.defaultLegendCount&&(this.legendSelected={})},t.prototype.getDrillDownParam=function(e){var t=L(this.props.chartData);this.props.chartConfig.dataSort&&(t=S.chartDataSort(t,this.props.chartConfig.dataSortType));var a=t.categories,r=t.categories_sugar_origin,o=t.series,i={name:e.seriesName||"",value:e.value,category:e.name,field:o[e.seriesIndex]?o[e.seriesIndex].field:"",_sugar_dd_default_:e.name};if(r){var n=a.indexOf(e.name);i.categories_sugar_origin=r[n]?r[n]:"",i._sugar_dd_default_=i.categories_sugar_origin}return i},t.prototype.getDependenceParam=function(e){return{item:this.getDrillDownParam(e),state:{seriesIndex:e.seriesIndex,dataIndex:e.dataIndex}}},t.prototype.refresh=function(e){var t=this,o=e.chartData,n=e.chartConfig,l=e.chart,s=e.hub,c=L(o);n.dataSort&&(c=S.chartDataSort(c,n.dataSortType));var d,g,h=c.series,u=c.categories,m=c.yUnit,f=c.yDataFormat,x=this.chart,b=[],v=x.getWidth(),T=x.getHeight(),M=y.handleGrid(n,{marginTop:20,marginBottom:55,marginLeft:80,marginRight:35,chartWidth:v,chartHeight:T}),D=M.marginTop,k=M.marginBottom,F=M.marginLeft,R=M.marginRight,B=void 0!==n.chartLegend?n.chartLegend:!0,I=parseInt(n.defaultLegendCount||"0",10),A="{}"===JSON.stringify(this.legendSelected),z={},P=l.isDashChart?"#ccc":"#333";n.openCustomColor&&(d=n.textColor,g=n.lineColor),d=d||P,g=g||P;var E=n.barType||"mountain";h.forEach(function(e,a){var o,i;e.name=e.name+"",b.push(e.name),z[e.name]=!0;var l=n.openCustomSeries?(null===(o=n.seriesConfig)||void 0===o?void 0:o[e.name])||{}:{},c=l.prefix||e.preifx||n.prefix||"",d=l.unit||e.unit||n.unit||"";e.type="pictorialBar",e.symbol=E,"mountain"===E&&(e.symbol="path://M0,10 L10,10 C5.5,10 5.5,5 5,0 C4.5,5 4.5,10 0,10 z"),e.symbolSize=["100%","100%"],e.barCategoryGap=n.barCategoryGap+"%",e.barGap=n.barGap+"%",e.yAxisIndex=0,n.barMinHeight&&(e.barMinHeight=parseInt(n.barMinHeight,10)||0);var g=[],h=[];if(n.chartMarkLine&&0===a){var u=parseFloat(n.markLineVal||0);g.push({yAxis:u,name:r.default("基准线")})}if(n.chartMarkLine2&&0===a){var u=parseFloat(n.markLineVal2||0);g.push({yAxis:u,name:r.default("基准线")})}if(n.chartMarkAvg&&g.push({name:r.default("均值"),type:"average",lineStyle:{color:n.chartMarkLine||n.chartMarkLine2?"#aaa":"#dc143c"},label:{position:n.chartMarkLine||n.chartMarkLine2?"middle":"end",color:n.chartMarkLine||n.chartMarkLine2?"#aaa":"#dc143c",formatter:function(t){return r.default("均值:「"+y.formatVal({value:t.value,format:e.dataFormat||n.yType,prefix:c,unit:d})+"」")}}}),g&&g.length){var m=2,f=[["chartMarkLine","markLineVal"],["chartMarkLine2","markLineVal2"]];f.forEach(function(e){if(n[e[0]]){var t=parseFloat(n[e[1]]||0).toString().split(".");t&&t.length>1&&t[1].length>m&&(m=t[1].length)}}),e.data&&e.data.length&&e.data.forEach(function(e){var t=parseFloat(e||0).toString().split(".");t&&t.length>1&&t[1].length>m-1&&(m=t[1].length+1)}),e.markLine={lineStyle:{color:"#dc143c"},symbolSize:0,precision:m,label:{position:"end",color:"#dc143c",formatter:function(t){return y.formatVal({value:t.value,format:e.dataFormat||n.yType,prefix:c,unit:d})}},data:g}}n.chartMarkMax&&h.push({name:r.default("最大值"),type:"max"}),n.chartMarkMin&&h.push({name:r.default("最小值"),type:"min"}),h&&h.length&&(e.markPoint={label:{show:!0,textBorderWidth:2,color:n.chartMarkTextColor||"#fff",textBorderColor:n.textBorderColor||"auto",formatter:function(t){return y.formatVal({value:t.value,format:e.dataFormat||n.yType,prefix:c,unit:d})}},symbol:n.chartMarkShape||"pin",data:h,itemStyle:{color:n.chartMarkBgColor||""}});var p=l.barOpacity||n.barOpacity||.5;if(s.dependenceData.dependenceState){var x=s.dependenceData.dependenceState,S=x.seriesIndex,v=x.dataIndex;S===a?e.data=e.data.map(function(e,t){return{value:e,itemStyle:{opacity:t===v?1:p}}}):e.itemStyle=_({},e.itemStyle,{opacity:p})}else e.itemStyle=_({},e.itemStyle,{opacity:p}),e.emphasis={opacity:1};if(n.chartTopShow||n.chartLabel||l.chartTopShow){var C="top";n.chartReverse&&!n.yInverse?C="right":!n.chartReverse&&n.yInverse?C="bottom":n.chartReverse&&n.yInverse&&(C="left");var L=n.labelFontSize;l.chartTopShow&&l.labelFontSize&&(L=l.labelFontSize),e.label={show:!0,color:"inherit",fontFamily:n.labelFontFamily||null,fontSize:L||w,position:n.labelPosition||C,formatter:function(t){return y.formatVal({value:t.value,format:e.dataFormat||n.yType,prefix:c,unit:d})}},l.labelColor?e.label.color=l.labelColor:n.labelColor?e.label.color=n.labelColor:n.openCustomColor&&n.textColor&&(e.label.color=n.textColor)}if(A&&I&&I>a&&(t.legendSelected[e.name]=!0),null==t.legendSelected[e.name]&&(t.legendSelected[e.name]=!1),n.openCustomSeries&&l){if((null===(i=l.seriesColors)||void 0===i?void 0:i.length)>0){var T={};l.seriesColors.forEach(function(e){var t=l.colorSchemeType?e.name:0;e.color&&e.color1?T[t]={type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:e.color},{offset:Math.min((e.ratio||0)/100,1),color:e.color1},{offset:1,color:e.color1}]}:e.color?T[t]=e.color:e.color1&&(T[t]=e.color1)}),e.itemStyle=1===l.colorSchemeType?_({},e.itemStyle,{color:function(e){return T[e.dataIndex+1]||e.color}}):2===l.colorSchemeType?_({},e.itemStyle,{color:function(e){return T[e.name]||e.color}}):3===l.colorSchemeType?_({},e.itemStyle,{color:function(e){return T[e.value]||e.color}}):_({},e.itemStyle,{color:T[0]})}else l.color&&(e.itemStyle=_({},e.itemStyle,{color:l.color}));l.barMaxWidth&&parseInt(l.barMaxWidth,10)>0&&(e.barMaxWidth=parseInt(l.barMaxWidth,10))}});var G=[{show:!n.hideX,type:"category",splitLine:{show:!1},boundaryGap:!0,axisLine:{lineStyle:{color:g,width:1}},axisLabel:{color:d,fontSize:n.xFontSize||w},axisTick:{alignWithLabel:!0},data:u}];n.xLableAllShow&&(G[0].axisLabel.interval=0),n.xLableAllShow&&n.xLabelRotate&&parseInt(n.xLabelRotate,10)&&(G[0].axisLabel.rotate=parseInt(n.xLabelRotate,10)),n.xLableVertical&&(G[0].axisLabel.formatter=function(e){return(e+"").split("").join("\n")});var V=[p.generateLineYAxis(a.__assign({_textColor:d,_lineColor:g,_isDashChart:l.isDashChart,defaultFontSize:w},n),!1,m,f)],Z=y.calcuGridByLegend({marginLeft:F,marginBottom:k,marginRight:R,marginTop:D},n);k=Z.marginBottom,F=Z.marginLeft,R=Z.marginRight,D=Z.marginTop;var W=void 0;n.chartDataZoom&&b.length&&(k+=40,T&&(W=T-k+30,W+32>T&&(W=T-32)));var j=y.legendPositionConfig({marginLeft:F,marginBottom:k,marginRight:R,marginTop:D},n),H={textStyle:y.getTextStyle(n),legend:a.__assign(a.__assign({},j),{data:b,show:B,selected:B&&I?this.legendSelected:z,textStyle:{color:n.legendTextColor||d,fontSize:n.legendFontSize||w,fontFamily:n.legendFontFamily||null}}),dataZoom:{show:!!n.chartDataZoom,realtime:!0,start:n.chartDataZoom?n.dataZoomStart||0:0,end:n.chartDataZoom?n.dataZoomEnd||100:100,y:W},grid:{left:F,top:D,right:R,bottom:k},xAxis:n.chartReverse?V:G,yAxis:n.chartReverse?G:V,series:h,tooltip:{trigger:"axis",confine:n.tooltipConfine||!1,extraCssText:C.getTooltipCss(n),axisPointer:{lineStyle:n.openCustomColor&&n.axisPoiLineColor?{color:n.axisPoiLineColor}:{}},formatter:function(e){return p.lineTooltipFormatter(e,a.__assign({defaultFontSize:w},n),h,m,f)}}};n.chartDataZoom&&b.length||delete H.dataZoom,n.openCustomColor&&n.customColors&&n.customColors.length&&(H.color=n.customColors.map(function(e){return e.color&&e.color1&&!isNaN(e.ratio)?new i.graphic.LinearGradient(n.chartReverse?1:0,0,0,n.chartReverse?0:1,[{offset:0,color:e.color1},{offset:Math.max(1-e.ratio/100,0),color:e.color},{offset:1,color:e.color}]):e.color||e.color1})),H.visualMap=y.handleVisualMap(n),x.setOption(H,!0),I&&x.on("legendselectchanged",function(e){t.legendSelected=e.selected})},t.displayName="BarAlien",t=a.__decorate([h.default,g.default,u.default,m.default,f.default,s.default,c.decorate(d.default)],t)}(o.Component);t.default=T;var M=function(e){if(!e)return r.default("无数据");if(!(e.categories&&e.series&&e.categories instanceof Array&&e.series instanceof Array))return r.default("数据中缺少categories或series字段");if(!e.categories.length||!e.series.length)return r.default("无数据");if(!x.isArrayOfTypes(e.categories,["string","number","null"]))return r.default("X轴绑定的数据类型不对，不是字符串或数字");for(var t=0;t<e.series.length;t++){var a=e.series[t];if(!a.data)return r.default(a.name?"Y轴「"+a.name+"」数据为空":"第「"+(t+1)+"」系列柱状数据为空");if(!x.isArrayOfTypes(a.data,["null","numberString","number"]))return r.default(a.name?"Y轴「"+a.name+"」数据中不全是数字，格式错误":"第「"+(t+1)+"」系列柱状数据不全是数字，格式错误")}return!0},D=function(e,t){var a=R(e,t);v.exportExcelByColumns(a,""+(t.dynamicName||t.name||"export"))},k=function(e,t){var a=R(e,t);b.exportCsvByColumns(a,(t.dynamicName||t.name||"export")+".csv")},F=function(e,t){var a=R(e,t);return v.exportRowsByColumns(a)},R=function(e,t){var a=[];if(e&&e.data&&e.data.categories&&e.data.series&&e.data.categories.length&&e.data.series.length){var o=e.data;t.config.dataSort&&(o=S.chartDataSort(L(o),t.config.dataSortType)),a.push([r.default("X轴")].concat(o.categories)),o.series.forEach(function(e){a.push([e.name||""].concat(e.data))})}return a},B=function(e){var t=e.dataConfig.dataModel,a=t.x,r=void 0===a?[]:a,o=t.y,i=void 0===o?[]:o;return r.length&&i.length?!0:!1};n.register({kind:"commonChart",type:"bar-alien",name:r.default("山峰柱状图"),iconClassName:"chart-bar-alien",enableTemplate:!0,commonCustomColorGradient:!0,initialState:{dataType:"api",dataApiUrl:l.chartDemoUrl,dataConfig:{categoriesSort:"default",continuity_type:"simple",continuity_empty_val:"1",continuity_time_step:"1Hour"},config:{chartTopShow:!0,openCustomColor:!0,xLableAllShow:!0,lineColor:"rgba(0, 0, 0, 0)",hideYSplitLine:!0,hideY:!0,chartLegend:!0,legendHeight:20,legendWidth:55,dataZoomStart:60,dataZoomEnd:100,marginLeft:65,marginTop:20,marginRight:65,marginBottom:55,yType:"normal",defaultLegendCount:0,barMinHeight:2,xLabelRotate:0,hideYSplitArea:!0,barCategoryGap:-200,barType:"mountain",barGap:-70,barOpacity:.7,dataSortType:"desc"}},initialDashboardState:{width:500,height:220,config:{marginLeft:100,marginRight:100,textColor:"rgba(255, 255, 255, 1)",customColors:[{id:"jps66ck826ik2",color:"#23b7e5",color1:"#564aa3",ratio:80}]}},component:T,dataBindCtrl:l.dataBindCtrl,advancedCtrl:l.advancedCtrl,exportCSV:k,exportExcel:D,exportRows:F,needDashboardAutoFresh:!0,validate:M,drillDownType:"single",canBeDrillChild:!0,dataModelPanelShow:[["dataType","dataModel"]],drillDownSuggestDataModelField:"x",canHierarchyDrillDown:!0,loadDataWhenDataModelConfigChange:B,drillDownFieldName:"category",chartEigens:l.chartEigens})});
;sugar.define("sugar:widgets/charts/bar-pic/symbols.tsx",function(c,l){"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.symbolOps=void 0;var a=c("sugar:utils/i18n.ts");l.default={circle:"circle",rect:"rect",roundRect:"roundRect",triangle:"triangle",diamond:"diamond",pin:"pin",arrow:"arrow",reindeer:"path://M-22.788,24.521c2.08-0.986,3.611-3.905,4.984-5.892 c-2.686,2.782-5.047,5.884-9.102,7.312c-0.992,0.005-0.25-2.016,0.34-2.362l1.852-0.41c0.564-0.218,0.785-0.842,0.902-1.347 c2.133-0.727,4.91-4.129,6.031-6.194c1.748-0.7,4.443-0.679,5.734-2.293c1.176-1.468,0.393-3.992,1.215-6.557 c0.24-0.754,0.574-1.581,1.008-2.293c-0.611,0.011-1.348-0.061-1.959-0.608c-1.391-1.245-0.785-2.086-1.297-3.313 c1.684,0.744,2.5,2.584,4.426,2.586C-8.46,3.012-8.255,2.901-8.04,2.824c6.031-1.952,15.182-0.165,19.498-3.937 c1.15-3.933-1.24-9.846-1.229-9.938c0.008-0.062-1.314-0.004-1.803-0.258c-1.119-0.771-6.531-3.75-0.17-3.33 c0.314-0.045,0.943,0.259,1.439,0.435c-0.289-1.694-0.92-0.144-3.311-1.946c0,0-1.1-0.855-1.764-1.98 c-0.836-1.09-2.01-2.825-2.992-4.031c-1.523-2.476,1.367,0.709,1.816,1.108c1.768,1.704,1.844,3.281,3.232,3.983 c0.195,0.203,1.453,0.164,0.926-0.468c-0.525-0.632-1.367-1.278-1.775-2.341c-0.293-0.703-1.311-2.326-1.566-2.711 c-0.256-0.384-0.959-1.718-1.67-2.351c-1.047-1.187-0.268-0.902,0.521-0.07c0.789,0.834,1.537,1.821,1.672,2.023 c0.135,0.203,1.584,2.521,1.725,2.387c0.102-0.259-0.035-0.428-0.158-0.852c-0.125-0.423-0.912-2.032-0.961-2.083 c-0.357-0.852-0.566-1.908-0.598-3.333c0.4-2.375,0.648-2.486,0.549-0.705c0.014,1.143,0.031,2.215,0.602,3.247 c0.807,1.496,1.764,4.064,1.836,4.474c0.561,3.176,2.904,1.749,2.281-0.126c-0.068-0.446-0.109-2.014-0.287-2.862 c-0.18-0.849-0.219-1.688-0.113-3.056c0.066-1.389,0.232-2.055,0.277-2.299c0.285-1.023,0.4-1.088,0.408,0.135 c-0.059,0.399-0.131,1.687-0.125,2.655c0.064,0.642-0.043,1.768,0.172,2.486c0.654,1.928-0.027,3.496,1,3.514 c1.805-0.424,2.428-1.218,2.428-2.346c-0.086-0.704-0.121-0.843-0.031-1.193c0.221-0.568,0.359-0.67,0.312-0.076 c-0.055,0.287,0.031,0.533,0.082,0.794c0.264,1.197,0.912,0.114,1.283-0.782c0.15-0.238,0.539-2.154,0.545-2.522 c-0.023-0.617,0.285-0.645,0.309,0.01c0.064,0.422-0.248,2.646-0.205,2.334c-0.338,1.24-1.105,3.402-3.379,4.712 c-0.389,0.12-1.186,1.286-3.328,2.178c0,0,1.729,0.321,3.156,0.246c1.102-0.19,3.707-0.027,4.654,0.269 c1.752,0.494,1.531-0.053,4.084,0.164c2.26-0.4,2.154,2.391-1.496,3.68c-2.549,1.405-3.107,1.475-2.293,2.984 c3.484,7.906,2.865,13.183,2.193,16.466c2.41,0.271,5.732-0.62,7.301,0.725c0.506,0.333,0.648,1.866-0.457,2.86 c-4.105,2.745-9.283,7.022-13.904,7.662c-0.977-0.194,0.156-2.025,0.803-2.247l1.898-0.03c0.596-0.101,0.936-0.669,1.152-1.139 c3.16-0.404,5.045-3.775,8.246-4.818c-4.035-0.718-9.588,3.981-12.162,1.051c-5.043,1.423-11.449,1.84-15.895,1.111 c-3.105,2.687-7.934,4.021-12.115,5.866c-3.271,3.511-5.188,8.086-9.967,10.414c-0.986,0.119-0.48-1.974,0.066-2.385l1.795-0.618 C-22.995,25.682-22.849,25.035-22.788,24.521z",plane:"path://M1.112,32.559l2.998,1.205l-2.882,2.268l-2.215-0.012L1.112,32.559z M37.803,23.96 c0.158-0.838,0.5-1.509,0.961-1.904c-0.096-0.037-0.205-0.071-0.344-0.071c-0.777-0.005-2.068-0.009-3.047-0.009 c-0.633,0-1.217,0.066-1.754,0.18l2.199,1.804H37.803z M39.738,23.036c-0.111,0-0.377,0.325-0.537,0.924h1.076 C40.115,23.361,39.854,23.036,39.738,23.036z M39.934,39.867c-0.166,0-0.674,0.705-0.674,1.986s0.506,1.986,0.674,1.986 s0.672-0.705,0.672-1.986S40.102,39.867,39.934,39.867z M38.963,38.889c-0.098-0.038-0.209-0.07-0.348-0.073 c-0.082,0-0.174,0-0.268-0.001l-7.127,4.671c0.879,0.821,2.42,1.417,4.348,1.417c0.979,0,2.27-0.006,3.047-0.01 c0.139,0,0.25-0.034,0.348-0.072c-0.646-0.555-1.07-1.643-1.07-2.967C37.891,40.529,38.316,39.441,38.963,38.889z M32.713,23.96 l-12.37-10.116l-4.693-0.004c0,0,4,8.222,4.827,10.121H32.713z M59.311,32.374c-0.248,2.104-5.305,3.172-8.018,3.172H39.629 l-25.325,16.61L9.607,52.16c0,0,6.687-8.479,7.95-10.207c1.17-1.6,3.019-3.699,3.027-6.407h-2.138 c-5.839,0-13.816-3.789-18.472-5.583c-2.818-1.085-2.396-4.04-0.031-4.04h0.039l-3.299-11.371h3.617c0,0,4.352,5.696,5.846,7.5 c2,2.416,4.503,3.678,8.228,3.87h30.727c2.17,0,4.311,0.417,6.252,1.046c3.49,1.175,5.863,2.7,7.199,4.027 C59.145,31.584,59.352,32.025,59.311,32.374z M22.069,30.408c0-0.815-0.661-1.475-1.469-1.475c-0.812,0-1.471,0.66-1.471,1.475 s0.658,1.475,1.471,1.475C21.408,31.883,22.069,31.224,22.069,30.408z M27.06,30.408c0-0.815-0.656-1.478-1.466-1.478 c-0.812,0-1.471,0.662-1.471,1.478s0.658,1.477,1.471,1.477C26.404,31.885,27.06,31.224,27.06,30.408z M32.055,30.408 c0-0.815-0.66-1.475-1.469-1.475c-0.808,0-1.466,0.66-1.466,1.475s0.658,1.475,1.466,1.475 C31.398,31.883,32.055,31.224,32.055,30.408z M37.049,30.408c0-0.815-0.658-1.478-1.467-1.478c-0.812,0-1.469,0.662-1.469,1.478 s0.656,1.477,1.469,1.477C36.389,31.885,37.049,31.224,37.049,30.408z M42.039,30.408c0-0.815-0.656-1.478-1.465-1.478 c-0.811,0-1.469,0.662-1.469,1.478s0.658,1.477,1.469,1.477C41.383,31.885,42.039,31.224,42.039,30.408z M55.479,30.565 c-0.701-0.436-1.568-0.896-2.627-1.347c-0.613,0.289-1.551,0.476-2.73,0.476c-1.527,0-1.639,2.263,0.164,2.316 C52.389,32.074,54.627,31.373,55.479,30.565z",train:"path://M67.335,33.596L67.335,33.596c-0.002-1.39-1.153-3.183-3.328-4.218h-9.096v-2.07h5.371 c-4.939-2.07-11.199-4.141-14.89-4.141H19.72v12.421v5.176h38.373c4.033,0,8.457-1.035,9.142-5.176h-0.027 c0.076-0.367,0.129-0.751,0.129-1.165L67.335,33.596L67.335,33.596z M27.999,30.413h-3.105v-4.141h3.105V30.413z M35.245,30.413 h-3.104v-4.141h3.104V30.413z M42.491,30.413h-3.104v-4.141h3.104V30.413z M49.736,30.413h-3.104v-4.141h3.104V30.413z  M14.544,40.764c1.143,0,2.07-0.927,2.07-2.07V35.59V25.237c0-1.145-0.928-2.07-2.07-2.07H-9.265c-1.143,0-2.068,0.926-2.068,2.07 v10.351v3.105c0,1.144,0.926,2.07,2.068,2.07H14.544L14.544,40.764z M8.333,26.272h3.105v4.141H8.333V26.272z M1.087,26.272h3.105 v4.141H1.087V26.272z M-6.159,26.272h3.105v4.141h-3.105V26.272z M-9.265,41.798h69.352v1.035H-9.265V41.798z",ship:"path://M16.678,17.086h9.854l-2.703,5.912c5.596,2.428,11.155,5.575,16.711,8.607c3.387,1.847,6.967,3.75,10.541,5.375 v-6.16l-4.197-2.763v-5.318L33.064,12.197h-11.48L20.43,15.24h-4.533l-1.266,3.286l0.781,0.345L16.678,17.086z M49.6,31.84 l0.047,1.273L27.438,20.998l0.799-1.734L49.6,31.84z M33.031,15.1l12.889,8.82l0.027,0.769L32.551,16.1L33.031,15.1z M22.377,14.045 h9.846l-1.539,3.365l-2.287-1.498h1.371l0.721-1.352h-2.023l-0.553,1.037l-0.541-0.357h-0.34l0.359-0.684h-2.025l-0.361,0.684 h-3.473L22.377,14.045z M23.695,20.678l-0.004,0.004h0.004V20.678z M24.828,18.199h-2.031l-0.719,1.358h2.029L24.828,18.199z  M40.385,34.227c-12.85-7.009-25.729-14.667-38.971-12.527c1.26,8.809,9.08,16.201,8.213,24.328 c-0.553,4.062-3.111,0.828-3.303,7.137c15.799,0,32.379,0,48.166,0l0.066-4.195l1.477-7.23 C50.842,39.812,45.393,36.961,40.385,34.227z M13.99,35.954c-1.213,0-2.195-1.353-2.195-3.035c0-1.665,0.98-3.017,2.195-3.017 c1.219,0,2.195,1.352,2.195,3.017C16.186,34.604,15.213,35.954,13.99,35.954z M23.691,20.682h-2.02l-0.588,1.351h2.023 L23.691,20.682z M19.697,18.199l-0.721,1.358h2.025l0.727-1.358H19.697z",car:"path://M49.592,40.883c-0.053,0.354-0.139,0.697-0.268,0.963c-0.232,0.475-0.455,0.519-1.334,0.475 c-1.135-0.053-2.764,0-4.484,0.068c0,0.476,0.018,0.697,0.018,0.697c0.111,1.299,0.697,1.342,0.931,1.342h3.7 c0.326,0,0.628,0,0.861-0.154c0.301-0.196,0.43-0.772,0.543-1.78c0.017-0.146,0.025-0.336,0.033-0.56v-0.01 c0-0.068,0.008-0.154,0.008-0.25V41.58l0,0C49.6,41.348,49.6,41.09,49.592,40.883L49.592,40.883z M6.057,40.883 c0.053,0.354,0.137,0.697,0.268,0.963c0.23,0.475,0.455,0.519,1.334,0.475c1.137-0.053,2.762,0,4.484,0.068 c0,0.476-0.018,0.697-0.018,0.697c-0.111,1.299-0.697,1.342-0.93,1.342h-3.7c-0.328,0-0.602,0-0.861-0.154 c-0.309-0.18-0.43-0.772-0.541-1.78c-0.018-0.146-0.027-0.336-0.035-0.56v-0.01c0-0.068-0.008-0.154-0.008-0.25V41.58l0,0 C6.057,41.348,6.057,41.09,6.057,40.883L6.057,40.883z M49.867,32.766c0-2.642-0.344-5.224-0.482-5.507 c-0.104-0.207-0.766-0.749-2.271-1.773c-1.522-1.042-1.487-0.887-1.766-1.566c0.25-0.078,0.492-0.224,0.639-0.241 c0.326-0.034,0.345,0.274,1.023,0.274c0.68,0,2.152-0.18,2.453-0.48c0.301-0.303,0.396-0.405,0.396-0.672 c0-0.268-0.156-0.818-0.447-1.146c-0.293-0.327-1.541-0.49-2.273-0.585c-0.729-0.095-0.834,0-1.022,0.121 c-0.304,0.189-0.32,1.919-0.32,1.919l-0.713,0.018c-0.465-1.146-1.11-3.452-2.117-5.269c-1.103-1.979-2.256-2.599-2.737-2.754 c-0.474-0.146-0.904-0.249-4.131-0.576c-3.298-0.344-5.922-0.388-8.262-0.388c-2.342,0-4.967,0.052-8.264,0.388 c-3.229,0.336-3.66,0.43-4.133,0.576s-1.633,0.775-2.736,2.754c-1.006,1.816-1.652,4.123-2.117,5.269L9.87,23.109 c0,0-0.008-1.729-0.318-1.919c-0.189-0.121-0.293-0.225-1.023-0.121c-0.732,0.104-1.98,0.258-2.273,0.585 c-0.293,0.327-0.447,0.878-0.447,1.146c0,0.267,0.094,0.379,0.396,0.672c0.301,0.301,1.773,0.48,2.453,0.48 c0.68,0,0.697-0.309,1.023-0.274c0.146,0.018,0.396,0.163,0.637,0.241c-0.283,0.68-0.24,0.524-1.764,1.566 c-1.506,1.033-2.178,1.566-2.271,1.773c-0.139,0.283-0.482,2.865-0.482,5.508s0.189,5.02,0.189,5.86c0,0.354,0,0.976,0.076,1.565 c0.053,0.354,0.129,0.697,0.268,0.966c0.232,0.473,0.447,0.516,1.334,0.473c1.137-0.051,2.779,0,4.477,0.07 c1.135,0.043,2.297,0.086,3.33,0.11c2.582,0.051,1.826-0.379,2.928-0.36c1.102,0.016,5.447,0.196,9.424,0.196 c3.976,0,8.332-0.182,9.423-0.196c1.102-0.019,0.346,0.411,2.926,0.36c1.033-0.018,2.195-0.067,3.332-0.11 c1.695-0.062,3.348-0.121,4.477-0.07c0.886,0.043,1.103,0,1.332-0.473c0.132-0.269,0.218-0.611,0.269-0.966 c0.086-0.592,0.078-1.213,0.078-1.565C49.678,37.793,49.867,35.408,49.867,32.766L49.867,32.766z M13.219,19.735 c0.412-0.964,1.652-2.9,2.256-3.244c0.145-0.087,1.426-0.491,4.637-0.706c2.953-0.198,6.217-0.276,7.73-0.276 c1.513,0,4.777,0.078,7.729,0.276c3.201,0.215,4.502,0.611,4.639,0.706c0.775,0.533,1.842,2.28,2.256,3.244 c0.412,0.965,0.965,2.858,0.861,3.116c-0.104,0.258,0.104,0.388-1.291,0.275c-1.387-0.103-10.088-0.216-14.185-0.216 c-4.088,0-12.789,0.113-14.184,0.216c-1.395,0.104-1.188-0.018-1.291-0.275C12.254,22.593,12.805,20.708,13.219,19.735 L13.219,19.735z M16.385,30.511c-0.619,0.155-0.988,0.491-1.764,0.482c-0.775,0-2.867-0.353-3.314-0.371 c-0.447-0.017-0.842,0.302-1.076,0.362c-0.23,0.06-0.688-0.104-1.377-0.318c-0.688-0.216-1.092-0.155-1.316-1.094 c-0.232-0.93,0-2.264,0-2.264c1.488-0.068,2.928,0.069,5.621,0.826c2.693,0.758,4.191,2.213,4.191,2.213 S17.004,30.357,16.385,30.511L16.385,30.511z M36.629,37.293c-1.23,0.164-6.386,0.207-8.794,0.207c-2.412,0-7.566-0.051-8.799-0.207 c-1.256-0.164-2.891-1.67-1.764-2.865c1.523-1.627,1.24-1.576,4.701-2.023C24.967,32.018,27.239,32,27.834,32 c0.584,0,2.865,0.025,5.859,0.404c3.461,0.447,3.178,0.396,4.699,2.022C39.521,35.623,37.887,37.129,36.629,37.293L36.629,37.293z  M48.129,29.582c-0.232,0.93-0.629,0.878-1.318,1.093c-0.688,0.216-1.145,0.371-1.377,0.319c-0.231-0.053-0.627-0.371-1.074-0.361 c-0.448,0.018-2.539,0.37-3.313,0.37c-0.772,0-1.146-0.328-1.764-0.481c-0.621-0.154-0.966-0.154-0.966-0.154 s1.49-1.464,4.191-2.213c2.693-0.758,4.131-0.895,5.621-0.826C48.129,27.309,48.361,28.643,48.129,29.582L48.129,29.582z",woman:"path://M36.7,102.84c-1.17,2.54-2.99,4.98-3.39,7.63c-1.51,9.89-3.31,19.58-1.93,29.95 c0.95,7.15-2.91,14.82-3.57,22.35c-0.64,7.36-0.2,14.86,0.35,22.25c0.12,1.68,2.66,3.17,4.67,5.4c-0.6,0.82-1.5,2.22-2.58,3.48 c-0.96,1.12-1.96,2.35-3.21,3.04c-1.71,0.95-3.71,2.03-5.51,1.9c-1.18-0.08-3.04-2.13-3.16-3.43c-0.44-4.72,0-9.52-0.41-14.25 c-0.94-10.88-2.32-21.72-3.24-32.61c-0.49-5.84-1.63-12.01-0.35-17.54c3.39-14.56,2.8-28.84,0.36-43.4 c-2.71-16.16-1.06-32.4,0.54-48.59c0.91-9.22,4.62-17.36,8.53-25.57c1.32-2.77,1.88-6.84,0.87-9.62C21.89-3.77,18.09-11,14.7-18.38 c-0.56,0.1-1.13,0.21-1.69,0.31C10.17-11.52,6.29-5.2,4.71,1.65C2.05,13.21-4.42,22.3-11.43,31.28c-1.32,1.69-2.51,3.5-3.98,5.04 c-4.85,5.08-3.25,10.98-2.32,16.82c0.25,1.53,0.52,3.06,0.77,4.59c-0.53,0.22-1.07,0.43-1.6,0.65c-1.07-2.09-2.14-4.19-3.28-6.44 c-6.39,2.91-2.67,9.6-5.23,15.16c-1.61-3.31-2.77-5.68-3.93-8.06c0-0.33,0-0.67,0-1c6.96-16.08,14.63-31.9,20.68-48.31 C-5.24-4.07-2.03-18.55,2-32.73c0.36-1.27,0.75-2.53,0.98-3.82c1.36-7.75,4.19-10.23,11.88-10.38c1.76-0.04,3.52-0.21,5.76-0.35 c-0.55-3.95-1.21-7.3-1.45-10.68c-0.61-8.67,0.77-16.69,7.39-23.19c2.18-2.14,4.27-4.82,5.25-7.65c2.39-6.88,11.66-9,16.94-8.12 c5.92,0.99,12.15,7.93,12.16,14.12c0.01,9.89-5.19,17.26-12.24,23.68c-2.17,1.97-5.35,4.77-5.17,6.94c0.31,3.78,4.15,5.66,8.08,6.04 c1.82,0.18,3.7,0.37,5.49,0.1c5.62-0.85,8.8,2.17,10.85,6.73C73.38-27.19,78.46-14.9,84.2-2.91c1.52,3.17,4.52,5.91,7.41,8.09 c7.64,5.77,15.57,11.16,23.45,16.61c2.28,1.58,4.64,3.23,7.21,4.14c5.18,1.84,8.09,5.63,9.82,10.46c0.45,1.24,0.19,3.71-0.6,4.18 c-1.06,0.63-3.15,0.27-4.44-0.38c-7.05-3.54-12.84-8.88-19.14-13.5c-3.5-2.57-7.9-4-12.03-5.6c-9.44-3.66-17.73-8.42-22.5-18.09 c-2.43-4.94-6.09-9.27-9.69-14.61c-1.2,10.98-4.46,20.65,1.14,31.19c6.62,12.47,5.89,26.25,1.21,39.49 c-2.52,7.11-6.5,13.74-8.67,20.94c-1.91,6.33-2.2,13.15-3.23,19.75c-0.72,4.63-0.84,9.48-2.36,13.84 c-2.49,7.16-6.67,13.83-5.84,21.82c0.42,4.02,1.29,7.99,2.1,12.8c-3.74-0.49-7.47-0.4-10.67-1.66c-1.33-0.53-2.43-4.11-2.07-6.01 c1.86-9.94,3.89-19.69,0.07-29.74C34.55,108.63,36.19,105.52,36.7,102.84c1.25-8.45,2.51-16.89,3.71-24.9 c-0.83-0.58-0.85-0.59-0.87-0.61c-0.03,0.16-0.07,0.32-0.09,0.48C38.53,86.15,37.62,94.5,36.7,102.84z",people:"path://M29.902,23.275c1.86,0,3.368-1.506,3.368-3.365c0-1.859-1.508-3.365-3.368-3.365 c-1.857,0-3.365,1.506-3.365,3.365C26.537,21.769,28.045,23.275,29.902,23.275z M36.867,30.74c-1.666-0.467-3.799-1.6-4.732-4.199 c-0.932-2.6-3.131-2.998-4.797-2.998s-7.098,3.894-7.098,3.894c-1.133,1.001-2.1,6.502-0.967,6.769 c1.133,0.269,1.266-1.533,1.934-3.599c0.666-2.065,3.797-3.466,3.797-3.466s0.201,2.467-0.398,3.866 c-0.599,1.399-1.133,2.866-1.467,6.198s-1.6,3.665-3.799,6.266c-2.199,2.598-0.6,3.797,0.398,3.664 c1.002-0.133,5.865-5.598,6.398-6.998c0.533-1.397,0.668-3.732,0.668-3.732s0,0,2.199,1.867c2.199,1.865,2.332,4.6,2.998,7.73 s2.332,0.934,2.332-0.467c0-1.401,0.269-5.465-1-7.064c-1.265-1.6-3.73-3.465-3.73-5.265s1.199-3.732,1.199-3.732 c0.332,1.667,3.335,3.065,5.599,3.399C38.668,33.206,38.533,31.207,36.867,30.74z",rocket:"path://M-244.396,44.399c0,0,0.47-2.931-2.427-6.512c2.819-8.221,3.21-15.709,3.21-15.709s5.795,1.383,5.795,7.325C-237.818,39.679-244.396,44.399-244.396,44.399z M-260.371,40.827c0,0-3.881-12.946-3.881-18.319c0-2.416,0.262-4.566,0.669-6.517h17.684c0.411,1.952,0.675,4.104,0.675,6.519c0,5.291-3.87,18.317-3.87,18.317H-260.371z M-254.745,18.951c-1.99,0-3.603,1.676-3.603,3.744c0,2.068,1.612,3.744,3.603,3.744c1.988,0,3.602-1.676,3.602-3.744S-252.757,18.951-254.745,18.951z M-255.521,2.228v-5.098h1.402v4.969c1.603,1.213,5.941,5.069,7.901,12.5h-17.05C-261.373,7.373-257.245,3.558-255.521,2.228zM-265.07,44.399c0,0-6.577-4.721-6.577-14.896c0-5.942,5.794-7.325,5.794-7.325s0.393,7.488,3.211,15.708C-265.539,41.469-265.07,44.399-265.07,44.399z M-252.36,45.15l-1.176-1.22L-254.789,48l-1.487-4.069l-1.019,2.116l-1.488-3.826h8.067L-252.36,45.15z",paper:"image://data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJgAAAAyCAYAAACgRRKpAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAB6FJREFUeNrsnE9y2zYYxUmRkig7spVdpx3Hdqb7ZNeFO2PdoD1Cj9DeoEdKbmDPeNFNW7lu0y7tRZvsYqfjWhL/qPgggoIggABIQKQkwsOhE5sQCfzw3uNHJu5sNnOaZq29RttolwfAbxgwChO9nad//4C2C7S9Sfe3uzQobqNghdoJBdIw3R8qHnvNANcA1sBUGCaV9pYC7rYBbLvbgAFpaBgmWbujlO1NA9h2wQTbcdHOoih2ZujLa7WcFtoMtUsKuFEDWL3bkAHq2GTnT+OJkyTzsXRd1/G8FoYN9vBnQ+pGZ7f7BrDqYSLbq6IdxXGM96BKIlBgDP97mgj7aLXcDLa8fgqoGwFu1ABmvzwwLAuTTJmw/SFIfG/ZBmEMIwRiHCVOnCTSPkk/BDoD7YHJbvcNYOVgYmtNWo1cs0xJ8pQJDgXIfM9bscE4TrDyAWwETuEEpP0QSzWU365T0CpXtzoDdsJY3bmpjqfT0AlRKMfWhQBhFYkGLAwjpE6JIxsnAAz6YW0QjksQaBGGTq0fw/mt0kJvXQA7cezWmpYaqBJ73XmKREABQMAKARjZsOXZqU4/FvLbWgu9VQA24NzRGYEJJm6C1GmuJJ4w39C5Sj6x/H6IKiWxPHflwQv9wPEV5TeibgS4200DzGitSdX6VCZWR0nonAR98dQNgxInpey0BvnNeKHXJGDGYYLiJQwiqIjuHZ+uKsWpEsUYOHVAeOdm0k4rzm9vKYUbrRswY7UmcVYa48mR5SN2YgkoMlXCoHEmQ6cfAojni1VkAUmsrEplVddCfitU6FUFzDpMvDw1nkzFA5dz91dkYvP61MlJREV8waQWUSWRnVac35QeY/EAe83c0RmDCSzMRV+w2nlZhp1UyFNyJVpMaJ6VmlQ3HUBE9rdSpIUbhhJ2WnF+ExZ63U+f/v2h02mfeb7/JZp0a8rEK1ouVqeXu6LwhEZqA0eCuCyD6ExGngVmKpICJ5tUEbjFsmC+nRZRSsSC0UKv++7Pv676/f7ZQb/v7O/vm3p0wQ3sUEIoM/hsDpFNqKqV6t1R5ltgnJ6Xyt0kOT+RZelCQmcuVs1VrhGOC7qd0kIyV2N87j+7v938cUFXyQ8O+nh7hmBrt9vGVUz1mZ3nicsC7ISqTICqldLqFilaoEjddOxP5UamiJ3CubV9n+sKbH7rdHzu74rnE/UzW9QCASpmvC5XekOWiTdoQRA4z58PEGx7+PvSNRE0aHABbV+eiYjlTJ0oW5m+761M4txePWmox5ODVDTCdbIwF2Dysw4zqTzFxOc/TbjlC/p6ZbYM109/Bk+NuP3l2Cn+nDDhQtNKFwTdF3xm7sJLMmWSLmj4nel0+swdXd9coQ86k8EB3gw2enBwgKx0z8pdo4pqECv1Jbfe2lYqAJinmKoWmAexdilEougiOy1qe/P+UrubyfMlfPbT05MzHo/xHsHldLvde/fi8vKjM3MGQa/n9NDmuvIMBhOMrdRSbiOqAWqjEupVrVQFDFWAdS1fVpzVKal00WKHxaAyhi1XXpJYtrpZar/y8tXj4+MSUMuC1AGe7jBgURgOspPvBvMt6CrBto7cphrAdepjcXpnagpgnUCu+mA9FljRXq9bqmiKlSmZ5zhieUplJkqhYE+ajywYqRWOUSlYWQZzf/n1+qc4jr4KEYFAYRSF2YrrBkEGnGoznduKK5FefUwZ4Ja8rKJbBIV+QZVEi4LuC97776HFb8vqZEARmACkAPPRzVvMl+j3/fH8oCA9oWQOWhg603DqPNx/xAMKPwcb9f18hYITef/+g7XcRkJ9R6JEvFDPUwxsXchuiOXkATxf7TEuAMvKKnSIXla31bwF/eYpEhvIpUFc0+pIg3mnoaKszjk8PMQw+b7ev9VeKVOIPjicTtBkRXiAADQATvUh9Lpym+n6mJaVpiUBmZXy8lbRIJ7d0WlanQgogIlYXRGYqCLrBdkAsB/RN987Gu9kgY3CyUGA1Mlq68ptNupjOnd9vaCj/OhF/fVtJ81Mi2ymX+yOMqCgHwCIQAX7ElX7DKj9vWDpIXj2LPLm93ffoh3Z1vmPTa3nNtU7NNW3NvLKKnAMhPDSCyRVpUVRdVYYKAImXBsTwo0DtTKmvBOvEjbb9TZdK8X5TOEOkpQr3DSwF7E6+u6ubAOHgQVQEiZtoJQA48A2TGE7XidstnObqpUG3bZW3tSxOs7jlapbKaC0AWNgg1d4vqsCtnXkNtFbG2XqTjqPVypqdwxQtyY7L/xGa9Ww2c5txPZgeDptX/mY7E2CWbEgvulAGQOsTrDZzm1Cq8t/k2AngbICWJ1gs5Xbij5e2TWgrAPGwHaSggbAvariAovktjKPV3YdqLUCVjfYeLmt6JsEDVA1A6xusEFue/HiuM5Wt5FA1QKwusD28uXLBqhtB0wAG2znOwLYVgFVa8AY2AYUbN9sEWBbDdTGALYO2NYE2E4BtZGA2YLNEmA7DdTGA2YSttPT04nrut0GqAYwVdiGjsZrRkdHR3ftdlv3aQP9/zA0QO0KYBzgpO+0KQL2wCjUqMGmAUwJNgFgDVANYGZgQ4DdI8AGDVANYFba3/98+PqLzz+7ajCw1/4XYABXWBExzrUA+gAAAABJRU5ErkJggg==",star:"path://m15.5,19c-0.082,0 -0.164,-0.02 -0.239,-0.061l-5.261,-2.869l-5.261,2.869c-0.168,0.092 -0.373,0.079 -0.529,-0.032s-0.235,-0.301 -0.203,-0.49l0.958,-5.746l-3.818,-3.818c-0.132,-0.132 -0.18,-0.328 -0.123,-0.506s0.209,-0.31 0.394,-0.341l5.749,-0.958l2.386,-4.772c0.085,-0.169 0.258,-0.276 0.447,-0.276s0.363,0.107 0.447,0.276l2.386,4.772l5.749,0.958c0.185,0.031 0.337,0.162 0.394,0.341s0.01,0.374 -0.123,0.506l-3.818,3.818l0.958,5.746c0.031,0.189 -0.048,0.379 -0.203,0.49c-0.086,0.061 -0.188,0.093 -0.29,0.093z"},l.symbolOps=[{label:a.default("圆形"),value:"circle"},{label:a.default("矩形"),value:"rect"},{label:a.default("圆角矩形"),value:"roundRect"},{label:a.default("三角形"),value:"triangle"},{label:a.default("菱形"),value:"diamond"},{label:"pin",value:"pin"},{label:a.default("箭头"),value:"arrow"},{label:a.default("驯鹿"),value:"reindeer"},{label:a.default("飞机"),value:"plane"},{label:a.default("火车"),value:"train"},{label:a.default("船"),value:"ship"},{label:a.default("汽车"),value:"car"},{label:a.default("女人"),value:"woman"},{label:a.default("人"),value:"people"},{label:a.default("火箭"),value:"rocket"},{label:a.default("纸张"),value:"paper"},{label:a.default("星星"),value:"star"}]});
;sugar.define("sugar:widgets/charts/bar-pic/bar-pic-ctrl.tsx",function(e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.advancedCtrl=a.dataBindCtrl=a.chartEigens=a.chartDemoUrl=void 0;var t=e("sugar:node_modules/tslib/tslib.js"),l=e("sugar:utils/i18n.ts"),d=e("sugar:node_modules/react/index.js"),i=e("sugar:widgets/ctrl-panel/data-bind-ctrl/index.tsx"),n=e("sugar:widgets/object-array-editor/object-array-editor.tsx"),o=e("sugar:widgets/amis-inline-switch.tsx"),r=e("sugar:widgets/charts/bar-pic/symbols.tsx"),s=e("sugar:widgets/data-model/data-model-field-holder/data-model-field-holder.tsx"),c=e("sugar:widgets/charts/utils/common.tsx"),u="/openapi/demo/chart?type=barPic";a.chartDemoUrl="$CUR_HOST/openapi/demo/chart?type=barPic",a.chartEigens=[{field:[{name:"x",type:"d",minCount:1,maxCount:2},{name:"y",type:"m",minCount:1,maxCount:1}]}],a.dataBindCtrl=function(e){var a=i.getDebugAndRefreshBtn({loadData:e.chart.loadData,loadDebugData:e.chart.loadDebugData,dataType:e.chart.dataType,refreshText:l.default("刷新图表")}),d=e.chart.dataModelHash||"",n=e.sqlModelStore.detailMap.mapByHash.get(d),o=i.generateSQLFieldList(n),r=i.getDataBindCommon({frontendId:e.chart.frontendId,dataTypeOptions:["dataModel","api","sql","json"],api:{demoUrl:u},sql:{needContinuitySetting:!0,sqlFieldList:o},loadData:e.chart.loadData,loadDebugData:e.chart.loadDebugData,curUrl:e.chart.dataApiUrl}),c=t.__spreadArrays([s.getDataModelFieldHolder({name:"x",label:l.default("X轴/类别轴"),config:{dataModelHash:d,holderId:e.chart.frontendId+"-x",maxCount:2,onlyDimension:!0,canNotNoEnumerable:!0}}),s.getDataModelFieldHolder({name:"y",label:l.default("Y轴/值轴"),config:{dataModelHash:d,holderId:e.chart.frontendId+"-y",maxCount:1,onlyMeasure:!0,canRepeat:!0}}),i.commonFilterForDataModel(d),i.commonBindUrlParamForDataModel(d)],s.getChartConditionsHolder(d,e.chart),[i.commonLimitForDataModel,{type:"select",name:"dataConfig.categories",hiddenOn:"data.dataType != 'sql'",label:l.default("X轴绑定字段"),placeholder:l.default("请选择"),options:o},{type:"select",name:"dataConfig.categoriesSort",hiddenOn:"data.dataType != 'sql'",label:l.default("X轴数据排序"),placeholder:l.default("请选择"),options:[{label:l.default("默认"),value:"default"},{label:l.default("从小到大"),value:"asc"},{label:l.default("从大到小"),value:"desc"}]},{type:"select",name:"dataConfig.yValue",hiddenOn:"data.dataType != 'sql'",label:l.default("Y轴绑定字段"),placeholder:l.default("请选择"),options:o}]);return r.concat(c,a)};var f=r.symbolOps.filter(function(e){return"arrow"!==e.value});a.advancedCtrl=function(e){var a=[];e.chart.config.imgUrls&&(a=e.chart.config.imgUrls.split(",").map(function(e,a){return{label:l.default("上传图片「"+(a+1)+"」"),value:e}}));var i=[{type:"select",list:f.concat(a),key:"symbol",name:l.default("图形"),placeholder:l.default("请选择"),tdStyle:{minWidth:130}},{type:"select",list:[{label:l.default("不重复"),value:"0"},{label:l.default("重复"),value:"1"}],key:"repeat",name:l.default("图形重复"),defaultValue:1,tdStyle:{minWidth:120}},{type:"number",key:"width",name:l.default("图形宽度"),defaultValue:70,tdStyle:{minWidth:100}},{type:"number",key:"height",name:l.default("图形高度(图形不重复时不用配置)"),defaultValue:70,tdStyle:{minWidth:100}}];return[o.amisInlineSwitch("config.chartReverse",l.default("X/Y轴翻转")),o.amisInlineSwitch("config.chartTopShow",l.default("柱顶展示数据")),o.amisInlineSwitch("config.dataSort",l.default("按照数值大小排序")),{type:"select",name:"config.dataSortType",label:"",placeholder:l.default("请选择"),hiddenOn:"!config.dataSort",options:[{label:l.default("从大到小"),value:"desc"},{label:l.default("从小到大"),value:"asc"}]},{type:"number",label:l.default("虚影部分透明度"),name:"config.shadowOpacity",step:.01,min:0,max:1},c.dataUnitCtrl,{type:"divider"},{type:"fieldset",collapsed:!0,title:l.default("柱体图形设置"),collapsable:!0,headingClassName:"fieldset-title",controls:[{type:"image",name:"config.imgUrls",label:l.default("可上传多个图片，并在下面的「柱体形状配置」中将图片绑定到柱体"),multiple:!0,maxLength:10,allowInput:!0,maxSize:2097152,reciever:"/api/image/upload"},{name:"config.imgConfs",children:function(a){var o=a.onChange,r=a.value;return d.createElement(n.default,t.__assign({},{onChange:o,value:r},{chartFrontendId:e.chart.frontendId,containerClassName:"form-group form-item",label:l.default("柱体形状配置"),addTipText:l.default("新增一行"),cols:i}))}}]},{type:"divider"},{type:"fieldset",collapsed:!0,title:l.default("Y轴设置"),collapsable:!0,headingClassName:"fieldset-title",controls:[{type:"group",controls:[o.amisInlineSwitch("config.hideY",l.default("隐藏Y轴")),o.amisInlineSwitch("config.yInverse",l.default("Y轴数值反向"))]},{type:"group",controls:[{type:"select",name:"config.yType",label:l.default("Y轴类型"),clearable:!0,placeholder:l.default("请选择"),options:c.yTypeOptions},{type:"number",label:l.default("Y轴字号"),name:"config.yFontSize",step:1,min:8,max:100}]}]},{type:"divider"},{type:"fieldset",collapsed:!0,title:l.default("X轴设置"),collapsable:!0,headingClassName:"fieldset-title",controls:[o.amisInlineSwitch("config.xLableAllShow",l.default("X轴标签全部展示")),{type:"number",name:"config.xLabelRotate",label:l.default("X轴标签倾斜度(-90至90)"),hiddenOn:"!config.xLableAllShow",min:-90,max:90,step:5},o.amisInlineSwitch("config.xLableVertical",l.default("竖着显示文字")),{type:"number",label:l.default("X轴字号"),name:"config.xFontSize",step:1,min:8,max:100}]},{type:"divider"},c.getTooltipCtrl(),{type:"divider"},c.getLabelCtrl([c.labelPosition]),{type:"divider"},c.gridCtrl,{type:"divider"},c.getVisualMapCtrl(e),{type:"divider"},{type:"fieldset",title:l.default("系列设置(series)"),collapsable:!0,collapsed:!0,headingClassName:"fieldset-title",controls:[o.amisInlineSwitch("config.openCustomSeries",l.default("开启自定义系列设置")),{type:"select",hiddenOn:"!config.openCustomSeries",name:"config.colorSchemeType",label:l.default("颜色分配方式")+'\n                     <a class="text-info pull-right" href="/docs/BestPractise-visualMap" target="_blank">\n                       '+l.default("文档说明")+"\n                     </a>",options:[{label:l.default("按数据系列"),value:0},{label:l.default("按数据索引"),value:1},{label:l.default("按数据名称"),value:2},{label:l.default("按数据数值"),value:3}]},{type:"table",hiddenOn:"!config.openCustomSeries",name:"config.seriesColors",addable:!0,editable:!0,removable:!0,showAddBtn:!0,needConfirm:!0,columns:[{label:l.default("分项"),name:"name",quickEdit:{type:"text",clearable:!0}},{label:l.default("颜色(渐变起点)"),name:"color",type:"color",quickEdit:{type:"color",clearable:!0}},{label:l.default("颜色(渐变终点)"),name:"color1",type:"color",quickEdit:{type:"color",clearable:!0}},{label:l.default("渐变位置"),name:"ratio",quickEdit:{type:"number",placeholder:l.default("0-100"),min:0,max:100}}]}]}]}});
;sugar.define("sugar:widgets/charts/bar-pic/bar-pic.tsx",function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=t("sugar:node_modules/tslib/tslib.js"),r=t("sugar:utils/i18n.ts"),o=t("sugar:node_modules/react/index.js"),i=t("sugar:widgets/charts/chart-manager.tsx"),n=t("sugar:widgets/charts/bar-pic/bar-pic-ctrl.tsx"),s=t("sugar:widgets/charts/_hoc/echarts.tsx"),l=t("sugar:node_modules/react-mixin/index.js"),c=t("sugar:widgets/charts/_mixin/echarts.tsx"),d=t("sugar:widgets/charts/_hoc/debug/debug.tsx"),u=t("sugar:widgets/charts/_hoc/drill-down/drill-down.tsx"),h=t("sugar:widgets/charts/_hoc/toolbar/toolbar.tsx"),g=t("sugar:widgets/charts/_hoc/chart-warning/index.tsx"),m=t("sugar:widgets/charts/_hoc/chart-zoom/index.tsx"),p=t("sugar:node_modules/lodash/cloneDeep.js"),f=t("sugar:widgets/charts/line/line-helper.ts"),y=t("sugar:utils/common-helper.ts"),x=t("sugar:utils/export-file/export-csv.ts"),b=t("sugar:widgets/charts/bar-pic/symbols.tsx"),v=t("sugar:widgets/charts/bar/bar.tsx"),C=t("sugar:utils/export-file/export-excel.ts"),S=t("sugar:widgets/charts/utils/common.tsx"),w=t("sugar:widgets/charts/utils/helper.ts"),_=12,D=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a.__extends(e,t),e.prototype.getDrillDownParam=function(t){var e=p(this.props.chartData);this.props.chartConfig.dataSort&&(e=v.chartDataSort(e,this.props.chartConfig.dataSortType));var a=e.categories,r=e.categories_sugar_origin,o=e.series,i={name:o[0].name||"",value:t.value,category:t.name,_sugar_dd_default_:t.name};if(r){var n=a.indexOf(t.name);i.categories_sugar_origin=r[n]?r[n]:"",i._sugar_dd_default_=i.categories_sugar_origin}return i},e.prototype.getDependenceParam=function(t){return{item:this.getDrillDownParam(t),state:{seriesIndex:0,dataIndex:t.dataIndex}}},e.prototype.refresh=function(t){var e=t.chartData,r=t.chartConfig,o=t.chart,i=t.hub,n=p(e);r.dataSort&&(n=v.chartDataSort(n,r.dataSortType));var s,l,c=n.series,d=n.categories,u=n.yUnit,h=n.yDataFormat,g=this.chart,m=[],y=g.getWidth(),x=g.getHeight(),C=w.handleGrid(r,{marginTop:20,marginBottom:55,marginLeft:80,marginRight:35,chartWidth:y,chartHeight:x}),D=C.marginTop,T=C.marginBottom,L=C.marginLeft,R=C.marginRight,A=o.isDashChart?"#ccc":"#333";r.openCustomColor&&(s=r.textColor,l=r.lineColor),s=s||A,l=l||A;var B,F,I=b.default.car;r.cusVal&&(B=isNaN(r.min)?B:r.min,F=isNaN(r.max)?F:r.max);var M=r.imgConfs||[],z=[];r.openCustomColor&&r.customColors&&r.customColors.length&&(z=r.customColors.map(function(t){return t.color})),c.forEach(function(t,e){var a;if(t.name=t.name+"",m.push(t.name),t.type="pictorialBar",t.symbol=I,t.symbolRepeat="fixed",t.symbolMargin="5%",t.symbolClip=!0,t.symbolSize=["100%","100%"],z.length>0&&(t.itemStyle={color:function(t){return z[t.dataIndex%z.length]||null}}),r.openCustomSeries&&(null===(a=r.seriesColors)||void 0===a?void 0:a.length)>0){var o={};r.seriesColors.forEach(function(t){var e=r.colorSchemeType?t.name:0;t.color&&t.color1?o[e]={type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:t.color},{offset:Math.min((t.ratio||0)/100,1),color:t.color1},{offset:1,color:t.color1}]}:t.color?o[e]=t.color:t.color1&&(o[e]=t.color1)}),t.itemStyle=1===r.colorSchemeType?{color:function(t){return o[t.dataIndex+1]||t.color}}:2===r.colorSchemeType?{color:function(t){return o[t.name]||t.color}}:3===r.colorSchemeType?{color:function(t){return o[t.value]||t.color}}:{color:o[0]}}if(t.data=t.data.map(function(t,e){(void 0===B||B>t)&&(B=+t),(void 0===F||t>F)&&(F=+t);var a="car",r="fixed",o=["100%","100%"];if(M&&M.length){var i=M[e%M.length];a=i.symbol,"0"===i.repeat&&(r=!1),i.width>0&&(o[0]=i.width+"%"),"0"!==i.repeat&&i.height>0&&(o[1]=i.height+"%")}return a=a||"car",a=b.default[a]?b.default[a]:"image://"+window.location.protocol+"//"+window.location.host+a,{value:t,symbol:a,symbolRepeat:r,symbolSize:o}}),r.chartTopShow||r.chartLabel){var i=t.data[0]&&t.data[0]<0||t.data[1]&&t.data[1]<0,n="top";i&&(n="bottom"),r.chartReverse&&!r.yInverse?(n="right",i&&(n="left")):!r.chartReverse&&r.yInverse?(n="bottom",i&&(n="top")):r.chartReverse&&r.yInverse&&(n="left",i&&(n="right")),t.label={show:!0,color:"inherit",fontFamily:r.labelFontFamily||null,fontSize:r.labelFontSize||_,position:r.labelPosition||n,formatter:function(a){return w.formatVal({value:0===e&&r.chartContrast&&a.value?-1*a.value:a.value,format:t.dataFormat||r.yType,prefix:r.prefix,unit:r.unit})}},r.labelColor?t.label.color=r.labelColor:r.openCustomColor&&r.textColor&&(t.label.color=r.textColor)}}),c.push({name:"",type:"pictorialBar",symbol:I,symbolRepeat:"fixed",symbolMargin:"5%",data:c[0].data.map(function(t,e){if(i.dependenceData.dependenceState){var a=i.dependenceData.dependenceState.dataIndex;return a!==e&&(t.symbolClip=!0),t}return t}),symbolSize:["100%","100%"],animationDuration:0,itemStyle:{opacity:r.shadowOpacity}}),c.forEach(function(t){t.symbolBoundingData=F?1.1*F:1});var P=[{show:!r.hideX,type:"category",splitLine:{show:!1},boundaryGap:!0,axisLine:{lineStyle:{color:l,width:1}},axisLabel:{color:s,fontSize:r.xFontSize||_},axisTick:{alignWithLabel:!0},data:d}];r.xLableAllShow&&(P[0].axisLabel.interval=0),r.xLableAllShow&&r.xLabelRotate&&parseInt(r.xLabelRotate,10)&&(P[0].axisLabel.rotate=parseInt(r.xLabelRotate,10)),r.xLableVertical&&(P[0].axisLabel.formatter=function(t){return(t+"").split("").join("\n")});var N=[f.generateLineYAxis(a.__assign({_textColor:s,_lineColor:l,_isDashChart:o.isDashChart,defaultFontSize:_},r),!1,u,h)],E=void 0;r.chartDataZoom&&m.length&&(T+=40,x&&(E=x-T+30,E+32>x&&(E=x-32)));var j={textStyle:w.getTextStyle(r),legend:{data:m,show:!1,textStyle:{color:s},y:"bottom"},dataZoom:{show:!!r.chartDataZoom,realtime:!0,start:r.chartDataZoom?r.dataZoomStart||0:0,end:r.chartDataZoom?r.dataZoomEnd||100:100,y:E},grid:{left:L,top:D,right:R,bottom:T},xAxis:r.chartReverse?N:P,yAxis:r.chartReverse?P:N,series:c,tooltip:{trigger:"axis",confine:r.tooltipConfine||!1,extraCssText:S.getTooltipCss(r),axisPointer:{lineStyle:r.openCustomColor&&r.axisPoiLineColor?{color:r.axisPoiLineColor}:{}},formatter:function(t){return f.lineTooltipFormatter(t[0],a.__assign({defaultFontSize:_},r),c.slice(0,1),u,h)}}};j.visualMap=w.handleVisualMap(r),g.setOption(j,!0)},e.displayName="BarPic",e=a.__decorate([u.default,d.default,h.default,g.default,m.default,s.default,l.decorate(c.default)],e)}(o.Component);e.default=D;var T=function(t){if(!t)return r.default("无数据");if(!(t.categories&&t.series&&t.categories instanceof Array&&t.series instanceof Array))return r.default("数据中缺少categories或series字段");if(t.series.length>1)return r.default("象形柱状图只支持一个 series 的数据");if(!t.categories.length||!t.series.length)return r.default("无数据");if(!y.isArrayOfTypes(t.categories,["string","number","null"]))return r.default("X轴绑定的数据类型不对，不是字符串或数字");for(var e=0;e<t.series.length;e++){var a=t.series[e];if(!a.data)return r.default(a.name?"Y轴「"+a.name+"」数据为空":"第「"+(e+1)+"」系列柱状数据为空");if(!y.isArrayOfTypes(a.data,["null","numberString","number"]))return r.default(a.name?"Y轴「"+a.name+"」数据中不全是数字，格式错误":"第「"+(e+1)+"」系列柱状数据不全是数字，格式错误")}return!0},L=function(t,e){var a=B(t,e);C.exportExcelByColumns(a,""+(e.dynamicName||e.name||"export"))},R=function(t,e){var a=B(t,e);x.exportCsvByColumns(a,(e.dynamicName||e.name||"export")+".csv")},A=function(t,e){var a=B(t,e);return C.exportRowsByColumns(a)},B=function(t,e){var a=[];if(t&&t.data&&t.data.categories&&t.data.series&&t.data.categories.length&&t.data.series.length){var o=t.data;e.config.dataSort&&(o=v.chartDataSort(p(o),e.config.dataSortType)),a.push([r.default("X轴")].concat(o.categories));var i=o.series[0];a.push([i.name||""].concat(i.data))}return a},F=function(t){var e=t.dataConfig.dataModel,a=e.x,r=void 0===a?[]:a,o=e.y,i=void 0===o?[]:o;return r.length&&i.length?!0:!1};i.register({kind:"commonChart",type:"bar-pic",name:r.default("象形柱状图"),iconClassName:"chart-bar-pic",enableTemplate:!0,commonCustomColor:!0,commonCustomColorTitle:["","",r.default("可增加多个配色项，依次对应每个柱体")],initialState:{dataType:"api",dataApiUrl:n.chartDemoUrl,dataConfig:{categoriesSort:"default",continuity_type:"simple",continuity_empty_val:"1",continuity_time_step:"1Hour"},config:{marginLeft:65,marginTop:20,marginRight:20,marginBottom:55,yType:"normal",xLabelRotate:0,hideYSplitArea:!0,hideYSplitLine:!0,xLableAllShow:!0,imgConfs:[{id:"jps66ck826mk2",symbol:"car",repeat:"1",height:55,width:55}],dataSortType:"desc",shadowOpacity:.05}},initialDashboardState:{config:{}},component:D,dataBindCtrl:n.dataBindCtrl,advancedCtrl:n.advancedCtrl,exportCSV:R,exportExcel:L,exportRows:A,needDashboardAutoFresh:!0,validate:T,drillDownType:"single",canBeDrillChild:!0,dataModelPanelShow:[["dataType","dataModel"]],drillDownSuggestDataModelField:"x",canHierarchyDrillDown:!0,loadDataWhenDataModelConfigChange:F,drillDownFieldName:"category",chartEigens:n.chartEigens})});
;sugar.define("sugar:widgets/charts/bar-polar/bar-polar-ctrl.tsx",function(e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.advancedCtrl=a.dataBindCtrl=a.chartEigens=a.chartDemoUrl=void 0;var t=e("sugar:node_modules/tslib/tslib.js"),l=e("sugar:utils/i18n.ts"),d=e("sugar:node_modules/react/index.js"),n=e("sugar:widgets/ctrl-panel/data-bind-ctrl/index.tsx"),o=e("sugar:widgets/object-array-editor/object-array-editor.tsx"),i=e("sugar:widgets/ctrl-panel/common/switch-with-tip.tsx"),r=e("sugar:widgets/amis-inline-switch.tsx"),s=e("sugar:widgets/data-model/data-model-field-holder/data-model-field-holder.tsx"),c=e("sugar:widgets/charts/utils/common.tsx"),u=[{label:l.default("取累加值"),value:"sum"},{label:l.default("取均值"),value:"avg"},{label:l.default("取首行"),value:"first"},{label:l.default("取末行"),value:"end"}],f="/openapi/demo/chart?type=barPolar";a.chartDemoUrl="$CUR_HOST/openapi/demo/chart?type=barPolar",a.chartEigens=[{field:[{name:"x",type:"d",minCount:1,maxCount:2},{name:"y",type:"m",minCount:1,maxCount:1}]}],a.dataBindCtrl=function(e){var a=n.getDebugAndRefreshBtn({loadData:e.chart.loadData,loadDebugData:e.chart.loadDebugData,dataType:e.chart.dataType,refreshText:l.default("刷新图表")}),r=e.chart.dataModelHash||"",c=e.sqlModelStore.detailMap.mapByHash.get(r),p=n.generateSQLFieldList(c),m=n.getDataBindCommon({frontendId:e.chart.frontendId,dataTypeOptions:["dataModel","api","sql","json"],api:{demoUrl:f},loadData:e.chart.loadData,loadDebugData:e.chart.loadDebugData,curUrl:e.chart.dataApiUrl}),g=[{type:"select",list:p,key:"frontendId",name:l.default("绑定字段"),tdStyle:{minWidth:150}}],h=t.__spreadArrays([s.getDataModelFieldHolder({name:"x",label:l.default("X轴/类别轴"),config:{dataModelHash:r,holderId:e.chart.frontendId+"-x",maxCount:2,onlyDimension:!0,canNotNoEnumerable:!0}}),s.getDataModelFieldHolder({name:"y",label:l.default("Y轴/值轴"),config:{dataModelHash:r,holderId:e.chart.frontendId+"-y",maxCount:1,onlyMeasure:!0,canRepeat:!0}}),n.commonFilterForDataModel(r),n.commonBindUrlParamForDataModel(r)],s.getChartConditionsHolder(r,e.chart),[n.commonLimitForDataModel,{type:"radios",name:"dataConfig.bindMode",hiddenOn:"data.dataType != 'sql'",label:l.default("SQL数据使用方式："),inline:!1,options:[{label:l.default("每行对应一个柱体"),value:"row"},{label:l.default("每列对应一个柱体"),value:"col"}]},{type:"select",name:"dataConfig.rowNameField",hiddenOn:"data.dataType != 'sql' || data.dataConfig.bindMode != 'row'",label:l.default("柱体的名称字段"),placeholder:l.default("请选择"),options:p},{type:"select",name:"dataConfig.rowValueField",hiddenOn:"data.dataType != 'sql' || data.dataConfig.bindMode != 'row'",label:l.default("柱体的取值字段"),placeholder:l.default("请选择"),options:p},{name:"dataConfig.colModeFields",hiddenOn:"data.dataType != 'sql' || data.dataConfig.bindMode != 'col'",children:function(a){var n=a.onChange,i=a.value;return d.createElement(o.default,t.__assign({},{onChange:n,value:i},{chartFrontendId:e.chart.frontendId,containerClassName:"form-group form-item",label:l.default("绑定字段到扇形区域"),addTipText:l.default("新增扇形区块"),cols:g}))}}]);return c&&c.config.openRow2Col&&h.push({name:"dataConfig.addAllRow2Col",hiddenOn:"data.dataType != 'sql' || data.dataConfig.bindMode != 'col'",children:function(e){var a=e.onChange,n=e.value;return d.createElement(i.default,t.__assign({},{onChange:a,value:n,label:l.default("绑定所有的行转列"),tipText:l.default("不了解？"),tipLink:"/docs/DataBind-SQL-Rowcol"}))}}),h.push({type:"select",name:"dataConfig.colModeMultiRows",hiddenOn:"data.dataType != 'sql' || data.dataConfig.bindMode != 'col'",label:l.default("如果有多行数据的处理方式"),options:u}),m.concat(h,a)},a.advancedCtrl=function(e){return[r.amisInlineSwitch("config.dataSort",l.default("按照数值大小排序")),c.dataUnitCtrl,{type:"select",name:"config.dataSortType",label:"",placeholder:l.default("请选择"),hiddenOn:"!config.dataSort",options:[{label:l.default("从大到小"),value:"desc"},{label:l.default("从小到大"),value:"asc"}]},{type:"number",name:"config.barMaxWidth",label:l.default("柱体最大宽度(0为自适应)"),min:0},r.amisInlineSwitch("config.roundCap",l.default("开启圆角")),{type:"divider"},c.getTooltipCtrl(),{type:"divider"},{type:"fieldset",collapsed:!0,title:l.default("径向轴设置"),collapsable:!0,headingClassName:"fieldset-title",controls:[r.amisInlineSwitch("config.hideRadiusAxis",l.default("隐藏径向轴")),{type:"number",label:l.default("径向轴字号"),name:"config.xFontSize",step:1,min:8,max:100}]},{type:"divider"},{type:"fieldset",collapsed:!0,title:l.default("角度轴设置"),collapsable:!0,headingClassName:"fieldset-title",controls:[r.amisInlineSwitch("config.hideY",l.default("隐藏角度轴")),r.amisInlineSwitch("config.hideYSplitLine",l.default("隐藏角度轴刻度网格线"),"config.hideY"),r.amisInlineSwitch("config.hideYSplitArea",l.default("隐藏角度轴区域分割"),"config.hideY"),r.amisInlineSwitch("config.scale",l.default("角度轴刻度自适应")),{type:"group",hiddenOn:"config.scale",controls:[{type:"number",name:"config.min",label:l.default("角度轴刻度最小值"),min:0},{type:"number",name:"config.max",label:l.default("角度轴刻度最大值"),min:0}]},{type:"group",controls:[{type:"select",name:"config.yType",label:l.default("角度轴类型"),clearable:!0,placeholder:l.default("请选择"),options:c.yTypeOptions},{type:"number",label:l.default("角度轴字号"),name:"config.yFontSize",step:1,min:8,max:100}]},{type:"number",name:"config.startAngle",label:l.default("起始角度"),min:0,max:360},r.amisInlineSwitch("config.anticlockwise",l.default("逆时针方向排布"))]},{type:"divider"},{type:"fieldset",collapsed:!0,title:l.default("极坐标系设置"),collapsable:!0,headingClassName:"fieldset-title",controls:[{type:"group",controls:[{type:"text",name:"config.centerX",clearable:!0,placeholder:l.default("数字、百分比、50%"),label:l.default("中心点位置横向")},{type:"text",name:"config.centerY",clearable:!0,placeholder:l.default("数字、百分比、50%"),label:l.default("中心点位置纵向")}]},{type:"group",controls:[{type:"text",name:"config.radiusInner",clearable:!0,placeholder:l.default("数字、百分比、50%"),label:l.default("图形大小内圈")},{type:"text",name:"config.radiusOuter",clearable:!0,placeholder:l.default("数字、百分比、50%"),label:l.default("图形大小外圈")}]}]},{type:"divider"},c.getVisualMapCtrl(e),{type:"divider"},{type:"fieldset",title:l.default("系列设置(series)"),collapsable:!0,collapsed:!0,headingClassName:"fieldset-title",controls:[r.amisInlineSwitch("config.openCustomSeries",l.default("开启自定义系列设置")),{type:"select",hiddenOn:"!config.openCustomSeries",name:"config.colorSchemeType",label:l.default("颜色分配方式")+'\n                     <a class="text-info pull-right" href="/docs/BestPractise-visualMap" target="_blank">\n                       '+l.default("文档说明")+"\n                     </a>",options:[{label:l.default("按数据系列"),value:0},{label:l.default("按数据索引"),value:1},{label:l.default("按数据名称"),value:2},{label:l.default("按数据数值"),value:3}]},{type:"table",hiddenOn:"!config.openCustomSeries",name:"config.seriesColors",addable:!0,editable:!0,removable:!0,showAddBtn:!0,needConfirm:!0,columns:[{label:l.default("分项"),name:"name",quickEdit:{type:"text",clearable:!0}},{label:l.default("颜色(渐变起点)"),name:"color",type:"color",quickEdit:{type:"color",clearable:!0}},{label:l.default("颜色(渐变终点)"),name:"color1",type:"color",quickEdit:{type:"color",clearable:!0}},{label:l.default("渐变位置"),name:"ratio",quickEdit:{type:"number",placeholder:l.default("0-100"),min:0,max:100}}]}]}]}});
;sugar.define("sugar:widgets/charts/bar-polar/bar-polar.tsx",function(e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var t=e("sugar:node_modules/tslib/tslib.js"),r=e("sugar:utils/i18n.ts"),o=e("sugar:node_modules/react/index.js"),s=e("sugar:widgets/charts/chart-manager.tsx"),i=e("sugar:widgets/charts/bar-polar/bar-polar-ctrl.tsx"),n=e("sugar:widgets/charts/_hoc/echarts.tsx"),l=e("sugar:node_modules/react-mixin/index.js"),d=e("sugar:widgets/charts/_mixin/echarts.tsx"),c=e("sugar:widgets/charts/_hoc/debug/debug.tsx"),u=e("sugar:widgets/charts/_hoc/drill-down/drill-down.tsx"),h=e("sugar:widgets/charts/_hoc/toolbar/toolbar.tsx"),g=e("sugar:widgets/charts/_hoc/chart-warning/index.tsx"),f=e("sugar:widgets/charts/_hoc/chart-zoom/index.tsx"),m=e("sugar:node_modules/lodash/cloneDeep.js"),p=e("sugar:widgets/charts/line/line-helper.ts"),x=e("sugar:utils/common-helper.ts"),C=e("sugar:utils/export-file/export-csv.ts"),y=e("sugar:node_modules/lodash/merge.js"),w=e("sugar:widgets/charts/bar/bar.tsx"),v=e("sugar:utils/export-file/export-excel.ts"),S=e("sugar:widgets/charts/utils/common.tsx"),_=e("sugar:widgets/charts/utils/helper.ts"),b=12,D=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.legendSelected={},a}return t.__extends(a,e),a.prototype.willReceiveProps=function(e,a){e.chartConfig.defaultLegendCount!==a.chartConfig.defaultLegendCount&&(this.legendSelected={})},a.prototype.getDrillDownParam=function(e){var a=m(this.props.chartData);this.props.chartConfig.dataSort&&(a=w.chartDataSort(a,this.props.chartConfig.dataSortType));var t=a.categories,r=a.categories_sugar_origin,o={name:e.name,value:e.value,_sugar_dd_default_:e.name};if(r){var s=t.indexOf(e.name);o.categories_sugar_origin=r[s]?r[s]:"",o._sugar_dd_default_=o.categories_sugar_origin}return o},a.prototype.getDependenceParam=function(e){return{item:this.getDrillDownParam(e),state:{seriesIndex:e.seriesIndex,dataIndex:e.dataIndex}}},a.prototype.refresh=function(e){var a=e.chartData,r=e.chartConfig,o=e.chart,s=m(a);r.dataSort&&(s=w.chartDataSort(s,r.dataSortType||"asc"));var i,n,l=s.series,d=s.categories,c=s.yUnit,u=s.yDataFormat,h=this.chart,g=o.isDashChart?"#ccc":"#333",f=[];r.openCustomColor&&(i=r.textColor,n=r.lineColor,r.customColors&&r.customColors.length&&(f=r.customColors.map(function(e){return e.color}).reverse())),i=i||g,n=n||g;var x=0;l.forEach(function(e){var a;e.type="bar",e.coordinateSystem="polar",e.data.forEach(function(e){var a=parseFloat(e||0);a>x&&(x=a)});var t=200;if(r.barMaxWidth&&parseInt(r.barMaxWidth,10)>0&&(t=parseInt(r.barMaxWidth,10)),e.barMaxWidth=t,r.barMinHeight&&(e.barMinHeight=parseInt(r.barMinHeight,10)||0),r.roundCap&&(e.roundCap=!0),f&&f.length&&(e.itemStyle={color:function(e){return f[e.dataIndex%f.length]||null}}),r.openCustomSeries&&(null===(a=r.seriesColors)||void 0===a?void 0:a.length)>0){var o={};r.seriesColors.forEach(function(e){var a=r.colorSchemeType?e.name:0;e.color&&e.color1?o[a]={type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:e.color},{offset:Math.min((e.ratio||0)/100,1),color:e.color1},{offset:1,color:e.color1}]}:e.color?o[a]=e.color:e.color1&&(o[a]=e.color1)}),e.itemStyle=1===r.colorSchemeType?{color:function(e){return o[e.dataIndex+1]||e.color}}:2===r.colorSchemeType?{color:function(e){return o[e.name]||e.color}}:3===r.colorSchemeType?{color:function(e){return o[e.value]||e.color}}:{color:o[0]}}r.openCustomShadow&&r.shadowBlur&&(e.itemStyle=y({},e.itemStyle,{shadowBlur:r.shadowBlur,shadowColor:r.shadowColor||"rgba(0, 0, 0, 0.5)",shadowOffsetX:r.shadowOffsetX||0,shadowOffsetY:r.shadowOffsetY||0}))});var C={show:!r.hideRadiusAxis,type:"category",splitLine:{show:!1},boundaryGap:!0,axisLine:{lineStyle:{color:n,width:1}},axisLabel:{color:i,interval:0,fontSize:r.xFontSize||b,margin:r.roundCap?o.isDashChart?12:10:8},axisTick:{alignWithLabel:!0},data:d,z:3},v=p.generateLineYAxis(t.__assign({_textColor:i,_lineColor:n,_isDashChart:o.isDashChart,defaultFontSize:b},r),!1,c,u);v.axisLine.show=!0,r.scale?v.scale=!0:(void 0!==r.min&&(v.min=r.min),v.max=r.max||0===r.max?r.max:1.1*x);var D={};(r.centerX||r.centerY)&&(D.center=[r.centerX||"50%",r.centerY||"50%"]),r.radiusInner&&r.radiusOuter?D.radius=[r.radiusInner,r.radiusOuter]:r.radiusInner?D.radius=r.radiusInner:r.radiusOuter&&(D.radius=r.radiusOuter),r.startAngle>=0&&(v.startAngle=r.startAngle),r.anticlockwise&&(v.clockwise=!1);var M={textStyle:_.getTextStyle(r),angleAxis:v,polar:D,radiusAxis:C,series:l,tooltip:{trigger:"axis",confine:r.tooltipConfine||!1,extraCssText:S.getTooltipCss(r),axisPointer:{lineStyle:r.openCustomColor&&r.axisPoiLineColor?{color:r.axisPoiLineColor}:{}},formatter:function(e){return p.lineTooltipFormatter(e,t.__assign({defaultFontSize:b},r),l,c,u)}}};M.visualMap=_.handleVisualMap(r),h.setOption(M,!0)},a.displayName="BarPolar",a=t.__decorate([u.default,c.default,h.default,g.default,f.default,n.default,l.decorate(d.default)],a)}(o.Component);a.default=D;var M=function(e){if(!e)return r.default("无数据");if(!(e.categories&&e.series&&e.categories instanceof Array&&e.series instanceof Array))return r.default("数据中缺少categories或series字段");if(!e.categories.length||!e.series.length)return r.default("无数据");if(!x.isArrayOfTypes(e.categories,["string","number","null"]))return r.default("「类别」绑定的数据类型不对，不是字符串或数字");for(var a=0;a<e.series.length;a++){var t=e.series[a];if(!t.data)return r.default(t.name?"Y轴「"+t.name+"」数据为空":"第「"+(a+1)+"」系列柱状数据为空");if(!x.isArrayOfTypes(t.data,["null","numberString","number"]))return r.default(t.name?"Y轴「"+t.name+"」数据中不全是数字，格式错误":"第「"+(a+1)+"」系列柱状数据不全是数字，格式错误")}return!0},T=function(e,a){var t=B(e,a);v.exportExcelByColumns(t,""+(a.dynamicName||a.name||"export"))},A=function(e,a){var t=B(e,a);C.exportCsvByColumns(t,(a.dynamicName||a.name||"export")+".csv")},I=function(e,a){var t=B(e,a);return v.exportRowsByColumns(t)},O=function(e){var a=e.dataConfig.dataModel,t=a.x,r=void 0===t?[]:t,o=a.y,s=void 0===o?[]:o;return r.length&&s.length?!0:!1},B=function(e,a){var t=[];if(e&&e.data&&e.data.categories&&e.data.series&&e.data.categories.length&&e.data.series.length){var o=e.data;a.config.dataSort&&(o=w.chartDataSort(m(o),a.config.dataSortType)),t.push([r.default("X轴")].concat(o.categories)),o.series.forEach(function(e){t.push([e.name||""].concat(e.data))})}return t};s.register({kind:"commonChart",type:"bar-polar",name:r.default("圆形柱状图"),iconClassName:"chart-bar-polar",enableTemplate:!0,commonCustomShadow:!0,commonCustomColor:!0,commonCustomColorTitle:["","",r.default("可增加多个配色项，依次对应各柱体")],initialState:{height:500,dataType:"api",dataApiUrl:i.chartDemoUrl,dataConfig:{bindMode:"row",colModeMultiRows:"sum"},config:{yType:"normal",barMaxWidth:0,fontSize:12,barBorderRadius:0}},initialDashboardState:{width:500,config:{hideY:!0,hideYSplitArea:!0,hideYSplitLine:!0,fontSize:20}},component:D,dataBindCtrl:i.dataBindCtrl,advancedCtrl:i.advancedCtrl,exportCSV:A,exportExcel:T,exportRows:I,needDashboardAutoFresh:!0,validate:M,drillDownType:"single",canBeDrillChild:!0,dataModelPanelShow:[["dataType","dataModel"]],drillDownSuggestDataModelField:"x",canHierarchyDrillDown:!0,loadDataWhenDataModelConfigChange:O,drillDownFieldName:"category",chartEigens:i.chartEigens})});
;sugar.define("sugar:widgets/charts/pie/pie-ctrl.tsx",function(e,a){"use strict";var l;Object.defineProperty(a,"__esModule",{value:!0}),a.advancedCtrl=a.dataBindCtrl=a.chartEigens=a.chartDemoUrl=void 0;var t=e("sugar:node_modules/tslib/tslib.js"),n=e("sugar:utils/i18n.ts"),o=e("sugar:node_modules/react/index.js"),d=e("sugar:widgets/ctrl-panel/data-bind-ctrl/index.tsx"),i=e("sugar:widgets/object-array-editor/object-array-editor.tsx"),r=e("sugar:widgets/ctrl-panel/common/switch-with-tip.tsx"),c=e("sugar:widgets/amis-inline-switch.tsx"),u=e("sugar:widgets/data-model/data-model-field-holder/data-model-field-holder.tsx"),f=e("sugar:widgets/charts/utils/common.tsx"),s=[{label:n.default("取累加值"),value:"sum"},{label:n.default("取均值"),value:"avg"},{label:n.default("取首行"),value:"first"},{label:n.default("取末行"),value:"end"}],m="/openapi/demo/chart?type=pie";a.chartDemoUrl="$CUR_HOST/openapi/demo/chart?type=pie";var p="private"===window.sugarConfig.deployType?!0:null===(l=window.sugarConfig)||void 0===l?void 0:l.nowProductConfig;a.chartEigens=[{field:[{name:"color",type:"d",minCount:1,maxCount:3},{name:"size",type:"m",minCount:1,maxCount:1}]},{field:[{name:"size",type:"m",minCount:2,maxCount:20},{name:"color",type:"d",minCount:0,maxCount:0}]}],a.dataBindCtrl=function(e){var a=d.getDebugAndRefreshBtn({loadData:e.chart.loadData,loadDebugData:e.chart.loadDebugData,dataType:e.chart.dataType,refreshText:n.default("刷新图表")}),l=d.getDataBindCommon({frontendId:e.chart.frontendId,dataTypeOptions:["dataModel","api","sql","json"],api:{demoUrl:m},sql:{needContinuitySetting:!1},loadData:e.chart.loadData,loadDebugData:e.chart.loadDebugData,curUrl:e.chart.dataApiUrl}),f=e.chart.dataModelHash||"",p=e.sqlModelStore.detailMap.mapByHash.get(f),g=d.generateSQLFieldList(p),b=[{type:"select",list:g,key:"frontendId",name:n.default("绑定字段"),tdStyle:{minWidth:150}}],h=t.__spreadArrays([u.getDataModelFieldHolder({name:"color",label:n.default("扇区名称/维度"),config:{dataModelHash:f,holderId:e.chart.frontendId+"-color",maxCount:2,onlyDimension:!0,canNotNoEnumerable:!0}}),u.getDataModelFieldHolder({name:"size",label:n.default("扇区角度大小/度量"),config:{dataModelHash:f,holderId:e.chart.frontendId+"-size",maxCount:20,onlyMeasure:!0}}),c.amisInlineSwitch("dataConfig.timeline",n.default("开启时间轴"),"data.dataType != 'dataModel'"),u.getDataModelFieldHolder({name:"timeline",label:n.default("时间轴"),hiddenOn:"dataType != 'dataModel' || !dataConfig.timeline",config:{dataModelHash:f,holderId:e.chart.frontendId+"-timeline",maxCount:1,onlyDimension:!0}}),u.getDataModelFieldHolder({name:"extra",label:n.default("下钻附加字段"),config:{dataModelHash:f,holderId:e.chart.frontendId+"-extra",maxCount:1,onlyDimension:!0,canNotNoEnumerable:!0,dimConfig:{contextMenu:null}},desc:n.default("请确保该字段在维度的聚合结果中值是相同的，从而获得正确的结果")}),d.commonFilterForDataModel(f),d.commonBindUrlParamForDataModel(f)],u.getChartConditionsHolder(f,e.chart),[d.commonLimitForDataModel,{type:"radios",name:"dataConfig.bindMode",inline:!1,hiddenOn:"data.dataType != 'sql'",label:n.default("SQL数据使用方式："),options:[{label:n.default("每行对应一个扇形区域"),value:"row"},{label:n.default("每列对应一个扇形区域"),value:"col"}]},{type:"select",name:"dataConfig.rowNameField",hiddenOn:"data.dataType != 'sql' || data.dataConfig.bindMode != 'row'",label:n.default("扇形区块的名称字段"),placeholder:n.default("请选择"),options:g},{type:"select",name:"dataConfig.rowValueField",hiddenOn:"data.dataType != 'sql' || data.dataConfig.bindMode != 'row'",label:n.default("扇形区块大小的取值字段"),placeholder:n.default("请选择"),options:g},{type:"select",name:"dataConfig._sugar_extras",hiddenOn:"data.dataType != 'sql' || data.dataConfig.bindMode != 'row'",label:n.default("下钻需要的附加字段，如存有URL的字段"),placeholder:n.default("请选择"),options:g,clearable:!0},{name:"dataConfig.colModeFields",hiddenOn:"data.dataType != 'sql' || data.dataConfig.bindMode != 'col'",children:function(a){var l=a.onChange,d=a.value;return o.createElement(i.default,t.__assign({},{onChange:l,value:d},{chartFrontendId:e.chart.frontendId,containerClassName:"form-group form-item",label:n.default("绑定字段到扇形区域"),addTipText:n.default("新增扇形区块"),cols:b}))}}]);return p&&p.config.openRow2Col&&h.push({name:"dataConfig.addAllRow2Col",hiddenOn:"data.dataType != 'sql' || data.dataConfig.bindMode != 'col'",children:function(e){var a=e.onChange,l=e.value;return o.createElement(r.default,t.__assign({},{onChange:a,value:l,label:n.default("绑定所有的行转列"),tipText:n.default("不了解？"),tipLink:"/docs/DataBind-SQL-Rowcol"}))}}),h.push({type:"select",name:"dataConfig.colModeMultiRows",hiddenOn:"data.dataType != 'sql' || data.dataConfig.bindMode != 'col'",label:n.default("如果有多行数据的处理方式"),options:s}),l.concat(h,a)},a.advancedCtrl=function(e){return[{type:"group",controls:[c.amisInlineSwitch("config.chartRing",n.default("设置为环形"),"config.isPlay"),c.amisInlineSwitch("config.autoSort",n.default("按数据大小排序"))]},{type:"group",controls:[c.amisInlineSwitch("config.chartRose",n.default("南丁格尔玫瑰")),c.amisInlineSwitch("config.hideZero",n.default("不展示为零数据项"))]},{type:"number",name:"config.minAngle",label:n.default("扇形的最小角度"),step:1,min:0},f.dataUnitCtrl,c.amisInlineSwitch("config.mergeSmallItmes",n.default("合并小数值项为『其它』")),{type:"number",name:"config.smallItmeStandard",hiddenOn:"!data.config.mergeSmallItmes",label:n.default("输入1，表示占比小于1%的即是小数据项"),min:0},{type:"divider"},f.getTooltipCtrl(null,"percent"),{type:"divider"},f.getLegendCtrl([c.amisInlineSwitch("config.forceNoLegend",n.default("强制不显示图例"))]),{type:"divider"},f.getLabelCtrl([{type:"select",label:n.default("标签对齐方式"),name:"config.labelAlignTo",clearable:!0,options:[{label:n.default("无"),value:"none"},{label:n.default("标线末端对齐"),value:"labelLine"},{label:n.default("文字对齐"),value:"edge"}]},{type:"text",label:n.default("文字边缘距离"),name:"config.labelEdgeDistance",placeholder:n.default("数字、百分比、50%"),hiddenOn:'data.config.labelAlignTo !== "edge"',clearable:!0}],"pie",[c.amisInlineSwitch("config.labelBreakLine",n.default("标签分两行展示"),"!data.config.labelShowName || (!data.config.labelShowNum && !data.config.labelShowPercent)"),{type:"group",hiddenOn:"!data.config.labelShowName || (!data.config.labelShowNum && !data.config.labelShowPercent) || !config.labelBreakLine",controls:[{type:"select",label:n.default("分行方式"),name:"config.label2LineType",clearable:!0,options:[{label:n.default("名称独立一行"),value:"\b"},{label:n.default("名称和百分比一行"),value:"np"},{label:n.default("名称和数值一行"),value:"nv"}]},{type:"select",label:n.default("两行对齐方式"),name:"config.label2LineAlign",clearable:!0,options:[{label:n.default("居中"),value:"center"},{label:n.default("居左"),value:"left"},{label:n.default("居右"),value:"right"}]}]},{type:"group",hiddenOn:"!data.config.labelShowName || (!data.config.labelShowNum && !data.config.labelShowPercent) || !config.labelBreakLine",controls:[{type:"number",label:n.default("第二行字号"),name:"config.label2LineSize",step:1,min:8,max:60},{type:"color",label:n.default("第二行字体颜色"),name:"config.label2LineColor",hiddenOn:"!data.config.labelShowName || (!data.config.labelShowNum && !data.config.labelShowPercent) || !config.labelBreakLine"}]}]),{type:"divider"},{type:"fieldset",collapsed:!0,title:n.default("轮播设置"),collapsable:!0,headingClassName:"fieldset-title",controls:[c.amisInlineSwitch("config.isPlay",n.default("开启饼图轮播")),{type:"number",name:"config.playInterval",label:n.default("轮播间隔（秒）"),hiddenOn:"!config.isPlay",step:5,min:1},{type:"number",name:"config.fontSize",label:n.default("轮播饼图中心标签字号"),hiddenOn:"!config.isPlay",step:1,min:10},c.amisInlineSwitch("config.openSlideDep",n.default("轮播同步图表联动（联动开启时生效）"),"!config.isPlay")]},{type:"divider"},{type:"fieldset",title:n.default("时间轴设置(timeline)"),collapsed:!0,collapsable:!0,headingClassName:"fieldset-title",hidden:!(p||(null===p||void 0===p?void 0:p.timeline)),controls:[{type:"group",controls:[{type:"select",name:"config.tlAxisType",label:n.default("轴类型"),placeholder:n.default("请选择"),value:"category",options:[{label:n.default("数值轴"),value:"value"},{label:n.default("类目轴"),value:"category"}]},{type:"number",name:"config.tlPlayInterval",label:n.default("播放间隔"),value:1,step:1,min:1,placeholder:n.default("自动")}]},{type:"group",controls:[c.amisInlineSwitch("config.tlAutoPlay",n.default("自动播放")),c.amisInlineSwitch("config.tlInverse",n.default("反方向放置"))]},{type:"group",controls:[{type:"color",name:"config.tlNormalColor",value:"#999",label:n.default("标签颜色")},{type:"color",name:"config.tlEmphasisColor",value:"#23b7e5",label:n.default("标签高亮颜色")}]},{type:"group",controls:[{type:"color",name:"config.tlLineStyleColor",value:"#555",label:n.default("线条颜色")},{type:"number",name:"config.tlLabelFontSize",label:n.default("文本字体大小"),value:12,step:1,min:10}]},{type:"group",controls:[{type:"select",name:"config.tlSymbol",label:n.default("标记图形"),placeholder:n.default("请选择"),value:"circle",options:[{label:n.default("圆形"),value:"circle"},{label:n.default("矩形"),value:"rect"},{label:n.default("圆角矩形"),value:"roundRect"},{label:n.default("三角形"),value:"triangle"},{label:n.default("菱形"),value:"diamond"},{label:n.default("标记"),value:"pin"},{label:n.default("箭头"),value:"arrow"},{label:n.default("无"),value:"none"}]},{type:"color",name:"config.tlItemStyleColor",value:"#bbb",label:n.default("图形颜色")}]},{type:"group",controls:[{type:"color",name:"config.tlSymbolColor",value:"#bbb",label:n.default("标记图形颜色")},{type:"color",name:"config.tlSymbolBorderColor",value:"#777",label:n.default("标记图形边框颜色")}]},c.amisInlineSwitch("config.tlShowPlayBtn",n.default("播放按钮"),"",!0),{type:"group",controls:[c.amisInlineSwitch("config.tlShowNextBtn",n.default("前进按钮"),"",!0),c.amisInlineSwitch("config.tlShowPrevBtn",n.default("后退按钮"))]},{type:"group",controls:[{type:"color",name:"config.tlControlStyleColor",value:"#666",label:n.default("控制按钮颜色")},{type:"color",name:"config.tlControlStyleBorderColor",value:"#666",label:n.default("控制按钮边框颜色")}]},c.amisInlineSwitch("config.showGraphic",n.default("时间轴内容"),"",!0),{type:"number",name:"config.graphicToBottom",label:n.default("底部边距"),value:50,step:1,min:10},{type:"number",name:"config.graphicToRight",label:n.default("右侧边距"),value:50,step:1,min:10},{type:"number",name:"config.graphicFontSize",label:n.default("文本字体大小"),value:40,step:1,min:12}]},{type:"divider"},f.getVisualMapCtrl(e),{type:"divider"},{type:"fieldset",title:n.default("系列设置(series)"),collapsable:!0,collapsed:!0,headingClassName:"fieldset-title",controls:[{type:"select",name:"config.colorSchemeType",clearable:!0,label:n.default("颜色分配方式")+'\n                     <a class="text-info pull-right" href="/docs/BestPractise-visualMap" target="_blank">\n                       '+n.default("文档说明")+"\n                     </a>",options:[{label:n.default("按数据索引"),value:1},{label:n.default("按数据名称"),value:2},{label:n.default("按数据数值"),value:3}]},{type:"table",addable:!0,editable:!0,removable:!0,showAddBtn:!0,needConfirm:!0,visibleOn:"config.colorSchemeType",name:"config.seriesColors",columns:[{label:n.default("分项"),name:"name",quickEdit:{type:"text",clearable:!0}},{label:n.default("颜色(渐变起点)"),name:"color",type:"color",quickEdit:{type:"color",clearable:!0}},{label:n.default("颜色(渐变终点)"),name:"color1",type:"color",quickEdit:{type:"color",clearable:!0}},{label:n.default("渐变位置"),name:"ratio",quickEdit:{type:"number",placeholder:n.default("0-100"),defaultValue:90,min:0,max:100}}]},{type:"group",controls:[{type:"text",name:"config.centerX",clearable:!0,placeholder:n.default("数字、百分比、50%"),label:n.default("中心点位置横向")},{type:"text",name:"config.centerY",clearable:!0,placeholder:n.default("数字、百分比、50%"),label:n.default("中心点位置纵向")}]},{type:"group",controls:[{type:"text",name:"config.radiusInner",clearable:!0,placeholder:n.default("数字、百分比、50%"),label:n.default("图形大小内圈")},{type:"text",name:"config.radiusOuter",clearable:!0,placeholder:n.default("数字、百分比、50%"),label:n.default("图形大小外圈")}]},{type:"number",name:"config.startAngle",label:n.default("起始角度"),min:0,max:360},c.amisInlineSwitch("config.anticlockwise",n.default("逆时针方向排布"))]}]}});
;sugar.define("sugar:widgets/charts/_hoc/label/label.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=e("sugar:node_modules/tslib/tslib.js"),l=e("sugar:node_modules/react/index.js"),a=e("sugar:stores/index.ts");t.default=function(e){var t;return a.observer((t=function(t){function a(){var e=null!==t&&t.apply(this,arguments)||this;return e.state={name:"",value:0,percent:"",showPercent:!0,showNumber:!1,fontSize:30,color:"",left:50,isPlay:!0},e.changeLabel=function(t){e.setState(t)},e}return n.__extends(a,t),a.prototype.render=function(){var t=this.state,a=t.name,r=t.value,s=t.percent,o=t.showPercent,u=t.showNumber,i=t.fontSize,c=t.color,d=t.left,m=t.isPlay;return[l.createElement(e,n.__assign({},this.props,{key:"component",changeLabel:this.changeLabel})),m?l.createElement("div",{key:"label",className:"pie-label",style:{fontSize:i,color:c,left:d+"%"}},u?l.createElement("div",null,r):null,o?l.createElement("div",null,s):null,l.createElement("div",null,a)):null]},a}(l.Component),t.displayName="PieLabelHOC",t))}});
;sugar.define("sugar:widgets/charts/pie/pie.tsx",function(e,t){"use strict";function a(e,t){t=parseFloat(t);var a=0,o=0,r=[];e.forEach(function(e){a+=parseFloat(e.value)});var n=e.filter(function(e){return parseFloat(e.value)/a*100<=t?(o+=parseFloat(e.value),r.push(e),!1):!0});return r.length&&n.push(1==r.length?r[0]:{value:o,name:l.default("其它")}),n}Object.defineProperty(t,"__esModule",{value:!0}),t.mergeSmallItmes=void 0;var o=e("sugar:node_modules/tslib/tslib.js"),l=e("sugar:utils/i18n.ts"),r=e("sugar:node_modules/react/index.js"),n=e("sugar:node_modules/tinycolor2/tinycolor.js"),i=e("sugar:widgets/charts/chart-manager.tsx"),s=e("sugar:widgets/charts/pie/pie-ctrl.tsx"),d=e("sugar:widgets/charts/_hoc/echarts.tsx"),c=e("sugar:node_modules/react-mixin/index.js"),u=e("sugar:widgets/charts/_mixin/echarts.tsx"),h=e("sugar:widgets/charts/_hoc/debug/debug.tsx"),m=e("sugar:widgets/charts/_hoc/drill-down/drill-down.tsx"),p=e("sugar:widgets/charts/_hoc/toolbar/toolbar.tsx"),g=e("sugar:widgets/charts/_hoc/chart-warning/index.tsx"),f=e("sugar:widgets/charts/_hoc/chart-zoom/index.tsx"),v=e("sugar:widgets/charts/_hoc/label/label.tsx"),y=e("sugar:node_modules/lodash/cloneDeep.js"),S=e("sugar:utils/common-helper.ts"),b=e("sugar:utils/chart-helper.ts"),x=e("sugar:utils/export-file/export-csv.ts"),C=e("sugar:utils/export-file/export-excel.ts"),w=e("sugar:utils/animation.ts"),I=e("sugar:node_modules/lodash/get.js"),P=e("sugar:node_modules/amis/lib/index.js"),_=e("sugar:widgets/charts/utils/common.tsx"),F=e("sugar:widgets/charts/utils/helper.ts"),D=12,L=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.hoverIndex=-1,t.sliderIndex=-1,t.changePieLabel=function(e,a,o,l,r){var n,i=e[a]||{},s=i.name,d=i.value,c=i.unit,u=i.dataFormat,h=(l.prefix||"")+S.formatDataByType(d,u)+(c||l.unit||""),m=l.labelShowName,p=l.labelShowNum,g=l.labelShowPercent,f=l.labelFontSize,v=l.textColor,y=l.fontSize,b=t.props,x=b.changeLabel,C=b.theme,w=(null===(n=C.config.chartTheme)||void 0===n?void 0:n.color)||[];l.openCustomColor&&l.customColors&&l.customColors.length&&Object.assign(w,l.customColors.map(function(e){return e.color}));var I=w.map(function(e){return"string"==typeof e?e:e.type&&e.colorStops?e.colorStops[0].color:void 0});if(x){var P="",_=50;r&&r.length&&(_=parseInt(r[0]||"")),l.labelShowPercent&&(P=(100*parseFloat(d)/o).toFixed(2)+"%"),x({name:m?s:"",percent:P,value:h,showNumber:p,showPercent:g,fontSize:y||f||16,color:v||I[a],left:_,isPlay:!0})}},t}return o.__extends(t,e),t.prototype.getDrillDownParam=function(e){return o.__assign(o.__assign({},e.data),{_sugar_dd_default_:e.data.hasOwnProperty("_sugar_extra")?e.data._sugar_extra:void 0!==e.data.name_sugar_origin?e.data.name_sugar_origin:e.data.name})},t.prototype.getDependenceParam=function(e){return{item:this.getDrillDownParam(e),state:{seriesIndex:e.seriesIndex,dataIndex:e.dataIndex}}},t.prototype.willUnmount=function(){this.playFlag&&clearInterval(this.playFlag)},t.prototype.refresh=function(e,t){var l,r,i,s,d=this,c=e.chartData,u=e.chartConfig,h=e.chart,m=e.hub,p=e.theme,g=y(c),f=g.series,v=g.timeline,x=[],C=u.isPlay,P=u.chartRing||C,L=parseInt(u.labelFontSize||D,10)||12,N=h.isDashChart?"#ccc":"#333";u.openCustomColor&&(s=u.textColor),s=s||N;var T=g,B=this.chart,A=u.unit||"",E=null==u.minAngle?6:u.minAngle,z=u.prefix||"",O="private"===window.sugarConfig.deployType?!0:null===(l=window.sugarConfig)||void 0===l?void 0:l.nowProductConfig,M=(null===(i=null===(r=p.config)||void 0===r?void 0:r.chartTheme)||void 0===i?void 0:i.color)||[];M.length>0&&(M=M.map(function(e){return{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:e},{offset:1,color:n(e).spin(18).toString()}]}})),u.openCustomColor&&u.customColors&&u.customColors.length&&(M=u.customColors.map(function(e){return e.color&&e.color1&&!isNaN(e.ratio)?{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:e.color},{offset:Math.min(e.ratio/100,1),color:e.color1},{offset:1,color:e.color1}]}:e.color||e.color1}));var R=!1;(f||[{}]).forEach(function(e,l){var r,n;T=e&&e.data||T,u.autoSort&&T.sort(function(e,t){return parseFloat(e.value)>parseFloat(t.value)?-1:1}),u.hideZero&&(T=T.filter(function(e){return e.value>0})),u.mergeSmallItmes&&(T=a(T,null!=u.smallItmeStandard?u.smallItmeStandard:1));var i=[],c=0,h=parseFloat(T[0].value),p=0,g=!1;T.forEach(function(e){parseFloat(e.value)>c&&(c=parseFloat(e.value)),parseFloat(e.value)<h&&(h=parseFloat(e.value)),p+=parseFloat(e.value),i.push(e.name)});var f=h/p,y=u.labelAlignTo||"none",w=!1;u.chartLabel&&u.labelShowName&&(u.labelShowNum||u.labelShowPercent)&&u.labelBreakLine&&(w=!0);var _={show:u.chartLabel,color:"inherit",fontFamily:u.labelFontFamily||null,fontSize:L,minMargin:2,bleedMargin:5,alignTo:y,edgeDistance:u.labelEdgeDistance||"8%",formatter:function(e){var t=u.labelShowName?(e.name||"")+"":"",a=u.labelShowPercent?e.percent+"%":"",o=u.labelShowNum?z+S.formatDataByType(e.value,e.data.dataFormat)+(e.data.unit||A):"";if(w){var l=t,r=a?o?a+" ("+o+")":a:o,n=u.label2LineType;return o&&a&&("np"===n?(l=t+": "+a,r=o):"nv"===n&&(l=""+t+(t?": ":"")+o,r=a)),"{primary|"+l+"}\n{secondary|"+r+"}"}var r=o;return a&&(r=r?a+" ("+r+")":a),t+(r&&t?": ":"")+r}};u.labelColor?_.color=u.labelColor:u.openCustomColor&&u.textColor&&(_.color=u.textColor);var N=["50%","50%"],j=!1,U="50%";u.chartLegend&&(U="45%",j=!0,u.legendPosition&&"right"!==u.legendPosition||(N=["40%","50%"])),f>.12&&!u.labelShowNum&&!u.labelShowPercent&&"none"===y&&(g=!0,_={show:u.chartLabel,textStyle:{fontFamily:u.labelFontFamily||null,fontSize:L},position:"inner",formatter:"{d}%"},U="60%",j=!0,u.legendPosition||(N=["right"===u.legendPosition?"35%":"50%","50%"]));var k=null;if(P&&(U=["20%","50%"],u.chartLegend&&(U=["20%","45%"]),f>.12&&!u.labelShowNum&&!u.labelShowPercent&&"none"===y&&(U=["25%","68%"],k={label:{show:u.chartLabel,textStyle:{fontFamily:u.labelFontFamily||null,fontSize:L},position:"inner",formatter:"{d}%"}})),u.forceNoLegend&&(j=!1,N=["50%","50%"],U="50%",P&&(U=["20%","50%"],f>.12&&!u.labelShowNum&&!u.labelShowPercent&&(U=["20%","68%"]))),m.dependenceData.dependenceState){var V=m.dependenceData.dependenceState.dataIndex;T.forEach(function(e,t){e.itemStyle||(e.itemStyle={}),e.itemStyle.opacity=t!==V?.5:1})}t||b.isValidSlideDependence(u)&&C||T.forEach(function(e){e.itemStyle||(e.itemStyle={}),e.itemStyle.opacity=1}),u.centerX&&(N[0]=u.centerX),u.centerY&&(N[1]=u.centerY);var X={name:"",type:"pie",radius:U,label:_,labelLine:{show:u.chartLabel},roseType:u.chartRose?"radius":!1,center:N,minAngle:E,data:T,itemStyle:{}};if("labelLine"===y&&(X.labelLine.length2=2),w){var Y=u.label2LineSize||L-2;8>Y?Y=8:"";var G=Math.max(L,Y)+2;_.lineHeight=G,_.rich={primary:{fontSize:L},secondary:{fontSize:Y}},u.label2LineAlign&&(_.rich.secondary.align=u.label2LineAlign,_.rich.primary.align=u.label2LineAlign),u.label2LineColor&&(_.rich.secondary.color=u.label2LineColor),X.labelLayout=function(e){var t=e.labelRect.x<B.getWidth()/2,a=e.labelLinePoints;return a[2][0]=t?e.labelRect.x:e.labelRect.x+e.labelRect.width,{labelLinePoints:a}}}k&&(X.emphasis=k),u.openCustomColor&&u.lineColor&&(X.labelLine.lineStyle={color:u.lineColor}),u.openCustomShadow&&u.shadowBlur&&(X.itemStyle={shadowBlur:u.shadowBlur,shadowColor:u.shadowColor||"rgba(0, 0, 0, 0.5)",shadowOffsetX:u.shadowOffsetX||0,shadowOffsetY:u.shadowOffsetY||0}),C&&(X.label=!1,X.radius=["50%","70%"],X.avoidLabelOverlap=!1),u.radiusInner&&u.radiusOuter?X.radius=[u.radiusInner,u.radiusOuter]:u.radiusInner?X.radius=u.radiusInner:u.radiusOuter&&(X.radius=u.radiusOuter),u.anticlockwise&&(X.clockwise=!1),u.startAngle>=0&&(X.startAngle=u.startAngle);var H={color:M,legend:o.__assign(o.__assign({},F.legendPositionConfig({marginLeft:0,marginRight:0,marginTop:20,marginBottom:20},u,"right")),{show:j,textStyle:{color:u.legendTextColor||s,fontFamily:u.legendFontFamily||null,fontSize:u.legendFontSize||D},data:i}),series:[X]};if(d.props.changeLabel&&d.props.changeLabel({isPlay:C}),H.visualMap=F.handleVisualMap(u),!(null===(r=H.visualMap)||void 0===r?void 0:r.length)){var W={};u.colorSchemeType&&(null===(n=u.seriesColors)||void 0===n?void 0:n.length)>0&&u.seriesColors.forEach(function(e){e.color&&e.color1?W[e.name]={type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:e.color},{offset:Math.min((e.ratio||0)/100,1),color:e.color1},{offset:1,color:e.color1}]}:e.color?W[e.name]=e.color:e.color1&&(W[e.name]=e.color1)}),T.forEach(function(e,t){var a,o,l=t%M.length,r=M[l];1===u.colorSchemeType&&W[t+1]?r=W[t+1]:2===u.colorSchemeType&&W[e.name]?r=W[e.name]:3===u.colorSchemeType&&W[e.value]&&(r=W[e.value]),e.itemStyle||(e.itemStyle={}),e.itemStyle.color=r||null;var n="#000";u.labelColor?n=u.labelColor:u.openCustomColor&&u.textColor?n=u.textColor:r&&("string"==typeof r?n=r:(null===(o=null===(a=null===r||void 0===r?void 0:r.colorStops)||void 0===a?void 0:a[0])||void 0===o?void 0:o.color)&&(n=r.colorStops[0].color),g&&(n="#fff")),e.label||(e.label={}),e.label.color=n}),W=null}if(!t&&(clearInterval(d.playFlag),C)){var Z=(!isNaN(u.playInterval)&&u.playInterval)>1?u.playInterval:1,$=H.series[0].data.length;d.sliderIndex=(d.sliderIndex+1)%$,R=!0,d.changePieLabel(T,d.sliderIndex,p,u,N),B.on("mouseover",function(e){var t=e.dataIndex;d.changePieLabel(T,t,p,u,N),d.hoverIndex=t}),B.on("mouseout",function(){d.changePieLabel(T,d.sliderIndex,p,u,N),d.hoverIndex=-1});var q=I(d,"_handleDependence");d.playFlag=setInterval(function(){if(d.props.chartData||!b.isValidSlideDependence(u)){var e=d.hoverIndex;B.dispatchAction({type:"downplay",seriesIndex:0}),d.sliderIndex=(d.sliderIndex+1)%$,B.dispatchAction({type:"highlight",seriesIndex:0,dataIndex:d.sliderIndex}),q&&b.isValidSlideDependence(u)&&q({data:T[d.sliderIndex],seriesName:"",seriesIndex:0,dataIndex:d.sliderIndex}),d.changePieLabel(T,-1===e?d.sliderIndex:d.hoverIndex,p,u,N)}},1e3*Z)}(O||(null===O||void 0===O?void 0:O.timeline))&&v&&v.length&&u.showGraphic&&!H.graphic&&(H.graphic={elements:[{type:"text",right:u.graphicToRight||50,bottom:u.graphicToBottom||50,style:{text:v[l],font:"bolder "+(u.graphicFontSize||40)+"px monospace",fill:"rgba(100, 100, 100, 0.25)"},z:100}]}),x.push(H)});var j,U={trigger:"item",confine:u.tooltipConfine||!1,extraCssText:_.getTooltipCss(u),formatter:function(e){var t,a,o=e.name,l="",r="";return u.tooltipPercent&&(l=e.percent+"%"),u.tooltipNum&&(r=z+S.formatDataByType(e.value,null===(t=e.data)||void 0===t?void 0:t.dataFormat)+((null===(a=e.data)||void 0===a?void 0:a.unit)||A),u.tooltipPercent&&(r="("+r+")")),o+(l||r?":":"")+(l?" "+l:"")+(r?" "+r:"")}},k={baseOption:{},options:[]};if((O||(null===O||void 0===O?void 0:O.timeline))&&v&&v.length){var V={axisType:u.tlAxisType,orient:"horizontal",autoPlay:u.tlAutoPlay,inverse:u.tlInverse,playInterval:1e3*u.tlPlayInterval,label:{color:u.tlNormalColor,fontSize:u.tlLabelFontSize},symbol:u.tlSymbol,lineStyle:{color:u.tlLineStyleColor},checkpointStyle:{color:u.tlSymbolColor,borderColor:u.tlSymbolBorderColor,borderWidth:2},controlStyle:{showNextBtn:u.tlShowNextBtn,showPrevBtn:u.tlShowPrevBtn,showPlayBtn:u.tlShowPlayBtn,color:u.tlControlStyleColor,borderColor:u.tlControlStyleBorderColor},itemStyle:{color:u.tlItemStyleColor},progress:{itemStyle:{color:u.tlEmphasisColor},lineStyle:{color:u.tlEmphasisColor}},emphasis:{controlStyle:{color:"#aaa",borderColor:"#aaa"}},data:[]};V.data=v.map(function(e){return{value:e,tooltip:{formatter:function(e){return e.name}}}}),k.baseOption={textStyle:F.getTextStyle(u),timeline:V,tooltip:U},k.options=x,j=k}else j=x[0],j.tooltip=U,j.textStyle=F.getTextStyle(u);var X=u;(O||(null===O||void 0===O?void 0:O.timeline))&&v&&v.length&&(X=o.__assign(o.__assign({},u),{enableAnimation:!0,animationDuration:u.animationDuration||1e3,animationDurationUpdate:u.animationDurationUpdate||4e3,animationEasing:u.animationEasing||"linear",animationEasingUpdate:u.animationEasingUpdate||"linear"})),w.setAnimationOption(j.baseOption||j,X),B.setOption(j,!0),R&&B.dispatchAction({type:"highlight",seriesIndex:0,dataIndex:this.sliderIndex})},t.displayName="Pie",t=o.__decorate([m.default,h.default,p.default,g.default,f.default,v.default,d.default,c.decorate(u.default)],t)}(r.Component);t.default=L,t.mergeSmallItmes=a;var N=function(e,t){if(!e||Array.isArray(e)&&!e.length)return l.default("无数据");if(e.series)e.series.forEach(function(e,a){for(var o=!0,r=0;r<e.length;r++){var n=e[r],i=e.timeline&&e.timeline[a]?e.timeline[a]+"的":"";if(!n)return l.default("饼图的第「"+(r+1)+"」项数据为空，格式不对");if(!n.name)return l.default("「"+i+"」第「"+(r+1)+"」项数据中没有名称name字段");if(!S.isNumberic(n.value))return l.default("「"+i+"」第「"+(r+1)+"」项数据中value取值不是数字类型");n.value&&0!==n.value&&"0"!==n.value&&(o=!1)}return o&&t&&t.hideZero?l.default("数据全为0，并且设置了不展示数据为零的项，所以无数据可展示"):void 0});else{for(var a=!0,o=0;o<e.length;o++){var r=e[o];if(!r)return l.default("饼图的第「"+(o+1)+"」项数据为空，格式不对");if(!r.name)return l.default("第「"+(o+1)+"」项数据中没有名称name字段");if(!S.isNumberic(r.value))return l.default("第「"+(o+1)+"」项数据中value取值不是数字类型");r.value&&0!==r.value&&"0"!==r.value&&(a=!1)}if(a&&t&&t.hideZero)return l.default("数据全为0，并且设置了不展示数据为零的项，所以无数据可展示")}return!0},T=function(e,t){var a=E(e);C.exportExcelByColumns(a,""+(t.dynamicName||t.name||"export"))},B=function(e,t){var a=E(e);x.exportCsvByColumns(a,(t.dynamicName||t.name||"export")+".csv")},A=function(e){var t=E(e);return C.exportRowsByColumns(t)},E=function(e){var t,a=[],o="private"===window.sugarConfig.deployType?!0:null===(t=window.sugarConfig)||void 0===t?void 0:t.nowProductConfig;if(e&&e.data&&e.data.length||e.data.series&&e.data.series.length){var l=0;(e.data.series||[]).forEach(function(e){var t=e.data;l<t.length&&(l=t.length)}),(e.data.series||[{}]).forEach(function(t,r){var n=[],i=[],s=[],d=t.data||e.data;if((o||(null===o||void 0===o?void 0:o.timeline))&&e.data.timeline&&e.data.timeline.length){for(var c=[],u=0;l>u;u++)c.push(d.length>u?e.data.timeline[r]:null);s=s.concat(c)}d.forEach(function(e){n.push(e.name),i.push(e.value)}),s.length&&a.push(s),a.push(n),a.push(i)})}return a},z=function(e){var t=e.dataConfig.dataModel,a=t.size,o=void 0===a?[]:a,r=t.color,n=void 0===r?[]:r,i=t.extra,s=void 0===i?[]:i;return o.length?o.length>1&&n.length?(P.toast.error(l.default("扇区名称绑定了字段时，扇区角度大小只能绑定一个度量字段")),!1):1!==s.length||n.length?n.length||1!==o.length?!0:!1:(P.toast.error(l.default("下钻附加字段绑定了字段时，扇区名称必须绑定字段")),!1):!1};i.register({kind:"commonChart",type:"pie",name:l.default("饼图"),iconClassName:"chart-pie",enableTemplate:!0,commonCustomShadow:!0,commonCustomColorGradient:!0,variants:[{name:l.default("环形饼图"),iconClassName:"chart-ring",initialState:{config:{chartRing:!0}},initialDashboardState:{config:{color:"#ccc"}}},{name:l.default("玫瑰饼图"),iconClassName:"chart-rose",initialState:{dataApiUrl:"$CUR_HOST/openapi/demo/chart?type=rosePie",config:{chartRose:!0,labelShowPercent:!0}}},{name:l.default("轮播饼图"),iconClassName:"chart-pie-play",initialState:{config:{isPlay:!0,labelShowPercent:!0}},initialDashboardState:{height:350,width:350,config:{openCustomColor:!0,textColor:"#fff",fontSize:20}}}],initialState:{dataType:"api",dataApiUrl:s.chartDemoUrl,config:{minAngle:6,fontSize:16,smallItmeStandard:1,chartLabel:!0,labelShowName:!0,hoverOffset:10,playInterval:5,tooltipPercent:!0,tooltipNum:!0,tooltipFontSize:12,chartStepType:"start",tlAxisType:"category",tlAutoPlay:!0,tlPlayInterval:1,tlItemStyleColor:"#bbb",tlLineStyleColor:"#555",tlControlStyleColor:"#666",tlControlStyleBorderColor:"#666",tlSymbol:"circle",tlSymbolColor:"#bbb",tlEmphasisColor:"#177cdc",tlNormalColor:"#999",tlShowNextBtn:!0,tlShowPlayBtn:!0,showGraphic:!0},dataConfig:{bindMode:"row",colModeMultiRows:"sum",timeline:!1,tlNormalColor:"#fff",tlLineStyleColor:"#fff",tlControlStyleBorderColor:"#fff"}},initialDashboardState:{config:{color:"#ccc",labelShowPercent:!0}},component:L,dataBindCtrl:s.dataBindCtrl,advancedCtrl:s.advancedCtrl,exportCSV:B,exportExcel:T,exportRows:A,needDashboardAutoFresh:!0,validate:N,drillDownType:"single",canBeDrillChild:!0,dataModelPanelShow:[["dataType","dataModel"]],drillDownSuggestDataModelField:"color",canHierarchyDrillDown:!0,loadDataWhenDataModelConfigChange:z,drillDownFieldName:"name",chartEigens:s.chartEigens})});
;sugar.define("sugar:widgets/charts/pie-nested/pie-nested-ctrl.tsx",function(e,l){"use strict";var a;Object.defineProperty(l,"__esModule",{value:!0}),l.advancedCtrl=l.dataBindCtrl=l.chartEigens=l.chartDemoUrl=void 0;var t=e("sugar:node_modules/tslib/tslib.js"),o=e("sugar:utils/i18n.ts"),n=e("sugar:widgets/ctrl-panel/data-bind-ctrl/index.tsx"),d=e("sugar:widgets/amis-inline-switch.tsx"),i=e("sugar:widgets/data-model/data-model-field-holder/data-model-field-holder.tsx"),r=e("sugar:widgets/charts/utils/common.tsx"),c=e("sugar:utils/font-map.ts"),u="/openapi/demo/chart?type=pieNested";l.chartDemoUrl="$CUR_HOST/openapi/demo/chart?type=pieNested";var s="private"===window.sugarConfig.deployType?!0:null===(a=window.sugarConfig)||void 0===a?void 0:a.nowProductConfig;l.chartEigens=[{field:[{name:"color",type:"d",minCount:1,maxCount:1},{name:"color2",type:"d",minCount:1,maxCount:1},{name:"size",type:"m",minCount:1,maxCount:1}]}],l.dataBindCtrl=function(e){var l=n.getDebugAndRefreshBtn({loadData:e.chart.loadData,loadDebugData:e.chart.loadDebugData,dataType:e.chart.dataType,refreshText:o.default("刷新图表")}),a=n.getDataBindCommon({frontendId:e.chart.frontendId,dataTypeOptions:["dataModel","api","sql","json"],api:{demoUrl:u},sql:{needContinuitySetting:!1},loadData:e.chart.loadData,loadDebugData:e.chart.loadDebugData,curUrl:e.chart.dataApiUrl}),r=e.chart.dataModelHash||"",c=e.sqlModelStore.detailMap.mapByHash.get(r),s=n.generateSQLFieldList(c),f=t.__spreadArrays([i.getDataModelFieldHolder({name:"color",label:o.default("内层扇区名称/维度"),config:{dataModelHash:r,holderId:e.chart.frontendId+"-color",maxCount:1,onlyDimension:!0}}),i.getDataModelFieldHolder({name:"color2",label:o.default("外层扇区名称/维度"),config:{dataModelHash:r,holderId:e.chart.frontendId+"-color2",maxCount:1,onlyDimension:!0}}),i.getDataModelFieldHolder({name:"size",label:o.default("扇区角度大小/度量"),config:{dataModelHash:r,holderId:e.chart.frontendId+"-size",maxCount:1,onlyMeasure:!0}}),d.amisInlineSwitch("dataConfig.timeline",o.default("开启时间轴"),"data.dataType != 'dataModel'"),i.getDataModelFieldHolder({name:"timeline",label:o.default("时间轴"),hiddenOn:"dataType != 'dataModel' || !dataConfig.timeline",config:{dataModelHash:r,holderId:e.chart.frontendId+"-timeline",maxCount:1,onlyDimension:!0}}),n.commonFilterForDataModel(r),n.commonBindUrlParamForDataModel(r)],i.getChartConditionsHolder(r,e.chart),[n.commonLimitForDataModel,{type:"select",name:"dataConfig.innerNameField",hiddenOn:"data.dataType != 'sql'",label:o.default("内层饼图名称字段"),placeholder:o.default("请选择"),options:s},{type:"select",name:"dataConfig.outterNameField",hiddenOn:"data.dataType != 'sql'",label:o.default("外层饼图名称字段"),placeholder:o.default("请选择"),options:s},{type:"select",name:"dataConfig.rowValueField",hiddenOn:"data.dataType != 'sql'",label:o.default("取值字段"),placeholder:o.default("请选择"),options:s}]);return a.concat(f,l)},l.advancedCtrl=[d.amisInlineSwitch("config.hideZero",o.default("不展示为零数据项")),{type:"number",name:"config.minAngle",label:o.default("扇形的最小角度"),step:1,min:0},r.dataUnitCtrl,d.amisInlineSwitch("config.mergeSmallItmes",o.default("合并小数值项为『其它』")),{type:"number",name:"config.smallItmeStandard",hiddenOn:"!data.config.mergeSmallItmes",label:o.default("输入1，表示占比小于1%的即是小数据项"),min:0},{type:"divider"},r.getTooltipCtrl(),{type:"divider"},r.getLegendCtrl(),{type:"divider"},{type:"fieldset",collapsed:!0,title:o.default("外层饼图设置"),collapsable:!0,headingClassName:"fieldset-title",controls:[{type:"group",controls:[d.amisInlineSwitch("config.chartRose",o.default("南丁格尔玫瑰")),d.amisInlineSwitch("config.chartLabel",o.default("显示Label"))]},d.amisInlineSwitch("config.labelShowPercent",o.default("Label上展示百分比")),d.amisInlineSwitch("config.labelShowNum",o.default("Label上展示具体数值")),{type:"group",controls:[{type:"select",name:"config.outLabelFontFamily",label:o.default("字体"),clearable:!0,options:c.fonts},{type:"number",label:o.default("字号"),name:"config.outLabelFontSize",step:1,min:4,max:100}]},{type:"color",name:"config.outLabelColor",clearable:!0,label:o.default("标签颜色")}]},{type:"divider"},{type:"fieldset",collapsed:!0,title:o.default("内层饼图设置"),collapsable:!0,headingClassName:"fieldset-title",controls:[{type:"group",controls:[d.amisInlineSwitch("config.chartRose1",o.default("南丁格尔玫瑰")),d.amisInlineSwitch("config.chartLabel1",o.default("显示Label"))]},d.amisInlineSwitch("config.labelShowPercent1",o.default("label上展示百分比")),d.amisInlineSwitch("config.labelShowNum1",o.default("label上展示具体数值")),{type:"group",controls:[{type:"select",name:"config.inLabelFontFamily",label:o.default("字体"),clearable:!0,options:c.fonts},{type:"number",label:o.default("字号"),name:"config.inLabelFontSize",step:1,min:4,max:100}]},{type:"color",name:"config.inLabelColor",clearable:!0,label:o.default("标签颜色")}]},{type:"divider"},{type:"fieldset",title:o.default("时间轴设置(timeline)"),collapsed:!0,collapsable:!0,headingClassName:"fieldset-title",hidden:!(s||(null===s||void 0===s?void 0:s.timeline)),controls:[{type:"group",controls:[{type:"select",name:"config.tlAxisType",label:o.default("轴类型"),placeholder:o.default("请选择"),value:"category",options:[{label:o.default("数值轴"),value:"value"},{label:o.default("类目轴"),value:"category"}]},{type:"number",name:"config.tlPlayInterval",label:o.default("播放间隔"),value:1,step:1,min:1,placeholder:o.default("自动")}]},{type:"group",controls:[d.amisInlineSwitch("config.tlAutoPlay",o.default("自动播放")),d.amisInlineSwitch("config.tlInverse",o.default("反方向放置"))]},{type:"group",controls:[{type:"color",name:"config.tlNormalColor",value:"#999",label:o.default("标签颜色")},{type:"color",name:"config.tlEmphasisColor",value:"#23b7e5",label:o.default("标签高亮颜色")}]},{type:"group",controls:[{type:"color",name:"config.tlLineStyleColor",value:"#555",label:o.default("线条颜色")},{type:"number",name:"config.tlLabelFontSize",label:o.default("文本字体大小"),value:12,step:1,min:10}]},{type:"group",controls:[{type:"select",name:"config.tlSymbol",label:o.default("标记图形"),placeholder:o.default("请选择"),value:"circle",options:[{label:o.default("圆形"),value:"circle"},{label:o.default("矩形"),value:"rect"},{label:o.default("圆角矩形"),value:"roundRect"},{label:o.default("三角形"),value:"triangle"},{label:o.default("菱形"),value:"diamond"},{label:o.default("标记"),value:"pin"},{label:o.default("箭头"),value:"arrow"},{label:o.default("无"),value:"none"}]},{type:"color",name:"config.tlItemStyleColor",value:"#bbb",label:o.default("图形颜色")}]},{type:"group",controls:[{type:"color",name:"config.tlSymbolColor",value:"#bbb",label:o.default("标记图形颜色")},{type:"color",name:"config.tlSymbolBorderColor",value:"#777",label:o.default("标记图形边框颜色")}]},d.amisInlineSwitch("config.tlShowPlayBtn",o.default("播放按钮"),"",!0),{type:"group",controls:[d.amisInlineSwitch("config.tlShowNextBtn",o.default("前进按钮"),"",!0),d.amisInlineSwitch("config.tlShowPrevBtn",o.default("后退按钮"))]},{type:"group",controls:[{type:"color",name:"config.tlControlStyleColor",value:"#666",label:o.default("控制按钮颜色")},{type:"color",name:"config.tlControlStyleBorderColor",value:"#666",label:o.default("控制按钮边框颜色")}]}]},{type:"divider"},{type:"fieldset",title:o.default("系列设置(series)"),collapsable:!0,collapsed:!0,headingClassName:"fieldset-title",controls:[{type:"group",controls:[{type:"text",name:"config.centerX",clearable:!0,placeholder:o.default("数字、百分比、50%"),label:o.default("中心点位置横向")},{type:"text",name:"config.centerY",clearable:!0,placeholder:o.default("数字、百分比、50%"),label:o.default("中心点位置纵向")}]}]}]});
;sugar.define("sugar:widgets/charts/pie-nested/pie-nested.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=e("sugar:node_modules/tslib/tslib.js"),a=e("sugar:utils/i18n.ts"),l=e("sugar:node_modules/react/index.js"),r=e("sugar:widgets/charts/chart-manager.tsx"),n=e("sugar:widgets/charts/pie-nested/pie-nested-ctrl.tsx"),i=e("sugar:widgets/charts/_hoc/echarts.tsx"),s=e("sugar:node_modules/react-mixin/index.js"),d=e("sugar:widgets/charts/_mixin/echarts.tsx"),u=e("sugar:widgets/charts/_hoc/debug/debug.tsx"),c=e("sugar:widgets/charts/_hoc/drill-down/drill-down.tsx"),m=e("sugar:widgets/charts/_hoc/toolbar/toolbar.tsx"),h=e("sugar:widgets/charts/_hoc/chart-warning/index.tsx"),g=e("sugar:widgets/charts/_hoc/chart-zoom/index.tsx"),f=e("sugar:node_modules/lodash/cloneDeep.js"),p=e("sugar:utils/common-helper.ts"),C=e("sugar:utils/export-file/export-csv.ts"),y=e("sugar:widgets/charts/pie/pie.tsx"),S=e("sugar:utils/export-file/export-excel.ts"),v=e("sugar:utils/animation.ts"),w=e("sugar:widgets/charts/utils/common.tsx"),b=e("sugar:widgets/charts/utils/helper.ts"),x=12,_=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.__extends(t,e),t.prototype.getDrillDownParam=function(e){return o.__assign(o.__assign({},e.data),{_sugar_dd_default_:e.data.name})},t.prototype.getDependenceParam=function(e){return{item:o.__assign(o.__assign({},e.data),{_sugar_dd_default_:e.data.name}),state:{seriesIndex:e.seriesIndex,dataIndex:e.dataIndex}}},t.prototype.refresh=function(e){var t,a,l=e.chartData,r=e.chartConfig,n=e.chart,i=e.hub,s=f(l),d=s.series,u=s.timeline,c=[],m=n.isDashChart?"#ccc":"#333";r.openCustomColor&&(a=r.textColor),a=a||m;var h=s,g=this.chart,C=r.unit||"",S=r.prefix||"",_=null==r.minAngle?6:r.minAngle;(d||[{}]).forEach(function(e){if(h=e&&e.data||h,r.hideZero)for(var t=0;t<h.length;t++)h[t]=h[t].filter(function(e){return e.value>0});if(r.mergeSmallItmes)for(var t=0;t<h.length;t++)h[t]=y.mergeSmallItmes(h[t],null!=r.smallItmeStandard?r.smallItmeStandard:1);for(var l=[],n=0,s=h;n<s.length;n++)for(var d=s[n],u=0,m=d;u<m.length;u++){var g=m[u];l.push(g.name)}var f={show:r.chartLabel1,fontFamily:r.inLabelFontFamily||null,fontSize:r.inLabelFontSize||x,position:"inside",formatter:function(e){return(e.name||"")+(r.labelShowPercent1?"\n"+e.percent+"%":"")+(r.labelShowNum1?"\n("+S+p.formatStringOrNumber(e.value,null,!0)+C+")":"")}},v={show:r.chartLabel,color:"inherit",fontFamily:r.outLabelFontFamily||null,fontSize:r.outLabelFontSize||x,formatter:function(e){return(e.name||"")+(r.labelShowPercent?": "+e.percent+"%":"")+(r.labelShowNum?" ("+S+p.formatStringOrNumber(e.value,null,!0)+C+")":"")}};(r.inLabelColor||r.outLabelColor)&&(f.color=r.inLabelColor,v.color=r.outLabelColor||"inherit"),r.openCustomColor&&r.textColor&&(f.color=r.textColor,v.color=r.textColor);var w=["50%","50%"],P=!1;if(r.chartLegend&&(w=["40%","50%"],P=!0),i.dependenceData.dependenceState){var B=i.dependenceData.dependenceState,L=B.seriesIndex,D=B.dataIndex;h.forEach(function(e,t){e.forEach(function(e,o){e.itemStyle||(e.itemStyle={}),e.itemStyle.opacity=t===L&&o===D?1:.5})})}r.centerX&&(w[0]=r.centerX),r.centerY&&(w[1]=r.centerY);var N={legend:o.__assign(o.__assign({},b.legendPositionConfig({marginLeft:0,marginRight:0,marginTop:20,marginBottom:20},r,"right")),{show:P,textStyle:{color:r.legendTextColor||a,fontFamily:r.legendFontFamily||null,fontSize:r.legendFontSize||x},data:l}),series:[{name:"",type:"pie",radius:[0,"50%"],label:f,roseType:r.chartRose1?"radius":!1,center:w,minAngle:_,itemStyle:{},data:h[0]},{name:"",type:"pie",radius:["60%","75%"],label:v,labelLine:{show:r.chartLabel},roseType:r.chartRose?"radius":!1,center:w,minAngle:_,itemStyle:{},data:h[1]}]};if(r.openCustomShadow&&r.shadowBlur){var T={shadowBlur:r.shadowBlur,shadowColor:r.shadowColor||"rgba(0, 0, 0, 0.5)",shadowOffsetX:r.shadowOffsetX||0,shadowOffsetY:r.shadowOffsetY||0};N.series[0].itemStyle=o.__assign({},T),N.series[1].itemStyle=T}r.openCustomColor&&r.lineColor&&(N.series[1].labelLine.lineStyle={color:r.lineColor}),r.openCustomColor&&r.customColors&&r.customColors.length&&(N.color=r.customColors.map(function(e){return e.color})),c.push(N)});var P,B={trigger:"item",confine:r.tooltipConfine||!1,extraCssText:w.getTooltipCss(r),formatter:function(e){return(e.name||"")+": "+e.percent+"% ("+(S+p.formatStringOrNumber(e.value,null,!0)+C)+")"}},L={baseOption:{},options:[]},D="private"===window.sugarConfig.deployType?!0:null===(t=window.sugarConfig)||void 0===t?void 0:t.nowProductConfig;if((D||(null===D||void 0===D?void 0:D.timeline))&&u&&u.length){var N={axisType:r.tlAxisType,orient:"horizontal",autoPlay:r.tlAutoPlay,inverse:r.tlInverse,playInterval:1e3*r.tlPlayInterval,label:{color:r.tlNormalColor,fontSize:r.tlLabelFontSize},symbol:r.tlSymbol,lineStyle:{color:r.tlLineStyleColor},checkpointStyle:{color:r.tlSymbolColor,borderColor:r.tlSymbolBorderColor,borderWidth:2},controlStyle:{showNextBtn:r.tlShowNextBtn,showPrevBtn:r.tlShowPrevBtn,showPlayBtn:r.tlShowPlayBtn,color:r.tlControlStyleColor,borderColor:r.tlControlStyleBorderColor},itemStyle:{color:r.tlItemStyleColor},progress:{itemStyle:{color:r.tlEmphasisColor},lineStyle:{color:r.tlEmphasisColor}},emphasis:{controlStyle:{color:"#aaa",borderColor:"#aaa"}},data:[]};N.data=u,L.baseOption={textStyle:b.getTextStyle(r),timeline:N,tooltip:B},L.options=c,P=L}else P=c[0],P.tooltip=B,P.textStyle=b.getTextStyle(r);v.setAnimationOption(P.baseOption||P,r),g.setOption(P,!0)},t.displayName="PieNested",t=o.__decorate([c.default,u.default,m.default,h.default,g.default,i.default,s.decorate(d.default)],t)}(l.Component);t.default=_;var P=function(e){if(!e)return a.default("无数据");if(e.series)e.series.forEach(function(t,o){if(!e||Array.isArray(t)&&!t.length)return a.default("无数据");for(var l=0;l<t.length;l++)for(var r=0;r<t[l].length;r++){var n=t[l][r],i=e.timeline&&e.timeline[o]?e.timeline[o]+"的":"";if(!n.name)return a.default("「"+i+"」第「"+(l+1)+"」层饼图的第「"+(l+1)+"」项数据中没有名称name字段");if(!p.isNumberic(n.value))return a.default("「"+i+"」第「"+(l+1)+"」层饼图的第「"+(l+1)+"」项数据中value取值不是数字类型")}});else for(var t=0;t<e.length;t++)for(var o=0;o<e[t].length;o++){var l=e[t][o];if(!l.name)return a.default("第「"+(t+1)+"」层饼图的第「"+(t+1)+"」项数据中没有名称name字段");if(!p.isNumberic(l.value))return a.default("第「"+(t+1)+"」层饼图的第「"+(t+1)+"」项数据中value取值不是数字类型")}return!0},B=function(e,t){var o=N(e);S.exportExcelByColumns(o,""+(t.dynamicName||t.name||"export"))},L=function(e,t){var o=N(e);C.exportCsvByColumns(o,(t.dynamicName||t.name||"export")+".csv")},D=function(e){var t=N(e);return S.exportRowsByColumns(t)},N=function(e){var t,o=[],a="private"===window.sugarConfig.deployType?!0:null===(t=window.sugarConfig)||void 0===t?void 0:t.nowProductConfig;if(e&&e.data&&e.data.length||e.data.series&&e.data.series.length){var l=0;(e.data.series||[]).forEach(function(e){var t=e.data[0];l<t.length&&(l=t.length)}),e.data.series?l*=e.data.series[0].data&&e.data.series[0].data.length||0:null,(e.data.series||[{}]).forEach(function(t,r){var n=[],i=[],s=[],d=t.data||e.data;if((a||(null===a||void 0===a?void 0:a.timeline))&&e.data.timeline&&e.data.timeline.length){for(var u=[],c=0;l>c;c++)u.push(d.length*d[0].length>c?e.data.timeline[r]:null);s=s.concat(u)}d.forEach(function(e){for(var t=0,o=e;t<o.length;t++){var a=o[t];n.push(a.name),i.push(a.value)}}),s.length&&o.push(s),o.push(n),o.push(i)})}return o},T=function(e){var t=e.dataConfig.dataModel,o=t.size,a=void 0===o?[]:o,l=t.color,r=void 0===l?[]:l,n=t.color2,i=void 0===n?[]:n;return 1!==a.length||1!==r.length||1!==i.length?!1:!0};r.register({kind:"commonChart",type:"pie-nested",name:a.default("嵌套饼图"),iconClassName:"chart-pie-nested",enableTemplate:!0,commonCustomShadow:!0,commonCustomColor:!0,initialState:{dataType:"api",dataApiUrl:n.chartDemoUrl,config:{minAngle:6,chartLabel:!0,labelShowPercent:!0,chartLabel1:!0,labelShowPercent1:!0,tlAxisType:"category",tlAutoPlay:!0,tlPlayInterval:1,tlItemStyleColor:"#bbb",tlLineStyleColor:"#555",tlControlStyleColor:"#666",tlControlStyleBorderColor:"#666",tlSymbol:"circle",tlSymbolColor:"#bbb",tlEmphasisColor:"#177cdc",tlNormalColor:"#999",tlShowNextBtn:!0,tlShowPlayBtn:!0},dataConfig:{timeline:!1,tlNormalColor:"#fff",tlLineStyleColor:"#fff",tlControlStyleBorderColor:"#fff"}},initialDashboardState:{config:{color:"#ccc",labelShowPercent:!0}},component:_,dataBindCtrl:n.dataBindCtrl,advancedCtrl:n.advancedCtrl,exportCSV:L,exportExcel:B,exportRows:D,needDashboardAutoFresh:!0,validate:P,drillDownType:"single",canBeDrillChild:!0,dataModelPanelShow:[["dataType","dataModel"]],drillDownSuggestDataModelField:"color",canHierarchyDrillDown:!0,loadDataWhenDataModelConfigChange:T,drillDownFieldName:"name",chartEigens:n.chartEigens})});
;sugar.define("sugar:widgets/charts/funnel/funnel-ctrl.tsx",function(e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.advancedCtrl=a.dataBindCtrl=a.chartEigens=a.chartDemoUrl=void 0;var l=e("sugar:node_modules/tslib/tslib.js"),t=e("sugar:utils/i18n.ts"),d=e("sugar:node_modules/react/index.js"),n=e("sugar:widgets/ctrl-panel/data-bind-ctrl/index.tsx"),o=e("sugar:widgets/object-array-editor/object-array-editor.tsx"),i=e("sugar:widgets/ctrl-panel/common/switch-with-tip.tsx"),r=e("sugar:widgets/amis-inline-switch.tsx"),c=e("sugar:widgets/data-model/data-model-field-holder/data-model-field-holder.tsx"),u=e("sugar:widgets/charts/utils/common.tsx"),s=[{label:t.default("取累加值"),value:"sum"},{label:t.default("取均值"),value:"avg"},{label:t.default("取首行"),value:"first"},{label:t.default("取末行"),value:"end"}],f="/openapi/demo/chart?type=funnel";a.chartDemoUrl="$CUR_HOST/openapi/demo/chart?type=funnel",a.chartEigens=[{field:[{name:"color",type:"d",minCount:1,maxCount:1},{name:"size",type:"m",minCount:1,maxCount:1}]},{field:[{name:"size",type:"m",minCount:2,maxCount:20},{name:"color",type:"d",minCount:0,maxCount:0}]}],a.dataBindCtrl=function(e){var a=n.getDebugAndRefreshBtn({loadData:e.chart.loadData,loadDebugData:e.chart.loadDebugData,dataType:e.chart.dataType,refreshText:t.default("刷新图表")}),r=n.getDataBindCommon({frontendId:e.chart.frontendId,dataTypeOptions:["dataModel","api","sql","json"],api:{demoUrl:f},loadData:e.chart.loadData,loadDebugData:e.chart.loadDebugData,curUrl:e.chart.dataApiUrl}),u=e.chart.dataModelHash||"",p=e.sqlModelStore.detailMap.mapByHash.get(u),m=n.generateSQLFieldList(p),g=[{type:"select",list:m,key:"frontendId",name:t.default("绑定字段"),tdStyle:{minWidth:150}}],b=l.__spreadArrays([c.getDataModelFieldHolder({name:"color",label:t.default("漏斗层名称/维度"),config:{dataModelHash:u,holderId:e.chart.frontendId+"-color",maxCount:1,onlyDimension:!0}}),c.getDataModelFieldHolder({name:"size",label:t.default("漏斗层大小/度量"),config:{dataModelHash:u,holderId:e.chart.frontendId+"-size",maxCount:20,onlyMeasure:!0}}),n.commonFilterForDataModel(u),n.commonBindUrlParamForDataModel(u)],c.getChartConditionsHolder(u,e.chart),[n.commonLimitForDataModel,{type:"radios",name:"dataConfig.bindMode",hiddenOn:"data.dataType != 'sql'",label:t.default("SQL数据使用方式："),inline:!1,options:[{label:t.default("每行对应一个漏斗区域"),value:"row"},{label:t.default("每列对应一个漏斗区域"),value:"col"}]},{type:"select",name:"dataConfig.rowNameField",hiddenOn:"data.dataType != 'sql' || data.dataConfig.bindMode != 'row'",label:t.default("漏斗图区域的名称字段"),placeholder:t.default("请选择"),options:m},{type:"select",name:"dataConfig.rowValueField",hiddenOn:"data.dataType != 'sql' || data.dataConfig.bindMode != 'row'",label:t.default("漏斗图区域的取值字段"),placeholder:t.default("请选择"),options:m},{type:"select",name:"dataConfig._sugar_extras",hiddenOn:"data.dataType != 'sql' || data.dataConfig.bindMode != 'row'",label:t.default("下钻需要的附加字段，如存有URL的字段"),placeholder:t.default("请选择"),options:m,clearable:!0},{name:"dataConfig.colModeFields",hiddenOn:"data.dataType != 'sql' || data.dataConfig.bindMode != 'col'",children:function(a){var n=a.onChange,i=a.value;return d.createElement(o.default,l.__assign({},{onChange:n,value:i},{chartFrontendId:e.chart.frontendId,containerClassName:"form-group form-item",label:t.default("绑定字段到漏斗区域"),addTipText:t.default("新增漏斗区块"),cols:g}))}}]);return p&&p.config.openRow2Col&&b.push({name:"dataConfig.addAllRow2Col",hiddenOn:"data.dataType != 'sql' || data.dataConfig.bindMode != 'col'",children:function(e){var a=e.onChange,n=e.value;return d.createElement(i.default,l.__assign({},{onChange:a,value:n,label:t.default("绑定所有的行转列"),tipText:t.default("不了解？"),tipLink:"/docs/DataBind-SQL-Rowcol"}))}}),b.push({type:"select",name:"dataConfig.colModeMultiRows",hiddenOn:"data.dataType != 'sql' || data.dataConfig.bindMode != 'col'",label:t.default("如果有多行数据的处理方式"),options:s}),r.concat(b,a)};var p=[{label:t.default("80%(默认)"),value:"80"},{label:"70",value:"70"},{label:"60",value:"60"},{label:"50",value:"50"},{label:"40",value:"40"}],m=[{label:t.default("居中"),value:"0"},{label:t.default("左移5%"),value:"5"},{label:t.default("左移10%"),value:"10"},{label:t.default("左移15%"),value:"15"},{label:t.default("左移20%"),value:"20"}];a.advancedCtrl=function(e){return[{type:"radios",name:"config.sortType",label:t.default("数据排序方式"),inline:!1,options:[{label:t.default("从大到小（漏斗）"),value:"descending"},{label:t.default("从小到大（金字塔）"),value:"ascending"},{label:t.default("保持数据原样（支持异形漏斗）"),value:"none"}]},r.amisInlineSwitch("config.calcPercent",t.default("根据数据计算百分比")),{type:"radios",name:"config.calcPercentType",hiddenOn:"!data.config.calcPercent",label:t.default("计算时的分母取值方式："),inline:!1,options:[{label:t.default("所有值中的最大值"),value:"max"},{label:t.default("所有值的总和"),value:"total"},{label:t.default("每一步的上一步取值（每步的转化率）"),value:"pre"}]},r.amisInlineSwitch("config.hideLabelValue",t.default("隐藏label上数值"),"!data.config.calcPercent"),r.amisInlineSwitch("config.hideLabelPercent",t.default("隐藏label百分比"),"!data.config.calcPercent"),{type:"group",controls:[{type:"select",name:"config.funnelAlign",label:t.default("水平对齐方式"),options:m},{type:"select",name:"config.funnelWith",label:t.default("漏斗宽度占比"),options:p}]},u.dataUnitCtrl,{type:"text",name:"config.percentName",hiddenOn:"!data.config.calcPercent",label:t.default("百分比提示前缀")},{type:"divider"},u.getTooltipCtrl(null,"percent"),{type:"divider"},u.getLegendCtrl(),{type:"divider"},u.getLabelCtrl([u.labelPosition]),{type:"divider"},u.getVisualMapCtrl(e),{type:"divider"},{type:"fieldset",title:t.default("系列设置(series)"),collapsable:!0,collapsed:!0,headingClassName:"fieldset-title",controls:[{type:"select",name:"config.colorSchemeType",clearable:!0,label:t.default("颜色分配方式")+'\n                     <a class="text-info pull-right" href="/docs/BestPractise-visualMap" target="_blank">\n                       '+t.default("文档说明")+"\n                     </a>",options:[{label:t.default("按数据索引"),value:1},{label:t.default("按数据名称"),value:2},{label:t.default("按数据数值"),value:3}]},{type:"table",addable:!0,editable:!0,removable:!0,showAddBtn:!0,needConfirm:!0,visibleOn:"config.colorSchemeType",name:"config.seriesColors",columns:[{label:t.default("分项"),name:"name",quickEdit:{type:"text",clearable:!0}},{label:t.default("颜色(渐变起点)"),name:"color",type:"color",quickEdit:{type:"color",clearable:!0}},{label:t.default("颜色(渐变终点)"),name:"color1",type:"color",quickEdit:{type:"color",clearable:!0}},{label:t.default("渐变位置"),name:"ratio",quickEdit:{type:"number",placeholder:t.default("0-100"),defaultValue:90,min:0,max:100}}]},{type:"group",controls:[{type:"text",name:"config.shapeWidth",clearable:!0,placeholder:t.default("数字、百分比、50%"),label:t.default("图形宽度")},{type:"text",name:"config.shapeHeight",clearable:!0,placeholder:t.default("数字、百分比、50%"),label:t.default("图形高度")}]},{type:"group",controls:[{type:"text",name:"config.marginLeft",clearable:!0,placeholder:t.default("居中为center"),label:t.default("图形左边距")},{type:"text",name:"config.marginRight",clearable:!0,placeholder:t.default("数字、百分比、50%"),label:t.default("图形右边距")}]},{type:"group",controls:[{type:"text",name:"config.marginTop",clearable:!0,placeholder:t.default("居中为middle"),label:t.default("图形顶边距")},{type:"text",name:"config.marginBottom",clearable:!0,placeholder:t.default("数字、百分比、50%"),label:t.default("图形底边距")}]}]}]}});
;sugar.define("sugar:widgets/charts/funnel/funnel.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=e("sugar:node_modules/tslib/tslib.js"),o=e("sugar:utils/i18n.ts"),r=e("sugar:node_modules/react/index.js"),n=e("sugar:widgets/charts/chart-manager.tsx"),l=e("sugar:widgets/charts/funnel/funnel-ctrl.tsx"),i=e("sugar:widgets/charts/_hoc/echarts.tsx"),s=e("sugar:node_modules/react-mixin/index.js"),u=e("sugar:widgets/charts/_mixin/echarts.tsx"),d=e("sugar:widgets/charts/_hoc/drill-down/drill-down.tsx"),c=e("sugar:widgets/charts/_hoc/debug/debug.tsx"),m=e("sugar:widgets/charts/_hoc/toolbar/toolbar.tsx"),f=e("sugar:widgets/charts/_hoc/chart-zoom/index.tsx"),h=e("sugar:node_modules/lodash/cloneDeep.js"),g=e("sugar:utils/common-helper.ts"),p=e("sugar:utils/export-file/export-csv.ts"),v=e("sugar:utils/export-file/export-excel.ts"),y=e("sugar:utils/animation.ts"),x=e("sugar:node_modules/amis/lib/index.js"),C=e("sugar:widgets/charts/utils/common.tsx"),w=e("sugar:widgets/charts/utils/helper.ts"),_=12,b=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.getDrillDownParam=function(e){var t=e.data,o=t.hasOwnProperty("_sugar_extra")?t._sugar_extra:t.name_sugar_origin||t.name;return a.__assign(a.__assign({},t),{_sugar_dd_default_:o})},t.prototype.getDependenceParam=function(e){return{item:this.getDrillDownParam(e),state:{seriesIndex:e.seriesIndex,dataIndex:e.dataIndex}}},t.prototype.refresh=function(e){var t,o,r=e.chartData,n=e.chartConfig,l=e.chart,i=e.hub,s=h(r instanceof Array?r:r.data),u=!!n.chartReverse,d=n.funnelAlign?parseInt(n.funnelAlign,10):0,c=parseInt(n.funnelWith||"80",10),m=(100-c)/2-d,f=!!n.calcPercent,p=!!n.hideLabelValue,v=!!n.hideLabelPercent,x=n.percentName||"",b=n.unit||"",S=n.prefix||"",T=l.isDashChart?"#ccc":"#333";n.openCustomColor&&(o=n.textColor),o=o||T;var D="descending";u&&(D="ascending"),n.sortType&&(D=n.sortType),"none"!==D&&s.sort(function(e,t){return e.value<t.value?1:-1});var B=[],F=s[0].value,L=0;s.forEach(function(e){L+=parseFloat(e.value)});var M={},P=n.calcPercentType||"max";if(s.forEach(function(e,t){B.push(e.name);var a=F;"total"===P?a=L:"pre"===P&&(a=0===t?e.value:s[t-1].value),M[e.name]=g.deleteTailZero(e.value/a*100,2)}),i.dependenceData.dependenceState){var A=i.dependenceData.dependenceState.dataIndex;s=s.map(function(e,t){return t!==A&&(e.itemStyle={opacity:.5}),e})}var E=!0;"boolean"==typeof n.chartLabel&&(E=n.chartLabel);var z=E?{show:!0,color:"inherit",position:n.labelPosition,fontFamily:n.labelFontFamily||null,fontSize:n.labelFontSize||n.fontSize||_,formatter:function(e){var t=e.name||"",a=S+g.formatDataByType(e.value,e.data.dataFormat);if(f){a+=e.data.unit||b,p&&(a="");var o=M[t];return null!=o&&(o=""+x+o+"%",p||(o=" ("+o+")"),v&&(o="")),""+t+(a||o?": ":"")+a+o}return t+": "+a+(e.data.unit||b)}}:{show:!1};n.labelColor?z.color=n.labelColor:n.openCustomColor&&n.textColor&&(z.color=n.textColor);var I={name:"",type:"funnel",sort:D,width:c+"%",left:m+"%",y:20,y2:parseInt(n.marginBottom,10)||50,max:F,label:z,itemStyle:{},data:s};n.openCustomShadow&&n.shadowBlur&&(I.itemStyle={shadowBlur:n.shadowBlur,shadowColor:n.shadowColor||"rgba(0, 0, 0, 0.5)",shadowOffsetX:n.shadowOffsetX||0,shadowOffsetY:n.shadowOffsetY||0}),n.openCustomColor&&n.lineColor&&(I.labelLine={lineStyle:{color:n.lineColor}}),n.shapeWidth&&(I.width=n.shapeWidth),n.shapeHeight&&(I.height=n.shapeHeight),n.marginLeft&&(I.left=n.marginLeft),n.marginRight&&(I.right=n.marginRight),n.marginTop&&(I.top=n.marginTop),n.marginBottom&&(I.bottom=n.marginBottom);var O={};n.colorSchemeType&&(null===(t=n.seriesColors)||void 0===t?void 0:t.length)>0&&(n.seriesColors.forEach(function(e){e.color&&e.color1?O[e.name]={type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:e.color},{offset:Math.min((e.ratio||0)/100,1),color:e.color1},{offset:1,color:e.color1}]}:e.color?O[e.name]=e.color:e.color1&&(O[e.name]=e.color1)}),s.forEach(function(e,t){var a,r,l=null;if(1===n.colorSchemeType&&O[t+1]?l=O[t+1]:2===n.colorSchemeType&&O[e.name]?l=O[e.name]:3===n.colorSchemeType&&O[e.value]&&(l=O[e.value]),l){e.itemStyle||(e.itemStyle={}),e.itemStyle.color=l;var i=o;"string"==typeof l?i=l:(null===(r=null===(a=null===l||void 0===l?void 0:l.colorStops)||void 0===a?void 0:a[0])||void 0===r?void 0:r.color)&&(i=l.colorStops[0].color),e.label={color:i}}})),O=null;var R={textStyle:w.getTextStyle(n),tooltip:{trigger:"item",confine:n.tooltipConfine||!1,extraCssText:C.getTooltipCss(n),formatter:function(e){var t=e.name,a=S+g.formatDataByType(e.value,e.data.dataFormat)+(e.data.unit||b);if(f){var o=M[t];return null!=o&&(o=" ("+x+o+"%)"),e.marker+" "+t+": "+a+(o||"")}return e.marker+" "+t+": "+a}},toolbox:{show:!1},legend:a.__assign(a.__assign({},w.legendPositionConfig({marginRight:20,marginLeft:20,marginTop:20,marginBottom:20},n)),{show:"boolean"==typeof n.chartLegend?n.chartLegend:!n.hideLegend,textStyle:{color:n.legendTextColor||o,fontFamily:n.legendFontFamily||null,fontSize:n.legendFontSize||n.fontSize||_},data:B}),series:[I]};n.openCustomColor&&n.customColors&&n.customColors.length&&(R.color=n.customColors.map(function(e){return e.color})),R.visualMap=w.handleVisualMap(n),y.setAnimationOption(R,n),this.chart.setOption(R,!0)},t.displayName="Funnel",t=a.__decorate([d.default,c.default,m.default,f.default,i.default,s.decorate(u.default)],t)}(r.Component);t.default=b;var S=function(e){if(!e)return o.default("无数据");if(!(e instanceof Array||(e=e.data)))return o.default("无数据");if(!(e instanceof Array&&e.length))return o.default("无数据");for(var t=0;t<e.length;t++){var a=e[t];if(!a.name)return o.default("第「"+(t+1)+"」项数据中没有名称name字段");if(!g.isNumberic(a.value))return o.default("第「"+(t+1)+"」项数据中value取值不是数字类型")}return!0},T=function(e,t){var a=F(e);v.exportExcelByColumns(a,""+(t.dynamicName||t.name||"export"))},D=function(e,t){var a=F(e);p.exportCsvByColumns(a,(t.dynamicName||t.name||"export")+".csv")},B=function(e){var t=F(e);return v.exportRowsByColumns(t)},F=function(e){if(e&&e.data){var t=e.data;if(t instanceof Array||(t=t.data),t&&t.length){var a=[],o=[];return t.forEach(function(e){a.push(e.name),o.push(e.value)}),[a,o]}}return[]},L=function(e){var t=e.dataConfig.dataModel,a=t.size,r=void 0===a?[]:a,n=t.color,l=void 0===n?[]:n;return r.length?r.length>1&&l.length?(x.toast.error(o.default("漏斗层名称绑定了字段时，漏斗层大小只能绑定一个度量字段")),!1):1!==r.length||l.length?!0:!1:!1};n.register({kind:"commonChart",type:"funnel",name:o.default("漏斗图"),iconClassName:"chart-funnel",enableTemplate:!0,commonCustomShadow:!0,commonCustomColor:!0,initialState:{dataType:"api",dataApiUrl:l.chartDemoUrl,config:{chartLabel:!0,funnelWith:"80",funnelAlign:"0",marginBottom:50,calcPercentType:"max"},dataConfig:{bindMode:"row",colModeMultiRows:"sum"}},component:b,dataBindCtrl:l.dataBindCtrl,advancedCtrl:l.advancedCtrl,needDashboardAutoFresh:!0,validate:S,exportCSV:D,exportExcel:T,exportRows:B,drillDownType:"single",canBeDrillChild:!0,dataModelPanelShow:[["dataType","dataModel"]],drillDownSuggestDataModelField:"color",loadDataWhenDataModelConfigChange:L,chartEigens:l.chartEigens})});
;sugar.define("sugar:widgets/charts/scatter/scatter-series-ctrl.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.seriesCtrl=t.scatterCtrl=void 0;var l=e("sugar:node_modules/tslib/tslib.js"),a=e("sugar:utils/i18n.ts"),r=e("sugar:widgets/amis-inline-switch.tsx"),s=e("sugar:widgets/charts/utils/common.tsx");t.scatterCtrl=function(e,t,l){return e.type&&"scatter"!==e.type?null:{hiddenOn:t,type:"fieldset",collapsed:!0,title:a.default("散点"),controls:[r.default(l+".showNameLabel",a.default("显示数据点名称")),{type:"group",hiddenOn:"!"+l+".showNameLabel",controls:[{type:"color",name:l+".labelColor",clearable:!0,label:a.default("文字颜色")},{type:"number",label:a.default("名称字号"),name:l+".labelSize",step:1,min:8,max:100}]},{type:"select",name:l+".borderType",label:a.default("描边类型"),placeholder:a.default("请选择"),options:[{label:a.default("实线"),value:"solid"},{label:a.default("虚线"),value:"dashed"},{label:a.default("点线"),value:"dotted"}]},{type:"group",controls:[{type:"number",name:l+".borderWidth",label:a.default("描边宽度"),step:1,min:0,max:100},{type:"color",name:l+".borderColor",label:a.default("描边颜色"),key:"color"}]}]}},t.seriesCtrl=function(e){if(!e.data)return null;var n=e.data.series;if(!n||!n.reduce)return null;var o=[],i=n.reduce(function(e,r){var n=r.name||a.default("散点"),i=[],u="!config.openCustomSeries || config.seriesConfig.current != '"+n+"'",d="config.seriesConfig."+n;return i.push({hiddenOn:u,type:"color",name:d+".color",label:a.default("颜色"),key:"color"},s.getSeriesUnitCtrl(d,u)),o.push({label:n,value:n}),e.concat(l.__spreadArrays(i,[t.scatterCtrl(r,u,d)]))},[]);return{type:"fieldset",title:a.default("系列配置(series)"),collapsable:!0,collapsed:!0,headingClassName:"fieldset-title",controls:l.__spreadArrays([r.default("config.openCustomSeries",a.default("开启自定义系列配置")),{type:"select",name:"config.seriesConfig.current",label:a.default("系列名"),options:o,value:o.length?o[0].value:null,hiddenOn:"!config.openCustomSeries"}],i)}}});
;sugar.define("sugar:widgets/charts/scatter/scatter-ctrl.tsx",function(a,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.advancedCtrl=e.dataBindCtrl=e.chartEigens=e.chartDemoUrl=void 0;var t=a("sugar:node_modules/tslib/tslib.js"),d=a("sugar:utils/i18n.ts"),l=a("sugar:node_modules/react/index.js"),n=a("sugar:widgets/ctrl-panel/data-bind-ctrl/index.tsx"),o=a("sugar:widgets/object-array-editor/object-array-editor.tsx"),i=a("sugar:widgets/amis-inline-switch.tsx"),r=a("sugar:widgets/charts/scatter/scatter-series-ctrl.tsx"),s=a("sugar:widgets/data-model/data-model-field-holder/data-model-field-holder.tsx"),f=a("sugar:widgets/charts/utils/common.tsx"),c="/openapi/demo/chart?type=scatter";e.chartDemoUrl="$CUR_HOST/openapi/demo/chart?type=scatter",e.chartEigens=[{field:[{name:"x",type:"a",minCount:1,maxCount:1},{name:"y",type:"m",minCount:1,maxCount:1},{name:"color",type:"a",minCount:0,maxCount:1},{name:"size",type:"m",minCount:0,maxCount:1},{name:"name",type:"d",minCount:0,maxCount:1},{name:"tooltip",type:"a",minCount:0,maxCount:5}]}],e.dataBindCtrl=function(a){var e=n.getDebugAndRefreshBtn({loadData:a.chart.loadData,loadDebugData:a.chart.loadDebugData,dataType:a.chart.dataType,refreshText:d.default("刷新图表")}),r=n.getDataBindCommon({frontendId:a.chart.frontendId,dataTypeOptions:["dataModel","api","sql","json"],api:{demoUrl:c},sql:{needContinuitySetting:!1},loadData:a.chart.loadData,loadDebugData:a.chart.loadDebugData,curUrl:a.chart.dataApiUrl}),f=a.chart.dataModelHash||"",g=a.sqlModelStore.detailMap.mapByHash.get(f),m=n.generateSQLFieldList(g),u=[{type:"select",list:m,key:"frontendId",name:d.default("绑定字段"),tdStyle:{minWidth:150}}],p=t.__spreadArrays([s.getDataModelFieldHolder({name:"x",label:d.default("X轴"),config:{dataModelHash:f,holderId:a.chart.frontendId+"-x",maxCount:1}}),s.getDataModelFieldHolder({name:"y",label:d.default("Y轴"),config:{dataModelHash:f,holderId:a.chart.frontendId+"-y",maxCount:1,onlyMeasure:!0}}),s.getDataModelFieldHolder({name:"name",label:d.default("散点名称"),config:{dataModelHash:f,holderId:a.chart.frontendId+"-name",maxCount:1,onlyDimension:!0}}),s.getDataModelFieldHolder({name:"color",label:d.default("颜色"),config:{dataModelHash:f,holderId:a.chart.frontendId+"-color",maxCount:1}}),s.getDataModelFieldHolder({name:"size",label:d.default("散点大小"),config:{dataModelHash:f,holderId:a.chart.frontendId+"-size",maxCount:1,onlyMeasure:!0}}),s.getDataModelFieldHolder({name:"tooltip",label:d.default("其他维度或度量"),config:{dataModelHash:f,holderId:a.chart.frontendId+"-tooltip",maxCount:5},desc:d.default("其他的维度和度量将在鼠标悬停时的tooltip提示中展示")}),i.amisInlineSwitch("dataConfig.showVm",d.default("显示缩放映射控件"),"dataType != 'dataModel' || !dataConfig.dataModel || ((!dataConfig.dataModel.size || !dataConfig.dataModel.size.length) && (!dataConfig.dataModel.color || !dataConfig.dataModel.color.length || dataConfig.dataModel.color[0].type === 'd'))"),{type:"select",name:"dataConfig.vmTarget",hiddenOn:"dataType != 'dataModel' || !dataConfig.showVm || !dataConfig.dataModel || !dataConfig.dataModel.size || !dataConfig.dataModel.size.length || !dataConfig.dataModel.color || !dataConfig.dataModel.color.length || dataConfig.dataModel.color[0].type === 'd'",label:d.default("映射控制的对象"),placeholder:d.default("默认为颜色"),options:[{label:d.default("颜色"),value:"color"},{label:d.default("散点大小"),value:"size"}]},{type:"number",name:"config.staticSize",hiddenOn:"dataType != 'dataModel' || (dataConfig.dataModel && dataConfig.dataModel.size && dataConfig.dataModel.size.length)",label:d.default("散点固定大小(像素)"),step:1,min:1},{type:"number",name:"config.minSize",hiddenOn:"dataType != 'dataModel' || !dataConfig.dataModel || !dataConfig.dataModel.size || !dataConfig.dataModel.size.length",label:d.default("最小散点(像素)"),step:1,min:1},{type:"number",name:"config.maxSize",hiddenOn:"dataType != 'dataModel' || !dataConfig.dataModel || !dataConfig.dataModel.size || !dataConfig.dataModel.size.length",label:d.default("最大散点(像素)"),step:1,min:1},n.commonFilterForDataModel(f),n.commonBindUrlParamForDataModel(f)],s.getChartConditionsHolder(f,a.chart),[n.commonLimitForDataModel,{type:"select",name:"dataConfig.dataX",hiddenOn:"data.dataType != 'sql'",label:d.default("绑定X轴字段"),placeholder:d.default("请选择"),options:m},{type:"select",name:"dataConfig.dataY",hiddenOn:"data.dataType != 'sql'",label:d.default("绑定Y轴字段"),placeholder:d.default("请选择"),options:m},{type:"radios",name:"dataConfig.dataSizeType",inline:!1,hiddenOn:"data.dataType != 'sql'",label:d.default("散点大小控制"),options:[{label:d.default("散点统一大小"),value:"static"},{label:d.default("每个散点大小不一"),value:"dynamic"}]},{type:"number",name:"dataConfig.staticSize",hiddenOn:"data.dataType != 'sql' || data.dataConfig.dataSizeType != 'static'",label:d.default("散点大小"),step:1,min:1},{type:"select",name:"dataConfig.dataSize",hiddenOn:"data.dataType != 'sql' || data.dataConfig.dataSizeType != 'dynamic'",label:d.default("绑定散点大小字段"),placeholder:d.default("请选择"),options:m},{type:"divider",hiddenOn:"data.dataType != 'sql'"},i.amisInlineSwitch("dataConfig.multiSeries",d.default("数据拥有多个种类的散点"),"data.dataType != 'sql'"),{type:"select",name:"dataConfig.seriesName",hiddenOn:"data.dataType != 'sql' || !data.dataConfig.multiSeries",label:d.default("绑定数据种类字段"),placeholder:d.default("请选择"),options:m},{type:"divider",hiddenOn:"data.dataType != 'sql'"},i.amisInlineSwitch("dataConfig.showDataName",d.default("每个散点拥有名称"),"data.dataType != 'sql'"),{type:"select",name:"dataConfig.dataName",hiddenOn:"data.dataType != 'sql' || !data.dataConfig.showDataName",label:d.default("绑定散点名称字段"),placeholder:d.default("请选择"),options:m},{type:"divider",hiddenOn:"data.dataType != 'sql'"},i.amisInlineSwitch("dataConfig.showOtherTarget",d.default("附加其他字段"),"data.dataType != 'sql'"),{type:"tpl",hiddenOn:"data.dataType != 'sql'",tpl:'<span class="text-muted help-block">'+d.default("除了X/Y轴以及散点大小以外的字段，将在鼠标hover时的tooltip中展示")+"</span>",className:"m-t-n-sm"},{name:"dataConfig.otherTarget",hiddenOn:"data.dataType != 'sql' || !data.dataConfig.showOtherTarget",children:function(e){var n=e.onChange,i=e.value;return l.createElement(o.default,t.__assign({},{onChange:n,value:i},{chartFrontendId:a.chart.frontendId,containerClassName:"form-group form-item",label:d.default("绑定附加字段"),addTipText:d.default("新增附加字段"),cols:u}))}}]);return r.concat(p,e)};var g=[i.amisInlineSwitch("config.showRegression",d.default("显示回归线（x/y轴都是数字时生效）")),{type:"select",name:"config.regressionType",hiddenOn:"!config.showRegression",label:d.default("回归函数"),value:"linear",options:[{label:d.default("线性回归"),value:"linear"},{label:d.default("指数回归"),value:"exponential"},{label:d.default("对数回归"),value:"logarithmic"},{label:d.default("多项式回归"),value:"polynomial"}]},{type:"number",label:d.default("多项式指数"),hiddenOn:'!config.showRegression || config.regressionType != "polynomial"',name:"config.polynomialDegree",step:1,value:3,min:1,max:100},i.amisInlineSwitch("config.showRegressionFunc",d.default("显示回归函数"),"!config.showRegression",!1),{type:"divider"},{type:"fieldset",collapsed:!0,title:d.default("坐标轴设置"),collapsable:!0,headingClassName:"fieldset-title",controls:[i.amisInlineSwitch("config.chartScale",d.default("XY轴自动缩放")),{type:"group",controls:[i.amisInlineSwitch("config.chartSplitLineX",d.default("显示X轴分割线")),i.amisInlineSwitch("config.chartSplitLineY",d.default("显示Y轴分割线"))]},{type:"group",controls:[{type:"text",name:"config.xName",label:d.default("X轴名称"),placeholder:d.default("默认为空")},{type:"number",label:d.default("X轴字号"),name:"config.xFontSize",step:1,min:8,max:100}]},{type:"group",controls:[{type:"text",name:"config.yName",label:d.default("Y轴名称"),placeholder:d.default("默认为空")},{type:"number",label:d.default("Y轴字号"),name:"config.yFontSize",step:1,min:8,max:100}]}]},{type:"divider"},f.getTooltipCtrl(),{type:"divider"},f.getLegendCtrl([{type:"number",name:"config.legendHeight",label:d.default("图例高度"),step:1,min:15,hiddenOn:'!config.chartLegend || (config.legendPosition != "bottom" && config.legendPosition != "top")'},{type:"number",name:"config.legendWidth",label:d.default("图例宽度"),step:1,min:10,hiddenOn:'!config.chartLegend || (config.legendPosition != "left" && config.legendPosition != "right")'}]),{type:"divider"},f.getLabelCtrl([f.labelPosition]),{type:"divider"},f.gridCtrl];e.advancedCtrl=function(a){return g.concat([{type:"divider"},r.seriesCtrl(a)])}});
;sugar.define('sugar:widgets/charts/map/china-geo-coord.ts', function(require, exports, module, define) {

  "use strict";
  Object.defineProperty(exports, "__esModule", { value: true });
  exports.provinceGeoCoordSp = void 0;
  exports.default = {
      高雄: [120.609, 23.0157, null, 'taiwan', 'china'],
      屏东: [120.661, 22.5344, null, 'taiwan', 'china'],
      台南: [120.182, 23.0464, null, 'taiwan', 'china'],
      新竹: [120.959, 24.7757, null, 'taiwan', 'china'],
      新竹县: [121.163, 24.6748, null, 'taiwan', 'china'],
      宜兰: [121.644, 24.5913, null, 'taiwan', 'china'],
      基隆: [121.704, 25.1131, null, 'taiwan', 'china'],
      苗栗: [120.942, 24.5253, null, 'taiwan', 'china'],
      台北: [121.559, 25.0904, null, 'taiwan', 'china'],
      新北市: [121.646, 24.911, null, 'taiwan', 'china'],
      桃园: [121.227, 24.961, null, 'taiwan', 'china'],
      彰化: [120.464, 24.0016, null, 'taiwan', 'china'],
      嘉义县: [120.26, 23.4465, null, 'taiwan', 'china'],
      嘉义: [120.441, 23.4822, null, 'taiwan', 'china'],
      花莲: [121.381, 23.7743, null, 'taiwan', 'china'],
      南投: [120.988, 23.7977, null, 'taiwan', 'china'],
      台中: [120.966, 24.238, null, 'taiwan', 'china'],
      云林: [120.427, 23.7253, null, 'taiwan', 'china'],
      台东: [121.54, 22.0499, null, 'taiwan', 'china'],
      澎湖: [119.597, 23.5724, null, 'taiwan', 'china'],
      钓鱼岛: [123.473, 25.743, null, 'taiwan', 'china'],
      北京: [116.41166495284281, 39.91132325517341, null, null, 'china'],
      天津: [117.19678856634137, 39.13129504908793, null, null, 'china'],
      河北: [114.50892247229918, 38.05160788527559, null, null, 'china'],
      山西: [112.55565490751108, 37.86330053190941, null, null, 'china'],
      内蒙古: [111.67741976306763, 40.824033768690825, null, null, 'china'],
      辽宁: [123.43572520225906, 41.80244393685758, null, null, 'china'],
      吉林: [125.33107201037413, 43.892575677007876, null, null, 'china'],
      黑龙江: [126.6490649317503, 45.76274263234975, null, null, 'china'],
      上海: [121.47917622247735, 31.23766067156306, null, null, 'china'],
      江苏: [118.7739275401509, 32.04749630515097, null, null, 'china'],
      浙江: [120.16010475263418, 30.29339488572421, null, null, 'china'],
      安徽: [117.28960111387359, 31.866967646899777, null, null, 'china'],
      福建: [119.31274248535382, 26.081376135578243, null, null, 'china'],
      江西: [115.89863778631067, 28.682531197462737, null, null, 'china'],
      山东: [117.00729904786878, 36.68215318771068, null, null, 'china'],
      河南: [113.67187173242553, 34.76405140392973, null, null, 'china'],
      湖北: [114.30514938118115, 30.590009285298237, null, null, 'china'],
      湖南: [112.98885707086882, 28.19975198869135, null, null, 'china'],
      广东: [113.28704868796393, 23.131513779259098, null, null, 'china'],
      广西: [108.32655684226347, 22.829861501979117, null, null, 'china'],
      海南: [110.33773578304327, 20.037673144085705, null, null, 'china'],
      重庆: [106.51155987543073, 29.538849605036805, null, null, 'china'],
      四川: [104.07221517047132, 30.665531299496966, null, null, 'china'],
      贵州: [106.71999412186334, 26.58428544056653, null, null, 'china'],
      云南: [102.71866484796189, 25.046887943641675, null, null, 'china'],
      西藏: [91.13881033157789, 29.666115438652298, null, null, 'china'],
      陕西: [108.95443762207665, 34.26942467492985, null, null, 'china'],
      甘肃: [103.83002313164361, 36.064142766893724, null, null, 'china'],
      青海: [101.78537338682746, 36.629351767152805, null, null, 'china'],
      宁夏: [106.28473979498277, 38.47218279101865, null, null, 'china'],
      新疆: [87.62414772920293, 43.79897217508546, null, null, 'china'],
      台湾: [120.9779169561735, 23.755749216464142, null, null, 'china'],
      香港: [114.17991799676649, 22.325726013305196, null, null, 'china'],
      澳门: [113.55558575045498, 22.20496701424488, null, null, 'china'],
      东城: [116.4251754695498, 39.92373277446111, 'beijing', 'beijing', 'china'],
      西城: [116.3733004152495, 39.92124601063201, 'beijing', 'beijing', 'china'],
      北京朝阳区: [116.49291431418901, 39.92741782877138, 'beijing', 'beijing', 'china'],
      朝阳区: [116.49291431418901, 39.92741782877138, 'beijing', 'beijing', 'china'],
      丰台: [116.29337416062872, 39.869974028156456, 'beijing', 'beijing', 'china'],
      石景山: [116.20196558555357, 39.92049846161822, 'beijing', 'beijing', 'china'],
      海淀: [116.31681412225609, 39.962066900668184, 'beijing', 'beijing', 'china'],
      门头沟: [116.11197849645274, 39.94284236688815, 'beijing', 'beijing', 'china'],
      房山: [116.145615760118, 39.74170042920893, 'beijing', 'beijing', 'china'],
      北京通州区: [116.66503327352306, 39.90868182995245, 'beijing', 'beijing', 'china'],
      通州区: [116.66503327352306, 39.90868182995245, 'beijing', 'beijing', 'china'],
      顺义: [116.65994391270534, 40.135205375933104, 'beijing', 'beijing', 'china'],
      昌平: [116.24250251377042, 40.22385570398705, 'beijing', 'beijing', 'china'],
      大兴: [116.34466006590159, 39.73456374167869, 'beijing', 'beijing', 'china'],
      怀柔: [116.64350659050484, 40.33061939539955, 'beijing', 'beijing', 'china'],
      平谷: [117.11871944632975, 40.15110481196167, 'beijing', 'beijing', 'china'],
      密云: [116.84989592101215, 40.383243332985856, 'beijing', 'beijing', 'china'],
      延庆: [115.99164156997388, 40.470995321168466, 'beijing', 'beijing', 'china'],
      天津和平区: [117.20248428962097, 39.12408991827881, 'tianjin', 'tianjin', 'china'],
      和平区: [117.20248428962097, 39.12408991827881, 'tianjin', 'tianjin', 'china'],
      天津河东区: [117.23298058928374, 39.128393933712815, 'tianjin', 'tianjin', 'china'],
      河东区: [117.23298058928374, 39.128393933712815, 'tianjin', 'tianjin', 'china'],
      河西: [117.22397549601747, 39.108027043551466, 'tianjin', 'tianjin', 'china'],
      南开: [117.170722651457, 39.126237013626636, 'tianjin', 'tianjin', 'china'],
      河北区: [117.20813702571614, 39.16248773698977, 'tianjin', 'tianjin', 'china'],
      红桥: [117.16988123686973, 39.18084214306666, 'tianjin', 'tianjin', 'china'],
      东丽: [117.32053543417129, 39.093495770763916, 'tianjin', 'tianjin', 'china'],
      西青: [117.01866905071265, 39.14573270249156, 'tianjin', 'tianjin', 'china'],
      津南: [117.3889946634358, 38.9957076535628, 'tianjin', 'tianjin', 'china'],
      北辰: [117.14122299434004, 39.23180145284421, 'tianjin', 'tianjin', 'china'],
      武清: [117.06459114114435, 39.382580769076476, 'tianjin', 'tianjin', 'china'],
      宝坻: [117.31469961175063, 39.72264319446575, 'tianjin', 'tianjin', 'china'],
      滨海新: [117.6608034622999, 39.03851556615306, 'tianjin', 'tianjin', 'china'],
      宁河: [117.83466460116998, 39.335168668874886, 'tianjin', 'tianjin', 'china'],
      静海: [116.93189216331069, 38.94142046744247, 'tianjin', 'tianjin', 'china'],
      蓟州: [117.41402574531138, 40.05105687146338, 'tianjin', 'tianjin', 'china'],
      石家庄: [114.50892247229918, 38.05160788527559, null, 'hebei', 'china'],
      唐山: [118.18187815474829, 39.641217917933396, null, 'hebei', 'china'],
      秦皇岛: [119.5931767565359, 39.9481882958637, null, 'hebei', 'china'],
      邯郸: [114.49710432793559, 36.6185677471075, null, 'hebei', 'china'],
      邢台: [114.51533329129714, 37.07421708652992, null, 'hebei', 'china'],
      保定: [115.48888974664864, 38.873444694824705, null, 'hebei', 'china'],
      张家口: [114.89068435613692, 40.81767307188455, null, 'hebei', 'china'],
      承德: [117.94559905185264, 40.98236842960598, null, 'hebei', 'china'],
      沧州: [116.86393623031111, 38.316721724140855, null, 'hebei', 'china'],
      廊坊: [116.71107050595666, 39.52959109320018, null, 'hebei', 'china'],
      衡水: [115.67241372734098, 37.74135635953001, null, 'hebei', 'china'],
      石家庄长安区: [114.5547621680316, 38.053190592763734, 'hebei_shijiazhuang', 'hebei', 'china'],
      石家庄桥西区: [114.4693486785272, 38.03459453250158, 'hebei_shijiazhuang', 'hebei', 'china'],
      桥西区: [114.4693486785272, 38.03459453250158, 'hebei_shijiazhuang', 'hebei', 'china'],
      石家庄新华区: [114.4724080015767, 38.073403122107095, 'hebei_shijiazhuang', 'hebei', 'china'],
      新华区: [114.4724080015767, 38.073403122107095, 'hebei_shijiazhuang', 'hebei', 'china'],
      井陉矿: [114.06481065893169, 38.075413712689375, 'hebei_shijiazhuang', 'hebei', 'china'],
      裕华: [114.53985264593415, 38.033369809002714, 'hebei_shijiazhuang', 'hebei', 'china'],
      藁城: [114.85604106059715, 38.04006650529918, 'hebei_shijiazhuang', 'hebei', 'china'],
      鹿泉: [114.32758062924141, 38.099840621727175, 'hebei_shijiazhuang', 'hebei', 'china'],
      栾城: [114.66087086012624, 37.89257615014757, 'hebei_shijiazhuang', 'hebei', 'china'],
      井陉: [114.15094929790823, 38.03970938783552, 'hebei_shijiazhuang', 'hebei', 'china'],
      正定: [114.57637639125826, 38.15382920852135, 'hebei_shijiazhuang', 'hebei', 'china'],
      行唐: [114.55934216337937, 38.443157828919084, 'hebei_shijiazhuang', 'hebei', 'china'],
      灵寿: [114.38591840479164, 38.31273214955121, 'hebei_shijiazhuang', 'hebei', 'china'],
      高邑: [114.61711635225902, 37.61200951834815, 'hebei_shijiazhuang', 'hebei', 'china'],
      深泽: [115.20661066634023, 38.19089161738523, 'hebei_shijiazhuang', 'hebei', 'china'],
      赞皇: [114.39422640383499, 37.666233843914874, 'hebei_shijiazhuang', 'hebei', 'china'],
      无极: [114.98429128447974, 38.18258577057844, 'hebei_shijiazhuang', 'hebei', 'china'],
      平山: [114.19073933171565, 38.26497086569089, 'hebei_shijiazhuang', 'hebei', 'china'],
      元氏: [114.53274734583061, 37.76825072808357, 'hebei_shijiazhuang', 'hebei', 'china'],
      赵: [114.7819589765711, 37.76000251318961, 'hebei_shijiazhuang', 'hebei', 'china'],
      辛集: [115.22389015913615, 37.935253973502064, 'hebei_shijiazhuang', 'hebei', 'china'],
      晋州: [115.051404606498, 38.033382857340186, 'hebei_shijiazhuang', 'hebei', 'china'],
      新乐: [114.69230052516673, 38.35069102771278, 'hebei_shijiazhuang', 'hebei', 'china'],
      路南: [118.21723424756337, 39.62146574859798, 'hebei_tangshan', 'hebei', 'china'],
      路北: [118.18122572707104, 39.6346313554745, 'hebei_tangshan', 'hebei', 'china'],
      古冶: [118.46069847826247, 39.72199503741189, 'hebei_tangshan', 'hebei', 'china'],
      开平区: [118.27102664337482, 39.68182092167202, 'hebei_tangshan', 'hebei', 'china'],
      丰南: [118.11728021128614, 39.56900935787764, 'hebei_tangshan', 'hebei', 'china'],
      丰润: [118.16235169753081, 39.83711999091331, 'hebei_tangshan', 'hebei', 'china'],
      曹妃甸: [118.45299132809872, 39.284617139841636, 'hebei_tangshan', 'hebei', 'china'],
      滦南: [118.68795247404181, 39.51256206178131, 'hebei_tangshan', 'hebei', 'china'],
      乐亭: [118.91174804092513, 39.43438409991532, 'hebei_tangshan', 'hebei', 'china'],
      迁西: [118.31154714261545, 40.152488720753226, 'hebei_tangshan', 'hebei', 'china'],
      玉田: [117.76019949268314, 39.89325957811367, 'hebei_tangshan', 'hebei', 'china'],
      遵化: [117.97224946522074, 40.19494966427698, 'hebei_tangshan', 'hebei', 'china'],
      迁安: [118.70839140286816, 40.01825654704759, 'hebei_tangshan', 'hebei', 'china'],
      滦州: [118.70600222475306, 39.75104144995057, 'hebei_tangshan', 'hebei', 'china'],
      海港: [119.60278868008359, 39.94921624034093, 'hebei_qinhuangdao', 'hebei', 'china'],
      山海关: [119.75999501907543, 40.0043680066365, 'hebei_qinhuangdao', 'hebei', 'china'],
      北戴河: [119.4927957563058, 39.83104728755074, 'hebei_qinhuangdao', 'hebei', 'china'],
      抚宁: [119.24721915941782, 39.89288877966087, 'hebei_qinhuangdao', 'hebei', 'china'],
      青龙满族: [118.96106510883378, 40.411932399354725, 'hebei_qinhuangdao', 'hebei', 'china'],
      昌黎: [119.17091550251067, 39.716073197094964, 'hebei_qinhuangdao', 'hebei', 'china'],
      卢龙: [118.88836680516116, 39.89749338533858, 'hebei_qinhuangdao', 'hebei', 'china'],
      邯山: [114.49138608825645, 36.60952881751591, 'hebei_handan', 'hebei', 'china'],
      丛台: [114.50113458133956, 36.617331966923715, 'hebei_handan', 'hebei', 'china'],
      复兴: [114.46470986010748, 36.621632043262544, 'hebei_handan', 'hebei', 'china'],
      峰峰矿: [114.21643588033368, 36.426485696849895, 'hebei_handan', 'hebei', 'china'],
      肥乡: [114.81166751580287, 36.5616870820701, 'hebei_handan', 'hebei', 'china'],
      永年: [114.5025924285528, 36.78264180717902, 'hebei_handan', 'hebei', 'china'],
      临漳: [114.61709308806955, 36.34388966715699, 'hebei_handan', 'hebei', 'china'],
      成安: [114.68689081604063, 36.44965981867548, 'hebei_handan', 'hebei', 'china'],
      大名: [115.1591866807061, 36.2890474873058, 'hebei_handan', 'hebei', 'china'],
      涉: [113.67979801645279, 36.569078688053246, 'hebei_handan', 'hebei', 'china'],
      磁: [114.38854349465903, 36.37381362556678, 'hebei_handan', 'hebei', 'china'],
      邱: [115.17507340542228, 36.81921840560349, 'hebei_handan', 'hebei', 'china'],
      鸡泽: [114.88505136661136, 36.920755048157375, 'hebei_handan', 'hebei', 'china'],
      广平: [114.95726542268608, 36.489910236182666, 'hebei_handan', 'hebei', 'china'],
      馆陶: [115.29556294825973, 36.5454441000649, 'hebei_handan', 'hebei', 'china'],
      魏: [114.94058105391963, 36.360319840469025, 'hebei_handan', 'hebei', 'china'],
      曲周: [114.96398501244397, 36.77974219068065, 'hebei_handan', 'hebei', 'china'],
      武安: [114.20114245955584, 36.70186169300268, 'hebei_handan', 'hebei', 'china'],
      襄都: [114.51360030240085, 37.07017186013083, 'hebei_xingtai', 'hebei', 'china'],
      信都: [114.4800706388781, 37.074330210480774, 'hebei_xingtai', 'hebei', 'china'],
      任泽: [114.69101036491996, 37.13585684170903, 'hebei_xingtai', 'hebei', 'china'],
      南和: [114.69788327266761, 37.00984138995584, 'hebei_xingtai', 'hebei', 'china'],
      临城: [114.51335865103012, 37.450066288779574, 'hebei_xingtai', 'hebei', 'china'],
      内丘: [114.51801303594056, 37.29362948809454, 'hebei_xingtai', 'hebei', 'china'],
      柏乡: [114.69987658446351, 37.4896613161023, 'hebei_xingtai', 'hebei', 'china'],
      隆尧: [114.78297700596363, 37.35659312843843, 'hebei_xingtai', 'hebei', 'china'],
      宁晋: [114.92757913215601, 37.62480025512425, 'hebei_xingtai', 'hebei', 'china'],
      巨鹿: [115.04535908050377, 37.22349366378491, 'hebei_xingtai', 'hebei', 'china'],
      新河: [115.25410780169489, 37.531935225541986, 'hebei_xingtai', 'hebei', 'china'],
      广宗: [115.14940263782385, 37.08120485313773, 'hebei_xingtai', 'hebei', 'china'],
      平乡: [115.03580647639122, 37.07509510122892, 'hebei_xingtai', 'hebei', 'china'],
      威: [115.27935400845008, 36.98900614636684, 'hebei_xingtai', 'hebei', 'china'],
      清河: [115.67538926040315, 37.06627672821832, 'hebei_xingtai', 'hebei', 'china'],
      临西: [115.50531251084008, 36.86986012895064, 'hebei_xingtai', 'hebei', 'china'],
      南宫: [115.40468403437914, 37.36547139822543, 'hebei_xingtai', 'hebei', 'china'],
      沙河: [114.51139018288339, 36.86799919578466, 'hebei_xingtai', 'hebei', 'china'],
      竞秀: [115.47716946367382, 38.89261021791646, 'hebei_baoding', 'hebei', 'china'],
      莲池: [115.50753705493821, 38.87065440230121, 'hebei_baoding', 'hebei', 'china'],
      满城: [115.33079562664166, 38.95771315743166, 'hebei_baoding', 'hebei', 'china'],
      清苑: [115.498838133542, 38.77669733814275, 'hebei_baoding', 'hebei', 'china'],
      徐水: [115.65593021971519, 39.02638988582138, 'hebei_baoding', 'hebei', 'china'],
      涞水: [115.71851593707522, 39.39911834381192, 'hebei_baoding', 'hebei', 'china'],
      阜平: [114.20534674583438, 38.85308004933466, 'hebei_baoding', 'hebei', 'china'],
      定兴: [115.8032973202706, 39.27254410529598, 'hebei_baoding', 'hebei', 'china'],
      唐: [114.98767883606779, 38.754691104409524, 'hebei_baoding', 'hebei', 'china'],
      高阳: [115.78533537201305, 38.6962508502811, 'hebei_baoding', 'hebei', 'china'],
      容城: [115.87286490473241, 39.058493175867554, 'hebei_baoding', 'hebei', 'china'],
      涞源: [114.6990487577881, 39.3635952770751, 'hebei_baoding', 'hebei', 'china'],
      望都: [115.1605880517482, 38.7131889579607, 'hebei_baoding', 'hebei', 'china'],
      安新: [115.93839399468303, 38.936196806065375, 'hebei_baoding', 'hebei', 'china'],
      易: [115.50775703377762, 39.35862179901647, 'hebei_baoding', 'hebei', 'china'],
      曲阳: [114.71046080767947, 38.62621746313904, 'hebei_baoding', 'hebei', 'china'],
      蠡: [115.59007528618693, 38.50253653794516, 'hebei_baoding', 'hebei', 'china'],
      顺平: [115.13933889950013, 38.85080001065639, 'hebei_baoding', 'hebei', 'china'],
      博野: [115.46825167606114, 38.46441579799227, 'hebei_baoding', 'hebei', 'china'],
      雄: [116.11407336171159, 38.99649406657476, 'hebei_baoding', 'hebei', 'china'],
      涿州: [115.98002610116153, 39.491439509260346, 'hebei_baoding', 'hebei', 'china'],
      定州: [114.99789502157958, 38.523576137441594, 'hebei_baoding', 'hebei', 'china'],
      安国: [115.33783176990495, 38.42765874956209, 'hebei_baoding', 'hebei', 'china'],
      高碑店: [115.88922918267876, 39.333553018551704, 'hebei_baoding', 'hebei', 'china'],
      桥东: [114.89226002849942, 40.81962748775099, 'hebei_zhangjiakou', 'hebei', 'china'],
      张家口桥西区: [114.88871768184629, 40.83018698183877, 'hebei_zhangjiakou', 'hebei', 'china'],
      宣化: [115.06963230880433, 40.61559154904065, 'hebei_zhangjiakou', 'hebei', 'china'],
      下花园: [115.28756770267464, 40.494491734982496, 'hebei_zhangjiakou', 'hebei', 'china'],
      万全: [114.74253155550865, 40.77135808050105, 'hebei_zhangjiakou', 'hebei', 'china'],
      崇礼: [115.2882123200993, 40.97715854475642, 'hebei_zhangjiakou', 'hebei', 'china'],
      张北: [114.7223223938904, 41.158046603341155, 'hebei_zhangjiakou', 'hebei', 'china'],
      康保: [114.62220527468354, 41.85627176301144, 'hebei_zhangjiakou', 'hebei', 'china'],
      沽源: [115.69123362831982, 41.67376170336332, 'hebei_zhangjiakou', 'hebei', 'china'],
      尚义: [113.98418082049743, 41.086231223708126, 'hebei_zhangjiakou', 'hebei', 'china'],
      蔚: [114.58911850331522, 39.84339206804076, 'hebei_zhangjiakou', 'hebei', 'china'],
      阳原: [114.17395643421101, 40.119155521759616, 'hebei_zhangjiakou', 'hebei', 'china'],
      怀安: [114.42897676614916, 40.6769304039399, 'hebei_zhangjiakou', 'hebei', 'china'],
      怀来: [115.52738356522528, 40.41123876616884, 'hebei_zhangjiakou', 'hebei', 'china'],
      涿鹿: [115.2256826211647, 40.38488595876187, 'hebei_zhangjiakou', 'hebei', 'china'],
      赤城: [115.83921774733243, 40.918029209712124, 'hebei_zhangjiakou', 'hebei', 'china'],
      双桥: [117.94559905185264, 40.98236842960598, 'hebei_chengde', 'hebei', 'china'],
      双滦: [117.80407635960414, 40.96554637801229, 'hebei_chengde', 'hebei', 'china'],
      鹰手营子矿: [117.66776348486381, 40.552599548188184, 'hebei_chengde', 'hebei', 'china'],
      承德县: [118.17896120291772, 40.77467669412527, 'hebei_chengde', 'hebei', 'china'],
      兴隆: [117.51356258675136, 40.4245724913247, 'hebei_chengde', 'hebei', 'china'],
      滦平: [117.34359369671097, 40.942777322329455, 'hebei_chengde', 'hebei', 'china'],
      隆化: [117.74277946208295, 41.322904814160296, 'hebei_chengde', 'hebei', 'china'],
      丰宁满族: [116.65761657338156, 41.2161977425589, 'hebei_chengde', 'hebei', 'china'],
      宽城满族: [118.49525404415337, 40.613690378724044, 'hebei_chengde', 'hebei', 'china'],
      围场满族蒙古族: [117.77066172239742, 41.955163248847285, 'hebei_chengde', 'hebei', 'china'],
      平泉: [118.69661383222473, 41.01190976450176, 'hebei_chengde', 'hebei', 'china'],
      沧州新华区: [116.87946053011754, 38.314606856330016, 'hebei_cangzhou', 'hebei', 'china'],
      运河: [116.84663896186203, 38.31323691553751, 'hebei_cangzhou', 'hebei', 'china'],
      沧: [117.01387216078265, 38.22618050366582, 'hebei_cangzhou', 'hebei', 'china'],
      青: [116.84495991527457, 38.57544894988107, 'hebei_cangzhou', 'hebei', 'china'],
      东光: [116.54849739697715, 37.8926850855302, 'hebei_cangzhou', 'hebei', 'china'],
      海兴: [117.50301654010757, 38.14780435857418, 'hebei_cangzhou', 'hebei', 'china'],
      盐山: [117.2362299177227, 38.06244846445415, 'hebei_cangzhou', 'hebei', 'china'],
      肃宁: [115.84240956077353, 38.43300333414858, 'hebei_cangzhou', 'hebei', 'china'],
      南皮: [116.71577464157427, 38.04812925901891, 'hebei_cangzhou', 'hebei', 'china'],
      吴桥: [116.39790217553902, 37.63449469819771, 'hebei_cangzhou', 'hebei', 'china'],
      献: [116.13039928851802, 38.19555689172591, 'hebei_cangzhou', 'hebei', 'china'],
      孟村回族: [117.11153818874178, 38.064207758405296, 'hebei_cangzhou', 'hebei', 'china'],
      泊头: [116.57678109830238, 38.079180767140166, 'hebei_cangzhou', 'hebei', 'china'],
      任丘: [116.11336656675506, 38.71218418177767, 'hebei_cangzhou', 'hebei', 'china'],
      黄骅: [117.35020786968813, 38.37546463302839, 'hebei_cangzhou', 'hebei', 'china'],
      河间: [116.09606583075018, 38.447198693711435, 'hebei_cangzhou', 'hebei', 'china'],
      安次: [116.70117523237083, 39.50823903800559, 'hebei_langfang', 'hebei', 'china'],
      广阳: [116.72031267956709, 39.527672445887355, 'hebei_langfang', 'hebei', 'china'],
      固安: [116.30631989542616, 39.44263924731907, 'hebei_langfang', 'hebei', 'china'],
      永清: [116.5045242511983, 39.32585514737475, 'hebei_langfang', 'hebei', 'china'],
      香河: [117.01356761664253, 39.763544615690336, 'hebei_langfang', 'hebei', 'china'],
      大城: [116.64711976780153, 38.70556492173301, 'hebei_langfang', 'hebei', 'china'],
      文安: [116.46671150598922, 38.872447589484935, 'hebei_langfang', 'hebei', 'china'],
      大厂回族: [116.99292008734491, 39.89553632318585, 'hebei_langfang', 'hebei', 'china'],
      霸州: [116.39841110004069, 39.12364925648948, 'hebei_langfang', 'hebei', 'china'],
      三河: [117.08361098746171, 39.98856322732825, 'hebei_langfang', 'hebei', 'china'],
      桃城: [115.70137224506195, 37.738485583557235, 'hebei_hengshui', 'hebei', 'china'],
      冀州: [115.58559760158722, 37.54896936032955, 'hebei_hengshui', 'hebei', 'china'],
      枣强: [115.73307378177867, 37.51724451824675, 'hebei_hengshui', 'hebei', 'china'],
      武邑: [115.89890443031231, 37.80981906399806, 'hebei_hengshui', 'hebei', 'china'],
      武强: [115.97683252750821, 38.04267559238688, 'hebei_hengshui', 'hebei', 'china'],
      饶阳: [115.73315282124223, 38.238402231809495, 'hebei_hengshui', 'hebei', 'china'],
      安平: [115.52617393964879, 38.23932780832786, 'hebei_hengshui', 'hebei', 'china'],
      故城: [115.97335215125392, 37.356719677984486, 'hebei_hengshui', 'hebei', 'china'],
      景: [116.26490408034238, 37.69277335668053, 'hebei_hengshui', 'hebei', 'china'],
      阜城: [116.17110739167764, 37.87627979021852, 'hebei_hengshui', 'hebei', 'china'],
      深州: [115.56096862356218, 38.00979699189656, 'hebei_hengshui', 'hebei', 'china'],
      太原: [112.55565490751108, 37.86330053190941, null, 'shanxi', 'china'],
      大同: [113.3016848073994, 40.096550483492734, null, 'shanxi', 'china'],
      阳泉: [113.58989572757082, 37.866851884901855, null, 'shanxi', 'china'],
      长治: [113.12012788422369, 36.196851261191405, null, 'shanxi', 'china'],
      晋城: [112.85785196320734, 35.50324363438001, null, 'shanxi', 'china'],
      朔州: [112.43975717162645, 39.33757169159488, null, 'shanxi', 'china'],
      晋中: [112.7430905772966, 37.70216738896372, null, 'shanxi', 'china'],
      运城: [111.01033921710003, 35.02909916925206, null, 'shanxi', 'china'],
      忻州: [112.7401618510356, 38.42337613091284, null, 'shanxi', 'china'],
      临汾: [111.52449874733352, 36.09000848636502, null, 'shanxi', 'china'],
      吕梁: [111.14073454522041, 37.53060369386276, null, 'shanxi', 'china'],
      小店: [112.57067769598888, 37.82430842392667, 'shanxi_taiyuan', 'shanxi', 'china'],
      迎泽: [112.56524176892488, 37.86214245494912, 'shanxi_taiyuan', 'shanxi', 'china'],
      杏花岭: [112.56711339479266, 37.88562302436148, 'shanxi_taiyuan', 'shanxi', 'china'],
      尖草坪: [112.4937272687328, 37.94563490943629, 'shanxi_taiyuan', 'shanxi', 'china'],
      万柏林: [112.52880016968813, 37.86851899425834, 'shanxi_taiyuan', 'shanxi', 'china'],
      晋源: [112.4844123497862, 37.72149028007087, 'shanxi_taiyuan', 'shanxi', 'china'],
      清徐: [112.36451838853357, 37.61315744839429, 'shanxi_taiyuan', 'shanxi', 'china'],
      阳曲: [112.68022553323301, 38.065122797796334, 'shanxi_taiyuan', 'shanxi', 'china'],
      娄烦: [111.80040219493132, 38.07178971144998, 'shanxi_taiyuan', 'shanxi', 'china'],
      古交: [112.18081659915447, 37.914606421391724, 'shanxi_taiyuan', 'shanxi', 'china'],
      新荣: [113.14747969348093, 40.264455125158435, 'shanxi_datong', 'shanxi', 'china'],
      平城: [113.30445222855032, 40.081864895580864, 'shanxi_datong', 'shanxi', 'china'],
      云冈: [113.15610308809921, 40.01170081842469, 'shanxi_datong', 'shanxi', 'china'],
      云州: [113.61890821589235, 40.04633261847403, 'shanxi_datong', 'shanxi', 'china'],
      阳高: [113.7562799185241, 40.371226119024264, 'shanxi_datong', 'shanxi', 'china'],
      天镇: [114.09759726541417, 40.427350523761575, 'shanxi_datong', 'shanxi', 'china'],
      广灵: [114.28582220158701, 39.76889643466979, 'shanxi_datong', 'shanxi', 'china'],
      灵丘: [114.24212880366564, 39.445195847295054, 'shanxi_datong', 'shanxi', 'china'],
      浑源: [113.70469272290781, 39.704753749387066, 'shanxi_datong', 'shanxi', 'china'],
      左云: [112.71289443989862, 40.01893862277367, 'shanxi_datong', 'shanxi', 'china'],
      阳泉城区: [113.59311911010114, 37.86661655276329, 'shanxi_yangquan', 'shanxi', 'china'],
      矿: [113.56560836791758, 37.87592609985401, 'shanxi_yangquan', 'shanxi', 'china'],
      阳泉郊区: [113.5932638964104, 37.94664526750747, 'shanxi_yangquan', 'shanxi', 'china'],
      郊区: [113.5932638964104, 37.94664526750747, 'shanxi_yangquan', 'shanxi', 'china'],
      平定: [113.63744811409185, 37.806593229442704, 'shanxi_yangquan', 'shanxi', 'china'],
      盂: [113.41865096756003, 38.09240805671766, 'shanxi_yangquan', 'shanxi', 'china'],
      潞州: [113.12067961792498, 36.19364164738851, 'shanxi_changzhi', 'shanxi', 'china'],
      上党: [113.06311688010746, 36.058658189972135, 'shanxi_changzhi', 'shanxi', 'china'],
      屯留: [112.89921262542953, 36.3201163246993, 'shanxi_changzhi', 'shanxi', 'china'],
      潞城: [113.22983351301765, 36.33789115206594, 'shanxi_changzhi', 'shanxi', 'china'],
      襄垣: [113.05650631103673, 36.53914912229464, 'shanxi_changzhi', 'shanxi', 'china'],
      平顺: [113.44532264114757, 36.20604552957196, 'shanxi_changzhi', 'shanxi', 'china'],
      黎城: [113.39379735320693, 36.5092451275486, 'shanxi_changzhi', 'shanxi', 'china'],
      壶关: [113.21271032289214, 36.11668120198314, 'shanxi_changzhi', 'shanxi', 'china'],
      长子: [112.89118541119778, 36.12539030779317, 'shanxi_changzhi', 'shanxi', 'china'],
      武乡: [112.87190069843687, 36.839987538306865, 'shanxi_changzhi', 'shanxi', 'china'],
      沁: [112.7078496095033, 36.76327624727257, 'shanxi_changzhi', 'shanxi', 'china'],
      沁源: [112.34734451062971, 36.506937393655654, 'shanxi_changzhi', 'shanxi', 'china'],
      晋城城区: [112.859687690042, 35.50231861728526, 'shanxi_jincheng', 'shanxi', 'china'],
      沁水: [112.19363902765504, 35.695739078803605, 'shanxi_jincheng', 'shanxi', 'china'],
      阳城: [112.42843387420395, 35.48836991818017, 'shanxi_jincheng', 'shanxi', 'china'],
      陵川: [113.2852837702084, 35.78195764289235, 'shanxi_jincheng', 'shanxi', 'china'],
      泽州: [112.90557008236512, 35.6233713338501, 'shanxi_jincheng', 'shanxi', 'china'],
      高平: [112.93711903123152, 35.797648110195894, 'shanxi_jincheng', 'shanxi', 'china'],
      朔城: [112.4350600548429, 39.33079838100624, 'shanxi_shuozhou', 'shanxi', 'china'],
      平鲁: [112.3017130189591, 39.52170040892776, 'shanxi_shuozhou', 'shanxi', 'china'],
      山阴: [112.82283055236705, 39.53299542668496, 'shanxi_shuozhou', 'shanxi', 'china'],
      应: [113.19397360614028, 39.56522566472505, 'shanxi_shuozhou', 'shanxi', 'china'],
      右玉: [112.47207933992051, 39.99489593867521, 'shanxi_shuozhou', 'shanxi', 'china'],
      怀仁: [113.10711448511866, 39.8264442096945, 'shanxi_shuozhou', 'shanxi', 'china'],
      榆次: [112.74668420017981, 37.703266832947286, 'shanxi_jinzhong', 'shanxi', 'china'],
      太谷: [112.56048233400426, 37.43091213806614, 'shanxi_jinzhong', 'shanxi', 'china'],
      榆社: [112.98011553466266, 37.07469600430413, 'shanxi_jinzhong', 'shanxi', 'china'],
      左权: [113.38428931347268, 37.08580753195678, 'shanxi_jinzhong', 'shanxi', 'china'],
      和顺: [113.5795302058671, 37.33271167831673, 'shanxi_jinzhong', 'shanxi', 'china'],
      昔阳: [113.71278684659198, 37.61005108979128, 'shanxi_jinzhong', 'shanxi', 'china'],
      寿阳: [113.18412085427762, 37.897333410517135, 'shanxi_jinzhong', 'shanxi', 'china'],
      祁: [112.33695356282122, 37.36503169946613, 'shanxi_jinzhong', 'shanxi', 'china'],
      平遥: [112.1805310060476, 37.20154350556342, 'shanxi_jinzhong', 'shanxi', 'china'],
      灵石: [111.77936893207486, 36.85315988141308, 'shanxi_jinzhong', 'shanxi', 'china'],
      介休: [111.92043273188848, 37.03336238086818, 'shanxi_jinzhong', 'shanxi', 'china'],
      盐湖: [111.00700895417674, 35.031971712273965, 'shanxi_yuncheng', 'shanxi', 'china'],
      临猗: [110.78133968860168, 35.14811393435564, 'shanxi_yuncheng', 'shanxi', 'china'],
      万荣: [110.85011097907714, 35.4229367397278, 'shanxi_yuncheng', 'shanxi', 'china'],
      闻喜: [111.22673887041992, 35.360006422497555, 'shanxi_yuncheng', 'shanxi', 'china'],
      稷山: [110.98543083884066, 35.60655773271452, 'shanxi_yuncheng', 'shanxi', 'china'],
      新绛: [111.23160995350547, 35.619929478092736, 'shanxi_yuncheng', 'shanxi', 'china'],
      绛: [111.58262908129446, 35.49655040497544, 'shanxi_yuncheng', 'shanxi', 'china'],
      垣曲: [111.67759443886528, 35.304016869230125, 'shanxi_yuncheng', 'shanxi', 'china'],
      夏: [111.22959062114955, 35.14664819147924, 'shanxi_yuncheng', 'shanxi', 'china'],
      平陆: [111.21888175068122, 34.843302969336115, 'shanxi_yuncheng', 'shanxi', 'china'],
      芮城: [110.69774641386402, 34.70047620142989, 'shanxi_yuncheng', 'shanxi', 'china'],
      永济: [110.4545635108181, 34.87085550404911, 'shanxi_yuncheng', 'shanxi', 'china'],
      河津: [110.71684483488765, 35.60285993691593, 'shanxi_yuncheng', 'shanxi', 'china'],
      忻府: [112.74073698318863, 38.42342591066738, 'shanxi_xinzhou', 'shanxi', 'china'],
      定襄: [112.96978646473826, 38.490725334687816, 'shanxi_xinzhou', 'shanxi', 'china'],
      五台: [113.26544074243233, 38.73185913745548, 'shanxi_xinzhou', 'shanxi', 'china'],
      代: [112.96908541240083, 39.07092969356776, 'shanxi_xinzhou', 'shanxi', 'china'],
      繁峙: [113.27410517791446, 39.194373117695925, 'shanxi_xinzhou', 'shanxi', 'china'],
      宁武: [112.31434326874725, 39.00799050118087, 'shanxi_xinzhou', 'shanxi', 'china'],
      静乐: [111.94665823969434, 38.36211360978403, 'shanxi_xinzhou', 'shanxi', 'china'],
      神池: [112.20680193907667, 39.094796953998134, 'shanxi_xinzhou', 'shanxi', 'china'],
      五寨: [111.84741711830345, 38.91910255280618, 'shanxi_xinzhou', 'shanxi', 'china'],
      岢岚: [111.57630567017563, 38.71161976733076, 'shanxi_xinzhou', 'shanxi', 'china'],
      河曲: [111.15310531234813, 39.38795997958242, 'shanxi_xinzhou', 'shanxi', 'china'],
      保德: [111.0922316689143, 39.02850753020647, 'shanxi_xinzhou', 'shanxi', 'china'],
      偏关: [111.50690312832752, 39.44830684948284, 'shanxi_xinzhou', 'shanxi', 'china'],
      原平: [112.71963207102658, 38.73512430311447, 'shanxi_xinzhou', 'shanxi', 'china'],
      尧都: [111.52949621675687, 36.08615080913704, 'shanxi_linfen', 'shanxi', 'china'],
      曲沃: [111.4819263741637, 35.64771274630173, 'shanxi_linfen', 'shanxi', 'china'],
      翼城: [111.71988977745863, 35.7449314803491, 'shanxi_linfen', 'shanxi', 'china'],
      襄汾: [111.44946710548321, 35.882016846087495, 'shanxi_linfen', 'shanxi', 'china'],
      洪洞: [111.6802879559884, 36.26149398128531, 'shanxi_linfen', 'shanxi', 'china'],
      古: [111.92677934939961, 36.27439142868978, 'shanxi_linfen', 'shanxi', 'china'],
      安泽: [112.25798818709401, 36.15173502737288, 'shanxi_linfen', 'shanxi', 'china'],
      浮山: [111.85642666225473, 35.97764314387152, 'shanxi_linfen', 'shanxi', 'china'],
      吉: [110.68940372571485, 36.105142555134535, 'shanxi_linfen', 'shanxi', 'china'],
      乡宁: [110.86380613676144, 35.98152116654985, 'shanxi_linfen', 'shanxi', 'china'],
      大宁: [110.75767057591626, 36.470123557596644, 'shanxi_linfen', 'shanxi', 'china'],
      隰: [110.94239763544589, 36.69834395440029, 'shanxi_linfen', 'shanxi', 'china'],
      永和: [110.63769314783755, 36.76691722344156, 'shanxi_linfen', 'shanxi', 'china'],
      蒲: [111.10379711560364, 36.41780942728515, 'shanxi_linfen', 'shanxi', 'china'],
      汾西: [111.56956675946705, 36.65925052616387, 'shanxi_linfen', 'shanxi', 'china'],
      侯马: [111.37766687190809, 35.62657436380412, 'shanxi_linfen', 'shanxi', 'china'],
      霍州: [111.72947582707164, 36.57834456777407, 'shanxi_linfen', 'shanxi', 'china'],
      离石: [111.14086215590358, 37.53027320961346, 'shanxi_lvliang', 'shanxi', 'china'],
      文水: [112.03918012088519, 37.44204716083715, 'shanxi_lvliang', 'shanxi', 'china'],
      交城: [112.16570983829108, 37.56097242879958, 'shanxi_lvliang', 'shanxi', 'china'],
      兴: [111.13120019542865, 38.47045742548288, 'shanxi_lvliang', 'shanxi', 'china'],
      临: [111.00236762655122, 37.96713703983986, 'shanxi_lvliang', 'shanxi', 'china'],
      柳林: [110.90254741866893, 37.437882219945855, 'shanxi_lvliang', 'shanxi', 'china'],
      石楼: [110.84370502138185, 37.00522393490383, 'shanxi_lvliang', 'shanxi', 'china'],
      岚: [111.67814811902272, 38.28437799641762, 'shanxi_lvliang', 'shanxi', 'china'],
      方山: [111.24525276304163, 37.89895876006601, 'shanxi_lvliang', 'shanxi', 'china'],
      中阳: [111.19992221279298, 37.347804125873004, 'shanxi_lvliang', 'shanxi', 'china'],
      交口: [111.18981514788399, 36.98874498765293, 'shanxi_lvliang', 'shanxi', 'china'],
      孝义: [111.78817465201135, 37.15013832074448, 'shanxi_lvliang', 'shanxi', 'china'],
      汾阳: [111.79187308619376, 37.27341685023877, 'shanxi_lvliang', 'shanxi', 'china'],
      呼和浩特: [111.67741976306763, 40.824033768690825, null, 'neimenggu', 'china'],
      包头: [109.84695114629265, 40.663990907907966, null, 'neimenggu', 'china'],
      乌海: [106.83202324682634, 39.67980319881154, null, 'neimenggu', 'china'],
      赤峰: [118.96336836495846, 42.281198939346886, null, 'neimenggu', 'china'],
      通辽: [122.26953854792487, 43.62366250141024, null, 'neimenggu', 'china'],
      鄂尔多斯: [109.99687503621294, 39.82288944230667, null, 'neimenggu', 'china'],
      呼伦贝尔: [119.76453433891442, 49.22169609116629, null, 'neimenggu', 'china'],
      巴彦淖尔: [107.4233670711305, 40.76359972948836, null, 'neimenggu', 'china'],
      乌兰察布: [113.12112641226884, 41.03987831046078, null, 'neimenggu', 'china'],
      兴安盟: [122.07681566107807, 46.08226055060654, null, 'neimenggu', 'china'],
      锡林郭勒: [116.09763124501805, 43.94971445530127, null, 'neimenggu', 'china'],
      阿拉善: [105.71281561134514, 38.851047650315536, null, 'neimenggu', 'china'],
      呼和浩特新城区: [111.69250810910846, 40.8321614526403, 'neimenggu_huhehaote', 'neimenggu', 'china'],
      回民: [111.66879704709113, 40.8208210502098, 'neimenggu_huhehaote', 'neimenggu', 'china'],
      玉泉: [111.67204691461883, 40.805099244148835, 'neimenggu_huhehaote', 'neimenggu', 'china'],
      赛罕: [111.70491800074566, 40.81398041286556, 'neimenggu_huhehaote', 'neimenggu', 'china'],
      土默特左旗: [111.14003864175108, 40.7266740942182, 'neimenggu_huhehaote', 'neimenggu', 'china'],
      托克托: [111.20387702727808, 40.282518163548474, 'neimenggu_huhehaote', 'neimenggu', 'china'],
      和林格尔: [111.83056098529288, 40.386514232662016, 'neimenggu_huhehaote', 'neimenggu', 'china'],
      清水河: [111.6788046036489, 39.9182061601789, 'neimenggu_huhehaote', 'neimenggu', 'china'],
      武川: [111.46302680958216, 41.100597624869685, 'neimenggu_huhehaote', 'neimenggu', 'china'],
      东河: [110.03331933776644, 40.59331821452718, 'neimenggu_baotou', 'neimenggu', 'china'],
      昆都仑: [109.8293723367503, 40.667458410830186, 'neimenggu_baotou', 'neimenggu', 'china'],
      包头青山区: [109.88659915462453, 40.674389998148136, 'neimenggu_baotou', 'neimenggu', 'china'],
      石拐: [110.27894456529197, 40.678397280757785, 'neimenggu_baotou', 'neimenggu', 'china'],
      白云鄂博矿: [109.9767777424004, 41.77496222235504, 'neimenggu_baotou', 'neimenggu', 'china'],
      九原: [109.97473695027043, 40.60631875925045, 'neimenggu_baotou', 'neimenggu', 'china'],
      土默特右旗: [110.53315806378077, 40.572747267211525, 'neimenggu_baotou', 'neimenggu', 'china'],
      固阳: [110.06987006534081, 41.036112014555606, 'neimenggu_baotou', 'neimenggu', 'china'],
      达尔罕茂明安联合旗: [110.44500280835065, 41.70869307181434, 'neimenggu_baotou', 'neimenggu', 'china'],
      海勃湾: [106.82417865042926, 39.67971404377807, 'neimenggu_wuhai', 'neimenggu', 'china'],
      海南区: [106.8913039373172, 39.44743733774279, 'neimenggu_wuhai', 'neimenggu', 'china'],
      乌达: [106.72930142439809, 39.508096683767256, 'neimenggu_wuhai', 'neimenggu', 'china'],
      红山: [118.96767539262694, 42.27554296165823, 'neimenggu_chifeng', 'neimenggu', 'china'],
      元宝山: [119.2962830982708, 42.0474846133305, 'neimenggu_chifeng', 'neimenggu', 'china'],
      松山: [118.94540446205215, 42.287246603508414, 'neimenggu_chifeng', 'neimenggu', 'china'],
      阿鲁科尔沁旗: [120.10141950602798, 43.88485697266671, 'neimenggu_chifeng', 'neimenggu', 'china'],
      巴林左旗: [119.39811651241165, 43.98703991327813, 'neimenggu_chifeng', 'neimenggu', 'china'],
      巴林右旗: [118.68469815225488, 43.53531082524213, 'neimenggu_chifeng', 'neimenggu', 'china'],
      林西: [118.06421139891437, 43.611470623218935, 'neimenggu_chifeng', 'neimenggu', 'china'],
      克什克腾旗: [117.54909736693448, 43.26188465897267, 'neimenggu_chifeng', 'neimenggu', 'china'],
      翁牛特旗: [119.02902243109408, 42.9433408102047, 'neimenggu_chifeng', 'neimenggu', 'china'],
      喀喇沁旗: [118.71507386354801, 41.93381057964368, 'neimenggu_chifeng', 'neimenggu', 'china'],
      宁城: [119.3458510264281, 41.604328801617136, 'neimenggu_chifeng', 'neimenggu', 'china'],
      敖汉旗: [119.9129746506093, 42.29308199585158, 'neimenggu_chifeng', 'neimenggu', 'china'],
      科尔沁: [122.27045676388119, 43.623668934896614, 'neimenggu_tongliao', 'neimenggu', 'china'],
      科尔沁左翼中旗: [123.32045334145758, 44.132882775318805, 'neimenggu_tongliao', 'neimenggu', 'china'],
      科尔沁左翼后旗: [122.36174007866614, 42.960304700118485, 'neimenggu_tongliao', 'neimenggu', 'china'],
      开鲁: [121.3152030313373, 43.60874047186702, 'neimenggu_tongliao', 'neimenggu', 'china'],
      库伦旗: [121.78136668545704, 42.740789051715915, 'neimenggu_tongliao', 'neimenggu', 'china'],
      奈曼旗: [120.6691770180151, 42.85249356553238, 'neimenggu_tongliao', 'neimenggu', 'china'],
      扎鲁特旗: [120.91192164928397, 44.56095168283055, 'neimenggu_tongliao', 'neimenggu', 'china'],
      霍林郭勒: [119.66428819241634, 45.5385768620288, 'neimenggu_tongliao', 'neimenggu', 'china'],
      东胜: [109.99603789884777, 39.823583370213285, 'neimenggu_eerduosi', 'neimenggu', 'china'],
      康巴什: [109.79648003481056, 39.613760483990326, 'neimenggu_eerduosi', 'neimenggu', 'china'],
      达拉特旗: [110.04664192191953, 40.41039952033478, 'neimenggu_eerduosi', 'neimenggu', 'china'],
      准格尔旗: [111.24473110075492, 39.87155998013632, 'neimenggu_eerduosi', 'neimenggu', 'china'],
      鄂托克前旗: [107.4882858042923, 38.18912782745676, 'neimenggu_eerduosi', 'neimenggu', 'china'],
      鄂托克旗: [107.98901413530739, 39.10194410121682, 'neimenggu_eerduosi', 'neimenggu', 'china'],
      杭锦旗: [108.74273773225624, 39.83800026526582, 'neimenggu_eerduosi', 'neimenggu', 'china'],
      乌审旗: [108.8488247597332, 38.602929727407265, 'neimenggu_eerduosi', 'neimenggu', 'china'],
      伊金霍洛旗: [109.79381232303699, 39.61057378747552, 'neimenggu_eerduosi', 'neimenggu', 'china'],
      海拉尔: [119.77129253384659, 49.22024147761418, 'neimenggu_hulunbeier', 'neimenggu', 'china'],
      扎赉诺尔: [117.72274136012975, 49.46291970807333, 'neimenggu_hulunbeier', 'neimenggu', 'china'],
      阿荣旗: [123.471024717139, 48.13676337182315, 'neimenggu_hulunbeier', 'neimenggu', 'china'],
      莫力达瓦达斡尔族自治旗: [124.51403407668282, 48.48403856106407, 'neimenggu_hulunbeier', 'neimenggu', 'china'],
      鄂伦春自治旗: [123.7320294966433, 50.59652801420643, 'neimenggu_hulunbeier', 'neimenggu', 'china'],
      鄂温克族自治旗: [119.76039751343728, 49.149633613194574, 'neimenggu_hulunbeier', 'neimenggu', 'china'],
      陈巴尔虎旗: [119.44417430076734, 49.33428625118695, 'neimenggu_hulunbeier', 'neimenggu', 'china'],
      新巴尔虎左旗: [118.2740703367537, 48.222235771180735, 'neimenggu_hulunbeier', 'neimenggu', 'china'],
      新巴尔虎右旗: [116.83262138527745, 48.67479708472761, 'neimenggu_hulunbeier', 'neimenggu', 'china'],
      满洲里: [117.46203670035312, 49.59689692867445, 'neimenggu_hulunbeier', 'neimenggu', 'china'],
      牙克石: [120.73535497989405, 49.29333920009023, 'neimenggu_hulunbeier', 'neimenggu', 'china'],
      扎兰屯: [122.75080945276503, 48.01366684367927, 'neimenggu_hulunbeier', 'neimenggu', 'china'],
      额尔古纳: [120.18526882781498, 50.24953305870122, 'neimenggu_hulunbeier', 'neimenggu', 'china'],
      根河: [121.53921854175238, 50.78651259319036, 'neimenggu_hulunbeier', 'neimenggu', 'china'],
      临河: [107.42342655304833, 40.763289027673686, 'neimenggu_bayannaoer', 'neimenggu', 'china'],
      五原: [108.27716455255232, 41.103628686764914, 'neimenggu_bayannaoer', 'neimenggu', 'china'],
      磴口: [107.01259056935805, 40.33641685638189, 'neimenggu_bayannaoer', 'neimenggu', 'china'],
      乌拉特前旗: [108.66344957808087, 40.730892457563485, 'neimenggu_bayannaoer', 'neimenggu', 'china'],
      乌拉特中旗: [108.52179599575614, 41.578454275961334, 'neimenggu_bayannaoer', 'neimenggu', 'china'],
      乌拉特后旗: [107.08148620608121, 41.090230066465956, 'neimenggu_bayannaoer', 'neimenggu', 'china'],
      杭锦后旗: [107.15406532615205, 40.89504675434247, 'neimenggu_bayannaoer', 'neimenggu', 'china'],
      集宁: [113.1230274942519, 41.03991091372265, 'neimenggu_wulanchabu', 'neimenggu', 'china'],
      卓资: [112.5841103965241, 40.90195623294443, 'neimenggu_wulanchabu', 'neimenggu', 'china'],
      化德: [114.01648732693222, 41.905636338845426, 'neimenggu_wulanchabu', 'neimenggu', 'china'],
      商都: [113.56722512408236, 41.56598874739, 'neimenggu_wulanchabu', 'neimenggu', 'china'],
      兴和: [113.84058867382032, 40.87817922545966, 'neimenggu_wulanchabu', 'neimenggu', 'china'],
      凉城: [112.50751370820784, 40.53728312658154, 'neimenggu_wulanchabu', 'neimenggu', 'china'],
      察哈尔右翼前旗: [113.21855772277897, 40.792544726768675, 'neimenggu_wulanchabu', 'neimenggu', 'china'],
      察哈尔右翼中旗: [112.64015128502461, 41.27995372974303, 'neimenggu_wulanchabu', 'neimenggu', 'china'],
      察哈尔右翼后旗: [113.19711556110548, 41.45320660175604, 'neimenggu_wulanchabu', 'neimenggu', 'china'],
      四子王旗: [111.7076686199415, 41.53430275436077, 'neimenggu_wulanchabu', 'neimenggu', 'china'],
      丰镇: [113.16984024950001, 40.443867061292174, 'neimenggu_wulanchabu', 'neimenggu', 'china'],
      乌兰浩特: [122.07546488821467, 46.08325662667775, 'neimenggu_xinganmeng', 'neimenggu', 'china'],
      阿尔山: [119.95030940952317, 47.182652430772215, 'neimenggu_xinganmeng', 'neimenggu', 'china'],
      科尔沁右翼前旗: [121.9640937797218, 46.08235491904645, 'neimenggu_xinganmeng', 'neimenggu', 'china'],
      科尔沁右翼中旗: [121.47933822186663, 45.06559155425213, 'neimenggu_xinganmeng', 'neimenggu', 'china'],
      扎赉特旗: [122.9158402228098, 46.73115388368939, 'neimenggu_xinganmeng', 'neimenggu', 'china'],
      突泉: [121.57124092207042, 45.38734519938688, 'neimenggu_xinganmeng', 'neimenggu', 'china'],
      二连浩特: [111.98622497499092, 43.65905867479775, 'neimenggu_xilinguolemeng', 'neimenggu', 'china'],
      锡林浩特: [116.0985410392242, 43.94999032511909, 'neimenggu_xilinguolemeng', 'neimenggu', 'china'],
      阿巴嘎旗: [114.97699114033765, 44.029015345017505, 'neimenggu_xilinguolemeng', 'neimenggu', 'china'],
      苏尼特左旗: [113.65981723182351, 43.860370471782424, 'neimenggu_xilinguolemeng', 'neimenggu', 'china'],
      苏尼特右旗: [112.66187270087923, 42.75276310676206, 'neimenggu_xilinguolemeng', 'neimenggu', 'china'],
      东乌珠穆沁旗: [116.98647223497483, 45.51649007041956, 'neimenggu_xilinguolemeng', 'neimenggu', 'china'],
      西乌珠穆沁旗: [117.62164974358971, 44.59239098299398, 'neimenggu_xilinguolemeng', 'neimenggu', 'china'],
      太仆寺旗: [115.29381126903692, 41.90115478926808, 'neimenggu_xilinguolemeng', 'neimenggu', 'china'],
      镶黄旗: [113.85040822683474, 42.24512095461278, 'neimenggu_xilinguolemeng', 'neimenggu', 'china'],
      正镶白旗: [115.03803979780088, 42.29252620957315, 'neimenggu_xilinguolemeng', 'neimenggu', 'china'],
      正蓝旗: [116.00986019492206, 42.25177767022508, 'neimenggu_xilinguolemeng', 'neimenggu', 'china'],
      多伦: [116.4838509846094, 42.20374071179678, 'neimenggu_xilinguolemeng', 'neimenggu', 'china'],
      阿拉善左旗: [105.70833331707361, 38.85341948641554, 'neimenggu_alashanmeng', 'neimenggu', 'china'],
      阿拉善右旗: [101.67847760244487, 39.21755119958874, 'neimenggu_alashanmeng', 'neimenggu', 'china'],
      额济纳旗: [101.07592091737679, 41.96481549924285, 'neimenggu_alashanmeng', 'neimenggu', 'china'],
      沈阳: [123.43572520225906, 41.80244393685758, null, 'liaoning', 'china'],
      大连: [121.62525694065567, 38.920232013057785, null, 'liaoning', 'china'],
      鞍山: [123.0020018616734, 41.116982030018164, null, 'liaoning', 'china'],
      抚顺: [123.92766141192557, 41.88178777046178, null, 'liaoning', 'china'],
      本溪: [123.77714323343785, 41.30358761227188, null, 'liaoning', 'china'],
      丹东: [124.38967679270979, 40.12993207898844, null, 'liaoning', 'china'],
      锦州: [121.1423462771561, 41.12490914674218, null, 'liaoning', 'china'],
      营口: [122.24172497746282, 40.67317089681369, null, 'liaoning', 'china'],
      阜新: [121.65547979435249, 42.01777995581787, null, 'liaoning', 'china'],
      辽阳: [123.18813342424698, 41.27503027758238, null, 'liaoning', 'china'],
      盘锦: [122.07604905418366, 41.13048612368199, null, 'liaoning', 'china'],
      铁岭: [123.85066425573831, 42.29695030529641, null, 'liaoning', 'china'],
      朝阳: [120.45767151840307, 41.58278133872099, null, 'liaoning', 'china'],
      葫芦岛: [120.86280028312788, 40.76180434401704, null, 'liaoning', 'china'],
      沈阳和平区: [123.4132788701452, 41.79379681019847, 'liaoning_shenyang', 'liaoning', 'china'],
      沈河: [123.45224215593163, 41.80151438747801, 'liaoning_shenyang', 'liaoning', 'china'],
      大东: [123.47635824991498, 41.81482698905191, 'liaoning_shenyang', 'liaoning', 'china'],
      皇姑: [123.41226649568084, 41.82806432057313, 'liaoning_shenyang', 'liaoning', 'china'],
      沈阳铁西区: [123.35707213635128, 41.79414108711114, 'liaoning_shenyang', 'liaoning', 'china'],
      铁西区: [123.35707213635128, 41.79414108711114, 'liaoning_shenyang', 'liaoning', 'china'],
      苏家屯: [123.34805115441671, 41.67212149590965, 'liaoning_shenyang', 'liaoning', 'china'],
      浑南: [123.46540890023607, 41.748108626039716, 'liaoning_shenyang', 'liaoning', 'china'],
      沈北新: [123.52804971505878, 42.05810509908143, 'liaoning_shenyang', 'liaoning', 'china'],
      于洪: [123.31745283061505, 41.80152707985669, 'liaoning_shenyang', 'liaoning', 'china'],
      辽中: [122.73775368775237, 41.51874706406317, 'liaoning_shenyang', 'liaoning', 'china'],
      康平: [123.35910109139616, 42.74788228987643, 'liaoning_shenyang', 'liaoning', 'china'],
      法库: [123.42336633085358, 42.512686624898315, 'liaoning_shenyang', 'liaoning', 'china'],
      新民: [122.83547720878839, 42.00217735100377, 'liaoning_shenyang', 'liaoning', 'china'],
      中山区: [121.65031314336107, 38.92744089088906, 'liaoning_dalian', 'liaoning', 'china'],
      西岗: [121.62274490694243, 38.919914629246335, 'liaoning_dalian', 'liaoning', 'china'],
      沙河口: [121.60024332201881, 38.91879476194115, 'liaoning_dalian', 'liaoning', 'china'],
      甘井子: [121.58905154242338, 38.98127968421889, 'liaoning_dalian', 'liaoning', 'china'],
      旅顺口: [121.27374612388765, 38.81770672434218, 'liaoning_dalian', 'liaoning', 'china'],
      金州: [121.79582044752208, 39.05905791906557, 'liaoning_dalian', 'liaoning', 'china'],
      普兰店: [121.97711953319903, 39.407238487249295, 'liaoning_dalian', 'liaoning', 'china'],
      长海: [122.59445096437705, 39.278067720631924, 'liaoning_dalian', 'liaoning', 'china'],
      瓦房店: [122.0092196098119, 39.636518876669676, 'liaoning_dalian', 'liaoning', 'china'],
      庄河: [122.97709091659097, 39.70429624488877, 'liaoning_dalian', 'liaoning', 'china'],
      鞍山铁东区: [123.00084701467131, 41.11669438244871, 'liaoning_anshan', 'liaoning', 'china'],
      铁东区: [123.00084701467131, 41.11669438244871, 'liaoning_anshan', 'liaoning', 'china'],
      鞍山铁西区: [122.97831210367343, 41.11672200482081, 'liaoning_anshan', 'liaoning', 'china'],
      立山: [123.03126389499727, 41.15671814823167, 'liaoning_anshan', 'liaoning', 'china'],
      千山: [122.95592583025115, 41.07458933274081, 'liaoning_anshan', 'liaoning', 'china'],
      台安: [122.4362222525915, 41.39286100986735, 'liaoning_anshan', 'liaoning', 'china'],
      岫岩满族: [123.2949118146279, 40.28720045376033, 'liaoning_anshan', 'liaoning', 'china'],
      海城: [122.7585937560382, 40.85887336813642, 'liaoning_anshan', 'liaoning', 'china'],
      新抚: [123.90946619087303, 41.86644704402213, 'liaoning_fushun', 'liaoning', 'china'],
      东洲: [124.0537251676143, 41.872770933339865, 'liaoning_fushun', 'liaoning', 'china'],
      望花: [123.80804413721232, 41.857636887636744, 'liaoning_fushun', 'liaoning', 'china'],
      顺城: [123.92374434560044, 41.886900933063735, 'liaoning_fushun', 'liaoning', 'china'],
      抚顺县: [124.10441990848186, 41.92886820868186, 'liaoning_fushun', 'liaoning', 'china'],
      新宾满族: [125.04390401874895, 41.73882174306771, 'liaoning_fushun', 'liaoning', 'china'],
      清原满族: [124.93355884229257, 42.10769322857948, 'liaoning_fushun', 'liaoning', 'china'],
      平山区: [123.76781053046355, 41.29737864035442, 'liaoning_benxi', 'liaoning', 'china'],
      溪湖: [123.77182414220587, 41.33579351725822, 'liaoning_benxi', 'liaoning', 'china'],
      明山: [123.7698849205349, 41.30819685541588, 'liaoning_benxi', 'liaoning', 'china'],
      南芬: [123.75486652263409, 41.11012309229436, 'liaoning_benxi', 'liaoning', 'china'],
      本溪满族: [124.1327653530873, 41.30607076703443, 'liaoning_benxi', 'liaoning', 'china'],
      桓仁满族: [125.36575101727917, 41.27479199736172, 'liaoning_benxi', 'liaoning', 'china'],
      元宝: [124.40438920534635, 40.14226183685523, 'liaoning_dandong', 'liaoning', 'china'],
      振兴: [124.36773702913113, 40.108601011328496, 'liaoning_dandong', 'liaoning', 'china'],
      振安: [124.43409690514027, 40.16485054128261, 'liaoning_dandong', 'liaoning', 'china'],
      宽甸满族: [124.79129035029021, 40.736677845040404, 'liaoning_dandong', 'liaoning', 'china'],
      东港: [124.15605683881519, 39.88914375977641, 'liaoning_dandong', 'liaoning', 'china'],
      凤城: [124.07747378886812, 40.46390416730089, 'liaoning_dandong', 'liaoning', 'china'],
      古塔: [121.13667820852075, 41.121398775741184, 'liaoning_jinzhou', 'liaoning', 'china'],
      凌河: [121.15789320935906, 41.120355907472586, 'liaoning_jinzhou', 'liaoning', 'china'],
      太和区: [121.11377434257989, 41.111427462800776, 'liaoning_jinzhou', 'liaoning', 'china'],
      黑山: [122.12449684241258, 41.69759003431308, 'liaoning_jinzhou', 'liaoning', 'china'],
      义: [121.24942340303309, 41.54300269342259, 'liaoning_jinzhou', 'liaoning', 'china'],
      凌海: [121.37083069675957, 41.177494754554054, 'liaoning_jinzhou', 'liaoning', 'china'],
      北镇: [121.80232423763562, 41.605115873721616, 'liaoning_jinzhou', 'liaoning', 'china'],
      站前: [122.25970489957679, 40.67600765538219, 'liaoning_yingkou', 'liaoning', 'china'],
      西市: [122.21665816463837, 40.668762958569, 'liaoning_yingkou', 'liaoning', 'china'],
      鲅鱼圈: [122.1337557785793, 40.2695920867487, 'liaoning_yingkou', 'liaoning', 'china'],
      老边: [122.38901197321192, 40.68894868067587, 'liaoning_yingkou', 'liaoning', 'china'],
      盖州: [122.36209887944985, 40.41097572513809, 'liaoning_yingkou', 'liaoning', 'china'],
      大石桥: [122.51229118090106, 40.64024054306696, 'liaoning_yingkou', 'liaoning', 'china'],
      阜新海州区: [121.66410035312177, 42.01730772118235, 'liaoning_fuxin', 'liaoning', 'china'],
      新邱: [121.79691130631679, 42.09291803890944, 'liaoning_fuxin', 'liaoning', 'china'],
      太平: [121.68396039703741, 42.017510690409, 'liaoning_fuxin', 'liaoning', 'china'],
      清河门: [121.42663291795671, 41.786667810327806, 'liaoning_fuxin', 'liaoning', 'china'],
      细河: [121.66127567909442, 42.02531411256625, 'liaoning_fuxin', 'liaoning', 'china'],
      阜新蒙古族: [121.74975086756979, 42.064247124579886, 'liaoning_fuxin', 'liaoning', 'china'],
      彰武: [122.54388450864866, 42.39105394149976, 'liaoning_fuxin', 'liaoning', 'china'],
      白塔: [123.17921406751209, 41.273103912819515, 'liaoning_liaoyang', 'liaoning', 'china'],
      文圣: [123.19482737526161, 41.272425137720674, 'liaoning_liaoyang', 'liaoning', 'china'],
      宏伟: [123.20703308383263, 41.21157428533593, 'liaoning_liaoyang', 'liaoning', 'china'],
      弓长岭: [123.43823211777725, 41.16352658113752, 'liaoning_liaoyang', 'liaoning', 'china'],
      太子河: [123.19193606432111, 41.25732044780515, 'liaoning_liaoyang', 'liaoning', 'china'],
      辽阳县: [123.08624111991878, 41.22229011349124, 'liaoning_liaoyang', 'liaoning', 'china'],
      灯塔: [123.33240954233233, 41.43376283005999, 'liaoning_liaoyang', 'liaoning', 'china'],
      双台子: [122.06216798537406, 41.19662018773975, 'liaoning_panjin', 'liaoning', 'china'],
      兴隆台: [122.07811699623107, 41.128386008489, 'liaoning_panjin', 'liaoning', 'china'],
      大洼: [122.07820598490159, 41.000390927528606, 'liaoning_panjin', 'liaoning', 'china'],
      盘山: [121.99188227882456, 41.24634327916017, 'liaoning_panjin', 'liaoning', 'china'],
      银州: [123.85126168265482, 42.29864002928524, 'liaoning_tieling', 'liaoning', 'china'],
      清河区: [124.15557090067657, 42.5486447869588, 'liaoning_tieling', 'liaoning', 'china'],
      铁岭县: [123.73203335811453, 42.2296659928336, 'liaoning_tieling', 'liaoning', 'china'],
      西丰: [124.7299177051668, 42.74385595141839, 'liaoning_tieling', 'liaoning', 'china'],
      昌图: [124.11666678528229, 42.79043618389255, 'liaoning_tieling', 'liaoning', 'china'],
      调兵山: [123.5519694574374, 42.45637140249947, 'liaoning_tieling', 'liaoning', 'china'],
      开原: [124.05207834594124, 42.54805436711412, 'liaoning_tieling', 'liaoning', 'china'],
      双塔: [120.45527863265163, 41.585365953101956, 'liaoning_chaoyang', 'liaoning', 'china'],
      龙城: [120.41999650511528, 41.582410375766635, 'liaoning_chaoyang', 'liaoning', 'china'],
      朝阳县: [120.41080756953579, 41.53209939300632, 'liaoning_chaoyang', 'liaoning', 'china'],
      建平: [119.64874228275588, 41.40893306266159, 'liaoning_chaoyang', 'liaoning', 'china'],
      喀喇沁左翼蒙古族: [119.75127791952694, 41.13167414505524, 'liaoning_chaoyang', 'liaoning', 'china'],
      北票: [120.77356276674175, 41.80901004711346, 'liaoning_chaoyang', 'liaoning', 'china'],
      凌源: [119.41115146091498, 41.24942690508511, 'liaoning_chaoyang', 'liaoning', 'china'],
      连山: [120.86579190751657, 40.76132999384626, 'liaoning_huludao', 'liaoning', 'china'],
      龙港区: [120.8449661654418, 40.71635888374946, 'liaoning_huludao', 'liaoning', 'china'],
      南票: [120.75883007811171, 41.104769616301695, 'liaoning_huludao', 'liaoning', 'china'],
      绥中: [120.3485483942847, 40.33462362292949, 'liaoning_huludao', 'liaoning', 'china'],
      建昌: [119.81438601814074, 40.8185867427143, 'liaoning_huludao', 'liaoning', 'china'],
      兴城: [120.73575808265333, 40.62573270661788, 'liaoning_huludao', 'liaoning', 'china'],
      长春: [125.33107201037413, 43.892575677007876, null, 'jilin', 'china'],
      吉林市: [126.55963645209592, 43.849287160939895, null, 'jilin', 'china'],
      四平: [124.3773808344451, 43.17600692501762, null, 'jilin', 'china'],
      辽源: [125.15175368369619, 42.90896136859453, null, 'jilin', 'china'],
      通化: [125.94310707311548, 41.72679988294596, null, 'jilin', 'china'],
      白山: [126.434451893368, 41.948156395311585, null, 'jilin', 'china'],
      松原: [124.83006181188503, 45.1243653783015, null, 'jilin', 'china'],
      白城: [122.84769114079177, 45.62486650128342, null, 'jilin', 'china'],
      延边朝鲜族: [129.51974490794285, 42.910756070770404, null, 'jilin', 'china'],
      南关: [125.34384841993382, 43.89585630668776, 'jilin_changchun', 'jilin', 'china'],
      宽城: [125.34944412586316, 43.90944613206903, 'jilin_changchun', 'jilin', 'china'],
      长春朝阳区: [125.3245909887742, 43.870754650756524, 'jilin_changchun', 'jilin', 'china'],
      二道: [125.39112514016392, 43.877082605732916, 'jilin_changchun', 'jilin', 'china'],
      绿园: [125.27882668106902, 43.89851739036056, 'jilin_changchun', 'jilin', 'china'],
      双阳: [125.66542868974793, 43.53136668077414, 'jilin_changchun', 'jilin', 'china'],
      九台: [125.85121561096646, 44.163050246041436, 'jilin_changchun', 'jilin', 'china'],
      农安: [125.18171298072338, 44.437526192341615, 'jilin_changchun', 'jilin', 'china'],
      榆树: [126.55671574295398, 44.83331168030624, 'jilin_changchun', 'jilin', 'china'],
      德惠: [125.70997112664824, 44.53954204252049, 'jilin_changchun', 'jilin', 'china'],
      公主岭: [124.82400002832794, 43.51569744779527, 'jilin_changchun', 'jilin', 'china'],
      昌邑区: [126.57726920044028, 43.857136161526064, 'jilin_jilin', 'jilin', 'china'],
      龙潭: [126.56797649575189, 43.91558691841253, 'jilin_jilin', 'jilin', 'china'],
      船营: [126.55900898298013, 43.84950638155353, 'jilin_jilin', 'jilin', 'china'],
      丰满: [126.56733458145614, 43.822422368959984, 'jilin_jilin', 'jilin', 'china'],
      永吉: [126.50805478371839, 43.67357319417594, 'jilin_jilin', 'jilin', 'china'],
      蛟河: [127.3492064144436, 43.72672629118522, 'jilin_jilin', 'jilin', 'china'],
      桦甸: [126.75192575187292, 42.97818662875067, 'jilin_jilin', 'jilin', 'china'],
      舒兰: [126.95421618775653, 44.417215471733535, 'jilin_jilin', 'jilin', 'china'],
      磐石: [126.0665427919609, 42.948092701329074, 'jilin_jilin', 'jilin', 'china'],
      四平铁西区: [124.36744605536569, 43.18205533431395, 'jilin_siping', 'jilin', 'china'],
      四平铁东区: [124.39506229037168, 43.17291639431867, 'jilin_siping', 'jilin', 'china'],
      梨树: [124.34220321461983, 43.31455867097788, 'jilin_siping', 'jilin', 'china'],
      伊通满族: [125.30959655867208, 43.35160278738464, 'jilin_siping', 'jilin', 'china'],
      双辽: [123.51173566338639, 43.52436015015861, 'jilin_siping', 'jilin', 'china'],
      龙山区: [125.15156954352987, 42.90896882808533, 'jilin_liaoyuan', 'jilin', 'china'],
      西安区: [129.61950552676885, 44.58733241911161, 'heilongjiang_mudanjiang', 'heilongjiang', 'china'],
      东丰: [125.5359973357292, 42.681553182528766, 'jilin_liaoyuan', 'jilin', 'china'],
      东辽: [124.99858042586602, 42.933414129898956, 'jilin_liaoyuan', 'jilin', 'china'],
      东昌: [125.94332229743573, 41.72685512281561, 'jilin_tonghua', 'jilin', 'china'],
      二道江: [126.0525951828817, 41.78328816577658, 'jilin_tonghua', 'jilin', 'china'],
      通化县: [125.75952136508843, 41.684276810222826, 'jilin_tonghua', 'jilin', 'china'],
      辉南: [126.04938280514762, 42.68921775823349, 'jilin_tonghua', 'jilin', 'china'],
      柳河: [125.74698515198477, 42.28768695995545, 'jilin_tonghua', 'jilin', 'china'],
      梅河口: [125.69394602358297, 42.53570804326133, 'jilin_tonghua', 'jilin', 'china'],
      集安: [126.19280227059043, 41.13191115921055, 'jilin_tonghua', 'jilin', 'china'],
      浑江: [126.4346468229091, 41.94871778352092, 'jilin_baishan', 'jilin', 'china'],
      江源: [126.59065454328639, 42.054370146182414, 'jilin_baishan', 'jilin', 'china'],
      抚松: [127.28037248347742, 42.33835028668765, 'jilin_baishan', 'jilin', 'china'],
      靖宇: [126.81491569989606, 42.3956632287769, 'jilin_baishan', 'jilin', 'china'],
      长白朝鲜族: [128.20998027769818, 41.4251182155722, 'jilin_baishan', 'jilin', 'china'],
      临江: [126.92587157491376, 41.81648952948289, 'jilin_baishan', 'jilin', 'china'],
      宁江: [124.83433921126807, 45.18254128964825, 'jilin_songyuan', 'jilin', 'china'],
      前郭尔罗斯蒙古族: [124.83328185112723, 45.12234898403077, 'jilin_songyuan', 'jilin', 'china'],
      长岭: [123.99164750297894, 44.282670605040735, 'jilin_songyuan', 'jilin', 'china'],
      乾安: [124.03099911102818, 45.01248597802393, 'jilin_songyuan', 'jilin', 'china'],
      扶余: [126.04932913883822, 44.99196033253293, 'jilin_songyuan', 'jilin', 'china'],
      洮北: [122.84906723780702, 45.62511784178999, 'jilin_baicheng', 'jilin', 'china'],
      镇赉: [123.20880619409947, 45.85194521510531, 'jilin_baicheng', 'jilin', 'china'],
      通榆: [123.09506335685963, 44.815125537579384, 'jilin_baicheng', 'jilin', 'china'],
      洮南: [122.79021880805001, 45.345224718776926, 'jilin_baicheng', 'jilin', 'china'],
      大安: [124.29801984155048, 45.51368431311917, 'jilin_baicheng', 'jilin', 'china'],
      延吉: [129.5223216581032, 42.912845759788894, 'jilin_yanbianchaoxianzuzizhizhou', 'jilin', 'china'],
      图们: [129.8530864040816, 42.97298894252769, 'jilin_yanbianchaoxianzuzizhizhou', 'jilin', 'china'],
      敦化: [128.23648512777342, 43.37259050071967, 'jilin_yanbianchaoxianzuzizhizhou', 'jilin', 'china'],
      珲春: [130.3724005821435, 42.87677553285222, 'jilin_yanbianchaoxianzuzizhizhou', 'jilin', 'china'],
      龙井: [129.4323781425636, 42.776661009735115, 'jilin_yanbianchaoxianzuzizhizhou', 'jilin', 'china'],
      和龙: [129.01512670542337, 42.55334888499436, 'jilin_yanbianchaoxianzuzizhizhou', 'jilin', 'china'],
      汪清: [129.77275379796527, 43.32113300705029, 'jilin_yanbianchaoxianzuzizhizhou', 'jilin', 'china'],
      安图: [128.90833050319208, 43.11716011558393, 'jilin_yanbianchaoxianzuzizhizhou', 'jilin', 'china'],
      哈尔滨: [126.6490649317503, 45.76274263234975, null, 'heilongjiang', 'china'],
      齐齐哈尔: [123.96427678290193, 47.34844989432938, null, 'heilongjiang', 'china'],
      鸡西: [130.9825988337891, 45.30566178864119, null, 'heilongjiang', 'china'],
      鹤岗: [130.2840810875637, 47.3378496151524, null, 'heilongjiang', 'china'],
      双鸭山: [131.16364771717278, 46.64982524760632, null, 'heilongjiang', 'china'],
      大庆: [125.11934862972835, 46.59644585013598, null, 'heilongjiang', 'china'],
      伊春: [128.9058024696096, 47.730972155647045, null, 'heilongjiang', 'china'],
      佳木斯: [130.36822342294792, 46.815385489195094, null, 'heilongjiang', 'china'],
      七台河: [131.0220527587039, 45.77738220012205, null, 'heilongjiang', 'china'],
      牡丹江: [129.62502391195375, 44.58917953087413, null, 'heilongjiang', 'china'],
      黑河: [127.50565494830992, 50.255195671507096, null, 'heilongjiang', 'china'],
      绥化: [126.99943655023796, 46.643329335142475, null, 'heilongjiang', 'china'],
      大兴安岭地: [124.71805174964928, 52.341237685052306, null, 'heilongjiang', 'china'],
      道里: [126.61893842003288, 45.76834145010028, 'heilongjiang_haerbin', 'heilongjiang', 'china'],
      南岗: [126.65874158312266, 45.76162957020258, 'heilongjiang_haerbin', 'heilongjiang', 'china'],
      道外: [126.65544812624516, 45.790221515515825, 'heilongjiang_haerbin', 'heilongjiang', 'china'],
      平房: [126.63575708621192, 45.611583722797164, 'heilongjiang_haerbin', 'heilongjiang', 'china'],
      松北: [126.5695965620285, 45.820514551025454, 'heilongjiang_haerbin', 'heilongjiang', 'china'],
      香坊: [126.67367022336117, 45.71871017794007, 'heilongjiang_haerbin', 'heilongjiang', 'china'],
      呼兰: [126.60968405043513, 45.99061066593057, 'heilongjiang_haerbin', 'heilongjiang', 'china'],
      阿城: [126.97912021007568, 45.54467201237216, 'heilongjiang_haerbin', 'heilongjiang', 'china'],
      双城: [126.31542118069365, 45.38360790849105, 'heilongjiang_haerbin', 'heilongjiang', 'china'],
      依兰: [129.5721209965417, 46.32101441516248, 'heilongjiang_haerbin', 'heilongjiang', 'china'],
      方正: [128.8427218567941, 45.84527918862219, 'heilongjiang_haerbin', 'heilongjiang', 'china'],
      宾: [127.49255833229257, 45.76509154358038, 'heilongjiang_haerbin', 'heilongjiang', 'china'],
      巴彦: [127.41014930786207, 46.08776401305592, 'heilongjiang_haerbin', 'heilongjiang', 'china'],
      木兰: [128.04902893947516, 45.95620293525256, 'heilongjiang_haerbin', 'heilongjiang', 'china'],
      通河: [128.75419033841487, 45.98393327536312, 'heilongjiang_haerbin', 'heilongjiang', 'china'],
      延寿: [128.3384922096557, 45.46129084214582, 'heilongjiang_haerbin', 'heilongjiang', 'china'],
      尚志: [127.97513271779886, 45.220629729814036, 'heilongjiang_haerbin', 'heilongjiang', 'china'],
      五常: [127.16418814189072, 44.9251930706886, 'heilongjiang_haerbin', 'heilongjiang', 'china'],
      龙沙: [123.96369565565307, 47.34810361767453, 'heilongjiang_qiqihaer', 'heilongjiang', 'china'],
      建华: [123.96223635971882, 47.36085237009222, 'heilongjiang_qiqihaer', 'heilongjiang', 'china'],
      铁锋: [123.97994776408245, 47.34578130098926, 'heilongjiang_qiqihaer', 'heilongjiang', 'china'],
      昂昂溪: [123.81965449363534, 47.16292741752095, 'heilongjiang_qiqihaer', 'heilongjiang', 'china'],
      富拉尔基: [123.6454482351752, 47.212808306994134, 'heilongjiang_qiqihaer', 'heilongjiang', 'china'],
      碾子山: [122.89433594087396, 47.52034478534681, 'heilongjiang_qiqihaer', 'heilongjiang', 'china'],
      梅里斯达斡尔族: [123.7611514982454, 47.31703158981533, 'heilongjiang_qiqihaer', 'heilongjiang', 'china'],
      龙江: [123.19386047753902, 47.342045917075595, 'heilongjiang_qiqihaer', 'heilongjiang', 'china'],
      依安: [125.31405212622013, 47.8961494788268, 'heilongjiang_qiqihaer', 'heilongjiang', 'china'],
      泰来: [123.42615787025667, 46.39795561929879, 'heilongjiang_qiqihaer', 'heilongjiang', 'china'],
      甘南: [123.51252145979277, 47.92392102329144, 'heilongjiang_qiqihaer', 'heilongjiang', 'china'],
      富裕: [124.47561665994438, 47.8031961428784, 'heilongjiang_qiqihaer', 'heilongjiang', 'china'],
      克山: [125.8807353502229, 48.04071019466232, 'heilongjiang_qiqihaer', 'heilongjiang', 'china'],
      克东: [126.25548325474197, 48.04366321224811, 'heilongjiang_qiqihaer', 'heilongjiang', 'china'],
      拜泉: [126.09837820040694, 47.61339378972742, 'heilongjiang_qiqihaer', 'heilongjiang', 'china'],
      讷河: [124.88873106351085, 48.48698413502774, 'heilongjiang_qiqihaer', 'heilongjiang', 'china'],
      鸡冠: [130.9810037100837, 45.30596388545164, 'heilongjiang_jixi', 'heilongjiang', 'china'],
      恒山: [130.91699770665005, 45.21958202972848, 'heilongjiang_jixi', 'heilongjiang', 'china'],
      滴道: [130.85341748188222, 45.35450562026763, 'heilongjiang_jixi', 'heilongjiang', 'china'],
      梨树区: [130.704181454851, 45.09842260892117, 'heilongjiang_jixi', 'heilongjiang', 'china'],
      城子河: [131.01698026750944, 45.34425236865076, 'heilongjiang_jixi', 'heilongjiang', 'china'],
      麻山: [130.48768172356677, 45.215385097100764, 'heilongjiang_jixi', 'heilongjiang', 'china'],
      鸡东: [131.1553037164535, 45.25722444650748, 'heilongjiang_jixi', 'heilongjiang', 'china'],
      虎林: [132.98028952017535, 45.774286943983796, 'heilongjiang_jixi', 'heilongjiang', 'china'],
      密山: [131.88049974080994, 45.55362470686762, 'heilongjiang_jixi', 'heilongjiang', 'china'],
      鹤岗向阳区: [130.29895440496927, 47.351420677166985, 'heilongjiang_hegang', 'heilongjiang', 'china'],
      向阳区: [130.29895440496927, 47.351420677166985, 'heilongjiang_hegang', 'heilongjiang', 'china'],
      工农: [130.28325129012322, 47.337429431957275, 'heilongjiang_hegang', 'heilongjiang', 'china'],
      鹤岗南山区: [130.2821490553389, 47.318978192016495, 'heilongjiang_hegang', 'heilongjiang', 'china'],
      兴安区: [130.24269541423627, 47.25878023887955, 'heilongjiang_hegang', 'heilongjiang', 'china'],
      东山区: [130.32350214243834, 47.34377250791601, 'heilongjiang_hegang', 'heilongjiang', 'china'],
      兴山区: [130.31172149768048, 47.366245384856214, 'heilongjiang_hegang', 'heilongjiang', 'china'],
      萝北: [130.83558255747408, 47.583596620477316, 'heilongjiang_hegang', 'heilongjiang', 'china'],
      绥滨: [131.8669610291631, 47.29610249237393, 'heilongjiang_hegang', 'heilongjiang', 'china'],
      尖山: [131.16530269949106, 46.649347642091655, 'heilongjiang_shuangyashan', 'heilongjiang', 'china'],
      岭东: [131.17005662228297, 46.5974689124031, 'heilongjiang_shuangyashan', 'heilongjiang', 'china'],
      四方台: [131.3398303298487, 46.599984362667584, 'heilongjiang_shuangyashan', 'heilongjiang', 'china'],
      双鸭山宝山区: [131.4106699377624, 46.579754594322075, 'heilongjiang_shuangyashan', 'heilongjiang', 'china'],
      集贤: [131.14577448508012, 46.7351682999646, 'heilongjiang_shuangyashan', 'heilongjiang', 'china'],
      友谊: [131.8172275802334, 46.780803843324165, 'heilongjiang_shuangyashan', 'heilongjiang', 'china'],
      宝清: [132.21294931172844, 46.33470992188754, 'heilongjiang_shuangyashan', 'heilongjiang', 'china'],
      饶河: [134.0275858067811, 46.80751027598099, 'heilongjiang_shuangyashan', 'heilongjiang', 'china'],
      萨尔图: [125.12126138984786, 46.60209227429708, 'heilongjiang_daqing', 'heilongjiang', 'china'],
      龙凤: [125.15220368481667, 46.58022893192267, 'heilongjiang_daqing', 'heilongjiang', 'china'],
      让胡路: [124.87494935860005, 46.65890765753858, 'heilongjiang_daqing', 'heilongjiang', 'china'],
      红岗: [124.89601392036552, 46.40903323186404, 'heilongjiang_daqing', 'heilongjiang', 'china'],
      大同区: [124.82491805483616, 46.04051123646192, 'heilongjiang_daqing', 'heilongjiang', 'china'],
      肇州: [125.27961484772469, 45.71503378983186, 'heilongjiang_daqing', 'heilongjiang', 'china'],
      肇源: [125.08857093538171, 45.524617970488315, 'heilongjiang_daqing', 'heilongjiang', 'china'],
      林甸: [124.88434512526676, 47.19219366675192, 'heilongjiang_daqing', 'heilongjiang', 'china'],
      杜尔伯特蒙古族: [124.4526201257815, 46.872324300291176, 'heilongjiang_daqing', 'heilongjiang', 'china'],
      伊美: [128.9137641775959, 47.73421851700772, 'heilongjiang_yichun', 'heilongjiang', 'china'],
      乌翠: [128.67633946584226, 47.73272399627504, 'heilongjiang_yichun', 'heilongjiang', 'china'],
      友好: [128.8472984611936, 47.859591201779885, 'heilongjiang_yichun', 'heilongjiang', 'china'],
      嘉荫: [130.40428033413568, 48.89714592087696, 'heilongjiang_yichun', 'heilongjiang', 'china'],
      汤旺: [129.5775813912751, 48.46066673965712, 'heilongjiang_yichun', 'heilongjiang', 'china'],
      丰林: [129.5402457933512, 48.29609136245153, 'heilongjiang_yichun', 'heilongjiang', 'china'],
      大箐山: [129.02721686332742, 47.03457254035302, 'heilongjiang_yichun', 'heilongjiang', 'china'],
      南岔: [129.28902842182384, 47.14307218375223, 'heilongjiang_yichun', 'heilongjiang', 'china'],
      金林: [129.43575521251466, 47.41873346963498, 'heilongjiang_yichun', 'heilongjiang', 'china'],
      铁力: [128.03693132129405, 46.99210807889367, 'heilongjiang_yichun', 'heilongjiang', 'china'],
      佳木斯向阳区: [130.3683763707208, 46.81542195544429, 'heilongjiang_jiamusi', 'heilongjiang', 'china'],
      前进: [130.38433474254734, 46.81796080977684, 'heilongjiang_jiamusi', 'heilongjiang', 'china'],
      东风: [130.40986267515407, 46.828347740075706, 'heilongjiang_jiamusi', 'heilongjiang', 'china'],
      佳木斯郊区: [130.35810651812608, 46.813089984162374, 'heilongjiang_jiamusi', 'heilongjiang', 'china'],
      桦南: [130.57650854136244, 46.24646183793203, 'heilongjiang_jiamusi', 'heilongjiang', 'china'],
      桦川: [130.73029120613631, 47.02877574303797, 'heilongjiang_jiamusi', 'heilongjiang', 'china'],
      汤原: [129.91110874799355, 46.73567224880723, 'heilongjiang_jiamusi', 'heilongjiang', 'china'],
      同江: [132.51663024887594, 47.657132248004785, 'heilongjiang_jiamusi', 'heilongjiang', 'china'],
      富锦: [132.04448950709445, 47.256580081492686, 'heilongjiang_jiamusi', 'heilongjiang', 'china'],
      抚远: [134.30090034809933, 48.37100088011852, 'heilongjiang_jiamusi', 'heilongjiang', 'china'],
      新兴区: [130.8959729055641, 45.80024286572059, 'heilongjiang_qitaihe', 'heilongjiang', 'china'],
      桃山: [131.02231498848437, 45.77733840705297, 'heilongjiang_qitaihe', 'heilongjiang', 'china'],
      茄子河: [131.0780755682433, 45.78255606911552, 'heilongjiang_qitaihe', 'heilongjiang', 'china'],
      勃利: [130.5814468839714, 45.75785621970372, 'heilongjiang_qitaihe', 'heilongjiang', 'china'],
      东安区: [129.6297436143785, 44.58853197698408, 'heilongjiang_mudanjiang', 'heilongjiang', 'china'],
      阳明: [129.6411629493857, 44.60222943484092, 'heilongjiang_mudanjiang', 'heilongjiang', 'china'],
      爱民: [129.6075848122053, 44.60182628783408, 'heilongjiang_mudanjiang', 'heilongjiang', 'china'],
      林口: [130.27503708255432, 45.2922956331495, 'heilongjiang_mudanjiang', 'heilongjiang', 'china'],
      绥芬河: [131.17122399426344, 44.40324379529215, 'heilongjiang_mudanjiang', 'heilongjiang', 'china'],
      海林: [129.3943930427799, 44.58019351918272, 'heilongjiang_mudanjiang', 'heilongjiang', 'china'],
      宁安: [129.47639708831164, 44.35317029530594, 'heilongjiang_mudanjiang', 'heilongjiang', 'china'],
      穆棱: [130.53362202712685, 44.925616156663935, 'heilongjiang_mudanjiang', 'heilongjiang', 'china'],
      东宁: [131.13184612698217, 44.06948810168524, 'heilongjiang_mudanjiang', 'heilongjiang', 'china'],
      爱辉: [127.5042700131777, 50.25464010205309, 'heilongjiang_heihe', 'heilongjiang', 'china'],
      逊克: [128.48276805957738, 49.588725104740334, 'heilongjiang_heihe', 'heilongjiang', 'china'],
      孙吴: [127.33366357686349, 49.43028991127165, 'heilongjiang_heihe', 'heilongjiang', 'china'],
      北安: [126.51523268377541, 48.25146408155898, 'heilongjiang_heihe', 'heilongjiang', 'china'],
      五大连池: [126.20429990394275, 48.518467695194474, 'heilongjiang_heihe', 'heilongjiang', 'china'],
      嫩江: [125.23651492204539, 49.183127943214345, 'heilongjiang_heihe', 'heilongjiang', 'china'],
      北林: [126.99715665639002, 46.64089388499036, 'heilongjiang_suihua', 'heilongjiang', 'china'],
      望奎: [126.49057230607676, 46.83989718000454, 'heilongjiang_suihua', 'heilongjiang', 'china'],
      兰西: [126.29593356511928, 46.26471624122944, 'heilongjiang_suihua', 'heilongjiang', 'china'],
      青冈: [126.11864561145197, 46.692946103583196, 'heilongjiang_suihua', 'heilongjiang', 'china'],
      庆安: [127.51662985593076, 46.88486613208709, 'heilongjiang_suihua', 'heilongjiang', 'china'],
      明水: [125.914043510009, 47.18958205894748, 'heilongjiang_suihua', 'heilongjiang', 'china'],
      绥棱: [127.1176107697568, 47.25316573722664, 'heilongjiang_suihua', 'heilongjiang', 'china'],
      安达: [125.33652756155072, 46.416282172423514, 'heilongjiang_suihua', 'heilongjiang', 'china'],
      肇东: [125.997767722893, 46.075807716677566, 'heilongjiang_suihua', 'heilongjiang', 'china'],
      海伦: [126.9757570387928, 47.466763698707325, 'heilongjiang_suihua', 'heilongjiang', 'china'],
      漠河: [122.54265865837932, 52.978319494229325, 'heilongjiang_daxinganlingdiqu', 'heilongjiang', 'china'],
      加格达奇: [124.13334994126693, 50.43037535712577, 'heilongjiang_daxinganlingdiqu', 'heilongjiang', 'china'],
      呼玛: [126.66876587238835, 51.7326230281592, 'heilongjiang_daxinganlingdiqu', 'heilongjiang', 'china'],
      塔河: [124.71703343720948, 52.34122443080862, 'heilongjiang_daxinganlingdiqu', 'heilongjiang', 'china'],
      黄浦: [121.49691688429095, 31.22845700345075, 'shanghai', 'shanghai', 'china'],
      徐汇: [121.44391045704579, 31.18632993425492, 'shanghai', 'shanghai', 'china'],
      长宁区: [121.42865990444005, 31.224344232493003, 'shanghai', 'shanghai', 'china'],
      静安: [121.45465820848473, 31.235339058398356, 'shanghai', 'shanghai', 'china'],
      上海普陀区: [121.39908920581553, 31.247416144938853, 'shanghai', 'shanghai', 'china'],
      普陀区: [121.39908920581553, 31.247416144938853, 'shanghai', 'shanghai', 'china'],
      虹口: [121.49841635232562, 31.266638098867592, 'shanghai', 'shanghai', 'china'],
      杨浦: [121.52932120836614, 31.27661807940678, 'shanghai', 'shanghai', 'china'],
      闵行: [121.38258256703908, 31.11730688760181, 'shanghai', 'shanghai', 'china'],
      上海宝山区: [121.49649923091518, 31.404576809258447, 'shanghai', 'shanghai', 'china'],
      宝山区: [121.49649923091518, 31.404576809258447, 'shanghai', 'shanghai', 'china'],
      嘉定: [121.2569117923665, 31.38920493975734, 'shanghai', 'shanghai', 'china'],
      浦东新: [121.57413279249269, 31.252282758966548, 'shanghai', 'shanghai', 'china'],
      金山: [121.33716272962762, 30.731006175900454, 'shanghai', 'shanghai', 'china'],
      松江: [121.23000202542336, 31.036588038899428, 'shanghai', 'shanghai', 'china'],
      青浦: [121.11952499426985, 31.157149007809778, 'shanghai', 'shanghai', 'china'],
      奉贤: [121.46490768708992, 30.918548853412226, 'shanghai', 'shanghai', 'china'],
      崇明: [121.40406681179284, 31.632722742024658, 'shanghai', 'shanghai', 'china'],
      南京: [118.7739275401509, 32.04749630515097, null, 'jiangsu', 'china'],
      无锡: [120.30827084815955, 31.580373001028327, null, 'jiangsu', 'china'],
      徐州: [117.19140874242495, 34.26745101470808, null, 'jiangsu', 'china'],
      常州: [119.95354290212056, 31.778410809391058, null, 'jiangsu', 'china'],
      苏州: [120.62601922392894, 31.30556226589803, null, 'jiangsu', 'china'],
      南通: [120.87106292233969, 32.022308161915156, null, 'jiangsu', 'china'],
      连云港: [119.18528027747558, 34.60622035659553, null, 'jiangsu', 'china'],
      淮安: [119.02770643037289, 33.60370389952409, null, 'jiangsu', 'china'],
      盐城: [120.14646329244279, 33.38381551234568, null, 'jiangsu', 'china'],
      扬州: [119.42745212778533, 32.3993197622847, null, 'jiangsu', 'china'],
      镇江: [119.45935681581535, 32.21007292714895, null, 'jiangsu', 'china'],
      泰州: [119.9216834742424, 32.49078065002388, null, 'jiangsu', 'china'],
      宿迁: [118.2817364475865, 33.96876010336605, null, 'jiangsu', 'china'],
      玄武: [118.79862099978233, 32.05700782213282, 'jiangsu_nanjing', 'jiangsu', 'china'],
      秦淮: [118.79251014498342, 32.040082265217784, 'jiangsu_nanjing', 'jiangsu', 'china'],
      建邺: [118.73925853549824, 32.010202596201, 'jiangsu_nanjing', 'jiangsu', 'china'],
      南京鼓楼区: [118.77625938014059, 32.07296627832887, 'jiangsu_nanjing', 'jiangsu', 'china'],
      鼓楼区: [118.77625938014059, 32.07296627832887, 'jiangsu_nanjing', 'jiangsu', 'china'],
      浦口: [118.6319153339542, 32.06405205801764, 'jiangsu_nanjing', 'jiangsu', 'china'],
      栖霞区: [118.81511335223283, 32.1084664787234, 'jiangsu_nanjing', 'jiangsu', 'china'],
      雨花台: [118.77854530205269, 32.00198068744628, 'jiangsu_nanjing', 'jiangsu', 'china'],
      江宁: [118.85722453698183, 31.959108694150512, 'jiangsu_nanjing', 'jiangsu', 'china'],
      六合: [118.85723496338497, 32.346340149369745, 'jiangsu_nanjing', 'jiangsu', 'china'],
      溧水: [119.035134013203, 31.65935264498401, 'jiangsu_nanjing', 'jiangsu', 'china'],
      高淳: [118.88246034217732, 31.332893706193094, 'jiangsu_nanjing', 'jiangsu', 'china'],
      锡山: [120.36372301380659, 31.591921404386184, 'jiangsu_wuxi', 'jiangsu', 'china'],
      惠山: [120.31013744322301, 31.686664553296694, 'jiangsu_wuxi', 'jiangsu', 'china'],
      滨湖: [120.27252410596722, 31.55629954970569, 'jiangsu_wuxi', 'jiangsu', 'china'],
      梁溪: [120.30320240006336, 31.581354551108955, 'jiangsu_wuxi', 'jiangsu', 'china'],
      新吴: [120.35918521269221, 31.557299267423662, 'jiangsu_wuxi', 'jiangsu', 'china'],
      江阴: [120.28241127232805, 31.916872126241223, 'jiangsu_wuxi', 'jiangsu', 'china'],
      宜兴: [119.82714617056185, 31.370028375643717, 'jiangsu_wuxi', 'jiangsu', 'china'],
      徐州鼓楼区: [117.19951202766552, 34.27512043782498, 'jiangsu_xuzhou', 'jiangsu', 'china'],
      云龙区: [117.20116836951877, 34.26055260806851, 'jiangsu_xuzhou', 'jiangsu', 'china'],
      贾汪: [117.45671250108998, 34.44764639431031, 'jiangsu_xuzhou', 'jiangsu', 'china'],
      泉山: [117.18882483420022, 34.26789917673476, 'jiangsu_xuzhou', 'jiangsu', 'china'],
      铜山: [117.19048746044147, 34.19853368960062, 'jiangsu_xuzhou', 'jiangsu', 'china'],
      丰: [116.5994841393242, 34.70267730768173, 'jiangsu_xuzhou', 'jiangsu', 'china'],
      沛: [116.9437954594831, 34.73470009027343, 'jiangsu_xuzhou', 'jiangsu', 'china'],
      睢宁: [117.95707100536391, 33.90553459957824, 'jiangsu_xuzhou', 'jiangsu', 'china'],
      新沂: [118.35231630183476, 34.374859032819565, 'jiangsu_xuzhou', 'jiangsu', 'china'],
      邳州: [117.97031696609454, 34.32105292390456, 'jiangsu_xuzhou', 'jiangsu', 'china'],
      天宁: [119.97029656348526, 31.785512421768743, 'jiangsu_changzhou', 'jiangsu', 'china'],
      钟楼: [119.95495805789926, 31.786630004250735, 'jiangsu_changzhou', 'jiangsu', 'china'],
      新北: [119.98114954601178, 31.83075577083093, 'jiangsu_changzhou', 'jiangsu', 'china'],
      武进: [119.96534319328627, 31.724371030668504, 'jiangsu_changzhou', 'jiangsu', 'china'],
      金坛: [119.579980181023, 31.75006034721082, 'jiangsu_changzhou', 'jiangsu', 'china'],
      溧阳: [119.49431464939984, 31.433036912762677, 'jiangsu_changzhou', 'jiangsu', 'china'],
      虎丘: [120.57332975811028, 31.30078043195191, 'jiangsu_suzhou', 'jiangsu', 'china'],
      吴中: [120.63108451918025, 31.276936879560886, 'jiangsu_suzhou', 'jiangsu', 'china'],
      相城: [120.62538968028123, 31.402877917701232, 'jiangsu_suzhou', 'jiangsu', 'china'],
      姑苏: [120.62870350280919, 31.317554678352018, 'jiangsu_suzhou', 'jiangsu', 'china'],
      吴江: [120.64813738362722, 31.16619304561341, 'jiangsu_suzhou', 'jiangsu', 'china'],
      苏州工业园: [120.72975452391447, 31.33039368947471, 'jiangsu_suzhou', 'jiangsu', 'china'],
      常熟: [120.75499503881845, 31.66417942664124, 'jiangsu_suzhou', 'jiangsu', 'china'],
      张家港: [120.55002950563421, 31.871195757873924, 'jiangsu_suzhou', 'jiangsu', 'china'],
      昆山: [120.96454135329657, 31.38828564381045, 'jiangsu_suzhou', 'jiangsu', 'china'],
      太仓: [121.11879805211458, 31.45852789666922, 'jiangsu_suzhou', 'jiangsu', 'china'],
      崇川: [120.8728131561509, 32.021341949858915, 'jiangsu_nantong', 'jiangsu', 'china'],
      南通通州区: [121.0795950054824, 32.09063100165678, 'jiangsu_nantong', 'jiangsu', 'china'],
      如东: [121.19253490052337, 32.31810842328557, 'jiangsu_nantong', 'jiangsu', 'china'],
      启东: [121.66618729697208, 31.816338468615736, 'jiangsu_nantong', 'jiangsu', 'china'],
      如皋: [120.5728343562396, 32.39751959933107, 'jiangsu_nantong', 'jiangsu', 'china'],
      海门: [121.18305753466196, 31.899646298405823, 'jiangsu_nantong', 'jiangsu', 'china'],
      海安: [120.47243933525543, 32.54656106317912, 'jiangsu_nantong', 'jiangsu', 'china'],
      连云: [119.37300653561265, 34.74546363964271, 'jiangsu_lianyungang', 'jiangsu', 'china'],
      连云港海州区: [119.18625590706775, 34.60777069686097, 'jiangsu_lianyungang', 'jiangsu', 'china'],
      海州区: [119.18625590706775, 34.60777069686097, 'jiangsu_lianyungang', 'jiangsu', 'china'],
      赣榆: [119.13529773761931, 34.84513605516709, 'jiangsu_lianyungang', 'jiangsu', 'china'],
      东海: [118.77299005432307, 34.528788670942305, 'jiangsu_lianyungang', 'jiangsu', 'china'],
      灌云: [119.26219315745765, 34.3045369343032, 'jiangsu_lianyungang', 'jiangsu', 'china'],
      灌南: [119.35892443904407, 34.09827037261623, 'jiangsu_lianyungang', 'jiangsu', 'china'],
      淮安区: [119.15278319966313, 33.5137742125959, 'jiangsu_huaian', 'jiangsu', 'china'],
      淮阴: [119.02728063976996, 33.628648609776846, 'jiangsu_huaian', 'jiangsu', 'china'],
      清江浦: [119.02590935485627, 33.609404532962515, 'jiangsu_huaian', 'jiangsu', 'china'],
      洪泽: [118.87447152181362, 33.300649686878465, 'jiangsu_huaian', 'jiangsu', 'china'],
      涟水: [119.2725108912435, 33.777577266514626, 'jiangsu_huaian', 'jiangsu', 'china'],
      盱眙: [118.50042126875974, 33.01005417214833, 'jiangsu_huaian', 'jiangsu', 'china'],
      金湖: [119.02341649907154, 33.024293189713504, 'jiangsu_huaian', 'jiangsu', 'china'],
      亭湖: [120.1425295887325, 33.390157149355495, 'jiangsu_yancheng', 'jiangsu', 'china'],
      盐都: [120.14618586939764, 33.34746779020279, 'jiangsu_yancheng', 'jiangsu', 'china'],
      大丰: [120.47672045603856, 33.20584247623622, 'jiangsu_yancheng', 'jiangsu', 'china'],
      响水: [119.58617553342548, 34.205601339267155, 'jiangsu_yancheng', 'jiangsu', 'china'],
      滨海: [119.8350454276367, 33.99556845844694, 'jiangsu_yancheng', 'jiangsu', 'china'],
      阜宁: [119.81190523822606, 33.79146979242922, 'jiangsu_yancheng', 'jiangsu', 'china'],
      射阳: [120.26388824546541, 33.78000119305596, 'jiangsu_yancheng', 'jiangsu', 'china'],
      建湖: [119.79961399539624, 33.47856080200124, 'jiangsu_yancheng', 'jiangsu', 'china'],
      东台: [120.3206548661063, 32.85890185271535, 'jiangsu_yancheng', 'jiangsu', 'china'],
      广陵: [119.44881750344138, 32.39793725823876, 'jiangsu_yangzhou', 'jiangsu', 'china'],
      邗江: [119.40416284772418, 32.38424997632534, 'jiangsu_yangzhou', 'jiangsu', 'china'],
      江都: [119.57407710907928, 32.43228478989405, 'jiangsu_yangzhou', 'jiangsu', 'china'],
      宝应: [119.32783646996901, 33.2427397402255, 'jiangsu_yangzhou', 'jiangsu', 'china'],
      仪征: [119.18889779900277, 32.27810067785064, 'jiangsu_yangzhou', 'jiangsu', 'china'],
      高邮: [119.45042587716173, 32.790931565568656, 'jiangsu_yangzhou', 'jiangsu', 'china'],
      京口: [119.46117651774813, 32.2118504624796, 'jiangsu_zhenjiang', 'jiangsu', 'china'],
      润州: [119.4213146706517, 32.219757681911965, 'jiangsu_zhenjiang', 'jiangsu', 'china'],
      丹徒: [119.44038317656614, 32.13489446540599, 'jiangsu_zhenjiang', 'jiangsu', 'china'],
      丹阳: [119.58849558471988, 31.997099130046287, 'jiangsu_zhenjiang', 'jiangsu', 'china'],
      扬中: [119.83462706153233, 32.24293392641876, 'jiangsu_zhenjiang', 'jiangsu', 'china'],
      句容: [119.1735649011347, 31.95369297163973, 'jiangsu_zhenjiang', 'jiangsu', 'china'],
      海陵: [119.92671731962898, 32.494217866240724, 'jiangsu_taizhou', 'jiangsu', 'china'],
      高港: [119.88808187505163, 32.32206426251864, 'jiangsu_taizhou', 'jiangsu', 'china'],
      姜堰: [120.15468791360239, 32.51451380809224, 'jiangsu_taizhou', 'jiangsu', 'china'],
      兴化: [119.84671262986816, 32.94388842319244, 'jiangsu_taizhou', 'jiangsu', 'china'],
      靖江: [120.27472362472581, 32.02419633245711, 'jiangsu_taizhou', 'jiangsu', 'china'],
      泰兴: [120.02668932285812, 32.17496259344385, 'jiangsu_taizhou', 'jiangsu', 'china'],
      宿城: [118.2855218501588, 33.943527421829074, 'jiangsu_suqian', 'jiangsu', 'china'],
      宿豫: [118.33640776589641, 33.94737370518098, 'jiangsu_suqian', 'jiangsu', 'china'],
      沭阳: [118.78236831417964, 34.1352081244347, 'jiangsu_suqian', 'jiangsu', 'china'],
      泗阳: [118.6876747502136, 33.717785869392024, 'jiangsu_suqian', 'jiangsu', 'china'],
      泗洪: [118.21822413123907, 33.46282168426937, 'jiangsu_suqian', 'jiangsu', 'china'],
      杭州: [120.16010475263418, 30.29339488572421, null, 'zhejiang', 'china'],
      宁波: [121.55620379725647, 29.874699064840804, null, 'zhejiang', 'china'],
      温州: [120.67869524174621, 28.00628720931667, null, 'zhejiang', 'china'],
      嘉兴: [120.75738445931995, 30.76864049177812, null, 'zhejiang', 'china'],
      湖州: [120.10886118308554, 30.87342073615925, null, 'zhejiang', 'china'],
      绍兴: [120.58855575953802, 30.003330615553914, null, 'zhejiang', 'china'],
      金华: [119.65593945289041, 29.095841859884317, null, 'zhejiang', 'china'],
      衢州: [118.87921615073839, 28.947430852307072, null, 'zhejiang', 'china'],
      舟山: [122.11346174823909, 30.021688629816943, null, 'zhejiang', 'china'],
      台州: [121.43501177455, 28.667675479865533, null, 'zhejiang', 'china'],
      丽水: [119.928346826321, 28.457787522111836, null, 'zhejiang', 'china'],
      上城: [120.17805674235909, 30.2559133830418, 'zhejiang_hangzhou', 'zhejiang', 'china'],
      下城: [120.17936574296525, 30.281940681242883, 'zhejiang_hangzhou', 'zhejiang', 'china'],
      江干: [120.20918625114778, 30.272472131074853, 'zhejiang_hangzhou', 'zhejiang', 'china'],
      拱墅: [120.15653975921245, 30.3206925953814, 'zhejiang_hangzhou', 'zhejiang', 'china'],
      杭州西湖区: [120.15388272683354, 30.27898819542302, 'zhejiang_hangzhou', 'zhejiang', 'china'],
      西湖区: [120.15388272683354, 30.27898819542302, 'zhejiang_hangzhou', 'zhejiang', 'china'],
      滨江: [120.21709796560641, 30.212621907373297, 'zhejiang_hangzhou', 'zhejiang', 'china'],
      萧山: [120.27720838788369, 30.168922759198647, 'zhejiang_hangzhou', 'zhejiang', 'china'],
      余杭: [120.30832668151677, 30.4268272817391, 'zhejiang_hangzhou', 'zhejiang', 'china'],
      富阳: [119.95645719229593, 30.05556059262673, 'zhejiang_hangzhou', 'zhejiang', 'china'],
      临安: [119.72165612490515, 30.23689820428887, 'zhejiang_hangzhou', 'zhejiang', 'china'],
      桐庐: [119.6916263130493, 29.80318698220136, 'zhejiang_hangzhou', 'zhejiang', 'china'],
      淳安: [119.05067088993647, 29.61052061494606, 'zhejiang_hangzhou', 'zhejiang', 'china'],
      建德: [119.2854890383909, 29.47863855280894, 'zhejiang_hangzhou', 'zhejiang', 'china'],
      海曙: [121.54614885817902, 29.880627926337876, 'zhejiang_ningbo', 'zhejiang', 'china'],
      宁波江北区: [121.56570063111425, 29.894727444441024, 'zhejiang_ningbo', 'zhejiang', 'china'],
      北仑: [121.83782853183793, 29.915419849949267, 'zhejiang_ningbo', 'zhejiang', 'china'],
      镇海: [121.71966530589764, 29.958043991931767, 'zhejiang_ningbo', 'zhejiang', 'china'],
      鄞州: [121.56483566733758, 29.838022719896422, 'zhejiang_ningbo', 'zhejiang', 'china'],
      奉化: [121.4174037446075, 29.66836933788762, 'zhejiang_ningbo', 'zhejiang', 'china'],
      象山: [121.88363640949161, 29.475974863134795, 'zhejiang_ningbo', 'zhejiang', 'china'],
      宁海: [121.43904135875401, 29.30617737806429, 'zhejiang_ningbo', 'zhejiang', 'china'],
      余姚: [121.16286670738481, 30.051168309601092, 'zhejiang_ningbo', 'zhejiang', 'china'],
      慈溪: [121.25462827916961, 30.18284786385498, 'zhejiang_ningbo', 'zhejiang', 'china'],
      鹿城: [120.68080765897118, 28.009089374553792, 'zhejiang_wenzhou', 'zhejiang', 'china'],
      龙湾: [120.77003335745817, 27.976021466817418, 'zhejiang_wenzhou', 'zhejiang', 'china'],
      瓯海: [120.6436884002612, 28.012314688542727, 'zhejiang_wenzhou', 'zhejiang', 'china'],
      洞头: [121.16273229127957, 27.84181544469171, 'zhejiang_wenzhou', 'zhejiang', 'china'],
      永嘉: [120.69745077487829, 28.15990132353856, 'zhejiang_wenzhou', 'zhejiang', 'china'],
      平阳: [120.5709019245086, 27.675193130081038, 'zhejiang_wenzhou', 'zhejiang', 'china'],
      苍南: [120.41283742269351, 27.51347576979642, 'zhejiang_wenzhou', 'zhejiang', 'china'],
      文成: [120.09893036805113, 27.79517701537322, 'zhejiang_wenzhou', 'zhejiang', 'china'],
      泰顺: [119.72277919843198, 27.563068523523203, 'zhejiang_wenzhou', 'zhejiang', 'china'],
      瑞安: [120.65273412142778, 27.785050029160992, 'zhejiang_wenzhou', 'zhejiang', 'china'],
      乐清: [120.97358698955755, 28.1224250867492, 'zhejiang_wenzhou', 'zhejiang', 'china'],
      龙港: [120.55958544453468, 27.583871343838936, 'zhejiang_wenzhou', 'zhejiang', 'china'],
      南湖: [120.75646672461188, 30.770656446162647, 'zhejiang_jiaxing', 'zhejiang', 'china'],
      秀洲: [120.7268535861301, 30.76968885403099, 'zhejiang_jiaxing', 'zhejiang', 'china'],
      嘉善: [120.92841057364843, 30.847202564400344, 'zhejiang_jiaxing', 'zhejiang', 'china'],
      海盐: [120.94847866665343, 30.528440450365107, 'zhejiang_jiaxing', 'zhejiang', 'china'],
      海宁: [120.69533996402093, 30.53152503049545, 'zhejiang_jiaxing', 'zhejiang', 'china'],
      平湖: [121.0212372184174, 30.704567632142773, 'zhejiang_jiaxing', 'zhejiang', 'china'],
      桐乡: [120.55768120013015, 30.634767490638232, 'zhejiang_jiaxing', 'zhejiang', 'china'],
      吴兴: [120.10788305609576, 30.873459697500245, 'zhejiang_huzhou', 'zhejiang', 'china'],
      南浔: [120.4238057946712, 30.878389553328503, 'zhejiang_huzhou', 'zhejiang', 'china'],
      德清: [119.97417827400302, 30.540884346521842, 'zhejiang_huzhou', 'zhejiang', 'china'],
      长兴: [119.91663646403691, 31.01075128845298, 'zhejiang_huzhou', 'zhejiang', 'china'],
      安吉: [119.69448430763161, 30.63768965288965, 'zhejiang_huzhou', 'zhejiang', 'china'],
      越城: [120.59174728249492, 30.003252226948852, 'zhejiang_shaoxing', 'zhejiang', 'china'],
      柯桥: [120.48247094306812, 30.08438789738782, 'zhejiang_shaoxing', 'zhejiang', 'china'],
      上虞: [120.88071951070289, 30.02269388340622, 'zhejiang_shaoxing', 'zhejiang', 'china'],
      新昌: [120.91223345736879, 29.506854174515393, 'zhejiang_shaoxing', 'zhejiang', 'china'],
      诸暨: [120.2507264010441, 29.720010371581125, 'zhejiang_shaoxing', 'zhejiang', 'china'],
      嵊州: [120.83529927849928, 29.59290714758481, 'zhejiang_shaoxing', 'zhejiang', 'china'],
      婺城: [119.6590253532287, 29.08889460534383, 'zhejiang_jinhua', 'zhejiang', 'china'],
      金东: [119.68781675196912, 29.10163632937376, 'zhejiang_jinhua', 'zhejiang', 'china'],
      武义: [119.82572729922771, 28.902199476104368, 'zhejiang_jinhua', 'zhejiang', 'china'],
      浦江: [119.899803991803, 29.45753128075294, 'zhejiang_jinhua', 'zhejiang', 'china'],
      磐安: [120.45166392262095, 29.05853873689822, 'zhejiang_jinhua', 'zhejiang', 'china'],
      兰溪: [119.46711825357325, 29.21570911279127, 'zhejiang_jinhua', 'zhejiang', 'china'],
      义乌: [120.0814926261709, 29.312611776668415, 'zhejiang_jinhua', 'zhejiang', 'china'],
      东阳: [120.23974210717843, 29.268881244735386, 'zhejiang_jinhua', 'zhejiang', 'china'],
      永康: [120.0428374966074, 28.901171353031177, 'zhejiang_jinhua', 'zhejiang', 'china'],
      柯城: [118.87962700787766, 28.950266876620393, 'zhejiang_quzhou', 'zhejiang', 'china'],
      衢江: [118.96422380870578, 28.97905692862852, 'zhejiang_quzhou', 'zhejiang', 'china'],
      常山: [118.52817388547015, 28.905884419671445, 'zhejiang_quzhou', 'zhejiang', 'china'],
      开化: [118.42089657825495, 29.14258024947729, 'zhejiang_quzhou', 'zhejiang', 'china'],
      龙游: [119.17894748247741, 29.03764528427321, 'zhejiang_quzhou', 'zhejiang', 'china'],
      江山: [118.63446332204579, 28.740349269483133, 'zhejiang_quzhou', 'zhejiang', 'china'],
      定海: [122.11509200231988, 30.022095944619206, 'zhejiang_zhoushan', 'zhejiang', 'china'],
      舟山普陀区: [122.30841062969279, 29.951762680389045, 'zhejiang_zhoushan', 'zhejiang', 'china'],
      岱山: [122.20768484032153, 30.248663931335972, 'zhejiang_zhoushan', 'zhejiang', 'china'],
      嵊泗: [122.46440768402661, 30.732802825028166, 'zhejiang_zhoushan', 'zhejiang', 'china'],
      椒江: [121.4374683504491, 28.682474090329503, 'zhejiang_taizhou', 'zhejiang', 'china'],
      黄岩: [121.26870462714353, 28.650514056894586, 'zhejiang_taizhou', 'zhejiang', 'china'],
      路桥: [121.37951762047139, 28.587463783446236, 'zhejiang_taizhou', 'zhejiang', 'china'],
      三门: [121.38299854815281, 29.124593310171413, 'zhejiang_taizhou', 'zhejiang', 'china'],
      天台: [121.03778351077936, 29.146819946354412, 'zhejiang_taizhou', 'zhejiang', 'china'],
      仙居: [120.74152345079982, 28.855470611388096, 'zhejiang_taizhou', 'zhejiang', 'china'],
      温岭: [121.38020218153413, 28.37443958663071, 'zhejiang_taizhou', 'zhejiang', 'china'],
      临海: [121.13782000563123, 28.85111845851922, 'zhejiang_taizhou', 'zhejiang', 'china'],
      玉环: [121.23885840218263, 28.134378183175347, 'zhejiang_taizhou', 'zhejiang', 'china'],
      莲都: [119.92885490908012, 28.456889629461774, 'zhejiang_lishui', 'zhejiang', 'china'],
      青田: [120.29852079464018, 28.140918915837574, 'zhejiang_lishui', 'zhejiang', 'china'],
      缙云: [120.08549296699, 28.660006717529818, 'zhejiang_lishui', 'zhejiang', 'china'],
      遂昌: [119.28232549645888, 28.598754199381773, 'zhejiang_lishui', 'zhejiang', 'china'],
      松阳: [119.49182249956158, 28.455851832106855, 'zhejiang_lishui', 'zhejiang', 'china'],
      云和: [119.57604924666431, 28.116776133611317, 'zhejiang_lishui', 'zhejiang', 'china'],
      庆元: [119.0737369371804, 27.624286258426586, 'zhejiang_lishui', 'zhejiang', 'china'],
      景宁畲族: [119.64110360811875, 27.983595588744553, 'zhejiang_lishui', 'zhejiang', 'china'],
      龙泉: [119.13879834971742, 28.075217827095102, 'zhejiang_lishui', 'zhejiang', 'china'],
      合肥: [117.28960111387359, 31.866967646899777, null, 'anhui', 'china'],
      芜湖: [118.38304964147348, 31.331971646517886, null, 'anhui', 'china'],
      蚌埠: [117.36963092433328, 32.9460141666707, null, 'anhui', 'china'],
      淮南: [117.02478024499925, 32.65377749814284, null, 'anhui', 'china'],
      马鞍山: [118.51450213417489, 31.695038937352763, null, 'anhui', 'china'],
      淮北: [116.80119968987314, 33.9776254955232, null, 'anhui', 'china'],
      铜陵: [117.82302533388744, 30.936049230325427, null, 'anhui', 'china'],
      安庆: [117.05012994413144, 30.51460628187926, null, 'anhui', 'china'],
      黄山: [118.32372772255482, 29.71558821044013, null, 'anhui', 'china'],
      滁州: [118.32268716644163, 32.3099801562956, null, 'anhui', 'china'],
      阜阳: [115.82619337846005, 32.90315122292624, null, 'anhui', 'china'],
      宿州: [116.99053497803581, 33.64013238963509, null, 'anhui', 'china'],
      六安: [116.51408783859344, 31.75916495833798, null, 'anhui', 'china'],
      亳州: [115.78939449237619, 33.875561342126765, null, 'anhui', 'china'],
      池州: [117.49557938822306, 30.662350765007556, null, 'anhui', 'china'],
      宣城: [118.7645363887423, 30.951454072520235, null, 'anhui', 'china'],
      瑶海: [117.32191501940234, 31.875363316495854, 'anhui_hefei', 'anhui', 'china'],
      庐阳: [117.29033036364761, 31.8747762648151, 'anhui_hefei', 'anhui', 'china'],
      蜀山: [117.26853760163773, 31.862010997379443, 'anhui_hefei', 'anhui', 'china'],
      包河: [117.2923404193127, 31.835306847553696, 'anhui_hefei', 'anhui', 'china'],
      长丰: [117.17125089183061, 32.484298993408125, 'anhui_hefei', 'anhui', 'china'],
      肥东: [117.46964258969477, 31.890211952020774, 'anhui_hefei', 'anhui', 'china'],
      肥西: [117.17270600333539, 31.725387911371705, 'anhui_hefei', 'anhui', 'china'],
      庐江: [117.29643313865988, 31.25718693890769, 'anhui_hefei', 'anhui', 'china'],
      巢湖: [117.88069192388619, 31.606446086203285, 'anhui_hefei', 'anhui', 'china'],
      镜湖: [118.38294083729045, 31.33124283754487, 'anhui_wuhu', 'anhui', 'china'],
      弋江: [118.38406256528907, 31.319040230203463, 'anhui_wuhu', 'anhui', 'china'],
      鸠江: [118.40673550366854, 31.368545236845165, 'anhui_wuhu', 'anhui', 'china'],
      湾沚: [118.57872102103417, 31.151545067839265, 'anhui_wuhu', 'anhui', 'china'],
      繁昌: [118.20775689639034, 31.087249958230707, 'anhui_wuhu', 'anhui', 'china'],
      南陵: [118.34352944658163, 30.925855580267122, 'anhui_wuhu', 'anhui', 'china'],
      无为: [117.91799460692788, 31.308778791223418, 'anhui_wuhu', 'anhui', 'china'],
      龙子湖: [117.38876325419477, 32.95658714413237, 'anhui_bengbu', 'anhui', 'china'],
      蚌山: [117.36219452410191, 32.94441009035346, 'anhui_bengbu', 'anhui', 'china'],
      禹会: [117.35900644083259, 32.93826110531062, 'anhui_bengbu', 'anhui', 'china'],
      淮上: [117.35349482731633, 32.96941656400597, 'anhui_bengbu', 'anhui', 'china'],
      怀远: [117.2067047460376, 32.96275673727612, 'anhui_bengbu', 'anhui', 'china'],
      五河: [117.89541072407971, 33.15191263811764, 'anhui_bengbu', 'anhui', 'china'],
      固镇: [117.32251307417356, 33.32443844899398, 'anhui_bengbu', 'anhui', 'china'],
      大通: [117.05951048367514, 32.63773648082152, 'anhui_huainan', 'anhui', 'china'],
      田家庵: [117.02476610541594, 32.65054479897036, 'anhui_huainan', 'anhui', 'china'],
      谢家集: [116.87176782361266, 32.60453706627631, 'anhui_huainan', 'anhui', 'china'],
      八公山: [116.8476437961368, 32.634068574079954, 'anhui_huainan', 'anhui', 'china'],
      潘集: [116.82349367462994, 32.7877761680855, 'anhui_huainan', 'anhui', 'china'],
      凤台: [116.72929991147313, 32.711251065493926, 'anhui_huainan', 'anhui', 'china'],
      寿: [116.79182814465926, 32.5833892360341, 'anhui_huainan', 'anhui', 'china'],
      花山: [118.51790312395126, 31.70472932246722, 'anhui_maanshan', 'anhui', 'china'],
      雨山: [118.49969881358423, 31.69158101648541, 'anhui_maanshan', 'anhui', 'china'],
      博望: [118.85030674471702, 31.56808665725555, 'anhui_maanshan', 'anhui', 'china'],
      当涂: [118.49645081562048, 31.561859316843307, 'anhui_maanshan', 'anhui', 'china'],
      含山: [118.1120345482581, 31.733843004493398, 'anhui_maanshan', 'anhui', 'china'],
      和: [118.36957603650389, 31.72241543154058, 'anhui_maanshan', 'anhui', 'china'],
      杜集: [116.84052021302153, 33.99696218296791, 'anhui_huaibei', 'anhui', 'china'],
      相山: [116.79728952272048, 33.976904807904376, 'anhui_huaibei', 'anhui', 'china'],
      烈山: [116.81606160007892, 33.89523345114741, 'anhui_huaibei', 'anhui', 'china'],
      濉溪: [116.7738263199509, 33.92272686699742, 'anhui_huaibei', 'anhui', 'china'],
      铜官: [117.8226183643136, 30.93372011812276, 'anhui_tongling', 'anhui', 'china'],
      义安: [117.79885473731974, 30.95805329168648, 'anhui_tongling', 'anhui', 'china'],
      铜陵郊区: [117.81357545328727, 30.91487070548479, 'anhui_tongling', 'anhui', 'china'],
      枞阳: [117.22845632319475, 30.7068178015899, 'anhui_tongling', 'anhui', 'china'],
      迎江: [117.0515486006999, 30.51213211915935, 'anhui_anqing', 'anhui', 'china'],
      大观: [117.0410522694618, 30.511554735248954, 'anhui_anqing', 'anhui', 'china'],
      宜秀: [117.07658100159902, 30.547018521214486, 'anhui_anqing', 'anhui', 'china'],
      怀宁: [116.83526055099615, 30.74068256056951, 'anhui_anqing', 'anhui', 'china'],
      太湖: [116.31168314134376, 30.457950287840717, 'anhui_anqing', 'anhui', 'china'],
      宿松: [116.12676594471867, 30.16416060911892, 'anhui_anqing', 'anhui', 'china'],
      望江: [116.69751229049548, 30.1305999636691, 'anhui_anqing', 'anhui', 'china'],
      岳西: [116.36703455996769, 30.854337350500604, 'anhui_anqing', 'anhui', 'china'],
      桐城: [116.96618469953933, 31.05638998643844, 'anhui_anqing', 'anhui', 'china'],
      潜山: [116.58026948209533, 30.643895962026637, 'anhui_anqing', 'anhui', 'china'],
      屯溪: [118.32375675160759, 29.715535297343298, 'anhui_huangshan', 'anhui', 'china'],
      黄山区: [118.14323396509378, 30.300169470489987, 'anhui_huangshan', 'anhui', 'china'],
      徽州: [118.34619200712277, 29.831381316045427, 'anhui_huangshan', 'anhui', 'china'],
      歙: [118.43444083544672, 29.87403277706163, 'anhui_huangshan', 'anhui', 'china'],
      休宁: [118.19497662821223, 29.79517541190456, 'anhui_huangshan', 'anhui', 'china'],
      黟: [117.94936936396272, 29.930037075088233, 'anhui_huangshan', 'anhui', 'china'],
      祁门: [117.72362930784008, 29.859816626897185, 'anhui_huangshan', 'anhui', 'china'],
      琅琊: [118.32289801915906, 32.31015091304819, 'anhui_chuzhou', 'anhui', 'china'],
      南谯: [118.3034302404648, 32.33597007461899, 'anhui_chuzhou', 'anhui', 'china'],
      来安: [118.43971103210052, 32.45656720218152, 'anhui_chuzhou', 'anhui', 'china'],
      全椒: [118.27516884487835, 32.09953202543922, 'anhui_chuzhou', 'anhui', 'china'],
      定远: [117.69025155257886, 32.53299280462769, 'anhui_chuzhou', 'anhui', 'china'],
      凤阳: [117.56898691219244, 32.87300701044661, 'anhui_chuzhou', 'anhui', 'china'],
      天长: [119.0177216763989, 32.687527006808594, 'anhui_chuzhou', 'anhui', 'china'],
      明光: [118.0046054887494, 32.78706600123674, 'anhui_chuzhou', 'anhui', 'china'],
      颍州: [115.82035105291745, 32.89750027650514, 'anhui_fuyang', 'anhui', 'china'],
      颍东: [115.86536471842864, 32.9145196262938, 'anhui_fuyang', 'anhui', 'china'],
      颍泉: [115.81094273135147, 32.93113861638722, 'anhui_fuyang', 'anhui', 'china'],
      临泉: [115.26828409362946, 33.06835278804557, 'anhui_fuyang', 'anhui', 'china'],
      太和: [115.63385079736182, 33.16797217666682, 'anhui_fuyang', 'anhui', 'china'],
      阜南: [115.597034827679, 32.644091766326966, 'anhui_fuyang', 'anhui', 'china'],
      颍上: [116.26557404528565, 32.64322449595361, 'anhui_fuyang', 'anhui', 'china'],
      界首: [115.36869350328192, 33.26732986883867, 'anhui_fuyang', 'anhui', 'china'],
      埇桥: [116.98976307155505, 33.640083657717064, 'anhui_suzhou', 'anhui', 'china'],
      砀山: [116.35768663487119, 34.43195164694073, 'anhui_suzhou', 'anhui', 'china'],
      萧: [116.95198272997342, 34.188924777837144, 'anhui_suzhou', 'anhui', 'china'],
      灵璧: [117.55807531237387, 33.54633811418238, 'anhui_suzhou', 'anhui', 'china'],
      泗: [117.89201321308448, 33.483323503978504, 'anhui_suzhou', 'anhui', 'china'],
      金安: [116.50971366306983, 31.76071140578927, 'anhui_liuan', 'anhui', 'china'],
      裕安: [116.50101030826664, 31.7567715573043, 'anhui_liuan', 'anhui', 'china'],
      叶集: [115.9200153762601, 31.85401154800706, 'anhui_liuan', 'anhui', 'china'],
      霍邱: [116.28527682825329, 32.34765286554098, 'anhui_liuan', 'anhui', 'china'],
      舒城: [116.95069820884002, 31.46851000976786, 'anhui_liuan', 'anhui', 'china'],
      金寨: [115.88506941488959, 31.687427754985965, 'anhui_liuan', 'anhui', 'china'],
      霍山: [116.3396482648047, 31.4081248622192, 'anhui_liuan', 'anhui', 'china'],
      谯城: [115.78767689095733, 33.87548204028609, 'anhui_bozhou', 'anhui', 'china'],
      涡阳: [116.21815971157835, 33.50852108212716, 'anhui_bozhou', 'anhui', 'china'],
      蒙城: [116.56690545830104, 33.266638708756744, 'anhui_bozhou', 'anhui', 'china'],
      利辛: [116.21437989917973, 33.149228486098956, 'anhui_bozhou', 'anhui', 'china'],
      贵池: [117.49476131059669, 30.663698065179297, 'anhui_chizhou', 'anhui', 'china'],
      东至: [117.02791879129965, 30.102714845250926, 'anhui_chizhou', 'anhui', 'china'],
      石台: [117.48929804931025, 30.21666739349182, 'anhui_chizhou', 'anhui', 'china'],
      青阳: [117.8638562538814, 30.644401357473097, 'anhui_chizhou', 'anhui', 'china'],
      宣州: [118.76495198793185, 30.951796478709, 'anhui_xuancheng', 'anhui', 'china'],
      郎溪: [119.19151145370749, 31.133929114096613, 'anhui_xuancheng', 'anhui', 'china'],
      泾: [118.41886654432311, 30.69201456142487, 'anhui_xuancheng', 'anhui', 'china'],
      绩溪: [118.60122171695681, 30.071178897096363, 'anhui_xuancheng', 'anhui', 'china'],
      旌德: [118.54953486111926, 30.294284872941294, 'anhui_xuancheng', 'anhui', 'china'],
      宁国: [118.9900164706721, 30.63218261756328, 'anhui_xuancheng', 'anhui', 'china'],
      广德: [119.42397149006054, 30.899335544362625, 'anhui_xuancheng', 'anhui', 'china'],
      福州: [119.31274248535382, 26.081376135578243, null, 'fujian', 'china'],
      厦门: [118.11673105587184, 24.496472035544866, null, 'fujian', 'china'],
      莆田: [119.01405885918845, 25.436963578990557, null, 'fujian', 'china'],
      三明: [117.641507920223, 26.271349634393932, null, 'fujian', 'china'],
      泉州: [118.59590998347635, 24.914861945845495, null, 'fujian', 'china'],
      漳州: [117.66839376355951, 24.516549656996204, null, 'fujian', 'china'],
      南平: [118.18492032562563, 26.641777945920786, null, 'fujian', 'china'],
      龙岩: [117.03629029605524, 25.097609437656892, null, 'fujian', 'china'],
      宁德: [119.53352396108173, 26.665577890501662, null, 'fujian', 'china'],
      福州鼓楼区: [119.3057640193197, 26.088477763336225, 'fujian_fuzhou', 'fujian', 'china'],
      台江区: [119.31667280836821, 26.064616608141275, 'fujian_fuzhou', 'fujian', 'china'],
      仓山: [119.32752939152694, 26.044716985302514, 'fujian_fuzhou', 'fujian', 'china'],
      马尾: [119.46529133544877, 25.997614927208286, 'fujian_fuzhou', 'fujian', 'china'],
      晋安: [119.33517918492066, 26.084544769563195, 'fujian_fuzhou', 'fujian', 'china'],
      长乐: [119.51729650778243, 25.96690476804818, 'fujian_fuzhou', 'fujian', 'china'],
      闽侯: [119.15155018325041, 26.154818872460286, 'fujian_fuzhou', 'fujian', 'china'],
      连江: [119.5448357592083, 26.20831765582386, 'fujian_fuzhou', 'fujian', 'china'],
      罗源: [119.55913664754942, 26.493180206632413, 'fujian_fuzhou', 'fujian', 'china'],
      闽清: [118.87498330216705, 26.229469611038315, 'fujian_fuzhou', 'fujian', 'china'],
      永泰: [118.94554215758852, 25.871016877698402, 'fujian_fuzhou', 'fujian', 'china'],
      平潭: [119.79769805426777, 25.50964869535491, 'fujian_fuzhou', 'fujian', 'china'],
      福清: [119.38348110048182, 25.726533805484223, 'fujian_fuzhou', 'fujian', 'china'],
      思明: [118.09424488352576, 24.468380645505835, 'fujian_xiamen', 'fujian', 'china'],
      海沧: [118.04292404733312, 24.498282588522784, 'fujian_xiamen', 'fujian', 'china'],
      湖里: [118.11594718352602, 24.518778595233492, 'fujian_xiamen', 'fujian', 'china'],
      集美: [118.10731572321608, 24.579032983520356, 'fujian_xiamen', 'fujian', 'china'],
      同安: [118.15702753643248, 24.73503226835874, 'fujian_xiamen', 'fujian', 'china'],
      翔安: [118.24937504100984, 24.64326227193882, 'fujian_xiamen', 'fujian', 'china'],
      城厢: [119.00755624080821, 25.43957404408195, 'fujian_putian', 'fujian', 'china'],
      涵江: [119.125659809041, 25.46508351052744, 'fujian_putian', 'fujian', 'china'],
      荔城: [119.02649895477546, 25.436224209852003, 'fujian_putian', 'fujian', 'china'],
      秀屿: [119.09917340248586, 25.321809322894424, 'fujian_putian', 'fujian', 'china'],
      仙游: [118.70079378646932, 25.362793388822613, 'fujian_putian', 'fujian', 'china'],
      梅列: [117.64338728856625, 26.275081439736784, 'fujian_sanming', 'fujian', 'china'],
      三元: [117.61383195319722, 26.240514596037325, 'fujian_sanming', 'fujian', 'china'],
      明溪: [117.20836234427802, 26.363225923153436, 'fujian_sanming', 'fujian', 'china'],
      清流: [116.82241321103815, 26.183271393374948, 'fujian_sanming', 'fujian', 'china'],
      宁化: [116.66616769937166, 26.266107524049566, 'fujian_sanming', 'fujian', 'china'],
      大田: [117.85579746298676, 25.697117259012476, 'fujian_sanming', 'fujian', 'china'],
      尤溪: [118.19502122259857, 26.175556029480088, 'fujian_sanming', 'fujian', 'china'],
      沙: [117.7956626924498, 26.403046346783334, 'fujian_sanming', 'fujian', 'china'],
      将乐: [117.47996287786276, 26.734995135516815, 'fujian_sanming', 'fujian', 'china'],
      泰宁: [117.18411778239212, 26.90365004140628, 'fujian_sanming', 'fujian', 'china'],
      建宁: [116.85233847278786, 26.837319590280536, 'fujian_sanming', 'fujian', 'china'],
      永安: [117.37087714142952, 25.980418910988206, 'fujian_sanming', 'fujian', 'china'],
      鲤城: [118.595417184599, 24.913663338108417, 'fujian_quanzhou', 'fujian', 'china'],
      丰泽: [118.61170424555958, 24.90178831700326, 'fujian_quanzhou', 'fujian', 'china'],
      洛江: [118.67673026922893, 24.94746074916353, 'fujian_quanzhou', 'fujian', 'china'],
      泉港: [118.91872811254247, 25.13318964988871, 'fujian_quanzhou', 'fujian', 'china'],
      惠安: [118.80537039956683, 25.03507204492498, 'fujian_quanzhou', 'fujian', 'china'],
      安溪: [118.19243977087336, 25.063083775606337, 'fujian_quanzhou', 'fujian', 'china'],
      永春: [118.30151096242193, 25.326813547285393, 'fujian_quanzhou', 'fujian', 'china'],
      德化: [118.24954472321353, 25.49478325859499, 'fujian_quanzhou', 'fujian', 'china'],
      金门: [118.3296338919541, 24.44276386877599, 'fujian_quanzhou', 'fujian', 'china'],
      石狮: [118.63498062076249, 24.73765839662478, 'fujian_quanzhou', 'fujian', 'china'],
      晋江: [118.5837728113392, 24.81353688667378, 'fujian_quanzhou', 'fujian', 'china'],
      南安: [118.3936003425541, 24.96516252616448, 'fujian_quanzhou', 'fujian', 'china'],
      芗城: [117.66305285019918, 24.515612151830066, 'fujian_zhangzhou', 'fujian', 'china'],
      龙文: [117.6779665842906, 24.521367795323602, 'fujian_zhangzhou', 'fujian', 'china'],
      云霄: [117.34739681067171, 23.956674802405356, 'fujian_zhangzhou', 'fujian', 'china'],
      漳浦: [117.6204671459371, 24.12416848881702, 'fujian_zhangzhou', 'fujian', 'china'],
      诏安: [117.18264210808925, 23.716487707656086, 'fujian_zhangzhou', 'fujian', 'china'],
      长泰: [117.76245316360837, 24.62737105812186, 'fujian_zhangzhou', 'fujian', 'china'],
      东山: [117.43424152776367, 23.708520223300695, 'fujian_zhangzhou', 'fujian', 'china'],
      南靖: [117.37190991759951, 24.522766655518907, 'fujian_zhangzhou', 'fujian', 'china'],
      平和: [117.32011066729683, 24.371892258208426, 'fujian_zhangzhou', 'fujian', 'china'],
      华安: [117.54289977857503, 25.007073391447992, 'fujian_zhangzhou', 'fujian', 'china'],
      龙海: [117.82374567188582, 24.451468752884924, 'fujian_zhangzhou', 'fujian', 'china'],
      延平: [118.1853780508506, 26.64223770197144, 'fujian_nanping', 'fujian', 'china'],
      建阳: [118.12920112177989, 27.33784429833565, 'fujian_nanping', 'fujian', 'china'],
      顺昌: [117.81423889976443, 26.798813110491345, 'fujian_nanping', 'fujian', 'china'],
      浦城: [118.54327564752889, 27.92653232006125, 'fujian_nanping', 'fujian', 'china'],
      光泽: [117.34436095213353, 27.54894377203627, 'fujian_nanping', 'fujian', 'china'],
      松溪: [118.78995059899172, 27.532019362009734, 'fujian_nanping', 'fujian', 'china'],
      政和: [118.86524832958418, 27.371043551345252, 'fujian_nanping', 'fujian', 'china'],
      邵武: [117.49795870168651, 27.3442378774814, 'fujian_nanping', 'fujian', 'china'],
      武夷山: [118.03938064608631, 27.757460007906694, 'fujian_nanping', 'fujian', 'china'],
      建瓯: [118.32820306836263, 27.041377752442155, 'fujian_nanping', 'fujian', 'china'],
      新罗: [117.03723516924379, 25.0977891777687, 'fujian_longyan', 'fujian', 'china'],
      龙岩永定区: [116.73918103795941, 24.726491275770478, 'fujian_longyan', 'fujian', 'china'],
      长汀: [116.36755779781257, 25.848123104037118, 'fujian_longyan', 'fujian', 'china'],
      上杭: [116.43123413956572, 25.05610917777921, 'fujian_longyan', 'fujian', 'china'],
      武平: [116.10751173088526, 25.0943039566871, 'fujian_longyan', 'fujian', 'china'],
      连城: [116.76313050384144, 25.714855300765674, 'fujian_longyan', 'fujian', 'china'],
      漳平: [117.42728633554381, 25.297240798481138, 'fujian_longyan', 'fujian', 'china'],
      蕉城: [119.53366718722825, 26.66558991019955, 'fujian_ningde', 'fujian', 'china'],
      霞浦: [120.01163844911255, 26.888415154895625, 'fujian_ningde', 'fujian', 'china'],
      古田: [118.74973720242389, 26.583140195316634, 'fujian_ningde', 'fujian', 'china'],
      屏南: [118.99413800434586, 26.916500932681753, 'fujian_ningde', 'fujian', 'china'],
      寿宁: [119.51315182470005, 27.464069330647074, 'fujian_ningde', 'fujian', 'china'],
      周宁: [119.34480487479243, 27.108746079244632, 'fujian_ningde', 'fujian', 'china'],
      柘荣: [119.90467486636442, 27.242370080923287, 'fujian_ningde', 'fujian', 'china'],
      福安: [119.65721076322487, 27.090544876952464, 'fujian_ningde', 'fujian', 'china'],
      福鼎: [120.22620462135168, 27.325056704758854, 'fujian_ningde', 'fujian', 'china'],
      南昌: [115.89863778631067, 28.682531197462737, null, 'jiangxi', 'china'],
      景德镇: [117.22115461262564, 29.2986479866198, null, 'jiangxi', 'china'],
      萍乡: [113.8586946610647, 27.62898940636367, null, 'jiangxi', 'china'],
      九江: [115.99936940724947, 29.717758491786075, null, 'jiangxi', 'china'],
      新余: [114.9373119330152, 27.81684437029167, null, 'jiangxi', 'china'],
      鹰潭: [117.04037239706527, 28.244572137013677, null, 'jiangxi', 'china'],
      赣州: [114.9467471357617, 25.85714873719714, null, 'jiangxi', 'china'],
      吉安: [114.99284944945452, 27.117762185238465, null, 'jiangxi', 'china'],
      宜春: [114.3976223834958, 27.810275084955, null, 'jiangxi', 'china'],
      抚州: [116.36491753489844, 27.9896544794628, null, 'jiangxi', 'china'],
      上饶: [117.97761834627292, 28.450716011078654, null, 'jiangxi', 'china'],
      东湖: [115.8961794892384, 28.68898283264516, 'jiangxi_nanchang', 'jiangxi', 'china'],
      南昌西湖区: [115.9170589597796, 28.669204139589244, 'jiangxi_nanchang', 'jiangxi', 'china'],
      青云谱: [115.91371017873182, 28.641994026423813, 'jiangxi_nanchang', 'jiangxi', 'china'],
      青山湖: [115.95554877101361, 28.695311650682374, 'jiangxi_nanchang', 'jiangxi', 'china'],
      新建: [115.82727653867951, 28.69695145549404, 'jiangxi_nanchang', 'jiangxi', 'china'],
      红谷滩: [115.86465357058725, 28.70385743150076, 'jiangxi_nanchang', 'jiangxi', 'china'],
      南昌县: [115.94891750525818, 28.54991110704234, 'jiangxi_nanchang', 'jiangxi', 'china'],
      安义: [115.55954413362466, 28.847662353191318, 'jiangxi_nanchang', 'jiangxi', 'china'],
      进贤: [116.27411626716516, 28.371962844305283, 'jiangxi_nanchang', 'jiangxi', 'china'],
      昌江: [117.20159337630838, 29.29421877082671, 'jiangxi_jingdezhen', 'jiangxi', 'china'],
      珠山: [117.22130414496621, 29.29890271434161, 'jiangxi_jingdezhen', 'jiangxi', 'china'],
      浮梁: [117.2240652209268, 29.358384550583995, 'jiangxi_jingdezhen', 'jiangxi', 'china'],
      乐平: [117.13581129186214, 28.973673838600302, 'jiangxi_jingdezhen', 'jiangxi', 'china'],
      安源: [113.86154133904515, 27.631919767155203, 'jiangxi_pingxiang', 'jiangxi', 'china'],
      湘东: [113.75205672160247, 27.645571922170156, 'jiangxi_pingxiang', 'jiangxi', 'china'],
      莲花: [113.96214550001837, 27.13357458224053, 'jiangxi_pingxiang', 'jiangxi', 'china'],
      上栗: [113.80708691071851, 27.882866676123655, 'jiangxi_pingxiang', 'jiangxi', 'china'],
      芦溪: [114.04777098507013, 27.639448207144795, 'jiangxi_pingxiang', 'jiangxi', 'china'],
      濂溪: [115.9967151913084, 29.68187944824349, 'jiangxi_jiujiang', 'jiangxi', 'china'],
      浔阳: [116.00248823364565, 29.73041166268063, 'jiangxi_jiujiang', 'jiangxi', 'china'],
      柴桑: [115.89944383380038, 29.616313024883873, 'jiangxi_jiujiang', 'jiangxi', 'china'],
      武宁: [115.11210946758095, 29.266255799962565, 'jiangxi_jiujiang', 'jiangxi', 'china'],
      修水: [114.57990524669754, 29.0387885379832, 'jiangxi_jiujiang', 'jiangxi', 'china'],
      永修: [115.8154599131513, 29.02451668561726, 'jiangxi_jiujiang', 'jiangxi', 'china'],
      德安: [115.76915601966681, 29.33334596094872, 'jiangxi_jiujiang', 'jiangxi', 'china'],
      都昌: [116.21167155469765, 29.28085578611438, 'jiangxi_jiujiang', 'jiangxi', 'china'],
      湖口: [116.2508201501384, 29.732192822991394, 'jiangxi_jiujiang', 'jiangxi', 'china'],
      彭泽: [116.56238317446767, 29.904763885118026, 'jiangxi_jiujiang', 'jiangxi', 'china'],
      瑞昌: [115.67552435559196, 29.682895500169344, 'jiangxi_jiujiang', 'jiangxi', 'china'],
      共青城: [115.81210887877037, 29.254211127073603, 'jiangxi_jiujiang', 'jiangxi', 'china'],
      庐山: [116.05016018511965, 29.46251144718909, 'jiangxi_jiujiang', 'jiangxi', 'china'],
      渝水: [114.93043186933957, 27.825058965220933, 'jiangxi_xinyu', 'jiangxi', 'china'],
      分宜: [114.68180079008263, 27.81705639403701, 'jiangxi_xinyu', 'jiangxi', 'china'],
      月湖: [117.04064738703772, 28.245005160399934, 'jiangxi_yingtan', 'jiangxi', 'china'],
      余江: [116.82935291286064, 28.21183168456779, 'jiangxi_yingtan', 'jiangxi', 'china'],
      贵溪: [117.21857528422562, 28.289727203469834, 'jiangxi_yingtan', 'jiangxi', 'china'],
      章贡: [114.94519433072148, 25.857520939154757, 'jiangxi_ganzhou', 'jiangxi', 'china'],
      南康: [114.76344438036924, 25.66759518461442, 'jiangxi_ganzhou', 'jiangxi', 'china'],
      赣县: [115.02503286872478, 25.871086832934953, 'jiangxi_ganzhou', 'jiangxi', 'china'],
      信丰: [114.93738920598916, 25.38624606372517, 'jiangxi_ganzhou', 'jiangxi', 'china'],
      大余: [114.36865287023798, 25.402274510753625, 'jiangxi_ganzhou', 'jiangxi', 'china'],
      上犹: [114.54710859899586, 25.799939218602486, 'jiangxi_ganzhou', 'jiangxi', 'china'],
      崇义: [114.31392728325808, 25.693594911737392, 'jiangxi_ganzhou', 'jiangxi', 'china'],
      安远: [115.39889369331031, 25.140315661946264, 'jiangxi_ganzhou', 'jiangxi', 'china'],
      定南: [115.03923433038426, 24.780006339010942, 'jiangxi_ganzhou', 'jiangxi', 'china'],
      全南: [114.5381742643519, 24.74834410478111, 'jiangxi_ganzhou', 'jiangxi', 'china'],
      宁都: [116.02523525005002, 26.47820583884321, 'jiangxi_ganzhou', 'jiangxi', 'china'],
      于都: [115.41771195797543, 25.96105894067956, 'jiangxi_ganzhou', 'jiangxi', 'china'],
      兴国: [115.35841314266965, 26.33645682799196, 'jiangxi_ganzhou', 'jiangxi', 'china'],
      会昌: [115.79760662810689, 25.605439639894737, 'jiangxi_ganzhou', 'jiangxi', 'china'],
      寻乌: [115.65788761237802, 24.960160117181236, 'jiangxi_ganzhou', 'jiangxi', 'china'],
      石城: [116.34884003713186, 26.332238242535663, 'jiangxi_ganzhou', 'jiangxi', 'china'],
      瑞金: [116.04126517195242, 25.8816104219492, 'jiangxi_ganzhou', 'jiangxi', 'china'],
      龙南: [114.7992110775585, 24.910487473130264, 'jiangxi_ganzhou', 'jiangxi', 'china'],
      吉州: [114.99381209574312, 27.11841326527511, 'jiangxi_jian', 'jiangxi', 'china'],
      青原: [115.02287268363989, 27.11153729378829, 'jiangxi_jian', 'jiangxi', 'china'],
      吉安县: [114.9117120639869, 27.045713545693175, 'jiangxi_jian', 'jiangxi', 'china'],
      吉水: [115.14112821321679, 27.219108941972927, 'jiangxi_jian', 'jiangxi', 'china'],
      峡江: [115.32573191822156, 27.58720382573714, 'jiangxi_jian', 'jiangxi', 'china'],
      新干: [115.4058568385204, 27.76157840474556, 'jiangxi_jian', 'jiangxi', 'china'],
      永丰: [115.4419618610617, 27.32741987241749, 'jiangxi_jian', 'jiangxi', 'china'],
      泰和: [114.90799263316971, 26.79582475330283, 'jiangxi_jian', 'jiangxi', 'china'],
      遂川: [114.52343256039742, 26.329587107366766, 'jiangxi_jian', 'jiangxi', 'china'],
      万安: [114.79126887671902, 26.467750504636538, 'jiangxi_jian', 'jiangxi', 'china'],
      安福: [114.62029655949145, 27.38900775879086, 'jiangxi_jian', 'jiangxi', 'china'],
      永新: [114.24894911284905, 26.951059591852207, 'jiangxi_jian', 'jiangxi', 'china'],
      井冈山: [114.29096289875663, 26.751680962274076, 'jiangxi_jian', 'jiangxi', 'china'],
      袁州: [114.39385070060868, 27.80615984149909, 'jiangxi_yichun', 'jiangxi', 'china'],
      奉新: [115.39649093214615, 28.706375559972425, 'jiangxi_yichun', 'jiangxi', 'china'],
      万载: [114.4555349909225, 28.110514821118745, 'jiangxi_yichun', 'jiangxi', 'china'],
      上高: [114.93916008655081, 28.240841364385222, 'jiangxi_yichun', 'jiangxi', 'china'],
      宜丰: [114.79395171888228, 28.393968016698235, 'jiangxi_yichun', 'jiangxi', 'china'],
      靖安: [115.36829339925762, 28.866340210161695, 'jiangxi_yichun', 'jiangxi', 'china'],
      铜鼓: [114.37654894532929, 28.527247569936964, 'jiangxi_yichun', 'jiangxi', 'china'],
      丰城: [115.79243384502773, 28.19784017991156, 'jiangxi_yichun', 'jiangxi', 'china'],
      樟树: [115.54981519768687, 28.062117072611866, 'jiangxi_yichun', 'jiangxi', 'china'],
      高安: [115.38809567626654, 28.42660194271221, 'jiangxi_yichun', 'jiangxi', 'china'],
      临川: [116.36795825067722, 27.987771397211688, 'jiangxi_fuzhou', 'jiangxi', 'china'],
      东乡: [116.61188072923383, 28.23842017417238, 'jiangxi_fuzhou', 'jiangxi', 'china'],
      南城: [116.64585338297688, 27.56165646926412, 'jiangxi_fuzhou', 'jiangxi', 'china'],
      黎川: [116.92109680137177, 27.298479597560135, 'jiangxi_fuzhou', 'jiangxi', 'china'],
      南丰: [116.53941106916322, 27.216399210953046, 'jiangxi_fuzhou', 'jiangxi', 'china'],
      崇仁: [116.0655804047918, 27.767098875740125, 'jiangxi_fuzhou', 'jiangxi', 'china'],
      乐安: [115.84496704636454, 27.42595248421445, 'jiangxi_fuzhou', 'jiangxi', 'china'],
      宜黄: [116.2295980982756, 27.552166147034026, 'jiangxi_fuzhou', 'jiangxi', 'china'],
      金溪: [116.78519715233851, 27.913579867632777, 'jiangxi_fuzhou', 'jiangxi', 'china'],
      资溪: [117.07266130569198, 27.712193548440457, 'jiangxi_fuzhou', 'jiangxi', 'china'],
      广昌: [116.33383831880353, 26.844147779923773, 'jiangxi_fuzhou', 'jiangxi', 'china'],
      信州: [117.97695469284875, 28.45168084871203, 'jiangxi_shangrao', 'jiangxi', 'china'],
      广丰: [118.19627873254396, 28.446590752902818, 'jiangxi_shangrao', 'jiangxi', 'china'],
      广信: [117.91271394703395, 28.45956440770143, 'jiangxi_shangrao', 'jiangxi', 'china'],
      玉山: [118.25096040279263, 28.679234481898547, 'jiangxi_shangrao', 'jiangxi', 'china'],
      铅山: [117.71831965477199, 28.317211747760734, 'jiangxi_shangrao', 'jiangxi', 'china'],
      横峰: [117.61465082822106, 28.421418908106467, 'jiangxi_shangrao', 'jiangxi', 'china'],
      弋阳: [117.4415443269665, 28.40813757541012, 'jiangxi_shangrao', 'jiangxi', 'china'],
      余干: [116.69766003234358, 28.697420237413592, 'jiangxi_shangrao', 'jiangxi', 'china'],
      鄱阳: [116.68025245207366, 28.999302642044483, 'jiangxi_shangrao', 'jiangxi', 'china'],
      万年: [117.07673610176619, 28.698289147039738, 'jiangxi_shangrao', 'jiangxi', 'china'],
      婺源: [117.86863611956055, 29.260150884224977, 'jiangxi_shangrao', 'jiangxi', 'china'],
      德兴: [117.58521243452905, 28.95119433301436, 'jiangxi_shangrao', 'jiangxi', 'china'],
      济南: [117.00729904786878, 36.68215318771068, null, 'shandong', 'china'],
      青岛: [120.36155031092716, 36.08932623437671, null, 'shandong', 'china'],
      淄博: [118.05414310882685, 36.82088974078084, null, 'shandong', 'china'],
      枣庄: [117.56452919280777, 34.86221722425157, null, 'shandong', 'china'],
      东营: [118.67112644813339, 37.44081018497353, null, 'shandong', 'china'],
      烟台: [121.39795831558764, 37.544990383344356, null, 'shandong', 'china'],
      潍坊: [119.11367045172042, 36.7149137941711, null, 'shandong', 'china'],
      济宁: [116.59385749949456, 35.4210722980021, null, 'shandong', 'china'],
      泰安: [117.1354529238124, 36.20127639185787, null, 'shandong', 'china'],
      威海: [122.1229582652592, 37.51544867909896, null, 'shandong', 'china'],
      日照: [119.46783319486465, 35.434236003854615, null, 'shandong', 'china'],
      临沂: [118.33286232675304, 35.07162248042407, null, 'shandong', 'china'],
      德州: [116.3139256286196, 37.460018941845625, null, 'shandong', 'china'],
      聊城: [115.98695820551256, 36.46165942053031, null, 'shandong', 'china'],
      滨州: [118.02358122957827, 37.38919126994154, null, 'shandong', 'china'],
      菏泽: [115.47585875947037, 35.25253648255518, null, 'shandong', 'china'],
      历下: [117.04516384259537, 36.67001455777626, 'shandong_jinan', 'shandong', 'china'],
      济南市中区: [117.00537281990323, 36.66370532211931, 'shandong_jinan', 'shandong', 'china'],
      市中区: [117.00537281990323, 36.66370532211931, 'shandong_jinan', 'shandong', 'china'],
      槐荫: [116.95451372918039, 36.67388140830681, 'shandong_jinan', 'shandong', 'china'],
      天桥: [117.00245943650677, 36.69971175124182, 'shandong_jinan', 'shandong', 'china'],
      历城: [117.07033460757806, 36.68739410504436, 'shandong_jinan', 'shandong', 'china'],
      长清: [116.75228192412372, 36.56730246690678, 'shandong_jinan', 'shandong', 'china'],
      章丘: [117.54729238133032, 36.71773520836574, 'shandong_jinan', 'shandong', 'china'],
      济阳: [117.18265822523425, 36.98243165177429, 'shandong_jinan', 'shandong', 'china'],
      莱芜: [117.68236289283648, 36.22015042540573, 'shandong_jinan', 'shandong', 'china'],
      钢城: [117.82677626347417, 36.06422059309882, 'shandong_jinan', 'shandong', 'china'],
      平阴: [116.4616713064809, 36.29258904760677, 'shandong_jinan', 'shandong', 'china'],
      商河: [117.16289658429685, 37.31642606890341, 'shandong_jinan', 'shandong', 'china'],
      市南: [120.40248891270825, 36.07677789963203, 'shandong_qingdao', 'shandong', 'china'],
      市北: [120.36140323563127, 36.09016244329321, 'shandong_qingdao', 'shandong', 'china'],
      黄岛: [120.00190849854076, 35.88148667624583, 'shandong_qingdao', 'shandong', 'china'],
      崂山: [120.47379228717779, 36.108849940004056, 'shandong_qingdao', 'shandong', 'china'],
      李沧: [120.42786082966926, 36.16566747014324, 'shandong_qingdao', 'shandong', 'china'],
      城阳: [120.39562336299251, 36.31284732997253, 'shandong_qingdao', 'shandong', 'china'],
      即墨: [120.4538862146591, 36.39680283926576, 'shandong_qingdao', 'shandong', 'china'],
      胶州: [120.01261173176844, 36.29222310281712, 'shandong_qingdao', 'shandong', 'china'],
      平度: [119.96556352460152, 36.79462957146165, 'shandong_qingdao', 'shandong', 'china'],
      莱西: [120.53282755472051, 36.87082410804744, 'shandong_qingdao', 'shandong', 'china'],
      淄川: [117.97410667081928, 36.65360122461786, 'shandong_zibo', 'shandong', 'china'],
      张店: [118.05998189195854, 36.813108041313185, 'shandong_zibo', 'shandong', 'china'],
      博山: [117.86468191066056, 36.50377607252761, 'shandong_zibo', 'shandong', 'china'],
      临淄: [118.31241790149363, 36.822915393563314, 'shandong_zibo', 'shandong', 'china'],
      周村: [117.85742545346176, 36.80998951065488, 'shandong_zibo', 'shandong', 'china'],
      桓台: [118.10800833189532, 36.965924522798396, 'shandong_zibo', 'shandong', 'china'],
      高青: [117.83622383474582, 37.17587961457161, 'shandong_zibo', 'shandong', 'china'],
      沂源: [118.17267649736289, 36.19220932952924, 'shandong_zibo', 'shandong', 'china'],
      枣庄市中区: [117.56384895023037, 34.8624341045809, 'shandong_zaozhuang', 'shandong', 'china'],
      薛城: [117.27176541699362, 34.803975200547086, 'shandong_zaozhuang', 'shandong', 'china'],
      峄城: [117.59271830143976, 34.7739733899732, 'shandong_zaozhuang', 'shandong', 'china'],
      台儿庄: [117.74117749879088, 34.57106944494393, 'shandong_zaozhuang', 'shandong', 'china'],
      山亭: [117.46542426588624, 35.102237617255895, 'shandong_zaozhuang', 'shandong', 'china'],
      滕州: [117.16867116304184, 35.09429319562478, 'shandong_zaozhuang', 'shandong', 'china'],
      东营区: [118.51416397329707, 37.46724429689462, 'shandong_dongying', 'shandong', 'china'],
      河口: [118.53609666563268, 37.8920018379248, 'shandong_dongying', 'shandong', 'china'],
      垦利: [118.55773171527527, 37.59500453185385, 'shandong_dongying', 'shandong', 'china'],
      利津: [118.25545435307582, 37.49907102811541, 'shandong_dongying', 'shandong', 'china'],
      广饶: [118.41401736211466, 37.05755808828081, 'shandong_dongying', 'shandong', 'china'],
      芝罘: [121.39246826673612, 37.546572979338016, 'shandong_yantai', 'shandong', 'china'],
      福山: [121.27135315443027, 37.502523319483096, 'shandong_yantai', 'shandong', 'china'],
      牟平: [121.6080654795252, 37.394146724696704, 'shandong_yantai', 'shandong', 'china'],
      莱山: [121.45528425831597, 37.47988058293963, 'shandong_yantai', 'shandong', 'china'],
      蓬莱: [120.76563632147263, 37.816882546770515, 'shandong_yantai', 'shandong', 'china'],
      龙口: [120.53490147372881, 37.654143921455194, 'shandong_yantai', 'shandong', 'china'],
      莱阳: [120.71756664871111, 36.98336551243042, 'shandong_yantai', 'shandong', 'china'],
      莱州: [119.94873083389797, 37.18836276393682, 'shandong_yantai', 'shandong', 'china'],
      招远: [120.40972675289406, 37.37069381197678, 'shandong_yantai', 'shandong', 'china'],
      栖霞: [120.84047749006837, 37.31219534321166, 'shandong_yantai', 'shandong', 'china'],
      海阳: [121.17490062103779, 36.78662623106911, 'shandong_yantai', 'shandong', 'china'],
      潍城: [119.11038247253435, 36.71570874991265, 'shandong_weifang', 'shandong', 'china'],
      寒亭: [119.21446246930816, 36.77781752706306, 'shandong_weifang', 'shandong', 'china'],
      坊子: [119.17272733075666, 36.66095570220805, 'shandong_weifang', 'shandong', 'china'],
      奎文: [119.14380562683048, 36.71562522062938, 'shandong_weifang', 'shandong', 'china'],
      临朐: [118.5463399024475, 36.52255236984587, 'shandong_weifang', 'shandong', 'china'],
      昌乐: [118.84653533958769, 36.70907028388751, 'shandong_weifang', 'shandong', 'china'],
      青州: [118.49125207481926, 36.70360230478229, 'shandong_weifang', 'shandong', 'china'],
      诸城: [119.40957260018541, 36.003445373882776, 'shandong_weifang', 'shandong', 'china'],
      寿光: [118.74307831122884, 36.8800666970759, 'shandong_weifang', 'shandong', 'china'],
      安丘: [119.2134632732195, 36.433138211603996, 'shandong_weifang', 'shandong', 'china'],
      高密: [119.76344038756159, 36.3838995634611, 'shandong_weifang', 'shandong', 'china'],
      昌邑: [119.40090945283204, 36.86128460136722, 'shandong_weifang', 'shandong', 'china'],
      任城: [116.60184850159241, 35.420588139968984, 'shandong_jining', 'shandong', 'china'],
      兖州: [116.83560910715748, 35.5621381750492, 'shandong_jining', 'shandong', 'china'],
      微山: [117.13502517415347, 34.81584400424266, 'shandong_jining', 'shandong', 'china'],
      鱼台: [116.65641681349354, 35.004004257424455, 'shandong_jining', 'shandong', 'china'],
      金乡: [116.31688515215635, 35.07576912340768, 'shandong_jining', 'shandong', 'china'],
      嘉祥: [116.3494880821082, 35.403752366979646, 'shandong_jining', 'shandong', 'china'],
      汶上: [116.49364459167224, 35.727688647758164, 'shandong_jining', 'shandong', 'china'],
      泗水: [117.2801372793146, 35.65915369686672, 'shandong_jining', 'shandong', 'china'],
      梁山: [116.09623751133486, 35.80754961678835, 'shandong_jining', 'shandong', 'china'],
      曲阜: [116.99827584029919, 35.599104153663085, 'shandong_jining', 'shandong', 'china'],
      邹城: [116.97325330187313, 35.411200788459205, 'shandong_jining', 'shandong', 'china'],
      泰山: [117.13638097853226, 36.195614693403705, 'shandong_taian', 'shandong', 'china'],
      岱岳: [117.05009655788474, 36.189870281383236, 'shandong_taian', 'shandong', 'china'],
      宁阳: [116.80585455027041, 35.77337833942737, 'shandong_taian', 'shandong', 'china'],
      东平: [116.46766877545683, 35.93612096889741, 'shandong_taian', 'shandong', 'china'],
      新泰: [117.77269153232244, 35.916129144622666, 'shandong_taian', 'shandong', 'china'],
      肥城: [116.77009095522313, 36.19194201617992, 'shandong_taian', 'shandong', 'china'],
      环翠: [122.12275326207008, 37.516508436236876, 'shandong_weihai', 'shandong', 'china'],
      文登: [122.06356563712474, 37.202438212857246, 'shandong_weihai', 'shandong', 'china'],
      荣成: [122.42933884223103, 37.166262431441325, 'shandong_weihai', 'shandong', 'china'],
      乳山: [121.54279349084653, 36.92573595774886, 'shandong_weihai', 'shandong', 'china'],
      东港区: [119.46432729692319, 35.43180178685524, 'shandong_rizhao', 'shandong', 'china'],
      岚山: [119.32235922697357, 35.12568131255082, 'shandong_rizhao', 'shandong', 'china'],
      五莲: [119.21331959401306, 35.757658751978326, 'shandong_rizhao', 'shandong', 'china'],
      莒: [118.83936702460925, 35.59405946713077, 'shandong_rizhao', 'shandong', 'china'],
      兰山: [118.33408754113499, 35.06796290624471, 'shandong_linyi', 'shandong', 'china'],
      罗庄: [118.29130822847162, 35.00310403543842, 'shandong_linyi', 'shandong', 'china'],
      临沂河东区: [118.40487009655435, 35.09080371728131, 'shandong_linyi', 'shandong', 'china'],
      沂南: [118.46184008925961, 35.553253709250335, 'shandong_linyi', 'shandong', 'china'],
      郯城: [118.34943081692384, 34.62087039949554, 'shandong_linyi', 'shandong', 'china'],
      沂水: [118.64113962669384, 35.792777095018636, 'shandong_linyi', 'shandong', 'china'],
      兰陵: [118.05647258170113, 34.86157370761011, 'shandong_linyi', 'shandong', 'china'],
      费: [117.97526410761738, 35.275487351351295, 'shandong_linyi', 'shandong', 'china'],
      平邑: [117.63838626653809, 35.51748176154893, 'shandong_linyi', 'shandong', 'china'],
      莒南: [118.84488073279685, 35.181764722767916, 'shandong_linyi', 'shandong', 'china'],
      蒙阴: [117.9496908004984, 35.718658038721294, 'shandong_linyi', 'shandong', 'china'],
      临沭: [118.65488494025672, 34.92303096003918, 'shandong_linyi', 'shandong', 'china'],
      德城: [116.31357154573843, 37.45998029525876, 'shandong_dezhou', 'shandong', 'china'],
      陵城: [116.58154894184348, 37.33851433132731, 'shandong_dezhou', 'shandong', 'china'],
      宁津: [116.80022282953512, 37.6555450489534, 'shandong_dezhou', 'shandong', 'china'],
      庆云: [117.39699250565091, 37.78370901971644, 'shandong_dezhou', 'shandong', 'china'],
      临邑: [116.87343347437933, 37.19831433710203, 'shandong_dezhou', 'shandong', 'china'],
      齐河: [116.76477016845593, 36.80184167741644, 'shandong_dezhou', 'shandong', 'china'],
      平原: [116.44040837385634, 37.17038826659408, 'shandong_dezhou', 'shandong', 'china'],
      夏津: [116.01034217690356, 36.956387378691005, 'shandong_dezhou', 'shandong', 'china'],
      武城: [116.08518483748561, 37.21537791452921, 'shandong_dezhou', 'shandong', 'china'],
      乐陵: [117.22312861400356, 37.73523841051432, 'shandong_dezhou', 'shandong', 'china'],
      禹城: [116.64892564169173, 36.9408259314662, 'shandong_dezhou', 'shandong', 'china'],
      东昌府: [115.9866142403672, 36.46170636214322, 'shandong_liaocheng', 'shandong', 'china'],
      茌平: [116.25982302369165, 36.59799239987376, 'shandong_liaocheng', 'shandong', 'china'],
      阳谷: [115.79070712681808, 36.11994235033427, 'shandong_liaocheng', 'shandong', 'china'],
      莘: [115.67370308641296, 36.24386921651857, 'shandong_liaocheng', 'shandong', 'china'],
      东阿: [116.25534337767213, 36.34197743007112, 'shandong_liaocheng', 'shandong', 'china'],
      冠: [115.45120572164598, 36.490089594147065, 'shandong_liaocheng', 'shandong', 'china'],
      高唐: [116.23627511406374, 36.86545518488318, 'shandong_liaocheng', 'shandong', 'china'],
      临清: [115.71998451018155, 36.848536240862735, 'shandong_liaocheng', 'shandong', 'china'],
      滨城: [118.02675636838335, 37.390486435334154, 'shandong_binzhou', 'shandong', 'china'],
      沾化: [118.13651532904012, 37.70415500574051, 'shandong_binzhou', 'shandong', 'china'],
      惠民: [117.5154490102461, 37.48990008050524, 'shandong_binzhou', 'shandong', 'china'],
      阳信: [117.58774615519867, 37.6466837819981, 'shandong_binzhou', 'shandong', 'china'],
      无棣: [117.62274983652671, 37.747079334670524, 'shandong_binzhou', 'shandong', 'china'],
      博兴: [118.12965972719944, 37.15277545596681, 'shandong_binzhou', 'shandong', 'china'],
      邹平: [117.74325393358666, 36.884260502482775, 'shandong_binzhou', 'shandong', 'china'],
      牡丹: [115.47743333734658, 35.24908738587103, 'shandong_heze', 'shandong', 'china'],
      定陶: [115.5760277459487, 35.07901056444415, 'shandong_heze', 'shandong', 'china'],
      曹: [115.55591094272538, 34.82955381010105, 'shandong_heze', 'shandong', 'china'],
      单: [116.08917522629608, 34.79663462183437, 'shandong_heze', 'shandong', 'china'],
      成武: [115.90382861225483, 34.95350223120446, 'shandong_heze', 'shandong', 'china'],
      巨野: [116.09592237592246, 35.39670092981203, 'shandong_heze', 'shandong', 'china'],
      郓城: [115.94527778165069, 35.60096061863146, 'shandong_heze', 'shandong', 'china'],
      鄄城: [115.52093441949681, 35.566008692768385, 'shandong_heze', 'shandong', 'china'],
      东明: [115.1048608778789, 35.29583672082859, 'shandong_heze', 'shandong', 'china'],
      郑州: [113.67187173242553, 34.76405140392973, null, 'henan', 'china'],
      开封: [114.34788516636858, 34.8032416096353, null, 'henan', 'china'],
      洛阳: [112.44085351513486, 34.669359680823995, null, 'henan', 'china'],
      平顶山: [113.31421966023116, 33.74128560538162, null, 'henan', 'china'],
      安阳: [114.35886743296217, 36.10975422908846, null, 'henan', 'china'],
      鹤壁: [114.30203717912418, 35.75389937443079, null, 'henan', 'china'],
      新乡: [113.89040508876121, 35.30895570406124, null, 'henan', 'china'],
      焦作: [113.24481090404001, 35.24483917685229, null, 'henan', 'china'],
      濮阳: [115.04785419361738, 35.77408463161, null, 'henan', 'china'],
      许昌: [113.83265701419955, 34.028630701675105, null, 'henan', 'china'],
      漯河: [114.03286786038166, 33.58191362541029, null, 'henan', 'china'],
      三门峡: [111.20065847410656, 34.78308572551861, null, 'henan', 'china'],
      南阳: [112.54736351693774, 33.005264394630224, null, 'henan', 'china'],
      商丘: [115.65699136683499, 34.443062150646725, null, 'henan', 'china'],
      信阳: [114.08158096306701, 32.12902731494556, null, 'henan', 'china'],
      周口: [114.65625621432024, 33.626067230564814, null, 'henan', 'china'],
      驻马店: [114.03119252083661, 32.986257306428875, null, 'henan', 'china'],
      济源: [112.59655647698153, 35.09638004174809, null, 'henan', 'china'],
      中原: [113.61805936779781, 34.754311634443646, 'henan_zhengzhou', 'henan', 'china'],
      二七: [113.65183071779548, 34.737265960199274, 'henan_zhengzhou', 'henan', 'china'],
      管城回族: [113.69188156590398, 34.75220597943875, 'henan_zhengzhou', 'henan', 'china'],
      金水: [113.69259642659497, 34.781578523696616, 'henan_zhengzhou', 'henan', 'china'],
      上街: [113.30473027467151, 34.81488728434803, 'henan_zhengzhou', 'henan', 'china'],
      惠济: [113.62483477989261, 34.834741328356664, 'henan_zhengzhou', 'henan', 'china'],
      中牟: [114.02899673586155, 34.7281112738842, 'henan_zhengzhou', 'henan', 'china'],
      巩义: [112.98942173211522, 34.75784126490311, 'henan_zhengzhou', 'henan', 'china'],
      荥阳: [113.39791839628204, 34.79538103741088, 'henan_zhengzhou', 'henan', 'china'],
      新密: [113.38704378621281, 34.5440201386536, 'henan_zhengzhou', 'henan', 'china'],
      新郑: [113.74610698817361, 34.40038055556458, 'henan_zhengzhou', 'henan', 'china'],
      登封: [113.04418186195035, 34.46628084142263, 'henan_zhengzhou', 'henan', 'china'],
      龙亭: [114.35974970141609, 34.80615540992763, 'henan_kaifeng', 'henan', 'china'],
      顺河回族: [114.37127444063523, 34.806791117832645, 'henan_kaifeng', 'henan', 'china'],
      开封鼓楼区: [114.35490654933704, 34.798663451803606, 'henan_kaifeng', 'henan', 'china'],
      禹王台: [114.3566382687458, 34.786021193933294, 'henan_kaifeng', 'henan', 'china'],
      祥符: [114.44417040916983, 34.76226433355223, 'henan_kaifeng', 'henan', 'china'],
      杞: [114.77705767109485, 34.560281041379184, 'henan_kaifeng', 'henan', 'china'],
      通许: [114.47416894384227, 34.48358233231654, 'henan_kaifeng', 'henan', 'china'],
      尉氏: [114.20048496710434, 34.41799480726663, 'henan_kaifeng', 'henan', 'china'],
      兰考: [114.8270362072315, 34.83608589216254, 'henan_kaifeng', 'henan', 'china'],
      老城: [112.48383973415092, 34.68882007999159, 'henan_luoyang', 'henan', 'china'],
      西工: [112.44961812424357, 34.67417600919679, 'henan_luoyang', 'henan', 'china'],
      瀍河回族: [112.49822390143757, 34.690433902623795, 'henan_luoyang', 'henan', 'china'],
      涧西: [112.40577986736533, 34.66006521461552, 'henan_luoyang', 'henan', 'china'],
      吉利: [112.59125084496677, 34.90517863395244, 'henan_luoyang', 'henan', 'china'],
      洛龙: [112.46306854950714, 34.62477474306925, 'henan_luoyang', 'henan', 'china'],
      孟津: [112.45030846395434, 34.832821168633544, 'henan_luoyang', 'henan', 'china'],
      新安: [112.1480175776138, 34.73434678825146, 'henan_luoyang', 'henan', 'china'],
      栾川: [111.6248249098346, 33.789385343161065, 'henan_luoyang', 'henan', 'china'],
      嵩: [112.09417913179466, 34.137874342139966, 'henan_luoyang', 'henan', 'china'],
      汝阳: [112.48029697238243, 34.15915978560871, 'henan_luoyang', 'henan', 'china'],
      宜阳: [112.1864227555323, 34.52264163394029, 'henan_luoyang', 'henan', 'china'],
      洛宁: [111.66199216512494, 34.39285154590874, 'henan_luoyang', 'henan', 'china'],
      伊川: [112.43578168038609, 34.42969804049816, 'henan_luoyang', 'henan', 'china'],
      偃师: [112.79417039807606, 34.729317563165786, 'henan_luoyang', 'henan', 'china'],
      平顶山新华区: [113.30552140212941, 33.74376775253453, 'henan_pingdingshan', 'henan', 'china'],
      卫东: [113.31684496280016, 33.74528401276725, 'henan_pingdingshan', 'henan', 'china'],
      石龙: [112.89638407155027, 33.90753549795722, 'henan_pingdingshan', 'henan', 'china'],
      湛河: [113.3274331575871, 33.73149941516837, 'henan_pingdingshan', 'henan', 'china'],
      宝丰: [113.07331393127792, 33.87242099258938, 'henan_pingdingshan', 'henan', 'china'],
      叶: [113.3648732035821, 33.62706152665509, 'henan_pingdingshan', 'henan', 'china'],
      鲁山: [112.91314209228837, 33.74658989555281, 'henan_pingdingshan', 'henan', 'china'],
      郏: [113.22706414114681, 33.97765680996476, 'henan_pingdingshan', 'henan', 'china'],
      舞钢: [113.53265330733583, 33.308403891670054, 'henan_pingdingshan', 'henan', 'china'],
      汝州: [112.8518907777862, 34.17315870226702, 'henan_pingdingshan', 'henan', 'china'],
      文峰: [114.35894443255043, 36.10441288119281, 'henan_anyang', 'henan', 'china'],
      北关: [114.35903587684442, 36.11609486726972, 'henan_anyang', 'henan', 'china'],
      殷都: [114.30669591641052, 36.114627815880915, 'henan_anyang', 'henan', 'china'],
      龙安: [114.33003976201546, 36.10144811897258, 'henan_anyang', 'henan', 'china'],
      安阳县: [114.13662375741394, 36.13688282282356, 'henan_anyang', 'henan', 'china'],
      汤阴: [114.3687652812728, 35.92869426121687, 'henan_anyang', 'henan', 'china'],
      滑: [114.53057671373763, 35.580399752312935, 'henan_anyang', 'henan', 'china'],
      内黄: [114.911174222221, 35.959363232564804, 'henan_anyang', 'henan', 'china'],
      林州: [113.83036971281352, 36.069067078586414, 'henan_anyang', 'henan', 'china'],
      鹤山区: [114.1731370057345, 35.94186817720773, 'henan_hebi', 'henan', 'china'],
      山城: [114.19082130923506, 35.901728174331105, 'henan_hebi', 'henan', 'china'],
      淇滨: [114.30050794212164, 35.75405295158361, 'henan_hebi', 'henan', 'china'],
      浚: [114.5567732717102, 35.67699179093406, 'henan_hebi', 'henan', 'china'],
      淇: [114.20691148159895, 35.615306669191654, 'henan_hebi', 'henan', 'china'],
      红旗: [113.88457030221865, 35.309029539487774, 'henan_xinxiang', 'henan', 'china'],
      卫滨: [113.87250447610488, 35.311165346738946, 'henan_xinxiang', 'henan', 'china'],
      凤泉: [113.91317720417713, 35.38590838009729, 'henan_xinxiang', 'henan', 'china'],
      牧野: [113.90361289408735, 35.31919265235738, 'henan_xinxiang', 'henan', 'china'],
      新乡县: [113.81278424518594, 35.1957709718479, 'henan_xinxiang', 'henan', 'china'],
      获嘉: [113.66366786779098, 35.267891256283185, 'henan_xinxiang', 'henan', 'china'],
      原阳: [113.9725008394517, 35.05993325469643, 'henan_xinxiang', 'henan', 'china'],
      延津: [114.20751998627807, 35.15535610370131, 'henan_xinxiang', 'henan', 'china'],
      封丘: [114.43000902560779, 35.04623234547701, 'henan_xinxiang', 'henan', 'china'],
      卫辉: [114.07246051971318, 35.40997007921769, 'henan_xinxiang', 'henan', 'china'],
      辉县: [113.80908152508937, 35.46710949877959, 'henan_xinxiang', 'henan', 'china'],
      长垣: [114.68040431415783, 35.20189759562189, 'henan_xinxiang', 'henan', 'china'],
      解放: [113.23270915902383, 35.24702530122834, 'henan_jiaozuo', 'henan', 'china'],
      中站: [113.1818978870558, 35.24237445957175, 'henan_jiaozuo', 'henan', 'china'],
      马村: [113.32825066753813, 35.27125337323387, 'henan_jiaozuo', 'henan', 'china'],
      山阳区: [113.27408082503105, 35.221032915920986, 'henan_jiaozuo', 'henan', 'china'],
      修武: [113.45403924759546, 35.23565042337522, 'henan_jiaozuo', 'henan', 'china'],
      博爱: [113.0758190564912, 35.176366263344235, 'henan_jiaozuo', 'henan', 'china'],
      武陟: [113.41473971978755, 35.105158699285255, 'henan_jiaozuo', 'henan', 'china'],
      温: [113.08568329540454, 34.947082418158914, 'henan_jiaozuo', 'henan', 'china'],
      沁阳: [112.94097217989629, 35.09525852432531, 'henan_jiaozuo', 'henan', 'china'],
      孟州: [112.7934884631043, 34.91589079011358, 'henan_jiaozuo', 'henan', 'china'],
      华龙: [115.0384277903317, 35.76619226923265, 'henan_puyang', 'henan', 'china'],
      清丰: [115.11378935732002, 35.90846738042565, 'henan_puyang', 'henan', 'china'],
      南乐: [115.21071691181734, 36.08153647290588, 'henan_puyang', 'henan', 'china'],
      范: [115.51079795160278, 35.8576329828303, 'henan_puyang', 'henan', 'china'],
      台前: [115.86228273321407, 36.002134193004075, 'henan_puyang', 'henan', 'china'],
      濮阳县: [115.03043911692036, 35.71600783587548, 'henan_puyang', 'henan', 'china'],
      魏都: [113.83489260606413, 34.032798227158175, 'henan_xuchang', 'henan', 'china'],
      建安: [113.84944860476824, 34.01089794961473, 'henan_xuchang', 'henan', 'china'],
      鄢陵: [114.19511616164971, 34.10619788896963, 'henan_xuchang', 'henan', 'china'],
      襄城县: [113.49966344432194, 33.86200342081883, 'henan_xuchang', 'henan', 'china'],
      禹州: [113.47788788532804, 34.160116664592465, 'henan_xuchang', 'henan', 'china'],
      长葛: [113.77533651853022, 34.22556669026286, 'henan_xuchang', 'henan', 'china'],
      源汇: [114.02436994854105, 33.571637318941875, 'henan_luohe', 'henan', 'china'],
      郾城: [114.02323828611574, 33.59511174798258, 'henan_luohe', 'henan', 'china'],
      召陵: [114.0582582809428, 33.57323915527367, 'henan_luohe', 'henan', 'china'],
      舞阳: [113.61704758940407, 33.442283830569124, 'henan_luohe', 'henan', 'china'],
      临颍: [113.9454734733926, 33.81174318919821, 'henan_luohe', 'henan', 'china'],
      湖滨: [111.20142688697844, 34.783877081231566, 'henan_sanmenxia', 'henan', 'china'],
      陕州: [111.1102983174395, 34.726470217446646, 'henan_sanmenxia', 'henan', 'china'],
      渑池: [111.76953960019549, 34.769270506861766, 'henan_sanmenxia', 'henan', 'china'],
      卢氏: [111.05922498266466, 34.059680481202655, 'henan_sanmenxia', 'henan', 'china'],
      义马: [111.8759070970617, 34.75287615550701, 'henan_sanmenxia', 'henan', 'china'],
      灵宝: [110.89215399342481, 34.52757625686756, 'henan_sanmenxia', 'henan', 'china'],
      宛城: [112.55101741597637, 33.00108907899601, 'henan_nanyang', 'henan', 'china'],
      卧龙: [112.53528556829707, 32.99585276406636, 'henan_nanyang', 'henan', 'china'],
      南召: [112.44199356634321, 33.494947815257916, 'henan_nanyang', 'henan', 'china'],
      方城: [113.01744179284908, 33.26115857671708, 'henan_nanyang', 'henan', 'china'],
      西峡: [111.49217363973493, 33.30929940894614, 'henan_nanyang', 'henan', 'china'],
      镇平: [112.2392541120819, 33.04260848348717, 'henan_nanyang', 'henan', 'china'],
      内乡: [111.85021638204167, 33.05269062067012, 'henan_nanyang', 'henan', 'china'],
      淅川: [111.49545180557087, 33.14240806079451, 'henan_nanyang', 'henan', 'china'],
      社旗: [112.94472575514982, 33.062322256796165, 'henan_nanyang', 'henan', 'china'],
      唐河: [112.84504555948526, 32.69374968974444, 'henan_nanyang', 'henan', 'china'],
      新野: [112.3721992107195, 32.529761134969874, 'henan_nanyang', 'henan', 'china'],
      桐柏: [113.41244772496917, 32.37347081209676, 'henan_nanyang', 'henan', 'china'],
      邓州: [112.09915463777477, 32.687911044946325, 'henan_nanyang', 'henan', 'china'],
      梁园: [115.6610619688779, 34.442634561434815, 'henan_shangqiu', 'henan', 'china'],
      睢阳: [115.66028249123401, 34.396601823251075, 'henan_shangqiu', 'henan', 'china'],
      民权: [115.15472154328276, 34.65413476002456, 'henan_shangqiu', 'henan', 'china'],
      睢: [115.0765083505499, 34.43472967730395, 'henan_shangqiu', 'henan', 'china'],
      宁陵: [115.32646061816013, 34.45564763704188, 'henan_shangqiu', 'henan', 'china'],
      柘城: [115.3138474223551, 34.081549310590255, 'henan_shangqiu', 'henan', 'china'],
      虞城: [115.87039573323119, 34.40528843137198, 'henan_shangqiu', 'henan', 'china'],
      夏邑: [116.14635529825647, 34.24707122936718, 'henan_shangqiu', 'henan', 'china'],
      永城: [116.45624011291157, 33.93701291754266, 'henan_shangqiu', 'henan', 'china'],
      浉河: [114.08158096306701, 32.12902731494556, 'henan_xinyang', 'henan', 'china'],
      平桥: [114.13243707559825, 32.104720925428275, 'henan_xinyang', 'henan', 'china'],
      罗山: [114.54001975281012, 32.20888679781844, 'henan_xinyang', 'henan', 'china'],
      光山: [114.91015208914826, 32.0160539512617, 'henan_xinyang', 'henan', 'china'],
      新: [114.8835705015738, 31.641021869303618, 'henan_xinyang', 'henan', 'china'],
      商城: [115.41281536311507, 31.805915286815708, 'henan_xinyang', 'henan', 'china'],
      固始: [115.67376994936399, 32.18935239397537, 'henan_xinyang', 'henan', 'china'],
      潢川: [115.0566035423978, 32.14002096158366, 'henan_xinyang', 'henan', 'china'],
      淮滨: [115.42193082671237, 32.45873852239759, 'henan_xinyang', 'henan', 'china'],
      息: [114.74716292051046, 32.35090353063819, 'henan_xinyang', 'henan', 'china'],
      川汇: [114.65874186920247, 33.62052473633577, 'henan_zhoukou', 'henan', 'china'],
      淮阳: [114.87667859892949, 33.738547446326045, 'henan_zhoukou', 'henan', 'china'],
      扶沟: [114.39849998445568, 34.06001940753413, 'henan_zhoukou', 'henan', 'china'],
      西华: [114.53665059233175, 33.790078555443834, 'henan_zhoukou', 'henan', 'china'],
      商水: [114.61567715273357, 33.55014799205273, 'henan_zhoukou', 'henan', 'china'],
      沈丘: [115.08479358794612, 33.40186332942388, 'henan_zhoukou', 'henan', 'china'],
      郸城: [115.19542971724022, 33.6501460126987, 'henan_zhoukou', 'henan', 'china'],
      太康: [114.86024412678904, 34.071566098128116, 'henan_zhoukou', 'henan', 'china'],
      鹿邑: [115.4929799797074, 33.86680992085516, 'henan_zhoukou', 'henan', 'china'],
      项城: [114.90610333907213, 33.44873518279757, 'henan_zhoukou', 'henan', 'china'],
      驿城: [114.03562686577324, 32.98356911102239, 'henan_zhumadian', 'henan', 'china'],
      西平: [114.03336529086572, 33.38837608832115, 'henan_zhumadian', 'henan', 'china'],
      上蔡: [114.27339430499501, 33.27077991753587, 'henan_zhumadian', 'henan', 'china'],
      平舆: [114.64362690777035, 32.96149695671845, 'henan_zhumadian', 'henan', 'china'],
      正阳: [114.39595983815576, 32.60783035500615, 'henan_zhumadian', 'henan', 'china'],
      确山: [114.03317779322727, 32.80760173450413, 'henan_zhumadian', 'henan', 'china'],
      泌阳: [113.33260453662555, 32.73087038310828, 'henan_zhumadian', 'henan', 'china'],
      汝南: [114.36590054054871, 33.01087926292561, 'henan_zhumadian', 'henan', 'china'],
      遂平: [114.01013139396744, 33.15332109258726, 'henan_zhumadian', 'henan', 'china'],
      新蔡: [114.98166776443006, 32.75618598520823, 'henan_zhumadian', 'henan', 'china'],
      武汉: [114.30514938118115, 30.590009285298237, null, 'hubei', 'china'],
      黄石: [115.08344170521511, 30.226410725786284, null, 'hubei', 'china'],
      十堰: [110.79441212185279, 32.652945195212446, null, 'hubei', 'china'],
      宜昌: [111.29740951010395, 30.70833557684904, null, 'hubei', 'china'],
      襄阳: [112.15074230684218, 32.048098159671284, null, 'hubei', 'china'],
      鄂州: [114.89719156306685, 30.402237117911906, null, 'hubei', 'china'],
      荆门: [112.21064626335999, 31.041744456503693, null, 'hubei', 'china'],
      孝感: [113.93320707234025, 30.93215616767852, null, 'hubei', 'china'],
      荆州: [112.24464852316132, 30.33271280892097, null, 'hubei', 'china'],
      黄冈: [114.88588882271428, 30.45354361080352, null, 'hubei', 'china'],
      咸宁: [114.33545583826297, 29.838776249677615, null, 'hubei', 'china'],
      随州: [113.38026913446517, 31.723568682095696, null, 'hubei', 'china'],
      恩施土家族苗族: [109.49357548073678, 30.288862969428006, null, 'hubei', 'china'],
      仙桃: [113.46056555193819, 30.37063076595542, null, 'hubei', 'china'],
      潜江: [112.90333266488777, 30.427333823499772, null, 'hubei', 'china'],
      天门: [113.17228119856654, 30.659386489201175, null, 'hubei', 'china'],
      神农架林: [110.67802815817122, 31.750421244279668, null, 'hubei', 'china'],
      江岸: [114.30962553667207, 30.60057106394073, 'hubei_wuhan', 'hubei', 'china'],
      江汉: [114.28964981875886, 30.584549086907565, 'hubei_wuhan', 'hubei', 'china'],
      硚口: [114.27102295500897, 30.576701021434904, 'hubei_wuhan', 'hubei', 'china'],
      汉阳: [114.2722779760643, 30.555398233002144, 'hubei_wuhan', 'hubei', 'china'],
      武昌: [114.31392246300992, 30.55221638713602, 'hubei_wuhan', 'hubei', 'china'],
      武汉青山区: [114.40362209983654, 30.64009588580626, 'hubei_wuhan', 'hubei', 'china'],
      青山区: [114.40362209983654, 30.64009588580626, 'hubei_wuhan', 'hubei', 'china'],
      洪山: [114.40728516092422, 30.51008127070674, 'hubei_wuhan', 'hubei', 'china'],
      东西湖: [114.14896560192926, 30.628603107391225, 'hubei_wuhan', 'hubei', 'china'],
      汉南: [114.0877709146208, 30.315482985930654, 'hubei_wuhan', 'hubei', 'china'],
      蔡甸: [114.0358223181559, 30.588193640001364, 'hubei_wuhan', 'hubei', 'china'],
      江夏: [114.32051829535139, 30.354786891426937, 'hubei_wuhan', 'hubei', 'china'],
      黄陂: [114.3804751026981, 30.880414778026655, 'hubei_wuhan', 'hubei', 'china'],
      新洲: [114.80864732401888, 30.848011281322428, 'hubei_wuhan', 'hubei', 'china'],
      黄石港: [115.0965666690451, 30.21837847162415, 'hubei_huangshi', 'hubei', 'china'],
      西塞山: [115.09976586880984, 30.211624331331038, 'hubei_huangshi', 'hubei', 'china'],
      下陆: [114.98219574107173, 30.184079642256872, 'hubei_huangshi', 'hubei', 'china'],
      铁山: [114.90793746361766, 30.211661202741915, 'hubei_huangshi', 'hubei', 'china'],
      阳新: [115.21929557573641, 29.847837404723688, 'hubei_huangshi', 'hubei', 'china'],
      大冶: [114.98126029606883, 30.10504537143763, 'hubei_huangshi', 'hubei', 'china'],
      茅箭: [110.79269513535756, 32.65052983157979, 'hubei_shiyan', 'hubei', 'china'],
      张湾: [110.77879855631289, 32.658784514458944, 'hubei_shiyan', 'hubei', 'china'],
      郧阳: [110.81867353426928, 32.843957963917944, 'hubei_shiyan', 'hubei', 'china'],
      郧西: [110.43294553184568, 32.99751537200941, 'hubei_shiyan', 'hubei', 'china'],
      竹山: [110.2361789207894, 32.231568520000565, 'hubei_shiyan', 'hubei', 'china'],
      竹溪: [109.72375010880589, 32.321226326389656, 'hubei_shiyan', 'hubei', 'china'],
      房: [110.74842319996736, 32.0612007311479, 'hubei_shiyan', 'hubei', 'china'],
      丹江口: [111.52032827272417, 32.54477766821417, 'hubei_shiyan', 'hubei', 'china'],
      西陵: [111.30204221538739, 30.70814724627054, 'hubei_yichang', 'hubei', 'china'],
      伍家岗: [111.31378434740489, 30.68473815906148, 'hubei_yichang', 'hubei', 'china'],
      点军: [111.27463501956058, 30.698348778640934, 'hubei_yichang', 'hubei', 'china'],
      猇亭: [111.43423534345845, 30.5364385846418, 'hubei_yichang', 'hubei', 'china'],
      夷陵: [111.33327211118485, 30.776145004684146, 'hubei_yichang', 'hubei', 'china'],
      远安: [111.64985293451451, 31.06540633090941, 'hubei_yichang', 'hubei', 'china'],
      兴山: [110.76092796309229, 31.35427399124274, 'hubei_yichang', 'hubei', 'china'],
      秭归: [110.98323845226894, 30.830019810195594, 'hubei_yichang', 'hubei', 'china'],
      长阳土家族: [111.20501436656104, 30.4723412645782, 'hubei_yichang', 'hubei', 'china'],
      五峰土家族: [110.68144484510128, 30.20516265440528, 'hubei_yichang', 'hubei', 'china'],
      宜都: [111.46086543019815, 30.39331499521958, 'hubei_yichang', 'hubei', 'china'],
      当阳: [111.79997558001548, 30.830232195544287, 'hubei_yichang', 'hubei', 'china'],
      枝江: [111.75830223615004, 30.43133101093174, 'hubei_yichang', 'hubei', 'china'],
      襄城区: [112.15689078958034, 32.020794251348924, 'hubei_xiangyang', 'hubei', 'china'],
      樊城: [112.14618204912631, 32.06425721136661, 'hubei_xiangyang', 'hubei', 'china'],
      襄州: [112.2037958726971, 32.0918542067128, 'hubei_xiangyang', 'hubei', 'china'],
      南漳: [111.85081322546752, 31.78324146028072, 'hubei_xiangyang', 'hubei', 'china'],
      谷城: [111.64668090270506, 32.268501938516394, 'hubei_xiangyang', 'hubei', 'china'],
      保康: [111.26868469325518, 31.87963542247276, 'hubei_xiangyang', 'hubei', 'china'],
      老河口: [111.68228474926667, 32.391206503927656, 'hubei_xiangyang', 'hubei', 'china'],
      枣阳: [112.77177364654938, 32.128994912481645, 'hubei_xiangyang', 'hubei', 'china'],
      宜城: [112.2680550866696, 31.71487260537036, 'hubei_xiangyang', 'hubei', 'china'],
      梁子湖: [114.68848627567064, 30.10404590377385, 'hubei_ezhou', 'hubei', 'china'],
      华容区: [114.74794599735073, 30.540617986793638, 'hubei_ezhou', 'hubei', 'china'],
      鄂城: [114.89660916178994, 30.40239620344712, 'hubei_ezhou', 'hubei', 'china'],
      东宝: [112.21120133991887, 31.03978356716746, 'hubei_jingmen', 'hubei', 'china'],
      掇刀: [112.20483746156742, 30.98713815101568, 'hubei_jingmen', 'hubei', 'china'],
      沙洋: [112.6017282407915, 30.709494871351712, 'hubei_jingmen', 'hubei', 'china'],
      钟祥: [112.59373490661667, 31.171615975917753, 'hubei_jingmen', 'hubei', 'china'],
      京山: [113.12115971443664, 31.02821133491215, 'hubei_jingmen', 'hubei', 'china'],
      孝南: [113.93239858160415, 30.931708702764826, 'hubei_xiaogan', 'hubei', 'china'],
      孝昌: [113.9953936626738, 31.25790669294055, 'hubei_xiaogan', 'hubei', 'china'],
      大悟: [114.13266478532005, 31.571808724101064, 'hubei_xiaogan', 'hubei', 'china'],
      云梦: [113.75703223804047, 31.027991415973503, 'hubei_xiaogan', 'hubei', 'china'],
      应城: [113.5804128574198, 30.94471015762799, 'hubei_xiaogan', 'hubei', 'china'],
      安陆: [113.69698143209443, 31.267440625915714, 'hubei_xiaogan', 'hubei', 'china'],
      汉川: [113.84187269225514, 30.657929428349785, 'hubei_xiaogan', 'hubei', 'china'],
      沙市: [112.26400884928572, 30.32155740924409, 'hubei_jingzhou', 'hubei', 'china'],
      荆州区: [112.20175657125728, 30.356998225674477, 'hubei_jingzhou', 'hubei', 'china'],
      公安: [112.23668079056655, 30.06506209771817, 'hubei_jingzhou', 'hubei', 'china'],
      监利: [112.91078287152406, 29.826310118815126, 'hubei_jingzhou', 'hubei', 'china'],
      江陵: [112.42383509126748, 30.040050663547557, 'hubei_jingzhou', 'hubei', 'china'],
      石首: [112.41536061008306, 29.722413183083653, 'hubei_jingzhou', 'hubei', 'china'],
      洪湖: [113.4768876948508, 29.818679770587416, 'hubei_jingzhou', 'hubei', 'china'],
      松滋: [111.78477409479662, 30.181704260669793, 'hubei_jingzhou', 'hubei', 'china'],
      黄州: [114.8854560284951, 30.453274522590128, 'hubei_huanggang', 'hubei', 'china'],
      团风: [114.87855721892187, 30.641658384206206, 'hubei_huanggang', 'hubei', 'china'],
      红安: [114.62151038849038, 31.29101385213726, 'hubei_huanggang', 'hubei', 'china'],
      罗田: [115.405532662778, 30.78748975179163, 'hubei_huanggang', 'hubei', 'china'],
      英山: [115.68395278630445, 30.742141913694713, 'hubei_huanggang', 'hubei', 'china'],
      浠水: [115.27001116636488, 30.46049185751306, 'hubei_huanggang', 'hubei', 'china'],
      蕲春: [115.4403727082954, 30.24125481993825, 'hubei_huanggang', 'hubei', 'china'],
      黄梅: [115.94899991193981, 30.08124172798917, 'hubei_huanggang', 'hubei', 'china'],
      麻城: [115.03198213265854, 31.18356988551975, 'hubei_huanggang', 'hubei', 'china'],
      武穴: [115.56881181642119, 29.85568090885549, 'hubei_huanggang', 'hubei', 'china'],
      咸安: [114.34037115304275, 29.830784216872953, 'hubei_xianning', 'hubei', 'china'],
      嘉鱼: [113.92807907066758, 29.979163719645637, 'hubei_xianning', 'hubei', 'china'],
      通城: [113.8206956642578, 29.251745679997406, 'hubei_xianning', 'hubei', 'china'],
      崇阳: [114.05655190722362, 29.54671853580695, 'hubei_xianning', 'hubei', 'china'],
      通山: [114.49957590548594, 29.610715281888854, 'hubei_xianning', 'hubei', 'china'],
      赤壁: [113.89005751901743, 29.7232104923016, 'hubei_xianning', 'hubei', 'china'],
      曾都: [113.38101448128002, 31.723605705051675, 'hubei_suizhou', 'hubei', 'china'],
      随: [113.30784804927302, 31.860395799494775, 'hubei_suizhou', 'hubei', 'china'],
      广水: [113.83319252744661, 31.62341034856076, 'hubei_suizhou', 'hubei', 'china'],
      恩施: [109.49334623076437, 30.2881575906995, 'hubei_enshitujiazumiaozuzizhizhou', 'hubei', 'china'],
      利川: [108.94993772567521, 30.300460731905588, 'hubei_enshitujiazumiaozuzizhizhou', 'hubei', 'china'],
      建始: [109.73038443492226, 30.6074144892646, 'hubei_enshitujiazumiaozuzizhizhou', 'hubei', 'china'],
      巴东: [110.34323937274021, 31.047072146875667, 'hubei_enshitujiazumiaozuzizhizhou', 'hubei', 'china'],
      宣恩: [109.48936416835252, 29.994462775213613, 'hubei_enshitujiazumiaozuzizhizhou', 'hubei', 'china'],
      咸丰: [109.15700334538172, 29.68469167840091, 'hubei_enshitujiazumiaozuzizhizhou', 'hubei', 'china'],
      来凤: [109.4148235443544, 29.512913012903134, 'hubei_enshitujiazumiaozuzizhizhou', 'hubei', 'china'],
      鹤峰: [110.04012137031881, 29.89361225295485, 'hubei_enshitujiazumiaozuzizhizhou', 'hubei', 'china'],
      长沙: [112.98885707086882, 28.19975198869135, null, 'hunan', 'china'],
      株洲: [113.15815695611285, 27.842113136239316, null, 'hunan', 'china'],
      湘潭: [112.95051647028629, 27.835831376344082, null, 'hunan', 'china'],
      衡阳: [112.61427454316465, 26.906091989575273, null, 'hunan', 'china'],
      邵阳: [111.47565874735088, 27.244124095460638, null, 'hunan', 'china'],
      岳阳: [113.13932252147768, 29.37633552199764, null, 'hunan', 'china'],
      常德: [111.69784108862478, 29.046248671995095, null, 'hunan', 'china'],
      张家界: [110.48644584325014, 29.13322904265706, null, 'hunan', 'china'],
      益阳: [112.36157411492245, 28.575980524540057, null, 'hunan', 'china'],
      郴州: [113.0384897756626, 25.799897795863988, null, 'hunan', 'china'],
      永州: [111.61446550432002, 26.440826222575527, null, 'hunan', 'china'],
      怀化: [109.9848125267337, 27.555751017130987, null, 'hunan', 'china'],
      娄底: [112.01507356916707, 27.73386108841529, null, 'hunan', 'china'],
      湘西土家族苗族: [109.7463142360132, 28.319965342166086, null, 'hunan', 'china'],
      芙蓉: [112.9946642428909, 28.19879531282277, 'hunan_changsha', 'hunan', 'china'],
      天心: [112.9796415265399, 28.19805626617164, 'hunan_changsha', 'hunan', 'china'],
      岳麓: [112.91802667849116, 28.21935348810253, 'hunan_changsha', 'hunan', 'china'],
      开福: [112.99210744431089, 28.20701146643746, 'hunan_changsha', 'hunan', 'china'],
      雨花: [113.02282893810256, 28.116052272435667, 'hunan_changsha', 'hunan', 'china'],
      望城: [112.82602397701457, 28.353638933898015, 'hunan_changsha', 'hunan', 'china'],
      长沙县: [113.08665850513661, 28.243721312654916, 'hunan_changsha', 'hunan', 'china'],
      浏阳: [113.6397205868683, 28.147431863368542, 'hunan_changsha', 'hunan', 'china'],
      宁乡: [112.55960864561108, 28.260245893222347, 'hunan_changsha', 'hunan', 'china'],
      荷塘: [113.1689583166512, 27.83937076728384, 'hunan_zhuzhou', 'hunan', 'china'],
      芦淞: [113.16157614750175, 27.83357170529113, 'hunan_zhuzhou', 'hunan', 'china'],
      石峰: [113.11953443749616, 27.877685486090552, 'hunan_zhuzhou', 'hunan', 'china'],
      天元: [113.14271286376913, 27.833015109138067, 'hunan_zhuzhou', 'hunan', 'china'],
      渌口: [113.15259960828499, 27.71209511069736, 'hunan_zhuzhou', 'hunan', 'china'],
      攸: [113.35235139843942, 27.005746401644437, 'hunan_zhuzhou', 'hunan', 'china'],
      茶陵: [113.55301385095852, 26.795600510079808, 'hunan_zhuzhou', 'hunan', 'china'],
      炎陵: [113.78331414331758, 26.4956708801986, 'hunan_zhuzhou', 'hunan', 'china'],
      醴陵: [113.51359424961817, 27.66413991366599, 'hunan_zhuzhou', 'hunan', 'china'],
      雨湖: [112.91387807811448, 27.867042178954005, 'hunan_xiangtan', 'hunan', 'china'],
      岳塘: [112.9341195182843, 27.835162934201776, 'hunan_xiangtan', 'hunan', 'china'],
      湘潭县: [112.95934272045679, 27.784551339184656, 'hunan_xiangtan', 'hunan', 'china'],
      湘乡: [112.5317512925341, 27.740837709212432, 'hunan_xiangtan', 'hunan', 'china'],
      韶山: [112.53496865612853, 27.928650693463798, 'hunan_xiangtan', 'hunan', 'china'],
      珠晖: [112.63291093910966, 26.896746017805594, 'hunan_hengyang', 'hunan', 'china'],
      雁峰: [112.61882789691337, 26.899386714217304, 'hunan_hengyang', 'hunan', 'china'],
      石鼓: [112.6142178495719, 26.909642953119807, 'hunan_hengyang', 'hunan', 'china'],
      蒸湘: [112.57704993776582, 26.897159448488615, 'hunan_hengyang', 'hunan', 'china'],
      南岳: [112.74072545899443, 27.24621368721803, 'hunan_hengyang', 'hunan', 'china'],
      衡阳县: [112.38620594877722, 26.96804661959741, 'hunan_hengyang', 'hunan', 'china'],
      衡南: [112.68386262235335, 26.746304042205143, 'hunan_hengyang', 'hunan', 'china'],
      衡山: [112.87627614935585, 27.240510959226334, 'hunan_hengyang', 'hunan', 'china'],
      衡东: [112.95689540893815, 27.089519292349348, 'hunan_hengyang', 'hunan', 'china'],
      祁东: [112.11771624232475, 26.793092616795235, 'hunan_hengyang', 'hunan', 'china'],
      耒阳: [112.85379029283719, 26.419899600640083, 'hunan_hengyang', 'hunan', 'china'],
      常宁: [112.4033781904393, 26.41255994081569, 'hunan_hengyang', 'hunan', 'china'],
      双清: [111.48617428718114, 27.246335412099583, 'hunan_shaoyang', 'hunan', 'china'],
      大祥: [111.46941029419632, 27.239801439185463, 'hunan_shaoyang', 'hunan', 'china'],
      北塔: [111.45881081756548, 27.251729822864895, 'hunan_shaoyang', 'hunan', 'china'],
      新邵: [111.46621097711433, 27.31758988658289, 'hunan_shaoyang', 'hunan', 'china'],
      邵阳县: [111.28221383806707, 26.995612423206374, 'hunan_shaoyang', 'hunan', 'china'],
      隆回: [111.04531707529381, 27.12185313319573, 'hunan_shaoyang', 'hunan', 'china'],
      洞口: [110.58579079754206, 27.067953976868527, 'hunan_shaoyang', 'hunan', 'china'],
      绥宁: [110.16149726128806, 26.586941385421678, 'hunan_shaoyang', 'hunan', 'china'],
      新宁: [110.86559594046875, 26.44506891212443, 'hunan_shaoyang', 'hunan', 'china'],
      城步苗族: [110.31972093417063, 26.369514977243952, 'hunan_shaoyang', 'hunan', 'china'],
      武冈: [110.6432055988085, 26.738408604507157, 'hunan_shaoyang', 'hunan', 'china'],
      邵东: [111.74965464158612, 27.263394103594376, 'hunan_shaoyang', 'hunan', 'china'],
      岳阳楼: [113.12727293211422, 29.372621049230908, 'hunan_yueyang', 'hunan', 'china'],
      云溪: [113.28027360559119, 29.479714217450475, 'hunan_yueyang', 'hunan', 'china'],
      君山: [113.01062658486218, 29.443963223891828, 'hunan_yueyang', 'hunan', 'china'],
      岳阳县: [113.12261744913093, 29.150613339789945, 'hunan_yueyang', 'hunan', 'china'],
      华容: [112.56578460363045, 29.53044557649853, 'hunan_yueyang', 'hunan', 'china'],
      湘阴: [112.8962466029792, 28.68349288818089, 'hunan_yueyang', 'hunan', 'china'],
      平江: [113.6003332453257, 28.707271223354468, 'hunan_yueyang', 'hunan', 'china'],
      汨罗: [113.08596308959135, 28.80898920565924, 'hunan_yueyang', 'hunan', 'china'],
      临湘: [113.45737632977325, 29.47728943555906, 'hunan_yueyang', 'hunan', 'china'],
      武陵: [111.69721520889739, 29.046489719490534, 'hunan_changde', 'hunan', 'china'],
      鼎城: [111.69182924569058, 29.020339940379873, 'hunan_changde', 'hunan', 'china'],
      安乡: [112.17879175353283, 29.420526724338856, 'hunan_changde', 'hunan', 'china'],
      汉寿: [111.97491580360612, 28.913619056838364, 'hunan_changde', 'hunan', 'china'],
      澧: [111.76823572895398, 29.64844817445542, 'hunan_changde', 'hunan', 'china'],
      临澧: [111.65218128543881, 29.448976744257905, 'hunan_changde', 'hunan', 'china'],
      桃源: [111.49090347652155, 28.909055255895712, 'hunan_changde', 'hunan', 'china'],
      石门: [111.3855342885131, 29.5908824541797, 'hunan_changde', 'hunan', 'china'],
      津市: [111.88614296396236, 29.63670280989347, 'hunan_changde', 'hunan', 'china'],
      张家界永定区: [110.49106464927006, 29.1318628595936, 'hunan_zhangjiajie', 'hunan', 'china'],
      永定区: [110.49106464927006, 29.1318628595936, 'hunan_zhangjiajie', 'hunan', 'china'],
      武陵源: [110.55406117163282, 29.353866865714686, 'hunan_zhangjiajie', 'hunan', 'china'],
      慈利: [111.1391508897243, 29.43014319908212, 'hunan_zhangjiajie', 'hunan', 'china'],
      桑植: [110.17045270298986, 29.40626211249706, 'hunan_zhangjiajie', 'hunan', 'china'],
      资阳区: [112.3372868493363, 28.59906003504055, 'hunan_yiyang', 'hunan', 'china'],
      赫山: [112.36750066060746, 28.574146292888347, 'hunan_yiyang', 'hunan', 'china'],
      南: [112.41687793495421, 29.378183021523114, 'hunan_yiyang', 'hunan', 'china'],
      桃江: [112.1463002869549, 28.526652222236642, 'hunan_yiyang', 'hunan', 'china'],
      安化: [111.22827720610572, 28.383615293318083, 'hunan_yiyang', 'hunan', 'china'],
      沅江: [112.36765237573529, 28.845532453585083, 'hunan_yiyang', 'hunan', 'china'],
      北湖: [113.0386296318406, 25.79893758861406, 'hunan_chenzhou', 'hunan', 'china'],
      苏仙: [113.04511396189181, 25.799493767972145, 'hunan_chenzhou', 'hunan', 'china'],
      桂阳: [112.74104259176895, 25.743123488607782, 'hunan_chenzhou', 'hunan', 'china'],
      宜章: [112.9543622601764, 25.400379470996892, 'hunan_chenzhou', 'hunan', 'china'],
      永兴: [113.121355474392, 26.135145284758273, 'hunan_chenzhou', 'hunan', 'china'],
      嘉禾: [112.3772049919013, 25.593016148466194, 'hunan_chenzhou', 'hunan', 'china'],
      临武: [112.57099890916838, 25.285443302054897, 'hunan_chenzhou', 'hunan', 'china'],
      汝城: [113.69223585553483, 25.559507923421688, 'hunan_chenzhou', 'hunan', 'china'],
      桂东: [113.95247263199094, 26.079595597926026, 'hunan_chenzhou', 'hunan', 'china'],
      安仁: [113.27858801854552, 26.714934652547523, 'hunan_chenzhou', 'hunan', 'china'],
      资兴: [113.24337548270707, 25.97993708238791, 'hunan_chenzhou', 'hunan', 'china'],
      零陵: [111.63282965368283, 26.229409848052992, 'hunan_yongzhou', 'hunan', 'china'],
      冷水滩: [111.61360115404662, 26.440680081930722, 'hunan_yongzhou', 'hunan', 'china'],
      祁阳: [111.86378497394419, 26.59213409368623, 'hunan_yongzhou', 'hunan', 'china'],
      东安: [111.31959368771531, 26.403018210526174, 'hunan_yongzhou', 'hunan', 'china'],
      双牌: [111.66874055625935, 25.965068117522073, 'hunan_yongzhou', 'hunan', 'china'],
      道: [111.59802867108357, 25.524743350668185, 'hunan_yongzhou', 'hunan', 'china'],
      江永: [111.35323650734247, 25.274409583073794, 'hunan_yongzhou', 'hunan', 'china'],
      宁远: [111.95099466050274, 25.59034778803422, 'hunan_yongzhou', 'hunan', 'china'],
      蓝山: [112.20062716006169, 25.381577239118503, 'hunan_yongzhou', 'hunan', 'china'],
      新田: [112.22679102573636, 25.913087253751915, 'hunan_yongzhou', 'hunan', 'china'],
      江华瑶族: [111.58373249179206, 25.18871698065617, 'hunan_yongzhou', 'hunan', 'china'],
      鹤城: [109.98881574778184, 27.554144237899614, 'hunan_huaihua', 'hunan', 'china'],
      中方: [109.95453734958677, 27.443389610176496, 'hunan_huaihua', 'hunan', 'china'],
      沅陵: [110.40558980116172, 28.461888508547965, 'hunan_huaihua', 'hunan', 'china'],
      辰溪: [110.20349627767494, 28.011359682573822, 'hunan_huaihua', 'hunan', 'china'],
      溆浦: [110.59993317946498, 27.909547317453654, 'hunan_huaihua', 'hunan', 'china'],
      会同: [109.72731913076804, 26.876610637821578, 'hunan_huaihua', 'hunan', 'china'],
      麻阳苗族: [109.80924326277491, 27.872321668618106, 'hunan_huaihua', 'hunan', 'china'],
      新晃侗族: [109.18092397252292, 27.36597248169088, 'hunan_huaihua', 'hunan', 'china'],
      芷江侗族: [109.69418572192615, 27.444294230561177, 'hunan_huaihua', 'hunan', 'china'],
      靖州苗族侗族: [109.69759898206367, 26.57978705188017, 'hunan_huaihua', 'hunan', 'china'],
      通道侗族: [109.78980679652827, 26.164560640685494, 'hunan_huaihua', 'hunan', 'china'],
      洪江: [109.83825484741772, 27.20784121338963, 'hunan_huaihua', 'hunan', 'china'],
      娄星: [112.01506113323443, 27.73236785021444, 'hunan_loudi', 'hunan', 'china'],
      双峰: [112.20464571896584, 27.465456952540883, 'hunan_loudi', 'hunan', 'china'],
      新化: [111.3133404421778, 27.74314653051669, 'hunan_loudi', 'hunan', 'china'],
      冷水江: [111.44121479065916, 27.69151390697836, 'hunan_loudi', 'hunan', 'china'],
      涟源: [111.67739776271074, 27.698013803165427, 'hunan_loudi', 'hunan', 'china'],
      吉首: [109.7448524154765, 28.320497793188114, 'hunan_xiangxitujiazumiaozuzizhizhou', 'hunan', 'china'],
      泸溪: [110.2210224150286, 28.220202746074058, 'hunan_xiangxitujiazumiaozuzizhizhou', 'hunan', 'china'],
      凤凰: [109.6057186730258, 27.95415296680611, 'hunan_xiangxitujiazumiaozuzizhizhou', 'hunan', 'china'],
      花垣: [109.48561957989511, 28.58720647100905, 'hunan_xiangxitujiazumiaozuzizhizhou', 'hunan', 'china'],
      保靖: [109.65795783339846, 28.715634929578076, 'hunan_xiangxitujiazumiaozuzizhizhou', 'hunan', 'china'],
      古丈: [109.95609322094303, 28.622980841120164, 'hunan_xiangxitujiazumiaozuzizhizhou', 'hunan', 'china'],
      永顺: [109.85985799794409, 29.00375441929404, 'hunan_xiangxitujiazumiaozuzizhizhou', 'hunan', 'china'],
      龙山: [109.44760731618659, 29.459767438289205, 'hunan_xiangxitujiazumiaozuzizhizhou', 'hunan', 'china'],
      广州: [113.28704868796393, 23.131513779259098, null, 'guangdong', 'china'],
      韶关: [113.5980876635943, 24.807037770687735, null, 'guangdong', 'china'],
      深圳: [114.0924488993147, 22.55292547150105, null, 'guangdong', 'china'],
      珠海: [113.56051876786063, 22.230912126275605, null, 'guangdong', 'china'],
      汕头: [116.7150067582366, 23.3766997690293, null, 'guangdong', 'china'],
      佛山: [113.1292318333696, 23.03463348565631, null, 'guangdong', 'china'],
      江门: [113.10152701557759, 22.5961074606411, null, 'guangdong', 'china'],
      湛江: [110.37151258941826, 21.280815583028332, null, 'guangdong', 'china'],
      茂名: [110.92575944782828, 21.665596437092596, null, 'guangdong', 'china'],
      肇庆: [112.4790492668719, 23.057503732724335, null, 'guangdong', 'china'],
      惠州: [114.41918037991832, 23.085089697847632, null, 'guangdong', 'china'],
      梅州: [116.1241270380586, 24.304901315126813, null, 'guangdong', 'china'],
      汕尾: [115.37076526345835, 22.780246464576837, null, 'guangdong', 'china'],
      河源: [114.70426080001407, 23.752400018066215, null, 'guangdong', 'china'],
      阳江: [111.98157747565297, 21.865461438389275, null, 'guangdong', 'china'],
      清远: [113.05768169767617, 23.69130711925897, null, 'guangdong', 'china'],
      东莞: [113.75271627797483, 23.052494972177698, null, 'guangdong', 'china'],
      中山: [113.38883264540733, 22.527315042673663, null, 'guangdong', 'china'],
      潮州: [116.63875348360264, 23.668026456743405, null, 'guangdong', 'china'],
      揭阳: [116.36229956216017, 23.549544582563342, null, 'guangdong', 'china'],
      云浮: [112.05096836739254, 22.935706472655806, null, 'guangdong', 'china'],
      荔湾: [113.24954382006655, 23.130818021129226, 'guangdong_guangzhou', 'guangdong', 'china'],
      越秀: [113.28712558740185, 23.1319597086918, 'guangdong_guangzhou', 'guangdong', 'china'],
      海珠: [113.26846403906208, 23.10933018387321, 'guangdong_guangzhou', 'guangdong', 'china'],
      天河: [113.34191561161008, 23.141256118961547, 'guangdong_guangzhou', 'guangdong', 'china'],
      广州白云区: [113.26929008454303, 23.168492968174583, 'guangdong_guangzhou', 'guangdong', 'china'],
      白云区: [113.26929008454303, 23.168492968174583, 'guangdong_guangzhou', 'guangdong', 'china'],
      黄埔: [113.45731904866477, 23.10893702757655, 'guangdong_guangzhou', 'guangdong', 'china'],
      番禺: [113.37115433584972, 22.944490720205913, 'guangdong_guangzhou', 'guangdong', 'china'],
      花都: [113.21773891143825, 23.397744276448012, 'guangdong_guangzhou', 'guangdong', 'china'],
      广州南沙区: [113.54383249179968, 22.800738933331267, 'guangdong_guangzhou', 'guangdong', 'china'],
      南沙区: [113.54383249179968, 22.800738933331267, 'guangdong_guangzhou', 'guangdong', 'china'],
      从化: [113.59397040819415, 23.550971340152078, 'guangdong_guangzhou', 'guangdong', 'china'],
      增城: [113.83615050068842, 23.296199664506712, 'guangdong_guangzhou', 'guangdong', 'china'],
      武江: [113.59483949898966, 24.80584711625431, 'guangdong_shaoguan', 'guangdong', 'china'],
      浈江: [113.60574521676008, 24.809790697148607, 'guangdong_shaoguan', 'guangdong', 'china'],
      曲江: [113.61208195054968, 24.68611316295207, 'guangdong_shaoguan', 'guangdong', 'china'],
      始兴: [114.073763400643, 24.954043416439813, 'guangdong_shaoguan', 'guangdong', 'china'],
      仁化: [113.7550728443336, 25.09451030714518, 'guangdong_shaoguan', 'guangdong', 'china'],
      翁源: [114.13772217988256, 24.36016998778554, 'guangdong_shaoguan', 'guangdong', 'china'],
      乳源瑶族: [113.28484687940698, 24.782448533084747, 'guangdong_shaoguan', 'guangdong', 'china'],
      新丰: [114.21354981867694, 24.06135998546038, 'guangdong_shaoguan', 'guangdong', 'china'],
      乐昌: [113.35898412125114, 25.13417673611644, 'guangdong_shaoguan', 'guangdong', 'china'],
      南雄: [114.3178124680341, 25.121046797400847, 'guangdong_shaoguan', 'guangdong', 'china'],
      罗湖: [114.13031398965808, 22.56167537585394, 'guangdong_shenzhen', 'guangdong', 'china'],
      福田: [114.05750373763453, 22.546701214354705, 'guangdong_shenzhen', 'guangdong', 'china'],
      深圳南山区: [113.93596792293175, 22.53692636186903, 'guangdong_shenzhen', 'guangdong', 'china'],
      南山区: [113.93596792293175, 22.53692636186903, 'guangdong_shenzhen', 'guangdong', 'china'],
      宝安: [113.83521866984147, 22.760431373939465, 'guangdong_shenzhen', 'guangdong', 'china'],
      龙岗: [114.25783172549758, 22.727797981116517, 'guangdong_shenzhen', 'guangdong', 'china'],
      盐田: [114.24179530652216, 22.56140067829705, 'guangdong_shenzhen', 'guangdong', 'china'],
      深圳龙华区: [114.05090395932974, 22.697731787899734, 'guangdong_shenzhen', 'guangdong', 'china'],
      龙华区: [114.05090395932974, 22.697731787899734, 'guangdong_shenzhen', 'guangdong', 'china'],
      坪山: [114.3449251806901, 22.700379354764586, 'guangdong_shenzhen', 'guangdong', 'china'],
      光明: [113.94245294029324, 22.754480313212987, 'guangdong_shenzhen', 'guangdong', 'china'],
      香洲: [113.55676004171166, 22.277242045959156, 'guangdong_zhuhai', 'guangdong', 'china'],
      斗门: [113.30420812147383, 22.215322290916898, 'guangdong_zhuhai', 'guangdong', 'china'],
      金湾: [113.35163599149938, 22.144794056732355, 'guangdong_zhuhai', 'guangdong', 'china'],
      龙湖: [116.73848838245861, 23.379787027777162, 'guangdong_shantou', 'guangdong', 'china'],
      金平: [116.71013249008584, 23.372723151864072, 'guangdong_shantou', 'guangdong', 'china'],
      濠江: [116.73602905326788, 23.285336212178034, 'guangdong_shantou', 'guangdong', 'china'],
      潮阳: [116.60911269916093, 23.26820073754022, 'guangdong_shantou', 'guangdong', 'china'],
      潮南: [116.43006447418244, 23.25590882620761, 'guangdong_shantou', 'guangdong', 'china'],
      澄海: [116.7697822951638, 23.474783197537263, 'guangdong_shantou', 'guangdong', 'china'],
      南澳: [117.03361114520563, 23.42561836697375, 'guangdong_shantou', 'guangdong', 'china'],
      禅城: [113.11895182376544, 23.02536936735135, 'guangdong_foshan', 'guangdong', 'china'],
      南海: [113.15201830915201, 23.037807452854377, 'guangdong_foshan', 'guangdong', 'china'],
      顺德: [113.288241870344, 22.76484504556925, 'guangdong_foshan', 'guangdong', 'china'],
      三水: [112.9058862254019, 23.171201319368258, 'guangdong_foshan', 'guangdong', 'china'],
      高明: [112.88863132756974, 22.89971536072202, 'guangdong_foshan', 'guangdong', 'china'],
      蓬江: [113.08513786530794, 22.60262618949595, 'guangdong_jiangmen', 'guangdong', 'china'],
      江海: [113.12714469935167, 22.578052985121555, 'guangdong_jiangmen', 'guangdong', 'china'],
      新会: [113.0449995122787, 22.526581774790234, 'guangdong_jiangmen', 'guangdong', 'china'],
      台山: [112.79986034703025, 22.257033268246733, 'guangdong_jiangmen', 'guangdong', 'china'],
      开平: [112.69872116847873, 22.372559319808968, 'guangdong_jiangmen', 'guangdong', 'china'],
      鹤山: [112.96831504344298, 22.773903830261123, 'guangdong_jiangmen', 'guangdong', 'china'],
      恩平: [112.32047237637397, 22.18927371048786, 'guangdong_jiangmen', 'guangdong', 'china'],
      赤坎: [110.36818040480041, 21.279228291263134, 'guangdong_zhanjiang', 'guangdong', 'china'],
      霞山: [110.41280861718053, 21.20053934160308, 'guangdong_zhanjiang', 'guangdong', 'china'],
      坡头: [110.46219856798305, 21.25008812627064, 'guangdong_zhanjiang', 'guangdong', 'china'],
      麻章: [110.3357400156524, 21.271721547274762, 'guangdong_zhanjiang', 'guangdong', 'china'],
      遂溪: [110.26181856657541, 21.38300891382213, 'guangdong_zhanjiang', 'guangdong', 'china'],
      徐闻: [110.1821896295872, 20.33231018467684, 'guangdong_zhanjiang', 'guangdong', 'china'],
      廉江: [110.29140927120294, 21.61760289735238, 'guangdong_zhanjiang', 'guangdong', 'china'],
      雷州: [110.09484586135265, 20.914256763303072, 'guangdong_zhanjiang', 'guangdong', 'china'],
      吴川: [110.7869689393388, 21.43460983059586, 'guangdong_zhanjiang', 'guangdong', 'china'],
      茂南: [110.92707563746515, 21.66625042373595, 'guangdong_maoming', 'guangdong', 'china'],
      电白: [111.01372351584543, 21.513531987192057, 'guangdong_maoming', 'guangdong', 'china'],
      高州: [110.8597258783296, 21.92120657128947, 'guangdong_maoming', 'guangdong', 'china'],
      化州: [110.64483039197222, 21.66128473984428, 'guangdong_maoming', 'guangdong', 'china'],
      信宜: [110.94824221878855, 22.358353336608147, 'guangdong_maoming', 'guangdong', 'china'],
      端州: [112.47884947133609, 23.05862342684188, 'guangdong_zhaoqing', 'guangdong', 'china'],
      鼎湖: [112.57167788785677, 23.16214614719905, 'guangdong_zhaoqing', 'guangdong', 'china'],
      高要: [112.46730237227939, 23.03384717753254, 'guangdong_zhaoqing', 'guangdong', 'china'],
      广宁: [112.4468396830163, 23.637821466318066, 'guangdong_zhaoqing', 'guangdong', 'china'],
      怀集: [112.18894173718311, 23.919280517119276, 'guangdong_zhaoqing', 'guangdong', 'china'],
      封开: [111.50946668733987, 23.44085530670181, 'guangdong_zhaoqing', 'guangdong', 'china'],
      德庆: [111.78811317642389, 23.14737345743965, 'guangdong_zhaoqing', 'guangdong', 'china'],
      四会: [112.70147822785165, 23.346562642698885, 'guangdong_zhaoqing', 'guangdong', 'china'],
      惠城: [114.42056086391011, 23.085560116794927, 'guangdong_huizhou', 'guangdong', 'china'],
      惠阳: [114.47587471179435, 22.794800066117595, 'guangdong_huizhou', 'guangdong', 'china'],
      博罗: [114.29080876109437, 23.17334375356593, 'guangdong_huizhou', 'guangdong', 'china'],
      惠东: [114.72952084777629, 22.989375046698637, 'guangdong_huizhou', 'guangdong', 'china'],
      龙门: [114.26643177880221, 23.730061747673233, 'guangdong_huizhou', 'guangdong', 'china'],
      梅江: [116.1276899043312, 24.30843689754941, 'guangdong_meizhou', 'guangdong', 'china'],
      梅县: [116.09004867962737, 24.273603145186037, 'guangdong_meizhou', 'guangdong', 'china'],
      大埔: [116.70208270548986, 24.357244758853252, 'guangdong_meizhou', 'guangdong', 'china'],
      丰顺: [116.19089123095402, 23.758869930677083, 'guangdong_meizhou', 'guangdong', 'china'],
      五华: [115.78149894703404, 23.93151676235248, 'guangdong_meizhou', 'guangdong', 'china'],
      平远: [115.898202774357, 24.575678284846664, 'guangdong_meizhou', 'guangdong', 'china'],
      蕉岭: [116.1769747121593, 24.659611283166406, 'guangdong_meizhou', 'guangdong', 'china'],
      兴宁: [115.73822948497138, 24.143765791259167, 'guangdong_meizhou', 'guangdong', 'china'],
      汕尾城区: [115.37019324077117, 22.781996269622947, 'guangdong_shanwei', 'guangdong', 'china'],
      城区: [115.37019324077117, 22.781996269622947, 'guangdong_shanwei', 'guangdong', 'china'],
      海丰: [115.3437904125602, 22.977256925371165, 'guangdong_shanwei', 'guangdong', 'china'],
      陆河: [115.66405621189098, 23.308819534636513, 'guangdong_shanwei', 'guangdong', 'china'],
      陆丰: [115.65074278590134, 22.95200411671378, 'guangdong_shanwei', 'guangdong', 'china'],
      源城: [114.70329016102983, 23.752372740273437, 'guangdong_heyuan', 'guangdong', 'china'],
      紫金: [115.19082820713993, 23.639979029638354, 'guangdong_heyuan', 'guangdong', 'china'],
      龙川: [115.26296971245873, 24.1068308916917, 'guangdong_heyuan', 'guangdong', 'china'],
      连平: [114.50240724914592, 24.37045839286738, 'guangdong_heyuan', 'guangdong', 'china'],
      和平: [114.94791322254567, 24.44937101094889, 'guangdong_heyuan', 'guangdong', 'china'],
      东源: [114.7492039803914, 23.795225264569662, 'guangdong_heyuan', 'guangdong', 'china'],
      江城: [111.97536699212742, 21.865485251962205, 'guangdong_yangjiang', 'guangdong', 'china'],
      阳东: [112.01784474141834, 21.870430174811, 'guangdong_yangjiang', 'guangdong', 'china'],
      阳西: [111.62403569272186, 21.759876821104942, 'guangdong_yangjiang', 'guangdong', 'china'],
      阳春: [111.79703709409615, 22.175308159086732, 'guangdong_yangjiang', 'guangdong', 'china'],
      清城: [113.05514485809438, 23.695282816483967, 'guangdong_qingyuan', 'guangdong', 'china'],
      清新: [113.02166554761862, 23.7430363854564, 'guangdong_qingyuan', 'guangdong', 'china'],
      佛冈: [113.54052850292975, 23.872988359265484, 'guangdong_qingyuan', 'guangdong', 'china'],
      阳山: [112.64056398823519, 24.476033047089693, 'guangdong_qingyuan', 'guangdong', 'china'],
      连山壮族瑶族: [112.09296625917293, 24.573583409283533, 'guangdong_qingyuan', 'guangdong', 'china'],
      连南瑶族: [112.29730394042764, 24.725111044454334, 'guangdong_qingyuan', 'guangdong', 'china'],
      英德: [113.41182816526738, 24.192445373492493, 'guangdong_qingyuan', 'guangdong', 'china'],
      连州: [112.38584127059202, 24.78962821963154, 'guangdong_qingyuan', 'guangdong', 'china'],
      湘桥: [116.6401017372276, 23.671009561582174, 'guangdong_chaozhou', 'guangdong', 'china'],
      潮安: [116.68584192827579, 23.46684783608961, 'guangdong_chaozhou', 'guangdong', 'china'],
      饶平: [117.00849891671267, 23.67452393329032, 'guangdong_chaozhou', 'guangdong', 'china'],
      榕城: [116.3636035410198, 23.541307841700664, 'guangdong_jieyang', 'guangdong', 'china'],
      揭东: [116.419401826063, 23.576161023139075, 'guangdong_jieyang', 'guangdong', 'china'],
      揭西: [115.84525835364128, 23.43315090834474, 'guangdong_jieyang', 'guangdong', 'china'],
      惠来: [116.30227536319343, 23.03606775118596, 'guangdong_jieyang', 'guangdong', 'china'],
      普宁: [116.17153035740817, 23.304219397315226, 'guangdong_jieyang', 'guangdong', 'china'],
      云城: [112.05123933396177, 22.936737235629636, 'guangdong_yunfu', 'guangdong', 'china'],
      云安: [112.01217880338328, 23.078910926290117, 'guangdong_yunfu', 'guangdong', 'china'],
      新兴: [112.23735133391627, 22.709193089511512, 'guangdong_yunfu', 'guangdong', 'china'],
      郁南: [111.54247346567851, 23.243378731466393, 'guangdong_yunfu', 'guangdong', 'china'],
      罗定: [111.58465353198274, 22.771550475840826, 'guangdong_yunfu', 'guangdong', 'china'],
      南宁: [108.32655684226347, 22.829861501979117, null, 'guangxi', 'china'],
      柳州: [109.41818297856732, 24.320643223689626, null, 'guangxi', 'china'],
      桂林: [110.30556690078872, 25.280390431571853, null, 'guangxi', 'china'],
      梧州: [111.30416017621708, 23.48046884284583, null, 'guangxi', 'china'],
      北海: [109.1257773043749, 21.47918919789926, null, 'guangxi', 'china'],
      防城港: [108.35194461341021, 21.620869227978226, null, 'guangxi', 'china'],
      钦州: [108.63066235712628, 21.97322630147154, null, 'guangxi', 'china'],
      贵港: [109.60869358534643, 23.099406060660453, null, 'guangxi', 'china'],
      玉林: [110.16081703271952, 22.637674068289627, null, 'guangxi', 'china'],
      百色: [106.62287097289908, 23.90343168689527, null, 'guangxi', 'china'],
      贺州: [111.55862102765605, 24.41987212657299, null, 'guangxi', 'china'],
      河池: [108.06866006299224, 24.701572535776375, null, 'guangxi', 'china'],
      来宾: [109.23625198476864, 23.73976574765841, null, 'guangxi', 'china'],
      崇左: [107.36045746821647, 22.409863935262567, null, 'guangxi', 'china'],
      兴宁区: [108.32673933322383, 22.825354829052593, 'guangxi_nanning', 'guangxi', 'china'],
      青秀: [108.35257681879244, 22.822859982957546, 'guangxi_nanning', 'guangxi', 'china'],
      江南: [108.3170359432879, 22.805315667133396, 'guangxi_nanning', 'guangxi', 'china'],
      西乡塘: [108.31348643519256, 22.83847915477362, 'guangxi_nanning', 'guangxi', 'china'],
      良庆: [108.32861297221788, 22.764955952224863, 'guangxi_nanning', 'guangxi', 'china'],
      邕宁: [108.49066946470711, 22.762912288078688, 'guangxi_nanning', 'guangxi', 'china'],
      武鸣: [108.287251074738, 23.16298951545957, 'guangxi_nanning', 'guangxi', 'china'],
      隆安: [107.6952322793659, 23.18049815784513, 'guangxi_nanning', 'guangxi', 'china'],
      马山: [108.17945799785659, 23.717453157197625, 'guangxi_nanning', 'guangxi', 'china'],
      上林: [108.61038765883754, 23.438092113674923, 'guangxi_nanning', 'guangxi', 'china'],
      宾阳: [108.82321412110603, 23.222997427198997, 'guangxi_nanning', 'guangxi', 'china'],
      横: [109.27755153421155, 22.693156493466194, 'guangxi_nanning', 'guangxi', 'china'],
      柳州城中区: [109.41823058787087, 24.318351407676236, 'guangxi_liuzhou', 'guangxi', 'china'],
      鱼峰: [109.42183988313819, 24.309938115467475, 'guangxi_liuzhou', 'guangxi', 'china'],
      柳南: [109.40249721142558, 24.29279530892238, 'guangxi_liuzhou', 'guangxi', 'china'],
      柳北: [109.41308915383796, 24.365086293736013, 'guangxi_liuzhou', 'guangxi', 'china'],
      柳江: [109.34096571812218, 24.26375332832139, 'guangxi_liuzhou', 'guangxi', 'china'],
      柳城: [109.2523714067571, 24.66088072666198, 'guangxi_liuzhou', 'guangxi', 'china'],
      鹿寨: [109.74738184622888, 24.489076842188204, 'guangxi_liuzhou', 'guangxi', 'china'],
      融安: [109.41015936312397, 25.220598529549676, 'guangxi_liuzhou', 'guangxi', 'china'],
      融水苗族: [109.25930306597483, 25.07450514022371, 'guangxi_liuzhou', 'guangxi', 'china'],
      三江侗族: [109.62140717729568, 25.791209909855496, 'guangxi_liuzhou', 'guangxi', 'china'],
      秀峰: [110.2988686111937, 25.284803393473727, 'guangxi_guilin', 'guangxi', 'china'],
      叠彩: [110.30723161335592, 25.30748385970733, 'guangxi_guilin', 'guangxi', 'china'],
      象山区: [110.29130665254904, 25.268305640394846, 'guangxi_guilin', 'guangxi', 'china'],
      七星: [110.32411196958586, 25.26021242179609, 'guangxi_guilin', 'guangxi', 'china'],
      雁山: [110.31214767982915, 25.08371988944553, 'guangxi_guilin', 'guangxi', 'china'],
      临桂: [110.21205475177372, 25.252020277607162, 'guangxi_guilin', 'guangxi', 'china'],
      阳朔: [110.50118561142618, 24.78142179472513, 'guangxi_guilin', 'guangxi', 'china'],
      灵川: [110.33224843788179, 25.414293928052395, 'guangxi_guilin', 'guangxi', 'china'],
      全州: [111.07955912889769, 25.93564017145525, 'guangxi_guilin', 'guangxi', 'china'],
      兴安: [110.67729628283827, 25.61554273712269, 'guangxi_guilin', 'guangxi', 'china'],
      永福: [109.99579362621672, 24.992404009702405, 'guangxi_guilin', 'guangxi', 'china'],
      灌阳: [111.16679762338336, 25.494929938889268, 'guangxi_guilin', 'guangxi', 'china'],
      龙胜各族: [110.01592171710573, 25.802417181752162, 'guangxi_guilin', 'guangxi', 'china'],
      资源: [110.649003790512, 26.040527517300344, 'guangxi_guilin', 'guangxi', 'china'],
      平乐: [110.6492672983002, 24.638548631026843, 'guangxi_guilin', 'guangxi', 'china'],
      恭城瑶族: [110.83607902836039, 24.839318534033254, 'guangxi_guilin', 'guangxi', 'china'],
      荔浦: [110.40659117490274, 24.5041206667073, 'guangxi_guilin', 'guangxi', 'china'],
      万秀: [111.32235368492385, 23.477089873148888, 'guangxi_wuzhou', 'guangxi', 'china'],
      长洲: [111.28218298338307, 23.483598907291228, 'guangxi_wuzhou', 'guangxi', 'china'],
      龙圩: [111.25247799699558, 23.416279265987114, 'guangxi_wuzhou', 'guangxi', 'china'],
      苍梧: [111.550559048208, 23.850765665626856, 'guangxi_wuzhou', 'guangxi', 'china'],
      藤: [110.9383706461264, 23.37965618689387, 'guangxi_wuzhou', 'guangxi', 'china'],
      蒙山: [110.52901124020782, 24.20615381453197, 'guangxi_wuzhou', 'guangxi', 'china'],
      岑溪: [111.00454394640404, 22.92473703477204, 'guangxi_wuzhou', 'guangxi', 'china'],
      海城区: [109.11400952714641, 21.47448303488621, 'guangxi_beihai', 'guangxi', 'china'],
      银海: [109.12521639293193, 21.450761154966553, 'guangxi_beihai', 'guangxi', 'china'],
      铁山港: [109.45701067348388, 21.599077882969063, 'guangxi_beihai', 'guangxi', 'china'],
      合浦: [109.2071264223119, 21.669880665047312, 'guangxi_beihai', 'guangxi', 'china'],
      港口: [108.35274560954961, 21.620653403994485, 'guangxi_fangchenggang', 'guangxi', 'china'],
      防城: [108.36487496663266, 21.77108479187936, 'guangxi_fangchenggang', 'guangxi', 'china'],
      上思: [107.98858851690649, 22.157613050106747, 'guangxi_fangchenggang', 'guangxi', 'china'],
      东兴: [107.9766682219543, 21.54717464311146, 'guangxi_fangchenggang', 'guangxi', 'china'],
      钦南: [108.63312426932934, 21.97286660470992, 'guangxi_qinzhou', 'guangxi', 'china'],
      钦北: [108.45562034405667, 22.138747323960278, 'guangxi_qinzhou', 'guangxi', 'china'],
      灵山: [109.29993797360251, 22.424096543397084, 'guangxi_qinzhou', 'guangxi', 'china'],
      浦北: [109.56276713226828, 22.274655971554115, 'guangxi_qinzhou', 'guangxi', 'china'],
      港北: [109.60131961879954, 23.113593453669115, 'guangxi_guigang', 'guangxi', 'china'],
      港南: [109.61123247349802, 23.073291691397177, 'guangxi_guigang', 'guangxi', 'china'],
      覃塘: [109.42215724915717, 23.13890737639415, 'guangxi_guigang', 'guangxi', 'china'],
      平南: [110.4039337453489, 23.5508783275997, 'guangxi_guigang', 'guangxi', 'china'],
      桂平: [110.08116943733064, 23.388389788726965, 'guangxi_guigang', 'guangxi', 'china'],
      玉州: [110.1613348738926, 22.638448418469395, 'guangxi_yulin', 'guangxi', 'china'],
      福绵: [110.06062276529153, 22.58787719760785, 'guangxi_yulin', 'guangxi', 'china'],
      容: [110.5589794673393, 22.86239302977777, 'guangxi_yulin', 'guangxi', 'china'],
      陆川: [110.27129612424856, 22.327286182779932, 'guangxi_yulin', 'guangxi', 'china'],
      博白: [109.98655989314713, 22.2769528485531, 'guangxi_yulin', 'guangxi', 'china'],
      兴业: [109.88430685480063, 22.747672624956127, 'guangxi_yulin', 'guangxi', 'china'],
      北流: [110.3546318871446, 22.707349594576034, 'guangxi_yulin', 'guangxi', 'china'],
      右江: [106.62231249678155, 23.903366619316852, 'guangxi_baise', 'guangxi', 'china'],
      田阳: [106.91074794209008, 23.74229338301364, 'guangxi_baise', 'guangxi', 'china'],
      田东: [107.13076382277518, 23.606345084769337, 'guangxi_baise', 'guangxi', 'china'],
      德保: [106.62474976353592, 23.327149148830472, 'guangxi_baise', 'guangxi', 'china'],
      那坡: [105.83998756158728, 23.407084759571536, 'guangxi_baise', 'guangxi', 'china'],
      凌云: [106.57128600923983, 24.35194931527939, 'guangxi_baise', 'guangxi', 'china'],
      乐业: [106.56606142322308, 24.788523099715324, 'guangxi_baise', 'guangxi', 'china'],
      田林: [106.24157554935195, 24.29618093152053, 'guangxi_baise', 'guangxi', 'china'],
      西林: [105.10151737278932, 24.49812567631453, 'guangxi_baise', 'guangxi', 'china'],
      隆林各族: [105.34882388610261, 24.780509923782674, 'guangxi_baise', 'guangxi', 'china'],
      靖西: [106.42400333751092, 23.14088481186595, 'guangxi_baise', 'guangxi', 'china'],
      平果: [107.5869896223433, 23.32615994558896, 'guangxi_baise', 'guangxi', 'china'],
      八步: [111.55855779794325, 24.418176812235185, 'guangxi_hezhou', 'guangxi', 'china'],
      平桂: [111.5305659611106, 24.42292458178605, 'guangxi_hezhou', 'guangxi', 'china'],
      昭平: [110.8174364228406, 24.178664410856538, 'guangxi_hezhou', 'guangxi', 'china'],
      钟山: [111.31021226778763, 24.534240524495047, 'guangxi_hezhou', 'guangxi', 'china'],
      富川瑶族: [111.28373809948812, 24.82483277013272, 'guangxi_hezhou', 'guangxi', 'china'],
      金城江: [108.06868596788684, 24.701298565592975, 'guangxi_hechi', 'guangxi', 'china'],
      宜州: [108.66054646509356, 24.497885797683452, 'guangxi_hechi', 'guangxi', 'china'],
      南丹: [107.55311000344793, 24.989253292541807, 'guangxi_hechi', 'guangxi', 'china'],
      天峨: [107.18140487187344, 24.99219651725995, 'guangxi_hechi', 'guangxi', 'china'],
      凤山: [107.05101587267237, 24.55087183862855, 'guangxi_hechi', 'guangxi', 'china'],
      东兰: [107.38020134709942, 24.515433397456228, 'guangxi_hechi', 'guangxi', 'china'],
      罗城仫佬族: [108.90902741224238, 24.785003139917627, 'guangxi_hechi', 'guangxi', 'china'],
      环江毛南族: [108.26511559385126, 24.833806881799514, 'guangxi_hechi', 'guangxi', 'china'],
      巴马瑶族: [107.2596308564728, 24.145594178694196, 'guangxi_hechi', 'guangxi', 'china'],
      都安瑶族: [108.109221602906, 23.941166050743146, 'guangxi_hechi', 'guangxi', 'china'],
      大化瑶族: [108.00091459417773, 23.74590287838227, 'guangxi_hechi', 'guangxi', 'china'],
      兴宾: [109.23702370145648, 23.73891252222027, 'guangxi_laibin', 'guangxi', 'china'],
      忻城: [108.6739230624121, 24.07047584245265, 'guangxi_laibin', 'guangxi', 'china'],
      象州: [109.69096832397732, 23.966140062650744, 'guangxi_laibin', 'guangxi', 'china'],
      武宣: [109.66930716586943, 23.61036328064601, 'guangxi_laibin', 'guangxi', 'china'],
      金秀瑶族: [110.19506430273086, 24.14096898605408, 'guangxi_laibin', 'guangxi', 'china'],
      合山: [108.89514594036609, 23.818841521739298, 'guangxi_laibin', 'guangxi', 'china'],
      江州: [107.36097306664131, 22.410451793833964, 'guangxi_chongzuo', 'guangxi', 'china'],
      扶绥: [107.91802402198242, 22.641792017132254, 'guangxi_chongzuo', 'guangxi', 'china'],
      宁明: [107.07411630157085, 22.137394761465874, 'guangxi_chongzuo', 'guangxi', 'china'],
      龙州: [106.86408698459326, 22.349402039358267, 'guangxi_chongzuo', 'guangxi', 'china'],
      大新: [107.2073589707808, 22.839200735954236, 'guangxi_chongzuo', 'guangxi', 'china'],
      天等: [107.14891453571785, 23.088682227634454, 'guangxi_chongzuo', 'guangxi', 'china'],
      凭祥: [106.76559356411057, 22.11471214808424, 'guangxi_chongzuo', 'guangxi', 'china'],
      海口: [110.33773578304327, 20.037673144085705, null, 'hainan', 'china'],
      三亚: [109.51482559614567, 18.25357509902358, null, 'hainan', 'china'],
      三沙: [112.35533663228752, 16.837062769878646, null, 'hainan', 'china'],
      儋州: [109.58322902213746, 19.523692998380284, null, 'hainan', 'china'],
      五指山: [109.52320138326678, 18.78271029307307, null, 'hainan', 'china'],
      琼海: [110.47335230775978, 19.25170258915844, null, 'hainan', 'china'],
      文昌: [110.76042613525196, 19.619303117299943, null, 'hainan', 'china'],
      万宁: [110.39523124352722, 18.8024892481084, null, 'hainan', 'china'],
      东方: [108.66036128832386, 19.107674286075618, null, 'hainan', 'china'],
      定安: [110.35579234612078, 19.690673808803325, null, 'hainan', 'china'],
      屯昌: [110.10934583943065, 19.368591868751693, null, 'hainan', 'china'],
      澄迈: [110.01365879504796, 19.743046418741574, null, 'hainan', 'china'],
      临高: [109.69413073853455, 19.914593644712205, null, 'hainan', 'china'],
      白沙黎族: [109.45907935127249, 19.230846712070363, null, 'hainan', 'china'],
      昌江黎族: [109.05983991565593, 19.267024932462935, null, 'hainan', 'china'],
      乐东黎族: [109.18194773781596, 18.753675458965024, null, 'hainan', 'china'],
      陵水黎族: [110.04368212502078, 18.5113358196818, null, 'hainan', 'china'],
      保亭黎族苗族: [109.70894709983811, 18.642500904558155, null, 'hainan', 'china'],
      琼中黎族苗族: [109.84651019882156, 19.041402813968215, null, 'hainan', 'china'],
      秀英: [110.28881385963899, 20.01446969996725, 'hainan_haikou', 'hainan', 'china'],
      海口龙华区: [110.33691670870735, 20.036734558335677, 'hainan_haikou', 'hainan', 'china'],
      琼山: [110.36124748320167, 20.006810337300234, 'hainan_haikou', 'hainan', 'china'],
      美兰: [110.36309569673278, 20.03652419387582, 'hainan_haikou', 'hainan', 'china'],
      海棠: [109.76731563507725, 18.41336512020733, 'hainan_sanya', 'hainan', 'china'],
      吉阳: [109.51863263874517, 18.253172277645422, 'hainan_sanya', 'hainan', 'china'],
      天涯: [109.51291613365649, 18.253030744296673, 'hainan_sanya', 'hainan', 'china'],
      崖州: [109.18078585110034, 18.358263901746252, 'hainan_sanya', 'hainan', 'china'],
      西沙: [112.24097550589312, 16.780562820260393, 'hainan_sansha', 'hainan', 'china'],
      三沙南沙区: [112.89751276596351, 9.549592729937654, 'hainan_sansha', 'hainan', 'china'],
      万州: [108.38668171175863, 30.81396049758983, 'chongqing', 'chongqing', 'china'],
      涪陵: [107.40131537721557, 29.70996177447491, 'chongqing', 'chongqing', 'china'],
      渝中: [106.56931041954293, 29.563063076520933, 'chongqing', 'chongqing', 'china'],
      大渡口: [106.49267895195254, 29.486758391693193, 'chongqing', 'chongqing', 'china'],
      重庆江北区: [106.53933548028779, 29.581400705353776, 'chongqing', 'chongqing', 'china'],
      江北区: [106.53933548028779, 29.581400705353776, 'chongqing', 'chongqing', 'china'],
      沙坪坝: [106.46065203676132, 29.54746387507854, 'chongqing', 'chongqing', 'china'],
      九龙坡: [106.48754070026283, 29.529319144836947, 'chongqing', 'chongqing', 'china'],
      南岸: [106.56722850715207, 29.53031250079449, 'chongqing', 'chongqing', 'china'],
      北碚: [106.44427367825992, 29.831745812251604, 'chongqing', 'chongqing', 'china'],
      綦江: [106.65789927626913, 29.034111649795115, 'chongqing', 'chongqing', 'china'],
      大足: [105.72173205895085, 29.706805526520185, 'chongqing', 'chongqing', 'china'],
      渝北: [106.5194030763619, 29.607196282854726, 'chongqing', 'chongqing', 'china'],
      巴南: [106.52595371278541, 29.38774661838472, 'chongqing', 'chongqing', 'china'],
      黔江: [108.78917220819599, 29.533226635521935, 'chongqing', 'chongqing', 'china'],
      长寿: [107.08136385994024, 29.839586712712467, 'chongqing', 'chongqing', 'china'],
      江津: [106.25974167066317, 29.28908942660705, 'chongqing', 'chongqing', 'china'],
      合川: [106.27213145008487, 29.99668512057871, 'chongqing', 'chongqing', 'china'],
      永川: [105.90129017228857, 29.354440044189836, 'chongqing', 'chongqing', 'china'],
      南川: [107.10473668917506, 29.162325288837856, 'chongqing', 'chongqing', 'china'],
      璧山: [106.23761865668276, 29.599558718684026, 'chongqing', 'chongqing', 'china'],
      铜梁: [106.06140842125278, 29.8460208267521, 'chongqing', 'chongqing', 'china'],
      潼南: [105.84821861598213, 30.195867456557902, 'chongqing', 'chongqing', 'china'],
      荣昌: [105.60048065642414, 29.409929601516982, 'chongqing', 'chongqing', 'china'],
      开州: [108.41988575001538, 31.173423982457997, 'chongqing', 'chongqing', 'china'],
      梁平: [107.80656870651929, 30.678002545674463, 'chongqing', 'chongqing', 'china'],
      武隆: [107.76297796214698, 29.330081956073524, 'chongqing', 'chongqing', 'china'],
      城口: [108.67151152908636, 31.951983210763473, 'chongqing', 'chongqing', 'china'],
      丰都: [107.73895582289796, 29.87246236392552, 'chongqing', 'chongqing', 'china'],
      垫江: [107.35525448138092, 30.335717296471447, 'chongqing', 'chongqing', 'china'],
      忠: [108.04406111206465, 30.297415000404893, 'chongqing', 'chongqing', 'china'],
      云阳: [108.7041423743234, 30.93665143520444, 'chongqing', 'chongqing', 'china'],
      奉节: [109.47225360920308, 31.026039083361418, 'chongqing', 'chongqing', 'china'],
      巫山: [109.88547393430558, 31.080660974067875, 'chongqing', 'chongqing', 'china'],
      巫溪: [109.63548143392781, 31.402302069019623, 'chongqing', 'chongqing', 'china'],
      石柱土家族: [108.11886346671413, 30.0048288982601, 'chongqing', 'chongqing', 'china'],
      秀山土家族苗族: [109.00257433747848, 28.450671504011233, 'chongqing', 'chongqing', 'china'],
      酉阳土家族苗族: [108.77378563561604, 28.84557673094147, 'chongqing', 'chongqing', 'china'],
      彭水苗族土家族: [108.17313078630842, 29.29961215546349, 'chongqing', 'chongqing', 'china'],
      成都: [104.07221517047132, 30.665531299496966, null, 'sichuan', 'china'],
      自贡: [104.77986794652556, 29.359001232999884, null, 'sichuan', 'china'],
      攀枝花: [101.72255988361734, 26.58624178108506, null, 'sichuan', 'china'],
      泸州: [105.44985830990747, 28.895024757597778, null, 'sichuan', 'china'],
      德阳: [104.4050691213086, 31.134306776069323, null, 'sichuan', 'china'],
      绵阳: [104.74818585813301, 31.4702064512426, null, 'sichuan', 'china'],
      广元: [105.83619213086148, 32.43994666432229, null, 'sichuan', 'china'],
      遂宁: [105.57784355121657, 30.5193385242576, null, 'sichuan', 'china'],
      内江: [105.0727152418874, 29.592778976009626, null, 'sichuan', 'china'],
      乐山: [103.76780016262393, 29.587885932666868, null, 'sichuan', 'china'],
      南充: [106.08936895173615, 30.80159139786976, null, 'sichuan', 'china'],
      眉山: [103.83830745898752, 30.05429207319911, null, 'sichuan', 'china'],
      宜宾: [104.63723168957121, 28.766462745909894, null, 'sichuan', 'china'],
      广安: [106.63992072084396, 30.46214813929039, null, 'sichuan', 'china'],
      达州: [107.50871508313003, 31.215679782551515, null, 'sichuan', 'china'],
      雅安: [103.00757061558637, 29.993549905736913, null, 'sichuan', 'china'],
      巴中: [106.76024231887547, 31.864567677934925, null, 'sichuan', 'china'],
      资阳: [104.64832930776859, 30.1285239846272, null, 'sichuan', 'china'],
      阿坝藏族羌族: [102.22780367954873, 31.905958833371187, null, 'sichuan', 'china'],
      甘孜藏族: [101.97035269735244, 30.05656831605716, null, 'sichuan', 'china'],
      凉山彝族: [102.26521183499854, 27.892935851374464, null, 'sichuan', 'china'],
      锦江: [104.08754136333623, 30.66351977327828, 'sichuan_chengdu', 'sichuan', 'china'],
      青羊: [104.06216100234471, 30.67385792311313, 'sichuan_chengdu', 'sichuan', 'china'],
      金牛: [104.04987738231254, 30.69835931632347, 'sichuan_chengdu', 'sichuan', 'china'],
      武侯: [104.05811390126563, 30.637123313376055, 'sichuan_chengdu', 'sichuan', 'china'],
      成华: [104.10966751294696, 30.665966653794328, 'sichuan_chengdu', 'sichuan', 'china'],
      龙泉驿: [104.27558670075811, 30.566908980614667, 'sichuan_chengdu', 'sichuan', 'china'],
      青白江: [104.26143092371771, 30.88952233145983, 'sichuan_chengdu', 'sichuan', 'china'],
      新都: [104.16661343187778, 30.83053128678806, 'sichuan_chengdu', 'sichuan', 'china'],
      温江: [103.8432904699276, 30.7038826028328, 'sichuan_chengdu', 'sichuan', 'china'],
      双流: [103.9290962879408, 30.57954608035214, 'sichuan_chengdu', 'sichuan', 'china'],
      郫都: [103.89433328761106, 30.81471118492217, 'sichuan_chengdu', 'sichuan', 'china'],
      新津: [103.81888212275845, 30.420533243135374, 'sichuan_chengdu', 'sichuan', 'china'],
      金堂: [104.42205640110095, 30.864636041800534, 'sichuan_chengdu', 'sichuan', 'china'],
      大邑: [103.52892019302266, 30.592477947993636, 'sichuan_chengdu', 'sichuan', 'china'],
      蒲江: [103.51810242814656, 30.20009963327574, 'sichuan_chengdu', 'sichuan', 'china'],
      都江堰: [103.63450226316836, 30.996861042411957, 'sichuan_chengdu', 'sichuan', 'china'],
      彭州: [103.9476501055222, 30.99130557364236, 'sichuan_chengdu', 'sichuan', 'china'],
      邛崃: [103.46789704011921, 30.419407596261884, 'sichuan_chengdu', 'sichuan', 'china'],
      崇州: [103.67748613719219, 30.63776112620697, 'sichuan_chengdu', 'sichuan', 'china'],
      简阳: [104.5568598116135, 30.396666012175487, 'sichuan_chengdu', 'sichuan', 'china'],
      自流井: [104.78463371819082, 29.34941234094295, 'sichuan_zigong', 'sichuan', 'china'],
      贡井: [104.72093062572509, 29.351444104228175, 'sichuan_zigong', 'sichuan', 'china'],
      大安区: [104.78967937384364, 29.37323978925035, 'sichuan_zigong', 'sichuan', 'china'],
      沿滩: [104.88282337054048, 29.27882805635754, 'sichuan_zigong', 'sichuan', 'china'],
      荣: [104.43040952162798, 29.460950312679675, 'sichuan_zigong', 'sichuan', 'china'],
      富顺: [104.99071385127036, 29.187500670470037, 'sichuan_zigong', 'sichuan', 'china'],
      攀枝花东区: [101.72168909099341, 26.586672513949914, 'sichuan_panzhihua', 'sichuan', 'china'],
      西: [101.64437476720784, 26.603075294094033, 'sichuan_panzhihua', 'sichuan', 'china'],
      仁和: [101.74436598671396, 26.50330322575745, 'sichuan_panzhihua', 'sichuan', 'china'],
      米易: [102.11631478218513, 26.893740239744176, 'sichuan_panzhihua', 'sichuan', 'china'],
      盐边: [101.85835809615989, 26.68365318936325, 'sichuan_panzhihua', 'sichuan', 'china'],
      江阳: [105.45163488392228, 28.88880430247012, 'sichuan_luzhou', 'sichuan', 'china'],
      纳溪: [105.38363816215029, 28.782501250957388, 'sichuan_luzhou', 'sichuan', 'china'],
      龙马潭: [105.44177077218185, 28.90334614747292, 'sichuan_luzhou', 'sichuan', 'china'],
      泸: [105.38276913950726, 29.157493029445966, 'sichuan_luzhou', 'sichuan', 'china'],
      合江: [105.84052559471374, 28.816630165655308, 'sichuan_luzhou', 'sichuan', 'china'],
      叙永: [105.44430626406277, 28.173724942429338, 'sichuan_luzhou', 'sichuan', 'china'],
      古蔺: [105.81982780838433, 28.045531177646136, 'sichuan_luzhou', 'sichuan', 'china'],
      旌阳: [104.3960772033735, 31.1366990264349, 'sichuan_deyang', 'sichuan', 'china'],
      罗江: [104.51353791944192, 31.30952154187731, 'sichuan_deyang', 'sichuan', 'china'],
      中江: [104.68435333625392, 31.042680432148806, 'sichuan_deyang', 'sichuan', 'china'],
      广汉: [104.2883255227654, 30.983465747816723, 'sichuan_deyang', 'sichuan', 'china'],
      什邡: [104.18009463275924, 31.133120640234743, 'sichuan_deyang', 'sichuan', 'china'],
      绵竹: [104.20672761377372, 31.34893079640753, 'sichuan_deyang', 'sichuan', 'china'],
      涪城: [104.74743778606305, 31.469733167211505, 'sichuan_mianyang', 'sichuan', 'china'],
      游仙: [104.77643791914439, 31.49104826941866, 'sichuan_mianyang', 'sichuan', 'china'],
      安州: [104.56687267554665, 31.544773180086185, 'sichuan_mianyang', 'sichuan', 'china'],
      三台: [105.09682482531308, 31.096917283605915, 'sichuan_mianyang', 'sichuan', 'china'],
      盐亭: [105.39851871367705, 31.229152421541805, 'sichuan_mianyang', 'sichuan', 'china'],
      梓潼: [105.17007804811514, 31.641015607075033, 'sichuan_mianyang', 'sichuan', 'china'],
      北川羌族: [104.47465962144021, 31.621578398365667, 'sichuan_mianyang', 'sichuan', 'china'],
      平武: [104.536979641882, 32.41385719945232, 'sichuan_mianyang', 'sichuan', 'china'],
      江油: [104.75084755106624, 31.782595994319784, 'sichuan_mianyang', 'sichuan', 'china'],
      利州: [105.83264002304904, 32.43851989690459, 'sichuan_guangyuan', 'sichuan', 'china'],
      昭化: [105.97054127915958, 32.329103095929185, 'sichuan_guangyuan', 'sichuan', 'china'],
      朝天: [105.89575522596726, 32.64836486146448, 'sichuan_guangyuan', 'sichuan', 'china'],
      旺苍: [106.29691575791949, 32.23433466021434, 'sichuan_guangyuan', 'sichuan', 'china'],
      青川: [105.24524384602748, 32.59196841510877, 'sichuan_guangyuan', 'sichuan', 'china'],
      剑阁: [105.53361678536085, 32.29227256363899, 'sichuan_guangyuan', 'sichuan', 'china'],
      苍溪: [105.94616723819459, 31.73840791889356, 'sichuan_guangyuan', 'sichuan', 'china'],
      船山: [105.5886781905433, 30.508841196464225, 'sichuan_suining', 'sichuan', 'china'],
      安居: [105.46582728109045, 30.35226658180133, 'sichuan_suining', 'sichuan', 'china'],
      蓬溪: [105.72011673774117, 30.781184516955843, 'sichuan_suining', 'sichuan', 'china'],
      大英: [105.25859752082677, 30.587820035768036, 'sichuan_suining', 'sichuan', 'china'],
      射洪: [105.38832981838988, 30.874888477659404, 'sichuan_suining', 'sichuan', 'china'],
      内江市中区: [105.07204690366595, 29.590961153554446, 'sichuan_neijiang', 'sichuan', 'china'],
      东兴区: [105.07376883369902, 29.60580923918278, 'sichuan_neijiang', 'sichuan', 'china'],
      威远: [104.67482601663431, 29.532889379868077, 'sichuan_neijiang', 'sichuan', 'china'],
      资中: [104.85896532497435, 29.78133937611734, 'sichuan_neijiang', 'sichuan', 'china'],
      隆昌: [105.29464725606363, 29.34390625881721, 'sichuan_neijiang', 'sichuan', 'china'],
      乐山市中区: [103.76194334886559, 29.594109125225145, 'sichuan_leshan', 'sichuan', 'china'],
      沙湾区: [103.55639931630172, 29.422808875437525, 'sichuan_leshan', 'sichuan', 'china'],
      五通桥: [103.82328702330977, 29.412385795468506, 'sichuan_leshan', 'sichuan', 'china'],
      金口河: [103.08422500243623, 29.25232190026039, 'sichuan_leshan', 'sichuan', 'china'],
      犍为: [103.95074990112032, 29.215876980572403, 'sichuan_leshan', 'sichuan', 'china'],
      井研: [104.07535566146808, 29.657666926165533, 'sichuan_leshan', 'sichuan', 'china'],
      夹江: [103.58529675452658, 29.747185491689326, 'sichuan_leshan', 'sichuan', 'china'],
      沐川: [103.90857675025079, 28.962527741928685, 'sichuan_leshan', 'sichuan', 'china'],
      峨边彝族: [103.26872527888324, 29.23596038034243, 'sichuan_leshan', 'sichuan', 'china'],
      马边彝族: [103.55330138769943, 28.84517767014008, 'sichuan_leshan', 'sichuan', 'china'],
      峨眉山: [103.49905476975982, 29.603186871882887, 'sichuan_leshan', 'sichuan', 'china'],
      顺庆: [106.09048674219541, 30.80187891981959, 'sichuan_nanchong', 'sichuan', 'china'],
      高坪: [106.11548933103133, 30.787825199576684, 'sichuan_nanchong', 'sichuan', 'china'],
      嘉陵: [106.07347013862598, 30.769227905396598, 'sichuan_nanchong', 'sichuan', 'china'],
      南部: [106.06760537940441, 31.355587885065095, 'sichuan_nanchong', 'sichuan', 'china'],
      营山: [106.57129873135231, 31.08221506916818, 'sichuan_nanchong', 'sichuan', 'china'],
      蓬安: [106.41996330499651, 31.03403370844933, 'sichuan_nanchong', 'sichuan', 'china'],
      仪陇: [106.30353833091536, 31.27737343439906, 'sichuan_nanchong', 'sichuan', 'china'],
      西充: [105.89962648084474, 31.000324750822465, 'sichuan_nanchong', 'sichuan', 'china'],
      阆中: [105.98171677500339, 31.58669266945853, 'sichuan_nanchong', 'sichuan', 'china'],
      东坡: [103.83807150992183, 30.054105936509128, 'sichuan_meishan', 'sichuan', 'china'],
      彭山: [103.87666667380547, 30.198025605624505, 'sichuan_meishan', 'sichuan', 'china'],
      仁寿: [104.15407090557986, 30.002969378582293, 'sichuan_meishan', 'sichuan', 'china'],
      洪雅: [103.38161118705057, 29.91057277516428, 'sichuan_meishan', 'sichuan', 'china'],
      丹棱: [103.52489653791162, 30.01857631650573, 'sichuan_meishan', 'sichuan', 'china'],
      青神: [103.85268705414839, 29.837232937139504, 'sichuan_meishan', 'sichuan', 'china'],
      翠屏: [104.6366389715152, 28.766448100155603, 'sichuan_yibin', 'sichuan', 'china'],
      南溪: [104.98760217268264, 28.8459839805076, 'sichuan_yibin', 'sichuan', 'china'],
      叙州: [104.54796600686524, 28.701817055799005, 'sichuan_yibin', 'sichuan', 'china'],
      江安: [105.07528565743281, 28.733821991929265, 'sichuan_yibin', 'sichuan', 'china'],
      长宁: [104.92767829599728, 28.58310209851689, 'sichuan_yibin', 'sichuan', 'china'],
      高: [104.52559743775042, 28.44198809478307, 'sichuan_yibin', 'sichuan', 'china'],
      珙: [104.71884513533824, 28.454791864409994, 'sichuan_yibin', 'sichuan', 'china'],
      筠连: [104.51426239786178, 28.16826441522194, 'sichuan_yibin', 'sichuan', 'china'],
      兴文: [105.24295045578309, 28.309294530650927, 'sichuan_yibin', 'sichuan', 'china'],
      屏山: [104.16901411221761, 28.648674673466388, 'sichuan_yibin', 'sichuan', 'china'],
      广安区: [106.63946014557247, 30.462207233237123, 'sichuan_guangan', 'sichuan', 'china'],
      前锋: [106.89977587192593, 30.50235888846651, 'sichuan_guangan', 'sichuan', 'china'],
      岳池: [106.45086825655537, 30.539850530750158, 'sichuan_guangan', 'sichuan', 'china'],
      武胜: [106.29894715124695, 30.35032815120647, 'sichuan_guangan', 'sichuan', 'china'],
      邻水: [106.94138479318627, 30.340544904180433, 'sichuan_guangan', 'sichuan', 'china'],
      华蓥: [106.78436238521846, 30.386707300867084, 'sichuan_guangan', 'sichuan', 'china'],
      通川: [107.50752323548438, 31.219702151586343, 'sichuan_dazhou', 'sichuan', 'china'],
      达川: [107.5143495487396, 31.205321916948627, 'sichuan_dazhou', 'sichuan', 'china'],
      宣汉: [107.72880965566692, 31.360902891135044, 'sichuan_dazhou', 'sichuan', 'china'],
      开江: [107.870577604475, 31.091756803170917, 'sichuan_dazhou', 'sichuan', 'china'],
      大竹: [107.21400739846695, 30.74203881368301, 'sichuan_dazhou', 'sichuan', 'china'],
      渠: [106.97732420757325, 30.84206297499782, 'sichuan_dazhou', 'sichuan', 'china'],
      万源: [108.04410408126692, 32.073650867542455, 'sichuan_dazhou', 'sichuan', 'china'],
      雨城: [103.00994041374194, 29.987627020790907, 'sichuan_yaan', 'sichuan', 'china'],
      名山: [103.11870596936558, 30.090676831642025, 'sichuan_yaan', 'sichuan', 'china'],
      荥经: [102.85110568710338, 29.801833674327746, 'sichuan_yaan', 'sichuan', 'china'],
      汉源: [102.6836903495311, 29.355720245316057, 'sichuan_yaan', 'sichuan', 'china'],
      石棉: [102.36601939956383, 29.24036632931887, 'sichuan_yaan', 'sichuan', 'china'],
      天全: [102.77002047560676, 30.06575526145063, 'sichuan_yaan', 'sichuan', 'china'],
      芦山: [102.9305628525683, 30.15881738807179, 'sichuan_yaan', 'sichuan', 'china'],
      宝兴: [102.81986970545353, 30.375082833376133, 'sichuan_yaan', 'sichuan', 'china'],
      巴州: [106.76024475461712, 31.864124832228523, 'sichuan_bazhong', 'sichuan', 'china'],
      恩阳: [106.49310209258476, 31.82209723975779, 'sichuan_bazhong', 'sichuan', 'china'],
      通江: [107.25412520780802, 31.918077738660084, 'sichuan_bazhong', 'sichuan', 'china'],
      南江: [106.84996854388447, 32.35895319438691, 'sichuan_bazhong', 'sichuan', 'china'],
      平昌: [107.1085340178019, 31.568495175124507, 'sichuan_bazhong', 'sichuan', 'china'],
      雁江: [104.64875000521255, 30.12799806533161, 'sichuan_ziyang', 'sichuan', 'china'],
      安岳: [105.34321564513257, 30.105310724943845, 'sichuan_ziyang', 'sichuan', 'china'],
      乐至: [105.03766581952435, 30.28160547177146, 'sichuan_ziyang', 'sichuan', 'china'],
      马尔康: [102.22761744269509, 31.905925334395054, 'sichuan_abazangzuqiangzuzizhizhou', 'sichuan', 'china'],
      汶川: [103.58714928340241, 31.480781409612312, 'sichuan_abazangzuqiangzuzizhizhou', 'sichuan', 'china'],
      理: [103.1720048574208, 31.44269054578743, 'sichuan_abazangzuqiangzuzizhizhou', 'sichuan', 'china'],
      茂: [103.85726836413683, 31.68613190749636, 'sichuan_abazangzuqiangzuzizhizhou', 'sichuan', 'china'],
      松潘: [103.60572064292796, 32.64423583140104, 'sichuan_abazangzuqiangzuzizhizhou', 'sichuan', 'china'],
      九寨沟: [104.24292686876642, 33.267897542966935, 'sichuan_abazangzuqiangzuzizhizhou', 'sichuan', 'china'],
      金川: [102.07125671034358, 31.482064395619567, 'sichuan_abazangzuqiangzuzizhizhou', 'sichuan', 'china'],
      小金: [102.36961834708008, 31.00532397047222, 'sichuan_abazangzuqiangzuzizhizhou', 'sichuan', 'china'],
      黑水: [102.99732638277054, 32.06771337569535, 'sichuan_abazangzuqiangzuzizhizhou', 'sichuan', 'china'],
      壤塘: [100.98571914450781, 32.270580042717356, 'sichuan_abazangzuqiangzuzizhizhou', 'sichuan', 'china'],
      阿坝: [101.70760174589944, 32.90992417958522, 'sichuan_abazangzuqiangzuzizhizhou', 'sichuan', 'china'],
      若尔盖: [102.97010907849433, 33.58223112756328, 'sichuan_abazangzuqiangzuzizhizhou', 'sichuan', 'china'],
      红原: [102.55151980657881, 32.799610424551865, 'sichuan_abazangzuqiangzuzizhizhou', 'sichuan', 'china'],
      康定: [101.97059354562587, 30.056646978429164, 'sichuan_ganzizangzuzizhizhou', 'sichuan', 'china'],
      泸定: [102.23965988278076, 29.918775172676284, 'sichuan_ganzizangzuzizhizhou', 'sichuan', 'china'],
      丹巴: [101.89255493033268, 30.88337848013265, 'sichuan_ganzizangzuzizhizhou', 'sichuan', 'china'],
      九龙: [101.51335699237428, 29.008206057425056, 'sichuan_ganzizangzuzizhizhou', 'sichuan', 'china'],
      雅江: [101.02222738794087, 30.038345298712375, 'sichuan_ganzizangzuzizhizhou', 'sichuan', 'china'],
      道孚: [101.12987472448853, 30.984668020558345, 'sichuan_ganzizangzuzizhizhou', 'sichuan', 'china'],
      炉霍: [100.68588909363775, 31.398972265607952, 'sichuan_ganzizangzuzizhizhou', 'sichuan', 'china'],
      甘孜: [99.99826194420369, 31.625722583836264, 'sichuan_ganzizangzuzizhizhou', 'sichuan', 'china'],
      新龙: [100.31849197570055, 30.94523026022918, 'sichuan_ganzizangzuzizhizhou', 'sichuan', 'china'],
      德格: [98.58659198801683, 31.812435379156344, 'sichuan_ganzizangzuzizhizhou', 'sichuan', 'china'],
      白玉: [98.8309427000649, 31.21451883855065, 'sichuan_ganzizangzuzizhizhou', 'sichuan', 'china'],
      石渠: [98.1074675869534, 32.98100188620385, 'sichuan_ganzizangzuzizhizhou', 'sichuan', 'china'],
      色达: [100.33806711710697, 32.275020253065335, 'sichuan_ganzizangzuzizhizhou', 'sichuan', 'china'],
      理塘: [100.27643227363144, 29.997543027255933, 'sichuan_ganzizangzuzizhizhou', 'sichuan', 'china'],
      巴塘: [99.11546706063402, 30.011974383368358, 'sichuan_ganzizangzuzizhizhou', 'sichuan', 'china'],
      乡城: [99.80649695976548, 28.936707524100534, 'sichuan_ganzizangzuzizhizhou', 'sichuan', 'china'],
      稻城: [100.3031566463218, 29.04364652769154, 'sichuan_ganzizangzuzizhizhou', 'sichuan', 'china'],
      得荣: [99.2946249444675, 28.71710423532906, 'sichuan_ganzizangzuzizhizhou', 'sichuan', 'china'],
      西昌: [102.26522462245724, 27.891959893373865, 'sichuan_liangshanyizuzizhizhou', 'sichuan', 'china'],
      木里藏族: [101.2865812025694, 27.933157581637026, 'sichuan_liangshanyizuzizhizhou', 'sichuan', 'china'],
      盐源: [101.51533678229453, 27.429668676583816, 'sichuan_liangshanyizuzizhizhou', 'sichuan', 'china'],
      德昌: [102.18544153281269, 27.409524905012564, 'sichuan_liangshanyizuzizhizhou', 'sichuan', 'china'],
      会理: [102.25599387578258, 26.664975395558628, 'sichuan_liangshanyizuzizhizhou', 'sichuan', 'china'],
      会东: [102.58543973889802, 26.636850145553417, 'sichuan_liangshanyizuzizhizhou', 'sichuan', 'china'],
      宁南: [102.7638993706752, 27.07108753974549, 'sichuan_liangshanyizuzizhizhou', 'sichuan', 'china'],
      普格: [102.54767890506935, 27.382524850003584, 'sichuan_liangshanyizuzizhizhou', 'sichuan', 'china'],
      布拖: [102.8152957504212, 27.71503982932451, 'sichuan_liangshanyizuzizhizhou', 'sichuan', 'china'],
      金阳: [103.25525457549557, 27.70165393564317, 'sichuan_liangshanyizuzizhizhou', 'sichuan', 'china'],
      昭觉: [102.85041795573795, 28.016858314676885, 'sichuan_liangshanyizuzizhizhou', 'sichuan', 'china'],
      喜德: [102.41890690082059, 28.311199461949407, 'sichuan_liangshanyizuzizhizhou', 'sichuan', 'china'],
      冕宁: [102.17661139515846, 28.556575703257835, 'sichuan_liangshanyizuzizhizhou', 'sichuan', 'china'],
      越西: [102.51535344885454, 28.64564549645568, 'sichuan_liangshanyizuzizhizhou', 'sichuan', 'china'],
      甘洛: [102.782511876265, 28.98279348991372, 'sichuan_liangshanyizuzizhizhou', 'sichuan', 'china'],
      美姑: [103.13859244323042, 28.333665447385606, 'sichuan_liangshanyizuzizhizhou', 'sichuan', 'china'],
      雷波: [103.57801137044558, 28.269200482635366, 'sichuan_liangshanyizuzizhizhou', 'sichuan', 'china'],
      贵阳: [106.71999412186334, 26.58428544056653, null, 'guizhou', 'china'],
      六盘水: [104.8532518683875, 26.59058843582065, null, 'guizhou', 'china'],
      遵义: [106.94370111569488, 27.712821182144822, null, 'guizhou', 'china'],
      安顺: [105.93866011233617, 26.251575648789377, null, 'guizhou', 'china'],
      毕节: [105.29156623180803, 27.307469095400666, null, 'guizhou', 'china'],
      铜仁: [109.19797816558899, 27.72464164319908, null, 'guizhou', 'china'],
      黔西南布依族苗族: [104.90443469123211, 25.09430727768813, null, 'guizhou', 'china'],
      黔东南苗族侗族: [107.98395413625961, 26.58947494061713, null, 'guizhou', 'china'],
      黔南布依族苗族: [107.52356043920513, 26.264533669296444, null, 'guizhou', 'china'],
      南明: [106.722493733248, 26.57964621405077, 'guizhou_guiyang', 'guizhou', 'china'],
      云岩: [106.71990806403136, 26.58895259883815, 'guizhou_guiyang', 'guizhou', 'china'],
      花溪: [106.67723091425594, 26.416750029852196, 'guizhou_guiyang', 'guizhou', 'china'],
      乌当: [106.7686461495512, 26.636797401031238, 'guizhou_guiyang', 'guizhou', 'china'],
      贵阳白云区: [106.6396172652423, 26.68260532714638, 'guizhou_guiyang', 'guizhou', 'china'],
      观山湖: [106.63290493831079, 26.652057076634794, 'guizhou_guiyang', 'guizhou', 'china'],
      开阳: [106.97601031127412, 27.062520746041255, 'guizhou_guiyang', 'guizhou', 'china'],
      息烽: [106.7442544883941, 27.098342247542515, 'guizhou_guiyang', 'guizhou', 'china'],
      修文: [106.6057382456441, 26.846519259607266, 'guizhou_guiyang', 'guizhou', 'china'],
      清镇: [106.47679852089871, 26.557289179183922, 'guizhou_guiyang', 'guizhou', 'china'],
      钟山区: [104.85275475774043, 26.59074231585332, 'guizhou_liupanshui', 'guizhou', 'china'],
      六枝特: [105.4806690392617, 26.216966381578732, 'guizhou_liupanshui', 'guizhou', 'china'],
      水城: [104.96341762097093, 26.546282235888835, 'guizhou_liupanshui', 'guizhou', 'china'],
      盘州: [104.47495601345807, 25.712686911016878, 'guizhou_liupanshui', 'guizhou', 'china'],
      红花岗: [106.95023858288381, 27.700492705191518, 'guizhou_zunyi', 'guizhou', 'china'],
      汇川: [106.94370111569488, 27.712821182144822, 'guizhou_zunyi', 'guizhou', 'china'],
      播州: [106.83817993520753, 27.54126126389125, 'guizhou_zunyi', 'guizhou', 'china'],
      桐梓: [106.83308428820973, 28.137618079201214, 'guizhou_zunyi', 'guizhou', 'china'],
      绥阳: [107.19752001795099, 27.957322556512896, 'guizhou_zunyi', 'guizhou', 'china'],
      正安: [107.44841251094579, 28.556146804420603, 'guizhou_zunyi', 'guizhou', 'china'],
      道真仡佬族苗族: [107.61184614920074, 28.886005544193537, 'guizhou_zunyi', 'guizhou', 'china'],
      务川仡佬族苗族: [107.89426109271568, 28.527859037250064, 'guizhou_zunyi', 'guizhou', 'china'],
      凤冈: [107.72855590315305, 27.96672710680635, 'guizhou_zunyi', 'guizhou', 'china'],
      湄潭: [107.49225457650277, 27.7717707682653, 'guizhou_zunyi', 'guizhou', 'china'],
      余庆: [107.89898543121933, 27.227804083579933, 'guizhou_zunyi', 'guizhou', 'china'],
      习水: [106.20737682080184, 28.33414625891709, 'guizhou_zunyi', 'guizhou', 'china'],
      赤水: [105.70459972008668, 28.593192890609245, 'guizhou_zunyi', 'guizhou', 'china'],
      仁怀: [106.41894701821042, 27.8094135161192, 'guizhou_zunyi', 'guizhou', 'china'],
      西秀: [105.95259067859679, 26.2545562814611, 'guizhou_anshun', 'guizhou', 'china'],
      平坝: [106.26652729258605, 26.41176273121828, 'guizhou_anshun', 'guizhou', 'china'],
      普定: [105.75210995504145, 26.311871007351936, 'guizhou_anshun', 'guizhou', 'china'],
      镇宁布依族苗族: [105.77523527626843, 26.061836611712273, 'guizhou_anshun', 'guizhou', 'china'],
      关岭布依族苗族: [105.62492830888239, 25.950432653559037, 'guizhou_anshun', 'guizhou', 'china'],
      紫云苗族布依族: [106.09092882904321, 25.75787371572607, 'guizhou_anshun', 'guizhou', 'china'],
      七星关: [105.29140735637436, 27.307862847538047, 'guizhou_bijie', 'guizhou', 'china'],
      大方: [105.61570020898871, 27.149806052549323, 'guizhou_bijie', 'guizhou', 'china'],
      黔西: [106.0448643214886, 27.03074483433381, 'guizhou_bijie', 'guizhou', 'china'],
      金沙: [106.22855297698261, 27.465816666668392, 'guizhou_bijie', 'guizhou', 'china'],
      织金: [105.77558342410354, 26.674235785623722, 'guizhou_bijie', 'guizhou', 'china'],
      纳雍: [105.38177575978575, 26.77609716870859, 'guizhou_bijie', 'guizhou', 'china'],
      威宁彝族回族苗族: [104.2929298653746, 26.86538935553875, 'guizhou_bijie', 'guizhou', 'china'],
      赫章: [104.73295231866153, 27.125184544096182, 'guizhou_bijie', 'guizhou', 'china'],
      碧江: [109.19853955390484, 27.725044743228143, 'guizhou_tongren', 'guizhou', 'china'],
      万山: [109.21844045031331, 27.525299514550596, 'guizhou_tongren', 'guizhou', 'china'],
      江口: [108.85483259419473, 27.698194363423315, 'guizhou_tongren', 'guizhou', 'china'],
      玉屏侗族: [108.92442843382857, 27.24382980821971, 'guizhou_tongren', 'guizhou', 'china'],
      石阡: [108.23629990903405, 27.52567028531703, 'guizhou_tongren', 'guizhou', 'china'],
      思南: [108.26225429268196, 27.947546344961832, 'guizhou_tongren', 'guizhou', 'china'],
      印江土家族苗族: [108.41209567853357, 28.00374446848339, 'guizhou_tongren', 'guizhou', 'china'],
      德江: [108.12373209994578, 28.26726090768195, 'guizhou_tongren', 'guizhou', 'china'],
      沿河土家族: [108.50218831907706, 28.566708120829333, 'guizhou_tongren', 'guizhou', 'china'],
      松桃苗族: [109.20902448954674, 28.171738661531098, 'guizhou_tongren', 'guizhou', 'china'],
      兴义: [104.90444616726343, 25.094786236916217, 'guizhou_qianxinanbuyizumiaozuzizhizhou', 'guizhou', 'china'],
      兴仁: [105.19932936444567, 25.4371284072333, 'guizhou_qianxinanbuyizumiaozuzizhizhou', 'guizhou', 'china'],
      普安: [104.96188801025458, 25.79218232044998, 'guizhou_qianxinanbuyizumiaozuzizhizhou', 'guizhou', 'china'],
      晴隆: [105.2252578420573, 25.839025666550917, 'guizhou_qianxinanbuyizumiaozuzizhizhou', 'guizhou', 'china'],
      贞丰: [105.65669344868093, 25.39147502982667, 'guizhou_qianxinanbuyizumiaozuzizhizhou', 'guizhou', 'china'],
      望谟: [106.09798175516568, 25.172924156218247, 'guizhou_qianxinanbuyizumiaozuzizhizhou', 'guizhou', 'china'],
      册亨: [105.81891885989609, 24.989382269328466, 'guizhou_qianxinanbuyizumiaozuzizhizhou', 'guizhou', 'china'],
      安龙: [105.47794944143874, 25.115249201691892, 'guizhou_qianxinanbuyizumiaozuzizhizhou', 'guizhou', 'china'],
      凯里: [107.9840073214463, 26.58908786674103, 'guizhou_qiandongnanmiaozudongzuzizhizhou', 'guizhou', 'china'],
      黄平: [107.90781670538192, 26.90311860178131, 'guizhou_qiandongnanmiaozudongzuzizhizhou', 'guizhou', 'china'],
      施秉: [108.13322278145424, 27.040965861760586, 'guizhou_qiandongnanmiaozudongzuzizhizhou', 'guizhou', 'china'],
      三穗: [108.68764050947235, 26.965733667331644, 'guizhou_qiandongnanmiaozudongzuzizhizhou', 'guizhou', 'china'],
      镇远: [108.43024516476399, 27.055916039743064, 'guizhou_qiandongnanmiaozudongzuzizhizhou', 'guizhou', 'china'],
      岑巩: [108.82293867496502, 27.179353988668982, 'guizhou_qiandongnanmiaozudongzuzizhizhou', 'guizhou', 'china'],
      天柱: [109.2192541441413, 26.91594557355786, 'guizhou_qiandongnanmiaozudongzuzizhizhou', 'guizhou', 'china'],
      锦屏: [109.20895715212954, 26.686953790827122, 'guizhou_qiandongnanmiaozudongzuzizhizhou', 'guizhou', 'china'],
      剑河: [108.44701803105193, 26.733189014839372, 'guizhou_qiandongnanmiaozudongzuzizhizhou', 'guizhou', 'china'],
      台江: [108.32121403877261, 26.674908681128965, 'guizhou_qiandongnanmiaozudongzuzizhizhou', 'guizhou', 'china'],
      黎平: [109.14307109829281, 26.236311590038035, 'guizhou_qiandongnanmiaozudongzuzizhizhou', 'guizhou', 'china'],
      榕江: [108.5275791248929, 25.936909862978414, 'guizhou_qiandongnanmiaozudongzuzizhizhou', 'guizhou', 'china'],
      从江: [108.91920188277085, 25.752798668448705, 'guizhou_qiandongnanmiaozudongzuzizhizhou', 'guizhou', 'china'],
      雷山: [108.08613767200539, 26.386855250513566, 'guizhou_qiandongnanmiaozudongzuzizhizhou', 'guizhou', 'china'],
      麻江: [107.5997145087177, 26.500549360958537, 'guizhou_qiandongnanmiaozudongzuzizhizhou', 'guizhou', 'china'],
      丹寨: [107.80134465907466, 26.205420597832386, 'guizhou_qiandongnanmiaozudongzuzizhizhou', 'guizhou', 'china'],
      都匀: [107.52342551786865, 26.26451932121516, 'guizhou_qiannanbuyizumiaozuzizhizhou', 'guizhou', 'china'],
      福泉: [107.51992993409398, 26.70881145377458, 'guizhou_qiannanbuyizumiaozuzizhizhou', 'guizhou', 'china'],
      荔波: [107.8902059332875, 25.41855171191531, 'guizhou_qiannanbuyizumiaozuzizhizhou', 'guizhou', 'china'],
      贵定: [107.24014757705778, 26.58656313871616, 'guizhou_qiannanbuyizumiaozuzizhizhou', 'guizhou', 'china'],
      瓮安: [107.48495696220316, 27.072153626016366, 'guizhou_qiannanbuyizumiaozuzizhizhou', 'guizhou', 'china'],
      独山: [107.54924739587487, 25.83240702455316, 'guizhou_qiannanbuyizumiaozuzizhizhou', 'guizhou', 'china'],
      平塘: [107.33062136303937, 25.837591592157484, 'guizhou_qiannanbuyizumiaozuzizhizhou', 'guizhou', 'china'],
      罗甸: [106.75656223530076, 25.435614365991977, 'guizhou_qiannanbuyizumiaozuzizhizhou', 'guizhou', 'china'],
      长顺: [106.45378803538745, 26.028407995477636, 'guizhou_qiannanbuyizumiaozuzizhizhou', 'guizhou', 'china'],
      龙里: [106.98432252433469, 26.454492979429013, 'guizhou_qiannanbuyizumiaozuzizhizhou', 'guizhou', 'china'],
      惠水: [106.66429731229157, 26.134760067668694, 'guizhou_qiannanbuyizumiaozuzizhizhou', 'guizhou', 'china'],
      三都水族: [107.88388751480917, 25.991502541310894, 'guizhou_qiannanbuyizumiaozuzizhizhou', 'guizhou', 'china'],
      昆明: [102.71866484796189, 25.046887943641675, null, 'yunnan', 'china'],
      曲靖: [103.80427339702997, 25.507866035635665, null, 'yunnan', 'china'],
      玉溪: [102.55046920781841, 24.35615756966449, null, 'yunnan', 'china'],
      保山: [99.17371117687631, 25.117574387460266, null, 'yunnan', 'china'],
      昭通: [103.72372819869298, 27.342879456272108, null, 'yunnan', 'china'],
      丽江: [100.23953096219124, 26.87805847636019, null, 'yunnan', 'china'],
      普洱: [100.97888882054517, 22.7830380157145, null, 'yunnan', 'china'],
      临沧: [100.09340961730142, 23.892849051461035, null, 'yunnan', 'china'],
      楚雄彝族: [101.55251282295099, 25.048046246524116, null, 'yunnan', 'china'],
      红河哈尼族彝族: [103.39073119554477, 23.372467906796974, null, 'yunnan', 'china'],
      文山壮族苗族: [104.25051212058472, 23.37540914260392, null, 'yunnan', 'china'],
      西双版纳傣族: [100.80439135004085, 22.00802812453793, null, 'yunnan', 'china'],
      大理白族: [100.23217010635709, 25.59552156280166, null, 'yunnan', 'china'],
      德宏傣族景颇族: [98.58492115186154, 24.442395659769627, null, 'yunnan', 'china'],
      怒江傈僳族: [98.86079550089617, 25.85701757740534, null, 'yunnan', 'china'],
      迪庆藏族: [99.71288738780176, 27.833076659787423, null, 'yunnan', 'china'],
      五华区: [102.71084271929595, 25.048371714342178, 'yunnan_kunming', 'yunnan', 'china'],
      盘龙: [102.73546756167029, 25.076510954313978, 'yunnan_kunming', 'yunnan', 'china'],
      官渡: [102.72986191683876, 25.027513893551074, 'yunnan_kunming', 'yunnan', 'china'],
      西山: [102.71234406521795, 25.03058686528852, 'yunnan_kunming', 'yunnan', 'china'],
      东川: [103.1884687562726, 26.089675675413407, 'yunnan_kunming', 'yunnan', 'china'],
      呈贡: [102.80792491211362, 24.8951430173167, 'yunnan_kunming', 'yunnan', 'china'],
      晋宁: [102.60140861781, 24.673239580316487, 'yunnan_kunming', 'yunnan', 'china'],
      富民: [102.50435981740861, 25.225853292013767, 'yunnan_kunming', 'yunnan', 'china'],
      宜良: [103.15254425322716, 24.923916821496533, 'yunnan_kunming', 'yunnan', 'china'],
      石林彝族: [103.27854106791783, 24.76029852229914, 'yunnan_kunming', 'yunnan', 'china'],
      嵩明: [103.04533293226525, 25.340919019622284, 'yunnan_kunming', 'yunnan', 'china'],
      禄劝彝族苗族: [102.47548208664004, 25.56279037687169, 'yunnan_kunming', 'yunnan', 'china'],
      寻甸回族彝族: [103.26416353265506, 25.565166561901133, 'yunnan_kunming', 'yunnan', 'china'],
      安宁: [102.49195469877031, 24.928075298108304, 'yunnan_kunming', 'yunnan', 'china'],
      麒麟: [103.80447660295583, 25.50757846216034, 'yunnan_qujing', 'yunnan', 'china'],
      沾益: [103.82573741047437, 25.607048065348224, 'yunnan_qujing', 'yunnan', 'china'],
      马龙: [103.58520244186663, 25.43562106617534, 'yunnan_qujing', 'yunnan', 'china'],
      陆良: [103.66170976903229, 25.028961437606046, 'yunnan_qujing', 'yunnan', 'china'],
      师宗: [104.00035058867051, 24.83144390103078, 'yunnan_qujing', 'yunnan', 'china'],
      罗平: [104.31577335652365, 24.891723230681592, 'yunnan_qujing', 'yunnan', 'china'],
      富源: [104.26338356169317, 25.676748612093622, 'yunnan_qujing', 'yunnan', 'china'],
      会泽: [103.30651331756192, 26.41901961561087, 'yunnan_qujing', 'yunnan', 'china'],
      宣威: [104.1021088663577, 26.23347125454429, 'yunnan_qujing', 'yunnan', 'china'],
      红塔: [102.55003079311729, 24.35644827640657, 'yunnan_yuxi', 'yunnan', 'china'],
      江川: [102.75634721647312, 24.297010686226756, 'yunnan_yuxi', 'yunnan', 'china'],
      通海: [102.76656756777635, 24.118048501711986, 'yunnan_yuxi', 'yunnan', 'china'],
      华宁: [102.93547630240627, 24.195788301016524, 'yunnan_yuxi', 'yunnan', 'china'],
      易门: [102.16864448113633, 24.675414165570274, 'yunnan_yuxi', 'yunnan', 'china'],
      峨山彝族: [102.41091425804288, 24.17904778015248, 'yunnan_yuxi', 'yunnan', 'china'],
      新平彝族傣族: [101.99733243546534, 24.072670403992532, 'yunnan_yuxi', 'yunnan', 'china'],
      元江哈尼族彝族傣族: [102.00607168629479, 23.603920356489606, 'yunnan_yuxi', 'yunnan', 'china'],
      澄江: [102.92319017536283, 24.675478094878454, 'yunnan_yuxi', 'yunnan', 'china'],
      隆阳: [99.17239978736126, 25.117929628296064, 'yunnan_baoshan', 'yunnan', 'china'],
      施甸: [99.19034119892378, 24.736557793048906, 'yunnan_baoshan', 'yunnan', 'china'],
      龙陵: [98.70012865464406, 24.597630569821945, 'yunnan_baoshan', 'yunnan', 'china'],
      昌宁: [99.6187699002107, 24.829896910644557, 'yunnan_baoshan', 'yunnan', 'china'],
      腾冲: [98.50376649510612, 25.02368072470248, 'yunnan_baoshan', 'yunnan', 'china'],
      昭阳: [103.7237792732737, 27.342515650552734, 'yunnan_zhaotong', 'yunnan', 'china'],
      鲁甸: [103.5557527502579, 27.197897534298452, 'yunnan_zhaotong', 'yunnan', 'china'],
      巧家: [102.9358062989942, 26.91769346537374, 'yunnan_zhaotong', 'yunnan', 'china'],
      盐津: [104.24163849617652, 28.112707719226247, 'yunnan_zhaotong', 'yunnan', 'china'],
      大关: [103.89812010233703, 27.753145312178496, 'yunnan_zhaotong', 'yunnan', 'china'],
      永善: [103.64389142489354, 28.237339652185803, 'yunnan_zhaotong', 'yunnan', 'china'],
      绥江: [103.96765881092634, 28.60578643793763, 'yunnan_zhaotong', 'yunnan', 'china'],
      镇雄: [104.87946351452766, 27.442557236877818, 'yunnan_zhaotong', 'yunnan', 'china'],
      彝良: [104.05493633109302, 27.633711880208875, 'yunnan_zhaotong', 'yunnan', 'china'],
      威信: [105.05526271086072, 27.849120419278467, 'yunnan_zhaotong', 'yunnan', 'china'],
      水富: [104.42180710449504, 28.635902525932675, 'yunnan_zhaotong', 'yunnan', 'china'],
      古城: [100.24092281306164, 26.8781581006644, 'yunnan_lijiang', 'yunnan', 'china'],
      玉龙纳西族: [100.24483576099279, 26.836463493480053, 'yunnan_lijiang', 'yunnan', 'china'],
      永胜: [100.75748158374392, 26.691372160405752, 'yunnan_lijiang', 'yunnan', 'china'],
      华坪: [101.27422120016256, 26.635075053486165, 'yunnan_lijiang', 'yunnan', 'china'],
      宁蒗彝族: [100.85901862393459, 27.28683428156349, 'yunnan_lijiang', 'yunnan', 'china'],
      思茅: [100.97977271933641, 22.78230678877221, 'yunnan_puer', 'yunnan', 'china'],
      宁洱哈尼族彝族: [101.05169141691573, 23.06880290977908, 'yunnan_puer', 'yunnan', 'china'],
      墨江哈尼族: [101.69418139630176, 23.433926419851936, 'yunnan_puer', 'yunnan', 'china'],
      景东彝族: [100.84652833043313, 24.454366890794514, 'yunnan_puer', 'yunnan', 'china'],
      景谷傣族彝族: [100.70787767509655, 23.506405226274413, 'yunnan_puer', 'yunnan', 'china'],
      镇沅彝族哈尼族拉祜族: [101.1150827151841, 24.011439666074235, 'yunnan_puer', 'yunnan', 'china'],
      江城哈尼族彝族: [101.86563114534945, 22.58950484822053, 'yunnan_puer', 'yunnan', 'china'],
      孟连傣族拉祜族佤族: [99.59186360005681, 22.3321410306686, 'yunnan_puer', 'yunnan', 'china'],
      澜沧拉祜族: [99.93768983581661, 22.559100279802255, 'yunnan_puer', 'yunnan', 'china'],
      西盟佤族: [99.6007883179482, 22.650704657378004, 'yunnan_puer', 'yunnan', 'china'],
      临翔: [100.09292498593838, 23.892846674353017, 'yunnan_lincang', 'yunnan', 'china'],
      凤庆: [99.92524390952359, 24.598569168700728, 'yunnan_lincang', 'yunnan', 'china'],
      云: [100.1321742333031, 24.444802655860045, 'yunnan_lincang', 'yunnan', 'china'],
      永德: [99.26014397568886, 24.03438828091073, 'yunnan_lincang', 'yunnan', 'china'],
      镇康: [98.83399739662897, 23.767141018040984, 'yunnan_lincang', 'yunnan', 'china'],
      双江拉祜族佤族布朗族傣族: [99.83085530370053, 23.48367759139346, 'yunnan_lincang', 'yunnan', 'china'],
      耿马傣族佤族: [99.40905142100729, 23.5404007103178, 'yunnan_lincang', 'yunnan', 'china'],
      沧源佤族: [99.25382335975239, 23.153159791067225, 'yunnan_lincang', 'yunnan', 'china'],
      楚雄: [101.55261267837436, 25.04696881728673, 'yunnan_chuxiongyizuzizhizhou', 'yunnan', 'china'],
      双柏: [101.64464746119926, 24.691393055418338, 'yunnan_chuxiongyizuzizhizhou', 'yunnan', 'china'],
      牟定: [101.54950916015473, 25.318217571995213, 'yunnan_chuxiongyizuzizhizhou', 'yunnan', 'china'],
      南华: [101.28141049320219, 25.198699566128283, 'yunnan_chuxiongyizuzizhizhou', 'yunnan', 'china'],
      姚安: [101.24493725831213, 25.51122828859955, 'yunnan_chuxiongyizuzizhizhou', 'yunnan', 'china'],
      大姚: [101.3301679011233, 25.728153283017996, 'yunnan_chuxiongyizuzizhizhou', 'yunnan', 'china'],
      永仁: [101.67769441624272, 26.062300990863502, 'yunnan_chuxiongyizuzizhizhou', 'yunnan', 'china'],
      元谋: [101.8772868111306, 25.70958870467893, 'yunnan_chuxiongyizuzizhizhou', 'yunnan', 'china'],
      武定: [102.41332456941399, 25.535858598658905, 'yunnan_chuxiongyizuzizhizhou', 'yunnan', 'china'],
      禄丰: [102.08224205506606, 25.149060659282217, 'yunnan_chuxiongyizuzizhizhou', 'yunnan', 'china'],
      个旧: [103.16128510896807, 23.366157483665457, 'yunnan_honghehanizuyizuzizhizhou', 'yunnan', 'china'],
      开远: [103.26523705576655, 23.719519998584136, 'yunnan_honghehanizuyizuzizhizhou', 'yunnan', 'china'],
      蒙自: [103.39155346469397, 23.372539085193097, 'yunnan_honghehanizuyizuzizhizhou', 'yunnan', 'china'],
      弥勒: [103.44342681742206, 24.41467908726538, 'yunnan_honghehanizuyizuzizhizhou', 'yunnan', 'china'],
      屏边苗族: [103.69365790999775, 22.993300489486487, 'yunnan_honghehanizuyizuzizhizhou', 'yunnan', 'china'],
      建水: [102.82693835745665, 23.624544021517632, 'yunnan_honghehanizuyizuzizhizhou', 'yunnan', 'china'],
      石屏: [102.49088788291326, 23.718865316960265, 'yunnan_honghehanizuyizuzizhizhou', 'yunnan', 'china'],
      泸西: [103.76616762505255, 24.53820884624812, 'yunnan_honghehanizuyizuzizhizhou', 'yunnan', 'china'],
      元阳: [102.84348739806822, 23.226077905329916, 'yunnan_honghehanizuyizuzizhizhou', 'yunnan', 'china'],
      红河: [102.42776048505681, 23.37487990775919, 'yunnan_honghehanizuyizuzizhizhou', 'yunnan', 'china'],
      金平苗族瑶族傣族: [103.23483621249234, 22.78600484180887, 'yunnan_honghehanizuyizuzizhizhou', 'yunnan', 'china'],
      绿春: [102.39935760232336, 22.999471322585954, 'yunnan_honghehanizuyizuzizhizhou', 'yunnan', 'china'],
      河口瑶族: [103.96812397572852, 22.513383464648488, 'yunnan_honghehanizuyizuzizhizhou', 'yunnan', 'china'],
      文山: [104.25077819593778, 23.37511931271506, 'yunnan_wenshanzhuangzumiaozuzizhizhou', 'yunnan', 'china'],
      砚山: [104.35053893158234, 23.617990388795796, 'yunnan_wenshanzhuangzumiaozuzizhizhou', 'yunnan', 'china'],
      西畴: [104.68224976820957, 23.44335053311619, 'yunnan_wenshanzhuangzumiaozuzizhizhou', 'yunnan', 'china'],
      麻栗坡: [104.7084493931587, 23.12988532971891, 'yunnan_wenshanzhuangzumiaozuzizhizhou', 'yunnan', 'china'],
      马关: [104.40503069304516, 23.01803108967808, 'yunnan_wenshanzhuangzumiaozuzizhizhou', 'yunnan', 'china'],
      丘北: [104.20089869826845, 24.046914936685397, 'yunnan_wenshanzhuangzumiaozuzizhizhou', 'yunnan', 'china'],
      广南: [105.0632645719665, 24.05596374469036, 'yunnan_wenshanzhuangzumiaozuzizhizhou', 'yunnan', 'china'],
      富宁: [105.63504198045516, 23.632515033744085, 'yunnan_wenshanzhuangzumiaozuzizhizhou', 'yunnan', 'china'],
      景洪: [100.80439712991445, 22.008391087493308, 'yunnan_xishuangbannadaizuzizhizhou', 'yunnan', 'china'],
      勐海: [100.45472404108664, 21.962138495422696, 'yunnan_xishuangbannadaizuzizhizhou', 'yunnan', 'china'],
      勐腊: [101.57360062138491, 21.485211572127383, 'yunnan_xishuangbannadaizuzizhizhou', 'yunnan', 'china'],
      大理: [100.24793118208115, 25.598903255810068, 'yunnan_dalibaizuzizhizhou', 'yunnan', 'china'],
      漾濞彝族: [99.96438334119601, 25.675838591722503, 'yunnan_dalibaizuzizhizhou', 'yunnan', 'china'],
      祥云: [100.56047035169082, 25.483363598587506, 'yunnan_dalibaizuzizhizhou', 'yunnan', 'china'],
      宾川: [100.58543358405828, 25.83207376718664, 'yunnan_dalibaizuzizhizhou', 'yunnan', 'china'],
      弥渡: [100.49725408550172, 25.348332326140078, 'yunnan_dalibaizuzizhizhou', 'yunnan', 'china'],
      南涧彝族: [100.52520753680443, 25.047106246509195, 'yunnan_dalibaizuzizhizhou', 'yunnan', 'china'],
      巍山彝族回族: [100.31438830034051, 25.23715667567195, 'yunnan_dalibaizuzizhizhou', 'yunnan', 'china'],
      永平: [99.54012544189787, 25.46700378808112, 'yunnan_dalibaizuzizhizhou', 'yunnan', 'china'],
      云龙: [99.37581488320485, 25.891212842197408, 'yunnan_dalibaizuzizhizhou', 'yunnan', 'china'],
      洱源: [99.9581262389013, 26.117453240580392, 'yunnan_dalibaizuzizhizhou', 'yunnan', 'china'],
      剑川: [99.91247256139413, 26.535782990318957, 'yunnan_dalibaizuzizhizhou', 'yunnan', 'china'],
      鹤庆: [100.17987848991498, 26.564447469028053, 'yunnan_dalibaizuzizhizhou', 'yunnan', 'china'],
      瑞丽: [97.86246371571532, 24.016449766510345, 'yunnan_dehongdaizujingpozuzizhizhou', 'yunnan', 'china'],
      芒: [98.58416584352646, 24.44240189196386, 'yunnan_dehongdaizujingpozuzizhizhou', 'yunnan', 'china'],
      梁河: [98.3046336604118, 24.81358602783934, 'yunnan_dehongdaizujingpozuzizhizhou', 'yunnan', 'china'],
      盈江: [97.94036463310506, 24.71575750876973, 'yunnan_dehongdaizujingpozuzizhizhou', 'yunnan', 'china'],
      陇川: [97.8008673978697, 24.19034502862474, 'yunnan_dehongdaizujingpozuzizhizhou', 'yunnan', 'china'],
      泸水: [98.86055528156668, 25.857206878857042, 'yunnan_nujianglisuzuzizhizhou', 'yunnan', 'china'],
      福贡: [98.87386711401149, 26.908977361553333, 'yunnan_nujianglisuzuzizhizhou', 'yunnan', 'china'],
      贡山独龙族怒族: [98.67263990859904, 27.74411779040663, 'yunnan_nujianglisuzuzizhizhou', 'yunnan', 'china'],
      兰坪白族普米族: [99.42796328187043, 26.459543142088865, 'yunnan_nujianglisuzuzizhizhou', 'yunnan', 'china'],
      香格里拉: [99.71508475666782, 27.832048351409206, 'yunnan_diqingcangzuzizhizhou', 'yunnan', 'china'],
      德钦: [98.9215971374371, 28.4891985475057, 'yunnan_diqingcangzuzizhizhou', 'yunnan', 'china'],
      维西傈僳族: [99.29291564443548, 27.186722719306307, 'yunnan_diqingcangzuzizhizhou', 'yunnan', 'china'],
      拉萨: [91.13881033157789, 29.666115438652298, null, 'xizang', 'china'],
      日喀则: [88.89165851761611, 29.27344817955469, null, 'xizang', 'china'],
      昌都: [97.18491510018866, 31.143000841498772, null, 'xizang', 'china'],
      林芝: [94.36891486729583, 29.660526631579792, null, 'xizang', 'china'],
      山南: [91.77303067565003, 29.24196872504114, null, 'xizang', 'china'],
      那曲: [92.0666857021086, 31.48214555501517, null, 'xizang', 'china'],
      阿里地: [80.11207720904835, 32.50895077529345, null, 'xizang', 'china'],
      拉萨城关区: [91.13951011971594, 29.66522249217393, 'xizang_lasa', 'xizang', 'china'],
      堆龙德庆: [91.00938546613035, 29.653179488704023, 'xizang_lasa', 'xizang', 'china'],
      达孜: [91.35749956601273, 29.676306178494244, 'xizang_lasa', 'xizang', 'china'],
      林周: [91.26844522944162, 29.901486059530836, 'xizang_lasa', 'xizang', 'china'],
      当雄: [91.11001562965421, 30.48090784458317, 'xizang_lasa', 'xizang', 'china'],
      尼木: [90.17212815461066, 29.43715554105229, 'xizang_lasa', 'xizang', 'china'],
      曲水: [90.74449001205294, 29.35605136655466, 'xizang_lasa', 'xizang', 'china'],
      墨竹工卡: [91.73772487668496, 29.84040648079501, 'xizang_lasa', 'xizang', 'china'],
      桑珠孜: [88.8931732786741, 29.272952805198152, 'xizang_rikaze', 'xizang', 'china'],
      南木林: [89.10603920190414, 29.68619721537398, 'xizang_rikaze', 'xizang', 'china'],
      江孜: [89.6115557575772, 28.91477263765395, 'xizang_rikaze', 'xizang', 'china'],
      定日: [87.13028495120112, 28.662917104823013, 'xizang_rikaze', 'xizang', 'china'],
      萨迦: [88.02957673585941, 28.906810978439765, 'xizang_rikaze', 'xizang', 'china'],
      拉孜: [87.6439764217777, 29.09104070151548, 'xizang_rikaze', 'xizang', 'china'],
      昂仁: [87.24220748746549, 29.301017789178115, 'xizang_rikaze', 'xizang', 'china'],
      谢通门: [88.26712416870222, 29.437338619927214, 'xizang_rikaze', 'xizang', 'china'],
      白朗: [89.27005441468671, 29.112800062451946, 'xizang_rikaze', 'xizang', 'china'],
      仁布: [89.84972777037859, 29.236201964699877, 'xizang_rikaze', 'xizang', 'china'],
      康马: [89.68995611026085, 28.560543618392114, 'xizang_rikaze', 'xizang', 'china'],
      定结: [87.77430519074771, 28.369883801252048, 'xizang_rikaze', 'xizang', 'china'],
      仲巴: [84.03934713580068, 29.774301656446536, 'xizang_rikaze', 'xizang', 'china'],
      亚东: [88.91324521936454, 27.488978419211932, 'xizang_rikaze', 'xizang', 'china'],
      吉隆: [85.30481968197739, 28.858526814478473, 'xizang_rikaze', 'xizang', 'china'],
      聂拉木: [85.98852293469193, 28.161688787076542, 'xizang_rikaze', 'xizang', 'china'],
      萨嘎: [85.24115404572059, 29.33413649131269, 'xizang_rikaze', 'xizang', 'china'],
      岗巴: [88.52543653788273, 28.280221079105974, 'xizang_rikaze', 'xizang', 'china'],
      卡若: [97.18471881526432, 31.14315806672752, 'xizang_changdu', 'xizang', 'china'],
      江达: [98.22494561078148, 31.505240591443773, 'xizang_changdu', 'xizang', 'china'],
      贡觉: [98.27762421028555, 30.865475066258227, 'xizang_changdu', 'xizang', 'china'],
      类乌齐: [96.60767757765957, 31.219341056046346, 'xizang_changdu', 'xizang', 'china'],
      丁青: [95.60428540054463, 31.416503141335415, 'xizang_changdu', 'xizang', 'china'],
      察雅: [97.57211990949588, 30.65931989040492, 'xizang_changdu', 'xizang', 'china'],
      八宿: [96.92445286579596, 30.059237788223598, 'xizang_changdu', 'xizang', 'china'],
      左贡: [97.8470977291842, 29.677187006286218, 'xizang_changdu', 'xizang', 'china'],
      芒康: [98.60301438740716, 29.69242595974719, 'xizang_changdu', 'xizang', 'china'],
      洛隆: [95.8300261283894, 30.74766969548043, 'xizang_changdu', 'xizang', 'china'],
      边坝: [94.71397327941807, 30.939879942484435, 'xizang_changdu', 'xizang', 'china'],
      巴宜: [94.36754796762055, 29.65958193280833, 'xizang_linzhi', 'xizang', 'china'],
      工布江达: [93.25293492917717, 29.890735036204045, 'xizang_linzhi', 'xizang', 'china'],
      米林: [94.22011897562102, 29.220026078158824, 'xizang_linzhi', 'xizang', 'china'],
      墨脱: [95.33883881385925, 29.3314712542791, 'xizang_linzhi', 'xizang', 'china'],
      波密: [95.77455234308837, 29.86502719724038, 'xizang_linzhi', 'xizang', 'china'],
      察隅: [97.4714632621568, 28.666314797949802, 'xizang_linzhi', 'xizang', 'china'],
      朗: [93.08000002081909, 29.05038842759571, 'xizang_linzhi', 'xizang', 'china'],
      乃东: [91.77175735758554, 29.242033700710248, 'xizang_shannan', 'xizang', 'china'],
      扎囊: [91.34442970386918, 29.252631065892864, 'xizang_shannan', 'xizang', 'china'],
      贡嘎: [90.99175817703679, 29.295147702628313, 'xizang_shannan', 'xizang', 'china'],
      桑日: [92.0221894310825, 29.265850326695308, 'xizang_shannan', 'xizang', 'china'],
      琼结: [91.69015428897757, 29.031507543731273, 'xizang_shannan', 'xizang', 'china'],
      曲松: [92.20763177197054, 29.069510234384484, 'xizang_shannan', 'xizang', 'china'],
      措美: [91.43876580725986, 28.443604747657655, 'xizang_shannan', 'xizang', 'china'],
      洛扎: [90.8646881509396, 28.391920623680058, 'xizang_shannan', 'xizang', 'china'],
      加查: [92.59760016866387, 29.146683331957593, 'xizang_shannan', 'xizang', 'china'],
      隆子: [92.46987388646636, 28.414268906152774, 'xizang_shannan', 'xizang', 'china'],
      错那: [91.96669354596504, 27.99757321250855, 'xizang_shannan', 'xizang', 'china'],
      浪卡子: [90.40529632734035, 28.974243584901025, 'xizang_shannan', 'xizang', 'china'],
      色尼: [92.06834104206841, 31.481876333584342, 'xizang_naqudiqu', 'xizang', 'china'],
      嘉黎: [93.23933736180453, 30.647111894210898, 'xizang_naqudiqu', 'xizang', 'china'],
      比如: [93.68700178255352, 31.48578765424154, 'xizang_naqudiqu', 'xizang', 'china'],
      聂荣: [92.31012005156741, 32.11394263156558, 'xizang_naqudiqu', 'xizang', 'china'],
      安多: [91.68826649785527, 32.26656701896433, 'xizang_naqudiqu', 'xizang', 'china'],
      申扎: [88.71625705459248, 30.93505253103645, 'xizang_naqudiqu', 'xizang', 'china'],
      索: [93.79153788851552, 31.891894786065347, 'xizang_naqudiqu', 'xizang', 'china'],
      班戈: [90.01823223590785, 31.400793379634433, 'xizang_naqudiqu', 'xizang', 'china'],
      巴青: [94.06052755389379, 31.924749932495647, 'xizang_naqudiqu', 'xizang', 'china'],
      尼玛: [87.24303880910149, 31.79123183775104, 'xizang_naqudiqu', 'xizang', 'china'],
      双湖: [88.84511453279455, 33.19286177922345, 'xizang_naqudiqu', 'xizang', 'china'],
      普兰: [81.18418586607977, 30.297657285348564, 'xizang_alidiqu', 'xizang', 'china'],
      札达: [79.80961463478911, 31.48482968498941, 'xizang_alidiqu', 'xizang', 'china'],
      噶尔: [80.11158500863571, 32.5091351393054, 'xizang_alidiqu', 'xizang', 'china'],
      日土: [79.73854538097278, 33.388242934615874, 'xizang_alidiqu', 'xizang', 'china'],
      革吉: [81.14935072524747, 32.39527649781345, 'xizang_alidiqu', 'xizang', 'china'],
      改则: [84.06899723704966, 32.307832340028845, 'xizang_alidiqu', 'xizang', 'china'],
      措勤: [85.16580679562084, 31.022638869183957, 'xizang_alidiqu', 'xizang', 'china'],
      西安: [108.95443762207665, 34.26942467492985, null, 'shanxi1', 'china'],
      铜川: [108.98605038371794, 34.922750159695404, null, 'shanxi1', 'china'],
      宝鸡: [107.15130769678449, 34.37554397832914, null, 'shanxi1', 'china'],
      咸阳: [108.71155606221112, 34.33967490392249, null, 'shanxi1', 'china'],
      渭南: [109.50948493966267, 34.50505641911231, null, 'shanxi1', 'china'],
      延安: [109.49740390157298, 36.60224468351288, null, 'shanxi1', 'china'],
      汉中: [107.03502360339213, 33.083929045411885, null, 'shanxi1', 'china'],
      榆林: [109.74781722612315, 38.29583676095252, null, 'shanxi1', 'china'],
      安康: [109.03586905304343, 32.69601350827454, null, 'shanxi1', 'china'],
      商洛: [109.94624320845806, 33.87449311373796, null, 'shanxi1', 'china'],
      西安新城区: [108.96629129206904, 34.27559407584552, 'shanxi1_xian', 'shanxi1', 'china'],
      新城区: [108.96629129206904, 34.27559407584552, 'shanxi1_xian', 'shanxi1', 'china'],
      碑林: [108.95342277330833, 34.25731764445882, 'shanxi1_xian', 'shanxi1', 'china'],
      莲湖: [108.93967137429225, 34.27165266411548, 'shanxi1_xian', 'shanxi1', 'china'],
      灞桥: [109.07367297228248, 34.27370779310362, 'shanxi1_xian', 'shanxi1', 'china'],
      未央: [108.95243440631846, 34.31446966736501, 'shanxi1_xian', 'shanxi1', 'china'],
      雁塔: [108.93312352055915, 34.21933488008679, 'shanxi1_xian', 'shanxi1', 'china'],
      阎良: [109.23449389946245, 34.668170043346606, 'shanxi1_xian', 'shanxi1', 'china'],
      临潼: [109.22041701904207, 34.378311069448706, 'shanxi1_xian', 'shanxi1', 'china'],
      西安长安区: [108.9480057188347, 34.16327855886225, 'shanxi1_xian', 'shanxi1', 'china'],
      长安区: [108.9480057188347, 34.16327855886225, 'shanxi1_xian', 'shanxi1', 'china'],
      高陵: [109.09528503122156, 34.54135157608658, 'shanxi1_xian', 'shanxi1', 'china'],
      鄠邑: [108.61380926333005, 34.114975743641665, 'shanxi1_xian', 'shanxi1', 'china'],
      蓝田: [109.32401800400392, 34.16250996750257, 'shanxi1_xian', 'shanxi1', 'china'],
      周至: [108.22291373892672, 34.16763437057819, 'shanxi1_xian', 'shanxi1', 'china'],
      王益: [109.0822782708762, 35.075423691606986, 'shanxi1_tongchuan', 'shanxi1', 'china'],
      印台: [109.1072541351723, 35.118074842809925, 'shanxi1_tongchuan', 'shanxi1', 'china'],
      耀州: [108.96892484758848, 34.91652701140995, 'shanxi1_tongchuan', 'shanxi1', 'china'],
      宜君: [109.12482137302676, 35.40462811556428, 'shanxi1_tongchuan', 'shanxi1', 'china'],
      渭滨: [107.15090478953593, 34.37723162808605, 'shanxi1_baoji', 'shanxi1', 'china'],
      金台: [107.15635858833544, 34.38147142452975, 'shanxi1_baoji', 'shanxi1', 'china'],
      陈仓: [107.39009632808319, 34.35896410497522, 'shanxi1_baoji', 'shanxi1', 'china'],
      凤翔: [107.40695622461307, 34.527984507534796, 'shanxi1_baoji', 'shanxi1', 'china'],
      岐山: [107.63089595468598, 34.44918275042414, 'shanxi1_baoji', 'shanxi1', 'china'],
      扶风: [107.89783821492634, 34.38176594179754, 'shanxi1_baoji', 'shanxi1', 'china'],
      眉: [107.75876496454042, 34.27843120982237, 'shanxi1_baoji', 'shanxi1', 'china'],
      陇: [106.863650711073, 34.89893908617771, 'shanxi1_baoji', 'shanxi1', 'china'],
      千阳: [107.13945319887017, 34.64862836632753, 'shanxi1_baoji', 'shanxi1', 'china'],
      麟游: [107.80314100745333, 34.68360359684177, 'shanxi1_baoji', 'shanxi1', 'china'],
      凤: [106.53172566612584, 33.9183810349372, 'shanxi1_baoji', 'shanxi1', 'china'],
      太白: [107.32305038716089, 34.065101647478926, 'shanxi1_baoji', 'shanxi1', 'china'],
      秦都: [108.70510036414687, 34.33594643727505, 'shanxi1_xianyang', 'shanxi1', 'china'],
      杨陵: [108.09285686575126, 34.27728498822787, 'shanxi1_xianyang', 'shanxi1', 'china'],
      渭城: [108.73738520643114, 34.34312561765746, 'shanxi1_xianyang', 'shanxi1', 'china'],
      三原: [108.94991953239635, 34.62020988461046, 'shanxi1_xianyang', 'shanxi1', 'china'],
      泾阳: [108.84421807149242, 34.534811398237316, 'shanxi1_xianyang', 'shanxi1', 'china'],
      乾: [108.25379124998682, 34.53355561529198, 'shanxi1_xianyang', 'shanxi1', 'china'],
      礼泉: [108.43492586274465, 34.488292866740224, 'shanxi1_xianyang', 'shanxi1', 'china'],
      永寿: [108.14960404608, 34.69873696600116, 'shanxi1_xianyang', 'shanxi1', 'china'],
      长武: [107.80237939960172, 35.21202885384003, 'shanxi1_xianyang', 'shanxi1', 'china'],
      旬邑: [108.34368069323921, 35.11835044975674, 'shanxi1_xianyang', 'shanxi1', 'china'],
      淳化: [108.58761333155937, 34.804149232309385, 'shanxi1_xianyang', 'shanxi1', 'china'],
      武功: [108.21934194987521, 34.26578046711311, 'shanxi1_xianyang', 'shanxi1', 'china'],
      兴平: [108.49488236035228, 34.30342219861617, 'shanxi1_xianyang', 'shanxi1', 'china'],
      彬州: [108.09020252187617, 35.04012571786617, 'shanxi1_xianyang', 'shanxi1', 'china'],
      临渭: [109.50989969449583, 34.50694697904602, 'shanxi1_weinan', 'shanxi1', 'china'],
      华州: [109.76794383269416, 34.517811325006925, 'shanxi1_weinan', 'shanxi1', 'china'],
      潼关: [110.25376098346966, 34.55046337779087, 'shanxi1_weinan', 'shanxi1', 'china'],
      大荔: [109.94958129554253, 34.801125656246334, 'shanxi1_weinan', 'shanxi1', 'china'],
      合阳: [110.15437868066972, 35.24336036538738, 'shanxi1_weinan', 'shanxi1', 'china'],
      澄城: [109.9440633387685, 35.1902050785175, 'shanxi1_weinan', 'shanxi1', 'china'],
      蒲城: [109.59616920582275, 34.96204575001961, 'shanxi1_weinan', 'shanxi1', 'china'],
      白水: [109.60084758855751, 35.18322225647562, 'shanxi1_weinan', 'shanxi1', 'china'],
      富平: [109.19358586583435, 34.75293335244681, 'shanxi1_weinan', 'shanxi1', 'china'],
      韩城: [110.45897545862834, 35.48092821634192, 'shanxi1_weinan', 'shanxi1', 'china'],
      华阴: [110.09611375600174, 34.571078878228526, 'shanxi1_weinan', 'shanxi1', 'china'],
      宝塔: [109.49728333969918, 36.60199956456956, 'shanxi1_yanan', 'shanxi1', 'china'],
      安塞: [109.3317528483072, 36.870731353060194, 'shanxi1_yanan', 'shanxi1', 'china'],
      延长: [110.0194268432613, 36.58435124086342, 'shanxi1_yanan', 'shanxi1', 'china'],
      延川: [110.19683112407598, 36.88806568817406, 'shanxi1_yanan', 'shanxi1', 'china'],
      志丹: [108.77547562140008, 36.828753311649024, 'shanxi1_yanan', 'shanxi1', 'china'],
      吴起: [108.18356714411043, 36.930525301085304, 'shanxi1_yanan', 'shanxi1', 'china'],
      甘泉: [109.35612522700849, 36.28374148742613, 'shanxi1_yanan', 'shanxi1', 'china'],
      富: [109.39073799967272, 36.002173371407714, 'shanxi1_yanan', 'shanxi1', 'china'],
      洛川: [109.44210952465562, 35.76845375927066, 'shanxi1_yanan', 'shanxi1', 'china'],
      宜川: [110.18197187068212, 36.056621053504514, 'shanxi1_yanan', 'shanxi1', 'china'],
      黄龙: [109.84154448915933, 35.589189332472344, 'shanxi1_yanan', 'shanxi1', 'china'],
      黄陵: [109.2690746850163, 35.58583989417665, 'shanxi1_yanan', 'shanxi1', 'china'],
      子长: [109.68235699808254, 37.14839102865775, 'shanxi1_yanan', 'shanxi1', 'china'],
      汉台: [107.03463674796681, 33.08393132817159, 'shanxi1_hanzhong', 'shanxi1', 'china'],
      南郑: [106.9488579246159, 33.00946646041632, 'shanxi1_hanzhong', 'shanxi1', 'china'],
      城固: [107.3364916964669, 33.15882593120045, 'shanxi1_hanzhong', 'shanxi1', 'china'],
      洋: [107.55644713098722, 33.229279110100016, 'shanxi1_hanzhong', 'shanxi1', 'china'],
      西乡: [107.7722523821228, 32.99426575783331, 'shanxi1_hanzhong', 'shanxi1', 'china'],
      勉: [106.68659381531509, 33.16194370785138, 'shanxi1_hanzhong', 'shanxi1', 'china'],
      宁强: [106.26397732964645, 32.836487034613, 'shanxi1_hanzhong', 'shanxi1', 'china'],
      略阳: [106.16045458061188, 33.335394223113475, 'shanxi1_hanzhong', 'shanxi1', 'china'],
      镇巴: [107.90175624172727, 32.54208339683458, 'shanxi1_hanzhong', 'shanxi1', 'china'],
      留坝: [106.93079106527986, 33.61965624283425, 'shanxi1_hanzhong', 'shanxi1', 'china'],
      佛坪: [107.99501503676053, 33.527017789191085, 'shanxi1_hanzhong', 'shanxi1', 'china'],
      榆阳: [109.75453116203782, 38.30497116922605, 'shanxi1_yulin', 'shanxi1', 'china'],
      横山: [109.29909457486981, 37.97009729592843, 'shanxi1_yulin', 'shanxi1', 'china'],
      府谷: [111.07626632534138, 39.0349580108426, 'shanxi1_yulin', 'shanxi1', 'china'],
      靖边: [108.81221330493241, 37.60201683071065, 'shanxi1_yulin', 'shanxi1', 'china'],
      定边: [107.60785188082683, 37.60109409403697, 'shanxi1_yulin', 'shanxi1', 'china'],
      绥德: [110.27178844927782, 37.51393695219087, 'shanxi1_yulin', 'shanxi1', 'china'],
      米脂: [110.18510382531701, 37.7652601461329, 'shanxi1_yulin', 'shanxi1', 'china'],
      佳: [110.49983146389448, 38.02764979187532, 'shanxi1_yulin', 'shanxi1', 'china'],
      吴堡: [110.74577342311699, 37.45808443097895, 'shanxi1_yulin', 'shanxi1', 'china'],
      清涧: [110.12801554830638, 37.09356165526391, 'shanxi1_yulin', 'shanxi1', 'china'],
      子洲: [110.04096977671098, 37.617892613879604, 'shanxi1_yulin', 'shanxi1', 'china'],
      神木: [110.50344943686855, 38.84175503271587, 'shanxi1_yulin', 'shanxi1', 'china'],
      汉滨: [109.03569401363671, 32.6965289853923, 'shanxi1_ankang', 'shanxi1', 'china'],
      汉阴: [108.51746141142156, 32.89710807275392, 'shanxi1_ankang', 'shanxi1', 'china'],
      石泉: [108.25694478258666, 33.04479405741446, 'shanxi1_ankang', 'shanxi1', 'china'],
      宁陕: [108.32027787530718, 33.317935791385, 'shanxi1_ankang', 'shanxi1', 'china'],
      紫阳: [108.54438508297189, 32.52585262089023, 'shanxi1_ankang', 'shanxi1', 'china'],
      岚皋: [108.90727903454457, 32.316369179789014, 'shanxi1_ankang', 'shanxi1', 'china'],
      平利: [109.36841022805561, 32.39373868285722, 'shanxi1_ankang', 'shanxi1', 'china'],
      镇坪: [109.53293667505302, 31.889328796688083, 'shanxi1_ankang', 'shanxi1', 'china'],
      旬阳: [109.3747166461933, 32.839296311324524, 'shanxi1_ankang', 'shanxi1', 'china'],
      白河: [110.12076853001963, 32.815243659915765, 'shanxi1_ankang', 'shanxi1', 'china'],
      商州: [109.94414302580881, 33.87541211690121, 'shanxi1_shangluo', 'shanxi1', 'china'],
      洛南: [110.15214925469405, 34.09474679381164, 'shanxi1_shangluo', 'shanxi1', 'china'],
      丹凤: [110.33848360081943, 33.70040359334751, 'shanxi1_shangluo', 'shanxi1', 'china'],
      商南: [110.89185300275871, 33.53269005699367, 'shanxi1_shangluo', 'shanxi1', 'china'],
      山阳: [109.88699250437641, 33.53625553284553, 'shanxi1_shangluo', 'shanxi1', 'china'],
      镇安: [109.15765492229659, 33.429705865139816, 'shanxi1_shangluo', 'shanxi1', 'china'],
      柞水: [109.1177378453684, 33.68874612653226, 'shanxi1_shangluo', 'shanxi1', 'china'],
      兰州: [103.83002313164361, 36.064142766893724, null, 'gansu', 'china'],
      嘉峪关: [98.28367961245827, 39.79281838307191, null, 'gansu', 'china'],
      金昌: [102.19448826594395, 38.51995511769197, null, 'gansu', 'china'],
      白银: [104.18001749719386, 36.551914572348466, null, 'gansu', 'china'],
      天水: [105.73141347809639, 34.584840505081715, null, 'gansu', 'china'],
      武威: [102.64123408011764, 37.935924502109394, null, 'gansu', 'china'],
      张掖: [100.4618982535238, 38.93910739362417, null, 'gansu', 'china'],
      平凉: [106.69110520996448, 35.549106324520395, null, 'gansu', 'china'],
      酒泉: [98.517206996733, 39.750291985344695, null, 'gansu', 'china'],
      庆阳: [107.64474666583307, 35.74053359398589, null, 'gansu', 'china'],
      定西: [104.63271400574395, 35.58581460494286, null, 'gansu', 'china'],
      陇南: [104.93598307883651, 33.394336694356426, null, 'gansu', 'china'],
      临夏回族: [103.21840352492943, 35.60569089282961, null, 'gansu', 'china'],
      甘南藏族: [102.91758981758971, 34.992093042603926, null, 'gansu', 'china'],
      兰州城关区: [103.84760124773688, 36.0549484339955, 'gansu_lanzhou', 'gansu', 'china'],
      城关区: [103.84760124773688, 36.0549484339955, 'gansu_lanzhou', 'gansu', 'china'],
      七里河: [103.79074571764666, 36.07293998877124, 'gansu_lanzhou', 'gansu', 'china'],
      西固: [103.62892232414771, 36.106054811755946, 'gansu_lanzhou', 'gansu', 'china'],
      安宁区: [103.7305961362772, 36.10907627955785, 'gansu_lanzhou', 'gansu', 'china'],
      红古: [102.86825478812824, 36.35030034249864, 'gansu_lanzhou', 'gansu', 'china'],
      永登: [103.26882538968911, 36.74012486766984, 'gansu_lanzhou', 'gansu', 'china'],
      皋兰: [103.95580733777126, 36.337258353248004, 'gansu_lanzhou', 'gansu', 'china'],
      榆中: [104.12153302464074, 35.85020261419856, 'gansu_lanzhou', 'gansu', 'china'],
      金川区: [102.19428334156689, 38.5195086573844, 'gansu_jinchang', 'gansu', 'china'],
      永昌: [101.97842671648245, 38.253378335353574, 'gansu_jinchang', 'gansu', 'china'],
      白银区: [104.18066398980893, 36.55187656258645, 'gansu_baiyin', 'gansu', 'china'],
      平川: [104.82582584556496, 36.734898880444014, 'gansu_baiyin', 'gansu', 'china'],
      靖远: [104.693540129312, 36.56717427824307, 'gansu_baiyin', 'gansu', 'china'],
      会宁: [105.06094666391513, 35.69818705676352, 'gansu_baiyin', 'gansu', 'china'],
      景泰: [104.07286678840367, 37.19957535611704, 'gansu_baiyin', 'gansu', 'china'],
      秦州: [105.7308918479394, 34.58495864909862, 'gansu_tianshui', 'gansu', 'china'],
      麦积: [105.90423736211581, 34.5691898799883, 'gansu_tianshui', 'gansu', 'china'],
      清水: [106.14647039526892, 34.758547703242115, 'gansu_tianshui', 'gansu', 'china'],
      秦安: [105.67987790020584, 34.86811002290142, 'gansu_tianshui', 'gansu', 'china'],
      甘谷: [105.33882711292493, 34.75336338953432, 'gansu_tianshui', 'gansu', 'china'],
      武山: [104.89812615071325, 34.72821758265321, 'gansu_tianshui', 'gansu', 'china'],
      张家川回族: [106.21882029683655, 34.99948664394991, 'gansu_tianshui', 'gansu', 'china'],
      凉州: [102.64102810932965, 37.936181791617386, 'gansu_wuwei', 'gansu', 'china'],
      民勤: [103.09704218903315, 38.630878326760445, 'gansu_wuwei', 'gansu', 'china'],
      古浪: [102.9046776084014, 37.47627075859021, 'gansu_wuwei', 'gansu', 'china'],
      天祝藏族: [103.14865509404625, 36.977374200958366, 'gansu_wuwei', 'gansu', 'china'],
      甘州: [100.46128660448635, 38.93799164862971, 'gansu_zhangye', 'gansu', 'china'],
      肃南裕固族: [99.62349844001707, 38.843450315827255, 'gansu_zhangye', 'gansu', 'china'],
      民乐: [100.82306686457848, 38.4406558718478, 'gansu_zhangye', 'gansu', 'china'],
      临泽: [100.17287392334077, 39.15810089173683, 'gansu_zhangye', 'gansu', 'china'],
      高台: [99.8231237193124, 39.382415704910954, 'gansu_zhangye', 'gansu', 'china'],
      山丹: [101.09505568508322, 38.79059649801485, 'gansu_zhangye', 'gansu', 'china'],
      崆峒: [106.69063619372811, 35.54804799833528, 'gansu_pingliang', 'gansu', 'china'],
      泾川: [107.37174891028701, 35.341204720630465, 'gansu_pingliang', 'gansu', 'china'],
      灵台: [107.6270497173823, 35.07018484033486, 'gansu_pingliang', 'gansu', 'china'],
      崇信: [107.03767622177357, 35.31082701253446, 'gansu_pingliang', 'gansu', 'china'],
      庄浪: [106.04853654149989, 35.20930309394476, 'gansu_pingliang', 'gansu', 'china'],
      静宁: [105.7399130584542, 35.53148604647801, 'gansu_pingliang', 'gansu', 'china'],
      华亭: [106.65581641410903, 35.22133092442923, 'gansu_pingliang', 'gansu', 'china'],
      肃州: [98.5175659242612, 39.75012950157458, 'gansu_jiuquan', 'gansu', 'china'],
      金塔: [98.90943309677198, 39.9891499285174, 'gansu_jiuquan', 'gansu', 'china'],
      瓜州: [95.78701948893425, 40.52265497131089, 'gansu_jiuquan', 'gansu', 'china'],
      肃北蒙古族: [94.88387157499209, 39.51807177351856, 'gansu_jiuquan', 'gansu', 'china'],
      阿克塞哈萨克族: [94.34408869533787, 39.6378203308836, 'gansu_jiuquan', 'gansu', 'china'],
      玉门: [97.04376282638906, 40.29263168560548, 'gansu_jiuquan', 'gansu', 'china'],
      敦煌: [94.67069604396056, 40.14731163366616, 'gansu_jiuquan', 'gansu', 'china'],
      西峰: [107.64519837777317, 35.740029121589565, 'gansu_qingyang', 'gansu', 'china'],
      庆城: [107.89207299913465, 36.01981764161712, 'gansu_qingyang', 'gansu', 'china'],
      环: [107.31522792867626, 36.57533654043023, 'gansu_qingyang', 'gansu', 'china'],
      华池: [107.99268804598796, 36.46354205422511, 'gansu_qingyang', 'gansu', 'china'],
      合水: [108.0263116034524, 35.82516933729975, 'gansu_qingyang', 'gansu', 'china'],
      正宁: [108.36744269823177, 35.49696035329697, 'gansu_qingyang', 'gansu', 'china'],
      宁: [107.9277254915251, 35.507826032005276, 'gansu_qingyang', 'gansu', 'china'],
      镇原: [107.20225491766047, 35.68371713957614, 'gansu_qingyang', 'gansu', 'china'],
      安定: [104.63219177683614, 35.58599478960829, 'gansu_dingxi', 'gansu', 'china'],
      通渭: [105.25652120250619, 35.21519807805396, 'gansu_dingxi', 'gansu', 'china'],
      陇西: [104.64393200075196, 35.0097143707588, 'gansu_dingxi', 'gansu', 'china'],
      渭源: [104.21831898349299, 35.138732827821904, 'gansu_dingxi', 'gansu', 'china'],
      临洮: [103.86877350115385, 35.38191734412941, 'gansu_dingxi', 'gansu', 'china'],
      漳: [104.47336470175311, 34.85435155032214, 'gansu_dingxi', 'gansu', 'china'],
      岷: [104.04627779475273, 34.445416819110754, 'gansu_dingxi', 'gansu', 'china'],
      武都: [104.93647136068901, 33.39388953112138, 'gansu_longnan', 'gansu', 'china'],
      成: [105.740876769301, 33.746099087776955, 'gansu_longnan', 'gansu', 'china'],
      文: [104.68900578393104, 32.947979818187584, 'gansu_longnan', 'gansu', 'china'],
      宕昌: [104.40085948971056, 34.048949421899714, 'gansu_longnan', 'gansu', 'china'],
      康: [105.61592722211829, 33.33453817047999, 'gansu_longnan', 'gansu', 'china'],
      西和: [105.30634517875097, 34.019404116401, 'gansu_longnan', 'gansu', 'china'],
      礼: [105.18820816682572, 34.19506932238321, 'gansu_longnan', 'gansu', 'china'],
      徽: [106.09204644382996, 33.774093139554665, 'gansu_longnan', 'gansu', 'china'],
      两当: [106.31336992679313, 33.91697317881652, 'gansu_longnan', 'gansu', 'china'],
      临夏: [103.21803033697067, 35.605658397124884, 'gansu_linxiahuizuzizhizhou', 'gansu', 'china'],
      临夏县: [103.0003756801676, 35.49829130391528, 'gansu_linxiahuizuzizhizhou', 'gansu', 'china'],
      康乐: [103.7163323425616, 35.37790198703639, 'gansu_linxiahuizuzizhizhou', 'gansu', 'china'],
      永靖: [103.32626423998443, 35.945243319283236, 'gansu_linxiahuizuzizhizhou', 'gansu', 'china'],
      广河: [103.58260039944075, 35.4878877574874, 'gansu_linxiahuizuzizhizhou', 'gansu', 'china'],
      和政: [103.35687748642815, 35.43197154610093, 'gansu_linxiahuizuzizhizhou', 'gansu', 'china'],
      东乡族: [103.39617977194328, 35.66956413134626, 'gansu_linxiahuizuzizhizhou', 'gansu', 'china'],
      积石山保安族东乡族撒拉族: [102.88400204221186, 35.71878419226762, 'gansu_linxiahuizuzizhizhou', 'gansu', 'china'],
      合作: [102.91807070339635, 34.991716491579425, 'gansu_gannanzangzuzizhizhou', 'gansu', 'china'],
      临潭: [103.35958142498427, 34.697594273532225, 'gansu_gannanzangzuzizhizhou', 'gansu', 'china'],
      卓尼: [103.51512051871259, 34.59389108944585, 'gansu_gannanzangzuzizhizhou', 'gansu', 'china'],
      舟曲: [104.37676662076466, 33.78896749067045, 'gansu_gannanzangzuzizhizhou', 'gansu', 'china'],
      迭部: [103.22744440717955, 34.061482431809566, 'gansu_gannanzangzuzizhizhou', 'gansu', 'china'],
      玛曲: [102.08235347396264, 34.00386609720392, 'gansu_gannanzangzuzizhizhou', 'gansu', 'china'],
      碌曲: [102.4949202732555, 34.59587494247353, 'gansu_gannanzangzuzizhizhou', 'gansu', 'china'],
      夏河: [102.52731526133282, 35.20669444978655, 'gansu_gannanzangzuzizhizhou', 'gansu', 'china'],
      西宁: [101.78537338682746, 36.629351767152805, null, 'qinghai', 'china'],
      海东: [102.1097174394568, 36.5091183878672, null, 'qinghai', 'china'],
      海北藏族: [100.9074977687575, 36.96560044387189, null, 'qinghai', 'china'],
      黄南藏族: [102.0264324393376, 35.52389642153934, null, 'qinghai', 'china'],
      海南藏族: [100.62616692637114, 36.286057039272244, null, 'qinghai', 'china'],
      果洛藏族: [100.24872299166229, 34.47942780969862, null, 'qinghai', 'china'],
      玉树藏族: [97.01510764689095, 33.00981032388072, null, 'qinghai', 'china'],
      海西蒙古族藏族: [97.37738947358763, 37.380406212033286, null, 'qinghai', 'china'],
      城东: [101.80264347808667, 36.62195222713303, 'qinghai_xining', 'qinghai', 'china'],
      西宁城中区: [101.79103994304026, 36.6272729588016, 'qinghai_xining', 'qinghai', 'china'],
      城中区: [101.79103994304026, 36.6272729588016, 'qinghai_xining', 'qinghai', 'china'],
      城西: [101.77005985975146, 36.63462948277046, 'qinghai_xining', 'qinghai', 'china'],
      城北: [101.7676980078106, 36.65475643364968, 'qinghai_xining', 'qinghai', 'china'],
      湟中: [101.57608479234091, 36.5061653322458, 'qinghai_xining', 'qinghai', 'china'],
      大通回族土族: [101.69073916889161, 36.937129906530856, 'qinghai_xining', 'qinghai', 'china'],
      湟源: [101.26984569425277, 36.6910079455775, 'qinghai_xining', 'qinghai', 'china'],
      乐都: [102.40899759613012, 36.4861049680416, 'qinghai_haidong', 'qinghai', 'china'],
      平安: [102.11073795510313, 36.50892870348432, 'qinghai_haidong', 'qinghai', 'china'],
      民和回族土族: [102.81072269353172, 36.33535224960372, 'qinghai_haidong', 'qinghai', 'china'],
      互助土族: [101.96330468257723, 36.84574419626079, 'qinghai_haidong', 'qinghai', 'china'],
      化隆回族: [102.26876956587294, 36.104435900028626, 'qinghai_haidong', 'qinghai', 'china'],
      循化撒拉族: [102.49291400766593, 35.85353010608616, 'qinghai_haidong', 'qinghai', 'china'],
      门源回族: [101.62491623140212, 37.38275889439468, 'qinghai_haibeizangzuzizhizhou', 'qinghai', 'china'],
      祁连: [100.25639000627234, 38.181155448220245, 'qinghai_haibeizangzuzizhizhou', 'qinghai', 'china'],
      海晏: [100.90693166516557, 36.965699860886964, 'qinghai_haibeizangzuzizhizhou', 'qinghai', 'china'],
      刚察: [100.14503462990825, 37.33196586580498, 'qinghai_haibeizangzuzizhizhou', 'qinghai', 'china'],
      同仁: [102.02403599769846, 35.52252073471175, 'qinghai_huangnanzangzuzizhizhou', 'qinghai', 'china'],
      尖扎: [102.03846577611829, 35.94417437712462, 'qinghai_huangnanzangzuzizhizhou', 'qinghai', 'china'],
      泽库: [101.47593267002605, 35.04257222143215, 'qinghai_huangnanzangzuzizhizhou', 'qinghai', 'china'],
      河南蒙古族: [101.61837212945856, 34.74055374103521, 'qinghai_huangnanzangzuzizhizhou', 'qinghai', 'china'],
      共和: [100.62622196719222, 36.28599003174413, 'qinghai_hainanzangzuzizhizhou', 'qinghai', 'china'],
      同德: [100.58589121894781, 35.26064369555988, 'qinghai_hainanzangzuzizhizhou', 'qinghai', 'china'],
      贵德: [101.43838258193153, 36.0464321926396, 'qinghai_hainanzangzuzizhizhou', 'qinghai', 'china'],
      兴海: [99.99343746051223, 35.59513442528918, 'qinghai_hainanzangzuzizhizhou', 'qinghai', 'china'],
      贵南: [100.7545108754904, 35.59280595910736, 'qinghai_hainanzangzuzizhizhou', 'qinghai', 'china'],
      玛沁: [100.25011690981154, 34.479196722237724, 'qinghai_guoluozangzuzizhizhou', 'qinghai', 'china'],
      班玛: [100.74456133249001, 32.93729116601374, 'qinghai_guoluozangzuzizhizhou', 'qinghai', 'china'],
      甘德: [99.90919673949581, 33.9726923447293, 'qinghai_guoluozangzuzizhizhou', 'qinghai', 'china'],
      达日: [99.6583255479252, 33.75899405859179, 'qinghai_guoluozangzuzizhizhou', 'qinghai', 'china'],
      久治: [101.49140086076399, 33.43613322648342, 'qinghai_guoluozangzuzizhizhou', 'qinghai', 'china'],
      玛多: [98.21793255784293, 34.921013480363, 'qinghai_guoluozangzuzizhizhou', 'qinghai', 'china'],
      玉树: [97.01534822826846, 33.0096892350631, 'qinghai_yushuzangzuzizhizhou', 'qinghai', 'china'],
      杂多: [95.29985872929089, 32.89810793581969, 'qinghai_yushuzangzuzizhizhou', 'qinghai', 'china'],
      称多: [97.11740526701786, 33.37387299039339, 'qinghai_yushuzangzuzizhizhou', 'qinghai', 'china'],
      治多: [95.62331872306966, 33.85842660696205, 'qinghai_yushuzangzuzizhizhou', 'qinghai', 'china'],
      囊谦: [96.48621500908439, 32.20950030072549, 'qinghai_yushuzangzuzizhizhou', 'qinghai', 'china'],
      曲麻莱: [95.80724049191205, 34.13239195452737, 'qinghai_yushuzangzuzizhizhou', 'qinghai', 'china'],
      格尔木: [94.9122120702526, 36.40775624120972, 'qinghai_haiximengguzuzangzuzizhizhou', 'qinghai', 'china'],
      德令哈: [97.37674577013102, 37.3803029540795, 'qinghai_haiximengguzuzangzuzizhizhou', 'qinghai', 'china'],
      茫崖: [90.86235979850248, 38.253292188659955, 'qinghai_haiximengguzuzangzuzizhizhou', 'qinghai', 'china'],
      乌兰: [98.48638941465806, 36.93623228082387, 'qinghai_haiximengguzuzangzuzizhizhou', 'qinghai', 'china'],
      都兰: [98.0957542437341, 36.30430538953975, 'qinghai_haiximengguzuzangzuzizhizhou', 'qinghai', 'china'],
      天峻: [99.02721140505305, 37.30519163187264, 'qinghai_haiximengguzuzangzuzizhizhou', 'qinghai', 'china'],
      海西蒙古族藏族自治州直辖: [
          95.3638094688419,
          37.85945611018061,
          'qinghai_haiximengguzuzangzuzizhizhou',
          'qinghai',
          'china'
      ],
      银川: [106.28473979498277, 38.47218279101865, null, 'ningxia', 'china'],
      石嘴山: [106.38279976478779, 39.01902168241069, null, 'ningxia', 'china'],
      吴忠: [106.20578912180062, 37.99248130875964, null, 'ningxia', 'china'],
      固原: [106.29177211812207, 36.010483884837306, null, 'ningxia', 'china'],
      中卫: [105.19615342800869, 37.520669472195536, null, 'ningxia', 'china'],
      兴庆: [106.28495172684966, 38.47328534541661, 'ningxia_yinchuan', 'ningxia', 'china'],
      西夏: [106.13870312625883, 38.498125584994256, 'ningxia_yinchuan', 'ningxia', 'china'],
      金凤: [106.23496202890956, 38.48337286507662, 'ningxia_yinchuan', 'ningxia', 'china'],
      永宁: [106.26039022962017, 38.28612814184006, 'ningxia_yinchuan', 'ningxia', 'china'],
      贺兰: [106.35239765213575, 38.56063752250718, 'ningxia_yinchuan', 'ningxia', 'china'],
      灵武: [106.34112469870676, 38.100289138451274, 'ningxia_yinchuan', 'ningxia', 'china'],
      大武口: [106.38327892643784, 39.01984841389728, 'ningxia_shizuishan', 'ningxia', 'china'],
      惠农: [106.78197019095164, 39.23618176738362, 'ningxia_shizuishan', 'ningxia', 'china'],
      平罗: [106.55132645642134, 38.912971470819656, 'ningxia_shizuishan', 'ningxia', 'china'],
      利通: [106.20579930602628, 37.99228338025645, 'ningxia_wuzhong', 'ningxia', 'china'],
      红寺堡: [106.07371112187975, 37.42786109729848, 'ningxia_wuzhong', 'ningxia', 'china'],
      盐池: [107.41178729134974, 37.79052649454861, 'ningxia_wuzhong', 'ningxia', 'china'],
      同心: [105.92136100798484, 36.98867870435137, 'ningxia_wuzhong', 'ningxia', 'china'],
      青铜峡: [106.0817687238461, 38.027812460557385, 'ningxia_wuzhong', 'ningxia', 'china'],
      原州: [106.29130443579453, 36.011252541349116, 'ningxia_guyuan', 'ningxia', 'china'],
      西吉: [105.73819466960825, 35.97163629153808, 'ningxia_guyuan', 'ningxia', 'china'],
      隆德: [106.12999191519867, 35.62402221518022, 'ningxia_guyuan', 'ningxia', 'china'],
      泾源: [106.34509582647311, 35.49961206019735, 'ningxia_guyuan', 'ningxia', 'china'],
      彭阳: [106.64803928291505, 35.855831077366155, 'ningxia_guyuan', 'ningxia', 'china'],
      沙坡头: [105.1971188350632, 37.52029060130461, 'ningxia_zhongwei', 'ningxia', 'china'],
      中宁: [105.68236984607907, 37.49552463942309, 'ningxia_zhongwei', 'ningxia', 'china'],
      海原: [105.65389212790785, 36.567751375521766, 'ningxia_zhongwei', 'ningxia', 'china'],
      乌鲁木齐: [87.62414772920293, 43.79897217508546, null, 'xinjiang', 'china'],
      克拉玛依: [84.8804702953918, 45.60183174246032, null, 'xinjiang', 'china'],
      吐鲁番: [89.190527801318, 42.953689396595664, null, 'xinjiang', 'china'],
      哈密: [93.51967486897068, 42.83919891071123, null, 'xinjiang', 'china'],
      昌吉回族: [87.31062379219618, 44.02031209924711, null, 'xinjiang', 'china'],
      博尔塔拉蒙古: [82.08116475785042, 44.90950408486179, null, 'xinjiang', 'china'],
      巴音郭楞蒙古: [86.15736523587026, 41.77478587004673, null, 'xinjiang', 'china'],
      阿克苏地: [80.27148981913268, 41.176887728409696, null, 'xinjiang', 'china'],
      克孜勒苏柯尔克孜: [76.17930146112529, 39.7194615606722, null, 'xinjiang', 'china'],
      喀什地: [75.99562197430059, 39.47366873682156, null, 'xinjiang', 'china'],
      和田地: [79.93174110326747, 37.11692591615691, null, 'xinjiang', 'china'],
      伊犁哈萨克: [81.32452546191912, 43.92771697416934, null, 'xinjiang', 'china'],
      塔城地: [82.99236032445145, 46.75205999123196, null, 'xinjiang', 'china'],
      阿勒泰地: [88.1462560030309, 47.85411912230901, null, 'xinjiang', 'china'],
      石河子: [86.04745966252415, 44.312152658829724, null, 'xinjiang', 'china'],
      阿拉尔: [81.29245936279598, 40.54772652758668, null, 'xinjiang', 'china'],
      图木舒克: [79.08437675006947, 39.873560820271166, null, 'xinjiang', 'china'],
      五家渠: [87.53349321233385, 44.173201348657756, null, 'xinjiang', 'china'],
      北屯: [87.83132070189208, 47.35935659868432, null, 'xinjiang', 'china'],
      铁门关: [85.50783656815658, 41.83299176046735, null, 'xinjiang', 'china'],
      双河: [82.36016614715086, 44.84646858334832, null, 'xinjiang', 'china'],
      可克达拉: [80.64216505382196, 43.689437642345084, null, 'xinjiang', 'china'],
      昆玉: [79.29389467020819, 37.21396482632519, null, 'xinjiang', 'china'],
      胡杨河: [84.83399555688918, 44.69909459163731, null, 'xinjiang', 'china'],
      天山: [87.62654767114313, 43.80255638239393, 'xinjiang_wulumuqi', 'xinjiang', 'china'],
      沙依巴克: [87.60299981840117, 43.79512581022928, 'xinjiang_wulumuqi', 'xinjiang', 'china'],
      新市: [87.56720522553135, 43.87675367935096, 'xinjiang_wulumuqi', 'xinjiang', 'china'],
      水磨沟: [87.61950499876761, 43.8229573336561, 'xinjiang_wulumuqi', 'xinjiang', 'china'],
      头屯河: [87.4324352400434, 43.88179613539934, 'xinjiang_wulumuqi', 'xinjiang', 'china'],
      达坂城: [88.31634217549691, 43.36804620125951, 'xinjiang_wulumuqi', 'xinjiang', 'china'],
      米东: [87.69830358574409, 43.96701429289477, 'xinjiang_wulumuqi', 'xinjiang', 'china'],
      乌鲁木齐县: [87.51207051465032, 43.98860471201674, 'xinjiang_wulumuqi', 'xinjiang', 'china'],
      独山子: [84.88885766758652, 44.333060204873604, 'xinjiang_kelamayi', 'xinjiang', 'china'],
      克拉玛依区: [84.87541069383278, 45.60649165305402, 'xinjiang_kelamayi', 'xinjiang', 'china'],
      白碱滩: [85.13648267831195, 45.6947911736942, 'xinjiang_kelamayi', 'xinjiang', 'china'],
      乌尔禾: [85.70419133378078, 46.09391738570942, 'xinjiang_kelamayi', 'xinjiang', 'china'],
      高昌: [89.18876272483631, 42.95372642255879, 'xinjiang_tulufan', 'xinjiang', 'china'],
      鄯善: [90.21919149989824, 42.87154936761825, 'xinjiang_tulufan', 'xinjiang', 'china'],
      托克逊: [88.66222107168596, 42.79960949077728, 'xinjiang_tulufan', 'xinjiang', 'china'],
      伊州: [93.51566272390762, 42.839897508605034, 'xinjiang_hami', 'xinjiang', 'china'],
      巴里坤哈萨克: [93.0282566423763, 43.605155792306675, 'xinjiang_hami', 'xinjiang', 'china'],
      伊吾: [94.69917858587633, 43.25823825446959, 'xinjiang_hami', 'xinjiang', 'china'],
      昌吉: [87.31072337911465, 44.01891825610196, 'xinjiang_changjihuizuzizhizhou', 'xinjiang', 'china'],
      阜康: [87.99029087517356, 44.15823308288783, 'xinjiang_changjihuizuzizhizhou', 'xinjiang', 'china'],
      呼图壁: [86.89501150187242, 44.19558566594382, 'xinjiang_changjihuizuzizhizhou', 'xinjiang', 'china'],
      玛纳斯: [86.22433626693496, 44.31137714370942, 'xinjiang_changjihuizuzizhizhou', 'xinjiang', 'china'],
      奇台: [89.59803156075175, 44.02776685831195, 'xinjiang_changjihuizuzizhizhou', 'xinjiang', 'china'],
      吉木萨尔: [89.18771582306854, 44.003272930257125, 'xinjiang_changjihuizuzizhizhou', 'xinjiang', 'china'],
      木垒哈萨克: [90.28943270185414, 43.83828206013982, 'xinjiang_changjihuizuzizhizhou', 'xinjiang', 'china'],
      博乐: [82.07862967494624, 44.90932213289503, 'xinjiang_boertalamengguzizhizhou', 'xinjiang', 'china'],
      阿拉山口: [82.57578002694355, 45.17399410818157, 'xinjiang_boertalamengguzizhizhou', 'xinjiang', 'china'],
      精河: [82.89940033951109, 44.61167387244572, 'xinjiang_boertalamengguzizhizhou', 'xinjiang', 'china'],
      温泉: [81.0374798397262, 44.97972888554286, 'xinjiang_boertalamengguzizhizhou', 'xinjiang', 'china'],
      库尔勒: [86.15235804903907, 41.7693150049386, 'xinjiang_bayinguolengmengguzizhizhou', 'xinjiang', 'china'],
      轮台: [84.25494506160227, 41.78750185733142, 'xinjiang_bayinguolengmengguzizhizhou', 'xinjiang', 'china'],
      尉犁: [86.26983431724715, 41.3435963226295, 'xinjiang_bayinguolengmengguzizhizhou', 'xinjiang', 'china'],
      若羌: [88.17533164376167, 39.0297981610107, 'xinjiang_bayinguolengmengguzizhizhou', 'xinjiang', 'china'],
      且末: [85.53909683855866, 38.144589870232025, 'xinjiang_bayinguolengmengguzizhizhou', 'xinjiang', 'china'],
      焉耆回族: [86.57640455837148, 42.07012348385709, 'xinjiang_bayinguolengmengguzizhizhou', 'xinjiang', 'china'],
      和静: [86.39743963111123, 42.32338445277719, 'xinjiang_bayinguolengmengguzizhizhou', 'xinjiang', 'china'],
      和硕: [86.87137553518288, 42.27505549175479, 'xinjiang_bayinguolengmengguzizhizhou', 'xinjiang', 'china'],
      博湖: [86.6379466047556, 41.98639350538879, 'xinjiang_bayinguolengmengguzizhizhou', 'xinjiang', 'china'],
      阿克苏: [80.26933267737321, 41.17742763140021, 'xinjiang_akesudiqu', 'xinjiang', 'china'],
      库车: [82.96960499486099, 41.72297694012809, 'xinjiang_akesudiqu', 'xinjiang', 'china'],
      温宿: [80.24980933787418, 41.27890867077617, 'xinjiang_akesudiqu', 'xinjiang', 'china'],
      沙雅: [82.78719812299393, 41.232397864974665, 'xinjiang_akesudiqu', 'xinjiang', 'china'],
      新和: [82.61745638604637, 41.556965171426455, 'xinjiang_akesudiqu', 'xinjiang', 'china'],
      拜城: [81.87639713050912, 41.802111164159996, 'xinjiang_akesudiqu', 'xinjiang', 'china'],
      乌什: [79.23731401715085, 41.22186196473364, 'xinjiang_akesudiqu', 'xinjiang', 'china'],
      阿瓦提: [80.38485927285898, 40.64451755129731, 'xinjiang_akesudiqu', 'xinjiang', 'china'],
      柯坪: [79.05435793841478, 40.512210432927056, 'xinjiang_akesudiqu', 'xinjiang', 'china'],
      阿图什: [76.1804081581754, 39.71894143867913, 'xinjiang_kezilesukeerkezizizhizhou', 'xinjiang', 'china'],
      阿克陶: [75.95159283755929, 39.153250496137694, 'xinjiang_kezilesukeerkezizizhizhou', 'xinjiang', 'china'],
      阿合奇: [78.45667705019524, 40.94357638117793, 'xinjiang_kezilesukeerkezizizhizhou', 'xinjiang', 'china'],
      乌恰: [75.26612565578655, 39.72274741114214, 'xinjiang_kezilesukeerkezizizhizhou', 'xinjiang', 'china'],
      喀什: [75.99485943199892, 39.47387484085187, 'xinjiang_kashidiqu', 'xinjiang', 'china'],
      疏附: [75.8695476238427, 39.38439426584903, 'xinjiang_kashidiqu', 'xinjiang', 'china'],
      疏勒: [76.06014615346253, 39.405512468712786, 'xinjiang_kashidiqu', 'xinjiang', 'china'],
      英吉沙: [76.18077500862931, 38.935894541469246, 'xinjiang_kashidiqu', 'xinjiang', 'china'],
      泽普: [77.28000270615674, 38.19744474147784, 'xinjiang_kashidiqu', 'xinjiang', 'china'],
      莎车: [77.25540305662943, 38.42049159555247, 'xinjiang_kashidiqu', 'xinjiang', 'china'],
      叶城: [77.42678072995199, 37.890782941382724, 'xinjiang_kashidiqu', 'xinjiang', 'china'],
      麦盖提: [77.65795876673415, 38.90958414742483, 'xinjiang_kashidiqu', 'xinjiang', 'china'],
      岳普湖: [76.77888086199921, 39.24127462508048, 'xinjiang_kashidiqu', 'xinjiang', 'china'],
      伽师: [76.74861196765389, 39.50010225112879, 'xinjiang_kashidiqu', 'xinjiang', 'china'],
      巴楚: [78.5570088232811, 39.789275859164654, 'xinjiang_kashidiqu', 'xinjiang', 'china'],
      塔什库尔干塔吉克: [75.23445892649966, 37.781611439630666, 'xinjiang_kashidiqu', 'xinjiang', 'china'],
      和田: [79.93395735350131, 37.11517373715662, 'xinjiang_hetiandiqu', 'xinjiang', 'china'],
      和田县: [79.8255253820495, 37.12616797771646, 'xinjiang_hetiandiqu', 'xinjiang', 'china'],
      墨玉: [79.74322880600856, 37.27727070553002, 'xinjiang_hetiandiqu', 'xinjiang', 'china'],
      皮山: [78.28887220231961, 37.622192636724755, 'xinjiang_hetiandiqu', 'xinjiang', 'china'],
      洛浦: [80.19049857279624, 37.080448443681085, 'xinjiang_hetiandiqu', 'xinjiang', 'china'],
      策勒: [80.8101593021972, 37.007520692632696, 'xinjiang_hetiandiqu', 'xinjiang', 'china'],
      于田: [81.67445900334083, 36.860409079265324, 'xinjiang_hetiandiqu', 'xinjiang', 'china'],
      民丰: [82.69875230176376, 37.07110114947351, 'xinjiang_hetiandiqu', 'xinjiang', 'china'],
      伊宁: [81.3229314269924, 43.92805014504386, 'xinjiang_yilihasakezizhizhou', 'xinjiang', 'china'],
      奎屯: [84.9082514886901, 44.42919992181817, 'xinjiang_yilihasakezizhizhou', 'xinjiang', 'china'],
      霍尔果斯: [80.42721166848258, 44.20778912513779, 'xinjiang_yilihasakezizhizhou', 'xinjiang', 'china'],
      伊宁县: [81.53126462369441, 43.98370711845419, 'xinjiang_yilihasakezizhizhou', 'xinjiang', 'china'],
      察布查尔锡伯: [81.15739574368537, 43.84488035900807, 'xinjiang_yilihasakezizhizhou', 'xinjiang', 'china'],
      霍城: [80.87889459969573, 44.05614093315455, 'xinjiang_yilihasakezizhizhou', 'xinjiang', 'china'],
      巩留: [82.23353839937023, 43.48766370018473, 'xinjiang_yilihasakezizhizhou', 'xinjiang', 'china'],
      新源: [83.2649316870797, 43.440353704787455, 'xinjiang_yilihasakezizhizhou', 'xinjiang', 'china'],
      昭苏: [81.13239176817598, 43.16398882088513, 'xinjiang_yilihasakezizhizhou', 'xinjiang', 'china'],
      特克斯: [81.8464407700114, 43.221113074181915, 'xinjiang_yilihasakezizhizhou', 'xinjiang', 'china'],
      尼勒克: [82.51073828264474, 43.79549042201737, 'xinjiang_yilihasakezizhizhou', 'xinjiang', 'china'],
      塔城: [82.99061956422423, 46.752034285224326, 'xinjiang_tachengdiqu', 'xinjiang', 'china'],
      乌苏: [84.68422216348017, 44.435970958518524, 'xinjiang_tachengdiqu', 'xinjiang', 'china'],
      额敏: [83.62851910191243, 46.52869471264218, 'xinjiang_tachengdiqu', 'xinjiang', 'china'],
      沙湾: [85.62914908832819, 44.33529413032719, 'xinjiang_tachengdiqu', 'xinjiang', 'china'],
      托里: [83.61121111405676, 45.941784980246915, 'xinjiang_tachengdiqu', 'xinjiang', 'china'],
      裕民: [82.98879726037366, 46.20853505103842, 'xinjiang_tachengdiqu', 'xinjiang', 'china'],
      和布克赛尔蒙古: [85.74017716093906, 46.79875489014444, 'xinjiang_tachengdiqu', 'xinjiang', 'china'],
      阿勒泰: [88.14536868719134, 47.85463762944049, 'xinjiang_aletaidiqu', 'xinjiang', 'china'],
      布尔津: [86.86827261168261, 47.71067935655029, 'xinjiang_aletaidiqu', 'xinjiang', 'china'],
      富蕴: [89.5313455901342, 46.99935955889009, 'xinjiang_aletaidiqu', 'xinjiang', 'china'],
      福海: [87.50095565459267, 47.119311728298726, 'xinjiang_aletaidiqu', 'xinjiang', 'china'],
      哈巴河: [86.4253859023236, 48.065425975317254, 'xinjiang_aletaidiqu', 'xinjiang', 'china'],
      青河: [90.38799427797528, 46.67855841285143, 'xinjiang_aletaidiqu', 'xinjiang', 'china'],
      吉木乃: [85.88267585908639, 47.44047064244108, 'xinjiang_aletaidiqu', 'xinjiang', 'china'],
      中西: [114.1608703481422, 22.28789959929725, 'xianggang', 'xianggang', 'china'],
      湾仔: [114.18946649931034, 22.282047426622576, 'xianggang', 'xianggang', 'china'],
      香港东区: [114.23243658113887, 22.285944471797354, 'xianggang', 'xianggang', 'china'],
      东区: [114.23243658113887, 22.285944471797354, 'xianggang', 'xianggang', 'china'],
      南区: [114.16655831838624, 22.251727823338967, 'xianggang', 'xianggang', 'china'],
      油尖旺: [114.17988633524472, 22.31738042214921, 'xianggang', 'xianggang', 'china'],
      深水埗: [114.16979754269771, 22.33963783063518, 'xianggang', 'xianggang', 'china'],
      九龙城: [114.19939155424566, 22.31824057861368, 'xianggang', 'xianggang', 'china'],
      黄大仙: [114.2104214931406, 22.342215632797657, 'xianggang', 'xianggang', 'china'],
      观塘: [114.22054095263138, 22.32691013831141, 'xianggang', 'xianggang', 'china'],
      荃湾: [114.12752348142536, 22.374650697624112, 'xianggang', 'xianggang', 'china'],
      屯门: [113.98303851631387, 22.399957003183022, 'xianggang', 'xianggang', 'china'],
      元朗: [114.03894813740528, 22.447385065462765, 'xianggang', 'xianggang', 'china'],
      北: [114.15385858968571, 22.502151789444877, 'xianggang', 'xianggang', 'china'],
      大埔区: [114.17830996521913, 22.45134318424653, 'xianggang', 'xianggang', 'china'],
      西贡: [114.27112061794257, 22.32030677681353, 'xianggang', 'xianggang', 'china'],
      沙田: [114.20191233847973, 22.38529419672546, 'xianggang', 'xianggang', 'china'],
      葵青: [114.14579847525539, 22.37006121010143, 'xianggang', 'xianggang', 'china'],
      离岛: [113.9526641734402, 22.29207957117682, 'xianggang', 'xianggang', 'china'],
      花地玛堂: [113.55941352359393, 22.213820086771662, 'aomen', 'aomen', 'china'],
      花王堂: [113.55545636378704, 22.205225867137838, 'aomen', 'aomen', 'china'],
      望德堂: [113.55667709946674, 22.199716330876296, 'aomen', 'aomen', 'china'],
      大堂: [113.56014905127056, 22.19447260860524, 'aomen', 'aomen', 'china'],
      风顺堂: [113.54838844045987, 22.193505424410642, 'aomen', 'aomen', 'china'],
      嘉模堂: [113.56522070234222, 22.15960696639864, 'aomen', 'aomen', 'china'],
      路凼填海: [113.57615944874901, 22.142339248884028, 'aomen', 'aomen', 'china'],
      圣方济各堂: [113.56650218372428, 22.129319667995677, 'aomen', 'aomen', 'china']
  };
  // 给只有一个省级数据点时，散点地图自适应用的
  exports.provinceGeoCoordSp = {
      北京: [116.41166495284281, 39.91132325517341, null, 'beijing', 'china'],
      天津: [117.19678856634137, 39.13129504908793, null, 'tianjin', 'china'],
      河北: [114.50892247229918, 38.05160788527559, null, 'hebei', 'china'],
      山西: [112.55565490751108, 37.86330053190941, null, 'shanxi', 'china'],
      内蒙古: [111.67741976306763, 40.824033768690825, null, 'neimenggu', 'china'],
      辽宁: [123.43572520225906, 41.80244393685758, null, 'liaoning', 'china'],
      吉林: [125.33107201037413, 43.892575677007876, null, 'jilin', 'china'],
      黑龙江: [126.6490649317503, 45.76274263234975, null, 'heilongjiang', 'china'],
      上海: [121.47917622247735, 31.23766067156306, null, 'shanghai', 'china'],
      江苏: [118.7739275401509, 32.04749630515097, null, 'jiangsu', 'china'],
      浙江: [120.16010475263418, 30.29339488572421, null, 'zhejiang', 'china'],
      安徽: [117.28960111387359, 31.866967646899777, null, 'anhui', 'china'],
      福建: [119.31274248535382, 26.081376135578243, null, 'fujian', 'china'],
      江西: [115.89863778631067, 28.682531197462737, null, 'jiangxi', 'china'],
      山东: [117.00729904786878, 36.68215318771068, null, 'shandong', 'china'],
      河南: [113.67187173242553, 34.76405140392973, null, 'henan', 'china'],
      湖北: [114.30514938118115, 30.590009285298237, null, 'hubei', 'china'],
      湖南: [112.98885707086882, 28.19975198869135, null, 'hunan', 'china'],
      广东: [113.28704868796393, 23.131513779259098, null, 'guangdong', 'china'],
      广西: [108.32655684226347, 22.829861501979117, null, 'guangxi', 'china'],
      海南: [110.33773578304327, 20.037673144085705, null, 'hainan', 'china'],
      重庆: [106.51155987543073, 29.538849605036805, null, 'chongqing', 'china'],
      四川: [104.07221517047132, 30.665531299496966, null, 'sichuan', 'china'],
      贵州: [106.71999412186334, 26.58428544056653, null, 'guizhou', 'china'],
      云南: [102.71866484796189, 25.046887943641675, null, 'yunnan', 'china'],
      西藏: [91.13881033157789, 29.666115438652298, null, 'xizang', 'china'],
      陕西: [108.95443762207665, 34.26942467492985, null, 'shanxi', 'china'],
      甘肃: [103.83002313164361, 36.064142766893724, null, 'gansu', 'china'],
      青海: [101.78537338682746, 36.629351767152805, null, 'qinghai', 'china'],
      宁夏: [106.28473979498277, 38.47218279101865, null, 'ningxia', 'china'],
      新疆: [87.62414772920293, 43.79897217508546, null, 'xinjiang', 'china'],
      台湾: [120.9779169561735, 23.755749216464142, null, 'taiwan', 'china'],
      香港: [114.17991799676649, 22.325726013305196, null, 'xianggang', 'china'],
      澳门: [113.55558575045498, 22.20496701424488, null, 'aomeng', 'china']
  };
  

});

;sugar.define('sugar:widgets/charts/map/world-geo-coord.ts', function(require, exports, module, define) {

  "use strict";
  Object.defineProperty(exports, "__esModule", { value: true });
  exports.default = {
      索马里: [46.177734375, 5.14453125],
      列支敦士登: [9.4951171875, 47.1455078125],
      摩洛哥: [-7.0517578125, 31.8408203125],
      西撒哈拉: [-12.89013671875, 24.3095703125],
      塞尔维亚: [20.90869140625, 44.02197265625],
      阿富汗: [67.68896484375, 33.90771484375],
      安哥拉: [17.86376953125, -11.22412109375],
      阿尔巴尼亚: [20.15625, 41.1416015625],
      奥兰群岛: [19.8984375, 60.236328125],
      安道尔: [1.57763671875, 42.54052734375],
      阿联酋: [53.97900390625, 24.3427734375],
      阿根廷: [-63.61083984375, -38.41650390625],
      亚美尼亚: [45.0126953125, 40.08447265625],
      美属萨摩亚: [-170.69384765625, -14.30859375],
      南极洲: [61.10791015625, -48.01513671875],
      安提瓜和巴布达: [-61.80126953125, 17.091796875],
      澳大利亚: [133.2822265625, -27.10205078125],
      奥地利: [13.3359375, 47.69921875],
      阿塞拜疆: [47.5673828125, 40.1513671875],
      布隆迪: [29.9130859375, -3.3837890625],
      比利时: [4.43359375, 50.49072265625],
      贝宁: [2.29931640625, 9.30078125],
      布基纳法索: [-1.56689453125, 12.2421875],
      孟加拉国: [90.328125, 23.67822265625],
      保加利亚: [25.46533203125, 42.74951171875],
      巴林: [50.537109375, 26.0244140625],
      巴哈马: [-75.8662109375, 23.93994140625],
      波黑: [17.66064453125, 43.9189453125],
      白俄罗斯: [27.9404296875, 53.708984375],
      伯利兹: [-88.529296875, 17.1806640625],
      百慕大: [-64.76513671875, 32.32861328125],
      玻利维亚: [-63.5703125, -16.3017578125],
      巴西: [-54.41748046875, -14.24169921875],
      巴巴多斯: [-59.53662109375, 13.19287109375],
      文莱: [114.677734375, 4.5302734375],
      不丹: [90.41162109375, 27.5068359375],
      博茨瓦纳: [24.67138671875, -22.32080078125],
      中非: [20.91748046875, 6.6337890625],
      加拿大: [-96.82763671875, 62.39599609375],
      瑞士: [8.212890625, 46.796875],
      智利: [-88.220703125, -36.64111328125],
      中国: [104.18017578125, 35.8828125],
      科特迪瓦: [-5.546875, 7.53515625],
      喀麦隆: [12.36181640625, 7.3779296875],
      刚果金: [21.7333984375, -4.0625],
      刚果: [14.87060546875, -0.658203125],
      哥伦比亚: [-72.95068359375, 4.0927734375],
      科摩罗: [43.86669921875, -11.87109375],
      佛得角: [-24.0146484375, 16.005859375],
      哥斯达黎加: [-84.2353515625, 9.63037109375],
      古巴: [-79.52001953125, 21.50927734375],
      库拉索岛: [-68.95458984375, 12.220703125],
      开曼群岛: [-80.5732421875, 19.5185546875],
      北塞浦路斯: [33.634765625, 35.33154296875],
      塞浦路斯: [33.17626953125, 34.87109375],
      捷克: [15.46630859375, 49.81884765625],
      德国: [10.4111328125, 51.16748046875],
      吉布提: [42.5869140625, 11.8447265625],
      多米尼克: [-61.3671875, 15.4306640625],
      丹麦: [10.2768332, 56.1773879],
      多米尼加: [-70.16943359375, 18.77490234375],
      阿尔及利亚: [1.64306640625, 28.0400390625],
      厄瓜多尔: [-83.44775390625, -1.76708984375],
      埃及: [30.7880859375, 26.8251953125],
      厄立特里亚: [39.77197265625, 15.193359375],
      西班牙: [-2.9366964, 40.3438963],
      爱沙尼亚: [25.00732421875, 58.583984375],
      埃塞俄比亚: [40.48876953125, 9.15478515625],
      芬兰: [26.07861328125, 64.94091796875],
      斐济: [0, -17.63671875],
      马尔维纳斯群岛: [-59.4677734375, -51.78857421875],
      法国: [2.8719426, 46.8222422],
      法罗群岛: [-6.89208984375, 62.154296875],
      密克罗尼西亚: [148.19140625, 8.19775390625],
      加蓬: [11.5888671875, -0.806640625],
      英国: [-2.5830348, 54.4598409],
      格鲁吉亚: [43.32568359375, 42.3154296875],
      加纳: [-1.01953125, 7.96484375],
      几内亚: [-11.373046875, 9.94580078125],
      冈比亚: [-15.3251953125, 13.4384765625],
      几内亚比绍: [-15.19189453125, 11.810546875],
      赤道几内亚: [9.900390625, 2.35986328125],
      希腊: [23.939453125, 38.33935546875],
      格林纳达: [-61.66064453125, 12.1181640625],
      格陵兰: [-42.12353515625, 71.69091796875],
      危地马拉: [-90.23095703125, 15.77685546875],
      关岛: [144.79541015625, 13.4375],
      圭亚那: [-58.9365234375, 4.8759765625],
      赫德岛和麦克唐纳群岛: [73.544921875, -53.07958984375],
      洪都拉斯: [-86.259765625, 14.501953125],
      克罗地亚: [16.458984375, 44.484375],
      海地: [-73.06201171875, 18.970703125],
      匈牙利: [19.4853515625, 47.1533203125],
      印度尼西亚: [118.091796875, -2.64990234375],
      曼岛: [-4.59814453125, 54.240234375],
      印度: [82.63525390625, 20.69970703125],
      英属印度洋领地: [72.42138671875, -7.3271484375],
      爱尔兰: [-8.20849609375, 53.42041015625],
      伊朗: [53.66455078125, 32.43603515625],
      伊拉克: [43.66064453125, 33.21826171875],
      冰岛: [-19.037109375, 64.96533203125],
      以色列: [35.080078125, 31.455078125],
      意大利: [12.54833984375, 41.8857421875],
      牙买加: [-77.2744140625, 18.119140625],
      泽西岛: [-2.126953125, 49.2216796875],
      约旦: [37.1220703125, 31.287109375],
      日本: [134.7568359375, 34.89501953125],
      锡亚琴冰川地区: [77.28369140625, 35.38623046875],
      哈萨克斯坦: [66.9921875, 48.00634765625],
      肯尼亚: [37.89404296875, 0.400390625],
      吉尔吉斯斯坦: [74.74609375, 41.224609375],
      柬埔寨: [104.97119140625, 12.55859375],
      基里巴斯: [-158.2919921875, 2.83203125],
      韩国: [127.79052734375, 35.923828125],
      科威特: [47.48779296875, 29.3154296875],
      老挝: [103.88427734375, 18.208984375],
      黎巴嫩: [35.84716796875, 33.8671875],
      利比里亚: [-9.453125, 6.44482421875],
      利比亚: [17.23095703125, 26.33984375],
      圣卢西亚: [-60.9833984375, 13.90576171875],
      斯里兰卡: [80.79443359375, 7.896484375],
      莱索托: [28.22216796875, -29.60595703125],
      立陶宛: [23.83837890625, 55.150390625],
      卢森堡: [6.11572265625, 49.80712890625],
      拉脱维亚: [24.62451171875, 56.86572265625],
      摩尔多瓦: [28.37548828125, 46.96484375],
      马达加斯加: [46.87451171875, -18.82470703125],
      墨西哥: [-101.9453125, 23.630859375],
      北马其顿: [21.74658203125, 41.58251953125],
      马里: [-4.0224609375, 17.56982421875],
      马耳他: [14.458984375, 35.900390625],
      缅甸: [96.65966796875, 19.19775390625],
      黑山共和国: [19.390625, 42.7060546875],
      蒙古: [103.82080078125, 46.85693359375],
      北马里亚纳群岛: [145.76806640625, 15.19970703125],
      莫桑比克: [35.53857421875, -18.66259765625],
      毛里塔尼亚: [-10.94287109375, 21.01611328125],
      蒙特塞拉特: [-62.1845703125, 16.75244140625],
      毛里求斯: [57.55517578125, -20.23681640625],
      马拉维: [34.2822265625, -13.26904296875],
      马来西亚: [109.45654296875, 4.107421875],
      纳米比亚: [18.49658203125, -22.955078125],
      新喀里多尼亚: [166.10009765625, -21.3896484375],
      尼日尔: [8.06396484375, 17.607421875],
      尼日利亚: [8.66162109375, 9.07568359375],
      尼加拉瓜: [-85.41357421875, 12.8720703125],
      纽埃: [-169.87548828125, -19.0244140625],
      荷兰: [5.0752777, 52.358465],
      挪威: [12.33837890625, 69.25146484375],
      尼泊尔: [84.10693359375, 28.3740234375],
      新西兰: [0.8447265625, -43.4990234375],
      阿曼: [55.90087890625, 21.5],
      巴基斯坦: [68.0888671875, 30.3095703125],
      巴拿马: [-80.111328125, 8.41259765625],
      秘鲁: [-75.01025390625, -9.197265625],
      菲律宾: [121.77587890625, 12.21630859375],
      帕劳: [134.583984375, 7.5478515625],
      巴布亚新几内亚: [148.41015625, -6.4912109375],
      波兰: [19.11279296875, 51.9560546875],
      波多黎各: [-66.27880859375, 18.2373046875],
      朝鲜: [127.52490234375, 40.3623046875],
      葡萄牙: [-8.7440694, 39.9251454],
      巴拉圭: [-58.44580078125, -23.419921875],
      巴勒斯坦: [34.88525390625, 31.8720703125],
      法属波利尼西亚: [-144.23095703125, -13.3291015625],
      卡塔尔: [51.18212890625, 25.359375],
      罗马尼亚: [24.97412109375, 45.9658203125],
      俄罗斯: [100, 60],
      卢旺达: [29.876953125, -1.935546875],
      沙特阿拉伯: [45.13330078125, 24.24853515625],
      苏丹: [30.21826171875, 15.4345703125],
      南苏丹: [29.7080078125, 7.857421875],
      塞内加尔: [-14.4619140625, 14.50927734375],
      新加坡: [103.81005859375, 1.38671875],
      南乔治亚岛和南桑威奇群岛: [-36.9072265625, -54.43701171875],
      圣赫勒拿: [-5.73681640625, -15.95458984375],
      所罗门群岛: [160.90576171875, -9.22607421875],
      塞拉利昂: [-11.787109375, 8.4521484375],
      萨尔瓦多: [-88.90478515625, 13.79833984375],
      圣皮埃尔和密克隆群岛: [-56.3251953125, 46.9599609375],
      圣多美和普林西比: [6.9462890625, 0.8828125],
      苏里南: [-56.03125, 3.91796875],
      斯洛伐克: [19.70263671875, 48.6845703125],
      斯洛文尼亚: [14.95849609375, 46.14599609375],
      瑞典: [17.65185546875, 62.21728515625],
      斯威士兰: [31.4541015625, -26.52587890625],
      塞舌尔: [55.46337890625, -4.671875],
      叙利亚: [39.06201171875, 34.8076171875],
      特克斯和凯科斯群岛: [-72.2392578125, 21.80517578125],
      乍得: [18.71435546875, 15.4765625],
      多哥: [0.84619140625, 8.60302734375],
      泰国: [101.5078125, 13.03125],
      塔吉克斯坦: [71.23876953125, 38.8662109375],
      土库曼斯坦: [59.55029296875, 38.97509765625],
      东帝汶: [125.6669921875, -8.82568359375],
      汤加: [-174.65771484375, -19.91357421875],
      特立尼达和多巴哥: [-61.4111328125, 10.455078125],
      突尼斯: [9.525390625, 33.78515625],
      土耳其: [35.2431640625, 38.962890625],
      坦桑尼亚: [34.89404296875, -6.35205078125],
      乌干达: [32.27734375, 1.37548828125],
      乌克兰: [31.12109375, 48.36669921875],
      乌拉圭: [-55.76220703125, -32.51953125],
      美国: [-99, 38],
      乌兹别克斯坦: [64.5546875, 41.3642578125],
      圣文森特和格林纳丁斯: [-61.203125, 13.2587890625],
      委内瑞拉: [-66.59814453125, 6.43359375],
      美属维尔京群岛: [-64.734375, 17.74853515625],
      越南: [105.78662109375, 15.9716796875],
      瓦努阿图: [168.0302734375, -16.666015625],
      萨摩亚: [-172.1162109375, -13.75537109375],
      也门: [48.5849609375, 15.658203125],
      南非: [27.15283203125, -34.54443359375],
      赞比亚: [27.82080078125, -13.1171875],
      津巴布韦: [29.1181640625, -19.02197265625],
      未明确地区1: [74.68017578125, 35.14501953125],
      未明确地区2: [76.48291015625, 33.89111328125]
  };
  

});

;sugar.define('sugar:widgets/charts/map/special-district.ts', function(require, exports, module, define) {

  "use strict";
  Object.defineProperty(exports, "__esModule", { value: true });
  exports.prefixCity = exports.needPrefixRepeatDistrict = void 0;
  // 与其他地级市重名的区县
  exports.needPrefixRepeatDistrict = {
      桥西区: ['石家庄', '张家口'],
      新华区: ['石家庄', '沧州', '平顶山'],
      城区: ['汕尾', '阳泉', '晋城'],
      和平区: ['天津', '沈阳'],
      铁西区: ['沈阳', '鞍山', '四平'],
      朝阳区: ['北京', '长春'],
      铁东区: ['鞍山', '四平'],
      向阳区: ['鹤岗', '佳木斯'],
      郊区: ['阳泉', '佳木斯', '铜陵'],
      宝山区: ['上海', '双鸭山'],
      鼓楼区: ['南京', '徐州', '福州', '开封'],
      通州区: ['北京', '南通'],
      海州区: ['连云港', '阜新'],
      普陀区: ['上海', '舟山'],
      西湖区: ['杭州', '南昌'],
      市中区: ['济南', '枣庄', '内江', '乐山'],
      河东区: ['天津', '临沂'],
      青山区: ['武汉', '包头'],
      永定区: ['张家界', '龙岩'],
      南山区: ['深圳', '鹤岗'],
      南沙区: ['广州', '三沙'],
      江北区: ['重庆', '宁波'],
      龙华区: ['深圳', '海口'],
      白云区: ['广州', '贵阳'],
      新城区: ['西安', '呼和浩特'],
      城关区: ['兰州', '拉萨'],
      城中区: ['西宁', '柳州'],
      东区: ['香港', '攀枝花'],
      长安区: ['西安', '石家庄']
  };
  // 需要的前缀名称城市
  exports.prefixCity = [
      '北京',
      '天津',
      '石家庄',
      '张家口',
      '沧州',
      '阳泉',
      '晋城',
      '呼和浩特',
      '包头',
      '沈阳',
      '鞍山',
      '阜新',
      '长春',
      '四平',
      '鹤岗',
      '双鸭山',
      '佳木斯',
      '上海',
      '南京',
      '徐州',
      '南通',
      '连云港',
      '杭州',
      '宁波',
      '舟山',
      '铜陵',
      '福州',
      '龙岩',
      '南昌',
      '济南',
      '枣庄',
      '临沂',
      '开封',
      '平顶山',
      '武汉',
      '张家界',
      '广州',
      '深圳',
      '汕尾',
      '柳州',
      '海口',
      '三沙',
      '重庆',
      '攀枝花',
      '内江',
      '乐山',
      '贵阳',
      '拉萨',
      '西安',
      '兰州',
      '西宁',
      '香港'
  ];
  

});

;sugar.define("sugar:widgets/charts/map/geo-coord.ts",function(a,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.autoFitMapTargetAndScope=e.getCoordsFromName=e.chinaProvinceMap=e.worldCountryMap=void 0;var i=a("sugar:node_modules/tslib/tslib.js"),n=a("sugar:widgets/charts/map/china-geo-coord.ts"),r=a("sugar:widgets/charts/map/world-geo-coord.ts"),o=a("sugar:widgets/charts/map/special-district.ts"),t=i.__assign(i.__assign({},r.default),n.default);e.worldCountryMap={Canada:"加拿大",Turkmenistan:"土库曼斯坦","Saint Helena":"圣赫勒拿","Lao PDR":"老挝",Laos:"老挝",Lithuania:"立陶宛",Cambodia:"柬埔寨",Ethiopia:"埃塞俄比亚","Faeroe Is.":"法罗群岛",Swaziland:"斯威士兰",Palestine:"巴勒斯坦",Belize:"伯利兹",Argentina:"阿根廷",Bolivia:"玻利维亚",Cameroon:"喀麦隆","Burkina Faso":"布基纳法索",Aland:"奥兰群岛",Bahrain:"巴林","Saudi Arabia":"沙特阿拉伯","Fr. Polynesia":"法属波利尼西亚","Cape Verde":"佛得角","W. Sahara":"西撒哈拉",Slovenia:"斯洛文尼亚",Guatemala:"危地马拉",Guinea:"几内亚","The Republic of Congo":"刚果金","Dem. Rep. Congo":"刚果金","Democratic Republic of the Congo":"刚果金","刚果（金）":"刚果金",Congo:"刚果","刚果（布）":"刚果",Germany:"德国",Spain:"西班牙",Liberia:"利比里亚",Netherlands:"荷兰",Jamaica:"牙买加",Greenland:"格陵兰","Dominican Republic":"多米尼加","Solomon Is.":"所罗门群岛",Oman:"阿曼",Tanzania:"坦桑尼亚","Costa Rica":"哥斯达黎加","Isle of Man":"曼岛",Gabon:"加蓬",Niue:"纽埃",Bahamas:"巴哈马","New Zealand":"新西兰",Yemen:"也门","也门共和国":"也门",Jersey:"泽西岛",Pakistan:"巴基斯坦",Albania:"阿尔巴尼亚",Samoa:"萨摩亚","Czech Rep.":"捷克","Czech Republic":"捷克","United Arab Emirates":"阿联酋","The United Arab Emirates":"阿联酋","阿拉伯联合酋长国":"阿联酋",Guam:"关岛",India:"印度",Azerbaijan:"阿塞拜疆","N. Mariana Is.":"北马里亚纳群岛","北马里亚纳群岛联邦":"北马里亚纳群岛",Lesotho:"莱索托",Kenya:"肯尼亚",Belarus:"白俄罗斯",Tajikistan:"塔吉克斯坦",Tajikstan:"塔吉克斯坦",Turkey:"土耳其",Afghanistan:"阿富汗",Bangladesh:"孟加拉国",Mauritania:"毛里塔尼亚","The Islamic Republic of Mauritania":"毛里塔尼亚","Dem. Rep. Korea":"朝鲜","Saint Lucia":"圣卢西亚","Br. Indian Ocean Ter.":"英属印度洋领地",Mongolia:"蒙古",France:"法国",Curacao:"库拉索岛","S. Sudan":"南苏丹",Rwanda:"卢旺达","Republic of Rwanda":"卢旺达",Slovakia:"斯洛伐克",Somalia:"索马里",Somali:"索马里",Peru:"秘鲁",Vanuatu:"瓦努阿图",Norway:"挪威",Malawi:"马拉维",Benin:"贝宁","St. Vin. and Gren.":"圣文森特和格林纳丁斯",Korea:"韩国",Singapore:"新加坡",Montenegro:"黑山共和国","Cayman Is.":"开曼群岛",Togo:"多哥",China:"中国","Heard I. and McDonald Is.":"赫德岛和麦克唐纳群岛",Armenia:"亚美尼亚","Falkland Is.":"马尔维纳斯群岛",Ukraine:"乌克兰",Ghana:"加纳",Tonga:"汤加",Finland:"芬兰",Libya:"利比亚",Indonesia:"印度尼西亚",Mauritius:"毛里求斯","Eq. Guinea":"赤道几内亚","The Republic of Equatorial Guinea":"赤道几内亚",Sweden:"瑞典",Vietnam:"越南",Mali:"马里",Russia:"俄罗斯",Bulgaria:"保加利亚","United States":"美国","United States of America":"美国",USA:"美国",Romania:"罗马尼亚",Angola:"安哥拉",Chad:"乍得","South Africa":"南非",Fiji:"斐济",Liechtenstein:"列支敦士登",Malaysia:"马来西亚",Austria:"奥地利",Mozambique:"莫桑比克",Uganda:"乌干达",Japan:"日本",Niger:"尼日尔",Brazil:"巴西",Kuwait:"科威特",Panama:"巴拿马",Guyana:"圭亚那","法属圭亚那":"圭亚那",Madagascar:"马达加斯加",Luxembourg:"卢森堡","American Samoa":"美属萨摩亚",Andorra:"安道尔",Ireland:"爱尔兰",Italy:"意大利",Nigeria:"尼日利亚","Turks and Caicos Is.":"特克斯和凯科斯群岛",Ecuador:"厄瓜多尔","U.S. Virgin Is.":"美属维尔京群岛",Brunei:"文莱",Australia:"澳大利亚",Iran:"伊朗",Algeria:"阿尔及利亚","El Salvador":"萨尔瓦多","The Republic of Côte d'Ivoire, La République de Côte d'Ivoire":"科特迪瓦","Ivory Coast":"科特迪瓦",Chile:"智利","Puerto Rico":"波多黎各",Belgium:"比利时",Thailand:"泰国",Haiti:"海地",Iraq:"伊拉克","The Democratic Republic of Sao Tome and Principe":"圣多美和普林西比","Sao Tome and Principe":"圣多美和普林西比","Sierra Leone":"塞拉利昂",Georgia:"格鲁吉亚",Denmark:"丹麦",Philippines:"菲律宾","S. Geo. and S. Sandw. Is.":"南乔治亚岛和南桑威奇群岛",Moldova:"摩尔多瓦",Morocco:"摩洛哥",Namibia:"纳米比亚",Malta:"马耳他","Guinea-Bissau":"几内亚比绍",Kiribati:"基里巴斯",Switzerland:"瑞士",Grenada:"格林纳达",Seychelles:"塞舌尔",Portugal:"葡萄牙",Estonia:"爱沙尼亚",Uruguay:"乌拉圭","Antigua and Barb.":"安提瓜和巴布达","Antigua and Barbuda":"安提瓜和巴布达",Lebanon:"黎巴嫩",Uzbekistan:"乌兹别克斯坦",Tunisia:"突尼斯",Djibouti:"吉布提","Timor-Leste":"东帝汶",Dominica:"多米尼克",Colombia:"哥伦比亚",Burundi:"布隆迪","布隆迪共和国":"布隆迪","Bosnia and Herz.":"波黑","Bosnia and Herzegovina":"波黑","波斯尼亚和黑塞哥维那":"波黑",Cyprus:"塞浦路斯","Northern Cyprus":"北塞浦路斯",Barbados:"巴巴多斯",Qatar:"卡塔尔",Palau:"帕劳",Bhutan:"不丹","Kingdom of Bhutan":"不丹",Sudan:"苏丹",Nepal:"尼泊尔",Micronesia:"密克罗尼西亚",Bermuda:"百慕大",Suriname:"苏里南",Venezuela:"委内瑞拉",Israel:"以色列","St. Pierre and Miquelon":"圣皮埃尔和密克隆群岛","Central African Rep.":"中非","Central African Republic":"中非","中非共和国":"中非",Iceland:"冰岛",Zambia:"赞比亚","赞比亚共和国":"赞比亚",Senegal:"塞内加尔","Papua New Guinea":"巴布亚新几内亚","Trinidad and Tobago":"特立尼达和多巴哥",Zimbabwe:"津巴布韦",Jordan:"约旦",Gambia:"冈比亚",Kazakhstan:"哈萨克斯坦",Poland:"波兰",Eritrea:"厄立特里亚",Kyrgyzstan:"吉尔吉斯斯坦",Montserrat:"蒙特塞拉特","New Caledonia":"新喀里多尼亚",Macedonia:"北马其顿","North Macedonia":"北马其顿","马其顿":"北马其顿",Paraguay:"巴拉圭",Latvia:"拉脱维亚",Hungary:"匈牙利",Syria:"叙利亚",Honduras:"洪都拉斯",Myanmar:"缅甸",Burma:"缅甸",Mexico:"墨西哥",Egypt:"埃及",Nicaragua:"尼加拉瓜",Cuba:"古巴",Serbia:"塞尔维亚","Republic of Serbia":"塞尔维亚",Comoros:"科摩罗","United Kingdom":"英国","大不列颠及北爱尔兰联合王国":"英国","北爱尔兰":"英国","Northern Ireland":"英国","Fr. S. Antarctic Lands":"南极洲",Greece:"希腊","Sri Lanka":"斯里兰卡",SriLanka:"斯里兰卡",Croatia:"克罗地亚",Botswana:"博茨瓦纳","Siachen Glacier":"锡亚琴冰川地区"},e.chinaProvinceMap={"河北省":"河北","山西省":"山西","辽宁省":"辽宁","吉林省":"吉林","黑龙江省":"黑龙江","江苏省":"江苏","浙江省":"浙江","安徽省":"安徽","福建省":"福建","江西省":"江西","山东省":"山东","河南省":"河南","湖北省":"湖北","湖南省":"湖南","广东省":"广东","海南省":"海南","四川省":"四川","贵州省":"贵州","云南省":"云南","陕西省":"陕西","甘肃省":"甘肃","青海省":"青海","台湾省":"台湾","内蒙":"内蒙古","内蒙古省":"内蒙古","内蒙古自治区":"内蒙古","广西省":"广西","广西壮族自治区":"广西","西藏省":"西藏","西藏自治区":"西藏","宁夏省":"宁夏","宁夏回族自治区":"宁夏","新疆省":"新疆","新疆维吾尔自治区":"新疆","香港特别行政区":"香港","澳门特别行政区":"澳门","北京市":"北京","天津市":"天津","上海市":"上海","重庆市":"重庆","京":"北京","津":"天津","冀":"河北","晋":"山西","蒙":"内蒙古","辽":"辽宁","吉":"吉林","黑":"黑龙江","沪":"上海","苏":"江苏","浙":"浙江","皖":"安徽","闽":"福建","赣":"江西","鲁":"山东","豫":"河南","鄂":"湖北","湘":"湖南","粤":"广东","桂":"广西","琼":"海南","蜀":"四川","川":"四川","贵":"贵州","黔":"贵州","云":"云南","滇":"云南","渝":"重庆","藏":"西藏","秦":"陕西","陕":"陕西","陇":"甘肃","甘":"甘肃","青":"青海","宁":"宁夏","新":"新疆","港":"香港","澳":"澳门","台":"台湾"};var s=function(a,r,s){void 0===r&&(r=""),void 0===s&&(s=!1),a.trim&&(a=a.trim());var l=t;if(s&&(l=i.__assign(i.__assign({},t),n.provinceGeoCoordSp)),r&&Object.keys(o.needPrefixRepeatDistrict).includes(a))return l[r+a];a=e.worldCountryMap[a]||e.chinaProvinceMap[a]||a||"";var u=l[a],c=a.substr(a.length-1);return u||"市"!==c&&"省"!==c&&"区"!==c&&"盟"!==c&&"县"!==c||(u=l[a.slice(0,a.length-1)]),c=a.substr(a.length-3),u||"自治区"!==c&&"自治县"!==c&&"自治州"!==c||(u=l[a.slice(0,a.length-3)]),u};e.getCoordsFromName=function(a,e){void 0===e&&(e="");var i=s(a,e);return i?i.slice(0,2):(console&&console.log&&console.log("解析经纬度错误："+a),null)},e.autoFitMapTargetAndScope=function(a,e){var i="world",n="world",r={},o={},t={},l=0,u=0,c=!1;"city"!==e&&"scatter"!==e||1!==a.length||(c=!0);for(var d=0,g=a;d<g.length;d++){var m=g[d],h=s(m,"",c);h&&5===h.length?(h[2]?o[h[2]]?o[h[2]]++:o[h[2]]=1:h[3]?r[h[3]]?r[h[3]]++:r[h[3]]=1:h[4]&&l++,h[3]&&(t[h[3]]?t[h[3]]++:t[h[3]]=1)):h&&2===h.length&&u++}var p=Object.keys(r),b=Object.keys(o),S=Object.keys(t);if("province"===e||"area"===e){if(l||b.length||p.length){var v=u;l>v&&(i="china",n="china",v=l);for(var C=0,y=p;C<y.length;C++){var M=y[C];r[M]>v&&(i=M,n="province",v=r[M])}for(var f=0,A=b;f<A.length;f++){var B=A[f];o[B]>=v&&(i=B,v=o[B],n="city")}}}else u||(i="china",n="china",1===b.length&&1===S.length?o[b[0]]>=t[S[0]]?(n="city",i=b[0]):(n="province",i=S[0]):1===S.length&&(n="province",i=S[0]));return{mapTarget:i,mapScope:n}}});
;sugar.define("sugar:widgets/charts/map-layer/event-handler.ts",function(e,r){"use strict";function a(e,r,a,n,i){if(void 0===i&&(i=""),e&&e[r]){var t=i+a.key;e[r][t]={order:a.order,itemParam:null,checked:!1,handler:n}}}function n(e,r,a,n,i,t){if(void 0===i&&(i=!1),void 0===t&&(t=""),e&&e[r]){var d=e[r],o=t+a.key;d[o]&&(d[o].checked=!0,d[o].itemParam=n);var u=!0;for(var v in d)if(!d[v].checked){u=!1;break}if(u){var c=[];for(var v in d)c.push(d[v]);c.sort(function(e,r){return-r.order+e.order});for(var f=null,l=[],h=0,s=c;h<s.length;h++){var v=s[h];v.itemParam&&!f?f=v:(f||!v.itemParam)&&(i?l.push(v):v.handler(null)),v.checked=!1}f&&f.handler(f.itemParam),i&&l.forEach(function(e){return e.handler(null)})}}}Object.defineProperty(r,"__esModule",{value:!0}),r.fireEvent=r.registEvent=void 0,r.registEvent=a,r.fireEvent=n});
;sugar.define("sugar:widgets/tooltip/tooltip.ts",function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ToolTip=void 0;var o=t("sugar:node_modules/xss/lib/index.js"),i=t("sugar:utils/xssOption.ts"),s=function(){function t(t){this._show=!1;var e=document.createElement("div");e.innerHTML="",e.classList.add("chart-tooltip"),t.appendChild(e),this.ele=e,this.arrow=null}return t.prototype.getToolTipEle=function(){return this.ele},t.prototype.getArrow=function(){return this.arrow},t.prototype.show=function(t,e){void 0!==t&&void 0!==e&&(this.ele.style.left=t+"px",this.ele.style.top=e+"px"),this.ele.style.display="block",this._show=!0},t.prototype.createArrow=function(){var t=document.createElement("div");return t.classList.add("tooltip-arrow"),this.ele.appendChild(t),this.arrow=t,t},t.prototype.setContent=function(t){this.ele.innerHTML=null==t?"":o(t,i.xssOption),this.arrow&&this.ele.appendChild(this.arrow)},t.prototype.moveTo=function(t,e){void 0!==t&&void 0!==e&&(this.ele.style.left=t+"px",this.ele.style.top=e+"px")},t.prototype.hide=function(){this.ele.style.display="none",this._show=!1},t.prototype.destroy=function(){this.ele.remove()},t.prototype.isShow=function(){return this._show},t}();e.ToolTip=s});
;sugar.define("sugar:widgets/charts/map/util.ts",function(e,a){"use strict";function t(e,a,t,o,r,l){void 0===l&&(l=!0);var s=e.data.rank,n=a[s];if(!n)return"";var p=t.unit||o.unit,d=t.sizeUnit||o.unit1,c=a.length,f=n.name,m=l?"<br>":"\n";if(!l&&"simple"===o.labelContentType)return f;if(void 0!==n.value){var h="";o.tipPercent&&(h="("+(parseFloat(n.value)/r*100).toFixed(2)+"%)"),f+=""+m+(t.valueName||i.default("散点颜色"))+": "+u.formatDataByType(n.value,t.dataFormat)+(p||"")+h}return void 0!==n.sizeValue&&(f+=""+m+(t.sizeValueName||i.default("散点大小"))+": "+u.formatDataByType(n.sizeValue,t.sizeDataFormat)+(d||"")),void 0!==n.type&&(f+=""+m+(t.typeName||i.default("散点系列"))+": "+n.type),n.tooltipValues&&n.tooltipValues instanceof Array&&n.tooltipValues.forEach(function(e,a){var o=t.tooltipNames,i=t.tooltipUnits,r=o&&o[a]?o[a]+": ":"",l=i&&i[a]?i[a]:"";f+=""+m+r+u.formatDataByType(e,t.tooltipDataFormats?t.tooltipDataFormats[a]:"")+l}),o.showRank&&void 0!==n.value&&(f=i.default("【第「"+(s+1)+"」名/「"+c+"」】")+(l||"simple"!==o.labelContentType?m:"")+f),f}function o(e,a,t,o,i){void 0===i&&(i="");var r=e.data?e.data.rank:e.rank,l=a[r];if(i){var s=i.match(/\{(.*?)\}/g);s&&s.length&&s.forEach(function(e){var a=e.slice(1,e.length-1).trim(),r="";if("value"===a)r=u.formatDataByType(l[a],t.dataFormat)||"-";else if("sizeValue"===a)r=u.formatDataByType(l[a],t.sizeDataFormat)||"-";else if("rank"===a)r=l[a]+1;else if("percent"===a)r=(parseFloat(l.value)/o*100).toFixed(2)+"%";else if(/tooltipValues\[\d+\]/g.test(a)){if(l.tooltipValues){var s=a.match(/\d+/);if(s){var n=parseInt(s[0]);r=u.formatDataByType(l.tooltipValues[n],t.tooltipDataFormats&&t.tooltipDataFormats[n])||"-"}}}else r=l[a]||"-";i=i.replace(e,r)})}return i}Object.defineProperty(a,"__esModule",{value:!0}),a.generateSeries=a.autoDefineLabelContent=a.getScatterLabelTooltip=a.exportCommon=a.convertData=a.transAreaColor=void 0;var i=e("sugar:utils/i18n.ts"),r=e("sugar:widgets/charts/map/geo-coord.ts"),l=e("sugar:node_modules/echarts/dist/echarts.js"),s=e("sugar:node_modules/lodash/cloneDeep.js"),n=e("sugar:widgets/charts/bar-pic/symbols.tsx"),u=e("sugar:utils/common-helper.ts");a.transAreaColor={type:"radial",x:.5,y:.5,r:.8,colorStops:[{offset:0,color:"rgba(147, 235, 248, 0.1)"},{offset:1,color:"rgba(147, 235, 248, .3)"}],globalCoord:!1},a.convertData=function(e,a,t,o,i){var s=[],n={};if(l&&l.getMap&&"china"!==a&&"world"!==a){var u=l.getMap(a),p=u&&u.geoJson?u.geoJson:null;p&&p.features&&p.features.map(function(e){if(e.properties&&e.properties.cp&&e.properties.name){var a=e.properties.cp,t=e.properties.name;n[t]=a,/(自治区|自治县|自治州)$/.test(t)?n[t.slice(0,-3)]=a:["市","区","县","盟"].includes(t[t.length-1])&&(n[t.slice(0,-1)]=a)}})}return e.forEach(function(e){var a={name:e.name,itemStyle:e.itemStyle,rank:e.rank};if(e.coord&&e.coord instanceof Array)a.value=e.coord.concat(e.value,e.sizeValue);else{var l=null;n[e.name]&&(l=n[e.name]),l||(l=r.getCoordsFromName(e.name,t.prefix)||[0,0]),a.value=l.concat(e.value,e.sizeValue)}var u=t.scatterSlide&&t.topCityNum||t.scatterSlideAll;if(t.showInfoUseLabel){if(t.showMMCityLabel){var p=void 0!==o&&void 0!==i&&void 0!==e.value&&[o,i].includes(+e.value);a.label={normal:{show:p},emphasis:{show:!0}}}u&&(a.label={normal:{show:!1},emphasis:{show:!0,opacity:t.hideNoSlideScatter?1:void 0}})}u&&t.hideNoSlideScatter&&(a.itemStyle={normal:{opacity:0},emphasis:{opacity:1}}),s.push(a)}),s},a.exportCommon=function(e){var a=[];if(e&&e.data){var t=void 0;t=e.data instanceof Array?e.data:e.data.mapData,t&&t.length&&t.forEach(function(t,o){var r=[];if(0===o){var l=[];l.push(i.default("名称")),void 0!==t.value&&l.push(e.data.valueName||i.default("散点颜色")),void 0!==t.sizeValue&&l.push(e.data.sizeValueName||i.default("散点大小")),void 0!==t.type&&l.push(e.data.typeName||i.default("散点系列")),t.coords instanceof Array&&l.push(i.default("经度"),i.default("纬度")),void 0!==t.tooltipValues&&t.tooltipValues instanceof Array&&t.tooltipValues.forEach(function(a,t){l.push(e.data.tooltipNames&&e.data.tooltipNames[t]?e.data.tooltipNames[t]:i.default("附加数据「"+(t+1)+"」"))}),a.push(l)}r.push(t.name),void 0!==t.value&&r.push(t.value),void 0!==t.sizeValue&&r.push(t.sizeValue),void 0!==t.type&&r.push(t.type),t.coords instanceof Array&&r.push.apply(r,t.coord),void 0!==t.tooltipValues&&t.tooltipValues instanceof Array&&t.tooltipValues.forEach(function(e){r.push(e)}),a.push(r)})}return a},a.getScatterLabelTooltip=t,a.autoDefineLabelContent=o,a.generateSeries=function(e,a,t,o,r){if(t.autoSymbolType&&t.symbols&&t.symbols.length){var l=t.symbols.filter(function(e){return e.type!==i.default("默认形状")}),u=t.symbols.find(function(e){return e.type===i.default("默认形状")});l.forEach(function(i){var l=a.filter(function(e){return e.type===i.type});if(l.length){var u=s(o);u.name=r+"-"+i.type,l.forEach(function(a,t){a.seriesName=u.name,a.seriesIndex=e.length,a.dataIndex=t}),u.symbol=i.imgUrl?i.imgUrl.startsWith("/api/image")?"image://"+location.protocol+"//"+(location.host+i.imgUrl):"image://"+i.imgUrl:n.default[i.shape||t.symbolType||"circle"],u.data=l,e.push(u)}});var p=a.filter(function(e){return!l.map(function(e){return e.type}).includes(e.type)});if(p.length){var d=s(o);d.name=r+"-default",p.forEach(function(a,t){a.seriesName=d.name,a.seriesIndex=e.length,a.dataIndex=t}),d.symbol=u?u.imgUrl?u.imgUrl.startsWith("/api/image")?"image://"+location.protocol+"//"+(location.host+u.imgUrl):"image://"+u.imgUrl:n.default[u.shape||t.symbolType||"circle"]:n.default[t.symbolType||"circle"],d.data=p,e.push(d)}}else a.forEach(function(a,t){a.seriesName=o.name,a.seriesIndex=e.length,a.dataIndex=t}),o.data=a,e.push(o)}});
;sugar.define("sugar:widgets/charts/map-layer/scatter/scatter.tsx",function(e,t){"use strict";function a(e,t,a,s,l){return h.__awaiter(this,void 0,void 0,function(){function d(){M.forEach(function(e,t){var a=ct[t],o=a.geometry.coordinates,n=u.pointToPixel(new BMap.Point(o[0],o[1]));e.show(n.x,n.y),i(e,a.size,E.scatterFontPos,E.tooltipBorderColor)})}var u,c,m,v,y,S,_,C,P,T,L,N,M,k,E,I,D,V,F,U,B,A,j,O,W,R,K,q,G,H,J,Q,X,Y,Z,$,et,$,tt,at,ot,it,nt,rt,J,st,lt,dt,ut,ct,pt,ht,ft,ht,gt,mt,vt,yt,zt,St,wt,bt,xt;return h.__generator(this,function(_t){switch(_t.label){case 0:return u=t.map,c=t.layersMap,m=t.eventMap,v=t.container,y=t.mainTooltip,S=c[a]||{},_=S.scatterShapeDataSet||new mapv.DataSet([]),C=S.scatterIconDataSet||new mapv.DataSet([]),P=S.scatterShapeLayer||new mapv.baiduMapLayer(u,_,{}),T=S.scatterIconLayer||new mapv.baiduMapLayer(u,C,{}),L=S.textDataSet||new mapv.DataSet([]),N=S.textLayer||new mapv.baiduMapLayer(u,L,{}),M=S.labelLayer||[],k=S.sliderToolTip||[],c[a]&&c[a].sliderIntervelFlag&&clearInterval(c[a].sliderIntervelFlag),c[a]={scatterShapeDataSet:_,scatterIconDataSet:C,scatterShapeLayer:P,scatterIconLayer:T,textDataSet:L,textLayer:N,labelLayer:M,sliderToolTip:k},E=s.config,I=[],D={},l&&"done"===l.loadState&&l.data&&(D=g(l.data),I=D.mapData),I&&I instanceof Array?(V=x(I),V!==!0?(b.toast.error(f.default("「"+e.chart.name+"」中子图表「"+s.name+"」数据格式错误：「"+V+"」")),[2]):(I.sort(function(e,t){return parseFloat(e.value)>parseFloat(t.value)?-1:1}),F=I.length,U=-1/0,B=1/0,A=-1/0,j=1/0,O=!1,W=!1,R=0,K=[],I.forEach(function(e,t){if(void 0!==e.value&&!isNaN(+e.value)){O=!0;var a=parseFloat(e.value)||0;a>U&&(U=a),B>a&&(B=a),R+=a}if(void 0!==e.sizeValue&&!isNaN(+e.sizeValue)){W=!0;var a=parseFloat(e.sizeValue)||0;a>A&&(A=a),j>a&&(j=a)}e.rank=t}),O?B===U&&B--:(B=0,U=0),W?j===A&&j--:(j=0,A=0),q=null,[4,r(I,E,W,j,A)])):[2];case 1:if(K=_t.sent(),t.points){for(t.points[a]=[],G=0,H=K;G<H.length;G++)J=H[G],Q=J.geometry.coordinates,t.points[a].push(new BMap.Point(Q[0],Q[1]));t.autoComputMapStatus()}if(X=K.filter(function(e){return e.symbol}),Y=K.filter(function(e){return e.icon}),X.length&&(Z={lineWidth:E.strokeWidth||0,strokeStyle:E.strokeColor||"#4a6671"},$="shape",O?"piecewise"===E.vMapType&&E.vMapPieces&&E.vMapPieces.length?(et=E.vMapPieces.map(function(e){var t={};return""===e.begin||isNaN(e.begin)||(t.start=+e.begin),""===e.end||isNaN(e.end)||(t.end=+e.end),e.color&&(t.value=e.color),t}),Z=h.__assign(h.__assign({},Z),{max:U,min:B,draw:"choropleth",splitList:et})):Z=h.__assign(h.__assign({},Z),{gradient:n(e,E),max:U,min:B,draw:"intensity"}):Z=h.__assign(h.__assign({},Z),{fillStyle:E.scatterColor||"#1ca2a8",globalCompositeOperation:E.blend?"lighter":void 0,draw:"simple"}),p(m,s,X,P,_,Z,$,q,u,E,t,y,R,F,I,D,a)),Y.length&&($="icon",tt={draw:"icon"},p(m,s,Y,T,C,tt,$,q,u,E,t,y,R,F,I,D,a)),!E.showInfoUseLabel&&E.showProvinceName){for(at=E.textSize||12,ot=[],it={draw:"text",avoid:!!E.avoid,size:at,font:"Arial",fillStyle:E.textColor||"black"},nt=0,rt=K;nt<rt.length;nt++)J=rt[nt],st={x:0,y:0},lt=J.name.length/2*at,dt=at/2,ut=J.size*(E.textOffset||10)/10,"right"===E.textPlace?st.x=lt+ut:"left"===E.textPlace?st.x=-lt-ut:"top"===E.textPlace?st.y=-dt-ut:"bottom"===E.textPlace&&(st.y=dt+ut),ot.push({geometry:{type:"Point",coordinates:J.geometry.coordinates},text:J.name,offset:st});L.set(ot),N.update({options:it}),N.draw()}if(ct=[],M.length&&(M.forEach(function(e){return e.destroy()}),M.length=0),k.length&&(k.forEach(function(e){return e.destroy()}),k.length=0),E.openSlider)if(E.showInfoUseLabel&&E.topSlideNum>1)for(pt=Math.min(E.topSlideNum,I.length,E.topCoslCnt),ht=0;pt>ht;ht++)k.push(new z.ToolTip(v.parentElement||v));else k.push(new z.ToolTip(v.parentElement||v));if(E.showInfoUseLabel&&K.length&&!E.openSlider){if(E.showMMCityLabel)O&&K.forEach(function(e){if([B,U].includes(e.count)){var t=new z.ToolTip(v.parentElement||v),a=e.geometry.coordinates,n=u.pointToPixel(new BMap.Point(a[0],a[1]));n&&(t.setContent(o(e,E,R,F,I,D,!E.showInfoUseLabel)),t.show(n.x,n.y),i(t,e.size,E.scatterFontPos,E.tooltipBorderColor)),ct.push(e),M.push(t)}});else for(ft=Math.min(E.topCityNum,I.length),ht=0;ft>ht;ht++)gt=new z.ToolTip(v.parentElement||v),mt=K[ht],vt=mt.geometry.coordinates,yt=u.pointToPixel(new BMap.Point(vt[0],vt[1])),yt&&(gt.setContent(o(mt,E,R,F,I,D,!E.showInfoUseLabel)),gt.show(yt.x,yt.y),i(gt,mt.size,E.scatterFontPos,E.tooltipBorderColor)),ct.push(mt),M.push(gt);u.addEventListener("moving",d),u.addEventListener("moveend",d),u.addEventListener("zoomend",d)}else u.removeEventListener("moving",d),u.removeEventListener("moveend",d),u.removeEventListener("zoomend",d);return E.openSlider&&I.length&&E.topCoslCnt&&(zt=-1,St=null,wt=[],bt=w(t,"_handleDependence"),xt=function(){if(E.showInfoUseLabel&&E.topSlideNum>1){for(var e=[],t=Math.min(E.topSlideNum,I.length,E.topCoslCnt),n=0;t>n;n++)zt++,zt>Math.min(I.length,E.topCoslCnt)-1&&(zt=0),e.push(zt);if(wt.length&&!E.hideNoSlideScatter&&(wt.forEach(function(e){e.size=e.sizeStandard,e.width=e.sizeStandard,e.height=e.sizeStandard,e.fillStyle=""}),wt.length=0),e.forEach(function(e,t){var a=K[e];!E.hideNoSlideScatter&&wt.push(a),E.highlightColor&&(a.fillStyle=E.highlightColor),a.size<=a.sizeStandard&&(a.size=1.3*a.sizeStandard,a.width=1.3*a.sizeStandard,a.height=1.3*a.sizeStandard);var n=a.geometry.coordinates,r=u.pointToPixel(new BMap.Point(n[0],n[1]));r&&(k[t].setContent(o(a,E,R,F,I,D,!E.showInfoUseLabel)),k[t].show(r.x,r.y),i(k[t],a.size,E.scatterFontPos,E.tooltipBorderColor))}),E.hideNoSlideScatter){var r=X.filter(function(t){return e.includes(t.rank)}),s=Y.filter(function(t){return e.includes(t.rank)});_.set(r),C.set(s)}}else{zt++,zt>Math.min(I.length,E.topCoslCnt)-1&&(zt=0);var l=K[zt],d=I[zt];St&&(St.size=St.sizeStandard,St.width=St.sizeStandard,St.height=St.sizeStandard,St.fillStyle="");var c=k[0];if(l){St=l,E.highlightColor&&(l.fillStyle=E.highlightColor),l.size<=l.sizeStandard&&(l.size=1.3*l.sizeStandard,l.width=1.3*l.sizeStandard,l.height=1.3*l.sizeStandard);var p=l.geometry.coordinates,f=u.pointToPixel(new BMap.Point(p[0],p[1]));if(f&&(c.setContent(o(l,E,R,F,I,D,!E.showInfoUseLabel)),c.show(f.x,f.y),i(c,l.size,E.scatterFontPos,E.tooltipBorderColor)),E.openSlider&&E.openSlideDep&&bt({fireKey:a,dataIndex:l.rank},h.__assign(h.__assign({},d),{_sugar_dd_default_:d.name_sugar_origin||d.name})),E.hideNoSlideScatter){var r=X.filter(function(e){return e.rank===l.rank}),s=Y.filter(function(e){return e.rank===l.rank});_.set(r),C.set(s)}}}P.draw(),T.draw()},xt(),c[a].sliderIntervelFlag=setInterval(xt,1e3*(parseInt(E.slideInterval,10)||3))),[2]}})})}function o(e,t,a,o,i,n,r){void 0===r&&(r=!0);var s=e.name;if(r||"normal"===t.labelContentType){if(e.count||a){var l="";t.tipPercent&&(l="("+(parseFloat(e.count)/a*100).toFixed(2)+"%)");var d=y.formatDataByType(e.count,n.dataFormat)+(n.unit||t.unit||"")+l;s+="<br> "+(n.valueName||f.default("散点颜色"))+": "+d}void 0!==e.sizeValue&&(s+="<br>"+(n.sizeValueName||f.default("散点大小"))+": "+y.formatDataByType(e.sizeValue,n.sizeDataFormat)+(n.sizeUnit||t.unit1||"")),void 0!==e.type&&(s+="<br>"+(n.typeName||f.default("散点系列"))+": "+e.type),e&&e.tooltipValues&&e.tooltipValues instanceof Array&&e.tooltipValues.forEach(function(e,t){var a=n.tooltipNames&&n.tooltipNames[t]?n.tooltipNames[t]+": ":"",o=n.tooltipUnits&&n.tooltipUnits[t]?n.tooltipUnits[t]:"";s+="<br>"+a+y.formatDataByType(e,n.tooltipDataFormats?n.tooltipDataFormats[t]:"")+o}),t.showRank&&(e.count||a)&&(s=f.default("【第「"+(e.rank+1)+"」名/「"+o+"」】<br>")+s)}else"auto"===t.labelContentType&&(s=S.autoDefineLabelContent(e,i,n,a,t.autoLabelContent));return'<div class="tooltip-content" style="font-size:'+t.tooltipFontSize+"px;line-height:1.3;color:"+t.tooltipFontColor+";background:"+t.tooltipBackground+";border:"+t.tooltipBorderWidth+"px solid "+t.tooltipBorderColor+'">'+s+"</div>"}function i(e,t,a,o){var i=e.getToolTipEle(),n=e.getArrow()||e.createArrow(),r=i.getBoundingClientRect(),s=r.width,l=r.height,d=8,u=5,c=t-5,p=s/2-t,h=l/2-t,f="",g="";switch(a){case"top":f="translate("+(-c-p)+"px, "+(-c-l-d)+"px)",g="translate("+(s/2-u)+"px, 0) rotate(90deg)";break;case"bottom":f="translate("+(-c-p)+"px, "+(-c+2*t+d)+"px)",g="translate("+(s/2-u)+"px, "+(-l-2*u)+"px) rotate(-90deg)";break;case"left":f="translate("+(-c-s-d)+"px, "+(-c-h)+"px)",g="translate("+s+"px, "+(-l/2-u)+"px)";break;case"right":f="translate("+(-c+2*t+d)+"px, "+(-c-h)+"px)",g="translate("+2*-u+"px, "+(-l/2-u)+"px) rotate(180deg)"}i.style.transform=f,n.style.transform=g,n.style.borderLeftColor=o}function n(e,t){var a,o=["#1a9850","#91cf60","#d9ef8b","#fee08b","#fc8d59","#d73027"],i=e.theme;"report"===t.customColorType?(o=(null===(a=i.config.chartTheme)||void 0===a?void 0:a.color)||o,o=o.slice(0,4)):"custom"===t.customColorType&&t.customColors&&t.customColors.length&&(o=t.customColors.map(function(e){return e.color})),o=o.filter(function(e){return!!e}),t.colorReverse&&o.reverse();for(var n=1/o.length,r={},s=0;s<o.length;s++)s===o.length-1?r[1]=o[s]:r[(n*s).toFixed(4)]=o[s];return r}function r(e,t,a,o,i){return h.__awaiter(this,void 0,void 0,function(){var n,r;return h.__generator(this,function(d){switch(d.label){case 0:return n=[],r=[],t.autoSymbolType&&t.symbols&&t.symbols.length?(r=g(t.symbols),[4,l(r)]):[3,2];case 1:d.sent(),d.label=2;case 2:return e.forEach(function(e){var l={name:e.name,type:e.type,geometry:{type:"Point"},count:e.value||0,rank:e.rank};if(e.tooltipValues&&(l.tooltipValues=e.tooltipValues),e.coord&&e.coord instanceof Array)l.geometry.coordinates=e.coord;else{var d=m.getCoordsFromName(e.name,t.prefix)||[0,0];l.geometry.coordinates=d}a&&void 0!==e.sizeValue&&!isNaN(+e.sizeValue)?(l.size=u(void 0===t.minSize?10:t.minSize,void 0===t.maxSize?20:t.maxSize,o,i,+e.sizeValue),l.width=l.size,l.height=l.size,l.sizeValue=e.sizeValue):(l.size=t.symbolSize||20,l.width=l.size,l.height=l.size),l.sizeStandard=l.size,r.length?s(r,e.type,l,t.symbolType):l.symbol=t.symbolType||"circle",n.push(l)}),[2,n]}})})}function s(e,t,a,o){var i=e.find(function(e){return e.type===t}),n=e.find(function(e){return e.type===f.default("默认形状")});i?i.imgUrl?a.icon=i.image:a.symbol=i.shape||o||"circle":n?n.imgUrl?a.icon=n.image:a.symbol=n.shape||o||"circle":a.symbol=o||"circle"}function l(e){return h.__awaiter(this,void 0,void 0,function(){var t,a,o,i,n;return h.__generator(this,function(r){switch(r.label){case 0:t=0,a=e,r.label=1;case 1:return t<a.length?(o=a[t],o.imgUrl?(i=o.imgUrl.startsWith("/api/image")?location.protocol+"//"+(location.host+o.imgUrl):o.imgUrl,n=o,[4,d(i)]):[3,3]):[3,4];case 2:n.image=r.sent(),r.label=3;case 3:return t++,[3,1];case 4:return[2]}})})}function d(e){return new Promise(function(t){var a=new Image;a.onload=function(){return t(a)},a.src=e})}function u(e,t,a,o,i){if(e>t){var n=e;e=t,t=n}var r=t-e,s=o-a,l=i-a;return l/s*r+e}function c(e,t,a,o,i,n,r){if(e){var s=t[e.rank];a.fireDrillDownOrDependence({fireKey:o,dataIndex:e.rank},h.__assign(h.__assign({},s),{_sugar_dd_default_:s.hasOwnProperty("_sugar_extra")?s._sugar_extra:s.name_sugar_origin||s.name}))}i&&(i.size=i.sizeStandard,i.width=i.sizeStandard,i.height=i.sizeStandard,i.fillStyle="",n.draw(),r.hide())}function p(e,t,a,i,n,r,s,l,d,u,p,h,f,g,m,z,S){r.methods={click:function(a){y.isMobile||v.fireEvent(e,"click",t,a,!0,s)},mousemove:function(a){v.fireEvent(e,"mousemove",t,a,!1,s)},tap:function(a){v.fireEvent(e,"tap",t,a,!0,s)}},v.registEvent(e,"mousemove",t,function(e){if(l&&(l.size=l.sizeStandard,l.width=l.sizeStandard,l.height=l.sizeStandard,l.fillStyle=""),e){l=e,d.setDefaultCursor("pointer"),u.highlightColor&&(e.fillStyle=u.highlightColor),e.size<=e.sizeStandard&&(e.size=1.3*e.sizeStandard,e.width=1.3*e.sizeStandard,e.height=1.3*e.sizeStandard);var t=p.getMousePosition();t&&(h.setContent(o(e,u,f,g,m,z,!u.showInfoUseLabel)),h.show(t.x+10,t.y+10))}else d.setDefaultCursor("default"),h.hide();i.draw()},s),v.registEvent(e,"click",t,function(e){c(e,m,p,S,l,i,h)},s),v.registEvent(e,"tap",t,function(e){if(c(e,m,p,S,l,i,h),e){u.highlightColor&&(e.fillStyle=u.highlightColor),e.size<=e.sizeStandard&&(e.size=1.3*e.sizeStandard,e.width=1.3*e.sizeStandard,e.height=1.3*e.sizeStandard),i.draw();var t=e.geometry.coordinates,a=d.pointToPixel(new BMap.Point(t[0],t[1]));a&&(h.setContent(o(e,u,f,g,m,z,!u.showInfoUseLabel)),h.show(a.x+10,a.y+10))}else h.hide()},s),n.set(a),i.update({options:r}),i.draw()}Object.defineProperty(t,"__esModule",{value:!0}),t.getSize=t.generateImage=void 0;var h=e("sugar:node_modules/tslib/tslib.js"),f=e("sugar:utils/i18n.ts"),g=e("sugar:node_modules/lodash/cloneDeep.js"),m=e("sugar:widgets/charts/map/geo-coord.ts"),v=e("sugar:widgets/charts/map-layer/event-handler.ts"),y=e("sugar:utils/common-helper.ts"),z=e("sugar:widgets/tooltip/tooltip.ts"),S=e("sugar:widgets/charts/map/util.ts"),w=e("sugar:node_modules/lodash/get.js"),b=e("sugar:node_modules/amis/lib/index.js");t.default=a,t.generateImage=d,t.getSize=u;var x=function(e){for(var t=0;t<e.length;t++){var a=e[t];if(!a.name)return f.default("第「"+(t+1)+"」项数据中没有名称name字段");if("string"!=typeof a.name)return f.default("第「"+(t+1)+"」项数据中名称name字段不是字符串");if(void 0!==a.value&&!y.isNumberic(a.value))return f.default("第「"+(t+1)+"」项数据中value取值不是数字类型");if(void 0!==a.sizeValue&&!y.isNumberic(a.sizeValue))return f.default("第「"+(t+1)+"」项数据中sizeValue取值不是数字类型");if(void 0!==a.type&&!["string","number"].includes(typeof a.type))return f.default("第「"+(t+1)+"」项数据中type取值不是数字类型也是不字符串");if(void 0!==a.tooltipValues&&!(a.tooltipValues instanceof Array))return f.default("第「"+(t+1)+"」项数据中tooltipValues字段不是数组类型")}return!0}});
;sugar.define("sugar:widgets/charts/scatter/scatter.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=e("sugar:node_modules/tslib/tslib.js"),r=e("sugar:utils/i18n.ts"),i=e("sugar:node_modules/react/index.js"),o=e("sugar:node_modules/echarts-stat/index.js"),n=e("sugar:node_modules/tinycolor2/tinycolor.js"),s=e("sugar:widgets/charts/chart-manager.tsx"),l=e("sugar:widgets/charts/scatter/scatter-ctrl.tsx"),d=e("sugar:widgets/charts/_hoc/echarts.tsx"),c=e("sugar:node_modules/react-mixin/index.js"),u=e("sugar:node_modules/lodash/merge.js"),g=e("sugar:widgets/charts/_mixin/echarts.tsx"),m=e("sugar:widgets/charts/_hoc/debug/debug.tsx"),h=e("sugar:widgets/charts/_hoc/drill-down/drill-down.tsx"),f=e("sugar:widgets/charts/_hoc/toolbar/toolbar.tsx"),p=e("sugar:widgets/charts/_hoc/chart-zoom/index.tsx"),v=e("sugar:node_modules/lodash/cloneDeep.js"),y=e("sugar:utils/common-helper.ts"),x=e("sugar:utils/export-file/export-csv.ts"),S=e("sugar:utils/export-file/export-excel.ts"),b=e("sugar:widgets/charts/utils/helper.ts"),w=e("sugar:utils/animation.ts"),C=e("sugar:widgets/charts/map-layer/scatter/scatter.tsx"),z=e("sugar:widgets/charts/utils/common.tsx"),_=12,L=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.getDrillDownParam=function(e){return{name:e.seriesName||"",value:e.value,category:e.name,_sugar_dd_default_:e.name}},t.prototype.getDependenceParam=function(e){return{item:this.getDrillDownParam(e),state:{seriesIndex:e.seriesIndex,dataIndex:e.dataIndex}}},t.prototype.refresh=function(e){var t=e.chartData,r=e.chartConfig,i=e.chart,s=e.hub,l=e.theme,d=v(t),c=0,g=0,m=0,h=0,f=!1,p=0,x=!1,S=0;"number"==typeof d.sizeValueIndex&&d.sizeValueIndex>=0&&(f=!0,p=d.sizeValueIndex),"number"==typeof d.colorValueIndex&&d.colorValueIndex>=0&&(x=!0,S=d.colorValueIndex),(f||x)&&d.series.forEach(function(e,t){e.data&&e.data.forEach(function(e,a){if(f){var r=parseFloat(e.value[p]);t||a?(r>c&&(c=r),g>r&&(g=r)):c=g=r}if(x){var r=parseFloat(e.value[S]);t||a?(r>m&&(m=r),h>r&&(h=r)):m=h=r}})});var L=[];if(d.series.forEach(function(e,t){var a;e.name&&L.push(e.name),e.type="scatter";var i=r.openCustomSeries?(null===(a=r.seriesConfig)||void 0===a?void 0:a[e.name])||{}:{};if(r.chartLabel||r.showNameLabel||i.showNameLabel){var o=r.labelFontSize||r.labelSize;i.showNameLabel&&i.labelSize&&(o=i.labelSize),e.label={show:!0,color:i.labelColor||r.labelColor||"inherit",fontSize:o||15,fontFamily:r.labelFontFamily||null,position:r.labelPosition||"top",formatter:function(e){var t;return e.name||(null===(t=e.value)||void 0===t?void 0:t[2])}}}if(s.dependenceData.dependenceState){var n=s.dependenceData.dependenceState,l=n.seriesIndex,m=n.dataIndex;l===t?e.data=e.data.map(function(e,t){return e.itemStyle={opacity:t===m?1:.3},e}):e.itemStyle={opacity:.3}}else e.itemStyle={opacity:.7};if(r.openCustomShadow&&r.shadowBlur&&(e.itemStyle=u({},e.itemStyle,{shadowBlur:r.shadowBlur,shadowColor:r.shadowColor||"rgba(0, 0, 0, 0.5)",shadowOffsetX:r.shadowOffsetX||0,shadowOffsetY:r.shadowOffsetY||0})),r.openCustomSeries&&i){var h={};i.color&&(h.color=i.color),i.borderType&&(h.borderType=i.borderType),i.borderWidth&&(h.borderWidth=i.borderWidth),i.borderColor&&(h.borderColor=i.borderColor),e.itemStyle=u({},e.itemStyle,h)}d.needCaclSize&&e.data&&e.data.forEach(function(e){var t=r.staticSize||10;if(f){var a=parseFloat(e.value[p])||0;t=C.getSize(r.minSize||5,r.maxSize||30,g,c,a)}e.symbolSize=t})}),r.showRegression){var D=[];d.series.forEach(function(e,t){var a;if(0!==e.data.length){var i;i=Array.isArray(e.data[0])?e.data:e.data.map(function(e){return e.value.slice(0,2)});var s;s="polynomial"===r.regressionType?o.regression(r.regressionType,i,r.polynomialDegree):o.regression(r.regressionType,i),s.points.sort(function(e,t){return e[0]-t[0]});var d,c=(null===(a=l.config.chartTheme)||void 0===a?void 0:a.color)||[];if(c&&c.length){var u=c[t%c.length];d=n(u).darken(20).toString()}D.push({name:"line",type:"line",showSymbol:!1,data:s.points,lineStyle:{color:d||"#000"},markPoint:{itemStyle:{color:"transparent"},label:{show:r.showRegressionFunc||!1,position:"left",formatter:s.expression,textStyle:{color:"#333",fontSize:14}},data:[{coord:s.points[s.points.length-1]}]}})}}),d.series=d.series.concat(D)}var F,B,M=i.isDashChart?"#ccc":"#333";r.openCustomColor&&(F=r.textColor,B=r.lineColor),F=F||M,B=B||M;var N=d.target||[],R=this.chart.getWidth(),A=this.chart.getHeight(),I=b.handleGrid(r,{marginTop:20,marginBottom:55,marginLeft:80,marginRight:35,chartWidth:R,chartHeight:A}),O=I.marginTop,E=I.marginBottom,V=I.marginLeft,W=I.marginRight,j=b.calcuGridByLegend({marginLeft:V,marginBottom:E,marginRight:W,marginTop:O},r);E=j.marginBottom,V=j.marginLeft,W=j.marginRight,O=j.marginTop;var P={textStyle:b.getTextStyle(r),tooltip:{trigger:"item",confine:r.tooltipConfine||!1,extraCssText:z.getTooltipCss(r),formatter:function(e){var t=e.value,a=e.seriesName||"",r=e.data.name||"",i=""+(!a||d.series.length<2&&!d.series[0].name||a===r?"":a+(r?"--":""))+r+"<br/>";if("<br/>"===i&&(i=""),t){var o=t.map(function(e,t){var a=N[t]||"",r=d.targetUnit?d.targetUnit[t]:"",i=d.targetDataFormat?d.targetDataFormat[t]:"";return(a||"")+": "+y.formatDataByType(e,i)+(r||"")});return o=o.filter(function(e,t){return o.indexOf(e)===t}),i+o.join("<br/>")}return i}},toolbox:{show:!1},legend:a.__assign(a.__assign({},b.legendPositionConfig({marginLeft:V,marginBottom:E,marginRight:W,marginTop:O},r)),{show:!!r.chartLegend&&!!L.length,textStyle:{color:r.legendTextColor||F,fontFamily:r.legendFontFamily||null,fontSize:r.legendFontSize||_},data:L}),grid:{left:V,top:O,right:W,bottom:E},xAxis:{type:"value",name:r.xName||d.xName||"",scale:r.chartScale,nameGap:8,nameTextStyle:{color:F,fontSize:14},splitLine:{show:!!r.chartSplitLineX,lineStyle:{color:r.splitLineColors||"#ddd"}},splitArea:{show:!!r.chartSplitLineX},axisLine:{show:!0,lineStyle:{color:B}},axisLabel:{color:F,fontSize:r.xFontSize||_,formatter:function(e){var t=d.targetUnit?d.targetUnit[0]:"",a=d.targetDataFormat?d.targetDataFormat[0]:"";return""+y.formatDataByTypeOrWithMagnitude(e,a)+(t?" "+t:"")}}},yAxis:{type:"value",name:r.yName||d.yName||"",scale:r.chartScale,nameGap:8,nameTextStyle:{color:B,fontSize:14},min:null,max:null,splitLine:{show:!!r.chartSplitLineY,lineStyle:{color:r.splitLineColors||"#ddd"}},splitArea:{show:!!r.chartSplitLineY},axisLine:{show:!0,lineStyle:{color:B}},axisLabel:{color:F,fontSize:r.yFontSize||_,formatter:function(e){var t=d.targetUnit?d.targetUnit[1]:"",a=d.targetDataFormat?d.targetDataFormat[1]:"";return""+y.formatDataByTypeOrWithMagnitude(e,a)+(t?" "+t:"")}}},series:d.series};if("string"==typeof d.series[0].data[0].value[0]||d.xAsCategroy){for(var U=[],X=0;X<d.series.length;X++)if(d.series[X].data&&d.series[X].data.length)for(var Y=0;Y<d.series[X].data.length;Y++)d.series[X].data[Y].value&&d.series[X].data[Y].value.length&&!~U.indexOf(d.series[X].data[Y].value[0])&&(U.push(d.series[X].data[Y].value[0]),d.series[X].data[Y].value[0]=""+d.series[X].data[Y].value[0]);"number"!=typeof U[0]||isNaN(U[0])?U.sort():U.sort(function(e,t){return e-t}),"desc"===d.xSort&&U.reverse(),"string"!=typeof U[0]&&(U=U.map(function(e){return""+e})),P.xAxis=a.__assign(a.__assign({},P.xAxis),{type:"category",axisLabel:{color:F,fontSize:r.xFontSize||_},data:U})}r.openCustomColor&&r.customColors&&r.customColors.length&&(P.color=r.customColors.map(function(e){return e.color}));var G=[],H=!1,k=!1;x&&h!==m&&(H=!(!d.showVisualMap||"color"!==d.visualMapTarget),G.push(a.__assign(a.__assign({},T(E,F,r.yFontSize||_)),{dimension:S,show:H,min:h,max:m,text:[N[S]],inRange:{color:P.color||["#1a9850","#91cf60","#d9ef8b","#fee08b","#fc8d59","#d73027"]}}))),d.showVisualMap&&"size"===d.visualMapTarget&&f&&g!==c&&(k=d.showVisualMap&&"size"===d.visualMapTarget,G.push(a.__assign(a.__assign({},T(E,F,r.yFontSize||_)),{dimension:p,show:k,min:g,max:c,text:[N[p]],inRange:{symbolSize:[r.minSize,r.maxSize]}}))),(H||k)&&(r.chartLegend&&"right"===r.legendPosition||(P.grid.right+=35)),P.visualMap=G,w.setAnimationOption(P,r),this.chart.setOption(P,!0)},t.displayName="Scatter",t=a.__decorate([h.default,m.default,f.default,p.default,d.default,c.decorate(g.default)],t)}(i.Component);t.default=L;var T=function(e,t,a){return{type:"continuous",orient:"vertical",left:"right",bottom:e+8,calculable:!0,itemHeight:80,itemWidth:10,textStyle:{color:t,fontSize:a}}},D=function(e){if(!e||!e.series||!e.series.length)return r.default("无数据");if(!e.target||!e.target.length)return r.default("数据中没有指标的名称描述字段 target");for(var t=0;t<e.series.length;t++){var a=e.series[t];if(!a.data||!a.data.length)return r.default("series的第「"+(t+1)+"」项中data为空");for(var i=0;i<a.data.length;i++){var o=a.data[i],n=o.name;if(!y.isArrayOfTypes(o.value,["number","numberString","string","null"])){var s=r.default(n?"点「"+n+"」":"series的第「"+(t+1)+"」项中的data第「"+(i+1)+"」项的value ");return r.default("点坐标数据必须都是数字，详细：「"+s+"」中有非数值类型的数据")}}}return!0},F=function(e,t){var a=N(e);S.exportExcelByRows(a,""+(t.dynamicName||t.name||"export"))},B=function(e,t){var a=N(e);x.exportCsvByRows(a,(t.dynamicName||t.name||"export")+".csv")},M=function(e){return N(e)},N=function(e){var t=[];if(e&&e.data){var a=e.data;if(a.series&&a.series.length&&a.target&&a.target.length){var r=[].concat(a.target),i=!1,o=!1;a.series[0].data&&a.series[0].data[0].name&&(r.unshift("点名称"),i=!0),a.series[0].name&&(r.unshift("系列名称"),o=!0),t.push(r),a.series.forEach(function(e){var a=e.name||"";e.data&&e.data.length&&e.data.forEach(function(e){var r=e.name||"";if(e.value&&e.value.length){var n=[].concat(e.value);i&&n.unshift(r),o&&n.unshift(a),t.push(n)}})})}}return t},R=function(e){var t=e.dataConfig.dataModel,a=t.x,r=void 0===a?[]:a,i=t.y,o=void 0===i?[]:i;return 1!==r.length||1!==o.length?!1:!0};s.register({kind:"commonChart",type:"scatter",name:r.default("散点图"),iconClassName:"chart-scatter",enableTemplate:!0,commonCustomShadow:!0,commonCustomColor:!0,initialState:{dataType:"api",dataApiUrl:l.chartDemoUrl,config:{showRegression:!1,chartLegend:!0,legendHeight:20,legendWidth:55,chartSplitLineX:!0,chartSplitLineY:!0,chartScale:!1,marginLeft:70,marginTop:30,marginRight:60,marginBottom:55,labelFontSize:15,staticSize:10,minSize:5,maxSize:30},dataConfig:{dataSizeType:"static",staticSize:10}},initialDashboardState:{config:{chartSplitLineX:!1,chartSplitLineY:!1}},component:L,dataBindCtrl:l.dataBindCtrl,needDashboardAutoFresh:!0,advancedCtrl:l.advancedCtrl,validate:D,exportCSV:B,exportExcel:F,exportRows:M,drillDownType:"single",canBeDrillChild:!0,dataModelPanelShow:[["dataType","dataModel"]],drillDownSuggestDataModelField:"name",loadDataWhenDataModelConfigChange:R,chartEigens:l.chartEigens})});
;sugar.define("sugar:widgets/charts/radar/radar-series-ctrl.tsx",function(e,l){"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.seriesCtrl=void 0;var t=e("sugar:node_modules/tslib/tslib.js"),a=e("sugar:utils/i18n.ts"),r=e("sugar:widgets/amis-inline-switch.tsx"),s=e("sugar:widgets/charts/utils/common.tsx"),n=function(e,l,t){return e.type&&"radar"!==e.type?null:{hiddenOn:l,type:"fieldset",collapsed:!0,title:a.default("线"),controls:[{type:"group",controls:[{type:"select",name:t+".lineType",label:a.default("类型"),placeholder:a.default("请选择"),options:[{label:a.default("实线"),value:"solid"},{label:a.default("虚线"),value:"dashed"},{label:a.default("点线"),value:"dotted"}]},{type:"number",name:t+".lineWidth",label:a.default("宽度"),step:1,min:0,max:100}]},r.default(t+".chartFill",a.default("雷达填充颜色")),{hiddenOn:"!"+t+".chartFill",type:"number",label:a.default("填充透明度"),name:t+".opacity",step:.1,min:0,max:1}]}};l.seriesCtrl=function(e){if(!e.data)return null;var l=e.data.series;if(!l||!l.reduce)return null;var i=[],u=l.reduce(function(e,l){var r=[],u="!config.openCustomSeries || config.seriesConfig.current != '"+l.name+"'",d="config.seriesConfig."+l.name;return r.push({hiddenOn:u,type:"color",name:d+".color",label:a.default("颜色"),key:"color"},{hiddenOn:u,type:"color",name:d+".labelColor",label:a.default("标签颜色"),key:"labelColor"},s.getSeriesUnitCtrl(d,u)),i.push({label:l.name,value:l.name}),e.concat(t.__spreadArrays(r,[n(l,u,d)]))},[]);return{type:"fieldset",title:a.default("系列配置(series)"),collapsable:!0,collapsed:!0,headingClassName:"fieldset-title",controls:t.__spreadArrays([r.default("config.openCustomSeries",a.default("开启自定义系列配置")),{type:"select",name:"config.seriesConfig.current",label:a.default("系列名"),options:i,value:i.length?i[0].value:null,hiddenOn:"!config.openCustomSeries"}],u)}}});
;sugar.define("sugar:widgets/charts/radar/radar-ctrl.tsx",function(e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.advancedCtrl=a.dataBindCtrl=a.chartEigens=a.chartDemoUrl=void 0;var t=e("sugar:node_modules/tslib/tslib.js"),l=e("sugar:utils/i18n.ts"),d=e("sugar:node_modules/react/index.js"),n=e("sugar:widgets/ctrl-panel/data-bind-ctrl/index.tsx"),o=e("sugar:widgets/object-array-editor/object-array-editor.tsx"),r=e("sugar:widgets/amis-inline-switch.tsx"),i=e("sugar:widgets/charts/radar/radar-series-ctrl.tsx"),u=e("sugar:widgets/data-model/data-model-field-holder/data-model-field-holder.tsx"),m=e("sugar:widgets/charts/utils/common.tsx"),s=e("sugar:utils/font-map.ts"),c=[{label:l.default("取累加值"),value:"sum"},{label:l.default("取均值"),value:"avg"},{label:l.default("取首行"),value:"first"},{label:l.default("取末行"),value:"end"}],f="/openapi/demo/chart?type=radar";a.chartDemoUrl="$CUR_HOST/openapi/demo/chart?type=radar",a.chartEigens=[{field:[{name:"x",type:"d",minCount:1,maxCount:1},{name:"value",type:"m",minCount:1,maxCount:10},{name:"color",type:"d",minCount:0,maxCount:0}]},{field:[{name:"color",type:"d",minCount:1,maxCount:1},{name:"value",type:"m",minCount:3,maxCount:10},{name:"x",type:"d",minCount:0,maxCount:0}]},{field:[{name:"x",type:"d",minCount:1,maxCount:1},{name:"value",type:"m",minCount:1,maxCount:1},{name:"color",type:"d",minCount:1,maxCount:1}]},{field:[{name:"value",type:"m",minCount:3,maxCount:10},{name:"x",type:"d",minCount:0,maxCount:0},{name:"color",type:"d",minCount:0,maxCount:0}]}],a.dataBindCtrl=function(e){var a=n.getDebugAndRefreshBtn({loadData:e.chart.loadData,loadDebugData:e.chart.loadDebugData,dataType:e.chart.dataType,refreshText:l.default("刷新图表")}),r=n.getDataBindCommon({frontendId:e.chart.frontendId,dataTypeOptions:["dataModel","api","sql","json"],api:{demoUrl:f},sql:{needContinuitySetting:!1},loadData:e.chart.loadData,loadDebugData:e.chart.loadDebugData,curUrl:e.chart.dataApiUrl}),i=e.chart.dataModelHash||"",m=e.sqlModelStore.detailMap.mapByHash.get(i),s=n.generateSQLFieldList(m),p=[{type:"select",list:s,key:"frontendId",name:l.default("指标字段"),tdStyle:{minWidth:150}},{type:"number",name:l.default("最大值(固定)"),key:"maxValue",defaultValue:100,step:1,tdStyle:{minWidth:90}},{type:"number",name:l.default("最小值(固定)"),key:"minValue",defaultValue:0,step:1,tdStyle:{minWidth:90}},{type:"number",name:l.default("最大值(相对数据中最大值的倍数)"),key:"maxValueX",defaultValue:0,step:.01,tdStyle:{minWidth:130}},{type:"number",name:l.default("最小值(相对数据中最小值的倍数)"),key:"minValueX",defaultValue:0,step:.01,tdStyle:{minWidth:130}}],g=t.__spreadArrays([u.getDataModelFieldHolder({name:"x",label:l.default("外圈"),config:{dataModelHash:i,holderId:e.chart.frontendId+"-x",maxCount:1,onlyDimension:!0}}),u.getDataModelFieldHolder({name:"value",label:l.default("指标"),config:{dataModelHash:i,holderId:e.chart.frontendId+"-value",maxCount:10,onlyMeasure:!0,meaConfig:{contextMenu:["divider","radarMaxAndMin"]}}}),u.getDataModelFieldHolder({name:"color",label:l.default("颜色"),config:{dataModelHash:i,holderId:e.chart.frontendId+"-color",maxCount:1,onlyDimension:!0}}),n.commonFilterForDataModel(i),n.commonBindUrlParamForDataModel(i)],u.getChartConditionsHolder(i,e.chart),[n.commonLimitForDataModel,{type:"select",name:"dataConfig.seriesName",hiddenOn:"data.dataType != 'sql'",label:l.default("雷达系列名称字段（例如梅西和C罗各项指标的对比，该字段存储的就是“梅西”、“C罗”这样的名称）"),placeholder:l.default("请选择"),options:s},{name:"dataConfig.seriesValue",hiddenOn:"data.dataType != 'sql'",children:function(a){var n=a.onChange,r=a.value;return d.createElement(o.default,t.__assign({},{onChange:n,value:r},{chartFrontendId:e.chart.frontendId,containerClassName:"form-group form-item",label:l.default("雷达指标项配置"),addTipText:l.default("新增指标"),cols:p}))}},{type:"select",name:"dataConfig.colModeMultiRows",hiddenOn:"data.dataType != 'sql'",label:l.default("如果有多行数据的处理方式"),options:c}]);return r.concat(g,a)},a.advancedCtrl=function(e){return[m.getTooltipCtrl(),{type:"divider"},m.getLegendCtrl(),{type:"divider"},m.getLabelCtrl(),{type:"divider"},{type:"fieldset",title:l.default("雷达设置(radar)"),collapsable:!0,collapsed:!0,headingClassName:"fieldset-title",controls:[r.amisInlineSwitch("config.chartFill",l.default("雷达填充颜色")),r.amisInlineSwitch("config.shapeCircle",l.default("使用圆形雷达")),{type:"group",controls:[{type:"text",name:"config.centerX",clearable:!0,placeholder:l.default("数字、百分比、50%"),label:l.default("中心点位置横向")},{type:"text",name:"config.centerY",clearable:!0,placeholder:l.default("数字、百分比、50%"),label:l.default("中心点位置纵向")}]},{type:"group",controls:[{type:"text",name:"config.radiusInner",clearable:!0,placeholder:l.default("数字、百分比、50%"),label:l.default("图形大小内圈")},{type:"text",name:"config.radiusOuter",clearable:!0,placeholder:l.default("数字、百分比、50%"),label:l.default("图形大小外圈")}]},{type:"group",controls:[{type:"select",name:"config.nameFontFamily",label:l.default("字体"),clearable:!0,options:s.fonts},{type:"text",name:"config.nameFontSize",clearable:!0,label:l.default("字号")}]},{type:"group",controls:[{type:"color",name:"config.nameTextColor",clearable:!0,label:l.default("字体颜色")},{type:"number",name:"config.startAngle",label:l.default("起始角度"),min:0,max:360}]}]},{type:"divider"},i.seriesCtrl(e)]}});
;sugar.define("sugar:widgets/charts/radar/radar.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=e("sugar:node_modules/tslib/tslib.js"),r=e("sugar:utils/i18n.ts"),n=e("sugar:node_modules/react/index.js"),o=e("sugar:widgets/charts/chart-manager.tsx"),i=e("sugar:widgets/charts/radar/radar-ctrl.tsx"),l=e("sugar:widgets/charts/_hoc/echarts.tsx"),s=e("sugar:node_modules/react-mixin/index.js"),d=e("sugar:widgets/charts/_mixin/echarts.tsx"),u=e("sugar:widgets/charts/_hoc/debug/debug.tsx"),c=e("sugar:widgets/charts/_hoc/toolbar/toolbar.tsx"),g=e("sugar:widgets/charts/_hoc/chart-zoom/index.tsx"),m=e("sugar:node_modules/lodash/cloneDeep.js"),h=e("sugar:utils/common-helper.ts"),f=e("sugar:utils/export-file/export-csv.ts"),p=e("sugar:utils/export-file/export-excel.ts"),x=e("sugar:utils/animation.ts"),C=e("sugar:node_modules/lodash/merge.js"),v=e("sugar:node_modules/amis/lib/index.js"),y=e("sugar:widgets/charts/utils/common.tsx"),S=e("sugar:widgets/charts/utils/helper.ts"),b=e("sugar:widgets/charts/_hoc/drill-down/drill-down.tsx"),_=12,w=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.refresh=function(e){var t,r,n=e.chartData,o=e.chartConfig,i=e.chart,l=m(n),s=this.chart,d=i.isDashChart?"#ccc":"#333";o.openCustomColor&&(t=o.textColor,r=o.lineColor),t=t||d,r=r||d;var u=[],c=l.series.map(function(e){var t;u.push(e.name);var r=o.openCustomSeries?(null===(t=o.seriesConfig)||void 0===t?void 0:t[e.name])||{}:{},n={};return o.openCustomSeries&&r&&(r.color&&(n.itemStyle={color:r.color}),(o.labelShow||o.chartLabel)&&(n.label={color:r.labelColor}),r.lineType&&(n.lineStyle={type:r.lineType}),r.lineWidth&&(n.lineStype=C({},n.lineStyle,{width:r.lineWidth})),r.chartFill&&(n.areaStyle={type:"default"}),r.opacity&&(n.areaStyle=C({},n.areaStyle,{opacity:r.opacity}))),a.__assign(a.__assign({},e),n)}),g={};(o.labelShow||o.chartLabel)&&(g={show:!0,color:o.labelColor||"inherit",fontSize:o.labelFontSize||_,fontFamily:o.labelFontFamily||null,formatter:function(e){var t,a=o.openCustomSeries?(null===(t=o.seriesConfig)||void 0===t?void 0:t[e.name])||{}:{};return S.formatVal({value:e.value,prefix:a.prefix,unit:a.unit})}});var h={indicator:l.indicators,shape:o.shapeCircle?"circle":"polygon",radius:"70%",center:["50%","45%"],name:{color:o.nameTextColor||t,fontFamily:o.nameFontFamily||null,fontSize:o.nameFontSize||o.fontSize||_},nameGap:8};o.startAngle>=0&&(h.startAngle=o.startAngle),o.centerX&&(h.center[0]=o.centerX),o.centerY&&(h.center[1]=o.centerY),o.radiusInner&&o.radiusOuter?h.radius=[o.radiusInner,o.radiusOuter]:o.radiusInner?h.radius=o.radiusInner:o.radiusOuter&&(h.radius=o.radiusOuter),o.openCustomColor&&o.lineColor&&(h.axisLine={lineStyle:{color:r}},h.splitLine={lineStyle:{color:r}});var f={textStyle:S.getTextStyle(o),tooltip:{trigger:"item",confine:o.tooltipConfine||!1,extraCssText:y.getTooltipCss(o)},toolbox:{show:!1},radar:h,legend:a.__assign(a.__assign({},S.legendPositionConfig({marginTop:10,marginBottom:10,marginLeft:10,marginRight:10},o)),{show:"boolean"==typeof o.chartLegend?o.chartLegend:o.legendShow,textStyle:{color:o.legendTextColor||t,fontFamily:o.legendFontFamily||null,fontSize:o.legendFontSize||o.fontSize||_},data:u}),series:[{type:"radar",tooltip:{trigger:"item",formatter:function(e){var t=e.data.value,a=t.map(function(t,a){var r,n=o.openCustomSeries?(null===(r=o.seriesConfig)||void 0===r?void 0:r[e.name])||{}:{};return l.indicators[a].text+": "+S.formatVal({value:t,format:e.data.dataFormat||"",prefix:n.prefix,unit:n.unit})});return e.data.name+"<br />"+a.join("<br />")}},label:g,areaStyle:o.chartFill?{type:"default"}:null,data:c}]};o.openCustomColor&&o.customColors&&o.customColors.length&&(f.color=o.customColors.map(function(e){return e.color})),x.setAnimationOption(f,o),s.setOption(f,!0)},t.displayName="Radar",t=a.__decorate([b.default,u.default,c.default,g.default,l.default,s.decorate(d.default)],t)}(n.Component);t.default=w;var F=function(e){if(!e)return r.default("无数据");if(!e.indicators||!e.indicators.length)return r.default("数据中 indicators 字段为空");if(!e.series||!e.series.length)return r.default("数据中 series 字段为空");for(var t=0;t<e.indicators.length;t++){var a=e.indicators[t];if(!a.text)return r.default("第「"+(t+1)+"」项 indicators 数据中没有名称 text 字段");if(!h.isNumberic(a.max))return r.default("第「"+(t+1)+"」项 indicators 数据中 max 必须传递并且是数字类型")}for(var t=0;t<e.series.length;t++){var a=e.series[t];if(!a.name)return r.default("第「"+(t+1)+"」项 series 数据中没有名称 name 字段");if(!h.isArrayOfTypes(a.value,["number","numberString"]))return r.default("series 数据中「"+a.name+"」的数据中存在非数字项")}return!0},T=function(e,t){var a=L(e);p.exportExcelByRows(a,""+(t.dynamicName||t.name||"export"))},z=function(e,t){var a=L(e);f.exportCsvByRows(a,(t.dynamicName||t.name||"export")+".csv")},D=function(e){return L(e)},L=function(e){var t=[];if(e&&e.data){var a=e.data.series,r=e.data.indicators;a&&a.length&&r&&r.length&&(t=[[""].concat(r.map(function(e){return e.text}))],a.forEach(function(e){t.push([e.name].concat(e.value))}))}return t},j=function(e){var t=e.dataConfig.dataModel,a=t.x,n=void 0===a?[]:a,o=t.value,i=void 0===o?[]:o,l=t.color,s=void 0===l?[]:l;return i.length?i.length>1&&n.length&&s.length?(v.toast.error(r.default("外圈、颜色都绑定了字段时，只能绑定一个指标字段")),!1):s.length&&i.length<3&&!n.length?(v.toast.error(r.default("按照颜色绘制雷达时，最少需要绑定3个指标")),!1):!s.length&&i.length<3&&!n.length?!1:!0:!1};o.register({kind:"commonChart",type:"radar",name:r.default("雷达图"),iconClassName:"chart-radar",enableTemplate:!0,commonCustomColor:!0,initialState:{dataType:"api",dataApiUrl:i.chartDemoUrl,dataConfig:{colModeMultiRows:"avg"},config:{chartLegend:!0}},initialDashboardState:{config:{chartLegend:!0}},component:w,dataBindCtrl:i.dataBindCtrl,advancedCtrl:i.advancedCtrl,validate:F,needDashboardAutoFresh:!0,exportCSV:z,exportExcel:T,exportRows:D,canBeDrillChild:!0,dataModelPanelShow:[["dataType","dataModel"]],loadDataWhenDataModelConfigChange:j,chartEigens:i.chartEigens})});
;sugar.define("sugar:widgets/charts/sunburst/sunburst-ctrl.tsx",function(e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.advancedCtrl=a.dataBindCtrl=a.chartEigens=a.chartDemoUrl=void 0;var t=e("sugar:node_modules/tslib/tslib.js"),d=e("sugar:utils/i18n.ts"),l=e("sugar:node_modules/react/index.js"),n=e("sugar:widgets/ctrl-panel/data-bind-ctrl/index.tsx"),r=e("sugar:widgets/object-array-editor/object-array-editor.tsx"),o=e("sugar:widgets/data-model/data-model-field-holder/data-model-field-holder.tsx"),i=e("sugar:widgets/charts/utils/common.tsx"),s="/openapi/demo/chart?type=sunburst";a.chartDemoUrl="$CUR_HOST/openapi/demo/chart?type=sunburst",a.chartEigens=[{field:[{name:"color",type:"d",minCount:2,maxCount:6},{name:"size",type:"m",minCount:1,maxCount:1}]}],a.dataBindCtrl=function(e){var a=n.getDebugAndRefreshBtn({loadData:e.chart.loadData,loadDebugData:e.chart.loadDebugData,dataType:e.chart.dataType,refreshText:d.default("刷新图表")}),i=n.getDataBindCommon({frontendId:e.chart.frontendId,dataTypeOptions:["dataModel","api","sql","json"],api:{demoUrl:s},sql:{needContinuitySetting:!1},loadData:e.chart.loadData,loadDebugData:e.chart.loadDebugData,curUrl:e.chart.dataApiUrl}),u=e.chart.dataModelHash||"",m=e.sqlModelStore.detailMap.mapByHash.get(u),c=n.generateSQLFieldList(m),f=[{type:"select",list:c,key:"frontendId",name:d.default("本层对应字段"),tdStyle:{minWidth:150}}],g=t.__spreadArrays([o.getDataModelFieldHolder({name:"color",label:d.default("扇区名称/维度"),config:{dataModelHash:u,holderId:e.chart.frontendId+"-color",maxCount:6,onlyDimension:!0}}),o.getDataModelFieldHolder({name:"size",label:d.default("扇区角度大小/度量"),config:{dataModelHash:u,holderId:e.chart.frontendId+"-size",maxCount:1,onlyMeasure:!0}}),n.commonFilterForDataModel(u),n.commonBindUrlParamForDataModel(u)],o.getChartConditionsHolder(u,e.chart),[n.commonLimitForDataModel,{name:"dataConfig.colModeFields",hiddenOn:"data.dataType != 'sql'",children:function(a){var n=a.onChange,o=a.value;return l.createElement(r.default,t.__assign({},{onChange:n,value:o},{chartFrontendId:e.chart.frontendId,containerClassName:"form-group form-item",label:d.default("每层对应字段(从内到外)"),addTipText:d.default("新增层"),cols:f}))}},{type:"select",name:"dataConfig.valueField",hiddenOn:"data.dataType != 'sql'",label:d.default("最外层区块取值字段"),placeholder:d.default("请选择"),options:c}]);return i.concat(g,a)};var u=[{type:"number",key:"begin",name:d.default("起始位置(0-100)"),min:0,max:100,step:5,tdStyle:{minWidth:100}},{type:"number",key:"end",name:d.default("结束位置(0-100)"),min:0,max:100,step:5,tdStyle:{minWidth:100}},{type:"select",key:"labelRotate",name:d.default("标签旋转"),defaultValue:"0",list:[{label:d.default("无"),value:"0"},{label:d.default("径向"),value:"radial"},{label:d.default("切向"),value:"tangential"}],tdStyle:{minWidth:80}},{type:"select",key:"labelPosition",name:d.default("标签位置"),defaultValue:"inside",list:[{label:d.default("内部"),value:"inside"},{label:d.default("外部"),value:"outside"}],tdStyle:{minWidth:80}}];a.advancedCtrl=function(e){return[{type:"number",name:"config.gap",label:d.default("区块间隔"),step:1,min:0},i.dataUnitCtrl,{type:"divider"},i.getTooltipCtrl(),{type:"divider"},i.getLabelCtrl(null,"sunburst"),{type:"divider"},{name:"config.display",children:function(a){var n=a.onChange,o=a.value;return l.createElement(r.default,t.__assign({},{onChange:n,value:o},{chartFrontendId:e.chart.frontendId,containerClassName:"form-group form-item",label:d.default("每层展示配置(由内到外)"),addTipText:d.default("新增层配置"),cols:u}))}}]}});
;sugar.define("sugar:widgets/charts/sunburst/sunburst.tsx",function(t,a){"use strict";function e(t,a){if(t&&t.length)for(var o=0,r=t;o<r.length;o++){var n=r[o];n.value&&(n.percent=(+n.value/a*100).toFixed(2)+"%",n.children&&e(n.children,+n.value))}}function o(t){var a=0,e=0;if(t&&t.length)for(var r=0,n=t;r<n.length;r++){var l=n[r],i=o(l.children);if(e=Math.max(e,i.layer),void 0===l.value){var s=i.total;l.value=s,a+=+s}else void 0!==l.value&&(a+=+l.value)}return{total:a,layer:e+1}}function r(t,a,e){function o(t,a,e){void 0===e&&(e=!1);for(var i=0;i<t.length;i++){var s=t[i];if(e&&!s.name)return void(n=l.default("「"+a.join("->")+"」的第「"+(i+1)+"」个子节点没有name字段"));if(s.children&&s.children.length)o(s.children,a.concat(s.name),e);else{if(e&&void 0===s.value)return void(n=l.default("「"+a.join("->")+"」的第「"+(i+1)+"」个子节点既没有value字段也没有children字段"));r.push(a.concat(s.name).concat(s.value||0))}}}void 0===e&&(e=!1);var r=[],n="";return o(t,a,e),{path:r,msg:n}}Object.defineProperty(a,"__esModule",{value:!0}),a.getPathsAndCheckData=a.calculateSum=a.calculatePercent=void 0;var n=t("sugar:node_modules/tslib/tslib.js"),l=t("sugar:utils/i18n.ts"),i=t("sugar:node_modules/react/index.js"),s=t("sugar:widgets/charts/chart-manager.tsx"),d=t("sugar:widgets/charts/sunburst/sunburst-ctrl.tsx"),u=t("sugar:widgets/charts/_hoc/echarts.tsx"),c=t("sugar:node_modules/react-mixin/index.js"),h=t("sugar:widgets/charts/_mixin/echarts.tsx"),g=t("sugar:widgets/charts/_hoc/debug/debug.tsx"),f=t("sugar:widgets/charts/_hoc/drill-down/drill-down.tsx"),m=t("sugar:widgets/charts/_hoc/chart-zoom/index.tsx"),v=t("sugar:widgets/charts/_hoc/toolbar/toolbar.tsx"),b=t("sugar:node_modules/lodash/cloneDeep.js"),p=t("sugar:utils/common-helper.ts"),C=t("sugar:utils/export-file/export-csv.ts"),x=t("sugar:utils/export-file/export-excel.ts"),w=t("sugar:utils/animation.ts"),y=t("sugar:widgets/charts/utils/helper.ts"),S=t("sugar:widgets/charts/utils/common.tsx"),_=12,P=function(t){function a(){return null!==t&&t.apply(this,arguments)||this}return n.__extends(a,t),a.prototype.refresh=function(t){var a,r=t.chartData,n=t.chartConfig,l=t.chart,i=l.isDashChart?"#000":"#fff",s=n.unit||"",d=n.prefix||"";n.openCustomColor&&(a=n.lineColor),a=a||i;var u=b(r),c=this.chart,h=o(u).total;e(u,h);var g=n.display||[],f=g.map(function(t){var a={};return t.begin&&(a.r0=t.begin+"%"),t.end&&(a.r=t.end+"%"),a.label={rotate:t.labelRotate,position:t.labelPosition},"outside"===a.label.position&&(a.label.color=n.openCustomColor&&n.textColor?n.textColor:"auto"),a});f.unshift({});var m={textStyle:y.getTextStyle(n),series:{type:"sunburst",data:u,radius:[0,"90%"],label:n.chartLabel?{color:n.openCustomColor&&n.textColor?n.textColor:void 0,fontSize:n.labelFontSize||_,fontFamily:n.labelFontFamily||null,formatter:function(t){var a=t.data.accuracy,e=d+p.formatDataByType(t.value,t.data.dataFormat,a)+(t.data.unit||s),o=[];return n.labelShowName&&o.push(t.name),n.labelShowPercent&&o.push((t.value/h*100).toFixed(2)+"%"),n.labelShowNum&&o.push(e),o.join("\n")}}:{show:!1},itemStyle:{borderColor:a,borderWidth:n.gap>=0?n.gap:2},levels:f},tooltip:{show:!0,confine:n.tooltipConfine||!1,extraCssText:S.getTooltipCss(n),formatter:function(t){var a=t.data.accuracy,e=t.value;return e=d+p.formatDataByType(e,t.data.dataFormat,a)+(t.data.unit||s),"\n            "+t.name+"："+e+"</br>\n            上级中占比："+t.data.percent+"</br>\n            总体中占比："+(t.value/h*100).toFixed(2)+"%"}}};if(n.openCustomColor&&n.customColors&&n.customColors.length&&(m.color=n.customColors.map(function(t){return t.color})),n.openCustomShadow&&n.shadowBlur){var v=m.series.itemStyle;v.shadowBlur=n.shadowBlur,v.shadowColor=n.shadowColor||"rgba(0, 0, 0, 0.5)",v.shadowOffsetX=n.shadowOffsetX||0,v.shadowOffsetY=n.shadowOffsetY||0}w.setAnimationOption(m,n),c.setOption(m,!0)},a.displayName="Sunburst",a=n.__decorate([f.default,g.default,v.default,m.default,u.default,c.decorate(h.default)],a)}(i.Component);a.default=P,a.calculatePercent=e,a.calculateSum=o,a.getPathsAndCheckData=r;var D=function(t){if(!t||!t.length)return l.default("无数据");var a=r(t,[],!0).msg;return""!==a?a:!0},B=function(t,a){var e=j(t);x.exportExcelByRows(e,""+(a.dynamicName||a.name||"export"))},F=function(t,a){var e=j(t);C.exportCsvByRows(e,(a.dynamicName||a.name||"export")+".csv")},R=function(t){return j(t)},j=function(t){var a;return(null===(a=null===t||void 0===t?void 0:t.data)||void 0===a?void 0:a.length)?r(t.data,[]).path:[]},N=function(t){var a=t.dataConfig.dataModel,e=a.size,o=void 0===e?[]:e,r=a.color,n=void 0===r?[]:r;return n.length&&1===o.length?!0:!1};s.register({kind:"otherChart",type:"sunburst",name:l.default("旭日图"),iconClassName:"chart-sunburst",enableTemplate:!0,commonCustomShadow:!0,commonCustomColor:!0,variants:[{name:l.default("放射旭日图"),iconClassName:"chart-sunburst-radiation",initialState:{config:{display:[{begin:15,end:35,labelRotate:"tangential",labelPosition:"inside"},{begin:35,end:70,labelRotate:"radial",labelPosition:"inside"},{begin:70,end:75,labelRotate:"radial",labelPosition:"outside"}]}},initialDashboardState:{config:{color:"#ccc"}}}],initialState:{dataType:"api",dataApiUrl:d.chartDemoUrl,height:500,width:5,config:{gap:2,chartLabel:!0,labelShowPercent:!0,labelShowName:!0,display:[{begin:10,end:40,labelRotate:"tangential",labelPosition:"inside"},{begin:40,end:70,labelRotate:"radial",labelPosition:"inside"},{begin:70,end:95,labelRotate:"0",labelPosition:"inside"}]}},initialDashboardState:{width:500},component:P,dataBindCtrl:d.dataBindCtrl,advancedCtrl:d.advancedCtrl,exportCSV:F,exportExcel:B,exportRows:R,needDashboardAutoFresh:!0,validate:D,canBeDrillChild:!0,dataModelPanelShow:[["dataType","dataModel"]],loadDataWhenDataModelConfigChange:N,chartEigens:d.chartEigens})});
;sugar.define("sugar:widgets/charts/treemap/treemap-ctrl.tsx",function(e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.advancedCtrl=a.dataBindCtrl=a.chartEigens=a.chartDemoUrl=void 0;var t=e("sugar:node_modules/tslib/tslib.js"),d=e("sugar:utils/i18n.ts"),l=e("sugar:node_modules/react/index.js"),o=e("sugar:widgets/ctrl-panel/data-bind-ctrl/index.tsx"),r=e("sugar:widgets/object-array-editor/object-array-editor.tsx"),n=e("sugar:widgets/amis-inline-switch.tsx"),i=e("sugar:widgets/data-model/data-model-field-holder/data-model-field-holder.tsx"),s=e("sugar:widgets/charts/utils/common.tsx"),c="/openapi/demo/chart?type=treemap";a.chartDemoUrl="$CUR_HOST/openapi/demo/chart?type=treemap",a.chartEigens=[{field:[{name:"size",type:"m",minCount:1,maxCount:1},{name:"color",type:"d",minCount:1,maxCount:6}]}],a.dataBindCtrl=function(e){var a=o.getDebugAndRefreshBtn({loadData:e.chart.loadData,loadDebugData:e.chart.loadDebugData,dataType:e.chart.dataType,refreshText:d.default("刷新图表")}),n=o.getDataBindCommon({frontendId:e.chart.frontendId,dataTypeOptions:["dataModel","api","sql","json"],api:{demoUrl:c},sql:{needContinuitySetting:!1},loadData:e.chart.loadData,loadDebugData:e.chart.loadDebugData,curUrl:e.chart.dataApiUrl}),s=e.chart.dataModelHash||"",u=e.sqlModelStore.detailMap.mapByHash.get(s),m=o.generateSQLFieldList(u),g=[{type:"select",list:m,key:"frontendId",name:d.default("由顶层至底层"),tdStyle:{minWidth:150}}],p=t.__spreadArrays([i.getDataModelFieldHolder({name:"color",label:d.default("区块名称/维度"),config:{dataModelHash:s,holderId:e.chart.frontendId+"-color",maxCount:6,onlyDimension:!0}}),i.getDataModelFieldHolder({name:"size",label:d.default("区块大小/度量"),config:{dataModelHash:s,holderId:e.chart.frontendId+"-size",maxCount:1,onlyMeasure:!0}}),o.commonFilterForDataModel(s),o.commonBindUrlParamForDataModel(s)],i.getChartConditionsHolder(s,e.chart),[o.commonLimitForDataModel,{name:"dataConfig.colModeFields",hiddenOn:"data.dataType != 'sql'",children:function(a){var o=a.onChange,n=a.value;return l.createElement(r.default,t.__assign({},{onChange:o,value:n},{chartFrontendId:e.chart.frontendId,containerClassName:"form-group form-item",label:d.default("各层分类名称字段"),addTipText:d.default("新增层"),cols:g}))}},{type:"select",name:"dataConfig.valueField",hiddenOn:"data.dataType != 'sql'",label:d.default("最下层区块取值字段"),placeholder:d.default("请选择"),options:m}]);return n.concat(p,a)},a.advancedCtrl=function(){return[{type:"group",controls:[n.amisInlineSwitch("config.breadcrumb",d.default("展示路径")),n.amisInlineSwitch("config.roam",d.default("拖拽和缩放"))]},{type:"group",controls:[{type:"number",name:"config.leafDepth",label:d.default("展示层数"),placeholder:d.default("0为全展示"),step:1,min:0},{type:"number",name:"config.borderWidth",label:d.default("边框宽度"),step:1,min:0}]},{type:"group",controls:[{type:"number",name:"config.gap",label:d.default("区块间隔"),step:1,min:0}]},s.dataUnitCtrl,{type:"divider"},s.getTooltipCtrl(),{type:"divider"},s.getLabelCtrl([n.amisInlineSwitch("config.showParentLabel",d.default("显示父节点标签"))],"treemap")]}});
;sugar.define("sugar:widgets/charts/treemap/treemap.tsx",function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=t("sugar:node_modules/tslib/tslib.js"),r=t("sugar:utils/i18n.ts"),o=t("sugar:node_modules/react/index.js"),l=t("sugar:widgets/charts/chart-manager.tsx"),s=t("sugar:widgets/charts/treemap/treemap-ctrl.tsx"),i=t("sugar:widgets/charts/_hoc/echarts.tsx"),n=t("sugar:node_modules/react-mixin/index.js"),d=t("sugar:widgets/charts/_mixin/echarts.tsx"),u=t("sugar:widgets/charts/_hoc/debug/debug.tsx"),h=t("sugar:widgets/charts/_hoc/drill-down/drill-down.tsx"),c=t("sugar:widgets/charts/_hoc/toolbar/toolbar.tsx"),m=t("sugar:widgets/charts/_hoc/chart-zoom/index.tsx"),g=t("sugar:node_modules/lodash/cloneDeep.js"),p=t("sugar:utils/common-helper.ts"),f=t("sugar:utils/export-file/export-csv.ts"),b=t("sugar:widgets/charts/sunburst/sunburst.tsx"),C=t("sugar:utils/export-file/export-excel.ts"),w=t("sugar:utils/animation.ts"),x=t("sugar:widgets/charts/utils/helper.ts"),y=t("sugar:widgets/charts/utils/common.tsx"),v=12,S=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a.__extends(e,t),e.prototype.refresh=function(t){var e,a=t.chartData,o=t.chartConfig,l=t.chart,s=l.isDashChart?"rgba(0, 0, 0, 0.5)":"rgba(200, 200, 200, 0.5)",i=o.openCustomColor&&o.textColor?o.textColor:void 0,n=o.unit||"",d=o.prefix||"";o.openCustomColor&&(e=o.lineColor),e=e||s;var u=g(a),h=this.chart,c=b.calculateSum(u),m=c.total,f=c.layer;b.calculatePercent(u,m);for(var C=[{itemStyle:{borderWidth:o.borderWidth||0===o.borderWidth?o.borderWidth:5,borderColor:e},upperLabel:{show:!1}}],S=0;f>S;S++){var D=Math.min(.3+.1*S,.8);C.push({itemStyle:{colorSaturation:D,borderColorSaturation:D}})}var _=o.labelFontSize||o.fontSize||v,F={textStyle:x.getTextStyle(o),series:{name:"root",type:"treemap",width:"90%",height:o.breadcrumb?"80%":"90%",data:u,colorAlpha:.5,leafDepth:o.leafDepth||void 0,upperLabel:{show:o.showParentLabel,color:i||"#fff",height:1.8*_,fontSize:_,fontFamily:o.labelFontFamily||null},label:o.chartLabel?{color:o.labelColor||i,fontSize:_,fontFamily:o.labelFontFamily||null,formatter:function(t){var e=t.data.accuracy,a=d+p.formatDataByType(t.value,t.data.dataFormat,e)+(t.data.unit||n),r=[];return o.labelShowName&&r.push(t.name),o.labelShowPercent&&r.push((t.value/m*100).toFixed(2)+"%"),o.labelShowNum&&r.push(a),r.join("\n")}}:{show:!1},itemStyle:{borderWidth:o.borderWidth||0===o.borderWidth?o.borderWidth:5,gapWidth:o.gap||0===o.gap?o.gap:5},roam:o.roam,levels:C,breadcrumb:{show:o.breadcrumb||!1,itemStyle:{textStyle:{fontFamily:o.fontFamily||null,fontSize:o.fontSize||v}},top:"auto",bottom:"2%"}},tooltip:{show:!0,confine:o.tooltipConfine||!1,extraCssText:y.getTooltipCss(o),formatter:function(t){var e=t.data.accuracy,a=t.value;return a=d+p.formatDataByType(a,t.data.dataFormat,e)+(t.data.unit||n),"\n              "+(t.name||"")+"："+a+"</br>\n              "+(t.data.percent?""+r.default("上级中占比：")+t.data.percent+"</br>":"")+"\n              "+r.default("总体中占比：")+(t.value/m*100).toFixed(2)+"%"}}};if(o.openCustomShadow&&o.shadowBlur){var W=F.series.itemStyle;W.shadowBlur=o.shadowBlur,W.shadowColor=o.shadowColor||"rgba(0, 0, 0, 0.5)",W.shadowOffsetX=o.shadowOffsetX||0,W.shadowOffsetY=o.shadowOffsetY||0}o.openCustomColor&&o.customColors&&o.customColors.length&&(F.color=o.customColors.map(function(t){return t.color})),l.isDashChart?(F.series.breadcrumb.itemStyle.color=e,F.series.breadcrumb.itemStyle.borderColor=l.isDashChart?"rgba(255, 255, 255, 0.5)":"rgba(0, 0, 0, 0.5)"):F.series.breadcrumb.itemStyle.borderWidth=0,w.setAnimationOption(F,o),h.setOption(F,!0)},e.displayName="Treemap",e=a.__decorate([h.default,u.default,c.default,m.default,i.default,n.decorate(d.default)],e)}(o.Component);e.default=S;var D=function(t){if(!t||!t.length)return r.default("无数据");var e=b.getPathsAndCheckData(t,[],!0).msg;return""!==e?e:!0},_=function(t,e){var a=B(t);C.exportExcelByRows(a,""+(e.dynamicName||e.name||"export"))},F=function(t,e){var a=B(t);f.exportCsvByRows(a,(e.dynamicName||e.name||"export")+".csv")},W=function(t){return B(t)},B=function(t){var e;return(null===(e=null===t||void 0===t?void 0:t.data)||void 0===e?void 0:e.length)?b.getPathsAndCheckData(t.data,[]).path:[]},T=function(t){var e=t.dataConfig.dataModel,a=e.size,r=void 0===a?[]:a,o=e.color,l=void 0===o?[]:o;return l.length&&1===r.length?!0:!1};l.register({kind:"otherChart",type:"treemap",name:r.default("矩形树图"),iconClassName:"chart-treemap",enableTemplate:!0,commonCustomShadow:!0,commonCustomColor:!0,commonCustomColorTitle:["","外边框颜色","多个配色项依次对应各顶层分类颜色"],initialState:{dataType:"api",dataApiUrl:s.chartDemoUrl,height:300,width:5,config:{borderWidth:5,gap:2,chartLabel:!0,labelShowName:!0,showParentLabel:!0,roam:!1,layer:0,breadcrumb:!1}},initialDashboardState:{width:500,height:350},component:S,dataBindCtrl:s.dataBindCtrl,advancedCtrl:s.advancedCtrl,exportCSV:F,exportExcel:_,exportRows:W,needDashboardAutoFresh:!0,validate:D,canBeDrillChild:!0,dataModelPanelShow:[["dataType","dataModel"]],drillDownSuggestDataModelField:"color",loadDataWhenDataModelConfigChange:T,chartEigens:s.chartEigens})});
;sugar.define("sugar:widgets/charts/bubble/bubble-ctrl.tsx",function(a,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.advancedCtrl=e.dataBindCtrl=e.chartEigens=e.chartDemoUrl=void 0;var t=a("sugar:node_modules/tslib/tslib.js"),d=a("sugar:utils/i18n.ts"),l=a("sugar:node_modules/react/index.js"),o=a("sugar:widgets/ctrl-panel/data-bind-ctrl/index.tsx"),n=a("sugar:widgets/object-array-editor/object-array-editor.tsx"),i=a("sugar:widgets/ctrl-panel/common/switch-with-tip.tsx"),r=a("sugar:widgets/data-model/data-model-field-holder/data-model-field-holder.tsx"),s=a("sugar:widgets/charts/utils/common.tsx"),u=[{label:d.default("取累加值"),value:"sum"},{label:d.default("取均值"),value:"avg"},{label:d.default("取首行"),value:"first"},{label:d.default("取末行"),value:"end"}],c="/openapi/demo/chart?type=bubble";e.chartDemoUrl="$CUR_HOST/openapi/demo/chart?type=bubble",e.chartEigens=[{field:[{name:"name",type:"d",minCount:1,maxCount:1},{name:"size",type:"m",minCount:1,maxCount:1},{name:"color",type:"d",minCount:0,maxCount:1}]}],e.dataBindCtrl=function(a){var e=o.getDebugAndRefreshBtn({loadData:a.chart.loadData,loadDebugData:a.chart.loadDebugData,dataType:a.chart.dataType,refreshText:d.default("刷新图表")}),s=o.getDataBindCommon({frontendId:a.chart.frontendId,dataTypeOptions:["dataModel","api","sql","json"],api:{demoUrl:c},loadData:a.chart.loadData,loadDebugData:a.chart.loadDebugData,curUrl:a.chart.dataApiUrl}),f=a.chart.dataModelHash||"",m=a.sqlModelStore.detailMap.mapByHash.get(f),p=o.generateSQLFieldList(m),g=[{type:"select",list:p,key:"frontendId",name:d.default("绑定字段"),tdStyle:{minWidth:150}}],h=t.__spreadArrays([r.getDataModelFieldHolder({name:"name",label:d.default("气泡名称"),config:{dataModelHash:f,holderId:a.chart.frontendId+"-name",maxCount:1,onlyDimension:!0}}),r.getDataModelFieldHolder({name:"size",label:d.default("气泡大小"),config:{dataModelHash:f,holderId:a.chart.frontendId+"-size",maxCount:1,onlyMeasure:!0}}),r.getDataModelFieldHolder({name:"color",label:d.default("气泡的类别/颜色（可不填）"),config:{dataModelHash:f,holderId:a.chart.frontendId+"-color",maxCount:1,onlyDimension:!0}}),o.commonFilterForDataModel(f),o.commonBindUrlParamForDataModel(f)],r.getChartConditionsHolder(f,a.chart),[o.commonLimitForDataModel,{type:"radios",name:"dataConfig.bindMode",hiddenOn:"data.dataType != 'sql'",label:d.default("SQL数据使用方式："),inline:!1,options:[{label:d.default("每行对应一个气泡"),value:"row"},{label:d.default("每列对应一个气泡"),value:"col"}]},{type:"select",name:"dataConfig.rowNameField",hiddenOn:"data.dataType != 'sql' || data.dataConfig.bindMode != 'row'",label:d.default("气泡的名称字段"),placeholder:d.default("请选择"),options:p},{type:"select",name:"dataConfig.rowValueField",hiddenOn:"data.dataType != 'sql' || data.dataConfig.bindMode != 'row'",label:d.default("气泡大小的取值字段"),placeholder:d.default("请选择"),options:p},{type:"select",name:"dataConfig.rowCatField",hiddenOn:"data.dataType != 'sql' || data.dataConfig.bindMode != 'row'",label:d.default("气泡类别字段（如没有可不选）"),placeholder:d.default("请选择"),options:p,clearable:!0},{type:"select",name:"dataConfig._sugar_extras",hiddenOn:"data.dataType != 'sql' || data.dataConfig.bindMode != 'row'",label:d.default("下钻需要的附加字段，如存有URL的字段"),placeholder:d.default("请选择"),options:p,clearable:!0},{name:"dataConfig.colModeFields",hiddenOn:"data.dataType != 'sql' || data.dataConfig.bindMode != 'col'",children:function(e){var o=e.onChange,i=e.value;return l.createElement(n.default,t.__assign({},{onChange:o,value:i},{chartFrontendId:a.chart.frontendId,containerClassName:"form-group form-item",label:d.default("绑定字段到气泡"),addTipText:d.default("新增气泡"),cols:g}))}}]);return m&&m.config.openRow2Col&&h.push({name:"dataConfig.addAllRow2Col",hiddenOn:"data.dataType != 'sql' || data.dataConfig.bindMode != 'col'",children:function(a){var e=a.onChange,o=a.value;return l.createElement(i.default,t.__assign({},{onChange:e,value:o,label:d.default("绑定所有的行转列"),tipText:d.default("不了解？"),tipLink:"/docs/DataBind-SQL-Rowcol"}))}}),h.push({type:"select",name:"dataConfig.colModeMultiRows",hiddenOn:"data.dataType != 'sql' || data.dataConfig.bindMode != 'col'",label:d.default("如果有多行数据的处理方式"),options:u}),s.concat(h,e)},e.advancedCtrl=function(){return[{type:"group",controls:[{type:"number",name:"config.force",label:d.default("气泡聚拢强度"),min:.01,step:.01,max:2},{type:"number",name:"config.fontSize",label:d.default("气泡字体大小"),step:1,min:14,max:56}]},s.dataUnitCtrl,{type:"divider"},{type:"fieldset",title:d.default("提示设置(tooltip)"),collapsable:!0,collapsed:!0,headingClassName:"fieldset-title",controls:s.tooltipBasicCtrl.slice(0,2)},{type:"divider"},{type:"fieldset",title:d.default("图例设置(legend)"),collapsed:!0,collapsable:!0,headingClassName:"fieldset-title",controls:t.__spreadArrays(s.legendBasicCtrl.slice(0,2),[{type:"color",name:"config.legendTextColor",clearable:!0,label:d.default("字体颜色")}])}]}});
;sugar.define("sugar:widgets/charts/_mixin/d3.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=e("sugar:node_modules/react/index.js"),s=e("sugar:node_modules/d3/dist/d3.node.js"),n=e("sugar:node_modules/react-dom/index.js"),o=e("sugar:node_modules/lodash/debounce.js"),h=e("sugar:utils/resize-sensor.ts"),r={componentWillMount:function(){this._resize=this._resize.bind(this),this._refresh=this._refresh.bind(this),this._initChart=this._initChart.bind(this),this._initResizeSensor=this._initResizeSensor.bind(this),this.countMultiNodeDomSize=this.countMultiNodeDomSize.bind(this),this._initChart()},componentDidMount:function(){if("pending"!==this.props.hub.data.loadState){this._initResizeSensor();var e=n.findDOMNode(this);this.refresh(this.props,e)}},componentWillReceiveProps:function(e){this.willReceiveProps&&this.willReceiveProps(this.props,e),this.props.chartConfig!==e.chartConfig||this.props.chartData!==e.chartData||this.props.theme!==e.theme||this.props.drillDownOpen!==e.drillDownOpen?this._refresh(e):"topology"===this.props.chart.type&&this.props.chart.isDashChart&&e.chartData&&(this.props.scaleX!==e.scaleX||this.props.scaleY!==e.scaleY)&&this._refresh(e),e.index!==this.props.index&&this._initResizeSensor()},shouldComponentUpdate:function(){return!1},componentWillUnmount:function(){var e=n.findDOMNode(this);s.select(e).html(""),e=n.findDOMNode(this),this.d3Unmount(e),this.unWatchResize&&this.unWatchResize(),this.d3=null,this.d3Sankey=null,this.topologyData=null},_initChart:function(){this.d3=s,s.select("div#d3TooltipDiv").empty()&&s.select("body").append("div").attr("id","d3TooltipDiv")},countMultiNodeDomSize:function(e,t,i){if(null==t[i]&&(t[i]=0),e instanceof Array){t[i]+=e.length;for(var s=0;s<e.length;++s)e[s].children&&e[s].children.length&&this.countMultiNodeDomSize(e[s].children,t,i+1)}else t[i]+=1,e.children&&e.children.length&&this.countMultiNodeDomSize(e.children,t,i+1)},_initResizeSensor:function(){this.unWatchResize&&this.unWatchResize();var e=n.findDOMNode(this);this.unWatchResize=h.resizeSensor(e,o(this._resize,250))},_resize:function(){this._refresh(this.props)},_refresh:function(e){this._initResizeSensor();var t=n.findDOMNode(this);t&&(s.select(t).select("div.d3-svg-container").remove(),this.refresh(e,t))},render:function(){var e=this.props.chart;if("domTree"===e.type&&"dot"!==e.config.treeMode&&e.config.multiNode){var t=[],s=this.state.value.get("data").toJS();this.countMultiNodeDomSize(s,t,0);for(var n=0,o=0;o<t.length;++o)n=n<t[o]?t[o]:n;var h=250*t.length,r=150*n;return i.createElement("div",{style:{height:"100%",width:"100%",overflow:"auto"}},i.createElement("div",{className:"d3-chart",style:{height:"100%",width:"100%",minWidth:h,minHeight:r}}))}return i.createElement("div",{style:{height:"100%",width:"100%"}},i.createElement("div",{className:"d3-chart "+e.type}))}};t.default=r});
;sugar.define("sugar:widgets/charts/bubble/bubble.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=e("sugar:node_modules/tslib/tslib.js"),n=e("sugar:utils/i18n.ts"),r=e("sugar:node_modules/react/index.js"),o=e("sugar:node_modules/react-mixin/index.js"),l=e("sugar:node_modules/lodash/cloneDeep.js"),i=e("sugar:widgets/charts/chart-manager.tsx"),s=e("sugar:widgets/charts/bubble/bubble-ctrl.tsx"),d=e("sugar:widgets/charts/_hoc/debug/debug.tsx"),c=e("sugar:widgets/charts/_hoc/toolbar/toolbar.tsx"),u=e("sugar:widgets/charts/_hoc/chart-zoom/index.tsx"),p=e("sugar:widgets/charts/_hoc/echarts.tsx"),h=e("sugar:widgets/charts/_mixin/d3.tsx"),f=e("sugar:node_modules/d3-svg-legend/indexRollup.js"),g=e("sugar:widgets/charts/_hoc/drill-down/drill-down.tsx"),v=e("sugar:utils/common-helper.ts"),m=e("sugar:utils/export-file/export-csv.ts"),y=e("sugar:utils/export-file/export-excel.ts"),x=1e3,_=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.refresh=function(e,t){t&&this.drawChart(e,t)},t.prototype.d3Unmount=function(){},t.prototype.resize=function(e){e&&this.drawChart(this.props,e)},t.prototype.openDepOrDrill=function(e,t,n){var r=(e.fx,e.fy,e.id,e.index),o=(e.r,e.radius,e.vx,e.vy,e.x,e.y,a.__rest(e,["fx","fy","id","index","r","radius","vx","vy","x","y"])),l=o.name||"";this.props.chartData&&this.props.chartData.length&&this.props.chartData[r]&&(o=a.__assign(a.__assign({},this.props.chartData[r]),o)),this.props.chartData&&this.props.chartData.length&&this.props.chartData[r]&&this.props.chartData[r].name_sugar_origin&&(l=this.props.chartData[r].name_sugar_origin,o.name_sugar_origin=l),this.props.chartData&&this.props.chartData.length&&this.props.chartData[r]&&this.props.chartData[r].hasOwnProperty("_sugar_extra")&&(l=this.props.chartData[r]._sugar_extra),t&&(this.d3.select("div#d3TooltipDiv").style("display","none"),this.props.chart.handleEvent("drillDown",this.props.mode,{drillDownItem:{item:a.__assign(a.__assign({},o),{_sugar_dd_default_:l}),fireKey:""},drillDownIndex:0})),this.props.hub.dependenceData.dependenceState&&this.props.hub.dependenceData.dependenceState.name===o.name?this.props.chart.handleEvent("cancelDependence",this.props.mode):n&&this.props.chart.handleEvent("dependence",this.props.mode,{dependenceIndex:0,dependenceState:{name:o.name},dependenceItem:{item:a.__assign(a.__assign({},o),{_sugar_dd_default_:l}),fireKey:""}})},t.prototype.cancelDep=function(){this.props.hub.dependenceData.dependenceState&&this.props.chart.handleEvent("cancelDependence",this.props.mode)},t.prototype.mouseoverNodeEvent=function(e){var t=this.props.chartConfig,a=this.d3.select("div#d3TooltipDiv"),n="",r=t.unit||e.unit||"",o=t.prefix||"";e.name&&(n+="<span>"+e.name+"</span>"),e.value&&(n+="<span>"+o+v.formatDataByType(e.value,e.dataFormat)+r+"</span>"),e.ratio&&(n+="<span>"+e.ratio+"</span>"),n.length&&a.html(n).style("left",this.d3.event.clientX+5+"px").style("top",this.d3.event.clientY+5+"px").style("font-size",(t.tooltipFontSize||12)+"px").style("font-family",t.tooltipFontFamily||null).style("color",t.tooltipTextColor||null).style("background-color",t.tooltipBackgroundColor||null).style("display","block")},t.prototype.mouseoutEvent=function(){this.d3.select("div#d3TooltipDiv").style("display","none")},t.prototype.cancelHighlightNode=function(e,t){var a=this,n=this.d3;this.focusedNode.fx=null,this.focusedNode.fy=null,e.alphaTarget(.2).restart(),n.transition().duration(x).ease(n.easePolyOut).tween("moveOut",function(){var r=n.interpolateNumber(a.focusedNode.r,a.focusedNode.radius);return function(n){a.focusedNode.r=r(n),e.force("collide",t)}}).on("end",function(){e.alphaTarget(0),a.focusedNode=null}).on("interrupt",function(){e.alphaTarget(0)}),n.selectAll(".circle-overlay").classed("hidden",!0),n.selectAll(".node-icon").classed("node-icon--faded",!1)},t.prototype.drawChart=function(e,t){var a,r=this;this.d3.select("div#d3TooltipDiv").style("display","none");var o,i,s=e.chartData,d=e.chart,c=e.chartConfig,u=e.theme,p=!(!this.props.chart.drillDownOpen||!this.props.chart.drillDown.length),h=!!(this.props.chart.config.dependenceOpen&&this.props.chart.config.dependences&&this.props.chart.config.dependences.length),g=l(s),m=g.reduce(function(e,t){return e+ +t.value},0),y=d.isDashChart?"#fff":"#333",_=c.fontFamily||null,b=c.fontWeight||null,D=(null===(a=u.config.chartTheme)||void 0===a?void 0:a.color)||[];c.openCustomColor&&(o=c.textColor,i=c.lineColor,c.customColors&&c.customColors.length&&(D=c.customColors.map(function(e){return e.color}).concat(D))),o=o||y;var C=this.d3,w=.98*parseInt(C.select(t).select(".d3-chart").style("width"),10),N=.98*parseInt(C.select(t).select(".d3-chart").style("height"),10),T=C.select(t).select(".d3-chart").append("div").classed("d3-svg-container",!0).classed("d3-bubble",!0).append("svg").attr("width",w).attr("height",N).attr("transform","translate(0,0)"),z=.5*w,F=.5*N;T.style("background-color",i?i:"transparent");var M=isNaN(c.force)?.05:Math.max(.01,c.force),E=C.scaleOrdinal(D),O=C.pack().size([w,N]).padding(1.5),S=C.forceCollide(function(e){return e.r}),B=C.forceSimulation().force("charge",C.forceManyBody()).force("collide",S).force("x",C.forceX(z).strength(M)).force("y",C.forceY(F).strength(M)),k=C.hierarchy({children:g,value:0}).sum(function(e){return e.value}),A=void 0,I=void 0,P=O(k).leaves().map(function(e,t){var a=e.data;return(void 0!==A&&A>e.r||void 0===A)&&(A=e.r),(void 0!==I&&I<e.r||void 0===I)&&(I=e.r),{x:z+3*(e.x-z),y:F+3*(e.y-F),r:0,radius:e.r,id:t,cat:a.cat?a.cat:a.name,name:a.name,ratio:(100*a.value/m).toFixed(2)+"%",value:a.value,unit:a.unit,dataFormat:a.dataFormat}}),j=T.selectAll(".node").data(P).enter().append("g").attr("class","node").call(C.drag().on("start",function(e){C.event.active||B.alphaTarget(.2).restart(),e.fx=e.x,e.fy=e.y}).on("drag",function(e){e.fx=C.event.x,e.fy=C.event.y}).on("end",function(e){C.event.active||B.alphaTarget(0),e.fx=null,e.fy=null}));j.append("circle").attr("id",function(e){return e.id}).attr("r",0).style("fill",function(e){return E(e.cat)}).transition().duration(x).ease(C.easeElasticOut).tween("circleIn",function(e){var t=C.interpolateNumber(0,e.radius);return function(a){e.r=t(a),B.force("collide",S)}}),j.on("mouseover",function(e){r.mouseoverNodeEvent(e)}).on("mouseout",function(){r.mouseoutEvent()}),B.nodes(P).on("tick",function(){j.attr("transform",function(e){return"translate("+e.x+","+e.y+")"}).select("circle").attr("r",function(e){return e.r})}),j.append("clipPath").attr("id",function(e){return"clip-"+e.id}).append("use").attr("xlink:href",function(e){return"#"+e.id}),j.append("text").classed("node-icon",!0).attr("clip-path",function(e){return"url(#clip-"+e.id+")"}).style("font-size",function(e){return Math.ceil((c.fontSize||30)*(e.radius/(I||e.radius)))+"px"}).style("font-family",_).style("font-weight",b).selectAll("tspan").data(function(e){return[e.name]}).enter().append("tspan").attr("fill",o).text(function(e){return e});var L="boolean"==typeof c.chartLegend?c.chartLegend:c.showLegend||g[0]&&g[0].showLegend;if(L){var R=f.legendColor().scale(E).shape("circle");T.append("g").classed("legend-color",!0).attr("text-anchor","start").attr("transform","translate(20,30)").attr("fill",c.legendTextColor||y).style("font-size",(c.legendFontSize||14)+"px").style("font-family",c.legendFontFamily||null).call(R)}var H=I?1.2*I:.5*F,U=j.append("foreignObject").classed("circle-overlay hidden",!0).attr("x",-H).attr("y",-H).attr("height",2*H).attr("width",2*H).style("color",o).append("xhtml:div").style("font-family",_).style("font-weight",b).classed("circle-overlay__inner",!0);U.append("p").classed("circle-overlay__body",!0).style("font-size",Math.ceil(H/4)+"px").text(function(e){return e.name}),U.append("p").classed("circle-overlay__body",!0).style("font-size",Math.ceil(H/3)+"px").html(function(e){return v.formatDataByType(e.value,e.dataFormat)+(e.unit||"")}),U.append("p").classed("circle-overlay__body",!0).style("font-size",Math.ceil(H/5)+"px").html(function(e){return n.default("占比：「"+e.ratio+"」")}),j.on("click",function(e){C.event.stopPropagation();var t=C.event.currentTarget;if(r.openDepOrDrill(e,p,h),e===r.focusedNode)return void(p||r.cancelHighlightNode(B,S));var a=r.focusedNode;r.focusedNode=e,B.alphaTarget(.2).restart(),C.selectAll(".circle-overlay").classed("hidden",!0),C.selectAll(".node-icon").classed("node-icon--faded",!1),a&&(a.fx=null,a.fy=null,j.filter(function(e,t){return t===a.index}).transition().duration(x).ease(C.easePolyOut).tween("circleOut",function(){var e=C.interpolateNumber(a.r,a.radius);return function(t){a.r=e(t)}}).on("interrupt",function(){a.r=a.radius})),C.transition().duration(x).ease(C.easePolyOut).tween("moveIn",function(){var t=C.interpolateNumber(e.x,z),a=C.interpolateNumber(e.y,F),n=C.interpolateNumber(e.r,H);return function(r){e.fx=t(r),e.fy=a(r),e.r=n(r),B.force("collide",S)}}).on("end",function(){B.alphaTarget(0);var e=C.select(t);e.select(".circle-overlay").classed("hidden",!1),e.select(".node-icon").classed("node-icon--faded",!0)}).on("interrupt",function(){e.fx=null,e.fy=null,B.alphaTarget(0)})}),C.select(t).on("click",function(){var e=C.event.target;!e.closest("#circle-overlay")&&r.focusedNode&&(r.cancelHighlightNode(B,S),r.cancelDep())})},t.displayName="Bubble",t=a.__decorate([g.default,d.default,c.default,u.default,p.default,o.decorate(h.default)],t)}(r.Component);t.default=_;var b=function(e){if(!e||!e.length)return n.default("无数据");for(var t=0;t<e.length;t++){var a=e[t];if(!a.name)return n.default("第「"+(t+1)+"」项数据中没有名称name字段");if(!v.isNumberic(a.value))return n.default("第「"+(t+1)+"」项数据中value取值不是数字类型");if(+a.value<0)return n.default("第「"+(t+1)+"」项数据中value取值小于0")}return!0},D=function(e,t){var a=N(e);y.exportExcelByColumns(a,""+(t.dynamicName||t.name||"export"))},C=function(e,t){var a=N(e);m.exportCsvByColumns(a,(t.dynamicName||t.name||"export")+".csv")},w=function(e){var t=N(e);return y.exportRowsByColumns(t)},N=function(e){var t=[];if(e&&e.data&&e.data.length){var a=[],n=[];e.data.forEach(function(e){a.push(e.name),n.push(e.value)}),t=[a,n]}return t},T=function(e){var t=e.dataConfig.dataModel,a=t.name,n=void 0===a?[]:a,r=t.size,o=void 0===r?[]:r,l=t.color,i=void 0===l?[]:l;return 1!==o.length||1!==n.length?!1:i.length>1?!1:!0};i.register({kind:"otherChart",type:"bubble",name:n.default("气泡图"),iconClassName:"chart-bubble",enableTemplate:!0,component:_,validate:b,dataBindCtrl:s.dataBindCtrl,advancedCtrl:s.advancedCtrl,initialState:{dataType:"api",dataApiUrl:s.chartDemoUrl,config:{force:.05,showLegend:!1,fontSize:30,legendFontSize:14},dataConfig:{bindMode:"row",colModeMultiRows:"sum"}},drillDownType:"single",needDashboardAutoFresh:!0,commonCustomColor:!0,commonCustomColorTitle:["",n.default("背景颜色"),n.default("可增加多种配色，每种对应一类气泡")],noCancelDependenceButton:!0,canBeDrillChild:!0,exportCSV:C,exportExcel:D,exportRows:w,dataModelPanelShow:[["dataType","dataModel"]],drillDownSuggestDataModelField:"name",loadDataWhenDataModelConfigChange:T,chartEigens:s.chartEigens})});
;sugar.define("sugar:widgets/charts/topology/topology-ctrl.tsx",function(e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.basicCtrl=a.advancedCtrl=a.dataBindCtrl=a.chartDemoUrl=void 0;var t=e("sugar:node_modules/tslib/tslib.js"),l=e("sugar:utils/i18n.ts"),d=e("sugar:node_modules/react/index.js"),o=e("sugar:widgets/ctrl-panel/data-bind-ctrl/index.tsx"),n=e("sugar:widgets/object-array-editor/object-array-editor.tsx"),r=e("sugar:widgets/amis-inline-switch.tsx"),i=e("sugar:widgets/data-model/data-model-field-holder/data-model-field-holder.tsx"),s="/openapi/demo/chart?type=topology";a.chartDemoUrl="$CUR_HOST/openapi/demo/chart?type=topology",a.dataBindCtrl=function(e){var a=o.getDebugAndRefreshBtn({loadData:e.chart.loadData,loadDebugData:e.chart.loadDebugData,dataType:e.chart.dataType,refreshText:l.default("刷新图表")}),t=o.getDataBindCommon({frontendId:e.chart.frontendId,dataTypeOptions:["dataModel","api","sql","json"],api:{demoUrl:s},loadData:e.chart.loadData,loadDebugData:e.chart.loadDebugData,curUrl:e.chart.dataApiUrl}),d=e.chart.dataModelHash||"",n=e.sqlModelStore.detailMap.mapByHash.get(d),r=o.generateSQLFieldList(n),c=[i.getDataModelFieldHolder({name:"sourceNode",label:l.default("源节点"),config:{dataModelHash:d,holderId:e.chart.frontendId+"-sourceNode",maxCount:1,onlyDimension:!0}}),i.getDataModelFieldHolder({name:"targetNode",label:l.default("终节点"),config:{dataModelHash:d,holderId:e.chart.frontendId+"-targetNode",maxCount:1,onlyDimension:!0}}),i.getDataModelFieldHolder({name:"lineText",label:l.default("连线上文字（选填）"),config:{dataModelHash:d,holderId:e.chart.frontendId+"-lineText",maxCount:1}}),i.getDataModelFieldHolder({name:"sourceTitle",label:l.default("源节点标题（选填）"),config:{dataModelHash:d,holderId:e.chart.frontendId+"-sourceTitle",maxCount:1,onlyDimension:!0}}),i.getDataModelFieldHolder({name:"targetTitle",label:l.default("终节点标题（选填）"),config:{dataModelHash:d,holderId:e.chart.frontendId+"-targetTitle",maxCount:1,onlyDimension:!0}}),i.getDataModelFieldHolder({name:"sourceData",label:l.default("源节点内容（选填）"),config:{dataModelHash:d,holderId:e.chart.frontendId+"-sourceData",maxCount:1}}),i.getDataModelFieldHolder({name:"targetData",label:l.default("终节点内容（选填）"),config:{dataModelHash:d,holderId:e.chart.frontendId+"-targetData",maxCount:1}}),o.commonFilterForDataModel(d),o.commonBindUrlParamForDataModel(d),o.commonLimitForDataModel,{type:"select",name:"dataConfig.sourceNode",hiddenOn:"dataType != 'sql'",label:l.default("源节点id"),options:r},{type:"select",name:"dataConfig.targetNode",hiddenOn:"dataType != 'sql'",label:l.default("终节点id"),options:r},{type:"select",name:"dataConfig.lineText",hiddenOn:"dataType != 'sql'",label:l.default("连线上文字"),clearable:!0,options:r},{type:"select",name:"dataConfig.sourceTitle",hiddenOn:"dataType != 'sql'",label:l.default("源节点标题"),clearable:!0,options:r},{type:"select",name:"dataConfig.targetTitle",hiddenOn:"dataType != 'sql'",label:l.default("终节点标题"),clearable:!0,options:r},{type:"select",name:"dataConfig.sourceData",hiddenOn:"dataType != 'sql'",label:l.default("源节点内容"),clearable:!0,options:r},{type:"select",name:"dataConfig.targetData",hiddenOn:"dataType != 'sql'",label:l.default("终节点内容"),clearable:!0,options:r}];return t.concat(c,a)};var c=[{type:"color",name:l.default("背景色"),key:"background",defaultValue:"#3E4357"},{type:"color",name:l.default("字体色"),key:"fontColor",defaultValue:"#fff"}],u=function(e){return[{type:"divider"},{type:"fieldset",collapsed:!1,title:l.default("自定义配色"),collapsable:!0,headingClassName:"fieldset-title",controls:[r.amisInlineSwitch("config.openCustomColor",l.default("开启拓扑图颜色配置")),{type:"radios",name:"config.customColorType",inline:!1,hiddenOn:"!data.config.openCustomColor",label:"",options:[{label:l.default("本报表页面的主题配色"),value:"report"},{label:l.default("自定义"),value:"custom"}]},{name:"config.customColors",hiddenOn:"!data.config.openCustomColor || data.config.customColorType != 'custom'",children:function(a){var o=a.onChange,r=a.value;return d.createElement(n.default,t.__assign({},{onChange:o,value:r},{chartFrontendId:e.chart.frontendId,containerClassName:"form-group form-item",label:l.default("可增加2个配色项，依次对应节点和连线"),addTipText:l.default("新增配色项"),cols:c}))}}]}]};a.advancedCtrl=function(e){return t.__spreadArrays([r.amisInlineSwitch("config.titleCenter",l.default("标题居中")),r.amisInlineSwitch("config.contentCenter",l.default("内容居中")),{type:"radios",name:"config.rankdir",inline:!1,label:l.default("布局方式："),options:[{label:l.default("左右分布"),value:"LR"},{label:l.default("上下分布"),value:"TB"}]},{type:"text",label:l.default("矩形宽度设置"),placeholder:l.default("请输入宽度值"),name:"config.maxWidth"}],u(e))},a.basicCtrl=function(e){return u(e)}});
;sugar.define("sugar:widgets/charts/topology/topology.tsx",function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=t("sugar:node_modules/tslib/tslib.js"),n=t("sugar:utils/i18n.ts"),r=t("sugar:node_modules/react/index.js"),a=t("sugar:node_modules/react-mixin/index.js"),l=t("sugar:node_modules/lodash/cloneDeep.js"),i=t("sugar:widgets/charts/chart-manager.tsx"),d=t("sugar:widgets/charts/topology/topology-ctrl.tsx"),s=t("sugar:widgets/charts/_hoc/debug/debug.tsx"),c=t("sugar:widgets/charts/_hoc/drill-down/drill-down.tsx"),p=t("sugar:widgets/charts/_hoc/toolbar/toolbar.tsx"),u=t("sugar:widgets/charts/_hoc/chart-zoom/index.tsx"),h=t("sugar:widgets/charts/_hoc/echarts.tsx"),g=t("sugar:widgets/charts/_mixin/d3.tsx"),f=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return o.__extends(r,e),r.prototype.openDepOrDrill=function(t,e,n){var r=t.data;e&&this.props.chart.handleEvent("drillDown",this.props.mode,{drillDownItem:{item:o.__assign(o.__assign({},r),{_sugar_dd_default_:r.id}),fireKey:""},drillDownIndex:0}),this.props.hub.dependenceData.dependenceState&&this.props.hub.dependenceData.dependenceState.name===r.id?this.props.chart.handleEvent("cancelDependence",this.props.mode):n&&this.props.chart.handleEvent("dependence",this.props.mode,{dependenceIndex:0,dependenceState:{name:r.id},dependenceItem:{item:o.__assign(o.__assign({},r),{_sugar_dd_default_:r.id}),fireKey:""}})},r.prototype.refresh=function(t,e){e&&this.drawChart(t,e)},r.prototype.d3Unmount=function(){},r.prototype.resize=function(t){t&&this.drawChart(this.props,t)},r.prototype.initData=function(t){var e=t.chartData,o=(t.chartConfig,l(e));return o.nodes.map(function(t){(!(t.data instanceof Array)&&t.data||0===t.data)&&(t.data=[t.data]),(!(t.tooltip instanceof Array)&&t.tooltip||0===t.tooltip)&&(t.tooltip=[t.tooltip])}),o.links.map(function(t){(!(t.tooltip instanceof Array)&&t.tooltip||0===t.tooltip)&&(t.tooltip=[t.tooltip])}),o},r.prototype.mouseoverNodeEvent=function(t){var e=this.d3.select("div#d3TooltipDiv"),o="";void 0!=t.tooltip&&t.tooltip.map(function(t){o+="<span>"+t+"</span>"}),o.length&&e.html(o).style("left",this.d3.event.clientX+5+"px").style("top",this.d3.event.clientY+5+"px").style("color","").style("background-color","").style("display","block")},r.prototype.mouseoutEvent=function(){this.d3.select("div#d3TooltipDiv").style("display","none")},r.prototype.setHighlight=function(t,e){t.selectAll("g.node").style("opacity",.2),t.selectAll("g.node").filter(function(t){return t===e}).style("opacity",1)},r.prototype.cancelHighlight=function(t){t.selectAll("g.node").style("opacity",1)},r.prototype.drawChart=function(e,o){var r,a=this,l=e.chart,i=e.chartConfig,d=e.theme,s=!(!this.props.chart.drillDownOpen||!this.props.chart.drillDown.length),c=!!(this.props.chart.config.dependenceOpen&&this.props.chart.config.dependences&&this.props.chart.config.dependences.length),p=this.d3,u=this.initData(e),h=.98*parseInt(p.select(o).select(".d3-chart").style("width"),10),g=.98*parseInt(p.select(o).select(".d3-chart").style("height"),10),f=e.chartConfig,v=f.maxWidth?f.maxWidth:100,m=[{background:"#3E4357",fontColor:"#fff"},{background:"#3E4357",fontColor:l.isDashChart?"#fff":"#333"}];if(i.openCustomColor){var y=i.customColorType;if("report"===y)for(var C=(null===(r=d.config.chartTheme)||void 0===r?void 0:r.color)||[],b=0;2>b;b++)C[b]&&(m[b].background=C[b]);else if("custom"===y&&i.customColors&&i.customColors.length)for(var b=0;2>b;b++)i.customColors[b]&&(m[b].background=i.customColors[b].background||m[b].background,m[b].fontColor=i.customColors[b].fontColor||m[b].fontColor)}Promise.resolve().then(function(){return new Promise(function(e){t(["sugar:node_modules/dagre-d3/index.js"],function(t){e(t)})})}).then(function(t){var r=(new t.graphlib.Graph).setGraph({rankdir:f.rankdir?f.rankdir:"LR"});u.nodes.map(function(t){var e=' style="width:'+v+"px; ";(t.fontColor||t.bgColor)&&(e+=(t.fontColor?"color:"+t.fontColor+";":"")+(t.bgColor?"background-color:"+t.bgColor+";":"")),e+='">';var o='<div class="foreignObject"'+e;if((t.title||0===t.title)&&(o+='<div class="foreignObjectTitle'+(f.titleCenter?' titleCenter"':'"')+' style="background-color:'+m[0].background+";color:"+m[0].fontColor+';">'+t.title+"</div>"),t.data)if(f.contentCenter)for(var a=0;a<t.data.length;++a)t.data[a]&&(o+='<div class="foreignObjectBody contentCenter">'+t.data[a]+"</div>");else for(var a=0;a<t.data.length;++a)t.data[a]&&(o+='<div class="foreignObjectBody">'+t.data[a]+"</div>");t.title||t.data||0===t.title||(o+='<div class="foreignObjectBody">'+n.default("无数据")+"</div>"),o+="</div>",r.setNode(t.id,{label:o,labelType:"html",width:v,rx:5,ry:5,padding:0,tooltip:t.tooltip,data:t,style:"stroke: "+m[0].background+";"})}),u.links.map(function(t){r.setEdge(t.source,t.target,{label:null!=t.text?t.text.toString():"",lineInterpolate:"basis",arrowheadClass:"arrowhead",labelStyle:"font-size: 10px;font-weight: 300;fill: "+m[1].fontColor+";",tooltip:t.tooltip,style:"stroke: "+m[1].background+";",arrowheadStyle:"stroke: "+m[1].background+";fill: "+m[1].background+";"})});var l=p.select(o).select(".d3-chart").append("div").classed("d3-svg-container",!0).classed("d3-topology",!0).append("svg").attr("width",h).attr("height",g).attr("transform","translate(0,0)"),i=l.append("g"),d=p.zoom().scaleExtent([.1,3]).on("zoom",function(){i.attr("transform",p.event.transform)});"editor"!==e.mode&&l.call(d);var y=new t.render;y(i,r),i.selectAll("g.node").attr("cursor",s||c?"pointer":"auto").on("mouseover",function(t){return a.mouseoverNodeEvent(r.node(t))}).on("mouseout",a.mouseoutEvent.bind(a)).on("click",function(t){p.event.stopPropagation(),a.openDepOrDrill(r.node(t),s,c),c&&a.setHighlight(i,t)}),i.selectAll("g.edgePath").on("mouseover",function(t){return a.mouseoverNodeEvent(r.edge(t))}).on("mouseout",a.mouseoutEvent.bind(a)),p.select(o).on("click",function(){a.cancelHighlight(i),a.props.hub.dependenceData.dependenceState&&a.props.chart.handleEvent("cancelDependence",a.props.mode)});var C=r.graph().width+80,b=r.graph().height+40,k=Math.min(h/C,g/b),w=h/2-C*k/2,_=g/2-b*k/2;l.call(d.transform,p.zoomIdentity.translate(w,_).scale(k))})},r.displayName="Topology",r=o.__decorate([c.default,s.default,p.default,u.default,h.default,a.decorate(g.default)],r)}(r.Component);e.default=f;var v=function(t){if(!t)return n.default("无数据");if(!(t.nodes&&t.links&&t.nodes instanceof Array&&t.links instanceof Array))return n.default("数据中缺少nodes或links字段");if(!t.nodes.length||!t.links.length)return n.default("无数据");for(var e=0;e<t.nodes.length;e++){var o=t.nodes[e];if(!o.id&&0!==o.id)return n.default("nodes中第「"+(e+1)+"」个节点没有指定id")}for(var e=0;e<t.links.length;e++){var r=t.links[e];if(!r.source&&0!==r.source)return n.default("links中第「"+(e+1)+"」个节点没有指定source id");if(!r.target&&0!==r.target)return n.default("links中第「"+(e+1)+"」个节点没有指定target id")}return!0},m=function(t){var e=t.dataConfig.dataModel,o=e.sourceNode,n=void 0===o?[]:o,r=e.targetNode,a=void 0===r?[]:r,l=e.lineText,i=void 0===l?[]:l,d=e.sourceTitle,s=void 0===d?[]:d,c=e.targetTitle,p=void 0===c?[]:c,u=e.sourceData,h=void 0===u?[]:u,g=e.targetData,f=void 0===g?[]:g;return 1!==n.length||1!==a.length?!1:i.length>1||s.length>1||p.length>1||h.length>1||f.length>1?!1:!0};i.register({kind:"otherChart",type:"topology",name:n.default("拓扑图"),iconClassName:"chart-topology",enableTemplate:!0,component:f,validate:v,basicCtrl:d.basicCtrl,dataBindCtrl:d.dataBindCtrl,advancedCtrl:d.advancedCtrl,initialState:{dataType:"api",dataApiUrl:d.chartDemoUrl,config:{rankdir:"LR",maxWidth:120,customColorType:"report"}},drillDownType:"single",canBeDrillChild:!0,drillChildName:n.default("拓扑图"),noCancelDependenceButton:!0,dataModelPanelShow:[["dataType","dataModel"]],drillDownSuggestDataModelField:"sourceNode",loadDataWhenDataModelConfigChange:m,reportOnly:!0})});
;sugar.define("sugar:widgets/charts/river/river-ctrl.tsx",function(e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.advancedCtrl=a.dataBindCtrl=a.chartEigens=a.chartDemoUrl=void 0;var t=e("sugar:node_modules/tslib/tslib.js"),l=e("sugar:utils/i18n.ts"),d=e("sugar:widgets/ctrl-panel/data-bind-ctrl/index.tsx"),n=e("sugar:widgets/amis-inline-switch.tsx"),o=e("sugar:widgets/data-model/data-model-field-holder/data-model-field-holder.tsx"),i=e("sugar:widgets/charts/utils/common.tsx"),r=[{label:l.default("数值"),value:"normal"},{label:l.default("百分比(*100 %)"),value:"percent"},{label:l.default("秒转时分秒"),value:"chartTimeVal"},{label:l.default("字节转MB/GB"),value:"chartByteVal"},{label:l.default("字节转Mbps（带宽）"),value:"chartBps"}],s="/openapi/demo/chart?type=river";a.chartDemoUrl="$CUR_HOST/openapi/demo/chart?type=river",a.chartEigens=[{field:[{name:"x",type:"d",subType:["date","datetime","timestamp"],minCount:1,maxCount:1},{name:"y",type:"m",minCount:1,maxCount:1},{name:"color",type:"d",minCount:1,maxCount:1}]}],a.dataBindCtrl=function(e){var a=d.getDebugAndRefreshBtn({loadData:e.chart.loadData,loadDebugData:e.chart.loadDebugData,dataType:e.chart.dataType,refreshText:l.default("刷新图表")}),n=e.chart.dataModelHash||"",i=e.sqlModelStore.detailMap.mapByHash.get(n),r=d.generateSQLFieldList(i),c=d.getDataBindCommon({frontendId:e.chart.frontendId,dataTypeOptions:["dataModel","api","sql","json"],api:{demoUrl:s},sql:{needContinuitySetting:!0,sqlFieldList:r},loadData:e.chart.loadData,loadDebugData:e.chart.loadDebugData,curUrl:e.chart.dataApiUrl}),m=t.__spreadArrays([o.getDataModelFieldHolder({name:"x",label:l.default("横轴（日期或时间维度）"),config:{dataModelHash:n,holderId:e.chart.frontendId+"-x",maxCount:1,onlyDimension:!0}}),o.getDataModelFieldHolder({name:"y",label:l.default("取值"),config:{dataModelHash:n,holderId:e.chart.frontendId+"-y",maxCount:1,onlyMeasure:!0}}),o.getDataModelFieldHolder({name:"color",label:l.default("颜色/类别（可不填）"),config:{dataModelHash:n,holderId:e.chart.frontendId+"-color",maxCount:1,onlyDimension:!0}}),d.commonFilterForDataModel(n),d.commonBindUrlParamForDataModel(n)],o.getChartConditionsHolder(n,e.chart),[d.commonLimitForDataModel,{type:"select",name:"dataConfig.categories",hiddenOn:"data.dataType != 'sql'",label:l.default("横轴绑定字段"),placeholder:l.default("请选择"),options:r},{type:"select",name:"dataConfig.yData",hiddenOn:"data.dataType != 'sql'",label:l.default("取值绑定字段"),placeholder:l.default("请选择"),options:r},{type:"select",name:"dataConfig.yDataCat",hiddenOn:"data.dataType != 'sql'",label:l.default("取值类别绑定字段"),placeholder:l.default("请选择"),clearable:!0,options:r}]);return c.concat(m,a)},a.advancedCtrl=[n.amisInlineSwitch("config.chartMarkLine",l.default("开启日期分割标线")),{type:"divider"},i.getTooltipCtrl([n.amisInlineSwitch("config.showPercent",l.default("Tooltip中显示占比")),n.amisInlineSwitch("config.slideShow",l.default("开启提示轮播")),{type:"number",name:"config.slideInterval",hiddenOn:"!config.slideShow",label:l.default("轮播间隔秒数"),step:1,min:1}]),{type:"divider"},i.getLegendCtrl(),{type:"divider"},{type:"fieldset",collapsed:!0,title:l.default("数据设置"),collapsable:!0,headingClassName:"fieldset-title",controls:[{type:"select",name:"config.yType",label:l.default("数据类型"),clearable:!0,placeholder:l.default("请选择"),options:r},i.dataUnitCtrl]},{type:"divider"},{type:"fieldset",collapsed:!0,title:l.default("X轴设置"),collapsable:!0,headingClassName:"fieldset-title",controls:[n.amisInlineSwitch("config.xLableAllShow",l.default("X轴标签全部展示")),{type:"number",name:"config.xLabelRotate",label:l.default("X轴标签倾斜度(-90至90)"),hiddenOn:"!config.xLableAllShow",min:-90,max:90,step:5},n.amisInlineSwitch("config.xLableVertical",l.default("竖着显示文字")),n.amisInlineSwitch("config.chartDataZoom",l.default("开启X轴缩放")),{type:"number",name:"config.dataZoomStart",label:l.default("默认缩放起始百分比(%)"),hiddenOn:"!config.chartDataZoom",step:5,max:95,min:0},{type:"number",name:"config.dataZoomEnd",label:l.default("默认缩放结束百分比(%)"),hiddenOn:"!config.chartDataZoom",step:5,max:100,min:5},{type:"group",controls:[{type:"number",label:l.default("X轴标签字号"),name:"config.xFontSize",step:1,min:8,max:100},{type:"number",name:"config.marginBottom",label:l.default("X轴底边距(像素)"),step:5,min:10}]}]}]});
;sugar.define("sugar:widgets/charts/river/river-helper.ts",function(r,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.riverTooltipFormatter=a.formatYValue=void 0;var t=r("sugar:utils/i18n.ts"),e=r("sugar:utils/common-helper.ts");a.formatYValue=function(r,a,t){return r=a&&"normal"!==a?e.formatDataByType(r,a):e.formatStringOrNumber(r,t||null,!0)},a.riverTooltipFormatter=function(r,e,o,n,i,u){r instanceof Array||(r=[r]);for(var l,s=0;s<r.length;s++)if(r[s].data&&""!==r[s].data[0]){l=r[s].data[0];break}e.tooltipSort&&r.sort(function(r,a){return parseFloat(r.data[1]||0)<parseFloat(a.data[1]||0)?1:-1});for(var d=0,s=0;s<r.length;s++)r[s].data&&!isNaN(r[s].data[1])&&(d+=+r[s].data[1]);var f=i||e.yType,m=r.map(function(r){var t=r.name,i=r.data[1]||0,l=a.formatYValue(i,f,o);null==!l&&(l="-");var s="";return d&&i&&e.showPercent&&(s=" ("+(i/d*100).toFixed(2)+"%)"),""+r.marker+t+": "+u+l+n+s});return d=a.formatYValue(d,f,o),m.push(t.default("合计: ")+" "+u+d+n),"<div>"+l+"<br/>"+m.join("<br/>")+"</div>"}});
;sugar.define("sugar:widgets/charts/river/river.tsx",function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=t("sugar:node_modules/tslib/tslib.js"),r=t("sugar:utils/i18n.ts"),o=t("sugar:node_modules/react/index.js"),n=t("sugar:node_modules/echarts/dist/echarts.js"),i=t("sugar:widgets/charts/chart-manager.tsx"),l=t("sugar:widgets/charts/river/river-ctrl.tsx"),s=t("sugar:widgets/charts/_hoc/echarts.tsx"),d=t("sugar:node_modules/react-mixin/index.js"),c=t("sugar:widgets/charts/_mixin/echarts.tsx"),u=t("sugar:widgets/charts/_hoc/debug/debug.tsx"),h=t("sugar:widgets/charts/_hoc/drill-down/drill-down.tsx"),g=t("sugar:widgets/charts/_hoc/toolbar/toolbar.tsx"),f=t("sugar:widgets/charts/_hoc/chart-zoom/index.tsx"),m=t("sugar:node_modules/lodash/cloneDeep.js"),p=t("sugar:widgets/charts/river/river-helper.ts"),v=t("sugar:utils/common-helper.ts"),x=t("sugar:utils/export-file/export-csv.ts"),y=t("sugar:utils/export-file/export-excel.ts"),C=t("sugar:utils/animation.ts"),w=t("sugar:widgets/charts/utils/common.tsx"),S=t("sugar:widgets/charts/utils/helper.ts"),b=12,_=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sliderIntervalEvent="",e.sliderIndex=-1,e.legendSelected={},e}return a.__extends(e,t),e.prototype.willReceiveProps=function(t,e){t.chartConfig.defaultLegendCount!==e.chartConfig.defaultLegendCount&&(this.legendSelected={})},e.prototype.willUnmount=function(){this.sliderIntervalEvent&&clearInterval(this.sliderIntervalEvent)},e.prototype.refresh=function(t){var e=this,r=t.chartData,o=t.chartConfig,i=t.chart,l=m(r),s=l.legend,d=l.data,c=l.unit,u=l.accuracy,h=l.dataFormat,g=this.chart,f=g.getHeight(),v=o.marginBottom||55,x=void 0!==o.chartLegend?o.chartLegend:!0,y=parseInt(o.defaultLegendCount||"0",10),_={};c=c||o.unit||"";var L,I,B=o.prefix||"",T=i.isDashChart?"#ccc":"#333";o.openCustomColor&&(L=o.textColor,I=o.lineColor),L=L||T,I=I||T;for(var D={},E=0,R=d;E<R.length;E++){var A=R[E],O=A[0],Z=A[1],j=A[2];D[O]||(D[O]={}),D[O][j]=Z}for(var F=0,N=Object.keys(D);F<N.length;F++)for(var M=N[F],A=D[M],P=0,z=s;P<z.length;P++){var k=z[P];void 0===A[k]&&d.push([M,0,k])}for(var U=0,V=d;U<V.length;U++){var A=V[U],O=A[0],Z=A[1],j=A[2];D[O]||(D[O]={}),D[O][j]=Z}var G=void 0;o.chartDataZoom&&s.length&&(v+=50,f&&(G=f-v+50,G+32>f&&(G=f-32)));var H={type:"value",boundaryGap:!0,bottom:v+"px",axisLine:{lineStyle:{color:I,width:1}},axisLabel:{color:L,fontSize:o.xFontSize||b},axisTick:{alignWithLabel:!0,lineStyle:{color:I}},splitLine:{show:o.chartMarkLine,lineStyle:{color:I,type:"dashed",opacity:.2}}};isNaN(d[0][0])&&(H.type="time"),o.xLableAllShow&&(H.axisLabel.interval=0),o.xLableAllShow&&o.xLabelRotate&&parseInt(o.xLabelRotate,10)&&(H.axisLabel.rotate=parseInt(o.xLabelRotate,10)),o.xLableVertical&&(H.axisLabel.formatter=function(t){return(t+"").split("").join("\n")});var W={textStyle:S.getTextStyle(o),legend:a.__assign(a.__assign({},S.legendPositionConfig({marginRight:20,marginLeft:20,marginTop:20,marginBottom:20},o)),{data:s,show:x,selected:x&&y?this.legendSelected:_,textStyle:{fontFamily:o.legendFontFamily||null,fontSize:o.legendFontSize||b,color:o.legendTextColor||L}}),dataZoom:{show:!!o.chartDataZoom,realtime:!0,start:o.chartDataZoom?o.dataZoomStart||0:0,end:o.chartDataZoom?o.dataZoomEnd||100:100,y:G},singleAxis:H,series:{type:"themeRiver",itemStyle:{},emphasis:{itemStyle:{shadowBlur:o.shadowBlur?o.shadowBlur+10:20,shadowColor:"rgba(0, 0, 0, 0.8)"}},label:{show:!1},data:d},tooltip:{trigger:"axis",confine:o.tooltipConfine||!1,extraCssText:w.getTooltipCss(o),axisPointer:{lineStyle:o.openCustomColor&&o.axisPoiLineColor?{color:o.axisPoiLineColor}:{}},formatter:function(t){return p.riverTooltipFormatter(t,o,u,c,h,B)}}};if(o.openCustomShadow&&o.shadowBlur){var X=W.series.itemStyle;X.shadowBlur=o.shadowBlur,X.shadowColor=o.shadowColor||"rgba(0, 0, 0, 0.5)",X.shadowOffsetX=o.shadowOffsetX||0,X.shadowOffsetY=o.shadowOffsetY||0}if(o.openCustomColor&&o.customColors&&o.customColors.length&&(W.color=o.customColors.map(function(t){return t.color&&t.color1&&!isNaN(t.ratio)?new n.graphic.LinearGradient(o.chartReverse?1:0,0,0,o.chartReverse?0:1,[{offset:0,color:t.color1},{offset:Math.max(1-t.ratio/100,0),color:t.color},{offset:1,color:t.color}]):t.color||t.color1})),this.sliderIntervalEvent&&clearInterval(this.sliderIntervalEvent),C.setAnimationOption(W,o),g.setOption(W,!0),y&&g.on("legendselectchanged",function(t){e.legendSelected=t.selected}),o.slideShow){var Y=function(){try{e.sliderIndex++,g.dispatchAction({type:"hideTip"}),g.dispatchAction({type:"showTip",seriesIndex:0,dataIndex:e.sliderIndex%d.length})}catch(t){}};Y(),this.sliderIntervalEvent=setInterval(Y,1e3*(parseInt(o.slideInterval,10)||3))}},e.displayName="River",e=a.__decorate([h.default,u.default,g.default,f.default,s.default,d.decorate(c.default)],e)}(o.Component);e.default=_;var L=function(t){if(!t)return r.default("无数据");if(!(t.legend&&t.data&&t.legend instanceof Array&&t.data instanceof Array))return r.default("数据中缺少legend或data字段");if(!t.legend.length||!t.data.length)return r.default("无数据");for(var e=0;e<t.data.length;e++){var a=t.data[e];if(!a||3!==a.length)return r.default("第「"+(e+1)+"」个数据项内容不全");if(!v.isValueOfTypes(a[1],["number","numberString"]))return r.default("第「"+(e+1)+"」个数据项中，第二个值不是数字");if(null==a[0])return r.default("data中第「"+(e+1)+"」个数据项中第一个值不能为空，必须是日期或者时间格式的字符串")}return!0},I=function(t,e){var a=D(t);y.exportExcelByColumns(a,""+(e.dynamicName||e.name||"export"))},B=function(t,e){var a=D(t);x.exportCsvByColumns(a,(e.dynamicName||e.name||"export")+".csv")},T=function(t){var e=D(t);return y.exportRowsByColumns(e)},D=function(t){var e=[[],[],[]];return t&&t.data&&t.data.data&&t.data.data.length&&t.data.data.forEach(function(t){e[0].push(t[0]),e[1].push(t[1]),e[2].push(t[2])}),e},E=function(t){var e=t.dataConfig.dataModel,a=e.x,r=void 0===a?[]:a,o=e.y,n=void 0===o?[]:o;return r.length&&n.length?!0:!1};i.register({kind:"otherChart",type:"river",name:r.default("河流图"),iconClassName:"chart-river",enableTemplate:!0,commonCustomShadow:!0,commonCustomColor:!0,initialState:{dataType:"api",dataApiUrl:l.chartDemoUrl,dataConfig:{categoriesSort:"default",continuity_type:"simple",continuity_empty_val:"1",continuity_time_step:"1Hour"},config:{chartLegend:!0,dataZoomStart:60,dataZoomEnd:100,marginBottom:60,yType:"normal",slideInterval:3}},initialDashboardState:{width:500,height:240},component:_,dataBindCtrl:l.dataBindCtrl,advancedCtrl:l.advancedCtrl,exportCSV:B,exportExcel:I,exportRows:T,needDashboardAutoFresh:!0,validate:L,canBeDrillChild:!0,dataModelPanelShow:[["dataType","dataModel"]],loadDataWhenDataModelConfigChange:E,chartEigens:l.chartEigens})});
;sugar.define("sugar:widgets/charts/calendar-heatmap/calendar-heatmap-ctrl.tsx",function(e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.advancedCtrl=a.dataBindCtrl=a.chartEigens=a.chartDemoUrl=a.basicCtrl=void 0;var t=e("sugar:node_modules/tslib/tslib.js"),n=e("sugar:utils/i18n.ts"),l=e("sugar:node_modules/react/index.js"),o=e("sugar:widgets/ctrl-panel/data-bind-ctrl/index.tsx"),i=e("sugar:widgets/object-array-editor/object-array-editor.tsx"),d=e("sugar:widgets/amis-inline-switch.tsx"),r=e("sugar:widgets/data-model/data-model-field-holder/data-model-field-holder.tsx"),c=e("sugar:widgets/charts/utils/common.tsx"),m=[{type:"color",name:n.default("颜色"),key:"color",defaultValue:"#23b7e5"}],s=[{type:"text",key:"begin",name:n.default("大于"),placeholder:n.default("不确定可不填"),tdStyle:{minWidth:70}},{type:"text",key:"end",name:n.default("小于等于"),placeholder:n.default("不确定可不填"),tdStyle:{minWidth:70}}],u=function(e){return[{type:"divider"},{type:"fieldset",collapsed:!1,title:n.default("自定义配色"),collapsable:!0,headingClassName:"fieldset-title",controls:[d.amisInlineSwitch("config.openCustomColor",n.default("开启自定义配色")),{type:"color",name:"config.textColor",format:"rgba",label:n.default("文字颜色"),hiddenOn:"!data.config.openCustomColor"},{type:"color",name:"config.lineColor",format:"rgba",hiddenOn:"!data.config.openCustomColor",label:n.default("分割线颜色")},{type:"color",name:"config.monthLineColor",format:"rgba",hiddenOn:"!data.config.openCustomColor",label:n.default("月分割线和外边框颜色")},{type:"color",name:"config.gridColor",format:"rgba",hiddenOn:"!data.config.openCustomColor",label:n.default("无数据网格颜色")},{name:"config.customColors",hiddenOn:"!data.config.openCustomColor",children:function(a){var o=a.onChange,d=a.value;return l.createElement(i.default,t.__assign({},{onChange:o,value:d},{chartFrontendId:e.chart.frontendId,containerClassName:"form-group form-item",label:n.default("每个配色对应一个颜色分界"),addTipText:n.default("新增配色项"),cols:m}))}}]}]};a.basicCtrl=function(e){return u(e)};var f="/openapi/demo/chart?type=calHmap";a.chartDemoUrl="$CUR_HOST/openapi/demo/chart?type=calHmap",a.chartEigens=[{field:[{name:"x",type:"d",subType:"date",minCount:1,maxCount:1},{name:"value",type:"m",minCount:1,maxCount:1}]}],a.dataBindCtrl=function(e){var a=o.getDebugAndRefreshBtn({loadData:e.chart.loadData,loadDebugData:e.chart.loadDebugData,dataType:e.chart.dataType,refreshText:n.default("刷新图表")}),l=e.chart.dataModelHash||"",i=e.sqlModelStore.detailMap.mapByHash.get(l),d=o.generateSQLFieldList(i),c=o.getDataBindCommon({frontendId:e.chart.frontendId,dataTypeOptions:["dataModel","api","sql","json"],api:{demoUrl:f},sql:{needContinuitySetting:!1,sqlFieldList:d},loadData:e.chart.loadData,loadDebugData:e.chart.loadDebugData,curUrl:e.chart.dataApiUrl}),m=t.__spreadArrays([r.getDataModelFieldHolder({name:"x",label:n.default("日期维度字段"),config:{dataModelHash:l,holderId:e.chart.frontendId+"-x",maxCount:1,onlyDimension:!0}}),r.getDataModelFieldHolder({name:"value",label:n.default("取值字段"),config:{dataModelHash:l,holderId:e.chart.frontendId+"-value",maxCount:1,onlyMeasure:!0}}),o.commonFilterForDataModel(l),o.commonBindUrlParamForDataModel(l)],r.getChartConditionsHolder(l,e.chart),[o.commonLimitForDataModel,{type:"select",name:"dataConfig.dateField",hiddenOn:"data.dataType != 'sql'",label:n.default("日期字段"),placeholder:n.default("请选择"),options:d},{type:"select",name:"dataConfig.valueField",hiddenOn:"data.dataType != 'sql'",label:n.default("取值字段"),placeholder:n.default("请选择"),options:d}]);return c.concat(m,a)},a.advancedCtrl=function(e){return t.__spreadArrays([{name:"config.startDay",label:n.default("周起始日"),type:"radios",mode:"inline",options:[{label:n.default("周日"),value:0},{label:n.default("周一"),value:1}]},{type:"group",controls:[d.amisInlineSwitch("config.column",n.default("列模式")),d.amisInlineSwitch("config.splitLine",n.default("每年独占一行"),"config.column"),d.amisInlineSwitch("config.splitLine",n.default("每年独占一列"),"!config.column")]},{type:"group",controls:[d.amisInlineSwitch("config.wholeBegin",n.default("完整显示起始年")),d.amisInlineSwitch("config.wholeEnd",n.default("完整显示结束年"))]},{type:"number",name:"config.splitWidth",label:n.default("月度分割线宽度"),step:1,min:1,max:10},{type:"group",controls:[{type:"number",label:n.default("日/月字号"),name:"config.dayFontSize",step:1,min:8,max:100},{type:"number",label:n.default("年字号"),name:"config.yearFontSize",step:1,min:8,max:100}]},c.dataUnitCtrl,{type:"divider"},c.getTooltipCtrl([d.amisInlineSwitch("config.tooltipPercent",n.default("Tooltip中显示占比"))]),{type:"divider"},{type:"fieldset",title:n.default("图例设置(legend)"),collapsed:!0,collapsable:!0,headingClassName:"fieldset-title",controls:t.__spreadArrays(c.legendBasicCtrl.slice(0,7),[{type:"number",name:"config.fixNumber",label:n.default("保留小数位数"),step:1,max:10,min:0},d.amisInlineSwitch("config.cusVal",n.default("自定义每段颜色映射边界值")),{name:"config.customColorRange",hiddenOn:"!config.cusVal",children:function(a){var o=a.onChange,d=a.value;return l.createElement(i.default,t.__assign({},{onChange:o,value:d},{chartFrontendId:e.chart.frontendId,containerClassName:"form-group form-item",label:n.default("请指定每段颜色的起始值和结束值"),addTipText:n.default("新增一段颜色映射"),cols:s}))}},{type:"number",name:"config.splitNumber",label:n.default("颜色映射段数"),hiddenOn:"config.cusVal",step:1,min:1}])},{type:"divider"},{type:"fieldset",title:n.default("边距设置（行模式）"),hiddenOn:"config.column",collapsed:!0,collapsable:!0,headingClassName:"fieldset-title",controls:[{type:"group",hiddenOn:"config.column",controls:[{type:"number",name:"config.marginLeft",label:n.default("左边距(像素)"),step:5,min:20},{type:"number",name:"config.marginRight",label:n.default("右边距(像素)"),step:5,min:10}]},{type:"group",hiddenOn:"config.column",controls:[{type:"number",name:"config.marginTop",label:n.default("顶边距(百分比)"),step:1,min:0},{type:"number",name:"config.marginBottom",label:n.default("底边距(百分比)"),step:1,min:0}]},{type:"number",name:"config.margin",label:n.default("日历间距(百分比)"),hiddenOn:"config.column",step:1,min:0}]},{type:"fieldset",collapsed:!0,title:n.default("边距设置（列模式）"),collapsable:!0,hiddenOn:"!config.column",headingClassName:"fieldset-title",controls:[{type:"html",hiddenOn:"!config.column",html:'<div class="fieldset-title"></div>'},{type:"group",hiddenOn:"!config.column",controls:[{type:"number",name:"config.marginLeftCol",label:n.default("左边距(百分比)"),step:1,min:0},{type:"number",name:"config.marginRightCol",label:n.default("右边距(百分比)"),step:1,min:0}]},{type:"group",hiddenOn:"!config.column",controls:[{type:"number",name:"config.marginTopCol",label:n.default("顶边距(像素)"),step:5,min:0},{type:"number",name:"config.marginBottomCol",label:n.default("底边距(像素)"),step:5,min:0}]},{type:"number",name:"config.marginCol",label:n.default("日历间距(百分比)"),hiddenOn:"!config.column",step:1,min:0}]}],u(e))}});
;sugar.define("sugar:widgets/charts/calendar-heatmap/calendar-heatmap.tsx",function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=t("sugar:node_modules/tslib/tslib.js"),r=t("sugar:utils/i18n.ts"),o=t("sugar:node_modules/react/index.js"),n=t("sugar:widgets/charts/chart-manager.tsx"),i=t("sugar:widgets/charts/calendar-heatmap/calendar-heatmap-ctrl.tsx"),l=t("sugar:widgets/charts/_hoc/echarts.tsx"),s=t("sugar:node_modules/react-mixin/index.js"),d=t("sugar:widgets/charts/_mixin/echarts.tsx"),u=t("sugar:widgets/charts/_hoc/debug/debug.tsx"),g=t("sugar:widgets/charts/_hoc/drill-down/drill-down.tsx"),m=t("sugar:widgets/charts/_hoc/toolbar/toolbar.tsx"),c=t("sugar:widgets/charts/_hoc/chart-zoom/index.tsx"),h=t("sugar:node_modules/lodash/cloneDeep.js"),p=t("sugar:utils/common-helper.ts"),f=t("sugar:utils/export-file/export-csv.ts"),C=t("sugar:utils/date-helper.ts"),v=t("sugar:node_modules/lodash/merge.js"),x=t("sugar:utils/export-file/export-excel.ts"),y=t("sugar:utils/animation.ts"),w=t("sugar:widgets/charts/utils/common.tsx"),b=t("sugar:widgets/charts/utils/helper.ts"),S=12,D=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a.__extends(e,t),e.prototype.getDrillDownParam=function(t){var e={date:t.value[0],value:t.value[1],_sugar_dd_default_:t.value[0]};return e},e.prototype.getDependenceParam=function(t){return{item:this.getDrillDownParam(t),state:{seriesIndex:t.seriesIndex,dataIndex:t.dataIndex}}},e.prototype.refresh=function(t){var e=t.chartData,o=t.chartConfig,n=t.chart,i=t.hub,l=h(e),s=l.unit||o.unit||"",d=o.prefix||"",u=l.dataFormat||"";l=l.data?l.data:l;var g=this.chart,m=o.marginTop||0,c=o.marginBottom||0,f=o.marginLeft||0,C=o.marginRight||0,x=o.margin||0,D=!!o.column;D&&(m=o.marginTopCol||0,c=o.marginBottomCol||0,f=o.marginLeftCol||0,C=o.marginRightCol||0,x=o.marginCol||0);var _,B,L,M=void 0!==o.chartLegend?o.chartLegend:!0,F=n.isDashChart?"#ccc":"#333",N=n.isDashChart?"#000":"#ccc";o.openCustomColor&&(_=o.textColor,B=o.lineColor,L=B||o.monthLineColor),_=_||F,B=B||N,L=L||"#000",l.sort(function(t,e){return t[0]>e[0]?0:-1});var T,R,z=l.reduce(function(t,e){return(void 0===T||T>e[1])&&(T=+e[1]),(void 0===R||R<e[1])&&(R=+e[1]),t+ +e[1]},0);o.cusVal&&(T=isNaN(o.min)?T:o.min,R=isNaN(o.max)?R:o.max);var E;if(o.splitLine){for(var I=new Set,O=0,P=l;O<P.length;O++){var j=P[O];I.add(j[0].substr(0,4))}var V=Array.from(I);E=V.sort().concat(),E.length>1?(E[0]=[l[0][0],E[0]+"-12-31"],E[E.length-1]=[E[E.length-1]+"-01-01",l[l.length-1][0]],o.wholeBegin&&(E[0]=[V[0]+"-01-01",V[0]+"-12-31"]),o.wholeEnd&&(E[E.length-1]=[V[E.length-1]+"-01-01",V[E.length-1]+"-12-31"])):(E[0]=[l[0][0],l[l.length-1][0]],o.wholeBegin&&(E[0][0]=V[0]+"-01-01"),o.wholeEnd&&(E[0][1]=V[0]+"-12-31"))}else{var I=[l[0][0],l[l.length-1][0]],W=new Date(I[0]).getFullYear(),A=new Date(I[1]).getFullYear();o.wholeBegin&&(I[0]=W+"-01-01"),o.wholeEnd&&(I[1]=A+"-12-31"),E=[I]}var Y,k,U=[],X=[];D?(Y=(100-f-C-x*(E.length-1))/E.length,k=f):(Y=(100-m-c-x*(E.length-1))/E.length,k=m);for(var H=function(t){var e={range:E[t],orient:D?"vertical":"horizontal",splitLine:{show:!0,lineStyle:{width:o.splitWidth||4,type:"solid",color:L}},dayLabel:{nameMap:"cn",position:"start",firstDay:o.startDay||0,fontSize:o.dayFontSize||S,color:_},monthLabel:{nameMap:"cn",fontSize:o.dayFontSize||S,color:_},yearLabel:{position:D?"top":"right",align:"center",margin:D?30:10,textStyle:{fontSize:o.yearFontSize||20,color:_}},itemStyle:{color:n.isDashChart?"rgba(255, 255, 255, 0.1)":"#fff",borderWidth:1,borderColor:B}};D?(e.left=k+"%",e.width=Y+"%",e.top=m,e.bottom=c):(e.left=f,e.right=C,e.height=Y+"%",e.top=k+"%"),o.openCustomColor&&o.monthLineColor&&(e.splitLine.lineStyle.color=o.monthLineColor),o.openCustomColor&&o.gridColor&&(e.itemStyle.color=o.gridColor),U.push(e);var a={type:"heatmap",coordinateSystem:"calendar",calendarIndex:t,data:l};if(i.dependenceData.dependenceState){var r=i.dependenceData.dependenceState,s=r.seriesIndex,d=r.dataIndex;s===t?a.data=a.data.map(function(t,e){return{value:t,itemStyle:{opacity:e===d?1:.2}}}):a.itemStyle=v({},a.itemStyle,{opacity:.2})}else a.itemStyle=v({},a.itemStyle,{opacity:1});X.push(a),k+=x+Y},q=0;q<E.length;q++)H(q);var G={visualMap:a.__assign(a.__assign({right:"center"},b.legendPositionConfig({marginRight:20,marginLeft:20,marginTop:20,marginBottom:20},o)),{show:M,type:"piecewise",textStyle:{fontFamily:o.legendFontFamily||null,fontSize:o.legendFontSize||S,color:o.legendTextColor||_},formatter:function(t,e){var a=parseInt(o.fixNumber||0,10);return t===-1/0?"≤ "+d+e.toFixed(a)+s:1/0===e?"> "+d+t.toFixed(a)+s:""+d+t.toFixed(a)+s+" - "+d+e.toFixed(a)+s}}),tooltip:{trigger:"item",confine:o.tooltipConfine||!1,extraCssText:w.getTooltipCss(o),formatter:function(t){return t.marker+" "+t.value[0]+"</br>"+d+p.formatDataByType(t.value[1],u)+s+(o.tooltipPercent?"</br>"+r.default("占比：")+(t.value[1]/z*100).toFixed(2)+"%":"")}},itemStyle:{},calendar:U,series:X};if(D&&(G.visualMap.right=10,G.visualMap.left="auto",G.visualMap.top="middle",G.visualMap.orient="vertical"),o.cusVal&&o.customColorRange&&o.customColorRange.length?G.visualMap.pieces=o.customColorRange.map(function(t){var e={};return""===t.begin||isNaN(t.begin)||(e.gt=+t.begin),""===t.end||isNaN(t.end)||(e.lte=+t.end),e}).reverse():(G.visualMap.min=T,G.visualMap.max=R,G.visualMap.splitNumber=o.splitNumber||5),o.openCustomColor&&o.customColors&&o.customColors.length&&(G.visualMap.inRange={color:o.customColors.map(function(t){return t.color||"#fff"})}),o.openCustomShadow&&o.shadowBlur){var J=G.itemStyle;J.shadowBlur=o.shadowBlur,J.shadowColor=o.shadowColor||"rgba(0, 0, 0, 0.5)",J.shadowOffsetX=o.shadowOffsetX||0,J.shadowOffsetY=o.shadowOffsetY||0}y.setAnimationOption(G,o),g.setOption(G,!0)},e.displayName="CalendarHeatmap",e=a.__decorate([g.default,u.default,m.default,c.default,l.default,s.decorate(d.default)],e)}(o.Component);e.default=D;var _=function(t){if(t=t.data?t.data:t,!t||!t.length)return r.default("无数据");for(var e=0;e<t.length;e++){var a=t[e];if(!a||2!==a.length)return r.default("第「"+(e+1)+"」项数据不存在或缺少日期/取值");if(C.formatDate(a[0])!==a[0])return r.default("第「"+(e+1)+"」项数据日期格式不符合要求，需要「yyyy-mm-dd」格式");if(!p.isValueOfTypes(a[1],["number","numberString"]))return r.default("第「"+(e+1)+"」项数据取值格式不符合要求，需要是数值")}return!0},B=function(t,e){F(t,e,!0)},L=function(t,e){F(t,e)},M=function(t){return t.data.data?t.data.data:t.data},F=function(t,e,a){if(void 0===a&&(a=!1),t&&t.data){var r=t.data.data?t.data.data:t.data;a?x.exportExcelByRows(r,""+(e.dynamicName||e.name||"export")):f.exportCsvByRows(r,(e.dynamicName||e.name||"export")+".csv")}},N=function(t){var e=t.dataConfig.dataModel,a=e.x,r=void 0===a?[]:a,o=e.value,n=void 0===o?[]:o;return r.length&&n.length?!0:!1};n.register({kind:"otherChart",type:"calendar-heatmap",name:r.default("日历热力图"),iconClassName:"chart-calendar-heatmap",enableTemplate:!0,commonCustomShadow:!0,initialState:{dataType:"api",dataApiUrl:i.chartDemoUrl,width:8,height:220,config:{column:!1,chartLegend:!0,splitLine:!0,wholeBegin:!0,wholeEnd:!0,startDay:1,tooltipPercent:!0,min:0,max:1e3,splitNumber:5,splitWidth:1,cusVal:!1,margin:10,marginTop:10,marginBottom:15,marginLeft:40,marginRight:40,marginCol:10,marginTopCol:60,marginBottomCol:30,marginLeftCol:10,marginRightCol:25}},initialDashboardState:{width:890,height:190,config:{splitWidth:3,marginTop:20,marginBottom:20,margin:20}},component:D,basicCtrl:i.basicCtrl,dataBindCtrl:i.dataBindCtrl,advancedCtrl:i.advancedCtrl,exportCSV:L,exportExcel:B,exportRows:M,needDashboardAutoFresh:!0,validate:_,drillDownType:"single",canBeDrillChild:!0,dataModelPanelShow:[["dataType","dataModel"]],drillDownSuggestDataModelField:"x",loadDataWhenDataModelConfigChange:N,chartEigens:i.chartEigens})});
;sugar.define("sugar:widgets/charts/3d-bar/3d-bar-ctrl.tsx",function(e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.advancedCtrl=a.dataBindCtrl=a.chartEigens=a.chartDemoUrl=void 0;var t=e("sugar:node_modules/tslib/tslib.js"),l=e("sugar:utils/i18n.ts"),d=e("sugar:node_modules/react/index.js"),n=e("sugar:widgets/ctrl-panel/data-bind-ctrl/index.tsx"),i=e("sugar:widgets/object-array-editor/object-array-editor.tsx"),o=e("sugar:widgets/ctrl-panel/common/switch-with-tip.tsx"),s=e("sugar:widgets/amis-inline-switch.tsx"),r=e("sugar:widgets/data-model/data-model-field-holder/data-model-field-holder.tsx"),c=e("sugar:widgets/charts/utils/common.tsx"),u=[{label:l.default("默认"),value:"default"},{label:l.default("从小到大"),value:"asc"},{label:l.default("从大到小"),value:"desc"}],f="/openapi/demo/chart?type=bar3D";a.chartDemoUrl="$CUR_HOST/openapi/demo/chart?type=bar3D",a.chartEigens=[{field:[{name:"x",type:"d",minCount:1,maxCount:1},{name:"y",type:"d",minCount:1,maxCount:1},{name:"value",type:"m",minCount:1,maxCount:10},{name:"color",type:"d",minCount:1,maxCount:1}]}],a.dataBindCtrl=function(e){var a=n.getDebugAndRefreshBtn({loadData:e.chart.loadData,loadDebugData:e.chart.loadDebugData,dataType:e.chart.dataType,refreshText:l.default("刷新图表")}),s=e.chart.dataModelHash||"",c=e.sqlModelStore.detailMap.mapByHash.get(s),m=n.generateSQLFieldList(c),p=n.getDataBindCommon({frontendId:e.chart.frontendId,dataTypeOptions:["dataModel","api","sql","json"],api:{demoUrl:f},sql:{needContinuitySetting:!1,sqlFieldList:m},loadData:e.chart.loadData,loadDebugData:e.chart.loadDebugData,curUrl:e.chart.dataApiUrl}),g=[{type:"select",list:m,key:"frontendId",name:l.default("绑定字段"),tdStyle:{minWidth:150}},{type:"text",key:"columnName",name:l.default("字段重命名"),tdStyle:{minWidth:120}}],h=t.__spreadArrays([r.getDataModelFieldHolder({name:"x",label:l.default("X轴"),config:{dataModelHash:s,holderId:e.chart.frontendId+"-x",maxCount:1,onlyDimension:!0}}),r.getDataModelFieldHolder({name:"y",label:l.default("Y轴"),config:{dataModelHash:s,holderId:e.chart.frontendId+"-y",maxCount:1,onlyDimension:!0}}),r.getDataModelFieldHolder({name:"value",label:l.default("Z轴"),config:{dataModelHash:s,holderId:e.chart.frontendId+"-value",maxCount:10,onlyMeasure:!0}}),r.getDataModelFieldHolder({name:"color",label:l.default("颜色图例"),config:{dataModelHash:s,holderId:e.chart.frontendId+"-color",maxCount:1,onlyDimension:!0}}),n.commonFilterForDataModel(s),n.commonBindUrlParamForDataModel(s)],r.getChartConditionsHolder(s,e.chart),[n.commonLimitForDataModel,{type:"select",name:"dataConfig.xCategories",hiddenOn:"data.dataType != 'sql'",label:l.default("X轴绑定字段"),placeholder:l.default("请选择"),options:m},{type:"select",name:"dataConfig.xCategoriesSort",hiddenOn:"data.dataType != 'sql'",label:l.default("X轴数据排序"),placeholder:l.default("请选择"),options:u},{type:"select",name:"dataConfig.yCategories",hiddenOn:"data.dataType != 'sql'",label:l.default("Y轴绑定字段"),placeholder:l.default("请选择"),options:m},{type:"select",name:"dataConfig.yCategoriesSort",hiddenOn:"data.dataType != 'sql'",label:l.default("Y轴数据排序"),placeholder:l.default("请选择"),options:u},{name:"dataConfig.series",hiddenOn:"data.dataType != 'sql'",children:function(a){var n=a.onChange,o=a.value;return d.createElement(i.default,t.__assign({},{onChange:n,value:o},{chartFrontendId:e.chart.frontendId,containerClassName:"form-group form-item",label:l.default("绑定Z轴数据项"),addTipText:l.default("新增Z轴数据项"),cols:g}))}}]);return c&&c.config.openRow2Col&&h.push({name:"dataConfig.addAllRow2Col",children:function(e){var a=e.onChange,n=e.value;return d.createElement(o.default,t.__assign({},{onChange:a,value:n,label:l.default("绑定所有的行转列"),tipText:l.default("不了解？"),tipLink:"/docs/DataBind-SQL-Rowcol"}))}}),p.concat(h,a)},a.advancedCtrl=[{type:"fieldset",collapsed:!0,title:l.default("坐标轴设置"),collapsable:!0,headingClassName:"fieldset-title",controls:[{type:"number",label:l.default("坐标轴字号"),name:"config.yFontSize",step:1,min:8,max:100},{type:"range",name:"config.nameGap",max:100,min:20,step:1,label:l.default("坐标轴名称与轴线距离")},{type:"html",html:'<div class="fieldset-title">'+l.default("Z轴设置")+"</div>"},{type:"group",controls:[s.amisInlineSwitch("config.hideYSplitLine",l.default("隐藏Z轴网格线")),s.amisInlineSwitch("config.hideYSplitArea",l.default("隐藏Z轴区域分割"))]},{type:"text",name:"config.zName",label:l.default("Z轴名称")},{type:"group",controls:[{type:"text",name:"config.prefix",clearable:!0,label:l.default("Z轴数据前置单位")},{type:"text",name:"config.unit",clearable:!0,label:l.default("Z轴数据单位")}]},{type:"select",name:"config.yType",label:l.default("Z轴类型"),clearable:!0,placeholder:l.default("请选择"),options:c.yTypeOptions},{type:"html",html:'<div class="fieldset-title">'+l.default("Y轴设置")+"</div>"},s.amisInlineSwitch("config.yLableAllShow",l.default("Y轴标签全部展示")),{type:"text",name:"config.yName",label:l.default("Y轴名称")},{type:"html",html:'<div class="fieldset-title">'+l.default("X轴设置")+"</div>"},s.amisInlineSwitch("config.xLableAllShow",l.default("X轴标签全部展示")),{type:"text",name:"config.xName",label:l.default("X轴名称")}]},{type:"divider"},{type:"fieldset",collapsed:!0,title:l.default("颜色渐变设置"),collapsable:!0,headingClassName:"fieldset-title",controls:[{type:"tpl",tpl:'<span class="text-muted help-block">'+l.default("颜色渐变设置在只有一个系列柱体时生效，多个系列柱体自动堆叠")+"</span>",className:"m-t-n-sm"},s.amisInlineSwitch("config.visualMap",l.default("开启颜色渐变")),s.amisInlineSwitch("config.visualMapLegend",l.default("开启颜色渐变图例"),"!config.visualMap"),s.amisInlineSwitch("config.cusVal",l.default("自定义颜色映射边界值"),"!config.visualMap"),{type:"group",hiddenOn:"!config.visualMap || !config.cusVal",controls:[{type:"number",name:"config.min",label:l.default("最小值"),step:1},{type:"number",name:"config.max",label:l.default("最大值"),step:1}]}]},{type:"divider"},c.getTooltipCtrl([s.amisInlineSwitch("config.tooltipPercentage",l.default("Tooltip中显示占比")),s.amisInlineSwitch("config.tooltipTotal",l.default("Tooltip中显示合计"))]),{type:"divider"},c.getLegendCtrl(),{type:"divider"},c.getLabelCtrl([s.amisInlineSwitch("config.topShowTotal",l.default("顶部展示数据为合计"))]),{type:"divider"},{type:"fieldset",title:l.default("视角设置"),collapsed:!0,collapsable:!0,headingClassName:"fieldset-title",controls:[s.amisInlineSwitch("config.zoom",l.default("鼠标拖拽和缩放")),s.amisInlineSwitch("config.autoRotate",l.default("自动旋转")),{type:"number",name:"config.speed",label:l.default("旋转速度"),hiddenOn:"!config.autoRotate",step:10,min:10},{type:"number",name:"config.distance",label:l.default("视点初始距离"),step:20,min:200}]}]});
;sugar.define("sugar:widgets/charts/3d-bar/3d-bar.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=e("sugar:node_modules/tslib/tslib.js"),r=e("sugar:utils/i18n.ts"),o=e("sugar:node_modules/react/index.js"),i=e("sugar:widgets/charts/chart-manager.tsx"),n=e("sugar:widgets/charts/3d-bar/3d-bar-ctrl.tsx"),l=e("sugar:widgets/charts/_hoc/echarts.tsx"),s=e("sugar:node_modules/react-mixin/index.js"),d=e("sugar:widgets/charts/_mixin/echarts.tsx"),u=e("sugar:widgets/charts/_hoc/debug/debug.tsx"),g=e("sugar:widgets/charts/_hoc/drill-down/drill-down.tsx"),c=e("sugar:widgets/charts/_hoc/toolbar/toolbar.tsx"),f=e("sugar:widgets/charts/_hoc/chart-warning/index.tsx"),m=e("sugar:widgets/charts/_hoc/chart-zoom/index.tsx"),h=e("sugar:node_modules/lodash/cloneDeep.js"),p=e("sugar:widgets/charts/line/line-helper.ts"),x=e("sugar:utils/common-helper.ts"),y=e("sugar:utils/export-file/export-csv.ts"),v=e("sugar:node_modules/lodash/merge.js"),C=e("sugar:utils/export-file/export-excel.ts"),b=e("sugar:node_modules/amis/lib/index.js"),_=e("sugar:widgets/charts/utils/common.tsx"),S=e("sugar:widgets/charts/utils/helper.ts"),w=12,D=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.getDrillDownParam=function(e){var t=h(this.props.chartData),a=t.xCategories,r=t.xCategories_sugar_origin,o=t.yCategories,i=t.yCategories_sugar_origin,n={name:e.seriesName||"",x:e.value[0],y:e.value[1],z:e.value[2],_sugar_dd_default_:e.value[0]};if(r){var l=a.indexOf(n.x);n.x_sugar_origin=r[l]?r[l]:"",n._sugar_dd_default_=n.x_sugar_origin}if(i){var l=o.indexOf(n.y);n.y_sugar_origin=i[l]?i[l]:""}return n},t.prototype.getDependenceParam=function(e){return{item:this.getDrillDownParam(e),state:{seriesIndex:e.seriesIndex,dataIndex:e.dataIndex}}},t.prototype.refresh=function(e){var t=e.chartData,o=e.chartConfig,i=e.chart,n=e.hub,l=h(t),s=l.series,d=l.xCategories,u=l.yCategories,g=l.unit,c=l.accuracy,f=l.dataFormat,m=this.chart,y=[],C=o.prefix||"";g=o.unit||g||"";var b,D=i.isDashChart?"#ccc":"#333",z="",L=s.length;o.openCustomColor&&(z=o.textColor,b=o.lineColor),z=z||D,b=b||D;var T,F,A={};s.forEach(function(e,t){if(e.name=e.name+"",y.push(e.name),e.shading="realistic",e.type="bar3D",L>1?(e.stack="stack",e.data.forEach(function(a){if(a[0]&&a[1]){var o=a[0]+"-"+a[1],i=a[2]||0;A[o]?(A[o].total+=i,A[o].data.push({name:e.name,value:i})):A[o]={total:i,data:[{name:e.name||r.default("第「"+(t+1)+"」系列"),value:i}]}}})):e.data.forEach(function(e){var t=+e[2];(void 0===T||T>t)&&(T=t),(void 0===F||t>F)&&(F=t)}),e.label={show:!1},o.chartLabel&&(e.label={show:!0,color:o.labelColor||null,fontSize:o.labelFontSize||w,fontFamily:o.labelFontFamily||null},o.topShowTotal&&L>1?t&&t===L-1?e.label.formatter=function(e){var t,a=e.value;if(a instanceof Array){var r=null===(t=A[a[0]+"-"+a[1]])||void 0===t?void 0:t.total;return r?S.formatVal({value:r,format:f,prefix:C,unit:g}):""}return""}:e.label={show:!1}:e.label.formatter=function(e){return e.value instanceof Array?S.formatVal({value:e.value[2],format:f,prefix:C,unit:g}):""}),n.dependenceData.dependenceState){var a=n.dependenceData.dependenceState,i=a.seriesIndex,l=a.dataIndex;i===t?e.data=e.data.map(function(e,t){return{value:e,itemStyle:{opacity:t===l?1:.5}}}):e.itemStyle=v({},e.itemStyle,{opacity:.5})}else e.itemStyle=v({},e.itemStyle,{opacity:1})});var N=o.nameGap||20,M={show:!o.hideX,type:"category",name:o.xName,nameGap:N,nameTextStyle:{fontSize:o.yFontSize||w,color:z},splitLine:{show:!1},axisLine:{lineStyle:{color:b,width:1}},axisLabel:{fontSize:o.yFontSize||w,color:z},axisTick:{alignWithLabel:!0},data:d},R={show:!o.hideY,type:"category",name:o.yName,nameGap:N,nameTextStyle:{fontSize:o.yFontSize||w,color:z},splitLine:{show:!1},axisLine:{lineStyle:{color:b,width:1}},axisLabel:{fontSize:o.yFontSize||w,color:z},axisTick:{alignWithLabel:!0},data:u};o.xLableAllShow&&(M.axisLabel.interval=0),o.yLableAllShow&&(R.axisLabel.interval=0);var B=p.generateLineYAxis(a.__assign({_textColor:z,_lineColor:b,_isDashChart:i.isDashChart,defaultFontSize:w},o),!1,g,f);B.name=o.zName,B.nameGap=N;var E={textStyle:S.getTextStyle(o),backgroundColor:"rgb(255, 255, 255, 0)",legend:a.__assign(a.__assign({},S.legendPositionConfig({marginTop:10,marginBottom:10,marginLeft:10,marginRight:10},o)),{data:y,show:"boolean"==typeof o.chartLegend?o.chartLegend:!0,textStyle:{fontSize:o.legendFontSize||w,color:o.legendTextColor||z,fontFamily:o.legendFontFamily||null}}),tooltip:{show:!0,trigger:"item",confine:o.tooltipConfine||!1,extraCssText:_.getTooltipCss(o),formatter:function(e){var t,a=e.value,i=a[0],n=a[1],l=a[2],s=o.tooltipPercentage&&L>1,d=o.tooltipTotal&&L>1,u=A[i+"-"+n],m=r.default("\n              X轴：「"+i+"」</br>\n              Y轴：「"+n+"」\n            ");return L>1?((null===(t=null===u||void 0===u?void 0:u.data)||void 0===t?void 0:t.length)>0&&u.data.forEach(function(e){m+="<br>"+(e.name||"")+"："+S.formatVal({value:e.value,format:f,prefix:C,unit:g})+(s?"（"+(e.value/u.total*100).toFixed(2)+"%）":"")}),d&&(m+=r.default("</br>合计："+C+"「"+x.formatDataByType(u.total,f||"",c)+"」「"+g+"」"))):m+="<br>"+e.seriesName+": "+S.formatVal({value:l,format:f,prefix:C,unit:g}),'<div style="line-height:1.3">'+m+"</div>"}},xAxis3D:M,yAxis3D:R,zAxis3D:B,grid3D:{left:o.marginLeft||"auto",right:o.marginRight||"auto",top:o.marginTop||"auto",bottom:o.marginBottom||"auto",viewControl:{autoRotate:!!o.autoRotate,autoRotateSpeed:o.speed||10,distance:o.distance,rotateSensitivity:o.zoom?1:0,zoomSensitivity:o.zoom?1:0},light:{main:{shadow:!0,quality:"ultra",intensity:1},ambient:{intensity:.5}}},series:s};1===s.length&&o.visualMap&&(o.cusVal&&(T=isNaN(o.min)?T:o.min,F=isNaN(o.max)?F:o.max),E.visualMap={show:o.visualMapLegend,min:T,max:F,calculable:!0,textStyle:{color:z,fontSize:o.legendFontSize||w},left:10},o.openCustomColor&&o.customColors&&o.customColors.length&&(E.visualMap.inRange={color:o.customColors.map(function(e){return e.color||"#fff"})})),o.openCustomColor&&o.customColors&&o.customColors.length&&(E.color=o.customColors.map(function(e){return e.color||"#fff"})),m.setOption(E,!0)},t.displayName="Bar3D",t=a.__decorate([g.default,u.default,c.default,f.default,m.default,l.default,s.decorate(d.default)],t)}(o.Component);t.default=D;var z=function(e){if(!e)return r.default("无数据");if(!(e.xCategories&&e.xCategories instanceof Array&&e.xCategories.length))return r.default("数据中缺少 xCategories 字段或 xCategories 字段为空");if(!(e.yCategories&&e.yCategories instanceof Array&&e.yCategories.length))return r.default("数据中缺少 yCategories 字段或 yCategories 字段为空");if(!(e.series&&e.series instanceof Array&&e.series.length))return r.default("数据中缺少 series 字段或 series 字段为空");if(!x.isArrayOfTypes(e.xCategories,["string","number","null"]))return r.default("X轴绑定的数据类型不对，不是字符串或数字");if(!x.isArrayOfTypes(e.yCategories,["string","number","null"]))return r.default("Y轴绑定的数据类型不对，不是字符串或数字");for(var t=0;t<e.series.length;t++){var a=e.series[t];if(!a.data||!a.data.length)return r.default(a.name?"系列「"+a.name+"」的数据为空":"第「"+(t+1)+"」系列柱状数据为空");for(var o=0;o<a.data.length;o++){var i=a.data[o];if(!i||3!==i.length)return r.default("系列「"+(a.name||t+1)+"」的第「"+(o+1)+"」项数据不全");if(!x.isValueOfTypes(i[2],["numberString","number"]))return r.default("系列「"+(a.name||t+1)+"」的第「"+(o+1)+"」项数据的第3项不是数字")}}return!0},L=function(e,t){var a=A(e);C.exportExcelByRows(a,""+(t.dynamicName||t.name||"export"))},T=function(e,t){var a=A(e);y.exportCsvByRows(a,(t.dynamicName||t.name||"export")+".csv")},F=function(e){return A(e)},A=function(e){var t=[];if(e&&e.data&&e.data.xCategories&&e.data.xCategories.length&&e.data.yCategories&&e.data.yCategories.length&&e.data.series&&e.data.series.length){t.push([r.default("X轴"),r.default("Y轴")].concat(e.data.series.map(function(e,t){return e.name||r.default("第「"+(t+1)+"」系列")})));for(var a=function(a){for(var r=function(r){for(var o=[a,r],i=0,n=e.data.series;i<n.length;i++){var l=n[i],s=l.data.filter(function(e){return e[0]===a&&e[1]===r});o.push(s&&s.length>0?s[0][2]:"-")}t.push(o)},o=0,i=e.data.yCategories;o<i.length;o++){var n=i[o];r(n)}},o=0,i=e.data.xCategories;o<i.length;o++){var n=i[o];a(n)}}return t},N=function(e){var t=e.dataConfig.dataModel,a=t.x,o=void 0===a?[]:a,i=t.y,n=void 0===i?[]:i,l=t.value,s=void 0===l?[]:l,d=t.color,u=void 0===d?[]:d;return 1===o.length&&1===n.length&&s.length?s.length>1&&u.length?(b.toast.error(r.default("绑定了颜色字段时，Z轴只能绑定一个度量字段")),!1):!0:!1};i.register({kind:"otherChart",type:"3d-bar",name:r.default("3D柱状图"),iconClassName:"chart-3d-bar",enableTemplate:!0,commonCustomColor:!0,initialState:{dataType:"api",dataApiUrl:n.chartDemoUrl,width:5,height:500,config:{distance:240,autoRotate:!0,tooltipPercentage:!0,tooltipTotal:!0,speed:10,zoom:!0,nameGap:30,chartLegend:!0,yType:"normal",hideYSplitArea:!0,xName:"",yName:"",zName:"",visualMap:!0,visualMapLegend:!0,cusVal:!1,min:0,max:100}},initialDashboardState:{width:500,config:{hideYSplitLine:!0}},component:D,dataBindCtrl:n.dataBindCtrl,advancedCtrl:n.advancedCtrl,exportCSV:T,exportExcel:L,exportRows:F,needDashboardAutoFresh:!0,validate:z,drillDownType:"single",canBeDrillChild:!0,dataModelPanelShow:[["dataType","dataModel"]],drillDownSuggestDataModelField:"x",loadDataWhenDataModelConfigChange:N,chartEigens:n.chartEigens})});
;sugar.define("sugar:widgets/charts/3d-scatter/3d-scatter-ctrl.tsx",function(e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.advancedCtrl=a.dataBindCtrl=a.chartEigens=a.chartDemoUrl=void 0;var t=e("sugar:node_modules/tslib/tslib.js"),l=e("sugar:utils/i18n.ts"),d=e("sugar:widgets/ctrl-panel/data-bind-ctrl/index.tsx"),n=e("sugar:widgets/amis-inline-switch.tsx"),o=e("sugar:widgets/data-model/data-model-field-holder/data-model-field-holder.tsx"),i=e("sugar:widgets/charts/utils/common.tsx"),s=[{label:l.default("默认"),value:"default"},{label:l.default("从小到大"),value:"asc"},{label:l.default("从大到小"),value:"desc"}],c="/openapi/demo/chart?type=scatter3D";a.chartDemoUrl="$CUR_HOST/openapi/demo/chart?type=scatter3D",a.chartEigens=[{field:[{name:"x",type:"a",minCount:1,maxCount:1},{name:"y",type:"a",minCount:1,maxCount:1},{name:"z",type:"a",minCount:1,maxCount:1},{name:"color",type:"a",minCount:0,maxCount:1},{name:"size",type:"m",minCount:0,maxCount:1}]}],a.dataBindCtrl=function(e){var a=d.getDebugAndRefreshBtn({loadData:e.chart.loadData,loadDebugData:e.chart.loadDebugData,dataType:e.chart.dataType,refreshText:l.default("刷新图表")}),n=e.chart.dataModelHash||"",i=e.sqlModelStore.detailMap.mapByHash.get(n),p=d.generateSQLFieldList(i),r=d.getDataBindCommon({frontendId:e.chart.frontendId,dataTypeOptions:["dataModel","api","sql","json"],api:{demoUrl:c},sql:{needContinuitySetting:!1,sqlFieldList:p},loadData:e.chart.loadData,loadDebugData:e.chart.loadDebugData,curUrl:e.chart.dataApiUrl}),f=t.__spreadArrays([o.getDataModelFieldHolder({name:"x",label:l.default("X轴"),config:{dataModelHash:n,holderId:e.chart.frontendId+"-x",maxCount:1}}),o.getDataModelFieldHolder({name:"y",label:l.default("Y轴"),config:{dataModelHash:n,holderId:e.chart.frontendId+"-y",maxCount:1}}),o.getDataModelFieldHolder({name:"z",label:l.default("\bZ轴"),config:{dataModelHash:n,holderId:e.chart.frontendId+"-z",maxCount:1}}),o.getDataModelFieldHolder({name:"color",label:l.default("散点颜色（选填）"),config:{dataModelHash:n,holderId:e.chart.frontendId+"-color",maxCount:1}}),o.getDataModelFieldHolder({name:"size",label:l.default("散点大小（选填）"),config:{dataModelHash:n,holderId:e.chart.frontendId+"-size",maxCount:1,onlyMeasure:!0}}),d.commonFilterForDataModel(n),d.commonBindUrlParamForDataModel(n)],o.getChartConditionsHolder(n,e.chart),[d.commonLimitForDataModel,{type:"select",name:"dataConfig.xCategories",hiddenOn:"data.dataType != 'sql'",label:l.default("X轴绑定字段"),placeholder:l.default("请选择"),options:p},{type:"select",name:"dataConfig.xCategoriesSort",hiddenOn:"data.dataType != 'sql'",label:l.default("X轴数据排序"),placeholder:l.default("请选择"),options:s},{type:"select",name:"dataConfig.yCategories",hiddenOn:"data.dataType != 'sql'",label:l.default("Y轴绑定字段"),placeholder:l.default("请选择"),options:p},{type:"select",name:"dataConfig.zCategories",hiddenOn:"data.dataType != 'sql'",label:l.default("Z轴绑定字段"),placeholder:l.default("请选择"),options:p},{type:"radios",name:"dataConfig.colorType",label:l.default("颜色映射类型"),inline:!1,hiddenOn:"data.dataType != 'sql'",options:[{label:l.default("不映射"),value:"none"},{label:l.default("按点类别映射颜色"),value:"category"},{label:l.default("按数值映射颜色"),value:"value"}]},{type:"select",name:"dataConfig.colorCategories",hiddenOn:"data.dataType != 'sql' || dataConfig.colorType != 'category'",label:l.default("颜色类别字段"),options:p},{type:"select",name:"dataConfig.colorValue",hiddenOn:"data.dataType != 'sql' || dataConfig.colorType != 'value'",label:l.default("颜色映射字段"),placeholder:l.default("SQL模型中数据类型需为数字类型"),options:p},{type:"radios",name:"dataConfig.sizeType",label:l.default("散点大小映射类型"),hiddenOn:"data.dataType != 'sql'",inline:!1,options:[{label:l.default("不映射"),value:"none"},{label:l.default("按数值映射"),value:"value"}]},{type:"select",name:"dataConfig.sizeValue",hiddenOn:"data.dataType != 'sql' || dataConfig.sizeType != 'value'",label:l.default("散点大小字段"),placeholder:l.default("SQL模型中数据类型需为数字类型"),options:p}]);return r.concat(f,a)},a.advancedCtrl=[{type:"range",name:"config.nameGap",max:100,min:20,step:1,label:l.default("坐标轴名称与轴线距离")},{type:"fieldset",collapsed:!0,title:l.default("X轴设置"),collapsable:!0,headingClassName:"fieldset-title",controls:[{type:"select",name:"config.xConfigType",label:l.default("X轴类型"),clearable:!0,placeholder:l.default("请选择"),options:i.yTypeOptions},{type:"group",controls:[{type:"text",name:"config.xPrefix",clearable:!0,label:l.default("数据前置单位")},{type:"text",name:"config.xUnit",clearable:!0,label:l.default("数据单位")}]},{type:"group",controls:[n.amisInlineSwitch("config.xShowAllLabel",l.default("X轴标签全部展示")),n.amisInlineSwitch("config.xShowName",l.default("显示X轴名称"))]}]},{type:"divider"},{type:"fieldset",collapsed:!0,title:l.default("Y轴设置"),collapsable:!0,headingClassName:"fieldset-title",controls:[{type:"select",name:"config.yConfigType",label:l.default("Y轴类型"),clearable:!0,placeholder:l.default("请选择"),options:i.yTypeOptions},{type:"group",controls:[{type:"text",name:"config.yPrefix",clearable:!0,label:l.default("数据前置单位")},{type:"text",name:"config.yUnit",clearable:!0,label:l.default("数据单位")}]},{type:"group",controls:[n.amisInlineSwitch("config.yShowAllLabel",l.default("Y轴标签全部展示")),n.amisInlineSwitch("config.yShowName",l.default("显示Y轴名称"))]}]},{type:"divider"},{type:"fieldset",collapsed:!0,title:l.default("Z轴设置"),collapsable:!0,headingClassName:"fieldset-title",controls:[{type:"select",name:"config.zConfigType",label:l.default("Z轴类型"),clearable:!0,placeholder:l.default("请选择"),options:i.yTypeOptions},{type:"group",controls:[{type:"text",name:"config.zPrefix",clearable:!0,label:l.default("数据前置单位")},{type:"text",name:"config.zUnit",clearable:!0,label:l.default("数据单位")}]},{type:"group",controls:[n.amisInlineSwitch("config.zShowAllLabel",l.default("Z轴标签全部展示")),n.amisInlineSwitch("config.zShowName",l.default("显示Z轴名称"))]},{type:"group",controls:[n.amisInlineSwitch("config.zHideSplitLine",l.default("隐藏Z轴刻度线")),n.amisInlineSwitch("config.zHideSplitArea",l.default("隐藏Z轴区域分割"))]}]},{type:"divider"},{type:"fieldset",collapsed:!0,title:l.default("颜色映射设置"),collapsable:!0,headingClassName:"fieldset-title",controls:[{type:"tpl",tpl:'<span class="text-muted help-block">'+l.default("颜色映射设置在数据中存在颜色映射相应字段时生效")+"</span>",className:"m-t-n-sm"},n.amisInlineSwitch("config.colorLegend",l.default("开启颜色映射图例")),n.amisInlineSwitch("config.colorCusVal",l.default("自定义颜色映射边界值")),{type:"number",name:"config.colorMin",label:l.default("最小值"),hiddenOn:"!config.colorCusVal",step:1},{type:"number",name:"config.colorMax",label:l.default("最大值"),hiddenOn:"!config.colorCusVal",step:1}]},{type:"divider"},{type:"fieldset",collapsed:!0,title:l.default("散点大小映射设置"),collapsable:!0,headingClassName:"fieldset-title",controls:[{type:"tpl",tpl:'<span class="text-muted help-block">'+l.default("数据中存在散点大小映射相应字段时生效")+"</span>",className:"m-t-n-sm"},n.amisInlineSwitch("config.sizeLegend",l.default("开启散点大小映射图例")),n.amisInlineSwitch("config.sizeCusVal",l.default("自定义散点大小映射边界值")),{type:"number",name:"config.sizeMin",label:l.default("最小值"),hiddenOn:"!config.sizeCusVal",step:1},{type:"number",name:"config.sizeMax",label:l.default("最大值"),hiddenOn:"!config.sizeCusVal",step:1},{type:"number",name:"config.pointSizeMin",label:l.default("最小值对应散点大小"),step:1,min:0},{type:"number",name:"config.pointSizeMax",label:l.default("最大值对应散点大小"),step:1,min:0}]},{type:"divider"},{type:"fieldset",title:l.default("散点大小设置"),collapsable:!0,collapsed:!0,headingClassName:"fieldset-title",controls:[{type:"tpl",tpl:'<span class="text-muted help-block">'+l.default("数据中不存在散点大小映射相应字段时，可以对散点大小进行统一调整")+"</span>",className:"m-t-n-sm"},{type:"number",name:"config.pointSize",label:l.default("散点大小"),step:1,min:0}]},{type:"divider"},{type:"fieldset",title:l.default("字号设置"),collapsed:!0,collapsable:!0,headingClassName:"fieldset-title",controls:[{type:"group",controls:[{type:"number",label:l.default("坐标轴标签字号"),name:"config.axisFontSize",step:1,min:8,max:100},{type:"number",label:l.default("坐标轴名称字号"),name:"config.nameFontSize",step:1,min:8,max:100}]}]},{type:"divider"},{type:"fieldset",title:l.default("视角设置"),collapsed:!0,collapsable:!0,headingClassName:"fieldset-title",controls:[n.amisInlineSwitch("config.zoom",l.default("鼠标拖拽和缩放")),n.amisInlineSwitch("config.autoRotate",l.default("自动旋转")),{type:"number",name:"config.speed",label:l.default("旋转速度"),hiddenOn:"!config.autoRotate",step:10,min:10},{type:"number",name:"config.distance",label:l.default("视点初始距离"),step:20,min:200}]},{type:"divider"},i.getTooltipCtrl(),{type:"divider"},{type:"fieldset",title:l.default("图例设置(legend)"),collapsed:!0,collapsable:!0,headingClassName:"fieldset-title",controls:i.legendBasicCtrl.slice(0,7)}]});
;sugar.define("sugar:widgets/charts/3d-scatter/3d-scatter-helper.ts",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generateAxis=void 0;var i=e("sugar:utils/common-helper.ts");t.generateAxis=function(e){var t=e.type,a=e.configType,n=e.name,r=e.nameGap,l=e.textColor,o=e.lineColor,s=e.showAllLabel,c=e.unit,d=e.prefix,u=e.hideSplitLine,p=e.hideSplitArea,f=e.axisFontSize,h=e.nameFontSize,m=e.defaultFontSize,x={show:!e.hideX,type:t,name:n,nameGap:r,nameTextStyle:{fontSize:h||m+4,color:l},axisLine:{lineStyle:{color:o,width:1}},axisLabel:{color:l,fontSize:f||m,formatter:function(e){return~["chartTimeVal","chartByteVal","percent"].indexOf(a)?i.formatDataByType(e,a):"default"===a?""+(d||"")+e+(c||""):"normal"===a?""+(d||"")+i.formatNumberWithMagnitude(e)+(c||""):e}},axisTick:{alignWithLabel:!0},splitLine:{show:!u,lineStyle:{color:e.splitLineColors||"#ddd"}},splitArea:{show:!p}};return s&&(x.axisLabel.interval=0),x}});
;sugar.define("sugar:widgets/charts/3d-scatter/3d-scatter.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=e("sugar:node_modules/tslib/tslib.js"),a=e("sugar:utils/i18n.ts"),i=e("sugar:node_modules/react/index.js"),n=e("sugar:widgets/charts/chart-manager.tsx"),r=e("sugar:widgets/charts/3d-scatter/3d-scatter-ctrl.tsx"),l=e("sugar:widgets/charts/_hoc/echarts.tsx"),s=e("sugar:node_modules/react-mixin/index.js"),u=e("sugar:widgets/charts/_mixin/echarts.tsx"),d=e("sugar:widgets/charts/_hoc/debug/debug.tsx"),c=e("sugar:widgets/charts/_hoc/drill-down/drill-down.tsx"),g=e("sugar:widgets/charts/_hoc/toolbar/toolbar.tsx"),p=e("sugar:widgets/charts/_hoc/chart-zoom/index.tsx"),f=e("sugar:node_modules/lodash/cloneDeep.js"),h=e("sugar:utils/common-helper.ts"),m=e("sugar:utils/export-file/export-csv.ts"),x=e("sugar:widgets/charts/3d-scatter/3d-scatter-helper.ts"),y=e("sugar:utils/export-file/export-excel.ts"),v=e("sugar:widgets/charts/utils/common.tsx"),C=e("sugar:widgets/charts/utils/helper.ts"),S=12,z=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.__extends(t,e),t.prototype.getDrillDownParam=function(e){var t={x:e.value[0],y:e.value[1],z:e.value[2],_sugar_dd_default_:e.value[0]};return e.value[3]&&(t.color=e.value[3]),e.value[4]&&(t.size=e.value[4]),t},t.prototype.refresh=function(e){var t,a,i,n=e.chartData,r=e.chartConfig,l=e.chart,s=e.theme,u=f(n),d=this.chart,c=l.isDashChart?"#ccc":"#333";r.openCustomColor&&(a=r.textColor,i=r.lineColor),a=a||c,i=i||c;var g,p,h,m,y=u[0],z=y[0],w=y[1],b=y[2],T=y[3],F=y[4],_=[{prefix:r.xPrefix,unit:r.xUnit,type:r.xConfigType},{prefix:r.yPrefix,unit:r.yUnit,type:r.yConfigType},{prefix:r.zPrefix,unit:r.zUnit,type:r.zConfigType}],D="value",L="value",A="value",M=void 0,N=void 0,O=u[1];O&&("string"==typeof O[0]&&(D="category"),"string"==typeof O[1]&&(L="category"),"string"==typeof O[2]&&(A="category"),"number"==typeof O[3]?M="value":"string"==typeof O[3]&&(M="category"),"number"==typeof O[4]&&(N="value"));for(var R=[],U=[],V=[],j=[],P=1;P<u.length;P++){var B=u[P];if("category"!==D||~R.indexOf(B[0])||R.push(B[0]),"category"!==L||~U.indexOf(B[1])||U.push(B[1]),"category"!==A||~V.indexOf(B[2])||V.push(B[2]),"category"===M)~j.indexOf(B[3])||j.push(B[3]);else if("value"===M){var G=B[3];(void 0===g||g>G)&&(g=G),(void 0===p||G>p)&&(p=G)}if("value"===N){var E=B[4];(void 0===h||h>E)&&(h=E),(void 0===m||E>m)&&(m=E)}}var k={source:u},H=[{name:"",type:"scatter3D",encode:{x:z,y:w,z:b},label:{show:!1},emphasis:{label:{show:!1}}}];"value"!==N&&(H[0].symbolSize=r.pointSize||3);var q=[],W=(null===(t=s.config.chartTheme)||void 0===t?void 0:t.color)||[];if("value"===M){r.colorCusVal&&(g=isNaN(r.colorMin)?g:r.colorMin,p=isNaN(r.colorMax)?p:r.colorMax);var X=W.slice(0,2);r.openCustomColor&&r.customColors&&r.customColors.length&&(X=r.customColors.map(function(e){return e.color})),q.push({show:r.colorLegend,bottom:10,text:[T],textGap:20,right:10,calculable:!0,dimension:3,max:p,min:g,inRange:{color:X},textStyle:{fontSize:r.legendFontSize||S,color:a}})}else if("category"===M){var X=[];r.openCustomColor&&r.customColors&&r.customColors.length&&(W=r.customColors.map(function(e){return e.color}).concat(W));for(var P=0;P<j.length;P++)X.push(W[P%W.length]);q.push(o.__assign(o.__assign({right:10},C.legendPositionConfig({marginRight:20,marginLeft:20,marginTop:20,marginBottom:20},r,"right")),{show:!(!r.colorLegend&&!r.chartLegend),dimension:3,categories:j,type:"piecewise",inRange:{color:X},textStyle:{fontFamily:r.legendFontFamily||null,fontSize:r.legendFontSize||S,color:r.legendTextColor||a}}))}"value"===N&&(r.sizeCusVal&&(h=isNaN(r.sizeMin)?h:r.sizeMin,m=isNaN(r.sizeMax)?m:r.sizeMax),q.push({show:r.sizeLegend,bottom:10,text:[F],textGap:20,calculable:!0,dimension:F,min:h,max:m,inRange:{symbolSize:[r.pointSizeMin||5,r.pointSizeMax||10]},textStyle:{fontSize:r.legendFontSize||S,color:a}}));var Y=r.nameGap||20,Z=x.generateAxis({type:D,configType:r.xConfigType||"default",name:r.xShowName?z:"",nameGap:Y,textColor:a,lineColor:i,showAllLabel:r.xShowAllLabel,unit:r.xUnit||"",prefix:r.xPrefix||"",hideSplitLine:!0,hideSplitArea:!0,axisFontSize:r.axisFontSize,nameFontSize:r.nameFontSize,defaultFontSize:S});"category"===D&&(Z.data=R);var I=x.generateAxis({type:L,configType:r.yConfigType||"default",name:r.yShowName?w:"",nameGap:Y,textColor:a,lineColor:i,showAllLabel:r.yShowAllLabel,unit:r.yUnit||"",prefix:r.yPrefix||"",hideSplitLine:!0,hideSplitArea:!0,axisFontSize:r.axisFontSize,nameFontSize:r.nameFontSize,defaultFontSize:S});"category"===L&&(I.data=U),r.yLableAllShow&&(I.axisLabel.interval=0);var J=x.generateAxis({type:A,configType:r.zConfigType||"default",name:b,nameGap:Y,textColor:a,lineColor:i,unit:r.zUnit||"",prefix:r.zPrefix||"",hideSplitLine:r.zHideSplitLine,hideSplitArea:r.zHideSplitArea,axisFontSize:r.axisFontSize,nameFontSize:r.nameFontSize,defaultFontSize:S,splitLineColors:r.splitLineColors});"category"===A&&(J.data=V);var K={textStyle:C.getTextStyle(r),backgroundColor:"rgb(255, 255, 255, 0)",visualMap:q,tooltip:{confine:r.tooltipConfine||!1,extraCssText:v.getTooltipCss(r),formatter:function(e){for(var t,o,a,i=[],n=0;n<y.length;n++){var r=y[n];if(void 0!==r&&null!==r){var l=e.data[n];"number"==typeof l&&(l=C.formatVal({value:l,unit:null===(t=_[n])||void 0===t?void 0:t.unit,prefix:null===(o=_[n])||void 0===o?void 0:o.prefix,format:null===(a=_[n])||void 0===a?void 0:a.type})),i.push(y[n]+"："+l)}}return"<div>"+i.join("<br />")+"</div>"}},xAxis3D:Z,yAxis3D:I,zAxis3D:J,dataset:k,grid3D:{viewControl:{autoRotate:!!r.autoRotate,autoRotateSpeed:r.speed||10,distance:r.distance,rotateSensitivity:r.zoom?1:0,zoomSensitivity:r.zoom?1:0},light:{main:{shadow:!0,quality:"ultra",intensity:1},ambient:{intensity:.5}}},series:H};r.openCustomColor&&r.customColors&&r.customColors.length&&(K.color=r.customColors.map(function(e){return e.color||"#fff"})),d.setOption(K,!0)},t.displayName="Scatter3D",t=o.__decorate([c.default,d.default,g.default,p.default,l.default,s.decorate(u.default)],t)}(i.Component);t.default=z;var w=function(e){if(!e||e.length<2)return a.default("无数据");for(var t=1;t<e.length;t++){var o=e[t];if(!o||o.length<3)return a.default("第「"+(t+1)+"」个数据不全");if(!h.isValueOfTypes(o[0],["string","number"]))return a.default("第「"+(t+1)+"」个数据的X轴数据不是字符串或数字");if(!h.isValueOfTypes(o[1],["string","number"]))return a.default("第「"+(t+1)+"」个数据的Y轴数据不是字符串或数字");if(!h.isValueOfTypes(o[2],["string","number"]))return a.default("第「"+(t+1)+"」个数据的Z轴数据不是字符串或数字");if(4===o.length&&!h.isValueOfTypes(o[3],["string","number"]))return a.default("第「"+(t+1)+"」个数据的颜色映射数据不是字符串或数字");if(5===o.length&&!h.isValueOfTypes(o[4],["number","null"]))return a.default("第「"+(t+1)+"」个数据的散点图映射数据不是数字")}return!0},b=function(e,t){_(e,t,!0)},T=function(e,t){_(e,t)},F=function(e){return(null===e||void 0===e?void 0:e.data)||[]},_=function(e,t,o){void 0===o&&(o=!1),e&&e.data&&e.data.length&&(o?y.exportExcelByRows(e.data,""+(t.dynamicName||t.name||"export")):m.exportCsvByRows(e.data,(t.dynamicName||t.name||"export")+".csv"))},D=function(e){var t=e.dataConfig.dataModel,o=t.x,a=void 0===o?[]:o,i=t.y,n=void 0===i?[]:i,r=t.z,l=void 0===r?[]:r;return 1===a.length&&1===n.length&&l.length?!0:!1};n.register({kind:"otherChart",type:"3d-scatter",name:a.default("3D散点图"),iconClassName:"chart-3d-scatter",enableTemplate:!0,commonCustomColor:!0,initialState:{dataType:"api",dataApiUrl:r.chartDemoUrl,width:6,height:500,config:{distance:240,autoRotate:!0,speed:10,zoom:!0,nameGap:40,xConfigType:"default",xUnit:"",xShowAllLabel:!1,xShowName:!0,yConfigType:"default",yUnit:"",yShowAllLabel:!1,yShowName:!0,zConfigType:"normal",zUnit:"",zShowAllLabel:!1,zShowName:!0,zHideSplitArea:!0,colorLegend:!0,colorCusVal:!1,colorMin:0,colorMax:100,sizeLegend:!0,sizeCusVal:!1,pointSizeMin:3,pointSizeMax:12,pointSize:3,openCustomColor:!0,customColors:[{id:"jps66ck826ik2",color:"#7ED321"},{id:"jps66jon2evqt",color:"#F8E71C"},{id:"jps69drr565e0",color:"#D0021B"}]},dataConfig:{colorType:"none",sizeType:"none"}},initialDashboardState:{width:650,config:{zHideSplitLine:!0}},component:z,dataBindCtrl:r.dataBindCtrl,advancedCtrl:r.advancedCtrl,exportCSV:T,exportExcel:b,exportRows:F,needDashboardAutoFresh:!0,validate:w,drillDownType:"single",canBeDrillChild:!0,dataModelPanelShow:[["dataType","dataModel"]],drillDownSuggestDataModelField:"x",loadDataWhenDataModelConfigChange:D,chartEigens:r.chartEigens})});
;sugar.define("sugar:widgets/charts/candlestick/candlestick-ctrl.tsx",function(e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.advancedCtrl=a.dataBindCtrl=a.chartDemoUrl=a.basicCtrl=void 0;var l=e("sugar:node_modules/tslib/tslib.js"),t=e("sugar:utils/i18n.ts"),d=e("sugar:node_modules/react/index.js"),o=e("sugar:widgets/ctrl-panel/data-bind-ctrl/index.tsx"),n=e("sugar:widgets/object-array-editor/object-array-editor.tsx"),i=e("sugar:widgets/amis-inline-switch.tsx"),r=e("sugar:widgets/data-model/data-model-field-holder/data-model-field-holder.tsx"),s=e("sugar:widgets/charts/utils/common.tsx"),u=[{type:"color",name:t.default("颜色"),key:"color",defaultValue:"#23b7e5"}];a.basicCtrl=function(e){return[{type:"divider"},i.amisInlineSwitch("config.openCustomColor",t.default("开启自定义配色")),{type:"color",name:"config.upColor",format:"rgba",label:t.default("上涨时的颜色"),hiddenOn:"!data.config.openCustomColor"},{type:"color",name:"config.downColor",format:"rgba",label:t.default("下跌时的颜色"),hiddenOn:"!data.config.openCustomColor"},{type:"color",name:"config.textColor",format:"rgba",label:t.default("文字颜色"),hiddenOn:"!data.config.openCustomColor"},{type:"color",name:"config.lineColor",format:"rgba",label:t.default("轴线颜色"),hiddenOn:"!data.config.openCustomColor"},{name:"config.customColors",hiddenOn:"!data.config.openCustomColor",children:function(a){var o=a.onChange,i=a.value;return d.createElement(n.default,l.__assign({},{onChange:o,value:i},{chartFrontendId:e.chart.frontendId,containerClassName:"form-group form-item",label:t.default("可增加多个配色项，依次对应各个移动平均线的颜色"),addTipText:t.default("新增配色项"),cols:u}))}}]};var f="/openapi/demo/chart?type=candlestick";a.chartDemoUrl="$CUR_HOST/openapi/demo/chart?type=candlestick",a.dataBindCtrl=function(e){var a=o.getDebugAndRefreshBtn({loadData:e.chart.loadData,loadDebugData:e.chart.loadDebugData,dataType:e.chart.dataType,refreshText:t.default("刷新图表")}),s=o.getDataBindCommon({frontendId:e.chart.frontendId,dataTypeOptions:["dataModel","api","sql","json"],api:{demoUrl:f},loadData:e.chart.loadData,loadDebugData:e.chart.loadDebugData,curUrl:e.chart.dataApiUrl}),u=e.chart.dataModelHash||"",c=e.sqlModelStore.detailMap.mapByHash.get(u),p=o.generateSQLFieldList(c),m=[{type:"select",list:p,key:"frontendId",name:t.default("绑定字段"),tdStyle:{minWidth:150}}],h=[r.getDataModelFieldHolder({name:"x",label:t.default("X轴/日期时间"),config:{dataModelHash:u,holderId:e.chart.frontendId+"-x",maxCount:1,onlyDimension:!0}}),r.getDataModelFieldHolder({name:"openField",label:t.default("开盘价"),config:{dataModelHash:u,holderId:e.chart.frontendId+"-openField",maxCount:1,onlyMeasure:!0}}),r.getDataModelFieldHolder({name:"closeField",label:t.default("收盘价"),config:{dataModelHash:u,holderId:e.chart.frontendId+"-closeField",maxCount:1,onlyMeasure:!0}}),r.getDataModelFieldHolder({name:"lowField",label:t.default("最低价"),config:{dataModelHash:u,holderId:e.chart.frontendId+"-lowField",maxCount:1,onlyMeasure:!0}}),r.getDataModelFieldHolder({name:"highField",label:t.default("最高价"),config:{dataModelHash:u,holderId:e.chart.frontendId+"-highField",maxCount:1,onlyMeasure:!0}}),r.getDataModelFieldHolder({name:"volumeField",label:t.default("成交量"),config:{dataModelHash:u,holderId:e.chart.frontendId+"-volumeField",maxCount:1,onlyMeasure:!0}}),{type:"select",name:"dataConfig.showMaType",hiddenOn:"data.dataType != 'dataModel'",label:t.default("移动平均线MA"),placeholder:t.default("请选择"),options:[{label:t.default("不展示"),value:"none"},{label:t.default("绑定字段"),value:"bind"},{label:t.default("根据K线图数据自动计算"),value:"auto"}]},{name:"dataConfig.maAuto",type:"checkboxes",label:t.default("自动计算的移动平均线："),hiddenOn:"data.dataType != 'dataModel' || dataConfig.showMaType != 'auto'",joinValues:!0,inline:!0,className:"sugar-inline-checkboxes",options:[{label:"MA5",value:"MA5"},{label:"MA10",value:"MA10"},{label:"MA20",value:"MA20"},{label:"MA30",value:"MA30"}]},r.getDataModelFieldHolder({name:"maField",label:t.default("移动平均线（MA5、MA10等）"),hiddenOn:"dataType != 'dataModel' || dataConfig.showMaType != 'bind'",config:{dataModelHash:u,holderId:e.chart.frontendId+"-maField",maxCount:6,onlyMeasure:!0}}),{type:"select",name:"dataConfig.showRiseType",hiddenOn:"data.dataType != 'dataModel'",label:t.default("tooltip中展示涨跌额、涨跌幅"),placeholder:t.default("请选择"),options:[{label:t.default("不展示"),value:"none"},{label:t.default("绑定字段"),value:"bind"},{label:t.default("根据K线图数据自动计算"),value:"auto"}]},r.getDataModelFieldHolder({name:"riseField",label:t.default("涨跌额"),hiddenOn:"data.dataType != 'dataModel' || dataConfig.showRiseType != 'bind'",config:{dataModelHash:u,holderId:e.chart.frontendId+"-riseField",maxCount:1,onlyMeasure:!0}}),r.getDataModelFieldHolder({name:"riseRateField",label:t.default("涨跌幅"),hiddenOn:"data.dataType != 'dataModel' || dataConfig.showRiseType != 'bind'",config:{dataModelHash:u,holderId:e.chart.frontendId+"-riseRateField",maxCount:1,onlyMeasure:!0}}),o.commonFilterForDataModel(u),o.commonBindUrlParamForDataModel(u),o.commonLimitForDataModel,{type:"select",name:"dataConfig.categories",hiddenOn:"data.dataType != 'sql'",label:t.default("X轴绑定字段（日期）"),placeholder:t.default("请选择"),options:p},{type:"select",name:"dataConfig.openField",hiddenOn:"data.dataType != 'sql'",label:t.default("开盘价"),placeholder:t.default("请选择"),options:p},{type:"select",name:"dataConfig.closeField",hiddenOn:"data.dataType != 'sql'",label:t.default("收盘价"),placeholder:t.default("请选择"),options:p},{type:"select",name:"dataConfig.lowField",hiddenOn:"data.dataType != 'sql'",label:t.default("最低价"),placeholder:t.default("请选择"),options:p},{type:"select",name:"dataConfig.highField",hiddenOn:"data.dataType != 'sql'",label:t.default("最高价"),placeholder:t.default("请选择"),options:p},i.amisInlineSwitch("dataConfig.showVolume",t.default("展示成交量柱图"),"data.dataType != 'sql'"),{type:"select",name:"dataConfig.volumeField",hiddenOn:"data.dataType != 'sql' || !dataConfig.showVolume",label:t.default("成交量"),placeholder:t.default("请选择"),options:p},{type:"select",name:"dataConfig.showMaType",hiddenOn:"data.dataType != 'sql'",label:t.default("移动平均线MA"),placeholder:t.default("请选择"),options:[{label:t.default("不展示"),value:"none"},{label:t.default("绑定字段"),value:"bind"},{label:t.default("根据K线图数据自动计算"),value:"auto"}]},{name:"dataConfig.maField",hiddenOn:"data.dataType != 'sql' || dataConfig.showMaType != 'bind'",children:function(a){var o=a.onChange,i=a.value;return d.createElement(n.default,l.__assign({},{onChange:o,value:i},{chartFrontendId:e.chart.frontendId,containerClassName:"form-group form-item",label:t.default("绑定多条移动平均线"),addTipText:t.default("新增MA"),cols:m}))}},{name:"dataConfig.maAuto",type:"checkboxes",label:t.default("自动计算的移动平均线："),hiddenOn:"data.dataType != 'sql' || dataConfig.showMaType != 'auto'",joinValues:!0,inline:!0,className:"sugar-inline-checkboxes",options:[{label:"MA5",value:"MA5"},{label:"MA10",value:"MA10"},{label:"MA20",value:"MA20"},{label:"MA30",value:"MA30"}]},{type:"select",name:"dataConfig.showRiseType",hiddenOn:"data.dataType != 'sql'",label:t.default("tooltip中展示涨跌额、涨跌幅"),placeholder:t.default("请选择"),options:[{label:t.default("不展示"),value:"none"},{label:t.default("绑定字段"),value:"bind"},{label:t.default("根据K线图数据自动计算"),value:"auto"}]},{type:"select",name:"dataConfig.riseField",hiddenOn:"data.dataType != 'sql' || dataConfig.showRiseType != 'bind'",label:t.default("涨跌额"),placeholder:t.default("请选择"),clearable:!0,options:p},{type:"select",name:"dataConfig.riseRateField",hiddenOn:"data.dataType != 'sql' || dataConfig.showRiseType != 'bind'",label:t.default("涨跌幅（小数，会自动转为百分比）"),placeholder:t.default("请选择"),clearable:!0,options:p}];return s.concat(h,a)},a.advancedCtrl=function(){return[i.amisInlineSwitch("config.chartDataZoom",t.default("开启X轴缩放")),{type:"group",hiddenOn:"!config.chartDataZoom",controls:[{type:"number",name:"config.dataZoomStart",label:t.default("默认缩放起始百分比(%)"),step:5,max:95,min:0},{type:"number",name:"config.dataZoomEnd",label:t.default("默认缩放结束百分比(%)"),step:5,max:100,min:5}]},{type:"group",controls:[i.amisInlineSwitch("config.hideYSplitLine",t.default("隐藏Y轴网格线")),i.amisInlineSwitch("config.hideYSplitArea",t.default("隐藏Y轴区域分割"))]},{type:"group",controls:[{type:"number",label:t.default("坐标轴字号"),name:"config.xFontSize",step:1,min:8,max:100},{type:"number",name:"config.volumeHeight",label:t.default("成交量柱图高度"),step:10,max:600,min:20}]},{type:"divider"},s.getTooltipCtrl(),{type:"divider"},s.getLegendCtrl(),{type:"divider"},{type:"fieldset",title:t.default("坐标轴边距设置"),collapsable:!0,collapsed:!0,headingClassName:"fieldset-title",controls:[{type:"group",controls:[{type:"number",name:"config.marginLeft",label:t.default("左边距(像素)"),step:5,min:10},{type:"number",name:"config.marginTop",label:t.default("顶边距(像素)"),step:5,min:10}]},{type:"group",controls:[{type:"number",name:"config.marginRight",label:t.default("右边距(像素)"),step:5,min:10},{type:"number",name:"config.marginBottom",label:t.default("底边距(像素)"),step:5,min:10}]}]}]}});
;sugar.define("sugar:widgets/charts/candlestick/candlestick.tsx",function(e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var t=e("sugar:node_modules/tslib/tslib.js"),r=e("sugar:utils/i18n.ts"),i=e("sugar:node_modules/react/index.js"),o=e("sugar:widgets/charts/chart-manager.tsx"),n=e("sugar:widgets/charts/candlestick/candlestick-ctrl.tsx"),s=e("sugar:widgets/charts/_hoc/echarts.tsx"),l=e("sugar:node_modules/react-mixin/index.js"),d=e("sugar:widgets/charts/_mixin/echarts.tsx"),u=e("sugar:widgets/charts/_hoc/debug/debug.tsx"),c=e("sugar:widgets/charts/_hoc/toolbar/toolbar.tsx"),h=e("sugar:widgets/charts/_hoc/chart-zoom/index.tsx"),g=e("sugar:node_modules/lodash/cloneDeep.js"),p=e("sugar:utils/common-helper.ts"),m=e("sugar:utils/export-file/export-csv.ts"),f=e("sugar:utils/export-file/export-excel.ts"),x=e("sugar:utils/animation.ts"),y=e("sugar:widgets/charts/utils/common.tsx"),b=e("sugar:widgets/charts/utils/helper.ts"),v=e("sugar:widgets/charts/_hoc/drill-down/drill-down.tsx"),w=12,k=function(e){function a(){return null!==e&&e.apply(this,arguments)||this}return t.__extends(a,e),a.prototype.refresh=function(e){var a,i,o=e.chartData,n=e.chartConfig,s=e.chart,l=g(o),d=this.chart,u=n.marginLeft||80,c=n.marginTop||20,h=n.marginRight||35,m=n.marginBottom||55,f=n.hideYSplitLine,v=n.hideYSplitArea,k="#ec0000",C="#00da3c",S=s.isDashChart?"#ccc":"#333";n.openCustomColor&&(a=n.textColor,i=n.lineColor,k=n.upColor||k,C=n.downColor||C),a=a||S,i=i||S;var A=[r.default("K线")],T=[{type:"category",data:l.categories,boundaryGap:!1,min:"dataMin",max:"dataMax",splitLine:{show:!1},axisPointer:{z:100},axisLine:{onZero:!1,lineStyle:{color:i,width:1}},axisLabel:{color:a,fontSize:n.xFontSize||w}}],O=[{scale:!0,splitLine:{show:!f,lineStyle:{color:s.isDashChart?"#333":"#ddd"}},splitArea:{show:!v},axisLine:{lineStyle:{color:i,width:1}},axisLabel:{color:a,fontSize:n.xFontSize||w}}],_=void 0;n.chartDataZoom&&(_=[{type:"inside",xAxisIndex:[0],start:n.dataZoomStart,end:n.dataZoomEnd},{show:!0,xAxisIndex:[0],type:"slider",bottom:m-22,start:n.dataZoomStart,end:n.dataZoomEnd}],m+=40);var L=[{left:u,top:c,right:h,bottom:m}],M=[{name:r.default("K线"),type:"candlestick",data:l.candlestick,itemStyle:{color:k,color0:C,borderColor:null,borderColor0:null}}];if(n.openCustomShadow&&n.shadowBlur){var N=M[0].itemStyle;N.shadowBlur=n.shadowBlur,N.shadowColor=n.shadowColor||"rgba(0, 0, 0, 0.5)",N.shadowOffsetX=n.shadowOffsetX||0,N.shadowOffsetY=n.shadowOffsetY||0}var F=l.ma||l.MA;F&&F.length&&F.forEach(function(e){M.push({name:e.name,data:e.data,type:"line",smooth:!0,symbolSize:0,lineStyle:{opacity:.5}}),A.push(e.name)});var I=void 0;if(l.volume&&l.volume.length){var D=l.volume.map(function(e,a){return[a,e,l.candlestick[a][0]>l.candlestick[a][1]?1:-1]});I={show:!1,seriesIndex:M.length,dimension:2,pieces:[{value:1,color:C},{value:-1,color:k}]},M.push({name:r.default("成交量"),type:"bar",xAxisIndex:1,yAxisIndex:1,data:D}),L=[{left:u,top:c,right:h,bottom:m+n.volumeHeight+5},{left:u,right:h,bottom:m-25,height:n.volumeHeight}],T.push({type:"category",gridIndex:1,data:l.categories,scale:!0,boundaryGap:!1,axisLine:{show:!1},axisTick:{show:!1},splitLine:{show:!1},axisLabel:{show:!1},min:"dataMin",max:"dataMax"}),O.push({scale:!0,gridIndex:1,splitNumber:2,axisLabel:{show:!1},axisLine:{show:!1},axisTick:{show:!1},splitLine:{show:!1}}),_&&(_[0].xAxisIndex.push(1),_[1].xAxisIndex.push(1))}var B={textStyle:b.getTextStyle(n),legend:t.__assign(t.__assign({},b.legendPositionConfig({marginRight:20,marginLeft:20,marginTop:20,marginBottom:20},n)),{data:A,show:n.chartLegend,textStyle:{fontFamily:n.legendFontFamily||null,fontSize:n.legendFontSize||w,color:n.legendTextColor||a}}),axisPointer:{link:{xAxisIndex:"all"},label:{backgroundColor:"#aaa"}},xAxis:T,yAxis:O,dataZoom:_,grid:L,visualMap:I,series:M,tooltip:{trigger:"axis",confine:n.tooltipConfine||!1,extraCssText:y.getTooltipCss(n),axisPointer:{type:"cross"},formatter:function(e){var a=[];e instanceof Array||(e=[e]);var t=n.tooltipFontSize||w+3,i=Math.floor(.7*t),o=Math.floor(.7*t*.5);if(e.forEach(function(e){"candlestick"===e.seriesType?(a.push('<span style="display:inline-block;margin-right:5px;border-radius:50%;width:'+i+"px;height:"+i+"px;background-color:"+e.color+';"></span>'+e.seriesName+"："),a.push('<span style="display:inline-block;margin:0 5px;border-radius:50%;width:'+o+"px;height:"+o+"px;background-color:"+e.color+';"></span>'+r.default("开盘价：")+p.formatStringOrNumber(e.value[1],null,!0)),a.push('<span style="display:inline-block;margin:0 5px;border-radius:50%;width:'+o+"px;height:"+o+"px;background-color:"+e.color+';"></span>'+r.default("收盘价：")+p.formatStringOrNumber(e.value[2],null,!0)),a.push('<span style="display:inline-block;margin:0 5px;border-radius:50%;width:'+o+"px;height:"+o+"px;background-color:"+e.color+';"></span>'+r.default("最低价：")+p.formatStringOrNumber(e.value[3],null,!0)),a.push('<span style="display:inline-block;margin:0 5px;border-radius:50%;width:'+o+"px;height:"+o+"px;background-color:"+e.color+';"></span>'+r.default("最高价：")+p.formatStringOrNumber(e.value[4],null,!0))):"line"===e.seriesType?a.push('<span style="display:inline-block;margin-right:5px;border-radius:50%;width:'+i+"px;height:"+i+"px;background-color:"+e.color+';"></span>'+e.seriesName+"："+p.formatStringOrNumber(e.value,null,!0)):"bar"===e.seriesType&&a.push('<span style="display:inline-block;margin-right:5px;border-radius:50%;width:'+i+"px;height:"+i+"px;background-color:"+e.color+';"></span>'+e.seriesName+"："+p.formatStringOrNumber(e.value[1],null,!0))}),l.rise&&l.rise.length&&l.rise[e[0].dataIndex]){var s=l.rise[e[0].dataIndex][0]>0?k:C,d=l.rise[e[0].dataIndex][0]>0?"+":"";a.push('<span style="display:inline-block;margin-right:5px;border-radius:50%;width:'+i+"px;height:"+i+"px;background-color:"+s+';"></span>'+r.default("涨跌额：")+(d+p.formatStringOrNumber(l.rise[e[0].dataIndex][0],3,!0))),a.push('<span style="display:inline-block;margin-right:5px;border-radius:50%;width:'+i+"px;height:"+i+"px;background-color:"+s+';"></span>\n              '+r.default("涨跌幅：")+(d+p.formatStringOrNumber(100*l.rise[e[0].dataIndex][1],2,!0)+"%"))}return'<div style="font-size: '+t+'px;line-height:1.3">'+(p.getWeekByDate(e[0].name)+"<br />"+a.join("<br/>"))+"</div>"}}};n.openCustomColor&&n.customColors&&n.customColors.length&&(B.color=n.customColors.map(function(e){return e.color||e.color1})),x.setAnimationOption(B,n),d.setOption(B,!0)},a.displayName="Candlestick",a=t.__decorate([v.default,u.default,c.default,h.default,s.default,l.decorate(d.default)],a)}(i.Component);a.default=k;var C=function(e){if(!e)return r.default("无数据");if(!(e.categories&&e.candlestick&&e.categories instanceof Array&&e.candlestick instanceof Array))return r.default("数据中缺少categories或candlestick字段");if(!e.categories.length||!e.candlestick.length)return r.default("无数据");if(!p.isArrayOfTypes(e.categories,["string","number","null"]))return r.default("X轴绑定的数据类型不对");for(var a=0;a<e.candlestick.length;a++){if(!(e.candlestick[a]instanceof Array)||4!==e.candlestick[a].length)return r.default("candlestick的每个元素必须是长度为4的数组");if(!p.isArrayOfTypes(e.candlestick[a],["numberString","number","-"]))return r.default("K线图的开盘、收盘、最低、最高价数据必须都是整数或小数")}var t=e.ma||e.MA;if(t){if(!(t instanceof Array))return r.default("移动平均线ma字段必须是数组");for(var a=0;a<t.length;a++){if(!(t[a].name&&t[a].data&&t[a].data instanceof Array))return r.default("移动平均线ma的每项必须包含name、data字段");if(!p.isArrayOfTypes(t[a].data,["numberString","number","null","-"]))return r.default("移动平均线ma每项必须是整数或小数")}}if(e.volume){if(!(e.volume instanceof Array))return r.default("成交量volume字段必须是数组");if(!p.isArrayOfTypes(e.volume,["numberString","number","null","-"]))return r.default("成交量volume数据的每项必须是整数或小数")}if(e.rise){var i=e.rise;if(!(i instanceof Array))return r.default("涨跌幅rise字段必须是二维数组");for(var a=0;a<i.length;a++){if(!(i[a]instanceof Array))return r.default("涨跌幅rise字段必须是二维数组");if(!p.isArrayOfTypes(i[a],["numberString","number","null","-"]))return r.default("涨跌幅rise二维数组中每项必须是整数或小数")}}return!0},S=function(e,a){var t=O(e);f.exportExcelByRows(t,""+(a.dynamicName||a.name||"export"))},A=function(e,a){var t=O(e);m.exportCsvByRows(t,(a.dynamicName||a.name||"export")+".csv")},T=function(e){return O(e)},O=function(e){var a=[];if(e&&e.data&&e.data.categories&&e.data.candlestick&&e.data.categories.length&&e.data.candlestick.length){for(var t=[r.default("X轴"),r.default("开盘价"),r.default("收盘价"),r.default("最低价"),r.default("最高价")],i=e.data.categories,o=e.data.candlestick,n=e.data.ma||e.data.MA,s=e.data.volume,l=e.data.rise,d=0;d<i.length;d++){var u=o[d]||[],c=[i[d],u[0],u[1],u[2],u[3]];if(n&&n.length)for(var h=0;h<n.length;h++)n[h].name&&n[h].data&&(0===d&&t.push(n[h].name),c.push(n[h].data[d]));if(s&&s.length&&(0===d&&t.push(r.default("成交量")),c.push(s[d])),l&&l.length){0===d&&(t.push(r.default("涨跌额")),t.push(r.default("涨跌幅")));var g=l[d]||[0,0];c.push(g[0]),c.push(p.formatStringOrNumber(100*g[1],2,!0)+"%")}a.push(c)}a.unshift(t)}return a},_=function(e){var a=e.dataConfig,t=a.dataModel,r=t.x,i=void 0===r?[]:r,o=t.openField,n=void 0===o?[]:o,s=t.closeField,l=void 0===s?[]:s,d=t.lowField,u=void 0===d?[]:d,c=t.highField,h=void 0===c?[]:c,g=t.maField,p=void 0===g?[]:g,m=t.riseField,f=void 0===m?[]:m,x=t.riseRateField,y=void 0===x?[]:x,b=a.showMaType,v=a.showRiseType;return 1!==i.length||1!==n.length||1!==l.length||1!==u.length||1!==h.length?!1:("bind"!==b||p.length)&&("bind"!==v||f.length&&y.length)?!0:!1};o.register({kind:"otherChart",type:"candlestick",name:r.default("K线图"),iconClassName:"chart-candlestick",enableTemplate:!0,commonCustomShadow:!0,initialState:{dataType:"api",dataApiUrl:n.chartDemoUrl,width:12,height:380,config:{chartLegend:!0,chartDataZoom:!0,dataZoomStart:50,dataZoomEnd:100,marginLeft:60,marginTop:20,marginRight:35,marginBottom:55,hideYSplitArea:!0,volumeHeight:40},dataConfig:{showVolume:!1,showMaType:"auto",maAuto:"MA5",showRiseType:"auto"}},initialDashboardState:{width:470,height:310,config:{hideYSplitLine:!0}},component:k,needDashboardAutoFresh:!0,dataBindCtrl:n.dataBindCtrl,basicCtrl:n.basicCtrl,advancedCtrl:n.advancedCtrl,validate:C,exportCSV:A,exportExcel:S,exportRows:T,canBeDrillChild:!0,dataModelPanelShow:[["dataType","dataModel"]],loadDataWhenDataModelConfigChange:_})});
;sugar.define("sugar:widgets/charts/sankey/sankey-ctrl.tsx",function(e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.advancedCtrl=a.dataBindCtrl=a.chartEigens=a.chartDemoUrl=void 0;var t=e("sugar:node_modules/tslib/tslib.js"),l=e("sugar:utils/i18n.ts"),d=e("sugar:widgets/ctrl-panel/data-bind-ctrl/index.tsx"),o=e("sugar:widgets/amis-inline-switch.tsx"),n=e("sugar:widgets/data-model/data-model-field-holder/data-model-field-holder.tsx"),r=e("sugar:widgets/charts/utils/common.tsx"),i="/openapi/demo/chart?type=sankey";a.chartDemoUrl="$CUR_HOST/openapi/demo/chart?type=sankey",a.chartEigens=[{field:[{name:"sourceNode",type:"d",minCount:1,maxCount:1},{name:"targetNode",type:"d",minCount:1,maxCount:1},{name:"value",type:"m",minCount:1,maxCount:1}]}],a.dataBindCtrl=function(e){var a=d.getDebugAndRefreshBtn({loadData:e.chart.loadData,loadDebugData:e.chart.loadDebugData,dataType:e.chart.dataType,refreshText:l.default("刷新图表")}),o=d.getDataBindCommon({frontendId:e.chart.frontendId,dataTypeOptions:["dataModel","api","sql","json"],api:{demoUrl:i},sql:{needContinuitySetting:!1},loadData:e.chart.loadData,loadDebugData:e.chart.loadDebugData,curUrl:e.chart.dataApiUrl}),r=e.chart.dataModelHash||"",s=e.sqlModelStore.detailMap.mapByHash.get(r),u=d.generateSQLFieldList(s),c=t.__spreadArrays([n.getDataModelFieldHolder({name:"sourceNode",label:l.default("流出节点名称"),config:{dataModelHash:r,holderId:e.chart.frontendId+"-sourceNode",maxCount:1,onlyDimension:!0}}),n.getDataModelFieldHolder({name:"targetNode",label:l.default("流入节点名称字段"),config:{dataModelHash:r,holderId:e.chart.frontendId+"-targetNode",maxCount:1,onlyDimension:!0}}),n.getDataModelFieldHolder({name:"value",label:l.default("流数据大小"),config:{dataModelHash:r,holderId:e.chart.frontendId+"-value",maxCount:1,onlyMeasure:!0}}),d.commonFilterForDataModel(r),d.commonBindUrlParamForDataModel(r)],n.getChartConditionsHolder(r,e.chart),[d.commonLimitForDataModel,{type:"select",name:"dataConfig.sourceField",hiddenOn:"data.dataType != 'sql'",label:l.default("流出节点名称字段"),placeholder:l.default("请选择"),options:u},{type:"select",name:"dataConfig.targetField",hiddenOn:"data.dataType != 'sql'",label:l.default("流入节点名称字段"),placeholder:l.default("请选择"),options:u},{type:"select",name:"dataConfig.valueField",hiddenOn:"data.dataType != 'sql'",label:l.default("流大小字段"),placeholder:l.default("请选择"),options:u}]);return o.concat(c,a)},a.advancedCtrl=[o.amisInlineSwitch("config.draggable",l.default("节点可拖拽")),r.dataUnitCtrl,{type:"divider"},r.getTooltipCtrl([o.amisInlineSwitch("config.showPercent",l.default("tooltip中显示流在节点中占比"))]),{type:"divider"},r.getLabelCtrl([r.labelPosition]),{type:"divider"},{type:"fieldset",title:l.default("系列设置(series)"),collapsable:!0,collapsed:!0,headingClassName:"fieldset-title",controls:t.__spreadArrays([{type:"group",controls:[{type:"select",clearable:!0,name:"config.nodeAlign",label:l.default("节点对齐方式"),options:[{label:l.default("两端对齐"),value:"justify"},{label:l.default("左对齐"),value:"left"},{label:l.default("右对齐"),value:"right"}]},{type:"select",clearable:!0,name:"config.orient",label:l.default("节点布局方式"),options:[{label:l.default("水平方向"),value:"horizontal"},{label:l.default("垂直方向"),value:"vertical"}]}]},{type:"group",controls:[{type:"select",name:"config.lineColorType",clearable:!0,label:l.default("图边颜色分配方式"),options:[{label:l.default("按源节点颜色"),value:"source"},{label:l.default("按目标节点颜色"),value:"target"}]},{type:"number",name:"config.nodeGap",label:l.default("节点间距"),min:0}]},{type:"group",controls:[{type:"number",name:"config.lineOpacity",label:l.default("图边透明度"),min:0,max:1,step:.1},{type:"number",name:"config.lineCurveness",label:l.default("图边曲度"),min:0,max:1,step:.1}]},{type:"select",name:"config.focusNode",clearable:!0,label:l.default("节点图边高亮方式"),options:[{label:l.default("所有相关节点图边"),value:"allEdges"},{label:l.default("出处相关节点图边"),value:"outEdges"},{label:l.default("入处相关节点图边"),value:"inEdges"}]}],r.gridCtrl.controls)}]});
;sugar.define("sugar:widgets/charts/sankey/sankey.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=e("sugar:node_modules/tslib/tslib.js"),n=e("sugar:utils/i18n.ts"),o=e("sugar:node_modules/react/index.js"),r=e("sugar:widgets/charts/chart-manager.tsx"),s=e("sugar:widgets/charts/sankey/sankey-ctrl.tsx"),l=e("sugar:widgets/charts/_hoc/echarts.tsx"),i=e("sugar:node_modules/react-mixin/index.js"),d=e("sugar:node_modules/lodash/merge.js"),u=e("sugar:widgets/charts/_mixin/echarts.tsx"),c=e("sugar:widgets/charts/_hoc/debug/debug.tsx"),g=e("sugar:widgets/charts/_hoc/drill-down/drill-down.tsx"),m=e("sugar:widgets/charts/_hoc/toolbar/toolbar.tsx"),f=e("sugar:widgets/charts/_hoc/chart-zoom/index.tsx"),h=e("sugar:node_modules/lodash/cloneDeep.js"),p=e("sugar:utils/common-helper.ts"),y=e("sugar:utils/export-file/export-csv.ts"),v=e("sugar:utils/export-file/export-excel.ts"),x=e("sugar:utils/animation.ts"),C=e("sugar:widgets/charts/utils/common.tsx"),w=e("sugar:widgets/charts/utils/helper.ts"),_=12,b=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.getDrillDownParam=function(e){return a.__assign(a.__assign({},e.data),{_sugar_dd_default_:e.data.name})},t.prototype.getDependenceParam=function(e){return{item:a.__assign(a.__assign({},e.data),{_sugar_dd_default_:e.data.name}),state:{seriesIndex:e.dataType,dataIndex:e.dataIndex}}},t.prototype.refresh=function(e){var t,a=e.chartData,o=e.chartConfig,r=e.chart,s=e.hub,l=r.isDashChart?"#ccc":"#333";o.openCustomColor&&(t=o.textColor),t=t||l;for(var i=h(a),u=this.chart,c=o.unit||"",g=o.prefix||"",m={},f=0,p=i.links;f<p.length;f++){var y=p[f];m[y.source]||(m[y.source]={"in":0,out:0}),m[y.source].out+=+y.value,m[y.target]||(m[y.target]={"in":0,out:0}),m[y.target].in+=+y.value}if(o.openCustomColor&&o.customColors&&o.customColors.length){var v=o.customColors.map(function(e){return e.color});i.nodes=i.nodes.map(function(e,t){return{name:e.name,itemStyle:{color:v[t%v.length]}}})}if(s.dependenceData.dependenceState){var b=s.dependenceData.dependenceState,k=b.seriesIndex,S=b.dataIndex;"edge"===k?i.links=i.links.map(function(e,t){return t===S&&(e.lineStyle={opacity:1}),e}):"node"===k&&(i.nodes=i.nodes.map(function(e,t){return e.itemStyle||(e.itemStyle={}),e.itemStyle.opacity=t===S?1:.2,e}))}var D={type:"sankey",data:i.nodes,links:i.links,focusNodeAdjacency:o.focusNode||!1,orient:o.orient||(o.column?"vertical":"horizontal"),nodeAlign:o.nodeAlign||"",draggable:!!o.draggable,itemStyle:{borderWidth:0},label:{show:o.chartLabel,color:o.labelColor||t,fontSize:o.labelFontSize||_,fontFamily:o.labelFontFamily||null,position:o.labelPosition||null},lineStyle:{opacity:o.lineOpacity>=0?o.lineOpacity:.3,color:o.lineColorType||"source",curveness:o.lineCurveness>=0?o.lineCurveness:.5}};o.marginLeft&&(D.left=o.marginLeft),o.marginRight&&(D.right=o.marginRight),o.marginTop&&(D.top=o.marginTop),o.marginBottom&&(D.bottom=o.marginBottom),o.nodeGap>=0&&(D.nodeGap=o.nodeGap),o.openCustomShadow&&o.shadowBlur&&(D.itemStyle=d({},D.itemStyle,{shadowBlur:o.shadowBlur,shadowColor:o.shadowColor||"rgba(0, 0, 0, 0.5)",shadowOffsetX:o.shadowOffsetX||0,shadowOffsetY:o.shadowOffsetY||0}));var T={textStyle:w.getTextStyle(o),tooltip:{trigger:"item",triggerOn:"mousemove",confine:o.tooltipConfine||!1,extraCssText:C.getTooltipCss(o),formatter:function(e){if("edge"===e.dataType){var t=0,a=0;return o.showPercent&&e.data.source&&(t=m[e.data.source].out),o.showPercent&&e.data.target&&(a=m[e.data.target].in),n.default("流向：「"+e.name+"」")+n.default("</br>大小：「"+g+"」「"+e.value+"」「"+c+"」")+(t?n.default("</br>占源节点流出：「"+(e.value/t*100).toFixed(2)+"」%"):"")+(a?n.default("</br>占目标节点流入：「"+(e.value/a*100).toFixed(2)+"」%"):"")}if("node"===e.dataType){var r=0,s=0;return m[e.name]&&(r=m[e.name].in,s=m[e.name].out),n.default("节点：「"+e.name+"」")+(r?n.default("</br>流入总量：「"+g+"」「"+r+"」「"+c+"」"):"")+(s?n.default("</br>流出总量：「"+g+"」「"+s+"」「"+c+"」"):"")}return""}},series:D};o.openCustomColor&&o.lineColor&&(T.series.lineStyle.color=o.lineColor),x.setAnimationOption(T,o),u.setOption(T,!0)},t.displayName="Sankey",t=a.__decorate([g.default,c.default,m.default,f.default,l.default,i.decorate(u.default)],t)}(o.Component);t.default=b;var k=function(e){if(!e)return n.default("无数据");if(!e.nodes||!e.nodes.length)return n.default("数据缺少 nodes 字段");if(!e.links||!e.links.length)return n.default("数据缺少 links 字段");for(var t={},a=0;a<e.nodes.length;a++){var o=e.nodes[a];if(!o.name)return n.default("nodes 字段中，第「"+(a+1)+"」项数据中没有 name 字段");if(t[o.name])return n.default("节点中「"+o.name+"」重复，节点名称不允许重复");t[o.name]=!0}for(var a=0;a<e.links.length;a++){var r=e.links[a];if(!r.source)return n.default("links 字段中，第「"+(a+1)+"」项数据中没有 source 字段");if(!r.target)return n.default("links 字段中，第「"+(a+1)+"」项数据中没有 target 字段");if(!r.value)return n.default("links 字段中，第「"+(a+1)+"」项数据中没有 value 字段");if(!p.isValueOfTypes(r.value,["number","numberString"]))return n.default("links 字段中，第「"+(a+1)+"」项数据中 value 字段不是有效数字")}return!0},S=function(e,t){var a=O(e);v.exportExcelByRows(a,""+(t.dynamicName||t.name||"export"))},D=function(e,t){var a=O(e);y.exportCsvByRows(a,(t.dynamicName||t.name||"export")+".csv")},T=function(e){return O(e)},O=function(e){if(e&&e.data&&e.data.links&&e.data.links.length){var t=[["源节点","目标节点","流大小"]];return e.data.links.forEach(function(e){t.push([e.source,e.target,e.value])}),t}return[]},B=function(e){var t=e.dataConfig.dataModel,a=t.sourceNode,n=void 0===a?[]:a,o=t.targetNode,r=void 0===o?[]:o,s=t.value,l=void 0===s?[]:s;return 1!==n.length||1!==r.length||1!==l.length?!1:!0};r.register({kind:"otherChart",type:"sankey",name:n.default("桑基图"),iconClassName:"chart-sankey",enableTemplate:!0,commonCustomShadow:!0,commonCustomColor:!0,commonCustomColorTitle:["","连线颜色",""],initialState:{dataType:"api",dataApiUrl:s.chartDemoUrl,config:{column:!1,showPercent:!0,chartLabel:!0,draggable:!0}},initialDashboardState:{config:{}},component:b,dataBindCtrl:s.dataBindCtrl,advancedCtrl:s.advancedCtrl,exportCSV:D,exportExcel:S,exportRows:T,needDashboardAutoFresh:!0,validate:k,drillDownType:"single",canBeDrillChild:!0,dataModelPanelShow:[["dataType","dataModel"]],drillDownSuggestDataModelField:"sourceNode",loadDataWhenDataModelConfigChange:B,chartEigens:s.chartEigens})});
;sugar.define("sugar:widgets/charts/cartesian-heatmap/cartesian-heatmap-ctrl.tsx",function(e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.advancedCtrl=a.dataBindCtrl=a.chartEigens=a.chartDemoUrl=void 0;var t=e("sugar:node_modules/tslib/tslib.js"),l=e("sugar:utils/i18n.ts"),d=e("sugar:node_modules/react/index.js"),n=e("sugar:widgets/ctrl-panel/data-bind-ctrl/index.tsx"),o=e("sugar:widgets/object-array-editor/object-array-editor.tsx"),i=e("sugar:widgets/amis-inline-switch.tsx"),r=e("sugar:widgets/data-model/data-model-field-holder/data-model-field-holder.tsx"),s=e("sugar:widgets/charts/utils/common.tsx"),c="/openapi/demo/chart?type=cartHeatmap";a.chartDemoUrl="$CUR_HOST/openapi/demo/chart?type=cartHeatmap";var m=[{type:"text",key:"begin",name:l.default("大于"),placeholder:l.default("不确定可不填"),tdStyle:{minWidth:70}},{type:"text",key:"end",name:l.default("小于等于"),placeholder:l.default("不确定可不填"),tdStyle:{minWidth:70}}];a.chartEigens=[{field:[{name:"x",type:"d",minCount:1,maxCount:1},{name:"y",type:"d",minCount:1,maxCount:1},{name:"color",type:"m",minCount:1,maxCount:1}]}],a.dataBindCtrl=function(e){var a=n.getDebugAndRefreshBtn({loadData:e.chart.loadData,loadDebugData:e.chart.loadDebugData,dataType:e.chart.dataType,refreshText:l.default("刷新图表")}),d=e.chart.dataModelHash||"",o=e.sqlModelStore.detailMap.mapByHash.get(d),i=n.generateSQLFieldList(o),s=n.getDataBindCommon({frontendId:e.chart.frontendId,dataTypeOptions:["dataModel","api","sql","json"],api:{demoUrl:c},sql:{needContinuitySetting:!1,sqlFieldList:i},loadData:e.chart.loadData,loadDebugData:e.chart.loadDebugData,curUrl:e.chart.dataApiUrl}),m=t.__spreadArrays([r.getDataModelFieldHolder({name:"x",label:l.default("X轴"),config:{dataModelHash:d,holderId:e.chart.frontendId+"-x",maxCount:1,onlyDimension:!0}}),r.getDataModelFieldHolder({name:"y",label:l.default("Y轴"),config:{dataModelHash:d,holderId:e.chart.frontendId+"-y",maxCount:1,onlyDimension:!0}}),r.getDataModelFieldHolder({name:"color",label:l.default("颜色深浅度"),config:{dataModelHash:d,holderId:e.chart.frontendId+"-color",maxCount:1,onlyMeasure:!0}}),n.commonFilterForDataModel(d),n.commonBindUrlParamForDataModel(d)],r.getChartConditionsHolder(d,e.chart),[n.commonLimitForDataModel,{type:"select",name:"dataConfig.xCategories",hiddenOn:"data.dataType != 'sql'",label:l.default("X轴绑定字段"),placeholder:l.default("请选择"),options:i},{type:"select",name:"dataConfig.yCategories",hiddenOn:"data.dataType != 'sql'",label:l.default("Y轴绑定字段"),placeholder:l.default("请选择"),options:i},{type:"select",name:"dataConfig.valueField",hiddenOn:"data.dataType != 'sql'",label:l.default("取值字段"),placeholder:l.default("请选择"),options:i}]);return s.concat(m,a)},a.advancedCtrl=function(e){return[{type:"group",controls:[i.amisInlineSwitch("config.hideSplitArea",l.default("隐藏区域分割")),i.amisInlineSwitch("config.hideZero",l.default("隐藏零值色块"))]},s.dataUnitCtrl,{type:"divider"},s.getTooltipCtrl([i.amisInlineSwitch("config.tooltipPercent",l.default("Tooltip中显示占比"))]),{type:"divider"},{type:"fieldset",title:l.default("图例设置(legend)"),collapsed:!0,collapsable:!0,headingClassName:"fieldset-title",controls:t.__spreadArrays(s.legendBasicCtrl.slice(0,7),[{type:"number",name:"config.fixNumber",label:l.default("保留小数位数"),step:1,max:10,min:0},i.amisInlineSwitch("config.cusVal",l.default("自定义每段颜色映射边界值")),{name:"config.customColorRange",hiddenOn:"!config.cusVal",children:function(a){var n=a.onChange,i=a.value;return d.createElement(o.default,t.__assign({},{onChange:n,value:i},{chartFrontendId:e.chart.frontendId,containerClassName:"form-group form-item",label:l.default("请指定每段颜色的起始值和结束值"),addTipText:l.default("新增一段颜色映射"),cols:m}))}},{type:"number",name:"config.splitNumber",label:l.default("颜色映射段数"),hiddenOn:"config.cusVal",step:1,min:1}])},{type:"divider"},s.getLabelCtrl(),{type:"divider"},{type:"fieldset",title:l.default("坐标轴设置"),collapsed:!0,collapsable:!0,headingClassName:"fieldset-title",controls:[{type:"group",controls:[{type:"number",label:l.default("X轴字号"),name:"config.xFontSize",step:1,min:8,max:100},{type:"number",label:l.default("Y轴字号"),name:"config.yFontSize",step:1,min:8,max:100}]},{type:"number",name:"config.xLabelRotate",label:l.default("X轴标签倾斜度(-90至90)"),min:-90,max:90,step:5},i.amisInlineSwitch("config.xLableVertical",l.default("竖着显示文字")),{type:"number",name:"config.yLabelRotate",label:l.default("Y轴标签倾斜度(-90至90)"),min:-90,max:90,step:5}]},{type:"divider"},s.gridCtrl]}});
;sugar.define("sugar:widgets/charts/cartesian-heatmap/cartesian-heatmap.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=e("sugar:node_modules/tslib/tslib.js"),r=e("sugar:utils/i18n.ts"),o=e("sugar:node_modules/react/index.js"),i=e("sugar:widgets/charts/chart-manager.tsx"),n=e("sugar:widgets/charts/cartesian-heatmap/cartesian-heatmap-ctrl.tsx"),s=e("sugar:widgets/charts/_hoc/echarts.tsx"),l=e("sugar:node_modules/react-mixin/index.js"),d=e("sugar:widgets/charts/_mixin/echarts.tsx"),u=e("sugar:widgets/charts/_hoc/debug/debug.tsx"),g=e("sugar:widgets/charts/_hoc/drill-down/drill-down.tsx"),c=e("sugar:widgets/charts/_hoc/toolbar/toolbar.tsx"),m=e("sugar:widgets/charts/_hoc/chart-zoom/index.tsx"),h=e("sugar:node_modules/lodash/cloneDeep.js"),f=e("sugar:utils/common-helper.ts"),p=e("sugar:utils/export-file/export-csv.ts"),x=e("sugar:utils/export-file/export-excel.ts"),y=e("sugar:utils/animation.ts"),v=e("sugar:widgets/charts/utils/common.tsx"),C=e("sugar:widgets/charts/utils/helper.ts"),b=12,w=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.getDrillDownParam=function(e){var t=h(this.props.chartData),a=t.xCategories,r=t.xCategories_sugar_origin,o=t.yCategories,i=t.yCategories_sugar_origin,n={x:e.value[0],y:e.value[1],_sugar_dd_default_:e.value[0],value:e.value[2]};if(r){var s=a.indexOf(n.x);n.x_sugar_origin=r[s]?r[s]:"",n._sugar_dd_default_=n.x_sugar_origin}if(i){var s=o.indexOf(n.y);n.y_sugar_origin=i[s]?i[s]:""}return n},t.prototype.getDependenceParam=function(e){return{item:this.getDrillDownParam(e),state:{seriesIndex:e.seriesIndex,dataIndex:e.dataIndex}}},t.prototype.refresh=function(e){var t=e.chartData,o=e.chartConfig,i=e.chart,n=e.hub,s=h(t),l=s.yCategories,d=s.xCategories,u=s.data,g=s.unit,c=s.dataFormat,m=this.chart,p=o.marginLeft||80,x=o.marginTop||20,w=o.marginRight||35,_=o.marginBottom||55,S=void 0!==o.chartLegend?o.chartLegend:!0,L=o.prefix||"";g=g||o.unit||"",u=u.map(function(e){var t="number"==typeof e[0]?e[0].toString():e[0],a="number"==typeof e[1]?e[1].toString():e[1];return[t,a,e[2]]});var D,F,N=i.isDashChart?"#ccc":"#333";o.openCustomColor&&(D=o.textColor,F=o.lineColor),D=D||N,F=F||N;var T,B,R=u.reduce(function(e,t){return(void 0===T||T>t[2])&&(T=+t[2]),(void 0===B||B<t[2])&&(B=+t[2]),e+ +t[2]},0);o.cusVal&&(T=isNaN(o.min)?T:o.min,B=isNaN(o.max)?B:o.max),o.hideZero&&(u=u.map(function(e){return[e[0],e[1],e[2]||"-"]}));var A="boolean"==typeof o.chartLabel?o.chartLabel:!o.hideNumber,M={name:"cartesian-heatmap",type:"heatmap",data:u,label:A?{show:!0,color:o.labelColor,fontSize:o.labelFontSize||b,fontFamily:o.labelFontFamily||null,formatter:function(e){return L+f.formatDataByType(e.value[2],c)+g}}:{show:!1},itemStyle:{},emphasis:{itemStyle:{shadowBlur:o.shadowBlur?o.shadowBlur+10:10,shadowColor:"rgba(0, 0, 0, 0.5)"}}};if(o.openCustomShadow&&o.shadowBlur&&(M.itemStyle={shadowBlur:o.shadowBlur,shadowColor:o.shadowColor||"rgba(0, 0, 0, 0.5)",shadowOffsetX:o.shadowOffsetX||0,shadowOffsetY:o.shadowOffsetY||0}),n.dependenceData.dependenceState){var O=n.dependenceData.dependenceState.dataIndex;M.data=M.data.map(function(e,t){return{value:e,itemStyle:{opacity:t===O?1:.5}}})}var I=[{type:"category",splitArea:{show:!o.hideSplitArea,interval:0},splitLine:{show:!1},axisLine:{lineStyle:{color:F,width:0}},axisTick:{lineStyle:{color:F}},axisLabel:{color:D,fontSize:o.xFontSize||b,interval:0},data:d}],z=[{type:"category",splitArea:{show:!o.hideSplitArea,interval:0},splitLine:{show:!1},axisLine:{lineStyle:{color:F,width:0}},axisTick:{lineStyle:{color:F}},axisLabel:{color:D,fontSize:o.yFontSize||b,interval:0},data:l}];o.xLabelRotate&&parseInt(o.xLabelRotate,10)&&(I[0].axisLabel.rotate=parseInt(o.xLabelRotate,10)),o.xLableVertical&&(I[0].axisLabel.formatter=function(e){return(e+"").split("").join("\n")}),o.yLabelRotate&&parseInt(o.yLabelRotate,10)&&(z[0].axisLabel.rotate=parseInt(o.yLabelRotate,10));var P={visualMap:a.__assign(a.__assign({right:"center"},C.legendPositionConfig({marginRight:20,marginLeft:20,marginTop:20,marginBottom:20},o)),{show:S,type:"piecewise",formatter:function(e,t){var a=parseInt(o.fixNumber,10);isNaN(a)||(e=isFinite(e)?parseFloat(e.toFixed(a)):e,t=isFinite(t)?parseFloat(t.toFixed(a)):t);var r=c&&isFinite(e)?f.formatDataByType(e,c,2):e,i=c&&isFinite(t)?f.formatDataByType(t,c,2):t;return e===-1/0?"≤ "+L+i+g:1/0===t?"> "+L+r+g:""+L+r+g+" - "+L+i+g},textStyle:{fontFamily:o.legendFontFamily||null,fontSize:o.legendFontSize||b,color:o.legendTextColor||D}}),grid:{left:p,top:x,right:w,bottom:_},xAxis:I,yAxis:z,series:M,tooltip:{trigger:"item",confine:o.tooltipConfine||!1,extraCssText:v.getTooltipCss(o),formatter:function(e){return(t.xName||"X")+"："+e.value[0]+"</br>"+((t.yName||"Y")+"："+e.value[1]+"</br>")+(e.marker+" "+L+f.formatDataByType(e.value[2],c)+g)+(o.tooltipPercent?"</br>"+r.default("占比：")+(e.value[2]/R*100).toFixed(2)+"%":"")}}};o.cusVal&&o.customColorRange&&o.customColorRange.length?P.visualMap.pieces=o.customColorRange.map(function(e){var t={};return""===e.begin||isNaN(e.begin)||(t.gt=+e.begin),""===e.end||isNaN(e.end)||(t.lte=+e.end),t}).reverse():(P.visualMap.min=T,P.visualMap.max=B,P.visualMap.splitNumber=o.splitNumber||5),o.openCustomColor&&o.customColors&&o.customColors.length&&(P.visualMap.inRange={color:o.customColors.map(function(e){return e.color||"#fff"})}),y.setAnimationOption(P,o),m.setOption(P,!0)},t.displayName="CartesianHeatmap",t=a.__decorate([g.default,u.default,c.default,m.default,s.default,l.decorate(d.default)],t)}(o.Component);t.default=w;var _=function(e){if(!e)return r.default("无数据");if(!(e.xCategories&&e.xCategories instanceof Array&&e.xCategories.length))return r.default("数据中缺少 xCategories 字段或 xCategories 字段为空");if(!(e.yCategories&&e.yCategories instanceof Array&&e.yCategories.length))return r.default("数据中缺少 yCategories 字段或 yCategories 字段为空");if(!(e.data&&e.data instanceof Array&&e.data.length))return r.default("数据中缺少 data 字段或 data 字段为空");if(!f.isArrayOfTypes(e.xCategories,["string","number","null"]))return r.default("X轴绑定的数据类型不对，不是字符串或数字");if(!f.isArrayOfTypes(e.yCategories,["string","number","null"]))return r.default("Y轴绑定的数据类型不对，不是字符串或数字");for(var t=0;t<e.data.length;t++){var a=e.data[t];if(!a||3!==a.length)return r.default("第「"+(t+1)+"」项数据不全");if(!f.isValueOfTypes(a[2],["numberString","number"]))return r.default("第「"+(t+1)+"」项数据的第3项不是数字")}return!0},S=function(e,t){var a=F(e);x.exportExcelByRows(a,""+(t.dynamicName||t.name||"export"))},L=function(e,t){var a=F(e);p.exportCsvByRows(a,(t.dynamicName||t.name||"export")+".csv")},D=function(e){return F(e)},F=function(e){var t,a;return(null===(a=null===(t=null===e||void 0===e?void 0:e.data)||void 0===t?void 0:t.data)||void 0===a?void 0:a.length)?[[r.default("X轴"),r.default("Y轴"),r.default("取值")]].concat(e.data.data):[]},N=function(e){var t=e.dataConfig.dataModel,a=t.x,r=void 0===a?[]:a,o=t.y,i=void 0===o?[]:o,n=t.color,s=void 0===n?[]:n;return 1!==r.length||1!==i.length||1!==s.length?!1:!0};i.register({kind:"otherChart",type:"cartesian-heatmap",name:r.default("坐标热力图"),iconClassName:"chart-cartesian-heatmap",enableTemplate:!0,commonCustomShadow:!0,commonCustomColor:!0,commonCustomColorTitle:["","",r.default("可增加多个配色项，对应颜色渐变边界")],initialState:{width:7,dataType:"api",dataApiUrl:n.chartDemoUrl,config:{tooltipPercent:!0,chartLegend:!0,hideSplitArea:!1,hideZero:!0,hideNumber:!1,xLabelRotate:0,yLabelRotate:0,splitNumber:5,chartLabel:!0,marginLeft:80,marginTop:20,marginRight:20,marginBottom:55}},initialDashboardState:{width:780},component:w,dataBindCtrl:n.dataBindCtrl,advancedCtrl:n.advancedCtrl,exportCSV:L,exportExcel:S,exportRows:D,needDashboardAutoFresh:!0,validate:_,drillDownType:"single",canBeDrillChild:!0,dataModelPanelShow:[["dataType","dataModel"]],drillDownSuggestDataModelField:"x",loadDataWhenDataModelConfigChange:N,chartEigens:n.chartEigens})});
;sugar.define("sugar:widgets/custom-data-format/custom-data-format.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=e("sugar:node_modules/tslib/tslib.js"),n=e("sugar:utils/i18n.ts"),u=e("sugar:node_modules/react/index.js"),o=e("sugar:widgets/debounce-text.tsx"),l=e("sugar:node_modules/amis/lib/index.js"),c=[{label:n.default("无"),value:""},{label:">",value:">"},{label:">=",value:">="},{label:"<",value:"<"},{label:"<=",value:"<="},{label:"=",value:"="}],r=[{label:n.default("无"),value:""},{label:n.default("秒转时分秒"),value:"timeFunc"},{label:n.default("字节转换"),value:"byteFunc"},{label:n.default("数字转万/亿"),value:"numFunc"},{label:n.default("百分比(*100)"),value:"percent"}],s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.componentWillMount=function(){this.addCustomFunc=this.addCustomFunc.bind(this),this.changeFormatFuncItem=this.changeFormatFuncItem.bind(this),this.delFormatFuncItem=this.delFormatFuncItem.bind(this)},t.prototype.addCustomFunc=function(e){var t=a.__spreadArrays(e).concat([{cusFormatKey:"",cusFormatCountWay:"",cusFormatNum:"",cusFormatFunc:""}]);this.props.onChange({cusFormatFuncArr:t})},t.prototype.changeFormatFuncItem=function(e,t){var n=a.__spreadArrays(this.props.rowValue.cusFormatFuncArr);n[e]=a.__assign(a.__assign({},n[e]),t),this.props.onChange({cusFormatFuncArr:n})},t.prototype.delFormatFuncItem=function(e){var t=a.__spreadArrays(this.props.rowValue.cusFormatFuncArr);t.splice(e,1),this.props.onChange({cusFormatFuncArr:t})},t.prototype.render=function(){var e=this,t=this.props,a=t.rowValue,s=t.onChange,m=t.notNeedCustom,i=t.data;return u.createElement("div",{style:{width:"custom"===a.formatFunc?374:135}},u.createElement("div",{className:"custom"===a.formatFunc?"format-selector":""},u.createElement(l.Select,{simpleValue:!0,value:a.formatFunc,onChange:function(e){return s({formatFunc:e})},options:m?r:r.concat({label:n.default("自定义"),value:"custom"}),placeholder:n.default("请选择"),popOverContainer:document.body,locale:n.lang,className:"width135"}),"custom"===a.formatFunc?u.createElement(l.Button,{level:"link",size:"sm",tooltip:n.default("新增自定义规则"),classPrefix:"custom btn",onClick:function(){return e.addCustomFunc(a.cusFormatFuncArr||[])}},u.createElement("i",{className:"fa fa-plus"})):null),"custom"===a.formatFunc&&a.cusFormatFuncArr&&a.cusFormatFuncArr.length?a.cusFormatFuncArr.map(function(t,a){return[u.createElement("div",{key:a+"-1",className:"custom-config"},u.createElement("p",{className:"custom-config__tip"},n.default("当")),u.createElement(l.Select,{simpleValue:!0,value:t.cusFormatKey||"",onChange:function(t){return e.changeFormatFuncItem(a,{cusFormatKey:t})},options:i&&i.length?i:[],placeholder:n.default("请选择对比列"),popOverContainer:document.body,className:"width180",locale:n.lang,searchable:i&&i.length>8?!0:!1}),u.createElement(l.Select,{simpleValue:!0,value:t.cusFormatCountWay,options:c,onChange:function(t){return e.changeFormatFuncItem(a,{cusFormatCountWay:t})},placeholder:n.default("比较方式"),locale:n.lang,popOverContainer:document.body}),u.createElement(o.default,{value:t.cusFormatNum,placeholder:n.default("无"),style:{width:85},onChange:function(t){e.changeFormatFuncItem(a,{cusFormatNum:t})}})),u.createElement("div",{key:a+"-2",className:"custom-config"},u.createElement("p",{className:"custom-config__tip"},n.default("则")),u.createElement(l.Select,{simpleValue:!0,value:t.cusFormatFunc,options:r,onChange:function(t){return e.changeFormatFuncItem(a,{cusFormatFunc:t})},placeholder:n.default("请选择"),className:"width180",locale:n.lang,popOverContainer:document.body}),u.createElement(l.Button,{level:"link",size:"sm",tooltip:n.default("删除该规则"),classPrefix:"custom btn",onClick:function(){return e.delFormatFuncItem(a)}},u.createElement("i",{className:"fa fa-minus"})))]}):null)},t.displayName="CustomDataFormat",t}(u.Component);t.default=s});
;sugar.define("sugar:widgets/charts/summary/summary-ctrl.tsx",function(a,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.dataBindCtrl=e.chartEigens=e.chartDemoUrl=e.basicCtrl=void 0;var t=a("sugar:node_modules/tslib/tslib.js"),d=a("sugar:utils/i18n.ts"),l=a("sugar:node_modules/react/index.js"),n=a("sugar:node_modules/moment/moment.js"),o=a("sugar:widgets/ctrl-panel/data-bind-ctrl/index.tsx"),i=a("sugar:widgets/object-array-editor/object-array-editor.tsx"),u=a("sugar:widgets/custom-data-format/custom-data-format.tsx"),r=a("sugar:widgets/ctrl-panel/common/switch-with-tip.tsx"),f=a("sugar:widgets/amis-inline-switch.tsx"),s=a("sugar:widgets/data-model/data-model-field-holder/data-model-field-holder.tsx"),m=[{type:"color",name:d.default("飘红颜色"),key:"redColor",tdStyle:{minWidth:110},defaultValue:"#dd4b39"},{type:"color",name:d.default("飘绿颜色"),key:"greenColor",tdStyle:{minWidth:110},defaultValue:"#00a65a"},{type:"color",name:d.default("背景色"),key:"background",tdStyle:{minWidth:100},defaultValue:"#23b7e5"},{type:"color",name:d.default("指标字体色"),key:"fontColor",tdStyle:{minWidth:100},defaultValue:"#fff"},{type:"color",name:d.default("涨跌幅字体色"),key:"quotaColor",tdStyle:{minWidth:100},defaultValue:"#fff"}],c=[{label:d.default("根据过滤条件中日期或取最大日期"),value:"auto"},{label:d.default("昨天"),value:"1"},{label:d.default("前天"),value:"2"}],g=[{label:d.default("日环比"),value:"day"},{label:d.default("周同比"),value:"week"}],p=[{label:d.default("无"),value:"none"},{label:d.default("周同比"),value:"w"},{label:d.default("月同比"),value:"M"},{label:d.default("年同比"),value:"y"}],y=function(a,e){var t,d,l,o=null===(d=null===(t=e.chart.dataConfig)||void 0===t?void 0:t.dataModel)||void 0===d?void 0:d.filterSummaryDate;if(!o)return a;var i="string"==typeof(null===o||void 0===o?void 0:o.date)?null===o||void 0===o?void 0:o.date:null===(l=null===o||void 0===o?void 0:o.date)||void 0===l?void 0:l.date,u=(i||"").split(",");return u.length?a.filter(function(a){if("none"===a.value)return!0;var e=a.value;return n(u[1]).subtract(1,e).isBefore(u[0])}):a};e.basicCtrl=function(a){return[{type:"divider"},{type:"number",name:"config.columns",label:d.default("每行显示个数（0为都在一行内显示）"),step:1,min:0},{type:"group",controls:[{type:"number",name:"config.mainFontSize",label:d.default("指标取值字体大小"),step:1,min:14,max:56},{type:"number",name:"config.secondFontSize",label:d.default("指标名称字体大小"),step:1,min:10,max:40}]},{type:"number",name:"config.ratioFontSize",label:d.default("变化率字体大小"),step:1,min:8,max:56},a.chart.isDashChart?{type:"group",controls:[{type:"number",name:"config.cardPadding",label:d.default("卡片间距离"),max:1e3,step:5,min:0},{type:"number",name:"config.cardRadius",label:d.default("卡片圆角"),max:1e3,step:5,min:0}]}:null,{type:"divider"},{type:"radios",name:"config.greenRedOption",label:d.default("飘红飘绿生效对象"),inline:!1,defaultValue:"bg",options:[{label:d.default("背景色飘红飘绿"),value:"bg"},{label:d.default("指标飘红飘绿"),value:"data"},{label:d.default("涨跌幅飘红飘绿"),value:"rate"}]},{type:"group",controls:[{type:"color",name:"config.redBgColor",label:d.default("飘红颜色"),defaultValue:"#CE4646"},{type:"color",name:"config.greenBgColor",label:d.default("飘绿颜色"),defaultValue:"#44B823"}]},{type:"divider"},a.chart.isDashChart?f.amisInlineSwitch("config.backgroundLinear",d.default("背景色渐变")):null,f.amisInlineSwitch("config.openCustomColor",d.default("开启卡片颜色自定义")),{type:"radios",name:"config.customColorType",inline:!1,hiddenOn:"!data.config.openCustomColor",label:"",options:[{label:d.default("本报表页面的主题配色（飘红飘绿设置不生效）"),value:"report"},{label:d.default("自定义"),value:"custom"}]},{name:"config.customColors",hiddenOn:"!data.config.openCustomColor || data.config.customColorType != 'custom'",children:function(e){var n=e.onChange,o=e.value;return l.createElement(i.default,t.__assign({},{onChange:n,value:o},{chartFrontendId:a.chart.frontendId,containerClassName:"form-group form-item",label:d.default("可增加多个配色项，依次对应多个指标"),addTipText:d.default("新增配色项"),cols:m}))}}]};var h="/openapi/demo/chart?type=summary";e.chartDemoUrl="$CUR_HOST/openapi/demo/chart?type=summary",e.chartEigens=[{field:[{name:"value",type:"m",minCount:1,maxCount:40,canRepeat:!0},{name:"x",type:"d",minCount:0,maxCount:1,subType:"date"}],multiUnit:!0}],e.dataBindCtrl=function(a){var e=o.getDebugAndRefreshBtn({loadData:a.chart.loadData,loadDebugData:a.chart.loadDebugData,dataType:a.chart.dataType,refreshText:d.default("刷新图表")}),n=o.getDataBindCommon({frontendId:a.chart.frontendId,dataTypeOptions:["dataModel","api","sql","json"],api:{demoUrl:h},loadData:a.chart.loadData,loadDebugData:a.chart.loadDebugData,curUrl:a.chart.dataApiUrl}),m=y(p,a),C=a.chart.dataModelHash||"",b=a.sqlModelStore.detailMap.mapByHash.get(C),v=o.generateSQLFieldList(b),M=[{type:"select",list:v,key:"frontendId",name:d.default("核心指标字段"),tdStyle:{minWidth:150}},{type:"text",key:"columnName",name:d.default("指标重命名"),tdStyle:{minWidth:110}},{type:"text",key:"columnDesc",name:d.default("指标简介"),placeholder:d.default("可不填"),tdStyle:{minWidth:110}},{type:"select",list:v,key:"rate",name:d.default("涨跌幅字段"),tdStyle:{minWidth:110},hidden:a.chart.dataConfig.rateAutoCount},{type:"select",list:v,key:"rate2",name:d.default("第二涨跌幅字段"),tdStyle:{minWidth:110},hidden:a.chart.dataConfig.rateAutoCount||!a.chart.dataConfig.enable2Rates},{name:d.default("格式化方法"),children:u.default,tdStyle:{minWidth:110},data:v,notNeedCustom:!0},{type:"text",key:"unit",name:d.default("单位"),tdStyle:{minWidth:60}},{type:"redSetting",name:d.default("飘红设置"),tdStyle:{minWidth:110}},{type:"greenSetting",name:d.default("飘绿设置"),tdStyle:{minWidth:110}},{type:"text",key:"_sugar_extra",name:d.default("下钻附加数据"),tdStyle:{minWidth:110}}],x=t.__spreadArrays([s.getDataModelFieldHolder({name:"value",label:d.default("展示的指标"),config:{dataModelHash:C,holderId:a.chart.frontendId+"-value",maxCount:40,onlyMeasure:!0,canRepeat:!0,meaConfig:{contextMenu:["summaryMea","summaryConditionalFormatting"]}}}),s.getDataModelFieldHolder({name:"x",label:d.default("基准日期维度"),hiddenOn:"data.dataType != 'dataModel'",config:{dataModelHash:C,holderId:a.chart.frontendId+"-value",maxCount:1,onlyDimension:!0,canRepeat:!0,onlyDataTypes:["date"]}}),o.commonFilterForSummaryDate(void 0,"data.dataType != 'dataModel' || !dataConfig.dataModel || !dataConfig.dataModel.x || !dataConfig.dataModel.x.length"),{type:"icon",className:"summary-date-filter-link",icon:"question-circle-o",hiddenOn:"data.dataType != 'dataModel'"},{type:"link",className:"summary-date-filter-link",href:"/docs/Chart-summary#核心指标设置同环比",body:d.default("什么是基准日期维度？"),blank:!0,hiddenOn:"data.dataType != 'dataModel'"},{type:"select",name:"dataConfig.countMethod",className:"summary-calc-method",hiddenOn:"data.dataType != 'dataModel' || !dataConfig.dataModel || !dataConfig.dataModel.x || !dataConfig.dataModel.x.length",label:d.default("同环比计算方式"),defaultValue:"auto",options:[{label:d.default("自动计算"),value:"auto"},{label:d.default("自定义"),value:"custom"}]},f.amisInlineSwitch("dataConfig.autoHB","自动计算环比","data.dataType != 'dataModel' || !dataConfig.dataModel || !dataConfig.dataModel.x || !dataConfig.dataModel.x.length || dataConfig.countMethod !== 'auto'"),{type:"select",name:"dataConfig.autoTB",hiddenOn:"data.dataType != 'dataModel'|| !dataConfig.dataModel || !dataConfig.dataModel.x || !dataConfig.dataModel.x.length || dataConfig.countMethod !== 'auto'",label:d.default("自动计算同比"),defaultValue:"value",options:m},s.getDataModelFieldHolder({name:"lastPeriod",label:d.default("环比字段"),hiddenOn:"data.dataType != 'dataModel'|| !dataConfig.dataModel || !dataConfig.dataModel.x || !dataConfig.dataModel.x.length || dataConfig.countMethod !== 'custom'",config:{dataModelHash:C,holderId:a.chart.frontendId+"-value",maxCount:1,onlyMeasure:!0,canRepeat:!0}}),s.getDataModelFieldHolder({name:"samePeriod",label:d.default("同比字段"),hiddenOn:"data.dataType != 'dataModel'|| !dataConfig.dataModel || !dataConfig.dataModel.x || !dataConfig.dataModel.x.length || dataConfig.countMethod !== 'custom'",config:{dataModelHash:C,holderId:a.chart.frontendId+"-value",maxCount:1,onlyMeasure:!0,canRepeat:!0}}),{type:"divider"},o.commonFilterForDataModel(C),o.commonBindUrlParamForDataModel(C)],s.getChartConditionsHolder(C,a.chart),[o.commonLimitForDataModel,{name:"dataConfig.rateAutoCount",hiddenOn:"data.dataType != 'sql'",children:function(a){var e=a.onChange,n=a.value;return l.createElement(r.default,t.__assign({},{onChange:e,value:n,label:d.default("涨跌幅自动计算"),tipText:d.default("不了解？"),tipLink:"/docs/Chart-summary#涨跌幅自动计算"}))}},{type:"select",name:"dataConfig.rateStdDate",hiddenOn:"data.dataType != 'sql' || !data.dataConfig.rateAutoCount",label:d.default("数据日期"),options:c},{type:"checkboxes",name:"dataConfig.rateCompType",hiddenOn:"data.dataType != 'sql' || !data.dataConfig.rateAutoCount",label:d.default("需要计算的涨跌幅"),joinValues:!0,inline:!0,className:"sugar-inline-checkboxes",options:g},f.amisInlineSwitch("dataConfig.enable2Rates","双涨跌幅字段","data.dataType != 'sql' || data.dataConfig.rateAutoCount"),{type:"select",name:"dataConfig.redOrGreenObj",hiddenOn:"data.dataType != 'sql'",label:d.default("飘红飘绿计算方式"),defaultValue:"value",options:[{label:d.default("指标取值"),value:"value"},{label:d.default("指标涨跌幅"),value:"rate"}]},{name:"dataConfig.display",hiddenOn:"data.dataType != 'sql'",children:function(e){var n=e.onChange,o=e.value;return l.createElement(i.default,t.__assign({},{onChange:n,value:o},{chartFrontendId:a.chart.frontendId,containerClassName:"form-group form-item",label:d.default("展示项配置"),addTipText:d.default("新增核心指标"),cols:M}))}},{type:"select",name:"dataConfig.redSetting",hiddenOn:"dataType != 'sql' || !dataConfig.rateAutoCount",label:d.default("通用的涨跌幅飘红设置:"),defaultValue:"",options:i.redOrGreenOptions},{type:"text",name:"dataConfig.redSettingVal",placeholder:d.default("请输入对比值"),label:"",hiddenOn:"dataType != 'sql' || !dataConfig.rateAutoCount || !dataConfig.redSetting || !dataConfig.redSetting"},{type:"select",name:"dataConfig.greenSetting",hiddenOn:"dataType != 'sql' || !dataConfig.rateAutoCount",label:d.default("通用的涨跌幅飘绿设置:"),defaultValue:"",options:i.redOrGreenOptions},{type:"text",name:"dataConfig.greenSettingVal",placeholder:d.default("请输入对比值"),label:"",hiddenOn:"dataType != 'sql' || !dataConfig.rateAutoCount || !dataConfig.greenSetting || !dataConfig.greenSetting"}]);return b&&b.config.openRow2Col&&x.push({name:"dataConfig.addAllRow2Col",children:function(a){var e=a.onChange,n=a.value;return l.createElement(r.default,t.__assign({},{onChange:e,value:n,label:d.default("绑定所有的行转列"),tipText:d.default("不了解？"),tipLink:"/docs/DataBind-SQL-Rowcol"}))}}),n.concat(x,e)}});
;sugar.define("sugar:widgets/charts/summary/summary.tsx",function(e,t){"use strict";function a(e){var t=i(e);return t.getBrightness()>125?t.spin(20).darken(10).toString():t.spin(-20).brighten(10).toString()}Object.defineProperty(t,"__esModule",{value:!0}),t.getColorByRate=t.getEndColor=void 0;var r=e("sugar:node_modules/tslib/tslib.js"),o=e("sugar:utils/i18n.ts"),n=e("sugar:node_modules/react/index.js"),l=e("sugar:node_modules/react-mixin/index.js"),s=e("sugar:node_modules/classnames/index.js"),i=e("sugar:node_modules/tinycolor2/tinycolor.js"),d=e("sugar:node_modules/amis/lib/index.js"),c=e("sugar:widgets/charts/chart-manager.tsx"),u=e("sugar:widgets/charts/_hoc/debug/debug.tsx"),m=e("sugar:widgets/charts/_hoc/drill-down/drill-down.tsx"),g=e("sugar:widgets/charts/_hoc/toolbar/toolbar.tsx"),p=e("sugar:widgets/charts/_hoc/chart-warning/index.tsx"),f=e("sugar:widgets/charts/_hoc/chart-zoom/index.tsx"),h=e("sugar:widgets/charts/_mixin/common.tsx"),_=e("sugar:utils/common-helper.ts"),v=e("sugar:node_modules/lodash/chunk.js"),C=e("sugar:stores/index.ts"),b=e("sugar:widgets/charts/summary/summary-ctrl.tsx"),y=e("sugar:node_modules/xss/lib/index.js"),x=e("sugar:utils/xssOption.ts"),E=e("sugar:utils/export-file/export-excel.ts"),w=e("sugar:utils/export-file/export-csv.ts");t.getEndColor=a;var D=function(e){function i(t){var a=e.call(this,t)||this;return a.handleItemDrillDown=a.handleItemDrillDown.bind(a),a}r.__extends(i,e),i.prototype.handleItemDrillDown=function(e,t,a,o,n){t&&this.props.chart.handleEvent("drillDown",this.props.mode,{drillDownItem:{item:r.__assign(r.__assign({},e),{_sugar_dd_default_:e.hasOwnProperty("_sugar_extra")?e._sugar_extra:e.name_sugar_origin||e.name}),fireKey:""},drillDownIndex:0});var l=this.props.hub.dependenceData.dependenceState;l&&l.colIndex===o&&l.rowIndex===n?this.props.chart.handleEvent("cancelDependence",this.props.mode):a&&this.props.chart.handleEvent("dependence",this.props.mode,{dependenceIndex:0,dependenceState:{colIndex:o,rowIndex:n},dependenceItem:{item:r.__assign(r.__assign({},e),{_sugar_dd_default_:e.hasOwnProperty("_sugar_extra")?e._sugar_extra:e.name_sugar_origin||e.name}),fireKey:""}})},i.prototype.render=function(){var e=this,l=this.props,i=(l.mode,l.hub),c=l.chart.config,u=l.chart,m=l.theme,g=this.auth(this.props);if(g!==!0)return g;if("pending"===i.data.loadState&&!i.data.data)return n.createElement("div",null);var p=i.data.data;if("pending"===i.data.loadState&&!p||null==p)return null;if(!(p&&p instanceof Array&&p.length))return n.createElement("div",{className:"tip"},o.default("数据格式有误！"));var f=c&&c.columns||1e4,h=v(p,f),C=!!c.openCustomColor,b=c.customColorType,E=[],w=0;if(c.openCustomColor)if("report"===b)if(m.config.chartTheme instanceof Object){var D=m.config.chartTheme.color||[];D.length?(w=D.length,D.forEach(function(e,t){E[t]={background:e,fontColor:"#fff",quotaColor:"#fff"}})):C=!1}else C=!1;else"custom"===b&&c.customColors&&c.customColors.length?w=c.customColors.length:C=!1;else C=!1;p.forEach(function(e,a){if(null==e.rate&&null!=e.rate2&&(e.rate=e.rate2,e.rate_tip=e.rate2_tip,e.rate_level=e.rate2_level,delete e.rate2,delete e.rate2_level,delete e.rate2_tip),!c.openCustomColor||"report"!==b){var r=c.greenBgColor||"#44B823",o=c.redBgColor||"#CE4646";C&&"custom"===b&&(r=c.customColors[a%w].greenColor||r,o=c.customColors[a%w].redColor||o);var n=t.getColorByRate(e,"rate_level",r,o),l=t.getColorByRate(e,"rate2_level",r,o);!c.greenRedOption||"bg"===c.greenRedOption&&n?E[a]={background:n,fontColor:"#fff",quotaColor:"#fff",quotaColor2:"#fff"}:"data"===c.greenRedOption&&n?E[a]={background:"",fontColor:n,quotaColor:"",quotaColor2:""}:"rate"===c.greenRedOption&&(E[a]={background:"",fontColor:"",quotaColor:n},l&&(E[a].quotaColor2=l))}});var S=0,k=32,O=16;c.mainFontSize&&(k=c.mainFontSize),c.secondFontSize&&(O=c.secondFontSize);var N={fontSize:O},R=!(!u.drillDownOpen||!u.drillDown.length),q=!!(c.dependenceOpen&&c.dependences&&c.dependences.length),I=c.cardPadding||0;return n.createElement("div",{className:s("chart chart-summary",{"can-click":R||q,"chart-dashboard":!!u.isDashChart}),style:{paddingBottom:I}},h.map(function(t,o){return n.createElement("div",{key:o,className:"chart-summary-row",style:{height:1/h.length*100+"%",paddingRight:I}},n.createElement("ul",{className:s("hbox text-center",{"b-t b-light":0!==o&&!u.isDashChart}),style:{WebkitPaddingStart:0}},t.map(function(t,l){var i=!1;null!=t.rate&&null!=t.rate2?i=!0:null!=t.rate2&&(t.rate=t.rate2,t.rate_tip=t.rate2_tip,t.rate_level=t.rate2_level);var m={},g={fontSize:k},p={},f={},h={};if(E[S]){var v=E[S],b=v.background,D=v.fontColor,O=v.quotaColor,T=v.quotaColor2;m.background=b,g.color=D,p.color=O,f.color=T}if(C){var B=S%w;"custom"===c.customColorType&&(E[B]=Object.assign(E[B]||{},c.customColors[B])),E[B].background&&(m.background=m.background||E[B].background),E[B].fontColor&&(g.color=g.color||E[B].fontColor),E[B].quotaColor&&(p.color=p.color||E[B].quotaColor),E[B].quotaColor2&&(f.color=f.color||E[B].quotaColor2)}t.color&&("bg"===c.greenRedOption?(m.background=t.color,t.fontColor?g.color=t.fontColor:null):"data"===c.greenRedOption?g.color=t.color:"rate"===c.greenRedOption&&(p.color=t.color,f.color=t.color)),S++;var j=e.props.hub.dependenceData.dependenceState,z=j&&j.colIndex===o&&j.rowIndex===l,F={};c.ratioFontSize&&(F.fontSize=c.ratioFontSize+"px"),i||(F.margin="0 8px");var P={},M=m;if(u.isDashChart){var b=void 0;b=c.backgroundLinear&&m.background?"linear-gradient(45deg, "+m.background+", "+a(m.background)+")":m.background,P={background:b,height:"100%",borderRadius:c.cardRadius+"px"},M={paddingLeft:I,paddingTop:I,color:"#fff"}}return n.createElement("li",{key:l,className:s("col",{"b-l b-light":0!==l&&!u.isDashChart}),style:M},n.createElement("div",{className:s("summary-item",{isActive:z}),onClick:function(){return e.handleItemDrillDown(t,R,q,o,l)},style:P},n.createElement("h4",{style:g},_.formatStringOrNumber(t.value,null,!1),t.unit||""),i?n.createElement("div",null,n.createElement("div",{className:"desc-name",style:r.__assign(r.__assign({whiteSpace:"normal"},h),N)},t.name," ",t.desc?n.createElement(d.TooltipWrapper,{tooltip:y(t.desc,x.xssOption),placement:"bottom"},n.createElement("i",{className:"fa fa-question-circle"})):null),n.createElement("div",{style:{paddingTop:5}},n.createElement("div",{style:r.__assign(r.__assign({},h),p)},n.createElement("span",{className:"rate-2",style:r.__assign({},F)},n.createElement("span",null,t.rate_tip),n.createElement("span",{className:s("caret",t.rate>0?"rise":"fall")})," ",t.rate+"%")),n.createElement("div",{style:r.__assign(r.__assign({},h),f)},n.createElement("span",{className:"rate-2",style:r.__assign({},F)},n.createElement("span",null,t.rate2_tip),n.createElement("span",{className:s("caret",t.rate2>0?"rise":"fall")})," ",t.rate2+"%")))):n.createElement("div",{style:r.__assign(r.__assign(r.__assign({},F),h),p)},n.createElement("span",{className:"desc-name",style:r.__assign({whiteSpace:"normal"},N)},t.name," ",t.desc?n.createElement(d.TooltipWrapper,{tooltip:y(t.desc,x.xssOption),placement:"bottom"},n.createElement("i",{className:"fa fa-question-circle"})):null)," ",void 0!==t.rate?n.createElement("span",{className:"rate"},n.createElement("span",{className:s("caret",t.rate>0?"rise":"fall")})," ",t.rate+"%"," ",t.rate_tip?n.createElement(d.TooltipWrapper,{tooltip:y(t.rate_tip,x.xssOption),placement:"bottom"},n.createElement("i",{className:"fa fa-question-circle"})):null):null)))})))}))};var b;return i.displayName="Summary",i=r.__decorate([m.default,u.default,g.default,p.default,f.default,C.observer,l.decorate(h.default),r.__metadata("design:paramtypes",["function"==typeof(b="undefined"!=typeof c.IChartComponentProps&&c.IChartComponentProps)?b:Object])],i)}(n.Component);t.default=D;var S=function(e){if(!e)return o.default("无数据");if(!(e instanceof Array&&e.length))return o.default("数据不是数组或者是空数组");for(var t=0;t<e.length;t++){var a=e[t];if(!a.name)return o.default("第「"+(t+1)+"」个指标的名称未指定");if(!a.hasOwnProperty("value"))return o.default("第「"+(t+1)+"」个指标的值未指定");if(!_.isValueOfTypes(a.value,["string","number","null"]))return o.default("第「"+(t+1)+"」个指标的取值格式不对，必须是字符串或者数字")}return!0};t.getColorByRate=function(e,t,a,r){var o="";return"green"===e[t]?o=a:"red"===e[t]?o=r:"custom"===e[t]&&(o=e.color),o};var k=function(e){var t=e.dataConfig.dataModel.value,a=void 0===t?[]:t;return a.length?!0:!1},O=function(e){var t,a=[];return(null===(t=e.data)||void 0===t?void 0:t.length)&&(a=e.data.map(function(e){return[e.name,e.value,e.rate]})),a},N=function(e,t){var a=O(e);E.exportExcelByRows(a,""+(t.dynamicName||t.name||"export"))},R=function(e,t){var a=O(e);w.exportCsvByRows(a,(t.dynamicName||t.name||"export")+".csv")},q=function(e){return O(e)};c.register({kind:"target",type:"summary",name:o.default("核心指标"),iconClassName:"chart-summary",enableTemplate:!0,initialState:{dataType:"api",dataApiUrl:b.chartDemoUrl,height:150,width:8,config:{columns:0,customColorType:"report",greenRedOption:"bg",mainFontSize:32,secondFontSize:16,backgroundLinear:!0},dataConfig:{rateStdDate:"auto",redOrGreenObj:"value",countMethod:"auto"}},initialDashboardState:{width:800,height:110,config:{cardPadding:10,greenRedOption:"bg",cardRadius:10,mainFontSize:""}},component:D,needDashboardAutoFresh:!0,basicCtrl:b.basicCtrl,dataBindCtrl:b.dataBindCtrl,exportCSV:R,exportExcel:N,exportRows:q,validate:S,drillDownType:"single",canBeDrillChild:!0,dataModelPanelShow:[["dataType","dataModel"]],drillDownSuggestDataModelField:"value",loadDataWhenDataModelConfigChange:k,chartEigens:b.chartEigens})});
;sugar.define("sugar:widgets/charts/kanbans/kanbans-ctrl.tsx",function(a,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.dataBindCtrl=e.chartEigens=e.chartDemoUrl=e.basicCtrl=void 0;var t=a("sugar:node_modules/tslib/tslib.js"),d=a("sugar:utils/i18n.ts"),l=a("sugar:node_modules/react/index.js"),o=a("sugar:node_modules/moment/moment.js"),n=a("sugar:widgets/ctrl-panel/data-bind-ctrl/index.tsx"),i=a("sugar:widgets/object-array-editor/object-array-editor.tsx"),u=a("sugar:widgets/custom-data-format/custom-data-format.tsx"),r=a("sugar:widgets/ctrl-panel/common/switch-with-tip.tsx"),f=a("sugar:widgets/amis-inline-switch.tsx"),m=a("sugar:widgets/data-model/data-model-field-holder/data-model-field-holder.tsx"),s=[{type:"color",name:d.default("飘红颜色"),key:"redColor",tdStyle:{minWidth:110},defaultValue:"#dd4b39"},{type:"color",name:d.default("飘绿颜色"),key:"greenColor",tdStyle:{minWidth:110},defaultValue:"#00a65a"},{type:"color",name:d.default("背景色"),key:"background",tdStyle:{minWidth:100},defaultValue:"#23b7e5"},{type:"color",name:d.default("维度字体色"),key:"dimColor",tdStyle:{minWidth:100},defaultValue:"#fff"},{type:"color",name:d.default("主指标名称颜色"),key:"mainNameColor",tdStyle:{minWidth:100},defaultValue:"#fff"},{type:"color",name:d.default("主指标数值颜色"),key:"mainValueColor",tdStyle:{minWidth:100},defaultValue:"#fff"},{type:"color",name:d.default("次要指标颜色"),key:"restColor",tdStyle:{minWidth:100},defaultValue:"#fff"},{type:"color",name:d.default("涨跌幅颜色"),key:"ratioColor",tdStyle:{minWidth:100},defaultValue:"#fff"}],c=([{label:d.default("根据过滤条件中日期或取最大日期"),value:"auto"},{label:d.default("昨天"),value:"1"},{label:d.default("前天"),value:"2"}],[{label:d.default("日环比"),value:"day"},{label:d.default("周同比"),value:"week"}],[{label:d.default("无"),value:"none"},{label:d.default("周同比"),value:"w"},{label:d.default("月同比"),value:"M"},{label:d.default("年同比"),value:"y"}]),g=function(a,e){var t,d,l,n=null===(d=null===(t=e.chart.dataConfig)||void 0===t?void 0:t.dataModel)||void 0===d?void 0:d.filterSummaryDate;if(!n)return a;var i="string"==typeof(null===n||void 0===n?void 0:n.date)?null===n||void 0===n?void 0:n.date:null===(l=null===n||void 0===n?void 0:n.date)||void 0===l?void 0:l.date,u=(i||"").split(",");return u.length?a.filter(function(a){if("none"===a.value)return!0;var e=a.value;return o(u[1]).subtract(1,e).isBefore(u[0])}):a};e.basicCtrl=function(a){return[{type:"divider"},{type:"group",controls:[{type:"number",name:"config.columns",label:d.default("每行个数(0为一行内显示)"),step:1,min:0},{type:"number",name:"config.dimFontSize",label:d.default("维度字体大小"),step:1,min:12,max:56}]},{type:"group",controls:[{type:"number",name:"config.mainValueFontSize",label:d.default("主指标数值字体大小"),step:1,min:12,max:56},{type:"number",name:"config.mainNameFontSize",label:d.default("主指标名称大小"),step:1,min:12,max:56}]},{type:"group",controls:[{type:"number",name:"config.ratioFontSize",label:d.default("涨跌幅字体大小"),step:1,min:8,max:56},{type:"number",name:"config.restFontSize",label:d.default("次要指标字体大小"),step:1,min:12,max:56}]},a.chart.isDashChart?{type:"group",controls:[{type:"number",name:"config.cardPadding",label:d.default("卡片间距离"),max:1e3,step:5,min:0},{type:"number",name:"config.cardRadius",label:d.default("卡片圆角"),max:1e3,step:5,min:0}]}:null,{type:"divider"},{type:"radios",name:"config.greenRedOption",label:d.default("飘红飘绿生效对象"),inline:!1,defaultValue:"bg",options:[{label:d.default("背景色飘红飘绿"),value:"bg"},{label:d.default("指标飘红飘绿"),value:"data"},{label:d.default("涨跌幅飘红飘绿"),value:"rate"}]},{type:"group",controls:[{type:"color",name:"config.redBgColor",label:d.default("飘红颜色"),defaultValue:"#CE4646"},{type:"color",name:"config.greenBgColor",label:d.default("飘绿颜色"),defaultValue:"#44B823"}]},{type:"divider"},a.chart.isDashChart?f.amisInlineSwitch("config.backgroundLinear",d.default("背景色渐变")):null,f.amisInlineSwitch("config.openCustomColor",d.default("开启卡片颜色自定义")),{type:"radios",name:"config.customColorType",hiddenOn:"!data.config.openCustomColor",label:"",options:[{label:d.default("本报表页面的主题配色（飘红飘绿设置不生效）"),value:"report"},{label:d.default("自定义"),value:"custom"}]},{name:"config.customColors",hiddenOn:"!data.config.openCustomColor || data.config.customColorType != 'custom'",children:function(e){var o=e.onChange,n=e.value;return l.createElement(i.default,t.__assign({},{onChange:o,value:n},{chartFrontendId:a.chart.frontendId,containerClassName:"form-group form-item",label:d.default("可增加多个配色项，依次对应多个维度值"),addTipText:d.default("新增配色项"),cols:s}))}}]};var p="/openapi/demo/chart?type=indicator";e.chartDemoUrl="$CUR_HOST/openapi/demo/chart?type=indicator",e.chartEigens=[{field:[{name:"value",type:"m",minCount:1,maxCount:40,canRepeat:!0},{name:"x2",type:"d",minCount:1,maxCount:1},{name:"x",type:"d",minCount:0,maxCount:1,subType:"date"}],multiUnit:!0}],e.dataBindCtrl=function(a){var e=n.getDebugAndRefreshBtn({loadData:a.chart.loadData,loadDebugData:a.chart.loadDebugData,dataType:a.chart.dataType,refreshText:d.default("刷新图表")}),o=n.getDataBindCommon({frontendId:a.chart.frontendId,dataTypeOptions:["dataModel","api","sql","json"],api:{demoUrl:p},loadData:a.chart.loadData,loadDebugData:a.chart.loadDebugData,curUrl:a.chart.dataApiUrl}),s=g(c,a),y=a.chart.dataModelHash||"",h=a.sqlModelStore.detailMap.mapByHash.get(y),C=n.generateSQLFieldList(h),b=[{type:"select",list:C,key:"frontendId",name:d.default("指标字段"),tdStyle:{minWidth:150}},{type:"text",key:"columnName",name:d.default("指标重命名"),tdStyle:{minWidth:110}},{type:"text",key:"columnDesc",name:d.default("指标简介"),placeholder:d.default("可不填"),tdStyle:{minWidth:110}},{name:d.default("格式化方法"),children:u.default,tdStyle:{minWidth:110},data:C,notNeedCustom:!0},{type:"text",key:"unit",name:d.default("单位"),tdStyle:{minWidth:60}},{type:"redSetting",name:d.default("飘红设置"),tdStyle:{minWidth:110}},{type:"greenSetting",name:d.default("飘绿设置"),tdStyle:{minWidth:110}},{type:"text",key:"_sugar_extra",name:d.default("下钻附加数据"),tdStyle:{minWidth:110}}],v=t.__spreadArrays([m.getDataModelFieldHolder({name:"value",label:d.default("指标（第一个为主要，剩余为次要）"),config:{dataModelHash:y,holderId:a.chart.frontendId+"-value",maxCount:40,onlyMeasure:!0,canRepeat:!0,meaConfig:{contextMenu:["summaryMea","summaryConditionalFormatting"]}}}),m.getDataModelFieldHolder({name:"x2",label:d.default("维度"),hiddenOn:"data.dataType != 'dataModel'",config:{dataModelHash:y,holderId:a.chart.frontendId+"-value",maxCount:1,onlyDimension:!0,canRepeat:!0}}),m.getDataModelFieldHolder({name:"x",label:d.default("基准日期维度"),hiddenOn:"data.dataType != 'dataModel'",config:{dataModelHash:y,holderId:a.chart.frontendId+"-value",maxCount:1,onlyDimension:!0,canRepeat:!0,onlyDataTypes:["date"]}}),n.commonFilterForSummaryDate(void 0,"data.dataType != 'dataModel' || !dataConfig.dataModel || !dataConfig.dataModel.x || !dataConfig.dataModel.x.length"),{type:"icon",className:"summary-date-filter-link",icon:"question-circle-o",hiddenOn:"data.dataType != 'dataModel'"},{type:"link",className:"summary-date-filter-link",href:"/docs/Chart-summary#核心指标设置同环比",body:d.default("什么是基准日期维度？"),blank:!0,hiddenOn:"data.dataType != 'dataModel'"},{type:"select",name:"dataConfig.countMethod",className:"summary-calc-method",hiddenOn:"data.dataType != 'dataModel' || !dataConfig.dataModel || !dataConfig.dataModel.x || !dataConfig.dataModel.x.length",label:d.default("同环比计算方式"),defaultValue:"auto",options:[{label:d.default("自动计算"),value:"auto"},{label:d.default("自定义"),value:"custom"}]},f.amisInlineSwitch("dataConfig.autoHB","自动计算环比","data.dataType != 'dataModel' || !dataConfig.dataModel || !dataConfig.dataModel.x || !dataConfig.dataModel.x.length || dataConfig.countMethod !== 'auto'"),{type:"select",name:"dataConfig.autoTB",hiddenOn:"data.dataType != 'dataModel'|| !dataConfig.dataModel || !dataConfig.dataModel.x || !dataConfig.dataModel.x.length || dataConfig.countMethod !== 'auto'",label:d.default("自动计算同比"),defaultValue:"value",options:s},m.getDataModelFieldHolder({name:"lastPeriod",label:d.default("环比字段"),hiddenOn:"data.dataType != 'dataModel'|| !dataConfig.dataModel || !dataConfig.dataModel.x || !dataConfig.dataModel.x.length || dataConfig.countMethod !== 'custom'",config:{dataModelHash:y,holderId:a.chart.frontendId+"-value",maxCount:1,onlyMeasure:!0,canRepeat:!0}}),m.getDataModelFieldHolder({name:"samePeriod",label:d.default("同比字段"),hiddenOn:"data.dataType != 'dataModel'|| !dataConfig.dataModel || !dataConfig.dataModel.x || !dataConfig.dataModel.x.length || dataConfig.countMethod !== 'custom'",config:{dataModelHash:y,holderId:a.chart.frontendId+"-value",maxCount:1,onlyMeasure:!0,canRepeat:!0}}),{type:"divider"},n.commonFilterForDataModel(y),n.commonBindUrlParamForDataModel(y)],m.getChartConditionsHolder(y,a.chart),[n.commonLimitForDataModel,{name:"dataConfig.display",hiddenOn:"data.dataType != 'sql'",children:function(e){var o=e.onChange,n=e.value;return l.createElement(i.default,t.__assign({},{onChange:o,value:n},{chartFrontendId:a.chart.frontendId,containerClassName:"form-group form-item",label:d.default("展示项配置"),addTipText:d.default("新增指标"),cols:b}))}},{type:"select",name:"dataConfig.x2",hiddenOn:"data.dataType != 'sql'",label:d.default("维度"),placeholder:d.default("请选择"),options:C},{type:"select",name:"dataConfig.rate",hiddenOn:"data.dataType != 'sql'",label:d.default("涨跌幅字段（非必填）"),placeholder:d.default("请选择"),options:C,clearable:!0},{type:"select",name:"dataConfig.rate2",hiddenOn:"data.dataType != 'sql'",label:d.default("第二涨跌幅字段（非必填）"),placeholder:d.default("请选择"),options:C,clearable:!0}]);return h&&h.config.openRow2Col&&v.push({name:"dataConfig.addAllRow2Col",children:function(a){var e=a.onChange,o=a.value;return l.createElement(r.default,t.__assign({},{onChange:e,value:o,label:d.default("绑定所有的行转列"),tipText:d.default("不了解？"),tipLink:"/docs/DataBind-SQL-Rowcol"}))}}),o.concat(v,e)}});
;sugar.define("sugar:widgets/charts/kanbans/kanban-item.tsx",function(e,a){"use strict";function t(e){var a=e.data,t=e.style,m=e.handleItemDrillDown,c=e.drillDownOpen,d=e.dependenceOpen,u=e.index;if(!((null===a||void 0===a?void 0:a.indicators)instanceof Array&&a.indicators.length>0))return null;var o=a.indicators[0],v=a.indicators.slice(1);return n.createElement("div",{className:"kanban-container text-ellipsis"},n.createElement("div",{className:"kanban-dim-value",style:t.dimStyle},a.dimValue),n.createElement("div",{className:"kanban-main-name",style:t.mainNameStyle},o.name,o.desc?n.createElement(l.TooltipWrapper,{tooltip:s(o.desc,i.xssOption),placement:"bottom"},n.createElement("i",{className:"fa fa-question-circle"})):null),n.createElement("div",{className:"kanban-main-value text-ellipsis",style:t.mainValueStyle,onClick:function(){return m(a,c,d,u)}},o.value&&r.formatStringOrNumber(o.value,null,!1),o.unit||""),n.createElement("div",{className:"kanban-ratio",style:t.ratioStyle},n.createElement("div",{className:"kanban-ratio-name-container"},void 0!=o.rate?n.createElement("div",{className:"kanban-rate-name"},o.rate_tip):null,void 0!=o.rate2?n.createElement("div",{className:"kanban-rate-name",style:t.ratio2Style},o.rate2_tip):null),n.createElement("div",{className:"kanban-ratio-value-container"},void 0!=o.rate?n.createElement("div",{className:"kanban-rate-value"},"-"===o.rate?o.rate:o.rate+"%"):null,void 0!=o.rate2?n.createElement("div",{className:"kanban-rate-value",style:t.ratio2Style},"-"===o.rate2?o.rate2:o.rate2+"%"):null)),(void 0!=o.rate||void 0!=o.rate2)&&n.createElement("div",{className:"kanban-margin"}),n.createElement("div",{className:"kanban-rest",style:t.restStyle},n.createElement("div",{className:"kanban-rest-name-container"},v.map(function(e,a){return n.createElement("div",{className:"kanban-rest-name",key:"rest-name-"+a},e.name)})),n.createElement("div",{className:"kanban-rest-value-container"},v.map(function(e,a){return n.createElement("div",{className:"kanban-rest-value",key:"rest-value-"+a},e.value&&r.formatStringOrNumber(e.value,null,!1),e.unit||"")}))))}Object.defineProperty(a,"__esModule",{value:!0});var n=e("sugar:node_modules/react/index.js"),l=e("sugar:node_modules/amis/lib/index.js"),r=e("sugar:utils/common-helper.ts"),s=e("sugar:node_modules/xss/lib/index.js"),i=e("sugar:utils/xssOption.ts");a.default=t});
;sugar.define("sugar:widgets/charts/kanbans/kanbans.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=e("sugar:node_modules/tslib/tslib.js"),r=e("sugar:utils/i18n.ts"),n=e("sugar:node_modules/react/index.js"),o=e("sugar:node_modules/classnames/index.js"),l=e("sugar:node_modules/react-mixin/index.js"),i=e("sugar:widgets/charts/_hoc/debug/debug.tsx"),s=e("sugar:widgets/charts/_hoc/drill-down/drill-down.tsx"),d=e("sugar:widgets/charts/_hoc/toolbar/toolbar.tsx"),u=e("sugar:widgets/charts/_hoc/chart-warning/index.tsx"),c=e("sugar:widgets/charts/_hoc/chart-zoom/index.tsx"),g=e("sugar:widgets/charts/_mixin/common.tsx"),m=e("sugar:stores/index.ts"),f=e("sugar:widgets/charts/chart-manager.tsx"),h=e("sugar:widgets/charts/kanbans/kanbans-ctrl.tsx"),p=e("sugar:utils/export-file/export-excel.ts"),v=e("sugar:utils/export-file/export-csv.ts"),y=e("sugar:utils/common-helper.ts"),_=e("sugar:widgets/charts/summary/summary.tsx"),S=e("sugar:widgets/charts/utils/helper.ts"),C=e("sugar:widgets/charts/kanbans/kanban-item.tsx"),x=e("sugar:node_modules/lodash/get.js"),b=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.kanbanDom=null,t.handleItemDrillDown=function(e,r,n,o){var l=x(e,"indicators[0]",{});r&&t.props.chart.handleEvent("drillDown",t.props.mode,{drillDownItem:{item:a.__assign(a.__assign({},a.__assign(a.__assign({},l),{dimValue:e.dimValue})),{_sugar_dd_default_:e.hasOwnProperty("_sugar_extra")?e._sugar_extra:e.name_sugar_origin||e.dimValue}),fireKey:""},drillDownIndex:0});var i=t.props.hub.dependenceData.dependenceState;i&&i.index===o?t.props.chart.handleEvent("cancelDependence",t.props.mode):n&&t.props.chart.handleEvent("dependence",t.props.mode,{dependenceIndex:0,dependenceState:{index:o},dependenceItem:{item:a.__assign(a.__assign({},e),{_sugar_dd_default_:e.hasOwnProperty("_sugar_extra")?e._sugar_extra:e.name_sugar_origin||e.dimValue}),fireKey:""}})},t.getStyle=function(){var e=t.props,a=e.chart,r=e.chart.config,n=e.hub,o=(n.data.data,t.getColumns()),l=(null===r||void 0===r?void 0:r.cardPadding)||10,i=a.isDashChart?"#fff":"#555",s=a.isDashChart?"#fff":"#000",d={containerStyle:{margin:"0px "+(10-l/2)+"px"},itemStyle:{margin:"10px "+l/2+"px",width:"calc("+(Math.floor(1e4/o)/100+"%")+" - "+l+"px)",borderRadius:(r.cardRadius||0)+"px"},mainValueStyle:{fontSize:((null===r||void 0===r?void 0:r.mainValueFontSize)||28)+"px",color:"#0498ff"},mainNameStyle:{fontSize:(null===r||void 0===r?void 0:r.mainNameFontSize)||16,color:i},restStyle:{fontSize:(null===r||void 0===r?void 0:r.restFontSize)||14,color:i},dimStyle:{fontSize:((null===r||void 0===r?void 0:r.dimFontSize)||16)+"px",color:s},ratioStyle:{fontSize:((null===r||void 0===r?void 0:r.ratioFontSize)||16)+"px",color:i}};return a.isDashChart&&(d.itemStyle.border="none"),d},t.setStyleByConfig=function(e,r,n){var o,l,i=t.props,s=i.chart,d=i.chart.config,u=i.theme;if(t.setCustomStyle(e,r,n),d.openCustomColor&&"report"===d.customColorType){var c=(null===(o=u.config.chartTheme)||void 0===o?void 0:o.color)||[];if(c.length){var g=c.length;n.itemStyle=a.__assign(a.__assign({},n.itemStyle),{background:c[r%g]}),n.mainValueStyle.color="#fff",n.ratioStyle.color="#fff",n.restStyle.color="#fff",n.dimStyle.color="#fff",n.mainNameStyle.color="#fff"}}s.isDashChart&&d.backgroundLinear&&(null===(l=n.itemStyle)||void 0===l?void 0:l.background)&&(n.itemStyle.background="linear-gradient(45deg, "+n.itemStyle.background+", "+_.getEndColor(n.itemStyle.background)+")")},t.setCustomStyle=function(e,r,n){var o,l=t.props.chart.config;null==e.rate&&null!=e.rate2&&(e.rate=e.rate2,e.rate_tip=e.rate2_tip,e.rate_level=e.rate2_level,delete e.rate2,delete e.rate2_level,delete e.rate2_tip);var i=l.greenBgColor||"#44B823",s=l.redBgColor||"#CE4646",d="#fff",u=null===(o=l.customColors)||void 0===o?void 0:o.length,c="",g=";",m=_.getColorByRate(e,"rate_level",i,s),f=_.getColorByRate(e,"rate2_level",i,s);if(l.greenRedOption&&"bg"!==l.greenRedOption||!m||(n.mainValueStyle.color="#fff",n.ratioStyle.color="#fff",n.restStyle.color="#fff",n.mainNameStyle.color="#fff",n.dimStyle.color="#fff"),l.openCustomColor&&"custom"===l.customColorType&&u){i=l.customColors[r%u].greenColor||i,s=l.customColors[r%u].redColor||s,m=_.getColorByRate(e,"rate_level",i,s),f=_.getColorByRate(e,"rate2_level",i,s),d=l.customColors[r%u].background||d,c=l.customColors[r%u].mainValueColor||c,g=l.customColors[r%u].ratioColor||g;var h=l.customColors[r%u].restColor,p=l.customColors[r%u].mainNameColor,v=l.customColors[r%u].dimColor;c&&(n.mainValueStyle.color=c),g&&(n.ratioStyle.color=g),h&&(n.restStyle.color=h),p&&(n.mainNameStyle.color=p),v&&(n.dimStyle.color=v),d&&(n.itemStyle=a.__assign(a.__assign({},n.itemStyle),{background:d}))}m&&(l.greenRedOption&&"bg"!==l.greenRedOption?"data"===l.greenRedOption?n.mainValueStyle.color=m:"rate"===l.greenRedOption&&(g&&(n.ratioStyle.color=m),f&&(n.ratio2Style=a.__assign(a.__assign({},n.ratio2Style),{color2:f}))):n.itemStyle=a.__assign(a.__assign({},n.itemStyle),{background:m}))},t.getColumns=function(){var e=t.props,a=e.chart.config,r=e.hub,n=r.data.data,o=(0===(null===a||void 0===a?void 0:a.columns)?n.length:null===a||void 0===a?void 0:a.columns)||3;return n.length<o&&(o=n.length),y.isMobile&&(o=1),o},t}return a.__extends(t,e),t.prototype.componentDidUpdate=function(){var e=this.props,t=e.mode,a=e.chart;(a.config.chartAutoHeight||y.isMobile)&&0===a.isDashChart&&"normal"===t&&0===a.drillDownLevel&&S.setChartTrueHeight("chart-kanban-"+a.frontendId,a)},t.prototype.render=function(){var e=this,t=this.props,a=t.hub,l=t.chart.config,i=t.chart,s=this.auth(this.props);if(s!==!0)return s;if("pending"===a.data.loadState&&!a.data.data)return n.createElement("div",null);var d=a.data.data;if("pending"===a.data.loadState&&!d||null==d)return null;if(!(d&&d instanceof Array&&d.length))return n.createElement("div",{className:"tip"},r.default("数据格式有误！"));var u=(null===l||void 0===l?void 0:l.cardPadding)||10,c={margin:"0px "+(10-u/2)+"px"},g=!(!i.drillDownOpen||!i.drillDown.length),m=!!(l.dependenceOpen&&l.dependences&&l.dependences.length);return n.createElement("div",{className:o("kanbans",{"can-click":g||m,"chart-dashboard":!!i.isDashChart}),style:c,id:"chart-kanban-"+i.frontendId},d.map(function(t,a){var r=e.getStyle();return e.setStyleByConfig(x(t,"indicators[0]",{}),a,r),n.createElement("li",{className:"kanban",key:"li-"+a,style:r.itemStyle},n.createElement(C.default,{data:t,style:r,handleItemDrillDown:e.handleItemDrillDown,drillDownOpen:g,dependenceOpen:m,index:a}))}))},t.displayName="Kanbans",t=a.__decorate([s.default,i.default,d.default,u.default,c.default,m.observer,l.decorate(g.default)],t)}(n.Component);t.default=b;var w=function(e){var t=e.dataConfig.dataModel,a=t.value,r=void 0===a?[]:a,n=t.x2,o=void 0===n?[]:n;return r.length&&o.length?!0:!1},D=function(e){var t,a=[];return(null===(t=e.data)||void 0===t?void 0:t.length)&&e.data.forEach(function(e){var t=e.dimValue,n=e.indicators;if(k(a,0,r.default("维度"),t),null===n||void 0===n?void 0:n.length){var o=n[0]||{},l=o.rate,i=o.rate2,s=o.rate_tip,d=o.rate2_tip;if(n.forEach(function(e,t){var r=e.name,n=e.value;k(a,t+1,r,n)}),void 0!=l&&k(a,n.length+1,s,l),void 0!=i){var u=void 0!=l?n.length+2:n.length+1;k(a,u,d,i)}}}),a},k=function(e,t,a,r){e[t]?e[t].push(r):e[t]=[a,r]},O=function(e,t){var a=D(e);p.exportExcelByColumns(a,""+(t.dynamicName||t.name||"export"))},R=function(e,t){var a=D(e);v.exportCsvByColumns(a,(t.dynamicName||t.name||"export")+".csv")},E=function(e){var t=D(e);return p.exportRowsByColumns(t)},B=function(e){if(!e)return r.default("无数据");if(!(e instanceof Array&&e.length))return r.default("数据不是数组或者是空数组");if(!e[0].hasOwnProperty("dimValue"))return r.default("指标的维度未指定");for(var t=0;t<e[0].length;t++){var a=e[0][t];if(!a.name)return r.default("第「"+(t+1)+"」个指标的名称未指定");if(!a.hasOwnProperty("value"))return r.default("第「"+(t+1)+"」个指标的值未指定");if(!y.isValueOfTypes(a.value,["string","number","null"]))return r.default("第「"+(t+1)+"」个指标的取值格式不对，必须是字符串或者数字")}return!0};f.register({kind:"target",type:"kanbans",name:r.default("指标看板"),iconClassName:"chart-kanbans",enableTemplate:!0,initialState:{dataType:"api",dataApiUrl:h.chartDemoUrl,height:310,width:8,config:{columns:3,customColorType:"report",greenRedOption:"bg",mainFontSize:24,secondFontSize:16,backgroundLinear:!0},dataConfig:{rateStdDate:"auto",redOrGreenObj:"value",countMethod:"auto"}},initialDashboardState:{width:710,height:245,config:{cardPadding:10,greenRedOption:"bg",cardRadius:10,mainFontSize:""}},component:b,needDashboardAutoFresh:!0,canAutoHeight:!0,basicCtrl:h.basicCtrl,dataBindCtrl:h.dataBindCtrl,exportCSV:R,exportExcel:O,exportRows:E,validate:B,drillDownType:"single",canBeDrillChild:!0,dataModelPanelShow:[["dataType","dataModel"]],drillDownSuggestDataModelField:"x2",loadDataWhenDataModelConfigChange:w,chartEigens:h.chartEigens})});
;sugar.define("sugar:widgets/charts/simple-text/font-helper.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getFontFamily=t.setFontFamily=t.fontCtrl=void 0;var l=e("sugar:utils/i18n.ts"),n=e("sugar:utils/font-map.ts");t.fontCtrl=[{type:"radios",name:"config.selfFontFamily",label:l.default("字体设置"),inline:!1,options:[{label:l.default("使用内置字体"),value:0},{label:l.default("使用用户操作系统字体"),value:1},{label:l.default("自定义在线字体"),value:2}]},{type:"select",name:"config.fontFamilyInside",label:l.default("选择字体"),inline:!1,options:n.fonts,visibleOn:"config.selfFontFamily === 0"},{type:"text",label:l.default("字体名称"),name:"config.fontFamily",placeholder:l.default("如果您的系统无此字体将显示默认字体"),visibleOn:"config.selfFontFamily === 1"},{type:"text",label:l.default("在线字体URL地址"),name:"config.fontCustomUrl",placeholder:l.default("请输入您的在线字体URL地址"),visibleOn:"config.selfFontFamily === 2"},{type:"text",name:"config.fontCustomName",hidden:!0},{type:"select",label:l.default("字体类型"),name:"config.fontCustomType",placeholder:l.default("请选择字体类型"),options:[{label:"ttf",value:"truetype"},{label:"otf",value:"opentype"},{label:"woff",value:"woff"},{label:"woff2",value:"woff2"},{label:"eot",value:"embedded-opentype"}],visibleOn:"config.selfFontFamily === 2"}],t.setFontFamily=function(e,t,l){return document.styleSheets[0]&&document.styleSheets[0].insertRule("\n          @font-face {\n            font-family: "+l+";\n            src: url('"+e+"');\n            src: url('"+e+("embedded-opentype"===t?"?#iefix":"")+") format('"+t+"');\n          }\n        ",0),l},t.getFontFamily=function(e){if(void 0===e.selfFontFamily)return"";var t=e.fontFamily;return 1===e.selfFontFamily&&t&&"string"==typeof t&&!/^"/.test(t)&&(t='"'+t+'"'),((1===e.selfFontFamily?t:2===e.selfFontFamily?e.fontCustomName:e.fontFamilyInside)||"Microsoft Yahei")+", Arial, sans-serif"}});
;sugar.define("sugar:widgets/charts/flip-number/flip-number-ctrl.tsx",function(e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.advancedCtrl=a.dataBindCtrl=a.chartEigens=a.chartDemoUrl=void 0;var l=e("sugar:node_modules/tslib/tslib.js"),t=e("sugar:utils/i18n.ts"),o=e("sugar:node_modules/react/index.js"),n=e("sugar:widgets/ctrl-panel/data-bind-ctrl/index.tsx"),i=e("sugar:utils/img-source-map.ts"),r=e("sugar:utils/font-map.ts"),d=e("sugar:widgets/amis-inline-switch.tsx"),s=e("sugar:widgets/image-selector/image-selector.tsx"),f=e("sugar:widgets/data-model/data-model-field-holder/data-model-field-holder.tsx"),u=e("sugar:widgets/charts/simple-text/font-helper.tsx"),c=[];for(var p in i.borders)c.push({label:p,type:i.borders[p].url.split(".").pop().toUpperCase(),value:p,image:i.borders[p].url});var g=[{label:t.default("取累加值"),value:"sum"},{label:t.default("取均值"),value:"avg"},{label:t.default("取首行"),value:"first"},{label:t.default("取末行"),value:"end"}],m=[{label:t.default("顶部"),value:"flex-start"},{label:t.default("居中"),value:"center"},{label:t.default("文字底部对齐"),value:"baseline"},{label:t.default("底部"),value:"flex-end"}],b=[{label:t.default("居左"),value:"flex-start"},{label:t.default("居中"),value:"center"},{label:t.default("居右"),value:"flex-end"}],y=[{label:"normal",value:"normal"},{label:"bold",value:"bold"},{label:"bolder",value:"bolder"},{label:"lighter",value:"lighter"}],h="/openapi/demo/chart?type=flipNumber";a.chartDemoUrl="$CUR_HOST/openapi/demo/chart?type=flipNumber",a.chartEigens=[{field:[{name:"value",type:"m",minCount:1,maxCount:1}]}],a.dataBindCtrl=function(e){var a=n.getDebugAndRefreshBtn({loadData:e.chart.loadData,loadDebugData:e.chart.loadDebugData,dataType:e.chart.dataType,refreshText:t.default("刷新图表")}),o=n.getDataBindCommon({frontendId:e.chart.frontendId,dataTypeOptions:["dataModel","api","sql","json"],api:{demoUrl:h},loadData:e.chart.loadData,loadDebugData:e.chart.loadDebugData,curUrl:e.chart.dataApiUrl}),i=e.chart.dataModelHash||"",r=e.sqlModelStore.detailMap.mapByHash.get(i),d=n.generateSQLFieldList(r),s=l.__spreadArrays([{type:"select",name:"dataConfig.value",hiddenOn:"data.dataType != 'sql'",label:t.default("取值字段"),placeholder:t.default("请选择"),options:d},{type:"select",name:"dataConfig.colModeMultiRows",hiddenOn:"data.dataType != 'sql'",label:t.default("如果有多行数据的处理方式"),options:g},f.getDataModelFieldHolder({name:"value",label:t.default("取值字段"),config:{dataModelHash:i,holderId:e.chart.frontendId+"-value",maxCount:1,onlyMeasure:!0}}),n.commonFilterForDataModel(i),n.commonBindUrlParamForDataModel(i)],f.getChartConditionsHolder(i,e.chart));return o.concat(s,a)},a.advancedCtrl=[{type:"radios",name:"config.distributed",label:t.default("前缀与后缀排列形式"),inline:!1,options:[{label:t.default("水平"),value:"horizontal"},{label:t.default("垂直"),value:"vertical"}]},{type:"select",name:"config.horizontalAlign",label:t.default("水平对齐"),options:[{label:t.default("居左"),value:"flex-start"},{label:t.default("居中"),value:"center"},{label:t.default("居右"),value:"flex-end"}]},{type:"divider"},{type:"fieldset",collapsed:!0,title:t.default("数字设置"),collapsable:!0,headingClassName:"fieldset-title",controls:l.__spreadArrays(u.fontCtrl,[{type:"group",controls:[{type:"number",label:t.default("字号"),name:"config.numberFontSize",step:1,min:5,max:100},{type:"select",label:t.default("文字粗细"),name:"config.fontWeight",options:y}]},{type:"group",controls:[{type:"color",name:"config.numberBColor",format:"rgba",label:t.default("背景色")},{type:"color",name:"config.numberColor",format:"rgba",label:t.default("颜色")}]},{type:"radios",name:"config.borderType",label:t.default("边框"),inline:!1,options:[{label:t.default("无"),value:0},{label:t.default("简单边框"),value:1},{label:t.default("内置边框"),value:2}]},{type:"group",visibleOn:"config.borderType === 1",controls:[{type:"color",name:"config.borderColor",label:t.default("边框颜色"),format:"rgba"},{type:"number",label:t.default("边框宽度"),name:"config.borderWidth",min:1,step:1,max:20}]},{name:"config.borderImageType",visibleOn:"config.borderType === 2",children:function(e){var a=e.onChange,n=e.value;return o.createElement(s.default,l.__assign({},{onChange:a,value:n},{options:c,containerClassName:"form-group form-item",label:t.default("请选择边框素材："),useKey:!0,limit:20}))}},{type:"group",controls:[{type:"select",name:"config.numberPlace",label:t.default("位置"),options:m,visibleOn:"config.distributed === 'horizontal'"},{type:"select",name:"config.numberPlaceV",label:t.default("位置"),options:b,visibleOn:"config.distributed === 'vertical'"},{type:"number",label:t.default("小数位数"),name:"config.round",min:0,step:1,max:5}]},{type:"range",name:"config.margin",max:10,min:0,step:1,label:t.default("数字间间隔")},{type:"number",label:t.default("最少整数位数(不够会在前面补零)"),name:"config.dig",min:1,step:1,max:50},{type:"group",controls:[d.amisInlineSwitch("config.divide",t.default("千位分隔符")),d.amisInlineSwitch("config.forceShowPlus",t.default("强制显示正负号"))]}])},{type:"divider"},{type:"fieldset",title:t.default("前缀设置"),collapsable:!0,collapsed:!0,headingClassName:"fieldset-title",controls:[{type:"group",controls:[{type:"text",name:"config.prefix",label:t.default("内容")},{type:"select",name:"config.prefixFontFamily",label:t.default("字体"),options:r.fonts}]},{type:"group",controls:[{type:"number",label:t.default("字号"),name:"config.prefixFontSize",step:1,min:5,max:100},{type:"color",name:"config.prefixColor",format:"rgba",label:t.default("颜色")}]},{type:"group",controls:[{type:"select",name:"config.prefixPlace",label:t.default("位置"),options:m,visibleOn:"config.distributed === 'horizontal'"},{type:"select",name:"config.prefixPlaceV",label:t.default("位置"),options:b,visibleOn:"config.distributed === 'vertical'"},{type:"range",name:"config.prefixMargin",max:100,min:0,step:1,label:t.default("前缀与主体距离")}]}]},{type:"divider"},{type:"fieldset",title:t.default("后缀设置"),collapsable:!0,collapsed:!0,headingClassName:"fieldset-title",controls:[{type:"group",controls:[{type:"text",name:"config.suffix",label:t.default("内容")},{type:"select",name:"config.suffixFontFamily",label:t.default("字体"),options:r.fonts}]},{type:"group",controls:[{type:"number",label:t.default("字号"),name:"config.suffixFontSize",step:1,min:5,max:100},{type:"color",name:"config.suffixColor",format:"rgba",label:t.default("颜色")}]},{type:"group",controls:[{type:"select",name:"config.suffixPlace",label:t.default("位置"),options:m,visibleOn:"config.distributed === 'horizontal'"},{type:"select",name:"config.suffixPlaceV",label:t.default("位置"),options:b,visibleOn:"config.distributed === 'vertical'"},{type:"range",name:"config.suffixMargin",max:100,min:0,step:1,label:t.default("后缀与主体距离")}]}]},{type:"divider"},{type:"fieldset",title:t.default("飘红飘绿设置"),collapsable:!0,collapsed:!0,headingClassName:"fieldset-title",controls:[d.amisInlineSwitch("config.openRedOrGreen",t.default("开启飘红飘绿")),{type:"group",visibleOn:"config.openRedOrGreen",controls:[{type:"color",name:"config.rgRedColor",label:t.default("飘红颜色"),format:"rgba"},{type:"color",name:"config.rgGreenColor",label:t.default("飘绿颜色"),format:"rgba"}]},{type:"text",name:"config.rgNum",label:t.default("飘红飘绿临界值，小于该值飘红，反之飘绿"),visibleOn:"config.openRedOrGreen"},{type:"group",hiddenOn:"!config.openRedOrGreen||!config.rgShowArrow",controls:[{type:"number",label:t.default("箭头大小"),name:"config.rgArrowFontSize",step:1,min:5,max:100},{type:"range",name:"config.rgArrowMargin",max:100,min:0,step:1,label:t.default("箭头与主体距离")}]},d.amisInlineSwitch("config.rgShowArrow",t.default("尾部显示上下箭头"),"!config.openRedOrGreen"),d.amisInlineSwitch("config.rgOnlyArrow",t.default("飘红飘绿只针对箭头，不影响数字"),"!config.openRedOrGreen||!config.rgShowArrow")]}]});
;sugar.define("sugar:widgets/charts/flip-number/flip-number.tsx",function(e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var t=e("sugar:node_modules/tslib/tslib.js"),a=e("sugar:utils/i18n.ts"),i=e("sugar:node_modules/react/index.js"),n=e("sugar:node_modules/react-mixin/index.js"),o=e("sugar:widgets/charts/chart-manager.tsx"),s=e("sugar:widgets/charts/_hoc/debug/debug.tsx"),l=e("sugar:widgets/charts/_hoc/toolbar/toolbar.tsx"),d=e("sugar:widgets/charts/_hoc/chart-zoom/index.tsx"),u=e("sugar:widgets/charts/_mixin/common.tsx"),f=e("sugar:utils/common-helper.ts"),m=e("sugar:stores/index.ts"),c=e("sugar:widgets/charts/flip-number/flip-number-ctrl.tsx"),h=e("sugar:utils/img-source-map.ts"),g=e("sugar:utils/export-file/export-excel.ts"),p=e("sugar:utils/export-file/export-csv.ts"),b=e("sugar:widgets/charts/_hoc/drill-down/drill-down.tsx"),x=e("sugar:widgets/charts/simple-text/font-helper.tsx"),y=function(e){function r(r){var t=e.call(this,r)||this;return t.numberNow=0,t.decimals=0,t.dec=1,t.duration=15,t.progress=0,t.countDown=!1,t.startVal=0,t.endVal=0,t.frameVal=0,t.state={number:0},t.changeNumber=t.changeNumber.bind(t),t}t.__extends(r,e),r.prototype.componentWillReact=function(){this.pareperChangeNumber(this.props)},r.prototype.componentWillUnmount=function(){cancelAnimationFrame(this.rAF)},r.prototype.pareperChangeNumber=function(e){var r=e.hub,t=e.chart.config,a=0,i=r.data.data;null!=i&&"object"==typeof i&&(a=i.accuracy||0,i=i.data),"done"!==r.data.loadState||!f.isNumberic(i)||i==this.numberNow&&this.decimals===Math.max(0,a||t.round||0)||(this.progress=0,this.decimals=Math.max(0,a||t.round||0),this.dec=Math.pow(10,this.decimals),this.startVal=Number(i==this.numberNow?0:this.numberNow),this.endVal=Number(i),this.countDown=this.startVal>this.endVal,this.frameVal=this.startVal,cancelAnimationFrame(this.rAF),this.rAF=requestAnimationFrame(this.changeNumber),this.numberNow=i)},r.prototype.changeNumber=function(){this.frameVal=this.countDown?this.startVal-(this.startVal-this.endVal)*(this.progress/this.duration):this.startVal+(this.endVal-this.startVal)*(this.progress/this.duration),this.frameVal=this.countDown?this.frameVal<this.endVal?this.endVal:this.frameVal:this.frameVal>this.endVal?this.endVal:this.frameVal,this.frameVal=Math.round(this.frameVal*this.dec)/this.dec,this.setState({number:this.frameVal}),this.progress++,this.progress<=this.duration&&(this.rAF=requestAnimationFrame(this.changeNumber))},r.prototype.render=function(){var e,r=this.props,a=(r.mode,r.hub),n=r.chart.config,o=r.theme,s=this.auth(this.props);if(s!==!0)return s;var l=[],d="";o.config&&(l=(null===(e=o.config.chartTheme)||void 0===e?void 0:e.color)||[],d=o.config.titleColor||l[0]);var u=n.distributed,f=n.horizontalAlign,m=n.prefixFontFamily,c=n.prefixFontSize,g=n.prefixColor,p=n.prefixPlace,b=n.prefixPlaceV,y=n.prefixMargin,w=n.suffixFontFamily,v=n.suffixFontSize,F=n.suffixColor,N=n.suffixPlace,C=n.suffixPlaceV,S=n.suffixMargin,V=(n.numberFontFamily,n.numberFontSize),A=n.numberColor,M=n.numberBColor,P=n.numberPlace,_=n.numberPlaceV,z=n.fontWeight,D=n.borderType,T=n.borderColor,E=n.borderWidth,R=n.borderImageType,j=n.dig,W=n.margin,B=n.round,I=n.divide,O=n.forceShowPlus,U=n.openRedOrGreen,G=n.rgNum,L=n.rgRedColor,Y=n.rgGreenColor,k=n.rgShowArrow,q=n.rgOnlyArrow,$=n.rgArrowFontSize,H=n.rgArrowMargin,J=0,K=a.data.data;null!=K&&"object"==typeof K&&(J=K.accuracy||0),this.pareperChangeNumber(this.props);var Q=this.state.number,X=!1;0>Q&&(Q=-Q,X=!0),Q=Q.toFixed(Math.min(J||B,6))+"";for(var Z=j-Q.length+(Q.indexOf(".")>-1?1:0);Z>0;)Q="0"+Q,Z--;I&&(Q=Q.replace(/^\d+/g,function(e){return e.replace(/(?=(?!^)(\d{3})+$)/g,",")})),X?Q="-"+Q:O&&(Q="+"+Q),Q=Q.split("");var er="vertical"===u,rr=A,tr=F,ar=null;if(U){var ir=parseFloat(G||"0"),nr="",or="";if(this.state.number>=ir?(nr=Y||"",or="fa-arrow-up"):(nr=L||"",or="fa-arrow-down"),k){var sr={fontSize:$,color:nr,alignSelf:"center",marginLeft:er?0:H,marginTop:er?H:0};ar=i.createElement("div",{style:sr},i.createElement("i",{className:"fa "+or}))}(!k||k&&!q)&&nr&&(rr=nr,tr=nr)}var lr={justifyContent:f},dr={flexDirection:er?"column":"row"},ur={fontFamily:m,fontSize:c,color:g?g:d,alignSelf:er?b:p,marginRight:er?0:y,marginBottom:er?y:0},fr={alignSelf:er?_:P},mr={fontFamily:w,fontSize:v,color:tr?tr:d,alignSelf:er?C:N,marginLeft:er?0:S,marginTop:er?S:0},cr={fontFamily:x.getFontFamily(n)||n.numberFontFamily||"Microsoft Yahei, Arial, sans-serif",fontSize:V,fontWeight:z,color:rr,marginLeft:W/20*V,marginRight:W/20*V,padding:W?"0 0.1em":0},hr=t.__assign(t.__assign({},cr),{boxSizing:"content-box",width:"0.6em",textAlign:"center",backgroundColor:M});if(1===D)hr.borderWidth=E+"px",hr.borderColor=T||l[1],hr.borderStyle="solid",cr.marginTop=E+"px";else if(2===D){var gr=h.borders[R];if(gr){var pr=gr.left,br=gr.right,xr=gr.top,yr=gr.bottom;hr.borderImageSource="url("+gr.url+")",hr.borderImageSlice=xr+" "+br+" "+yr+" "+pr+" fill",hr.borderWidth=xr+"px "+(br+"px")+" "+(yr+"px")+" "+(pr+"px"),hr.borderStyle="solid",cr.marginTop=xr+"px"}}return i.createElement("div",{className:"flip-number-warpper",style:lr},i.createElement("div",{className:"flip-number",style:dr},i.createElement("div",{className:"flip-number-prefix",style:ur},n.prefix),i.createElement("div",{className:"flip-number-number",style:fr},Q.map(function(e,r){return i.createElement("div",{className:"flip-single-number",key:r,style:isNaN(Number(e))?cr:hr},e)})),i.createElement("div",{className:"flip-number-suffix",style:mr},n.suffix),ar))};var a;return r.displayName="FlipNumber",r=t.__decorate([b.default,s.default,l.default,d.default,m.observer,n.decorate(u.default),t.__metadata("design:paramtypes",["function"==typeof(a="undefined"!=typeof o.IChartComponentProps&&o.IChartComponentProps)?a:Object])],r)}(i.Component);r.default=y;var w=function(e){return e="object"==typeof e&&null!=e?e.data:e,0===e||e?f.isNumberic(e)?!0:a.default("数据不是数字类型"):a.default("无数据")},v=function(e){var r=e.dataConfig.dataModel.value,t=void 0===r?[]:r;return t.length?!0:!1},F=function(e){return[[e.data]]},N=function(e,r){var t=F(e);g.exportExcelByRows(t,""+(r.dynamicName||r.name||"export"))},C=function(e,r){var t=F(e);p.exportCsvByRows(t,(r.dynamicName||r.name||"export")+".csv")},S=function(e){return F(e)};o.register({kind:"target",type:"flip-number",name:a.default("数字翻牌器"),iconClassName:"chart-flip-number",enableTemplate:!0,dontNeedLoading:!0,variants:[{name:a.default("百分比指标"),iconClassName:"chart-flip-number-percent",initialState:{dataApiUrl:c.chartDemoUrl+"&val=13.14&canNeg=1",config:{borderType:0,margin:0,round:2,forceShowPlus:!0,numberPlace:"baseline",suffix:"%",suffixFontSize:20,suffixMargin:2,suffixPlace:"baseline",openRedOrGreen:!0,rgArrowFontSize:26,rgArrowMargin:8,rgGreenColor:"rgba(68, 184, 35, 1)",rgNum:"0",rgOnlyArrow:!1,rgRedColor:"rgba(206, 70, 70, 1)",rgShowArrow:!0}},initialDashboardState:{height:90,width:240}}],initialState:{dataType:"api",dataApiUrl:c.chartDemoUrl,height:150,width:6,config:{prefixFontFamily:"Microsoft Yahei",prefixFontSize:14,prefixPlace:"flex-end",prefixPlaceV:"flex-end",prefixMargin:0,suffixFontFamily:"Microsoft Yahei",suffixFontSize:14,suffixPlace:"flex-end",suffixPlaceV:"flex-end",suffixMargin:0,selfFontFamily:0,fontFamilyInside:"Microsoft Yahei",numberFontSize:32,numberPlace:"center",numberPlaceV:"center",borderType:2,borderImageType:a.default("边框1"),dig:1,round:0,divide:!0,margin:2,numberColor:"#000",horizontalAlign:"center",fontWeight:"bold",distributed:"horizontal",rgNum:"0",rgArrowFontSize:32,rgArrowMargin:2},dataConfig:{rateStdDate:"auto"}},initialDashboardState:{width:500,config:{numberColor:"#fff"}},component:y,needDashboardAutoFresh:!0,advancedCtrl:c.advancedCtrl,dataBindCtrl:c.dataBindCtrl,exportCSV:C,exportExcel:N,exportRows:S,validate:w,canBeDrillChild:!0,dataModelPanelShow:[["dataType","dataModel"]],loadDataWhenDataModelConfigChange:v,chartEigens:c.chartEigens})});
;sugar.define("sugar:widgets/charts/gauge/gauge-ctrl.tsx",function(e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.advancedCtrl=a.dataBindCtrl=a.chartEigens=a.chartDemoUrl=a.basicCtrl=void 0;var t=e("sugar:node_modules/tslib/tslib.js"),l=e("sugar:utils/i18n.ts"),d=e("sugar:node_modules/react/index.js"),n=e("sugar:widgets/ctrl-panel/data-bind-ctrl/index.tsx"),o=e("sugar:widgets/object-array-editor/object-array-editor.tsx"),r=e("sugar:widgets/amis-inline-switch.tsx"),i=e("sugar:widgets/data-model/data-model-field-holder/data-model-field-holder.tsx"),u=e("sugar:widgets/charts/utils/common.tsx"),s=[{label:l.default("取累加值"),value:"sum"},{label:l.default("取均值"),value:"avg"},{label:l.default("取首行"),value:"first"},{label:l.default("取末行"),value:"end"}],c=[{type:"color",name:l.default("颜色"),key:"background",defaultValue:"#23b7e5"},{type:"number",name:l.default("占比（0-100）"),key:"ratio",defaultValue:30,max:100,min:0}],m=function(e){return[{type:"divider"},{type:"fieldset",collapsed:!1,title:l.default("自定义配色"),collapsable:!0,headingClassName:"fieldset-title",controls:[r.amisInlineSwitch("config.openCustomColor",l.default("开启自定义配色")),{type:"radios",name:"config.customColorType",hiddenOn:"!data.config.openCustomColor",label:"",inline:!1,options:[{label:l.default("本报表页面的主题配色"),value:"report"},{label:l.default("自定义"),value:"custom"}]},{type:"color",name:"config.color",format:"rgba",label:l.default("标题颜色"),hiddenOn:"!data.config.openCustomColor || data.config.customColorType != 'custom'"},{name:"config.customColors",hiddenOn:"!data.config.openCustomColor || data.config.customColorType != 'custom'",children:function(a){var n=a.onChange,r=a.value;return d.createElement(o.default,t.__assign({},{onChange:n,value:r},{chartFrontendId:e.chart.frontendId,containerClassName:"form-group form-item",label:l.default("可增加多个配色项，依次对应各段颜色"),addTipText:l.default("新增配色项"),cols:c}))}}]}]};a.basicCtrl=function(e){return m(e)};var f="/openapi/demo/chart?type=gauge";a.chartDemoUrl="$CUR_HOST/openapi/demo/chart?type=gauge",a.chartEigens=[{field:[{name:"value",type:"m",minCount:1,maxCount:1}],unit:["%"]}],a.dataBindCtrl=function(e){var a=n.getDebugAndRefreshBtn({loadData:e.chart.loadData,loadDebugData:e.chart.loadDebugData,dataType:e.chart.dataType,refreshText:l.default("刷新图表")}),d=n.getDataBindCommon({frontendId:e.chart.frontendId,dataTypeOptions:["dataModel","api","sql","json"],api:{demoUrl:f},loadData:e.chart.loadData,loadDebugData:e.chart.loadDebugData,curUrl:e.chart.dataApiUrl}),o=e.chart.dataModelHash||"",u=e.sqlModelStore.detailMap.mapByHash.get(o),c=n.generateSQLFieldList(u),m=t.__spreadArrays([i.getDataModelFieldHolder({name:"value",label:l.default("仪表盘取值字段"),config:{dataModelHash:o,holderId:e.chart.frontendId+"-value",maxCount:1,onlyMeasure:!0}}),n.commonFilterForDataModel(o),n.commonBindUrlParamForDataModel(o),{type:"select",name:"dataConfig.sqlValueField",hiddenOn:"data.dataType != 'sql'",label:l.default("仪表盘数值字段绑定"),options:c},{type:"text",name:"dataConfig.unit",placeholder:l.default("默认为空"),label:l.default("单位"),hiddenOn:"dataType != 'sql' && dataType != 'dataModel'"},{type:"number",name:"dataConfig.maxValue",hiddenOn:"dataType != 'sql' && dataType != 'dataModel'",label:l.default("最大值")},{type:"number",name:"dataConfig.minValue",hiddenOn:"dataType != 'sql' && dataType != 'dataModel'",label:l.default("最小值")},r.amisInlineSwitch("dataConfig.hideName",l.default("隐藏指标名称"),"dataType != 'sql' && dataType != 'dataModel'"),{type:"select",name:"dataConfig.multiRows",hiddenOn:"data.dataType != 'sql'",label:l.default("如果有多行数据的处理方式"),options:s}],i.getChartConditionsHolder(o,e.chart));return d.concat(m,a)},a.advancedCtrl=function(e){return t.__spreadArrays([{type:"group",controls:[r.amisInlineSwitch("config.hideAxisLabel",l.default("隐藏刻度值")),r.amisInlineSwitch("config.hideDetail",l.default("隐藏详情值"))]},{type:"group",controls:[{type:"number",name:"config.axisLineWidth",label:l.default("刻度线粗度(像素)"),max:15,min:5,step:5},{type:"number",label:l.default("刻度字号"),name:"config.axisFontSize",step:1,min:8,max:100}]},{type:"group",controls:[{type:"number",label:l.default("指标名称字号"),name:"config.nameFontSize",step:1,min:8,max:100},{type:"number",label:l.default("指标字号"),name:"config.valueFontSize",step:1,min:8,max:100}]},u.dataUnitCtrl,{type:"divider"},u.getTooltipCtrl(),{type:"divider"},{type:"fieldset",title:l.default("系列设置(series)"),collapsable:!0,collapsed:!0,headingClassName:"fieldset-title",controls:[{type:"text",name:"config.radius",clearable:!0,placeholder:l.default("数字、百分比、50%"),label:l.default("表盘半径大小")},{type:"group",controls:[{type:"text",name:"config.centerX",clearable:!0,placeholder:l.default("数字、百分比、50%"),label:l.default("中心点位置横向")},{type:"text",name:"config.centerY",clearable:!0,placeholder:l.default("数字、百分比、50%"),label:l.default("中心点位置纵向")}]},{type:"group",controls:[{type:"text",name:"config.pointerLength",clearable:!0,placeholder:l.default("数字、百分比、50%"),label:l.default("指针长度")},{type:"number",name:"config.pointerWidth",label:l.default("指针宽度"),min:-360,max:360}]},{type:"group",controls:[{type:"number",name:"config.startAngle",label:l.default("起始角度"),min:-360,max:360},{type:"number",name:"config.endAngle",label:l.default("终止角度"),min:-360,max:360}]}]}],m(e))}});
;sugar.define("sugar:widgets/charts/gauge/gauge.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=e("sugar:node_modules/tslib/tslib.js"),o=e("sugar:utils/i18n.ts"),r=e("sugar:node_modules/react/index.js"),i=e("sugar:widgets/charts/chart-manager.tsx"),n=e("sugar:widgets/charts/gauge/gauge-ctrl.tsx"),s=e("sugar:widgets/charts/_hoc/echarts.tsx"),l=e("sugar:node_modules/react-mixin/index.js"),u=e("sugar:widgets/charts/_mixin/echarts.tsx"),d=e("sugar:widgets/charts/_hoc/debug/debug.tsx"),c=e("sugar:widgets/charts/_hoc/toolbar/toolbar.tsx"),g=e("sugar:widgets/charts/_hoc/chart-zoom/index.tsx"),h=e("sugar:node_modules/lodash/cloneDeep.js"),m=e("sugar:utils/common-helper.ts"),p=e("sugar:utils/animation.ts"),f=e("sugar:utils/export-file/export-excel.ts"),x=e("sugar:utils/export-file/export-csv.ts"),C=e("sugar:widgets/charts/utils/common.tsx"),v=e("sugar:widgets/charts/_hoc/drill-down/drill-down.tsx"),y=12,w=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.refresh=function(e){var t=e.chartData,a=e.chartConfig,o=e.theme,r=e.chart,i=h(t),n=this.chart,s=!!i.hideName,l=a.unit||i.unit||"",u=a.prefix||i.prefix||"",d=[],c=r.isDashChart?"#ccc":"#333";if(o.config){var g=o.config,m=g.chartTheme,f=g.titleColor;d=(null===m||void 0===m?void 0:m.color)||[],a.openCustomColor&&"report"===a.customColorType&&(c=f||d[0])}a.openCustomColor&&"custom"===a.customColorType&&(c=a.color);var x={tooltip:{confine:a.tooltipConfine||!1,extraCssText:C.getTooltipCss(a),formatter:i.name+": "+u+"{c}"+l},toolbox:{show:!1},series:[{name:s?l||"":i.name,max:i.max?i.max:100,min:i.min?i.min:0,startAngle:a.startAngle>=-360?a.startAngle:225,endAngle:a.endAngle>=-360?a.endAngle:-45,type:"gauge",radius:a.radius||"95%",center:[a.centerX||"50%",a.centerY||"55%"],pointer:{length:a.pointerLength||"80%",width:a.pointerWidth||6,itemStyle:{color:"auto"}},axisLine:{lineStyle:{width:parseInt(a.axisLineWidth,10)||5,color:[[.2,"#91c7ae"],[.8,"#63869e"],[1,"#c23531"]]}},axisTick:{length:8,distance:-1*(parseInt(a.axisLineWidth,10)||5),lineStyle:{color:"#eee"}},splitLine:{length:12+((parseInt(a.axisLineWidth,10)||5)-5)/5*3,distance:-1*(parseInt(a.axisLineWidth,10)||5),lineStyle:{color:"#eee",width:2}},axisLabel:{show:!a.hideAxisLabel,fontSize:a.axisFontSize||y,color:"auto",distance:5+(parseInt(a.axisLineWidth,10)||5)},title:{fontSize:a.nameFontSize||y+4,fontStyle:"italic",color:c,offsetCenter:[0,"-40%"]},detail:{show:!a.hideDetail,formatter:u+"{value}"+(s?"":l&&l.length<3?l:""),fontSize:a.valueFontSize||y+4,fontWeight:"bolder",color:"auto"},data:[{value:i.value,name:s?l||"":i.name}]}]};if(a.openCustomColor&&"report"===a.customColorType)x.series[0].axisLine.lineStyle.color=[[.25,d[0]],[.5,d[1]],[.75,d[2]],[1,d[3]]];else if(a.openCustomColor&&"custom"===a.customColorType&&a.customColors&&a.customColors.length){for(var v=[],w=0,b=0,S=a.customColors;b<S.length;b++){var _=S[b];if(w>=100)break;w+=_.ratio||30,v.push([w/100,_.background||"#23b7e5"])}x.series[0].axisLine.lineStyle.color=v}p.setAnimationOption(x,a),n.setOption(x,!0)},t.displayName="Gauge",t=a.__decorate([v.default,d.default,c.default,g.default,s.default,l.decorate(u.default)],t)}(r.Component);t.default=w;var b=function(e){return e?e.hasOwnProperty&&e.hasOwnProperty("value")?m.isValueOfTypes(e.value,["number","numberString"])?!0:o.default("数据取值字段value必须是数字"):o.default("数据中缺少value字段"):o.default("无数据")},S=function(e){var t=e.dataConfig.dataModel.value,a=void 0===t?[]:t;return a.length?!0:!1},_=function(e){return e.data instanceof Object?[[e.data.name,e.data.value],[o.default("最大值"),e.data.max],[o.default("最小值"),e.data.min]]:[]},T=function(e,t){var a=_(e);f.exportExcelByRows(a,""+(t.dynamicName||t.name||"export"))},L=function(e,t){var a=_(e);x.exportCsvByRows(a,(t.dynamicName||t.name||"export")+".csv")},A=function(e){return _(e)};i.register({kind:"target",type:"gauge",name:o.default("仪表盘"),iconClassName:"chart-dashboard",enableTemplate:!0,initialState:{dataType:"api",dataApiUrl:n.chartDemoUrl,dataConfig:{maxValue:100,minValue:0,multiRows:"sum"},config:{color:"#333",customColorType:"report",axisLineWidth:5,startAngle:225,endAngle:-45}},initialDashboardState:{config:{lineColorWithTheme:!0,openCustomColor:!0,color:"#ccc"}},component:w,needDashboardAutoFresh:!0,dataBindCtrl:n.dataBindCtrl,basicCtrl:n.basicCtrl,advancedCtrl:n.advancedCtrl,exportCSV:L,exportExcel:T,exportRows:A,validate:b,canBeDrillChild:!0,dataModelPanelShow:[["dataType","dataModel"]],loadDataWhenDataModelConfigChange:S,chartEigens:n.chartEigens})});
;sugar.define("sugar:widgets/charts/progress-bar/progress-bar-ctrl.tsx",function(a,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.advancedCtrl=e.basicCtrl=e.dataBindCtrl=e.chartEigens=e.chartDemoUrl=void 0;var t=a("sugar:node_modules/tslib/tslib.js"),l=a("sugar:utils/i18n.ts"),o=a("sugar:node_modules/react/index.js"),n=a("sugar:widgets/ctrl-panel/data-bind-ctrl/index.tsx"),d=a("sugar:widgets/object-array-editor/object-array-editor.tsx"),r=a("sugar:utils/font-map.ts"),i=a("sugar:widgets/amis-inline-switch.tsx"),u=a("sugar:widgets/data-model/data-model-field-holder/data-model-field-holder.tsx"),s=[{type:"color",name:l.default("颜色"),key:"background",defaultValue:"#23b7e5"},{type:"number",name:l.default("占比（0-100）"),key:"ratio",defaultValue:100}],c=[{label:l.default("取累加值"),value:"sum"},{label:l.default("取均值"),value:"avg"},{label:l.default("取首行"),value:"first"},{label:l.default("取末行"),value:"end"}],f=[{label:"normal",value:"normal"},{label:"bold",value:"bold"},{label:"bolder",value:"bolder"},{label:"lighter",value:"lighter"}],m="/openapi/demo/chart?type=progressBar";e.chartDemoUrl="$CUR_HOST/openapi/demo/chart?type=progressBar",e.chartEigens=[{field:[{name:"value",type:"m",minCount:1,maxCount:1}],unit:["%"]}],e.dataBindCtrl=function(a){var e=n.getDebugAndRefreshBtn({loadData:a.chart.loadData,loadDebugData:a.chart.loadDebugData,dataType:a.chart.dataType,refreshText:l.default("刷新图表")}),o=n.getDataBindCommon({frontendId:a.chart.frontendId,dataTypeOptions:["dataModel","api","sql","json"],api:{demoUrl:m},loadData:a.chart.loadData,loadDebugData:a.chart.loadDebugData,curUrl:a.chart.dataApiUrl}),d=a.chart.dataModelHash||"",r=a.sqlModelStore.detailMap.mapByHash.get(d),s=n.generateSQLFieldList(r),f=t.__spreadArrays([{type:"select",name:"dataConfig.value",hiddenOn:"data.dataType != 'sql'",label:l.default("取值字段"),placeholder:l.default("请选择"),options:s},{type:"select",name:"dataConfig.colModeMultiRows",hiddenOn:"data.dataType != 'sql'",label:l.default("如果有多行数据的处理方式"),options:c},u.getDataModelFieldHolder({name:"value",label:l.default("取值字段"),config:{dataModelHash:d,holderId:a.chart.frontendId+"-value",maxCount:1,onlyMeasure:!0}}),n.commonFilterForDataModel(d),n.commonBindUrlParamForDataModel(d),i.amisInlineSwitch("dataConfig.turnPercentage",l.default("小数转百分比"),"data.dataType != 'dataModel'")],u.getChartConditionsHolder(d,a.chart));return o.concat(f,e)};var g=function(a){return[{type:"divider"},{type:"fieldset",collapsed:!1,title:l.default("自定义配色"),collapsable:!0,headingClassName:"fieldset-title",controls:[i.amisInlineSwitch("config.openCustomColor",l.default("开启自定义配色")),{type:"color",name:"config.color",format:"rgba",label:l.default("文字颜色"),hiddenOn:"!data.config.openCustomColor"},{type:"color",name:"config.bacgroundColor",format:"rgba",label:l.default("进度条背景色"),hiddenOn:"!data.config.openCustomColor"},{type:"color",name:"config.barColor",format:"rgba",label:l.default("进度条颜色"),hiddenOn:"!data.config.openCustomColor || data.config.barMode !== 'round'"},{name:"config.customColors",hiddenOn:"!data.config.openCustomColor || data.config.barMode !== 'horizontal'",children:function(e){var n=e.onChange,r=e.value;return o.createElement(d.default,t.__assign({},{onChange:n,value:r},{chartFrontendId:a.chart.frontendId,containerClassName:"form-group form-item",label:l.default("可增加多个配色项，依次对应各段颜色渐变"),addTipText:l.default("新增配色项"),cols:s}))}}]}]};e.basicCtrl=function(a){return g(a)},e.advancedCtrl=function(a){return t.__spreadArrays([{type:"radios",name:"config.barMode",label:l.default("进度条模式"),inline:!1,options:[{label:l.default("水平"),value:"horizontal"},{label:l.default("环形"),value:"round"}]},{type:"number",label:l.default("进度条粗细"),name:"config.barWidth",step:1,min:1},{type:"select",name:"config.fontFamily",label:l.default("字体"),options:r.fonts},{type:"number",label:l.default("字号"),name:"config.fontSize",step:1,min:5,max:100},{type:"select",label:l.default("文字粗细"),name:"config.fontWeight",options:f},{type:"number",label:l.default("小数位数"),name:"config.round",min:0,step:1,max:5},i.amisInlineSwitch("config.customTotal",l.default("自定义总值")),{type:"number",label:l.default("总值"),name:"config.total",min:0,step:1,visibleOn:"config.customTotal"},i.amisInlineSwitch("config.showReal",l.default("显示真实值"))],g(a))}});
;sugar.define("sugar:widgets/charts/progress-bar/progress-bar.tsx",function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=t("sugar:node_modules/tslib/tslib.js"),r=t("sugar:utils/i18n.ts"),o=t("sugar:node_modules/react/index.js"),s=t("sugar:node_modules/react-mixin/index.js"),i=t("sugar:widgets/charts/chart-manager.tsx"),n=t("sugar:widgets/charts/_hoc/debug/debug.tsx"),d=t("sugar:widgets/charts/_hoc/toolbar/toolbar.tsx"),l=t("sugar:widgets/charts/_hoc/chart-zoom/index.tsx"),c=t("sugar:widgets/charts/_mixin/common.tsx"),h=t("sugar:utils/common-helper.ts"),u=t("sugar:node_modules/lodash/debounce.js"),m=t("sugar:stores/index.ts"),p=t("sugar:widgets/charts/progress-bar/progress-bar-ctrl.tsx"),g=t("sugar:utils/resize-sensor.ts"),f=t("sugar:utils/export-file/export-excel.ts"),b=t("sugar:utils/export-file/export-csv.ts"),x=t("sugar:widgets/charts/_hoc/drill-down/drill-down.tsx"),v=function(t){function e(e){var a=t.call(this,e)||this;return a.numberNow=0,a.decimals=0,a.dec=1,a.duration=50,a.progress=0,a.countDown=!1,a.startVal=0,a.endVal=0,a.frameVal=0,a.state={number:0},a.changeNumber=a.changeNumber.bind(a),a.getContainer=a.getContainer.bind(a),a.setWidth=a.setWidth.bind(a),a}a.__extends(e,t),e.prototype.componentWillReact=function(){this.pareperChangeNumber(this.props)},e.prototype.componentWillUnmount=function(){cancelAnimationFrame(this.rAF),this.unWatchResize&&this.unWatchResize()},e.prototype._initResizeSensor=function(){if(this.unWatchResize&&this.unWatchResize(),this.dom&&this.dom.parentNode){var t=this.dom.parentNode;this.unWatchResize=g.resizeSensor(t,u(this.setWidth,50))}},e.prototype.pareperChangeNumber=function(t){var e=t.hub,a=t.chart.config,r=0,o=e.data.data;null!=o&&"object"==typeof o&&(r=o.accuracy||0,o=o.data),"done"!==e.data.loadState||!h.isNumberic(o)||o==this.numberNow&&this.decimals===Math.max(0,r||a.round||0)||(this.progress=0,this.decimals=Math.max(0,r||a.round||0),this.dec=Math.pow(10,this.decimals),this.startVal=Number(this.numberNow),this.endVal=Number(o>0?o:0),this.countDown=this.startVal>this.endVal,this.frameVal=this.startVal,cancelAnimationFrame(this.rAF),this.rAF=requestAnimationFrame(this.changeNumber),this.numberNow=o)},e.prototype.changeNumber=function(){this.frameVal=this.countDown?this.startVal-(this.startVal-this.endVal)*(this.progress/this.duration):this.startVal+(this.endVal-this.startVal)*(this.progress/this.duration),this.frameVal=this.countDown?this.frameVal<this.endVal?this.endVal:this.frameVal:this.frameVal>this.endVal?this.endVal:this.frameVal,this.frameVal=Math.round(this.frameVal*this.dec)/this.dec,this.setState({number:this.frameVal}),this.progress++,this.progress<=this.duration&&(this.rAF=requestAnimationFrame(this.changeNumber))},e.prototype.getContainer=function(t){t&&(this.dom=t,this.setWidth(),this._initResizeSensor())},e.prototype.setWidth=function(){if(this.dom){var t=this.dom.parentNode;if(t){var e=Number(g.getComputedStyle(t,"width").replace("px","")),a=Number(g.getComputedStyle(t,"height").replace("px",""));this.dom.style.width=Math.min(e,a)+"px"}}},e.prototype.render=function(){var t,e=this.props,a=e.chart.config,r=e.theme,s=e.chart,i=e.hub,n=this.auth(this.props);if(n!==!0)return n;var d=a.barMode,l=a.openCustomColor,c=a.barWidth,h=a.customTotal,u=a.total,m=a.showReal,p=(a.turnPercentage,a.fontFamily),g=a.fontSize,f=a.fontWeight,b=a.color,x=a.bacgroundColor,v=a.barColor,C=0,N=i.data.data;null!=N&&"object"==typeof N&&(C=N.accuracy||0);var y=C||a.round,w=[],V="";r.config&&(w=(null===(t=r.config.chartTheme)||void 0===t?void 0:t.color)||[],V=r.config.titleColor||w[0]),V=l&&b?b:V;var S=l&&x?x:s.isDashChart?"rgba(255, 255, 255, 0.1)":"rgba(204, 204, 204, 0.2)",W=this.state.number,z=W/(h?u>0?u:1:100)*100,_=z.toFixed(10>y&&y>0?y:0)+"%",j=Math.min(z,100)+"%";if("horizontal"===d){var E={height:c+"px",borderRadius:c+"px",background:S},R=(z>0?Math.max(z,100):1)/100,M=w[0]+" "+30/R+"%, "+w[1]+" "+100/R+"%";if(a.openCustomColor&&a.customColors&&a.customColors.length){var F=[],k=0;if(1===a.customColors.length){var D=a.customColors[0].background;F=[D,D]}else for(var A=0,B=a.customColors;A<B.length;A++){var T=B[A];if(k>=100)break;k+=T.ratio,F.push(T.background+" "+k/R+"%")}M=F.join(",")}var P={width:j,borderRadius:c+"px",background:"linear-gradient(to right, "+M+")"},L={fontFamily:p,fontSize:g,fontWeight:f,color:V,top:1.2*-g-.2*c+"px",left:"calc("+j+" - "+c/2+"px)",marginLeft:"-50%"},q={width:.6*c+"px",height:.6*c+"px",borderRadius:.6*c+"px",margin:.2*c+"px",background:V},U={top:c,left:"calc("+j+" - "+c/2+"px)",marginLeft:"-50%",fontSize:.6*g+"px",color:V};return o.createElement("div",{className:"progress-bar-warpper"},o.createElement("div",{className:"progress-bar",style:E},o.createElement("div",{className:"progress-bar-bar",style:P},o.createElement("div",{className:"progress-bar-bar-light",style:q})),o.createElement("div",{className:"progress-bar-tip",style:L},m?W.toFixed(y):_),o.createElement("div",{className:"progress-bar-triangle",style:U},o.createElement("i",{className:"fa fa-caret-up","aria-hidden":"true"}))))}if("round"===d){var I=0,O=0,Y=Math.min(z,100);Y>50?(O=45,I=(Y-50)/50*180-135):(I=-136,O=Y/50*180-135);var G=l&&v?v:w[0],H={transform:"rotate("+I+"deg)",borderBottom:c+"px solid "+G,borderLeft:c+"px solid "+G,borderTop:c+"px solid "+S,borderRight:c+"px solid "+S},J={transform:"rotate("+O+"deg)",borderTop:c+"px solid "+G,borderRight:c+"px solid "+G,borderBottom:c+"px solid "+S,borderLeft:c+"px solid "+S},L={fontFamily:p,fontSize:g,fontWeight:f,color:V};return o.createElement("div",{className:"progress-bar-warpper",style:{margin:"0 auto"},ref:this.getContainer},o.createElement("div",{className:"progress-bar-round"},o.createElement("div",{className:"progress-bar-round-tip",style:L},m?W.toFixed(y):_),o.createElement("div",{className:"progress-bar-round-wrapper right"},o.createElement("div",{className:"circle right",style:J})),o.createElement("div",{className:"progress-bar-round-wrapper left"},o.createElement("div",{className:"circle left",style:H}))))}return null};var r;return e.displayName="ProgressBar",e=a.__decorate([x.default,n.default,d.default,l.default,m.observer,s.decorate(c.default),a.__metadata("design:paramtypes",["function"==typeof(r="undefined"!=typeof i.IChartComponentProps&&i.IChartComponentProps)?r:Object])],e)}(o.Component);e.default=v;var C=function(t){var e=t.dataConfig.dataModel.value,a=void 0===e?[]:e;return a.length?!0:!1},N=function(t){return t="object"==typeof t&&null!=t?t.data:t,0===t||t?h.isNumberic(t)?!0:r.default("数据不是数字类型"):r.default("无数据")},y=function(t){return[[t.data]]},w=function(t,e){var a=y(t);f.exportExcelByRows(a,""+(e.dynamicName||e.name||"export"))},V=function(t,e){var a=y(t);b.exportCsvByRows(a,(e.dynamicName||e.name||"export")+".csv")},S=function(t){return y(t)};i.register({kind:"target",type:"progress-bar",name:r.default("水平进度条"),docName:r.default("进度条"),iconClassName:"chart-progress-bar",enableTemplate:!0,dontNeedLoading:!0,variants:[{name:r.default("渐变进度条"),iconClassName:"chart-progress-g",initialState:{config:{openCustomColor:!0,customColors:[{id:"jps9h3gq7ndk",background:"#18dc2a",ratio:15},{id:"jps9haj320agv",background:"#23c4c4",ratio:15},{id:"jps9ixg055n3t",background:"#215fba",ratio:25},{id:"jps9j34d2ra3",background:"#e3f420",ratio:25},{id:"jps9jbne3t53s",background:"#e12c1e",ratio:20}],color:"rgba(44, 151, 93, 1)"}}},{name:r.default("环形进度条"),iconClassName:"chart-progress-round",initialState:{height:300,width:4,config:{barMode:"round",barWidth:20,fontSize:44}},initialDashboardState:{height:300,width:300}}],initialState:{dataType:"api",dataApiUrl:p.chartDemoUrl,height:100,width:4,config:{barMode:"horizontal",fontFamily:"Microsoft Yahei",fontSize:20,customTotal:!1,total:100,showReal:!1,turnPercentage:!1,round:0,fontWeight:"bold",barWidth:10,openCustomColor:!1}},initialDashboardState:{width:500,config:{fontSize:24}},component:v,needDashboardAutoFresh:!0,advancedCtrl:p.advancedCtrl,dataBindCtrl:p.dataBindCtrl,basicCtrl:p.basicCtrl,exportCSV:V,exportExcel:w,exportRows:S,validate:N,canBeDrillChild:!0,drillChildName:r.default("进度条"),dataModelPanelShow:[["dataType","dataModel"]],loadDataWhenDataModelConfigChange:C,chartEigens:p.chartEigens})});
;sugar.define("sugar:widgets/charts/liquid-fill/liquid-fill-ctrl.tsx",function(a,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.advancedCtrl=e.dataBindCtrl=e.chartEigens=e.chartDemoUrl=void 0;var l=a("sugar:node_modules/tslib/tslib.js"),t=a("sugar:utils/i18n.ts"),d=a("sugar:widgets/ctrl-panel/data-bind-ctrl/index.tsx"),n=a("sugar:widgets/amis-inline-switch.tsx"),i=a("sugar:widgets/data-model/data-model-field-holder/data-model-field-holder.tsx"),o=[{label:t.default("取累加值"),value:"sum"},{label:t.default("取均值"),value:"avg"},{label:t.default("取首行"),value:"first"},{label:t.default("取末行"),value:"end"}],r="/openapi/demo/chart?type=liquidFill";e.chartDemoUrl="$CUR_HOST/openapi/demo/chart?type=liquidFill",e.chartEigens=[{field:[{name:"value",type:"m",minCount:1,maxCount:1}],unit:["%"]}],e.dataBindCtrl=function(a){var e=d.getDebugAndRefreshBtn({loadData:a.chart.loadData,loadDebugData:a.chart.loadDebugData,dataType:a.chart.dataType,refreshText:t.default("刷新图表")}),u=d.getDataBindCommon({frontendId:a.chart.frontendId,dataTypeOptions:["dataModel","api","sql","json"],api:{demoUrl:r},loadData:a.chart.loadData,loadDebugData:a.chart.loadDebugData,curUrl:a.chart.dataApiUrl}),s=a.chart.dataModelHash||"",c=a.sqlModelStore.detailMap.mapByHash.get(s),m=d.generateSQLFieldList(c),f=l.__spreadArrays([{type:"select",name:"dataConfig.value",hiddenOn:"data.dataType != 'sql'",label:t.default("取值字段"),placeholder:t.default("请选择"),options:m},{type:"select",name:"dataConfig.colModeMultiRows",hiddenOn:"data.dataType != 'sql'",label:t.default("如果有多行数据的处理方式"),options:o},i.getDataModelFieldHolder({name:"value",label:t.default("取值字段"),config:{dataModelHash:s,holderId:a.chart.frontendId+"-value",maxCount:1,onlyMeasure:!0}}),d.commonFilterForDataModel(s),d.commonBindUrlParamForDataModel(s),n.amisInlineSwitch("dataConfig.turnPercentage",t.default("小数转百分比"),"data.dataType != 'dataModel'")],i.getChartConditionsHolder(s,a.chart));return u.concat(f,e)},e.advancedCtrl=[n.amisInlineSwitch("config.waveAnimation",t.default("波浪动画")),n.amisInlineSwitch("config.outline",t.default("显示边框")),{type:"number",label:t.default("最多波浪层数"),name:"config.maxWaveNum",step:1,min:1,max:10},{label:t.default("图表形状"),type:"select",name:"config.shape",options:[{label:"circle",value:"circle"},{label:"rect",value:"rect"},{label:"roundRect",value:"roundRect"},{label:"triangle",value:"triangle"},{label:"diamond",value:"diamond"},{label:"container",value:"container"},{label:"pin",value:"pin"},{label:"arrow",value:"arrow"}]},{type:"number",label:t.default("数字标签字号"),name:"config.fontSize",step:1,min:5,max:100},{type:"number",label:t.default("小数位数"),name:"config.round",min:0,step:1,max:5}]});
;sugar.define("sugar:widgets/charts/liquid-fill/liquid-fill.tsx",function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=t("sugar:node_modules/tslib/tslib.js"),o=t("sugar:utils/i18n.ts"),r=t("sugar:node_modules/react/index.js"),i=t("sugar:widgets/charts/chart-manager.tsx"),s=t("sugar:widgets/charts/liquid-fill/liquid-fill-ctrl.tsx"),n=t("sugar:widgets/charts/_hoc/echarts.tsx"),l=t("sugar:node_modules/react-mixin/index.js"),u=t("sugar:widgets/charts/_mixin/echarts.tsx"),d=t("sugar:widgets/charts/_hoc/drill-down/drill-down.tsx"),c=t("sugar:widgets/charts/_hoc/debug/debug.tsx"),m=t("sugar:widgets/charts/_hoc/toolbar/toolbar.tsx"),g=t("sugar:widgets/charts/_hoc/chart-zoom/index.tsx"),h=t("sugar:utils/common-helper.ts"),f=t("sugar:utils/animation.ts"),p=t("sugar:utils/export-file/export-excel.ts"),x=t("sugar:utils/export-file/export-csv.ts"),v=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a.__extends(e,t),e.prototype.getDrillDownParam=function(t){return t.data},e.prototype.getDependenceParam=function(t){return{item:this.getDrillDownParam(t),state:{seriesIndex:t.seriesIndex,dataIndex:t.dataIndex}}},e.prototype.refresh=function(t){var e=t.chartData,a=t.chartConfig,o=(t.chart,t.hub,0);"object"==typeof e&&null!=e&&(o=e.accuracy||0,e=e.data);for(var r=[],i=+e/100,s=a.maxWaveNum>0&&a.maxWaveNum<11?a.maxWaveNum:4;i>0&&s>0;)r.push(i),i-=.1,s-=1;0>=i&&r.push(i);var n={series:[{type:"liquidFill",data:r,label:{fontSize:a.fontSize||20,formatter:function(){var t=Math.max(0,o||a.round||0);return(+e).toFixed(t)+"%"}},outline:{show:a.outline},shape:a.shape||"circle",backgroundStyle:{}}]};a.openCustomColor&&(n.series[0].label.color=a.textColor||"#333",n.series[0].backgroundStyle.color=a.lineColor,a.customColors&&a.customColors.length&&(n.series[0].color=a.customColors.map(function(t){return t.color}))),a.waveAnimation||(n.series[0].waveAnimation=!1,n.series[0].animationDuration=0,n.series[0].animationDurationUpdate=0),"triangle"===a.shape?n.series[0].label.position=["50%","60%"]:"pin"===a.shape&&(n.series[0].label.position=["50%","45%"]),f.setAnimationOption(n,a),this.chart.setOption(n,!0)},e.displayName="LiquidFill",e=a.__decorate([d.default,c.default,m.default,g.default,n.default,l.decorate(u.default)],e)}(r.Component);e.default=v;var C=function(t){return t="object"==typeof t&&null!=t?t.data:t,0===t||t?h.isNumberic(t)?!0:o.default("数据不是数字类型"):o.default("无数据")},w=function(t){var e=t.dataConfig.dataModel.value,a=void 0===e?[]:e;return a.length?!0:!1},b=function(t){return[[t.data]]},y=function(t,e){var a=b(t);p.exportExcelByRows(a,""+(e.dynamicName||e.name||"export"))},_=function(t,e){var a=b(t);x.exportCsvByRows(a,(e.dynamicName||e.name||"export")+".csv")},D=function(t){return b(t)};i.register({kind:"target",type:"liquid-fill",name:o.default("水球图"),iconClassName:"chart-liquid-fill",enableTemplate:!0,commonCustomColor:!0,commonCustomColorTitle:["",o.default("背景颜色"),o.default("可增加多种配色，每种对应一层波浪")],dontNeedLoading:!0,initialState:{dataType:"api",dataApiUrl:s.chartDemoUrl,config:{maxWaveNum:4,fontSize:22,waveAnimation:!0,outline:!0,shape:"circle",round:0},dataConfig:{colModeMultiRows:"sum"}},component:v,dataBindCtrl:s.dataBindCtrl,advancedCtrl:s.advancedCtrl,exportCSV:_,exportExcel:y,exportRows:D,needDashboardAutoFresh:!0,validate:C,canBeDrillChild:!0,dataModelPanelShow:[["dataType","dataModel"]],loadDataWhenDataModelConfigChange:w,chartEigens:s.chartEigens})});
;sugar.define("sugar:widgets/charts/_hoc/sub-charts.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=e("sugar:node_modules/tslib/tslib.js"),n=e("sugar:node_modules/react/index.js"),r=e("sugar:stores/index.ts"),a=e("sugar:node_modules/react-mixin/index.js"),i=e("sugar:widgets/charts/_mixin/common.tsx");t.default=function(e){var t;return r.observer(a.decorate(i.default)((t=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return s.__extends(r,t),r.prototype.render=function(){var t=this.props,r=t.hub,a=t.chart,i=r.data,o={};return i.other.forEach(function(e,t){o[t]=s.__assign({},e)}),n.createElement(e,s.__assign({},this.props,{scaleX:this.props.scaleX,scaleY:this.props.scaleY,chartOtherData:o,chartConfig:a.config,drillDownOpen:a.drillDownOpen||a.config.hierarchyDrillDownOpen,dependenceState:r.dependenceData.dependenceState}))},r}(n.Component),t.displayName="SubChartsHOC",t)))}});
;sugar.define("sugar:widgets/geo-json-binder/geo-json-binder.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=e("sugar:node_modules/tslib/tslib.js"),n=e("sugar:utils/i18n.ts"),o=e("sugar:node_modules/react/index.js"),s=e("sugar:node_modules/mobx/lib/mobx.js"),l=e("sugar:stores/index.ts"),r=e("sugar:node_modules/amis/lib/index.js"),i=e("sugar:node_modules/lodash/get.js"),c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.cachefilename="",t.upload=function(){var e=t.props,a=e.geoJSONStore,o=e.value,s=i(t,"fileInput.files[0]");if(!s||!t.cachefilename)return r.toast.warning(n.default("上传文件无变化，不需要更新!"));var l=new FormData;l.append("file",s),a.upload({formData:l,hash:o.geoJSONHash||"create"}).then(function(e){if(e.res&&"done"===e.state){var a=e.res.data;t.props.onChange({geoJSONHash:a.hash,t:o.t+1}),r.toast.success(n.default("geoJSON上传成功"))}})},t.getFileInput=function(e){t.fileInput=e.target,t.cachefilename=i(e,"target.files[0].name")},t.deleteFile=function(){var e=t.props,a=e.geoJSONStore,n=e.value.geoJSONHash,o=e.value,s=a.detailMap.mapByHash.get(n);t.fileInput=null,t.cachefilename="",(s||{}).content&&a.delete(n).then(function(e){if(e.res&&"done"===e.state){var a=e.res.data;t.props.onChange({geoJSONHash:a.hash,t:o.t+1})}})},t}return a.__extends(t,e),t.prototype.componentDidMount=function(){var e,t=this.props.geoJSONStore,a=null===(e=this.props.value)||void 0===e?void 0:e.geoJSONHash;a&&"create"!==a&&!t.detailMap.mapByHash.get(a)&&setTimeout(function(){return t.detailMap.loadDetail(a)},0)},t.prototype.componentWillReceiveProps=function(e){if(this.props.chartFrontendId!==e.chartFrontendId){this.cachefilename="";var t=e.value.geoJSONHash,a=e.geoJSONStore;a.detailMap.loadDetail(t)}},t.prototype.render=function(){var e,t=this.props,a=t.geoJSONStore,s=t.url,l=null===(e=this.props.value)||void 0===e?void 0:e.geoJSONHash,i=(a.detailMap.mapByHash.get(l)||{}).filename;return i=this.cachefilename||i,o.createElement("div",{className:"geo-json-binder__container"},i?[o.createElement("div",{className:"geo-json-binder--file",key:"fileBox"},o.createElement("i",{className:"fa fa-file fa-fw m-r-xs"}),o.createElement("label",null,i),o.createElement("button",{className:"text-danger pull-right geo-json-binder--delete",onClick:this.deleteFile},o.createElement("i",{className:"fa fa-times"}))),o.createElement(r.Button,{level:"primary",onClick:this.upload,key:"sendBtn"},n.default("执行geoJSON")),o.createElement("span",{className:"text-info form-item__tip upload-file",key:"document"},o.createElement("a",{className:"doc-link",href:"//sugar-files.cdn.bcebos.com/dongbei.json",target:"_blank"},n.default("示例下载")),o.createElement("a",{className:"doc-link",href:s||"/docs/Chart-map-geojson",target:"_blank"},n.default("文档说明")))]:o.createElement("div",{className:"form-group--relative"},o.createElement("label",{className:"btn m-r-xs btn-sm btn-info"},o.createElement("input",{type:"file",name:"file",className:"invisible",onChange:this.getFileInput,accept:"application/json"}),n.default("请上传文件")),o.createElement("span",{className:"text-info form-item__tip"},o.createElement("a",{className:"doc-link",href:"//sugar-files.cdn.bcebos.com/dongbei.json",target:"_blank"},n.default("示例下载")),o.createElement("a",{className:"doc-link",href:s||"/docs/Chart-map-geojson",target:"_blank"},n.default("文档说明")))))},a.__decorate([s.observable,a.__metadata("design:type",String)],t.prototype,"cachefilename",void 0),t=a.__decorate([l.inject(function(e){return{geoJSONStore:e.geoJSON}}),l.observer],t)}(o.Component);t.default=c});
;sugar.define("sugar:widgets/charts/map/map-ctrl.tsx",function(e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.advancedCtrl=a.dataBindCtrl=a.scatterImage=a.tooltipBindCols=a.chartEigens=a.chartDemoUrl=a.basicCtrl=a.colorRangeCols=a.customColorsCols=void 0;var t=e("sugar:node_modules/tslib/tslib.js"),l=e("sugar:utils/i18n.ts"),n=e("sugar:node_modules/react/index.js"),o=e("sugar:widgets/ctrl-panel/data-bind-ctrl/index.tsx"),i=e("sugar:widgets/object-array-editor/object-array-editor.tsx"),d=e("sugar:widgets/amis-inline-switch.tsx"),c=e("sugar:widgets/geo-json-binder/geo-json-binder.tsx"),p=e("sugar:widgets/data-model/data-model-field-holder/data-model-field-holder.tsx"),r=e("sugar:widgets/charts/map/special-district.ts"),f=e("sugar:widgets/charts/bar-pic/symbols.tsx");a.customColorsCols=[{type:"color",name:l.default("颜色"),key:"color",defaultValue:"#23b7e5"}],a.colorRangeCols=[{type:"text",key:"begin",name:l.default("大于"),placeholder:l.default("不确定可不填"),tdStyle:{minWidth:70}},{type:"text",key:"end",name:l.default("小于等于"),placeholder:l.default("不确定可不填"),tdStyle:{minWidth:70}},{type:"color",name:l.default("颜色"),key:"color",defaultValue:"#23b7e5"}];var s=function(e){return[{type:"divider"},{type:"fieldset",collapsed:!1,title:l.default("自定义配色"),collapsable:!0,headingClassName:"fieldset-title",controls:[d.amisInlineSwitch("config.openCustomColor",l.default("自定义颜色")),{type:"radios",name:"config.customColorType",hiddenOn:"!data.config.openCustomColor",label:"",inline:!1,options:[{label:l.default("跟随页面主题配色"),value:"report"},{label:l.default("自定义"),value:"custom"}]},{name:"config.customColors",hiddenOn:"!data.config.openCustomColor || data.config.customColorType != 'custom'",children:function(o){var d=o.onChange,c=o.value;return n.createElement(i.default,t.__assign({},{onChange:d,value:c},{chartFrontendId:e.chart.frontendId,containerClassName:"form-group form-item",label:l.default("可增加多个配色项，依次映射数值从小到大的颜色"),addTipText:l.default("新增配色项"),cols:a.customColorsCols}))}},{type:"color",name:"config.borderColor",label:l.default("行政区边界颜色"),hiddenOn:"!data.config.openCustomColor"},{type:"color",name:"config.textColor",label:l.default("文字颜色"),hiddenOn:"!data.config.openCustomColor"},{type:"color",name:"config.mapColor",label:l.default("区域默认背景色"),hiddenOn:"!data.config.openCustomColor"},{type:"color",name:"config.mapEmphasisColor",label:l.default("区域高亮背景色"),hiddenOn:"!data.config.openCustomColor"},{type:"color",name:"config.mapEmphasisLabelColor",label:l.default("区域高亮文字颜色"),hiddenOn:"!data.config.openCustomColor"}]}]};a.basicCtrl=function(e){return s(e)};var m="/openapi/demo/chart?type=map";a.chartDemoUrl="$CUR_HOST/openapi/demo/chart?type=map",a.chartEigens=[{field:[{name:"name",type:"d",subType:"geo",minCount:1,maxCount:1},{name:"value",type:"m",minCount:1,maxCount:1},{name:"tooltip",type:"a",minCount:0,maxCount:5}],configSp:{"config.mapType":"area","dataConfig.coordType":"auto","config.mapScope":"autoFit"}},{field:[{name:"lng",type:"d",subType:"lng",minCount:1,maxCount:1},{name:"lat",type:"d",subType:"lat",minCount:1,maxCount:1},{name:"value",type:"m",minCount:1,maxCount:1},{name:"name",type:"d",minCount:1,maxCount:1},{name:"tooltip",type:"a",minCount:0,maxCount:5}],configSp:{"config.mapType":"scatter","dataConfig.coordType":"bind"},variantIndex:0},{field:[{name:"name",type:"d",subType:"geo",minCount:1,maxCount:1},{name:"value",type:"m",minCount:1,maxCount:1},{name:"tooltip",type:"a",minCount:0,maxCount:5}],configSp:{"config.mapType":"scatter","dataConfig.coordType":"auto","config.mapScope":"autoFit"},variantIndex:0},{field:[{name:"name",type:"d",subType:"geo",minCount:1,maxCount:1},{name:"value",type:"m",minCount:1,maxCount:1},{name:"tooltip",type:"a",minCount:0,maxCount:5}],configSp:{"config.mapType":"cityHeatmap","dataConfig.coordType":"auto","config.mapScope":"autoFit"},variantIndex:2}],a.tooltipBindCols=function(e){return[{type:"select",list:e,key:"frontendId",name:l.default("绑定字段"),tdStyle:{minWidth:150}},{type:"text",key:"unit",name:l.default("数据单位"),tdStyle:{minWidth:120}}]},a.scatterImage=function(e,a,o){var d,c,p;void 0===o&&(o="");var r=!1,f="";if(o?(r=e.chart.config.subChartConfig[o].config.autoSymbolType,f="config.subChartConfig."+o+"."):r=e.chart.config.autoSymbolType,r){var s=null,m=null;o?(s=null===(c=null===(d=e.other.get(o))||void 0===d?void 0:d.data)||void 0===c?void 0:c.mapData,m=e.chart.config.subChartConfig[o].config):(s=null===(p=null===e||void 0===e?void 0:e.data)||void 0===p?void 0:p.mapData,m=e.chart.config);var u=l.default("默认形状"),g=[{label:u,value:u}],y=[];if(s&&s.length){var h=Array.from(new Set(s.map(function(e){return e.type}).filter(function(e){return void 0!==e})));h.length&&(g=g.concat(h.map(function(e){return{label:""===e?'""':e,value:e}})))}var b=m.imgUrls,v=m.imgInputs;b&&y.push.apply(y,b.map(function(e,a){return{label:l.default("本地图片「"+(a+1)+"」"),value:e}})),v&&y.push.apply(y,v.map(function(e,a){return{label:l.default("外链图片「"+(a+1)+"」"),value:e}}));var C=[{type:"select",list:g,key:"type",name:l.default("系列"),tdStyle:{minWidth:130}},{type:"select",list:a,key:"shape",name:l.default("形状"),tdStyle:{minWidth:130}},{type:"select",list:y,key:"imgUrl",name:l.default("图片"),tdStyle:{minWidth:130}}];return[{type:"fieldset",title:l.default("本地图片上传"),collapsable:!0,headingClassName:"fieldset-title",controls:[{type:"image",name:f+"config.imgUrls",multiple:!0,joinValues:!1,extractValue:!0,allowInput:!0,maxSize:10485760,reciever:"/api/image/upload"}]},{type:"fieldset",title:l.default("外链图片上传"),collapsable:!0,headingClassName:"fieldset-title",controls:[{type:"combo",name:f+"config.imgInputs",multiple:!0,joinValues:!1,extractValue:!0,flat:!0,controls:[{type:"url",name:f+"config.imgInputs",pipeIn:function(e){return e.startsWith("data:image")&&(e=""),e}}]},{type:"image",name:f+"config.imgInputs",multiple:!0,allowInput:!1,joinValues:!1,extractValue:!0,maxSize:10485760,disabled:!0,className:"img-input",pipeIn:function(e){return e&&e.map&&(e=e.map(function(e){return e.startsWith("data:image")?"":e})),e}}]},{name:f+"config.symbols",children:function(a){var o=a.onChange,d=a.value;return n.createElement(i.default,t.__assign({},{onChange:o,value:d},{chartFrontendId:e.chart.frontendId,containerClassName:"form-group form-item",label:l.default("形状配置"),addTipText:l.default("新增"),cols:C}))}},{type:"tpl",label:"",tpl:'<div class="help-block">\n        '+l.default("需要在数据中设置散点系列字段，才可以选择对应系列")+"\n        <br>"+l.default("设置为图片时气泡颜色、描边颜色、描边宽度等会失效")+"</div>"}]}return[{type:"select",name:f+"config.symbolType",label:l.default("散点形状"),placeholder:l.default("请选择"),clearable:!0,options:a}]},a.dataBindCtrl=function(e){var d=o.getDebugAndRefreshBtn({loadData:e.chart.loadData,loadDebugData:e.chart.loadDebugData,dataType:e.chart.dataType,refreshText:l.default("刷新图表")}),c=o.getDataBindCommon({frontendId:e.chart.frontendId,dataTypeOptions:["dataModel","api","sql","json"],api:{demoUrl:m},loadData:e.chart.loadData,loadDebugData:e.chart.loadDebugData,curUrl:e.chart.dataApiUrl}),r=e.chart.dataModelHash||"",f=e.sqlModelStore.detailMap.mapByHash.get(r),s=o.generateSQLFieldList(f),u=t.__spreadArrays([p.getDataModelFieldHolder({name:"name",label:l.default("地点的名称字段"),config:{dataModelHash:r,holderId:e.chart.frontendId+"-name",maxCount:1,onlyDimension:!0}}),p.getDataModelFieldHolder({name:"value",label:l.default("city"!=e.chart.config.mapType&&"scatter"!=e.chart.config.mapType?"取值字段(颜色深浅)":"取值字段(颜色深浅，选填)"),config:{dataModelHash:r,holderId:e.chart.frontendId+"-value",maxCount:1,onlyMeasure:!0}}),p.getDataModelFieldHolder({name:"size",label:l.default("散点大小(选填)"),hiddenOn:"(config.mapType != 'city' && config.mapType != 'scatter') || data.dataType != \"dataModel\"",config:{dataModelHash:r,holderId:e.chart.frontendId+"-size",maxCount:1,onlyMeasure:!0}}),p.getDataModelFieldHolder({name:"type",label:l.default("散点系列(选填)"),hiddenOn:"(config.mapType != 'city' && config.mapType != 'scatter') || data.dataType != \"dataModel\"",config:{dataModelHash:r,holderId:e.chart.frontendId+"-type",maxCount:1,onlyDimension:!0,canNotNoEnumerable:!0}}),{type:"radios",name:"dataConfig.coordType",label:l.default("地点的经纬度计算方式"),inline:!1,hiddenOn:'config.mapType == "area" || config.mapType == "province" || data.dataType != "dataModel"',options:[{label:l.default("根据名称自动查找（支持省市县名称）"),value:"auto"},{label:l.default("提供经纬度字段"),value:"bind"}]},p.getDataModelFieldHolder({name:"lng",label:l.default("经度"),hiddenOn:'config.mapType == "area" || config.mapType == "province" || data.dataType != "dataModel" || dataConfig.coordType !== \'bind\'',config:{dataModelHash:r,holderId:e.chart.frontendId+"-longitude",maxCount:1,onlyDimension:!0}}),p.getDataModelFieldHolder({name:"lat",label:l.default("纬度"),hiddenOn:'config.mapType == "area" || config.mapType == "province" || data.dataType != "dataModel" || dataConfig.coordType !== \'bind\'',config:{dataModelHash:r,holderId:e.chart.frontendId+"-latitude",maxCount:1,onlyDimension:!0}}),p.getDataModelFieldHolder({name:"tooltip",label:l.default("其他维度或度量"),hiddenOn:'config.mapType == "cityHeatmap" || data.dataType != "dataModel"',config:{dataModelHash:r,holderId:e.chart.frontendId+"-tooltip",maxCount:5},desc:l.default("其他的维度和度量将在鼠标悬停时的tooltip提示和气泡图的标签中展示")}),{type:"number",name:"config.symbolSize",hiddenOn:"dataType != 'dataModel' || (config.mapType != 'city' && config.mapType != 'scatter') || (dataConfig.dataModel && dataConfig.dataModel.size && dataConfig.dataModel.size.length)",label:l.default("散点固定大小(像素)"),step:1,min:1,value:13},{type:"number",name:"config.minSize",hiddenOn:"dataType != 'dataModel' || (config.mapType != 'city' && config.mapType != 'scatter') || !dataConfig.dataModel || !dataConfig.dataModel.size || !dataConfig.dataModel.size.length",label:l.default("最小散点(像素)"),step:1,min:1},{type:"number",name:"config.maxSize",hiddenOn:"dataType != 'dataModel' || (config.mapType != 'city' && config.mapType != 'scatter') || !dataConfig.dataModel || !dataConfig.dataModel.size || !dataConfig.dataModel.size.length",label:l.default("最大散点(像素)"),step:1,min:1},o.commonFilterForDataModel(r),o.commonBindUrlParamForDataModel(r)],p.getChartConditionsHolder(r,e.chart),[o.commonLimitForDataModel,{type:"select",name:"dataConfig.nameField",hiddenOn:"data.dataType != 'sql'",label:l.default("省、市、地点的名称字段"),placeholder:l.default("请选择"),options:s},{type:"select",name:"dataConfig.valueField",hiddenOn:"data.dataType != 'sql'",label:l.default("颜色映射取值字段"),placeholder:l.default("scatter"!==e.chart.config.mapType?"请选择":"可选填"),clearable:"scatter"===e.chart.config.mapType,options:s},{type:"select",name:"dataConfig.sizeValueField",hiddenOn:"data.dataType != 'sql' || (config.mapType != 'city' && config.mapType != 'scatter')",label:l.default("散点大小映射取值字段"),placeholder:l.default("可选填"),clearable:!0,options:s},{type:"number",name:"config.symbolSize",hiddenOn:"dataType != 'sql' || (config.mapType != 'city' && config.mapType != 'scatter') || dataConfig.sizeValueField",label:l.default("散点固定大小(像素)"),step:1,min:1,value:13},{type:"number",name:"config.minSize",hiddenOn:"dataType != 'sql' || (config.mapType != 'city' && config.mapType != 'scatter')|| !dataConfig.sizeValueField",label:l.default("最小散点(像素)"),step:1,min:1},{type:"number",name:"config.maxSize",hiddenOn:"dataType != 'sql' || (config.mapType != 'city' && config.mapType != 'scatter') || !dataConfig.sizeValueField",label:l.default("最大散点(像素)"),step:1,min:1},{type:"select",name:"dataConfig.typeField",hiddenOn:"data.dataType != 'sql' || (config.mapType != 'city' && config.mapType != 'scatter')",label:l.default("散点系列映射取值字段"),placeholder:l.default("可选填"),clearable:!0,options:s},{type:"radios",name:"dataConfig.coordType",label:l.default("省、市、地点的经纬度计算方式"),inline:!1,hiddenOn:'config.mapType == "area" || config.mapType == "province" || data.dataType != "sql"',options:[{label:l.default("根据省、市、地点名称自动在系统中查找"),value:"auto"},{label:l.default("提供经纬度字段"),value:"bind"}]},{type:"select",name:"dataConfig.lngField",hiddenOn:'config.mapType == "area" || config.mapType == "province" || data.dataType != "sql" || dataConfig.coordType != "bind"',label:l.default("经度字段"),placeholder:l.default("请选择"),clearable:!0,options:s},{type:"select",name:"dataConfig.latField",hiddenOn:'config.mapType == "area" || config.mapType == "province" || data.dataType != "sql" || dataConfig.coordType != "bind"',label:l.default("纬度字段"),placeholder:l.default("请选择"),clearable:!0,options:s},{name:"dataConfig.tooltipItems",hiddenOn:"data.dataType != 'sql'",children:function(o){var d=o.onChange,c=o.value;return n.createElement(i.default,t.__assign({},{onChange:d,value:c},{chartFrontendId:e.chart.frontendId,containerClassName:"form-group form-item",label:l.default("添加在Tooltip中显示的附加数据项"),addTipText:l.default("新增数据项"),cols:a.tooltipBindCols(s)}))}},{type:"select",name:"dataConfig._sugar_extras",hiddenOn:"data.dataType != 'sql'",label:l.default("下钻需要的附加字段，如存有URL的字段"),placeholder:l.default("请选择"),options:s,clearable:!0}]);return c.concat(u,d)};var u=[{label:l.default("区域色彩"),value:"area"},{label:l.default("气泡、散点地图"),value:"scatter"},{label:l.default("热力图"),value:"cityHeatmap"}];a.advancedCtrl=function(e){var o=e.chart.config,p=o.scatterSlideAll,m=o.scatterSlide,g=[{type:"fieldset",collapsed:!0,title:l.default("数据展示设置"),collapsable:!0,headingClassName:"fieldset-title",controls:[{type:"radios",name:"config.mapType",label:l.default("数据展示类型"),inline:!1,options:u},{type:"group",hiddenOn:"data.config.mapType != 'city' && data.config.mapType != 'scatter'",direction:"vertical",controls:[d.amisInlineSwitch("config.areaHoverEffect",l.default("底图鼠标悬停效果")),{type:"number",label:l.default("气泡大小"),name:"config.symbolSize",step:1,min:1,value:12},{type:"group",controls:[{type:"color",name:"config.scatterColor",label:l.default("气泡颜色")},{type:"color",name:"config.strokeColor",label:l.default("描边颜色")}]},{type:"group",controls:[{type:"number",label:l.default("描边宽度"),name:"config.strokeWidth",step:1,min:0,max:100},{type:"number",label:l.default("高亮描边宽度"),name:"config.lightStrokeWidth",step:1,min:0,max:100}]}]},d.amisInlineSwitch("config.showProvinceName",l.default("显示区域名称")),{type:"number",label:l.default("区域名称字号"),hiddenOn:"!config.showProvinceName",name:"config.provinceFontSize",step:1,min:8,max:100},d.amisInlineSwitch("config.roam",l.default("开启地图缩放")),d.amisInlineSwitch("config.blend",l.default("开启颜色叠加"),"data.config.mapType !== 'scatter' && data.config.mapType !== 'city'",!1,l.default("开启颜色叠加，请清空颜色取值字段")),{type:"group",direction:"vertical",hiddenOn:"data.config.mapType !== 'area' && data.config.mapType !== 'province'",controls:[d.amisInlineSwitch("config.showRank",l.default("鼠标悬停时Tooltip中展示排名")),d.amisInlineSwitch("config.tipPercent",l.default("鼠标悬停时Tooltip中展示百分比")),{type:"number",label:l.default("Tooltip字号"),name:"config.tooltipFontSize",step:1,min:8,max:100}]},{type:"group",hiddenOn:"config.mapType !== cityHeatmap",controls:[{type:"number",label:l.default("点大小"),name:"config.heatmapPointSize",step:1,min:1,max:100},{type:"number",label:l.default("点模糊大小"),name:"config.heatmapBlurSize",step:1,min:1,max:100}]}]},{type:"divider"},{type:"fieldset",collapsed:!0,title:l.default("轮播设置"),collapsable:!0,headingClassName:"fieldset-title",hiddenOn:"config.mapType === 'cityHeatmap'",controls:[{type:"group",hiddenOn:"data.config.mapType != 'city' && data.config.mapType != 'scatter'",direction:"vertical",controls:[d.amisInlineSwitch("config.scatterSlideAll",l.default("轮播所有气泡"),void 0,void 0,void 0,m),d.amisInlineSwitch("config.scatterSlide",l.default("轮播高亮气泡"),void 0,void 0,void 0,p),d.amisInlineSwitch("config.hideNoSlideScatter",l.default("隐藏未被轮播的气泡"),"!(config.scatterSlide || config.scatterSlideAll)"),{type:"number",name:"config.topCityNum",label:l.default("高亮展示的Top气泡个数"),step:1,min:0},{type:"number",name:"config.topSlideNum",hiddenOn:"!config.showInfoUseLabel || !(config.scatterSlide || config.scatterSlideAll)",label:l.default("每次轮播个数"),step:1,min:1,value:1,desc:l.default("每次轮播个数大于1会关闭轮播同步图表联动功能")},{type:"number",name:"config.slideInterval",hiddenOn:"!(config.scatterSlide || config.scatterSlideAll)",label:l.default("轮播间隔秒数"),step:1,min:1},d.amisInlineSwitch("config.openSlideDep",l.default("轮播同步图表联动（联动开启时生效）"),"(data.config.showInfoUseLabel && data.config.topSlideNum > 1) || !(config.scatterSlide || config.scatterSlideAll)")]},{type:"group",hiddenOn:"data.config.mapType != 'area' && data.config.mapType != 'province'",direction:"vertical",controls:[{type:"number",name:"config.topCoslCnt",hiddenOn:"data.config.mapType != 'province' && data.config.mapType != 'area'",label:l.default("轮播的Top区域个数"),step:1,min:0},{type:"number",name:"config.slideInterval",label:l.default("轮播间隔秒数"),step:1,min:1},d.amisInlineSwitch("config.openSlideDep",l.default("轮播同步图表联动（联动开启时生效）"))]}]},{type:"divider",hiddenOn:"data.config.mapType === 'cityHeatmap'"},{type:"fieldset",collapsed:!0,title:l.default("颜色映射设置"),collapsable:!0,headingClassName:"fieldset-title",controls:[{type:"radios",name:"config.vMapType",label:l.default("颜色映射方式"),inline:!1,options:[{label:l.default("颜色渐变"),value:"continuous"},{label:l.default("颜色分段"),value:"piecewise"}]},{type:"tpl",label:"",hiddenOn:'config.vMapType != "continuous"',tpl:'<div class="help-block">'+l.default("如果要自定义渐变的各种颜色，请在「基础」标签页中开启「自定义配色」")+"</div>"},{name:"config.vMapPieces",hiddenOn:'config.vMapType != "piecewise"',children:function(e){var o=e.onChange,d=e.value;return n.createElement(i.default,t.__assign({},{onChange:o,value:d},{containerClassName:"form-group form-item",label:l.default("请指定每段颜色的起始值和结束值"),addTipText:l.default("新增一段颜色映射"),cols:a.colorRangeCols}))}},{type:"divider"},d.amisInlineSwitch("config.hideVisualMap",l.default("隐藏图例")),d.amisInlineSwitch("config.colorReverse",l.default("颜色反转")),d.amisInlineSwitch("config.hideVMapText",l.default("隐藏图例上指标名称")),{type:"text",name:"config.unit",label:l.default("颜色映射数据单位"),placeholder:l.default("默认为空")},{type:"group",controls:[{type:"select",name:"config.vMapLeft",label:l.default("位置"),options:[{label:l.default("居左"),value:"left"},{label:l.default("居中"),value:"center"},{label:l.default("居右"),value:"right"}]},{type:"number",name:"config.vMapBottom",label:l.default("底边距"),step:5,min:0}]},{type:"group",controls:[{type:"select",name:"config.vMapOrient",label:l.default("样式"),options:[{label:l.default("竖直"),value:"vertical"},{label:l.default("水平"),value:"horizontal"}]},{type:"number",label:l.default("字号"),name:"config.legendFontSize",step:1,min:8,max:100}]},{type:"group",controls:[{type:"number",label:l.default("映射柱体高度"),name:"config.vMapHeight",value:80,step:1,min:20},{type:"number",label:l.default("映射柱体宽度"),name:"config.vMapWidth",value:10,step:1,min:1,max:100}]}]},{type:"divider",hiddenOn:"data.config.mapType == 'area' || data.config.mapType == 'province'"},{type:"fieldset",collapsed:!0,title:l.default("散点大小映射设置"),collapsable:!0,headingClassName:"fieldset-title",hiddenOn:"data.config.mapType != 'city' && data.config.mapType != 'scatter'",controls:[d.amisInlineSwitch("config.sHideVisualMap",l.default("隐藏图例")),{type:"group",controls:[{type:"number",label:l.default("气泡大小"),name:"config.symbolSize",step:1,min:1,value:12},{type:"text",name:"config.unit1",label:l.default("散点大小数据单位"),placeholder:l.default("默认为空")}]},{type:"group",controls:[{type:"number",label:l.default("最小值对应散点大小"),name:"config.minSize",step:1,min:1,max:100},{type:"number",label:l.default("最大值对应散点大小"),name:"config.maxSize",step:1,min:1,max:100}]},{type:"group",controls:[{type:"select",name:"config.sMapLeft",label:l.default("位置"),options:[{label:l.default("居左"),value:"left"},{label:l.default("居中"),value:"center"},{label:l.default("居右"),value:"right"}]},{type:"number",name:"config.sMapBottom",label:l.default("底边距"),step:5,min:0}]},{type:"group",controls:[{type:"select",name:"config.sMapOrient",label:l.default("样式"),options:[{label:l.default("竖直"),value:"vertical"},{label:l.default("水平"),value:"horizontal"}]},{type:"number",label:l.default("字号"),name:"config.slegendFontSize",step:1,min:8,max:100}]},{type:"group",controls:[{type:"number",label:l.default("映射柱体高度"),name:"config.sMapHeight",value:80,step:1,min:20},{type:"number",label:l.default("映射柱体宽度"),name:"config.sMapWidth",value:10,step:1,min:1,max:100}]},d.amisInlineSwitch("config.sHideVMapText",l.default("隐藏图例上指标名称"))]},{type:"divider",hiddenOn:"data.config.mapType != 'city' && data.config.mapType != 'scatter'"},{type:"fieldset",collapsed:!0,title:l.default("系列设置"),collapsable:!0,headingClassName:"fieldset-title",hiddenOn:"data.config.mapType != 'city' && data.config.mapType != 'scatter'",controls:t.__spreadArrays([d.amisInlineSwitch("config.autoSymbolType",l.default("自定义散点形状"))],a.scatterImage(e,f.symbolOps))},{type:"divider",hiddenOn:"data.config.mapType != 'city' && data.config.mapType != 'scatter'"},{type:"fieldset",collapsed:!0,title:l.default("散点标签和 Tooltip 设置"),collapsable:!0,headingClassName:"fieldset-title",hiddenOn:"data.config.mapType != 'city' && data.config.mapType != 'scatter'",controls:[d.amisInlineSwitch("config.showInfoUseLabel",l.default("使用标签展示数据内容")),{type:"group",direction:"vertical",hiddenOn:"config.showInfoUseLabel",controls:[d.amisInlineSwitch("config.showScatterName",l.default("显示气泡名称")),d.amisInlineSwitch("config.showRank",l.default("鼠标悬停时Tooltip中展示排名")),d.amisInlineSwitch("config.tipPercent",l.default("鼠标悬停时Tooltip中展示百分比")),{type:"number",label:l.default("Tooltip字号"),name:"config.tooltipFontSize",step:1,min:8,max:100}]},{type:"group",direction:"vertical",hiddenOn:"!config.showInfoUseLabel",controls:[d.amisInlineSwitch("config.showMMCityLabel",l.default("显示最值气泡标签")),{type:"group",hiddenOn:"config.showMMCityLabel",controls:[d.amisInlineSwitch("config.showTopCityLabel",l.default("显示高亮气泡标签")),d.amisInlineSwitch("config.showCityLabel",l.default("显示普通气泡标签"))]},{type:"number",name:"config.topCityNum",label:l.default("高亮展示的Top气泡个数"),step:1,min:0,desc:l.default("在轮播设置开启轮播高亮气泡后，常显的标签设置会失效")},{type:"radios",label:l.default("标签展示内容"),name:"config.labelContentType",inline:!1,options:[{label:l.default("简洁模式(仅展示气泡名称)"),value:"simple"},{label:l.default("正常模式(展示所有已配置的字段)"),value:"normal"},{label:l.default("高级模式(自定义要展示的内容)"),value:"auto"}]},{type:"group",direction:"vertical",hiddenOn:"config.labelContentType !== 'normal'",controls:[d.amisInlineSwitch("config.showRank",l.default("标签中展示排名")),d.amisInlineSwitch("config.tipPercent",l.default("标签中展示百分比"))]},{type:"textarea",name:"config.autoLabelContent",hiddenOn:"config.labelContentType !== 'auto'",label:l.default("自定义标签内容"),placeholder:l.default("{name}的GDP是{value}"),desc:'<a href="/docs/Chart-map#自定义散点标签内容"\n              class="text-sm text-info" target="_blank">'+l.default("如何自定义？")+"</a>"}]},{type:"group",direction:"vertical",visibleOn:"(config.showScatterName && !config.showInfoUseLabel) || config.showInfoUseLabel",controls:[{type:"group",controls:[{type:"color",label:l.default("字体颜色"),name:"config.scatterFontColor"},{type:"color",label:l.default("背景色"),name:"config.scatterFontBackGroundColor",format:"rgba"}]},{type:"group",controls:[{type:"color",label:l.default("背景边框色"),name:"config.scatterFontBorderColor",format:"rgba"},{type:"number",label:l.default("背景边框宽度"),name:"config.scatterFontBorderWidth"}]},{type:"group",controls:[{type:"number",label:l.default("标签字号"),name:"config.scatterFontSize",step:1,min:8,max:100},{type:"select",label:l.default("标签位置"),name:"config.scatterFontPos",options:[{label:l.default("右侧"),value:"right"},{label:l.default("左侧"),value:"left"},{label:l.default("上方"),value:"top"},{label:l.default("下方"),value:"bottom"},{label:l.default("内部"),value:"inside"}]}]}]}]},{type:"divider",hiddenOn:"data.config.mapType != 'city' && data.config.mapType != 'scatter'"},{type:"fieldset",collapsed:!0,title:l.default("地名映射设置"),collapsable:!0,headingClassName:"fieldset-title",hiddenOn:"config.mapType == 'area' || config.mapType == 'province'",controls:[{type:"select",name:"config.prefix",label:l.default("名称查找前缀（部分区县有重名，需要市名区分）"),clearable:!0,options:r.prefixCity,searchable:!0,resetValue:"",desc:l.default("当使用地名映射坐标时，由于部分区县出现同名情况，因此需要使用城市前缀来区分，如果发现坐标不正确，则需要设置前缀进行校正。")}]}];return e.isHierarchyDrillDown||g.unshift({type:"fieldset",collapsed:!0,title:l.default("地图区域设置"),collapsable:!0,headingClassName:"fieldset-title",controls:[{type:"radios",name:"config.mapScope",inline:!1,options:[{label:l.default("世界各国"),value:"world"},{label:l.default("中国全国"),value:"china"},{label:l.default("省份级别"),value:"province"},{label:l.default("城市级别"),value:"city"},{label:l.default("根据数据自适应"),value:"autoFit"},{label:l.default("自定义geoJSON上传"),value:"custom"}]},{type:"select",name:"config.mapProvince",hiddenOn:"data.config.mapScope != 'province'",label:l.default("省份"),placeholder:l.default("请选择省份"),source:"/openapi/geo/allProvince?withAuto=1",searchable:!0,isSearchable:!0},{type:"select",name:"config.mapCity",hiddenOn:"data.config.mapScope != 'city'",label:l.default("城市"),placeholder:l.default("请选择城市"),source:"/openapi/geo/allCity?withAuto=1",searchable:!0,isSearchable:!0},{type:"tpl",tpl:'<div class="m-b text--center"><a class="text-info" href="/docs/Chart-map-scope" target="_blank">'+l.default("地图区域动态变化的文档说明")+"</a></div>",visibleOn:"(data.config.mapScope == 'province' && (data.config.mapProvince == 'sugar_map_auto_scope' || data.config.mapProvince == 'sugar_map_url_param')) || (data.config.mapScope == 'city' && (data.config.mapCity == 'sugar_map_auto_scope' || data.config.mapCity == 'sugar_map_url_param'))"},{type:"select",name:"config.mdProvince",hiddenOn:"data.config.mapScope != 'province' || data.config.mapProvince != 'sugar_map_auto_scope'",label:l.default("联动时默认省份"),placeholder:l.default("请选择默认省份"),source:"/openapi/geo/allProvince",searchable:!0,isSearchable:!0},{type:"select",name:"config.mdProvince",hiddenOn:"data.config.mapScope != 'province' || data.config.mapProvince != 'sugar_map_url_param'",label:l.default("无URL参数时默认省份"),placeholder:l.default("请选择默认省份"),source:"/openapi/geo/allProvince",searchable:!0,isSearchable:!0},{type:"select",name:"config.mdCity",hiddenOn:"data.config.mapScope != 'city' || data.config.mapCity != 'sugar_map_auto_scope'",label:l.default("联动时默认城市"),placeholder:l.default("请选择默认城市"),source:"/openapi/geo/allCity",searchable:!0,isSearchable:!0},{type:"select",name:"config.mdCity",hiddenOn:"data.config.mapScope != 'city' || data.config.mapCity != 'sugar_map_url_param'",label:l.default("无URL参数时默认城市"),placeholder:l.default("请选择默认城市"),source:"/openapi/geo/allCity",searchable:!0,isSearchable:!0},{type:"text",name:"config.mapAutoScopeField",hiddenOn:"!(data.config.mapScope == 'province' && data.config.mapProvince == 'sugar_map_auto_scope') && !(data.config.mapScope == 'city' && data.config.mapCity == 'sugar_map_auto_scope')",label:l.default("下钻或联动参数中的依据字段"),placeholder:l.default("默认为name")},{type:"text",name:"config.mapAutoScopeField",hiddenOn:"!(data.config.mapScope == 'province' && data.config.mapProvince == 'sugar_map_url_param') && !(data.config.mapScope == 'city' && data.config.mapCity == 'sugar_map_url_param')",label:l.default("URL中参数名"),placeholder:l.default("默认为name")},{name:"config.geoJSON",children:function(a){var l=a.onChange,o=a.value;return n.createElement(c.default,t.__assign({},{onChange:l,value:o},{chartFrontendId:e.chart.frontendId,url:"/docs/Chart-map-geojson"}))},hiddenOn:"data.config.mapScope !== 'custom'"}]},{type:"divider"}),g.concat(s(e))}});
;sugar.define("sugar:widgets/charts/map-layer/area-color/area-color-ctrl.tsx",function(a,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.areaInitialState=e.areaAdvancedCtrl=e.colorMapCtrl=e.areaDataBindCtrl=e.areaChartDemoUrl=void 0;var t=a("sugar:node_modules/tslib/tslib.js"),o=a("sugar:utils/i18n.ts"),l=a("sugar:node_modules/react/index.js"),n=a("sugar:widgets/ctrl-panel/data-bind-ctrl/index.tsx"),i=a("sugar:widgets/object-array-editor/object-array-editor.tsx"),d=a("sugar:widgets/amis-inline-switch.tsx"),r=a("sugar:widgets/charts/map/map-ctrl.tsx"),s=a("sugar:widgets/geo-json-binder/geo-json-binder.tsx"),c=a("sugar:widgets/data-model/data-model-field-holder/data-model-field-holder.tsx"),p=a("sugar:widgets/charts/map/map-ctrl.tsx"),f="/openapi/demo/chart?type=map";e.areaChartDemoUrl="$CUR_HOST/openapi/demo/chart?type=map",e.areaDataBindCtrl=function(a){var e=a.activeSubChartKey;if(void 0===e)return[];var d="config.subChartConfig."+e,r=n.getDebugAndRefreshBtn({loadData:function(t){a.chart.loadOtherData(t,e)},loadDebugData:function(){a.chart.loadDebugOtherData(e)},dataType:a.chart.config.subChartConfig[e].dataType,field:{dataType:d+".dataType"},refreshText:o.default("刷新子组件")}),s=n.getDataBindCommon({frontendId:e,label:o.default("子组件数据绑定"),field:{dataType:d+".dataType",dataApiUrl:d+".dataApiUrl",staticData:d+".dataConfig.data",dataModelHash:d+".dataModelHash",dataJsonHash:d+".dataConfig.dataJsonHash",exemption:d+".dataConfig.exemption",cacheTTL:d+".dataConfig.cacheTTL",apiProOpen:d+".dataConfig.apiPro_open",apiProMethod:d+".dataConfig.apiPro_method",apiProGetAuto:d+".dataConfig.apiPro_getAuto",apiProHeaderList:d+".dataConfig.apiPro_headerList",apiProPostType:d+".dataConfig.apiPro_postType",apiProPostList:d+".dataConfig.apiPro_postList",apiProPostAuto:d+".dataConfig.apiPro_postAuto",apiProAdaptorOpen:d+".dataConfig.apiPro_adaptorOpen",apiProAdaptorHash:d+".dataConfig.apiPro_adaptorHash"},dataTypeOptions:["dataModel","api","sql","json"],api:{demoUrl:f},loadData:function(t){a.chart.loadOtherData(t,e)},loadDebugData:function(){a.chart.loadDebugOtherData(e)},curUrl:a.chart.config.subChartConfig[e].dataApiUrl}),u=a.chart.config.subChartConfig[e].dataModelHash||"",g=a.sqlModelStore.detailMap.mapByHash.get(u),m=n.generateSQLFieldList(g),h=[c.getDataModelFieldHolder({name:"name",namePrefix:d+".dataConfig.dataModel",hiddenOn:"data."+d+".dataType != 'dataModel'",label:o.default("地点的名称字段"),config:{dataModelHash:u,holderId:e+"-name",maxCount:1,onlyDimension:!0}}),c.getDataModelFieldHolder({name:"value",namePrefix:d+".dataConfig.dataModel",hiddenOn:"data."+d+".dataType != 'dataModel'",label:o.default("取值字段(颜色深浅)"),config:{dataModelHash:u,holderId:e+"-value",maxCount:1,onlyMeasure:!0}}),c.getDataModelFieldHolder({name:"tooltip",label:o.default("其他维度或度量"),namePrefix:d+".dataConfig.dataModel",hiddenOn:"data."+d+".dataType != 'dataModel'",config:{dataModelHash:u,holderId:e+"-tooltip",maxCount:5},desc:o.default("其他的维度和度量将在鼠标悬停时的tooltip提示中展示")}),n.commonFilterForDataModel(u,d+".dataConfig.dataModel.filters","data."+d+".dataType != 'dataModel'"),n.commonBindUrlParamForDataModel(u,d+".dataConfig.dataModel.filters","data."+d+".dataType != 'dataModel'"),n.getCommonLimitForDataModel(d,"data."+d+".dataType != 'dataModel'"),{type:"select",name:d+".dataConfig.nameField",hiddenOn:"data."+d+".dataType != 'sql'",label:o.default("省、市、地点的名称字段"),placeholder:o.default("请选择"),options:m},{type:"select",name:d+".dataConfig.valueField",hiddenOn:"data."+d+".dataType != 'sql'",label:o.default("颜色映射取值字段"),placeholder:o.default("请选择"),options:m},{name:d+".dataConfig.tooltipItems",hiddenOn:"data."+d+".dataType != 'sql'",children:function(e){var n=e.onChange,d=e.value;return l.createElement(i.default,t.__assign({},{onChange:n,value:d},{chartFrontendId:a.chart.frontendId,containerClassName:"form-group form-item",label:o.default("添加在Tooltip中显示的附加数据项"),addTipText:o.default("新增数据项"),cols:p.tooltipBindCols(m)}))}},{type:"select",name:d+".dataConfig._sugar_extras",hiddenOn:"data."+d+".dataType != 'sql'",label:o.default("下钻需要的附加字段，如存有URL的字段"),placeholder:o.default("请选择"),options:m,clearable:!0}],C=n.getAutoRefreshConfig({field:{needAutoRefresh:d+".dataConfig.needAutoRefresh",autoRefreshInterval:d+".dataConfig.autoRefreshInterval",dataType:d+".dataType",autoDestory:d+".autoDestory",showNullData:d+".showNullData",isDashChart:a.chart.isDashChart}});return s.concat(h,r,C)},e.colorMapCtrl=function(a,e){return[{type:"radios",name:a+".config.vMapType",label:o.default("颜色映射方式"),inline:!1,options:[{label:o.default("颜色渐变"),value:"continuous"},{label:o.default("颜色分段"),value:"piecewise"}],value:"continuous"},{type:"group",direction:"vertical",hiddenOn:"data."+a+".config.vMapType !== 'continuous'",controls:[{type:"radios",name:a+".config.customColorType",label:o.default("颜色渐变映射类型"),inline:!1,options:[{label:o.default("默认配色"),value:"default"},{label:o.default("跟随页面主题配色"),value:"report"},{label:o.default("自定义配色"),value:"custom"}]},{name:a+".config.customColors",hiddenOn:"data."+a+".config.customColorType != 'custom'",children:function(a){var n=a.onChange,d=a.value;return l.createElement(i.default,t.__assign({},{onChange:n,value:d},{chartFrontendId:e.chart.frontendId,containerClassName:"form-group form-item",label:o.default("可增加多个配色项，依次映射数值从小到大的颜色"),addTipText:o.default("新增配色项"),cols:r.customColorsCols}))}},d.amisInlineSwitch(a+".config.colorReverse",o.default("数值映射颜色反转"))]},{name:a+".config.vMapPieces",hiddenOn:"data."+a+".config.vMapType !== 'piecewise'",children:function(a){var e=a.onChange,n=a.value;return l.createElement(i.default,t.__assign({},{onChange:e,value:n},{containerClassName:"form-group form-item",label:o.default("请指定每段颜色的起始值和结束值"),addTipText:o.default("新增一段颜色映射"),cols:p.colorRangeCols}))}}]},e.areaAdvancedCtrl=function(a){var n=a.activeSubChartKey;if(void 0===n)return[];var i=a.chart.config.subChartConfig[n].config,r=i.transWGS84Coord,c=i.transCoord,p="config.subChartConfig."+n;return[{type:"fieldset",collapsed:!0,title:o.default("区域范围设置"),collapsable:!0,headingClassName:"fieldset-title",controls:[{type:"radios",name:p+".config.mapScope",inline:!1,options:[{label:o.default("中国全国"),value:"china"},{label:o.default("省份级别"),value:"province"},{label:o.default("城市级别"),value:"city"},{label:o.default("自定义geoJSON上传"),value:"custom"}]},{type:"select",name:p+".config.mapProvince",hiddenOn:"data."+p+".config && data."+p+".config.mapScope != 'province'",label:o.default("省份"),placeholder:o.default("请选择省份"),source:"/openapi/geo/allProvince",searchable:!0,isSearchable:!0},{type:"select",name:p+".config.mapCity",hiddenOn:"data."+p+".config && data."+p+".config.mapScope != 'city'",label:o.default("城市"),placeholder:o.default("请选择城市"),source:"/openapi/geo/allCity",searchable:!0,isSearchable:!0},{name:p+".config.geoJSON",children:function(e){var o=e.onChange,n=e.value;return l.createElement(s.default,t.__assign({},{onChange:o,value:n},{chartFrontendId:a.chart.frontendId,url:"/docs/Chart-map-geojson"}))},hiddenOn:"data."+p+".config && data."+p+".config.mapScope !== 'custom'"},d.amisInlineSwitch(p+".config.transCoord",o.default("将国测局坐标转换为百度坐标系"),p+".config && "+p+".config.mapScope !== 'custom'",!1,void 0,r),d.amisInlineSwitch(p+".config.transWGS84Coord",o.default("将WGS84坐标转换为百度坐标系"),p+".config && "+p+".config.mapScope !== 'custom'",!1,void 0,c)]},{type:"divider"},{type:"fieldset",collapsed:!0,title:o.default("区域样式设置"),collapsable:!0,headingClassName:"fieldset-title",controls:t.__spreadArrays(e.colorMapCtrl(p,a),[{type:"group",controls:[{type:"color",name:p+".config.highlightColor",label:o.default("区域高亮颜色"),format:"rgba"},{type:"color",name:p+".config.borderColor",label:o.default("区域边界颜色"),format:"rgba"}]},{type:"group",controls:[{type:"number",label:o.default("区域边界宽度"),name:p+".config.borderWidth",step:1,min:0,max:100},{type:"color",name:p+".config.noDataColor",label:o.default("无数据区域颜色"),format:"rgba"}]}])},{type:"divider"},{type:"fieldset",collapsed:!0,title:o.default("区域名称设置"),collapsable:!0,headingClassName:"fieldset-title",controls:[d.amisInlineSwitch(p+".config.showProvinceName",o.default("显示区域名称")),{type:"group",hiddenOn:"!data."+p+".config.showProvinceName",controls:[{type:"color",name:p+".config.textColor",label:o.default("区域名称颜色"),format:"rgba"},{type:"number",label:o.default("区域名称大小"),name:p+".config.textSize",step:1,min:1,max:100}]}]},{type:"divider"},{type:"fieldset",collapsed:!0,title:o.default("轮播设置"),collapsable:!0,headingClassName:"fieldset-title",controls:[d.amisInlineSwitch(p+".config.openSlider",o.default("开启轮播")),{type:"number",name:p+".config.topCoslCnt",hiddenOn:"!data."+p+".config.openSlider",label:o.default("轮播的Top区域个数"),step:1,min:0},{type:"number",name:p+".config.slideInterval",hiddenOn:"!data."+p+".config.openSlider",label:o.default("轮播间隔秒数"),step:1,min:1},d.amisInlineSwitch(p+".config.openSlideDep",o.default("轮播同步图表联动（联动开启时生效）"),"!data."+p+".config.openSlider")]},{type:"divider"},{type:"fieldset",collapsed:!0,title:o.default("Tooltip 设置"),collapsable:!0,headingClassName:"fieldset-title",controls:[d.amisInlineSwitch(p+".config.showRank",o.default("Tooltip 中展示排名")),d.amisInlineSwitch(p+".config.tipPercent",o.default("Tooltip 中展示百分比")),{type:"number",label:o.default("Tooltip 字号"),name:p+".config.tooltipFontSize",step:1,min:8,max:100},{type:"group",controls:[{type:"color",name:p+".config.tooltipFontColor",label:o.default("Tooltip 文字颜色"),format:"rgba"},{type:"color",name:p+".config.tooltipBackground",label:o.default("Tooltip 背景颜色"),format:"rgba"}]}]}]},e.areaInitialState={dataType:"api",dataApiUrl:e.areaChartDemoUrl,config:{mapScope:"china",mapAutoScopeField:"name",mapProvince:"anhui",mdProvince:"anhui",mapCity:"beijing",mdCity:"beijing",customColorType:"default",customColors:[{id:"k2ond6mo5n1lh",color:"rgba(184, 233, 134, 1)"},{id:"k2oo8np8t1hz",color:"rgba(20, 122, 240, 1)"}],highlightColor:"rgba(245, 166, 35, 1)",noDataColor:"rgba(155, 155, 155, 1)",borderWidth:1,geoJSON:{geoJSONHash:"create",t:0},showProvinceName:!0,openSlider:!0,topCoslCnt:5,slideInterval:3,openSlideDep:!1,showRank:!0,tipPercent:!0,tooltipFontSize:12,vMapType:"continuous"},dataConfig:{}}});
;sugar.define("sugar:widgets/charts/bmap-line/load-baidu-map.ts",function(a,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.loadBaiduMap=void 0;var t=!1;i.loadBaiduMap=function(){if(!t)try{var a=window.sugarConfig.baiduMapAK;"https:"===location.protocol&&(window.BMAP_PROTOCOL="https"),window.BMap_loadScriptTime=(new Date).getTime(),window.loadjs(["//api.map.baidu.com/getscript?v=3.0&ak="+a+"&services=&t=20200415105918"],"BMap",{async:!1}),t=!0}catch(i){}}});
;sugar.define("sugar:widgets/charts/_mixin/mapv.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=e("sugar:node_modules/tslib/tslib.js"),i=e("sugar:node_modules/react/index.js");e("sugar:node_modules/echarts/extension/bmap/bmap.js");var s=e("sugar:node_modules/react-dom/index.js"),a=e("sugar:node_modules/lodash/debounce.js"),o=e("sugar:utils/resize-sensor.ts");e("sugar:widgets/charts/theme/_register-theme.ts");var r=e("sugar:utils/common-helper.ts"),h=e("sugar:widgets/tooltip/tooltip.ts"),d=e("sugar:widgets/charts/bmap-line/load-baidu-map.ts"),p=!1,l={componentWillMount:function(){if(this._refresh=this._refresh.bind(this),this._initChart=this._initChart.bind(this),this._initResizeSensor=this._initResizeSensor.bind(this),this._resize=this._resize.bind(this),this._handleDrillDown=this._handleDrillDown.bind(this),this._handleDependence=this._handleDependence.bind(this),this._handleMouseMove=this._handleMouseMove.bind(this),this._sendMapStateToHub=this._sendMapStateToHub.bind(this),this._handleMouseDownInMap=this._handleMouseDownInMap.bind(this),d.loadBaiduMap(),!p)try{window.loadjs(["/static/sugar/static/js/mapv-hack.min.js"],"mapv",{async:!1}),p=!0}catch(e){}},componentDidMount:function(){this._refresh(this.props),this.didMount&&this.didMount()},componentWillReceiveProps:function(e){if(this.willReceiveProps&&this.willReceiveProps(this.props,e),this.props.chartConfig!==e.chartConfig)this._refresh(e);else for(var t in e.chartOtherData){var n=this.props.chartOtherData[t],i=e.chartOtherData[t];n&&i.data===n.data||this._refresh(e,t)}e.index!==this.props.index&&this._initResizeSensor()},shouldComponentUpdate:function(){return!1},componentWillUnmount:function(){this.unWatchResize&&this.unWatchResize(),this.willUnmount&&this.willUnmount.call(this),this.container&&(this.container.removeEventListener("mousemove",this._handleMouseMove),this.container.removeEventListener("touchstart",this._handleMouseMove,!0))},_handleMouseMove:function(e){var t=r.getOffset(e);this.mousePosition=t},getMousePosition:function(){if(this.mousePosition){var e=this.mousePosition,t=e.x,n=e.y;return this.props.chart.isDashChart&&(t/=this.props.scaleX||1,n/=this.props.scaleY||1),{x:t,y:n}}return!1},_sendMapStateToHub:function(){var e=this.map.getCenter(),t=this.map.getZoom();this.props.hub.setChartConfigData({centerLng:e.lng,centerLat:e.lat,zoom:t})},_initChart:function(e){var t=this;window.loadjs.ready("BMap",function(){var n=e.getElementsByClassName("mapv-container")[0];t.map=new BMap.Map(n,{enableMapClick:!1}),t.map.addEventListener("dragend",t._sendMapStateToHub),t.map.addEventListener("zoomend",t._sendMapStateToHub),t.mainTooltip=new h.ToolTip(e),t.container=n,n.addEventListener("mousemove",t._handleMouseMove),n.addEventListener("touchstart",t._handleMouseMove,!0),t._initResizeSensor()})},_initResizeSensor:function(){this.unWatchResize&&this.unWatchResize();var e=s.findDOMNode(this);this.unWatchResize=o.resizeSensor(e,a(this._resize,250))},_refresh:function(e,t){var n=this,i=s.findDOMNode(this);i&&(t||this._initChart(i),window.loadjs.ready(["BMap","mapv"],function(){n.refresh(e,t)}))},_resize:function(){this._refresh(this.props)},fireDrillDownOrDependence:function(e,t){this._handleDrillDown(e,t),this._handleDependence(e,t)},_handleDependence:function(e,t){var i=this.props.chartConfig;if(i.dependenceOpen&&i.dependences&&i.dependences.length){for(var s=null,a=-1,o=i.dependences,r=0;r<o.length;r++){var h=o[r];if(h.cddFireKey===e.fireKey){a=r,s=h;break}}if(!(0>a)&&s&&s.cddOpen){var d=this.props.hub.dependenceData.dependenceState||{},p=d.fireKey,l=d.dataIndex,c=e.fireKey,u=e.dataIndex;p===c&&l===u?this.props.chart.handleEvent("cancelDependence",this.props.mode):this.props.chart.handleEvent("dependence",this.props.mode,{dependenceIndex:a,dependenceState:e,dependenceItem:{item:n.__assign({},t),fireKey:c}})}}},_handleDrillDown:function(e,t){var i=this.props,s=i.chart.drillDown;if(i.drillDownOpen&&s&&s.length&&t){for(var a=null,o=-1,r=0;r<s.length;r++){var h=s[r];if(h.ddFireKey===e.fireKey){o=r,a=h;break}}0>o||!a||!a.ddOpen||this.props.chart.handleEvent("drillDown",this.props.mode,{drillDownIndex:o,drillDownItem:{item:n.__assign({},t),fireKey:e.fireKey}})}},_handleMouseDownInMap:function(e){this.props.chart.isDashChart||"editor"!==this.props.mode||e.stopPropagation()},render:function(){return i.createElement("div",{className:"chart mapv"},i.createElement("div",{className:"mapv-container no-bmap",onMouseDown:this._handleMouseDownInMap}))}};t.default=l});
;sugar.define("sugar:widgets/hub-config-data-to-chart-config-button/hub-config-data-to-chart-config-button.tsx",function(t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var e=t("sugar:node_modules/tslib/tslib.js"),o=t("sugar:node_modules/react/index.js"),a=t("sugar:node_modules/amis/lib/index.js"),i=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return e.__extends(n,t),n.prototype.setHubConfigDataToChartConfig=function(){var t=this.props,n=t.chart,o=t.keys,a=t.hubConfigData;if(o&&o.length&&a){for(var i={},r=!1,s=0,u=o;s<u.length;s++){var g=u[s],l=a[g];void 0!==l&&(r=!0,i[g]=l)}r&&n.update({config:e.__assign(e.__assign({},n.config),i)},{config:i})}},n.prototype.render=function(){return o.createElement("div",{className:"text-center contrl-panal-button"},o.createElement(a.Button,{level:"primary",onClick:this.setHubConfigDataToChartConfig.bind(this)},this.props.label||"Button"))},n.displayName="HubConfigDataToChartConfig",n}(o.Component);n.default=i});
;sugar.define("sugar:widgets/charts/bmap-scatter/bmap-scatter-ctrl.tsx",function(e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.advancedCtrl=a.getBmapConfig=a.dataBindCtrl=a.chartEigens=a.chartDemoUrl=a.basicCtrl=void 0;var t=e("sugar:node_modules/tslib/tslib.js"),l=e("sugar:utils/i18n.ts"),n=e("sugar:node_modules/react/index.js"),o=e("sugar:widgets/ctrl-panel/data-bind-ctrl/index.tsx"),d=e("sugar:widgets/object-array-editor/object-array-editor.tsx"),i=e("sugar:widgets/amis-inline-switch.tsx"),c=e("sugar:widgets/charts/bar-pic/symbols.tsx"),r=e("sugar:widgets/hub-config-data-to-chart-config-button/hub-config-data-to-chart-config-button.tsx"),s=e("sugar:widgets/data-model/data-model-field-holder/data-model-field-holder.tsx"),p=e("sugar:widgets/charts/map/special-district.ts"),f=e("sugar:widgets/charts/map/map-ctrl.tsx"),u=[{type:"color",name:l.default("颜色"),key:"color",defaultValue:"#23b7e5"}],m=function(e){return[{type:"divider"},{type:"fieldset",collapsed:!1,title:l.default("自定义配色"),collapsable:!0,headingClassName:"fieldset-title",controls:[i.amisInlineSwitch("config.openCustomColor",l.default("开启数据颜色自定义")),{type:"radios",name:"config.customColorType",hiddenOn:"!data.config.openCustomColor",label:"",inline:!1,options:[{label:l.default("跟随页面主题配色"),value:"report"},{label:l.default("自定义"),value:"custom"}]},{name:"config.customColors",hiddenOn:"!data.config.openCustomColor || data.config.customColorType != 'custom'",children:function(a){var o=a.onChange,i=a.value;return n.createElement(d.default,t.__assign({},{onChange:o,value:i},{chartFrontendId:e.chart.frontendId,containerClassName:"form-group form-item",label:l.default("可增加多个配色项，依次映射数值从小到大的颜色"),addTipText:l.default("新增配色项"),cols:u}))}},{type:"color",name:"config.textColor",label:l.default("文字颜色"),format:"rgba",hiddenOn:"!data.config.openCustomColor"}]}]};a.basicCtrl=function(e){return m(e)};var g="/openapi/demo/chart?type=bmapScatter";a.chartDemoUrl="$CUR_HOST/openapi/demo/chart?type=bmapScatter",a.chartEigens=[{field:[{name:"lng",type:"d",subType:"lng",minCount:1,maxCount:1},{name:"lat",type:"d",subType:"lat",minCount:1,maxCount:1},{name:"name",type:"d",minCount:1,maxCount:1},{name:"value",type:"m",minCount:1,maxCount:1},{name:"size",type:"m",minCount:0,maxCount:1},{name:"tooltip",type:"a",minCount:0,maxCount:5}],configSp:{"dataConfig.coordType":"bind"}},{field:[{name:"name",type:"d",subType:"geo",minCount:1,maxCount:1},{name:"value",type:"m",minCount:1,maxCount:1},{name:"size",type:"m",minCount:0,maxCount:1},{name:"tooltip",type:"a",minCount:0,maxCount:5}],configSp:{"dataConfig.coordType":"auto"}}],a.dataBindCtrl=function(e){var a=o.getDebugAndRefreshBtn({loadData:e.chart.loadData,loadDebugData:e.chart.loadDebugData,dataType:e.chart.dataType,refreshText:l.default("刷新图表")}),c=o.getDataBindCommon({frontendId:e.chart.frontendId,dataTypeOptions:["dataModel","api","sql","json"],api:{demoUrl:g},loadData:e.chart.loadData,loadDebugData:e.chart.loadDebugData,curUrl:e.chart.dataApiUrl}),r=e.chart.dataModelHash||"",p=e.sqlModelStore.detailMap.mapByHash.get(r),u=o.generateSQLFieldList(p),m=t.__spreadArrays([s.getDataModelFieldHolder({name:"name",label:l.default("散点名称字段"),config:{dataModelHash:r,holderId:e.chart.frontendId+"-name",maxCount:1,onlyDimension:!0}}),s.getDataModelFieldHolder({name:"value",label:l.default("scatter"!=e.chart.config.mapType?"取值字段(颜色深浅)":"取值字段(颜色深浅，选填)"),config:{dataModelHash:r,holderId:e.chart.frontendId+"-value",maxCount:1,onlyMeasure:!0}}),s.getDataModelFieldHolder({name:"size",label:l.default("散点大小(选填)"),hiddenOn:'config.mapType == "heatmap" || data.dataType != "dataModel"',config:{dataModelHash:r,holderId:e.chart.frontendId+"-size",maxCount:1,onlyMeasure:!0}}),s.getDataModelFieldHolder({name:"type",label:l.default("散点系列(选填)"),hiddenOn:'config.mapType == "heatmap" || data.dataType != "dataModel"',config:{dataModelHash:r,holderId:e.chart.frontendId+"-type",maxCount:1,onlyDimension:!0,canNotNoEnumerable:!0}}),{type:"radios",name:"dataConfig.coordType",label:l.default("散点经纬度计算方式"),hiddenOn:"dataType != 'dataModel'",inline:!1,options:[{label:l.default("根据名称自动查找（支持省市县名称）"),value:"auto"},{label:l.default("提供经纬度字段"),value:"bind"}]},s.getDataModelFieldHolder({name:"lng",label:l.default("经度"),hiddenOn:"data.dataType != \"dataModel\" || dataConfig.coordType !== 'bind'",config:{dataModelHash:r,holderId:e.chart.frontendId+"-longitude",maxCount:1,onlyDimension:!0}}),s.getDataModelFieldHolder({name:"lat",label:l.default("纬度"),hiddenOn:"data.dataType != \"dataModel\" || dataConfig.coordType !== 'bind'",config:{dataModelHash:r,holderId:e.chart.frontendId+"-latitude",maxCount:1,onlyDimension:!0}}),s.getDataModelFieldHolder({name:"tooltip",label:l.default("其他维度或度量"),hiddenOn:'config.mapType == "heatmap" || data.dataType != "dataModel"',config:{dataModelHash:r,holderId:e.chart.frontendId+"-tooltip",maxCount:5},desc:l.default("其他的维度和度量将在鼠标悬停时的tooltip提示和气泡图的标签中展示")}),{type:"number",name:"config.symbolSize",hiddenOn:"dataType != 'dataModel' || config.mapType == \"heatmap\" || (dataConfig.dataModel && dataConfig.dataModel.size && dataConfig.dataModel.size.length)",label:l.default("散点固定大小(像素)"),step:1,min:1},{type:"number",name:"config.minSize",hiddenOn:"dataType != 'dataModel' || config.mapType == \"heatmap\" || !dataConfig.dataModel || !dataConfig.dataModel.size || !dataConfig.dataModel.size.length",label:l.default("最小散点(像素)"),step:1,min:1},{type:"number",name:"config.maxSize",hiddenOn:"dataType != 'dataModel' || config.mapType == \"heatmap\" || !dataConfig.dataModel || !dataConfig.dataModel.size || !dataConfig.dataModel.size.length",label:l.default("最大散点(像素)"),step:1,min:1},i.amisInlineSwitch("dataConfig.transCoord",l.default("国测局转百度坐标系"),"data.dataType != \"dataModel\" || dataConfig.coordType !== 'bind'",!1,l.default("当前坐标系为百度坐标系，如果对数据精度要求高，建议开启转换")),o.commonFilterForDataModel(r),o.commonBindUrlParamForDataModel(r)],s.getChartConditionsHolder(r,e.chart),[o.commonLimitForDataModel,{type:"select",name:"dataConfig.nameField",hiddenOn:"data.dataType != 'sql'",label:l.default("散点名称字段"),placeholder:l.default("请选择"),options:u},{type:"select",name:"dataConfig.valueField",hiddenOn:"data.dataType != 'sql'",label:l.default("颜色映射取值字段"),placeholder:l.default("scatter"!==e.chart.config.mapType?"请选择":"可选填"),clearable:"scatter"===e.chart.config.mapType,options:u},{type:"select",name:"dataConfig.sizeValueField",hiddenOn:"data.dataType != 'sql' || config.mapType != 'scatter'",label:l.default("散点大小映射取值字段"),placeholder:l.default("可选填"),clearable:!0,options:u},{type:"number",name:"config.symbolSize",hiddenOn:"data.dataType != 'sql' || config.mapType != 'scatter' || dataConfig.sizeValueField",label:l.default("散点固定大小(像素)"),step:1,min:1},{type:"number",name:"config.minSize",hiddenOn:"data.dataType != 'sql' || config.mapType != 'scatter' || !dataConfig.sizeValueField",label:l.default("最小散点(像素)"),step:1,min:1},{type:"number",name:"config.maxSize",hiddenOn:"data.dataType != 'sql' || config.mapType != 'scatter' || !dataConfig.sizeValueField",label:l.default("最大散点(像素)"),step:1,min:1},{type:"select",name:"dataConfig.typeField",hiddenOn:"data.dataType != 'sql' || config.mapType != 'scatter'",label:l.default("散点系列映射取值字段"),placeholder:l.default("可选填"),clearable:!0,options:u},{type:"radios",name:"dataConfig.coordType",label:l.default("散点位置/热力中心的经纬度计算方式"),hiddenOn:'data.dataType != "sql"',inline:!1,options:[{label:l.default("根据名称自动查找（支持省市县名称）"),value:"auto"},{label:l.default("提供经纬度字段"),value:"bind"}]},{type:"select",name:"dataConfig.lngField",hiddenOn:'data.dataType != "sql" || dataConfig.coordType != "bind"',label:l.default("经度字段"),placeholder:l.default("请选择"),clearable:!0,options:u},{type:"select",name:"dataConfig.latField",hiddenOn:'data.dataType != "sql" || dataConfig.coordType != "bind"',label:l.default("纬度字段"),placeholder:l.default("请选择"),clearable:!0,options:u},i.amisInlineSwitch("dataConfig.transCoord",l.default("国测局转百度坐标系"),"data.dataType != \"sql\" || dataConfig.coordType !== 'bind'",!1,l.default("当前坐标系为百度坐标系，如果对数据精度要求高，建议开启转换")),{name:"dataConfig.tooltipItems",hiddenOn:"data.dataType != 'sql'",children:function(a){var o=a.onChange,i=a.value;return n.createElement(d.default,t.__assign({},{onChange:o,value:i},{chartFrontendId:e.chart.frontendId,containerClassName:"form-group form-item",label:l.default("添加在Tooltip中显示的附加数据项"),addTipText:l.default("新增数据项"),cols:f.tooltipBindCols(u)}))}},{type:"select",name:"dataConfig._sugar_extras",hiddenOn:"data.dataType != 'sql'",label:l.default("下钻需要的附加字段，如存有URL的字段"),placeholder:l.default("请选择"),clearable:!0,options:u}]);return c.concat(m,a)};var b=[{label:l.default("散点图"),value:"scatter"},{label:l.default("热力图"),value:"heatmap"}];a.getBmapConfig=function(e,a,t,o,d){void 0===a&&(a=!1),void 0===t&&(t=!1),void 0===o&&(o=!0),void 0===d&&(d=!0);var c={type:"fieldset",collapsed:o,title:l.default("百度地图设置"),collapsable:!0,headingClassName:"fieldset-title",controls:[d&&i.amisInlineSwitch("config.roam",l.default("开启鼠标拖动和缩放")),{type:"number",label:l.default("初始地图中心经度"),name:"config.centerLng",step:e.chart.config.centerConfig||1,hiddenOn:"config.autoComputeMapStatus"},{type:"number",label:l.default("初始地图中心纬度"),name:"config.centerLat",step:e.chart.config.centerConfig||1,hiddenOn:"config.autoComputeMapStatus"},{type:"select",name:"config.centerConfig",label:l.default("中心经纬度配置项加减按钮精度"),hiddenOn:"config.autoComputeMapStatus",clearable:!0,options:[{label:l.default("十位"),value:10},{label:l.default("个位"),value:1},{label:l.default("小数点后1位"),value:.1},{label:l.default("小数点后2位"),value:.01},{label:l.default("小数点后3位"),value:.001},{label:l.default("小数点后4位"),value:1e-4}]},{type:"number",label:l.default("初始缩放级别"),name:"config.zoom",hiddenOn:"config.autoComputeMapStatus",step:1,min:0,max:100}]};return t&&c.controls.unshift(i.amisInlineSwitch("config.autoComputeMapStatus",l.default("根据数据动态计算地图初始状态"))),a&&c.controls.push({name:"config.initMapStatus",hiddenOn:"config.autoComputeMapStatus",children:function(a){a.onChange,a.value;return n.createElement(r.default,{chart:e.chart,hubConfigData:e.hubConfigData,keys:["centerLng","centerLat","zoom"],label:l.default("使用当前地图中心和缩放作为初始状态")})}}),c},a.advancedCtrl=function(e){var n=e.chart.config,o=n.scatterSlideAll,d=n.scatterSlide;return t.__spreadArrays([a.getBmapConfig(e,!1,!0),{type:"divider"},{type:"fieldset",collapsed:!0,title:l.default("数据展示设置"),collapsable:!0,headingClassName:"fieldset-title",controls:[{type:"radios",name:"config.mapType",label:l.default("数据展示类型"),inline:!1,options:b},{type:"group",hiddenOn:"data.config.mapType !== 'scatter'",direction:"vertical",controls:[{type:"number",label:l.default("散点固定大小(像素)"),name:"config.symbolSize",step:1,min:1,max:100},{type:"group",controls:[{type:"color",name:"config.scatterColor",label:l.default("散点颜色")},{type:"color",name:"config.strokeColor",label:l.default("描边颜色")}]},{type:"group",controls:[{type:"number",label:l.default("描边宽度"),name:"config.strokeWidth",step:1,min:0,max:100},{type:"number",label:l.default("高亮描边宽度"),name:"config.lightStrokeWidth",step:1,min:0,max:100}]},{type:"group",controls:[{type:"text",name:"config.unit",label:l.default("散点颜色数据单位"),placeholder:l.default("默认为空")},{type:"text",name:"config.unit1",label:l.default("散点大小数据单位"),placeholder:l.default("默认为空")}]},i.amisInlineSwitch("config.blend",l.default("开启颜色叠加"),"",!1,l.default("开启颜色叠加，请清空颜色取值字段"))]},{type:"group",hiddenOn:"config.mapType !== heatmap",controls:[{type:"number",label:l.default("点大小"),name:"config.heatmapPointSize",step:1,min:1,max:100},{type:"number",label:l.default("点模糊大小"),name:"config.heatmapBlurSize",step:1,min:1,max:100}]}]},{type:"divider"},{type:"fieldset",collapsed:!0,title:l.default("轮播设置"),collapsable:!0,headingClassName:"fieldset-title",hiddenOn:"data.config.mapType !== 'scatter'",controls:[i.amisInlineSwitch("config.scatterSlideAll",l.default("轮播所有气泡"),void 0,void 0,void 0,d),i.amisInlineSwitch("config.scatterSlide",l.default("轮播高亮气泡"),void 0,void 0,void 0,o),i.amisInlineSwitch("config.hideNoSlideScatter",l.default("隐藏未被轮播的气泡"),"!(config.scatterSlide || config.scatterSlideAll)"),{type:"number",name:"config.topCityNum",label:l.default("高亮展示的Top气泡个数"),step:1,min:0},{type:"number",name:"config.topSlideNum",hiddenOn:"!config.showInfoUseLabel || !(config.scatterSlide || config.scatterSlideAll)",label:l.default("每次轮播个数"),step:1,min:1,value:1,desc:l.default("每次轮播个数大于1会关闭轮播同步图表联动功能")},{type:"number",name:"config.slideInterval",hiddenOn:"!(config.scatterSlide || config.scatterSlideAll)",label:l.default("轮播间隔秒数"),step:1,min:1},i.amisInlineSwitch("config.openSlideDep",l.default("轮播同步图表联动（联动开启时生效）"),"(data.config.showInfoUseLabel && data.config.topSlideNum > 1) || !(config.scatterSlide || config.scatterSlideAll)")]},{type:"divider",hiddenOn:"data.config.mapType !== 'scatter'"},{type:"fieldset",collapsed:!0,title:l.default("颜色映射设置"),collapsable:!0,headingClassName:"fieldset-title",controls:[{type:"group",controls:[i.amisInlineSwitch("config.hideVisualMap",l.default("隐藏图例")),i.amisInlineSwitch("config.colorReverse",l.default("颜色反转"))]},{type:"group",controls:[{type:"number",name:"config.vMapLeft",label:l.default("左边距"),step:5,min:0},{type:"number",name:"config.vMapBottom",label:l.default("底边距"),step:5,min:0}]},{type:"group",controls:[{type:"select",name:"config.vMapOrient",label:l.default("样式"),options:[{label:l.default("竖直"),value:"vertical"},{label:l.default("水平"),value:"horizontal"}]},{type:"number",label:l.default("字号"),name:"config.legendFontSize",step:1,min:8,max:100}]},{type:"group",controls:[{type:"number",label:l.default("映射柱体高度"),name:"config.vMapHeight",value:80,step:1,min:20},{type:"number",label:l.default("映射柱体宽度"),name:"config.vMapWidth",value:10,step:1,min:1,max:100}]},i.amisInlineSwitch("config.hideVMapText",l.default("隐藏图例上指标名称"))]},{type:"divider"},{type:"fieldset",collapsed:!0,title:l.default("散点大小映射设置"),collapsable:!0,headingClassName:"fieldset-title",hiddenOn:"data.config.mapType !== 'scatter'",controls:[i.amisInlineSwitch("config.sHideVisualMap",l.default("隐藏图例")),{type:"number",label:l.default("最小值对应散点大小"),name:"config.minSize",step:1,min:1,max:100},{type:"number",label:l.default("最大值对应散点大小"),name:"config.maxSize",step:1,min:1,max:100},{type:"group",controls:[{type:"number",name:"config.sMapRight",label:l.default("右边距"),step:5,min:0},{type:"number",name:"config.sMapBottom",label:l.default("底边距"),step:5,min:0}]},{type:"group",controls:[{type:"select",name:"config.sMapOrient",label:l.default("样式"),options:[{label:l.default("竖直"),value:"vertical"},{label:l.default("水平"),value:"horizontal"}]},{type:"number",label:l.default("字号"),name:"config.sLegendFontSize",step:1,min:8,max:100}]},{type:"group",controls:[{type:"number",label:l.default("映射柱体高度"),name:"config.sMapHeight",value:80,step:1,min:20},{type:"number",label:l.default("映射柱体宽度"),name:"config.sMapWidth",value:10,step:1,min:1,max:100}]},i.amisInlineSwitch("config.sHideVMapText",l.default("隐藏图例上指标名称"))]},{type:"divider",hiddenOn:"data.config.mapType !== 'scatter'"},{type:"fieldset",collapsed:!0,title:l.default("系列设置"),collapsable:!0,headingClassName:"fieldset-title",hiddenOn:"data.config.mapType !== 'scatter'",controls:t.__spreadArrays([i.amisInlineSwitch("config.autoSymbolType",l.default("自定义散点形状"))],f.scatterImage(e,c.symbolOps))},{type:"divider",hiddenOn:"data.config.mapType !== 'scatter'"},{type:"fieldset",collapsed:!0,title:l.default("散点标签和 Tooltip 设置"),collapsable:!0,headingClassName:"fieldset-title",hiddenOn:"data.config.mapType != 'scatter'",controls:[i.amisInlineSwitch("config.showInfoUseLabel",l.default("使用标签展示数据内容")),{type:"group",direction:"vertical",hiddenOn:"config.showInfoUseLabel",controls:[i.amisInlineSwitch("config.showScatterName",l.default("显示气泡名称")),i.amisInlineSwitch("config.showRank",l.default("鼠标悬停时Tooltip中展示排名")),i.amisInlineSwitch("config.tipPercent",l.default("鼠标悬停时Tooltip中展示百分比")),{type:"number",label:l.default("Tooltip字号"),name:"config.tooltipFontSize",step:1,min:8,max:100}]},{type:"group",direction:"vertical",hiddenOn:"!config.showInfoUseLabel",controls:[i.amisInlineSwitch("config.showMMCityLabel",l.default("显示最值气泡标签")),{type:"group",hiddenOn:"config.showMMCityLabel",controls:[i.amisInlineSwitch("config.showTopCityLabel",l.default("显示高亮气泡标签")),i.amisInlineSwitch("config.showCityLabel",l.default("显示普通气泡标签"))]},{type:"number",name:"config.topCityNum",label:l.default("高亮展示的Top气泡个数"),step:1,min:0,desc:l.default("在轮播设置开启轮播高亮气泡后，常显的标签设置会失效")},{type:"radios",label:l.default("标签展示内容"),name:"config.labelContentType",inline:!1,options:[{label:l.default("简洁模式(仅展示气泡名称)"),value:"simple"},{label:l.default("正常模式(展示所有已配置的字段)"),value:"normal"},{label:l.default("高级模式(自定义要展示的内容)"),value:"auto"}]},{type:"group",direction:"vertical",hiddenOn:"config.labelContentType !== 'normal'",controls:[i.amisInlineSwitch("config.showRank",l.default("标签中展示排名")),i.amisInlineSwitch("config.tipPercent",l.default("标签中展示百分比"))]},{type:"textarea",name:"config.autoLabelContent",hiddenOn:"config.labelContentType !== 'auto'",label:l.default("自定义标签内容"),placeholder:l.default("{name}的GDP是{value}"),desc:'<a href="/docs/Chart-map#自定义散点标签内容"\n              class="text-sm text-info" target="_blank">'+l.default("如何自定义？")+"</a>"}]},{type:"group",direction:"vertical",visibleOn:"(config.showScatterName && !config.showInfoUseLabel) || config.showInfoUseLabel",controls:[{type:"group",controls:[{type:"color",label:l.default("字体颜色"),name:"config.scatterFontColor"},{type:"color",label:l.default("背景色"),name:"config.scatterFontBackGroundColor",format:"rgba"}]},{type:"group",controls:[{type:"color",label:l.default("背景边框色"),name:"config.scatterFontBorderColor",format:"rgba"},{type:"number",label:l.default("背景边框宽度"),name:"config.scatterFontBorderWidth"}]},{type:"group",controls:[{type:"number",label:l.default("标签字号"),name:"config.provinceFontSize",step:1,min:8,max:100},{type:"select",label:l.default("标签位置"),name:"config.scatterFontPos",options:[{label:l.default("右侧"),value:"right"},{label:l.default("左侧"),value:"left"},{label:l.default("上方"),value:"top"},{label:l.default("下方"),value:"bottom"},{label:l.default("内部"),value:"inside"}]}]}]}]},{type:"divider",hiddenOn:"data.config.mapType != 'scatter'"},{type:"fieldset",collapsed:!0,title:l.default("地名映射设置"),collapsable:!0,headingClassName:"fieldset-title",controls:[{type:"select",name:"config.prefix",label:l.default("名称查找前缀（部分区县有重名，需要市名区分）"),clearable:!0,options:p.prefixCity,searchable:!0,resetValue:"",desc:l.default("当使用地名映射坐标时，由于部分区县出现同名情况，因此需要使用城市前缀来区分，如果发现坐标不正确，则需要设置前缀进行校正。")}]}],m(e))}});
;sugar.define("sugar:widgets/charts/map-layer/map-layer-ctrl.tsx",function(t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.basicCtrl=void 0;var e=t("sugar:utils/i18n.ts"),s=t("sugar:widgets/charts/bmap-scatter/bmap-scatter-ctrl.tsx"),i=t("sugar:widgets/amis-inline-switch.tsx");a.basicCtrl=function(t){return[{type:"divider"},s.getBmapConfig(t,!0,!0,!1,!1),i.default("config.disableZoom",e.default("关闭地图缩放（浏览模式生效）")),i.default("config.disableDrag",e.default("关闭地图拖拽（浏览模式生效）"))]}});
;sugar.define("sugar:widgets/charts/map-layer/baidu-map/baidu-map-ctrl.tsx",function(a,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.bmapInitialState=e.bmapAdvancedCtrl=void 0;var t=a("sugar:utils/i18n.ts"),l=a("sugar:widgets/charts/bmap-scatter/bmap-style.tsx"),i=a("sugar:node_modules/lodash/get.js");e.bmapAdvancedCtrl=function(a){var e=a.activeSubChartKey;if(void 0===e)return[];var r="config.subChartConfig."+e+".config",n=[{type:"radios",name:r+".mapStyleType",label:t.default("地图类型"),inline:!1,options:[{label:t.default("普通"),value:"normal"},{label:t.default("卫星"),value:"satellite"},{label:t.default("混合"),value:"hybrid"}]}],s=i(a.chart,r+".mapStyleType","normal");return"normal"===s&&(n=n.concat.apply(n,l.styleConfig(r,!0))),n},e.bmapInitialState={config:{styleType:"init",mapStyleType:"satellite",themeType:"dark"}}});
;sugar.define("sugar:widgets/charts/map-layer/baidu-map/baidu-map.tsx",function(e,s){"use strict";function a(e,s,a){var l=a.config.styleType;"init"===l&&(l=e.chart.isDashChart?"theme":"");var n=r(a,"config.mapStyleType","normal");"normal"===n?(s.setMapType(BMAP_NORMAL_MAP),s.setMapStyleV2({styleJson:i.generateStyle(t.__assign(t.__assign({},a.config),{styleType:l}))})):"satellite"===n?s.setMapType(BMAP_SATELLITE_MAP):"hybrid"===n&&s.setMapType(BMAP_HYBRID_MAP)}Object.defineProperty(s,"__esModule",{value:!0});var t=e("sugar:node_modules/tslib/tslib.js"),i=e("sugar:widgets/charts/bmap-scatter/bmap-style.tsx"),r=e("sugar:node_modules/lodash/get.js");s.default=a});
;sugar.define("sugar:utils/geo-json-util.ts",function(e,r){"use strict";function n(e,r){if(void 0===r&&(r=!1),e.UTF8Encoding){var n=e.UTF8Scale;null==n&&(n=1024);for(var o=e.features,i=0;i<o.length;i++)for(var l=o[i],g=l.geometry,u=g.coordinates,f=g.encodeOffsets,c=0;c<u.length;c++){var s=u[c];if("Polygon"===g.type)u[c]=a(s,f[c],n);else if("MultiPolygon"===g.type)for(var v=0;v<s.length;v++){var y=s[v];s[v]=a(y,f[c][v],n)}}e.UTF8Encoding=!1}return r&&t(e),e}function t(e){for(var r=e.features,n=0;n<r.length;n++){var t=r[n],a=t.geometry,i=a.coordinates;if("MultiPolygon"===a.type){a.type="Polygon";for(var l=0;l<i.length;l++)i[l]=o(i[l])}}return e}function o(e){for(var r=[],n=0;n<e.length;n++)for(var t=0;t<e[n].length;t++)r.push(e[n][t]);return r}function a(e,r,n){for(var t=[],o=r[0],a=r[1],i=0;i<e.length;i+=2){var l=e.charCodeAt(i)-64,g=e.charCodeAt(i+1)-64;l=l>>1^-(1&l),g=g>>1^-(1&g),l+=o,g+=a,o=l,a=g,t.push([l/n,g/n])}return t}function i(e){if(e.cp&&2===e.cp.length)return e.cp;if(e.center&&2===e.center.length)return e.center;var r=l(e);return[r.minX+(r.maxX-r.minX)/2,r.minY+(r.maxY-r.minY)/2]}function l(e){var r={minX:0,minY:0,maxX:0,maxY:0};try{if(e.geometry){for(var n=1/0,t=-1/0,a=1/0,i=-1/0,l=e.geometry.coordinates,g=0;g<l.length;g++){"MultiPolygon"===e.geometry.type&&(l[g]=o(l[g]));for(var u=0;u<l[g].length;u++){var f=l[g][u];isNaN(f[0])||(f[0]>t&&(t=f[0]),f[0]<n&&(n=f[0])),isNaN(f[1])||(f[1]>i&&(i=f[1]),f[1]<a&&(a=f[1]))}}r.minX=n,r.minY=a,r.maxX=t,r.maxY=i}}catch(c){}return r}Object.defineProperty(r,"__esModule",{value:!0}),r.getAreaCenter=r.transMultiPolygonToPolygon=void 0,r.default=n,r.transMultiPolygonToPolygon=t,r.getAreaCenter=i});
;sugar.define("sugar:widgets/charts/map-layer/china-geo.ts",function(e,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.default={type:"FeatureCollection",name:"China",features:[{id:"110000",type:"Feature",geometry:{type:"MultiPolygon",coordinates:[["@@@@áiki^w­W°·{sO¡b@z@@p¡Xj¹CKa]@@@@@@c@gR@@@@}g@@]YIYNgWT@@­_uyãVc\\»YRUoNoÇriD³zA®WT\\É¡]^{IDb@@U³S©kgrEbm@@CEA@B@A@·\\Gyf@@Ëo_DJcQNafTAV{iSÓX@@qB}¥XaÂtKk_NÁCS`}Wcfk@@Jc@@@@IOe@@]Y@@­J[r@@@@@@[J@@EAA@B@@BAABBCN@@CF@@CL@@cV@@AP@@}a@@Q|wmHV@@\\fIÔ¡VHZ@@n] X^l«jXUb@@PN¯^DlPJ~VÂhTpżv@@f~mMP^Cz¤Ð|adÖ­HýîT¦Th|fBPx¶PnnÄ_TopJĀ |GR`Hv¢vyOLbŘKXPwĕìLt^xâM{®PxÂB@@¢Ver MN_Vok¥Qcg®QÜÅD{¢_Č\\JMúKÐ}MnbÈZîWj][oZ@@¯d{[h"]],encodeOffsets:[[[120172,41562]]]},properties:{center:[116.41166495284281,39.91132325517341],name:"北京",cp:[116.4263799377984,40.19611214026013],childNum:16}},{id:"120000",type:"Feature",geometry:{type:"MultiPolygon",coordinates:[["@@ÅNukIt¯GYZ}_¥¡`g¶ZÚwBØAljEJeT@@H@@@@@@F[@@E@@PC@@LW@@FC@@S@@ZqzQ@qyW¹[Yý§ÅdċQmyyÃÍZuiėgBraÎc@­WiÓgcåYáF_ÁĭQ]tjx@@@@{m@@@n_Z{PóBC@D@@@@@C@ÑOe¼ÅF@@¡TQ~\\ wlA]jvzA@@|`@@~@@@¸H²AB@@BAGF[ÀtT@@SÆd ehgWnJAl@¡`CvjnHª´T@Vvf@@XW@@J]@@`fG@@`Ā{@@Ctl[Ø@@E|`¡Cj`ºDGxiQÃp@@WÌ ¢KÖdb^Z@@~h@@@@hQ@d@@@@@@b^LvjH°sJnYJe@@HC@@@@DO@@DK@@hwB@@ApmyWGyrF@@ta@@DQ@@[}@@sAÅhgU³Ail@@¡HWiOA@@AC@@IM@@l@@·]q^kOcg¤oK}sby^lYR|dR@@ZfÂONÆmyNa@@W}eDsEåO"],["@@iFgræPLwO"]],encodeOffsets:[[[120599,40353]],[[120640,40325]]]},properties:{center:[117.19678856634137,39.13129504908793],name:"天津",cp:[117.35343845174394,39.29430753156955],childNum:16}},{id:"130000",type:"Feature",geometry:{type:"MultiPolygon",coordinates:[["@@@@Y\\pi^íXÇYmaNÏ~ùLINċ[¡`C|ÛÆR­hRdl¦Up`MNqf¡U@@ÁAOw|­áNw]KsĖëxWOŗLKaPuzu¡_GQ{HÿoISpÃ`mmµOOwA{egSS¥þí®GÕbcÏ{y£]DONne}@@ŻuSoÁg}UIkOC°]OM@@VaW¬i]kWm^@@YG¢UJÓ[e@@UGxn{ R@@b~@@BO@@dU@@DK@@DE@@DMAABB@AA@B@FB@@\\I@@@@@@\\q®I@@^Z@@PfJ@@ @@Id@@ lde~XT_ÂDMl` LsbÁ¦W~rA@@ÔWjTU|BSeMbRIdC`Ìp@@zeH¸[B@A@B@DF@@anFqlhGimuD_¢@kBmIXhfgcTÅ@@sS\\¿EHAB@@BA±·G@@}@@@{_@@Buyi^Bxk[R}¢S@@ÆEf»ÒPD@@@@@C@D@ôA|OY`m@@@|n@@@@iw^sĮRÂ `âEæZAç IW§gL¨©ÆIúhjWS{«wg¡mkJqqQ£ıI{s@@³Uy½Såd£kïRSÙT¡aě\\çU\\§±@m{u_a·»y]ÿõg[{­¦AABBAAY`uc}X[cn@@aSfag¸o£Hqf¿_iJ½Y£oKć¹D}uR«áÉhoÇgoC{ƉE{µ_­ÅULqÛµ­dvKg]|³C²\\K{aHc@@RUPċel[c×sUy­SSoT¬f@@@@@@CB@@aa¹`iL[aC££écX[¨¯JAaïG[]ãG©eCn­~«N]h¡PSf©NUtUfaY}lOw@@@Jfb¡UZv­Jiag©{KPeF·oEmºDv£RLzfe}RJ|µXUh~¨DO\\h¨BäGÈjvG@gEh¾~i|d}`^@¸`l¢r`Ð¼V¢lnÌèĈG|r²Un»n×[Fp¢ª{Feøm`À{LJÄÅÀj¨KÛXQOxKyTsZÔZmvBÔ|T¸öJfÀ°Ex¬IEf¹gtQØRvFúàIIXxZ\\fA@@t¤PpWÒrĀDrSvz²E¹vlbM¢pDÒzJRô­QgÃJoDĠN^ub^WğSBZÑQWpt^chkěrgMgBvĳ~¤d~â|Qx^`z{Ì@@rte`°PjMÎjGÂnj¥Fp£iSZËRu¬\\^^jX´gDRd«ÂiyrBxoO|veV[¦`P¿\\kėð£z¸h²Alhqi}iX_nvRhÈ×lNdp\\jEpn°pÎRňqQÌJN¾l^}Rd]æØ¾ÂRvÊW¸V|ZnFP¦lôoxXâI^JfQAZ¯Rõ`sak­UxNÑO¹ž\\YnĄkR¬RTpNj{ÊT`t~xjêb¸N®äpDîptfUÂfÑX}@A@B@Ax[ÆO|~kt`~Ò@fpX ØX|ÂZwi¼Fz~zAPK~d¸Hl MìVØÂsAĪS`kÊUÎrz@@A@@@XR@@^L@@RJ@@tZ@@H@@@bA@@^P@@F`@@PN@@ÂN@@`j]¬A@@ò\\@@¶i@@¶BnRE¤mC@@ Bzd°YNZÂBÈkNÒ|lKGw¸d{ľÿv_ª¡YcÕ}Fi´Ôua£Pe¶qÞKvxOnvVQrsSqQªalgM¡UÒµKwÓBUµNO§niH¢sP¯ôZ°gloZYhĮpĐQ JÆwz|ÖlB¸bYĦWÜD|Y\\tzLTImBhqÁ¹O@yÓXwu^¾UYoQ@@»X]Q{ħuuzMWk°MVw¦dJvw¼B¨vfYf^R®KUs YńT¤Mtj²KZqekªeãX¬¿W@@P|Z^ÓqoV@@HK@@~R@@aQ@@RYdw{Kmpy»SeFmiL¡mi¡`½Hĝßąȣ ½BuñkÃ»q·{[so«ILl°}MoiVo­KĻr·uTo±aûyÃ»£CħÂWKÿr w° »QDg@zX@ryRYr@@T@@ED@@KX@@OD@@F@@\\E@@@@@@G@@SIf PKxtFC~fX@@MbzÅnMÁPYe@@Q{cQkZ]aztL~£pdhP]l^r¸@@k@@JN@@BD@@BjPX¢G@@jk´BhVÆgtB@@\\~@@CR@@sb@@qEHzzXonB@@Agx@@CL@@CP@@@@GD@@fImZI¯tGuiDiºWo¢@@ya@P¢|t¯¸®X]xljâj@@g\\c|°"],["@@caLÕ¡XË@@ÄojRHw¹C_Di¢_F{@@\\×skD@@ÿ|_@@eH_@@I^@@WX@@uea@C|J]¢^ÊS[X­yBC´qjpÈMVpQ¼Zd[äUvz®`@@ShXMJZ"],["@@k×BAÙxµY_h¦¢~`ZY°HJsvlÆMhq"],["@@WV¦"]],encodeOffsets:[[[120294,41632]],[[120030,41051]],[[120619,40328]],[[121730,40089]]]},properties:{center:[114.50892247229918,38.05160788527559],name:"河北",cp:[115.47515310848642,38.04308025193143],childNum:11}},{id:"140000",type:"Feature",geometry:{type:"MultiPolygon",coordinates:[["@@zqj¬Á cQhCW³]i[]v«ÌQTY¤jo¦EiÁmHÍiNi¯O_fqs@@|Ë_y]w {R}á£cĴ}AuhhNĜqldgs]XoÒRAYĠTXa]vM]CğpÄIh®RóQIyCÑoN¡kaºu±FyTuqÿCÑqoX£Os@@eB[YWwJJùßEQuR×hsºeFJw«¯Fe¿õIS·{AÓnuYYÓtzSLwPRÜWLi§Æ¿IÃ|K¿n_f÷|E©¡EoØ\\¼mVmq±H{çćmËkU¡»_Ïqk¡·_@]~_cj{}½gF@hHiuHÇã§A[gPC}§Vg¶WI{~QfyeK¤QuCn¹JqkJbK°uNgµGbS\\¹skOa}RL¿a½pßgnic»J~aD@pV¡]¹s¡@ZO­½n«ACoB_¿me¹lÏPUmL±WCk¥g¿^¥§©Aý´TĽOĹjoeã@b½csfĽvBj»uvS¯LoUgpA`ĻiE}ËyÙifW{uYkuTmÁP¥od­u\\k}íf}§éa·r}Íys·WrH¡ĉFßqxÁmZéT¹ºI~xuÆDr¢A¦^P®ÔŦLþÚÜzð¬ĊxþÎMĊiADJ[z\\ronAqiøR¾fn@¶]lxÈDan]ÌPt£khPjWRªbaNd~£vV`ÒBhYQfbzAn²¤¼ÐRr~JWb­XUZ\\ÀĄ\\htXÂpjoO|Vc~ËrTpP]±hïŎÓLinKîdS¾fhFXèpVºB\\ØfZ[\\G´VX¼kLc C~¦¨þ[jjlM{dzl´VTvSd²üKZDmlNrYHrHdz`ĬKÒ`v´ fS~h¸hT_ªnz@ü{|V¾m^]¾e¸]ºdYtVĖ~~¸¶èRtBn¤¤@ÊVBÌJ²ĲêµWĔ¦ļŔ¦JƚrqÍÒ@Ħ^¼\\ņČÚv²µN¸ ÀD¨ZfhGx~ÐOxjp¦P"]],encodeOffsets:[[[116881,41722]]]},properties:{center:[112.55565490751108,37.86330053190941],name:"山西",cp:[112.31118363708956,37.624790714576264],childNum:11}},{id:"150000",type:"Feature",geometry:{type:"Polygon",coordinates:["@@TVtAK  t@rNefwëO·ÉSm]ïęMyÝM{`}Mm£jI}ŅĆ[`ûukVtIn×ĝËßG»º}yö©É§zGfµ¡c»j[[¡××¡xÉ¥¿ÅgS{¯råÍi×E£uÿ^gv©ĖÃefAg§MQS²S«C|·y±M½Põ]gNÃ[aµBk]Ñcā¡Y¿{ķQQbTUWc»_ß|}CYh\\vUªćlhġj¡o÷|Ë¨W`z h½Òût¥©Pgw¡Jg_EÉXëpábtéwFÓÕ²İÐ¤æ^Ō İ |æĊĮĀdîGzn¯^gbð{jIx`@s®{RËo@d«}][ĝhĻ{`ÿUm]¹XkjqU¥Ée·Tiw_§n©ëÇA­miRk­l£coPw¹\\oUR]kÏq¯kwOÅ\\ºãÃJß¿éw±LK¯coōG¿^õQÿqgÛoé«Ƌ]»yƵ_ǃO[EWíai£a¯Iÿ¸ŻĜ»ƁŎ±fȃÂƪNªƔÊwľÔ¥ªόȪŸǺň¤pI°bÞĻŚt®bÊőđJĽőƕëmíÉÑ£¯mŁýĽjɣªVŁÔĉmßȍ¡[ġ_Ëmþõz]úå|[őçÉÙąÕĕ~Ñ¶ų¨åZovfKtý\\K~àĥŭyO¸¹tuypM¦kþ@ǦœAčcĝZDæµJįpqÂZÃàĹdñ°çZ­`éÚűxǡYwVfZ[NƲäøNò¦zòª¤ƌà@ɜÖÞKĊYVĭŮ§ÑBˁpęï͡VCġ¡m»b³öǍÝbI«diæĉu¶ËʃġU̎ëjÅ¤\\ƝĄËÒɯɬ_ȜưǋˤŷɎŉǴǕ˶Ģ[ҤŲ̀­̐]ΔҦϨäBɤY¬°ф_Gήíɠ³ǴgMØÏǊǛpO̘ãüfæOøAʼŁƺÃǲåIΐÙǰFȔĢhĤ^KǳƒcĪNĶDðÏȄƘ¾CĀ¢ǢüŸ¼ɬè˦ĲzXȬäƢ¦ɠzȂ¢ƎCÔƌFǠW¢ThÈFŲr¼mȠJƠ{ĀD gŚ®Rɠmǐn´^Şð¨hƠ¶ǞLǬÈö¸ƊĆºîE`¤®T¨¤ǚƴ¦xæn`ƞ´nĜGpǀƄĈBºjh°UÚõĮćÐÑrvēĢcO²wßtYX¨Ąd`vSÐrºÔÊæÔĠŞêĊÌLoʂQPĐÏ¸ÏĨ©Śò@ĎcÞo͜keú[äò¼Â^ªƄ`ªvĺÐZ¾º¨ºÐjX¾¤bŨƨ©ÀMǎdǀIȆ¤ĨfƐĨÔ¼øzRpæK¸TLt|vAQ²VP|úŢƖtFĆĄvZôÔDÊzlzOȄgŴVľMXOlb ²Äy®ÜhĎFvOfÀJn`M¶hEt ÊNVb®@Þ ÌJ vNpĂWoŜW®zmĤU@~¶®ÌHCW¼pÀÍ¤|`¤U¾BÂVb_´ºSÊJa¶RvkIiÀV~Q\\°Y¬@pehaÂN¨Ç\\]¢§¢G`TÜÄõª¹BQ°ĝ¦Yt«hgtH¦Ɖ«jcḷ̌ĚǣȆŁHif¡BkSÉJjBTõKsXca±a÷E×\\×QʅȝSiuEĝıʑƸǹÎóHķMǻ­ƿœ­gYţķ{K̟ȨƶJ~_jʀĐZDoɌ~ȪɄRV{¨͊ҶʐΔfB˪ŹǬ·ǨEź·ƞ­bîJx`QÒF ªxS°RÂ\\pÎb^f[r¶TKBn~KÈ~ÊUn\\~EƢdSĞNRGf[®¢hHUvfLpjpXº~joM^ckwjcbj^§T¬QLvxPXD ]zb^Â`Q`BhV´ÎUPhaZOªâ°z¨r¢N¢MpdWtfNb¨wpZWq|hcdÖnAÂp\\Gb¼TXh\\ipFnbanp¨^[|ðB®ÌnJvMbänB~ÌGAtĞfLvZsVCjvvX\\pMzvj¤TªHizXwlE~RIhKr|gd vThHkhJßk`Ã{ěNāÏR£AuX]¢¼ÊÎ`pKÚvCl°`Z¢`¬Üèr`~xJF~ðbCe| T``®K\\TĘM`}vRÒIælzrâMìdJ]ÒxHi@gGJs¶qB~Q]yÏk£]«iKgbg{y­muoMkç«ÁMaq±¯ik°RW|¸YHm¸ajDryJtc¤Bqi{¶¡As°SÔsºC d|¸J¨\\UZvZE^|HTq|iĒL`_br@Xcizf«Kè[taþVi¦Vv]igF«u[¿E^setQ^»hqJF¹o{hWN«o|£JkuosgLoi[l[ubm|SH}Uhc@ÈP¸mĔe@UÂ_hKXtOn`ĶP@ZâXCp¨´ì¢NiZ\\²RÜCfjLÂM HtQKÊkn|EbvFZfÄIWÈLºrX|fJæYl|´qxVp²Tjl@vpY¼|DDqJY^ZºKxq\\|mĔ×wJEBElWBUDOØ«©h[B¶@[\\ÇOpbpIcêsP{v]smFqiDxkwyQZU­YToc[qbsQ]Ymo^kW_nmMalyqAaqYb_uw¡JcUjy_Md[]ruQVeÉFyqMNiwJOyWoÃFYiozSEoIWiuZaI\\kgeQU}FRsxY[]iI\\m½]AcilOKµHdqdDIcv\\ZrDH·oFd«[aAl]iiJhk]ÇCyeëLf³[Ûlc[Yhi³©­Y@NeOSuXqZmÍo·zi_in¡mdeM£ziKmkyjM»dcqmwAYs¥S\\XG£FKRx³W\\|mjnwlX ¯Ļ×µs¹ſķį×ŁěoȥËÛ«©ķĩ£Ýoë¹ƟÉ¥©ÿó§nlm±ªÄ}AĢyPMsÉG{raO_¤I²pCÃ\\õøNnW¨tvS¼JÂrfC|Ø\\XÌCz±MEUð¯Âv_ĉpe´CZjBzBKovii¦[DíyŇEĝQ¡aAF§ytéUihIN§IR¥B÷àñ¬¥§¥CqETMqoɅuƉy±y@ikÍ{QÏIkSLc@QÒ¥¶ëBV½H¡_atğrM ĥ|Gb¹EilqAµq¢X_cXs¡E[WµPYelq¢uĈ[Bd°\\ÊQcÍOq{ExR¾ĔX}BßüiQÍs£DTÕk¡o]X­O{A¤āDÌUua\\O¦RR_w[yTµfÄczH¶CRÇEči¯¢oƐH^łDx¶ªĄzƚĂX¸JZoWbwys^ÌmäýTÀeqwWmQF±]}Qv_ÐčK©_{Cuf£uQB÷JZmvMOmýl±ct[w¢Of]¹nzPtZÂ¡ĄHKĉOX}]j{}I­§©OF¿]ģwÃM×ËJ{g¶wğ}¹ßRqifAEe¿¡\\I`ãGyQ`I|gRĳ`ïYj­ÊMl]Ã¡@oµ][`ÁV³@¡@ótU\\qáUDmsSJ§£YX[{_V¯}£A½´HlyÃKw^i¡CçTM{Ç_§YgAcsWn·^§U@u­VSs{SLqią£Za_čvaNµsVÃR]WWi~OGcJwIIk³­X»VU|tQeCêpE¨u^Etqbk¢}fOd[ąEÅz¿ZOp§ZeR@pJrg¥{ícËKk]TlOLwAyQÇ§¯AbUcXekÇi[twBgkP¡ÖwHmµAAkI}oYCÇali¹±WyK[s{ZÛCĥXZ·aAÕky{ÅxIďRĭogZYkp¯hYóO°¡tGmjP¨¶MVAÔLxÑ¶VN¢kh©b RTrqtRuUPmuwÝLµrOfb¤Óv³EjÖ~Zd©¢`uĽĀc|·HxkLÑ{MÇlÁAMY¯ZcAynDF£mQµAµjñ[«B^_iÁMOME_]OaBG@sYQI]KWQB@qyVÍlÉ_ĩTtBÁU×ëNk·G}cLO yBy}»EjxÁYW{×WeoÑ@_}ls{}ÅPw\\@B@A@BW~ÒÁeeVosíCão­M·éawi}_sÉSi|oMS«QQălmZŽ[PºMÒw ®Vbl_tQöY°BRIe]áJwWóp¥kOmEY{·UÉXQu½Áå×^Qc~k]½MIRËŇrÍQ¯oomiF[oMcØkgÇuQ`mWjj~rgkB±·g¤yĘïlÀ[_O\\¥fU{upPAw¥OioPw}ÏHweg§Y¿C·M±¶ÙuŅċ»[ĥ]Ñ@Îqrƙ¥Iœ¥ĻēXé¶ı±IËAUÉ@££AmQsµç}·}UĕsZ¹c^·½f]^½n{Uû|y@©m`gSg·T}eu³Ñ_īLy_c"],encodeOffsets:[[113800,40318]]},properties:{center:[111.67741976306763,40.824033768690825],name:"内蒙古",cp:[115.08378545846068,43.33741790841639],childNum:12}},{id:"210000",type:"Feature",geometry:{type:"MultiPolygon",coordinates:[["@@@@¨YPoÀYÆyĆF\\cP~el¡raFsv]F§oéfDRsV{¼UW´®JlxJIHd}PXjXQ^ÄtU¶MbuĎb`YĆ¤rjK|TTt®U@v@@¨V¸]mXdtBZh¨È`|SNè¢Djx]ÄLzGk¾³B¤°~`U\\|ZW¤I¨tTCnâVrV[ôs@@¢´ÂU\\_¶^@pÄ¢k^ÉNi®ðZĴ_hQJ{_zRäHJ_¢[À@@@@FfBjeràQºĠ~µxhI|ØÌÄNĤx^ÀEP¨ªJ®~i|~^WPLĊL lC¤d¾}@@K«|]@@^ÌgÌ»ÈZdaE{°EX\\k¢CVq[}þ³ºýáq®FfaUy§eQÂBĶ¸jtZFpn@h|R¤fJ|ĈbL¹¡|FsoãP·bpC elµymnpUGza¸N]Nompgk_QSYeAf_]R¤MXmoo@WnM§ªCVuF@@oHD«N[ÑyM_ºGYčr@@HK@@ZE@@E³_xIÊh_^W|«zS]s{B§\\yIRjLxgcunmHRT{®BTYi­¬WsOk}vKYS¡qE]{UIÊteh¹OwURgËIruK£AkKEHn]oduKaåQÉM½yUYBaµPevã¹ā©a¥ă}ħÑoK{çÅS{{m½sAGsCwqmă©Hčo©dś\\cQę][f{EEw}iLsU©sM_íoGpHÛFGbW[NE}Piw~ýkVWwMk}RçBYokŃFYw¯s£aÝPµqo¯é{sNY]SrwU[¡Z¥¥~`ÅVQU¨y^wµy·|]ªFewÉXOaEÂuU¡Uµ@­\\¯µġIT³G»Ã½Bs¬bpcÀfd`Ix¬DpeÒ~ÆRo® ºàLÖdpzzxªtE¨¢@cxJEn¤SI`pē¹C§^DfVExßh}Kajeq`B¶¼cteqDbvGľpDBhxX]¶¤Xp~Q°bÔ²ÆI^Tb´|vî¢ ºIRmBSðF\\`@¾T~azpwTrvbcrWBllQhfBBăÎat^¶u]±QtÕN_~Cò§H|wÂOsE]¥a±\\§KoiDyDux¹FBĉD©TaoK]{·n©I£«TcÙ[GnAn_[oVmDH¥HsëE[Nu]§ÿ¯MowUw©[DiiLÃ_iD¡±máEĉ¡ģwkFŧIogÃAQZ@@Rb@@}Q@@GL@@Upr]Ô{YO@@X«ÀWfä© flYr±Lsi£NŃSZtV­L]Qe eZ§u»AuxcI¥Ux¯NXlyNvv|Ĩ^R¼W@@pRZ½V]xvÔWz@PÂºgrAJnS²XºkjÈbDpZJ~Bl¶BGnÕxO¢hlAsxj\\lÈWfdaVB¨°RÈzBKxkPS^LlÌîd¦|hqI@ofQ"],["@@JAďBãP¬¢Ve"],["@@gxd¦XSo^yZ}s"],["@@ABAB½CNTĖLXe¯oIv"],["@@uWw~jHm"],["@@\\[¥r`¾I"],["@@YIDd"],["@@YNrSFog"],["@@~MGo"],["@@a^B¬²]Ji"],["@@FdQQ"]],encodeOffsets:[[[122435,43311]],[[125625,40219]],[[125279,40096]],[[125644,40181]],[[125712,39969]],[[125982,40502]],[[125451,40190]],[[123693,41451]],[[126048,40380]],[[126124,39968]],[[126693,40706]]]},properties:{center:[123.43572520225906,41.80244393685758],name:"辽宁",cp:[122.61179789392311,41.3058900045263],childNum:14}},{id:"220000",type:"Feature",geometry:{type:"MultiPolygon",coordinates:[["@@@CieAR{wRq]bi_SP¡±Bv[gmÏgfÉsJV^|rFT¢ZuLl~tP«Xj®SZ­AS|QGmndvwhiKQJ[zA¨|^tyT{¬X]`ÉgwJ`F´@@YF@@GL@@q ZĎH¹N`ÒzM\\¬ CGp@@EvU©DN¨mX@ppnW£NQ^e`BfTZRl`ohnMp^·MybHoVmznk¶foDaO¸päEt{¢Kºća{IeQ£g{m@EosYiĵ·ÁAR¨fVzeb­Erþâ¹ý´\\~Ur¡D[lW¯FF|cbÇYË¼Ëh]@@{^L¬@@½~£cDkKăGÁ¢sYOmyºe^¡P\\xs²dþk@@PnuNYnøIAvRe¤Dv|`ªLÏĎu`~R^E²nRXrx¿fSãþËn]ztaxXYp·IWƙāăyµ©wCŁ]ƏG¡pj°FĎQÈµDGyÃdeS¶\\zxQ`¥QP[vbËVC£Ă|BPW®p^l¢SÖ¤CtRÎûjAàW~ē½Qw|FPrÎdÉR¯[Acć\\¡vkrZfO¶X@@F\\¢Wt`dW¡¶rrBjkºFHaĦ{NĠqsb¢`GU¾ìA¦µRÑd@ KTlÐJR|Îjlz@z²ƊɆvrpNSrFD¦ÎvoHk@@ÖVnSvÐ@@zÎLªC¨NÖ @lf|pDOxyom`~GUotqmclYKrWLs§On}OIz}ÄiL}Cx¿\\kDyFkW[itGeosÄbXMQ{p_¼Pjaalraè`xWXIx¨]Ä`Q rb f YC¬vvCpÄCrÃQokaxªUºf¬]dh{rSn²BdcînvUzNpBóc_°uPwtBÆJQJ}¦PiªCp]¸lT[¦lRdÀL ĮtlSz\\ÜwIUu @°{LoÂVĜ[N»^Gg³g§Qms_¥Z·«SZgC¿PqxJnS C_c¢Y^xĮOƒ³Zq{§NgWC¡mwþĉ¥^LupïM]®ut^Kbe¦Dpþ`¤zEtyXXX¤l\\_tjhaHUìb^ÄnDZàr~SMkrK{yMtge¿dSkl¶ÅTµt{|WE³ºVY~hSj§}gGf¥\\¥ÔZZ]¨_rd²PªnpS¾D_ZEf^iÚoh`[¸lVpPdr¾IĺD¢XOGhEnÒÆ¤ZYxpHzW¯J[yf¨adJtx@T°°@TlXFA§uy¯[_foQfwByf¥rK¨R\\gÎS@@ºGMILe²K¤ if£naE¬¨ÈpĮéfvE¸IV^EIegf£oKÑ[¥yIdWU¹gC©Ccb[EKM{{så^a[z¡ÁUj¹qzAc{F[W`B¿{E{yÇ]¹dqeÄ^ÂËU}«]I§k@qÃTJ¦wVCxºFHmbe_WlnsT]]xh¬P_zF¼\\¾hg\\£ETQhtRMnpl\\cIq\\CS³SNLWkf{yGU©gaI±wa¯|s}HUT{¹Hizo¡¯¥¨z§PmPlJZssFkub[ï[Qg|k©nQ_gECixGN{£i­ÃGS{}_Ja[C·¯OđtaQb}Aib}KQmċMh½AġPǡG³mÔ§T«W­R¥Wb¹M¬«b«aÁJiÇK¯qVjfÑB¤QkidNm_udY_b×NăG¡Sch¯@akS»VMaC[f@BYÅj@`¡f«No^oY_¬@OnPTdÅ|hvMJuxEZkPÏk}lQÝ¨yCIoaYP_yafm_Áš]cwv¹mÃÁemOÅě³"]],encodeOffsets:[[[129224,42108]]]},properties:{center:[125.33107201037413,43.892575677007876],name:"吉林",cp:[126.17788454210708,43.70960674928309],childNum:9}},{id:"230000",type:"Feature",geometry:{type:"MultiPolygon",coordinates:[["@@@@ÏumTÕU@@lGpÍu¨«¦ßòAøQ¦¨JMJjgêV s¨zEB¢bĞRňFzCî¥\\jujLpyAAYi³DofĊ`Áuï°VF²NDyËW×[D{qeÁ»IuT§smXM÷[öDÄ±o£JP`qbH|ÊNtOġz@@BÃ~@@©²nk@@mô¨Ā¦ªƠÊìºÞpĪ¤ĸª¬ÜȦÌpłĜİØƀĸº¶tļØ@@°Wxkimn[{X´QwL¤EHW[¦TZtxBrncd¼iNlzLnyjN¤cf¢nm `jyj¸pnÎYWrTvPfM@Z ª®j´gZ\\dÜk´\\KeìfzD^Ègl Ijjk^B\\bc¬pEG¸qC[YuJdCrcGcL¶kPdjB¾^[njJ\\^wZQtEV~Rhf[lJbvYXjJFpyTjpZÄEp XPzxIjMrNEzÊUfvRq \\^c`NizdV¢Ivx`ZabrrBzkNbmnX`]lpn^ZRtrad\\Sp®ZYVRxzl wCrjnEtu^O|tédoJoaP[È\\µ@A@@g\\@@ª@@×¬@@CP@@AV@@kX@@AF@@IF@@@@xēØn{[wr¹L]YZICr{C»Zuo@ik±SUorw³k{åZeIW{¹qÇKXÃJYeEauFm{ÉlLsRGÁNKeiÛD±QY[j ¡Më§³DoáW@YĵOm_sPWLgÁ`@Vēf·nÇO@gdVG~{Tanvk\\j\\KphptvIl{¤p¬MgXp|EºIgr]¼sRf]tÀF \\vE¬jhu^¥UjýUsbç\\L¬yejWdq@a_`đK{jSr{GF]uYVY§[I·{c¹DÓt¯TBtµ¢j|r£AsdIqziC·bGn·Z{X¯Ql°j²brÂNè¬lNvp®n|zahLh¬j^¤ÐlzR^}AµrIthH@jwGÑI^ø\\Ğ´G¾rºZŴF¨MH¦ÈORìp}¾}¼\\IÐXÆKøJÂOÊN¦jĞnDSVªZCîmºCfwvUXVgv^|MXgwqCfF¢a|¢DªUÊ@ĸ¯xDÊ³ÌtLö¢×SpqªMTSÈIxLôA_Q{n_®KHhkê|ÌTĔB¬K¶cÂxAĠ¨W@xU¶|tFviFm¶[I§Ó}DXQhzDlb²@vMBsÌ§\\{|ufAHÂGWÉcz£WcÅDqkEojuwrLXläÆgXsÂR¸§vIw_NĘWHkF]}K{Y¸O®gI¶qNa£çuJ]EehuI u¡t¥_\\}ªIT_Ud¿boŢN]wyP_cØOlugÉJoN}CZZYrdTjêVZ[Mw¥ud½JÝÀÈÇÀs~yüŅºuTkaLÜçSk{¹XW¸aL¿ØsƂH»gïçK½¢¥H_eÃF¨ÒKj_FÉxÞè]¬bªGÎ¨GÂ[¶pH´mĢHVèUaºYz~¸YVq¥C~Säh¼qæU¤ën[¸CzZ¨E°EjXG `f¸PÎcxybăgþfSO£qÀCboQqXiKl{_cfiìg®mĚ¿fsCŎº@~¶G¦hÒ@RÉÇā«AoÊeVeJãvUÄv²ERy}Datw}}QeuGû»Oo»UĎ±j_ÐċJādicðIÊZ®~NòQĄ`ôU`URnk¨H¤ª@ì{ÚRÚYrîSÒFRG~Rbnj HĈöQpA¨ltts@n|f@ s¦AÄÆĞrfVvtÞrªB¶S¾oĚlUĀPx¼rZÎUvF¢Ê¦NbªJÄh²BrV K^®ƔBÌnÂ\\Ü]ĴDÊ´Jxf\\ÌWBfxkIåũýûMïÏåÉF§R¨OfcOgRĂ¯L¡õßW¥§§yQSkųMUEi»qsiiß®hwF¡U{ãWq_³sX§A_x}gkE¥gÑù{Ñ¥Fs¦E QgÁgOo®M]mVwQuIXa}}xg}i·S_{²¹Iu¹½I½AF{tMiiDuuID[OdOQu[BUpa·YV}G§sQPóA§IykMDÁu[Ta¯X¥`QZD§EcugAq¹ON¥đh̵èȁ¬ƝwnT[ª}HµGgJFjg¯SReÁ³Ç}adc]¯n{MsVoAguWT±aGh`ÏqXsocħN}I@s¢CJwr]EylOǖ֍WgábKQ³³Gf·a_LdWmµLgm½ÞxLU·JuFeĭêÇo«§Fmbe¤j£±LKfJN¹H@@ÍT[h§QqLe¦zAexpRe\\`°vzB¨EWkS¯@¯Sw@Isc§be\\zI°yXGwoYZÅ£mÑFHgP¡WĹC½JcqOUo·k\\g_pjÙe]F`YC½oT©m±Oqc§`Y^ÓY [¦¦eH~hi¨gT}Z¹UF´{Xs|S¶ÆµklcTfÀshzNL|qNl}TqßCYÃma]ëVGgbsi`[kW£WzWFs£yý_o¥CafLs]­vN^oðv]K¦ýĊnx¢DhX¨M|YrƑ´ĭP]w¡Z`dDTImwOrDÀYhT¬Y¸`¦nt¨Rh´h]HM¼ě\\ÁUKp¯|@vJVÛxy[kTĭs¿KQc¥kS\\·ko^©Dj¥OI~RIÅsAOx¯v`dAôoyMVuímcd±ATmq|cg«^¹e©VwbplRqÄÃDouDuD«ZeaqRÃ_§^JwWXwç_qbkbbi»Oo`R|NWÃatfpsH\\jXElzC[lÀw~DKÃjy~JPm~¨PKtqXLkZndsrVp}H_pnwzPoCe{k@Õ§M©DÍKy"]],encodeOffsets:[[[126542,47340]]]},properties:{center:[126.6490649317503,45.76274263234975],name:"黑龙江",cp:[127.69942004825057,48.046773516679686],childNum:13}},{id:"310000",type:"Feature",geometry:{type:"MultiPolygon",coordinates:[["@@SÞNl¦NôM¸raò~ ¢anNhBa~|d¶ÈNa¬n@@Z¼İëàiļÑòęŘŋ¥\\¡Fė`wYȇJã[ë}ûÁ©óCC_|[©N^ YmpzwdP¤WÜbQiN"],["@@jĽ[{ûÑRŗ®³Tß~ħºKoéÂťŘuLæÜÆz¶J¾ ÁÊcĎ¥IÒqɖ³"],["@@§ſæ¿XXSf{ƀ¡¨B]Q"],["@@Ql¬GĚöYÜGL[s©åxëBûXCx"],["@@ªoIW"],["@@PZ¶OY»Aa´"],["@@K]u"]],encodeOffsets:[[[123810,31768]],[[124910,32382]],[[124709,32069]],[[124732,32116]],[[124553,32206]],[[124877,31972]],[[124815,31997]]]},properties:{center:[121.47917622247735,31.23766067156306],name:"上海",cp:[121.4451336279875,31.078921633091007],childNum:16}},{id:"320000",type:"Feature",geometry:{type:"MultiPolygon",coordinates:[["@@@@TJ@@HL@@bg@g¾ÅØc®Gbx¦Tt İySÄDÌĠONvRĐy~JĚsim{DÕAFv´AZhøStZV p]ò^EYî¦²PLi´@v]¤^|gdJh Dz¤J~²ÐDèÆt\\Sî^ôAnäVdQh[O^_GMiuÉF±W^¿jyAoÆSÀHC`¶}C@ħCÚGÎ]»½Ĕµk~oŞ­~}ŶuŠÉǬíD©ÙhóĲț^¦ħÊýÆśrċz}Ehy]rw~įCk^grĥrQĉg[¢c`co¸OŐÛĮêQ[{růgL©ìscaȠÝZuìÝõæůJďɕ´ÑrJč¦ÉdÂ½µIÅyåÛvKŦŗêÁyY@@«mMbÇµ{cb}AgmM¡b}bñ·qóN¥MkMTÝwd¥Uq¡R[_rkJ£EyÅPqg»Ý]L{ÜcjMºWcÅ_Z¾¯_ýKÕTh·¤§n[qÄQ§Zau}ÃSSaw`¯qkÇ¨ÑGml¡E^qYHyYËh@t@§C_ùN}IħJÛW¦}DKt¦lQ´XzdĜDfGmº³GyÂuOWýb@l®hYzÍW]_ZXp©XnÀbLlĝ¨t°JúXÊI^zŒ`~cªvcÚLÎ¿K^b°vHp|^ovb|Kt@@`sn`xknnÆtcHB@A@B@®©ÄVÁ¶ t_lÌfV~mFÊwİÑE·¬äwF·gDFb@@AEsCUÇÉA@@Iãf¥cÃrÏqWTÛQnwDY¬{QlBÀ§DcÈflVXn@q|A|qòEÞv{£ġCd£|UCEbf®WzT¬p´aVĴKn² MÔ~«@w¡VÏ{·b©Eos`ThĬKbW²A¶ay_s®{náH´iVgYÅF½MvÝpk`v®çÀ\\Äm`Rt»hågOp©f»BÍjDfē¾[`Cj³UfÐyJJNJĂĦZ´^Pb²AĔkBxLZ@ÄN©B\\{yIf¬Y¢QXT ÷WxýædJjZK|"]],encodeOffsets:[[[120134,35398]]]},properties:{center:[118.7739275401509,32.04749630515097],name:"江苏",cp:[119.49289917813071,32.98983676715044],childNum:13}},{id:"330000",type:"Feature",geometry:{type:"MultiPolygon",coordinates:[["@@ s´oftnd®¹f`feb¼@@@ÄsjĢÁ\\}üÙ[¿Eev@@cU°TlvN af\\NJØ¼O^W`~Wª²ÊOS´p`dk~Ī^J´\\¤`xU®ÂGÜČÜC²FPüoI¦lB@bÞq^wÆFÖwÖw|feØ]NV~@¤~pm®vTÀD¼Ur­kzzuìlh¢ldH°GÊ¢PxlHeLfZC®¬GÈhfst°x_TbÄT~bv¨YRrÃ\\¨m¸£gÖSþL°`Y½Æ`XdN¹di|Û^K¼ÞrhÆOzFI¤ql\\`¢Qr¦VcxMRjaXÛO£xcyonZ]ªM\\`{Dy¥_ù¡úå}ĒMwpĒãÂÕØīdB ¿l_ÀB¨îªFyŐTHog·»Ç[ĕākf´]­IuyJhscuCl[Y¥°KDeUJ³oBBceGç®qg£p@W´e}UěPsqA¹®}A|±Dñ@d·_ïėwbSÑYX§rnÅ]qtPTmç¡UQh¥D§­­yÁDyÉïWPiĂY\\£ĩoÂ£KÂX@w~MA¥Y@@GQ@@]]@@d|CjC­°TÏėj¿©o»§FaÆç{¹O½ïsÏja{ß­i}Nµ¼C zRñĖEÉUUYñ@DcY©uLc£Skā{ÙP\\nVXzudPLÊep}F^PIfVÃOcBíyck³]s¥k_KÝRuZRQ«Zeh@Fm}u£Xà|J¨¢KÈĪUÎÃ~onH¶]¢XFhAXºiCqoL±gMrăiCqbU"],["@@CUfá[¥ÊXdMp£¾jnĀ T¶ŠYKwniCgCrÝv"],["@@qrTztP["],["@@DAq¹^fV"],["@@dL~}¬VJyęBB"],["@@\\l^m@fy]ÇßVă Ė"],["@@bpÖ@T©bMgãPL"],["@@T|gcMZx"],["@@QBSJ]ZOvlje\\Zl@Y^{J]¸"],["@@ß\\_ZE¬ĄS¸aC"],["@@rBsW"],["@@°agSt]]½wz\\"],["@@|dpcU"],["@@xZdJ·fsÂk¸«N÷´y|sö"],["@@O~I{s"],["@@X®k]ufÀ¢N^®Xi{"],["@@EIRUI@IACAGRBDGDBDB@BDRHACDA"],["@@oPZzV"],["@@hzlUc"],["@@oRVFi±"],["@@eOt\\Ti"],["@@KLIÄR®KRµ·qZ"],["@@B@d@d"],["@@rHFwz"],["@@Oe|v\\"],["@@jht¢LXi"],["@@nQar~t"],["@@A@C@VdyV"],["@@NzZbI[q"],["@@@@@A@B"],["@@D`k½YV"],["@@fpC@mSsV"],["@@qhn`j[ek"],["@@»VªDs¯o"],["@@]`vn[«q"],["@@DAFG@AUEAHCBFFLB"],["@@y`p\\J{"],["@@Qw\\n"],["@@|B]s]r"],["@@||`Qi"],["@@B@BCE@BD"],["@@D@B@E@"]],encodeOffsets:[[[121283,28974]],[[125102,30715]],[[125154,30917]],[[125170,30431]],[[125373,31483]],[[125102,31065]],[[125260,30982]],[[124962,29886]],[[125316,30617]],[[125376,31145]],[[124769,29467]],[[125206,30569]],[[124721,29787]],[[124877,31522]],[[124822,29162]],[[125122,30369]],[[125408,30669]],[[125519,31386]],[[124802,29112]],[[125336,30697]],[[125002,30911]],[[124782,30703]],[[123979,28145]],[[124886,29895]],[[124974,30481]],[[124892,31021]],[[124874,30844]],[[125094,30697]],[[125230,30444]],[[124049,28460]],[[125206,31003]],[[125225,30584]],[[125735,31438]],[[124012,28615]],[[124101,28641]],[[125400,30682]],[[125791,31442]],[[125140,30695]],[[124965,30681]],[[123957,28657]],[[125418,30652]],[[125091,30697]]]},properties:{center:[120.16010475263418,30.29339488572421],name:"浙江",cp:[120.11636288468237,29.187764563084855],childNum:11}},{id:"340000",type:"Feature",geometry:{type:"MultiPolygon",coordinates:[["@@@@o°@@¡°Pz~doFrihV¹w¡J@@OO¨¿tLDjza|btXYxL¨o¶QRhh´VDi_\\Ĕ½CeÎi¼AªePoæh¼gQsn_[Ãè¿u­l_ÞoNu¾ÆEhZUj ³Gâ|mt­`bzBµ±XLagī_StpªF¸aÐ|¢Ux¬@}NÓ±LmUĳ³boS«Xye­aFDV¤{DcĢ|¤uFÝrñB{r{@WmUekdÇ¨CA¿k|RZ«CxmÜRXSÐrÄq¦deJä@@ÊBVÈtDFB@@EaC¸hxEã¸«ÒFxįEÉnU}Ëe`ksµÂÃU­ªA@B@A@GdÅsmmwlm__t@@s{Luap{]Goua¯]ÀLKÍdÙud©}ő_]yJÉWIùs¯Ğ§Kkam¿ªWWoY^`ÎXZyg­@kþaXvPzÁ´Hn¹HcBU[vKěyc³WkRs¥L~C¥ÜXĨI~JúMD`¨@@sÌgzZGZr]¢FnkÒHÈ§rltsgeHÇ­«DeYKfkGw¡OHÉ¯Gc¡kgëkvyy®lVqC»¿S­uon£}}@UM×^f{eÕxxÕExÅr]Ý@aAkJ¥pOû±EDċÛHÛ­ÁwV_£[I³ĩ]}clo_T³ÉP±³nQ®`d¡ROnZÏ{»CßpÅiLW}hoÃEiNpNxB¾¬L¢QoyisZR_{XMiC¯}¦\\oyoHÏFkuSÅqËMi~ItÃ zrNDPABMVsFöþfUĐĐd²oC yOevuE­nEyŕwWµCĿ»¿{Go¯XQMà¯ÔdÈYtT¢ÒTpÉ¢YçpXr{u^ÈmpUyh{GK§¢jÊÌHZ¸_\\bÊvÂxC[´AQnËZDr«i{gBg_ÝöT©c{¨@E}äMVlg`be~pÂhQf~thEļê°Wja@@`SzkdDr²UphºM jĮ{¾[ƎÊf|\\~teR}ÓËc{{hïShqmjK¡n[rBB@B@@C@Urõ´FvěmB~Kq`AeÚEºTl`kvPPağRJtsPÇIwhR|EYÈ_FL|rKt¦_ńDv¨\\E\\dE°´Iv@HoyL`vY|@@®lhzax¨VĈGFZÜRÖ@º°Z`YdĀëL~ÚBpz²D`~¢C~bÖ[LsrA@vxe®Ce£Þ±G±fovBn`ÀH®ÜZ^n|I@¤pÔXRvÂgZRCè"],["@@dACeuLV\\"],["@@NUBACOqMu\\h`tE"],["@@D@@@@AAAAD"]],encodeOffsets:[[[119405,34837]],[[121728,32283]],[[119507,30427]],[[118288,33254]]]},properties:{center:[117.28960111387359,31.866967646899777],name:"安徽",cp:[117.23329846078855,31.855547493510652],childNum:16}},{id:"350000",type:"Feature",geometry:{type:"MultiPolygon",coordinates:[["@@FMrA@AcgËZwk\\u°QDg±MÍ`}ud·{¥NFb¯mFŖMÙß^euRvXM©Ç½±OA¼ËNãXŏo×¢epy[ġQM«~@ ñE±{gÁ«Q»cwMµµ]}gÑDgWg¿Ps·ñ³ZUQ½]RÛ}íIUjĉQ@ÊroKËOÄyM®@sÈjTJÊyRm²HÀÄ®mHJ¼oNJq~RfÃÔlfyLD°ÒtğkamZ{aobVÊK}~FpLl`mMe£u«QN{H{¢}íF«²}MÝr_\\mn°D§¸°~iwPPyIÚxh²El~_®~Àc°rFp^k¾vlA¸Gn¸¨h£@¢\\KlnNSzrĖêY¸YXP]xºrTlbh¤U@¢NN¶~¢wA[·¢^`ZØI¬[~J®¢~ ŜQ¸tv_îO ĖĂn¤ZHhRFÀtzmMØumolP|irI|df_ldt¼_~N@~LªNÌw`Hp°bNrvXpQ¨_®đYwnV¤²CÎ¦°HtlWxĈgCZOrjWtĪ`JÄ^~PqzĠÎTEV aDrĄjNq²hpKrjD¹ WBgEW¡^GµpmÄ}VÍĩLÇ¡I§{ß¤W~vEn@fg¬YRQvYÞQL`¦lt´^lzdîAdÄPUeJO]~EfoKÉcOvyUW[mÚOĂ|l¤TdvKªZCdò@ZVÊVFòĕyQD¶»·UgğPZ­iOJiGwÙ©ZÁE[Å[JKjwF}EV©qz¯q}\\±D{kTaå§^pÒ¦|¢@p~ErÌ¢SdğCI«ReSz}hĹGwmc­wxuÄnÐO¢w¤ŇAi¶ß¬fRmCe^_GbāmW»»^¥{\\ÃNpkyěµ[ScCůmS@{¹@ÏmJÀMKªN|IpALn^Bbrî¨J«®aWeªm_@Isnq~CDq»DoRíKJOn© D[Rq_{©Q]PrY¢map{}¿HlxknJryJq^æ©@z_¥T»Å@sbZ¤gXiZucFMØin§NbªI¢£gNh¡{zY· o{|zQgõuY¾x·KSFFnMhePÅc]lzN_rDKa@uançm¬Á|GP]Ï`G"],["@@OtÍgs«`©Yo¡~X[¬hR´y´"],["@@wJA~lx]tPa£qGct\\"],["@@Bn~h"],["@@Kxzddeu"],["@@FI"],["@@Fqygt"],["@@U¥¹`_xtàªh oX"],["@@Ss}Y"],["@@pjjcmu"],["@@DxJImS"],["@@°dD{CW\\"],["@@bl[a_\\"],["@@cf\\i"],["@@xRhHa"],["@@a|npY\\Tmo«O"]],encodeOffsets:[[[121868,25576]],[[121261,25110]],[[122346,25808]],[[122457,26249]],[[122863,26826]],[[121075,24993]],[[122792,27337]],[[121048,25100]],[[122815,26768]],[[122521,26763]],[[122922,27131]],[[122541,26269]],[[122642,27259]],[[123026,27195]],[[123256,27570]],[[122547,27274]]]},properties:{center:[119.31274248535382,26.081376135578243],name:"福建",cp:[118.0129436390603,26.07562574788706],childNum:9}},{id:"360000",type:"Feature",geometry:{type:"MultiPolygon",coordinates:[["@@X©}X_]»PI×M[beMuSk¯dV@@fuFÀÚ\\~ûÂ[ġti@Ã@@a»f_eºec­smpet³SFğÍryO]}IÃĩ_sXiPqYDćhwkXs¯GÍ¥D£±mUxZ­Ē`§oRWquM¯aGox_MË©K@}}M»`cs`kce{qJjO{knpvN×nsyE¿QGgYm£ĕāPíu`·sRś}­¡I\\}«JY×]_¸¡\\xB}¡Mµ¡M@Vg£akqSw¹^OWZZ·ĕéqTyMmkL¡[@¤§gm·HB·ukl½o]Eqd¯}¿`­k}Fg±ÙwJzOxOj¯}¨·¯CnmMleaDxfacKsÅZaiuZEkdFm·LkÁAcºÇjE]¾fºÁg]©pSWi×cãiuHiVÁ{}Xaáqgme]r©GR¶M±lĕÕuXWÈwhÁIUpË^kĔVTp®tN¶°r`OÖºvBh¦Hxlz²NUrxÒlA£bPXP¤{ÝR¾·~ÁJQ¡sÉjgM±N]dÙ]uyD_wmpX°lÉªjx·AdðpDEÐuXøNTº´´@ög¼Sh_Xìn¢i¨Váu[gÙ`§[p\\L¨zOnv¤c|p@J¨hvEøõdmzëC«¨MĘc®\\¬b{®diÀCPÊîvÌe^f@ŧye`AWvbnKrIj|A²DlÄ¸M¾y^p¸Ò¢nSf¦[nv~@Hp°Sntmpæh\\¶GXDnF`°|AÜPzBfÃn_v«r¦S`Śgfb¦{^¡SiHWoxHccLlg¢T¢tz¬ĚZèdNĠ¤jGÄdta®BÐxx¨`ÌQfqtpxE®l|Ot`Ul[Ze{eyzUvzej¬zs°^CÌ_FØZp¤sTI|Â}ØJff¨Z¶¶¨RÒ|ĎB²RW²ØÖq²@ì¢rR°Wp|HÀŀ¼¶DxXŖzF®mvFufzPDpc±ďďeVõýg_v[yÄJsj}ÌNrÆTlvEÐGzp[p¥°~DjN|W`QYtjpzRK¡«A½wMMojÄFp~gXKÆjào¼DÐ|YPmQ¢_cR­´m"]],encodeOffsets:[[[121037,30108]]]},properties:{center:[115.89863778631067,28.682531197462737],name:"江西",cp:[115.73957082758929,27.64179243428184],childNum:11}},{id:"370000",type:"Feature",geometry:{type:"MultiPolygon",coordinates:[["@@gQgRµ§pkmLÃYnMuũkWSpùZW¿dÏK\\­°yö`fm¾ğ®»]cZzP^¿E{ «E}kb³Fwk³Tz|Tbr l®h~ÒbEzbîĬCdvaRfPÄEÐ¶¤TWÂ^ĒŢpĂJÐ`FlS\\nlQRHÖ\\ÂE^¶êMÉ¹ûeoTgIeÛQ§ÃAÏORUEM_yY©·{yd|ĆUTîBàApOČQV@@GdbL|±[D{´^huLc¶®rÜVK®Æ`|¶FƊ D|phÈgpâÊ¬QvC~ºLĈ¤p¾ZjIÀ`reG¤·pbhebT@@m\\dWd~v_ZBBAABB®¥\\|hĀöz^¸¼b`|v@n¨²[èVĜ[¢bÚSTðQ¤læcT¾zV´@@|tĲJ¤rRIrnlh¢x DmĸÛxXÈGÆoĪkÖIx[fd°U|¥dOnT¦fTà\\ĜLĆcÈxćĠÙbÕyªfxªQdÃ{ĥcuQéHŇ[k¥ýF}¸ƭ[^¥~_NdCRqÌ¤[i`üsDµxqTÈ@ÀTòOĐ~h RîúPx~S N~êTpºp²Llb¶bàªrpL¶`El¥\\PlŠJò¸ÀMÖ^pGÜĘSND|NÆ[F¨uĊJpqch_Ygty]ò@®\\QSGJ¸dĀJfº~gĜOŴPØjh¶R\\\\¾HZi»xd¸XmK]²cäDÐhPk¸Môn_vJXuke`qHsMtDÏ¥]N{¡N£qKÏUmvEèjPcZsÇ]Kv£BnÕEIicÃRIB¯VI\\pYz±El aJQGmuOQøqIƅ·Kyg§MghÛăhqG¤Ânbp·ySO¹]NZU[@ùié£ÕH{`QctªKla{Xwe{DV}¡«oVl}ÍIÅÓ¦½åFQ¥CVĽ^yD{]yLkgN@aßE¹EãJÌĮHloM\\EEbMIdK}D{_PsO|y¶GG¶~OhHJv]UI³£MsGº¯y@Ym¡W½dsÓ¯AMg~SÍ\\oµyXKt}P¡PC|E³uBuē«TqK§l­[ÿ~a­gB¡EgRcãUmóBí][TÅsCç±ÏI}y£CgIhc{£]u^³@Kj±Oí¥ZF]^ñoUsY÷TYg³BEuBCÖ|njęt}IďzQMuğPCËTÃįzs¥Saw­H×d½Æ@hha@@GK@@SI@@L{iYIåcwþXøSWR¡«ZezJ[|AMªÃ@YwKAēl±BOa³]ĥYIāMIzIeÏ"],["@@q@ynP~"],["@@HPsl"],["@@Dx\\X_"],["@@Q¦Q"],["@@odhVHy"],["@@Zjl{o_Ur"],["@@s~DI"],["@@\\Wk"],["@@ABBB@A@A"],["@@D@@ACB"],["@@@@B@@AA@@B"],["@@VFPQsSN`"]],encodeOffsets:[[[119174,35478]],[[123634,38865]],[[123596,38902]],[[123901,37294]],[[123656,39072]],[[123828,39272]],[[123050,36630]],[[123529,38863]],[[123709,39210]],[[124413,38485]],[[124409,38487]],[[124411,38487]],[[118274,36764]]]},properties:{center:[117.00729904786878,36.68215318771068],name:"山东",cp:[118.19409406231229,36.38230554605333],childNum:16}},{id:"410000",type:"Feature",geometry:{type:"MultiPolygon",coordinates:[["@@BC\\q¢mLnirTgðg||dÔÌ~fQs}[e{É\\ƍ|½iĭNg¹Voq±ClcyT_@@bi¯XĻégFse}RgoÁ}faAi§PD|lNÔfoB¡¤KeRekÕfy³rßu]TgjUéL¯´qFUN[Àp^ĐHeoñ]f«TµGµæf·Q]{qÓU{iLºrk}GoBuVX¹vÁ KxOÌ{]VbTHTP@d]v\\T¥Ms©ħé©xoG`RąÐst«iE}KUn{G«sQQãZo]whíEgDÑVfmKp]w­HyµzKĹÒOmvLÙ¤c¤£snu·]t¥PāÐÉAKz¿¡a±¬d½EÔï|ckgW ~]ËE[RevYB¿¬Ú@}¼~@Vo¶B|óv¯¨Px]Fy¥h§@qpA`XJz¥ÎYHànZz¢i`Ã`KjJËtUpHª}²Ï@@êXx\\RXYÂnwàrĊE¢Gq¸Xzt~Î q¸êb~¨îel~[®vc¦pÂOnvSlvZ|XeÚjÌzF~ļj_BhopVKT°uvi¼Aľute¾daä@pfĺiľPSþ³ªB¦¨À]¦hDl²XKVnÐOºknf`ÀpAD¬B¾mP®Y¢@ºt^¢Uo@C}bId¼mjàhob¾KÀ~QbPtl[ºaT¶HMh¯v LaIrlIpF¸EOfL|ªhjb®IYu¢V aIe@@@Px~kbZeVVsªMTe¢O^g¬M®}DmªfäH\\^ðHBb°I\\§Wêd¤D¤\\bKjº_bb@@DA@@@@@@e«pST®TVzØt\\dfkBoßAíSV{ązc|ª¸zZtTÐÄB¨ÜRJfhSpüfÊºNé]µÁFÕ[GQRmk[TkEÏ_āIođš]XÁ£SÏµÃFOQeubcDíīyaFÑag}­kaqSy{´Sxl´Ela~¬F|ÀF] OYyd¼^Ġ­n½_ezõ®¯[ÐLÀcXúYoXTŪlNvmÄZnKlKZwsWab{yCiKÀsP§P@@¢IºxUjgqEp}cOy¢¯@@p¯@@DçYQÁhQuÓW£o@{J]mÛY­¿G_muAepH²Ý²f¤­Dwf@uqBKtÕ\\}a¡D_}Cy±Ao}ÙìKcÿZY_¯@¹ÕÛQEYćHUw§ybkg@­{@Z_uzKpGu@J³F¯[cF§[uŃC¥`sL{qK`EZÇFQ{gxÈJtOIsĠQbOOluk_SF¹fÙBr_LA}ĜnEuö³Vq"],["@@SOSGh|@c"]],encodeOffsets:[[[118288,33254]],[[116506,33066]]]},properties:{center:[113.67187173242553,34.76405140392973],name:"河南",cp:[113.62619569468205,33.90878273868377],childNum:18}},{id:"420000",type:"Feature",geometry:{type:"MultiPolygon",coordinates:[["@@ZufQ\\ÌF^}Xlhdð{Ó¾Fc²«b¢ÀLyÊBĂÏ¦Os¸^vm¤td£Ú£KnuPĺÑL¶yz®G^xonLeÒUPBTED@Fîxgp^äYRtR¬|HVmLF~¬jtsĆÏ_QpHªwêĨtª¦NS[^ug{Ua^|ËwPLÂºuWvUApHl~qK¹|jÔV|r^¸Re¶å¶H¬Seò^fpG]ďo\\¿VMrE°³êKVih^Sàvqz´ÖeflQfL¢£pAeMÓkC{¨OjBh_kUN~ãF@§d|ªSÞõh`A|hj¬CqÌYRmB\\³DÁwÉua`[Y·ËGiÉ¨¡L|HzgVno]Çv|WqèoZÊ¡SoÑS¡ZscÇ°ÓNß¡që±@Õr×±X±QčA{QÑµ§µ§Yee×IÁ~J{tSo£YE×Ë`D¯]t«yfiuyVyz|fYf\\Vk_s{P­kwFsoerËR§_wÏw­AsbÃcH£iMğçcęYy«¡sSckRJx{MSswuwKw°|xB|@tlÆ|b\\°´Lp¬ÝÊTäxr°oRaµe¹TMpfxOrEǍũčĝ¯©µTmkiîoBë§ŒH^öÔlâ©}¥cTEØLNwdOOAÉI¯±eHiSU`Ëb}oz»J]±µHyShn¦Í~TsonÉFkvqGVÀÉ­fVHuh@@B§«hU@@egC@@īLu©MVcWKUtÅq|ǯRď\\I¤Õ^ĕYR·m½¥qÏPKMÈue£aV¡¨Q¿áÃ±ghi¡×MYÏ¦·P÷géJUVùaosJ_[bi«_YtÕJiohwÕmNOsfFiRF¥n¡CRí¯{dg[ZCav«oY{¢®fLÔ©sFa}ÁO^ØMJe~nSW~Qf~¿o`rU½]ºH¨k°µR¡pki@ioALiKD­tÀ_¤jD®dGÌeNl®aL~þ\\ioL{K{nzgl`®G\\[XgèÐMRV§ffk~X°¾àÂC|z_LK[V[¢t@@®°¦^} £q{fÂÖbČÎRs~Nb RGlnàÆ¤`Æ¦iÄHV­|yCÎĦDfrR@gBA´xzLhglsČNĂÅDat¥ErÙT³ġMf¦fJwtKÔ¡h½Q`LÀ^@j}¼e`xV¨@¸²dWjLk~dU xbEx¢ØÀcxXĄPf[Òaþ`¼_ }ÈN@~mª£¦DîT^t|­h¿¿Dgb¥LScµUsxjàTäù_^ĥK­z­B}Z¼°`~þCZ~oFoæLVÄc´utRiŒd®ÊPªWxtS@@ÖKÎìIbç|qx\\ª»¦®ÔNHZ´U¨pBÀ«U]CSXQ"],["@@ORF@JQ"],["@@AWRDTV^"],["@@hCC@SFOA"],["@@xcKM{bPP"]],encodeOffsets:[[[113718,33972]],[[111732,31311]],[[113719,34006]],[[115429,33141]],[[115619,30513]]]},properties:{center:[114.30514938118115,30.590009285298237],name:"湖北",cp:[112.27788231469204,30.99324657894263],childNum:17}},{id:"430000",type:"Feature",geometry:{type:"MultiPolygon",coordinates:[["@@{vE¬KVhúxÚqoÓ[eYuvJ]rprÌ¼edplGrt`aÆºkYw`oÔKªx@ULKa||iuPKLsÆbtGmda~Ĵ®ĦmjUs`dÆau³Co[ÏOsdm§¡ÃDx®ăesqÉFy@@ÅAñÌôl¢°e°jÐtQ¸JèA|t{°NHªĐØ´dUfh[\\L³EV^ \\°q~iôffbxzu`ÊrB¤zÂj\\­vaaMrjqfGÔ\\~A [¯]aZkQàej~Htµ|LrWævÐDxtxOrÓhODY\\ch°|Qî¢Dm¦EjQEteP nMxÖgjpÖIZs¬`aj\\`IptúbUVêIøh ¸OÐ¥ZNØj¢g²hâÄÀ§RU¢bf¤vÇNLÐO¦r¾nQ¸ĖZÖ]J£Đ[ǰQr{ÆVsLXdUªNvĬK@@Dfh@@V¬g¨A@@vgGU®eÊU¿rHluÊEpmtSÎ}m¥TgzG²¶^¼Iy~pÌaV_Tj fG²J°ÊB|aF×dS~¦ªkáõÓG]őì¨pAjínlS¶°ªĎĞǎŪFqPewNoºS¶fbpQ¯wqã SÞÉo«³K[¯{akÅs@A{{wx¯LvxxtT|NIwlQdh¡KkddGpwXGj¢T|]a¥heřT_¥¬q`uÄmAeyOBÛ¯{_ECmWµHg[ånoms¯TGo}@mu¥\\emTÑ¡o·z]N½Ã·Ck±B{JiqLmuaXB_zfŨ@ef]uËÉíODj¿c|­a«[­dNė¬§ìDnyöc÷FguI§o@{du£Pm§yKo[\\¨Ú_\\hâvUj§¡ëm`WgT»h@õ³³S¹M÷vWFÏoCcï·IS±eq§JU|ÇUMcËMwkKr±N}aBwKE¢¿pmI¥·sZg]e}Å{EoS{EZóUº`M£¹}Mu¨·¥~±DusåB}sý@E¨XAwxC¶«¦NÅ]ĕx]y¥¤¥_YeBQv¥Fo·Hms©H{Cu²OËeosJ÷ÏSÕ~k[­@M`¯C}`ÙHy{J}­LeOyEil~dÌ}ºCnnCzvZP~§rf»MgG­i½MA÷ùq®aÌ¸^ºĪ²SÌf ÀtE LxrxØEfCÚürxQØ¬\\utÛEMr}@¥IiVkªĂVmhldO²bGnJ_¦¥So^HxıHé|Bnv{YAcM\\ē}ÝOkpH}mt}OrwYK¥©ÉcZsÃÃĩË[O¦Ë¦YËQ~èAÍC¹zÇ·IÉ¥\\roh¿]UUpéSK\\dIhåx[~wyDq"],["@@KL@@LK"]],encodeOffsets:[[[112117,26661]],[[112164,27392]]]},properties:{center:[112.98885707086882,28.19975198869135],name:"湖南",cp:[111.7180933091368,27.63552940203767],childNum:14}},{id:"440000",type:"Feature",geometry:{type:"MultiPolygon",coordinates:[["@@HÆW¼®P®C¤`@@xdrĎJØ°¨o¨XxÊEb[@@XG@@ºVNt ®NY@@Gz@@mPNOæZzvn|g¤ª¬YGiY¤p¢z kxP¢Q{PBÒq¬[AnhYzzSðbCl®ERtG¸b º`ÊSZŞŢb¤W|n[^@MqbWÀfnHo~Wpj[vKrbÎzEªÊNĀÌ\\ºC@jª¸PLÀxzS@@Bôa^tY°dR¶GzepĈP®_ZL¨KxMJn^C ª|rCbSvf]nÀdTøÐtIfpPÌ±DvG|tªGnp¸¦ERu AZf¦`¦£z^ĖwÆ^M¬¥DµxwBWF§þ@~tæAvtC}²¦§¸Nvº~¤N¹_VYôFT|pFÆ|f~^Yh¸t¦nJÀoF¡xLA~b²MqLxlÌNNdÈVV{¨IrfT²¸J¸BiwÊ©kW¯no`xzCvÚ^^c²MNhÊi¢tRIÂ¸}½ÞQ|O£WO¤aBÑkqwVMy±wk¥GAg¹uPÕq_¯Mµ­sSoēUlÌ]oVÂJxgXÇvWĖÖ²kNµQªH qf^nrhbâ~WÂ|jUvGjäØdXjTªo^hÂ ¹e^½FÈid¹ÂBl¸KEnclFYjvYbtÆdLb eCwbkfN`[Þq~N¬±îE~|¡|GM¬R¤vfNn_KkEo~}LÉUpab|nYbĠls¯ÑCKzkeÄÓQer}IpMI»nGÃ­G¿n±zQIÉiStÇ@N­zPÃÌpLq@ÉěsFHnwNsi{A@EB@÷đbÍnG]½^cċq_q`kQheÃ±LÉcÅ÷ñ¹¡|¹euF¡c¯§JQÐwrÃRnÏ[yÊEËTē [£@zWÄeNõML¤MBxÿcO}kbYāÉcqIÓUg®ĵSC¨_fNÖ^rikóSqI©}ÄLpm±Rm_^c½au}jGÂÈZ¹]wq¿mSZ³LQ_½Q[m¥O±NkiCG¹odYä­¬}¨kÔej¯Uåpġ¡goI·ÃEbIHmÉmSZomWAÙaiEEh@ZCË}cĥ¡S©­`ëþO©¬I¾[lK¯µó»}J©Ü£Běġ«ģG©fe[W±¿wĩKEtTI¬±Hčã¥CW|o¯{}F¯yÝolrµCg_»wcf¥sXw_§Z½e{}ÉwKKpSNģwËEËaėÁOûNyQ±­­ÓoûW\\¥yJÅÿ£O{GqkH÷tºg¸PÆ\\ë]¥fW²RjZÉ¨ċS«¥ÁwgD«QÛD©§AõIÅgtNâ¯ºHt~vM £^wªBg£J]Ċe²ôSÈfŞBÌööKĸZZĊLÄSZÙFX"],["@@E±eUhSo`åLCflq[r`w"],["@@iGy¥b}mfku¦¤¸KyZf¸j¶Go"],["@@HbUltÒlD}uWv{¥^OyQ"],["@@RfÀ^RQãq"],["@@ptEi`"],["@@TD®zvmÄHb¥įU¶×xB^"],["@@ekÕEÃqKÆÅP¹KkĝsT¤Æ |° Qd¾¶b"],["@@o|NQ"],["@@I|rAgy"],["@@MRaMem"],["@@dvLNo"],["@@Sn¤[Q"],["@@}V¢^cs"],["@@¨RÆI£R§{³}ÇMfĎx²a°ĥXRl"],["@@cl\\i"],["@@RpB"],["@@Deµ£B[¢ºY"],["@@|®Pk"],["@@nt¸Bh[pÏwg§^zU"],["@@xd §CuyEvY"],["@@@@@A@B"],["@@@@@@@@"]],encodeOffsets:[[[112427,21979]],[[119964,24026]],[[115569,22269]],[[115239,22108]],[[116980,22552]],[[115141,22191]],[[113093,21698]],[[113177,21592]],[[116503,22496]],[[116460,22455]],[[115866,22362]],[[116559,22940]],[[116938,22521]],[[116901,22509]],[[119579,21277]],[[115745,22379]],[[113062,21181]],[[113307,21445]],[[113217,20822]],[[118733,21611]],[[118716,21492]],[[118622,23275]],[[118622,23275]]]},properties:{center:[113.28704868796393,23.131513779259098],name:"广东",cp:[113.43642010256288,23.340654628336395],childNum:21}},{id:"450000",type:"Feature",geometry:{type:"MultiPolygon",coordinates:[["@@¿cm^ueTaDq{©D]ImwNLK§`YO­ćfoyµHQcZ¯]sóbA@@yTwK¿O©·@i¹DË[Mÿ©ÉyFaÍLqu\\oiXp}GemX¿raN@\\]mX{a£ŝšYÉT¹_·aHQs­FDkïaTyyZmgB«\\rAÑ|OR¡wOly¡£oZHjZ©«£h{muYyPåMnO@@Hy@@Z­MMs¹U@@WH@@a\\ÉFw§W§p¯I×qčwc@@£_­DO­X»ÅGåL£~ÂOw}wU{bË]Ɲ[¹¡E¡JMÊlG²yBWHIPŽV³£_^±oIqug_EĉĹāmËPċ£g^²QE¥ïUÇëUyªXAtyzuU}`āğgedy¹T\\doc¡qPMÆÈK{q`Gdn¯Ùb@xDz»sqVQÉd³GYp©F¡]plRÊq^tn|r[®enM¢ċ^tzyèxbE|îy¸DĪphW~¬|ds^I@GAEAsCÇ¬N^VcysdsAnkùBIiáT{nZdÁÒ«T¡Oi`ÇKs«XÃY_iÒNszPcÙ`o[§B_ĦaLa¨n²²¨eK³ÀE¸¶ PThCjsnT¨g\\V\\|²iz¼R¸kÒ²~ghdX}ÆLfGT[lQVcoL}_ybcuMLzlu[N¯iĂV»OħñvUn½|[loheY»c¾ C\\wL§ÖQj¥~uIKÁv¿{¥Ca`Ýj©EgbcqLYmfáYgÉ¢}Rfj[rDuĂ{b}ĲàÈm¡Ú_tyÐ`r°nŒKzX´HE^ZABtClvVy`ÈCbÂYz¹HoÜYNTmöY¾¥º_vàIhÀp¨È~¢nCüQ©ÌArzU¨Fz^ĠP\\Îj|H¤J ^ajpWÆ`I`¦|heAÞqLqâJf¬¨\\C¨ĸfh|pEH£YÖéywTQdhgWpµ¤VRocÁGÄ nK¼zLDµJs jUCzu{ÜSv´\\ÖâEbzºR°SÈ¨^}~\\¸wUdxVVmmf£¬bĪýHwJx{ĈNºxz°ZbFtFFXºM`©emwXpÄLAYº^ÜÀ`iÀÄHxdG­¡@@­IGvpOS\\¸X|[b|¤WWbi¸ @¡øudW~XÔhDÂu¬zj rzC x\\}æwgcJ[LêTVoV^gÀqp¦[ÊJÈ¸ºyÎDBç}ÌRZÌ¥P¥Ì\\ ĪÄÄtdYªÊL¦Zxq~Ps~nGloÞPĔ~[dNB |ZuAmê{ĲGGwp]¦T`¥mIHaP±kcngUāl©UJj¦~@NqÜFvs«[R×wûqDÙeFw×qKwsF¿eTËĩ±]¹·bË­úrBøN¾j® HNh¼e¨qO}uYDymmD~¹cË}jk FzPf®KI~|zÚG~_°DN_®@l\\Ö}"],["@@]YGFdVBA"],["@@BbHvRLuumKNqS"]],encodeOffsets:[[[114720,25340]],[[107626,25533]],[[111713,21526]]]},properties:{center:[108.32655684226347,22.829861501979117],name:"广西",cp:[108.80093952584085,23.83914031759751],childNum:14}},{id:"460000",type:"Feature",geometry:{type:"MultiPolygon",coordinates:[["@@¢ĊFk|¬ÎJĜCĀr||]x×K~ÀoÐ`tS Ɨ~ñxœSa«Oó©Íµ¥µio¹{µőɭJY­á@ċŋgTéćÓuěgm£_đ^œūoaÃCÝµt»Jstï`É¦ħIP}²ďA½OØoxėtñLEânĜUÈ»ÐFÀªMâ¬OðfŔÔ¦Ò\\¦¤fÖ²ÄÀ²Ð®^nU®ÔÔrHHj¤g¾GôkzÐ¶Ör®J¦¬ZSVÈA[XÄ"],["@@^P»«i"],["@@x¦º¾BÈ]@§Ç½«°Ö_§"],["@@W`øvdÕ{¨ Õw"],["@@VvvVpEb_SoasTer"],["@@n¢X^lO´yLiGYQx±hqmHÃĔgAWčLaFcÈ"],["@@BvVVbNjIDw]oT"],["@@´nA~ÕAÆrWHwB"],["@@rĜÈ¨ĮÆ´ìŬè¶bE|i^¯]{Ý¥Yçámŏ¯ĉqÑAÉ~m"],["@@NéÁPiìá¯LTÒ "],["@@ZL¨hyqm®"],["@@lDIg "],["@@GttVk"],["@@vK¦xsg¥ya"],["@@zxTxUBu×cwd"],["@@T@kX"],["@@zjv¹¡FM"],["@@EvsÏM]vrR"],["@@ÌZ[§}Uq¤"],["@@Î~dr]qġkKo`"],["@@z~Qm«mM["],["@@ÀNaAG"],["@@ÔĖİĤÎ`ĀEöi{Scŭhé[¯çę·­¥G@z"],["@@vaij"],["@@wH\\ŀvrwÿS"],["@@¼ZËE~"],["@@îÄRL«yi©ZKl"],["@@ĎlxIKu±FÃswDt~"],["@@¨AxWY"],["@@TNw§HJ\\"],["@@fÂaFku£z"],["@@`MwÏļ`N}ß¯KVKx "],["@@´D^k¥Ikr"],["@@ôzQy{Åcmd"],["@@TĆs`[}£N¯r["],["@@Z|B}ÅfS"],["@@jpZ·g[[¤"],["@@NZØ~V_Ùa^"],["@@Sowg"],["@@pt@y½il"],["@@morfvx["],["@@\\²ÐIMyç×[D"],["@@hll§NKn"],["@@BòFQíI"],["@@bä²JJ«§¿©X@t"],["@@V\\ÍM]Ð"],["@@ÌRAik}"],["@@XĔ^BMĵg`"],["@@vNPv"],["@@OxÚXWá¹"],["@@veKF^ "],["@@kwKQx"],["@@h[wmP"],["@@B|Ċ`\\aħy"],["@@LhUyIh"],["@@lymsDa¨T"],["@@Kimaz"],["@@vdo¥yKt"],["@@Jv~~@H§yh"],["@@p r\\_¿kF"],["@@pby]"],["@@¼ZTq±A]Z"],["@@DXĚ_¿émW"],["@@rYuD"],["@@Úp_£±iG"],["@@¢ \\Q]J"],["@@Ds["],["@@z¾Yy¥eGh"],["@@bt]@{N"],["@@lf\\y_Vt"],["@@´dCLmċN"],["@@\\~fSBl"],["@@JzJV]{AW~"],["@@Nj{©wO¦"],["@@rzvkomw`"],["@@jPwN"],["@@lXd}{KSr"],["@@|¸[LyqcHoh"],["@@IsaQl"],["@@NOmy`"],["@@vHk{It"],["@@rtywk~"],["@@vÞP¢Y³Dçf"],["@@^¥Kª"],["@@¦C[gl"],["@@j¼fpu¯D"],["@@bIsyR"],["@@v@»}NIx"],["@@d¤fbeF"],["@@^xGM³"],["@@JnGe"],["@@nemj"],["@@v`XAMz"],["@@YpZ~HfmQuQ"],["@@d²WkA"],["@@PpÌ^]K§iN"],["@@x^uuNI¨"],["@@\\r¾GA¡@uj"],["@@XOh"],["@@pC`"],["@@NváyqOªo"],["@@nz~YQ³IY"],["@@L~SJk]k"],["@@HTS³D"],["@@bhT`ep"],["@@~^FwZ"],["@@Fikkf"],["@@TTygW"],["@@l@wL"],["@@_ªeQuwP"],["@@}fvfKs"],["@@XÊJKoyh"],["@@tAqF"],["@@vh[Yj"],["@@`D}^"],["@@ÄbA©BWp"],["@@¦°bkË"],["@@HF|"],["@@]_~@"],["@@OyISt¦P"],["@@\\lu]"],["@@BB@AA@@@"],["@@Dsycv"],["@@Lxpw{@"],["@@naSqY"],["@@°TD»RHf"],["@@MygvK"],["@@B}T|r"],["@@J§gCi^"],["@@APEjH"],["@@xNBgQQ"],["@@SqNZlG"],["@@lOmyB"]],encodeOffsets:[[[112756,20514]],[[114904,3972]],[[115992,8328]],[[114146,17494]],[[114692,3947]],[[120524,15546]],[[114943,4043]],[[114423,16593]],[[116638,7797]],[[114336,16652]],[[116720,9093]],[[116698,9059]],[[114917,9086]],[[114428,16855]],[[114669,16722]],[[116530,7557]],[[116942,8981]],[[114933,17411]],[[117376,10212]],[[118625,9949]],[[117449,10601]],[[116507,7827]],[[112098,7527]],[[119071,9099]],[[115183,16392]],[[115246,9065]],[[117224,11103]],[[115114,16693]],[[115053,17325]],[[114183,16853]],[[118279,10142]],[[119292,10652]],[[117429,8413]],[[117263,8322]],[[117939,8594]],[[116636,8204]],[[118214,9626]],[[116373,9199]],[[119260,9401]],[[117676,11130]],[[116681,9095]],[[117457,11275]],[[114258,16872]],[[117378,11713]],[[112582,8044]],[[119536,11784]],[[114451,16454]],[[116585,10266]],[[114378,16992]],[[115215,16868]],[[117554,8363]],[[119362,9986]],[[119644,10735]],[[117463,16565]],[[118057,10443]],[[118768,9552]],[[116395,9459]],[[117425,7778]],[[120604,11038]],[[116991,10495]],[[117449,11751]],[[119445,10763]],[[113118,8318]],[[114146,8737]],[[117248,10982]],[[115946,8274]],[[118031,8720]],[[114223,7732]],[[120079,10575]],[[116820,11198]],[[116961,16433]],[[113271,8210]],[[118289,8701]],[[114345,8887]],[[113119,7993]],[[115049,9147]],[[119272,10052]],[[114619,8271]],[[117212,15980]],[[117752,11351]],[[116851,16395]],[[118838,10345]],[[120088,10955]],[[117618,7425]],[[115538,9131]],[[114358,7841]],[[114908,9055]],[[115235,5940]],[[117357,9066]],[[117632,8182]],[[115663,8619]],[[116334,7135]],[[120171,10340]],[[115712,19946]],[[117202,16425]],[[116571,19625]],[[115362,5236]],[[114325,8104]],[[114945,9094]],[[115609,8039]],[[115292,5702]],[[119503,16744]],[[115231,5799]],[[115624,5120]],[[118137,14290]],[[116600,15855]],[[116330,10493]],[[115266,5239]],[[115054,5763]],[[114927,17168]],[[114935,16079]],[[115322,5503]],[[115179,5884]],[[115942,6464]],[[118947,9816]],[[117715,7696]],[[114238,8001]],[[116681,16222]],[[117691,16428]],[[119558,9281]],[[115357,16786]],[[113879,20410]],[[118544,10719]],[[115383,16731]],[[118568,10801]],[[115220,9780]],[[120034,11e3]],[[117368,16032]],[[120122,11350]],[[120523,11321]],[[116914,9616]],[[117475,9978]],[[115263,6129]]]},properties:{center:[110.33773578304327,20.037673144085705],name:"海南",cp:[109.76138994883688,19.195530703634862],childNum:19}},{id:"500000",type:"Feature",geometry:{type:"MultiPolygon",coordinates:[["@@x^~ÈB°Imfzµ¸`qeE}lk[Q¤fO·µNkdQHnHnqv`|{rnqLqPaÌ¡_z×C]Oh¯JNYCp¤_f­D^@@­[HdÔQl^|Nº¶YJ UPÚxdĈH¦kF_zMf~tIU|RFr¹p@FCDMBn|»M^vVJæDjrpJk¦A@@KÐfLRjs°KöB¼@lgXÑ¬xVHZGVxY`hªExZV®º[D`f¨o{U@@A@@@A@B@A@j¥yIxU@raP¬S^@@Vftc¨MXLBNBEBAFFvjI~pGĲļ®~Ð¨¤~è®X_\\¶¨ he|@@_zb¾MÌu¢® RjiFrDÂuĖövTKÐIj´vTe¢dNÂô[x]P´^úÌ¾R®FCr`jOø\\FCJ ¬tF¨zx@zQ|nÓpOsIjKrNëĚ¢~sfb`czT´ap|­´gN@@@B@@Sd|læU|foKüÍ¶Hd}y¦QÄ¯ìIČ¥ÊHæeHmuc|_AuČYÄf´M ^G_¾R¢gLÓxseIe¥ĢN´ÚSqF¦bsÆCāMtċhkgKwyB³hA@QeqCÍĥD{zU®ÃG¥jÅ£_ßÅmHkQa}MQtċÍaÁÕer|¤]~¯¥­@@¡sFJIRBBFJBtLKy`{DßÁ¯½}Wele¨UQNçÏWh\\[H_­hky|m|LpKj[}ýbKk­fMHËcC­£i`¿®sCjLKpB@jjol¢¶Ql¯G§^¹¾V_qÀp}eRX}Tmf}IN]×ÂPb~EtªKÓe­|¡pZ¬buPÔgPqswCwuÏXåKq¶{Gs}fißRlbY°^\\BgG­AÉÓ{h]c¹kµÛxKxyDg¡bW®llÜoTjv¦SgIai¢RkXs³SfGl@zmzYÈRMª~»ÕkCW½Pę^¶@ZKVW¦udkìRyZm§¿eáčMasuA_³p\\¦^tú½¼¡·l¯Da]cÌë|eLhS_Gt¥]bzaw}¿EWÇe]}wTQbdFX~ÅhĿIFkUJÙQ{§uHkqÇpLmÑAomyilQWj§aSvÅvËcH tQ~|enHdAr{Bux@ñÜk]R³~gÃsaSÍuIw[×y"],["@@EIAAE@K@\\As"],["@@QLNADC@E"],["@@PQEIU\\L@"],["@@EEABAFJA"]],encodeOffsets:[[[108935,29217]],[[111731,31326]],[[108124,30854]],[[111724,31320]],[[109635,30771]]]},properties:{center:[106.51155987543073,29.538849605036805],name:"重庆",cp:[107.89030348774348,30.073611928491257],childNum:38}},{id:"510000",type:"Feature",geometry:{type:"MultiPolygon",coordinates:[["@@@@£T[}x_¤GÀÏĀ_aVÌ³ĐwOj´ÇhMªev¥Z¶ÄOs³Ã£dMr½^§½¹maFMÄednr@ć`~v|ÙèVÌ¤X|TzWZh¦N|ráhb´ë¨I¬ÇÎZEjGBF²Iø§Ja}J»}kR­GC»EM±~mSájoħËc¶©Oy^ºn^J°kÒ\\n¬i¶NgUÜj¢P¸cľHzY¾R¸@nÔaĐPFmČPmÎvĬJ®îYxeĄPt±ÔOXmbhi®AĬÔK¢Z|aT_ø´|K«d¯Ê­|m|nT dsAÕl|iZ x¤Kæë|JxÜÎB\\ŉâc|ZÅÌO´{BO¢XrwxFìhDf¡­ôtXxk²Trÿ¸cSwrŝÊ»H_X³DWlÃJ}Rë¨QxÃPQb©b¹¨JRÄL¦a¶yTz¼ÀjðXqnts¼}TV~S¼ºº^Ô¬JâÌãp£zÕJ°X´ÕJphÞcJvanArvLEÆCrfQâxzU~M¦úĎnr@@Pb@@ĐT´eĆÙ N¸]¦oªAðV¢IHoX¡sqVezqzJ|©BwrJhu_x£ SLw|_G~u gbsKÑiýOD§®ËÄEHcaT\\È_ÒUfjQX·nîPl\\ÞĘo~¥ªBL_¸SZL²t¶wpd_Bvª@ªÐ·PègO@¸·Knß©¯l{äQfqlDxæoºiµf@ ¿z¿¸auZhHÐVXeDkæÀJ®atjL n¢qFÈÄ\\ĊY¯bVK°IWtZ`E|v^­ĀRv`t[âNîğXJM¤bfìBzsÜÅxMx²¤vÊ·dyv^¼¦ÖnPÞOL\\d¢E\\¤qpAµ}aySÍĝBgºXy_Ç]ld\\¸\\¼U^@px¼x]`gbtsôt\\ºH\\_¸^rO°¦^IAª_Vÿºx¼µMy|­HfQĭĔd¸gnpS|b|o D^¼~°[ZĖ\\gNµ¬dZxLªBf¶CH~ªXizGiV¤[piC£´£[SxDTVkEbywçXYÀUlfWKyÚ}äT~¤®JxñsMXz~bªOnmnPôêpĴWÆb¶oÖÁk³tÏuPªYj±æRcy«`}SjHpÅv£Ó®CqaK[µFUdÇÎ[Ă×¬L^s´MTu¨®V²PrhtQ«LĐª[Øp~hH|[H¤vl~æhJubÊ@@_txTL®PcG|uT³lHRÍlHV{æv¨NTclF®pKhWngvnGk»AK¤°mäG\\iN QS~ WjhÊhKZÂ¦GTm~Of¢CTcČb®YKmT¡y· ¹Â]lªsr®tbr°UDÃnWGPÒz¦FcxÅN¸ùªv\\e°§KÌj´Y\\hne¾®ÐàtW°fsD{eåV{kTc@@@A@@hM®³o{³bySd_eat¡}ìęMLqitJPÔo{mRyw@§ysE«IDE÷[iP_DqEQ­½ùË³]O^\\wÁócMf¡S³uiJLÏ SuĕõÁvqCEijQ¡­Ëv½Na`y@@{fgµ§`[W­}ç§£}Ï­ıĻoHJ}uiIBM CF@BCAA@ABA@BIW§NsdUe@@]«TOqb@wVJzi¦B@A@B@@@B@@@|V§p_eC¹\\U­wY©F_gwZUHGC@G@MwU« WÒh@k»õA¯LitQKeLÏ@@¥BlIoiqåCCBEDKO]u¼Nm{RKºoEqQV{Js}Ney`lE¥ćGwcOÙVIµZ¹M]{kRÓGc®\\@@]®C`eo£DZM°IPg^ØD`y¢bËOrrKqm|_{ruGmGmRlc¶M¸PeR£l\\~k Frf_¶·eynJA¯Ç]}wJ}KWDÏ¦[m\\Mc¯Z}¤d{×¡aIÙÛJqVuiYv{gDU±·_WáOVË_¦YNxJ@@px{r¥e{ß¤rĲ²ªA¾wºËi¯I¯i_EjAZ¥Á¥YÓt³CH³iKb¯[gsåVWCm³Aae¦H©¤ËLñscPF¶it`­buÌª]¾mX{eJethed£Bµr»kCIÓ·`o}q]DaebÇk{qNc¡¤cUµ¤£t¼¯pG^Ì@z¢lG¤VG~Ph~Yz}@wlOH{ww¼ZĄMÀH^hFPz«n·bqzks»P«Qktėw~mW e½Lcoi¢ÅAi³Mur£}µ©DS¡xÑ{¿¿ÝzoxX|Ë\\©ËNÉm£u]ÉÏoAi}µKÑ­P×E{»osZÅ£õac@jTýěrsBõ¬ÍdIt¿QQt³Ej]Rĝd@@myECÍVo}çE]vµ¡Q{}·§V·~²Q~·t{qď¡G©ĕCmËmyG·ÇYsl}M¥kGHVZ¨n¹a°Xp`jzsVDÑÆZo¡Iw¼NZºBAjyh¼Ü¡dgYZoTcC~yfÐ¯fBEªFDpýjÒWRtÔEn"],["@@GY@N@HHD"],["@@BAB@DB@ADEKAAJB@"],["@@DAUILPFC"]],encodeOffsets:[[[103603,27858]],[[108822,30941]],[[109551,30817]],[[108100,30916]]]},properties:{center:[104.07221517047132,30.665531299496966],name:"四川",cp:[102.6999232288402,30.680596447508155],childNum:21}},{id:"520000",type:"Feature",geometry:{type:"MultiPolygon",coordinates:[["@@[}HÓreiNqbb®ui[yÁA£q_Évyaweejór}[¯U] F´[K\\gVe³cď×G©¯Ms|B{ç·IRÏsi¯f¡¯ókòËÆB@@EzÊtrĄfw­ÄC¨¢ntcÐPp\\´DvbcÅ_Vtniĥĳ­b}\\}TEVÍ@©wÓLpx_lZ¹bÅs_Hqokfc»qËqo^IvufZÔ\\rpwÙùgU«LF|ui«yvÁgCWÓX}c÷v@¢·ajX£Xa{{\\·WT[oPuH®J@@®¢HcGwÃj¿_¿Û¹]BZÃKWoxfn_ª¹NWEsEEa¯YwyM¹|ćIwxGĩþ«ae¤nUnUwcV·x}[~§]TÇQ¯y¹aáFÕ³[uÛTv|yDiVItC¶yK»mLÃHdÂQp£Uo¶XhcgRSzxÕêZG¤oFg{ķeD§§[e«IrárKBÝf{g_¥JÅ_oXib]I£G{ÍiO[ğy]§EVqyBªËRûmD¡Ç}o§¿g ßJu¹`½¦õZSnMÛZGpyºÁZaÇD_zUkusDcUW³Lyőmq¯Ï_szÙ`¢Çn\\rE¶ ¸¤z¼¦y¸ÅNÆdTOx|h¢©lLa°jXUvãLz§@N¼}P¥oC\\ľF@_m_xdlO²h³Fm¤fĦ{vvädvupbèUÜ]zSª~¼Kv¦ÄÊdrgjBdNvwFRonËUynRÆumÇOlKaF½vQ«ÃA··E±RñQdEp«]VÆ\\z¡tgªb´´p_XkXk²w~{F«BxmxZd[OxFZrÀL¬ê¬A`Æ`R¦zbDx¸pgºHDÊ­|P¸ÙIA¢Z°¼Ė­|@ñ~HqŦby®iIjOĈ¬¶¬@ÂsCs¨ÎB¬vtyr¢|QhZÖòtÌKª£Gf¥b´BDnXæUht°\\La´jG´DÔs¦ZÂ¦YiBFj`°Jj°¹Ì½x©Bı±£q|àfq¦|ow@@wIMZ¥`UÌPXâ¸`V²hC|ZuvjrUÜIJÚ¢b|Øc~£°YdNn[\\Ð¥CX~LIzØx\\vJTÎtbÄ}hQ´l^òÛ@vw|ABqcGfm}{RsGÌdÆuTubi¨XRkzjnpBnÒoKÈlrvG¨|RIÚVElŀJÆgW}EacRxS^~ÈfXF~Àxyba^s¦H`gTK f{ìdËb^°Ck¢¸¾»sù][¥´o`vBbtĎN âfÀn¨zYQlëvcX¥ULY@]µĚ¾ODXÖl¼}N©QZÇny@ykHe´TWtQl¡bjJTh¥uipSkÛkX­a¢hzCLwÜwl¶º^dg|ÔBÊ®Hh"],["@@SF[~ncHastÅ@@VUÎ"],["@@vOj{{b"]],encodeOffsets:[[[111904,29185]],[[112111,27480]],[[112164,27392]]]},properties:{center:[106.71999412186334,26.58428544056653],name:"贵州",cp:[106.88698921159921,26.83221277555023],childNum:9}},{id:"530000",type:"Feature",geometry:{type:"MultiPolygon",coordinates:[["@@YÕRg¡{qzusA«§ÍDtÁt«@µć«iPJj­azťr}Gò{@ĕ®¯»Y¡BJ·Ú{OÉ®C¹Gohw·CyaQ¥Å_B_««é¿KYqEPw\\YcnwAw¬|Ex}l±lWW`³oa³h©¢s[yUÅ^¬Fo còR²Q¸FB¸¬ÄR¾uELbkPÈvnÅQzmÌVpmQxEMucAhiqÉc¥ÃLu}»T©y^VÛçoavcuuãu|eĥn£´EgP±ck`w`n@E[ĽpD¦~OM»¨@yäKVuiWb¯kK¡ª{gPwSÅcÆMz·¥y»£·Fµ[qß~ı|avāC\\qei~QÊ¡ZheâZnKdrhaªFÞib_¦DÀ|ÂuLvJ¦}Ri¨ÕxK[Dd½¼Zgf p\\k¾{VmòuĨ¼PUjā°Mv\\kKyNdva`zK~dpUR\\kSHKe~ÅWgch±}lÑQ·y»j±[{U[§hmSitDgSO·µ¿F´L§f±±mb§f³ø{QgyxÃÑm­±\\»}yZœÓSr}YOÏ[bß»[×WwSJwÁQß|Ë{Û«§T_d°Y\\_ęcyE©iéYe@µ_ÏÀeBWd·ÖćàuzÙÿ\\©×gP©¶kJ²Å«\\C{K­¿sJ·nÃOYÃI³J¦W®µmEĥâW¥{e­]oÁ©gj§£ÅSÇą\\ùT]ëvË{ÏRM«LD|§¦·yEq×py÷½[a}¤ÝL{ycªĝg¼HAkJ{Yoēh[ZÙxFlwq¥PBbs}RÕgÓ`WB¡H}»½C}¤ÇmcfZÍhýs©AąË°rCv½Ú¬`C¤r]VC¢½Hl|_âlI°XvD×ÇÙSÏsmq__oMĥ¹«hYÚñI©§ÁU{sHWlQ¼]j¾àF·Ĳ`ðnXd®Nď\\AěÇ@ÉDEGa\\Y{|ñ{G¹ZÙDÁ¤FYn xfA¦u¢dîèovŚqzX\\¸V`Ä¾fuÌVlìz{aVº§dG»j|ÇyuoËnå[µzR¦±Gātcp´R}nE¢QÆ¶£[mÐd@rXW¨ojXp°õFwbaÊ`w^xjvU¬DôØe¬smNčKwN«u¢·IKAĕO_Ļ^o_ÃKMBE@uMIAąU_çaKJ«]RWUwTMrO\\ĕ¢B`´jRĀÆn°s^B³BC®hSªåc·Nr¢bĦCĘklvêtzîGnW~³YÎXÄQpC¬àĪ[zCÊÄAfÂ\\~BKjÚu¬^vgªÞYÊÃXnÚzPÐ¢fHª^¬ÄrJòbzeÒ¥oGWðwÄ¶xpKJ©ºOzn|kRRÌªbÖQR`ºEÊhfRgP~qL`Ēªvxqľ~bF«rBÄcÐxVM¦fbLG¨_ZbejlÎWgÇFFb¸gs¹\\[WAĕ§MiVMÄwÒ£eĶc¦TSvĢilI L¦~Ôo`Bxþvb¹rO¿hg@¥S|SÆÈcr¾zAºMxèg¢¡VMhfĬÔbxàbts¬\\^¢f Y²zIáLċrm¼FTn¦RB±nPúô¸kÎsnKjaZfÞ\\Q·Z½GydĽO·i¡VÛhMjµ«[mlÑI¯m]¹z]PªdµÌĨipânT}N²¼FDHQ®l¼~Ib~¨IJ÷±EAHFiYÈÍJ«ì§a³âgq{¥MYgyX{SW£ËUÚçu{}Ĉ_@mqfcNÃbEn¾º¨¾]NqcÄ¤t´ PÃYµ¦fuN©Ègi³xP´ďUËb`ÐÿH¿`£~w \\¤S@@FmsÓXQiÑþCoEF©A°eÏzeD}dpSYhZ¢c»ÛzgiB¹AMYx»¢JpYÒÅCtUiy_Wo¯ºb m§YUGlH¦~NtkÈZ¸zHnÌDnĖª¢HĐ|r¸sR}±¸}¨U~¸|¢R¶^uèFp~UDÎFnz@c@QĞi^Fs´RRsÀcJ«ÎAöqtĜSþi@bdö¤ÆtY¼pF|Ø®OLÒ¶j~pBÊÐv^n¤MÊªÌ[{ÌwWypÞÀÀÒ|¢wTC¶ª¤~qNv´Bj¡ÆjpKdf¾nX}Ęxsl¬R¼Oltrya¸¬mOyEg]¿GNYăx»|xGPxk~@Zyg}OH}UH£¡kyË@H]°o»¤s¶£dV¢£drM|ÈlfabC^~r_pÔ¸JlD¼¶q¤AfcgfsI|fnW^½©vË®a_jsEµdO"]],encodeOffsets:[[[107843,28376]]]},properties:{center:[102.71866484796189,25.046887943641675],name:"云南",cp:[101.49163589371577,25.01456951515638],childNum:16}},{id:"540000",type:"Feature",geometry:{type:"MultiPolygon",coordinates:[["@@oCé«ŉaµp[y~qKÙ¾[Ä}GaÖFW¬BÐZp[£`smDõm]¡[e@WjjLpqs]­©wT[{ùkh}kmihS¦ã¼_\\]E}ĳfúM_dgKpC|¯]u«ÉWMÑne¨[i­uRýGiqjwQR\\}kÿwe}DEwL±@kO¨»F}~YZsÂ±FÂ»MJaÜ_Cmx_qÙv·Ö{JfcĨov[ðħ~gìJÔÆ£ÜLÂwâLhtØIa^ÜZvCA¦¸OÈºQfzmèqjoÊi uJfNºóÀRhÄAvºinef[Y²²~YXt²_¢^teìYNRºgVfÐkoTÈjGvfGJÝfVÒPdt]zNlMP~Q v¨C\\§tC^wĒ ¤ÐN~_Ì[T¢E¨lfqªYhnM{jhÀ°@]Dd´\\lQpÎzTIxÂGÎnryĊµt½rEhoRn±WdÎwde@@NRÔDÄTT_Ë_ąUcxiĐNrvACý@@ªDBzFq^ăww¹KN}SEm¨ăpKUx°`ŨÉ|Ml¬èìAL{ÜÉÐcZaRé¨G\\¤pVN{Rb«rJ¼hLXuxDrUĎBfÙx£u¨i¤ vb~´WXp¦nÒvIT`rmRU¶iXĐIKb¢upn}ÒhngĊGWfpvYhjvdf¦J_jlTMĨnR¤pRvĖ\\¢¼­ZCztlbc|X^qNŊg\\Z GÄIXk´C`W¼GŞÉxqdTĀ·Sql±Wwsó®¢CegEëwxWq  ¡P|AP³ÆËYd{ŊáA[ÛÍIw{åì£LwYjk{ÖBtcSmn{®{°É¬cL³{`÷bSY{L¡ÓBīj­agnWP²ÓOsfăZwíI­uīnÍOnċOEbďÓ@mÝ[YebiLtmlÍó·Où²mA¥QSm»EqnKČâyJ±Ze¡[]t«asßawÓīeNg¢Uh¡ çNwB¹½yqÇdÅ{TT@¦ghPÀq aºýuAwp_Ó¥}KJkrO|No]svZĥĢC{B lAÎ©°§X}av¡[\\gk_]H|g£qQ|icG£E\\U£sa\\y^c²PFcM¿\\s¿Ai¥kïãÃKB[ÒM°Ãn·S`uÓvkQ¯W~í¦MÜdcFs@Ëloôå_ă@oeïJ«yDQqhEq¡JÅkūÑùkesgÍooÝǿċ©WË½££]±{·_¿œ¯LaHUÛF³ÕßùéïÏķŗOĹqiÏSĹ»³c˯ķu»Fšęgĵ¬JĉU©gûgĳSóoõ]`Ę£æXc²Lº|nT jvR»Ĳ®U~ÁUětïwJ±Difbi|RnªhØ¬ÅDb¶BM¹bÇ|HsŽ°µóh«k]N¡ñV½X]fÅQpGt½Zpġ¯mn±dad­CazÍÄÅQbovFk£}\\eavtÙMáfU¹wĩQÁÕ}C¥¯eÁÉûãw³«¯Ĺ«Em­[Ç{¦É}¯×Së®}VR¬gD®}Eyxu¾^°uF|CjOÎtqØc@Gî}X¡¨õ@}qg±OW±±Z{}MuTē¡Wzo\\bs[kl­`¯c©tēfG§³·NBlÑacķJFµDfKmu­J±pÎċRQ~VkvUÑlXih¡XQ_m@SzJU±kEo¡BUuGknëpvEuĢfPÚ§«WwFGÓāÓm©L«~ áÐE¢unc¢¿pŨHý£{Bç½LW}rÝ_¿´}]Çjbkìª|¬IXh{ÏC»¿]síBgëÙpB{Pef¿\\×UzUº}JHtÉ\\SQ¿IKºjæqf}GC``K¼v`L|ÓB[ÃT§G][X»y}AiÕI»U¹Ne|{C³âyJ[ uzOºD·ä£HSÆ£z«GIlLeÝÀQe¿_¯A]|TaÇH ã[hd£Î¿Oov`cnDmQÃÍGL°plc^yvJª\\ty[Na]UÉzħXnýc`U¹»XPWatquSK¥x]k[Zkk{Gµ¥ÇHr·UyRiKÿT\\q`G¦°El¿CmÿdćĀwD¹¡H]·X_jÓJ»FhÑyċ{¶r]¬J»zZml¯GÝð{H»Qo¿ÎáQCgTY`£ĕgk¨q`ío£^ÔpÉÀMt~gKoÃX°JuBV®Z®XrOMµĢ§TÚzKjµćD|ç¾ceÈBdr¾wDzqn\\²Èz|Ú^ftºTVnO zXl°pB£klëzÀ}ÈÀLWl V²lVf¾JjQuz¨u¦¥LZ¾Uz¬§n oĘn¢SfbzXbng²¯Vc«¡P¼×ÔZÐ@yPlô´k¶PS°LyRVÀQhá|J´ÚHÄ xW¦g`Z`´bfpôKhlR^¨zlQøzdeÀMj¬P_ÔhÎNniĂIrvMÆPº¤c|ðezZQ¢¤öi|ZMN~PPcxhªYX UĦèM|vĘJăôh´®B¶¾ZÎsfZ[f´_{CsÐGîT¦i~LgÀBopzDBnnJHki¦@x Ffn|O¤dng²CN_´RƢB¨xÊP¤WØXzEbpzqÜJtA`dàxrdP|vCz^n¨]¶J´HaPêapeâ¤z^nâ@j]ÖMUrS©xÁÎmjuªQÖxz_®IÒ_B®kHDm¶Rn_²tĜDZOôZjČjÒofbjglÖn¸Tü¬zNnuÄ^´p¶NÜntGÌĺ¢®\\lx¶`ĀSŀÐ­Ũg¢ VâjĶxrMÊZKðÌfGF~lÀpHvcdJÈ¾V~|âEÀ\\¼_blÊIĎn¢úAvRrDZfªt²Y^À[XzpĊT²`xpOZ_V¯ČY¦fĤrU¸dZOæR`r|pOîLQ¢tIhjDìYQh®GºRzØ^LÈiÜÛd@f`K°b¤Eo¢WruÔL¼ÁJQĪÛĖsjaĆa"]],encodeOffsets:[[[91872,36966]]]},properties:{center:[91.13881033157789,29.666115438652298],name:"西藏",cp:[88.39486661130323,31.569510661598894],childNum:7}},{id:"610000",type:"Feature",geometry:{type:"MultiPolygon",coordinates:[["@@@@sTw©XÉO­őcjsQ³vÃdUåKpE}pYýD_}»¯~Y®A®yĦL`]úSãißtw¶VTd¦KhaÀCÀ®g{]sSCí¤¥©}n@MÇ~»`ý_Ñbe\\ăOWdw¿¡×FwwaVc}lKXic±·@§Uwf_~»@i]K¿H]³NÃeċZBv{`vdGnåfGÉċ¦ëJÃ°¥Rzc~µGûÎLpCt¯esXßÏ½­mf[g³ZËiL¯¨fu[©·úMwÆd¥EÑyOHmXCÄ¯Vqasq­©tkÁ^ºz¸S¢Ln­ZċaSd¡De}PSn¥HÁYLÉgigX}TRM[jãH¯n£JBBJI@l¼mHuhmXgoLE­kSd§MåuU|kGQÎkGS´{vH|LWt{¢Df`àVüW²°R¤Wph UuAoE¦¡±E¿pOj\\F°İEVMXzj^ÜGP]Sâm¨bÆ¢crÀDTåêgÂI²Â©XJ¨u|_¡QaÂ¾E¬G¤¸Jrwäsra|°¨WZwNha|Zn[válwÀ«RB^¹hķ[N¨uVĘÄªS{^z~Vf@pqºLy^ÄOTl@@vnj´JeüXHfņkÀ`¤yBlÐKN¡~uIx©ÂW¨ÂDfa`²aÊK¶²Ef{^ÈFĎtjjat@@@GH@@²W¢{¦x^XÐVPĆtiĀNUcČPxär Od¶X¤`kņG¸|SGvlÀsîhOhß¤kĀ`Kâ{¢h`~~¸GPz~K~ÞÇĬIĖTt¦±J«HygoB«au^qßSanLK|@@drqAÇÑpYxem¹¢lPaÉyDwvM|bĉvufgS©{[§b§OK±ħCyhuYeÊ@@Gz@@C cZxtuzDvg~R¬_tČB¾pÎEgt¦F¼¬LEjOºn\\ºÔTz`j_v~ZQjp¢ĢigĈkV©[uZg~Dà{¼`XdV SRaĸRÀ|¢ZĂÒdl^¶A\\bMÄ^hOöN¾z²{¸D¬T±TRNh¨BefĕÄuª]hĀvF¤Ø jæÎ°q|TÆhÀÊ¦wØ¢¢Ø\\i\\¼d¶¢eHyÊ¨õª~z¼¹àHÌĞØmsJUvlü\\_ņą~J¤inN~|_ÞNzNðĚn^ÊT¸ìPxfeM@qsLBUsSGGqZMqnkCLY±ûTcuS³Ukcy|Nik\\iý¥§D}dlKW»UH³[\\eY×[¹AoUWçEegT½cLíjmKÔðō²g^OSoÌqd}{UPpoiWÁgsă[[¿VY®WaX}IQq»Ï±£BmyaReZAg_ÑU¤uc}bMaQ©XOigl¤Os^ËbmCwÇ^k@µemQ½j÷rBpm[q\\yICBjNĉÍýw«ĉyïÙÛKýť­Ó]OB¥q¡CvÅwJ}º¹êSWQ[Wwé@@Ð~±©oGVÌsILiÄ_j_y¡mYGßZ¦ÍIyWB_or¨@¦gzE^Ow°§ôu{ApµIC@IJG}~»@ÙoA§³VYGÓM¥­©¼w[{raèJÍëÕL"],["@@@UIH@JJD"],["@@AIIABLJ@"]],encodeOffsets:[[[113055,33980]],[[113698,34289]],[[108630,33557]]]},properties:{center:[108.95443762207665,34.26942467492985],name:"陕西",cp:[108.89388130335954,34.26936676343279],childNum:10}},{id:"620000",type:"Feature",geometry:{type:"MultiPolygon",coordinates:[["@@ºD|YtbZ{|MXlÜ@²]Z¢KDzW~¨ÝÜÀxACnSipZ¬dvtJn³@@_z@@snqcBrPY|]õeXxNZÈeyvF·¨uBMzzkLjglvk¢FA¶HWf@@INä¦wa|~Ìi@@Uta[@@Q©pS²Az¤KFjbk¢ÀXP²o`fQlmplFaÖjZKþDAÆsh¢P®HdD@@Hy@@fÉvZzgĨD²L¨P¨a|\\ªhTveĊuaN{xuCÊzbkOº¡fnZwÒoÈrBcq@@L{KbmàTrv]b¬AhpGz¬²I¥SsJĕÈī}ÝLy}O·H}}_g|¡Lá_lÿà£Pggtík¿HuT·{ŅH_l£µWcPãqwċOVdÿMsjąOÏU]Ww|¥X¡±@@HG@@@bsiičsÇE]e|±FµÉL±b_ebÁC§ÁXwªJ}vM¢ÏLkA£z¿_ŅlGeûWfIi³um@@SkPÃz]Kr¹o@e}U]y|©TėÃvUM§ĸ\\ºgA]Q¬x¿âku\\m{YgbMYx§X{¯btqxãq·IH£F«Á½b¢R`{vI§ªWÁJ±ÁéhSæ¿Cq¡dÅ§aánT^OÛH]yiWNUįF¯E[PiÀo²F¢F¥pvBVgXoQ£±¯XûßUe_¡Cs|X{Kd­OKwS`s@@ÉvaIågk}£uG\\G{}g×o©\\ďK¬sRqg±O­U§Sv³N]t«KāØÍ\\cÈV¶E\\Lbr­DÔu¤oÆGi~T¬_zdåQi²©ZOvsÐl´ÕÂµpÅaĳXéoómOmn©P}aWyNtwò­I}£ãSÙ~LzXke¿VWZxèazFUlSwCT¤\\³D¤oj£\\UjH yj©WG}µDe©AKYw«c¶Mhĕ[Y\\}¯]»C{p{aTmo·hcĮēRe®Gz{¶Nw»¹ĀU`B©]J¯¥qP·][`G¹s[tóash_w^w»@o]»V·[[ck^`ÈWz¹AhĞTÎz~bB¶or[£¡F[ci}UąPSÀJA|ézÕmGqUéZÅzga§QTt[plH¦@lĉfyI{°zP`¯S mLÈpÌUZp¶ ^v²PQÊ©LäO``UKwg¶UDoH¢iÄQTo bè®ËzR`dEzpR¤O^znmpH¶qV¶Izzcz¤RLÆækæ¨S@@nZ­ª¦[¦aGùDwVekJ]CìJŊKÎxè[ip ÜzrGflDLpQn^´¶^´Hzµfj~VN|}nL¸lTþqxSf¼øH|Iľg¢­Gdl¾`¨BiH¢kÈzrL¢~YĆI]TzYÌ|ÌgvbnH§ºnNdBl¾Ldd`Hpđs©BQZDBMhC@µĞlpzgxLT^J­{ºXzvK¬xOãî«ds¤Ruv¥\\´¨eºĂvºIÚkCNrIpnR\\»hÍBlđ|i©xkExÂyÉ\\rY«FÕemUqŏXjÓÖPû~Ýií×TlMpzUvuIħÎWm\\M|Gjsf«VÕä^ąZoo¥J{rb_mwTOy[ßZP{ªogÜÝh¥uGmtWqjÐqÕxKGnÍ±TSlkA¡Lŏ¦Í}LÉiv­p³¢wÈ§Q¾h[Ñ ËpåÂÓFr«pđX£ra|ËpAj×DY}q[¥¥aXc{·tËE{pHjLcxÇVYNWyN×Û­o~dgrőŅk¢ĉÛrµz}MoxCāxáNåCV±S¨³W±Psw½D¡TM\\nK[«¢}SeP·āën}f«R^s}qgo×DmqSÑÇX£dWTÅǝ¢í@ÁVk£_Wneĥ]¹Ë|KnEa´»X«nglWÁ£oHÇ¡}ho]hUûf³_}xgEqªZct§]ubÑVù_mk£MŝB÷ckc\\@¼_fşˊ÷CʷkSÇJí~uja\\\\ĪJ@¥@ė¶ɵSƭgjµPfĸdVªwhÓÃEt§QkkďCęwħD±W@k£GjAm¦IúlŬĢĪŪ¢Ť¸ǲ¨ʈĢƂ\\æPƲӞÜɊ`¼ňWðĊĖĒŌƤż̌ȦǼ¸æ¬¤Ĝ¨PČrJ|aIq®åª¡à¸¦¨vłÜî~ĔTX®DŤ´¶|¾¨jB½ĄĐÊřĠBvr¾ónLº¤xÂfȂĖ̘|ȐAǢǖ˵ŊǳŸɍǌˣțƯ`ɰɫÌÑƞă[Æ£ìiV̍ʄĢµÌĊvjåcJ¬aǎÞ´õ¼an¢DĢ͢UĚð˂oÒA¨ĮŭZULĉÕÝ@ɛƋß©£yññ¥÷MƱãM\\eYxUǢZŲwêÙ®_èYò¯ĺcÄßYrÁİo¶ICåĞYĎdŔB@ǥlýN¥ovzºsP·ŮzĦ}ßLþ[LsepuæYŴ§µÒĖ}ĆÖÊÚŒè{\\ùæy^ýöÌnĢ`\\Ȏ¢àĊnłÓUɤ©ľiłþ°nÒ¤îÊìnƖŒľĒIŒaÉs­ļřÝaJ¯oŇ£ŷǹϋȩ¦©ÓxĽƓÉM©ƩȄÁ²eƂō¼żěĀ·°J¤bX[ÈHÖxVk¨El\\ƄwcªWmwuRq³äL¸äRp[v½iB¦Iyh`ÎuCh«M¥ÈFwpgLimTEY­Qc}rIy^qS~\\B«[F»r|Qlyas@fUÅq»Fq{¿eûtÅ eu[T§z|jGFr_tĨWÔ_¶QguaxwsQmaF`Víl¦NİyLsrJBSŵEĞt~j]dTEKDQDCKUL_TB~»bpwAF§àýwJ¢F´|¬DªiN~q@qf¬hIgÎs¸J@NFDD"],["@@XMcSKAT"],["@@NgCAMjD@"],["@@TsSAK`LV"],["@@MEI@\\JCC"]],encodeOffsets:[[[109070,36602]],[[108600,36357]],[[105307,37245]],[[108626,36305]],[[109068,36600]]]},properties:{center:[103.83002313164361,36.064142766893724],name:"甘肃",cp:[103.83278779042064,36.06548103743941],childNum:14}},{id:"630000",type:"Feature",geometry:{type:"MultiPolygon",coordinates:[["@@NiRYªAtĒGo_cc½KkcAM¹m¨Gamhu{ËZËSy^ąJ}Z¡qKylÇ¡jGA§½_ck®H¡Ľh{JG»÷TewýrkSK·~mM{}Ui¶eGy³µ]]³mRKoCekqHyÛjoç\\ÍwLIŉDë^lIfxUúC bH\\¥¥®©mY@@§TåålKÅ£QdyyyJUµµroGmn]y£PoQycF_yQ­ÌçaSpÃR¡jGCpµVhLxV__ãPKÉªR±Ou]oµVYËoÇnKT°O_y|¯zJĊe@kG¥ok\\Ss¨RhbÆyêYVHrÖnêyB{IT¿ĆO~VjPKOÝÕm¥]»zu¸cuÉ±£NwwÛÆtyëAaeN£WIíĠáM\\s_Qu®ÿu]F{_YXs¯JLU°aZ[ĉÇÃE¡rmKsi­b¿IålCfUWGÏYgv·byÀÀe@j¶¹åpwCkerãRk|ª°màL·¸@PçhOÏ¸@©u©Ac`oxsµK±Y·TK`©A}¦ėpÝk[íOmW¸iReÑVÇ`S[bGdFÃ­ÌC¨PjþLÒath}vH{`KxTw¤`gvqIAx{ªyIyrfUtrW¢pG¡JïU©B¥p·^MąÚ³fďS@@Oa@@mqčù¥N}yVáweRqÅDFuKBqmbIudgÝoÖIW³¯ÖI¤yäoáË«I]Ó¹¹»TU}~St»srmïW¿iy»zSbµK¥ÃIQº§ªaRaÄORwì§~QH[YŉhMr]W{adskDy®Y¡» [ĕQuo£mQħNSk`i¥IceugiuZeoXĉHmhÑg~om¡vaLďJjWVµnQ_qSJuÑ¥mWo³X}au£§jvw¤eÚčAVqCvwWgKI»¬qQa|MoU[£§HQêYbÏdÛÊK|ëB«çNk{Êŧ¯_wVoL§ĄFnTM~ºLxx]ĄrEAy©C@@þDuBMqďwjdĆVÌ``SÃSÓCMQ@@cfÍxcXm²QpgqFs¾ĉ¶qzmÍÁHJwySoÍkR³[Cc^¯@g¿i|Ngm©Zer§k¡FSË\\}`ÏM£đ]xsD[¨§Du}RONkyM^csÑOeUÞIeHuHÇiSpÏleU¹hMQëZsf¡]±`WsZ±}±Ze\\fm¹juÃBg¿Q¹ôMeIvÉjipçryneR¹Ç·P¥BuDYÛ]b×JsgáKÁxKÛÅ¤ÓëIh}ïĨu\\ħpedIÕ|u¸rÚw`DnÛ`IbNÁ¼EÁ²Yt}ZE~§¼lP@²KFx~CxflĀ[~QRixjrHQþvj®§\\mfNÒÊXv¬^{°oDLhc`ùNe~ĴF[^»`¥ägTjnlg~úl|\\xS®ªt^oriKiX@\\f¢n^Cön_t¤o\\ÏY«AXÕEHbÃ~½\\LÚ}r\\z¶oŊbê¬pD°e®LĀAxWHÔ¬znPqjC^kò__ÌkuöAĊu®A´`àiNİ¡§eÔX´àĐex¤F²fj¼rtĢoRXG°qTęj×CixÍBePqH^¦XwJÐvAĄøÐLºO¬`^ÚVN| f_ôFY|ZclK¸õFÊ¹¦Do[¾ux­b½]VbyzTő¢µNOd¹TEА^ĦŇQUSÇÓHţĔ²¥HcfA¸hbĲEÈTeØVzCÀH¢DC`rw|TÄ_ƦjÒfnEǐ°l²KŮÊ²BưZ\\ĦNÖVB^ðŤÄCrnÆfİCVKx¤H@l²XĨCĚxĐDll¨RsÄFÔxgU©ceķ¶OiƮhɶTĘµ¦@@ĩI[[bviî}ÈIlTʸøDŠˉ`e@»[ldødŞA¤Nnlú`ÒUva¨^dsYr©hF~w´`üeV^gp~gÈ¢pGÂ¤Xhk¬m¼Wb³FLmÌ{º^ĦfXm¤`UlÂî@Ǟ¡SÆcXW¤ÒÈTrnØChpr~]t¬Q~eìmĂO¸Tf¡~\\¬mL[NSC¢x¾OtX²§´²TUæDâMĂwDpw~N¶yÜqĊl¡ņ Œhqcp}Ü®ØMXzMZÈUdwKGi|oÌF¸s|Wd¦b¦r\\Z~ØCBiÌob{¤qĒW¬oEqÔæÁÌoÒ\\g½¨RxÇ´¡®ojuÊ~KÎŐ¥K¢lBTk²SmÎHwLÖÏrirXnsvH¦ÞghÛp|©YOàz\\PxS`na|q¦IppĆY]ÖãU¬teiH{Nn[XĨÍvJVuyNokØSîjÞü} OÔÕWiŐrVfnÖ¬EZ[qÊzwÁlFªwjĒ{AkÎ¼gQ[mJoqMlDÙ¹Jāuf¹³§¦[vuQt£¬cäíwP«uLWy|¹®IS] wKhyko¶ĝ"]],encodeOffsets:[[[105305,37245]]]},properties:{center:[101.78537338682746,36.629351767152805],name:"青海",cp:[96.05008433419158,35.73220864632291],childNum:8}},{id:"640000",type:"Feature",geometry:{type:"MultiPolygon",coordinates:[["@@G­ ¡OgÅtBCýLiYÕbEokknR_e±pWO¿l¡iaE£LBy±TªoR@@b\\Vs@@j}Ëb{¥xãJM@@XeGBµ¡ElkuhKiylNyvA¸§EzufYÇwMWfö^Z{OqArdtm@@`y@@´ImscuY«joTDmwB¿ÞÛ}§yXC¡LY±^@ÛWk{NY|sa{Z¹C[I·thÍgJe«rr@M}jC©{«³¡EIxßþE¨Boxa}¼StCDDBBJIFFLNWqIKtįzMk¥î_UEbRntxbwhvµR`ÓħXsq`EiHy{S¨v\\fsÆfüÀr|¼Er ÆeV@btkz{RqE¼\\A¬[}rT]zJqd~®RFZSjnKho xÇEN¦g¬DÍvg_z¥JAju¾o\\Qã·ãKr´vQnxX©dƃxk[§FUlÕwÇGW\\jîbX \\FǄPƶ`¼zƌ^ê¬ÜphĀröRÀ]ŎHdpL°²KêxÀIàÄ¹ä[PÆxlr°Ð^lQpV[xºOdpk¤®QlnjB®ìÈmª¨`xSjf¸¦ÊrVliºW^Vn_Āļ|Ğg\\~^ ¬c@Ìp|Qt­@_Jw|iïha°]mHycíĭÿåĉ{į]ŋ£åįÏÖ±ÔxEêsâaìoÊWFh`¢IhxªO¦üs¾Ñ gy_XÌ§ø{RiYu}i`y_ÓS[¹¹mPFiK»«¥EhsFoÍ½Asċ`«Q }hCuysvYw"],["@@Li^}ĝsFŶ"],["@@AICACRJE"]],encodeOffsets:[[[109850,37997]],[[108601,36347]],[[108627,36313]]]},properties:{center:[106.28473979498277,38.47218279101865],name:"宁夏",cp:[106.17634895504617,37.29732217010901],childNum:5}},{id:"650000",type:"Feature",geometry:{type:"MultiPolygon",coordinates:[["@@ȁĕÁe£wK¹ômq½AuŚğďÉ¾ăAi½§µ{ţ³­CWēSí}ŁÛ§u·¥ß©¢­æJrb{qIċOě§«£·åǻ̋ȥƣŻđŋĉĕXï»Ňɉ_ӝÛOƱ[åġƁ§ʇ·Ǳ¡ţĩũūġkJùn¥BiLwUįDÅeqmÃDţïA]ÕUĥMY[Ư±AŭÉ±L¯kǏmFÑeƥiÃ`Sx{qD_¡C¿GDy×UfÇSıFgaB·de¦G±ŤēÔGTÈVňR]ĥFЏºSPc¶MŒ¡SzyaU¾^®avw\\½pCº¥EÉöL·dkYZ{óE`eM{ÙU]«_¹PÏKă÷uBIÏxW]¥rGOfÎAjwØDĚirSH¯WpQsġqi»eE±£wďf³ßÓWf¨į¢Mßj³_­BĉvõBvËl`ñ`]lDriOm«yGÓwXÿB­K¯fąbibĕtĩÜRI»ÂÓKqv¡Xp£F¯aL_ec@ÛÜÇjK×]y¹Q­HRgëZCgiJ¡sRíKoPq{_åQYP·cVģq¥eċZU°`YoP_w±ĉSoWy¿\\]±Z©sYeCquQùB¡čmÉJak»`¿[áF}{½UIÇdcuoGk¿E}eHïËLÉYqNĵwiáU¡ŧh®ÏĿÿTµ_kw­[Ĺ¡ËsHÛmµM³oÃ]vmyMû«·SÕmkihaeÑpċiióYYPěC±sm`µQCnG­lAÑ`­Jy`Õw©RviÍnwÂTªqVÕNi^á@]m£yáofébObG³µI^m§y]D{uOqcßw_cBIsrÛoyaFy×W£XÉO§wơAQ³M`±Dmh£c{PemEw¥@jGlImmAyCpo¿Ah}K¥jíSÏHDt|³`e\\eYÍtYµ½­Ag³ĄóėIuN{ĥçVZWg©dwO}OMNYj{£õR¡Yfyïd{¹£ÅONquāJjmÍMÓg`«Oi¿Ncf÷yRyk§Q]Çz]p·kÍÇl`xjMjÕ`­cPGad¥H³Q¨}X©CÃh_zD®¯ZDbbLĘToh` zuQ_^EÆ¤HòO¨d¼®N|vxûEgmgn·YXEs~]O~euLmY|cm£JY`¹NÇm¯PvoqTĥkď¨kl×hg»rµ¬á]ÛĀċrw¢ljOvd|xJ½VGÉbÏGM[½B[`fÌ¡Èg¢«HaS^YÄr¤LIÂ¦GKx³ºO¶ĄÉ¼ntÛÚÁëõlQ§TA\\m¶R®Gd¦ËN³\\WÛzHnğOVukßcXEo¨unFE]u­B}²Ûc_o£U¦SC~p^URehxHpu¾ vA `Ădbúb¼p J^]xvoxWrUXAf»z£Ġ|bFtP¶axÕ jeO¸^¦HµècÄZ¢o²\\^cIäN¢ÉHß¶uMÇ^~§K`ËPĻ@élÇs@gsn³@mcïXuJ­vVp©ðX²¾}jTrN¸ojMg]FmA¢Vc®a^Fa|kFXvA®§øzf¬RĊWøTVtS\\~nDpZ}ĺcjÃ\\HÚ¾H¼ÎÎXÄ`øB\\fŖjfwRcÞª¨¦vªh²ArDŀCcZĩĖjdHt` [ÔQxX|c¨SpÒ_Bvr@À°Þrê¤¤VQgF±`ò_}sa¯fgj¿~d DvT]¦GcV¢®wnD@PÂGW¤j²FooJ¡¤ R[ª^zLF¦\\zTnhCl}@p hTþh´l@ª°B¾l[ÌDbo¼{ÌfºmÈªCº_DoÄN¨]L\\´V~O¬rS`vTmNlfÎÊWĺ¨JP¨z¼_z^^Òbø_Z\\¢EL\\ÂHÔz®Î]thUj\\ðHtHÈ®ZzOlrÆb|tàF²J\\¤|~]¸VY¦AÈlp|ìXªGÐjCÒxƔJ¬W¨s`y°rBJ¢ÄT¬pNvinX¯Tj°b¶a`¤nCjàFdT¶MÎHv¬jČXW|ĕt÷¤etÈZÖz¶^²GtYjdWT]pAgpPëZMZ¦´T¦^NK¢ț˔WøTdwtBÈQ~±¦ZnK¤XÈ[aĄê¾ĸWpñÚ×fmRzch­}yDóoOf`zç´zPh|NÚ H^ªvpURdªy¢B¢H~{RzDj¢|teäEòpxðGs@P¸I²h~ºOJd¼h¤Qn®EddNteÈlPfHPzÀnGĢzÁ¢©ÔJºdIIwfWĈtòV¨yŤÚpth\\ĺ¯äĉƓÞ_ænB¼¨´R¦[ºN¬¸¼P´ƤúŠİǚ¢Ę^àĂ¢rAv Ğ\\è²¨ĔG æN^jeI`u[¤NfYV¤·ZØ¡|GRkŀwCaÊXĴ Whb¨Hc¢OÂZtĂQ VW°`æ´fĘF~\\¤D}Ìmd{ÊÃjCrlPĂll|Ô|Âx¤o|TðRĖKBº@xfsvÀcÍÌF¬ÑϪ]h@ t~TVX~b@ÂÊbŀfŘHƢSjÚBWƐ´^Jb¬^TnÌ¨T^w¬bv¤hDhqPwÄDÄpZ`JnÈAXôSrnČ]xuÈCê]¢oÚx_~l\\ETØFpjÀGTxOAstClme\\aoe¤@}z[aJ[¿GieAeSVmosApoCÈp`ÊovNAq¿a£eXoÌyÈCnqlJHögeCwÞpAhhQZBBc]¹hcN~YTjiÜuvwĬR^sÖdoàVÚc¨^vxªHljĮcÒR~kG¦sLì_v½ĞCôRFäWtRjcaL¸¯DgĬo¬M|n±Ð¥L_oTKfi½ßfOØñÚóÂHÐlkNz[_­¨@ivG¡e¡có¦EViemaW³}qYé¿²ßO]·M­\\ŗďûñíėūKā¬m¤DuÝQxLgj^cäTbQâNatKVaþMgªh@¨«¾yŐSĞdêIƞRKŞÅÚZ]ÄJòc dŘNĂtÌYRUTgÎM¼PUØPào¾W@^ÀQ¶}ÚZĔĒP{˾ŏð¡ÀaZm¬¦i|ÉLäYð¦[Ê©¤³@¶iĴw®ŊbĢNƦnbcgcg½IÛq½¨E¢_ĐCĄŷnÉ¼ı~ÓĺƱlŗ§ψˡpơ"]],encodeOffsets:[[[98707,43760]]]},properties:{center:[87.62414772920293,43.79897217508546],name:"新疆",cp:[85.3011627793574,41.37785479052713],childNum:24}},{id:"710000",type:"Feature",geometry:{type:"MultiPolygon",coordinates:[["@@ŭømz×Ɗ§ƨ_Ėē WtÂǾv¦\\ƐwêPĨÖĘÐô´ÜŐºÆfº¦Îv¶Â®´ ĤÖ´¾ÌànĈÜ¤¬^ à~FÜ¤Ģ\\¬fâú¦B]©_P}AºsÚF~ęA{á¿õđEđl¿|­Móc§±aëĵƑWGjµñƅÃȇC¯oÃeą§sÛ`·kea×}Ã¡ËwÅ¡û«geÉ¯ÇȏWƧTK­¡Nóe[ÓOX²a¦VEòeôÏĶ« Õ"],["@@WfWjp^tGd_qwP"],["@@Kx~|[C¯Uon"],["@@¡}AazH®QRzÌGZ«H"],["@@p|YTmewRap"],["@@h@KÅEjA¢"],["@@fk@F"],["@@|Rz[M§"],["@@v^Kyi\\"],["@@ AAZM"],["@@ÆCA|]Sw»vuvF"],["@@rGW}Y"],["@@Aa}_"],["@@zzX[]"]],encodeOffsets:[[[123342,22987]],[[127531,26514]],[[126408,26344]],[[122525,24123]],[[126621,26533]],[[122381,24199]],[[122373,23955]],[[122434,24241]],[[125003,26246]],[[124390,23228]],[[124434,22623]],[[125035,26118]],[[122294,23781]],[[123251,22870]]]},properties:{center:[121.51561010052754,25.050003881919682],name:"台湾",cp:[120.97791595406282,23.755749227212693],childNum:0}},{id:"810000",type:"Feature",geometry:{type:"MultiPolygon",coordinates:[["@@¦P\\n¾RR`´KTY@WzhFM@@tejsLóµglwc^k¸P ¦~G@AiiR¥k@BA@A@BIµ{@@CyAm[ib×¿LCtK tzqh§LsKqolS{o_psXsQRÒZ[oÐ¦fWiZC¨¸pZ"],["@@rSWu@H¾fs"],["@@@@xee[Q"],["@@@@ABFFB@B@@AGE"],["@@@F@@@E"],["@@@@BBBCCB"],["@@BA@@AB"],["@@@@B@A@"],["@@@B@A@@"]],encodeOffsets:[[[116776,23051]],[[116889,22754]],[[117056,22916]],[[117071,22925]],[[117056,22913]],[[117066,22841]],[[117070,22926]],[[117124,22866]],[[117075,22839]]]},properties:{center:[114.17991799676649,22.325726013305196],name:"香港",cp:[114.14084473500542,22.38362023981097],childNum:18}},{id:"820000",type:"Feature",geometry:{type:"MultiPolygon",coordinates:[["@@@gFjFdex½£q"],["@@UM@NV@"]],encodeOffsets:[[[116287,22645]],[[116320,22740]]]},properties:{center:[113.55558575045498,22.20496701424488],name:"澳门",cp:[113.57352300375912,22.16503911502682],childNum:8}},{id:"100000",type:"Feature",geometry:{type:"MultiPolygon",coordinates:[["@@AECEEAEAE@EDEDADAF@HɾदBFDFFBFBFAFAFCDE@E@Eɽथ"],["@@ECEAE@E@EDCDAF@H@FDDشݜDDFBFBFAFCDCBEBEAECEرݛ"],["@@CEECEAEBEBEDCDAF@FDHҪࡢDDDDFBH@FADCDEBE@EAEҩࡡ"],["@@@@A@ECECCEAEAEBEBCDCF@F@@ࡄBHBDFFFBFBFAFADEBCBG@ࡅ"],["@@ƜΤĪ͆BFDDFDF@F@FCFCBEBEAEĩͅ@AƛΧAAƉɱCEECE@E@EBEDAFAF@FBFƊɲ"],["@@ECEAEAEBEDCDAF@FBFBFצۨDFFBH@FADAFEBC@GAEAEץۧ"],["@@Ǫ¾ˠźFBF@FAFCDEBEAEAECECCˡŷCAǫ¿A@ѧĳG@EBEBCFAF@FBFDFDDFBѪĴ"],["@@@DoŐABʾ@BDΎ@DtŀDFDFDDF@H@FADCDEBE@EsĽCΉʽpō|Ù@E@EAECEEAEAE@EDEDAD}Þ"],["@@¼ĸ¨ĸƨpƊLǎCĈBFBFDFFBFBFAFAFCBEBEDĉ@AKǍ@AqƋ@AƫAA§ĹAA»ķAAÓĭCCECEAEBEBEDAFAF@FBFÖĬ"],["@@¹ǺćȆĉƈ·ìȇʆAFAFBFBFDFFBFBF@FCDCȊʅ@Aºí@AĊƇ@CĊȅBC¸ǻBA`Û@EAECECCEAE@EBEDCDAF_Ü"]],encodeOffsets:[[[125466,24031]],[[124081,21305]],[[122342,18440]],[[121931,15402]],[[121535,11459]],[[118325,7325]],[[115010,3627]],[[110859,6236]],[[112772,11642]],[[112473,15601]]]},properties:{name:""}}],UTF8Encoding:!0}
});
;sugar.define("sugar:widgets/charts/map-layer/get-map-geojson-async.ts",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getMapGeoAsyncThenRender=void 0;var r=e("sugar:node_modules/tslib/tslib.js"),a=e("sugar:utils/i18n.ts"),s=e("sugar:utils/fetch.ts"),n=e("sugar:node_modules/amis/lib/index.js"),o=e("sugar:utils/geo-json-util.ts"),u=e("sugar:widgets/charts/map-layer/china-geo.ts"),d={};t.getMapGeoAsyncThenRender=function(e,t,c,i){return r.__awaiter(void 0,void 0,void 0,function(){var l,g,p,f,h,m,y,j,l,v,G,_,N,m,S;return r.__generator(this,function(r){switch(r.label){case 0:return"china"!==e?[3,1]:[2,i(o.default(u.default,!0))];case 1:return"province"!==e&&"city"!==e?[3,6]:(l=d[e+"@"+t],l?[2,i(l)]:[3,2]);case 2:return r.trys.push([2,4,,5]),[4,s.get("/openapi/geo/json?type="+e+"&name="+t)];case 3:return g=r.sent(),p=g.data||{geojson:null,mapName:null},f=p.mapName,h=p.geojson,f?(m=o.default(h,!0),d[e+"@"+t]=m,[2,i(m)]):(n.toast.error(a.default("获取地图GeoJSON数据错误")),[2]);case 4:return y=r.sent(),n.toast.error(y.message||a.default("获取地图失败")),[2];case 5:return[3,10];case 6:return"custom"===e&&t?"create"===t?[2]:(j=t+"@"+(c.geoJSON.t||0)+"@"+(c.transCoord?"transed":c.transWGS84Coord?"transed84":""),l=d[j],l?[2,i(l)]:[3,7]):[3,10];case 7:return r.trys.push([7,9,,10]),[4,s.get("/openapi/map/"+t+(c.transCoord?"?transCoord=1":c.transWGS84Coord?"?transCoord=2":""))];case 8:return v=r.sent(),G=v.data||{content:null,hash:null},_=G.content,N=G.hash,_?(_=JSON.parse(_),N?(m=o.default(_,!0),d[j]=m,[2,i(m)]):[2,n.toast.error(a.default("获取地图GeoJSON数据错误"))]):[2];case 9:return S=r.sent(),n.toast.error(a.default("获取地图GeoJSON数据错误")),[2];case 10:return[2]}})})},t.default=t.getMapGeoAsyncThenRender});
;sugar.define("sugar:widgets/charts/map-layer/area-color/area-color.tsx",function(e,t){"use strict";function a(e,t,a,y,_){return i.__awaiter(this,void 0,void 0,function(){var w,b,S,C,x,D,k,M,P,T,F,N,A,E,I,V;return i.__generator(this,function(){return w=t.map,b=t.layersMap,S=t.eventMap,C=t.container,x=t.mainTooltip,D=b[a]||{},k=D.areaDataSet||new mapv.DataSet([]),M=D.areaLayer||new mapv.baiduMapLayer(w,k,{}),P=D.textDataSet||new mapv.DataSet([]),T=D.textLayer||new mapv.baiduMapLayer(w,P,{}),F=D.sliderToolTip||new g.ToolTip(C.parentElement||C),b[a]&&b[a].sliderIntervelFlag&&clearInterval(b[a].sliderIntervelFlag),b[a]={areaDataSet:k,areaLayer:M,textDataSet:P,textLayer:T,sliderToolTip:F},N=y.config,A=N.mapScope,E="china","province"===A?E=N.mapProvince:"city"===A?E=N.mapCity:"custom"===A&&N.geoJSON&&(E=N.geoJSON.geoJSONHash),I=[],V={},_&&"done"===_.loadState&&_.data&&(V=u(_.data),I=V.mapData,s.default(A,E,N,function(s){if(I&&I instanceof Array){var u=h(I);if(u!==!0)return void v.toast.error(l.default("图表「"+e.chart.name+"」中子图表「"+y.name+"」数据格式错误：「"+u+"」"));I.sort(function(e,t){return parseFloat(e.value)>parseFloat(t.value)?-1:1});var g=I.length,_=-1/0,C=1/0,D=0;I.forEach(function(e,t){var a=parseFloat(e.value)||0;a>_&&(_=a),C>a&&(C=a),D+=a,e.rank=t,e.name&&e.name.trim&&(e.name=e.name.trim())});var E=null,j=null,L=mapv.geojson.getDataSet(s),B=[],O=I.length,z=[];L=L.get({filter:function(e){for(var a=null,r=0,o=I;r<o.length;r++){var n=o[r],i=e.name||"";if(i===n.name){a=n;break}if("china"===A){var l=p.chinaProvinceMap[n.name]||n.name;if(l===i){a=n;break}}else if(/(自治区|自治县|自治州)$/.test(i)){if(i.slice(0,-3)===n.name){a=n;break}}else if(["市","区","县","盟"].includes(i[i.length-1])&&i.slice(0,-1)===n.name){a=n;break}}if(a?(e.hasData=!0,e.count=a.value,e.rank=a.rank,a.tooltipValues&&(e.tooltipValues=a.tooltipValues)):(e.rank=O++,e.fillStyle=N.noDataColor||"rgba(155, 155, 155, 1)"),N.showProvinceName&&B.push({geometry:{type:"Point",coordinates:d.getAreaCenter(e)},text:a?a.name:e.name}),t.points){var s=d.getAreaCenter(e);z.push(new BMap.Point(s[0],s[1]))}return!0}}),t.points&&(t.points[a]=z,t.autoComputMapStatus()),C===_&&C--;var J={strokeStyle:N.borderColor||"rgba(55, 55, 250, 0.5)",lineWidth:N.borderWidth||0,max:_,min:C,methods:{click:function(e){f.isMobile||c.fireEvent(S,"click",y,e,!0)},mousemove:function(e){c.fireEvent(S,"mousemove",y,e)},tap:function(e){c.fireEvent(S,"tap",y,e,!0)}}};if("piecewise"===N.vMapType&&N.vMapPieces&&N.vMapPieces.length){J.draw="choropleth";var U=N.vMapPieces.map(function(e){var t={};return""===e.begin||isNaN(e.begin)||(t.start=+e.begin),""===e.end||isNaN(e.end)||(t.end=+e.end),e.color&&(t.value=e.color),t});J.splitList=U}else J.draw="intensity",J.gradient=o(e,N);if(c.registEvent(S,"mousemove",y,function(e){if(E&&(E.fillStyle=""),e&&e.hasData){E=e,e.fillStyle=N.highlightColor||"rgba(74, 144, 226, 0.52)";var a=t.getMousePosition();a&&(x.setContent(r(e,N,D,g,V)),x.show(a.x+10,a.y+10))}else x.hide();M.draw()}),c.registEvent(S,"click",y,function(e){n(e,I,t,a,E,M,x)}),c.registEvent(S,"tap",y,function(e){if(n(e,I,t,a,E,M,x),e&&e.hasData){e.fillStyle=N.highlightColor||"rgba(74, 144, 226, 0.52)",M.draw();var o=d.getAreaCenter(e),i=w.pointToPixel(new BMap.Point(o[0],o[1]));i&&(F.setContent(r(e,N,D,g,V)),F.show(i.x+10,i.y+10))}else F.hide()}),k.set(L),M.update({options:J}),M.draw(),N.showProvinceName){var K={draw:"text",avoid:!0,size:N.textSize||15,font:"Arial",fillStyle:N.textColor||"white"};P.set(B),T.update({options:K}),T.draw()}if(N.openSlider&&I.length&&N.topCoslCnt){var R=m(t,"_handleDependence"),W=-1,H=function(){W++,W>Math.min(I.length,N.topCoslCnt)-1&&(W=0);var e=I[W],t=L.find(function(t){return t.rank===e.rank});if(j&&(j.fillStyle=""),t){j=t,t.fillStyle=N.highlightColor||"rgba(74, 144, 226, 0.52)";var o=d.getAreaCenter(t),n=w.pointToPixel(new BMap.Point(o[0],o[1]));n&&(F.setContent(r(t,N,D,g,V)),F.show(n.x+10,n.y+10)),N.openSlider&&N.openSlideDep&&R({fireKey:a,dataIndex:t.rank},i.__assign(i.__assign({},e),{_sugar_dd_default_:e.name_sugar_origin||e.name}))}else F.hide();M.draw()};H(),b[a].sliderIntervelFlag=setInterval(H,1e3*(parseInt(N.slideInterval,10)||3))}}})),[2]})})}function r(e,t,a,r,o){if(!e.hasData)return"";var n="",i=t.tooltipFontSize;t.tipPercent&&(n="("+(parseFloat(e.count)/a*100).toFixed(2)+"%)");var s=e.name,u=f.formatDataByType(e.count,o.dataFormat)+(o.unit||t.unit||"")+n;return s+="<br> "+(o.valueName||l.default("区域颜色"))+": "+u,e&&e.tooltipValues&&e.tooltipValues instanceof Array&&e.tooltipValues.forEach(function(e,t){var a=o.tooltipNames&&o.tooltipNames[t]?o.tooltipNames[t]+": ":"",r=o.tooltipUnits&&o.tooltipUnits[t]?o.tooltipUnits[t]:"";s+="<br>"+a+f.formatDataByType(e,o.tooltipDataFormats?o.tooltipDataFormats[t]:"")+r}),t.showRank&&(s=l.default("【第「"+(e.rank+1)+"」名/「"+r+"」】<br>")+s),'<div class="tooltip-content" style="font-size: '+i+"px;line-height:1.3;color:"+t.tooltipFontColor+";background:"+t.tooltipBackground+'">'+s+"</div>"}function o(e,t){var a,r=["rgba(255, 237, 209, 0.6)","rgba(251, 193, 133, 0.6)","rgba(249, 163, 104, 0.6)","rgba(246, 131, 82, 0.6)","rgba(243, 93, 69, 0.6)","rgba(237, 39, 65, 0.6)"],o=e.theme;"report"===t.customColorType?r=(null===(a=o.config.chartTheme)||void 0===a?void 0:a.color)||r:"custom"===t.customColorType&&t.customColors&&t.customColors.length&&(r=t.customColors.map(function(e){return e.color})),r=r.filter(function(e){return!!e}),t.colorReverse&&r.reverse();for(var n=1/r.length,i={},l=0;l<r.length;l++)l===r.length-1?i[1]=r[l]:i[(n*l).toFixed(4)]=r[l];return i}function n(e,t,a,r,o,n,l){if(e){var s=t[e.rank]||{name:e.name};a.fireDrillDownOrDependence({fireKey:r,dataIndex:e.rank},i.__assign(i.__assign({},s),{_sugar_dd_default_:s.hasOwnProperty("_sugar_extra")?s._sugar_extra:s.name_sugar_origin||s.name}))}o&&(o.fillStyle="",n.draw(),l.hide())}Object.defineProperty(t,"__esModule",{value:!0});var i=e("sugar:node_modules/tslib/tslib.js"),l=e("sugar:utils/i18n.ts"),s=e("sugar:widgets/charts/map-layer/get-map-geojson-async.ts"),u=e("sugar:node_modules/lodash/cloneDeep.js"),p=e("sugar:widgets/charts/map/geo-coord.ts"),d=e("sugar:utils/geo-json-util.ts"),c=e("sugar:widgets/charts/map-layer/event-handler.ts"),f=e("sugar:utils/common-helper.ts"),g=e("sugar:widgets/tooltip/tooltip.ts"),m=e("sugar:node_modules/lodash/get.js"),v=e("sugar:node_modules/amis/lib/index.js");t.default=a;var h=function(e){if(!(e&&e instanceof Array))return l.default("无数据");for(var t=0;t<e.length;t++){var a=e[t];if(!a.name)return l.default("第「"+(t+1)+"」项数据中没有名称name字段");if("string"!=typeof a.name)return l.default("第「"+(t+1)+"」项数据中名称name字段不是字符串");if(!f.isNumberic(a.value))return l.default("第「"+(t+1)+"」项数据中value取值不是数字类型");if(void 0!==a.tooltipValues&&!(a.tooltipValues instanceof Array))return l.default("第「"+(t+1)+"」项数据中tooltipValues字段不是数组类型")}return!0}});
;sugar.define("sugar:widgets/charts/map-layer/scatter/scatter-ctrl.tsx",function(a,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.labelInitialState=e.scatterInitialState=e.scatterAdvancedCtrl=e.symbolOps=e.scatterDataBindCtrl=e.scatterChartDemoUrl=void 0;var t=a("sugar:node_modules/tslib/tslib.js"),l=a("sugar:utils/i18n.ts"),o=a("sugar:node_modules/react/index.js"),d=a("sugar:widgets/ctrl-panel/data-bind-ctrl/index.tsx"),i=a("sugar:widgets/object-array-editor/object-array-editor.tsx"),n=a("sugar:widgets/amis-inline-switch.tsx"),r=a("sugar:widgets/data-model/data-model-field-holder/data-model-field-holder.tsx"),s=a("sugar:widgets/charts/map/special-district.ts"),p=a("sugar:widgets/charts/map/map-ctrl.tsx"),f=a("sugar:widgets/charts/map-layer/area-color/area-color-ctrl.tsx"),c="/openapi/demo/chart?type=bmapScatter";e.scatterChartDemoUrl="$CUR_HOST/openapi/demo/chart?type=bmapScatter",e.scatterDataBindCtrl=function(a){var e=a.activeSubChartKey;if(void 0===e)return[];var s="config.subChartConfig."+e,f=d.getDebugAndRefreshBtn({loadData:function(t){a.chart.loadOtherData(t,e)},loadDebugData:function(){a.chart.loadDebugOtherData(e)},dataType:a.chart.config.subChartConfig[e].dataType,field:{dataType:s+".dataType"},refreshText:l.default("刷新子组件")}),u=d.getDataBindCommon({frontendId:e,label:l.default("子组件数据绑定"),field:{dataType:s+".dataType",dataApiUrl:s+".dataApiUrl",staticData:s+".dataConfig.data",dataModelHash:s+".dataModelHash",dataJsonHash:s+".dataConfig.dataJsonHash",exemption:s+".dataConfig.exemption",cacheTTL:s+".dataConfig.cacheTTL",apiProOpen:s+".dataConfig.apiPro_open",apiProMethod:s+".dataConfig.apiPro_method",apiProGetAuto:s+".dataConfig.apiPro_getAuto",apiProHeaderList:s+".dataConfig.apiPro_headerList",apiProPostType:s+".dataConfig.apiPro_postType",apiProPostList:s+".dataConfig.apiPro_postList",apiProPostAuto:s+".dataConfig.apiPro_postAuto",apiProAdaptorOpen:s+".dataConfig.apiPro_adaptorOpen",apiProAdaptorHash:s+".dataConfig.apiPro_adaptorHash"},dataTypeOptions:["dataModel","api","sql","json"],api:{demoUrl:c},loadData:function(t){a.chart.loadOtherData(t,e)},loadDebugData:function(){a.chart.loadDebugOtherData(e)},curUrl:a.chart.config.subChartConfig[e].dataApiUrl}),g=a.chart.config.subChartConfig[e].dataModelHash||"",m=a.sqlModelStore.detailMap.mapByHash.get(g),h=d.generateSQLFieldList(m),b=[r.getDataModelFieldHolder({name:"name",namePrefix:s+".dataConfig.dataModel",hiddenOn:"data."+s+".dataType != 'dataModel'",label:l.default("散点名称字段"),config:{dataModelHash:g,holderId:e+"-name",maxCount:1,onlyDimension:!0}}),r.getDataModelFieldHolder({name:"value",namePrefix:s+".dataConfig.dataModel",hiddenOn:"data."+s+".dataType != 'dataModel'",label:l.default("取值字段(颜色深浅，选填)"),config:{dataModelHash:g,holderId:e+"-value",maxCount:1,onlyMeasure:!0}}),r.getDataModelFieldHolder({name:"size",label:l.default("散点大小(选填)"),namePrefix:s+".dataConfig.dataModel",hiddenOn:"data."+s+".dataType != 'dataModel'",config:{dataModelHash:g,holderId:e+"-size",maxCount:1,onlyMeasure:!0}}),r.getDataModelFieldHolder({name:"type",label:l.default("散点系列(选填)"),namePrefix:s+".dataConfig.dataModel",hiddenOn:"data."+s+".dataType != 'dataModel'",config:{dataModelHash:g,holderId:a.chart.frontendId+"-type",maxCount:1,onlyDimension:!0,canNotNoEnumerable:!0}}),{type:"number",name:s+".config.symbolSize",hiddenOn:"data."+s+".dataType != 'dataModel' || (data."+s+".dataConfig.dataModel && data."+s+".dataConfig.dataModel.size && data."+s+".dataConfig.dataModel.size.length)",label:l.default("散点固定大小(像素)"),step:1,min:1},{type:"number",name:s+".config.minSize",hiddenOn:"data."+s+".dataType != 'dataModel' || !data."+s+".dataConfig.dataModel || !data."+s+".dataConfig.dataModel.size || !data."+s+".dataConfig.dataModel.size.length",label:l.default("最小散点(像素)"),step:1,min:1},{type:"number",name:s+".config.maxSize",hiddenOn:"data."+s+".dataType != 'dataModel' || !data."+s+".dataConfig.dataModel || !data."+s+".dataConfig.dataModel.size || !data."+s+".dataConfig.dataModel.size.length",label:l.default("最大散点(像素)"),step:1,min:1},{type:"radios",name:s+".dataConfig.coordType",hiddenOn:"data."+s+".dataType != 'dataModel'",label:l.default("散点经纬度计算方式"),inline:!1,options:[{label:l.default("根据名称自动查找（支持省市县名称）"),value:"auto"},{label:l.default("提供经纬度字段"),value:"bind"}]},r.getDataModelFieldHolder({name:"lng",label:l.default("经度"),namePrefix:s+".dataConfig.dataModel",hiddenOn:"data."+s+'.dataType != "dataModel" || data.'+s+".dataConfig.coordType !== 'bind'",config:{dataModelHash:g,holderId:e+"-longitude",maxCount:1,onlyDimension:!0}}),r.getDataModelFieldHolder({name:"lat",label:l.default("纬度"),namePrefix:s+".dataConfig.dataModel",hiddenOn:"data."+s+'.dataType != "dataModel" || data.'+s+".dataConfig.coordType !== 'bind'",config:{dataModelHash:g,holderId:e+"-latitude",maxCount:1,onlyDimension:!0}}),n.amisInlineSwitch(s+".dataConfig.transCoord",l.default("国测局转百度坐标系"),"data."+s+'.dataType != "dataModel" || data.'+s+".dataConfig.coordType !== 'bind'",!1,l.default("当前坐标系为百度坐标系，如果对数据精度要求高，建议开启转换")),r.getDataModelFieldHolder({name:"tooltip",label:l.default("其他维度或度量"),namePrefix:s+".dataConfig.dataModel",hiddenOn:"data."+s+".dataType != 'dataModel'",config:{dataModelHash:g,holderId:e+"-tooltip",maxCount:5},desc:l.default("其他的维度和度量将在鼠标悬停时的tooltip提示中展示")}),d.commonFilterForDataModel(g,s+".dataConfig.dataModel.filters","data."+s+".dataType != 'dataModel'"),d.commonBindUrlParamForDataModel(g,s+".dataConfig.dataModel.filters","data."+s+".dataType != 'dataModel'"),d.getCommonLimitForDataModel(s,"data."+s+".dataType != 'dataModel'"),{type:"select",name:s+".dataConfig.nameField",hiddenOn:"data."+s+".dataType != 'sql'",label:l.default("省、市、地点的名称字段"),placeholder:l.default("请选择"),options:h},{type:"select",name:s+".dataConfig.valueField",hiddenOn:"data."+s+".dataType != 'sql'",label:l.default("颜色映射取值字段"),placeholder:l.default("可选填"),options:h},{type:"select",name:s+".dataConfig.sizeValueField",hiddenOn:"data."+s+".dataType != 'sql'",label:l.default("散点大小映射取值字段"),placeholder:l.default("可选填"),options:h,clearable:!0},{type:"number",name:s+".config.symbolSize",hiddenOn:"data."+s+".dataType != 'sql' || "+s+".dataConfig.sizeValueField",label:l.default("散点固定大小(像素)"),step:1,min:1},{type:"number",name:s+".config.minSize",hiddenOn:"dataType != 'sql' || !"+s+".dataConfig.sizeValueField",label:l.default("最小散点(像素)"),step:1,min:1},{type:"number",name:s+".config.maxSize",hiddenOn:"dataType != 'sql' || !"+s+".dataConfig.sizeValueField",label:l.default("最大散点(像素)"),step:1,min:1},{type:"select",name:s+".dataConfig.typeField",hiddenOn:"data."+s+".dataType != 'sql'",label:l.default("散点系列映射取值字段"),placeholder:l.default("可选填"),clearable:!0,options:h},{type:"radios",name:s+".dataConfig.coordType",label:l.default("散点位置的经纬度计算方式"),hiddenOn:"data."+s+".dataType != 'sql'",inline:!1,options:[{label:l.default("根据名称自动查找（支持省市县名称）"),value:"auto"},{label:l.default("提供经纬度字段"),value:"bind"}]},{type:"select",name:s+".dataConfig.lngField",hiddenOn:"data."+s+".dataType != 'sql' || data."+s+'.dataConfig.coordType != "bind"',label:l.default("经度字段"),placeholder:l.default("请选择"),clearable:!0,options:h},{type:"select",name:s+".dataConfig.latField",hiddenOn:"data."+s+".dataType != 'sql' || data."+s+'.dataConfig.coordType != "bind"',label:l.default("纬度字段"),placeholder:l.default("请选择"),clearable:!0,options:h},n.amisInlineSwitch(s+".dataConfig.transCoord",l.default("国测局转百度坐标系"),"data."+s+".dataType != 'sql' || data."+s+'.dataConfig.coordType != "bind"',!1,l.default("当前坐标系为百度坐标系，如果对数据精度要求高，建议开启转换")),{name:s+".dataConfig.tooltipItems",hiddenOn:"data."+s+".dataType != 'sql'",children:function(e){var d=e.onChange,n=e.value;return o.createElement(i.default,t.__assign({},{onChange:d,value:n},{chartFrontendId:a.chart.frontendId,containerClassName:"form-group form-item",label:l.default("添加在Tooltip中显示的附加数据项"),addTipText:l.default("新增数据项"),cols:p.tooltipBindCols(h)}))}},{type:"select",name:s+".dataConfig._sugar_extras",hiddenOn:"data."+s+".dataType != 'sql'",label:l.default("下钻需要的附加字段，如存有URL的字段"),placeholder:l.default("请选择"),options:h,clearable:!0}],y=d.getAutoRefreshConfig({field:{needAutoRefresh:s+".dataConfig.needAutoRefresh",autoRefreshInterval:s+".dataConfig.autoRefreshInterval",dataType:s+".dataType",autoDestory:s+".autoDestory",showNullData:s+".showNullData",isDashChart:a.chart.isDashChart}});return u.concat(b,f,y)},e.symbolOps=[{label:l.default("圆形"),value:"circle"},{label:l.default("方形"),value:"rect"},{label:l.default("六边形"),value:"honeycomb"}],e.scatterAdvancedCtrl=function(a){var o=a.activeSubChartKey;if(void 0===o)return[];var d="config.subChartConfig."+o;return[{type:"fieldset",collapsed:!0,title:l.default("散点样式设置"),collapsable:!0,headingClassName:"fieldset-title",controls:t.__spreadArrays(f.colorMapCtrl(d,a),[{type:"group",controls:[{type:"color",name:d+".config.scatterColor",label:l.default("散点颜色"),format:"rgba"},{type:"color",name:d+".config.highlightColor",label:l.default("散点高亮颜色"),format:"rgba"}]},{type:"group",controls:[{type:"color",name:d+".config.strokeColor",label:l.default("描边颜色"),format:"rgba"},{type:"number",label:l.default("描边宽度"),name:d+".config.strokeWidth",step:1,min:0,max:100}]},n.amisInlineSwitch(d+".config.blend",l.default("开启颜色叠加"),"",!1,l.default("开启颜色叠加，请清空颜色取值字段"))])},{type:"divider"},{type:"fieldset",title:l.default("散点尺寸设置"),collapsable:!0,collapsed:!0,headingClassName:"fieldset-title",controls:[{type:"number",label:l.default("常规散点大小"),name:d+".config.symbolSize",step:1,min:1,max:100},{type:"number",label:l.default("映射数据散点的最小尺寸"),name:d+".config.minSize",step:1,min:1,max:100},{type:"number",label:l.default("映射数据散点的最大尺寸"),name:d+".config.maxSize",step:1,min:1,max:100}]},{type:"divider"},{type:"fieldset",title:l.default("轮播设置"),collapsable:!0,collapsed:!0,headingClassName:"fieldset-title",controls:[n.amisInlineSwitch(d+".config.openSlider",l.default("开启轮播")),n.amisInlineSwitch(d+".config.hideNoSlideScatter",l.default("隐藏未被轮播的气泡"),"!"+d+".config.openSlider"),{type:"number",name:d+".config.topCoslCnt",hiddenOn:"!data."+d+".config.openSlider",label:l.default("轮播的Top散点个数"),step:1,min:0},{type:"number",name:d+".config.topSlideNum",hiddenOn:"!"+d+".config.showInfoUseLabel || !"+d+".config.openSlider",label:l.default("每次轮播个数"),step:1,min:1,value:1,desc:l.default("每次轮播个数大于1会关闭轮播同步图表联动功能")},{type:"number",name:d+".config.slideInterval",hiddenOn:"!data."+d+".config.openSlider",label:l.default("轮播间隔秒数"),step:1,min:1},n.amisInlineSwitch(d+".config.openSlideDep",l.default("轮播同步图表联动（联动开启时生效）"),"("+d+".config.showInfoUseLabel && "+d+".config.topSlideNum > 1) || !"+d+".config.openSlider")]},{type:"divider"},{type:"fieldset",title:l.default("散点标签和 Tooltip 设置"),collapsable:!0,collapsed:!0,headingClassName:"fieldset-title",controls:[n.amisInlineSwitch(d+".config.showInfoUseLabel",l.default("使用标签展示数据内容")),{type:"group",direction:"vertical",hiddenOn:d+".config.showInfoUseLabel",controls:[n.amisInlineSwitch(d+".config.showProvinceName",l.default("显示散点名称")),{type:"group",direction:"vertical",hiddenOn:"!"+d+".config.showProvinceName",controls:[{type:"group",controls:[{type:"color",name:d+".config.textColor",label:l.default("名称颜色"),format:"rgba"},{type:"number",label:l.default("名称字号"),name:d+".config.textSize",step:1,min:1,max:100}]},{type:"group",controls:[{type:"select",name:d+".config.textPlace",label:l.default("名称位置"),placeholder:l.default("请选择"),options:[{label:l.default("右侧"),value:"right"},{label:l.default("左侧"),value:"left"},{label:l.default("上方"),value:"top"},{label:l.default("下方"),value:"bottom"},{label:l.default("内部"),value:"inside"}]},{type:"number",label:l.default("名称与散点距离"),name:d+".config.textOffset",step:1,min:10,max:100}]},n.amisInlineSwitch(d+".config.avoid",l.default("避免散点名称文字相互重叠"))]},n.amisInlineSwitch(d+".config.showRank",l.default("Tooltip 中展示排名")),n.amisInlineSwitch(d+".config.tipPercent",l.default("Tooltip 中展示百分比")),{type:"number",label:l.default("Tooltip 字号"),name:d+".config.tooltipFontSize",step:1,min:8,max:100},{type:"group",controls:[{type:"color",name:d+".config.tooltipFontColor",label:l.default("Tooltip 文字颜色"),format:"rgba"},{type:"color",name:d+".config.tooltipBackground",label:l.default("Tooltip 背景颜色"),format:"rgba"}]},{type:"group",controls:[{type:"color",label:l.default("背景边框色"),name:d+".config.tooltipBorderColor",format:"rgba"},{type:"number",label:l.default("背景边框宽度"),name:d+".config.tooltipBorderWidth"}]}]},{type:"group",direction:"vertical",hiddenOn:"!"+d+".config.showInfoUseLabel",controls:[n.amisInlineSwitch(d+".config.showMMCityLabel",l.default("显示最值气泡标签")),{type:"number",name:d+".config.topCityNum",hiddenOn:d+".config.showMMCityLabel",label:l.default("展示Top气泡标签"),step:1,min:0,max:100},{type:"radios",label:l.default("标签展示内容"),inline:!1,name:d+".config.labelContentType",options:[{label:l.default("简洁模式(仅展示气泡名称)"),value:"simple"},{label:l.default("正常模式(展示所有已配置的字段)"),value:"normal"},{label:l.default("高级模式(自定义要展示的内容)"),value:"auto"}]},{type:"group",direction:"vertical",hiddenOn:d+".config.labelContentType !== 'normal'",controls:[n.amisInlineSwitch(d+".config.showRank",l.default("标签中展示排名")),n.amisInlineSwitch(d+".config.tipPercent",l.default("标签中展示百分比"))]},{type:"editor",language:"html",name:d+".config.autoLabelContent",hiddenOn:d+".config.labelContentType !== 'auto'",label:l.default("自定义标签内容"),options:{lineNumbers:"off"},placeholder:l.default("{name}的GDP是{value}"),desc:'<a href="/docs/Chart-map-layer#高级设置-1"\n              class="text-sm text-info" target="_blank">'+l.default("如何自定义？")+"</a>"},{type:"group",direction:"vertical",controls:[{type:"group",controls:[{type:"color",label:l.default("字体颜色"),name:d+".config.tooltipFontColor"},{type:"color",label:l.default("背景色"),name:d+".config.tooltipBackground",format:"rgba"}]},{type:"group",controls:[{type:"color",label:l.default("背景边框色"),name:d+".config.tooltipBorderColor",format:"rgba"},{type:"number",label:l.default("背景边框宽度"),name:d+".config.tooltipBorderWidth"}]},{type:"group",controls:[{type:"number",label:l.default("标签字号"),name:d+".config.tooltipFontSize",step:1,min:8,max:100},{type:"select",label:l.default("标签位置"),name:d+".config.scatterFontPos",options:[{label:l.default("右侧"),value:"right"},{label:l.default("左侧"),value:"left"},{label:l.default("上方"),value:"top"},{label:l.default("下方"),value:"bottom"}]}]}]}]},{type:"group",controls:[{type:"text",name:d+".config.unit",label:l.default("散点颜色数据单位"),placeholder:l.default("默认为空")},{type:"text",name:d+".config.unit1",label:l.default("散点大小数据单位"),placeholder:l.default("默认为空")}]}]},{type:"divider"},{type:"fieldset",collapsed:!0,title:l.default("系列设置"),collapsable:!0,headingClassName:"fieldset-title",controls:t.__spreadArrays([n.amisInlineSwitch(d+".config.autoSymbolType",l.default("自定义散点形状"))],p.scatterImage(a,e.symbolOps,o))},{type:"divider"},{type:"fieldset",collapsed:!0,title:l.default("地名映射设置"),collapsable:!0,headingClassName:"fieldset-title",controls:[{type:"select",name:d+".config.prefix",label:l.default("名称查找前缀（部分区县有重名，需要市名区分）"),clearable:!0,options:s.prefixCity,searchable:!0,resetValue:"",desc:l.default("当使用地名映射坐标时，由于部分区县出现同名情况，因此需要使用城市前缀来区分，如果发现坐标不正确，则需要设置前缀进行校正。")}]}]},e.scatterInitialState={dataType:"api",dataApiUrl:e.scatterChartDemoUrl,config:{customColorType:"default",pointShape:"circle",symbolSize:10,minSize:5,maxSize:15,labelContentType:"normal",openSlider:!1,topCoslCnt:5,topCityNum:5,slideInterval:5,showRank:!0,tipPercent:!0,tooltipFontSize:12,highlightColor:"rgba(144, 19, 254, 1)",tooltipFontColor:"rgba(248, 231, 28, 1)",tooltipBorderWidth:0,tooltipBorderColor:"#fff",scatterFontPos:"right",topSlideNum:1,vMapType:"continuous"},dataConfig:{coordType:"auto"}},e.labelInitialState={dataType:"api",dataApiUrl:e.scatterChartDemoUrl+"&label=true",config:{vMapType:"continuous",showInfoUseLabel:!0,topCityNum:5,customColorType:"default",pointShape:"circle",scatterFontPos:"right",openSlider:!0,slideInterval:5,topCoslCnt:15,topSlideNum:3,minSize:5,maxSize:15,labelContentType:"auto",tooltipFontColor:"#000",tooltipBorderWidth:1,tooltipBackground:"rgba(255, 255, 255, 0.5)",tooltipBorderColor:"rgba(240, 8, 89, 1)",autoLabelContent:'<div style="line-height:1.5">\n  <span style="vertical-align: middle;color: #EB0028;line-height:24px;margin-right: 5px;verticle-align:middle">{tooltipValues[1]}</span>\n  <img src="{tooltipValues[0]}" width=24 height=24 style="border-radius: 50%"/>\n  <span>今年 {value} 岁<span>\n  <div>在{name}一共发送了{sizeValue}条微博<div>\n</div>'},dataConfig:{coordType:"auto"}}});
;sugar.define("sugar:widgets/charts/map-layer/heatmap/heatmap.tsx",function(e,t){"use strict";function a(e,a,u,s,c){return r.__awaiter(this,void 0,void 0,function(){var d,m,f,p,v,g,h,y,b,C,_,w,D,M,x,S,A,T,j,O;return r.__generator(this,function(){if(d=a.map,m=a.layersMap,f=a.eventMap,p=a.container,v=a.mainTooltip,g=m[u]||{},h=g.heatmapDataSet||new mapv.DataSet([]),y=g.heatmapLayer||new mapv.baiduMapLayer(d,h,{}),m[u]={heatmapDataSet:h,heatmapLayer:y},b=s.config,C=[],_={},c&&"done"===c.loadState&&c.data&&(_=i(c.data),C=_.mapData),!(C&&C instanceof Array))return[2];if(w=t.validate(C),w!==!0)return l.toast.error(n.default("「"+e.chart.name+"」中子图表「"+s.name+"」数据格式错误：「"+w+"」")),[2];if(D=-1/0,M=1/0,x=[],C.forEach(function(e){var t=parseFloat(e.value)||0;t>D&&(D=t),M>t&&(M=t)}),x=t.convertData(C,b.prefix),a.points){for(a.points[u]=[],S=0,A=x;S<A.length;S++)T=A[S],j=T.geometry.coordinates,a.points[u].push(new BMap.Point(j[0],j[1]));a.autoComputMapStatus()}return O={gradient:o(e,b),max:D,min:M,draw:"heatmap",size:b.symbolSize||1,maxOpacity:b.maxOpacity/10||10},h.set(x),y.update({options:O}),y.draw(),[2]})})}function o(e,t){var a,o=["#1a9850","#91cf60","#d9ef8b","#fee08b","#fc8d59","#d73027"],r=e.theme;"report"===t.customColorType?(o=(null===(a=r.config.chartTheme)||void 0===a?void 0:a.color)||o,o=o.slice(0,4)):"custom"===t.customColorType&&t.customColors&&t.customColors.length&&(o=t.customColors.map(function(e){return e.color})),o=o.filter(function(e){return!!e}),t.colorReverse&&o.reverse();for(var n=1/o.length,i={},u=0;u<o.length;u++)u===o.length-1?i[1]=o[u]:i[(n*u).toFixed(4)]=o[u];return i}Object.defineProperty(t,"__esModule",{value:!0}),t.convertData=t.getColorMap=t.validate=void 0;var r=e("sugar:node_modules/tslib/tslib.js"),n=e("sugar:utils/i18n.ts"),i=e("sugar:node_modules/lodash/cloneDeep.js"),u=e("sugar:widgets/charts/map/geo-coord.ts"),s=e("sugar:utils/common-helper.ts"),l=e("sugar:node_modules/amis/lib/index.js");t.default=a,t.validate=function(e){if(!(e&&e instanceof Array))return n.default("无数据");for(var t=0;t<e.length;t++){var a=e[t];if(!a.name)return n.default("第「"+(t+1)+"」项数据中没有名称name字段");if("string"!=typeof a.name)return n.default("第「"+(t+1)+"」项数据中名称name字段不是字符串");if(!s.isNumberic(a.value))return n.default("第「"+(t+1)+"」项数据中value取值不是数字类型");if(void 0!==a.coord&&!a.coord.length&&2!==a.coord.length&&!s.isArrayOfTypes(a.coord,["number"]))return n.default("第「"+(t+1)+"」项数据中coord字段不是长度为2的经纬度数组");if(void 0!==a.tooltipValues&&!(a.tooltipValues instanceof Array))return n.default("第「"+(t+1)+"」项数据中tooltipValues字段不是数组类型")}return!0},t.getColorMap=o,t.convertData=function(e,t){void 0===t&&(t="");var a=[];return e.forEach(function(e){var o={name:e.name,geometry:{type:"Point"},count:e.value||0};if(e.coord&&e.coord instanceof Array)o.geometry.coordinates=e.coord;else{var r=u.getCoordsFromName(e.name,t);o.geometry.coordinates=r&&r.concat?r:[0,0]}a.push(o)}),a}});
;sugar.define("sugar:widgets/charts/map-layer/honeycomb/honeycomb.tsx",function(a,e){"use strict";function t(a,e,t,u,p){return o.__awaiter(this,void 0,void 0,function(){var m,d,c,h,y,f,g,b,v,w,x,S,_,M,D,j,L,z,A,C;return o.__generator(this,function(){if(m=e.map,d=e.layersMap,c=e.eventMap,h=e.container,y=e.mainTooltip,f=d[t]||{},g=f.honeycombDataSet||new mapv.DataSet([]),b=f.honeycombLayer||new mapv.baiduMapLayer(m,g,{}),d[t]={honeycombDataSet:g,honeycombLayer:b},v=u.config,w=[],x={},p&&"done"===p.loadState&&p.data&&(x=r(p.data),w=x.mapData),!(w&&w instanceof Array))return[2];if(S=l.validate(w),S!==!0)return s.toast.error(n.default("「"+a.chart.name+"」中子图表「"+u.name+"」数据格式错误：「"+S+"」")),[2];if(_=-1/0,M=1/0,D=[],w.forEach(function(a){var e=parseFloat(a.value)||0;e>_&&(_=e),M>e&&(M=e)}),D=i.convertData(w,v),e.points){for(e.points[t]=[],j=0,L=D;j<L.length;j++)z=L[j],A=z.geometry.coordinates,e.points[t].push(new BMap.Point(A[0],A[1]));e.autoComputMapStatus()}return C={gradient:i.getColorMap(a,v),max:_,min:M,draw:v.pointShape||"honeycomb",label:{show:v.showLabel,fillStyle:v.textColor||"white",font:v.textSize+"px Arial"},size:v.symbolSize||60,globalAlpha:v.maxOpacity/10||10},g.set(D),b.update({options:C}),b.draw(),[2]})})}Object.defineProperty(e,"__esModule",{value:!0});var o=a("sugar:node_modules/tslib/tslib.js"),n=a("sugar:utils/i18n.ts"),r=a("sugar:node_modules/lodash/cloneDeep.js"),s=a("sugar:node_modules/amis/lib/index.js"),i=a("sugar:widgets/charts/map-layer/heatmap/heatmap.tsx"),l=a("sugar:widgets/charts/map-layer/heatmap/heatmap.tsx");e.default=t});
;sugar.define("sugar:widgets/charts/map-layer/heatmap/heatmap-ctrl.tsx",function(a,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.heatmapInitialState=e.heatmapAdvancedCtrl=e.heatmapDataBindCtrl=e.heatmapChartDemoUrl=void 0;var t=a("sugar:node_modules/tslib/tslib.js"),d=a("sugar:utils/i18n.ts"),o=a("sugar:node_modules/react/index.js"),l=a("sugar:widgets/ctrl-panel/data-bind-ctrl/index.tsx"),i=a("sugar:widgets/object-array-editor/object-array-editor.tsx"),n=a("sugar:widgets/amis-inline-switch.tsx"),r=a("sugar:widgets/charts/map/map-ctrl.tsx"),s=a("sugar:widgets/data-model/data-model-field-holder/data-model-field-holder.tsx"),p=a("sugar:widgets/charts/map/special-district.ts"),f="/openapi/demo/chart?type=bmapScatter";e.heatmapChartDemoUrl="$CUR_HOST/openapi/demo/chart?type=bmapScatter",e.heatmapDataBindCtrl=function(a){var e=a.activeSubChartKey;if(void 0===e)return[];var t="config.subChartConfig."+e,o=l.getDebugAndRefreshBtn({loadData:function(t){a.chart.loadOtherData(t,e)},loadDebugData:function(){a.chart.loadDebugOtherData(e)},dataType:a.chart.config.subChartConfig[e].dataType,field:{dataType:t+".dataType"},refreshText:d.default("刷新子组件")}),i=l.getDataBindCommon({frontendId:e,label:d.default("子组件数据绑定"),field:{dataType:t+".dataType",dataApiUrl:t+".dataApiUrl",staticData:t+".dataConfig.data",dataModelHash:t+".dataModelHash",dataJsonHash:t+".dataConfig.dataJsonHash",exemption:t+".dataConfig.exemption",cacheTTL:t+".dataConfig.cacheTTL",apiProOpen:t+".dataConfig.apiPro_open",apiProMethod:t+".dataConfig.apiPro_method",apiProGetAuto:t+".dataConfig.apiPro_getAuto",apiProHeaderList:t+".dataConfig.apiPro_headerList",apiProPostType:t+".dataConfig.apiPro_postType",apiProPostList:t+".dataConfig.apiPro_postList",apiProPostAuto:t+".dataConfig.apiPro_postAuto",apiProAdaptorOpen:t+".dataConfig.apiPro_adaptorOpen",apiProAdaptorHash:t+".dataConfig.apiPro_adaptorHash"},dataTypeOptions:["dataModel","api","sql","json"],api:{demoUrl:f},loadData:function(t){a.chart.loadOtherData(t,e)},loadDebugData:function(){a.chart.loadDebugOtherData(e)},curUrl:a.chart.config.subChartConfig[e].dataApiUrl}),r=a.chart.config.subChartConfig[e].dataModelHash||"",p=a.sqlModelStore.detailMap.mapByHash.get(r),u=l.generateSQLFieldList(p),c=[s.getDataModelFieldHolder({name:"name",namePrefix:t+".dataConfig.dataModel",hiddenOn:"data."+t+".dataType != 'dataModel'",label:d.default("热力点位置名称字段"),config:{dataModelHash:r,holderId:e+"-name",maxCount:1,onlyDimension:!0}}),s.getDataModelFieldHolder({name:"value",namePrefix:t+".dataConfig.dataModel",hiddenOn:"data."+t+".dataType != 'dataModel'",label:d.default("取值字段(颜色深浅)"),config:{dataModelHash:r,holderId:e+"-value",maxCount:1,onlyMeasure:!0}}),{type:"radios",name:t+".dataConfig.coordType",hiddenOn:"data."+t+".dataType != 'dataModel'",label:d.default("散点经纬度计算方式"),inline:!1,options:[{label:d.default("根据名称自动查找（支持省市县名称）"),value:"auto"},{label:d.default("提供经纬度字段"),value:"bind"}]},s.getDataModelFieldHolder({name:"lng",label:d.default("经度"),namePrefix:t+".dataConfig.dataModel",hiddenOn:"data."+t+'.dataType != "dataModel" || data.'+t+".dataConfig.coordType !== 'bind'",config:{dataModelHash:r,holderId:e+"-longitude",maxCount:1,onlyDimension:!0}}),s.getDataModelFieldHolder({name:"lat",label:d.default("纬度"),namePrefix:t+".dataConfig.dataModel",hiddenOn:"data."+t+'.dataType != "dataModel" || data.'+t+".dataConfig.coordType !== 'bind'",config:{dataModelHash:r,holderId:e+"-latitude",maxCount:1,onlyDimension:!0}}),n.amisInlineSwitch(t+".dataConfig.transCoord",d.default("国测局转百度坐标系"),"data."+t+'.dataType != "dataModel" || data.'+t+".dataConfig.coordType !== 'bind'",!1,d.default("当前坐标系为百度坐标系，如果对数据精度要求高，建议开启转换")),l.commonFilterForDataModel(r,t+".dataConfig.dataModel.filters","data."+t+".dataType != 'dataModel'"),l.commonBindUrlParamForDataModel(r,t+".dataConfig.dataModel.filters","data."+t+".dataType != 'dataModel'"),l.getCommonLimitForDataModel(t,"data."+t+".dataType != 'dataModel'"),{type:"select",name:t+".dataConfig.nameField",hiddenOn:"data."+t+".dataType != 'sql'",label:d.default("热力点位置名称字段（省、市、地点）"),placeholder:d.default("请选择"),options:u},{type:"select",name:t+".dataConfig.valueField",hiddenOn:"data."+t+".dataType != 'sql'",label:d.default("颜色映射取值字段"),placeholder:d.default("请选择"),options:u},{type:"radios",name:t+".dataConfig.coordType",label:d.default("热力点的经纬度计算方式"),hiddenOn:"data."+t+".dataType != 'sql'",inline:!1,options:[{label:d.default("根据名称自动查找（支持省市县名称）"),value:"auto"},{label:d.default("提供经纬度字段"),value:"bind"}]},{type:"select",name:t+".dataConfig.lngField",hiddenOn:"data."+t+".dataType != 'sql' || data."+t+'.dataConfig.coordType != "bind"',label:d.default("经度字段"),placeholder:d.default("请选择"),clearable:!0,options:u},{type:"select",name:t+".dataConfig.latField",hiddenOn:"data."+t+".dataType != 'sql' || data."+t+'.dataConfig.coordType != "bind"',label:d.default("纬度字段"),placeholder:d.default("请选择"),clearable:!0,options:u},n.amisInlineSwitch(t+".dataConfig.transCoord",d.default("国测局转百度坐标系"),"data."+t+".dataType != 'sql' || data."+t+'.dataConfig.coordType != "bind"',!1,d.default("当前坐标系为百度坐标系，如果对数据精度要求高，建议开启转换"))],g=l.getAutoRefreshConfig({field:{needAutoRefresh:t+".dataConfig.needAutoRefresh",autoRefreshInterval:t+".dataConfig.autoRefreshInterval",dataType:t+".dataType",autoDestory:t+".autoDestory",showNullData:t+".showNullData",isDashChart:a.chart.isDashChart}});return i.concat(c,o,g)},e.heatmapAdvancedCtrl=function(a){var e=a.activeSubChartKey;if(void 0===e)return[];var l="config.subChartConfig."+e;return[{type:"radios",name:l+".config.customColorType",label:d.default("热力点颜色映射类型"),inline:!1,options:[{label:d.default("默认配色"),value:"default"},{label:d.default("跟随页面主题配色"),value:"report"},{label:d.default("自定义配色"),value:"custom"}]},{name:l+".config.customColors",hiddenOn:"data."+l+".config.customColorType != 'custom'",children:function(e){var l=e.onChange,n=e.value;return o.createElement(i.default,t.__assign({},{onChange:l,value:n},{chartFrontendId:a.chart.frontendId,containerClassName:"form-group form-item",label:d.default("可增加多个配色项，依次映射数值从小到大的颜色"),addTipText:d.default("新增配色项"),cols:r.customColorsCols}))}},n.amisInlineSwitch(l+".config.colorReverse",d.default("颜色映射反转")),{type:"range",label:d.default("热力点半径"),name:l+".config.symbolSize",step:1,min:1,max:100},{type:"range",label:d.default("热力点透明度"),name:l+".config.maxOpacity",step:1,min:1,max:10},{type:"select",name:l+".config.prefix",label:d.default("名称查找前缀（部分区县有重名，需要市名区分）"),clearable:!0,options:p.prefixCity,searchable:!0,resetValue:"",desc:d.default("当使用地名映射坐标时，由于部分区县出现同名情况，因此需要使用城市前缀来区分，如果发现坐标不正确，则需要设置前缀进行校正。")}]},e.heatmapInitialState={dataType:"api",dataApiUrl:e.heatmapChartDemoUrl,config:{customColorType:"default",symbolSize:10},dataConfig:{coordType:"auto"}}});
;sugar.define("sugar:widgets/charts/map-layer/honeycomb/honeycomb-ctrl.tsx",function(a,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.honeycombInitialState=e.honeycombAdvancedCtrl=e.honeycombDataBindCtrl=e.honeycombChartDemoUrl=void 0;var t=a("sugar:node_modules/tslib/tslib.js"),d=a("sugar:utils/i18n.ts"),o=a("sugar:node_modules/react/index.js"),l=a("sugar:widgets/ctrl-panel/data-bind-ctrl/index.tsx"),n=a("sugar:widgets/object-array-editor/object-array-editor.tsx"),i=a("sugar:widgets/amis-inline-switch.tsx"),r=a("sugar:widgets/charts/map/map-ctrl.tsx"),s=a("sugar:widgets/data-model/data-model-field-holder/data-model-field-holder.tsx"),f="/openapi/demo/chart?type=bmapScatter";e.honeycombChartDemoUrl="$CUR_HOST/openapi/demo/chart?type=bmapScatter",e.honeycombDataBindCtrl=function(a){var e=a.activeSubChartKey;if(void 0===e)return[];var t="config.subChartConfig."+e,o=l.getDebugAndRefreshBtn({loadData:function(t){a.chart.loadOtherData(t,e)},loadDebugData:function(){a.chart.loadDebugOtherData(e)},dataType:a.chart.config.subChartConfig[e].dataType,field:{dataType:t+".dataType"},refreshText:d.default("刷新子组件")}),n=l.getDataBindCommon({frontendId:e,label:d.default("子组件数据绑定"),field:{dataType:t+".dataType",dataApiUrl:t+".dataApiUrl",staticData:t+".dataConfig.data",dataModelHash:t+".dataModelHash",dataJsonHash:t+".dataConfig.dataJsonHash",exemption:t+".dataConfig.exemption",cacheTTL:t+".dataConfig.cacheTTL",apiProOpen:t+".dataConfig.apiPro_open",apiProMethod:t+".dataConfig.apiPro_method",apiProGetAuto:t+".dataConfig.apiPro_getAuto",apiProHeaderList:t+".dataConfig.apiPro_headerList",apiProPostType:t+".dataConfig.apiPro_postType",apiProPostList:t+".dataConfig.apiPro_postList",apiProPostAuto:t+".dataConfig.apiPro_postAuto",apiProAdaptorOpen:t+".dataConfig.apiPro_adaptorOpen",apiProAdaptorHash:t+".dataConfig.apiPro_adaptorHash"},dataTypeOptions:["dataModel","api","sql","json"],api:{demoUrl:f},loadData:function(t){a.chart.loadOtherData(t,e)},loadDebugData:function(){a.chart.loadDebugOtherData(e)},curUrl:a.chart.config.subChartConfig[e].dataApiUrl}),r=a.chart.config.subChartConfig[e].dataModelHash||"",p=a.sqlModelStore.detailMap.mapByHash.get(r),u=l.generateSQLFieldList(p),c=[s.getDataModelFieldHolder({name:"name",namePrefix:t+".dataConfig.dataModel",hiddenOn:"data."+t+".dataType != 'dataModel'",label:d.default("蜂窝名称字段"),config:{dataModelHash:r,holderId:e+"-name",maxCount:1,onlyDimension:!0}}),s.getDataModelFieldHolder({name:"value",namePrefix:t+".dataConfig.dataModel",hiddenOn:"data."+t+".dataType != 'dataModel'",label:d.default("取值字段(颜色深浅，选填)"),config:{dataModelHash:r,holderId:e+"-value",maxCount:1,onlyMeasure:!0}}),{type:"radios",name:t+".dataConfig.coordType",hiddenOn:"data."+t+".dataType != 'dataModel'",label:d.default("蜂窝位置计算方式"),inline:!1,options:[{label:d.default("根据名称自动查找（支持省市县名称）"),value:"auto"},{label:d.default("提供经纬度字段"),value:"bind"}]},s.getDataModelFieldHolder({name:"lng",label:d.default("经度"),namePrefix:t+".dataConfig.dataModel",hiddenOn:"data."+t+'.dataType != "dataModel" || data.'+t+".dataConfig.coordType !== 'bind'",config:{dataModelHash:r,holderId:e+"-longitude",maxCount:1,onlyDimension:!0}}),s.getDataModelFieldHolder({name:"lat",label:d.default("纬度"),namePrefix:t+".dataConfig.dataModel",hiddenOn:"data."+t+'.dataType != "dataModel" || data.'+t+".dataConfig.coordType !== 'bind'",config:{dataModelHash:r,holderId:e+"-latitude",maxCount:1,onlyDimension:!0}}),i.amisInlineSwitch(t+".dataConfig.transCoord",d.default("国测局转百度坐标系"),"data."+t+'.dataType != "dataModel" || data.'+t+".dataConfig.coordType !== 'bind'",!1,d.default("当前坐标系为百度坐标系，如果对数据精度要求高，建议开启转换")),l.commonFilterForDataModel(r,t+".dataConfig.dataModel.filters","data."+t+".dataType != 'dataModel'"),l.commonBindUrlParamForDataModel(r,t+".dataConfig.dataModel.filters","data."+t+".dataType != 'dataModel'"),l.getCommonLimitForDataModel(t,"data."+t+".dataType != 'dataModel'"),{type:"select",name:t+".dataConfig.nameField",hiddenOn:"data."+t+".dataType != 'sql'",label:d.default("蜂窝名称字段"),placeholder:d.default("请选择"),options:u},{type:"select",name:t+".dataConfig.valueField",hiddenOn:"data."+t+".dataType != 'sql'",label:d.default("颜色映射取值字段"),placeholder:d.default("可选填"),options:u},{type:"radios",name:t+".dataConfig.coordType",label:d.default("蜂窝位置的经纬度计算方式"),inline:!1,hiddenOn:"data."+t+".dataType != 'sql'",options:[{label:d.default("根据名称自动查找（支持省市县名称）"),value:"auto"},{label:d.default("提供经纬度字段"),value:"bind"}]},{type:"select",name:t+".dataConfig.lngField",hiddenOn:"data."+t+".dataType != 'sql' || data."+t+'.dataConfig.coordType != "bind"',label:d.default("经度字段"),placeholder:d.default("请选择"),clearable:!0,options:u},{type:"select",name:t+".dataConfig.latField",hiddenOn:"data."+t+".dataType != 'sql' || data."+t+'.dataConfig.coordType != "bind"',label:d.default("纬度字段"),placeholder:d.default("请选择"),clearable:!0,options:u},i.amisInlineSwitch(t+".dataConfig.transCoord",d.default("国测局转百度坐标系"),"data."+t+".dataType != 'sql' || data."+t+'.dataConfig.coordType != "bind"',!1,d.default("当前坐标系为百度坐标系，如果对数据精度要求高，建议开启转换"))],h=l.getAutoRefreshConfig({field:{needAutoRefresh:t+".dataConfig.needAutoRefresh",autoRefreshInterval:t+".dataConfig.autoRefreshInterval",dataType:t+".dataType",autoDestory:t+".autoDestory",showNullData:t+".showNullData",isDashChart:a.chart.isDashChart}});return n.concat(c,o,h)},e.honeycombAdvancedCtrl=function(a){var e=a.activeSubChartKey;if(void 0===e)return[];var l="config.subChartConfig."+e;return[{type:"fieldset",title:d.default("蜂窝样式设置"),collapsable:!0,collapsed:!0,headingClassName:"fieldset-title",controls:[{type:"radios",name:l+".config.customColorType",label:d.default("数值映射颜色类型"),inline:!1,options:[{label:d.default("默认配色"),value:"default"},{label:d.default("跟随页面主题配色"),value:"report"},{label:d.default("自定义配色"),value:"custom"}]},{name:l+".config.customColors",hiddenOn:"data."+l+".config.customColorType != 'custom'",children:function(e){var l=e.onChange,i=e.value;return o.createElement(n.default,t.__assign({},{onChange:l,value:i},{chartFrontendId:a.chart.frontendId,containerClassName:"form-group form-item",label:d.default("可增加多个配色项，依次映射数值从小到大的颜色"),addTipText:d.default("新增配色项"),cols:r.customColorsCols}))}},i.amisInlineSwitch(l+".config.colorReverse","数值映射颜色反转"),{type:"range",label:d.default("蜂窝透明度"),name:l+".config.maxOpacity",step:1,min:1,max:10},{type:"select",name:l+".config.pointShape",label:d.default("蜂窝形状"),placeholder:d.default("请选择"),options:[{label:d.default("方形"),value:"grid"},{label:d.default("蜂窝"),value:"honeycomb"}]},{type:"number",label:d.default("蜂窝大小"),name:l+".config.symbolSize",step:1,min:1,max:100}]},{type:"divider"},{type:"fieldset",title:d.default("蜂窝标签设置"),collapsable:!0,collapsed:!0,headingClassName:"fieldset-title",controls:[i.amisInlineSwitch(l+".config.showLabel",d.default("显示标签")),{type:"color",name:l+".config.textColor",label:d.default("标签颜色"),format:"rgba",hiddenOn:"!data."+l+".config.showLabel"},{type:"number",label:d.default("标签字号"),name:l+".config.textSize",hiddenOn:"!data."+l+".config.showLabel",step:1,min:1,max:100}]}]},e.honeycombInitialState={dataType:"api",dataApiUrl:e.honeycombChartDemoUrl,config:{customColorType:"default",pointShape:"honeycomb",symbolSize:60,maxOpacity:7,showLabel:!0,textColor:"#fff",textSize:14},dataConfig:{coordType:"auto"}}});
;sugar.define("sugar:widgets/charts/map-layer/line/line.tsx",function(t,e){"use strict";function a(t,e,a,u,v){return n.__awaiter(this,void 0,void 0,function(){var y,w,x,D,b,S,_,z,k,C,V,P,T,N,F,L,E,M,W,O,A,U,j,B,I,R,H,K,q,G,J,Q,X,Y,Z,$,te,ee,ae,oe,ie,re,ne,se,le,ue,ce;return n.__generator(this,function(de){switch(de.label){case 0:if(y=e.map,w=e.layersMap,x=e.eventMap,D=e.container,b=e.mainTooltip,S=w[a]||{},_=S.lineDataSet||new mapv.DataSet([]),z=S.lineLayer||new mapv.baiduMapLayer(y,_,{}),k=S.scatterDataSet||new mapv.DataSet([]),C=S.scatterLayer||new mapv.baiduMapLayer(y,k,{}),V=S.animationDataSet||new mapv.DataSet([]),P=S.animationLayer||new mapv.baiduMapLayer(y,V,{}),T=S.textDataSet||new mapv.DataSet([]),N=S.textLayer||new mapv.baiduMapLayer(y,T,{}),F=S.sliderToolTip||new f.ToolTip(D.parentElement||D),w[a]={scatterDataSet:k,scatterLayer:C,textDataSet:T,textLayer:N,lineDataSet:_,lineLayer:z,animationDataSet:V,animationLayer:P,sliderToolTip:F},L=u.config,E=[],M={},v&&"done"===v.loadState&&v.data&&(M=l(v.data),E=M.mapData),!(E&&E instanceof Array))return[2];if(W=h(E),W!==!0)return p.toast.error(s.default("「"+t.chart.name+"」中子图表「"+u.name+"」数据格式错误：「"+W+"」")),[2];if(E.sort(function(t,e){return parseFloat(t.value)>parseFloat(e.value)?-1:1}),O=E.length,A=-1/0,U=1/0,j=-1/0,B=1/0,I=!1,R=!1,H=0,E.forEach(function(t){if(void 0!==t.value&&!isNaN(+t.value)){I=!0;var e=parseFloat(t.value)||0;e>A&&(A=e),U>e&&(U=e),H+=e}if(void 0!==t.sizeValue&&!isNaN(+t.sizeValue)){R=!0;var e=parseFloat(t.sizeValue)||0;e>j&&(j=e),B>e&&(B=e)}}),I?U===A&&U--:(U=0,A=0),R?B===j&&B--:(B=0,j=0),K=null,q=g(E,L,R,B,j),G=q.lineData,J=q.pointData,Q=q.animationData,X=q.textData,Y=q.coordinateData,e.points){for(e.points[a]=[],Z=0,$=Y;Z<$.length;Z++)te=$[Z],e.points[a].push(new BMap.Point(te[0],te[1]));e.autoComputMapStatus()}return ee=i(t,L),ae={methods:{click:function(t){d.isMobile||c.fireEvent(x,"click",u,t,!0)},mousemove:function(t){c.fireEvent(x,"mousemove",u,t)},tap:function(t){c.fireEvent(x,"tap",u,t,!0)}}},ae=I?n.__assign(n.__assign({},ae),{gradient:ee,max:A,min:U,draw:"intensity"}):n.__assign(n.__assign({},ae),{draw:"simple",globalCompositeOperation:L.blend?"lighter":void 0,strokeStyle:L.lineColor||"#1917e5"}),c.registEvent(x,"mousemove",u,function(t){if(K&&(K.lineWidth=K.widthStandard,K.strokeStyle=""),t){K=t,y.setDefaultCursor("pointer"),L.highlightColor&&(t.strokeStyle=L.highlightColor),t.lineWidth=1.3*t.widthStandard;var a=e.getMousePosition();a&&(b.setContent(o(t,L,H,O,M,I,R)),b.show(a.x+10,a.y+10))}else y.setDefaultCursor("default"),b.hide();z.draw()}),c.registEvent(x,"click",u,function(t){r(t,E,e,a,K,z,b)}),c.registEvent(x,"tap",u,function(t){if(r(t,E,e,a,K,z,b),t){var i=e.getMousePosition();i&&(F.setContent(o(t,L,H,O,M,I,R)),F.show(i.x+10,i.y+10))}else F.hide()}),_.set(G),z.update({options:ae}),z.draw(),L.showPoint?(oe=L.symbolSize||10,ie={max:A,min:U,lineWidth:L.strokeWidth||0,strokeStyle:L.strokeColor||"#4a6671"},L.symbolColor?(ie.fillStyle=L.symbolColor,ie.draw="simple"):(ie.gradient=ee,ie.draw="intensity"),re=L.imgInputs&&L.imgInputs[0],L.imgUrls||re?(ie.draw="icon",ne=re,L.imgUrls&&(ne=location.protocol+"//"+(location.host+L.imgUrls)),se=ie,[4,m.generateImage(ne)]):[3,2]):[3,4];case 1:return se.icon=de.sent(),ie.width=oe,ie.height=oe,[3,3];case 2:ie.symbol=L.scatterType||"circle",ie.size=oe,de.label=3;case 3:k.set(J),C.update({options:ie}),C.draw(),de.label=4;case 4:return L.showEffect&&(le={max:A,min:U,size:L.effectSymbolSize||1,symbol:L.symbolType||"circle",animation:{type:"time",stepsRange:{start:0,end:50},trails:L.trailLength||0,duration:L.effectPeriod||5}},L.effectHighlightColor?(le.fillStyle=L.effectHighlightColor,le.draw="simple"):(le.gradient=ee,le.draw="intensity"),V.set(Q),P.update({options:le}),P.draw()),L.showProvinceName&&(ue=L.textSize||15,ce={draw:"text",avoid:!!L.avoid,size:ue,font:"Arial",fillStyle:L.textColor||"black"},T.set(X),N.update({options:ce}),N.draw()),[2]}})})}function o(t,e,a,o,i,r,n){var l="",u=e.tooltipFontSize;e.tipPercent&&(l="("+(parseFloat(t.count)/a*100).toFixed(2)+"%)");var c=t.name||s.default("飞线");if(r){var p=d.formatDataByType(t.count,i.dataFormat)+(i.unit||e.unit||"")+l;c+="<br> "+(i.valueName||s.default("线条颜色"))+": "+p}return n&&(c+="<br>"+(i.sizeValueName||s.default("线条宽度"))+": "+d.formatDataByType(t.sizeValue,i.sizeDataFormat)+(i.sizeUnit||e.unit1||"")),t&&t.tooltipValues&&t.tooltipValues instanceof Array&&t.tooltipValues.forEach(function(t,e){var a=i.tooltipNames&&i.tooltipNames[e]?i.tooltipNames[e]+": ":"",o=i.tooltipUnits&&i.tooltipUnits[e]?i.tooltipUnits[e]:"";c+="<br>"+a+d.formatDataByType(t,i.tooltipDataFormats?i.tooltipDataFormats[e]:"")+o}),e.showRank&&r&&(c=s.default("【第「"+(t.rank+1)+"」名/「"+o+"」】<br>")+c),'<div class="tooltip-content" style="font-size: '+u+"px;line-height:1.3;color:"+e.tooltipFontColor+";background:"+e.tooltipBackground+'">'+c+"</div>"}function i(t,e){var a,o=["#1a9850","#91cf60","#d9ef8b","#fee08b","#fc8d59","#d73027"],i=t.theme;"report"===e.customColorType?(o=(null===(a=i.config.chartTheme)||void 0===a?void 0:a.color)||o,o=o.slice(0,4)):"custom"===e.customColorType&&e.customColors&&e.customColors.length&&(o=e.customColors.map(function(t){return t.color})),o=o.filter(function(t){return!!t}),e.colorReverse&&o.reverse();for(var r=1/o.length,n={},s=0;s<o.length;s++)s===o.length-1?n[1]=o[s]:n[(r*s).toFixed(4)]=o[s];return n}function r(t,e,a,o,i,r,s){if(t){var l=e[t.rank],u=(l.coords,n.__rest(l,["coords"]));a.fireDrillDownOrDependence({fireKey:o,dataIndex:t.rank},n.__assign(n.__assign({},u),{_sugar_dd_default_:u.hasOwnProperty("_sugar_extra")?u._sugar_extra:u.name_sugar_origin||u.name}))}i&&(i.strokeStyle="",i.lineWidth=i.widthStandard,r.draw(),s.hide())}Object.defineProperty(e,"__esModule",{value:!0});var n=t("sugar:node_modules/tslib/tslib.js"),s=t("sugar:utils/i18n.ts"),l=t("sugar:node_modules/lodash/cloneDeep.js"),u=t("sugar:widgets/charts/map/geo-coord.ts"),c=t("sugar:widgets/charts/map-layer/event-handler.ts"),d=t("sugar:utils/common-helper.ts"),p=t("sugar:node_modules/amis/lib/index.js"),f=t("sugar:widgets/tooltip/tooltip.ts"),m=t("sugar:widgets/charts/map-layer/scatter/scatter.tsx");e.default=a;var g=function(t,e,a,o,i){var r=[],n=[],s=[],l=[],c=[];return t.forEach(function(t,d){var p=t.value||0,f=e.lineWidth||3;a&&void 0!==t.sizeValue&&!isNaN(+t.sizeValue)&&(f=m.getSize(e.minWidth||1,e.maxWidth||5,o,i,+t.sizeValue)),t.rank=d;var g={geometry:{type:"LineString"},count:p,sizeValue:t.sizeValue,lineWidth:f,widthStandard:f,rank:t.rank};t.tooltipValues&&(g.tooltipValues=t.tooltipValues);var h=[];t.coords&&2===t.coords.length?h=t.coords:t.locations&&t.locations.length&&(h=t.locations.map(function(t){return u.getCoordsFromName(t,e.prefix)||[0,0]})),c.push(h[0]),c.push(h[1]);var v=mapv.utilCurve.getPoints(h.map(function(t){return{lng:t[0],lat:t[1]}}));if(g.geometry.coordinates=v,e.showEffect)for(var y=0;y<v.length;y++)s.push({geometry:{type:"Point",coordinates:v[y]},count:p,time:y});var w=t.name,x=e.textSize||15;t.locations&&2===t.locations.length&&(w||(w=t.locations.join("->")),e.showProvinceName&&t.locations.forEach(function(t,a){if(t){var o={x:0,y:0},i=t.length/2*x,r=x/2,n=e.textOffset||0;"right"===e.textPlace?o.x=i+n:"left"===e.textPlace?o.x=-i-n:"top"===e.textPlace?o.y=-r-n:"bottom"===e.textPlace&&(o.y=r+n),l.push({geometry:{type:"Point",coordinates:h[a]},text:t,offset:o})}})),g.name=w,r.push(g),e.showPoint&&(n.push({geometry:{type:"Point",coordinates:h[0]},count:p,rank:t.rank}),n.push({geometry:{type:"Point",coordinates:h[1]},count:p,rank:t.rank}))}),{coordinateData:c,animationData:s,lineData:r,pointData:n,textData:l}},h=function(t){for(var e=0;e<t.length;e++){var a=t[e];if(!a.name)return s.default("第「"+(e+1)+"」项数据中没有名称name字段");if("string"!=typeof a.name)return s.default("第「"+(e+1)+"」项数据中名称name字段不是字符串");if(void 0!==a.value&&!d.isNumberic(a.value))return s.default("第「"+(e+1)+"」项数据中value取值不是数字类型");if(void 0!==a.sizeValue&&!d.isNumberic(a.sizeValue))return s.default("第「"+(e+1)+"」项数据中sizeValue取值不是数字类型");if(void 0!==a.coords&&!a.coords.length&&2!==a.coords.length&&2!==a.coords[0].length&&2!==a.coords[1].length&&!d.isArrayOfTypes(a.coords[0],["number"])&&!d.isArrayOfTypes(a.coords[1],["number"]))return s.default("第「"+(e+1)+"」项数据中coords取值应为长度为2且每一项都应该是长度为2的经纬度数组");if(void 0!==a.locations&&!a.locations.length&&2!==a.locations.length&&!d.isArrayOfTypes(a.locations,["string"]))return s.default("第「"+(e+1)+"」项数据中locations取值应为长度为2的字符串数组");if(void 0!==a.tooltipValues&&!(a.tooltipValues instanceof Array))return s.default("第「"+(e+1)+"」项数据中tooltipValues字段不是数组类型")}return!0}});
;sugar.define("sugar:widgets/charts/map-line/map-line-ctrl.tsx",function(e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.advancedCtrl=a.dataBindCtrl=a.getScatterShape=a.chartEigens=a.chartDemoUrl=a.basicCtrl=void 0;var t=e("sugar:node_modules/tslib/tslib.js"),l=e("sugar:utils/i18n.ts"),o=e("sugar:node_modules/react/index.js"),n=e("sugar:widgets/ctrl-panel/data-bind-ctrl/index.tsx"),d=e("sugar:widgets/object-array-editor/object-array-editor.tsx"),i=e("sugar:widgets/amis-inline-switch.tsx"),r=e("sugar:widgets/geo-json-binder/geo-json-binder.tsx"),c=e("sugar:widgets/data-model/data-model-field-holder/data-model-field-holder.tsx"),p=e("sugar:widgets/charts/map/special-district.ts"),s=e("sugar:widgets/charts/bar-pic/symbols.tsx"),u=e("sugar:widgets/charts/map/map-ctrl.tsx"),m=[{type:"color",name:l.default("颜色"),key:"color",defaultValue:"#23b7e5"}],f=function(e){return[{type:"divider"},{type:"fieldset",collapsed:!1,title:l.default("自定义配色"),collapsable:!0,headingClassName:"fieldset-title",controls:[i.amisInlineSwitch("config.openCustomColor",l.default("飞线气泡颜色自定义")),{type:"radios",name:"config.customColorType",inline:!1,hiddenOn:"!data.config.openCustomColor",label:"",options:[{label:l.default("跟随页面主题配色"),value:"report"},{label:l.default("自定义"),value:"custom"}]},{name:"config.customColors",hiddenOn:"!data.config.openCustomColor || data.config.customColorType != 'custom'",children:function(a){var n=a.onChange,i=a.value;return o.createElement(d.default,t.__assign({},{onChange:n,value:i},{chartFrontendId:e.chart.frontendId,containerClassName:"form-group form-item",label:l.default("可增加多个配色项，依次映射数值从小到大的颜色"),addTipText:l.default("新增配色项"),cols:m}))}},i.amisInlineSwitch("config.openCustomColorGeo",l.default("地图颜色自定义")),{type:"color",name:"config.borderColor",label:l.default("行政区边界颜色"),hiddenOn:"!data.config.openCustomColorGeo"},{type:"color",name:"config.mapColor",label:l.default("地图整体颜色"),format:"rgba",hiddenOn:"!data.config.openCustomColorGeo"},{type:"color",name:"config.textColor",label:l.default("文字颜色"),format:"rgba",hiddenOn:"!data.config.openCustomColorGeo"}]}]};a.basicCtrl=function(e){return f(e)};var g="/openapi/demo/chart?type=mapLine";a.chartDemoUrl="$CUR_HOST/openapi/demo/chart?type=mapLine",a.chartEigens=[{field:[{name:"lng",type:"d",subType:"lng",minCount:1,maxCount:1},{name:"lat",type:"d",subType:"lat",minCount:1,maxCount:1},{name:"lng2",type:"d",subType:"lng",minCount:1,maxCount:1},{name:"lat2",type:"d",subType:"lat",minCount:1,maxCount:1},{name:"sourceNode",type:"d",minCount:1,maxCount:1},{name:"targetNode",type:"d",minCount:1,maxCount:1},{name:"name",type:"d",minCount:0,maxCount:1},{name:"value",type:"m",minCount:0,maxCount:1},{name:"tooltip",type:"a",minCount:0,maxCount:5}],configSp:{"dataConfig.coordType":"bind"}},{field:[{name:"sourceNode",type:"d",subType:"geo",minCount:1,maxCount:1},{name:"targetNode",type:"d",subType:"geo",minCount:1,maxCount:1},{name:"name",type:"d",minCount:0,maxCount:1},{name:"value",type:"m",minCount:0,maxCount:1},{name:"tooltip",type:"a",minCount:0,maxCount:5}],configSp:{"dataConfig.coordType":"auto"}}],a.getScatterShape=function(e,a){return void 0===a&&(a=""),a&&(a+="."),{type:"group",direction:"vertical",controls:[{type:"group",controls:[{type:"select",name:a+"config.scatterType",label:l.default("气泡形状"),placeholder:l.default("请选择"),clearable:!0,options:e},{type:"combo",name:a+"config.imgInputs",flat:!0,joinValues:!1,label:l.default("外链图片地址"),multiple:!0,extractValue:!0,addable:!0,minLength:1,maxLength:1,removable:!1,controls:[{type:"url",name:a+"config.imgInputs",pipeIn:function(e){return e.startsWith("data:image")&&(e=""),e}}]}]},{type:"group",controls:[{type:"image",name:a+"config.imgUrls",allowInput:!0,label:l.default("本地图片上传"),maxSize:10485760,reciever:"/api/image/upload",className:"map-line-scatter-shape"},{type:"image",name:a+"config.imgInputs",maxSize:10485760,label:l.default("外链图片"),multiple:!0,allowInput:!1,disabled:!0,joinValues:!1,maxLength:1,extractValue:!0,className:"img-input",pipeIn:function(e){return e&&e.map&&(e=e.map(function(e){return e.startsWith("data:image")?"":e})),e}}]},{type:"tpl",label:"",value:'<div class="help-block">\n        '+l.default("气泡形状优先级设置为：本地图片 > 外链图片 > 内置形状")+"\n        <br>"+l.default("设置为图片时气泡颜色、描边颜色、描边宽度等会失效")+"</div>"}]}},a.dataBindCtrl=function(e){var a=n.getDebugAndRefreshBtn({loadData:e.chart.loadData,loadDebugData:e.chart.loadDebugData,dataType:e.chart.dataType,refreshText:l.default("刷新图表")}),i=n.getDataBindCommon({frontendId:e.chart.frontendId,dataTypeOptions:["dataModel","api","sql","json"],api:{demoUrl:g},loadData:e.chart.loadData,loadDebugData:e.chart.loadDebugData,curUrl:e.chart.dataApiUrl}),r=e.chart.dataModelHash||"",p=e.sqlModelStore.detailMap.mapByHash.get(r),s=n.generateSQLFieldList(p),m=t.__spreadArrays([c.getDataModelFieldHolder({name:"sourceNode",label:l.default("起点名称"),config:{dataModelHash:r,holderId:e.chart.frontendId+"-sourceNode",maxCount:1,onlyDimension:!0}}),c.getDataModelFieldHolder({name:"targetNode",label:l.default("终点名称"),config:{dataModelHash:r,holderId:e.chart.frontendId+"-targetNode",maxCount:1,onlyDimension:!0}}),c.getDataModelFieldHolder({name:"name",label:l.default("飞线名称(选填)"),config:{dataModelHash:r,holderId:e.chart.frontendId+"-name",maxCount:1,onlyDimension:!0}}),c.getDataModelFieldHolder({name:"value",label:l.default("取值字段(颜色深浅，选填)"),config:{dataModelHash:r,holderId:e.chart.frontendId+"-value",maxCount:1,onlyMeasure:!0}}),c.getDataModelFieldHolder({name:"size",label:l.default("线条宽度(选填)"),config:{dataModelHash:r,holderId:e.chart.frontendId+"-size",maxCount:1,onlyMeasure:!0}}),{type:"radios",name:"dataConfig.coordType",inline:!1,hiddenOn:'data.dataType != "dataModel"',label:l.default("地点的经纬度计算方式"),options:[{label:l.default("根据名称自动查找（支持省市县名称）"),value:"auto"},{label:l.default("提供经纬度字段"),value:"bind"}]},c.getDataModelFieldHolder({name:"lng",label:l.default("起点经度"),hiddenOn:"data.dataType != \"dataModel\" || dataConfig.coordType !== 'bind'",config:{dataModelHash:r,holderId:e.chart.frontendId+"-lng",maxCount:1,onlyDimension:!0}}),c.getDataModelFieldHolder({name:"lat",label:l.default("起点纬度"),hiddenOn:"data.dataType != \"dataModel\" || dataConfig.coordType !== 'bind'",config:{dataModelHash:r,holderId:e.chart.frontendId+"-lat",maxCount:1,onlyDimension:!0}}),c.getDataModelFieldHolder({name:"lng2",label:l.default("终点经度"),hiddenOn:"data.dataType != \"dataModel\" || dataConfig.coordType !== 'bind'",config:{dataModelHash:r,holderId:e.chart.frontendId+"-lng2",maxCount:1,onlyDimension:!0}}),c.getDataModelFieldHolder({name:"lat2",label:l.default("终点纬度"),hiddenOn:"data.dataType != \"dataModel\" || dataConfig.coordType !== 'bind'",config:{dataModelHash:r,holderId:e.chart.frontendId+"-lat2",maxCount:1,onlyDimension:!0}}),c.getDataModelFieldHolder({name:"tooltip",label:l.default("其他维度或度量"),hiddenOn:'config.mapType == "cityHeatmap" || data.dataType != "dataModel"',config:{dataModelHash:r,holderId:e.chart.frontendId+"-tooltip",maxCount:5},desc:l.default("其他的维度和度量将在鼠标悬停时的tooltip提示中展示")}),{type:"number",name:"config.lineWidth",hiddenOn:"dataType != 'dataModel' || (dataConfig.dataModel && dataConfig.dataModel.size && dataConfig.dataModel.size.length)",label:l.default("线条固定宽度(像素)"),step:1,min:1},{type:"number",name:"config.minWidth",hiddenOn:"dataType != 'dataModel' || !dataConfig.dataModel || !dataConfig.dataModel.size || !dataConfig.dataModel.size.length",label:l.default("最小宽度(像素)"),step:1,min:1},{type:"number",name:"config.maxWidth",hiddenOn:"dataType != 'dataModel' || !dataConfig.dataModel || !dataConfig.dataModel.size || !dataConfig.dataModel.size.length",label:l.default("最大宽度(像素)"),step:1,min:1},n.commonFilterForDataModel(r),n.commonBindUrlParamForDataModel(r)],c.getChartConditionsHolder(r,e.chart),[n.commonLimitForDataModel,{type:"select",name:"dataConfig.nameField",hiddenOn:"data.dataType != 'sql'",label:l.default("飞线名称字段"),placeholder:l.default("请选择"),options:s},{type:"select",name:"dataConfig.fromLocationField",hiddenOn:'data.dataType != "sql"',label:l.default("起点名称字段"),placeholder:l.default("请选择"),clearable:!0,options:s},{type:"select",name:"dataConfig.toLocationField",hiddenOn:'data.dataType != "sql"',label:l.default("终点名称字段"),placeholder:l.default("请选择"),clearable:!0,options:s},{type:"radios",name:"dataConfig.coordType",inline:!1,label:l.default("省、市、地点的经纬度计算方式"),hiddenOn:'data.dataType != "sql"',options:[{label:l.default("根据省、市、地点名称自动在系统中查找"),value:"auto"},{label:l.default("提供经纬度字段"),value:"bind"}]},{type:"select",name:"dataConfig.fromLngField",hiddenOn:'data.dataType != "sql" || dataConfig.coordType != "bind"',label:l.default("起点经度字段"),placeholder:l.default("请选择"),clearable:!0,options:s},{type:"select",name:"dataConfig.fromLatField",hiddenOn:'data.dataType != "sql" || dataConfig.coordType != "bind"',label:l.default("起点纬度字段"),placeholder:l.default("请选择"),clearable:!0,options:s},{type:"select",name:"dataConfig.toLngField",hiddenOn:'data.dataType != "sql" || dataConfig.coordType != "bind"',label:l.default("终点经度字段"),placeholder:l.default("请选择"),clearable:!0,options:s},{type:"select",name:"dataConfig.toLatField",hiddenOn:'data.dataType != "sql" || dataConfig.coordType != "bind"',label:l.default("终点纬度字段"),placeholder:l.default("请选择"),clearable:!0,options:s},{type:"select",name:"dataConfig.valueField",hiddenOn:"data.dataType != 'sql'",label:l.default("颜色映射取值字段"),placeholder:l.default("可选填"),clearable:!0,options:s},{type:"select",name:"dataConfig.sizeValueField",hiddenOn:"data.dataType != 'sql'",label:l.default("宽度映射取值字段"),placeholder:l.default("可选填"),options:s},{type:"number",name:"config.lineWidth",hiddenOn:"data.dataType != 'sql' || dataConfig.sizeValueField",label:l.default("线条固定宽度(像素)"),step:1,min:1},{type:"number",name:"config.minWidth",hiddenOn:"data.dataType != 'sql' || !dataConfig.sizeValueField",label:l.default("最小宽度(像素)"),step:1,min:1},{type:"number",name:"config.maxWidth",hiddenOn:"data.dataType != 'sql' || !dataConfig.sizeValueField",label:l.default("最大宽度(像素)"),step:1,min:1},{name:"dataConfig.tooltipItems",hiddenOn:"data.dataType != 'sql'",children:function(a){var n=a.onChange,i=a.value;return o.createElement(d.default,t.__assign({},{onChange:n,value:i},{chartFrontendId:e.chart.frontendId,containerClassName:"form-group form-item",label:l.default("添加在Tooltip中显示的附加数据项"),addTipText:l.default("新增数据项"),cols:u.tooltipBindCols(s)}))}},{type:"select",name:"dataConfig._sugar_extras",hiddenOn:"data.dataType != 'sql'",label:l.default("下钻需要的附加字段，如存有URL的字段"),placeholder:l.default("请选择"),options:s,clearable:!0}]);return i.concat(m,a)},a.advancedCtrl=function(e){return t.__spreadArrays([{type:"fieldset",title:l.default("地图区域设置"),collapsable:!0,collapsed:!0,headingClassName:"fieldset-title",controls:[{type:"radios",name:"config.mapScope",inline:!1,options:[{label:l.default("世界各国"),value:"world"},{label:l.default("中国全国"),value:"china"},{label:l.default("省份级别"),value:"province"},{label:l.default("城市级别"),value:"city"},{label:l.default("自定义geoJSON上传"),value:"custom"}]},{type:"select",name:"config.mapProvince",hiddenOn:"data.config.mapScope != 'province'",label:l.default("省份"),placeholder:l.default("请选择省份"),source:"/openapi/geo/allProvince?withAuto=1",searchable:!0,isSearchable:!0},{type:"select",name:"config.mapCity",hiddenOn:"data.config.mapScope != 'city'",label:l.default("城市"),placeholder:l.default("请选择城市"),source:"/openapi/geo/allCity?withAuto=1",searchable:!0,isSearchable:!0},{type:"tpl",tpl:'<div class="m-b text--center"><a class="text-info" href="/docs/Chart-map-scope" target="_blank">'+l.default("地图区域动态变化的文档说明")+"</a></div>",visibleOn:"(data.config.mapScope == 'province' && (data.config.mapProvince == 'sugar_map_auto_scope' || data.config.mapProvince == 'sugar_map_url_param')) || (data.config.mapScope == 'city' && (data.config.mapCity == 'sugar_map_auto_scope' || data.config.mapCity == 'sugar_map_url_param'))"},{type:"select",name:"config.mdProvince",hiddenOn:"data.config.mapScope != 'province' || data.config.mapProvince != 'sugar_map_auto_scope'",label:l.default("联动时默认省份"),placeholder:l.default("请选择默认省份"),source:"/openapi/geo/allProvince",searchable:!0,isSearchable:!0},{type:"select",name:"config.mdProvince",hiddenOn:"data.config.mapScope != 'province' || data.config.mapProvince != 'sugar_map_url_param'",label:l.default("无URL参数时默认省份"),placeholder:l.default("请选择默认省份"),source:"/openapi/geo/allProvince",searchable:!0,isSearchable:!0},{type:"select",name:"config.mdCity",hiddenOn:"data.config.mapScope != 'city' || data.config.mapCity != 'sugar_map_auto_scope'",label:l.default("联动时默认城市"),placeholder:l.default("请选择默认城市"),source:"/openapi/geo/allCity",searchable:!0,isSearchable:!0},{type:"select",name:"config.mdCity",hiddenOn:"data.config.mapScope != 'city' || data.config.mapCity != 'sugar_map_url_param'",label:l.default("无URL参数时默认城市"),placeholder:l.default("请选择默认城市"),source:"/openapi/geo/allCity",searchable:!0,isSearchable:!0},{type:"text",name:"config.mapAutoScopeField",hiddenOn:"!(data.config.mapScope == 'province' && data.config.mapProvince == 'sugar_map_auto_scope') && !(data.config.mapScope == 'city' && data.config.mapCity == 'sugar_map_auto_scope')",label:l.default("下钻或联动参数中的依据字段"),placeholder:l.default("默认为name")},{type:"text",name:"config.mapAutoScopeField",hiddenOn:"!(data.config.mapScope == 'province' && data.config.mapProvince == 'sugar_map_url_param') && !(data.config.mapScope == 'city' && data.config.mapCity == 'sugar_map_url_param')",label:l.default("URL中参数名"),placeholder:l.default("默认为name")},{name:"config.geoJSON",children:function(a){var l=a.onChange,n=a.value;return o.createElement(r.default,t.__assign({},{onChange:l,value:n},{chartFrontendId:e.chart.frontendId,url:"/docs/Chart-map-geojson"}))},hiddenOn:"data.config.mapScope !== 'custom'"}]},{type:"divider"},{type:"fieldset",title:l.default("数据展示设置"),collapsable:!0,collapsed:!0,headingClassName:"fieldset-title",controls:[i.amisInlineSwitch("config.showProvinceName",l.default("显示区域名称")),{type:"number",label:l.default("区域名称字号"),hiddenOn:"!config.showProvinceName",name:"config.provinceFontSize",step:1,min:8,max:100},{type:"group",controls:[i.amisInlineSwitch("config.areaHoverEffect",l.default("底图鼠标悬停效果")),i.amisInlineSwitch("config.roam",l.default("开启地图缩放"))]},i.amisInlineSwitch("config.showRank",l.default("鼠标悬停时Tooltip中展示排名")),i.amisInlineSwitch("config.tipPercent",l.default("鼠标悬停时Tooltip中展示百分比")),{type:"number",label:l.default("Tooltip字号"),name:"config.tooltipFontSize",step:1,min:8,max:100}]},{type:"divider"},{type:"fieldset",title:l.default("飞线样式设置"),collapsable:!0,collapsed:!0,headingClassName:"fieldset-title",controls:[{type:"group",controls:[{type:"number",name:"config.lineWidth",label:l.default("飞线粗细"),step:1,min:0},{type:"number",name:"config.lineOpacity",label:l.default("飞线透明度"),step:.1,min:0,max:1}]},{type:"group",controls:[{type:"color",name:"config.lineColor",label:l.default("飞线颜色")},{type:"number",name:"config.curveness",label:l.default("飞线弧度"),step:1,min:0}]},i.amisInlineSwitch("config.showEffect",l.default("显示飞线动效")),{type:"group",hiddenOn:"!data.config.showEffect",controls:[{type:"number",name:"config.effectPeriod",label:l.default("动画时间(越小速度越快)"),step:1,min:0},{type:"number",name:"config.effectSymbolSize",label:l.default("动点大小"),step:1,min:0}]},{type:"group",hiddenOn:"!data.config.showEffect",controls:[{type:"select",name:"config.symbolType",label:"动点形状",placeholder:"请选择",options:s.symbolOps},{type:"number",name:"config.trailLength",label:l.default("动效轨迹长度"),step:.05,min:0,max:1}]},{type:"color",name:"config.symbolColor",hiddenOn:"!config.showEffect",label:l.default("动效颜色"),format:"rgba"},i.amisInlineSwitch("config.blend",l.default("开启颜色叠加"),"",!1,l.default("开启颜色叠加，请清空颜色取值字段"))]},{type:"divider"},{type:"fieldset",title:l.default("气泡样式设置"),collapsable:!0,collapsed:!0,headingClassName:"fieldset-title",controls:[i.amisInlineSwitch("config.showScatter",l.default("显示气泡")),{type:"group",direction:"vertical",hiddenOn:"!config.showScatter",controls:[{type:"group",controls:[i.amisInlineSwitch("config.showCityLabel",l.default("显示气泡名称")),i.amisInlineSwitch("config.showScatterEffect",l.default("显示气泡特效"))]},{type:"group",controls:[{type:"number",label:l.default("气泡大小"),name:"config.scatterSymbolSize",step:1,min:1,max:100},{type:"number",label:l.default("名称字号"),name:"config.scatterFontSize",step:1,min:8,max:100}]},{type:"group",controls:[{type:"color",name:"config.scatterColor",label:l.default("气泡颜色")},{type:"color",name:"config.strokeColor",label:l.default("描边颜色")}]},{type:"group",controls:[{type:"number",label:l.default("描边宽度"),name:"config.strokeWidth",step:1,min:0,max:100},{type:"number",label:l.default("高亮描边宽度"),name:"config.lightStrokeWidth",step:1,min:0,max:100}]},a.getScatterShape(s.symbolOps)]}]},{type:"divider"},{type:"fieldset",title:l.default("颜色映射设置"),collapsable:!0,collapsed:!0,headingClassName:"fieldset-title",controls:[{type:"group",controls:[i.amisInlineSwitch("config.hideVisualMap",l.default("隐藏图例")),i.amisInlineSwitch("config.colorReverse",l.default("颜色反转"))]},{type:"text",name:"config.unit",label:l.default("颜色映射数据单位"),placeholder:l.default("默认为空")},{type:"group",controls:[{type:"select",name:"config.vMapLeft",label:l.default("位置"),options:[{label:l.default("居左"),value:"left"},{label:l.default("居中"),value:"center"},{label:l.default("居右"),value:"right"}]},{type:"number",name:"config.vMapBottom",label:l.default("底边距"),step:5,min:0}]},{type:"group",controls:[{type:"select",name:"config.vMapOrient",label:l.default("样式"),options:[{label:l.default("竖直"),value:"vertical"},{label:l.default("水平"),value:"horizontal"}]},{type:"number",label:l.default("字号"),name:"config.legendFontSize",step:1,min:8,max:100}]},{type:"group",controls:[{type:"number",label:l.default("映射柱体高度"),name:"config.vMapHeight",value:80,step:1,min:20},{type:"number",label:l.default("映射柱体宽度"),name:"config.vMapWidth",value:10,step:1,min:1,max:100}]},i.amisInlineSwitch("config.hideVMapText",l.default("隐藏图例上指标名称"))]},{type:"divider"},{type:"fieldset",collapsed:!0,title:l.default("宽度映射设置"),collapsable:!0,headingClassName:"fieldset-title",controls:[{type:"group",controls:[{type:"text",name:"config.lineWidth",label:l.default("线条固定宽度(像素)"),step:1,min:1,max:100},{type:"text",name:"config.unit1",label:l.default("宽度映射数据单位"),placeholder:l.default("默认为空")}]},{type:"group",controls:[{type:"number",label:l.default("最小值对应线条宽度"),name:"config.minWidth",step:1,min:1,max:100},{type:"number",label:l.default("最大值对应线条宽度"),name:"config.maxWidth",step:1,min:1,max:100}]}]},{type:"divider"},{type:"fieldset",collapsed:!0,title:l.default("地名映射设置"),collapsable:!0,headingClassName:"fieldset-title",controls:[{type:"select",name:"config.prefix",label:l.default("名称查找前缀（部分区县有重名，需要市名区分）"),clearable:!0,options:p.prefixCity,searchable:!0,resetValue:"",desc:l.default("当使用地名映射坐标时，由于部分区县出现同名情况，因此需要使用城市前缀来区分，如果发现坐标不正确，则需要设置前缀进行校正。")}]}],f(e))}});
;sugar.define("sugar:widgets/charts/map-layer/line/line-ctrl.tsx",function(a,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.lineInitialState=e.lineAdvancedCtrl=e.lineDataBindCtrl=e.lineChartDemoUrl=void 0;var t=a("sugar:node_modules/tslib/tslib.js"),l=a("sugar:utils/i18n.ts"),d=a("sugar:node_modules/react/index.js"),o=a("sugar:widgets/ctrl-panel/data-bind-ctrl/index.tsx"),n=a("sugar:widgets/object-array-editor/object-array-editor.tsx"),i=a("sugar:widgets/amis-inline-switch.tsx"),r=a("sugar:widgets/charts/map/map-ctrl.tsx"),f=a("sugar:widgets/data-model/data-model-field-holder/data-model-field-holder.tsx"),s=a("sugar:widgets/charts/map/special-district.ts"),p=a("sugar:widgets/charts/map-layer/scatter/scatter-ctrl.tsx"),c=a("sugar:widgets/charts/map/map-ctrl.tsx"),u=a("sugar:widgets/charts/map-line/map-line-ctrl.tsx"),g="/openapi/demo/chart?type=mapLine";e.lineChartDemoUrl="$CUR_HOST/openapi/demo/chart?type=mapLine",e.lineDataBindCtrl=function(a){var e=a.activeSubChartKey;if(void 0===e)return[];var r="config.subChartConfig."+e,s=o.getDebugAndRefreshBtn({loadData:function(t){a.chart.loadOtherData(t,e)},loadDebugData:function(){a.chart.loadDebugOtherData(e)},dataType:a.chart.config.subChartConfig[e].dataType,field:{dataType:r+".dataType"},refreshText:l.default("刷新子组件")}),p=o.getDataBindCommon({frontendId:e,label:l.default("子组件数据绑定"),field:{dataType:r+".dataType",dataApiUrl:r+".dataApiUrl",staticData:r+".dataConfig.data",dataModelHash:r+".dataModelHash",dataJsonHash:r+".dataConfig.dataJsonHash",exemption:r+".dataConfig.exemption",cacheTTL:r+".dataConfig.cacheTTL",apiProOpen:r+".dataConfig.apiPro_open",apiProMethod:r+".dataConfig.apiPro_method",apiProGetAuto:r+".dataConfig.apiPro_getAuto",apiProHeaderList:r+".dataConfig.apiPro_headerList",apiProPostType:r+".dataConfig.apiPro_postType",apiProPostList:r+".dataConfig.apiPro_postList",apiProPostAuto:r+".dataConfig.apiPro_postAuto",apiProAdaptorOpen:r+".dataConfig.apiPro_adaptorOpen",apiProAdaptorHash:r+".dataConfig.apiPro_adaptorHash"},dataTypeOptions:["dataModel","api","sql","json"],api:{demoUrl:g},loadData:function(t){a.chart.loadOtherData(t,e)},loadDebugData:function(){a.chart.loadDebugOtherData(e)},curUrl:a.chart.config.subChartConfig[e].dataApiUrl}),u=a.chart.config.subChartConfig[e].dataModelHash||"",m=a.sqlModelStore.detailMap.mapByHash.get(u),h=o.generateSQLFieldList(m),y=[f.getDataModelFieldHolder({name:"sourceNode",label:l.default("起点名称"),namePrefix:r+".dataConfig.dataModel",hiddenOn:"data."+r+".dataType != 'dataModel'",config:{dataModelHash:u,holderId:a.chart.frontendId+"-sourceNode",maxCount:1,onlyDimension:!0}}),f.getDataModelFieldHolder({name:"targetNode",label:l.default("终点名称"),namePrefix:r+".dataConfig.dataModel",hiddenOn:"data."+r+".dataType != 'dataModel'",config:{dataModelHash:u,holderId:a.chart.frontendId+"-targetNode",maxCount:1,onlyDimension:!0}}),f.getDataModelFieldHolder({name:"name",label:l.default("飞线名称(选填)"),namePrefix:r+".dataConfig.dataModel",hiddenOn:"data."+r+".dataType != 'dataModel'",config:{dataModelHash:u,holderId:a.chart.frontendId+"-name",maxCount:1,onlyDimension:!0}}),f.getDataModelFieldHolder({name:"value",label:l.default("取值字段(颜色深浅，选填)"),namePrefix:r+".dataConfig.dataModel",hiddenOn:"data."+r+".dataType != 'dataModel'",config:{dataModelHash:u,holderId:a.chart.frontendId+"-value",maxCount:1,onlyMeasure:!0}}),f.getDataModelFieldHolder({name:"size",label:l.default("线条宽度(选填)"),namePrefix:r+".dataConfig.dataModel",hiddenOn:"data."+r+".dataType != 'dataModel'",config:{dataModelHash:u,holderId:a.chart.frontendId+"-size",maxCount:1,onlyMeasure:!0}}),{type:"radios",name:r+".dataConfig.coordType",hiddenOn:"data."+r+".dataType != 'dataModel'",label:l.default("地点的经纬度计算方式"),inline:!1,options:[{label:l.default("根据名称自动查找（支持省市县名称）"),value:"auto"},{label:l.default("提供经纬度字段"),value:"bind"}]},f.getDataModelFieldHolder({name:"lng",label:l.default("起点经度"),namePrefix:r+".dataConfig.dataModel",hiddenOn:"data."+r+'.dataType != "dataModel" || '+r+".dataConfig.coordType !== 'bind'",config:{dataModelHash:u,holderId:a.chart.frontendId+"-lng",maxCount:1,onlyDimension:!0}}),f.getDataModelFieldHolder({name:"lat",label:l.default("起点纬度"),namePrefix:r+".dataConfig.dataModel",hiddenOn:"data."+r+'.dataType != "dataModel" || '+r+".dataConfig.coordType !== 'bind'",config:{dataModelHash:u,holderId:a.chart.frontendId+"-lat",maxCount:1,onlyDimension:!0}}),f.getDataModelFieldHolder({name:"lng2",label:l.default("终点经度"),namePrefix:r+".dataConfig.dataModel",hiddenOn:"data."+r+'.dataType != "dataModel" || '+r+".dataConfig.coordType !== 'bind'",config:{dataModelHash:u,holderId:a.chart.frontendId+"-lng2",maxCount:1,onlyDimension:!0}}),f.getDataModelFieldHolder({name:"lat2",label:l.default("终点纬度"),namePrefix:r+".dataConfig.dataModel",hiddenOn:"data."+r+'.dataType != "dataModel" || '+r+".dataConfig.coordType !== 'bind'",config:{dataModelHash:u,holderId:a.chart.frontendId+"-lat2",maxCount:1,onlyDimension:!0}}),i.amisInlineSwitch(r+".dataConfig.transCoord",l.default("国测局转百度坐标系"),"data."+r+'.dataType != "dataModel" || '+r+".dataConfig.coordType !== 'bind'",!1,l.default("当前坐标系为百度坐标系，如果对数据精度要求高，建议开启转换")),f.getDataModelFieldHolder({name:"tooltip",label:l.default("其他维度或度量"),namePrefix:r+".dataConfig.dataModel",hiddenOn:"data."+r+".dataType != 'dataModel'",config:{dataModelHash:u,holderId:a.chart.frontendId+"-tooltip",maxCount:5},desc:l.default("其他的维度和度量将在鼠标悬停时的tooltip提示中展示")}),{type:"number",name:r+".config.lineWidth",hiddenOn:r+'.dataType != "dataModel" || ('+r+".dataConfig.dataModel && "+r+".dataConfig.dataModel.size && "+r+".dataConfig.dataModel.size.length)",label:l.default("线条固定宽度(像素)"),step:1,min:1},{type:"number",name:r+".config.minWidth",hiddenOn:r+'.dataType != "dataModel" || !'+r+".dataConfig.dataModel || !"+r+".dataConfig.dataModel.size || !"+r+".dataConfig.dataModel.size.length",label:l.default("最小宽度(像素)"),step:1,min:1},{type:"number",name:r+".config.maxWidth",hiddenOn:r+'.dataType != "dataModel" || !'+r+".dataConfig.dataModel || !"+r+".dataConfig.dataModel.size || !"+r+".dataConfig.dataModel.size.length",label:l.default("最大宽度(像素)"),step:1,min:1},o.commonFilterForDataModel(u,r+".dataConfig.dataModel.filters","data."+r+".dataType != 'dataModel'"),o.commonBindUrlParamForDataModel(u,r+".dataConfig.dataModel.filters","data."+r+".dataType != 'dataModel'"),o.getCommonLimitForDataModel(r,"data."+r+".dataType != 'dataModel'"),{type:"select",name:r+".dataConfig.nameField",hiddenOn:"data."+r+".dataType != 'sql'",label:l.default("飞线名称字段"),placeholder:l.default("可选填"),clearable:!0,options:h},{type:"select",name:r+".dataConfig.fromLocationField",hiddenOn:"data."+r+'.dataType != "sql"',label:l.default("起点名称字段"),placeholder:l.default("可选填"),clearable:!0,options:h},{type:"select",name:r+".dataConfig.toLocationField",hiddenOn:"data."+r+'.dataType != "sql"',label:l.default("终点名称字段"),placeholder:l.default("可选填"),clearable:!0,options:h},{type:"select",name:r+".dataConfig.valueField",hiddenOn:"data."+r+".dataType != 'sql'",label:l.default("颜色映射取值字段"),placeholder:l.default("可选填"),clearable:!0,options:h},{type:"select",name:r+".dataConfig.sizeValueField",hiddenOn:"data."+r+".dataType != 'sql'",label:l.default("宽度映射取值字段"),placeholder:l.default("可选填"),options:h},{type:"number",name:r+".config.lineWidth",hiddenOn:r+".dataType != 'sql' || "+r+".dataConfig.sizeValueField",label:l.default("线条固定宽度(像素)"),step:1,min:1},{type:"number",name:r+".config.minWidth",hiddenOn:r+".dataType != 'sql' || !"+r+".dataConfig.sizeValueField",label:l.default("最小宽度(像素)"),step:1,min:1},{type:"number",name:r+".config.maxWidth",hiddenOn:r+".dataType != 'sql' || !"+r+".dataConfig.sizeValueField",label:l.default("最大宽度(像素)"),step:1,min:1},{type:"radios",name:r+".dataConfig.coordType",label:l.default("飞线端点经纬度的计算方式"),hiddenOn:"data."+r+".dataType != 'sql'",inline:!1,options:[{label:l.default("根据名称自动查找（支持省市县名称）"),value:"auto"},{label:l.default("提供起点终点经纬度"),value:"bind"}]},{type:"select",name:r+".dataConfig.fromLngField",hiddenOn:"data."+r+'.dataType != "sql" || '+r+'.dataConfig.coordType != "bind"',label:l.default("起点经度字段"),placeholder:l.default("请选择"),clearable:!0,options:h},{type:"select",name:r+".dataConfig.fromLatField",hiddenOn:"data."+r+'.dataType != "sql" || '+r+'.dataConfig.coordType != "bind"',label:l.default("起点纬度字段"),placeholder:l.default("请选择"),clearable:!0,options:h},{type:"select",name:r+".dataConfig.toLngField",hiddenOn:"data."+r+'.dataType != "sql" || '+r+'.dataConfig.coordType != "bind"',label:l.default("终点经度字段"),placeholder:l.default("请选择"),clearable:!0,options:h},{type:"select",name:r+".dataConfig.toLatField",hiddenOn:"data."+r+'.dataType != "sql" || '+r+'.dataConfig.coordType != "bind"',label:l.default("终点纬度字段"),placeholder:l.default("请选择"),clearable:!0,options:h},i.amisInlineSwitch(r+".dataConfig.transCoord",l.default("国测局转百度坐标系"),"data."+r+".dataType != 'sql' || data."+r+'.dataConfig.coordType != "bind"',!1,l.default("当前坐标系为百度坐标系，如果对数据精度要求高，建议开启转换")),{name:r+".dataConfig.tooltipItems",hiddenOn:"data."+r+".dataType != 'sql'",children:function(e){var o=e.onChange,i=e.value;return d.createElement(n.default,t.__assign({},{onChange:o,value:i},{chartFrontendId:a.chart.frontendId,containerClassName:"form-group form-item",label:l.default("添加在Tooltip中显示的附加数据项"),addTipText:l.default("新增数据项"),cols:c.tooltipBindCols(h)}))}},{type:"select",name:r+".dataConfig._sugar_extras",hiddenOn:"data."+r+".dataType != 'sql'",label:l.default("下钻需要的附加字段，如存有URL的字段"),placeholder:l.default("请选择"),options:h,clearable:!0}],b=o.getAutoRefreshConfig({field:{needAutoRefresh:r+".dataConfig.needAutoRefresh",autoRefreshInterval:r+".dataConfig.autoRefreshInterval",dataType:r+".dataType",autoDestory:r+".autoDestory",showNullData:r+".showNullData",isDashChart:a.chart.isDashChart}});return p.concat(y,s,b)},e.lineAdvancedCtrl=function(a){var e=a.activeSubChartKey;if(void 0===e)return[];var o="config.subChartConfig."+e;return[{type:"fieldset",title:l.default("飞线样式设置"),collapsable:!0,collapsed:!0,headingClassName:"fieldset-title",controls:[{type:"group",controls:[{type:"number",name:o+".config.lineWidth",label:l.default("飞线粗细"),step:1,min:0,max:50},{type:"color",name:o+".config.lineColor",label:l.default("飞线颜色"),format:"rgba"}]},{type:"radios",name:o+".config.customColorType",label:l.default("飞线映射颜色类型"),inline:!1,options:[{label:l.default("默认配色"),value:"default"},{label:l.default("跟随页面主题配色"),value:"report"},{label:l.default("自定义配色"),value:"custom"}]},{name:o+".config.customColors",hiddenOn:"data."+o+".config.customColorType != 'custom'",children:function(e){var o=e.onChange,i=e.value;return d.createElement(n.default,t.__assign({},{onChange:o,value:i},{chartFrontendId:a.chart.frontendId,containerClassName:"form-group form-item",label:l.default("可增加多个配色项，依次映射数值从小到大的颜色"),addTipText:l.default("新增配色项"),cols:r.customColorsCols}))}},i.amisInlineSwitch(o+".config.colorReverse",l.default("数值映射颜色反转")),{type:"color",name:o+".config.highlightColor",label:l.default("飞线高亮颜色"),format:"rgba"},i.amisInlineSwitch(o+".config.blend",l.default("开启颜色叠加"),"",!1,l.default("开启颜色叠加，请清空颜色取值字段"))]},{type:"divider"},{type:"fieldset",title:l.default("飞线动画设置"),collapsable:!0,collapsed:!0,headingClassName:"fieldset-title",controls:[i.amisInlineSwitch(o+".config.showEffect",l.default("显示飞线动效")),{type:"number",name:o+".config.effectPeriod",hiddenOn:"!data."+o+".config.showEffect",label:l.default("动画时间(越小速度越快)"),step:1,min:0},{type:"group",hiddenOn:"!data."+o+".config.showEffect",controls:[{type:"number",name:o+".config.trailLength",label:l.default("动效轨迹长度"),step:1,min:0},{type:"select",name:o+".config.symbolType",label:"动点形状",placeholder:"请选择",options:p.symbolOps}]},{type:"group",hiddenOn:"!data."+o+".config.showEffect",controls:[{type:"number",name:o+".config.effectSymbolSize",label:l.default("动点大小"),step:1,min:1},{type:"color",name:o+".config.effectHighlightColor",label:l.default("动点颜色"),format:"rgba"}]}]},{type:"divider"},{type:"fieldset",title:l.default("飞线端点设置"),collapsable:!0,collapsed:!0,headingClassName:"fieldset-title",controls:[i.amisInlineSwitch(o+".config.showPoint",l.default("显示端点气泡")),{type:"group",hiddenOn:"!data."+o+".config.showPoint",direction:"vertical",controls:[{type:"group",controls:[{type:"number",label:l.default("气泡大小"),name:o+".config.symbolSize",step:1,min:1,max:100},{type:"color",name:o+".config.symbolColor",label:l.default("气泡颜色"),format:"rgba"}]},{type:"group",controls:[{type:"color",name:o+".config.strokeColor",label:l.default("描边颜色"),format:"rgba"},{type:"number",label:l.default("描边宽度"),name:o+".config.strokeWidth",step:1,min:0,max:100}]},u.getScatterShape(p.symbolOps,o),i.amisInlineSwitch(o+".config.showProvinceName",l.default("显示端点名称")),{type:"group",hiddenOn:"!data."+o+".config.showProvinceName",controls:[{type:"color",name:o+".config.textColor",label:l.default("名称颜色"),format:"rgba"},{type:"number",label:l.default("名称字号"),name:o+".config.textSize",step:1,min:1,max:100}]},{type:"group",hiddenOn:"!data."+o+".config.showProvinceName",controls:[{type:"select",name:o+".config.textPlace",label:l.default("名称相对端点位置"),placeholder:l.default("请选择"),options:[{label:l.default("右侧"),value:"right"},{label:l.default("左侧"),value:"left"},{label:l.default("上方"),value:"top"},{label:l.default("下方"),value:"bottom"},{label:l.default("内部"),value:"inside"}]},{type:"number",label:l.default("名称与端点距离"),name:o+".config.textOffset",step:1,min:1,max:100}]},i.amisInlineSwitch(o+".config.avoid",l.default("避免散点名称文字相互重叠"),"!data."+o+".config.showProvinceName")]}]},{type:"divider"},{type:"fieldset",collapsed:!0,title:l.default("Tooltip 设置"),collapsable:!0,headingClassName:"fieldset-title",controls:[i.amisInlineSwitch(o+".config.showRank",l.default("Tooltip 中展示排名")),i.amisInlineSwitch(o+".config.tipPercent",l.default("Tooltip 中展示百分比")),{type:"number",label:l.default("Tooltip字号"),name:o+".config.tooltipFontSize",step:1,min:8,max:100},{type:"group",controls:[{type:"text",name:o+".config.unit",label:l.default("颜色映射数据单位"),placeholder:l.default("默认为空")},{type:"text",name:o+".config.unit1",label:l.default("宽度映射数据单位"),placeholder:l.default("默认为空")}]},{type:"group",controls:[{type:"color",name:o+".config.tooltipFontColor",label:l.default("Tooltip 文字颜色"),format:"rgba"},{type:"color",name:o+".config.tooltipBackground",label:l.default("Tooltip 背景颜色"),format:"rgba"}]}]},{type:"divider"},{type:"fieldset",collapsed:!0,title:l.default("宽度映射设置"),collapsable:!0,headingClassName:"fieldset-title",controls:[{type:"number",name:o+".config.lineWidth",label:l.default("线条固定宽度(像素)"),step:1,min:1,max:100},{type:"number",label:l.default("最小值对应线条宽度"),name:o+".config.minWidth",step:1,min:1,max:100},{type:"number",label:l.default("最大值对应线条宽度"),name:o+".config.maxWidth",step:1,min:1,max:100}]},{type:"divider"},{type:"fieldset",collapsed:!0,title:l.default("地名映射设置"),collapsable:!0,headingClassName:"fieldset-title",controls:[{type:"select",name:o+".config.prefix",label:l.default("名称查找前缀（部分区县有重名，需要市名区分）"),clearable:!0,options:s.prefixCity,searchable:!0,resetValue:"",desc:l.default("当使用地名映射坐标时，由于部分区县出现同名情况，因此需要使用城市前缀来区分，如果发现坐标不正确，则需要设置前缀进行校正。")}]}]},e.lineInitialState={dataType:"api",dataApiUrl:e.lineChartDemoUrl,config:{lineWidth:3,customColorType:"default",highlightColor:"rgba(74, 144, 226, 1)",showEffect:!0,effectPeriod:3,trailLength:1,effectSymbolSize:5,symbolSize:8,showProvinceName:!1,textColor:"rgba(74, 144, 226, 1)",textSize:14,textPlace:"right",imgUrls:"",imgInputs:[""],textOffset:10,showRank:!0,tipPercent:!0,tooltipFontSize:12,tooltipFontColor:"rgba(44, 212, 233, 1)"},dataConfig:{coordType:"auto"}}});
;sugar.define("sugar:widgets/charts/bmap-line/bmap-line-ctrl.tsx",function(e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.advancedCtrl=a.dataBindCtrl=a.chartEigens=a.colModeMultiRowsOptions=a.chartDemoUrl=a.basicCtrl=void 0;var t=e("sugar:node_modules/tslib/tslib.js"),l=e("sugar:utils/i18n.ts"),d=e("sugar:node_modules/react/index.js"),o=e("sugar:widgets/ctrl-panel/data-bind-ctrl/index.tsx"),n=e("sugar:widgets/object-array-editor/object-array-editor.tsx"),i=e("sugar:widgets/amis-inline-switch.tsx"),r=e("sugar:widgets/data-model/data-model-field-holder/data-model-field-holder.tsx"),s=e("sugar:widgets/charts/bmap-scatter/bmap-scatter-ctrl.tsx"),p=e("sugar:widgets/charts/map/special-district.ts"),c=e("sugar:widgets/charts/bar-pic/symbols.tsx"),u=e("sugar:widgets/charts/map/map-ctrl.tsx"),f=e("sugar:widgets/charts/map-line/map-line-ctrl.tsx"),m=[{type:"color",name:l.default("颜色"),key:"color",defaultValue:"#23b7e5"}],g=function(e){return[{type:"divider"},{type:"fieldset",collapsed:!0,title:l.default("自定义配色"),collapsable:!0,headingClassName:"fieldset-title",controls:[i.amisInlineSwitch("config.openCustomColor",l.default("路径气泡颜色自定义")),{type:"radios",name:"config.customColorType",hiddenOn:"!data.config.openCustomColor",label:"",inline:!1,options:[{label:l.default("跟随页面主题配色"),value:"report"},{label:l.default("自定义"),value:"custom"}]},{name:"config.customColors",hiddenOn:"!data.config.openCustomColor || data.config.customColorType != 'custom'",children:function(a){var o=a.onChange,i=a.value;return d.createElement(n.default,t.__assign({},{onChange:o,value:i},{chartFrontendId:e.chart.frontendId,containerClassName:"form-group form-item",label:l.default("可增加多个配色项，依次映射每条路径颜色"),addTipText:l.default("新增配色项"),cols:m}))}},{type:"color",name:"config.textColor",label:l.default("文字颜色"),format:"rgba",hiddenOn:"!data.config.openCustomColor"},{type:"color",name:"config.symbolColor",label:l.default("动效颜色"),format:"rgba",hiddenOn:"!data.config.openCustomColor"}]}]};a.basicCtrl=function(e){return g(e)};var y="/openapi/demo/chart?type=bmapLine";a.chartDemoUrl="$CUR_HOST/openapi/demo/chart?type=bmapLine",a.colModeMultiRowsOptions=[{label:l.default("同路径取累加值"),value:"sum"},{label:l.default("同路径取平均值"),value:"avg"},{label:l.default("同路径取最大值"),value:"max"},{label:l.default("同路径取最小值"),value:"min"},{label:l.default("同路径取第一个值"),value:"first"},{label:l.default("同路径取最后一个值"),value:"end"}],a.chartEigens=[{field:[{name:"lng",type:"d",subType:"lng",minCount:1,maxCount:1},{name:"lat",type:"d",subType:"lat",minCount:1,maxCount:1},{name:"name",type:"d",minCount:1,maxCount:1},{name:"value",type:"m",minCount:0,maxCount:1},{name:"order",type:"d",minCount:0,maxCount:1}],configSp:{"dataConfig.coordType":"bind"},noRecommend:!0},{field:[{name:"sourceNode",type:"d",subType:"geo",minCount:1,maxCount:1},{name:"name",type:"d",minCount:1,maxCount:1},{name:"value",type:"m",minCount:0,maxCount:1},{name:"order",type:"d",minCount:0,maxCount:1}],configSp:{"dataConfig.coordType":"auto"},noRecommend:!0}],a.dataBindCtrl=function(e){var s=o.getDebugAndRefreshBtn({loadData:e.chart.loadData,loadDebugData:e.chart.loadDebugData,dataType:e.chart.dataType,refreshText:l.default("刷新图表")}),p=o.getDataBindCommon({frontendId:e.chart.frontendId,dataTypeOptions:["dataModel","api","sql","json"],api:{demoUrl:y},loadData:e.chart.loadData,loadDebugData:e.chart.loadDebugData,curUrl:e.chart.dataApiUrl}),c=e.chart.dataModelHash||"",f=e.sqlModelStore.detailMap.mapByHash.get(c),m=o.generateSQLFieldList(f),g=t.__spreadArrays([r.getDataModelFieldHolder({name:"name",label:l.default("路径名称字段"),config:{dataModelHash:c,holderId:e.chart.frontendId+"-name",maxCount:1,onlyDimension:!0}}),{type:"radios",name:"dataConfig.coordType",label:l.default("路径途径点定位模式"),hiddenOn:'data.dataType != "dataModel"',inline:!1,options:[{label:l.default("根据名称自动查找（支持省市县名称）"),value:"auto"},{label:l.default("根据经纬度字段"),value:"bind"}]},r.getDataModelFieldHolder({name:"sourceNode",label:l.default("途径地点名称字段"),hiddenOn:'data.dataType != "dataModel" || dataConfig.coordType !== "auto"',config:{dataModelHash:c,holderId:e.chart.frontendId+"-sourceNode",maxCount:1,onlyDimension:!0}}),r.getDataModelFieldHolder({name:"lng",label:l.default("经度"),hiddenOn:"data.dataType != \"dataModel\" || dataConfig.coordType !== 'bind'",config:{dataModelHash:c,holderId:e.chart.frontendId+"-longitude",maxCount:1,onlyDimension:!0}}),r.getDataModelFieldHolder({name:"lat",label:l.default("纬度"),hiddenOn:"data.dataType != \"dataModel\" || dataConfig.coordType !== 'bind'",config:{dataModelHash:c,holderId:e.chart.frontendId+"-latitude",maxCount:1,onlyDimension:!0}}),i.amisInlineSwitch("dataConfig.transCoord",l.default("国测局转百度坐标系"),"data.dataType != \"dataModel\" || dataConfig.coordType !== 'bind'",!1,l.default("当前坐标系为百度坐标系，如果对数据精度要求高，建议开启转换")),r.getDataModelFieldHolder({name:"value",label:l.default("取值字段(颜色深浅，选填)"),config:{dataModelHash:c,holderId:e.chart.frontendId+"-value",maxCount:1,onlyMeasure:!0}}),r.getDataModelFieldHolder({name:"size",label:l.default("线条宽度(选填)"),config:{dataModelHash:c,holderId:e.chart.frontendId+"-size",maxCount:1,onlyMeasure:!0}}),r.getDataModelFieldHolder({name:"order",label:l.default("途径地点顺序字段"),config:{dataModelHash:c,holderId:e.chart.frontendId+"-order",maxCount:1,onlyDimension:!0}}),{type:"select",name:"dataConfig.colModeMultiRows",hiddenOn:"data.dataType != 'dataModel'",label:l.default("各途经点数据处理方式"),options:a.colModeMultiRowsOptions},r.getDataModelFieldHolder({name:"tooltip",label:l.default("其他维度或度量"),hiddenOn:'data.dataType != "dataModel"',config:{dataModelHash:c,holderId:e.chart.frontendId+"-tooltip",maxCount:5},desc:l.default("其他的维度和度量将在鼠标悬停时的tooltip提示中展示")}),{type:"number",name:"config.lineWidth",hiddenOn:"dataType != 'dataModel' || (dataConfig.dataModel && dataConfig.dataModel.size && dataConfig.dataModel.size.length)",label:l.default("线条固定宽度(像素)"),step:1,min:1},{type:"number",name:"config.minWidth",hiddenOn:"dataType != 'dataModel' || !dataConfig.dataModel || !dataConfig.dataModel.size || !dataConfig.dataModel.size.length",label:l.default("最小宽度(像素)"),step:1,min:1},{type:"number",name:"config.maxWidth",hiddenOn:"dataType != 'dataModel' || config.mapType == \"heatmap\" || !dataConfig.dataModel || !dataConfig.dataModel.size || !dataConfig.dataModel.size.length",label:l.default("最大宽度(像素)"),step:1,min:1},o.commonFilterForDataModel(c),o.commonBindUrlParamForDataModel(c)],r.getChartConditionsHolder(c,e.chart),[o.commonLimitForDataModel,{type:"select",name:"dataConfig.nameField",hiddenOn:"data.dataType != 'sql'",label:l.default("路径名称字段"),placeholder:l.default("每条路径的唯一标识"),options:m},{type:"radios",name:"dataConfig.coordType",label:l.default("路径途径点定位模式"),hiddenOn:'data.dataType != "sql"',inline:!1,options:[{label:l.default("根据名称自动查找（支持省市县名称）"),value:"auto"},{label:l.default("根据经纬度字段"),value:"bind"}]},{type:"select",name:"dataConfig.lngField",hiddenOn:'data.dataType != "sql" || dataConfig.coordType != "bind"',label:l.default("路径途径点经度字段"),placeholder:l.default("请选择"),clearable:!0,options:m},{type:"select",name:"dataConfig.latField",hiddenOn:'data.dataType != "sql" || dataConfig.coordType != "bind"',label:l.default("路径途径点纬度字段"),placeholder:l.default("请选择"),clearable:!0,options:m},i.amisInlineSwitch("dataConfig.transCoord",l.default("国测局转百度坐标系"),"data.dataType != \"sql\" || dataConfig.coordType !== 'bind'",!1,l.default("当前坐标系为百度坐标系，如果对数据精度要求高，建议开启转换")),{type:"select",name:"dataConfig.locationField",hiddenOn:'data.dataType != "sql" || dataConfig.coordType != "auto"',label:l.default("路径途径点名称字段"),placeholder:l.default("请选择"),clearable:!0,options:m},{type:"select",name:"dataConfig.valueField",hiddenOn:"data.dataType != 'sql'",label:l.default("颜色映射取值字段"),placeholder:l.default("可选填"),options:m},{type:"select",name:"dataConfig.sizeValueField",hiddenOn:"data.dataType != 'sql'",label:l.default("宽度映射取值字段"),placeholder:l.default("可选填"),options:m},{type:"number",name:"config.lineWidth",hiddenOn:"data.dataType != 'sql' || dataConfig.sizeValueField",label:l.default("线条固定宽度(像素)"),step:1,min:1},{type:"number",name:"config.minWidth",hiddenOn:"data.dataType != 'sql' || !dataConfig.sizeValueField",label:l.default("最小宽度(像素)"),step:1,min:1},{type:"number",name:"config.maxWidth",hiddenOn:"data.dataType != 'sql' || !dataConfig.sizeValueField",label:l.default("最大宽度(像素)"),step:1,min:1},{type:"select",name:"dataConfig.colModeMultiRows",hiddenOn:"data.dataType != 'sql'",label:l.default("各途经点数据处理方式"),options:a.colModeMultiRowsOptions},{name:"dataConfig.tooltipItems",hiddenOn:"data.dataType != 'sql'",children:function(a){var l=a.onChange,o=a.value;return d.createElement(n.default,t.__assign({},{onChange:l,value:o},{chartFrontendId:e.chart.frontendId,containerClassName:"form-group form-item",label:"添加在Tooltip中显示的附加数据项",addTipText:"新增数据项",cols:u.tooltipBindCols(m)}))}},{type:"select",name:"dataConfig._sugar_extras",hiddenOn:"data.dataType != 'sql'",label:"下钻需要的附加字段，如存有URL的字段",placeholder:"请选择",options:m}]);return p.concat(g,s)},a.advancedCtrl=function(e){return t.__spreadArrays([s.getBmapConfig(e,!1,!0),{type:"divider"},{type:"fieldset",collapsed:!0,title:l.default("Tooltip 设置"),collapsable:!0,headingClassName:"fieldset-title",controls:[i.amisInlineSwitch("config.tipPercent",l.default("鼠标悬停时Tooltip中展示百分比")),i.amisInlineSwitch("config.showRank",l.default("鼠标悬停时Tooltip中展示排名")),{type:"number",label:l.default("Tooltip字号"),name:"config.tooltipFontSize",step:1,min:8,max:100}]},{type:"divider"},{type:"fieldset",collapsed:!0,title:l.default("路径样式设置"),collapsable:!0,headingClassName:"fieldset-title",controls:[{type:"group",controls:[{type:"number",label:l.default("路径宽度"),name:"config.lineWidth",step:1,min:0,max:100},{type:"number",label:l.default("路径弧度"),name:"config.lineCurve",step:1,min:0,max:10}]},{type:"group",controls:[{type:"color",name:"config.lineColor",label:l.default("路径颜色")},{type:"number",name:"config.lineOpacity",max:10,min:0,step:1,label:l.default("路径透明度")}]},{type:"tpl",label:"",value:'<div class="help-block">'+l.default("路径弧度仅对只规定起点和终点的路径有效，有途经点的路径此项需置空")+"</div>"},i.amisInlineSwitch("config.effect",l.default("开启动效")),{type:"group",hiddenOn:"!config.effect",controls:[{type:"number",label:l.default("动效速度"),name:"config.effectSpeed",step:10,min:0,max:300},{type:"number",label:l.default("动点大小"),name:"config.effectSize",step:1,min:0,max:100}]},{type:"group",hiddenOn:"!config.effect",controls:[{type:"select",name:"config.symbolType",label:"动点形状",placeholder:"请选择",options:c.symbolOps},{type:"number",name:"config.trailLength",label:l.default("动效轨迹长度"),step:.05,min:0,max:1}]},{type:"color",name:"config.symbolColor",hiddenOn:"!config.effect",label:l.default("动效颜色"),format:"rgba"},i.amisInlineSwitch("config.blend",l.default("开启颜色叠加"),"",!1,l.default("开启颜色叠加，请清空颜色取值字段"))]},{type:"divider"},{type:"fieldset",title:l.default("线条端点设置"),collapsable:!0,collapsed:!0,headingClassName:"fieldset-title",controls:[i.amisInlineSwitch("config.showScatter",l.default("显示气泡")),{type:"group",direction:"vertical",hiddenOn:"!config.showScatter",controls:[{type:"group",controls:[i.amisInlineSwitch("config.showScatterLabel",l.default("显示气泡名称")),i.amisInlineSwitch("config.showScatterEffect",l.default("显示气泡特效"))]},{type:"group",hiddenOn:"!config.showScatter",controls:[{type:"number",label:l.default("气泡大小"),name:"config.scatterSymbolSize",step:1,min:1,max:100},{type:"number",label:l.default("名称字号"),name:"config.scatterFontSize",step:1,min:8,max:100}]},{type:"tpl",label:"",value:'<div class="help-block">'+l.default("气泡名称显示的前提是设置根据名称自动查找定位，并设置途经地点名称字段")+"</div>"},{type:"group",controls:[{type:"color",name:"config.scatterColor",label:l.default("气泡颜色")},{type:"color",name:"config.strokeColor",label:l.default("描边颜色")}]},{type:"group",controls:[{type:"number",label:l.default("描边宽度"),name:"config.strokeWidth",step:1,min:0,max:100},{type:"number",label:l.default("高亮描边宽度"),name:"config.lightStrokeWidth",step:1,min:0,max:100}]},f.getScatterShape(c.symbolOps)]}]},{type:"divider"},{type:"fieldset",collapsed:!0,title:l.default("颜色映射设置"),collapsable:!0,headingClassName:"fieldset-title",controls:[{type:"group",controls:[i.amisInlineSwitch("config.hideVisualMap",l.default("隐藏图例")),i.amisInlineSwitch("config.colorReverse",l.default("颜色反转"))]},{type:"text",name:"config.unit",label:l.default("颜色映射数据单位"),placeholder:l.default("默认为空")},{type:"group",controls:[{type:"number",name:"config.vMapLeft",label:l.default("左边距"),step:5,min:0},{type:"number",name:"config.vMapBottom",label:l.default("底边距"),step:5,min:0}]},{type:"group",controls:[{type:"select",name:"config.vMapOrient",label:l.default("样式"),options:[{label:l.default("竖直"),value:"vertical"},{label:l.default("水平"),value:"horizontal"}]},{type:"number",label:l.default("字号"),name:"config.legendFontSize",step:1,min:8,max:100}]},{type:"group",controls:[{type:"number",label:l.default("映射柱体高度"),name:"config.vMapHeight",value:80,step:1,min:20},{type:"number",label:l.default("映射柱体宽度"),name:"config.vMapWidth",value:10,step:1,min:1,max:100}]},i.amisInlineSwitch("config.hideVMapText",l.default("隐藏图例上指标名称"))]},{type:"divider"},{type:"fieldset",collapsed:!0,title:l.default("宽度映射设置"),collapsable:!0,headingClassName:"fieldset-title",controls:[{type:"group",controls:[{type:"text",name:"config.lineWidth",label:l.default("线条固定宽度(像素)"),step:1,min:1,max:100},{type:"text",name:"config.unit1",label:l.default("宽度映射数据单位"),placeholder:l.default("默认为空")}]},{type:"group",controls:[{type:"number",label:l.default("最小值对应线条宽度"),name:"config.minWidth",step:1,min:1,max:100},{type:"number",label:l.default("最大值对应线条宽度"),name:"config.maxWidth",step:1,min:1,max:100}]}]},{type:"divider"},{type:"fieldset",collapsed:!0,title:l.default("地名映射设置"),collapsable:!0,headingClassName:"fieldset-title",controls:[{type:"select",name:"config.prefix",label:l.default("名称查找前缀（部分区县有重名，需要市名区分）"),clearable:!0,options:p.prefixCity,searchable:!0,resetValue:"",desc:l.default("当使用地名映射坐标时，由于部分区县出现同名情况，因此需要使用城市前缀来区分，如果发现坐标不正确，则需要设置前缀进行校正。")}]}],g(e))}});
;sugar.define("sugar:widgets/charts/map-layer/path/path-ctrl.tsx",function(a,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.pathInitialState=e.pathAdvancedCtrl=e.pathDataBindCtrl=e.pathChartDemoUrl=void 0;var t=a("sugar:node_modules/tslib/tslib.js"),l=a("sugar:utils/i18n.ts"),d=a("sugar:node_modules/react/index.js"),o=a("sugar:widgets/ctrl-panel/data-bind-ctrl/index.tsx"),n=a("sugar:widgets/object-array-editor/object-array-editor.tsx"),i=a("sugar:widgets/amis-inline-switch.tsx"),r=a("sugar:widgets/charts/map/map-ctrl.tsx"),f=a("sugar:widgets/data-model/data-model-field-holder/data-model-field-holder.tsx"),s=a("sugar:widgets/charts/map/special-district.ts"),p=a("sugar:widgets/charts/bmap-line/bmap-line-ctrl.tsx"),c=a("sugar:widgets/charts/map/map-ctrl.tsx"),u=a("sugar:widgets/charts/map-layer/scatter/scatter-ctrl.tsx"),g=a("sugar:widgets/charts/map-line/map-line-ctrl.tsx"),m="/openapi/demo/chart?type=bmapLine&nationLine=1";e.pathChartDemoUrl="$CUR_HOST/openapi/demo/chart?type=bmapLine&nationLine=1",e.pathDataBindCtrl=function(a){var e=a.activeSubChartKey;if(void 0===e)return[];var r="config.subChartConfig."+e,s=o.getDebugAndRefreshBtn({loadData:function(t){a.chart.loadOtherData(t,e)},loadDebugData:function(){a.chart.loadDebugOtherData(e)},dataType:a.chart.config.subChartConfig[e].dataType,field:{dataType:r+".dataType"},refreshText:l.default("刷新子组件")}),u=o.getDataBindCommon({frontendId:e,label:l.default("子组件数据绑定"),field:{dataType:r+".dataType",dataApiUrl:r+".dataApiUrl",staticData:r+".dataConfig.data",dataModelHash:r+".dataModelHash",dataJsonHash:r+".dataConfig.dataJsonHash",exemption:r+".dataConfig.exemption",cacheTTL:r+".dataConfig.cacheTTL",apiProOpen:r+".dataConfig.apiPro_open",apiProMethod:r+".dataConfig.apiPro_method",apiProGetAuto:r+".dataConfig.apiPro_getAuto",apiProHeaderList:r+".dataConfig.apiPro_headerList",apiProPostType:r+".dataConfig.apiPro_postType",apiProPostList:r+".dataConfig.apiPro_postList",apiProPostAuto:r+".dataConfig.apiPro_postAuto",apiProAdaptorOpen:r+".dataConfig.apiPro_adaptorOpen",apiProAdaptorHash:r+".dataConfig.apiPro_adaptorHash"},dataTypeOptions:["dataModel","api","sql","json"],api:{demoUrl:m},loadData:function(t){a.chart.loadOtherData(t,e)},loadDebugData:function(){a.chart.loadDebugOtherData(e)},curUrl:a.chart.config.subChartConfig[e].dataApiUrl}),g=a.chart.config.subChartConfig[e].dataModelHash||"",h=a.sqlModelStore.detailMap.mapByHash.get(g),y=o.generateSQLFieldList(h),b=[f.getDataModelFieldHolder({name:"name",namePrefix:r+".dataConfig.dataModel",hiddenOn:"data."+r+".dataType != 'dataModel'",label:l.default("路径名称字段"),config:{dataModelHash:g,holderId:a.chart.frontendId+"-name",maxCount:1,onlyDimension:!0}}),{type:"radios",name:r+".dataConfig.coordType",label:l.default("路径途径点定位模式"),hiddenOn:"data."+r+".dataType != 'dataModel'",inline:!1,options:[{label:l.default("根据名称自动查找（支持省市县名称）"),value:"auto"},{label:l.default("根据经纬度字段"),value:"bind"}]},f.getDataModelFieldHolder({name:"sourceNode",label:l.default("途径地点名称字段"),namePrefix:r+".dataConfig.dataModel",hiddenOn:"data."+r+'.dataType != "dataModel" || '+r+'.dataConfig.coordType !== "auto"',config:{dataModelHash:g,holderId:a.chart.frontendId+"-sourceNode",maxCount:1,onlyDimension:!0}}),f.getDataModelFieldHolder({name:"lng",label:l.default("经度"),namePrefix:r+".dataConfig.dataModel",hiddenOn:"data."+r+'.dataType != "dataModel" || '+r+".dataConfig.coordType !== 'bind'",config:{dataModelHash:g,holderId:a.chart.frontendId+"-longitude",maxCount:1,onlyDimension:!0}}),f.getDataModelFieldHolder({name:"lat",label:l.default("纬度"),namePrefix:r+".dataConfig.dataModel",hiddenOn:"data."+r+'.dataType != "dataModel" || '+r+".dataConfig.coordType !== 'bind'",config:{dataModelHash:g,holderId:a.chart.frontendId+"-latitude",maxCount:1,onlyDimension:!0}}),i.amisInlineSwitch(r+".dataConfig.transCoord",l.default("国测局转百度坐标系"),"data."+r+'.dataType != "dataModel" || '+r+".dataConfig.coordType !== 'bind'",!1,l.default("当前坐标系为百度坐标系，如果对数据精度要求高，建议开启转换")),f.getDataModelFieldHolder({name:"value",label:l.default("取值字段(颜色深浅，选填)"),namePrefix:r+".dataConfig.dataModel",hiddenOn:"data."+r+".dataType != 'dataModel'",config:{dataModelHash:g,holderId:a.chart.frontendId+"-value",maxCount:1,onlyMeasure:!0}}),f.getDataModelFieldHolder({name:"size",namePrefix:r+".dataConfig.dataModel",hiddenOn:"data."+r+".dataType != 'dataModel'",label:l.default("线条宽度(选填)"),config:{dataModelHash:g,holderId:a.chart.frontendId+"-size",maxCount:1,onlyMeasure:!0}}),f.getDataModelFieldHolder({name:"order",label:l.default("途径地点顺序字段"),namePrefix:r+".dataConfig.dataModel",hiddenOn:"data."+r+".dataType != 'dataModel'",config:{dataModelHash:g,holderId:a.chart.frontendId+"-order",maxCount:1,onlyDimension:!0}}),{type:"select",name:r+".dataConfig.colModeMultiRows",hiddenOn:"data."+r+".dataType != 'dataModel'",label:l.default("各途经点数据处理方式"),options:p.colModeMultiRowsOptions},f.getDataModelFieldHolder({name:"tooltip",label:l.default("其他维度或度量"),namePrefix:r+".dataConfig.dataModel",hiddenOn:"data."+r+".dataType != 'dataModel'",config:{dataModelHash:g,holderId:a.chart.frontendId+"-tooltip",maxCount:5},desc:l.default("其他的维度和度量将在鼠标悬停时的tooltip提示中展示")}),{type:"number",name:r+".config.lineWidth",hiddenOn:r+'.dataType != "dataModel" || ('+r+".dataConfig.dataModel && "+r+".dataConfig.dataModel.size && "+r+".dataConfig.dataModel.size.length)",label:l.default("线条固定宽度(像素)"),step:1,min:1},{type:"number",name:r+".config.minWidth",hiddenOn:r+'.dataType != "dataModel" || !'+r+".dataConfig.dataModel || !"+r+".dataConfig.dataModel.size || !"+r+".dataConfig.dataModel.size.length",label:l.default("最小宽度(像素)"),step:1,min:1},{type:"number",name:r+".config.maxWidth",hiddenOn:r+'.dataType != "dataModel" || !'+r+".dataConfig.dataModel || !"+r+".dataConfig.dataModel.size || !"+r+".dataConfig.dataModel.size.length",label:l.default("最大宽度(像素)"),step:1,min:1},o.commonFilterForDataModel(g,r+".dataConfig.dataModel.filters","data."+r+".dataType != 'dataModel'"),o.commonBindUrlParamForDataModel(g,r+".dataConfig.dataModel.filters","data."+r+".dataType != 'dataModel'"),o.getCommonLimitForDataModel(r,"data."+r+".dataType != 'dataModel'"),{type:"select",name:r+".dataConfig.nameField",hiddenOn:"data."+r+".dataType != 'sql'",label:l.default("路径名称字段"),placeholder:l.default("每条路径的唯一标识"),options:y},{type:"select",name:r+".dataConfig.valueField",hiddenOn:"data."+r+".dataType != 'sql'",label:l.default("颜色映射取值字段"),placeholder:l.default("可选填"),options:y},{type:"select",name:r+".dataConfig.sizeValueField",hiddenOn:"data."+r+".dataType != 'sql'",label:l.default("宽度映射取值字段"),placeholder:l.default("可选填"),options:y},{type:"number",name:r+".config.lineWidth",hiddenOn:r+".dataType != 'sql' || "+r+".dataConfig.sizeValueField",label:l.default("线条固定宽度(像素)"),step:1,min:1},{type:"number",name:r+".config.minWidth",hiddenOn:r+".dataType != 'sql' || !"+r+".dataConfig.sizeValueField",label:l.default("最小宽度(像素)"),step:1,min:1},{type:"number",name:r+".config.maxWidth",hiddenOn:r+".dataType != 'sql' || !"+r+".dataConfig.sizeValueField",label:l.default("最大宽度(像素)"),step:1,min:1},{type:"select",name:r+".dataConfig.colModeMultiRows",hiddenOn:"data."+r+".dataType != 'sql'",label:l.default("各途经点数据处理方式"),options:p.colModeMultiRowsOptions},{type:"radios",name:r+".dataConfig.coordType",label:l.default("路径途径点定位模式"),inline:!1,hiddenOn:"data."+r+".dataType != 'sql'",options:[{label:l.default("根据名称自动查找（支持省市县名称）"),value:"auto"},{label:l.default("根据经纬度字段"),value:"bind"}]},{type:"select",name:r+".dataConfig.lngField",hiddenOn:"data."+r+".dataType != 'sql' || data."+r+'.dataConfig.coordType != "bind"',label:l.default("路径途径点经度字段"),placeholder:l.default("请选择"),clearable:!0,options:y},{type:"select",name:r+".dataConfig.latField",hiddenOn:"data."+r+".dataType != 'sql' || data."+r+'.dataConfig.coordType != "bind"',label:l.default("路径途径点纬度字段"),placeholder:l.default("请选择"),clearable:!0,options:y},{type:"select",name:r+".dataConfig.locationField",hiddenOn:"data."+r+".dataType != 'sql' || data."+r+'.dataConfig.coordType != "auto"',label:l.default("路径途径点名称字段"),placeholder:l.default("请选择"),clearable:!0,options:y},i.amisInlineSwitch(r+".dataConfig.transCoord",l.default("国测局转百度坐标系"),"data."+r+".dataType != 'sql' || data."+r+'.dataConfig.coordType != "bind"',!1,l.default("当前坐标系为百度坐标系，如果对数据精度要求高，建议开启转换")),{name:r+".dataConfig.tooltipItems",hiddenOn:"data."+r+".dataType != 'sql'",children:function(e){var o=e.onChange,i=e.value;return d.createElement(n.default,t.__assign({},{onChange:o,value:i},{chartFrontendId:a.chart.frontendId,containerClassName:"form-group form-item",label:l.default("添加在Tooltip中显示的附加数据项"),addTipText:l.default("新增数据项"),cols:c.tooltipBindCols(y)}))}},{type:"select",name:r+".dataConfig._sugar_extras",hiddenOn:"data."+r+".dataType != 'sql'",label:l.default("下钻需要的附加字段，如存有URL的字段"),placeholder:l.default("请选择"),options:y,clearable:!0}],C=o.getAutoRefreshConfig({field:{needAutoRefresh:r+".dataConfig.needAutoRefresh",autoRefreshInterval:r+".dataConfig.autoRefreshInterval",dataType:r+".dataType",autoDestory:r+".autoDestory",showNullData:r+".showNullData",isDashChart:a.chart.isDashChart}});return u.concat(b,s,C)},e.pathAdvancedCtrl=function(a){var e=a.activeSubChartKey;if(void 0===e)return[];var o="config.subChartConfig."+e;return[{type:"fieldset",collapsed:!0,title:l.default("路径样式设置"),collapsable:!0,headingClassName:"fieldset-title",controls:[{type:"group",controls:[{type:"number",name:o+".config.lineWidth",label:l.default("线条固定宽度(像素)"),step:1,min:0,max:50},{type:"color",name:o+".config.lineColor",label:l.default("线条颜色"),format:"rgba"}]},{type:"radios",name:o+".config.customColorType",label:l.default("路径映射颜色类型"),inline:!1,options:[{label:l.default("默认配色"),value:"default"},{label:l.default("跟随页面主题配色"),value:"report"},{label:l.default("自定义配色"),value:"custom"}]},{name:o+".config.customColors",hiddenOn:"data."+o+".config.customColorType != 'custom'",children:function(e){var o=e.onChange,i=e.value;return d.createElement(n.default,t.__assign({},{onChange:o,value:i},{chartFrontendId:a.chart.frontendId,containerClassName:"form-group form-item",label:l.default("可增加多个配色项，依次映射数值从小到大的颜色"),addTipText:l.default("新增配色项"),cols:r.customColorsCols}))}},i.amisInlineSwitch(o+".config.colorReverse",l.default("数值映射颜色反转")),{type:"color",name:o+".config.highlightColor",label:l.default("路径高亮颜色"),format:"rgba"},i.amisInlineSwitch(o+".config.blend",l.default("开启颜色叠加"),"",!1,l.default("开启颜色叠加，请清空颜色取值字段"))]},{type:"divider"},{type:"fieldset",collapsed:!0,title:l.default("路径动画设置"),collapsable:!0,headingClassName:"fieldset-title",controls:[i.amisInlineSwitch(o+".config.showEffect",l.default("显示路径动效")),{type:"number",name:o+".config.effectPeriod",hiddenOn:"!data."+o+".config.showEffect",label:l.default("动画时间(越小速度越快)"),step:1,min:0},{type:"group",hiddenOn:"!data."+o+".config.showEffect",controls:[{type:"number",name:o+".config.trailLength",label:l.default("动效轨迹长度"),step:1,min:0},{type:"select",name:o+".config.symbolType",label:"动点形状",placeholder:"请选择",options:u.symbolOps}]},{type:"group",hiddenOn:"!data."+o+".config.showEffect",controls:[{type:"number",name:o+".config.effectSymbolSize",label:l.default("动点大小"),step:1,min:1},{type:"color",name:o+".config.effectHighlightColor",label:l.default("动点颜色"),format:"rgba"}]}]},{type:"divider"},{type:"fieldset",title:l.default("路径端点设置"),collapsable:!0,collapsed:!0,headingClassName:"fieldset-title",controls:[i.amisInlineSwitch(o+".config.showPoint",l.default("显示端点气泡")),{type:"group",hiddenOn:"!data."+o+".config.showPoint",direction:"vertical",controls:[{type:"group",controls:[{type:"number",label:l.default("气泡大小"),name:o+".config.symbolSize",step:1,min:1,max:100},{type:"color",name:o+".config.symbolColor",label:l.default("气泡颜色"),format:"rgba"}]},{type:"group",controls:[{type:"color",name:o+".config.strokeColor",label:l.default("描边颜色"),format:"rgba"},{type:"number",label:l.default("描边宽度"),name:o+".config.strokeWidth",step:1,min:0,max:100}]},g.getScatterShape(u.symbolOps,o),i.amisInlineSwitch(o+".config.showProvinceName",l.default("显示端点名称"),"",!1,l.default("气泡名称显示的前提是设置根据名称自动查找定位，并设置途经地点名称字段")),{type:"group",hiddenOn:"!data."+o+".config.showProvinceName",controls:[{type:"color",name:o+".config.textColor",label:l.default("名称颜色"),format:"rgba"},{type:"number",label:l.default("名称字号"),name:o+".config.textSize",step:1,min:1,max:100}]},{type:"group",hiddenOn:"!data."+o+".config.showProvinceName",controls:[{type:"select",name:o+".config.textPlace",label:l.default("名称相对端点位置"),placeholder:l.default("请选择"),options:[{label:l.default("右侧"),value:"right"},{label:l.default("左侧"),value:"left"},{label:l.default("上方"),value:"top"},{label:l.default("下方"),value:"bottom"},{label:l.default("内部"),value:"inside"}]},{type:"number",label:l.default("名称与端点距离"),name:o+".config.textOffset",step:1,min:1,max:100}]},i.amisInlineSwitch(o+".config.avoid",l.default("避免散点名称文字相互重叠"),"!data."+o+".config.showProvinceName")]}]},{type:"divider"},{type:"fieldset",collapsed:!0,title:l.default("Tooltip 设置"),collapsable:!0,headingClassName:"fieldset-title",controls:[i.amisInlineSwitch(o+".config.showRank",l.default("Tooltip 中展示排名")),i.amisInlineSwitch(o+".config.tipPercent",l.default("Tooltip 中展示百分比")),{type:"number",label:l.default("Tooltip字号"),name:o+".config.tooltipFontSize",step:1,min:8,max:100},{type:"group",controls:[{type:"text",name:o+".config.unit",label:l.default("颜色映射数据单位"),placeholder:l.default("默认为空")},{type:"text",name:o+".config.unit1",label:l.default("宽度映射数据单位"),placeholder:l.default("默认为空")}]},{type:"group",controls:[{type:"color",name:o+".config.tooltipFontColor",label:l.default("Tooltip 文字颜色"),format:"rgba"},{type:"color",name:o+".config.tooltipBackground",label:l.default("Tooltip背景颜色"),format:"rgba"}]}]},{type:"divider"},{type:"fieldset",collapsed:!0,title:l.default("宽度映射设置"),collapsable:!0,headingClassName:"fieldset-title",controls:[{type:"number",name:o+".config.lineWidth",label:l.default("线条固定宽度(像素)"),step:1,min:1,max:100},{type:"number",label:l.default("最小值对应线条宽度"),name:o+".config.minWidth",step:1,min:1,max:100},{type:"number",label:l.default("最大值对应线条宽度"),name:o+".config.maxWidth",step:1,min:1,max:100}]},{type:"divider"},{type:"fieldset",collapsed:!0,title:l.default("地名映射设置"),collapsable:!0,headingClassName:"fieldset-title",controls:[{type:"select",name:o+".config.prefix",label:l.default("名称查找前缀（部分区县有重名，需要市名区分）"),clearable:!0,options:s.prefixCity,searchable:!0,resetValue:"",desc:l.default("当使用地名映射坐标时，由于部分区县出现同名情况，因此需要使用城市前缀来区分，如果发现坐标不正确，则需要设置前缀进行校正。")}]}]},e.pathInitialState={dataType:"api",dataApiUrl:e.pathChartDemoUrl,config:{lineWidth:3,customColorType:"default",highlightColor:"rgba(126, 211, 33, 1)",showEffect:!0,effectPeriod:3,trailLength:1,effectSymbolSize:5,imgUrls:"",imgInputs:[""],symbolSize:8,showProvinceName:!1,textColor:"rgba(74, 144, 226, 1)",textSize:14,textPlace:"right",textOffset:10,showRank:!0,tipPercent:!0,tooltipFontSize:12},dataConfig:{coordType:"auto",colModeMultiRows:"sum"}}});
;sugar.define("sugar:widgets/charts/map-layer/path/path.tsx",function(t,e){"use strict";function a(t,e,a,u,v){return n.__awaiter(this,void 0,void 0,function(){var y,w,S,D,x,b,_,k,z,C,V,P,N,T,F,L,E,M,W,U,A,O,B,j,I,H,R,K,q,G,J,Q,X,Y,Z,$,te,ee,ae,oe,ie,re,ne,se,le,ue,ce;return n.__generator(this,function(de){switch(de.label){case 0:if(y=e.map,w=e.layersMap,S=e.eventMap,D=e.container,x=e.mainTooltip,b=w[a]||{},_=b.pathDataSet||new mapv.DataSet([]),k=b.pathLayer||new mapv.baiduMapLayer(y,_,{}),z=b.scatterDataSet||new mapv.DataSet([]),C=b.scatterLayer||new mapv.baiduMapLayer(y,z,{}),V=b.animationDataSet||new mapv.DataSet([]),P=b.animationLayer||new mapv.baiduMapLayer(y,V,{}),N=b.textDataSet||new mapv.DataSet([]),T=b.textLayer||new mapv.baiduMapLayer(y,N,{}),F=b.sliderToolTip||new f.ToolTip(D.parentElement||D),w[a]={scatterDataSet:z,scatterLayer:C,textDataSet:N,textLayer:T,pathDataSet:_,pathLayer:k,animationDataSet:V,animationLayer:P,sliderToolTip:F},L=u.config,E=[],M={},v&&"done"===v.loadState&&v.data&&(M=l(v.data),E=M.trails),!(E&&E instanceof Array))return[2];if(W=g(E),W!==!0)return p.toast.error(s.default("「"+t.chart.name+"」中子图表「"+u.name+"」数据格式错误：「"+W+"」")),[2];if(U=E.length,A=-1/0,O=1/0,B=-1/0,j=1/0,I=!1,H=!1,R=0,E.sort(function(t,e){return parseFloat(t.value)>parseFloat(e.value)?-1:1}),E.forEach(function(t){if(void 0!==t.value&&!isNaN(+t.value)){I=!0;var e=parseFloat(t.value)||0;e>A&&(A=e),O>e&&(O=e),R+=e}if(void 0!==t.sizeValue&&!isNaN(+t.sizeValue)){H=!0;var e=parseFloat(t.sizeValue)||0;e>B&&(B=e),j>e&&(j=e)}}),I?O===A&&O--:(O=0,A=0),H?j===B&&j--:(j=0,B=0),K=null,q=h(E,L,H,j,B),G=q.pathData,J=q.pointData,Q=q.animationData,X=q.textData,Y=q.coordinateData,e.points){for(e.points[a]=[],Z=0,$=Y;Z<$.length;Z++)te=$[Z],e.points[a].push(new BMap.Point(te[0],te[1]));e.autoComputMapStatus()}return ee=i(t,L),ae={methods:{click:function(t){d.isMobile||c.fireEvent(S,"click",u,t,!0)},mousemove:function(t){c.fireEvent(S,"mousemove",u,t)},tap:function(t){c.fireEvent(S,"tap",u,t,!0)}}},ae=I?n.__assign(n.__assign({},ae),{gradient:ee,max:A,min:O,draw:"intensity"}):n.__assign(n.__assign({},ae),{draw:"simple",globalCompositeOperation:L.blend?"lighter":void 0,strokeStyle:L.lineColor||"#1917e5"}),c.registEvent(S,"mousemove",u,function(t){if(K&&(K.lineWidth=K.widthStandard,K.strokeStyle=""),t){K=t,y.setDefaultCursor("pointer"),L.highlightColor&&(t.strokeStyle=L.highlightColor),t.lineWidth=1.3*t.widthStandard;var a=e.getMousePosition();a&&(x.setContent(o(t,L,R,U,M,I,H)),x.show(a.x+10,a.y+10))}else y.setDefaultCursor("default"),x.hide();k.draw()}),c.registEvent(S,"click",u,function(t){r(t,E,e,a,K,k,x)}),c.registEvent(S,"tap",u,function(t){if(r(t,E,e,a,K,k,x),t){L.highlightColor&&(t.strokeStyle=L.highlightColor),t.lineWidth=1.3*L.lineWidth,k.draw();var i=e.getMousePosition();i&&(F.setContent(o(t,L,R,U,M,I,H)),F.show(i.x+10,i.y+10))}else F.hide()}),_.set(G),k.update({options:ae}),k.draw(),L.showPoint?(oe=L.symbolSize||10,ie={max:A,min:O,lineWidth:L.strokeWidth||0,strokeStyle:L.strokeColor||"#4a6671"},L.symbolColor?(ie.fillStyle=L.symbolColor,ie.draw="simple"):(ie.gradient=ee,ie.draw="intensity"),re=L.imgInputs&&L.imgInputs[0],L.imgUrls||re?(ie.draw="icon",ne=re,L.imgUrls&&(ne=location.protocol+"//"+(location.host+L.imgUrls)),se=ie,[4,m.generateImage(ne)]):[3,2]):[3,4];case 1:return se.icon=de.sent(),ie.width=oe,ie.height=oe,[3,3];case 2:ie.symbol=L.scatterType||"circle",ie.size=oe,de.label=3;case 3:z.set(J),C.update({options:ie}),C.draw(),de.label=4;case 4:return L.showProvinceName&&(le=L.textSize||15,ue={draw:"text",avoid:!!L.avoid,size:le,font:"Arial",fillStyle:L.textColor||"black"},N.set(X),T.update({options:ue}),T.draw()),L.showEffect&&(ce={max:A,min:O,size:L.effectSymbolSize||1,animation:{type:"time",trails:L.trailLength||0,duration:L.effectPeriod||5}},L.effectHighlightColor?(ce.fillStyle=L.effectHighlightColor,ce.draw="simple"):(ce.gradient=ee,ce.draw="intensity"),V.set(Q),P.update({options:ce}),P.draw()),[2]}})})}function o(t,e,a,o,i,r,n){var l="",u=e.tooltipFontSize;e.tipPercent&&(l="("+(parseFloat(t.count)/a*100).toFixed(2)+"%)");var c=t.name||s.default("路径");if(r){var p=d.formatDataByType(t.count,i.dataFormat)+(i.unit||e.unit||"")+l;c+="<br> "+(i.valueName||s.default("线条颜色"))+": "+p}return n&&(c+="<br>"+(i.sizeValueName||s.default("线条宽度"))+": "+d.formatDataByType(t.sizeValue,i.sizeDataFormat)+(i.sizeUnit||e.unit1||"")),t&&t.tooltipValues&&t.tooltipValues instanceof Array&&t.tooltipValues.forEach(function(t,e){var a=i.tooltipNames&&i.tooltipNames[e]?i.tooltipNames[e]+": ":"",o=i.tooltipUnits&&i.tooltipUnits[e]?i.tooltipUnits[e]:"";c+="<br>"+a+d.formatDataByType(t,i.tooltipDataFormats?i.tooltipDataFormats[e]:"")+o}),e.showRank&&r&&(c=s.default("【第「"+(t.rank+1)+"」名/「"+o+"」】<br>")+c),'<div class="tooltip-content" style="font-size: '+u+"px;line-height:1.3;color:"+e.tooltipFontColor+";background:"+e.tooltipBackground+'">'+c+"</div>"}function i(t,e){var a,o=["#1a9850","#91cf60","#d9ef8b","#fee08b","#fc8d59","#d73027"],i=t.theme;"report"===e.customColorType?(o=(null===(a=i.config.chartTheme)||void 0===a?void 0:a.color)||o,o=o.slice(0,4)):"custom"===e.customColorType&&e.customColors&&e.customColors.length&&(o=e.customColors.map(function(t){return t.color})),o=o.filter(function(t){return!!t}),e.colorReverse&&o.reverse();for(var r=1/o.length,n={},s=0;s<o.length;s++)s===o.length-1?n[1]=o[s]:n[(r*s).toFixed(4)]=o[s];return n}function r(t,e,a,o,i,r,s){if(t){var l=e[t.rank],u=(l.coords,n.__rest(l,["coords"]));a.fireDrillDownOrDependence({fireKey:o,dataIndex:t.rank},n.__assign(n.__assign({},u),{_sugar_dd_default_:u.name_sugar_origin||u.name}))}i&&(i.strokeStyle="",i.lineWidth=i.widthStandard,r.draw(),s.hide())}Object.defineProperty(e,"__esModule",{value:!0});var n=t("sugar:node_modules/tslib/tslib.js"),s=t("sugar:utils/i18n.ts"),l=t("sugar:node_modules/lodash/cloneDeep.js"),u=t("sugar:widgets/charts/map/geo-coord.ts"),c=t("sugar:widgets/charts/map-layer/event-handler.ts"),d=t("sugar:utils/common-helper.ts"),p=t("sugar:node_modules/amis/lib/index.js"),f=t("sugar:widgets/tooltip/tooltip.ts"),m=t("sugar:widgets/charts/map-layer/scatter/scatter.tsx");e.default=a;var h=function(t,e,a,o,i){var r=[],n=[],s=[],l=[],c=[];return t.forEach(function(t,d){var p=t.value||0,f=e.lineWidth||3;a&&void 0!==t.sizeValue&&!isNaN(+t.sizeValue)&&(f=m.getSize(e.minWidth||1,e.maxWidth||5,o,i,+t.sizeValue)),t.rank=d;var h={geometry:{type:"LineString"},count:p,sizeValue:t.sizeValue,lineWidth:f,widthStandard:f,rank:t.rank};t.tooltipValues&&(h.tooltipValues=t.tooltipValues);var g=[],v=[];if(t.coords&&t.coords.length?g=t.coords:t.locations&&t.locations.length&&(g=t.locations.map(function(t){return u.getCoordsFromName(t,e.prefix)||[0,0]}),v=[{location:t.locations[0],coordinate:g[0]},{location:t.locations[t.locations.length-1],coordinate:g[t.locations.length-1]}]),c=c.concat(g),h.geometry.coordinates=g,e.showEffect)for(var y=0;y<g.length;y++)s.push({geometry:{type:"Point",coordinates:g[y]},count:p,time:y});var w=t.name,S=e.textSize||15;v&&v.length&&e.showProvinceName&&v.forEach(function(t){var a=t.location,o=t.coordinate;if(a){var i={x:0,y:0},r=a.length/2*S,n=S/2,s=e.textOffset||0;"right"===e.textPlace?i.x=r+s:"left"===e.textPlace?i.x=-r-s:"top"===e.textPlace?i.y=-n-s:"bottom"===e.textPlace&&(i.y=n+s),l.push({geometry:{type:"Point",coordinates:o},text:a,offset:i})}}),h.name=w,r.push(h),e.showPoint&&(n.push({geometry:{type:"Point",coordinates:g[0]},count:p,rank:t.rank}),n.push({geometry:{type:"Point",coordinates:g[g.length-1]},count:p,rank:t.rank}))}),{coordinateData:c,animationData:s,pathData:r,pointData:n,textData:l}},g=function(t){for(var e=0;e<t.length;e++){var a=t[e];if(!a.name)return s.default("第「"+(e+1)+"」项数据中没有名称name字段");if("string"!=typeof a.name)return s.default("第「"+(e+1)+"」项数据中名称name字段不是字符串");if(void 0!==a.value&&!d.isNumberic(a.value))return s.default("第「"+(e+1)+"」项数据中value取值不是数字类型");if(a.locations&&(!a.locations.length||a.locations.length<2||!d.isArrayOfTypes(a.locations,["string"])))return s.default("第「"+(e+1)+"」项数据中locations字段不是长度大于2的字符串数组，一条路径应至少提供起点和终点名称");if(a.coords&&(!a.coords.length||a.coords.length<2))return s.default("第「"+(e+1)+"」项数据中coords字段不是长度大于2的数组，一条路径应至少提供起点和终点坐标");if(a.coords)for(var o=0;o<a.coords.length;o++){var i=a.coords[o];if(i.length<2||!d.isArrayOfTypes(i,["number"]))return s.default("第「"+(e+1)+"」项数据中coords字段中的第「"+(o+1)+"」个经纬度坐标不是长度大于2的数字数组")}if(void 0!==a.sizeValue&&!d.isNumberic(a.sizeValue))return s.default("第「"+(e+1)+"」项数据中sizeValue取值不是数字类型");if(void 0!==a.tooltipValues&&!(a.tooltipValues instanceof Array))return s.default("第「"+(e+1)+"」项数据中tooltipValues字段不是数组类型")}return!0}});
;sugar.define("sugar:widgets/charts/map-line/util.ts",function(a,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.exportCommon=void 0;var e=a("sugar:node_modules/tslib/tslib.js"),o=a("sugar:utils/i18n.ts");t.exportCommon=function(a){var t=[];if(a&&a.data){var s=a.data.mapData;s&&s.length&&s.forEach(function(s,u){var l=[];if(0===u){var i=[];i.push(o.default("飞线名称")),void 0!==s.value&&i.push(a.data.valueName||o.default("飞线颜色")),void 0!==s.sizeValue&&i.push(a.data.sizeValueName||o.default("飞线宽度")),s.locations instanceof Array&&i.push(o.default("起点名称"),o.default("终点名称")),s.coords instanceof Array&&i.push(o.default("起点经度"),o.default("起点纬度"),o.default("终点经度"),o.default("终点纬度")),s.tooltipValues instanceof Array&&s.tooltipValues.forEach(function(t,e){i.push(a.data.tooltipNames&&a.data.tooltipNames[e]?a.data.tooltipNames[e]:o.default("附加数据「"+(e+1)+"」"))}),t.push(i)}l.push(s.name),void 0!==s.value&&l.push(s.value),void 0!==s.sizeValue&&l.push(s.sizeValue),s.locations instanceof Array&&l.push.apply(l,s.locations),s.coords instanceof Array&&l.push.apply(l,e.__spreadArrays(s.coords[0],s.coords[1])),s.tooltipValues instanceof Array&&s.tooltipValues.forEach(function(a){l.push(a)}),t.push(l)})}return t}});
;sugar.define("sugar:widgets/charts/bmap-line/util.ts",function(a,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.exportCommon=void 0;var o=a("sugar:utils/i18n.ts");t.exportCommon=function(a){var t=[];return a&&a.data&&a.data.trails&&a.data.trails.length&&a.data.trails.forEach(function(e,s){if(0===s){var u=[];u.push(o.default("路径名称")),void 0!==e.value&&u.push(a.data.valueName||o.default("路径颜色")),void 0!==e.sizeValue&&u.push(a.data.sizeValueName||o.default("路径宽度")),e.locations instanceof Array&&u.push(o.default("途径点名称")),e.coords instanceof Array&&u.push(o.default("途径点经度"),o.default("途径点纬度")),e.tooltipValues instanceof Array&&e.tooltipValues.forEach(function(t,e){u.push(a.data.tooltipNames&&a.data.tooltipNames[e]?a.data.tooltipNames[e]:o.default("附加数据「"+(e+1)+"」"))}),t.push(u)}e.locations instanceof Array&&e.locations.forEach(function(a){var o=[];o.push(e.name),void 0!==e.value&&o.push(e.value),void 0!==e.sizeValue&&o.push(e.sizeValue),o.push(a),e.tooltipValues instanceof Array&&e.tooltipValues.forEach(function(a){o.push(a)}),t.push(o)}),e.coords instanceof Array&&e.coords.forEach(function(a){var o=[];o.push(e.name),void 0!==e.value&&o.push(e.value),void 0!==e.sizeValue&&o.push(e.sizeValue),o.push(a[0],a[1]),e.tooltipValues instanceof Array&&e.tooltipValues.forEach(function(a){o.push(a)}),t.push(o)})}),t}});
;sugar.define("sugar:widgets/charts/map-layer/map-layer.tsx",function(a,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var e=a("sugar:node_modules/tslib/tslib.js"),r=a("sugar:utils/i18n.ts"),o=a("sugar:node_modules/react/index.js"),i=a("sugar:widgets/charts/chart-manager.tsx"),n=a("sugar:widgets/charts/_hoc/sub-charts.tsx"),l=a("sugar:node_modules/react-mixin/index.js"),s=a("sugar:widgets/charts/_hoc/debug/debug.tsx"),d=a("sugar:widgets/charts/_hoc/drill-down/drill-down.tsx"),m=a("sugar:widgets/charts/_hoc/toolbar/toolbar.tsx"),p=a("sugar:widgets/charts/_hoc/chart-zoom/index.tsx"),c=a("sugar:node_modules/amis/lib/index.js"),u=a("sugar:widgets/charts/map-layer/area-color/area-color-ctrl.tsx"),h=a("sugar:widgets/charts/_mixin/mapv.tsx"),g=a("sugar:widgets/charts/map-layer/map-layer-ctrl.tsx"),y=a("sugar:widgets/charts/map-layer/baidu-map/baidu-map-ctrl.tsx"),f=a("sugar:widgets/charts/map-layer/baidu-map/baidu-map.tsx"),v=a("sugar:widgets/charts/map-layer/area-color/area-color.tsx"),C=a("sugar:widgets/charts/map-layer/scatter/scatter-ctrl.tsx"),b=a("sugar:widgets/charts/map-layer/scatter/scatter.tsx"),x=a("sugar:widgets/charts/map-layer/heatmap/heatmap.tsx"),L=a("sugar:widgets/charts/map-layer/honeycomb/honeycomb.tsx"),w=a("sugar:widgets/charts/map-layer/heatmap/heatmap-ctrl.tsx"),S=a("sugar:widgets/charts/map-layer/honeycomb/honeycomb-ctrl.tsx"),D=a("sugar:widgets/charts/map-layer/line/line.tsx"),M=a("sugar:widgets/charts/map-layer/line/line-ctrl.tsx"),B=a("sugar:widgets/charts/map-layer/path/path-ctrl.tsx"),A=a("sugar:widgets/charts/map-layer/path/path.tsx"),_=a("sugar:widgets/editor/toolbar.tsx"),N=a("sugar:utils/export-file/export-excel.ts"),I=a("sugar:utils/export-file/export-csv.ts"),T=a("sugar:widgets/charts/map/util.ts"),F=a("sugar:widgets/charts/map-line/util.ts"),k=a("sugar:widgets/charts/bmap-line/util.ts"),P=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.layersMap={},t.eventMap={click:{},mousemove:{},tap:{}},t.points=null,t}return e.__extends(t,a),t.prototype.toggleBaiduMap=function(a){void 0===a&&(a=!0),this.container&&(a?this.container.classList.remove("no-bmap"):this.container.classList.add("no-bmap"))},t.prototype.refreshSingleLayer=function(a,t){var e=a.chartConfig.subChartConfig[t],r=a.chartOtherData[t];return e.hide&&"editor"===a.mode?void 0:_.canUseChart(e.type)?void("mapLayerBaiduMap"===e.type?(this.toggleBaiduMap(!0),f.default(a,this.map,e)):"mapLayerAreaColor"===e.type?v.default(a,this,t,e,r):"mapLayerScatter"===e.type||"mapLayerLabel"===e.type?b.default(a,this,t,e,r):"mapLayerHeatmap"===e.type?x.default(a,this,t,e,r):"mapLayerLine"===e.type?D.default(a,this,t,e,r):"mapLayerPath"===e.type?A.default(a,this,t,e,r):"mapLayerHoneycomb"===e.type&&L.default(a,this,t,e,r)):void("editor"===a.mode&&c.toast.error(a.chart.name+"的子图表「"+e.name+"」：此版本组织不支持此类型的子图层"))},t.prototype.didMount=function(){var a=this;if(!this.props.chart.isDashChart){var t=this.props.chartConfig;setTimeout(function(){return window.loadjs.ready("BMap",function(){t.autoComputeMapStatus?a.autoComputMapStatus():a.map.centerAndZoom(new BMap.Point(t.centerLng,t.centerLat),t.zoom)})},1e3)}},t.prototype.autoComputMapStatus=function(){if(this.points){var a=[];for(var t in this.points)if(a=a.concat(this.points[t]),a.length){var e=this.map.getViewport(a);this.map.centerAndZoom(e.center,e.zoom)}}},t.prototype.willUnmount=function(){this.clearLayersIntervalAndLabel(),this.mainTooltip&&this.mainTooltip.destroy()},t.prototype.clearLayersIntervalAndLabel=function(){for(var a in this.layersMap){this.layersMap[a].sliderIntervelFlag&&clearInterval(this.layersMap[a].sliderIntervelFlag);var t=this.layersMap[a],e=t.sliderToolTip,r=t.labelLayer;e&&(e instanceof Array?e.length&&e.forEach(function(a){return a.destroy()}):e.destroy()),r&&r.length&&r.forEach(function(a){return a.destroy()})}},t.prototype.refresh=function(a,t){var e=a.chartConfig;"editor"===this.props.mode?this.map.enableScrollWheelZoom():(e.disableZoom?this.map.disableDoubleClickZoom():this.map.enableScrollWheelZoom(),e.disableDrag&&this.map.disableDragging());var r=e.subChartConfig;if(t)this.refreshSingleLayer(a,t);else if(this.map.centerAndZoom(new BMap.Point(e.centerLng,e.centerLat),e.zoom),r){this.clearLayersIntervalAndLabel(),this.layersMap={},this.eventMap={click:{},mousemove:{},tap:{}},this.toggleBaiduMap(!1),this.points=e.autoComputeMapStatus?{}:null;var o=[];for(var i in r)o.push(r[i]);o.sort(function(a,t){return-a.order+t.order});for(var n=0,l=o;n<l.length;n++){var s=l[n];this.refreshSingleLayer(a,s.key)}}},t.displayName="MapLayer",t=e.__decorate([d.default,s.default,m.default,p.default,n.default,l.decorate(h.default)],t)}(o.Component);t.default=P;var O=function(a,t){var e=a.config.subChartConfig[t];if("mapLayerAreaColor"===e.type){var r=e.dataConfig,o=r.dataModel,i=o.name,n=void 0===i?[]:i,l=o.value,s=void 0===l?[]:l,d=o.lng,m=void 0===d?[]:d,p=o.lat,c=void 0===p?[]:p,u=(o.tooltip,r.coordType);return 1!==n.length||1!==s.length?!1:"bind"!==u||1===m.length&&1===c.length?!0:!1}if("mapLayerScatter"===e.type||"mapLayerLabel"===e.type){var h=e.dataConfig,g=h.dataModel,y=g.name,n=void 0===y?[]:y,f=g.value,s=void 0===f?[]:f,v=(g.size,g.type,g.lng),m=void 0===v?[]:v,C=g.lat,c=void 0===C?[]:C,u=(g.tooltip,h.coordType);return 1!==n.length?!1:"bind"!==u||1===m.length&&1===c.length?!0:!1}if("mapLayerHeatmap"===e.type){var b=e.dataConfig,x=b.dataModel,L=x.name,n=void 0===L?[]:L,w=x.value,s=void 0===w?[]:w,S=(x.size,x.lng),m=void 0===S?[]:S,D=x.lat,c=void 0===D?[]:D,u=(x.tooltip,b.coordType);return 1!==n.length||1!==s.length?!1:"bind"!==u||1===m.length&&1===c.length?!0:!1}if("mapLayerLine"===e.type){var M=e.dataConfig,B=M.dataModel,A=B.sourceNode,_=void 0===A?[]:A,N=B.targetNode,I=void 0===N?[]:N,T=B.name,n=void 0===T?[]:T,F=B.value,s=void 0===F?[]:F,k=B.lng,m=void 0===k?[]:k,P=B.lat,c=void 0===P?[]:P,O=B.lng2,Z=void 0===O?[]:O,j=B.lat2,z=void 0===j?[]:j,u=(B.tooltip,M.coordType);return 1!==_.length||1!==I.length?!1:"bind"!==u||1===m.length&&1===c.length&&1===Z.length&&1===z.length?!0:!1}if("mapLayerPath"===e.type){var E=e.dataConfig,H=E.dataModel,W=H.name,n=void 0===W?[]:W,R=H.sourceNode,_=void 0===R?[]:R,U=H.value,s=void 0===U?[]:U,V=H.lng,m=void 0===V?[]:V,J=H.lat,c=void 0===J?[]:J,u=(H.order,E.coordType);if(1!==n.length)return!1;if("bind"===u){if(1!==m.length||1!==c.length)return!1}else if(1!==_.length)return!1;return!0}return!1},Z={mapLayerAreaColor:{name:r.default("区域色彩层"),exportCommon:T.exportCommon},mapLayerScatter:{name:r.default("散点层"),exportCommon:T.exportCommon},mapLayerLabel:{name:r.default("散点标签层"),exportCommon:T.exportCommon},mapLayerHeatmap:{name:r.default("热力层"),exportCommon:T.exportCommon},mapLayerHoneycomb:{name:r.default("蜂窝聚合层"),exportCommon:T.exportCommon},mapLayerLine:{name:r.default("飞线层"),exportCommon:F.exportCommon},mapLayerPath:{name:r.default("路径层"),exportCommon:k.exportCommon}},j=function(a,t){var e,o=[],i=t.dynamicName||t.name||r.default("多层地图");if((null===(e=t.config)||void 0===e?void 0:e.subChartConfig)instanceof Object)for(var n in t.config.subChartConfig){var l=t.config.subChartConfig[n],s=a.other.get(n),d=Z[l.type];(null===d||void 0===d?void 0:d.exportCommon)&&s&&o.push({name:i+"-"+d.name,rows:d.exportCommon(s)})}return o},z=function(a,t){return e.__awaiter(void 0,void 0,void 0,function(){var r,o,i;return e.__generator(this,function(e){switch(e.label){case 0:return r=j(a,t),[4,N.getExcelJS()];case 1:return o=e.sent(),i=new o.Workbook,(null===r||void 0===r?void 0:r.length)?r.forEach(function(a){var t=i.addWorksheet(a.name);t.addRows(a.rows)}):i.addWorksheet("sheet1"),N.saveExcel(""+(t.dynamicName||t.name||"export"),i),[2]}})})},E=function(a,t){var e=[],r=j(a,t);(null===r||void 0===r?void 0:r.length)&&r.forEach(function(a){e.push([a.name]),e=e.concat(a.rows)}),I.exportCsvByRows(e,(t.dynamicName||t.name||"export")+".csv")},H=function(a,t){return j(a,t)};i.register({kind:"map",type:"map-layer",name:r.default("多层地图"),docName:r.default("多层地图"),iconClassName:"chart-map-layer",enableTemplate:!0,component:P,subCharts:{mapLayerBaiduMap:{name:r.default("地图层"),isDefault:!0,defaultOrder:0,initialState:y.bmapInitialState,advancedCtrl:y.bmapAdvancedCtrl,loadDataPremiseField:"never",imgClassName:"map-layer-bmap"},mapLayerAreaColor:{name:r.default("区域色彩层"),isDefault:!0,defaultOrder:1,initialState:u.areaInitialState,dataBindCtrl:u.areaDataBindCtrl,advancedCtrl:u.areaAdvancedCtrl,canFireDrilldown:!0,imgClassName:"map-layer-area-color",drillDownSuggestDataModelField:"name"},mapLayerScatter:{name:r.default("散点层"),isDefault:!1,defaultOrder:2,initialState:C.scatterInitialState,dataBindCtrl:C.scatterDataBindCtrl,advancedCtrl:C.scatterAdvancedCtrl,canFireDrilldown:!0,imgClassName:"map-layer-scatter"},mapLayerLabel:{name:r.default("散点标签层"),isDefault:!1,defaultOrder:4,initialState:C.labelInitialState,dataBindCtrl:C.scatterDataBindCtrl,advancedCtrl:C.scatterAdvancedCtrl,canFireDrilldown:!0,imgClassName:"map-layer-label"},mapLayerHeatmap:{name:r.default("热力层"),initialState:w.heatmapInitialState,dataBindCtrl:w.heatmapDataBindCtrl,advancedCtrl:w.heatmapAdvancedCtrl,imgClassName:"map-layer-heatmap"},mapLayerHoneycomb:{name:r.default("蜂窝聚合层"),initialState:S.honeycombInitialState,dataBindCtrl:S.honeycombDataBindCtrl,advancedCtrl:S.honeycombAdvancedCtrl,imgClassName:"map-layer-honeycomb"},mapLayerLine:{name:r.default("飞线层"),isDefault:!1,defaultOrder:3,initialState:M.lineInitialState,dataBindCtrl:M.lineDataBindCtrl,advancedCtrl:M.lineAdvancedCtrl,canFireDrilldown:!0,imgClassName:"map-layer-line"},mapLayerPath:{name:r.default("路径层"),initialState:B.pathInitialState,dataBindCtrl:B.pathDataBindCtrl,advancedCtrl:B.pathAdvancedCtrl,canFireDrilldown:!0,imgClassName:"map-layer-path"}},initialState:{width:8,height:690,config:{centerLng:106.1306,centerLat:38.24,centerConfig:1,zoom:5,disableDrag:!1,disableZoom:!0}},initialDashboardState:{width:950,height:660},needDashboardAutoFresh:!1,basicCtrl:g.basicCtrl,drillDownType:"multiple",canBeDrillChild:!0,drillChildName:r.default("多层地图"),dataModelPanelShow:[["dataType","dataModel"]],loadDataWhenDataModelConfigChange:O,exportCSV:E,exportExcel:z,exportRows:H})});
;sugar.define("sugar:widgets/charts/map/register-map-by-geojson-async.ts",function(e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.registerMapAsyncThenRender=void 0;var t=e("sugar:utils/i18n.ts"),a=e("sugar:utils/fetch.ts"),n=e("sugar:node_modules/amis/lib/index.js"),s=e("sugar:node_modules/echarts/dist/echarts.js"),o={};r.registerMapAsyncThenRender=function(e,r,i,u,c){if("world"===e)c("world");else if("china"===e)c("china");else if("province"===e||"city"===e){var d=o[e+"@"+r];if(d)c(d);else{if("url"===u&&"saas"===window.sugarConfig.deployType&&!window.sugarConfig.nowProductConfig.mapScopeByUrlParam)return n.toast.error(t.default("地图范围根据URL参数动态切换功能需要高级版才能支持！")),c("");a.get("/openapi/geo/json?type="+e+"&name="+r).then(function(a){var i=a.data||{geojson:null,mapName:null},u=i.mapName,d=i.geojson;return u?(o[e+"@"+r]=u,void(s.getMap(u)?c(u):(s.registerMap(u,d),c(u)))):n.toast.error(t.default("获取地图GeoJSON数据错误"))}).catch(function(e){n.toast.error(e.message||t.default("获取地图失败"))})}}else if("custom"===e&&r){if("create"===r||-1===i)return c("");var d=o[e+"@"+r+"@"+i];d?c(d):a.get("/openapi/map/"+r).then(function(a){var u=a.data||{content:null,hash:null},d=u.content,l=u.hash;if(!d)return c("");try{d=JSON.parse(d)}catch(g){return n.toast.error(t.default("获取地图GeoJSON数据错误"))}return l?(o[e+"@"+r+"@"+i]=l+"@"+i,void(s.getMap(l+"@"+i)?c(l+"@"+i):(s.registerMap(l+"@"+i,d),c(l+"@"+i)))):n.toast.error(t.default("获取地图GeoJSON数据错误"))}).catch(function(e){n.toast.error(e.message||t.default("获取GeoJSON数据失败"))})}},r.default=r.registerMapAsyncThenRender});
;sugar.define("sugar:widgets/charts/map/map-area.ts",function(e,a){"use strict";function t(e,a,t,s,l,c,u,h,f,v){var g=a.chartConfig,I=a.hub,y=a.chart,C="#888";y.isDashChart&&(C="#fff"),g.openCustomColor&&g.borderColor&&(C=g.borderColor);var w={toolbox:{show:!1}};l&&(w.visualMap=l);var x=d(e,"_handleDependence"),S=parseInt(g.topCoslCnt||0,10),b=h.length,D=u.unit||g.unit,E=12;if(w.tooltip={trigger:"item",confine:!0,formatter:function(e){var a=h[e.dataIndex];if(!a)return null;var t="",o=g.tooltipFontSize||E;g.tipPercent&&(t="("+(parseFloat(e.value)/c*100).toFixed(2)+"%)");var i=e.name;if(a&&void 0!==a.value){var s=n.formatDataByType(e.value,u.dataFormat)+(D||"")+t;i+="<br> "+(u.valueName||r.default("区域颜色"))+": "+s}return a&&a.tooltipValues&&a.tooltipValues instanceof Array&&a.tooltipValues.forEach(function(e,a){var t=u.tooltipNames&&u.tooltipNames[a]?u.tooltipNames[a]+": ":"",r=u.tooltipUnits&&u.tooltipUnits[a]?u.tooltipUnits[a]:"";i+="<br>"+t+n.formatDataByType(e,u.tooltipDataFormats?u.tooltipDataFormats[a]:"")+r}),g.showRank&&(i=r.default("【第「"+(e.dataIndex+1)+"」名/「"+b+"」】<br>")+i),'<div style="font-size: '+o+'px;line-height:1.3">'+i+"</div>"}},S&&(w.tooltip.position=function(e){return[e[0]+10,e[1]+10]}),I.dependenceData.dependenceState){var A=I.dependenceData.dependenceState.dataIndex;h.forEach(function(e,a){e.itemStyle={opacity:a===A?1:.3}})}if(v||o.isValidSlideDependence(g)&&S||h.forEach(function(e){e.itemStyle={opacity:1}}),w.series=[{name:r.default("区域"),type:"map",mapType:f,roam:!!g.roam,label:{show:!!g.showProvinceName,color:t,fontSize:g.provinceFontSize||E,formatter:function(e){var a=e.name;if(a.length<=4)return a;var t=/.{4}/g,r=a.match(t);return r.push(a.substring(r.join("").length)),r.join("\n")}},itemStyle:{normal:{areaColor:s,borderColor:C},emphasis:S?{borderWidth:2,label:{color:g.mapEmphasisLabelColor||t},areaColor:g.mapEmphasisColor||p.transAreaColor}:{label:{color:g.mapEmphasisLabelColor||t},areaColor:g.mapEmphasisColor||p.transAreaColor}},data:m(h,f)}],g.openCustomShadow&&g.shadowBlur){var F=w.series[0].itemStyle.normal;F.shadowBlur=g.shadowBlur,F.shadowColor=g.shadowColor||"rgba(0, 0, 0, 0.5)",F.shadowOffsetX=g.shadowOffsetX||0,F.shadowOffsetY=g.shadowOffsetY||0}if(i.setAnimationOption(w,g),e.chart.setOption(w,!0),!v&&(e.mapSliderIntervalEvent&&clearInterval(e.mapSliderIntervalEvent),S)){var M=function(){try{if(!e.props.chartData&&o.isValidSlideDependence(g))return;e.chart.dispatchAction({type:"unselect",seriesIndex:0,dataIndex:e.mapSliderIndex}),e.mapSliderIndex++,e.mapSliderIndex>Math.min(h.length,S)-1&&(e.mapSliderIndex=0);var a=e.mapSliderIndex;e.chart.dispatchAction({type:"select",seriesIndex:0,dataIndex:a}),e.chart.dispatchAction({type:"hideTip"}),e.chart.dispatchAction({type:"showTip",seriesIndex:0,dataIndex:a}),setTimeout(function(){e.chart&&e.chart.dispatchAction({type:"showTip",seriesIndex:0,dataIndex:a})},200),x&&o.isValidSlideDependence(g)&&x({seriesName:r.default("区域"),seriesIndex:0,dataIndex:a,data:{rank:a},name:d(h,"["+a+"].name")})}catch(t){}};M(),e.mapSliderIntervalEvent=setInterval(M,1e3*(parseInt(g.slideInterval,10)||3))}}Object.defineProperty(a,"__esModule",{value:!0});var r=e("sugar:utils/i18n.ts"),o=e("sugar:utils/chart-helper.ts"),n=e("sugar:utils/common-helper.ts"),i=e("sugar:utils/animation.ts"),s=e("sugar:widgets/charts/map/geo-coord.ts"),l=e("sugar:node_modules/echarts/dist/echarts.js"),d=e("sugar:node_modules/lodash/get.js"),p=e("sugar:widgets/charts/map/util.ts");a.default=t;var m=function(e,a){if(l&&l.getMap)if("china"!==a&&"world"!==a){var t={},r=l.getMap(a),o=r&&r.geoJson?r.geoJson:null;o&&o.features&&o.features.map(function(e){if(e.properties&&e.properties.name){var a=e.properties.name;t[a]=a,/(自治区|自治县|自治州)$/.test(a)?t[a.slice(0,-3)]=a:["市","区","县","盟"].includes(a[a.length-1])&&(t[a.slice(0,-1)]=a)}}),e.forEach(function(e){e.name&&e.name.trim&&(e.name=e.name.trim()),e.name=t[e.name]||e.name})}else e.forEach(function(e){e.name&&e.name.trim&&(e.name=e.name.trim()),e.name=s.worldCountryMap[e.name]||s.chinaProvinceMap[e.name]||e.name});return e}});
;sugar.define("sugar:widgets/charts/map/map-scatter.ts",function(e,t){"use strict";function a(e,t,a,c,h,p,m,u,f,S){var b=t.chartConfig,g=t.hub,y="#444";b.openCustomColor&&b.borderColor&&(y=b.borderColor);var I,v,x=null==b.topCityNum?2:parseInt(b.topCityNum),C=12,w=m.sizeUnit||b.unit1,z=s(e,"_handleDependence"),L=x&&b.scatterSlide||b.scatterSlideAll,F={toolbox:{show:!1},visualMap:[]};h&&(I=h.min,v=h.max,h.dimension=2,F.visualMap.push(h));var E,W,D=x?u.slice(x):u.concat(),k=x?u.slice(0,x):[],B=b.minSize||10,M=b.maxSize||30;if(void 0!==u[0].sizeValue&&u.forEach(function(e){var t=parseFloat(e.sizeValue)||0;(void 0===W||t>W)&&(W=t),(void 0===E||E>t)&&(E=t)}),void 0!==E&&void 0!==W&&(W===E&&E--,F.visualMap.push({type:"continuous",left:b.sMapLeft||"right",bottom:b.sMapBottom||0,orient:b.sMapOrient||"vertical",show:!b.sHideVisualMap,calculable:!0,dimension:3,min:E,max:W,inRange:{symbolSize:[B,M]},itemHeight:parseInt(b.sMapHeight)||80,itemWidth:parseInt(b.sMapWidth)||10,precision:0,text:b.sHideVMapText?[""]:m.sizeValueName?[m.sizeValueName]:[o.default("高"),o.default("低")],textStyle:{color:a,fontSize:b.sLegendFontSize||C},formatter:function(e){return null!=W&&50>W?i.formatDataByType(e,m.sizeDataFormat)+(w||""):i.formatDataByType(parseInt(e,10),m.sizeDataFormat)+(w||"")}})),F.geo={map:f,label:{normal:{show:!!b.showProvinceName,color:a,fontSize:b.provinceFontSize||C,formatter:function(e){var t=e.name;if(!t||t.length<=4)return t;var a=/.{4}/g,o=t.match(a);return o.push(t.substring(o.join("").length)),o.join("\n")}},emphasis:{show:!!b.areaHoverEffect}},silent:!b.areaHoverEffect,roam:!!b.roam,itemStyle:{normal:{areaColor:c,borderColor:y},emphasis:{label:{color:b.mapEmphasisLabelColor||a},areaColor:b.mapEmphasisColor||l.transAreaColor}}},b.openCustomShadow&&b.shadowBlur){var N=F.geo.itemStyle.normal;N.shadowBlur=b.shadowBlur,N.shadowColor=b.shadowColor||"rgba(0, 0, 0, 0.5)",N.shadowOffsetX=b.shadowOffsetX||0,N.shadowOffsetY=b.shadowOffsetY||0}b.showInfoUseLabel||(F.tooltip={trigger:"item",confine:!0,formatter:function(e){var t=b.tooltipFontSize||C,a=l.getScatterLabelTooltip(e,u,m,b,p);return'<div style="font-size: '+t+'px;line-height:1.3">'+a+"</div>"}},L&&(F.tooltip.position=function(e){return[e[0]+10,e[1]+10]}));var T=b.symbolSize||13,A=[],U=!b.showInfoUseLabel&&b.showScatterName,O={name:"normal",type:"scatter",coordinateSystem:"geo",symbol:d.default[b.symbolType||"circle"],symbolSize:T,blendMode:b.blend?"lighter":void 0,label:{normal:{position:b.scatterFontPos||"right",fontSize:b.scatterFontSize||C,lineHeight:1.3*(b.scatterFontSize||C),show:b.showInfoUseLabel&&b.showCityLabel||U,color:b.scatterFontColor||"",backgroundColor:b.scatterFontBackGroundColor||"rgba(50, 50, 50, 0.7)",borderColor:b.scatterFontBorderColor||"",borderWidth:b.scatterFontBorderWidth||0,padding:5,borderRadius:4,formatter:U?"{b}":function(e){return"auto"===b.labelContentType?l.autoDefineLabelContent(e,u,m,p,b.autoLabelContent):l.getScatterLabelTooltip(e,u,m,b,p,!1)}},emphasis:{show:b.showInfoUseLabel}},itemStyle:{normal:{color:b.scatterColor||"#1ca2a8",borderColor:b.strokeColor||"#4a6671",borderWidth:b.strokeWidth||0},emphasis:{borderWidth:b.lightStrokeWidth||0}}};if(l.generateSeries(A,D,b,O,"normal"),k.length){var V={name:"top",type:"effectScatter",coordinateSystem:"geo",symbolSize:1.2*T,showEffectOn:L&&b.hideNoSlideScatter?"emphasis":"render",rippleEffect:{brushType:"stroke"},hoverAnimation:!0,label:{normal:{position:b.scatterFontPos||"right",fontSize:b.scatterFontSize||C,lineHeight:1.3*(b.scatterFontSize||C),show:b.showInfoUseLabel&&b.showTopCityLabel||U,color:b.scatterFontColor||"",backgroundColor:b.scatterFontBackGroundColor||"rgba(50, 50, 50, 0.7)",borderColor:b.scatterFontBorderColor||"",borderWidth:b.scatterFontBorderWidth||0,padding:5,borderRadius:4,formatter:U?"{b}":function(e){return"auto"===b.labelContentType?l.autoDefineLabelContent(e,u,m,p,b.autoLabelContent):l.getScatterLabelTooltip(e,u,m,b,p,!1)}},emphasis:{show:b.showInfoUseLabel}},itemStyle:{normal:{color:b.scatterColor||"#1ca2a8",shadowBlur:.6*T,shadowColor:"#333",borderColor:b.strokeColor||"#4a6671",borderWidth:b.strokeWidth||0},emphasis:{borderWidth:b.lightStrokeWidth||0}},zlevel:1};l.generateSeries(A,k,b,V,"top")}if(g.dependenceData.dependenceState&&(!L||!b.hideNoSlideScatter)){var H=g.dependenceData.dependenceState,j=H.seriesName,P=H.dataIndex,_=H.seriesIndex;j.startsWith("normal")?(D.forEach(function(e){e.itemStyle={normal:{opacity:e.seriesIndex===_&&e.dataIndex===P?1:.3},emphasis:{opacity:1}}}),k.forEach(function(e){e.itemStyle={normal:{opacity:.3},emphasis:{opacity:1}}})):j.startsWith("top")&&(k.forEach(function(e){e.itemStyle={normal:{opacity:e.seriesIndex===_&&e.dataIndex===P?1:.3},emphasis:{opacity:1}}}),D.forEach(function(e){e.itemStyle={normal:{opacity:.3},emphasis:{opacity:1}}}))}if(S||r.isValidSlideDependence(b)&&L||(D.forEach(function(e){return e.itemStyle={opacity:1}}),k.forEach(function(e){return e.itemStyle={opacity:1}})),A.forEach(function(e){e.data=l.convertData(e.data,f,b,I,v)}),F.series=A,n.setAnimationOption(F,b),e.chart.setOption(F,!0),!S&&(e.mapSliderIntervalEvent&&clearInterval(e.mapSliderIntervalEvent),L)){var R=function(){try{if(!e.props.chartData&&r.isValidSlideDependence(b))return;var t=b.scatterSlide?k:u;if(b.showInfoUseLabel){for(var a=[],o=Math.min(b.topSlideNum,t.length),i=0;o>i;i++)e.mapSliderIndex++,e.mapSliderIndex>t.length-1&&(e.mapSliderIndex=0),a.push(e.mapSliderIndex);e.chart.dispatchAction({type:"downplay"}),a.forEach(function(a){e.chart.dispatchAction({type:"highlight",seriesIndex:t[a].seriesIndex,dataIndex:t[a].dataIndex})})}else e.mapSliderIndex++,e.mapSliderIndex>t.length-1&&(e.mapSliderIndex=0),e.chart.dispatchAction({type:"hideTip"}),e.chart.dispatchAction({type:"showTip",seriesIndex:t[e.mapSliderIndex].seriesIndex,dataIndex:t[e.mapSliderIndex].dataIndex}),e.chart.dispatchAction({type:"downplay"}),e.chart.dispatchAction({type:"highlight",seriesIndex:t[e.mapSliderIndex].seriesIndex,dataIndex:t[e.mapSliderIndex].dataIndex});var n=z&&r.isValidSlideDependence(b)&&(b.showInfoUseLabel&&1===b.topSlideNum||!b.showInfoUseLabel);if(n){var l=t[e.mapSliderIndex],d=l.seriesName,c=l.seriesIndex,h=l.dataIndex,p=l.rank;z({seriesName:d,seriesIndex:c,dataIndex:h,data:{rank:p},name:s(t,"["+h+"].name")})}}catch(m){}};R(),e.mapSliderIntervalEvent=setInterval(R,1e3*(parseInt(b.slideInterval,10)||3))}}Object.defineProperty(t,"__esModule",{value:!0});var o=e("sugar:utils/i18n.ts"),r=e("sugar:utils/chart-helper.ts"),i=e("sugar:utils/common-helper.ts"),n=e("sugar:utils/animation.ts"),s=e("sugar:node_modules/lodash/get.js"),l=e("sugar:widgets/charts/map/util.ts"),d=e("sugar:widgets/charts/bar-pic/symbols.tsx");t.default=a});
;sugar.define("sugar:widgets/charts/map/map-heatmap.ts",function(e,a){"use strict";function o(e,a,o,i,s,l,m,p,d){e.mapSliderIntervalEvent&&clearInterval(e.mapSliderIntervalEvent);var u=a.chartConfig,c=a.hub,h=12,v="#444";u.openCustomColor&&u.borderColor&&(v=u.borderColor);var g={toolbox:{show:!1},visualMap:s,geo:{map:d,label:{normal:{show:!!u.showProvinceName,color:o,fontSize:u.provinceFontSize||h},emphasis:{show:!0}},roam:!!u.roam,itemStyle:{normal:{areaColor:i,borderColor:v},emphasis:{label:{color:u.mapEmphasisLabelColor||o},areaColor:u.mapEmphasisColor||n.transAreaColor}}},series:[{name:t.default("热力图"),type:"heatmap",coordinateSystem:"geo",pointSize:u.heatmapPointSize||20,blurSize:u.heatmapBlurSize||30,data:n.convertData(p,d,u)}]};if(s&&(s.dimension=2,g.visualMap=s),c.dependenceData.dependenceState){var S=c.dependenceData.dependenceState.dataIndex;g.geo.regions=[{name:S,selected:!0}]}else g.geo.regions=[];r.setAnimationOption(g,u),e.chart.setOption(g,!0)}Object.defineProperty(a,"__esModule",{value:!0});var t=e("sugar:utils/i18n.ts"),r=e("sugar:utils/animation.ts"),n=e("sugar:widgets/charts/map/util.ts");a.default=o});
;sugar.define("sugar:widgets/charts/map/map.tsx",function(e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var t=e("sugar:node_modules/tslib/tslib.js"),r=e("sugar:utils/i18n.ts"),o=e("sugar:node_modules/react/index.js"),i=e("sugar:widgets/charts/chart-manager.tsx"),n=e("sugar:widgets/charts/map/map-ctrl.tsx"),l=e("sugar:widgets/charts/_hoc/echarts.tsx"),s=e("sugar:node_modules/react-mixin/index.js"),p=e("sugar:widgets/charts/_mixin/echarts.tsx"),c=e("sugar:widgets/charts/_hoc/debug/debug.tsx"),m=e("sugar:widgets/charts/_hoc/drill-down/drill-down.tsx"),d=e("sugar:widgets/charts/_hoc/toolbar/toolbar.tsx"),u=e("sugar:widgets/charts/_hoc/chart-zoom/index.tsx"),f=e("sugar:node_modules/lodash/cloneDeep.js"),g=e("sugar:utils/common-helper.ts"),h=e("sugar:utils/export-file/export-csv.ts"),v=e("sugar:widgets/charts/map/geo-coord.ts"),C=e("sugar:node_modules/amis/lib/index.js"),y=e("sugar:widgets/charts/map/register-map-by-geojson-async.ts"),S=e("sugar:utils/export-file/export-excel.ts"),x=e("sugar:utils/animation.ts"),w=e("sugar:widgets/charts/map/util.ts"),b=e("sugar:widgets/charts/map/map-area.ts"),D=e("sugar:widgets/charts/map/map-scatter.ts"),N=e("sugar:widgets/charts/map/map-heatmap.ts"),T=12,I=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.mapSliderIntervalEvent="",a.mapSliderIndex=-1,a.autoFitResult="",a}return t.__extends(a,e),a.prototype.willUnmount=function(){this.mapSliderIntervalEvent&&clearInterval(this.mapSliderIntervalEvent)},a.prototype.getDrillDownParam=function(e){var a,t=this.props.chartConfig.mapType||"area",o=this.props.chartConfig.hierarchyDrillDownOpen;if(("city"===t||"scatter"===t||"cityHeatmap"===t)&&"geo"===e.componentType)return void 0;if("world"===this.autoFitResult&&o)return void C.toast.error(r.default("世界地图不支持层级下钻！"));var i=f(this.props.chartData);i instanceof Array||(i=i.mapData),i.sort(function(e,a){return parseFloat(e.value)>parseFloat(a.value)?-1:1});var n=i[null===(a=e.data)||void 0===a?void 0:a.rank];return n?(n._sugar_dd_default_=n.hasOwnProperty("_sugar_extra")?n._sugar_extra:n.name_sugar_origin||n.name,n):void 0},a.prototype.getDependenceParam=function(e){return{item:this.getDrillDownParam(e),state:{seriesIndex:e.seriesIndex,dataIndex:void 0!==e.dataIndex?e.dataIndex:e.name,seriesName:e.seriesName}}},a.prototype.refresh=function(e,a){var t=this,o=e.chartData,i=e.chartConfig,n=e.theme,l=e.chart,s=e.hub;this.autoFitResult="";var p,c=f(o);p=c instanceof Array?c:c.mapData;var m=i.mapType||"area",d=i.mapScope,u="world",h="",C=-1;if("province"===d)u=i.mapProvince;else if("city"===d)u=i.mapCity;else if("custom"===d&&i.geoJSON)u=i.geoJSON.geoJSONHash,C=i.geoJSON.t;else if("autoFit"===d){var S=v.autoFitMapTargetAndScope(p.map(function(e){return e.name}),m);d=S.mapScope,u=S.mapTarget,this.autoFitResult=d}if("sugar_map_auto_scope"===u){h="dd";var w=l.config.mapAutoScopeField||"name";if(l.drillDownLevel&&s.drillDownData.drillDownItem&&s.drillDownData.drillDownItem.length){var I=s.drillDownData.drillDownItem[s.drillDownData.drillDownItem.length-1];I&&I.item&&I.item[w]&&(u=I.item[w])}else s.dependenceData.dependenceItem&&s.dependenceData.dependenceItem.item&&s.dependenceData.dependenceItem.item[w]?u=s.dependenceData.dependenceItem.item[w]:"province"===d&&i.mdProvince?u=i.mdProvince:"city"===d&&i.mdCity&&(u=i.mdCity)}else if("sugar_map_url_param"===u){h="url";var w=l.config.mapAutoScopeField||"name",F=g.parseCurrentQueryString();F&&F[w]?u=F[w]:"province"===d&&i.mdProvince?u=i.mdProvince:"city"===d&&i.mdCity&&(u=i.mdCity)}y.registerMapAsyncThenRender(d,u,C,h,function(o){var s;if(p&&p.length){if("custom"===d&&!o){var u={title:{text:r.default("请上传geoJSON文件"),textStyle:{color:"#fff",fontSize:"20"}}};return x.setAnimationOption(u,i),t.chart.setOption(u,!0)}p.sort(function(e,a){return parseFloat(e.value)>parseFloat(a.value)?-1:1});var f,h,v=0;p.forEach(function(e,a){if(void 0!==e.value){var t=parseFloat(e.value)||0;(void 0===f||t>f)&&(f=t),(void 0===h||h>t)&&(h=t),v+=t}e.rank=a}),void 0!==h&&f===h&&h--;var C=c.unit||i.unit,y=["#BBD337","#D2B030","#DA9C2E","#E48A3D","#E7741B","#D15122","#D93824","#C71B1B"];i.openCustomColor&&"report"===i.customColorType?y=((null===(s=n.config.chartTheme)||void 0===s?void 0:s.color)||y).slice(0,4):i.openCustomColor&&"custom"===i.customColorType&&i.customColors&&i.customColors.length&&(y=i.customColors.map(function(e){return e.color})),y=y.filter(function(e){return!!e}),i.colorReverse&&y.reverse();var S="#F0F3F4";i.openCustomColor&&i.mapColor&&(S=i.mapColor);var w=l.isDashChart?"#fff":"#333";i.openCustomColor&&i.textColor&&(w=i.textColor);var I=null,F=void 0!==h&&void 0!==f;if(F&&(I={type:"continuous",left:i.vMapLeft||"left",bottom:i.vMapBottom||0,orient:i.vMapOrient||"vertical",show:!i.hideVisualMap,min:h,max:f,inRange:{color:y},text:i.hideVMapText?[""]:c.valueName?[c.valueName]:[r.default("高"),r.default("低")],calculable:!0,itemHeight:parseInt(i.vMapHeight)||80,itemWidth:parseInt(i.vMapWidth)||10,precision:0,textStyle:{color:w,fontSize:i.legendFontSize||T},formatter:function(e){return void 0!==f&&50>f?g.formatDataByType(e,c.dataFormat)+(C||""):g.formatDataByType(parseInt(e,10),c.dataFormat)+(C||"")}}),"piecewise"===i.vMapType&&i.vMapPieces&&i.vMapPieces.length){var _=i.vMapPieces.map(function(e){var a={};return""===e.begin||isNaN(e.begin)||(a.gt=+e.begin),""===e.end||isNaN(e.end)||(a.lte=+e.end),e.color&&(a.color=e.color),a});F&&(I={type:"piecewise",pieces:_,left:i.vMapLeft||"left",bottom:i.vMapBottom||0,orient:i.vMapOrient||"vertical",show:!i.hideVisualMap,textStyle:{color:w,fontSize:i.legendFontSize||T},formatter:function(e,a){var t=C?" "+C:"";return e===-1/0?"≤ "+a+t:1/0===a?"> "+e+t:""+e+t+" - "+a+t}})}"province"===m||"area"===m?b.default(t,e,w,S,I,v,c,p,o,a):"city"===m||"scatter"===m?D.default(t,e,w,S,I,v,c,p,o,a):"cityHeatmap"===m&&N.default(t,e,w,S,I,v,c,p,o,a)}})},a.displayName="Map",a=t.__decorate([m.default,c.default,d.default,u.default,l.default,s.decorate(p.default)],a)}(o.Component);a.default=I;var F=function(e,a){if(!e)return r.default("无数据");var t;if(t=e instanceof Array?e:e.mapData,!t||!t.length)return r.default("无数据");for(var o=0;o<t.length;o++){var i=t[o];if(!i.name)return r.default("第「"+(o+1)+"」项数据中没有名称name字段");if("string"!=typeof i.name)return r.default("第「"+(o+1)+"」项数据中名称name字段不是字符串");if("scatter"===a.mapType||"city"===a.mapType){if(void 0!==i.value&&!g.isNumberic(i.value))return r.default("第「"+(o+1)+"」项数据中value取值不是数字类型")}else if(!g.isNumberic(i.value))return r.default("第「"+(o+1)+"」项数据中value取值不是数字类型");if(("scatter"===a.mapType||"city"===a.mapType)&&void 0!==i.sizeValue&&!g.isNumberic(i.sizeValue))return r.default("第「"+(o+1)+"」项数据中sizeValue取值不是数字类型");if(("scatter"===a.mapType||"city"===a.mapType)&&void 0!==i.type&&!["string","number"].includes(typeof i.type))return r.default("第「"+(o+1)+"」项数据中type取值不是数字类型也是不字符串");if("area"!==a.mapType&&"province"!=a.mapType&&void 0!==i.coord&&!i.coord.length&&2!==i.coord.length&&!g.isArrayOfTypes(i.coord,["number"]))return r.default("第「"+(o+1)+"」项数据中coord字段不是长度为2的经纬度数组");if(void 0!==i.tooltipValues&&!(i.tooltipValues instanceof Array))return r.default("第「"+(o+1)+"」项数据中tooltipValues字段不是数组类型")}return!0},_=function(e,a){var t=w.exportCommon(e);S.exportExcelByRows(t,""+(a.dynamicName||a.name||"export"))},B=function(e,a){var t=w.exportCommon(e);h.exportCsvByRows(t,(a.dynamicName||a.name||"export")+".csv")},E=function(e){return w.exportCommon(e)},M=function(e){var a=e.dataConfig,t=a.dataModel,r=t.name,o=void 0===r?[]:r,i=t.value,n=void 0===i?[]:i,l=t.lng,s=void 0===l?[]:l,p=t.lat,c=void 0===p?[]:p,m=(t.tooltip,a.coordType);return 1!==o.length?!1:("province"!==e.config.mapType&&"area"!==e.config.mapType&&"cityHeatmap"!==e.config.mapType||1===n.length)&&("bind"!==m||1===s.length&&1===c.length)?!0:!1};i.register({kind:"map",type:"map",name:r.default("中国省份色彩"),docName:r.default("地图"),iconClassName:"chart-map-area",enableTemplate:!0,component:I,commonCustomShadow:!0,useChartEigenIndex:[0],mapCluster:"area",variants:[{name:r.default("中国省份气泡"),iconClassName:"chart-map-scatter",mapCluster:"scatter",initialState:{config:{mapScope:"china",mapType:"scatter"}},useChartEigenIndex:[1,2]},{name:r.default("中国省份标签"),iconClassName:"chart-map-label",mapCluster:"label",initialState:{config:{mapType:"scatter",mapScope:"china",showInfoUseLabel:!0,topSlideNum:3,scatterSlide:!0,topCityNum:15,scatterFontColor:"#000",labelContentType:"auto",scatterFontBorderColor:"rgba(240, 8, 89, 1)",scatterFontBackGroundColor:"rgba(255, 255, 255, 0.5)",scatterFontBorderWidth:1,autoLabelContent:"{name}的GDP为{sizeValue}亿, 占总量的{percent}, 在全国排名第 {rank} 位"}},useChartEigenIndex:[1,2]},{name:r.default("中国省份热力"),iconClassName:"chart-map-heat",mapCluster:"heatmap",initialState:{config:{mapScope:"china",mapType:"cityHeatmap"}},useChartEigenIndex:[3]},{name:r.default("省内色彩地图"),iconClassName:"chart-map-province-area",mapCluster:"area",initialState:{config:{mapScope:"province",showProvinceName:!0}},useChartEigenIndex:[0]},{name:r.default("省内气泡地图"),iconClassName:"chart-map-province-scatter",mapCluster:"scatter",initialState:{config:{mapScope:"province",mapType:"scatter",showProvinceName:!0}},useChartEigenIndex:[1,2]},{name:r.default("省内气泡标签"),iconClassName:"chart-map-province-label",mapCluster:"label",initialState:{config:{mapType:"scatter",mapScope:"province",showInfoUseLabel:!0,topSlideNum:3,scatterSlide:!0,topCityNum:15,scatterFontColor:"#000",labelContentType:"auto",scatterFontBorderColor:"rgba(240, 8, 89, 1)",scatterFontBackGroundColor:"rgba(255, 255, 255, 0.5)",scatterFontBorderWidth:1,autoLabelContent:"{name}的GDP为{sizeValue}亿, 占总量的{percent}, 在全省排名第 {rank} 位"}},useChartEigenIndex:[1,2]},{name:r.default("省内热力地图"),iconClassName:"chart-map-province-heat",mapCluster:"heatmap",initialState:{config:{mapScope:"province",mapType:"cityHeatmap"}},useChartEigenIndex:[3]},{name:r.default("市级色彩地图"),iconClassName:"chart-map-city-area",mapCluster:"area",initialState:{config:{mapScope:"city",showProvinceName:!0}},useChartEigenIndex:[0]},{name:r.default("市级气泡地图"),iconClassName:"chart-map-city-scatter",mapCluster:"scatter",initialState:{config:{mapScope:"city",mapType:"scatter",showProvinceName:!0}},useChartEigenIndex:[1,2]},{name:r.default("市级气泡标签"),iconClassName:"chart-map-city-label",mapCluster:"label",initialState:{config:{mapType:"scatter",mapScope:"city",showInfoUseLabel:!0,topSlideNum:3,scatterSlide:!0,topCityNum:15,scatterFontColor:"#000",labelContentType:"auto",scatterFontBorderColor:"rgba(240, 8, 89, 1)",scatterFontBackGroundColor:"rgba(255, 255, 255, 0.5)",scatterFontBorderWidth:1,autoLabelContent:"{name}的GDP为{sizeValue}亿, 占总量的{percent}, 在全市排名第 {rank} 位"}},useChartEigenIndex:[1,2]},{name:r.default("市级热力地图"),iconClassName:"chart-map-city-heat",mapCluster:"heatmap",initialState:{config:{mapScope:"city",mapType:"cityHeatmap"}},useChartEigenIndex:[3]},{name:r.default("世界色彩地图"),iconClassName:"chart-map-world-area",mapCluster:"area",initialState:{config:{mapScope:"world"}},useChartEigenIndex:[0]},{name:r.default("世界气泡地图"),iconClassName:"chart-map-world-scatter",mapCluster:"scatter",initialState:{config:{mapScope:"world",mapType:"scatter"}},useChartEigenIndex:[1,2]},{name:r.default("世界气泡标签"),mapCluster:"label",iconClassName:"chart-map-world-label",initialState:{config:{mapType:"scatter",mapScope:"world",showInfoUseLabel:!0,topSlideNum:3,scatterSlide:!0,topCityNum:15,scatterFontColor:"#000",labelContentType:"auto",scatterFontBorderColor:"rgba(240, 8, 89, 1)",scatterFontBackGroundColor:"rgba(255, 255, 255, 0.5)",scatterFontBorderWidth:1,autoLabelContent:"{name}的GDP为{sizeValue}亿, 占总量的{percent}, 在全世界排名第 {rank} 位"}},useChartEigenIndex:[1,2]},{name:r.default("世界热力地图"),iconClassName:"chart-map-world-heat",mapCluster:"heatmap",initialState:{config:{mapScope:"world",mapType:"cityHeatmap"}},useChartEigenIndex:[3]}],initialState:{dataType:"api",dataApiUrl:n.chartDemoUrl,config:{mapScope:"china",mapAutoScopeField:"_sugar_dd_default_",mapProvince:"anhui",mdProvince:"anhui",mapCity:"beijing",mdCity:"beijing",mapType:"area",minSize:10,maxSize:30,areaHoverEffect:!1,showRank:!0,topCityNum:0,topCoslCnt:0,slideInterval:4,labelContentType:"normal",customColorType:"report",showInfoUseLabel:!1,topSlideNum:1,vMapType:"continuous",vMapLeft:"left",vMapBottom:0,vMapOrient:"vertical",geoJSON:{geoJSONHash:"create",t:0}},dataConfig:{coordType:"auto"}},initialDashboardState:{width:600,height:600,config:{topCityNum:3,topCoslCnt:3}},basicCtrl:n.basicCtrl,dataBindCtrl:n.dataBindCtrl,advancedCtrl:n.advancedCtrl,validate:F,needDashboardAutoFresh:!0,exportCSV:B,exportExcel:_,exportRows:E,drillDownType:"single",canBeDrillChild:!0,drillChildName:r.default("地图-区域色彩/散点/热力"),dataModelPanelShow:[["dataType","dataModel"]],drillDownSuggestDataModelField:"name",canHierarchyDrillDown:!0,loadDataWhenDataModelConfigChange:M,drillDownFieldName:"name",chartEigens:n.chartEigens})});
;sugar.define("sugar:widgets/charts/map-line/map-line.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=e("sugar:node_modules/tslib/tslib.js"),o=e("sugar:utils/i18n.ts"),r=e("sugar:node_modules/react/index.js"),i=e("sugar:widgets/charts/chart-manager.tsx"),n=e("sugar:widgets/charts/map-line/map-line-ctrl.tsx"),l=e("sugar:widgets/charts/_hoc/echarts.tsx"),s=e("sugar:node_modules/react-mixin/index.js"),d=e("sugar:widgets/charts/_mixin/echarts.tsx"),c=e("sugar:widgets/charts/_hoc/debug/debug.tsx"),u=e("sugar:widgets/charts/_hoc/drill-down/drill-down.tsx"),m=e("sugar:widgets/charts/_hoc/toolbar/toolbar.tsx"),p=e("sugar:widgets/charts/_hoc/chart-zoom/index.tsx"),f=e("sugar:node_modules/lodash/cloneDeep.js"),h=e("sugar:utils/common-helper.ts"),v=e("sugar:utils/export-file/export-csv.ts"),g=e("sugar:widgets/charts/map/geo-coord.ts"),y=e("sugar:node_modules/amis/lib/index.js"),S=e("sugar:widgets/charts/map/register-map-by-geojson-async.ts"),C=e("sugar:node_modules/echarts/dist/echarts.js"),x=e("sugar:utils/export-file/export-excel.ts"),w=e("sugar:widgets/charts/map-line/util.ts"),b=e("sugar:widgets/charts/bar-pic/symbols.tsx"),D=e("sugar:widgets/charts/map-layer/scatter/scatter.tsx"),_=12,z=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mapSliderIntervalEvent="",t.mapSliderIndex=-1,t}return a.__extends(t,e),t.prototype.willUnmount=function(){this.mapSliderIntervalEvent&&clearInterval(this.mapSliderIntervalEvent)},t.prototype.getDrillDownParam=function(e){var t=this.props.chartConfig.areaHoverEffect;if(t&&"geo"===e.componentType)return void 0;var a=f(this.props.chartData);a.mapData.sort(function(e,t){return parseFloat(e.value)>parseFloat(t.value)?-1:1}),("effectScatter"===e.seriesType||"scatter"===e.seriesType)&&(e.dataIndex=Math.floor(e.dataIndex/2));var r=e.dataIndex,i=a.mapData[r];return i?(delete i.coords,i._sugar_dd_default_=i.name_sugar_origin||i.name,i):(y.toast.error(o.default("地图当前区域无数据！")),null)},t.prototype.getDependenceParam=function(e){return{item:this.getDrillDownParam(e),state:{seriesIndex:e.seriesIndex,dataIndex:void 0!==e.dataIndex?e.dataIndex:e.name}}},t.prototype.refresh=function(e){var t=e.chartData,a=e.chartConfig,r=e.theme,i=e.chart,n=e.hub,l=f(t),s=l.mapData,d=this.chart,c=a.mapScope,u="china",m="",p=-1;"province"===c?u=a.mapProvince:"city"===c?u=a.mapCity:"custom"===c&&a.geoJSON&&(u=a.geoJSON.geoJSONHash,p=a.geoJSON.t);var v=l.unit||a.unit,g=l.sizeUnit||a.unit1;if("sugar_map_auto_scope"===u){m="dd";var y=i.config.mapAutoScopeField||"name";if(i.drillDownLevel&&n.drillDownData.drillDownItem&&n.drillDownData.drillDownItem.length){var C=n.drillDownData.drillDownItem[n.drillDownData.drillDownItem.length-1];C&&C.item&&C.item[y]&&(u=C.item[y])}else n.dependenceData.dependenceItem&&n.dependenceData.dependenceItem.item&&n.dependenceData.dependenceItem.item[y]?u=n.dependenceData.dependenceItem.item[y]:"province"===c&&a.mdProvince?u=a.mdProvince:"city"===c&&a.mdCity&&(u=a.mdCity)}else if("sugar_map_url_param"===u){m="url";var y=i.config.mapAutoScopeField||"name",x=h.parseCurrentQueryString();x&&x[y]?u=x[y]:"province"===c&&a.mdProvince?u=a.mdProvince:"city"===c&&a.mdCity&&(u=a.mdCity)}S.registerMapAsyncThenRender(c,u,p,m,function(e){var t;if(s&&s.length){if("custom"===c&&!e){var u={title:{text:o.default("请上传geoJSON文件"),textStyle:{color:"#fff",fontSize:"20"}}};return d.setOption(u,!0)}var m,p,f,y,S=0;s.forEach(function(e){if(void 0!==e.value){var t=parseFloat(e.value)||0;(void 0===m||t>m)&&(m=t),(void 0===p||p>t)&&(p=t),S+=t}if(void 0!==e.sizeValue){var t=parseFloat(e.sizeValue)||0;(void 0===f||t>f)&&(f=t),(void 0===y||y>t)&&(y=t)}}),void 0!==p&&p===m&&p--,void 0!==y&&y===f&&y--,s.sort(function(e,t){return parseFloat(e.value)>parseFloat(t.value)?-1:1});var C=["lightgreen","yellow","orange","red"];a.openCustomColor&&"report"===a.customColorType?C=((null===(t=r.config.chartTheme)||void 0===t?void 0:t.color)||C).slice(0,4):a.openCustomColor&&"custom"===a.customColorType&&a.customColors&&a.customColors.length&&(C=a.customColors.map(function(e){return e.color})),C=C.filter(function(e){return!!e});var x=i.isDashChart?"#fff":"#333";a.openCustomColorGeo&&a.textColor&&(x=a.textColor);var w="#eeeeee";a.openCustomColorGeo&&a.mapColor&&(w=a.mapColor);var D="#444";a.openCustomColorGeo&&a.borderColor&&(D=a.borderColor),a.colorReverse&&C.reverse();var z={toolbox:{show:!1}};void 0!==p&&void 0!==m&&(z.visualMap={type:"continuous",left:a.vMapLeft||"left",bottom:a.vMapBottom||0,orient:a.vMapOrient||"vertical",show:!a.hideVisualMap,min:p,max:m,inRange:{color:C},text:a.hideVMapText?[""]:l.valueName?[l.valueName]:[o.default("高"),o.default("低")],calculable:!0,itemHeight:parseInt(a.vMapHeight)||80,itemWidth:parseInt(a.vMapWidth)||10,precision:0,textStyle:{color:x,fontSize:a.legendFontSize||_},formatter:function(e){return void 0!==m&&50>m?h.formatDataByType(e,l.dataFormat)+(v||""):h.formatDataByType(parseInt(e,10),l.dataFormat)+(v||"")}});var I=null;n.dependenceData.dependenceState&&(I=n.dependenceData.dependenceState.dataIndex,s.forEach(function(e,t){e.lineStyle={opacity:t===I?1:.3}}));var T=void 0!==y&&void 0!==f,F=a.minWidth||1,E=a.maxWidth||10,W=a.lineWidth||2,O=[],V=M(s,e,{hasSizeMap:T,sizeMax:f,sizeMin:y,maxWidth:E,minWidth:F,lineWidth:W},a.prefix),A=a.scatterSymbolSize||_;if(O.push({name:o.default("飞线"),type:"lines",coordinateSystem:"geo",blendMode:a.blend?"lighter":void 0,lineStyle:{normal:{color:a.lineColor||"blue",opacity:a.lineOpacity,curveness:a.curveness}},data:V}),a.showEffect&&O.push({type:"lines",animation:!1,coordinateSystem:"geo",blendMode:a.blend?"lighter":void 0,effect:{show:!0,period:a.effectPeriod||3,trailLength:a.trailLength||0,symbol:b.default[a.symbolType||"arrow"],symbolSize:a.effectSymbolSize||10,color:a.symbolColor},lineStyle:{normal:{width:0,color:a.lineColor||"#1917e5",curveness:a.curveness}},data:V,zlevel:1}),a.showScatter){var P=N(V,I);if(P&&P.length){var j=a.imgInputs&&a.imgInputs[0];O.push({name:o.default("气泡"),zlevel:2,type:a.showScatterEffect?"effectScatter":"scatter",coordinateSystem:"geo",symbol:a.imgUrls?"image://"+location.protocol+"//"+(location.host+a.imgUrls):j?"image://"+j:b.default[a.scatterType||"circle"],symbolSize:A,showEffectOn:"render",rippleEffect:{brushType:"stroke"},hoverAnimation:!0,label:{normal:{formatter:"{b}",position:"right",fontSize:a.scatterFontSize||_,show:a.showCityLabel}},itemStyle:{normal:{color:a.scatterColor||"#1ca2a8",borderColor:a.strokeColor||"#4a6671",borderWidth:a.strokeWidth||0},emphasis:{borderWidth:a.lightStrokeWidth||0}},data:P})}}z.geo={map:e,label:{normal:{show:!!a.showProvinceName,color:x,fontSize:a.provinceFontSize||_,formatter:function(e){var t=e.name;if(!t||t.length<=4)return t;var a=/.{4}/g,o=t.match(a);return o.push(t.substring(o.join("").length)),o.join("\n")}},emphasis:{show:!!a.areaHoverEffect}},silent:!a.areaHoverEffect,roam:!!a.roam,itemStyle:{normal:{areaColor:w,borderColor:D},emphasis:{areaColor:"#ffdf4a"}}},z.tooltip={trigger:"item",formatter:function(e){var t=e.name,r=a.tooltipFontSize||_;if("effectScatter"===e.seriesType||"scatter"===e.seriesType)return t?'<div style="font-size: '+r+'px;line-height:1.3">'+t+"</div>":null;var i=s[e.dataIndex];if(void 0!==i.value){var n="";a.tipPercent&&(n="("+(parseFloat(i.value)/S*100).toFixed(2)+"%)");var d=h.formatDataByType(i.value,l.dataFormat)+(v||"")+n;t+="<br> "+(l.valueName||o.default("线条颜色"))+": "+d}return void 0!==i.sizeValue&&(t+="<br>"+(l.sizeValueName||o.default("线条宽度"))+": "+h.formatDataByType(i.sizeValue,l.sizeDataFormat)+(g||"")),a.showRank&&void 0!==i.value&&(t=o.default("【第「"+(e.dataIndex+1)+"」名/「"+s.length+"」】<br>")+t),i&&i.tooltipValues&&i.tooltipValues instanceof Array&&i.tooltipValues.forEach(function(e,a){var o=l.tooltipNames,r=l.tooltipUnits,i=o&&o[a]?o[a]+": ":"",n=r&&r[a]?r[a]:"";t+="<br>"+i+h.formatDataByType(e,l.tooltipDataFormats?l.tooltipDataFormats[a]:"")+n}),'<div style="font-size: '+r+'px;line-height:1.3">'+t+"</div>"}},z.series=O,d.setOption(z,!0)}})},t.displayName="Map-Line",t=a.__decorate([u.default,c.default,m.default,p.default,l.default,s.decorate(d.default)],t)}(r.Component);t.default=z;var I=function(e,t,a){void 0===a&&(a="");var o=null;return e[t]&&(o=e[t]),o||(o=g.getCoordsFromName(t,a)),o||[0,0]},M=function(e,t,o,r){void 0===r&&(r="");var i=[],n=o.hasSizeMap,l=o.sizeMin,s=o.sizeMax,d=o.minWidth,c=o.maxWidth,u=o.lineWidth,m={};if(C&&C.getMap&&"china"!=t){var p=C.getMap(t),f=p&&p.geoJson?p.geoJson:null;f&&f.features&&f.features.map(function(e){if(e.properties&&e.properties.cp&&e.properties.name){var t=e.properties.cp,a=e.properties.name;m[a]=t,/(自治区|自治县|自治州)$/.test(a)?m[a.slice(0,-3)]=t:["市","区","县","盟"].includes(a[a.length-1])&&(m[a.slice(0,-1)]=t)}})}return e.forEach(function(e){var t=u,o=e.name,p=e.value,f=e.locations,h=e.sizeValue;n&&void 0!==h&&!isNaN(+h)&&(t=D.getSize(d,c,l,s,+h));var v={name:o,value:p,locations:f,lineStyle:e.lineStyle?a.__assign(a.__assign({},e.lineStyle),{width:t}):{width:t}};if(e.coords&&e.coords instanceof Array)v.coords=e.coords,i.push(v);else if(e.locations&&e.locations instanceof Array){var g=I(m,e.locations[0],r),y=I(m,e.locations[1],r);v.coords=[g,y],i.push(v)}}),i},N=function(e,t){var o=[];return e.forEach(function(e,r){var i;null!==t&&(i=t===r?{opacity:1}:{opacity:.3});var n=e.locations,l=e.coords,s=e.value;l&&l[0]&&l[1]&&o.push({name:n&&n.length&&n[0]||"",value:a.__spreadArrays(l[0],[s]),itemStyle:i},{name:n&&n.length&&n[1]||"",value:a.__spreadArrays(l[1],[s]),itemStyle:i})}),o},T=function(e){if(!e)return o.default("无数据");var t=e.mapData;if(!t||!t.length)return o.default("无数据");for(var a=0;a<t.length;a++){var r=t[a];if(!r.name)return o.default("第「"+(a+1)+"」项数据中没有名称name字段");if("string"!=typeof r.name)return o.default("第「"+(a+1)+"」项数据中名称name字段不是字符串");if(void 0!==r.value&&!h.isNumberic(r.value))return o.default("第「"+(a+1)+"」项数据中value取值不是数字类型");if(void 0!==r.sizeValue&&!h.isNumberic(r.sizeValue))return o.default("第「"+(a+1)+"」项数据中sizeValue取值不是数字类型");if(void 0!==r.coords&&!r.coords.length&&2!==r.coords.length&&2!==r.coords[0].length&&2!==r.coords[1].length&&!h.isArrayOfTypes(r.coords[0],["number"])&&!h.isArrayOfTypes(r.coords[1],["number"]))return o.default("第「"+(a+1)+"」项数据中coords取值应为长度为2且每一项都应该是长度为2的经纬度数组");if(void 0!==r.locations&&!r.locations.length&&2!==r.locations.length&&!h.isArrayOfTypes(r.locations,["string"]))return o.default("第「"+(a+1)+"」项数据中locations取值应为长度为2的字符串数组");if(void 0!==r.tooltipValues&&!(r.tooltipValues instanceof Array))return o.default("第「"+(a+1)+"」项数据中tooltipValues字段不是数组类型")}return!0},F=function(e,t){var a=w.exportCommon(e);x.exportExcelByRows(a,""+(t.dynamicName||t.name||"export"))},E=function(e,t){var a=w.exportCommon(e);v.exportCsvByRows(a,(t.dynamicName||t.name||"export")+".csv")},W=function(e){return w.exportCommon(e)},O=function(e){var t=e.dataConfig,a=t.dataModel,o=a.sourceNode,r=void 0===o?[]:o,i=a.targetNode,n=void 0===i?[]:i,l=(a.name,a.value,a.size,a.lng),s=void 0===l?[]:l,d=a.lat,c=void 0===d?[]:d,u=a.lng2,m=void 0===u?[]:u,p=a.lat2,f=void 0===p?[]:p,h=(a.tooltip,t.coordType);return 1!==r.length||1!==n.length?!1:"bind"!==h||1===s.length&&1===c.length&&1===m.length&&1===f.length?!0:!1};i.register({kind:"map",type:"map-line",name:o.default("中国省份飞线"),docName:o.default("飞线图"),iconClassName:"chart-map-line",enableTemplate:!0,component:z,commonCustomShadow:!0,mapCluster:"flyline",variants:[{name:o.default("省内飞线地图"),iconClassName:"chart-map-province-line",mapCluster:"flyline",initialState:{config:{mapScope:"province"}}},{name:o.default("市级飞线地图"),iconClassName:"chart-map-city-line",mapCluster:"flyline",initialState:{config:{mapScope:"city"}}},{name:o.default("世界飞线地图"),iconClassName:"chart-map-world-line",mapCluster:"flyline",initialState:{config:{mapScope:"world"}}}],initialState:{dataType:"api",dataApiUrl:n.chartDemoUrl,width:4,config:{mapScope:"china",mapAutoScopeField:"_sugar_dd_default_",mapProvince:"anhui",mdProvince:"anhui",mapCity:"beijing",mdCity:"beijing",areaHoverEffect:!1,scatterSlide:!0,customColorType:"report",vMapLeft:"left",vMapBottom:0,vMapOrient:"vertical",effectPeriod:4,trailLength:.3,effectSymbolSize:3,lineWidth:1,minWidth:1,maxWidth:4,imgUrls:"",imgInputs:[""],lineOpacity:.3,curveness:.2,showEffect:!0,showScatter:!0,scatterSymbolSize:12,showScatterEffect:!0,showCityLabel:!0,geoJSON:{geoJSONHash:"create",t:0}},dataConfig:{coordType:"auto"}},initialDashboardState:{width:600,height:600,config:{openCustomColorGeo:!0,mapColor:"rgba(32, 19, 103, 1)"}},basicCtrl:n.basicCtrl,dataBindCtrl:n.dataBindCtrl,advancedCtrl:n.advancedCtrl,validate:T,needDashboardAutoFresh:!0,exportCSV:E,exportExcel:F,exportRows:W,drillDownType:"single",canBeDrillChild:!0,drillChildName:o.default("地图飞线图"),dataModelPanelShow:[["dataType","dataModel"]],drillDownSuggestDataModelField:"name",loadDataWhenDataModelConfigChange:O,chartEigens:n.chartEigens})});
;sugar.define("sugar:widgets/charts/3d-map-line/3d-map-line-ctrl.tsx",function(e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.advancedCtrl=a.dataBindCtrl=a.chartEigens=a.chartDemoUrl=a.basicCtrl=void 0;var t=e("sugar:node_modules/tslib/tslib.js"),n=e("sugar:utils/i18n.ts"),l=e("sugar:node_modules/react/index.js"),o=e("sugar:widgets/ctrl-panel/data-bind-ctrl/index.tsx"),d=e("sugar:widgets/object-array-editor/object-array-editor.tsx"),i=e("sugar:widgets/amis-inline-switch.tsx"),r=e("sugar:widgets/data-model/data-model-field-holder/data-model-field-holder.tsx"),m=[{type:"color",name:n.default("颜色"),key:"color",defaultValue:"#23b7e5"}],c=function(e){return[{type:"divider"},{type:"fieldset",collapsed:!0,title:n.default("自定义配色"),collapsable:!0,headingClassName:"fieldset-title",controls:[i.amisInlineSwitch("config.openCustomColor",n.default("开启自定义配色")),{name:"config.mapCustomColors",hiddenOn:"!data.config.openCustomColor || config.mapType === 'globe'",children:function(a){var o=a.onChange,i=a.value;return l.createElement(d.default,t.__assign({chartFrontendId:e.chart.frontendId},{onChange:o,value:i},{containerClassName:"form-group form-item",label:n.default("地图颜色（可增加多个配色项，地图随机染色到各行政区）"),addTipText:n.default("地图颜色"),cols:m}))}},{name:"config.lineCustomColors",hiddenOn:"!data.config.openCustomColor",children:function(a){var o=a.onChange,i=a.value;return l.createElement(d.default,t.__assign({},{onChange:o,value:i},{chartFrontendId:e.chart.frontendId,containerClassName:"form-group form-item",label:n.default("飞线颜色（可增加多个配色项，依次对应各类别的飞线）"),addTipText:n.default("飞线颜色"),cols:m}))}},{type:"color",name:"config.borderColor",label:n.default("行政区边界颜色"),hiddenOn:"!data.config.openCustomColor || config.mapType === 'globe'"},{type:"color",name:"config.backgroundColor",format:"rgba",hiddenOn:"!data.config.openCustomColor",label:n.default("图表背景颜色")},{type:"color",name:"config.textColor",format:"rgba",label:n.default("文字颜色"),hiddenOn:"!data.config.openCustomColor"}]}]};a.basicCtrl=function(e){return c(e)};var u="/openapi/demo/chart?type=map3DLine";a.chartDemoUrl="$CUR_HOST/openapi/demo/chart?type=map3DLine",a.chartEigens=[{field:[{name:"lng",type:"d",subType:"lng",minCount:1,maxCount:1},{name:"lat",type:"d",subType:"lat",minCount:1,maxCount:1},{name:"lng2",type:"d",subType:"lng",minCount:1,maxCount:1},{name:"lat2",type:"d",subType:"lat",minCount:1,maxCount:1},{name:"name",type:"d",minCount:0,maxCount:1}]}],a.dataBindCtrl=function(e){var a=o.getDebugAndRefreshBtn({loadData:e.chart.loadData,loadDebugData:e.chart.loadDebugData,dataType:e.chart.dataType,refreshText:n.default("刷新图表")}),l=o.getDataBindCommon({frontendId:e.chart.frontendId,dataTypeOptions:["dataModel","api","sql","json"],api:{demoUrl:u},loadData:e.chart.loadData,loadDebugData:e.chart.loadDebugData,curUrl:e.chart.dataApiUrl}),d=e.chart.dataModelHash||"",i=e.sqlModelStore.detailMap.mapByHash.get(d),m=o.generateSQLFieldList(i),c=t.__spreadArrays([r.getDataModelFieldHolder({name:"lng",label:n.default("起点经度"),config:{dataModelHash:d,holderId:e.chart.frontendId+"-lng",maxCount:1,onlyDimension:!0}}),r.getDataModelFieldHolder({name:"lat",label:n.default("起点纬度"),config:{dataModelHash:d,holderId:e.chart.frontendId+"-lat",maxCount:1,onlyDimension:!0}}),r.getDataModelFieldHolder({name:"lng2",label:n.default("终点经度"),config:{dataModelHash:d,holderId:e.chart.frontendId+"-lng2",maxCount:1,onlyDimension:!0}}),r.getDataModelFieldHolder({name:"lat2",label:n.default("终点纬度"),config:{dataModelHash:d,holderId:e.chart.frontendId+"-lat2",maxCount:1,onlyDimension:!0}}),r.getDataModelFieldHolder({name:"name",label:n.default("飞线分类（选填）"),config:{dataModelHash:d,holderId:e.chart.frontendId+"-name",maxCount:1,onlyDimension:!0}}),o.commonFilterForDataModel(d),o.commonBindUrlParamForDataModel(d)],r.getChartConditionsHolder(d,e.chart),[o.commonLimitForDataModel,{type:"select",name:"dataConfig.category",hiddenOn:"data.dataType != 'sql'",label:n.default("类别字段"),placeholder:n.default("请选择，如只有一类可不填"),options:m},{type:"select",name:"dataConfig.sourceLon",hiddenOn:"data.dataType != 'sql'",label:n.default("源经度字段"),placeholder:n.default("请选择"),options:m},{type:"select",name:"dataConfig.sourceLat",hiddenOn:"data.dataType != 'sql'",label:n.default("源纬度字段"),placeholder:n.default("请选择"),options:m},{type:"select",name:"dataConfig.targetLon",hiddenOn:"data.dataType != 'sql'",label:n.default("目的地经度字段"),placeholder:n.default("请选择"),options:m},{type:"select",name:"dataConfig.targetLat",hiddenOn:"data.dataType != 'sql'",label:n.default("目的地纬度字段"),placeholder:n.default("请选择"),options:m}]);return l.concat(c,a)};var s=([{label:n.default("地形"),value:"terrain"},{label:n.default("卫星"),value:"satellite"},{label:n.default("行政区"),value:"district"}],[{label:n.default("世界地图"),value:"world"},{label:n.default("中国地图"),value:"china"}]);a.advancedCtrl=function(e){return t.__spreadArrays([{type:"text",name:"config.targetCoord",label:n.default("初始定位（格式：经度&纬度）"),hiddenOn:"config.mapType === 'geo3D'"},{type:"radios",name:"config.mapRegionType",label:n.default("地图区域"),inline:!1,options:s,hiddenOn:"config.mapType === 'globe'"},{type:"number",name:"config.regionHeight",label:n.default("地图厚度"),hiddenOn:"config.mapType === 'globe'"},i.amisInlineSwitch("config.lineEffect",n.default("飞线动效")),i.amisInlineSwitch("config.showLegend",n.default("显示图例")),{type:"number",name:"config.mLight",label:n.default("主光强"),min:0,step:.1,max:1},{type:"number",name:"config.eLight",label:n.default("环境光强"),min:0,step:.1,max:1,hiddenOn:"config.mapType === 'geo3D'"},{type:"number",name:"config.autoRotateSpeed",label:n.default("自转速度"),min:0,step:10,max:100,hiddenOn:"config.mapType === 'geo3D'"},i.amisInlineSwitch("config.zoom",n.default("开启地图缩放")),i.amisInlineSwitch("config.rotate",n.default("开启地图拖拽")),{type:"number",name:"config.distance",label:n.default("视点距离"),min:10,step:10,max:1e3},{type:"number",name:"config.alpha",label:n.default("视点角度"),min:0,step:10,max:90,hiddenOn:"config.mapType === 'globe'"},i.amisInlineSwitch("config.showAtomsphere",n.default("显示大气层"),"config.mapType === 'geo3D'"),i.amisInlineSwitch("config.showBoundary",n.default("显示国界线"),"config.mapType === 'geo3D'")],c(e))}});
;sugar.define("sugar:widgets/charts/3d-map-line/3d-map-line.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.regions=void 0;var a=e("sugar:node_modules/tslib/tslib.js"),o=e("sugar:utils/i18n.ts"),r=e("sugar:node_modules/react/index.js"),n=e("sugar:widgets/charts/chart-manager.tsx"),i=e("sugar:widgets/charts/3d-map-line/3d-map-line-ctrl.tsx"),l=e("sugar:widgets/charts/_hoc/echarts.tsx"),s=e("sugar:node_modules/react-mixin/index.js"),d=e("sugar:widgets/charts/_mixin/echarts.tsx"),g=e("sugar:widgets/charts/_hoc/debug/debug.tsx"),c=e("sugar:widgets/charts/_hoc/drill-down/drill-down.tsx"),u=e("sugar:widgets/charts/_hoc/toolbar/toolbar.tsx"),h=e("sugar:widgets/charts/_hoc/chart-zoom/index.tsx"),m=e("sugar:node_modules/lodash/cloneDeep.js"),p=e("sugar:utils/export-file/export-csv.ts"),f=e("sugar:node_modules/echarts/dist/echarts.js"),y=e("sugar:utils/common-helper.ts"),C=e("sugar:utils/export-file/export-excel.ts"),v=f.getMap("world"),b=v.geoJson.features.map(function(e){return{name:e.properties.name,itemStyle:{color:"#fff"}}});v=f.getMap("china"),b=b.concat(v.geoJson.features.map(function(e){return{name:e.properties.name,itemStyle:{color:"#fff"}}})),t.regions=b;var x=function(e){function o(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(o,e),o.prototype.refresh=function(e){var a,o=e.chartData,r=e.chartConfig,n=e.theme,i=e.chart,l=m(o),s=this.chart,d=r.targetCoord.split("&").map(function(e){return Number(e)}),g=r.mapType,c=r.backgroundColor,u=r.eLight,h=r.mLight,p=r.autoRotateSpeed,y=r.zoom,C=r.rotate,v=r.distance,b=r.lineEffect,x=r.mapRegionType,w=r.borderColor,S=r.alpha,_=r.openCustomColor,D=r.mapCustomColors,T=r.lineCustomColors,M=r.textColor,R=r.showLegend,A=(null===(a=n.config.chartTheme)||void 0===a?void 0:a.color)||["#fff"];_&&D&&D.length&&(A=D.map(function(e){return e.color}));var L=l.map(function(e){return{type:"lines3D",name:e.name,coordinateSystem:g,blendMode:"lighter",effect:{show:b,trailWidth:2,trailLength:.15,trailOpacity:1},lineStyle:{width:1,opacity:.1},data:e.data}}),N={legend:{show:R,left:"left",data:l.map(function(e){return e.name}),orient:"vertical",textStyle:{color:_&&M?M:i.isDashChart?"#fff":"#333"}},backgroundColor:_&&c?c:"",series:L};if(_&&T&&T.length&&(N.color=T.map(function(e){return e.color})),"globe"===g){if(N.globe={baseTexture:"/static/img-charts/world.topo.bathy.200407.3x5400x2700.color.jpg",heightTexture:"/static/img-charts/gebco_08_rev_elev_4096x2048.jpg",displacementScale:.06,realisticMaterial:{roughness:"/static/img-charts/ocean_mask.png"},shading:"realistic",light:{ambient:{intensity:u},main:{intensity:h}},viewControl:{autoRotate:p>0,autoRotateSpeed:p,targetCoord:d,rotateSensitivity:C?1:0,zoomSensitivity:y?1:0,distance:v,minAlpha:-360,maxAlpha:360}},r.showAtomsphere&&(N.globe.atmosphere={enable:!0,color:"#ffffff",offset:6,glowPower:6,innerGlowPower:1.6}),r.showBoundary){var j=document.createElement("canvas"),E=f.init(j,{},{width:2048,height:1024});E.setOption({geo:{type:"map",map:"world",top:0,left:0,right:0,bottom:0,boundingCoords:[[-180,90],[180,-90]],itemStyle:{normal:{areaColor:"transparent",borderColor:"#fff"}},label:{show:!1}}}),N.globe.layers=[{type:"blend",texture:E}]}}else{N.geo3D={map:x,instancing:!0,shading:"realistic",light:{main:{intensity:h||.5,alpha:135,beta:-10}},realisticMaterial:{roughness:.6,metalness:.7},viewControl:{distance:v,alpha:S,rotateSensitivity:C?1:0,zoomSensitivity:y?1:0,panSensitivity:0},itemStyle:{borderColor:_?w:"",borderWidth:_&&w?1:0},regionHeight:r.regionHeight||2};for(var B=0,k=0,O=t.regions;k<O.length;k++){var z=O[k];z.itemStyle.color=A[B%A.length],B+=1}N.geo3D.regions=t.regions}s.setOption(N,!0)},o.displayName="Map3DLine",o=a.__decorate([c.default,g.default,u.default,h.default,l.default,s.decorate(d.default)],o)}(r.Component);t.default=x;var w=function(e){if(!e||!e.length)return o.default("无数据");for(var t=0;t<e.length;t++){var a=e[t];if(!a.name)return o.default("第「"+(t+1)+"」项数据中缺少name");var r=a.data;if(!r)return o.default("第「"+(t+1)+"」项数据中缺少data");for(var n=0;n<r.length;n++){var i=r[n];if(2!==i.length||2!==i.length||2!==i.length)return o.default("第「"+(t+1)+"」项数据中的第「"+(n+1)+"」条线缺少源或目的地信息");if(!y.isArrayOfTypes(i[0],["number","numberString"])||!y.isArrayOfTypes(i[1],["number","numberString"]))return o.default("第「"+(t+1)+"」项数据中的第「"+(n+1)+"」条线中经纬度取值不是数字类型")}}return!0},S=function(e,t){var a=T(e);C.exportExcelByColumns(a,""+(t.dynamicName||t.name||"export"))},_=function(e,t){var a=T(e);p.exportCsvByColumns(a,(t.dynamicName||t.name||"export")+".csv")},D=function(e){var t=T(e);return C.exportRowsByColumns(t)},T=function(e){var t=[];if(e&&e.data&&e.data.length){var a=[],o=[],r=[],n=[],i=[];e.data.forEach(function(e){for(var t=0;t<e.data.length;t++)a.push(e.name),o.push(e.data[t][0][0]),r.push(e.data[t][0][1]),n.push(e.data[t][1][0]),i.push(e.data[t][1][1])}),t=[a,o,r,n,i]}return t},M=function(e){var t=e.dataConfig.dataModel,a=(t.name,t.lng),o=void 0===a?[]:a,r=t.lat,n=void 0===r?[]:r,i=t.lng2,l=void 0===i?[]:i,s=t.lat2,d=void 0===s?[]:s;return 1!==o.length||1!==n.length||1!==l.length||1!==d.length?!1:!0};n.register({kind:"map",type:"3d-map-line",name:o.default("3D地球飞线"),docName:o.default("3D地图飞线"),iconClassName:"chart-3d-globe-line",enableTemplate:!0,component:x,variants:[{name:o.default("3D世界飞线"),iconClassName:"chart-3d-geo-line",initialState:{config:{mapType:"geo3D",distance:100,mapRegionType:"world",mLight:.5,alpha:40}}},{name:o.default("3D中国飞线"),iconClassName:"chart-3d-china-line",initialState:{config:{mapType:"geo3D",distance:100,mapRegionType:"china",mLight:.5,alpha:40}}}],initialState:{dataType:"api",dataApiUrl:i.chartDemoUrl,config:{mapType:"globe",showAtomsphere:!0,targetCoord:"116.46&39.92",mapImgType:"terrain",eLight:.6,mLight:.4,autoRotateSpeed:10,zoom:!0,rotate:!0,distance:200,lineEffect:!0,openCustomColor:!0,backgroundColor:"rgba(37, 37, 37, 1)"},dataConfig:{needAutoRefresh:!1}},initialDashboardState:{width:600,height:600,config:{openCustomColor:!1,backgroundColor:""}},basicCtrl:i.basicCtrl,dataBindCtrl:i.dataBindCtrl,advancedCtrl:i.advancedCtrl,canBeDrillChild:!0,drillChildName:o.default("3D地图飞线"),validate:w,needDashboardAutoFresh:!0,exportCSV:_,exportExcel:S,exportRows:D,dataModelPanelShow:[["dataType","dataModel"]],loadDataWhenDataModelConfigChange:M,chartEigens:i.chartEigens})});
;sugar.define("sugar:widgets/charts/3d-map-bar/3d-map-bar-ctrl.tsx",function(e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.advancedCtrl=a.dataBindCtrl=a.chartEigens=a.chartDemoUrl=a.basicCtrl=void 0;var t=e("sugar:node_modules/tslib/tslib.js"),n=e("sugar:utils/i18n.ts"),l=e("sugar:node_modules/react/index.js"),o=e("sugar:widgets/ctrl-panel/data-bind-ctrl/index.tsx"),d=e("sugar:widgets/object-array-editor/object-array-editor.tsx"),i=e("sugar:widgets/amis-inline-switch.tsx"),r=e("sugar:widgets/data-model/data-model-field-holder/data-model-field-holder.tsx"),u=[{type:"color",name:n.default("颜色"),key:"color",defaultValue:"#23b7e5"}],s=function(e){return[{type:"divider"},{type:"fieldset",collapsed:!0,title:n.default("自定义配色"),collapsable:!0,headingClassName:"fieldset-title",controls:[i.amisInlineSwitch("config.openCustomColor",n.default("开启自定义配色")),{name:"config.mapCustomColors",hiddenOn:"!data.config.openCustomColor || config.mapType === 'globe'",children:function(a){var o=a.onChange,i=a.value;return l.createElement(d.default,t.__assign({},{onChange:o,value:i},{chartFrontendId:e.chart.frontendId,containerClassName:"form-group form-item",label:n.default("地图颜色（可增加多个配色项，地图随机染色到各行政区）"),addTipText:n.default("地图颜色"),cols:u}))}},{name:"config.barCustomColors",hiddenOn:"!data.config.openCustomColor",children:function(a){var o=a.onChange,i=a.value;return l.createElement(d.default,t.__assign({},{onChange:o,value:i},{chartFrontendId:e.chart.frontendId,containerClassName:"form-group form-item",label:n.default("柱子色系（可增加多个配色项，依次对应柱子颜色渐变）"),addTipText:n.default("柱子色系"),cols:u}))}},{type:"color",name:"config.borderColor",label:n.default("行政区边界颜色"),hiddenOn:"!data.config.openCustomColor || config.mapType === 'globe'"},{type:"color",name:"config.backgroundColor",format:"rgba",hiddenOn:"!data.config.openCustomColor",label:n.default("图表背景颜色")},{type:"color",name:"config.textColor",format:"rgba",label:n.default("文字颜色"),hiddenOn:"!data.config.openCustomColor"}]}]};a.basicCtrl=function(e){return s(e)};var c="/openapi/demo/chart?type=map3DBar";a.chartDemoUrl="$CUR_HOST/openapi/demo/chart?type=map3DBar",a.chartEigens=[{field:[{name:"lng",type:"d",subType:"lng",minCount:1,maxCount:1},{name:"lat",type:"d",subType:"lat",minCount:1,maxCount:1},{name:"value",type:"m",minCount:1,maxCount:1}]}],a.dataBindCtrl=function(e){var a=o.getDebugAndRefreshBtn({loadData:e.chart.loadData,loadDebugData:e.chart.loadDebugData,dataType:e.chart.dataType,refreshText:n.default("刷新图表")}),l=o.getDataBindCommon({frontendId:e.chart.frontendId,dataTypeOptions:["dataModel","api","sql","json"],api:{demoUrl:c},loadData:e.chart.loadData,loadDebugData:e.chart.loadDebugData,curUrl:e.chart.dataApiUrl}),d=e.chart.dataModelHash||"",i=e.sqlModelStore.detailMap.mapByHash.get(d),u=o.generateSQLFieldList(i),s=t.__spreadArrays([r.getDataModelFieldHolder({name:"lng",label:n.default("经度"),config:{dataModelHash:d,holderId:e.chart.frontendId+"-lng",maxCount:1,onlyDimension:!0}}),r.getDataModelFieldHolder({name:"lat",label:n.default("纬度"),config:{dataModelHash:d,holderId:e.chart.frontendId+"-lat",maxCount:1,onlyDimension:!0}}),r.getDataModelFieldHolder({name:"value",label:n.default("取值"),config:{dataModelHash:d,holderId:e.chart.frontendId+"-value",maxCount:1,onlyMeasure:!0}}),o.commonFilterForDataModel(d),o.commonBindUrlParamForDataModel(d)],r.getChartConditionsHolder(d,e.chart),[o.commonLimitForDataModel,{type:"select",name:"dataConfig.lon",hiddenOn:"data.dataType != 'sql'",label:n.default("经度字段"),placeholder:n.default("请选择"),options:u},{type:"select",name:"dataConfig.lat",hiddenOn:"data.dataType != 'sql'",label:n.default("纬度字段"),placeholder:n.default("请选择"),options:u},{type:"select",name:"dataConfig.value",hiddenOn:"data.dataType != 'sql'",label:n.default("取值字段"),placeholder:n.default("请选择"),options:u}]);return l.concat(s,a)};var m=([{label:n.default("地形"),value:"terrain"},{label:n.default("卫星"),value:"satellite"},{label:n.default("行政区"),value:"district"}],[{label:n.default("世界地图"),value:"world"},{label:n.default("中国地图"),value:"china"}]);a.advancedCtrl=function(e){return t.__spreadArrays([{type:"text",name:"config.targetCoord",label:n.default("初始定位（格式：经度&纬度）"),hiddenOn:"config.mapType === 'geo3D'"},{type:"radios",name:"config.mapRegionType",label:n.default("地图区域"),inline:!1,options:m,hiddenOn:"config.mapType === 'globe'"},{type:"number",name:"config.barSize",label:n.default("柱子粗细"),min:1,step:1},i.amisInlineSwitch("config.customVisualMap",n.default("自定义柱子渐变范围")),{type:"number",name:"config.visualMin",label:n.default("开始映射渐变的最小值"),min:0,hiddenOn:"config.customVisualMap === false"},{type:"number",name:"config.visualMax",label:n.default("开始映射渐变的最大值"),min:0,hiddenOn:"config.customVisualMap === false"},i.amisInlineSwitch("config.showVisualMap",n.default("展示visualMap")),{type:"number",name:"config.eLight",label:n.default("环境光强"),min:0,step:.1,max:1,hiddenOn:"config.mapType === 'geo3D'"},{type:"number",name:"config.autoRotateSpeed",label:n.default("自转速度"),min:0,step:10,max:100,hiddenOn:"config.mapType === 'geo3D'"},i.amisInlineSwitch("config.zoom",n.default("开启地图缩放")),i.amisInlineSwitch("config.rotate",n.default("开启地图拖拽")),{type:"number",name:"config.distance",label:n.default("视点距离"),min:10,step:10,max:1e3},{type:"number",name:"config.alpha",label:n.default("视点角度"),min:0,step:10,max:90,hiddenOn:"config.mapType === 'globe'"},{type:"number",name:"config.regionHeight",label:n.default("地图厚度")},i.amisInlineSwitch("config.showAtomsphere",n.default("显示大气层"),"config.mapType === 'geo3D'"),i.amisInlineSwitch("config.showBoundary",n.default("显示国界线"),"config.mapType === 'geo3D'")],s(e))}});
;sugar.define("sugar:widgets/charts/3d-map-bar/3d-map-bar.tsx",function(e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var t=e("sugar:node_modules/tslib/tslib.js"),o=e("sugar:utils/i18n.ts"),r=e("sugar:node_modules/react/index.js"),i=e("sugar:widgets/charts/chart-manager.tsx"),n=e("sugar:widgets/charts/3d-map-bar/3d-map-bar-ctrl.tsx"),s=e("sugar:widgets/charts/_hoc/echarts.tsx"),l=e("sugar:node_modules/react-mixin/index.js"),d=e("sugar:widgets/charts/_mixin/echarts.tsx"),u=e("sugar:node_modules/echarts/dist/echarts.js"),c=e("sugar:widgets/charts/_hoc/debug/debug.tsx"),g=e("sugar:widgets/charts/_hoc/toolbar/toolbar.tsx"),h=e("sugar:widgets/charts/_hoc/chart-zoom/index.tsx"),m=e("sugar:node_modules/lodash/cloneDeep.js"),p=e("sugar:utils/export-file/export-csv.ts"),f=e("sugar:widgets/charts/3d-map-line/3d-map-line.tsx"),b=e("sugar:utils/common-helper.ts"),v=e("sugar:utils/export-file/export-excel.ts"),C=e("sugar:widgets/charts/_hoc/drill-down/drill-down.tsx"),x=function(e){function a(){return null!==e&&e.apply(this,arguments)||this}return t.__extends(a,e),a.prototype.refresh=function(e){var a,t=e.chartData,o=e.chartConfig,r=e.theme,i=m(t),n=this.chart,s=o.targetCoord.split("&").map(function(e){return Number(e)}),l=o.mapType,d=o.backgroundColor,c=o.eLight,g=o.mLight,h=o.autoRotateSpeed,p=o.zoom,b=o.rotate,v=o.borderColor,C=o.distance,x=o.mapRegionType,y=o.alpha,w=o.barSize,S=o.customVisualMap,_=o.visualMin,D=o.visualMax,M=o.openCustomColor,T=o.mapCustomColors,R=o.textColor,z=o.barCustomColors,A=o.showVisualMap,N=(null===(a=r.config.chartTheme)||void 0===a?void 0:a.color)||["#fff"];M&&T&&T.length&&(N=T.map(function(e){return e.color}));var j=["#313695","#4575b4","#74add1","#abd9e9","#e0f3f8","#ffffbf","#fee090","#fdae61","#f46d43","#d73027","#a50026"];M&&z&&z.length&&(j=z.map(function(e){return e.color}));var B=0,E=0;S?(B=D||0,E=_||0):(B=0,E=parseFloat(i[0][2])||0,i.forEach(function(e){var a=parseFloat(e[2])||0;a>B&&(B=a),E>a&&(E=a)}));var k={backgroundColor:M&&d?d:"",visualMap:{min:E,max:B,show:A,calculable:!0,realtime:!1,textStyle:{color:M&&R?R:"#fff"},outOfRange:{colorAlpha:0},inRange:{color:j}},series:{type:"bar3D",coordinateSystem:l,blendMode:"lighter",bevelSize:.3,barSize:w/100,silent:!0,data:i}};if("globe"===l){if(k.globe={baseTexture:"/static/img-charts/world.topo.bathy.200407.3x5400x2700.color.jpg",heightTexture:"/static/img-charts/gebco_08_rev_elev_4096x2048.jpg",displacementScale:.06,realisticMaterial:{roughness:"/static/img-charts/ocean_mask.png"},shading:"realistic",light:{ambient:{intensity:c},main:{intensity:g}},viewControl:{autoRotate:h>0,autoRotateSpeed:h,targetCoord:s,rotateSensitivity:b?1:0,zoomSensitivity:p?1:0,distance:C,minAlpha:-360,maxAlpha:360}},o.showAtomsphere&&(k.globe.atmosphere={enable:!0,color:"#ffffff",offset:6,glowPower:6,innerGlowPower:1.6}),o.showBoundary){var L=document.createElement("canvas"),O=u.init(L,{},{width:2048,height:1024});O.setOption({geo:{type:"map",map:"world",top:0,left:0,right:0,bottom:0,boundingCoords:[[-180,90],[180,-90]],itemStyle:{normal:{areaColor:"transparent",borderColor:"#fff"}},label:{show:!1}}}),k.globe.layers=[{type:"blend",texture:O}]}}else{k.geo3D={map:x,instancing:!0,shading:"realistic",light:{main:{intensity:g,alpha:135,beta:-10}},realisticMaterial:{roughness:.6,metalness:.7},viewControl:{distance:C,alpha:y,rotateSensitivity:b?1:0,zoomSensitivity:p?1:0,panSensitivity:0},itemStyle:{borderColor:M?v:"",borderWidth:M&&v?1:0},regionHeight:o.regionHeight||2};for(var V=0,P=0,F=f.regions;P<F.length;P++){var H=F[P];H.itemStyle.color=N[V%N.length],V+=1}k.geo3D.regions=f.regions}n.setOption(k,!0)},a.displayName="Map3DBar",a=t.__decorate([C.default,c.default,g.default,h.default,s.default,l.decorate(d.default)],a)}(r.Component);a.default=x;var y=function(e){if(!e||!e.length)return o.default("无数据");for(var a=0;a<e.length;a++){var t=e[a];if(3!==t.length)return o.default("第「"+(a+1)+"」项数据中缺少经纬度或取值信息");if(!b.isArrayOfTypes(t,["number","numberString"]))return o.default("第「"+(a+1)+"」项数据中经纬度或取值不是数字类型")}return!0},w=function(e,a){var t=D(e);v.exportExcelByColumns(t,""+(a.dynamicName||a.name||"export"))},S=function(e,a){var t=D(e);p.exportCsvByColumns(t,(a.dynamicName||a.name||"export")+".csv")},_=function(e){var a=D(e);return v.exportRowsByColumns(a)},D=function(e){var a=[],t=[],o=[];return e&&e.data&&e.data.length&&e.data.forEach(function(e){a.push(e[0]),t.push(e[1]),o.push(e[2])}),[a,t,o]},M=function(e){var a=e.dataConfig.dataModel,t=a.value,o=void 0===t?[]:t,r=a.lng,i=void 0===r?[]:r,n=a.lat,s=void 0===n?[]:n;return 1!==i.length||1!==s.length||1!==o.length?!1:!0};i.register({kind:"map",type:"3d-map-bar",name:o.default("3D地球柱图"),docName:o.default("3D地图柱图"),iconClassName:"chart-3d-globe-bar",enableTemplate:!0,component:x,variants:[{name:o.default("3D世界柱图"),iconClassName:"chart-3d-geo-bar",initialState:{config:{mapType:"geo3D",barSize:10,distance:100,mapRegionType:"world",mLight:.5,alpha:40}}},{name:o.default("3D中国柱图"),iconClassName:"chart-3d-china-bar",initialState:{config:{mapType:"geo3D",barSize:10,distance:100,mapRegionType:"china",mLight:.5,alpha:40}}}],initialState:{dataType:"api",dataApiUrl:n.chartDemoUrl,config:{mapType:"globe",showAtomsphere:!0,barSize:60,targetCoord:"116.46&39.92",mapImgType:"terrain",eLight:.6,mLight:.4,autoRotateSpeed:10,zoom:!0,rotate:!0,distance:200,customVisualMap:!1,visualMin:0,visualMax:10,showVisualMap:!0,openCustomColor:!0,backgroundColor:"rgba(37, 37, 37, 1)"},dataConfig:{needAutoRefresh:!1}},initialDashboardState:{width:600,height:600,config:{openCustomColor:!1,backgroundColor:""}},basicCtrl:n.basicCtrl,dataBindCtrl:n.dataBindCtrl,advancedCtrl:n.advancedCtrl,canBeDrillChild:!0,drillChildName:o.default("3D地图柱图"),needDashboardAutoFresh:!0,validate:y,exportCSV:S,exportExcel:w,exportRows:_,dataModelPanelShow:[["dataType","dataModel"]],loadDataWhenDataModelConfigChange:M,chartEigens:n.chartEigens})});
;sugar.define("sugar:widgets/charts/bmap-scatter/bmap-scatter.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=e("sugar:node_modules/tslib/tslib.js"),o=e("sugar:utils/i18n.ts"),r=e("sugar:utils/chart-helper.ts"),i=e("sugar:node_modules/lodash/get.js"),n=e("sugar:node_modules/react/index.js"),s=e("sugar:widgets/charts/chart-manager.tsx"),l=e("sugar:widgets/charts/bmap-scatter/bmap-scatter-ctrl.tsx"),d=e("sugar:widgets/charts/_hoc/echarts.tsx"),p=e("sugar:node_modules/react-mixin/index.js"),u=e("sugar:widgets/charts/_mixin/echarts.tsx"),c=e("sugar:widgets/charts/_hoc/debug/debug.tsx"),m=e("sugar:widgets/charts/_hoc/drill-down/drill-down.tsx"),h=e("sugar:widgets/charts/_hoc/toolbar/toolbar.tsx"),f=e("sugar:widgets/charts/_hoc/chart-zoom/index.tsx"),v=e("sugar:node_modules/lodash/cloneDeep.js"),g=e("sugar:widgets/charts/map/geo-coord.ts"),y=e("sugar:utils/common-helper.ts"),b=e("sugar:node_modules/amis/lib/index.js"),S=e("sugar:utils/export-file/export-csv.ts"),x=e("sugar:widgets/charts/bmap-scatter/bmap-style.tsx"),C=e("sugar:widgets/charts/bar-pic/symbols.tsx"),I=e("sugar:utils/export-file/export-excel.ts"),w=e("sugar:widgets/charts/bmap-line/load-baidu-map.ts"),z=e("sugar:widgets/charts/map/util.ts"),D=12,T=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mapSliderIntervalEvent="",t.mapSliderIndex=-1,t}return a.__extends(t,e),t.prototype.willUnmount=function(){this.mapSliderIntervalEvent&&clearInterval(this.mapSliderIntervalEvent)},t.prototype.getDrillDownParam=function(e){var t,a=v(this.props.chartData.mapData);a.sort(function(e,t){return parseFloat(e.value)>parseFloat(t.value)?-1:1});var r=a[null===(t=e.data)||void 0===t?void 0:t.rank];return r?(r._sugar_dd_default_=r.hasOwnProperty("_sugar_extra")?r._sugar_extra:r.name_sugar_origin||r.name,r):(b.toast.error(o.default("地图当前区域无数据！")),null)},t.prototype.getDependenceParam=function(e){return{item:this.getDrillDownParam(e),state:{seriesIndex:e.seriesIndex,dataIndex:void 0!==e.dataIndex?e.dataIndex:e.name,seriesName:e.seriesName}}},t.prototype.refresh=function(e,t){var a,n=this;w.loadBaiduMap();var s=e.chartData,l=e.chartConfig,d=e.theme,p=e.chart,u=e.hub,c=["lightgreen","yellow","orange","red"];l.openCustomColor&&"report"===l.customColorType?c=((null===(a=d.config.chartTheme)||void 0===a?void 0:a.color)||c).slice(0,4):l.openCustomColor&&"custom"===l.customColorType&&l.customColors&&l.customColors.length&&(c=l.customColors.map(function(e){return e.color})),c=c.filter(function(e){return!!e});var m=p.isDashChart?"#fff":"#333";l.openCustomColor&&l.textColor&&(m=l.textColor);var h,f,g=v(s),b=g.mapData,S=this.chart,I=l.mapType||"scatter",T=g.unit||l.unit,M=g.sizeUnit||l.unit1,F=0;b.sort(function(e,t){return parseFloat(e.value)>parseFloat(t.value)?-1:1}),b.forEach(function(e,t){if(void 0!==e.value){var a=parseFloat(e.value)||0;(void 0===h||a>h)&&(h=a),(void 0===f||f>a)&&(f=a),F+=a}e.rank=t}),void 0!==f&&h===f&&f--;var _=[104.114129,37.550339];l.centerLng&&(_[0]=l.centerLng),l.centerLat&&(_[1]=l.centerLat),l.colorReverse&&c.reverse();var L={toolbox:{show:!1},bmap:{center:_,zoom:l.zoom||5,roam:l.roam,mapStyleV2:{styleJson:x.generateStyle(l)}},visualMap:[]},V=void 0!==f&&void 0!==h;if(V&&L.visualMap.push({type:"continuous",left:l.vMapLeft||0,bottom:l.vMapBottom||0,orient:l.vMapOrient||"vertical",show:!l.hideVisualMap,min:f,max:h,inRange:{color:c},text:l.hideVMapText?[""]:g.valueName?[g.valueName]:[o.default("高"),o.default("低")],calculable:!0,itemHeight:parseInt(l.vMapHeight)||80,itemWidth:parseInt(l.vMapWidth)||10,dimension:2,precision:0,textStyle:{color:m,fontSize:l.legendFontSize||D},formatter:function(e){return void 0!==h&&50>h?y.formatDataByType(e,g.dataFormat)+(T||""):y.formatDataByType(parseInt(e,10),g.dataFormat)+(T||"")}}),"scatter"===I){var B,E,k=null==l.topCityNum?2:parseInt(l.topCityNum),W=k?b.slice(k):b.concat(),A=k?b.slice(0,k):[],U=k&&l.scatterSlide||l.scatterSlideAll,P=l.minSize||10,R=l.maxSize||30;void 0!==b[0].sizeValue&&b.forEach(function(e){var t=parseFloat(e.sizeValue)||0;(void 0===E||t>E)&&(E=t),(void 0===B||B>t)&&(B=t)}),void 0!==B&&void 0!==E&&(E===B&&B--,L.visualMap.push({type:"continuous",right:l.sMapRight||10,bottom:l.sMapBottom||0,orient:l.sMapOrient||"vertical",show:!l.sHideVisualMap,calculable:!0,dimension:3,min:B,max:E,inRange:{symbolSize:[P,R]},itemHeight:parseInt(l.sMapHeight)||80,itemWidth:parseInt(l.sMapWidth)||10,precision:0,text:l.sHideVMapText?[""]:g.sizeValueName?[g.sizeValueName]:[o.default("高"),o.default("低")],textStyle:{color:m,fontSize:l.sLegendFontSize||D},formatter:function(e){return void 0!==E&&50>E?y.formatDataByType(e,g.sizeDataFormat)+(M||""):y.formatDataByType(parseInt(e,10),g.sizeDataFormat)+(M||"")}})),l.showInfoUseLabel||(L.tooltip={trigger:"item",formatter:function(e){var t=l.tooltipFontSize||D,a=z.getScatterLabelTooltip(e,b,g,l,F);return'<div style="font-size: '+t+'px;line-height:1.3">'+a+"</div>"},position:U?function(e){return[e[0]+10,e[1]+10]}:void 0});var O=l.symbolSize||13,j=[],H=!l.showInfoUseLabel&&l.showScatterName,G={name:"normal",type:"scatter",coordinateSystem:"bmap",symbol:C.default[l.symbolType||"circle"],symbolSize:O,blendMode:l.blend?"lighter":void 0,label:{normal:{position:l.scatterFontPos||"right",fontSize:l.provinceFontSize||D,lineHeight:1.3*(l.provinceFontSize||D),show:l.showInfoUseLabel&&l.showCityLabel||H,color:l.scatterFontColor||"",backgroundColor:l.scatterFontBackGroundColor||"rgba(50, 50, 50, 0.7)",borderColor:l.scatterFontBorderColor||"",borderWidth:l.scatterFontBorderWidth||0,padding:5,borderRadius:4,formatter:H?"{b}":function(e){return"auto"===l.labelContentType?z.autoDefineLabelContent(e,b,g,F,l.autoLabelContent):z.getScatterLabelTooltip(e,b,g,l,F,!1)}},emphasis:{show:l.showInfoUseLabel}},itemStyle:{normal:{color:l.scatterColor||"#1ca2a8",borderColor:l.strokeColor||"#4a6671",borderWidth:l.strokeWidth},emphasis:{borderWidth:l.lightStrokeWidth}}};if(z.generateSeries(j,W,l,G,"normal"),A.length){var J={name:"top",type:"effectScatter",coordinateSystem:"bmap",symbolSize:1.2*O,showEffectOn:U&&l.hideNoSlideScatter?"emphasis":"render",label:{normal:{position:l.scatterFontPos||"right",lineHeight:1.3*(l.provinceFontSize||D),fontSize:l.provinceFontSize||D,show:l.showInfoUseLabel&&l.showTopCityLabel||H,color:l.scatterFontColor||"",backgroundColor:l.scatterFontBackGroundColor||"rgba(50, 50, 50, 0.7)",borderColor:l.scatterFontBorderColor||"",borderWidth:l.scatterFontBorderWidth||0,padding:5,borderRadius:4,formatter:H?"{b}":function(e){return"auto"===l.labelContentType?z.autoDefineLabelContent(e,b,g,F,l.autoLabelContent):z.getScatterLabelTooltip(e,b,g,l,F,!1)}},emphasis:{show:l.showInfoUseLabel}},rippleEffect:{brushType:"stroke"},hoverAnimation:!0,itemStyle:{normal:{color:l.scatterColor||"#1ca2a8",shadowBlur:.6*O,shadowColor:"#333",borderColor:l.strokeColor||"#4a6671",borderWidth:l.strokeWidth},emphasis:{borderWidth:l.lightStrokeWidth}},zlevel:1};z.generateSeries(j,A,l,J,"top")}if(u.dependenceData.dependenceState&&(!U||!l.hideNoSlideScatter)){var Z=u.dependenceData.dependenceState,q=Z.seriesName,K=Z.dataIndex,Q=Z.seriesIndex;q.startsWith("normal")?(W.forEach(function(e){e.itemStyle={normal:{opacity:e.seriesIndex===Q&&e.dataIndex===K?1:.3},emphasis:{opacity:1}}}),A.forEach(function(e){e.itemStyle={normal:{opacity:.3},emphasis:{opacity:1}}})):q.startsWith("top")&&(A.forEach(function(e){e.itemStyle={normal:{opacity:e.seriesIndex===Q&&e.dataIndex===K?1:.3},emphasis:{opacity:1}}}),W.forEach(function(e){e.itemStyle={normal:{opacity:.3},emphasis:{opacity:1}}}))}if(t||r.isValidSlideDependence(l)&&U||(W.forEach(function(e){return e.itemStyle={opacity:1}}),A.forEach(function(e){return e.itemStyle={opacity:1}})),j.forEach(function(e){return e.data=N(e.data,l,f,h)}),L.series=j,!t&&(this.mapSliderIntervalEvent&&clearInterval(this.mapSliderIntervalEvent),U)){var X=i(this,"_handleDependence"),Y=function(){try{if(!n.props.chartData&&r.isValidSlideDependence(l))return;var e=l.scatterSlide?A:b;if(l.showInfoUseLabel){for(var t=[],a=Math.min(l.topSlideNum,e.length),o=0;a>o;o++)n.mapSliderIndex++,n.mapSliderIndex>e.length-1&&(n.mapSliderIndex=0),t.push(n.mapSliderIndex);S.dispatchAction({type:"downplay"}),t.forEach(function(t){S.dispatchAction({type:"highlight",seriesIndex:e[t].seriesIndex,dataIndex:e[t].dataIndex})})}else n.mapSliderIndex++,n.mapSliderIndex>e.length-1&&(n.mapSliderIndex=0),S.dispatchAction({type:"hideTip"}),S.dispatchAction({type:"showTip",seriesIndex:e[n.mapSliderIndex].seriesIndex,dataIndex:e[n.mapSliderIndex].dataIndex}),S.dispatchAction({type:"downplay"}),S.dispatchAction({type:"highlight",seriesIndex:e[n.mapSliderIndex].seriesIndex,dataIndex:e[n.mapSliderIndex].dataIndex});var s=X&&r.isValidSlideDependence(l)&&(l.showInfoUseLabel&&1===l.topSlideNum||!l.showInfoUseLabel);if(s){var d=e[n.mapSliderIndex],p=d.seriesName,u=d.seriesIndex,c=d.dataIndex,m=d.rank;X({seriesName:p,seriesIndex:u,dataIndex:c,data:{rank:m},name:i(e,"["+c+"].name")})}}catch(h){}};Y(),this.mapSliderIntervalEvent=setInterval(Y,1e3*(parseInt(l.slideInterval,10)||3))}}else"heatmap"===I&&(L.series=[{name:o.default("热力图"),type:"heatmap",coordinateSystem:"bmap",pointSize:l.heatmapPointSize||20,blurSize:l.heatmapBlurSize||30,data:N(b,l)}]);window.loadjs.ready("BMap",function(){if(S.setOption(L,!0),l.autoComputeMapStatus&&L.series.length){var e=S._model,t=null;if(e.eachComponent("bmap",function(e){t=e.__bmap}),t){for(var a=[],o=0,r=L.series;o<r.length;o++)for(var i=r[o],n=0,s=i.data;n<s.length;n++){var d=s[n];a.push(new BMap.Point(d.value[0],d.value[1]))}var p=t.getViewport(a);setTimeout(function(){return t.centerAndZoom(p.center,p.zoom)})}}})},t.displayName="BMapScatter",t=a.__decorate([m.default,c.default,h.default,f.default,d.default,p.decorate(u.default)],t)}(n.Component);t.default=T;var N=function(e,t,a,o){var r=[];return e.forEach(function(e){var i={name:e.name,itemStyle:e.itemStyle,rank:e.rank};if(e.coord&&e.coord instanceof Array)i.value=e.coord.concat(e.value,e.sizeValue);else{var n=g.getCoordsFromName(e.name,t.prefix)||[0,0];i.value=n.concat(e.value,e.sizeValue)}var s=t.scatterSlide&&t.topCityNum||t.scatterSlideAll;if(t.showInfoUseLabel){if(t.showMMCityLabel){var l=void 0!==a&&void 0!==o&&void 0!==e.value&&[a,o].includes(+e.value);i.label={normal:{show:l},emphasis:{show:!0}}}s&&(i.label={normal:{show:!1},emphasis:{show:!0,opacity:t.hideNoSlideScatter?1:void 0}})}s&&t.hideNoSlideScatter&&(i.itemStyle={normal:{opacity:0},emphasis:{opacity:1}}),r.push(i)}),r},M=function(e,t){if(!e||!e.mapData||!e.mapData.length)return o.default("无数据");for(var a=0;a<e.mapData.length;a++){var r=e.mapData[a];if(!r.name)return o.default("第「"+(a+1)+"」项数据中没有名称name字段");if("string"!=typeof r.name)return o.default("第「"+(a+1)+"」项数据中名称name字段不是字符串");if("scatter"===t.mapType){if(void 0!==r.value&&!y.isNumberic(r.value))return o.default("第「"+(a+1)+"」项数据中value取值不是数字类型")}else if(!y.isNumberic(r.value))return o.default("第「"+(a+1)+"」项数据中value取值不是数字类型");if("scatter"===t.mapType&&void 0!==r.sizeValue&&!y.isNumberic(r.sizeValue))return o.default("第「"+(a+1)+"」项数据中sizeValue取值不是数字类型");if("scatter"===t.mapType&&void 0!==r.type&&!["string","number"].includes(typeof r.type))return o.default("第「"+(a+1)+"」项数据中type取值不是数字类型也是不字符串");if(void 0!==r.coord&&!r.coord.length&&2!==r.coord.length&&!y.isArrayOfTypes(r.coord,["number"]))return o.default("第「"+(a+1)+"」项数据中coord字段不是长度为2的经纬度数组");if(void 0!==r.tooltipValues&&!(r.tooltipValues instanceof Array))return o.default("第「"+(a+1)+"」项数据中tooltipValues字段不是数组类型")}return!0},F=function(e,t){var a=V(e);I.exportExcelByRows(a,""+(t.dynamicName||t.name||"export"))},_=function(e,t){var a=V(e);S.exportCsvByRows(a,(t.dynamicName||t.name||"export")+".csv")},L=function(e){return V(e)},V=function(e){var t=[];return e&&e.data&&e.data.mapData&&e.data.mapData.length&&e.data.mapData.forEach(function(a,r){var i=[];if(0===r){var n=[];n.push(o.default("名称")),void 0!==a.value&&n.push(e.data.valueName||o.default("散点颜色")),void 0!==a.sizeValue&&n.push(e.data.sizeValueName||o.default("散点大小")),void 0!==a.type&&n.push(e.data.typeName||o.default("散点系列")),a.coord instanceof Array&&n.push(o.default("经度"),o.default("纬度")),a.tooltipValues instanceof Array&&a.tooltipValues.forEach(function(t,a){n.push(e.data.tooltipNames&&e.data.tooltipNames[a]?e.data.tooltipNames[a]:o.default("附加数据「"+(a+1)+"」"))}),t.push(n)}i.push(a.name),void 0!==a.value&&i.push(a.value),void 0!==a.sizeValue&&i.push(a.sizeValue),void 0!==a.type&&i.push(a.type),a.coord instanceof Array&&i.push.apply(i,a.coord),a.tooltipValues instanceof Array&&a.tooltipValues.forEach(function(e){i.push(e)}),t.push(i)}),t},B=function(e){var t=e.dataConfig,a=t.dataModel,o=a.name,r=void 0===o?[]:o,i=a.value,n=void 0===i?[]:i,s=(a.size,a.type,a.lng),l=void 0===s?[]:s,d=a.lat,p=void 0===d?[]:d,u=(a.tooltip,t.coordType);return 1!==r.length?!1:"heatmap"===e.config.mapType&&1!==n.length?!1:"bind"!==u||1===l.length&&1===p.length?!0:!1};s.register({kind:"map",type:"bmap-scatter",name:o.default("百度地图-散点"),docName:o.default("百度地图-散点和热力"),iconClassName:"chart-bmap-scatter",enableTemplate:!0,component:T,mapCluster:"scatter",initialState:{dataType:"api",dataApiUrl:l.chartDemoUrl,width:5,height:450,config:{styleType:"",themeType:"dark",centerLng:104.1141,centerLat:37.5503,centerConfig:1,zoom:4,roam:!0,mapType:"scatter",topCityNum:0,symbolSize:13,symbolType:"circle",autoSymbolType:!1,imgUrls:[],imgInputs:[],symobls:[],unit:"",unit1:"",showRank:!0,slideInterval:4,customColorType:"report",vMapBottom:10,vMapOrient:"vertical",labelContentType:"normal",topSlideNum:1,showInfoUseLabel:!1,minSize:10,maxSize:30,strokeWidth:1,lightStrokeWidth:2,sMapBottom:10,sMapOrient:"vertical",autoComputeMapStatus:!0},dataConfig:{coordType:"auto"}},initialDashboardState:{width:860,height:680,config:{topCityNum:3,zoom:5,styleType:"theme"}},variants:[{name:o.default("百度地图-热力"),iconClassName:"chart-bmap-heatmap",mapCluster:"heatmap",initialState:{config:{mapType:"heatmap"}}},{name:o.default("百度地图-标签"),iconClassName:"chart-bmap-label",mapCluster:"label",initialState:{config:{mapType:"scatter",showInfoUseLabel:!0,topSlideNum:3,scatterSlide:!0,topCityNum:15,scatterFontColor:"#000",labelContentType:"auto",scatterFontBorderColor:"rgba(240, 8, 89, 1)",scatterFontBackGroundColor:"rgba(255, 255, 255, 0.5)",scatterFontBorderWidth:1,autoLabelContent:"{name}的GDP为{sizeValue}亿, 占总量的{percent}, 在全国排名第 {rank} 位"}}}],basicCtrl:l.basicCtrl,dataBindCtrl:l.dataBindCtrl,advancedCtrl:l.advancedCtrl,validate:M,needDashboardAutoFresh:!0,exportCSV:_,exportExcel:F,exportRows:L,drillDownType:"single",canBeDrillChild:!0,drillChildName:o.default("百度地图-散点或热力"),dataModelPanelShow:[["dataType","dataModel"]],drillDownSuggestDataModelField:"name",loadDataWhenDataModelConfigChange:B,chartEigens:l.chartEigens})});
;sugar.define("sugar:widgets/charts/bmap-line/bmap-line.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=e("sugar:node_modules/tslib/tslib.js"),o=e("sugar:utils/i18n.ts"),r=e("sugar:node_modules/react/index.js"),i=e("sugar:widgets/charts/chart-manager.tsx"),n=e("sugar:widgets/charts/bmap-line/bmap-line-ctrl.tsx"),l=e("sugar:widgets/charts/_hoc/echarts.tsx"),s=e("sugar:node_modules/react-mixin/index.js"),d=e("sugar:widgets/charts/_mixin/echarts.tsx"),u=e("sugar:widgets/charts/_hoc/debug/debug.tsx"),c=e("sugar:widgets/charts/_hoc/drill-down/drill-down.tsx"),p=e("sugar:widgets/charts/_hoc/toolbar/toolbar.tsx"),m=e("sugar:widgets/charts/_hoc/chart-zoom/index.tsx"),f=e("sugar:node_modules/lodash/cloneDeep.js"),h=e("sugar:widgets/charts/map/geo-coord.ts"),g=e("sugar:utils/common-helper.ts"),v=e("sugar:node_modules/amis/lib/index.js"),y=e("sugar:utils/export-file/export-csv.ts"),b=e("sugar:widgets/charts/bmap-scatter/bmap-style.tsx"),x=e("sugar:widgets/charts/bar-pic/symbols.tsx"),C=e("sugar:utils/export-file/export-excel.ts"),S=e("sugar:widgets/charts/bmap-line/load-baidu-map.ts"),w=e("sugar:widgets/charts/bmap-line/util.ts"),z=e("sugar:widgets/charts/map-layer/scatter/scatter.tsx"),M=12,_=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.getDrillDownParam=function(e){var t=f(this.props.chartData);t.trails.sort(function(e,t){return parseFloat(e.value)>parseFloat(t.value)?-1:1}),("effectScatter"===e.seriesType||"scatter"===e.seriesType)&&(e.dataIndex=Math.floor(e.dataIndex/2));var a=e.dataIndex,r=t.trails[a];return r?(delete r.coords,r._sugar_dd_default_=r.name_sugar_origin||r.name,r):(v.toast.error(o.default("路径不存在")),null)},t.prototype.getDependenceParam=function(e){return{item:this.getDrillDownParam(e),state:{seriesIndex:e.seriesIndex,dataIndex:e.dataIndex}}},t.prototype.refresh=function(e){var t;S.loadBaiduMap();var a=e.chartData,r=e.chartConfig,i=e.theme,n=e.chart,l=e.hub,s=["lightgreen","yellow","orange","red"];r.openCustomColor&&"report"===r.customColorType?s=((null===(t=i.config.chartTheme)||void 0===t?void 0:t.color)||s).slice(0,4):r.openCustomColor&&"custom"===r.customColorType&&r.customColors&&r.customColors.length&&(s=r.customColors.map(function(e){return e.color})),s=s.filter(function(e){return!!e});var d=n.isDashChart?"#fff":"#333";r.openCustomColor&&r.textColor&&(d=r.textColor),r.colorReverse&&s.reverse();var u=f(a),c=u.trails,p=this.chart;c.sort(function(e,t){return parseFloat(e.value)>parseFloat(t.value)?-1:1});var m,h,v,y,C=u.unit||r.unit,w=u.sizeUnit||r.unit1,z=0,_=c.length;c.forEach(function(e){if(void 0!==e.value){var t=parseFloat(e.value)||0;(void 0===m||t>m)&&(m=t),(void 0===h||h>t)&&(h=t),z+=t}if(void 0!==e.sizeValue){var t=parseFloat(e.sizeValue)||0;(void 0===v||t>v)&&(v=t),(void 0===y||y>t)&&(y=t)}}),void 0!==h&&h===m&&h--,void 0!==y&&y===v&&y--;var F=[104.114129,37.550339];r.centerLng&&(F[0]=r.centerLng),r.centerLat&&(F[1]=r.centerLat);var N={toolbox:{show:!1},bmap:{center:F,zoom:r.zoom||5,roam:r.roam,mapStyleV2:{styleJson:b.generateStyle(r)}}};void 0!==h&&void 0!==m&&(N.visualMap={type:"continuous",left:r.vMapLeft||0,bottom:r.vMapBottom||0,orient:r.vMapOrient||"vertical",show:!r.hideVisualMap,min:h,max:m,inRange:{color:s},text:r.hideVMapText?[""]:u.valueName?[u.valueName]:[o.default("高"),o.default("低")],calculable:!0,itemHeight:parseInt(r.vMapHeight)||80,itemWidth:parseInt(r.vMapWidth)||10,precision:0,textStyle:{color:d,fontSize:r.legendFontSize||M},formatter:function(e){return void 0!==m&&50>m?g.formatDataByType(e,u.dataFormat)+(C||""):g.formatDataByType(parseInt(e,10),u.dataFormat)+(C||"")}});var V=void 0!==y&&void 0!==v,W=r.minWidth||1,B=r.maxWidth||10,I=r.lineWidth||2,E=null;l.dependenceData.dependenceState&&(E=l.dependenceData.dependenceState.dataIndex,c.forEach(function(e,t){e.lineStyle={opacity:t===E?1:.3}}));var A=[],L=D(c,{hasSizeMap:V,sizeMax:v,sizeMin:y,maxWidth:B,minWidth:W,lineWidth:I},r.prefix);if(A.push({type:"lines",coordinateSystem:"bmap",data:L,polyline:!r.lineCurve,blendMode:r.blend?"lighter":void 0,lineStyle:{normal:{color:r.lineColor||"blue",curveness:isNaN(r.lineCurve)?0:r.lineCurve/10,opacity:isNaN(r.lineOpacity)?.6:r.lineOpacity/10}}}),r.effect&&A.push({type:"lines",coordinateSystem:"bmap",polyline:!r.lineCurve,data:L,animation:!1,blendMode:r.blend?"lighter":void 0,lineStyle:{normal:{width:0,color:r.lineColor||"#1917e5",curveness:isNaN(r.lineCurve)?0:r.lineCurve/10}},effect:{show:!0,constantSpeed:r.effectSpeed||70,trailLength:r.trailLength||0,symbolSize:r.effectSize||10,symbol:x.default[r.symbolType||"circle"],color:r.symbolColor},zlevel:1}),r.showScatter){var O=T(L,E);if(O&&O.length){var P=r.imgInputs&&r.imgInputs[0];A.push({name:o.default("气泡"),zlevel:2,type:r.showScatterEffect?"effectScatter":"scatter",coordinateSystem:"bmap",symbol:r.imgUrls?"image://"+location.protocol+"//"+(location.host+r.imgUrls):P?"image://"+P:x.default[r.scatterType||"circle"],symbolSize:r.scatterSymbolSize||M,showEffectOn:"render",rippleEffect:{brushType:"stroke"},hoverAnimation:!0,label:{normal:{formatter:"{b}",position:"right",fontSize:r.scatterFontSize||M,show:r.showScatterLabel}},itemStyle:{normal:{color:r.scatterColor||"#1ca2a8",borderColor:r.strokeColor||"#4a6671",borderWidth:r.strokeWidth||0},emphasis:{borderWidth:r.lightStrokeWidth||0}},data:O})}}N.series=A,N.tooltip={trigger:"item",formatter:function(e){var t=e.name,a=r.tooltipFontSize||M;if("effectScatter"===e.seriesType||"scatter"===e.seriesType)return t?'<div style="font-size: '+a+'px;line-height:1.3">'+t+"</div>":null;var i=c[e.dataIndex];if(void 0!==i.value){var n="";r.tipPercent&&(n="("+(parseFloat(i.value)/z*100).toFixed(2)+"%)");var l=g.formatDataByType(i.value,u.dataFormat)+(C||"")+n;t+="<br> "+(u.valueName||o.default("线条颜色"))+": "+l}return void 0!==i.sizeValue&&(t+="<br>"+(u.sizeValueName||o.default("线条宽度"))+": "+g.formatDataByType(i.sizeValue,u.sizeDataFormat)+(w||"")),i.tooltipValues&&i.tooltipValues instanceof Array&&i.tooltipValues.forEach(function(e,a){var o=u.tooltipNames,r=u.tooltipUnits,i=o&&o[a]?o[a]+": ":"",n=r&&r[a]?r[a]:"";t+="<br>"+i+g.formatDataByType(e,u.tooltipDataFormats?u.tooltipDataFormats[a]:"")+n}),r.showRank&&void 0!==i.value&&(t=o.default("【第「"+(e.dataIndex+1)+"」名/「"+_+"」】<br>")+t),'<div style="font-size: '+a+'px;line-height:1.3">'+t+"</div>"}},window.loadjs.ready("BMap",function(){if(p.setOption(N,!0),r.autoComputeMapStatus&&L.length){var e=p._model,t=null;if(e.eachComponent("bmap",function(e){t=e.__bmap}),t){for(var a=[],o=0,i=L;o<i.length;o++){var n=i[o];if(n.coords&&n.coords.length)for(var l=0,s=n.coords;l<s.length;l++){var d=s[l];a.push(new BMap.Point(d[0],d[1]))}}var u=t.getViewport(a);t.centerAndZoom(u.center,u.zoom)}}})},t.displayName="BMapLine",t=a.__decorate([c.default,u.default,p.default,m.default,l.default,s.decorate(d.default)],t)}(r.Component);t.default=_;var D=function(e,t,o){void 0===o&&(o="");var r=[],i=t.hasSizeMap,n=t.sizeMin,l=t.sizeMax,s=t.minWidth,d=t.maxWidth,u=t.lineWidth;return e.forEach(function(e){var t=u;i&&void 0!==e.sizeValue&&!isNaN(+e.sizeValue)&&(t=z.getSize(s,d,n,l,+e.sizeValue));var c=null,p=null;e.coords instanceof Array?c=e.coords:e.locations instanceof Array&&(c=e.locations.map(function(e){return h.getCoordsFromName(e,o)||[0,0]}),p=[e.locations[0],e.locations[e.locations.length-1]]),c&&r.push({name:e.name,coords:c,value:e.value,lineStyle:e.lineStyle?a.__assign(a.__assign({},e.lineStyle),{width:t}):{width:t},locations:p})}),r},T=function(e,t){var o=[];return e.forEach(function(e,r){var i;null!==t&&(i=t===r?{opacity:1}:{opacity:.3});var n=e.locations,l=e.coords,s=e.value;l&&l[0]&&l[l.length-1]&&o.push({name:n&&n.length&&n[0]||"",value:a.__spreadArrays(l[0],[s]),itemStyle:i},{name:n&&n.length&&n[1]||"",value:a.__spreadArrays(l[l.length-1],[s]),itemStyle:i})}),o},F=function(e){if(!e||!e.trails||!e.trails.length)return o.default("无数据");for(var t=0;t<e.trails.length;t++){var a=e.trails[t];if(!a.name)return o.default("第「"+(t+1)+"」项数据中没有名称name字段");if("string"!=typeof a.name)return o.default("第「"+(t+1)+"」项数据中名称name字段不是字符串");if(void 0!==a.value&&!g.isNumberic(a.value))return o.default("第「"+(t+1)+"」项数据中value取值不是数字类型");if(a.locations&&(!a.locations.length||a.locations.length<2||!g.isArrayOfTypes(a.locations,["string"])))return o.default("第「"+(t+1)+"」项数据中locations字段不是长度大于2的字符串数组，一条路径应至少提供起点和终点名称");if(a.coords&&(!a.coords.length||a.coords.length<2))return o.default("第「"+(t+1)+"」项数据中coords字段不是长度大于2的数组，一条路径应至少提供起点和终点坐标");if(a.coords)for(var r=0;r<a.coords.length;r++){var i=a.coords[r];if(i.length<2||!g.isArrayOfTypes(i,["number"]))return o.default("第「"+(t+1)+"」项数据中coords字段中的第「"+(r+1)+"」个经纬度坐标不是长度大于2的数字数组")}if(void 0!==a.sizeValue&&!g.isNumberic(a.sizeValue))return o.default("第「"+(t+1)+"」项数据中sizeValue取值不是数字类型");if(void 0!==a.tooltipValues&&!(a.tooltipValues instanceof Array))return o.default("第「"+(t+1)+"」项数据中tooltipValues字段不是数组类型")}return!0},N=function(e,t){var a=w.exportCommon(e);C.exportExcelByRows(a,""+(t.dynamicName||t.name||"export"))},V=function(e,t){var a=w.exportCommon(e);y.exportCsvByRows(a,(t.dynamicName||t.name||"export")+".csv")},W=function(e){return w.exportCommon(e)},B=function(e){var t=e.dataConfig,a=t.dataModel,o=a.name,r=void 0===o?[]:o,i=a.sourceNode,n=void 0===i?[]:i,l=(a.value,a.lng),s=void 0===l?[]:l,d=a.lat,u=void 0===d?[]:d,c=(a.order,t.coordType);if(1!==r.length)return!1;if("bind"===c){if(1!==s.length||1!==u.length)return!1}else if(1!==n.length)return!1;return!0};i.register({kind:"map",type:"bmap-line",name:o.default("百度地图-路径"),iconClassName:"chart-bmap-line",enableTemplate:!0,component:_,mapCluster:"flyline",initialState:{dataType:"api",dataApiUrl:n.chartDemoUrl,width:5,height:450,config:{openCustomColor:!0,customColorType:"custom",greenColor:"#E3F6DF",styleType:"custom",themeType:"dark",centerLng:120.1306,centerLat:30.24,centerConfig:.1,tipPercent:!0,zoom:13,unit:"",unit1:"",roam:!0,lineWidth:2,minWidth:1,imgUrls:"",imgInputs:[""],maxWidth:5,lineOpacity:8,effect:!0,effectSize:3,vMapBottom:10,sMapBottom:10,autoComputeMapStatus:!0,vMapOrient:"vertical",sMapOrient:"vertical",showScatter:!0,scatterSymbolSize:12},dataConfig:{coordType:"auto",colModeMultiRows:"sum"}},initialDashboardState:{width:860,height:680,config:{styleType:"theme"}},basicCtrl:n.basicCtrl,dataBindCtrl:n.dataBindCtrl,advancedCtrl:n.advancedCtrl,validate:F,needDashboardAutoFresh:!0,exportCSV:V,exportExcel:N,exportRows:W,drillDownType:"single",canBeDrillChild:!0,drillChildName:o.default("百度地图-路径"),dataModelPanelShow:[["dataType","dataModel"]],drillDownSuggestDataModelField:"name",loadDataWhenDataModelConfigChange:B,chartEigens:n.chartEigens})});
;sugar.define("sugar:widgets/charts/table/table-ctrl.tsx",function(e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.advancedCtrl=a.dataBindCtrl=a.chartEigens=a.chartDemoUrl=a.basicCtrl=void 0;var t=e("sugar:node_modules/tslib/tslib.js"),l=e("sugar:utils/i18n.ts"),n=e("sugar:node_modules/react/index.js"),d=e("sugar:widgets/ctrl-panel/data-bind-ctrl/index.tsx"),o=e("sugar:widgets/object-array-editor/object-array-editor.tsx"),i=e("sugar:widgets/ctrl-panel/common/switch-with-tip.tsx"),u=e("sugar:widgets/custom-data-format/custom-data-format.tsx"),f=e("sugar:widgets/amis-inline-switch.tsx"),r=e("sugar:widgets/data-model/data-model-field-holder/data-model-field-holder.tsx"),c=e("sugar:widgets/data-model/data-model-field-holder/field-color-picker.tsx"),s=[{label:l.default("前日值"),value:"dayVal"},{label:l.default("日环比"),value:"dayRate"},{label:l.default("环比变化量"),value:"dayChangeVal"},{label:l.default("上周同日值"),value:"weekVal"},{label:l.default("周同比"),value:"weekRate"},{label:l.default("同比变化量"),value:"weekChangeVal"},{label:l.default("近7天均值"),value:"7DaysAvg"},{label:l.default("近7天总值"),value:"7DaysTotal"},{label:l.default("周均值"),value:"weekAvg"},{label:l.default("上周均值"),value:"weekBeforeAvg"},{label:l.default("周均比"),value:"weekAvgRate"},{label:l.default("周总值"),value:"weekTotal"},{label:l.default("上周总值"),value:"weekBeforeTotal"},{label:l.default("周环比"),value:"weekTotalRate"},{label:l.default("近30天均值"),value:"30DaysAvg"},{label:l.default("近30天总值"),value:"30DaysTotal"},{label:l.default("月均值"),value:"monthAvg"},{label:l.default("上月均值"),value:"monthBeforeAvg"},{label:l.default("月均比"),value:"monthAvgRate"},{label:l.default("月总值"),value:"monthTotal"},{label:l.default("上月总值"),value:"monthBeforeTotal"},{label:l.default("月环比"),value:"monthTotalRate"}],m={type:"fieldset",title:l.default("自定义配色"),collapsed:!1,collapsable:!0,headingClassName:"fieldset-title",controls:[f.amisInlineSwitch("config.openCustomColor",l.default("开启自定义颜色")),{type:"radios",name:"config.customColorType",inline:!1,hiddenOn:"!data.config.openCustomColor",label:"",options:[{label:l.default("本报表页面的主题配色"),value:"report"},{label:l.default("自定义"),value:"custom"}]},{type:"group",hiddenOn:"!data.config.openCustomColor || data.config.customColorType != 'custom'",controls:[{type:"color",format:"rgba",label:l.default("表头背景颜色"),placeholder:l.default("请输入"),name:"config.titleBg"},{type:"color",format:"rgba",label:l.default("表头文字颜色"),placeholder:l.default("请输入"),name:"config.titleColor"}]},{type:"group",hiddenOn:"!data.config.openCustomColor || data.config.customColorType != 'custom'",controls:[{type:"color",format:"rgba",label:l.default("表格背景颜色"),placeholder:l.default("请输入"),name:"config.contentBg"},{type:"color",format:"rgba",label:l.default("表格文字颜色"),placeholder:l.default("请输入"),name:"config.contentColor"}]},{type:"color",format:"rgba",label:l.default("分割线颜色"),placeholder:l.default("请输入"),name:"config.lineColor",hiddenOn:"!data.config.openCustomColor || data.config.customColorType != 'custom'"},f.amisInlineSwitch("config.meanOrTotalContentBg",l.default("合计、均值与表格背景同色"),"!data.config.openCustomColor || data.config.customColorType != 'custom'")]};a.basicCtrl=[{type:"divider"},m];var p="/openapi/demo/chart?type=table";a.chartDemoUrl="$CUR_HOST/openapi/demo/chart?type=table",a.chartEigens=[{field:[{name:"x",type:"a",minCount:1,maxCount:50}],configSp:{"dataConfig.tableType":"normal"}},{field:[{name:"x2",type:"d",minCount:1,maxCount:6},{name:"value",type:"m",minCount:1,maxCount:10,canRepeat:!0},{name:"y",type:"d",minCount:0,maxCount:6}],configSp:{"dataConfig.tableType":"crossPivot"},variantIndex:0}],a.dataBindCtrl=function(e){var a=d.getDebugAndRefreshBtn({loadData:e.chart.loadData,loadDebugData:e.chart.loadDebugData,dataType:e.chart.dataType,refreshText:l.default("刷新图表")}),m=e.chart.dataModelHash||"",g=e.sqlModelStore.detailMap.mapByHash.get(m),h=d.generateSQLFieldList(g),y=d.getDataBindCommon({frontendId:e.chart.frontendId,dataTypeOptions:["dataModel","api","sql","json"],api:{demoUrl:p},sql:{needContinuitySetting:!0,sqlFieldList:h},loadData:e.chart.loadData,loadDebugData:e.chart.loadDebugData,curUrl:e.chart.dataApiUrl}),b=[{type:"text",key:"name",name:l.default("名称"),tdStyle:{minWidth:100}},{type:"text",key:"colspan",name:l.default("宽度占几列"),tdStyle:{minWidth:100}},{type:"select",key:"rowIndex",name:l.default("第几行"),defaultValue:"0",list:[{label:l.default("第1行"),value:"0"},{label:l.default("第2行"),value:"1"},{label:l.default("第3行"),value:"2"},{label:l.default("第4行"),value:"3"},{label:l.default("第5行"),value:"4"},{label:l.default("第6行"),value:"5"}],tdStyle:{minWidth:80}}],C=[{type:"select",list:h,key:"frontendId",name:l.default("指标"),tdStyle:{minWidth:150}},{type:"text",key:"columnName",name:l.default("指标重命名"),placeholder:l.default("默认"),tdStyle:{minWidth:90}},{type:"text",key:"remark",name:l.default("指标备注说明"),placeholder:l.default("无"),tdStyle:{minWidth:105}},{type:"text",key:"unit",name:l.default("单位"),placeholder:l.default("无"),tdStyle:{minWidth:50}},{type:"redSetting",name:l.default("飘红设置"),tdStyle:{minWidth:110}},{type:"greenSetting",name:l.default("飘绿设置"),tdStyle:{minWidth:110}},{name:l.default("格式化方法"),tdStyle:{minWidth:150},children:u.default,notNeedCustom:!0,data:h},{type:"color",key:"bgColor",name:l.default("背景色"),placeholder:l.default("无"),tdStyle:{minWidth:80}}],v=[{type:"select",list:h,key:"frontendId",name:l.default("列"),tdStyle:{minWidth:150}},{type:"text",key:"format",name:l.default("展示格式"),placeholder:l.default("默认"),tdStyle:{minWidth:90}},{type:"text",key:"columnName",name:l.default("表头名称"),placeholder:l.default("默认为列名称"),tdStyle:{minWidth:90}},{type:"text",key:"remark",name:l.default("表头字段备注说明"),placeholder:l.default("无"),tdStyle:{minWidth:105}},{type:"select",key:"ishtml",name:l.default("是否HTML"),defaultValue:"0",list:[{label:l.default("是"),value:"1"},{label:l.default("否"),value:"0"}],tdStyle:{minWidth:80}},{type:"text",key:"unit",name:l.default("单位"),placeholder:l.default("无"),tdStyle:{minWidth:50}},{type:"select",key:"textAlign",name:l.default("对齐方式"),defaultValue:"auto",list:[{label:l.default("默认"),value:"auto"},{label:l.default("居左"),value:"left"},{label:l.default("居中"),value:"center"},{label:l.default("居右"),value:"right"}],tdStyle:{minWidth:100}},{type:"select",key:"autoWrap",name:l.default("自动换行"),defaultValue:"0",list:[{label:l.default("是"),value:"1"},{label:l.default("否"),value:"0"}],tdStyle:{minWidth:80}},{type:"text",key:"width",name:l.default("列宽度"),placeholder:l.default("自适应"),tdStyle:{minWidth:70}},{type:"select",key:"hide",name:l.default("隐藏"),defaultValue:"0",list:[{label:l.default("是"),value:"1"},{label:l.default("否"),value:"0"},{label:l.default("隐藏但导出Excel时包含本列"),value:"2"}],tdStyle:{minWidth:50}},{name:l.default("格式化方法"),tdStyle:{minWidth:150},children:u.default,data:h},{type:"redSetting",name:l.default("飘红设置"),tdStyle:{minWidth:110}},{type:"greenSetting",name:l.default("飘绿设置"),tdStyle:{minWidth:110}},{type:"select",key:"setWholeRow",name:l.default("飘红飘绿于整行"),defaultValue:"0",list:[{label:l.default("是"),value:"1"},{label:l.default("否"),value:"0"}],tdStyle:{minWidth:90}},{type:"color",key:"bgColor",name:l.default("背景色"),placeholder:l.default("无"),tdStyle:{minWidth:120}},{type:"color",key:"headerBgColor",name:l.default("表头背景色"),placeholder:l.default("无"),tdStyle:{minWidth:120}},{type:"select",key:"disableRename",name:l.default("禁用数据值映射"),defaultValue:"0",list:[{label:l.default("是"),value:"1"},{label:l.default("否"),value:"0"}],tdStyle:{minWidth:65}}],T=t.__spreadArrays([{name:"dataConfig.tableType",label:l.default("类型"),type:"radios",hiddenOn:"dataType != 'dataModel'",inline:!1,options:[{label:l.default("普通表格"),value:"normal"},{label:l.default("交叉透视表"),value:"crossPivot"},{label:l.default("留存报表"),value:"retention",disabled:e.chart.drillDownLevel}]},r.getDataModelFieldHolder({name:"x",label:l.default("列"),hiddenOn:"dataType != 'dataModel' || dataConfig.tableType != 'normal'",config:{dataModelHash:m,holderId:e.chart.frontendId+"-x",canRepeat:!0,maxCount:50,dimConfig:{contextMenu:["tableDimCol","conditionalFormatting"]},meaConfig:{contextMenu:["tableMeaCol","conditionalFormatting"]}}}),r.getDataModelFieldHolder({name:"x3",label:l.default("留存用户字段"),hiddenOn:"dataType != 'dataModel' || dataConfig.tableType != 'retention'",config:{dataModelHash:m,holderId:e.chart.frontendId+"-x3",maxCount:1,onlyDimension:!0}}),{label:l.default("留存时间字段"),type:"data-model-field-holder",name:"dataConfig.dataModel.chartCondition",hiddenOn:"dataType != 'dataModel' || dataConfig.tableType != 'retention'",config:{dataModelHash:m,chart:e.chart,holderId:e.chart.frontendId+".chartCondition",maxCount:1,onlyDimension:!0,canRepeat:!1,onlyDataTypes:["date","datetime"],onlyDataTypesToast:l.default("只支持时间和日期类型"),dimConfig:{contextMenu:["chartCon"]}}},{name:"dataConfig.retentionGradient",hiddenOn:"dataType != 'dataModel' || dataConfig.tableType != 'retention'",children:function(e){var a=e.onChange,d=e.value;return n.createElement(c.default,t.__assign({},{onChange:a,value:d,label:l.default("留存色阶颜色")},{containerClassName:"form-item-retention-radient"}))}},f.amisInlineSwitch("dataConfig.tableNotAggregate",l.default("展示所有数据不做聚合"),"dataType != 'dataModel' || dataConfig.tableType != 'normal'"),f.amisInlineSwitch("dataConfig.tableNum",l.default("开启表格首列序号"),"dataType != 'dataModel' || (dataConfig.tableType != 'normal' && dataConfig.tableType != 'retention')"),r.getDataModelFieldHolder({name:"extra",label:l.default("下钻附加字段"),hiddenOn:"dataType != 'dataModel' || dataConfig.tableType != 'normal'",config:{dataModelHash:m,holderId:e.chart.frontendId+"-extra",maxCount:1,onlyDimension:!0,canNotNoEnumerable:!0,dimConfig:{contextMenu:null}}}),r.getDataModelFieldHolder({name:"x2",label:l.default("列"),hiddenOn:"dataType != 'dataModel' || dataConfig.tableType != 'crossPivot'",config:{dataModelHash:m,holderId:e.chart.frontendId+"-x2",maxCount:6,onlyDimension:!0,canNotNoEnumerable:!0}}),r.getDataModelFieldHolder({name:"y",label:l.default("行"),hiddenOn:"dataType != 'dataModel' || dataConfig.tableType != 'crossPivot'",config:{dataModelHash:m,holderId:e.chart.frontendId+"-y",maxCount:6,onlyDimension:!0,canNotNoEnumerable:!0,dimConfig:{contextMenu:["tableDimCol","conditionalFormatting"]}}}),r.getDataModelFieldHolder({name:"value",label:l.default("指标"),hiddenOn:"dataType != 'dataModel' || dataConfig.tableType != 'crossPivot'",config:{dataModelHash:m,holderId:e.chart.frontendId+"-value",maxCount:10,onlyMeasure:!0,canRepeat:!0,meaConfig:{contextMenu:["tableMeaCol","conditionalFormatting"]}}}),f.amisInlineSwitch("dataConfig.pivotTotal",l.default("开启合计"),"dataType != 'dataModel' || dataConfig.tableType != 'crossPivot'"),f.amisInlineSwitch("dataConfig.rowsTotal",l.default("显示合计行"),"dataType != 'dataModel' || dataConfig.tableType != 'crossPivot' || !dataConfig.pivotTotal"),f.amisInlineSwitch("dataConfig.columnsTotal",l.default("显示合计列"),"dataType != 'dataModel' || dataConfig.tableType != 'crossPivot' || !dataConfig.pivotTotal"),{type:"color",format:"rgba",label:l.default("合计行列的背景色"),placeholder:l.default("请输入"),name:"dataConfig.pivotTotalBg",hiddenOn:"dataType != 'dataModel' || dataConfig.tableType != 'crossPivot' || !dataConfig.pivotTotal",placement:"left-top-left-bottom"},{type:"tree-select",label:l.default("留存区间"),placeholder:l.default("请选择留存的粒度和区间"),name:"dataConfig.dataModel.retentionInterval",hiddenOn:"dataType != 'dataModel' || dataConfig.tableType != 'retention'",placement:l.default("选择留存的粒度和区间"),options:[{label:"日",value:"d",children:[{label:l.default("次日留存"),value:"1dr"},{label:l.default("3日留存"),value:"3dr"},{label:l.default("7日留存"),value:"7dr"},{label:l.default("14日留存"),value:"14dr"},{label:l.default("30日留存"),value:"30dr"}]},{label:"周",value:"w",children:[{label:l.default("次周留存"),value:"1wr"},{label:l.default("4周留存"),value:"4wr"},{label:l.default("8周留存"),value:"8wr"}]},{label:"月",value:"m",children:[{label:l.default("次月留存"),value:"1mr"},{label:l.default("2月留存"),value:"2mr"},{label:l.default("3月留存"),value:"3mr"}]}]},d.commonFilterForDataModel(m,"dataConfig.dataModel.initialFilters","dataType != 'dataModel' || dataConfig.tableType != 'retention'",l.default("留存源行为筛选")),d.commonFilterForDataModel(m,"dataConfig.dataModel.followUpFilters","dataType != 'dataModel' || dataConfig.tableType != 'retention'",l.default("留存目标行为筛选")),d.commonFilterForDataModel(m,"dataConfig.dataModel.filters","dataType != 'dataModel' || dataConfig.tableType === 'retention'",l.default("数据筛选")),d.commonBindUrlParamForDataModel(m)],r.getChartConditionsHolder(m,e.chart,"crossPivot"===e.chart.dataConfig.tableType,"dataConfig.dataModel","dataType != 'dataModel' || dataConfig.tableType === 'retention'"),[d.commonLimitForDataModel,f.amisInlineSwitch("dataConfig.rateAutoCount",l.default("是否对比表格"),"dataType != 'sql'"),{type:"select",name:"dataConfig.rateStdDate",hiddenOn:"dataType != 'sql' || !dataConfig.rateAutoCount",label:l.default("数据日期"),defaultValue:"auto",options:[{label:l.default("昨天"),value:"1"},{label:l.default("前天"),value:"2"},{label:l.default("默认"),value:"auto"}]},{type:"checkboxes",label:l.default("对比项选择："),name:"dataConfig.rateCompType",hiddenOn:"data.dataType != 'sql' || !dataConfig.rateAutoCount",joinValues:!0,checkAll:!0,inline:!0,className:"sugar-inline-checkboxes",options:s},{name:"dataConfig.display",hiddenOn:"data.dataType != 'sql' || !dataConfig.rateAutoCount",children:function(a){var d=a.onChange,i=a.value;return n.createElement(o.default,t.__assign({},{onChange:d,value:i},{chartFrontendId:e.chart.frontendId,containerClassName:"form-group form-item",label:l.default("对比指标配置"),addTipText:l.default("新增对比指标"),cols:C}))}},{type:"divider",hiddenOn:"data.dataType != 'sql'"},f.amisInlineSwitch("dataConfig.autoBindData",l.default("自动绑定所有字段"),"dataType != 'sql' || dataConfig.rateAutoCount"),{name:"dataConfig.display",hiddenOn:"data.dataType != 'sql' || dataConfig.rateAutoCount",children:function(a){var d=a.onChange,i=a.value;return n.createElement(o.default,t.__assign({},{onChange:d,value:i},{chartFrontendId:e.chart.frontendId,containerClassName:"form-group form-item",label:l.default("数据列配置"),addTipText:l.default("新增数据列"),cols:v}))}},{type:"select",name:"dataConfig.redSetting",hiddenOn:"dataType != 'sql' || !dataConfig.rateAutoCount",label:l.default("通用飘红设置:"),defaultValue:"",options:o.redOrGreenOptions},{type:"text",name:"dataConfig.redSettingVal",placeholder:l.default("请输入对比值"),label:"",hiddenOn:"dataType != 'sql' || !dataConfig.rateAutoCount || !dataConfig.redSetting || dataConfig.redSetting == ''"},{type:"select",name:"dataConfig.greenSetting",hiddenOn:"dataType != 'sql' || !dataConfig.rateAutoCount",label:l.default("通用飘绿设置:"),defaultValue:"",options:o.redOrGreenOptions},{type:"text",name:"dataConfig.greenSettingVal",placeholder:l.default("请输入对比值"),label:"",hiddenOn:"dataType != 'sql' || !dataConfig.rateAutoCount || !dataConfig.greenSetting || dataConfig.greenSetting == ''"}]);return g&&g.config.openRow2Col&&T.push({name:"dataConfig.addAllRow2Col",hiddenOn:"dataType != 'sql'",children:function(e){var a=e.onChange,d=e.value;return n.createElement(i.default,t.__assign({},{onChange:a,value:d,label:l.default("绑定所有的行转列"),tipText:l.default("不了解？"),tipLink:"/docs/DataBind-SQL-Rowcol"}))}}),T=T.concat([f.amisInlineSwitch("dataConfig.openSuperHeader",l.default("开启超级表头"),"dataType != 'sql'"),{name:"dataConfig.superHeaders",hiddenOn:"data.dataType != 'sql' || !dataConfig.openSuperHeader",children:function(a){var d=a.onChange,i=a.value;return n.createElement(o.default,t.__assign({},{onChange:d,value:i},{chartFrontendId:e.chart.frontendId,containerClassName:"form-group form-item",label:l.default("超级表头配置"),addTipText:l.default("新增超级表头"),cols:b}))}}]),T.push(f.amisInlineSwitch("dataConfig.tableNum",l.default("开启表格首列序号"),"data.dataType != 'sql' || dataConfig.rateAutoCount")),y.concat(T,a)},a.advancedCtrl=function(e){var a,d=[];e.data&&e.data.columns&&e.data.columns.length&&(d=e.data.columns.map(function(e){return{label:e.name,value:e.id}}));var u=[{type:"text",key:"column",name:l.default("列名id"),placeholder:l.default("无")},{type:"text",key:"expression",name:l.default("表达式"),placeholder:l.default("无")}];return[{type:"fieldset",collapsed:!0,title:l.default("分页设置"),collapsable:!0,headingClassName:"fieldset-title",controls:[{name:"config.pagination.open",children:function(e){var a=e.onChange,d=e.value;return n.createElement(i.default,t.__assign({},{onChange:a,value:d,label:l.default("开启分页"),tipText:l.default("什么是分页？"),tipLink:"/docs/Chart-table#表格分页"}))}},{type:"number",label:l.default("每页行数"),placeholder:l.default("默认每页15行"),visibleOn:"config.pagination && config.pagination.open",name:"config.pagination.limit",step:1,min:1},{type:"radios",name:"config.pagination.mode",inline:!1,label:l.default("分页模式"),options:[{label:l.default("前端分页"),value:"local"},{label:l.default("后端分页"),value:"remote",disabled:"dataModel"===(null===(a=e.chart)||void 0===a?void 0:a.dataType)}],visibleOn:"config.pagination && config.pagination.open",desc:l.default("注：如果使用「后端分页」，SQL语句中需要添加{limit}语法，详见文档说明")},f.amisInlineSwitch("config.pagination.showTotal",l.default("显示总行数"),"!(config.pagination && config.pagination.open)")]},{type:"divider"},{type:"fieldset",collapsed:!0,title:l.default("排序设置"),collapsable:!0,headingClassName:"fieldset-title",controls:[{name:"config.sort.open",children:function(e){var a=e.onChange,d=e.value;return n.createElement(i.default,t.__assign({},{onChange:a,value:d,label:l.default("开启排序"),tipText:l.default("什么是排序？"),tipLink:"/docs/Chart-table#表格排序"}))}},{type:"radios",name:"config.sort.mode",inline:!1,label:l.default("排序模式"),options:[{label:l.default("前端排序"),value:"local"},{label:l.default("后端排序"),value:"remote",disabled:"retention"===e.chart.dataConfig.tableType}],visibleOn:"config.sort && config.sort.open",desc:l.default("注：如果使用「后端排序」SQL语句中需要添加{order by}语法，详见文档说明")},f.amisInlineSwitch("config.sort.defaultSortOpen",l.default("启动默认排序"),"!(config.sort && config.sort.open)"),{type:"select",label:l.default("默认排序的列"),placeholder:l.default("请选择"),visibleOn:"config.sort && config.sort.open && config.sort.defaultSortOpen",name:"config.sort.defaultSortKey",options:d,clearable:!0},{type:"radios",name:"config.sort.defaultSortType",inline:!1,label:l.default("排序模式"),options:[{label:l.default("从小到大"),value:"asc"},{label:l.default("从大到小"),value:"desc"}],value:"asc",visibleOn:"config.sort && config.sort.open && config.sort.defaultSortOpen"}]},{type:"divider"},{type:"fieldset",collapsed:!0,title:l.default("表格样式"),collapsable:!0,headingClassName:"fieldset-title",controls:[f.amisInlineSwitch("config.tableStriped",l.default("开启表格隔行条纹")),f.amisInlineSwitch("config.freeze.hover",l.default("鼠标悬停时显示行背景色")),{type:"select",name:"config.defaultAlign",label:l.default("单元格中文字的默认对齐方式"),value:"auto",options:[{label:l.default("自动"),value:"auto"},{label:l.default("居中"),value:"center"},{label:l.default("居左"),value:"left"},{label:l.default("居右"),value:"right"}]},{type:"group",controls:[f.amisInlineSwitch("config.hideHeader",l.default("隐藏表头")),f.amisInlineSwitch("config.tableBordered",l.default("开启单元格边框"))]},{type:"number",label:l.default("字体大小（px）"),placeholder:l.default("默认是12"),name:"config.fontSize",step:1,min:10},{type:"number",label:l.default("单元格上下间距（px）"),placeholder:l.default("默认是8"),name:"config.paddingTB",step:1,min:1},{type:"number",label:l.default("单元格左右间距（px）"),placeholder:l.default("默认是12"),name:"config.paddingLR",step:1,min:1},{type:"group",controls:[{type:"number",label:l.default("合并单元格级数"),placeholder:l.default("如：2代表合并前2列相同的项"),name:"config.combineNum.num",step:1,min:0},{type:"number",label:l.default("单元格最长字符数"),placeholder:l.default("请输入"),name:"config.maxCharLength",step:1,min:0}]}]},{type:"divider"},{type:"fieldset",collapsed:!0,title:l.default("冻结列设置"),collapsable:!0,headingClassName:"fieldset-title",controls:[f.amisInlineSwitch("config.freeze.fixHeader",l.default("固定表头")),f.amisInlineSwitch("config.freeze.fix",l.default("冻结列")),{type:"group",visibleOn:"config && config.freeze && config.freeze.fix",controls:[{type:"number",label:l.default("第一列 到 "),placeholder:l.default("如：2代表固定第一列到第二列的列单元格(超级透视表后端返回固定列时，前端设置无效)"),name:"config.freeze.frontRow",value:0,step:1,min:0},{type:"number",label:l.default("从后往前 到 "),placeholder:l.default("如：2代表固定从最后一列开始往前2列单元格"),name:"config.freeze.backRow",value:0,step:1,min:0}]},{type:"color",format:"rgba",label:l.default("冻结列背景色"),name:"config.freeze.color",visibleOn:"config && config.freeze && config.freeze.fix"},f.amisInlineSwitch("config.freeze.colorReverse",l.default("突出字体颜色"),"config && config.freeze && !config.freeze.color"),f.amisInlineSwitch("config.freeze.hover",l.default("行hover显示"))]},{type:"divider"},{type:"fieldset",collapsed:!0,title:l.default("列显隐切换控制"),collapsable:!0,headingClassName:"fieldset-title",controls:[{name:"config.hideColumn",children:function(e){var a=e.onChange,d=e.value;return n.createElement(i.default,t.__assign({},{onChange:a,value:d,label:l.default("开启列显隐切换"),tipText:l.default("什么是列显隐切换？"),tipLink:"/docs/Chart-table#表格列显隐切换",des:l.default("有超级表头时不生效")}))}},{label:l.default("默认隐藏的列"),type:"select",name:"config.defaultHideColumns",multiple:!0,joinValues:!1,options:d,hiddenOn:"!data.config.hideColumn"}]},{type:"divider"},{type:"fieldset",title:l.default("合计和均值设置"),collapsed:!0,collapsable:!0,headingClassName:"fieldset-title",controls:[{name:"config.countAll",children:function(e){var a=e.onChange,d=e.value;return n.createElement(i.default,t.__assign({},{onChange:a,value:d,label:l.default("开启表格合计"),tipText:l.default("什么是合计？"),tipLink:"/docs/Chart-table#表格合计和均值"}))}},{name:"config.countAvg",children:function(e){var a=e.onChange,d=e.value;return n.createElement(i.default,t.__assign({},{onChange:a,value:d,label:l.default("开启表格均值"),tipText:l.default("什么是均值？"),tipLink:"/docs/Chart-table#表格合计和均值"}))}},f.amisInlineSwitch("config.countAvgWith0",l.default("均值0纳入计算"),"!config.countAvg && !config.countAll"),f.amisInlineSwitch("config.countInFirstLine",l.default("合计均值放在首行"),"!config.countAvg && !config.countAll"),{type:"select",label:l.default("不需要合计或均值的列"),name:"config.unCountColums",visibleOn:"config.countAvg || config.countAll",options:d,multiple:!0,joinValues:!0,clearable:!0},{name:"config.cusCount",visibleOn:"config.countAvg || config.countAll",children:function(a){var d=a.onChange,i=a.value;return n.createElement(o.default,t.__assign({},{onChange:d,value:i},{chartFrontendId:e.chart.frontendId,containerClassName:"form-group form-item",label:l.default("均值合计自定义计算"),cols:u}))}}]},{type:"divider"},m]}});
;sugar.define("sugar:widgets/charts/table/table-helper.ts",function(require,exports,module,define){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.tableColor=exports.formatCellDisplay=exports.initRowsData=exports.combineRowsNew=exports.addCountData=exports.localSort=void 0;var tslib_1=require("sugar:node_modules/tslib/tslib.js"),i18n_1=require("sugar:utils/i18n.ts"),common_helper_1=require("sugar:utils/common-helper.ts");exports.localSort=function(e,o,a){e.sort(function(e,t){var r=1,n=-1;return"desc"===a&&(r=-1,n=1),e=e[o],t=t[o],void 0===e||"-"===e||null===e||""===e?"asc"===a?r:n:void 0===t||"-"===t||null===t||""===t?"asc"===a?n:r:("string"==typeof e&&/^\-?[\d,]+(\.\d+)?$/.test(e)&&(e=parseFloat(e.replace(/,/g,""))),"string"==typeof t&&/^\-?[\d,]+(\.\d+)?$/.test(t)&&(t=parseFloat(t.replace(/,/g,""))),"string"==typeof e&&"string"==typeof t?e.localeCompare(t)*r:e>t?r:n)})};var changeCountRowByCusCount=function(columns,addData,cusCount){void 0===cusCount&&(cusCount=[]);var columnIdByName={},columnNameById={};(columns||[]).forEach(function(e){columnIdByName[e.name]=e.id,columnNameById[e.id]=e.name});for(var result=tslib_1.__assign({},addData),i=0;i<cusCount.length;++i){var column=cusCount[i].column;if(null==addData[column]&&(column=columnIdByName[cusCount[i].column]),null!=addData[column]){var expression=cusCount[i].expression||"";for(var field in addData){if(null!=addData[field]){var newField=field.replace(/\(/g,"\\(").replace(/\)/g,"\\)"),reg=new RegExp("\\{"+newField+"\\}","g");expression=expression.replace(reg,addData[field])}var fieldName=columnNameById[field];if(null!=fieldName&&null!=addData[field]){var newField=fieldName.replace(/\(/g,"\\(").replace(/\)/g,"\\)"),reg=new RegExp("\\{"+newField+"\\}","g");expression=expression.replace(reg,addData[field])}}if(/^[\d\s\.\(\)\+\-\*\/\%]+$/.test(expression))try{result[column]=eval(expression)}catch(e){result[column]="-"}else result[column]="-"}}return result};exports.addCountData=function(e,o){if(!o.countAll&&!o.countAvg)return e;for(var a=o.unCountColums&&o.unCountColums.length?o.unCountColums.split(","):[],t=e.columns,r=e.rows,n={},l={},s=0;s<t.length;++s)l[t[s].id]="-",a.indexOf(t[s].id)<0&&(n[t[s].id]={all:0,count:0,isNum:!0,accuracy:null==t[s].accuracy?null:parseInt(t[s].accuracy,10),maxAccuracy:0});for(var s=0;s<r.length;++s)for(var i in n)if(n[i].isNum&&null!=r[s][i]&&""!==r[s][i]&&"-"!==r[s][i]){var u=r[s][i]+"";if(u.match(/^(-\d)?[\d,\.]*$/)){u=u.replace(/,/g,"");var c=parseFloat(u);if(isNaN(c))n[i].isNum=!1;else{var f=c.toString().split(".");f.length>1&&n[i].maxAccuracy<f[1].length&&(n[i].maxAccuracy=f[1].length),0!==c||o.countAvgWith0?(n[i].all+=c,n[i].count+=1):n[i].all+=c}}else n[i].isNum=!1}for(var i in n)n[i].isNum&&(l[i]=n[i].all);if(o.countAll){var d=changeCountRowByCusCount(t,l,o.cusCount);d[t[0].id]=i18n_1.default("合计");for(var i in d)n[i]&&n[i].isNum&&null==n[i].accuracy&&!isNaN(d[i])&&(d[i]=parseFloat(n[i].maxAccuracy?parseFloat(d[i]).toFixed(n[i].maxAccuracy):Math.abs(d[i])<10?parseFloat(d[i]).toFixed(2):Math.abs(d[i])<100?parseFloat(d[i]).toFixed(1):parseFloat(d[i]).toFixed(0)));d.__showx_countLine=!0,o.countInFirstLine?e.rows.splice(0,0,d):e.rows.push(d)}if(o.countAvg){var p=tslib_1.__assign({},l);for(var i in p)isNaN(p[i])||(p[i]=n[i].count>0?parseFloat(p[i])/n[i].count:0);p=changeCountRowByCusCount(t,p,o.cusCount),p[t[0].id]=i18n_1.default("均值"),p.__showx_countLine=!0;for(var i in p)n[i]&&n[i].isNum&&null==n[i].accuracy&&!isNaN(p[i])&&(p[i]=parseFloat(n[i].maxAccuracy?parseFloat(p[i]).toFixed(n[i].maxAccuracy):Math.abs(p[i])<10?parseFloat(p[i]).toFixed(2):Math.abs(p[i])<1e3?parseFloat(p[i]).toFixed(1):parseFloat(p[i]).toFixed(0)));o.countInFirstLine?e.rows.splice(0,0,p):e.rows.push(p)}return e},exports.combineRowsNew=function(e,o,a,t,r,n,l){if(t>r){for(var s=o[r],i=!1,u=a[n][s],c={key:s,value:u,rowspan:0,children:[]},f=n;l>f;++f){if(u!==a[f][s]){e.push(c),exports.combineRowsNew(e,o,a,t,r,f,l),exports.combineRowsNew(c.children,o,a,t,r+1,n,f),i=!0;break}c.rowspan+=1}i||(e.push(c),exports.combineRowsNew(c.children,o,a,t,r+1,n,l))}},exports.initRowsData=function(e,o,a,t){if(o.length&&o[t]){var r=o[t].key,n=o[t].rowspan;e[a][r+"_rowspan"]=n;for(var l=a+1;a+n>l;++l)e[l][r],e[l][r+"_rowspan"]=0;exports.initRowsData(e,o,a+n,t+1),exports.initRowsData(e,o[t].children,a,0)}},exports.formatCellDisplay=function(e,o,a,t,r,n){return void 0===t&&(t=null),void 0===r&&(r=!0),void 0===n&&(n=!1),e.dataFormat&&null!=o&&"-"!==o?o=common_helper_1.formatDataByType(o,e.dataFormat,t||void 0):r&&(o=common_helper_1.formatStringOrNumber(o,t,!1,n)),null==o||""===o?o="-":a&&"-"!==o?o=""+o+a:"object"==typeof o?o=JSON.stringify(o):"boolean"==typeof o&&(o=""+o),o},exports.tableColor=function(e,o,a){var t;void 0===a&&(a=!1);var r="rgb(245, 245, 245)",n="rgba(51, 51, 51, 0.85)",l="transparent",s="#455458",i="#e8e8e8";e.isDashChart&&!a&&(r="#0086b6",n="#ffffff",s="#ffffff",i="#ffffff");var u=[],c=e.config,f="";o.config&&(u=(null===(t=o.config.chartTheme)||void 0===t?void 0:t.color)||[],f=o.config.titleColor||u[3]),c.openCustomColor&&"report"===c.customColorType&&(r=u[0]||r,s=f||s);var d=s.replace(/\s+/g,"").toLowerCase();return e.isDashChart||"rgba(255,255,255,1)"!==d&&"rgb(255,255,255)"!==d&&"#fff"!==d&&"#ffff"!==d&&"#ffffff"!==d||(s="#455458"),c.openCustomColor&&"custom"===c.customColorType&&(r=c.titleBg||r,n=c.titleColor||n,l=c.contentBg||l,s=c.contentColor||s,i=c.lineColor||i),{_titleBg:r,_titleColor:n,_contentBg:l,_contentColor:s,_lineColor:i}}});
;sugar.define("sugar:widgets/scrollbar.tsx",function(o,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var e=o("sugar:node_modules/tslib/tslib.js"),t=o("sugar:node_modules/react/index.js"),r=o("sugar:node_modules/perfect-scrollbar/index.js"),i={"ps-scroll-y":"onScrollY","ps-scroll-x":"onScrollX","ps-scroll-up":"onScrollUp","ps-scroll-down":"onScrollDown","ps-scroll-left":"onScrollLeft","ps-scroll-right":"onScrollRight","ps-y-reach-start":"onYReachStart","ps-y-reach-end":"onYReachEnd","ps-x-reach-start":"onXReachStart","ps-x-reach-end":"onXReachEnd"};Object.freeze(i);var c=function(o){function n(n){var e=o.call(this,n)||this;return e.handleRef=function(o){e._container=o,e.props.containerRef&&e.props.containerRef(o)},e._handlerByEvent=new Map,e}return e.__extends(n,o),n.prototype.componentDidMount=function(){var o=this;r.initialize(this._container,this.props.option),Object.keys(i).forEach(function(n){var e=o.props,t=i,r=e[t[n]];if(r){var c=function(){return r(o._container)};o._handlerByEvent.set(n,c),o._container.addEventListener(n,c,!1)}})},n.prototype.componentDidUpdate=function(){r.update(this._container)},n.prototype.componentWillUnmount=function(){var o=this;Object.keys(this._handlerByEvent).forEach(function(n,e){o._container.removeEventListener(e,n,!1)}),this._handlerByEvent.clear(),r.destroy(this._container)},n.prototype.setScrollTop=function(o){return this._container?(this._container.scrollTop=o,r.update(this._container),!0):!1},n.prototype.setScrollLeft=function(o){return this._container?(this._container.scrollLeft=o,r.update(this._container),!0):!1},n.prototype.render=function(){var o=this.props,n=o.children,e=o.className;return t.createElement("div",{style:{position:"relative",height:"100%"},className:"scrollbar-container "+e,ref:this.handleRef},n)},n.displayName="ScrollBar",n.defaultProps={className:"",option:void 0,containerRef:function(){},onScrollY:void 0,onScrollX:void 0,onScrollUp:void 0,onScrollDown:void 0,onScrollLeft:void 0,onScrollRight:void 0,onYReachStart:void 0,onYReachEnd:void 0,onXReachStart:void 0,onXReachEnd:void 0},n}(t.Component);n.default=c});
;sugar.define("sugar:widgets/charts/table/table-fix-row.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=e("sugar:node_modules/tslib/tslib.js"),l=e("sugar:node_modules/react/index.js"),o=e("sugar:node_modules/classnames/index.js"),i=e("sugar:node_modules/xss/lib/index.js"),a=e("sugar:node_modules/lodash/cloneDeep.js"),s=e("sugar:node_modules/amis/lib/index.js"),n=e("sugar:widgets/scrollbar.tsx"),d=e("sugar:utils/xssOption.ts"),h=e("sugar:widgets/charts/table/table-helper.ts"),c=e("sugar:utils/color-helper.ts"),p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.headerHeight=0,t}return r.__extends(t,e),t.prototype.componentWillMount=function(){this.tableScrollTop=this.tableScrollTop.bind(this),this.tableHeaderFix=this.tableHeaderFix.bind(this),this.tableOnMouse=this.tableOnMouse.bind(this)},t.prototype.tableHeaderFix=function(e){"fixed"===e.position?(this.refs.fixFirstColHead&&(this.refs.fixFirstColHead.style.position="fixed",this.refs.fixFirstColHead.style.top=e.top+"px"),this.refs.fixFirstColBody&&(this.refs.fixFirstColBody.style.marginTop=this.headerHeight+"px")):(this.refs.fixFirstColHead&&(this.refs.fixFirstColHead.style.position="relative",this.refs.fixFirstColHead.style.top="0px"),this.refs.fixFirstColBody&&(this.refs.fixFirstColBody.style.marginTop="-1px"))},t.prototype.tableScrollTop=function(e){var t,r=this.props,l=r.containerHeight,o=r.tableHeight,i=r.tableContainerWidth,a=r.config,s=r.scroll;if(this.refs.scrollBar&&e.hasOwnProperty("scrollTop")&&(this.refs.scrollBar.setScrollTop(e.scrollTop),this.fixRowTableHeight(),e.hasOwnProperty("scrollHeight"))){var n=0;navigator.userAgent.indexOf("Firefox")&&(n=50),(e.scrollHeight||0)-(l+e.scrollTop)<=n&&s.scrollVertical&&this.refs.fixFirstCol&&this.refs.fixFirstColBody&&(null===(t=a.pagination)||void 0===t?void 0:t.open)&&s.scrollVertical&&(this.refs.fixFirstCol.style.height=o-e.scrollTop+1+"px",this.refs.fixFirstColBody.style.height=o-e.scrollTop-this.headerHeight+"px",this.refs.scrollBar.setScrollTop(e.scrollTop))}e.hasOwnProperty("scrollLeft")&&this.refs.fixFirstCol&&((e.scrollLeft||0)>0?"right"===this.props.position?(this.refs.fixFirstCol.style.boxShadow="-2px 0 6px -2px rgba(0,0,0,.2)",this.refs.fixFirstCol.style.display="block",e.hasOwnProperty("scrollWidth")&&(e.scrollWidth||0)-(i+(e.scrollLeft||0))<=10&&(this.refs.fixFirstCol.style.display="none",this.refs.fixFirstCol.style.boxShadow="none")):(this.refs.fixFirstCol.style.boxShadow="2px 0 6px -2px rgba(0,0,0,.2)",this.refs.fixFirstCol.style.display="block"):"left"===this.props.position?this.refs.fixFirstCol.style.display="none":null)},t.prototype.fixRowTableHeight=function(){var e=this.props,t=e.scroll,r=e.tableContainerHeight;t.scrollStandard&&this.refs.fixFirstCol&&this.refs.fixFirstColBody&&(this.refs.fixFirstCol.style.height=r-7+"px",this.refs.fixFirstColBody.style.height=r-this.headerHeight-8+"px"),!t.scrollVertical&&this.refs.fixFirstCol&&this.refs.fixFirstColBody&&(this.refs.fixFirstCol.style.height=r+1+"px",this.refs.fixFirstColBody.style.height=r-this.headerHeight+"px")},t.prototype.tableOnMouse=function(e){var t=this.props.rows;e.isHover&&this.refs["normalTableTr"+e.index]&&!this.props.isDashChart&&(this.refs["normalTableTr"+e.index].style.background="#efefef"),e.isHover&&this.refs["normalTableTr"+e.index]&&this.props.isDashChart&&(this.refs["normalTableTr"+e.index].style.background="rgba(200, 200, 200, 0.3)"),!e.isHover&&this.refs["normalTableTr"+e.index]&&(this.refs["normalTableTr"+e.index].style.background=t[e.index].table_line_background?t[e.index].table_line_background:"transparent")},t.prototype.componentDidUpdate=function(){this.fixRowTableHeight()},t.prototype.render=function(){var e=this,t=this.props,r=t.tableFixRowStyle,p=t.config,f=t.thSizeArr,g=t.rows,u=t.columns,b=t.offset,x=t.events,m=t.superHeaders,y=t.superHeaderThSizeArr,w=t.sort,C=t.sortKey,_=t.sortType,v=t.fixRow,T=t.isDashChart,k=t.parentId,B=t.position,H=t.paginationInfo,F=t.dependenceState,S=t.tableContainerHeight,E=t.scroll,N=[],z=[],A=v||p.freeze&&p.freeze.fix&&p.freeze.frontRow,O=[],I=[];(v||p.freeze&&p.freeze.fix)&&("right"===B?(A=p.freeze&&p.freeze.fix&&p.freeze.backRow,u.length&&u.length===f.length?z=u.slice(-A):null,f.length&&u.length===f.length?I=f.slice(-A):null):(u.length&&u.length===f.length?z=u.slice(0,A):null,f.length&&u.length===f.length?I=f.slice(0,A):null),m.length&&m.length===y.length&&m.forEach(function(e,t){var r=0;if("right"===B){var l=a(e).reverse();e.length&&l.every(function(o,i){return r+=o.colspan,r>=A?(o.newColspan=A-(r-o.colspan),e.length&&N.push(l.slice(0,i+1).reverse()),y.length&&O.push(y[t].slice(-(i+1))),!1):!0})}else e.length&&e.every(function(l,o){return r+=l.colspan,r>=A?(l.newColspan=A-(r-l.colspan),e.length&&N.push(e.slice(0,o+1)),y.length&&O.push(y[t].slice(0,o+1)),!1):!0})}));var L=0;I.every(function(e,t){return A>t?(L+=e[0],!0):!1});var M=f.length?f[0][1]:0;m.length&&y.forEach(function(e,t){e.length&&(M+=e[t][1])}),this.headerHeight=M;var R={position:"absolute",width:L+1+"px",height:E.scrollStandard&&!T?S-8+"px":S+"px",background:T?"rgba(146, 146, 146)":"#fff",overflow:"hidden",zIndex:2,borderColor:r.lineColor,borderBottom:"solid 1px #e8e8e8",borderTop:"1px solid rgb(232, 232, 232)",display:"none",top:0};p.freeze&&p.freeze.color&&(R.background=p.freeze.color,p.freeze.colorReverse&&(R.color=c.colorReverse(p.freeze.color))),R[B]="left"===B?"3px":E.scrollVertical?"10px":"3px";var W={position:"relative",width:L+1+"px",color:r.titleColor,background:r.titleBg,zIndex:2,border:"none"},P=-1,j=void 0;F&&(j=F.colId,P=F.rowIndex);var D=p.maxCharLength?parseInt(p.maxCharLength,10):0,V=m.length&&!p.hideHeader?l.createElement("thead",{className:"superHeader",ref:"theVeryTableHeader",style:{background:r.titleBg,color:r.titleColor}},N.map(function(e,t){var o=!1;return l.createElement("tr",{key:t},e&&e.map?e.map(function(e,i){var a={borderColor:r.lineColor,fontSize:1+parseInt(p.fontSize||12,10),padding:(p.paddingTB||8)+"px "+(p.paddingLR||12)+"px",height:O[t][i][1],width:O[t][i][0]};return void 0===e.name&&(a.borderBottom="solid 1px "+r.titleBg),o=o||e.name,e.colspan>0&&(e.name||!o)?l.createElement("th",{key:i,colSpan:e.colspan,style:a},e.name):null}):null)})):null,$=p.hideHeader?null:l.createElement("thead",{className:"normalHeader",ref:"normalHeader",style:{background:r.titleBg,color:r.titleColor}},l.createElement("tr",null,z.map(function(t,a){var n={borderColor:r.lineColor,fontSize:1+parseInt(p.fontSize||12,10),padding:(p.paddingTB||8)+"px "+(p.paddingLR||12)+"px",width:I[a][0]};return p.defaultAlign&&"auto"!==p.defaultAlign&&(n.textAlign=p.defaultAlign),t.textAlign&&(n.textAlign=t.textAlign),t.autoWrap&&(n.wordWrap="break-word",n.wordBreak="break-all",n.whiteSpace="normal"),t.width&&(n.width=/^\d+$/.test(t.width)?t.width+"px":t.width),t.headerBgColor&&(n.background=t.headerBgColor),l.createElement("th",{key:a,className:o({"text-right":0!==a,"text-left":0===a,"text-highlight":w.open&&C===t.id,"text-cursor":w.open}),style:n,onClick:function(r){return e.props.sortChange(r,t.id)}},l.createElement("div",{style:{width:I[a][0]-1-2*(p.paddingLR||12),display:"inline-block"}},t.name,t.remark?l.createElement(s.TooltipWrapper,{tooltip:i(t.remark,d.xssOption),placement:"bottom"},l.createElement("i",{className:"fa fa-question-circle m-l-xs hidden-xs"})):null,w.open?l.createElement("i",{className:C===t.id?"asc"===_?"fa fa-arrow-up":"desc"===_?"fa fa-arrow-down":"fa fa-sort fa-fw":"fa fa-sort fa-fw"}):null))}))),q=/Safari/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent),Q=navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i),U=(v||p.freeze&&p.freeze.fix)&&f.length===u.length&&f.length&&(q||Q||E.scrollStandard)?l.createElement("div",{ref:"fixFirstCol",id:"fix-first-col",style:R},!p.hideHeader&&l.createElement("div",{ref:"fixFirstColHead",className:"fix-first-col-super-head",style:W},l.createElement("table",{className:o("table",{"table-striped":0===r.combineNum&&!!p.tableStriped,"table-bordered":!!p.tableBordered,"dashboard-table":!!T,"table-tbody-striped":r.combineNum>0,"table-thead-striped":m.length>0}),ref:"theVeryTable",style:{borderColor:r.lineColor}},V,$)),l.createElement("div",{ref:"fixFirstColBody",className:"fix-first-col-body",style:{position:"relative",overflowY:"hidden",height:E.scrollStandard&&!T?S-M-8+"px":S-M+"px",border:"none"}},l.createElement(n.default,{ref:"scrollBar",onScrollY:function(t){return e.props.onScroll({scrollTop:t.scrollTop})}},l.createElement("table",{className:o("table",{"table-striped":0===r.combineNum&&!!p.tableStriped,"table-bordered":!!p.tableBordered,"dashboard-table":!!T,"table-tbody-striped":r.combineNum>0,"table-thead-striped":m.length>0}),style:{borderColor:r.lineColor}},l.createElement("tbody",{ref:"normalTableTbody",style:{borderColor:r.lineColor}},g.map(function(t,a){var n=H.pagination.open&&H.limit<H.total?a+b:a;return l.createElement("tr",{ref:"normalTableTr"+a,key:a,onClick:function(r){return e.props.handleLineClick(r,t,n)},className:o("normalTableTr",{"table-tr-red":"red"===t.__showx_row_level,"table-tr-green":"green"===t.__showx_row_level,"table-tr-cursor":t.__showx_countLine,"table-tr-dependence":n===P,"table-dashboard":!!T}),onMouseOver:function(){return e.props.onMouseOver(a)},onMouseOut:function(){return e.props.onMouseOut(a)},style:{backgroundColor:t.table_line_background?t.table_line_background:r.contentBg}},u.map(function(c,f){var g,b,m,y="right"===B?A-(u.length-f):f;if(0!==t[c.id+"_rowspan"]&&0!==t[c.id+"_colspan"]){var w=h.formatCellDisplay(c,t[c.id],c.unit,c.accuracy);t[c.id+"_ishtml"]?w=l.createElement("div",{dangerouslySetInnerHTML:{__html:i(w,d.xssOption)}}):D&&(w=e.props.getMaxCharCell(w,D)),x.cols[c.id]&&!t.__showx_countLine&&(w=l.createElement("span",{className:"cell-can-click",onClick:function(r){return e.props.handleColsClick(r,t,c.id,n)}},w));var C="right"===B?u.length-f-1<A:A>f;if(C){var _={borderColor:r.lineColor,fontSize:parseInt(p.fontSize||12,10),padding:(p.paddingTB||8)+"px "+(p.paddingLR||12)+"px",width:I.length&&I[y][0]};(null===(m=null===(b=null===(g=document.getElementById(k))||void 0===g?void 0:g.getElementsByClassName("normalTableTr")[a])||void 0===b?void 0:b.getElementsByTagName("td")[f])||void 0===m?void 0:m.clientHeight)&&(_.height=document.getElementById(k).getElementsByClassName("normalTableTr")[a].getElementsByTagName("td")[f].clientHeight+(Q?0:1)),p.defaultAlign&&"auto"!==p.defaultAlign&&(_.textAlign=p.defaultAlign),c.textAlign&&(_.textAlign=c.textAlign),t.__showx_countLine&&(_.backgroundColor=T?"transparent":"#f5fbff"),c.autoWrap&&(_.wordWrap="break-word",_.wordBreak="break-all",_.whiteSpace="normal"),t[c.id+"_noPadding"]&&(_.padding="0px",_.lineHeight="30px"),t[c.id+"_background"]&&(_.background=t[c.id+"_background"],_.color="rgb(85, 85, 85)");var v={};return t[c.id+"_bar_background"]&&(v.background=t[c.id+"_bar_background"]),t[c.id+"_bar_width"]&&(v.width=t[c.id+"_bar_width"],_.textAlign=c.textAlign?c.textAlign:"left"),t.table_line_color&&(_.color=t.table_line_color),t[c.id+"_color"]&&(_.color=t[c.id+"_color"]),c.width&&/^\d+(px)?$/.test(c.width)?w=c.autoWrap?l.createElement("div",{style:{wordWrap:"break-word",wordBreak:"break-all",whiteSpace:"normal",width:/^\d+$/.test(c.width)?c.width+"px":c.width}},w):l.createElement("div",{style:{width:/^\d+$/.test(c.width)?c.width+"px":c.width,overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},title:"string"==typeof w?w:""},w):c.width&&(_.width=/^\d+$/.test(c.width)?c.width+"px":c.width),l.createElement("td",{key:f,rowSpan:null==t[c.id+"_rowspan"]?1:t[c.id+"_rowspan"],colSpan:null==t[c.id+"_colspan"]?1:t[c.id+"_colspan"],className:o("table-td-"+t[c.id+"_level"],{"text-right":0!==f,"text-left":0===f,"text-dependence":c.id===j&&n===P}),style:_},t[c.id+"_bar_width"]&&l.createElement("div",{className:"table-td-content"},l.createElement("div",{className:"table-td-line-bar",style:v}),l.createElement("div",{className:"table-td-line-content"},w)),!t[c.id+"_bar_width"]&&w,t[c.id+"__sugar_remark"]?l.createElement(s.TooltipWrapper,{tooltip:i(t[c.id+"__sugar_remark"],d.xssOption),placement:"bottom"},l.createElement("i",{className:"fa fa-question-circle m-l-xs hidden-xs"})):null)}return null}return null}))})))))):null;return U},t.displayName="TableFixRow",t}(l.Component);t.default=p});
;sugar.define("sugar:widgets/charts/table/table-fix-header.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=e("sugar:node_modules/tslib/tslib.js"),r=e("sugar:node_modules/react/index.js"),o=e("sugar:node_modules/classnames/index.js"),a=e("sugar:node_modules/amis/lib/index.js"),i=e("sugar:node_modules/xss/lib/index.js"),n=e("sugar:widgets/scrollbar.tsx"),s=e("sugar:utils/xssOption.ts"),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return l.__extends(t,e),t.prototype.componentWillMount=function(){this.fixRowScroll=this.fixRowScroll.bind(this),this.tableScrollLeft=this.tableScrollLeft.bind(this),this.tableHeaderFix=this.tableHeaderFix.bind(this),this.setState({position:"absolute"})},t.prototype.tableScrollLeft=function(e){this.setState({position:e.position}),this.refs.scrollBar&&this.refs.scrollBar.setScrollLeft(e.scrollLeft)},t.prototype.tableHeaderFix=function(e){this.refs.fixHeader&&(this.refs.fixHeader.style.position=e.position,this.refs.fixHeader.style.top=e.top+"px")},t.prototype.fixRowScroll=function(e){var t=e.scrollLeft;this.props.onScroll({scrollLeft:t})},t.prototype.render=function(){var e=this,t=this.props,l=t.tableFixHeaderStyle,d=t.config,c=(t.dataConfig,t.thSizeArr),u=t.columns,p=t.sort,f=t.sortKey,m=t.sortType,h=t.showFixedDiv,g=t.superHeaders,b=t.isDashChart,x=t.scroll,y=t.parentId,w={position:"absolute",width:l.tableContainerWidth,color:l.titleColor,background:l.titleBg,overflowX:"auto",zIndex:2,transition:"transform .4s ease-in-out",top:0},v=!d.hideHeader&&h&&c.length&&("fixed"===this.state.position||x.scrollVertical)?r.createElement("div",{ref:"fixHeader",className:"fix-header",style:w},r.createElement(n.default,{ref:"scrollBar",onScrollX:function(t){return e.fixRowScroll({scrollLeft:t.scrollLeft})}},r.createElement("table",{className:o("table",{"table-striped":0===l.combineNum&&!!d.tableStriped,"table-bordered":!!d.tableBordered,"dashboard-table":!!b,"table-tbody-striped":l.combineNum>0,"table-thead-striped":g.length>0}),ref:"theVeryTable",style:{borderColor:l.lineColor}},g.length&&!d.hideHeader?r.createElement("thead",{className:"superHeader",ref:"theVeryTableHeader",style:{background:l.titleBg,color:l.titleColor}},g.map(function(e,t){var o=!1;return r.createElement("tr",{key:t},e&&e.map?e.map(function(e,t){var a={borderColor:l.lineColor,fontSize:1+parseInt(d.fontSize||12,10),padding:(d.paddingTB||8)+"px "+(d.paddingLR||12)+"px"};return void 0===e.name&&(a.borderBottom="solid 1px "+l.titleBg),o=o||e.name,e.colspan>0&&(e.name||!o)?r.createElement("th",{key:t,colSpan:e.colspan,style:a},e.name):null}):null)})):null,d.hideHeader?null:r.createElement("thead",{className:"normalHeader",ref:"normalHeader",style:{background:l.titleBg,color:l.titleColor}},r.createElement("tr",null,u.map(function(t,n){var c,u,h,g,b={borderColor:l.lineColor,fontSize:1+parseInt(d.fontSize||12,10),padding:(d.paddingTB||8)+"px "+(d.paddingLR||12)+"px"};d.defaultAlign&&"auto"!==d.defaultAlign&&(b.textAlign=d.defaultAlign),t.textAlign&&(b.textAlign=t.textAlign),t.autoWrap&&(b.wordWrap="break-word",b.wordBreak="break-all",b.whiteSpace="normal"),t.width&&(b.width=/^\d+$/.test(t.width)?t.width+"px":t.width),t.headerBgColor&&(b.background=t.headerBgColor);var x={display:"inline-block"};if(null===(u=null===(c=document.getElementById(y))||void 0===c?void 0:c.getElementsByClassName("normalHeader")[0])||void 0===u?void 0:u.getElementsByTagName("th")[n]){var w=null===(g=null===(h=document.getElementById(y))||void 0===h?void 0:h.getElementsByClassName("normalHeader")[0])||void 0===g?void 0:g.getElementsByTagName("th")[n];x.width=w.offsetWidth-(w.clientLeft+(w.clientRight||0))-2*(d.paddingLR||12)}return r.createElement("th",{key:n,className:o({"text-right":0!==n,"text-left":0===n,"text-highlight":p.open&&f===t.id,"text-cursor":p.open}),style:b,onClick:function(l){return e.props.sortChange(l,t.id)}},r.createElement("div",{style:x},t.name,t.remark?r.createElement(a.TooltipWrapper,{tooltip:i(t.remark,s.xssOption),placement:"bottom"},r.createElement("i",{className:"fa fa-question-circle m-l-xs hidden-xs"})):null,p.open?r.createElement("i",{className:f===t.id?"asc"===m?"fa fa-arrow-up":"desc"===m?"fa fa-arrow-down":"fa fa-sort fa-fw":"fa fa-sort fa-fw"}):null))})))))):null;return v},t.displayName="TableFixHeader",t}(r.Component);t.default=d});
;sugar.define("sugar:widgets/charts/table/table.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=e("sugar:node_modules/tslib/tslib.js"),r=e("sugar:utils/i18n.ts"),a=e("sugar:node_modules/react/index.js"),n=e("sugar:node_modules/react-mixin/index.js"),i=e("sugar:node_modules/classnames/index.js"),l=e("sugar:node_modules/react-dom/index.js"),s=e("sugar:node_modules/lodash/debounce.js"),d=e("sugar:node_modules/lodash/isEqual.js"),h=e("sugar:node_modules/lodash/cloneDeep.js"),c=e("sugar:node_modules/xss/lib/index.js"),u=e("sugar:widgets/pagination.tsx"),f=e("sugar:node_modules/amis/lib/index.js"),g=e("sugar:widgets/charts/chart-manager.tsx"),p=e("sugar:widgets/charts/table/table-ctrl.tsx"),m=e("sugar:stores/index.ts"),b=e("sugar:widgets/charts/_hoc/debug/debug.tsx"),v=e("sugar:widgets/charts/_hoc/toolbar/toolbar.tsx"),w=e("sugar:widgets/charts/_hoc/drill-down/drill-down.tsx"),_=e("sugar:widgets/charts/_hoc/chart-warning/index.tsx"),x=e("sugar:widgets/charts/_hoc/chart-zoom/index.tsx"),C=e("sugar:widgets/charts/_mixin/common.tsx"),y=e("sugar:utils/resize-sensor.ts"),T=e("sugar:utils/common-helper.ts"),H=e("sugar:utils/xssOption.ts"),E=e("sugar:widgets/charts/table/table-helper.ts"),S=e("sugar:utils/export-file/export-excel.ts"),D=e("sugar:utils/export-file/export-csv.ts"),k=e("sugar:widgets/charts/table/table-fix-row.tsx"),F=e("sugar:widgets/charts/table/table-fix-header.tsx"),R=function(e){function t(t){var o=e.call(this,t)||this;o.canFindDom=!1,o.oldHideColumnIds=[],o.hideColumnIds=[];var r=t.chart.config;return r.sort||(r.sort={}),o.state={defaultLimit:15,thSizeArr:[],trSizeArr:[],superHeaderThSizeArr:[],tableContainerWidth:0,tableContainerHeight:0,containerHeight:0,tableHeight:0,showFixedDiv:!0,tableShow:!1,update:!1},t.hub.setChartConfigData({offset:0,sortKey:r.sort.defaultSortOpen?r.sort.defaultSortKey:"",sortType:r.sort.defaultSortOpen?r.sort.defaultSortType||"asc":""}),o.headerHeight="editor"===o.props.mode?60:50,/^\/(report|dashboard)\//.test(window.location.pathname)&&(o.headerHeight=0),o.handleLineClick=o.handleLineClick.bind(o),o.tableScroll=o.tableScroll.bind(o),o.sortChange=o.sortChange.bind(o),o.handleColsClick=o.handleColsClick.bind(o),o.onPageClick=o.onPageClick.bind(o),o.resizeEvent=o.resizeEvent.bind(o),o._export_table_through_api=o._export_table_through_api.bind(o),o.fixRowScroll=o.fixRowScroll.bind(o),o.onMouseOver=o.onMouseOver.bind(o),o.onMouseOut=o.onMouseOut.bind(o),o.handleColumn=o.handleColumn.bind(o),o.updateColumn=s(o.updateColumn.bind(o),50),o}o.__extends(t,e),t.prototype.formatData=function(e){var t;if(!this.state)return{invalid:!0,errorMsg:r.default("数据有误")};var a=this.props.hub.configData,n=o.__assign({},e.chart.config),i={columns:[],superHeaders:[],rows:[],total:0,offset:0,limit:this.state.defaultLimit,pagination:{},sort:{},sortKey:a.sortKey,sortType:a.sortType,download:{},exportRows:[]},l=h(e.hub.data.data);if(l=o.__assign({rows:[],columns:[],superHeaders:[]},l),!(l.columns&&l.columns.length&&l.rows&&l.rows.length))return i;var s=this.props.hub.configData.offset;i.offset=s;var d=l.columns,c=l.superHeaders||[],u=l.rows;if(u&&u instanceof Array&&n.sort.open&&("local"===n.sort.mode&&i.sortKey||"remote"===n.sort.mode&&"__sugar_showx_table_number"===i.sortKey)&&E.localSort(u,i.sortKey,i.sortType),l=E.addCountData(l,n),d=l.columns,c=l.superHeaders||[],u=l.rows,i.pagination=n.pagination,i.sort=n.sort,i.download=n.download,i.columns=d,i.superHeaders=c,d&&d instanceof Array){for(var f=0,g=0;g<d.length;++g)if(d[g].id===i.sortKey){f=1;break}f||(i.sortType="",i.sortKey="")}else i.sortType="",i.sortKey="";i.rows=u,i.exportRows=u,i.total=u.length,(null===(t=n.pagination)||void 0===t?void 0:t.open)&&(i.limit=n.pagination.limit||this.state.defaultLimit,"local"!==n.pagination.mode&&n.pagination.mode?i.total=l.total:(i.rows=u.slice(s,Math.min(s+i.limit,i.total)),u.length&&(s>=i.total||s<i.limit)&&(s=0,i.offset=0,i.rows=u.slice(s,Math.min(s+i.limit,i.total)))));var p=n.combineNum&&n.combineNum.num?n.combineNum.num:0;l&&l.combineNum&&(p=l.combineNum);for(var m=[],b=[],g=0;g<i.columns.length;++g)b.push(i.columns[g].id);for(var g=0;g<b.length;++g)for(var v=0;v<i.rows.length;++v)i.rows[v][b[g]+"_rowspan"]=1;if(i.rows.length){var w="sql"===e.chart.dataType&&e.chart.dataConfig.tableNum&&!e.chart.dataConfig.rateAutoCount;E.combineRowsNew(m,b,i.rows,w?p+1:p,w?1:0,0,i.rows.length),E.initRowsData(i.rows,m,0,0)}return i},t.prototype.offset=function(e){for(var t=0;e.offsetParent;)t+=e.offsetTop,e=e.offsetParent;return t},t.prototype.tableScroll=function(){var e;if(this.refs.normalHeader){var t=void 0;if(null===(e=document.getElementsByClassName("drill-down-modal"))||void 0===e?void 0:e.length){var o=document.getElementsByClassName("drill-down-modal")[0];t=o?o.scrollTop:0,this.headerHeight=0}else if("editor"===this.props.mode){var r=document.getElementById("editor-body");t=r?r.scrollTop+this.headerHeight:0}else t=(document.documentElement.scrollTop||document.body.scrollTop||window.pageYOffset)+this.headerHeight;var a=t-this.offset(this.refs.normalHeader),n=Math.min(this.dom.clientHeight,this.refs.theVeryTable.offsetHeight),i="absolute",l=1;0>a||0>n-100-a?(i="absolute",l=1,this.refs.tableFixHeader&&this.refs.tableFixHeader.tableHeaderFix({position:i,top:l}),this.refs.tableFixRowleft&&this.refs.tableFixRowleft.tableHeaderFix({position:i,top:l}),this.refs.tableFixRowright&&this.refs.tableFixRowright.tableHeaderFix({position:i,top:l})):a>=0&&n-100-a>=0&&(i="fixed",l=this.headerHeight,this.refs.tableFixHeader&&this.refs.tableFixHeader.tableHeaderFix({position:i,top:l}),this.refs.tableFixRowleft&&this.refs.tableFixRowleft.tableHeaderFix({position:i,top:l}),this.refs.tableFixRowright&&this.refs.tableFixRowright.tableHeaderFix({position:i,top:l})),this.refs.tableFixRowleft&&this.refs.tableFixRowleft.tableScrollTop({scrollTop:this.dom.scrollTop,scrollHeight:this.dom.scrollHeight}),this.refs.tableFixRowright&&this.refs.tableFixRowright.tableScrollTop({scrollTop:this.dom.scrollTop,scrollHeight:this.dom.scrollHeight}),this.refs.tableFixHeader&&this.refs.tableFixHeader.tableScrollLeft({scrollLeft:this.dom.scrollLeft,position:i}),this.refs.tableFixRowleft&&this.refs.tableFixRowleft.tableScrollTop({scrollLeft:this.dom.scrollLeft,scrollWidth:this.dom.scrollWidth}),this.refs.tableFixRowright&&this.refs.tableFixRowright.tableScrollTop({scrollLeft:this.dom.scrollLeft,scrollWidth:this.dom.scrollWidth})}},t.prototype.fixRowScroll=function(e){this.refs.tableContainer&&(e.hasOwnProperty("scrollTop")?this.refs.tableContainer.scrollTop=e.scrollTop||0:null,e.hasOwnProperty("scrollLeft")?this.refs.tableContainer.scrollLeft=e.scrollLeft||0:null)},t.prototype._initResizeSensor=function(){this.unWatchResize&&this.unWatchResize();var e=this.dom;e&&(this.unWatchResize=y.resizeSensor(e,s(this.resizeEvent,150)))},t.prototype.resizeEvent=function(){var e=this.props.chart,t=this.state.tableContainerHeight;if((e.config.hideHeader||this.refs.normalHeader&&this.dom)&&this.refs.tableContainer){var o=e.config.hideHeader?this.refs.normalTableTr&&this.refs.normalTableTr.getElementsByTagName("td"):this.refs.normalHeader&&this.refs.normalHeader.getElementsByTagName("th");o=o||[];var r=[],a=this.refs.tableContainer.clientWidth,n=0,i=0;n=this.refs.theVeryTable.offsetHeight,i=this.refs.tableContainer.offsetHeight;for(var l=0;l<o.length;l++)r.push([o[l].clientWidth+o[l].clientLeft,o[l].clientHeight+o[l].clientTop,o[l].clientLeft,o[l].clientTop]);t!==Math.min(i,n)&&this.setState({tableContainerHeight:Math.min(i,n)}),d(r,this.state.thSizeArr)&&a===this.state.tableContainerWidth||this.setState({thSizeArr:r,tableContainerWidth:a,containerHeight:i,tableHeight:n})}if(this.refs.theVeryTableHeader&&this.refs.tableContainer&&this.dom){var s=this.refs.theVeryTableHeader.getElementsByTagName("th"),h=this.refs.theVeryTableHeader.childNodes||[],c=[],u=0;h.forEach(function(e,t){if(e.childElementCount>0){c[t]=[];for(var o=u;o<u+e.childElementCount;o++)s[o]&&c[t].push([s[o].clientWidth+s[o].clientLeft,s[o].clientHeight+s[o].clientTop,s[o].clientLeft,s[o].clientTop]);u+=e.childElementCount}}),d(c,this.state.superHeaderThSizeArr)||this.setState({superHeaderThSizeArr:c})}},t.prototype.sortChange=function(e,t){var o=this.props.chart.config,r=this.props.hub.configData,a=r.sortType;a=t===r.sortKey?""===a?"asc":"asc"===a?"desc":"asc":"asc",o.sort&&o.sort.open&&(this.props.hub.setChartConfigData({sortKey:t,sortType:a}),"remote"===o.sort.mode&&"__sugar_showx_table_number"!==t&&(this.props.chart.loadData(this.props.mode),this.setState({showFixedDiv:!1})))},t.prototype.handleLineClick=function(e,t,r){var a,n,i,l,s,d,h,c,u,f,g,p;if(!t.__showx_countLine){var m=this.props.hub.data.data,b="";if(m.columns&&m.columns.length){var v=m.columns[0].id;m.columns[1]&&"__sugar_showx_table_number"===v&&(v=m.columns[1].id),b=t[v],t.hasOwnProperty(v+"_sugar_origin")&&(b=t[v+"_sugar_origin"]),t.hasOwnProperty("_sugar_extra")&&(b=t._sugar_extra)}if(this.events.line){var w=void 0,_=void 0;if((null===(a=null===e||void 0===e?void 0:e.target)||void 0===a?void 0:a.getAttribute("data-colindex"))?_=null===(n=null===e||void 0===e?void 0:e.target)||void 0===n?void 0:n.getAttribute("data-colindex"):(null===(l=null===(i=null===e||void 0===e?void 0:e.target)||void 0===i?void 0:i.parentElement)||void 0===l?void 0:l.getAttribute("data-colindex"))?_=null===(d=null===(s=null===e||void 0===e?void 0:e.target)||void 0===s?void 0:s.parentElement)||void 0===d?void 0:d.getAttribute("data-colindex"):(null===(u=null===(c=null===(h=null===e||void 0===e?void 0:e.target)||void 0===h?void 0:h.parentElement)||void 0===c?void 0:c.parentElement)||void 0===u?void 0:u.getAttribute("data-colindex"))&&(_=null===(p=null===(g=null===(f=null===e||void 0===e?void 0:e.target)||void 0===f?void 0:f.parentElement)||void 0===g?void 0:g.parentElement)||void 0===p?void 0:p.getAttribute("data-colindex")),_&&m.columns[parseInt(_)]&&(w=m.columns[parseInt(_)].name),this.props.chart.drillDownOpen||this.props.chart.config.hierarchyDrillDownOpen)this.props.chart.handleEvent("drillDown",this.props.mode,{drillDownIndex:this.events.lineIndex,drillDownItem:{item:o.__assign(o.__assign({},t),{_sugar_dd_default_:b,_sugar_click_col_name_:w}),fireKey:""}});else if(this.props.chart.config.dependenceOpen){var x=this.props.hub.dependenceData.dependenceState;if(x&&x.rowIndex===r)return void this.props.chart.handleEvent("cancelDependence",this.props.mode);this.props.chart.handleEvent("dependence",this.props.mode,{dependenceIndex:this.events.lineIndex,dependenceState:{rowIndex:r},dependenceItem:{item:o.__assign(o.__assign({},t),{_sugar_dd_default_:b,_sugar_click_col_name_:w}),fireKey:""}})}}}},t.prototype.handleColsClick=function(e,t,r,a){e.stopPropagation();var n=(this.props.hub.data.data,"");if(n=t[r],t.hasOwnProperty(r+"_sugar_origin")&&(n=t[r+"_sugar_origin"]),this.props.chart.drillDownOpen||this.props.chart.config.hierarchyDrillDownOpen)this.props.chart.handleEvent("drillDown",this.props.mode,{drillDownIndex:this.events.colsIndex[r],drillDownItem:{item:o.__assign(o.__assign({},t),{_sugar_dd_default_:n}),fireKey:r}});else if(this.props.chart.config.dependenceOpen){var i=this.props.hub.dependenceData.dependenceState;if(i&&i.rowIndex===a&&i.colId===r)return void this.props.chart.handleEvent("cancelDependence",this.props.mode);this.props.chart.handleEvent("dependence",this.props.mode,{dependenceIndex:this.events.colsIndex[r],dependenceState:{rowIndex:a,colId:r},dependenceItem:{item:o.__assign(o.__assign({},t),{_sugar_dd_default_:n}),fireKey:r}})}},t.prototype.onPageClick=function(e){this.props.chart.config.pagination&&this.props.chart.config.pagination.open&&(this.props.hub.setChartConfigData({offset:(e-1)*(this.props.chart.config.pagination.limit||this.state.defaultLimit)}),"remote"===this.props.chart.config.pagination.mode&&(this.props.chart.loadData(this.props.mode),this.setState({showFixedDiv:!1})))},t.prototype.formatDrillDownEvent=function(e){var t=this.events;return e.forEach(function(e,o){var r=e.ddFireKey,a=e.ddOpen;a===!0&&(""===r?(t.line=e,t.lineIndex=o):(t.cols[r]=e,t.colsIndex[r]=o))}),t},t.prototype.formatDependenceEvent=function(e){var t=this.events;return e&&e.length&&e.forEach(function(e,o){var r=e.cddFireKey,a=e.cddOpen;a===!0&&(""===r?(t.line=e,t.lineIndex=o):(t.cols[r]=e,t.colsIndex[r]=o))}),t},t.prototype.getMaxCharCell=function(e,t){if("string"!=typeof e||!e.length||e.length<=t)return e;var o=e.substring(0,t)+"...";return a.createElement("span",{title:e},o)},t.prototype.onMouseOver=function(e){var t=this.props.chart;(t.drillDownOpen||t.config.hierarchyDrillDownOpen||t.config.freeze&&t.config.freeze.hover)&&(this.refs.tableFixRowleft&&this.refs.tableFixRowleft.tableOnMouse({index:e,isHover:!0}),this.refs.tableFixRowright&&this.refs.tableFixRowright.tableOnMouse({index:e,isHover:!0}),!t.isDashChart&&this.refs["normalTableTr"+e]&&(this.refs["normalTableTr"+e].style.background="#efefef"),t.isDashChart&&this.refs["normalTableTr"+e]&&(this.refs["normalTableTr"+e].style.background="rgba(200, 200, 200, 0.3)"))},t.prototype.onMouseOut=function(e){var t=this.props.chart,o=this.formatData(this.props).rows;(t.drillDownOpen||t.config.hierarchyDrillDownOpen||t.config.freeze&&t.config.freeze.hover)&&(this.refs.tableFixRowleft&&this.refs.tableFixRowleft.tableOnMouse({index:e,isHover:!1}),this.refs.tableFixRowright&&this.refs.tableFixRowright.tableOnMouse({index:e,isHover:!1}),this.refs["normalTableTr"+e]&&(this.refs["normalTableTr"+e].style.background=o[e].table_line_background?o[e].table_line_background:"transparent"))},t.prototype.handleColumn=function(e){var t=h(this.hideColumnIds)||[];e.frontendChecked?t.push(e.id):delete t[t.indexOf(e.id)],this.hideColumnIds=t,this.updateColumn()},t.prototype.updateColumn=function(){var e=this.state.update;this.setState({update:!e})},t.prototype._export_table_through_api=function(){},t.prototype.componentWillMount=function(){},t.prototype.componentWillReact=function(){var e=this.props.chart.config,t=e.defaultHideColumns&&e.defaultHideColumns.map(function(e){return e.value});d(t,this.oldHideColumnIds)||(this.oldHideColumnIds=t,this.hideColumnIds=t)},t.prototype.componentDidUpdate=function(){var e,t,o=this.props,r=o.mode,a=o.chart;if(this.canFindDom){if(this.dom=l.findDOMNode(this),this.dom&&this.dom.attachEvent)if(this.dom.attachEvent("onscroll",this.tableScroll),null===(e=document.getElementsByClassName("drill-down-modal"))||void 0===e?void 0:e.length){var n=document.getElementsByClassName("drill-down-modal")[0];n&&n.attachEvent("onscroll",this.tableScroll)}else if("editor"===r){var i=document.getElementById("editor-body");i&&i.attachEvent("onscroll",this.tableScroll)}else document.attachEvent("onscroll",this.tableScroll),document.body.attachEvent("onscroll",this.tableScroll);else if(this.dom&&this.dom.addEventListener)if(this.dom.addEventListener("scroll",this.tableScroll),null===(t=document.getElementsByClassName("drill-down-modal"))||void 0===t?void 0:t.length){var n=document.getElementsByClassName("drill-down-modal")[0];n&&n.addEventListener("scroll",this.tableScroll)}else if("editor"===this.props.mode){var i=document.getElementById("editor-body");i&&i.addEventListener("scroll",this.tableScroll)}else document.addEventListener("scroll",this.tableScroll),document.body.addEventListener("scroll",this.tableScroll);this._initResizeSensor(),this.resizeEvent(),this.refs.tableContainer&&(this.refs.tableContainer.style.position="")}if(a.config.chartAutoHeight&&this.dom&&0===a.isDashChart&&"normal"===r&&0===a.drillDownLevel){var s=document.getElementById("chart-table-"+a.frontendId);if(s){var d=s.clientHeight,h=void 0,c=T.getParentDomByClassName(s,"chart-item");c&&(h=Number(y.getComputedStyle(c,"border-width").replace("px",""))),h&&!isNaN(h)&&(d+=2*h);var u=Number(y.getComputedStyle(s,"margin-bottom").replace("px",""));d+=u,h&&!isNaN(h)&&(d+=2*h);var f=document.getElementById("chart-condition-"+a.frontendId);f&&(d+=f.clientHeight||0);var g=Math.floor(d/10)+4;a.hideTitle||(g+=4),d&&g!==a.height&&a.update({},{height:g})}}},t.prototype.componentWillUnmount=function(){var e,t;if(this.dom&&this.dom.detachEvent)if(this.dom.detachEvent("onscroll",this.tableScroll),null===(e=document.getElementsByClassName("drill-down-modal"))||void 0===e?void 0:e.length){var o=document.getElementsByClassName("drill-down-modal")[0];o&&o.detachEvent("onscroll",this.tableScroll)}else if("editor"===this.props.mode){var r=document.getElementById("editor-body");r&&r.detachEvent("onscroll",this.tableScroll)}else document.detachEvent("onscroll",this.tableScroll),document.body.detachEvent("onscroll",this.tableScroll);else if(this.dom&&this.dom.removeEventListener)if(this.dom.removeEventListener("scroll",this.tableScroll),null===(t=document.getElementsByClassName("drill-down-modal"))||void 0===t?void 0:t.length){var o=document.getElementsByClassName("drill-down-modal")[0];o&&o.removeEventListener("scroll",this.tableScroll)}else if("editor"===this.props.mode){var r=document.getElementById("editor-body");r&&r.removeEventListener("scroll",this.tableScroll)}else document.removeEventListener("scroll",this.tableScroll),document.body.removeEventListener("scroll",this.tableScroll);this.unWatchResize&&this.unWatchResize()},t.prototype.render=function(){var e,t=this,n=this.props,l=(n.mode,n.hub),s=n.chart.config,d=n.chart,h=n.theme,g=d.dataConfig.tableType,p=l.data,m=this.auth(this.props);if(m!==!0)return m;var b=l.dependenceData.dependenceState,v=-1,w=void 0;b&&(w=b.colId,v=b.rowIndex);var _=E.tableColor(d,h),x=_._titleBg,C=_._titleColor,y=_._contentBg,T=_._contentColor,S=_._lineColor,D=this.formatData(this.props),R=D.rows,N=D.columns,A=D.superHeaders,z=D.offset,I=D.limit,B=D.total,O=D.pagination,L=D.sort,M=D.sortKey,W=D.sortType,K=s.combineNum&&s.combineNum.num?s.combineNum.num:0;p.data&&p.data.combineNum&&(K=p.data.combineNum);var P=s.maxCharLength?parseInt(s.maxCharLength,10):0;this.events={line:null,cols:{},lineIndex:null,colsIndex:{}},d.drillDownOpen||d.config.hierarchyDrillDownOpen?this.formatDrillDownEvent(d.drillDown):d.config.dependenceOpen&&this.formatDependenceEvent(d.config.dependences),this.canFindDom=!0;var V=[{position:"left",condition:(p.data&&p.data.fixRow||s.freeze&&s.freeze.fix&&s.freeze.frontRow>0)&&this.refs.theVeryTable&&this.refs.tableContainer&&(A.length===this.state.superHeaderThSizeArr.length||N.length===this.state.thSizeArr.length)},{position:"right",condition:s.freeze&&s.freeze.fix&&s.freeze.backRow>0&&this.refs.theVeryTable&&this.refs.tableContainer&&(A.length===this.state.superHeaderThSizeArr.length||N.length===this.state.thSizeArr.length)}],j=this.hideColumnIds,U=N&&N.filter(function(e){return!(j&&j.includes(e.id))}),$=l.data.data&&l.data.data.fixRow,q=$||(s.freeze&&s.freeze.fix&&s.freeze.frontRow?s.freeze.frontRow:0),G=s.freeze&&s.freeze.fix&&s.freeze.backRow?s.freeze.backRow:0;return a.createElement("div",{ref:"tableContainer",className:i("chart chart-table clearfix",{height100:"auto"!==s.height,"line-can-click":!!this.events.line,"with-pagination":O.open&&B>I}),style:{borderTop:"1px solid "+S}},s.hideColumn&&0==A.length&&N.length?a.createElement("div",{className:"hideColumnContainer",ref:"hideColumnSelector",style:{top:this.state.tableHeight>this.state.containerHeight?this.state.containerHeight/2||"50%":this.state.tableHeight/2||"50%"}},a.createElement("div",{className:"hideColumnButton",style:{background:x,color:C}},a.createElement("i",{ref:"iconArrow",className:"fa fa-angle-double-right"})),a.createElement("ul",{ref:"columnPanel",className:"hideListPanel",style:{background:x,color:C,maxHeight:this.state.tableHeight>this.state.containerHeight?this.state.containerHeight/2-20:this.state.containerHeight-this.state.tableHeight/2-20}},N.map(function(e,r){var n=!0,i=!1;return n=j&&j.includes(e.id)?!1:!0,i=r+1>q&&r+1<N.length-G+1?!1:!0,e=o.__assign(o.__assign({},e),{frontendChecked:n,frontendCanUnchecked:i}),a.createElement("li",{className:"listItem",key:e.id},a.createElement("label",{className:"linkDom"},a.createElement("input",{type:"checkbox",checked:e.frontendChecked,disabled:e.frontendCanUnchecked,onChange:function(){return t.handleColumn(e)}}),a.createElement("span",null,e.name)))}))):null,a.createElement("table",{id:"chart-table-"+d.frontendId,className:i("table",{"table-striped":0===K&&!!s.tableStriped,"table-bordered":!!s.tableBordered,"dashboard-table":!!d.isDashChart,"table-tbody-striped":K>0,"table-thead-striped":A.length>0}),ref:"theVeryTable",style:{borderColor:S}},A.length&&!s.hideHeader?a.createElement("thead",{className:"superHeader",ref:"theVeryTableHeader",style:{background:x,color:C}},A.map(function(e,t){return a.createElement("tr",{key:t},e&&e.map?e.map(function(e,t){var o={borderColor:S,fontSize:1+parseInt(s.fontSize||12,10),padding:(s.paddingTB||8)+"px "+(s.paddingLR||12)+"px"};return void 0===e.name&&(o.borderBottom="solid 1px "+x),e.colspan>0?a.createElement("th",{key:t,colSpan:e.colspan,style:o},e.name):null}):null)})):null,s.hideHeader?null:a.createElement("thead",{className:"normalHeader",ref:"normalHeader",style:{background:x,color:C}},a.createElement("tr",null,N.map(function(e,o){var r={borderColor:S,fontSize:1+parseInt(s.fontSize||12,10),padding:(s.paddingTB||8)+"px "+(s.paddingLR||12)+"px"};return s.defaultAlign&&"auto"!==s.defaultAlign&&(r.textAlign=s.defaultAlign),e.textAlign&&(r.textAlign=e.textAlign),e.autoWrap&&(r.wordWrap="break-word",r.wordBreak="break-all",r.whiteSpace="normal"),e.width&&(r.width=/^\d+$/.test(e.width)?e.width+"px":e.width),e.headerBgColor&&(r.background=e.headerBgColor),j&&j.includes(e.id)?null:a.createElement("th",{key:e.id,className:i({"text-right":0!==o,"text-left":0===o,"text-highlight":L.open&&M===e.id,"text-cursor":L.open}),style:r,onClick:function(o){return t.sortChange(o,e.id)}},e.name,e.remark?a.createElement(f.TooltipWrapper,{tooltip:c(e.remark,H.xssOption),placement:"bottom"},a.createElement("i",{className:"fa fa-question-circle m-l-xs hidden-xs"})):null,L.open?a.createElement("i",{className:M===e.id?"asc"===W?"fa fa-arrow-up":"desc"===W?"fa fa-arrow-down":"fa fa-sort fa-fw":"fa fa-sort fa-fw"}):null)}))),a.createElement("tbody",{ref:"normalTableTbody",style:{color:T,borderColor:S}},R.map(function(e,o){var r=O.open&&B>I?o+z:o;return a.createElement("tr",{ref:"normalTableTr"+o,key:o,onClick:function(o){return t.handleLineClick(o,e,r)},className:i("normalTableTr",{"table-tr-red":"red"===e.__showx_row_level,"table-tr-green":"green"===e.__showx_row_level,"table-tr-cursor":e.__showx_countLine,"table-tr-dependence":r===v,"table-dashboard":!!d.isDashChart}),onMouseOver:function(){return t.onMouseOver(o)},onMouseOut:function(){return t.onMouseOut(o)},style:{backgroundColor:e.table_line_background?e.table_line_background:y}},N.map(function(o,n){if(0!==e[o.id+"_rowspan"]&&0!==e[o.id+"_colspan"]){var l="retention"===g&&"dataModel"===d.dataType?e[o.id]:E.formatCellDisplay(o,e[o.id],o.unit,o.accuracy);e[o.id+"_ishtml"]?l=a.createElement("div",{dangerouslySetInnerHTML:{__html:c(l,H.xssOption)}}):P&&(l=t.getMaxCharCell(l,P)),t.events.cols[o.id]&&!e.__showx_countLine&&"-"!==l&&(l=a.createElement("span",{className:"cell-can-click",onClick:function(a){return t.handleColsClick(a,e,o.id,r)}},l));var h={borderColor:S,fontSize:parseInt(s.fontSize||12,10),padding:(s.paddingTB||8)+"px "+(s.paddingLR||12)+"px"};s.defaultAlign&&"auto"!==s.defaultAlign&&(h.textAlign=s.defaultAlign),o.textAlign&&(h.textAlign=o.textAlign),!e.__showx_countLine||d.config.openCustomColor&&"custom"===d.config.customColorType&&d.config.meanOrTotalContentBg&&d.config.contentBg||(h.backgroundColor=d.isDashChart?"transparent":"#f5fbff"),o.autoWrap&&(h.wordWrap="break-word",h.wordBreak="break-all",h.whiteSpace="normal"),e[o.id+"_noPadding"]&&(h.padding="0px",h.lineHeight="30px"),e[o.id+"_background"]&&(h.background=e[o.id+"_background"]);var u={};return e[o.id+"_bar_background"]&&(u.background=e[o.id+"_bar_background"]),e[o.id+"_bar_width"]&&(u.width=e[o.id+"_bar_width"],h.textAlign=o.textAlign?o.textAlign:"left"),e.table_line_color&&(h.color=e.table_line_color),e[o.id+"_color"]&&(h.color=e[o.id+"_color"]),o.width&&/^\d+(px)?$/.test(o.width)?l=o.autoWrap?a.createElement("div",{style:{wordWrap:"break-word",wordBreak:"break-all",whiteSpace:"normal",width:/^\d+$/.test(o.width)?o.width+"px":o.width}},l):a.createElement("div",{style:{width:/^\d+$/.test(o.width)?o.width+"px":o.width,overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},title:"string"==typeof l?l:""},l):o.width&&(h.width=/^\d+$/.test(o.width)?o.width+"px":o.width),"retention"===g&&"dataModel"===d.dataType&&l&&Array.isArray(l)&&(l=a.createElement("div",null,l.map(function(e){return a.createElement("div",{key:e},e)}))),j&&j.includes(o.id)?null:a.createElement("td",{key:o.id,rowSpan:null==e[o.id+"_rowspan"]?1:e[o.id+"_rowspan"],colSpan:null==e[o.id+"_colspan"]?1:e[o.id+"_colspan"],className:i("table-td-"+e[o.id+"_level"],{"text-right":0!==n,"text-left":0===n,"text-dependence":o.id===w&&r===v}),style:h,"data-colindex":t.events.line?n.toString():void 0},e[o.id+"_bar_width"]&&a.createElement("div",{className:"table-td-content"},a.createElement("div",{className:"table-td-line-bar",style:u}),a.createElement("div",{className:"table-td-line-content"},l)),!e[o.id+"_bar_width"]&&l,e[o.id+"__sugar_remark"]?a.createElement(f.TooltipWrapper,{tooltip:c(e[o.id+"__sugar_remark"],H.xssOption),placement:"bottom"},a.createElement("i",{className:"fa fa-question-circle m-l-xs hidden-xs"})):null)}return null}))}))),O.open&&B>I?a.createElement("div",{className:"fixed-pagination"},a.createElement(u.default,{items:Math.floor(B/I)+(B%I?1:0),activePage:Math.floor(z/I)+1,onSelect:this.onPageClick,totalMsg:O.showTotal?r.default("共「"+B+"」行"):""})):null,(null===(e=null===s||void 0===s?void 0:s.freeze)||void 0===e?void 0:e.fixHeader)&&(A.length===this.state.superHeaderThSizeArr.length||N.length===this.state.thSizeArr.length||U.length===this.state.thSizeArr.length)&&a.createElement(F.default,{ref:"tableFixHeader",tableFixHeaderStyle:{titleColor:C,titleBg:x,lineColor:S,tableContainerWidth:this.state.tableContainerWidth,combineNum:K},config:s,dataConfig:d.dataConfig,thSizeArr:this.state.thSizeArr,columns:U,sort:L,sortKey:M,sortType:W,showFixedDiv:this.state.showFixedDiv,isDashChart:d.isDashChart,parentId:"chart-table-"+d.frontendId,superHeaders:A,scroll:{scrollStandard:this.refs.theVeryTable&&this.refs.tableContainer?this.refs.theVeryTable.offsetWidth-this.refs.tableContainer.offsetWidth>0:!1,scrollVertical:this.refs.theVeryTable&&this.refs.tableContainer?this.refs.theVeryTable.offsetHeight>this.refs.tableContainer.offsetHeight||this.refs.tableContainer.offsetHeight-this.refs.theVeryTable.offsetHeight<50:!1},onScroll:function(e){return t.fixRowScroll(e)},sortChange:function(e,o){t.sortChange(e,o)}}),V.map(function(e,o){return e.condition&&a.createElement(k.default,{key:o,ref:"tableFixRow"+e.position,tableFixRowStyle:{titleColor:C,titleBg:x,lineColor:S,contentBg:y,combineNum:K},config:s,tableContainerHeight:t.state.tableContainerHeight,containerHeight:t.state.containerHeight,tableContainerWidth:t.state.tableContainerWidth,tableHeight:t.state.tableHeight,thSizeArr:t.state.thSizeArr,rows:R,columns:N,offset:z,events:t.events,superHeaders:A,superHeaderThSizeArr:t.state.superHeaderThSizeArr,sort:L,sortKey:M,sortType:W,fixRow:p.data&&p.data.fixRow,isDashChart:d.isDashChart,parentId:"chart-table-"+d.frontendId,position:e.position,dependenceState:l.dependenceData.dependenceState,paginationInfo:{pagination:O,limit:I,total:B},scroll:{scrollStandard:t.refs.theVeryTable&&t.refs.tableContainer?t.refs.theVeryTable.offsetWidth-t.refs.tableContainer.offsetWidth>0:!1,scrollVertical:t.refs.theVeryTable&&t.refs.tableContainer?t.refs.theVeryTable.offsetHeight>t.refs.tableContainer.offsetHeight||t.refs.tableContainer.offsetHeight-t.refs.theVeryTable.offsetHeight<50:!1},onScroll:function(e){return t.fixRowScroll(e)},sortChange:function(e,o){return t.sortChange(e,o)},getMaxCharCell:function(e,o){return t.getMaxCharCell(e,o)},handleColsClick:function(e,o,r,a){return t.handleColsClick(e,o,r,a)},handleLineClick:function(e,o,r){return t.handleLineClick(e,o,r)},onMouseOver:function(e){t.onMouseOver(e)},onMouseOut:function(e){t.onMouseOut(e)}})}))};var p;return t.displayName="TableChart",t=o.__decorate([w.default,b.default,v.default,_.default,x.default,m.observer,n.decorate(C.default),o.__metadata("design:paramtypes",["function"==typeof(p="undefined"!=typeof g.IChartComponentProps&&g.IChartComponentProps)?p:Object])],t)}(a.Component);t.default=R;var N=function(e){return e?e.columns&&e.rows&&e.columns instanceof Array&&e.rows instanceof Array?e.columns.length&&e.rows.length?!0:r.default("无数据"):r.default("数据中缺少columns或rows字段"):r.default("无数据")},A=function(e,t,o,r){B(e,t,o,r,!0)},z=function(e,t,o,r,a){B(e,t,o,r,!0,a)},I=function(e,t,o,r){B(e,t,o,r)},B=function(e,t,a,n,i,l){return void 0===i&&(i=!1),o.__awaiter(void 0,void 0,void 0,function(){var s,d,c,u,g,p,m,b,v,w,_,x,C,y,H,w,k,F,R,w,N,A,z,I,B,O,L,M,W,K,P,V,j,U,$,q,G,J,Y,Q,X,Z,et,tt,ot,rt,at,nt,it,lt,st,dt,ht,I,ct,ut,ft,I,gt,pt,I,gt,mt,bt,vt,wt,_t,xt,Ct,C,yt,Tt,Ht,w,k,I,gt,mt,Et,St,k,Dt,kt,Ft,bt,Rt,Nt,At,zt,It,Bt,Ot,Lt,Mt;return o.__generator(this,function(Wt){switch(Wt.label){case 0:if(Wt.trys.push([0,5,,6]),!(e&&e.data&&e.data.rows&&e.data.columns&&e.data.columns.length&&e.data.rows.length))return[3,4];if(s=h(e.data),d=s.columns,c=s.superHeaders||[],u=s.rows,g={sortKey:a.configData.sortKey,sortType:a.configData.sortType},s.hideButExportColumns&&s.hideButExportColumns.length&&(d=d.concat(s.hideButExportColumns)),u instanceof Array&&t.config.sort&&t.config.sort.open&&("local"===t.config.sort.mode&&g.sortKey||"remote"===t.config.sort.mode&&"__sugar_showx_table_number"===g.sortKey)&&E.localSort(u,g.sortKey,g.sortType),s=E.addCountData(s,o.__assign({},t.config)),!i){for(p=[],m={},b=0,v=d;b<v.length;b++)w=v[b],m[w.id]=[];for(_=0,x=u;_<x.length;_++)for(C=x[_],y=0,H=d;y<H.length;y++)w=H[y],k=C[w.id],C[w.id+"_ishtml"]&&"string"==typeof k&&(k=k.replace(/<[^>]+>/g,""),k=k.replace(/&nbsp;/gi," ").replace(/&lt;/gi,"<").replace(/&gt;/gi,">")),m[w.id].push(k);for(F=0,R=d;F<R.length;F++)w=R[F],p.push((t.config.hideHeader?[]:[w.name]).concat(m[w.id]));return D.exportCsvByColumns(p,(t.dynamicName||t.name||"export")+".csv"),[2]}if(N=t.config.combineNum&&t.config.combineNum.num?t.config.combineNum.num:0,s&&s.combineNum&&(N=s.combineNum),0!==N){for(A=[],z=d.map(function(e){return e.id}),I=0;I<z.length;++I)for(B=0;B<u.length;++B)u[B][z[I]+"_rowspan"]=1;u.length&&(O="sql"===t.dataType&&t.dataConfig.tableNum&&!t.dataConfig.rateAutoCount,E.combineRowsNew(A,z,u,O?N+1:N,O?1:0,0,u.length),E.initRowsData(u,A,0,0))}return L=E.tableColor(t,n,!0),M=L._titleBg,W=L._titleColor,K=L._lineColor,P=L._contentBg,V=L._contentColor,j="FF"+T.colors2Hex(M),U="FF"+T.colors2Hex(W,"000000"),$="FF"+T.colors2Hex(K,"D4D4D4"),q="FF"+T.colors2Hex(P),G="FF"+T.colors2Hex(V,"000000"),J={red:"FFdd4b39",green:"FF00a65a"},Y=t.dynamicName||t.name||"export",Q=void 0,l?(X=l,[3,3]):[3,1];case 1:return[4,S.getExcelJS()];case 2:Z=Wt.sent(),Q=new Z.Workbook,X=Q.addWorksheet(Y),Wt.label=3;case 3:if(X.columns=d.map(function(e){return{header:Y,key:e.id}}),X.mergeCells(1,1,1,d.length),X.getRow(1).alignment={vertical:"middle",horizontal:"center"},X.getRow(1).font={size:18,bold:!0},et=1,c.length)for(tt=0,ot=c;tt<ot.length;tt++){for(rt=ot[tt],at=0,nt=[],it=[],lt=0,st=rt;lt<st.length;lt++){for(dt=st[lt],ht=dt.colspan||1,I=0;ht>I;I++)nt.push(dt.name);it.push([at+1,at+=ht])}for(X.addRow(nt),et++,X.getRow(et).alignment={vertical:"middle",horizontal:"center"},ct=0,ut=it;ct<ut.length;ct++)ft=ut[ct],X.mergeCells(et,ft[0],et,ft[1]);for(I=0;I<d.length;I++)gt=X.getRow(et).getCell(I+1),gt.fill={type:"pattern",pattern:"solid",fgColor:{argb:j}},gt.border={top:{style:"thin",color:{argb:$}},left:{style:"thin",color:{argb:$}},bottom:{style:"thin",color:{argb:$}},right:{style:"thin",color:{argb:$}}},gt.font={color:{argb:U},bold:!0}}for(X.addRow(d.map(function(e){return e.name})),et++,pt=et,I=0;I<d.length;I++)gt=X.getRow(et).getCell(I+1),mt=j,d[I].headerBgColor&&(mt="FF"+T.colors2Hex(d[I].headerBgColor)),gt.fill={type:"pattern",pattern:"solid",fgColor:{argb:mt}},gt.border={top:{style:"thin",color:{argb:$}},left:{style:"thin",color:{argb:$}},bottom:{style:"thin",color:{argb:$}},right:{style:"thin",color:{argb:$}}},gt.font={color:{argb:U},bold:!0},bt="right",0===I&&(bt="left"),t.config.defaultAlign&&"auto"!==t.config.defaultAlign&&(bt=t.config.defaultAlign),d[I].textAlign&&(bt=d[I].textAlign),gt.alignment={vertical:"middle",horizontal:bt};
for(vt={},wt={},_t=[],xt=0,Ct=u;xt<Ct.length;xt++){for(C=Ct[xt],yt={},Tt=0,Ht=d;Tt<Ht.length;Tt++)w=Ht[Tt],k=E.formatCellDisplay(w,C[w.id],w.unit,w.accuracy,!0,!0),C[w.id+"_ishtml"]&&"string"==typeof k&&(k=k.replace(/<[^>]+>/g,""),k=k.replace(/&nbsp;/gi," ").replace(/&lt;/gi,"<").replace(/&gt;/gi,">")),yt[w.id]=k;for(X.addRow(yt),et++,I=0;I<d.length;I++)gt=X.getRow(et).getCell(I+1),mt=q,Et=G,St=d[I].id,C[St+"_bar_background"]&&(vt[St]="FF"+T.colors2Hex(C[St+"_bar_background"]),wt[St]=String.fromCharCode(I+65),_t.push(St)),C[St+"_background"]&&(mt="FF"+T.colors2Hex(C[St+"_background"])),C[St+"_color"]&&(Et="FF"+T.colors2Hex(C[St+"_color"])),"string"!=typeof C[St]&&(gt.value=C[St]),C[St+"_ishtml"]&&/(?:[^_]+(?=\.html))|[^>]+(?=<\/a>)/g.test(C[St])&&(k=C[St],k=k.replace(/<[^>]+>/g,""),k=k.replace(/&nbsp;/gi," ").replace(/&lt;/gi,"<").replace(/&gt;/gi,">"),Dt=/<a[^>]*href=[ '"]([^"]*)[' "][^>]*>(.*?)<\/a>/g,kt="",Ft=Dt.exec(C[St]),Ft&&(kt=Ft[1]||""),kt&&(gt.value={text:k,hyperlink:kt,tooltip:kt})),gt.fill={type:"pattern",pattern:"solid",fgColor:{argb:mt}},gt.border={top:{style:"thin",color:{argb:$}},left:{style:"thin",color:{argb:$}},bottom:{style:"thin",color:{argb:$}},right:{style:"thin",color:{argb:$}}},C.__showx_row_level&&J[C.__showx_row_level]&&(Et=J[C.__showx_row_level]),C[St+"_level"]&&J[C[St+"_level"]]&&(Et=J[C[St+"_level"]]),gt.font={color:{argb:Et}},C[St+"_ishtml"]&&/(?:[^_]+(?=\.html))|[^>]+(?=<\/a>)/g.test(C[St])&&(gt.font={color:{argb:"23B7E5"}}),bt="right",0===I&&(bt="left"),t.config.defaultAlign&&"auto"!==t.config.defaultAlign&&(bt=t.config.defaultAlign),d[I].textAlign&&(bt=d[I].textAlign),gt.alignment={vertical:"middle",horizontal:bt}}for(Rt=0;Rt<u.length;Rt++)for(Nt=0;Nt<d.length;Nt++)At=d[Nt].id,zt=u[Rt],It=zt[At+"_rowspan"],Bt=Rt+pt+1,It&&It>1&&X.mergeCells(Bt,Nt+1,Bt+It-1,Nt+1);_t&&_t.length&&(Ot=(c.length||0)+2,Lt=h(u),_t.forEach(function(e){E.localSort(Lt,e,"asc");var t=Lt[0][e]||0,o=Lt[Lt.length-1][e]||0;X.addConditionalFormatting({ref:""+wt[e]+Ot+":"+wt[e]+(Ot+(u.length||0)),rules:[{type:"dataBar",color:{argb:vt[e]},gradient:!0,cfvo:[{type:"num",value:t},{type:"num",value:o}]}]})})),l||S.saveExcel(Y,Q),Wt.label=4;case 4:return[3,6];case 5:return Mt=Wt.sent(),f.toast.error(r.default("导出出错："+Mt)),[3,6];case 6:return[2]}})})},O=function(e){var t=e.dataConfig,o=t.tableType,r=t.dataModel,a=r.x,n=void 0===a?[]:a,i=r.x2,l=void 0===i?[]:i,s=r.x3,d=void 0===s?[]:s,h=r.y,c=void 0===h?[]:h,u=r.value,f=void 0===u?[]:u,g=r.chartCondition,p=void 0===g?[]:g;if("normal"===o){if(!n.length)return!1}else if("retention"===o&&"dataModel"===e.dataType){var m=p.find(function(e){return"datetime"===e.dataType||"date"===e.dataType||"timestamp"===e.dataType});if(!d.length||!p.length||!m)return!1}else{if(!l.length&&!c.length)return!1;if(!f.length)return!1}return!0};g.register({kind:"table",type:"table",name:r.default("表格"),iconClassName:"chart-table",enableTemplate:!0,initialDashboardState:{width:500},initialState:{dataType:"api",dataApiUrl:p.chartDemoUrl,config:{combineNum:{num:0},maxCharLength:0,pagination:{open:!0,mode:"local",limit:15},sort:{open:!1,mode:"local",defaultSortType:"asc"},openCustomColor:!1,customColorType:"report",freeze:{fixHeader:!0}},dataConfig:{rateStdDate:"auto",needAutoRefresh:!1,tableType:"normal"}},useChartEigenIndex:[1],variants:window.sugarConfig.enableDataModel?[{name:r.default("交叉透视表"),iconClassName:"cross-pivot-table",initialState:{dataApiUrl:"$CUR_HOST/openapi/demo/chart?type=crossPivot",width:12,height:380,dataConfig:{tableType:"crossPivot",rowsTotal:!0,columnsTotal:!0,pivotTotalBg:"rgba(224, 224, 224, 1)",conAutoGroup:!0},config:{pagination:{open:!1},fontSize:12,paddingTB:6,paddingLR:6,tableBordered:!0}},initialDashboardState:{width:670,height:320,dataConfig:{pivotTotalBg:"rgba(146, 146, 146, 0.31)"}},useChartEigenIndex:[0]},{name:r.default("留存报表"),iconClassName:"retention-table",initialState:{dataApiUrl:"$CUR_HOST/openapi/demo/chart?type=retention",width:12,height:380,dataConfig:{tableType:"retention",dataModel:{retentionInterval:"7dr"},retentionGradient:{colors:["#a9dbff","#54a8f7"],hasLevel:!1,levelCount:5,reverse:!1}},config:{pagination:{open:!1},fontSize:12,paddingTB:6,paddingLR:6,tableBordered:!0}},initialDashboardState:{width:670,height:320}}]:void 0,component:R,validate:N,exportExcel:A,exportCSV:I,exportRows:z,basicCtrl:p.basicCtrl,dataBindCtrl:p.dataBindCtrl,advancedCtrl:p.advancedCtrl,needDashboardAutoFresh:!0,canAutoHeight:!0,drillDownType:"multiple",drillDownTip:r.default("可输入表格列ID，不填则点击行触发"),canBeDrillChild:!0,drillChildName:window.sugarConfig.enableDataModel?"表格/交叉透视表":void 0,dataModelPanelShow:[["dataType","dataModel"]],drillDownSuggestDataModelField:"x",canHierarchyDrillDown:!0,loadDataWhenDataModelConfigChange:O,chartEigens:p.chartEigens})});
;sugar.define("sugar:widgets/charts/table-play/table-play-ctrl.tsx",function(e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.advancedCtrl=a.dataBindCtrl=a.chartEigens=a.chartDemoUrl=a.basicCtrl=void 0;var t=e("sugar:node_modules/tslib/tslib.js"),l=e("sugar:utils/i18n.ts"),d=e("sugar:node_modules/react/index.js"),n=e("sugar:widgets/ctrl-panel/data-bind-ctrl/index.tsx"),o=e("sugar:widgets/object-array-editor/object-array-editor.tsx"),i=e("sugar:widgets/ctrl-panel/common/switch-with-tip.tsx"),u=e("sugar:widgets/custom-data-format/custom-data-format.tsx"),r=e("sugar:widgets/amis-inline-switch.tsx"),f=e("sugar:widgets/data-model/data-model-field-holder/data-model-field-holder.tsx"),c={type:"fieldset",collapsed:!1,title:l.default("自定义配色"),collapsable:!0,headingClassName:"fieldset-title",controls:[r.amisInlineSwitch("config.openCustomColor",l.default("开启自定义颜色")),{type:"color",format:"rgba",label:l.default("表头背景颜色"),placeholder:l.default("请选择"),name:"config.titleBg",hiddenOn:"!data.config.openCustomColor"},{type:"color",format:"rgba",label:l.default("表头文字颜色"),placeholder:l.default("请选择"),name:"config.titleColor",hiddenOn:"!data.config.openCustomColor"},{type:"color",format:"rgba",label:l.default("表格背景颜色"),placeholder:l.default("请选择"),name:"config.contentBg",hiddenOn:"!data.config.openCustomColor"},{type:"color",format:"rgba",label:l.default("表格背景颜色（偶数行）"),placeholder:l.default("请选择"),name:"config.contentBgOdd",hiddenOn:"!data.config.openCustomColor"},{type:"color",format:"rgba",label:l.default("表格文字颜色"),placeholder:l.default("请选择"),name:"config.contentColor",hiddenOn:"!data.config.openCustomColor"},{type:"color",name:"config.numBg",format:"rgba",placeholder:l.default("请选择"),label:l.default("序号背景色"),hiddenOn:"!data.config.openCustomColor || !config.showNum"},{type:"color",name:"config.highlightNumBg",format:"rgba",placeholder:l.default("请选择"),label:l.default("高亮序号背景色"),hiddenOn:"!data.config.openCustomColor || !config.showNum"},{type:"color",name:"config.numColor",format:"rgba",placeholder:l.default("请选择"),label:l.default("序号文字颜色"),hiddenOn:"!data.config.openCustomColor || !config.showNum"}]};a.basicCtrl=[{type:"divider"},c];var m="/openapi/demo/chart?type=tablePlay";a.chartDemoUrl="$CUR_HOST/openapi/demo/chart?type=tablePlay",a.chartEigens=[{field:[{name:"x",type:"a",minCount:1,maxCount:50,canRepeat:!0}]}],a.dataBindCtrl=function(e){var a=n.getDebugAndRefreshBtn({loadData:e.chart.loadData,loadDebugData:e.chart.loadDebugData,dataType:e.chart.dataType,refreshText:l.default("刷新图表")}),c=e.chart.dataModelHash||"",s=e.sqlModelStore.detailMap.mapByHash.get(c),p=n.generateSQLFieldList(s),g=n.getDataBindCommon({frontendId:e.chart.frontendId,dataTypeOptions:["dataModel","api","sql","json"],api:{demoUrl:m},sql:{needContinuitySetting:!0,sqlFieldList:p},loadData:e.chart.loadData,loadDebugData:e.chart.loadDebugData,curUrl:e.chart.dataApiUrl}),h=[{type:"select",list:p,key:"frontendId",name:l.default("列"),tdStyle:{minWidth:150}},{type:"text",key:"format",name:l.default("展示格式"),placeholder:l.default("默认"),tdStyle:{minWidth:90}},{type:"text",key:"columnName",name:l.default("表头名称"),placeholder:l.default("默认为列名称"),tdStyle:{minWidth:90}},{type:"text",key:"remark",name:l.default("表头字段备注说明"),placeholder:l.default("无"),tdStyle:{minWidth:105}},{type:"select",key:"ishtml",name:l.default("是否HTML"),defaultValue:"0",list:[{label:l.default("是"),value:"1"},{label:l.default("否"),value:"0"}],tdStyle:{minWidth:80}},{type:"text",key:"unit",name:l.default("单位"),placeholder:l.default("无"),tdStyle:{minWidth:50}},{type:"select",key:"textAlign",name:l.default("对齐方式"),defaultValue:"center",list:[{label:l.default("默认"),value:"auto"},{label:l.default("居左"),value:"left"},{label:l.default("居中"),value:"center"},{label:l.default("居右"),value:"right"}],tdStyle:{minWidth:100}},{type:"number",key:"width",name:l.default("列宽度(百分数)"),placeholder:l.default("均分"),tdStyle:{minWidth:70}},{type:"select",key:"hide",name:l.default("隐藏"),defaultValue:"0",list:[{label:l.default("是"),value:"1"},{label:l.default("否"),value:"0"},{label:l.default("隐藏但导出Excel时包含本列"),value:"2"}],tdStyle:{minWidth:50}},{type:"select",key:"autoWrap",name:l.default("自动换行"),defaultValue:"0",list:[{label:l.default("是"),value:"1"},{label:l.default("否"),value:"0"}],tdStyle:{minWidth:80}},{name:l.default("格式化方法"),tdStyle:{minWidth:150},children:u.default,data:p},{type:"color",key:"bgColor",name:l.default("背景色"),placeholder:l.default("无"),tdStyle:{minWidth:130}},{type:"select",key:"disableRename",name:l.default("禁用数据值映射"),defaultValue:"0",list:[{label:l.default("是"),value:"1"},{label:l.default("否"),value:"0"}],tdStyle:{minWidth:65}}],y=t.__spreadArrays([r.amisInlineSwitch("dataConfig.autoBindData",l.default("自动绑定所有字段"),"dataType != 'sql'"),{name:"dataConfig.display",hiddenOn:"data.dataType != 'sql'",children:function(a){var n=a.onChange,i=a.value;return d.createElement(o.default,t.__assign({},{onChange:n,value:i},{chartFrontendId:e.chart.frontendId,containerClassName:"form-group form-item",label:l.default("数据列配置"),addTipText:l.default("新增数据列"),cols:h}))}},f.getDataModelFieldHolder({name:"x",label:l.default("数据列配置"),hiddenOn:"dataType != 'dataModel'",config:{dataModelHash:c,holderId:e.chart.frontendId+"-x",maxCount:50,canRepeat:!0,dimConfig:{contextMenu:["tablePlayDimCol","conditionalFormatting"]},meaConfig:{contextMenu:["tablePlayMeaCol","conditionalFormatting"]}}}),n.commonFilterForDataModel(c),n.commonBindUrlParamForDataModel(c)],f.getChartConditionsHolder(c,e.chart),[n.commonLimitForDataModel]);return s&&s.config.openRow2Col&&y.push({name:"dataConfig.addAllRow2Col",hiddenOn:"dataType != 'sql'",children:function(e){var a=e.onChange,n=e.value;return d.createElement(i.default,t.__assign({},{onChange:a,value:n,label:l.default("绑定所有的行转列"),tipText:l.default("不了解？"),tipLink:"/docs/DataBind-SQL-Rowcol"}))}}),g.concat(y,a)},a.advancedCtrl=function(){return[{type:"number",label:l.default("每页行数"),name:"config.linePerPage",step:1,min:1},{type:"divider"},{type:"fieldset",collapsed:!0,title:l.default("轮播设置"),collapsable:!0,headingClassName:"fieldset-title",controls:[r.amisInlineSwitch("config.tablePlay",l.default("开启轮播")),r.amisInlineSwitch("config.linear",l.default("匀速滚动"),"!config.tablePlay"),{type:"number",label:l.default("轮播间隔（秒）"),name:"config.interval",hiddenOn:"!config.tablePlay",step:1,min:1},{type:"number",label:l.default("轮播速度（秒，需小于轮播间隔）"),placeholder:l.default("完成一页滚动时间 需小于轮播间隔"),name:"config.speed",hiddenOn:"!config.tablePlay",step:1,min:1}]},{type:"divider"},{type:"fieldset",collapsed:!0,title:l.default("表格样式"),collapsable:!0,headingClassName:"fieldset-title",controls:[{type:"select",name:"config.defaultAlign",label:l.default("单元格中文字的默认对齐方式"),value:"auto",options:[{label:l.default("自动"),value:"auto"},{label:l.default("居中"),value:"center"},{label:l.default("居左"),value:"left"},{label:l.default("居右"),value:"right"}]},{type:"group",controls:[{type:"number",label:l.default("表头高度(px)"),name:"config.headerHeight",step:10,min:0},{type:"number",label:l.default("表头字体大小(px)"),placeholder:l.default("默认是17"),name:"config.headerFontSize",step:1,min:10}]},{type:"group",controls:[{type:"number",label:l.default("内容字体大小(px)"),placeholder:l.default("默认是13"),name:"config.fontSize",step:1,min:10},{type:"number",label:l.default("单元格最长字符数"),placeholder:l.default("请输入"),name:"config.maxCharLength",step:1,min:0}]}]},{type:"divider"},{type:"fieldset",collapsed:!0,title:l.default("序号列设置"),collapsable:!0,headingClassName:"fieldset-title",controls:[r.amisInlineSwitch("config.showNum",l.default("开启序号列")),{type:"group",hiddenOn:"!config.showNum",controls:[{type:"number",label:l.default("列宽度(百分数)"),name:"config.numWidth",step:5,min:1},{type:"select",label:l.default("序号样式"),name:"config.numType",options:[{label:l.default("圆形"),value:"circle"},{label:l.default("棱形"),value:"diamond"}]}]},{type:"group",hiddenOn:"!config.showNum",controls:[{type:"number",label:l.default("序号文字大小(px)"),placeholder:l.default("默认与行内容字号相同"),name:"config.numFontSize",step:1,min:10},{type:"number",label:l.default("序号图标大小(px)"),placeholder:l.default("默认为序号文字大小1.6倍"),name:"config.numIconSize",step:1,min:10}]},{type:"number",label:l.default("高亮前N个序号"),name:"config.highlightNum",hiddenOn:"!config.showNum",step:1,min:0}]},{type:"divider"},c]}});
;sugar.define("sugar:widgets/charts/table-play/table-play.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=e("sugar:node_modules/tslib/tslib.js"),a=e("sugar:utils/i18n.ts"),i=e("sugar:node_modules/react/index.js"),o=e("sugar:node_modules/react-mixin/index.js"),l=e("sugar:node_modules/classnames/index.js"),r=e("sugar:node_modules/lodash/debounce.js"),s=e("sugar:node_modules/lodash/cloneDeep.js"),d=e("sugar:node_modules/xss/lib/index.js"),c=e("sugar:node_modules/amis/lib/index.js"),h=e("sugar:widgets/charts/chart-manager.tsx"),g=e("sugar:widgets/charts/table-play/table-play-ctrl.tsx"),u=e("sugar:stores/index.ts"),p=e("sugar:widgets/charts/_hoc/debug/debug.tsx"),m=e("sugar:widgets/charts/_hoc/toolbar/toolbar.tsx"),f=e("sugar:widgets/charts/_hoc/drill-down/drill-down.tsx"),y=e("sugar:widgets/charts/_hoc/chart-warning/index.tsx"),v=e("sugar:widgets/charts/_hoc/chart-zoom/index.tsx"),b=e("sugar:widgets/charts/_mixin/common.tsx"),_=e("sugar:utils/resize-sensor.ts"),x=e("sugar:utils/common-helper.ts"),w=e("sugar:utils/xssOption.ts"),C=e("sugar:utils/export-file/export-csv.ts"),D=e("sugar:utils/export-file/export-excel.ts"),B=8,S="_sugar_table_play_fill",N="_sugar_table_num",E=function(e){function t(t){var n=e.call(this,t)||this;return n.state={lineHeight:0,nowScroll:0},n.handleLineClick=n.handleLineClick.bind(n),n.handleColsClick=n.handleColsClick.bind(n),n.getBodyDom=n.getBodyDom.bind(n),n.getContainer=n.getContainer.bind(n),n.calculateLineHeigth=n.calculateLineHeigth.bind(n),n.resizeEvent=n.resizeEvent.bind(n),n.scroll=n.scroll.bind(n),n}n.__extends(t,e),t.prototype.handleLineClick=function(e,t,a){if(!t.__showx_countLine){var i=this.props.hub.data.data,o="";if(i.columns&&i.columns.length){var l=i.columns[0].id;i.columns[1]&&"__sugar_showx_table_number"===l&&(l=i.columns[1].id),o=t[l],t.hasOwnProperty(l+"_sugar_origin")&&(o=t[l+"_sugar_origin"])}if(this.events.line)if(this.props.chart.drillDownOpen||this.props.chart.config.hierarchyDrillDownOpen)this.props.chart.handleEvent("drillDown",this.props.mode,{drillDownIndex:this.events.lineIndex,drillDownItem:{item:n.__assign(n.__assign({},t),{_sugar_dd_default_:o}),fireKey:""}});else if(this.props.chart.config.dependenceOpen){var r=this.props.hub.dependenceData.dependenceState;if(r&&r.rowIndex===a)return void this.props.chart.handleEvent("cancelDependence",this.props.mode);this.props.chart.handleEvent("dependence",this.props.mode,{dependenceIndex:this.events.lineIndex,dependenceState:{rowIndex:a},dependenceItem:{item:n.__assign(n.__assign({},t),{_sugar_dd_default_:o}),fireKey:""}})}}},t.prototype.handleColsClick=function(e,t,a,i){e.stopPropagation();var o="";if(o=t[a],t.hasOwnProperty(a+"_sugar_origin")&&(o=t[a+"_sugar_origin"]),this.props.chart.drillDownOpen||this.props.chart.config.hierarchyDrillDownOpen)this.props.chart.handleEvent("drillDown",this.props.mode,{drillDownIndex:this.events.colsIndex[a],drillDownItem:{item:n.__assign(n.__assign({},t),{_sugar_dd_default_:o}),fireKey:a}});else if(this.props.chart.config.dependenceOpen){var l=this.props.hub.dependenceData.dependenceState;if(l&&l.rowIndex===i&&l.colId===a)return void this.props.chart.handleEvent("cancelDependence",this.props.mode);this.props.chart.handleEvent("dependence",this.props.mode,{dependenceIndex:this.events.colsIndex[a],dependenceState:{rowIndex:i,colId:a},dependenceItem:{item:n.__assign(n.__assign({},t),{_sugar_dd_default_:o}),fireKey:a}})}},t.prototype.formatDrillDownEvent=function(e){var t=this.events;return e.forEach(function(e,n){var a=e.ddFireKey,i=e.ddOpen;i===!0&&(""===a?(t.line=e,t.lineIndex=n):(t.cols[a]=e,t.colsIndex[a]=n))}),t},t.prototype.formatDependenceEvent=function(e){var t=this.events;return e&&e.length&&e.forEach(function(e,n){var a=e.cddFireKey,i=e.cddOpen;i===!0&&(""===a?(t.line=e,t.lineIndex=n):(t.cols[a]=e,t.colsIndex[a]=n))}),t},t.prototype.formatCellDisplay=function(e,t,n,a,i,o){return void 0===a&&(a=null),void 0===i&&(i=!0),void 0===o&&(o=!1),e.dataFormat&&null!=t&&"-"!==t?t=x.formatDataByType(t,e.dataFormat):i&&(t=x.formatStringOrNumber(t,a,!1,o)),null==t||""===t?t="-":n&&"-"!==t?t=""+t+n:"object"==typeof t&&(t=JSON.stringify(t)),t},t.prototype.getMaxCharCell=function(e,t){if("string"!=typeof e||!e.length||e.length<=t)return e;var n=e.substring(0,t)+"...";return i.createElement("span",{title:e},n)},t.prototype.getBodyDom=function(e){this.bodyDom=e,this.calculateLineHeigth()},t.prototype.getContainer=function(e){this.containerDom=e},t.prototype.calculateLineHeigth=function(){var e=this.props.chart.config;if(this.bodyDom&&this.bodyDom.parentNode){var t=Number(_.getComputedStyle(this.bodyDom.parentNode,"height").replace("px",""))-8-(e.headerHeight||0);this.bodyDom.style.height=t+"px",this.setState({lineHeight:t/(e.linePerPage||B)})}},t.prototype._initResizeSensor=function(){this.unWatchResize&&this.unWatchResize(),this.containerDom&&(this.unWatchResize=_.resizeSensor(this.containerDom,r(this.resizeEvent,250)))},t.prototype.resizeEvent=function(){this.calculateLineHeigth(),this.setState({nowScroll:0})},t.prototype.componentWillReceiveProps=function(){this.calculateLineHeigth();var e=this.props.chart.config;e.tablePlay||(clearTimeout(this.playFlag),clearTimeout(this.playFlag2))},t.prototype.componentDidUpdate=function(){this._initResizeSensor(),clearTimeout(this.playFlag),clearTimeout(this.playFlag2);var e=this.props.chart.config;if(e.tablePlay){var t=Math.max(e.interval||5,1);this.playFlag=setTimeout(this.scroll,1e3*t)}},t.prototype.componentWillUnmount=function(){this.unWatchResize&&this.unWatchResize(),clearTimeout(this.playFlag),clearTimeout(this.playFlag2)},t.prototype.scroll=function(){var e=this;clearTimeout(this.playFlag),clearTimeout(this.playFlag2);var t=this.props,n=t.hub,a=t.chart.config,i=a.linear?"linear":"ease";if(!n.dependenceData.dependenceState&&n.data&&n.data.data&&n.data.data.rows&&n.data.data.rows.length){var o=a.linePerPage||B;if(n.data.data.rows.length<=o)return void this.setState({nowScroll:0});var l=parseInt(n.data.data.rows.length/o+"");n.data.data.rows.length%o>0&&l++;var r=this.state.nowScroll,s=0;if(r>-l*o*this.state.lineHeight)s=r-o*this.state.lineHeight,this.setState({nowScroll:s});else if(this.bodyDom){var d=this.bodyDom.getElementsByClassName("tabel-play-body-scorll");if(d&&d[0]){var c=d[0];c.style.transition="all 0s "+i+" 0s",c.style.top="0px",this.playFlag2=setTimeout(function(){c&&(c.style.transition="top "+(a.speed||1)+"s "+i,s=0-o*e.state.lineHeight,e.setState({nowScroll:s}))},100)}}}},t.prototype.generateRows=function(e,t,n,a,o){var r=this,s=this.props,c=(s.mode,s.hub),h=s.chart.config,g=s.chart,u=(s.theme,c.dependenceData.dependenceState),p=-1,m=void 0;u&&(m=u.colId,p=u.rowIndex);var f=h.maxCharLength?parseInt(h.maxCharLength,10):0,y=-this.state.nowScroll/this.state.lineHeight,v=h.linePerPage||B;y=isNaN(y)?0:y;var b=y-v,_=y+v;return t.map(function(t,s){var c=s+o;return c>v&&(b>c||c>_)?null:t===S?i.createElement("div",{key:s,className:l({"table-play-line":!0,"table-play-line-odd":s%2===0,"table-dashboard":!!g.isDashChart}),style:{backgroundColor:s%2===0?a.contentBgOdd:a.contentBg,height:r.state.lineHeight+"px",top:c*r.state.lineHeight}}):i.createElement("div",{key:s,onClick:function(e){return r.handleLineClick(e,t,s)},className:l({"table-play-line":!0,"table-play-line-odd":s%2===0,"table-play-line-dep":s===p,"table-dashboard":!!g.isDashChart}),style:{backgroundColor:t.table_line_background?t.table_line_background:s%2===0?a.contentBgOdd:a.contentBg,color:a.contentColor,height:r.state.lineHeight+"px",top:c*r.state.lineHeight}},e.map(function(e,o){var c,g=parseInt(h.fontSize||13,10),u={fontSize:g};if(h.defaultAlign&&"auto"!==h.defaultAlign&&(u.textAlign=h.defaultAlign),e.textAlign&&(u.textAlign=e.textAlign),e.autoWrap||(u.textOverflow="ellipsis",u.whiteSpace="nowrap"),e.id===N){var y=h.numFontSize||g,v=1.6*y+"px";h.numIconSize&&(v=h.numIconSize+"px"),"circle"===h.numType?(u.width=v,u.height=v,u.lineHeight=v,u.fontSize=y,u.borderRadius="50%",u.color=a.numColor,u.backgroundColor=a.numBg,h.highlightNum&&s+1<=h.highlightNum&&(u.backgroundColor=a.highlightNumBg),c=s+1):"diamond"===h.numType&&(u.width=v,u.height=v,u.lineHeight=v,u.fontSize=y,u.transform="rotate(45deg)",u.color=a.numColor,u.backgroundColor=a.numBg,h.highlightNum&&s+1<=h.highlightNum&&(u.backgroundColor=a.highlightNumBg),c=i.createElement("div",{style:{transform:"rotate(-45deg)"}},s+1))}else c=r.formatCellDisplay(e,t[e.id],e.unit,e.accuracy),t[e.id+"_ishtml"]?c=i.createElement("div",{dangerouslySetInnerHTML:{__html:d(c,w.xssOption)}}):f&&(c=r.getMaxCharCell(c,f)),r.events.cols[e.id]&&(c=i.createElement("span",{className:"cell-can-click",onClick:function(n){return r.handleColsClick(n,t,e.id,s)}},c));t.table_line_color&&(u.color=t.table_line_color),t[e.id+"_color"]&&(u.color=t[e.id+"_color"]);var b={},_={};return t[e.id+"_background"]&&(b.background=t[e.id+"_background"]),b.width=n[o]+"%",t[e.id+"_bar_background"]&&(_.background=t[e.id+"_bar_background"]),t.hasOwnProperty(e.id+"_bar_width")&&(_.width=t[e.id+"_bar_width"],u.textAlign=e.textAlign?e.textAlign:"left"),i.createElement("div",{key:o,className:l("table-play-line-item",{"text-right":0!==o,"text-left":0===o,"text-dependence":e.id===m&&s===p}),style:b},t.hasOwnProperty(e.id+"_bar_width")&&i.createElement("div",{className:"table-play-line-bar",style:_}),i.createElement("div",{className:"table-play-line-content",style:u},c))}))})},t.prototype.render=function(){var e,t=this.props,n=(t.mode,t.hub),o=t.chart.config,r=t.chart,h=t.theme,g=this.auth(this.props);if(g!==!0)return g;var u=o.linear?"linear":"ease",p=[],m="";h.config&&(p=(null===(e=h.config.chartTheme)||void 0===e?void 0:e.color)||[],m=h.config.titleColor||p[3]);var f={titleBg:"rgb(250, 250, 250)",titleColor:"rgba(51, 51, 51, 0.85)",contentBg:"transparent",contentBgOdd:"#f7f7f9",contentColor:"#455458",numBg:p[1],highlightNumBg:p[0],numColor:"#fff"};r.isDashChart&&(f.titleBg=p[0]||f.titleBg,f.titleColor="#fff",f.contentBg="transparent",f.contentBgOdd="rgba(255, 255, 255, 0.1)",f.contentColor=m||f.contentColor,f.numBg=p[2],f.highlightNumBg=p[1],f.numColor="#fff"),o.openCustomColor&&(f.titleBg=o.titleBg||f.titleBg,f.titleColor=o.titleColor||f.titleColor,f.contentBg=o.contentBg||f.contentBg,f.contentBgOdd=o.contentBgOdd||f.contentBgOdd,f.contentColor=o.contentColor||f.contentColor,f.numBg=o.numBg||f.numBg,f.highlightNumBg=o.highlightNumBg||f.highlightNumBg,f.numColor=o.numColor||f.numColor);for(var y=s(n.data.data),v=y&&y.columns?y.columns:[],b=y&&y.rows?y.rows:[],_=[],x=o.linePerPage||B,C=b.length%x,D=0===C?0:x-C,E=0;D>E;E++)b.push(S);if(x<b.length)for(var E=0;x>E;E++)_.push(b[E]);o.showNum&&v.unshift({id:N,name:a.default("序号"),width:o.numWidth||10,textAlign:"center"}),this.events={line:null,cols:{},lineIndex:null,colsIndex:{}},r.drillDownOpen||r.config.hierarchyDrillDownOpen?this.formatDrillDownEvent(r.drillDown):r.config.dependenceOpen&&this.formatDependenceEvent(r.config.dependences);var I=0,k=0,O=v.map(function(e){return!isNaN(e.width)&&e.width>0?(I+=+e.width,e.width):(k++,"-")}),z=(100-I)/k;return z=z>0?z:0,O=O.map(function(e){return"-"===e?z:e}),i.createElement("div",{className:"table-play-container",ref:this.getContainer},i.createElement("div",{className:"table-play-header",style:{height:o.headerHeight||0,backgroundColor:f.titleBg,color:f.titleColor}},v.map(function(e,t){var n={fontSize:parseInt(o.headerFontSize||13,10),width:O[t]+"%"};return o.defaultAlign&&"auto"!==o.defaultAlign&&(n.textAlign=o.defaultAlign),e.textAlign&&(n.textAlign=e.textAlign),e.autoWrap||(n.textOverflow="ellipsis",n.whiteSpace="nowrap"),i.createElement("div",{className:l({"text-right":0!==t,"text-left":0===t,"table-play-header-item":!0}),key:t,style:n},e.name,e.remark?i.createElement(c.TooltipWrapper,{tooltip:d(e.remark,w.xssOption),placement:"bottom"},i.createElement("i",{className:"fa fa-question-circle m-l-xs hidden-xs"})):null)})),i.createElement("div",{className:l("tabel-play-body",{"line-can-click":!!this.events.line}),ref:this.getBodyDom,style:{marginTop:o.headerHeight||0}},i.createElement("div",{className:"tabel-play-body-scorll",style:{top:this.state.nowScroll+"px",transition:"top "+(o.speed||1)+"s "+u}},this.generateRows(v,b,O,f,0),this.generateRows(v,_,O,f,b.length))))};var g;return t.displayName="TablePlay",t=n.__decorate([f.default,p.default,m.default,y.default,v.default,u.observer,o.decorate(b.default),n.__metadata("design:paramtypes",["function"==typeof(g="undefined"!=typeof h.IChartComponentProps&&h.IChartComponentProps)?g:Object])],t)}(i.Component);t.default=E;var I=function(e){return e?e.columns&&e.rows&&e.columns instanceof Array&&e.rows instanceof Array?e.columns.length&&e.rows.length?!0:a.default("无数据"):a.default("数据中缺少columns或rows字段"):a.default("无数据")},k=function(e,t){var n=H(e);D.exportExcelByColumns(n,""+(t.dynamicName||t.name||"export"))},O=function(e,t){var n=H(e);C.exportCsvByColumns(n,(t.dynamicName||t.name||"export")+".csv")},z=function(e){var t=H(e);return D.exportRowsByColumns(t)},H=function(e){var t=[];if(e&&e.data&&e.data.rows&&e.data.columns&&e.data.columns.length&&e.data.rows.length){var n=e.data.columns;e.data.hideButExportColumns&&e.data.hideButExportColumns.length&&(n=n.concat(e.data.hideButExportColumns));for(var a={},i=0,o=n;i<o.length;i++){var l=o[i];a[l.id]=[]}for(var r=0,s=e.data.rows;r<s.length;r++)for(var d=s[r],c=0,h=n;c<h.length;c++){var l=h[c];a[l.id].push(d[l.id])}for(var g=0,u=n;g<u.length;g++){var l=u[g];t.push([l.name].concat(a[l.id]))}}return t},P=function(e){var t=e.dataConfig.dataModel.x,n=void 0===t?[]:t;return n.length?!0:!1};h.register({kind:"table",type:"table-play",name:a.default("轮播表格"),iconClassName:"chart-table-play",enableTemplate:!0,initialState:{dataType:"api",dataApiUrl:g.chartDemoUrl,width:7,config:{tablePlay:!0,interval:5,speed:1,headerHeight:40,linePerPage:B,maxCharLength:0,headerFontSize:17,fontSize:13,openCustomColor:!1,showNum:!0,numWidth:10,numType:"circle",highlightNum:3}},initialDashboardState:{width:500,height:300,config:{openCustomColor:!0,highlightNumBg:"rgba(241, 70, 70, 1)"}},component:E,validate:I,exportCSV:O,exportExcel:k,exportRows:z,basicCtrl:g.basicCtrl,dataBindCtrl:g.dataBindCtrl,advancedCtrl:g.advancedCtrl,needDashboardAutoFresh:!0,drillDownType:"multiple",drillDownTip:a.default("可输入表格列ID，不填则点击行触发"),canBeDrillChild:!0,dataModelPanelShow:[["dataType","dataModel"]],drillDownSuggestDataModelField:"x",canHierarchyDrillDown:!0,loadDataWhenDataModelConfigChange:P,chartEigens:g.chartEigens})});
;sugar.define("sugar:widgets/charts/attr-table/attr-table-ctrl.tsx",function(e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.dataBindCtrl=a.chartEigens=a.chartDemoUrl=a.advancedCtrl=a.basicCtrl=void 0;var t=e("sugar:node_modules/tslib/tslib.js"),l=e("sugar:utils/i18n.ts"),d=e("sugar:node_modules/react/index.js"),n=e("sugar:widgets/ctrl-panel/data-bind-ctrl/index.tsx"),o=e("sugar:widgets/object-array-editor/object-array-editor.tsx"),r=e("sugar:widgets/custom-data-format/custom-data-format.tsx"),i=e("sugar:widgets/ctrl-panel/common/switch-with-tip.tsx"),u=e("sugar:widgets/amis-inline-switch.tsx"),f=e("sugar:widgets/data-model/data-model-field-holder/data-model-field-holder.tsx"),s=[{type:"divider"},{type:"fieldset",collapsed:!1,title:l.default("自定义配色"),collapsable:!0,headingClassName:"fieldset-title",controls:[u.amisInlineSwitch("config.openCustomColor",l.default("开启颜色自定义")),{type:"color",format:"rgba",label:l.default("属性名称列背景颜色"),placeholder:l.default("请选择"),name:"config.nameBg",hiddenOn:"!data.config.openCustomColor"},{type:"color",format:"rgba",label:l.default("属性名称列文字颜色"),placeholder:l.default("请选择"),name:"config.nameColor",hiddenOn:"!data.config.openCustomColor"},{type:"color",format:"rgba",label:l.default("属性取值列背景颜色"),placeholder:l.default("请选择"),name:"config.valueBg",hiddenOn:"!data.config.openCustomColor"},{type:"color",format:"rgba",label:l.default("属性取值列文字颜色"),placeholder:l.default("请选择"),name:"config.valueColor",hiddenOn:"!data.config.openCustomColor"},{type:"color",name:"config.lineColor",format:"rgba",placeholder:l.default("请选择"),label:l.default("边框颜色"),hiddenOn:"!data.config.openCustomColor"}]}];a.basicCtrl=function(){return s};var c=[{type:"number",key:"width",name:l.default("列宽度（px）"),defaultValue:100,tdStyle:{minWidth:70}},{type:"select",key:"textAlign",name:l.default("对齐方式"),defaultValue:"auto",list:[{label:l.default("默认"),value:"auto"},{label:l.default("居左"),value:"left"},{label:l.default("居中"),value:"center"},{label:l.default("居右"),value:"right"}],tdStyle:{minWidth:100}},{type:"select",key:"autoWrap",name:l.default("自动换行"),defaultValue:"0",list:[{label:l.default("是"),value:"1"},{label:l.default("否"),value:"0"}],tdStyle:{minWidth:80}}];a.advancedCtrl=function(e){return t.__spreadArrays([{type:"number",name:"config.rows",label:l.default("每列属性个数（0为都在一列内显示）"),step:1,min:0},{type:"number",label:l.default("单元格上下间距（px）"),placeholder:l.default("默认是8"),name:"config.paddingTB",step:1,min:1},{type:"number",label:l.default("单元格左右间距（px）"),placeholder:l.default("默认是12"),name:"config.paddingLR",step:1,min:1},{type:"number",name:"config.fontSize",label:l.default("字体大小"),step:1,min:14,max:56},{name:"config.colConfig",children:function(a){var n=a.onChange,r=a.value;return d.createElement(o.default,t.__assign({},{onChange:n,value:r},{chartFrontendId:e.chart.frontendId,containerClassName:"form-group form-item",label:l.default("可增加多项，依次对应每列设置"),addTipText:l.default("新增列设置"),cols:c}))}}],s)};var m="/openapi/demo/chart?type=attrTable";a.chartDemoUrl="$CUR_HOST/openapi/demo/chart?type=attrTable",a.chartEigens=[{field:[{name:"value",type:"a",minCount:1,maxCount:50,canRepeat:!0}]}],a.dataBindCtrl=function(e){var a=n.getDebugAndRefreshBtn({loadData:e.chart.loadData,loadDebugData:e.chart.loadDebugData,dataType:e.chart.dataType,refreshText:l.default("刷新图表")}),s=n.getDataBindCommon({frontendId:e.chart.frontendId,dataTypeOptions:["dataModel","api","sql","json"],api:{demoUrl:m},loadData:e.chart.loadData,loadDebugData:e.chart.loadDebugData,curUrl:e.chart.dataApiUrl}),c=e.chart.dataModelHash||"",p=e.sqlModelStore.detailMap.mapByHash.get(c),g=n.generateSQLFieldList(p),h=[{type:"select",list:g,key:"frontendId",name:l.default("属性字段"),tdStyle:{minWidth:150}},{type:"text",key:"columnDesc",name:l.default("属性简介"),placeholder:l.default("可不填"),tdStyle:{minWidth:110}},{type:"text",key:"unit",name:l.default("单位"),placeholder:l.default("无"),tdStyle:{minWidth:50}},{type:"select",key:"ishtml",name:l.default("是否HTML"),defaultValue:"0",list:[{label:l.default("是"),value:"1"},{label:l.default("否"),value:"0"}],tdStyle:{minWidth:80}},{name:l.default("格式化方法"),children:r.default,tdStyle:{minWidth:110},data:g,notNeedCustom:!0},{type:"redSetting",name:l.default("涨跌幅飘红设置"),tdStyle:{minWidth:110}},{type:"greenSetting",name:l.default("涨跌幅飘绿设置"),tdStyle:{minWidth:110}},{type:"text",key:"_sugar_extra",name:l.default("下钻附加数据"),tdStyle:{minWidth:110}}],y=t.__spreadArrays([u.amisInlineSwitch("dataConfig.autoBindData",l.default("自动绑定所有字段"),"dataType != 'sql'"),{name:"dataConfig.display",hiddenOn:"data.dataType != 'sql'",children:function(a){var n=a.onChange,r=a.value;return d.createElement(o.default,t.__assign({},{onChange:n,value:r},{chartFrontendId:e.chart.frontendId,containerClassName:"form-group form-item",label:l.default("展示项配置"),addTipText:l.default("新增核心指标"),cols:h}))}},{type:"select",name:"dataConfig.redSetting",hiddenOn:"dataType != 'sql'",label:l.default("通用的涨跌幅飘红设置:"),defaultValue:"",options:o.redOrGreenOptions},{type:"text",name:"dataConfig.redSettingVal",placeholder:l.default("请输入对比值"),label:"",hiddenOn:"dataType != 'sql' || !dataConfig.redSetting"},{type:"select",name:"dataConfig.greenSetting",hiddenOn:"dataType != 'sql'",label:l.default("通用的涨跌幅飘绿设置:"),defaultValue:"",options:o.redOrGreenOptions},{type:"text",name:"dataConfig.greenSettingVal",placeholder:l.default("请输入对比值"),label:"",hiddenOn:"dataType != 'sql' || !dataConfig.greenSetting"},f.getDataModelFieldHolder({name:"value",label:l.default("指标"),hiddenOn:"dataType != 'dataModel'",config:{dataModelHash:c,holderId:e.chart.frontendId+"-value",maxCount:50,canRepeat:!0}}),n.commonFilterForDataModel(c),n.commonBindUrlParamForDataModel(c)],f.getChartConditionsHolder(c,e.chart),[n.commonLimitForDataModel]);return p&&p.config.openRow2Col&&y.push({name:"dataConfig.addAllRow2Col",hiddenOn:"dataType != 'sql'",children:function(e){var a=e.onChange,n=e.value;return d.createElement(i.default,t.__assign({},{onChange:a,value:n,label:l.default("绑定所有的行转列"),tipText:l.default("不了解？"),tipLink:"/docs/chart/chart#绑定所有行转列"}))}}),s.concat(y,a)}});
;sugar.define("sugar:widgets/charts/attr-table/attr-table.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=e("sugar:node_modules/tslib/tslib.js"),r=e("sugar:utils/i18n.ts"),n=e("sugar:node_modules/react/index.js"),i=e("sugar:node_modules/react-mixin/index.js"),d=e("sugar:node_modules/classnames/index.js"),o=e("sugar:node_modules/amis/lib/index.js"),l=e("sugar:widgets/charts/chart-manager.tsx"),s=e("sugar:widgets/charts/_hoc/debug/debug.tsx"),c=e("sugar:widgets/charts/_hoc/drill-down/drill-down.tsx"),h=e("sugar:widgets/charts/_hoc/toolbar/toolbar.tsx"),u=e("sugar:widgets/charts/_hoc/chart-warning/index.tsx"),p=e("sugar:widgets/charts/_hoc/chart-zoom/index.tsx"),g=e("sugar:widgets/charts/_mixin/common.tsx"),m=e("sugar:utils/common-helper.ts"),f=e("sugar:stores/index.ts"),w=e("sugar:widgets/charts/attr-table/attr-table-ctrl.tsx"),v=e("sugar:node_modules/xss/lib/index.js"),x=e("sugar:utils/xssOption.ts"),b=e("sugar:utils/export-file/export-csv.ts"),_=e("sugar:utils/export-file/export-excel.ts"),C=e("sugar:utils/resize-sensor.ts"),y=e("sugar:widgets/charts/utils/helper.ts"),I=function(e){function t(t){var a=e.call(this,t)||this;return a.handleItemClick=a.handleItemClick.bind(a),a}a.__extends(t,e),t.prototype.handleItemClick=function(e,t,r,n,i){t&&this.props.chart.handleEvent("drillDown",this.props.mode,{drillDownItem:{item:a.__assign(a.__assign({},e),{_sugar_dd_default_:e.hasOwnProperty("_sugar_extra")?e._sugar_extra:e.name_sugar_origin||e.name}),fireKey:""},drillDownIndex:0});var d=this.props.hub.dependenceData.dependenceState;d&&d.colIndex===n&&d.rowIndex===i?this.props.chart.handleEvent("cancelDependence",this.props.mode):r&&this.props.chart.handleEvent("dependence",this.props.mode,{dependenceIndex:0,dependenceState:{colIndex:n,rowIndex:i},dependenceItem:{item:a.__assign(a.__assign({},e),{_sugar_dd_default_:e.hasOwnProperty("_sugar_extra")?e._sugar_extra:e.name_sugar_origin||e.name}),fireKey:""}})},t.prototype.getContent=function(e,t){var a=this,r=this.props,i=(r.mode,r.hub),l=r.chart.config,s=r.chart,c=(r.theme,i.data.data),h=[];0===e&&(e=c.length);var u=!(!s.drillDownOpen||!s.drillDown.length),p=!!(l.dependenceOpen&&l.dependences&&l.dependences.length),g="rgb(232, 232, 232)",f="",w="",b="",_="";s.isDashChart&&(g="rgba(255, 255, 255, 0.1)",f="rgba(255, 255, 255, 1)",w="rgba(255, 255, 255, 0)",b="rgba(255, 255, 255, 1)",_="rgba(255, 255, 255, 0.19)"),l.openCustomColor&&(g=l.nameBg||g,f=l.nameColor||f,w=l.valueBg||w,b=l.valueColor||b,_=l.lineColor||_);for(var C=i.dependenceData.dependenceState,y=l.colConfig&&l.colConfig instanceof Array?l.colConfig:[],I=function(r){for(var i=[],s=function(t){var s=y[2*t],h=y[2*t+1],I=r+e*t;if(I>=c.length)return"continue";var k=c[I],E=k.value;E&&"number"==typeof E&&(E=m.formatNumber(E));var D=E+(k.unit||""),S=k.name;k.ishtml&&(D=n.createElement("div",{dangerouslySetInnerHTML:{__html:v(D,x.xssOption)}}));var B={fontSize:1+parseInt(l.fontSize||13,10),padding:(l.paddingTB||8)+"px "+(l.paddingLR||12)+"px",backgroundColor:g||void 0,color:f||void 0,borderColor:_||void 0},N={fontSize:1+parseInt(l.fontSize||13,10),padding:(l.paddingTB||8)+"px "+(l.paddingLR||12)+"px",backgroundColor:w||void 0,color:b||void 0,borderColor:_||void 0};s&&s.textAlign&&(B.textAlign=s.textAlign),h&&h.textAlign&&(N.textAlign=h.textAlign),s&&"1"===s.autoWrap&&(B.wordWrap="break-word",B.wordBreak="break-all",B.whiteSpace="normal"),h&&"1"===h.autoWrap&&(N.wordWrap="break-word",N.wordBreak="break-all",N.whiteSpace="normal");var A={};if(s&&s.width&&/^\d+(px)?$/.test(s.width)){var O=/^\d+$/.test(s.width)?s.width+"px":s.width;A={width:O,whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"},s&&"1"===s.autoWrap&&(A={wordWrap:"break-word",wordBreak:"break-all",whiteSpace:"normal",width:O})}if(S=n.createElement("div",{style:A},S,k.desc?n.createElement(o.TooltipWrapper,{tooltip:v(k.desc,x.xssOption),placement:"bottom"},n.createElement("i",{className:"fa fa-question-circle m-l-xs hidden-xs"})):null),h&&h.width&&/^\d+(px)?$/.test(h.width)){var O=/^\d+$/.test(h.width)?h.width+"px":h.width;D=h&&"1"===h.autoWrap?n.createElement("div",{style:{wordWrap:"break-word",wordBreak:"break-all",whiteSpace:"normal",width:O}},D):n.createElement("div",{style:{width:O,whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"}},D)}s&&s.width&&(B.width=/^\d+$/.test(s.width)?s.width+"px":s.width),h&&h.width&&(N.width=/^\d+$/.test(h.width)?h.width+"px":h.width);var T=C&&C.colIndex===t&&C.rowIndex===r;i.push(n.createElement("td",{key:t+"name",style:B,className:"attr-table-item item-name"},S),n.createElement("td",{key:t+"value",style:N,onClick:function(){return a.handleItemClick(k,u,p,t,r)},className:d("attr-table-item","item-value",{isActive:T,"can-click":u||p,"item-red":"red"===k.level,"item-green":"green"===k.level})},D))},I=0;t>I;I++)s(I);h.push(n.createElement("tr",{key:r},i))},k=0;e>k;k++)I(k);return h},t.prototype.componentDidUpdate=function(){var e=this.props,t=e.mode,a=e.chart;if(a.config.chartAutoHeight&&0===a.isDashChart&&"normal"===t&&0===a.drillDownLevel){var r=document.getElementById("chart-table-"+a.frontendId);if(r){var n=r.clientHeight,i=void 0,d=m.getParentDomByClassName(r,"chart-item");d&&(i=Number(C.getComputedStyle(d,"border-width").replace("px",""))),i&&!isNaN(i)&&(n+=2*i);var o=document.getElementById("chart-condition-"+a.frontendId);o&&(n+=o.clientHeight||0);var l=Math.floor(n/10)+3;a.hideTitle||(l+=4),n&&l!==a.height&&a.update({},{height:l})}y.setChartTrueHeight("chart-table-"+a.frontendId,a)}},t.prototype.render=function(){var e=this.props,t=(e.mode,e.hub),a=e.chart.config,i=e.chart,o=(e.theme,this.auth(this.props));if(o!==!0)return o;var l=t.data.data;if("pending"===t.data.loadState&&!l||null==l)return null;if(!(l&&l instanceof Array&&l.length))return n.createElement("div",{className:"tip"},r.default("数据格式有误！"));var s=isNaN(a.rows)||""===a.rows?0:parseInt(a.rows,10),c=1;return 0!==s&&(c=parseInt(String(l.length/s),10),l.length%s!==0&&c++),n.createElement("div",{className:d("chart chart-table clearfix",{height100:"auto"!==a.height}),id:"chart-table-"+i.frontendId},n.createElement("table",{className:d("attr-table","table",{"table-dashboard":!!i.isDashChart})},n.createElement("tbody",null,this.getContent(s,c))))};var w;return t.displayName="AttrTable",t=a.__decorate([c.default,s.default,h.default,u.default,p.default,f.observer,i.decorate(g.default),a.__metadata("design:paramtypes",["function"==typeof(w="undefined"!=typeof l.IChartComponentProps&&l.IChartComponentProps)?w:Object])],t)}(n.Component);t.default=I;var k=function(e){if(!e)return r.default("无数据");if(!(e instanceof Array&&e.length))return r.default("数据格式不是数组或者是空数组");for(var t=0;t<e.length;t++){var a=e[t];if(!a.name)return r.default("第「"+(t+1)+"」个指标的名称未指定");if(!a.hasOwnProperty("value"))return r.default("第「"+(t+1)+"」个指标的值未指定");if(!m.isValueOfTypes(a.value,["string","number","null"]))return r.default("第「"+(t+1)+"」个指标的取值格式不对，必须是字符串或者数字")}return!0},E=function(e,t){var a=B(e);_.exportExcelByColumns(a,""+(t.dynamicName||t.name||"export"))},D=function(e,t){var a=B(e);b.exportCsvByColumns(a,(t.dynamicName||t.name||"export")+".csv")},S=function(e){var t=B(e);return _.exportRowsByColumns(t)},B=function(e){var t=[];return e&&e.data&&e.data.length&&(t.push([r.default("属性名称")].concat(e.data.map(function(e){return e.name}))),t.push([r.default("属性取值")].concat(e.data.map(function(e){return e.value+""})))),t},N=function(e){var t=e.dataConfig.dataModel.value,a=void 0===t?[]:t;return a.length?!0:!1};l.register({kind:"table",type:"attr-table",name:r.default("属性表格"),iconClassName:"chart-attr-table",enableTemplate:!0,initialState:{dataType:"api",dataApiUrl:w.chartDemoUrl,height:120,width:8,config:{rows:2}},initialDashboardState:{width:800,height:80,config:{}},canAutoHeight:!0,component:I,needDashboardAutoFresh:!0,basicCtrl:w.basicCtrl,dataBindCtrl:w.dataBindCtrl,advancedCtrl:w.advancedCtrl,validate:k,exportCSV:D,exportExcel:E,exportRows:S,drillDownType:"single",canBeDrillChild:!0,dataModelPanelShow:[["dataType","dataModel"]],loadDataWhenDataModelConfigChange:N,chartEigens:w.chartEigens})});
;sugar.define("sugar:widgets/charts/simple-text/simple-text-ctrl.tsx",function(e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.dataBindCtrl=void 0;var l=e("sugar:node_modules/tslib/tslib.js"),t=e("sugar:utils/i18n.ts"),n=e("sugar:node_modules/react/index.js"),d=e("sugar:widgets/ctrl-panel/common/switch-with-tip.tsx"),i=e("sugar:widgets/amis-inline-switch.tsx"),o=e("sugar:widgets/ctrl-panel/data-bind-ctrl/index.tsx"),r=e("sugar:widgets/dashboard-ctrl-panel/chart-ctrl.tsx"),s=e("sugar:widgets/data-model/data-model-field-holder/data-model-field-holder.tsx"),f=e("sugar:widgets/charts/simple-text/font-helper.tsx");a.dataBindCtrl=function(e){var a=e.chart.dataModelHash||"",g=e.sqlModelStore.detailMap.mapByHash.get(a),p=o.generateSQLFieldList(g),m=o.getDebugAndRefreshBtn({loadData:e.chart.loadData,loadDebugData:e.chart.loadDebugData,dataType:e.chart.dataType,refreshText:t.default("刷新图表")}),h=o.getDataBindCommon({frontendId:e.chart.frontendId,dataTypeOptions:["api","sql","dataModel"],api:{demoUrl:"/openapi/demo/chart?type=simpleText"}}),b=[{type:"text",name:"config.text",label:t.default("文本内容"),hiddenOn:"!!config.needLoadData"},{name:"config.needLoadData",children:function(e){var a=e.onChange,i=e.value;return n.createElement(d.default,l.__assign({},{onChange:a,value:i,label:t.default("动态拉取文本内容"),tipText:t.default("不了解？"),tipLink:"/docs/Chart-simple-text"}))}},{type:"divider"},{type:"fieldset",collapsed:!0,title:t.default("文本样式"),collapsable:!0,headingClassName:"fieldset-title",controls:l.__spreadArrays(f.fontCtrl,[{type:"range",label:t.default("文字大小"),name:"config.fontSize",step:1,min:8,max:100},{type:"color",name:"config.color",format:"rgba",hiddenOn:"data.config.neon",label:t.default("文字颜色")},{type:"range",name:"config.shadowRadius",step:1,min:0,value:0,max:100,hiddenOn:"data.config.neon",label:t.default("文字阴影大小")},{type:"range",name:"config.shadowHorizontal",step:1,min:0,value:0,max:100,hiddenOn:"data.config.neon",label:t.default("文字阴影水平偏移")},{type:"range",name:"config.shadowVertical",step:1,min:0,value:0,max:100,hiddenOn:"data.config.neon",label:t.default("文字阴影垂直偏移")},{type:"color",name:"config.shadowColor",format:"rgba",value:"rgb(255, 255, 255, 1)",hiddenOn:"data.config.neon",label:t.default("文字阴影颜色")},{type:"color",name:"config.backgroundColor",format:"rgba",label:t.default("背景颜色")},{type:"select",label:t.default("文字粗细"),name:"config.fontWeight",options:c},{type:"select",label:t.default("对齐方式"),name:"config.textAlign",options:u},i.amisInlineSwitch("config.whiteSpaceNormal",t.default("文字超长时自动换行"))])},{type:"divider"},{type:"fieldset",collapsed:!0,title:t.default("特效"),collapsable:!0,headingClassName:"fieldset-title",controls:[{type:"select",label:t.default("内容变化时的转场特效"),name:"config.transitionEffect",value:"",options:[{label:t.default("无"),value:""},{label:t.default("粒子"),value:"spark"}]},i.amisInlineSwitch("config.neon",t.default("开启霓虹灯特效")),{type:"color",format:"hex",name:"config.neonColor",value:"#f0f",visibleOn:"data.config.neon",label:t.default("霓虹灯色彩")}]},{type:"divider"},{type:"fieldset",collapsed:!0,title:t.default("文本滚动设置"),collapsable:!0,headingClassName:"fieldset-title",controls:[i.amisInlineSwitch("config.openMarquee",t.default("开启文字滚动")),{type:"number",label:t.default("滚动速度"),name:"config.marqueeSpeed",min:1,max:5e3,step:2,hiddenOn:"!config.openMarquee"},{type:"number",label:t.default("停留时间（ms）"),name:"config.marqueeInterval",min:0,max:5e3,step:100,hiddenOn:"!config.openMarquee"}]},{type:"divider"},{type:"fieldset",collapsed:!0,title:t.default("超链接设置"),collapsable:!0,headingClassName:"fieldset-title",controls:[i.amisInlineSwitch("config.openLink",t.default("开启超链接")),{type:"text",name:"config.linkUrl",label:t.default("超链接地址url"),hiddenOn:"!config.openLink"},{type:"radios",name:"config.linkTarget",label:t.default("超链接打开方式"),inline:!1,hiddenOn:"!config.openLink",options:[{label:t.default("超链接在本页面弹框中打开"),value:"dialog"},{label:t.default("在本页面打开"),value:"_self"},{label:t.default("打开浏览器新页面"),value:"_blank"}]},{type:"color",name:"config.linkHoverColor",format:"rgba",label:t.default("鼠标悬停时文字颜色"),hiddenOn:"!config.openLink"},i.amisInlineSwitch("config.linkHoverUnderline",t.default("鼠标悬停时显示下划线"),"!config.openLink")]}];if(e.chart.config.needLoadData){var v=[].concat(h,[{type:"select",name:"dataConfig.bindField",hiddenOn:"data.dataType != 'sql'",label:t.default("绑定文本内容字段"),placeholder:t.default("请选择"),clearable:!0,options:p}],[s.getDataModelFieldHolder({name:"value",label:t.default("文本内容字段"),config:{dataModelHash:a,holderId:e.chart.frontendId+"-value",maxCount:1}}),o.commonFilterForDataModel(a),o.commonBindUrlParamForDataModel(a)],m);e.chart.isDashChart&&(v=v.concat(r.getAutoRefreshCtrl())),b.splice.apply(b,l.__spreadArrays([2,0],v))}return b};var c=[{label:"normal",value:"normal"},{label:"bold",value:"bold"},{label:"bolder",value:"bolder"},{label:"lighter",value:"lighter"}],u=[{label:t.default("居中"),value:"center"},{label:t.default("左对齐"),value:"flex-start"},{label:t.default("右对齐"),value:"flex-end"}]});
;sugar.define("sugar:widgets/charts/simple-text/SparkEffect.ts",function(t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.SparkEffect=void 0;var e=t("sugar:node_modules/twgl.js/dist/4.x/twgl-full.js"),i=function(){function t(t,n,e,i,o){void 0===o&&(o=1e3),this.isRunning=!1,this.container=t,this.onFinish=i,this.particleNumber=o,this.width=n,this.height=e,this.init()}return t.prototype.init=function(){var t=document.createElement("canvas");this.canvas=t,this.container.appendChild(t),t.width=this.width,t.height=this.height;var n=t.getContext("webgl",{premultipliedAlpha:!1});if(!n)return void console.warn("do not support webgl");this.gl=n;for(var i="\n    precision mediump float;\n    #define PI 3.14159265359\n    attribute vec3 position;\n    attribute vec2 random;\n    uniform float uTime;\n    void main() {\n        vec3 pos = position;\n        float xSpeed = 0.15; // x 方向移动的速度相对慢点\n        float ySpeed = 0.9;\n        float timeSpan = 1.5; // 单个粒子存在的时间\n        // 将 time 从 0.0 - 1.0 映射到 -1.0 - 2.5 之间\n        float time = mix(-1.0, 1.0 + timeSpan, uTime);\n        float timeOffset = time - pos.x;\n        if ((pos.x + pow(sin(PI * pos.y / 2.0), 4.0)) < time && (timeOffset <= timeSpan)) {\n            // 随机向上或向下\n            if (pos.y > 0.0) {\n                pos.y = pos.y + timeOffset * random.y * ySpeed;\n                pos.y = min(1.0, pos.y);\n                pos.x = pos.x + timeOffset * random.x * xSpeed;\n            } else {\n                pos.y = pos.y - timeOffset * random.y * ySpeed;\n                pos.y = max(-1.0, pos.y);\n                pos.x = pos.x + timeOffset * random.x * xSpeed;\n            }\n            // x 离 time 越远 point 越小，\n            gl_PointSize = min((timeSpan - timeOffset), 1.0 - (abs(pos.y))) * 6.0;\n            gl_Position = vec4(pos, 1.0);\n        }\n    }\n    ",o="\n    precision mediump float;\n    void main() {\n        vec2 uv = gl_PointCoord.xy;\n        float circle = smoothstep(0.8, 0.3, length(uv - 0.5));  // 用于实现圆形\n        gl_FragColor.rgb = vec3(1.0, 1.0, 1.0);\n        gl_FragColor.a = circle;\n    }\n    ",s=this.particleNumber,a=new Float32Array(3*s),r=new Float32Array(2*s),p=0;s>p;p++)a.set([2*Math.random()-1,.8*Math.random()-.4,0],3*p),r.set([1*Math.random()-.5,1.4*Math.random()-.7],2*p);var f=e.createProgramInfo(n,[i,o]);this.programInfo=f;var m={position:{numComponents:3,data:a},random:{numComponents:2,data:r}},h=e.createBufferInfoFromArrays(n,m);this.bufferInfo=h,n.enable(n.BLEND),n.blendFunc(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA),n.useProgram(f.program),e.setBuffersAndAttributes(n,f,h),e.resizeCanvasToDisplaySize(n.canvas),n.viewport(0,0,n.canvas.width,n.canvas.height)},t.prototype.resize=function(t,n){this.canvas.width=t,this.canvas.height=n,this.gl.viewport(0,0,this.gl.canvas.width,this.gl.canvas.height)},t.prototype.play=function(){if(!this.isRunning){var t,n=this.gl,i=this;n.clearColor(1,1,1,1);var o=function(s){if(n){i.isRunning=!0,void 0===t&&(t=s);var a=s-t,r={uTime:a%1e3*.001};e.setUniforms(i.programInfo,r),e.drawBufferInfo(n,i.bufferInfo,n.POINTS),1e3>a?requestAnimationFrame(o):(i.isRunning=!1,i.onFinish())}};requestAnimationFrame(o)}},t}();n.SparkEffect=i});
;sugar.define("sugar:widgets/charts/simple-text/simple-text.tsx",function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=t("sugar:node_modules/tslib/tslib.js"),a=t("sugar:utils/i18n.ts"),n=t("sugar:node_modules/react/index.js"),o=t("sugar:node_modules/react-mixin/index.js"),s=t("sugar:widgets/charts/chart-manager.tsx"),r=t("sugar:widgets/charts/_mixin/common.tsx"),l=t("sugar:widgets/charts/_hoc/debug/debug.tsx"),h=t("sugar:stores/index.ts"),d=t("sugar:widgets/charts/simple-text/simple-text-ctrl.tsx"),c=t("sugar:utils/resize-sensor.ts"),m=t("sugar:node_modules/tinycolor2/tinycolor.js"),u=t("sugar:node_modules/lodash/debounce.js"),f=t("sugar:utils/common-helper.ts"),p=t("sugar:node_modules/classnames/index.js"),g=t("sugar:utils/chart-helper.ts"),v=t("sugar:widgets/charts/simple-text/SparkEffect.ts"),x=t("sugar:widgets/charts/_hoc/drill-down/drill-down.tsx"),y=t("sugar:widgets/charts/_hoc/chart-zoom/index.tsx"),C=t("sugar:widgets/charts/simple-text/font-helper.tsx"),w=function(t){function e(e){var i=t.call(this,e)||this;return i.lastContent="",i.width=0,i.nowOffset=0,i.beginMove=i.beginMove.bind(i),i.moveText=i.moveText.bind(i),i.computeWidth=u(i.computeWidth.bind(i),300),i.setContainer=i.setContainer.bind(i),i}return i.__extends(e,t),e.prototype.componentWillMount=function(){this.mouseOver=this.mouseOver.bind(this),this.mouseOut=this.mouseOut.bind(this),this.setState({isHover:!1})},e.prototype.mouseOver=function(){this.setState({isHover:!0})},e.prototype.mouseOut=function(){this.setState({isHover:!1})},e.prototype.componentWillReact=function(){this.computeWidth()},e.prototype._initResizeSensor=function(){if(this.unWatchResize&&this.unWatchResize(),this.dom&&this.dom.parentNode){var t=this.dom.parentNode;this.unWatchResize=c.resizeSensor(t,this.computeWidth)}},e.prototype.setContainer=function(t){t&&(this.containerDom=t)},e.prototype.componentDidUpdate=function(){var t=this;if(this.containerDom){if(!this.props.chart.config.transitionEffect)return;var e=this.containerDom.innerHTML;if(e!=this.lastContent){var i=this.props.chart.width,a=this.props.chart.height;if(!this.effectContainer){var n=document.createElement("div");n.style.position="absolute",n.style.top="0",n.style.left="0",this.containerDom.parentElement.appendChild(n),this.effectContainer=n}this.effectContainer.style.display="block",this.effectContainer.style.width=i+"px",this.effectContainer.style.height=a+"px",this.sparkEffect||(this.sparkEffect=new v.SparkEffect(this.effectContainer,i,a,function(){t&&t.containerDom&&(t.effectContainer.style.display="none")})),this.sparkEffect.resize(i,a),this.sparkEffect.play(),this.lastContent=e}}},e.prototype.beginMove=function(t){t&&(this.dom=t,this.computeWidth(),cancelAnimationFrame(this.rAF),this.rAF=requestAnimationFrame(this.moveText),this._initResizeSensor())},e.prototype.computeWidth=function(){if(this.dom&&this.dom.parentNode){this.width=+c.getComputedStyle(this.dom,"width").replace("px","");var t=+c.getComputedStyle(this.dom.parentNode,"width").replace("px","");this.width/2>t?(this.dom.classList.add("content-with-padding"),this.width+=100):this.dom.classList.remove("content-with-padding")}},e.prototype.moveText=function(){var t=this,e=this.props.chart.config;this.dom&&(this.nowOffset+=e.marqueeSpeed/100,this.nowOffset>this.width/2?(this.nowOffset=0,this.dom.style.transform="translateX(-"+this.nowOffset+"px)",this.timeoutEvent=setTimeout(function(){t.rAF=requestAnimationFrame(t.moveText)},e.marqueeInterval)):(this.dom.style.transform="translateX(-"+this.nowOffset+"px)",this.rAF=requestAnimationFrame(this.moveText)))},e.prototype.componentWillUnmount=function(){try{cancelAnimationFrame(this.rAF),this.timeoutEvent&&clearTimeout(this.timeoutEvent)}catch(t){}this.unWatchResize&&this.unWatchResize()},e.prototype.render=function(){var t,e=this,i=this.auth(this.props);if(i!==!0)return i;var o=this.props,s=o.chart.config,r=o.chart,l=o.theme,h=o.sugarRoot,d=[],c="";l.config&&(d=(null===(t=l.config.chartTheme)||void 0===t?void 0:t.color)||[],c=l.config.titleColor||d[0]);var u=s.textAlign&&s.textAlign.split("-")[1]?s.textAlign.split("-")[1]:s.textAlign,v="";s.shadowRadius&&(v=(s.shadowHorizontal||0)+"px "+(s.shadowVertical||0)+"px "+s.shadowRadius+"px "+s.shadowColor);var x="";if(s.neon){x="#fff";var y=m(s.neoColor).desaturate(50).toHexString();v="0 0 0.1em #fff, 0 0 0.2em #fff, 0 0 0.3em #fff, 0 0 0.4em "+y+", 0 0 0.6em "+s.neonColor+", 0 0 0.8em "+s.neonColor+", 0 0 1em "+s.neonColor+", 0 0 1.2em "+s.neonColor+", 0 0 1.4em "+s.neonColor}var w={fontFamily:C.getFontFamily(r.config)||"Microsoft Yahei, Arial, sans-serif",fontSize:s.fontSize+"px",color:x||s.color||c||"#ccc",textShadow:v,fontWeight:s.fontWeight,justifyContent:s.textAlign,textAlign:u,backgroundColor:s.backgroundColor?s.backgroundColor:!s.text&&r.isDashChart?"rgba(23, 151, 191, 0.2)":""},k=s.text?s.text:"";if(r.config.needLoadData){var b=this.props.hub.data;k=b.data||0===b.data||""===b.data?b.data instanceof Array?b.data[0]:b.data:a.default("没有查询到数据"),k&&"object"==typeof k&&(k=k.toString()),k&&"number"==typeof k&&(k=f.formatNumber(k))}k=g.replaceSomeParam(k,r.frontendId,h);var S=k;if(s.openLink&&s.linkUrl){var O=s.linkUrl;/^(http:\/\/|https:\/\/|\/)/i.test(O)||(O="http://"+O),O=g.replaceSomeParam(O,r.frontendId,h,null,!0),k=s.linkHoverColor?"dialog"===s.linkTarget?n.createElement("a",{onClick:function(){return e.props.assist.openIframeDialog(O,S)},className:p({sugarChartLinkUnder:s.linkHoverUnderline}),onMouseOver:this.mouseOver,onMouseOut:this.mouseOut,style:{color:this.state.isHover?s.linkHoverColor:""}},k):n.createElement("a",{href:O,target:s.linkTarget||"_blank",className:p({sugarChartLinkUnder:s.linkHoverUnderline}),onMouseOver:this.mouseOver,onMouseOut:this.mouseOut,style:{color:this.state.isHover?s.linkHoverColor:""}},k):"dialog"===s.linkTarget?n.createElement("a",{onClick:function(){return e.props.assist.openIframeDialog(O,S)},className:p({sugarChartLinkUnder:s.linkHoverUnderline})},k):n.createElement("a",{href:O,target:s.linkTarget||"_blank",className:p({sugarChartLinkUnder:s.linkHoverUnderline})},k)}if(s.openMarquee){var _={transform:"translateX(-"+this.nowOffset+"px)"};return w.height=1.3*s.fontSize+"px",n.createElement("div",{className:"simple-text-scroll",style:w},n.createElement("div",{className:"simple-text-scroll-container",style:_,ref:this.beginMove},n.createElement("span",{className:"simple-text-scroll-content"},k),n.createElement("span",{className:"simple-text-scroll-content"},k)))}return s.whiteSpaceNormal&&(w.whiteSpace="normal"),n.createElement("div",{className:"simple-text-chart-container",style:w,ref:this.setContainer},k)},e.displayName="SimpleText",e=i.__decorate([x.default,l.default,y.default,h.inject(function(t){return{sugarRoot:t,assist:t.assist}}),h.observer,o.decorate(r.default),i.__metadata("design:paramtypes",[Object])],e)}(n.Component);e.default=w;var k=function(t){var e=t.dataConfig.dataModel.value,i=void 0===e?[]:e;return i.length?!0:!1};s.register({kind:"text",type:"simple-text",name:a.default("文本"),iconClassName:"chart-simple-text",component:w,dataBindTabTitle:a.default("文本内容"),enableTemplate:!0,canEmptyData:!0,loadDataPremiseField:"needLoadData",variants:[{name:a.default("超链接"),iconClassName:"chart-link",initialState:{config:{text:a.default("百度首页"),openLink:!0,linkUrl:"https://www.baidu.com",linkHoverUnderline:!0}}},{name:a.default("跑马灯"),iconClassName:"chart-marquee",initialState:{config:{text:a.default("这是跑马灯效果，多谢您的尝试！"),openMarquee:!0,marqueeSpeed:300,marqueeInterval:2e3}},initialDashboardState:{height:90,width:580}}],initialState:{hideTitle:!0,dataType:"api",config:{text:a.default("文本内容"),selfFontFamily:0,fontFamilyInside:"Microsoft Yahei",fontSize:20,fontWeight:"normal",textAlign:"center",openMarquee:!1,marqueeSpeed:500,marqueeInterval:1e3,openLink:!1,linkTarget:"_blank"}},initialDashboardState:{height:90},dataBindCtrl:d.dataBindCtrl,canBeDrillChild:!0,dataModelPanelShow:[["dataType","dataModel"],["config.needLoadData",!0]],loadDataWhenDataModelConfigChange:k})});
;sugar.define("sugar:widgets/charts/time/time-ctrl.tsx",function(e,l){"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.dataBindCtrl=l.basicCtrl=void 0;var a=e("sugar:node_modules/tslib/tslib.js"),t=e("sugar:utils/i18n.ts"),i=e("sugar:widgets/amis-inline-switch.tsx"),n=e("sugar:widgets/charts/simple-text/font-helper.tsx");l.basicCtrl=function(e){var l=[];return e.chart.isDashChart||(l=[{type:"divider"},i.amisInlineSwitch("config.removeBgColor",t.default("去掉图表的白色背景色")),{type:"tpl",hiddenOn:"data.dataType != 'sql'",tpl:'<span class="text-muted help-block">'+t.default("图表背景变成透明。注意：预览时才生效，编辑模式下不生效。该配置在下钻图表中无效。")+"</span>",className:"m-t-n-sm"}]),l},l.dataBindCtrl=function(){var e=a.__spreadArrays([{type:"select",name:"config.formatType",label:t.default("时间格式"),options:[{label:t.default("日期"),value:"date"},{label:t.default("日期 + 时分"),value:"dateTime"},{label:t.default("日期 + 时分秒"),value:"dateTimeSecond"},{label:t.default("显示固定时间"),value:"fixedTime"}]},{type:"text",label:t.default("显示内容"),name:"config.fixedContent",hiddenOn:"config.formatType !== 'fixedTime'"},i.amisInlineSwitch("config.showWeek",t.default("显示星期几"),"config.formatType === 'fixedTime'"),{type:"number",label:t.default("时间刷新间隔（ms）"),name:"config.refresh",step:100,min:500,hiddenOn:"config.formatType === 'fixedTime'"}],n.fontCtrl,[{type:"divider"},{type:"number",label:t.default("文字大小"),name:"config.fontSize",step:1,min:8,max:100},{type:"color",name:"config.color",format:"rgba",label:t.default("文字颜色")},{type:"color",name:"config.backgroundColor",format:"rgba",label:t.default("背景颜色")},{type:"select",label:t.default("文字粗细"),name:"config.fontWeight",options:d},{type:"select",label:t.default("对齐方式"),name:"config.textAlign",options:r}]);return e};var d=[{label:"normal",value:"normal"},{label:"bold",value:"bold"},{label:"bolder",value:"bolder"},{label:"lighter",value:"lighter"}],r=[{label:t.default("居中"),value:"center"},{label:t.default("左对齐"),value:"flex-start"},{label:t.default("右对齐"),value:"flex-end"}]});
;sugar.define("sugar:widgets/charts/time/time.tsx",function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=t("sugar:node_modules/tslib/tslib.js"),o=t("sugar:utils/i18n.ts"),a=t("sugar:node_modules/react/index.js"),n=t("sugar:node_modules/react-mixin/index.js"),r=t("sugar:widgets/charts/chart-manager.tsx"),s=t("sugar:widgets/charts/_mixin/common.tsx"),c=t("sugar:stores/index.ts"),d=t("sugar:widgets/charts/time/time-ctrl.tsx"),l=t("sugar:node_modules/mobx/lib/mobx.js"),m=t("sugar:utils/date-helper.ts"),h=t("sugar:widgets/charts/_hoc/chart-zoom/index.tsx"),u=t("sugar:widgets/charts/simple-text/font-helper.tsx"),f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.content="",e}return i.__extends(e,t),e.prototype.componentWillReact=function(){this.getContent()},e.prototype.componentDidMount=function(){this.getContent=this.getContent.bind(this),this.updateTime=this.updateTime.bind(this),this.getContent()},e.prototype.componentWillUnmount=function(){clearTimeout(this.timeoutFlag)},e.prototype.getContent=function(){clearTimeout(this.timeoutFlag);var t=this.props.chart.config;"fixedTime"===t.formatType?this.content=t.fixedContent:this.updateTime()},e.prototype.updateTime=function(){var t=this.props.chart.config,e=new Date,i="";if(t.showWeek){var o=["星期日","星期一","星期二","星期三","星期四","星期五","星期六"];i=" "+(o[e.getDay()]||"")}"date"===t.formatType?this.content=m.formatDate(e)+i:"dateTime"===t.formatType?this.content=m.formatDate(e,"$1-$2-$3 $4:$5")+i:"dateTimeSecond"===t.formatType&&(this.content=m.formatDate(e,"$1-$2-$3 $4:$5:$6")+i),clearTimeout(this.timeoutFlag),this.timeoutFlag=setTimeout(this.updateTime,+t.refresh>500?+t.refresh:500)},e.prototype.render=function(){var t=this.auth(this.props);if(t!==!0)return t;var e=this.props,i=e.chart.config,o=e.chart,n={fontFamily:u.getFontFamily(o.config)||"Microsoft Yahei, Arial, sans-serif",fontSize:i.fontSize+"px",color:i.color,fontWeight:i.fontWeight,justifyContent:i.textAlign,backgroundColor:i.backgroundColor?i.backgroundColor:!this.content&&o.isDashChart?"rgba(23, 151, 191, 0.2)":""};return a.createElement("div",{className:"time-chart-container",style:n},this.content)},e.displayName="TimeChart",i.__decorate([l.observable,i.__metadata("design:type",Object)],e.prototype,"content",void 0),e=i.__decorate([h.default,c.observer,n.decorate(s.default)],e)}(a.Component);e.default=f,r.register({kind:"text",type:"time",name:o.default("实时时间"),iconClassName:"chart-time",component:f,dataBindTabTitle:o.default("样式"),enableTemplate:!0,canEmptyData:!0,loadDataPremiseField:"never",initialState:{hideTitle:!0,height:80,width:3,config:{formatType:"dateTimeSecond",refresh:500,selfFontFamily:0,fontFamilyInside:"Microsoft Yahei",color:"#000",fontSize:20,fontWeight:"normal",textAlign:"center"}},initialDashboardState:{width:240,config:{color:"#fff"}},dataBindCtrl:d.dataBindCtrl,basicCtrl:d.basicCtrl})});
;sugar.define("sugar:widgets/charts/text/text-ctrl.tsx",function(a,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.dataBindCtrl=e.basicCtrl=void 0;for(var t=a("sugar:node_modules/tslib/tslib.js"),l=a("sugar:utils/i18n.ts"),d=a("sugar:utils/font-map.ts"),n=a("sugar:node_modules/react/index.js"),o=a("sugar:widgets/ctrl-panel/data-bind-ctrl/index.tsx"),r=a("sugar:widgets/ctrl-panel/common/switch-with-tip.tsx"),i=a("sugar:node_modules/amis/lib/index.js"),s=a("sugar:widgets/amis-inline-switch.tsx"),u=a("sugar:widgets/data-model/data-model-field-holder/data-model-field-holder.tsx"),c={},g=0,m=d.fonts;g<m.length;g++){var f=m[g];c[f.value]=f.label}e.basicCtrl=[{type:"divider"},s.amisInlineSwitch("config.removeBgColor",l.default("去掉图表的白色背景色")),{type:"tpl",hiddenOn:"data.dataType != 'sql'",tpl:'<span class="text-muted help-block">'+l.default("图表背景变成透明。注意：预览时才生效，编辑模式下不生效。该配置在下钻图表中无效。")+"</span>",className:"m-t-n-sm"}],e.dataBindCtrl=function(a){var e=o.getDebugAndRefreshBtn({loadData:a.chart.loadData,loadDebugData:a.chart.loadDebugData,dataType:a.chart.dataType,refreshText:l.default("刷新图表")}),d=o.getDataBindCommon({frontendId:a.chart.frontendId,dataTypeOptions:["dataModel","api","sql"],api:{demoUrl:"/openapi/demo/chart?type=text"}}),s=[{type:"rich-text",name:"config.htmlText",label:l.default("文本的内容"),placeholder:l.default("请输入"),options:{language:l.lang,imageInsertButtons:["imageUpload","imageByURL"],imageMaxSize:921600,imagePaste:!1,fontFamily:c,toolbarButtons:["fullscreen","paragraphFormat","fontSize","fontFamily","color","bold","italic","underline","strikeThrough","|","formatOL","formatUL","align","outdent","indent","|","insertLink","insertImage","insertTable","|","html","undo","redo"],events:{"froalaEditor.image.error":function(a,e,t){i.toast.error(5===t.code?l.default("上传的文件不能超过2MB"):t.message)}}},reciever:"/api/image/upload"},{name:"config.needLoadData",children:function(a){var e=a.onChange,d=a.value;return n.createElement(r.default,t.__assign({},{onChange:e,value:d,label:l.default("文本中附加动态数据"),tipText:l.default("不了解？"),tipLink:"/docs/Chart-text"}))}}];if(a.chart.config.needLoadData){var g=a.chart.dataModelHash||"",m=[u.getDataModelFieldHolder({name:"value",label:l.default("数据字段"),config:{dataModelHash:g,holderId:a.chart.frontendId+"-value",maxCount:40}}),o.commonFilterForDataModel(g),o.commonBindUrlParamForDataModel(g)];return s.concat(d,m,e)}return s}});
;sugar.define("sugar:widgets/charts/text/text.tsx",function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=t("sugar:node_modules/tslib/tslib.js"),i=t("sugar:utils/i18n.ts"),r=t("sugar:node_modules/react/index.js"),s=t("sugar:node_modules/react-mixin/index.js"),o=t("sugar:node_modules/xss/lib/index.js"),n=t("sugar:utils/xssOption.ts"),d=t("sugar:widgets/charts/chart-manager.tsx"),l=t("sugar:widgets/charts/_hoc/debug/debug.tsx"),u=t("sugar:widgets/charts/_mixin/common.tsx"),h=t("sugar:utils/common-helper.ts"),c=t("sugar:stores/index.ts"),g=t("sugar:widgets/charts/text/text-ctrl.tsx"),m=t("sugar:utils/resize-sensor.ts"),p=t("sugar:utils/chart-helper.ts"),f=t("sugar:widgets/charts/_hoc/drill-down/drill-down.tsx"),x=t("sugar:widgets/charts/_hoc/chart-zoom/index.tsx"),b=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a.__extends(e,t),e.prototype.getDom=function(t){this.dom=t},e.prototype.computeHeight=function(){var t=this.props,e=t.mode,a=t.chart;if(a.config.chartAutoHeight&&this.dom&&0===a.isDashChart&&"normal"===e&&0===a.drillDownLevel){var i=this.dom.clientHeight,r=void 0,s=h.getParentDomByClassName(this.dom,"chart-item");s&&(r=Number(m.getComputedStyle(s,"border-width").replace("px",""))),r&&!isNaN(r)&&(i+=2*r);var o=Math.floor(i/10)+7;a.hideTitle||(o+=4),i&&o!==a.height&&a.update({},{height:o})}},e.prototype.componentDidMount=function(){this.flag&&clearTimeout(this.flag),this.flag=setTimeout(this.computeHeight.bind(this),500)},e.prototype.componentDidUpdate=function(){this.flag&&clearTimeout(this.flag),this.flag=setTimeout(this.computeHeight.bind(this),500)},e.prototype.componentWillUnmount=function(){this.flag&&clearTimeout(this.flag)},e.prototype.render=function(){var t=this.auth(this.props);if(t!==!0)return t;var e=this.props,a=e.chart,i=e.hub,s=e.sugarRoot,d=i.data,l=this.props.chart.config.htmlText||"";if(a.config.needLoadData){var u=d.data?d.data instanceof Array?d.data[0]||{}:d.data:{};l=l.replace(/\{data.([^\}]+)\}/g,function(t,e){var a=u[e];return null==a?"--":"number"==typeof a?h.formatNumber(a):a.toString?a.toString():a})}return l=p.replaceSomeParam(l,a.frontendId,s),r.createElement("div",{className:"p-xs text-chart-container"},r.createElement("div",{ref:this.getDom.bind(this),dangerouslySetInnerHTML:{__html:o(l,n.xssOption)}}))},e.displayName="TextChart",e=a.__decorate([f.default,l.default,x.default,c.inject(function(t){return{sugarRoot:t}}),c.observer,s.decorate(u.default)],e)}(r.Component);e.default=b;var y=function(t){var e=t.dataConfig.dataModel.value,a=void 0===e?[]:e;return a.length?!0:!1};d.register({kind:"text",type:"text",name:i.default("富文本"),iconClassName:"chart-text",enableTemplate:!0,component:b,dataBindTabTitle:i.default("文本内容"),canEmptyData:!0,loadDataPremiseField:"needLoadData",canAutoHeight:!0,initialState:{hideTitle:!0,dataType:"api",config:{htmlText:i.default("这是富文本")},dataConfig:{needAutoRefresh:!1}},initialDashboardState:{config:{htmlText:'<p><span style="color: rgb(97, 189, 109);">'+i.default("这是富文本")+"</span></p>"}},basicCtrl:g.basicCtrl,dataBindCtrl:g.dataBindCtrl,needDashboardAutoFresh:!0,canBeDrillChild:!0,dataModelPanelShow:[["dataType","dataModel"],["config.needLoadData",!0]],loadDataWhenDataModelConfigChange:y})});
;sugar.define("sugar:widgets/charts/word-cloud/word-cloud-ctrl.tsx",function(a,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.advancedCtrl=e.dataBindCtrl=e.chartEigens=e.chartDemoUrl=void 0;var t=a("sugar:node_modules/tslib/tslib.js"),l=a("sugar:utils/i18n.ts"),d=a("sugar:node_modules/react/index.js"),n=a("sugar:widgets/ctrl-panel/data-bind-ctrl/index.tsx"),o=a("sugar:widgets/object-array-editor/object-array-editor.tsx"),i=a("sugar:widgets/ctrl-panel/common/switch-with-tip.tsx"),r=a("sugar:widgets/amis-inline-switch.tsx"),s=a("sugar:widgets/data-model/data-model-field-holder/data-model-field-holder.tsx"),u=a("sugar:widgets/charts/utils/common.tsx"),c=a("sugar:utils/font-map.ts"),m=[{label:l.default("取累加值"),value:"sum"},{label:l.default("取均值"),value:"avg"},{label:l.default("取首行"),value:"first"},{label:l.default("取末行"),value:"end"}],f="/openapi/demo/chart?type=wordCloud";e.chartDemoUrl="$CUR_HOST/openapi/demo/chart?type=wordCloud",e.chartEigens=[{field:[{name:"name",type:"d",minCount:1,maxCount:2},{name:"size",type:"m",minCount:1,maxCount:1}]},{field:[{name:"size",type:"m",minCount:2,maxCount:20},{name:"name",type:"d",minCount:0,maxCount:0}]}],e.dataBindCtrl=function(a){var e=n.getDebugAndRefreshBtn({loadData:a.chart.loadData,loadDebugData:a.chart.loadDebugData,dataType:a.chart.dataType,refreshText:l.default("刷新图表")}),r=n.getDataBindCommon({frontendId:a.chart.frontendId,dataTypeOptions:["api","dataModel","sql","json"],api:{demoUrl:f},sql:{needContinuitySetting:!1},loadData:a.chart.loadData,loadDebugData:a.chart.loadDebugData,curUrl:a.chart.dataApiUrl}),u=a.chart.dataModelHash||"",c=a.sqlModelStore.detailMap.mapByHash.get(u),p=n.generateSQLFieldList(c),g=[{type:"select",list:p,key:"frontendId",name:l.default("绑定字段"),tdStyle:{minWidth:150}}],h=t.__spreadArrays([{type:"radios",name:"dataConfig.bindMode",inline:!1,hiddenOn:"data.dataType != 'sql'",label:l.default("数据使用方式："),options:[{label:l.default("每行对应一个字符区域"),value:"row"},{label:l.default("每列对应一个字符区域"),value:"col"}]},{type:"select",name:"dataConfig.rowNameField",hiddenOn:"data.dataType != 'sql' || data.dataConfig.bindMode != 'row'",label:l.default("字符区块的名称字段"),placeholder:l.default("请选择"),options:p},{type:"select",name:"dataConfig.rowValueField",hiddenOn:"data.dataType != 'sql' || data.dataConfig.bindMode != 'row'",label:l.default("字符区块大小的取值字段"),placeholder:l.default("请选择"),options:p},{type:"select",name:"dataConfig._sugar_extras",hiddenOn:"data.dataType != 'sql' || data.dataConfig.bindMode != 'row'",label:l.default("下钻需要的附加字段，如存有URL的字段"),placeholder:l.default("请选择"),options:p,clearable:!0},{name:"dataConfig.colModeFields",hiddenOn:"data.dataType != 'sql' || data.dataConfig.bindMode != 'col'",children:function(e){var n=e.onChange,i=e.value;return d.createElement(o.default,t.__assign({},{onChange:n,value:i},{chartFrontendId:a.chart.frontendId,containerClassName:"form-group form-item",label:l.default("绑定字段到字符区域"),addTipText:l.default("新增字符区块"),cols:g}))}},s.getDataModelFieldHolder({name:"name",label:l.default("字符区块的名称字段"),hiddenOn:"data.dataType != 'dataModel'",config:{dataModelHash:u,holderId:a.chart.frontendId+"-name",maxCount:2,onlyDimension:!0}}),s.getDataModelFieldHolder({name:"size",label:l.default("字符区块大小的取值字段"),hiddenOn:"data.dataType != 'dataModel'",config:{dataModelHash:u,holderId:a.chart.frontendId+"-size",maxCount:20,onlyMeasure:!0}}),n.commonFilterForDataModel(u),n.commonBindUrlParamForDataModel(u)],s.getChartConditionsHolder(u,a.chart),[n.commonLimitForDataModel]);return c&&c.config.openRow2Col&&h.push({name:"dataConfig.addAllRow2Col",hiddenOn:"data.dataType != 'sql' || data.dataConfig.bindMode != 'col'",children:function(a){var e=a.onChange,n=a.value;return d.createElement(i.default,t.__assign({},{onChange:e,value:n,label:l.default("绑定所有的行转列"),tipText:l.default("不了解？"),tipLink:"/docs/DataBind-SQL-Rowcol"}))}}),h.push({type:"select",name:"dataConfig.colModeMultiRows",hiddenOn:"(data.dataType != 'sql' && data.dataType != 'dataModel') || data.dataConfig.bindMode != 'col' || !data.dataConfig.notAggregate",label:l.default("如果有多行数据的处理方式"),options:m}),r.concat(h,e)},e.advancedCtrl=[{type:"group",controls:[{type:"select",name:"config.fontFamily",label:l.default("字体"),clearable:!0,options:c.fonts},{type:"text",name:"config.fontWeight",clearable:!0,label:l.default("字重")}]},{type:"group",controls:[{type:"number",name:"config.sizeMin",label:l.default("最小字体"),step:1,min:6},{type:"number",name:"config.sizeMax",label:l.default("最大字体"),step:1,min:18}]},r.amisInlineSwitch("config.canRotate",l.default("允许文字旋转")),{type:"group",visibleOn:"config.canRotate",controls:[{type:"range",name:"config.rotationRange",label:l.default("文字旋转角度范围"),multiple:!0,min:-180,max:180},{type:"number",name:"config.rotationStep",clearable:!0,label:l.default("旋转步进角度"),step:1,min:0,max:90}]},{type:"group",controls:[{type:"select",name:"config.shape",clearable:!0,label:l.default("形状"),options:[{label:l.default("圆形"),value:"circle"},{label:l.default("菱形"),value:"diamond"},{label:l.default("箭头形"),value:"triangle-forward"},{label:l.default("三角形"),value:"triangle"},{label:l.default("五边形"),value:"pentagon"}]},{type:"number",name:"config.gridSize",label:l.default("字符间距"),step:1,min:4}]},u.dataUnitCtrl,{type:"image",label:l.default("图片蒙版"),name:"config.maskImage",accept:".png",maxLength:1,allowInput:!0,maxSize:10485760,reciever:"/api/image/upload"},{type:"tpl",tpl:l.default('图片蒙版请使用 png 格式，类似<a href="/static/img-charts/china-map.png" class="text-info" target="_blank">这张图</a>')},{type:"divider"},u.getTooltipCtrl()]});
;sugar.define("sugar:widgets/charts/word-cloud/word-cloud.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=e("sugar:node_modules/tslib/tslib.js"),r=e("sugar:utils/i18n.ts"),n=e("sugar:node_modules/react/index.js"),o=e("sugar:widgets/charts/chart-manager.tsx"),s=e("sugar:widgets/charts/word-cloud/word-cloud-ctrl.tsx"),i=e("sugar:widgets/charts/_hoc/echarts.tsx"),l=e("sugar:node_modules/react-mixin/index.js"),d=e("sugar:widgets/charts/_mixin/echarts.tsx"),u=e("sugar:widgets/charts/_hoc/debug/debug.tsx"),c=e("sugar:widgets/charts/_hoc/drill-down/drill-down.tsx"),g=e("sugar:widgets/charts/_hoc/toolbar/toolbar.tsx"),m=e("sugar:widgets/charts/_hoc/chart-zoom/index.tsx"),h=e("sugar:node_modules/lodash/cloneDeep.js"),f=e("sugar:utils/common-helper.ts"),p=e("sugar:utils/export-file/export-csv.ts"),x=e("sugar:utils/export-file/export-excel.ts"),v=e("sugar:node_modules/amis/lib/index.js"),w=e("sugar:widgets/charts/utils/common.tsx"),_=e("sugar:widgets/charts/utils/helper.ts"),C=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.getDrillDownParam=function(e){var t=e.name,r=h(this.props.chartData),n="";return r.forEach(function(e){e.name===t&&(n=e)}),n?a.__assign(a.__assign({},n),{_sugar_dd_default_:n.hasOwnProperty("_sugar_extra")?n._sugar_extra:n.name_sugar_origin||n.name}):null},t.prototype.getDependenceParam=function(e){return{item:this.getDrillDownParam(e),state:{seriesIndex:e.seriesIndex,dataIndex:e.dataIndex}}},t.prototype.refresh=function(e){var t=e.chartData,a=e.chartConfig,r=e.theme,n=e.hub,o=h(t),s=this.chart,i=a.unit||"",l=a.prefix||"";o.sort(function(e,t){return e.value<t.value?1:-1});var d=[],u=(r.config||{}).chartTheme;if(u instanceof Object){var c=u.color||[];a.openCustomColor&&a.customColors&&a.customColors.length&&(c=a.customColors.map(function(e){return e.color})),o.forEach(function(e,t){var a={color:c[t%c.length]};if(n.dependenceData.dependenceState){var r=n.dependenceData.dependenceState.dataIndex;r!==t&&(a.color="#ddd")}d.push({name:e.name,value:e.value,textStyle:a})})}var g=[0,0],m=null;a.canRotate&&(g=[-90,90],m=a.rotationStep>=0?a.rotationStep:45,a.rotationRange instanceof Object&&(g=[a.rotationRange.min,a.rotationRange.max]));var f={tooltip:{confine:a.tooltipConfine||!1,extraCssText:w.getTooltipCss(a),formatter:function(e){return e.marker+" "+(e.name||"")+": "+_.formatVal({value:e.value,unit:i,prefix:l})}},toolbox:{show:!1},series:[{type:"wordCloud",left:"center",top:"center",width:"100%",height:"100%",shape:a.shape||!1,sizeRange:[parseInt(a.sizeMin||12,10),parseInt(a.sizeMax||40,10)],rotationRange:g,rotationStep:m,drawOutOfBound:!0,gridSize:parseInt(a.gridSize||6,10),textStyle:{fontFamily:a.fontFamily||null,fontWeight:a.fontWeight||"bold"},data:d.length?d:o}]};if(a.maskImage){var p=new Image;p.src=a.maskImage,p.onload=function(){f.series[0].maskImage=p,s.setOption(f,!0)}}s.setOption(f,!0)},t.displayName="WordCloud",t=a.__decorate([c.default,u.default,g.default,m.default,i.default,l.decorate(d.default)],t)}(n.Component);t.default=C;var y=function(e){if(!e||!e.length)return r.default("无数据");for(var t=0;t<e.length;t++){var a=e[t];if(!a.name)return r.default("第「"+(t+1)+"」项数据中没有名称name字段");if(!f.isNumberic(a.value))return r.default("第「"+(t+1)+"」项数据中value取值不是数字类型")}return!0},D=function(e,t){var a=M(e);x.exportExcelByColumns(a,""+(t.dynamicName||t.name||"export"))},b=function(e,t){var a=M(e);p.exportCsvByColumns(a,(t.dynamicName||t.name||"export")+".csv")},S=function(e){var t=M(e);return x.exportRowsByColumns(t)},M=function(e){if(e&&e.data&&e.data.length){var t=[],a=[];return e.data.forEach(function(e){t.push(e.name),a.push(e.value)}),[t,a]}return[]},I=function(e){var t=e.dataConfig.dataModel,a=t.size,n=void 0===a?[]:a,o=t.name,s=void 0===o?[]:o;return n.length?n.length>1&&s.length?(v.toast.error(r.default("字符区块名称绑定了字段时，字符区块大小只能绑定一个度量字段")),!1):s.length||1!==n.length?!0:!1:!1};o.register({kind:"text",type:"wordCloud",name:r.default("字符云"),iconClassName:"chart-word-cloud",enableTemplate:!0,commonCustomColor:!0,initialState:{dataType:"api",dataApiUrl:s.chartDemoUrl,config:{sizeMin:12,sizeMax:46,rotationRange:{min:-90,max:90},rotationStep:45,gridSize:8},dataConfig:{bindMode:"row",colModeMultiRows:"sum"}},initialDashboardState:{config:{canRotate:!0}},component:C,dataBindCtrl:s.dataBindCtrl,advancedCtrl:s.advancedCtrl,exportCSV:b,exportExcel:D,exportRows:S,needDashboardAutoFresh:!0,validate:y,drillDownType:"single",canBeDrillChild:!0,dataModelPanelShow:[["dataType","dataModel"]],drillDownSuggestDataModelField:"name",loadDataWhenDataModelConfigChange:I,chartEigens:s.chartEigens})});
;sugar.define("sugar:widgets/charts/3d-word-cloud/3d-word-cloud-ctrl.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.advancedCtrl=t.chartDemoUrl=t.basicCtrl=t.chartEigens=void 0;var a=e("sugar:node_modules/tslib/tslib.js"),n=e("sugar:utils/i18n.ts"),o=e("sugar:node_modules/react/index.js"),l=e("sugar:widgets/object-array-editor/object-array-editor.tsx"),i=e("sugar:widgets/amis-inline-switch.tsx"),r=e("sugar:utils/font-map.ts"),d=[{type:"color",name:n.default("字体颜色"),key:"color",defaultValue:"#1797BE"}];t.chartEigens=[{field:[{name:"name",type:"d",minCount:1,maxCount:2},{name:"size",type:"m",minCount:1,maxCount:1}]},{field:[{name:"size",type:"m",minCount:2,maxCount:20},{name:"name",type:"d",minCount:0,maxCount:0}]}];var s=function(e){return[{type:"divider"},{type:"fieldset",collapsed:!1,title:n.default("自定义配色"),collapsable:!0,headingClassName:"fieldset-title",controls:[i.amisInlineSwitch("config.openCustomColor",n.default("开启文字颜色自定义")),{type:"radios",name:"config.customColorType",hiddenOn:"!data.config.openCustomColor",label:"",inline:!1,options:[{label:n.default("本页面的主题配色"),value:"report"},{label:n.default("自定义"),value:"custom"}]},{name:"config.customColors",hiddenOn:"!data.config.openCustomColor || data.config.customColorType != 'custom'",children:function(t){var i=t.onChange,r=t.value;return o.createElement(l.default,a.__assign({},{onChange:i,value:r},{chartFrontendId:e.chart.frontendId,containerClassName:"form-group form-item",label:n.default("可增加多个配色项，会按照这个顺序来设置颜色"),addTipText:n.default("新增配色项"),cols:d}))}}]}]};t.basicCtrl=function(e){return s(e)},t.chartDemoUrl="$CUR_HOST/openapi/demo/chart?type=wordCloud3D",t.advancedCtrl=function(e){return a.__spreadArrays([{type:"group",controls:[{type:"select",name:"config.fontFamily",label:n.default("字体"),clearable:!0,options:r.fonts},{type:"text",name:"config.fontWeight",clearable:!0,label:n.default("字重")}]},{type:"group",controls:[{type:"number",name:"config.minSize",label:n.default("最小字体"),step:1,min:8},{type:"number",name:"config.maxSize",label:n.default("最大字体"),step:1,min:8}]},{type:"number",name:"config.maxSpeedScale",label:n.default("滚动最大倍数"),step:1,min:1},{type:"number",name:"config.initSpeed",label:n.default("初始滚动速度"),step:1,min:1},{type:"number",name:"config.direction",label:n.default("初始滚动方向"),step:1,min:0,max:180}],s(e))}});
;sugar.define("sugar:widgets/charts/3d-word-cloud/3d-word-cloud-viewer.ts",function(t,e){"use strict";function i(t){return"string"==typeof t?parseInt(t,10):"number"==typeof t?t:0}Object.defineProperty(e,"__esModule",{value:!0}),e.WordCloud3DViewer=void 0;var s=t("sugar:node_modules/tslib/tslib.js"),n=function(){function t(t,e,s){if(void 0===t&&(t=document.body),t&&1===t.nodeType||new Error("Incorrect element type"),this.container=t,0!==e.length){this.texts=e;for(var n=i(e[0].value),o=i(e[0].value),a=0,h=e;a<h.length;a++){var r=h[a],l=i(r.value);l>o&&(o=l),n>l&&(n=l)}var c=parseInt(window.getComputedStyle(t,void 0).getPropertyValue("width").replace("px",""),10),u=parseInt(window.getComputedStyle(t,void 0).getPropertyValue("height").replace("px",""),10);this.radius=c>u?u/2:c/2,this.minValue=n,this.updateConfig(s);var d=o-n;this.sizeScale=d?(this.maxSize-this.minSize)/d:0,this._createElment(),this._init()}}return t.prototype.updateConfig=function(e){this.config=s.__assign(s.__assign({},t._defaultConfig),e||{}),this.depth=2*this.radius,this.size=1.5*this.radius,this.maxSpeedScale=this.config.maxSpeedScale,this.initSpeed=this.config.initSpeed,this.direction=this.config.direction,this.keep=this.config.keep,this.colors=this.config.colors,this.minSize=this.config.minSize,this.maxSize=this.config.maxSize,this.fontFamily=this.config.fontFamily||"",this.fontWeight=this.config.fontWeight||""},t.prototype._createElment=function(){var t=this,e=document.createElement("div");e.className="word-cloud-3d",e.style.position="relative",e.style.width=2*this.radius+"px",e.style.height=2*this.radius+"px",e.style.fontFamily=this.fontFamily,e.style.fontWeight=this.fontWeight,this.items=[],this.texts.forEach(function(i,s){var n=t._createTextItem(i,s);e.appendChild(n.el),t.items.push(n)}),this.container.appendChild(e),this.innerContainer=e},t.prototype._createTextItem=function(t,e){void 0===e&&(e=0);var i;t.url?(i=document.createElement("a"),i.href=t.url.match(/^https?:\/\//)?t.url:"http://"+t.url,i.target="_blank"):i=document.createElement("span");var n=this.minSize+(t.value-this.minValue)*this.sizeScale;i.title=t.value+"",i.className="word-cloud-3d-item",i.style.color=this.colors[e%this.colors.length],i.style.position="absolute",i.style.fontSize=n+"px",i.style.top="50%",i.style.left="50%",i.style.zIndex=e+1+"",i.style.filter="alpha(opacity=0)",i.style.opacity="0",i.style.willChange="transform, opacity, filter";var o="50% 50%";i.style.webkitTransformOrigin=o,i.style.transformOrigin=o;var a="translateX(-50%) translateY(-50%) scale(1)";i.style.webkitTransform=a,i.style.transform=a;var h="all .1s";return i.style.webkitTransition=h,i.style.transition=h,i.innerText=t.name,s.__assign({el:i},this._computePosition(e))},t.prototype._computePosition=function(t,e){void 0===e&&(e=!1);var i=this.texts.length;e&&(t=Math.floor(Math.random()*(i+1)));var s=Math.acos(-1+(2*t+1)/i),n=Math.sqrt((i+1)*Math.PI)*s;return{x:this.size*Math.cos(n)*Math.sin(s)/2,y:this.size*Math.sin(n)*Math.sin(s)/2,z:this.size*Math.cos(s)/2}},t.prototype._init=function(){var t=this;this.active=!1,this.mouseX0=this.initSpeed*Math.sin(this.direction*(Math.PI/180)),this.mouseY0=-this.initSpeed*Math.cos(this.direction*(Math.PI/180)),this.mouseX=this.mouseX0,this.mouseY=this.mouseY0,this.innerContainer.addEventListener("mouseover",function(){t.active=!0}),this.innerContainer.addEventListener("mouseout",function(){t.active=!1});var e=this.keep?window:this.innerContainer;e.addEventListener("mousemove",function(e){var i=t.innerContainer.getBoundingClientRect();t.mouseX=(e.clientX-(i.left+i.width/2))/5,t.mouseY=(e.clientY-(i.top+i.height/2))/5}),this._next(),this.interval=setInterval(function(){t._next.call(t)},100)},t.prototype._next=function(){var t=this;this.keep||this.active||(this.mouseX=Math.abs(this.mouseX-this.mouseX0)<1?this.mouseX0:(this.mouseX+this.mouseX0)/2,this.mouseY=Math.abs(this.mouseY-this.mouseY0)<1?this.mouseY0:(this.mouseY+this.mouseY0)/2);var e=-(Math.min(Math.max(-this.mouseY,-this.size),this.size)/this.radius)*this.maxSpeedScale,i=Math.min(Math.max(-this.mouseX,-this.size),this.size)/this.radius*this.maxSpeedScale;if(!(Math.abs(e)<=.01&&Math.abs(i)<=.01)){var s=Math.PI/180,n=[Math.sin(e*s),Math.cos(e*s),Math.sin(i*s),Math.cos(i*s)];this.items.forEach(function(e){var i=e.x,s=e.y*n[1]+e.z*-n[0],o=e.y*n[0]+e.z*n[1],a=i*n[3]+o*n[2],h=s,r=o*n[3]-i*n[2],l=2*t.depth/(2*t.depth+r);e.x=a,e.y=h,e.z=r,e.scale=l.toFixed(3);var c=l*l-.25,u=(c>1?1:c).toFixed(3),d=e.el,m=(e.x-d.offsetWidth/2).toFixed(2),p=(e.y-d.offsetHeight/2).toFixed(2),f="translateX("+m+"px) translateY("+p+"px) scale("+e.scale+")";d.style.WebkitTransform=f,d.style.MozTransform=f,d.style.OTransform=f,d.style.transform=f,d.style.filter="alpha(opacity="+100*c+")",d.style.opacity=u})}},t.prototype.update=function(t,e){var i=this;this.updateConfig(e),this.innerContainer.style.width=2*this.radius+"px",this.innerContainer.style.height=2*this.radius+"px",this.texts=t||[],this.texts.forEach(function(t,e){var s=i.items[e];s||(s=i._createTextItem(t,e),Object.assign(s,i._computePosition(e,!0)),i.innerContainer.appendChild(s.el),i.items.push(s)),s.el.innerText=t});var s=this.texts.length,n=this.items.length;if(n>s){var o=this.items.splice(s,n-s);o.forEach(function(t){i.innerContainer.removeChild(t.el)})}},t.prototype.destroy=function(){if(this.interval=null,this.container&&this.innerContainer)try{this.container.removeChild(this.innerContainer)}catch(t){}},t._defaultConfig={radius:100,maxSpeedScale:10,initSpeed:40,direction:135,keep:!1,colors:["#000"],maxSize:50,minSize:16},t}();e.WordCloud3DViewer=n});
;sugar.define("sugar:widgets/charts/3d-word-cloud/3d-word-cloud.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=e("sugar:node_modules/tslib/tslib.js"),a=e("sugar:utils/i18n.ts"),o=e("sugar:node_modules/react/index.js"),n=e("sugar:node_modules/react-mixin/index.js"),d=e("sugar:widgets/charts/chart-manager.tsx"),i=e("sugar:widgets/charts/_hoc/debug/debug.tsx"),s=e("sugar:widgets/charts/_hoc/drill-down/drill-down.tsx"),l=e("sugar:widgets/charts/_hoc/toolbar/toolbar.tsx"),u=e("sugar:widgets/charts/_hoc/chart-zoom/index.tsx"),c=e("sugar:utils/common-helper.ts"),h=e("sugar:stores/index.ts"),p=e("sugar:widgets/charts/_mixin/common.tsx"),g=e("sugar:widgets/charts/3d-word-cloud/3d-word-cloud-ctrl.tsx"),m=e("sugar:widgets/charts/word-cloud/word-cloud-ctrl.tsx"),f=e("sugar:widgets/charts/3d-word-cloud/3d-word-cloud-viewer.ts"),w=e("sugar:node_modules/amis/lib/index.js"),v=e("sugar:utils/export-file/export-excel.ts"),x=e("sugar:utils/export-file/export-csv.ts"),_=function(e){function t(t){var r=e.call(this,t)||this;return r.handleItemDrillDown=r.handleItemDrillDown.bind(r),r.setupViewer=r.setupViewer.bind(r),r}r.__extends(t,e),t.prototype.handleItemDrillDown=function(e,t,a,o,n){t&&this.props.chart.handleEvent("drillDown",this.props.mode,{drillDownItem:{item:r.__assign(r.__assign({},e),{_sugar_dd_default_:e.name_sugar_origin||e.name}),fireKey:""},drillDownIndex:0});var d=this.props.hub.dependenceData.dependenceState;d&&d.colIndex===o&&d.rowIndex===n?this.props.chart.handleEvent("cancelDependence",this.props.mode):a&&this.props.chart.handleEvent("dependence",this.props.mode,{dependenceIndex:0,dependenceState:{colIndex:o,rowIndex:n},dependenceItem:{item:r.__assign(r.__assign({},e),{_sugar_dd_default_:e.name_sugar_origin||e.name}),fireKey:""}})},t.prototype.setupViewer=function(e){e&&(this.dom=e,this.viewer=new f.WordCloud3DViewer(e,this.data,this.options))},t.prototype.componentWillUnmount=function(){this.viewer&&this.viewer.destroy()},t.prototype.render=function(){var e,t=this.props,n=t.hub,d=t.chart.config,i=t.theme,s=this.auth(this.props);if(s!==!0)return s;var l=n.data.data;if("pending"===n.data.loadState&&!l||null==l)return null;if(!(l&&l instanceof Array&&l.length))return o.createElement("div",{className:"tip"},a.default("数据格式有误！"));l=l.slice(0,100);var u=d.customColorType,c=[];if("report"===u){var h=(null===(e=i.config.chartTheme)||void 0===e?void 0:e.color)||[];h.length&&(c=h)}else"custom"===u&&(c=(d.customColors||[]).map(function(e){return e.color}));return 0===c.length&&(c=["#eee"]),this.data=l,this.options=r.__assign({colors:c},d),this.viewer&&(this.viewer.destroy(),this.viewer=new f.WordCloud3DViewer(this.dom,this.data,this.options)),o.createElement("div",{className:"chart chart-3d-word-cloud",ref:this.setupViewer,style:{width:"100%",height:"100%"}})};var c;return t.displayName="WordCloud3D",t=r.__decorate([s.default,i.default,l.default,u.default,h.observer,n.decorate(p.default),r.__metadata("design:paramtypes",["function"==typeof(c="undefined"!=typeof d.IChartComponentProps&&d.IChartComponentProps)?c:Object])],t)}(o.Component);t.default=_;var C=function(e){if(!e)return a.default("无数据");if(!(e instanceof Array&&e.length))return a.default("数据不是数组或者是空数组");for(var t=0;t<e.length;t++){var r=e[t];if(!r.name)return a.default("第「"+(t+1)+"」个指标的名称未指定");if(!c.isNumberic(r.value))return a.default("第「"+(t+1)+"」项数据中value取值不是数字类型")}return!0},y=function(e){var t=e.dataConfig.dataModel,r=t.size,o=void 0===r?[]:r,n=t.name,d=void 0===n?[]:n;return o.length?o.length>1&&d.length?(w.toast.error(a.default("字符区块名称绑定了字段时，字符区块大小只能绑定一个度量字段")),!1):d.length||1!==o.length?!0:!1:!1},D=function(e,t){var r=S(e);v.exportExcelByColumns(r,""+(t.dynamicName||t.name||"export"))},b=function(e,t){var r=S(e);x.exportCsvByColumns(r,(t.dynamicName||t.name||"export")+".csv")},I=function(e){var t=S(e);return v.exportRowsByColumns(t)},S=function(e){if(e&&e.data&&e.data.length){var t=[],r=[];return e.data.forEach(function(e){t.push(e.name),r.push(e.value)}),[t,r]}return[]};d.register({kind:"text",type:"wordCloud3D",name:a.default("3D 词云"),iconClassName:"chart-word-cloud-3d",enableTemplate:!0,initialState:{dataType:"api",dataApiUrl:g.chartDemoUrl,height:360,width:4,config:{maxSpeedScale:5,initSpeed:40,direction:135,minSize:16,maxSize:32,customColorType:"report"},dataConfig:{bindMode:"row",colModeMultiRows:"sum"}},initialDashboardState:{width:400,height:400},component:_,needDashboardAutoFresh:!0,dataBindCtrl:m.dataBindCtrl,basicCtrl:g.basicCtrl,exportCSV:b,exportExcel:D,exportRows:I,advancedCtrl:g.advancedCtrl,validate:C,canBeDrillChild:!0,dataModelPanelShow:[["dataType","dataModel"]],drillDownSuggestDataModelField:"name",loadDataWhenDataModelConfigChange:y,chartEigens:g.chartEigens})});
;sugar.define("sugar:widgets/charts/image/image-ctrl.tsx",function(e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.dataBindCtrl=a.chartDemoUrl=void 0;var t=e("sugar:node_modules/tslib/tslib.js"),l=e("sugar:utils/i18n.ts"),i=e("sugar:utils/img-source-map.ts"),d=e("sugar:widgets/amis-inline-switch.tsx"),n=e("sugar:widgets/image-selector/image-selector.tsx"),o=e("sugar:node_modules/react/index.js"),r=e("sugar:widgets/ctrl-panel/data-bind-ctrl/index.tsx"),g=e("sugar:widgets/ctrl-panel/common/switch-with-tip.tsx"),s=e("sugar:widgets/data-model/data-model-field-holder/data-model-field-holder.tsx"),c=e("sugar:widgets/dashboard-ctrl-panel/chart-ctrl.tsx"),u=[];for(var p in i.pics)u.push({label:p,type:i.pics[p].url.split(".").pop().toUpperCase(),value:i.pics[p].url,image:i.pics[p].url});var f="/openapi/demo/chart?type=image";a.chartDemoUrl="$CUR_HOST/openapi/demo/chart?type=image",a.dataBindCtrl=function(e){var a=e.chart.dataModelHash||"",i=e.sqlModelStore.detailMap.mapByHash.get(a),p=r.generateSQLFieldList(i),m=r.getDebugAndRefreshBtn({loadData:e.chart.loadData,loadDebugData:e.chart.loadDebugData,dataType:e.chart.dataType,refreshText:l.default("刷新图表")}),h=r.getDataBindCommon({frontendId:e.chart.frontendId,dataTypeOptions:["dataModel","api","sql"],api:{demoUrl:f}}),b=[{type:"radios",name:"config.selfUpload",hiddenOn:"!!config.needLoadData",inline:!1,options:[{label:l.default("使用内置图片素材"),value:0},{label:l.default("上传图片"),value:1},{label:l.default("从模板中选取"),value:2},{label:l.default("输入图片地址"),value:3}]},{name:"config.imgUrl",hiddenOn:"config.selfUpload !== 3 || !!config.needLoadData",type:"text",placeholder:l.default("请输入图片地址"),validations:"maxLength:2048"},{name:"config.imgUrlInside",hiddenOn:"config.selfUpload !== 0 || !!config.needLoadData",children:function(e){var a=e.onChange,i=e.value;return o.createElement(n.default,t.__assign({},{onChange:a,value:i},{options:u,containerClassName:"form-group form-item",label:l.default("请选择图片素材："),needSearch:!0,limit:20}))}},{type:"image",label:l.default("请选择图片上传"),name:"config.imgUrl",accept:".jpg, .jpeg, .png, .gif, .svg",hiddenOn:"config.selfUpload !== 1  || !!config.needLoadData",maxLength:1,allowInput:!0,maxSize:10485760,reciever:"/api/image/upload"},{type:"crud",mode:"cards",visibleOn:"config.selfUpload === 2 && !config.needLoadData",columnsCount:2,defaultParams:{page:1,perPage:10},syncLocation:!1,headerToolbar:[],footerToolbar:["statistics","pagination"],api:"/api/manage/group/"+e.groupHash+"/widgetTemplate/getByType?type=image&page=$page&perPage=$perPage",card:{bodyClassName:"text--center",body:[{type:"image",src:"$imgUrl",enlargeAble:!0}],actions:[{type:"button",label:l.default("使用"),onClick:function(a,t){var l=t.data;e.chart.changeImage(l.imgUrl)}}]}},{name:"config.needLoadData",children:function(e){var a=e.onChange,i=e.value;return o.createElement(g.default,t.__assign({},{onChange:a,value:i,label:l.default("动态拉取图片地址"),tipText:l.default("不了解"),tipLink:"/docs/Chart-image"}))}},{type:"divider"},{type:"color",name:"config.backgroundColor",format:"rgba",label:l.default("背景颜色")},{type:"divider"},{type:"radios",name:"config.imageRotate",label:l.default("翻转角度"),inline:!1,options:[{label:l.default("0度"),value:"0deg"},{label:l.default("90度"),value:"90deg"},{label:l.default("180度"),value:"180deg"},{label:l.default("270度"),value:"270deg"}]},d.amisInlineSwitch("config.lockRatio",l.default("保持图片比例")),{type:"divider"},{type:"range",name:"config.opacity",max:1,min:0,step:.1,label:l.default("透明度")},{type:"text",label:l.default("图片超链接（浏览模式下有效）"),name:"config.link",placeholder:l.default("请输入图片的超链接地址"),validations:"maxLength:2048"},d.amisInlineSwitch("config.targetDialog",l.default("超链接在本页面弹框中打开")),d.amisInlineSwitch("config.targetSelf",l.default("超链接在本页面打开"),"data.config.targetDialog")];if(e.chart.config.needLoadData){var v=h.concat([{type:"select",name:"dataConfig.bindField",hiddenOn:"data.dataType != 'sql'",label:l.default("绑定图片地址字段"),placeholder:l.default("请选择"),clearable:!0,options:p}],[s.getDataModelFieldHolder({name:"value",label:l.default("图片地址字段"),config:{dataModelHash:a,holderId:e.chart.frontendId+"-value",maxCount:1}}),r.commonFilterForDataModel(a),r.commonBindUrlParamForDataModel(a)],m);e.chart.isDashChart&&(v=v.concat(c.getAutoRefreshCtrl())),b.splice.apply(b,t.__spreadArrays([6,0],v))}return b}});
;sugar.define("sugar:widgets/charts/image/image.tsx",function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=t("sugar:node_modules/tslib/tslib.js"),i=t("sugar:utils/i18n.ts"),r=t("sugar:node_modules/react/index.js"),n=t("sugar:node_modules/react-mixin/index.js"),o=t("sugar:widgets/charts/chart-manager.tsx"),s=t("sugar:widgets/charts/_mixin/common.tsx"),l=t("sugar:widgets/charts/_hoc/debug/debug.tsx"),d=t("sugar:stores/index.ts"),g=t("sugar:widgets/charts/image/image-ctrl.tsx"),h=t("sugar:utils/resize-sensor.ts"),c=t("sugar:utils/common-helper.ts"),u=t("sugar:utils/chart-helper.ts"),m=t("sugar:node_modules/lodash/debounce.js"),p=t("sugar:widgets/charts/_hoc/drill-down/drill-down.tsx"),f=t("sugar:widgets/charts/_hoc/chart-zoom/index.tsx"),y=function(t){function e(e){var a=t.call(this,e)||this;return a.authResult=!0,a.getParent=a.getParent.bind(a),a.generateStyle=a.generateStyle.bind(a),a.delaySetStyle=a.delaySetStyle.bind(a),a}return a.__extends(e,t),e.prototype.getParent=function(t){t&&(this.dom=t,this.parent=t.parentNode,setTimeout(this.delaySetStyle,200),this._initResizeSensor())},e.prototype.delaySetStyle=function(){if(this.authResult&&this.dom){var t=this.generateStyle();this.dom.style.width=t.width,this.dom.style.height=t.height,this.dom.style.lineHeight=t.lineHeight,this.dom.style.marginLeft=t.marginLeft+"px",this.dom.style.marginTop=t.marginTop+"px"}},e.prototype.generateStyle=function(){var t,e=this.props.chart,i=e.config,r=this.getImgUrl(),n="90deg"===i.imageRotate||"270deg"===i.imageRotate,o=e.width,s=e.height;if(this.parent){var l=this.parent.getBoundingClientRect();e.isDashChart?(t=c.getParentDomByClassName(this.parent,"chart-item__content"),e.drillDownLevel&&(o=l.width)):(o=l.width,s=l.height,t=c.getParentDomByClassName(this.parent,"chart-item"))}var d;t&&(d=Number(h.getComputedStyle(t,"border-width").replace("px",""))),d&&!isNaN(d)&&(s-=2*d);var g=n?s:o,u=n?o:s,m=r?"url("+r+") ":"",p=r||i.backgroundColor||!e.isDashChart?i.backgroundColor?i.backgroundColor:"":"rgba(23, 151, 191, 0.2)",f={width:g+"px",height:u+"px",lineHeight:u+"px",backgroundImage:m,backgroundColor:p,opacity:i.opacity,marginLeft:-g/2,marginTop:-u/2};return i.imageRotate&&(f.transform="rotate("+i.imageRotate+")"),f=i.lockRatio?a.__assign(a.__assign({},f),{backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}):a.__assign(a.__assign({},f),{backgroundSize:"100% 100%",backgroundRepeat:"no-repeat",backgroundPosition:"center"})},e.prototype.componentWillMount=function(){var t=this.props.chart.config;this.nowImgUrl=t.selfUpload?t.imgUrl:t.imgUrlInside},e.prototype.componentWillUnmount=function(){this.unWatchResize&&this.unWatchResize()},e.prototype.componentDidUpdate=function(){this.delaySetStyle()},e.prototype._initResizeSensor=function(){this.unWatchResize&&this.unWatchResize();var t=this.parent;if(t){var e=t;if("normal"===this.props.mode){var a=document.getElementById("content");e=a?a:document.body}this.unWatchResize=h.resizeSensor(e,m(this.delaySetStyle,50))}},e.prototype.getImgUrl=function(){var t=this.props,e=t.sugarRoot,a=t.chart,r=a.config,n=a.frontendId,o=t.hub.data,s=r.selfUpload?r.imgUrl:r.imgUrlInside;return r.needLoadData&&(s=o.data||0===o.data||""===o.data?o.data instanceof Array?o.data[0]:o.data:i.default("没有查询到数据"),s&&"object"==typeof s&&(s=s.toString())),s=u.replaceSomeParam(s,n,e,null,!0)},e.prototype.render=function(){{var t=this,e=this.props,a=e.sugarRoot,n=e.chart,o=n.config,s=n.frontendId;e.hub.data}this.authResult=!0;var l=this.auth(this.props);if(l!==!0)return this.authResult=!1,l;var d=this.props.chart.config.link;d&&!/^https?:\/\//i.test(d)&&(d="http://"+d),d=u.replaceSomeParam(d,s,a,null,!0);var g=this.getImgUrl();return r.createElement("div",{className:"image-chart-container",ref:this.getParent,style:this.generateStyle()},g||o.backgroundColor?"":i.default(o.selfUpload?"请上传图片":"请选择图片"),d&&"normal"===this.props.mode?o.targetDialog?r.createElement("a",{className:"image-link",onClick:function(){return t.props.assist.openIframeDialog(d)}}):r.createElement("a",{target:o.targetSelf?"_self":"_blank",className:"image-link",href:d}):null)},e.displayName="ImageChart",e=a.__decorate([p.default,l.default,f.default,d.inject(function(t){return{sugarRoot:t,assist:t.assist}}),d.observer,n.decorate(s.default),a.__metadata("design:paramtypes",[Object])],e)}(r.Component);e.default=y;var b=function(t){var e=t.dataConfig.dataModel.value,a=void 0===e?[]:e;return a.length?!0:!1};o.register({kind:"media",type:"image",name:i.default("图片"),iconClassName:"chart-image",enableTemplate:!0,variants:[{name:i.default("图片"),kind:"material",iconClassName:"chart-image-preset",initialState:{config:{selfUpload:0}}}],component:y,dataBindTabTitle:i.default("图片内容"),canEmptyData:!0,loadDataPremiseField:"needLoadData",initialState:{hideTitle:!0,dataType:"api",dataApiUrl:g.chartDemoUrl,config:{fixRatio:!1,selfUpload:1,opacity:1}},initialDashboardState:{config:{fixRatio:!1}},dataModelPanelShow:[["dataType","dataModel"],["config.needLoadData",!0]],dataBindCtrl:g.dataBindCtrl,canBeDrillChild:!0,loadDataWhenDataModelConfigChange:b})});
;sugar.define("sugar:widgets/charts/slider/slider-ctrl.tsx",function(e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.advancedCtrl=a.dataBindCtrl=a.chartDemoUrl=a.basicCtrl=void 0;var l=e("sugar:node_modules/tslib/tslib.js"),t=e("sugar:utils/i18n.ts"),d=e("sugar:node_modules/react/index.js"),o=e("sugar:widgets/ctrl-panel/data-bind-ctrl/index.tsx"),n=e("sugar:widgets/object-array-editor/object-array-editor.tsx"),i=e("sugar:widgets/amis-inline-switch.tsx"),r=e("sugar:widgets/data-model/data-model-field-holder/data-model-field-holder.tsx"),u=[{type:"divider"},{type:"fieldset",collapsed:!1,title:t.default("自定义配色"),collapsable:!0,headingClassName:"fieldset-title",controls:[i.default("config.openCustomColor",t.default("开启自定义颜色")),{type:"color",format:"rgba",label:t.default("图片标题背景颜色"),placeholder:t.default("请选择"),name:"config.titleBg",hiddenOn:"!data.config.openCustomColor"},{type:"color",format:"rgba",label:t.default("图片标题颜色"),placeholder:t.default("请选择"),name:"config.titleColor",hiddenOn:"!data.config.openCustomColor"},{type:"color",format:"rgba",label:t.default("翻页按钮颜色"),placeholder:t.default("请选择"),name:"config.buttonBg",hiddenOn:"!data.config.openCustomColor"},{type:"color",format:"rgba",label:t.default("导航圆点颜色"),placeholder:t.default("请选择"),name:"config.dotColor",hiddenOn:"!data.config.openCustomColor"}]}];a.basicCtrl=u;var s="/openapi/demo/chart?type=slider";a.chartDemoUrl="$CUR_HOST/openapi/demo/chart?type=slider",a.dataBindCtrl=function(e){var a=o.getDebugAndRefreshBtn({loadData:e.chart.loadData,loadDebugData:e.chart.loadDebugData,dataType:e.chart.dataType,refreshText:t.default("刷新图表")}),i=e.chart.dataModelHash||"",u=e.sqlModelStore.detailMap.mapByHash.get(i),f=o.generateSQLFieldList(u),c=o.getDataBindCommon({frontendId:e.chart.frontendId,dataTypeOptions:["dataModel","api","sql","json"],api:{demoUrl:s},sql:{needContinuitySetting:!1,sqlFieldList:f},loadData:e.chart.loadData,loadDebugData:e.chart.loadDebugData,curUrl:e.chart.dataApiUrl}),p=[{type:"radios",name:"config.useImgURL",inline:!1,options:[{label:t.default("动态拉取图片url"),value:!0},{label:t.default("上传本地或外链图片"),value:!1}]}],m=[{type:"tpl",tpl:'<span class="text-muted help-block">'+t.default("配置的图片超链接在浏览模式下生效")+"</span>",className:"m-t-n-sm"}];if(e.chart.config.useImgURL){var g=[{type:"select",name:"dataConfig.imgUrl",hiddenOn:"data.dataType != 'sql'",label:t.default("图片URL字段"),placeholder:t.default("请选择"),options:f},{type:"select",name:"dataConfig.title",hiddenOn:"data.dataType != 'sql'",label:t.default("图片名称字段"),placeholder:t.default("选填"),options:f},{type:"select",name:"dataConfig.imgLink",hiddenOn:"data.dataType != 'sql'",label:t.default("图片超链接字段"),placeholder:t.default("选填"),options:f}],h=[r.getDataModelFieldHolder({name:"value",label:t.default("图片URL字段"),config:{dataModelHash:i,holderId:e.chart.frontendId+"-value",maxCount:1,onlyDimension:!0}}),r.getDataModelFieldHolder({name:"name",label:t.default("图片名称字段"),config:{dataModelHash:i,holderId:e.chart.frontendId+"-name",maxCount:1,onlyDimension:!0}}),r.getDataModelFieldHolder({name:"link",label:t.default("图片超链接字段"),config:{dataModelHash:i,holderId:e.chart.frontendId+"-link",maxCount:1,onlyDimension:!0}}),o.commonFilterForDataModel(i),o.commonBindUrlParamForDataModel(i),o.commonLimitForDataModel];return p.concat(c,h,g,m,a)}var b=e.chart.config,y=b.imgInputs,v=b.imgUrls,C=[];v&&(C=v.split(",").map(function(e,a){return{label:t.default("本地图片「"+(a+1)+"」"),value:e}})),y&&y.filter(function(e){return e}).forEach(function(e,a){C.push({label:t.default("外链图片「"+(a+1)+"」"),value:e})});var D=[{type:"select",list:C,key:"url",name:t.default("图片"),placeholder:t.default("请选择"),tdStyle:{minWidth:130}},{type:"text",key:"title",name:t.default("图片名称"),tdStyle:{minWidth:130}},{type:"text",key:"link",name:t.default("图片超链接"),tdStyle:{minWidth:130}}],x=[{type:"fieldset",title:t.default("本地图片上传"),collapsable:!0,headingClassName:"fieldset-title",controls:[{type:"image",name:"config.imgUrls",label:t.default("上传本地图片"),multiple:!0,maxLength:20,allowInput:!0,maxSize:10485760,reciever:"/api/image/upload"}]},{type:"fieldset",title:t.default("外链图片上传"),collapsable:!0,headingClassName:"fieldset-title",controls:[{type:"combo",name:"config.imgInputs",multiple:!0,joinValues:!1,extractValue:!0,flat:!0,minLength:1,maxLength:10,controls:[{type:"url",name:"config.imgInputs",pipeIn:function(e){return e.startsWith("data:image")&&(e=""),e}}]},{type:"image",name:"config.imgInputs",multiple:!0,maxLength:20,joinValues:!1,extractValue:!0,allowInput:!1,maxSize:10485760,disabled:!0,className:"img-input",pipeIn:function(e){return e&&e.map&&(e=e.map(function(e){return e.startsWith("data:image")?"":e})),e}}]},{type:"divider"},{name:"config.imgConfs",children:function(a){var o=a.onChange,i=a.value;return d.createElement(n.default,l.__assign({},{onChange:o,value:i},{chartFrontendId:e.chart.frontendId,containerClassName:"form-group form-item",label:t.default("轮播配置"),addTipText:t.default("新增一页"),cols:D}))}}];return p.concat(x,m)},a.advancedCtrl=function(){return l.__spreadArrays([{type:"fieldset",collapsed:!0,title:t.default("播放设置"),collapsable:!0,headingClassName:"fieldset-title",controls:[{type:"group",controls:[{type:"number",label:t.default("轮播停顿(ms)"),name:"config.interval",placeholder:t.default("图片停留时间"),step:500,min:500},{type:"number",label:t.default("切换速度(ms)"),placeholder:t.default("完成一页滚动时间"),name:"config.speed",step:100,min:100}]},{type:"select",name:"config.animationType",label:t.default("切换动画"),placeholder:t.default("请选择"),options:[{label:"slide",value:"slide"},{label:"fade",value:"fade"},{label:"cube",value:"cube"},{label:"coverflow",value:"coverflow"},{label:"flip",value:"flip"}]},{type:"group",controls:[i.default("config.showButton",t.default("显示翻页按钮")),i.default("config.showPage",t.default("显示底部导航"))]}]},{type:"divider"},{type:"fieldset",collapsed:!0,title:t.default("图片设置"),collapsable:!0,headingClassName:"fieldset-title",controls:[{type:"range",name:"config.opacity",max:1,min:0,step:.1,label:t.default("图片透明度")},{type:"select",name:"config.scaleType",label:t.default("图片填充方式"),placeholder:t.default("请选择"),options:[{label:t.default("原始尺寸"),value:"original"},{label:t.default("横向铺满容器"),value:"width"},{label:t.default("纵向铺满容器"),value:"height"},{label:t.default("按比例铺满容器"),value:"fill"},{label:t.default("拉伸铺满容器"),value:"stretch"}]},i.default("config.targetDialog",t.default("超链接在本页面弹框中打开")),i.default("config.targetSelf",t.default("超链接在本页面打开"),"data.config.targetDialog")]},{type:"divider"},{type:"fieldset",collapsed:!0,title:t.default("标题设置"),collapsable:!0,headingClassName:"fieldset-title",controls:[{type:"number",label:t.default("标题字体大小"),name:"config.fontSize",step:2,min:10},{type:"group",controls:[{type:"select",name:"config.titleHType",label:t.default("标题水平位置"),placeholder:t.default("请选择"),options:[{label:t.default("靠左"),value:"left"},{label:t.default("居中"),value:"center"},{label:t.default("靠右"),value:"right"}]},{type:"select",name:"config.titleVType",label:t.default("标题垂直位置"),placeholder:t.default("请选择"),options:[{label:t.default("顶部"),value:"top"},{label:t.default("底部"),value:"bottom"}]}]}]}],u)}});
;sugar.define("sugar:widgets/charts/slider/slider.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=e("sugar:node_modules/tslib/tslib.js"),a=e("sugar:utils/i18n.ts"),n=e("sugar:node_modules/react/index.js"),r=e("sugar:node_modules/react-mixin/index.js"),s=e("sugar:widgets/charts/chart-manager.tsx"),o=e("sugar:widgets/charts/_mixin/common.tsx"),l=e("sugar:node_modules/lodash/debounce.js"),d=e("sugar:widgets/charts/_hoc/debug/debug.tsx"),c=e("sugar:stores/index.ts"),u=e("sugar:node_modules/swiper/dist/js/swiper.js"),p=e("sugar:widgets/charts/slider/slider-ctrl.tsx"),h=e("sugar:utils/resize-sensor.ts"),m=e("sugar:widgets/charts/_hoc/drill-down/drill-down.tsx"),g=e("sugar:widgets/charts/_hoc/chart-zoom/index.tsx"),f=e("sugar:utils/chart-helper.ts"),w=function(e){function t(t){var i=e.call(this,t)||this;return i.getParent=i.getParent.bind(i),i.initSwiper=i.initSwiper.bind(i),i.distroySwiper=i.distroySwiper.bind(i),i}return i.__extends(t,e),t.prototype.componentWillReceiveProps=function(e){e.index!==this.props.index&&this._initResizeSensor()},t.prototype.getParent=function(e){this.container=e,this.initSwiper(),this._initResizeSensor()},t.prototype.initSwiper=function(e){if(void 0===e&&(e=!1),this.container&&(!this.swiper||e)){this.swiper&&this.swiper.destroy(!0,!0);var t=this.props.chart.config,i={simulateTouch:!1,speed:t.speed||500,autoplay:{delay:t.interval||5e3},loop:!0,effect:t.animationType||"slide"};if(t.showButton&&(i.navigation={nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}),t.showPage){var a="#fff";t.openCustomColor&&(a=t.dotColor||a),i.pagination={el:".swiper-pagination",clickable:!0,renderBullet:function(e,t){return'<span class="'+t+'" style="background: '+a+'"></span>'}}}this.swiper=new u(this.container,i)}},t.prototype.distroySwiper=function(){this.swiper.destroy(!0,!0),this.swiper=null},t.prototype.componentDidMount=function(){this.initSwiper(),this._initResizeSensor()},t.prototype.componentDidUpdate=function(){this.initSwiper(!0)},t.prototype.componentWillUnmount=function(){this.unWatchResize&&this.unWatchResize(),this.distroySwiper()},t.prototype._initResizeSensor=function(){var e=this;this.unWatchResize&&this.unWatchResize();var t=this.container;if(t){var i=t;if("normal"===this.props.mode){var a=document.getElementById("content");i=a?a:document.body}this.unWatchResize=h.resizeSensor(i,l(function(){return e.initSwiper(!0)},50))}},t.prototype.render=function(){var e=this,t=this.props,i=t.mode,r=t.sugarRoot,s=t.hub,o=t.chart,l=o.config,d=o.frontendId,c=t.chart,u=(t.theme,this.auth(this.props));if(u!==!0)return u;var p="rgba(0, 0, 0, 0.7)",h="#fff",m="#fff";l.openCustomColor&&(p=l.titleBg||p,h=l.titleColor||h,m=l.buttonBg||m);var g=[];if(l.useImgURL){if(g=s.data.data,"pending"===s.data.loadState&&!g||null==g)return null;if(!(g&&g instanceof Array&&g.length))return n.createElement("div",{className:"tip"},a.default("数据格式有误！"))}else g=l.imgConfs&&l.imgConfs.length?l.imgConfs:[],"normal"!==i||c.isDashChart||setTimeout(function(){return e.initSwiper(!0)},0);var w={padding:0};return c.isDashChart&&(w.padding=5),n.createElement("div",{className:"slider-container",style:w},n.createElement("div",{className:"swiper-container",ref:this.getParent},n.createElement("div",{className:"swiper-wrapper"},g.map(function(t,a){var s=t.link;s&&!/^https?:\/\//i.test(s)&&(s="http://"+s),s=f.replaceSomeParam(s,d,r,null,!0);var o="auto";switch(l.scaleType){case"original":o="auto";break;case"width":o="100% auto";break;case"height":o="auto 100%";break;case"fill":o="cover";break;case"stretch":o="100% 100%"}var c={width:"100%",height:"100%",background:"url("+t.url+") no-repeat center/"+o,opacity:l.opacity},u={fontSize:l.fontSize,textAlign:l.titleHType,backgroundColor:p,color:h};return"bottom"===l.titleVType?u.bottom=0:u.top=0,n.createElement("div",{className:"swiper-slide",key:a},n.createElement("div",{className:"image-container",style:c},t.title?n.createElement("div",{className:"image-title",style:u},t.title):null,s&&"normal"===i?l.targetDialog?n.createElement("a",{className:"image-link",onClick:function(){return e.props.assist.openIframeDialog(s,t.title)}}):n.createElement("a",{target:l.targetSelf?"_self":"_blank",className:"image-link",href:s}):null))})),l.showPage?n.createElement("div",{className:"swiper-pagination"+("bottom"===l.titleVType?" swiper-pagination-top":"")}):null,l.showButton?n.createElement("div",{className:"swiper-button-prev",style:{color:m}},n.createElement("i",{className:"fa fa-angle-left"})):null,l.showButton?n.createElement("div",{className:"swiper-button-next",style:{color:m}},n.createElement("i",{className:"fa fa-angle-right"})):null))},t.displayName="Slider",t=i.__decorate([m.default,d.default,g.default,c.inject(function(e){return{sugarRoot:e,assist:e.assist}}),c.observer,r.decorate(o.default),i.__metadata("design:paramtypes",[Object])],t)}(n.Component);t.default=w;var y=function(e){if(!e||!e.length)return a.default("无数据");for(var t=0;t<e.length;t++)if(!e[t].url)return a.default("第「"+(t+1)+"」项数据没有 url 字段！");return!0},v=function(e){{var t=e.dataConfig.dataModel,i=t.value,a=void 0===i?[]:i;t.name,t.link}return a.length?!0:!1};s.register({kind:"media",type:"slider",name:a.default("图片轮播"),iconClassName:"chart-slider",component:w,enableTemplate:!0,dataBindTabTitle:a.default("图片内容"),canEmptyData:!0,loadDataPremiseField:"useImgURL",initialState:{dataType:"api",dataApiUrl:p.chartDemoUrl,hideTitle:!0,config:{useImgURL:!0,interval:5e3,speed:500,showButton:!1,showPage:!0,animationType:"coverflow",opacity:1,scaleType:"stretch",fontSize:15,titleHType:"center",titleVType:"bottom"}},initialDashboardState:{width:670,height:370},validate:y,dataBindCtrl:p.dataBindCtrl,basicCtrl:p.basicCtrl,needDashboardAutoFresh:!0,advancedCtrl:p.advancedCtrl,canBeDrillChild:!0,dataModelPanelShow:[["dataType","dataModel"],["config.useImgURL",!0]],loadDataWhenDataModelConfigChange:v})});
;sugar.define("sugar:widgets/charts/iframe/iframe-ctrl.tsx",function(a,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.dataBindCtrl=e.chartDemoUrl=void 0;var t=a("sugar:utils/i18n.ts"),d=a("sugar:widgets/ctrl-panel/data-bind-ctrl/index.tsx"),l=a("sugar:widgets/data-model/data-model-field-holder/data-model-field-holder.tsx"),r="/openapi/demo/chart?type=iframe";e.chartDemoUrl="$CUR_HOST/openapi/demo/chart?type=iframe",e.dataBindCtrl=function(a){var e=d.getDebugAndRefreshBtn({loadData:a.chart.loadData,loadDebugData:a.chart.loadDebugData,dataType:a.chart.dataType,refreshText:t.default("刷新图表")}),o=d.getDataBindCommon({frontendId:a.chart.frontendId,dataTypeOptions:["dataModel","api","static","sql"],api:{demoUrl:r},"static":{simpleInput:!0},sql:{needContinuitySetting:!1}}),i=a.chart.dataModelHash||"",n=a.sqlModelStore.detailMap.mapByHash.get(i),s=d.generateSQLFieldList(n),c=[{type:"select",name:"dataConfig.urlField",hiddenOn:"data.dataType != 'sql'",label:t.default("iframe地址的字段"),placeholder:t.default("请选择"),options:s}],m=[l.getDataModelFieldHolder({name:"value",label:t.default("iframe地址的字段"),config:{dataModelHash:i,holderId:a.chart.frontendId+"-value",maxCount:1,onlyDimension:!0}}),d.commonFilterForDataModel(i),d.commonBindUrlParamForDataModel(i)];return o.concat(m,c,e)}});
;sugar.define("sugar:widgets/charts/iframe/iframe.tsx",function(e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var t=e("sugar:node_modules/tslib/tslib.js"),r=e("sugar:utils/i18n.ts"),i=e("sugar:node_modules/react/index.js"),n=e("sugar:node_modules/react-mixin/index.js"),s=e("sugar:widgets/charts/iframe/iframe-ctrl.tsx"),o=e("sugar:widgets/charts/chart-manager.tsx"),d=e("sugar:widgets/charts/_mixin/common.tsx"),l=e("sugar:stores/index.ts"),u=e("sugar:widgets/charts/_hoc/debug/debug.tsx"),c=e("sugar:utils/chart-helper.ts"),f=e("sugar:widgets/charts/_hoc/drill-down/drill-down.tsx"),h=e("sugar:widgets/charts/_hoc/chart-zoom/index.tsx"),m=function(e){function a(){return null!==e&&e.apply(this,arguments)||this}return t.__extends(a,e),a.prototype.render=function(){var e=this.props,a=e.chart.frontendId,t=e.sugarRoot,n=this.auth(this.props);if(n!==!0)return n;var s=this.props,o=s.hub,d=s.mode,l=o.data.data;l=c.replaceSomeParam(l,a,t,null,!0);var u="",f=!1;if("pending"===o.data.loadState&&!l||null==l)return null;if("string"!=typeof l)f=!0,u=r.default("iframe地址数据错误，不是字符串类型");else{var h=l.match(/^(http|https):\/\//);if(h&&h[1]){if("http"===h[1]&&"https:"===location.protocol)if(f=!0,"editor"===d)u=i.createElement("div",null,r.default("您目前使用HTTPS方式访问\n              「"+window.sugarConfig.name+"」\n              ，但是该iframe是HTTP，浏览器的安全策略不允许，您可以保存并退出编辑模式，并按照提示进入HTTP方式"));else if(f&&("sugar.baidubce.com"===location.hostname||~(window.sugarConfig.shareSourceDomain||"").indexOf(location.hostname)))window.location.href=window.location.href.replace(/^https:/,"http:");else{var m=window.location.href.replace(/^https:/,"http:");u=i.createElement("div",null,r.default("您目前使用HTTPS方式访问\n              「"+window.sugarConfig.name+"」\n              ，但是该iframe是HTTP，浏览器的安全策略不允许，"),i.createElement("a",{href:m,target:"_self"},r.default("您可以点击这里进入HTTP方式")))}}else f=!0,u=r.default("iframe地址必须以 http 或 https 开头")}return f?i.createElement("div",{className:"chart-tip sugar-iframe-tip"},u):i.createElement("div",{className:"sugar-iframe-container"},i.createElement("iframe",{className:"sugar-iframe sugar-full-iframe",src:l,allowFullScreen:!0,style:{pointerEvents:"editor"===d?"none":"auto"}}))},a.displayName="IframeChart",a=t.__decorate([f.default,u.default,h.default,l.inject(function(e){return{sugarRoot:e}}),l.observer,n.decorate(d.default)],a)}(i.Component);a.default=m;var g=function(e){var a=e.dataConfig.dataModel.value,t=void 0===a?[]:a;return t.length?!0:!1};o.register({kind:"media",type:"iframe",name:"iframe",iconClassName:"chart-iframe",component:m,enableTemplate:!0,dataBindTabTitle:r.default("iframe地址"),dataBindCtrl:s.dataBindCtrl,initialState:{dataType:"static",dataApiUrl:s.chartDemoUrl,hideTitle:!0,config:{iconType:"fa fa-flag-checkered",fontSize:30},dataConfig:{data:"https://cloud.baidu.com",needAutoRefresh:!1}},initialDashboardState:{height:380,width:380},canBeDrillChild:!0,dataModelPanelShow:[["dataType","dataModel"]],needDashboardAutoFresh:!0,loadDataWhenDataModelConfigChange:g})});
;sugar.define("sugar:widgets/charts/video/video-ctrl.tsx",function(a,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.advancedCtrl=e.dataBindCtrl=e.chartDemoUrl=void 0;var t=a("sugar:utils/i18n.ts"),l=a("sugar:widgets/amis-inline-switch.tsx"),d=a("sugar:widgets/ctrl-panel/data-bind-ctrl/index.tsx"),n=a("sugar:widgets/dashboard-ctrl-panel/chart-ctrl.tsx"),o=a("sugar:widgets/data-model/data-model-field-holder/data-model-field-holder.tsx"),i="/openapi/demo/chart?type=video";e.chartDemoUrl="$CUR_HOST/openapi/demo/chart?type=video",e.dataBindCtrl=function(a){var e=d.getDebugAndRefreshBtn({loadData:a.chart.loadData,loadDebugData:a.chart.loadDebugData,dataType:a.chart.dataType,refreshText:t.default("刷新图表")}),r=d.getDataBindCommon({frontendId:a.chart.frontendId,dataTypeOptions:["dataModel","api","sql"],api:{demoUrl:i}}),c=t.default("视频"),s=[{label:t.default("自动识别"),value:"auto"},{label:"mp4",value:"mp4"},{label:"flv",value:"flv"},{label:"hls/m3u8",value:"m3u8"}];a.chart.config.isLive&&(c=t.default("直播"),s=[{label:t.default("自动识别"),value:"auto"},{label:"rtmp",value:"rtmp"},{label:"flv",value:"flv"},{label:"hls/m3u8",value:"m3u8"}]);var u=[l.amisInlineSwitch("config.needLoadData",t.default("动态拉取「"+c+"」播放信息"))],f=[{type:"radios",name:"config.videoType",inline:!1,label:t.default("「"+c+"」类型"),options:s},{type:"text",name:"config.videoUrl",label:c+"URL"},{type:"text",name:"config.imageUrl",label:t.default("封面图片URl（可不填）")},{type:"text",name:"config.ak",label:t.default("AK（可不填）")}],m=a.chart.dataModelHash||"",h=a.sqlModelStore.detailMap.mapByHash.get(m),g=d.generateSQLFieldList(h),p=[{type:"select",name:"dataConfig.dynamicVideoUrl",hiddenOn:"data.dataType != 'sql'",label:t.default("「"+c+"」URL字段"),placeholder:t.default("请选择"),options:g},{type:"select",name:"dataConfig.dynamicVideoType",hiddenOn:"data.dataType != 'sql'",label:t.default("「"+c+"」类型字段"),placeholder:t.default("可选填"),options:g},{type:"select",name:"dataConfig.dynamicImageUrl",hiddenOn:"data.dataType != 'sql'",label:t.default("封面图片URL字段"),placeholder:t.default("可选填"),options:g},o.getDataModelFieldHolder({name:"value",label:t.default("「"+c+"」URL字段"),config:{dataModelHash:m,holderId:a.chart.frontendId+"-value",maxCount:1,onlyDimension:!0}}),o.getDataModelFieldHolder({name:"name",label:t.default("「"+c+"」类型字段"),config:{dataModelHash:m,holderId:a.chart.frontendId+"-name",maxCount:1,onlyDimension:!0}}),o.getDataModelFieldHolder({name:"link",label:t.default("封面图片URL字段"),config:{dataModelHash:m,holderId:a.chart.frontendId+"-link",maxCount:1,onlyDimension:!0}}),d.commonFilterForDataModel(m),d.commonBindUrlParamForDataModel(m),d.commonLimitForDataModel];if(a.chart.config.needLoadData){var v=u.concat(r,p,e);return a.chart.isDashChart&&(v=v.concat(n.getAutoRefreshCtrl())),v}return u.concat(f)},e.advancedCtrl=[l.amisInlineSwitch("config.autoStart",t.default("自动播放（浏览模式下生效）")),l.amisInlineSwitch("config.repeat",t.default("循环播放")),l.amisInlineSwitch("config.lastStart",t.default("从上次播放停止位置续播")),l.amisInlineSwitch("config.noControls",t.default("不显示控制条（浏览模式下生效）")),{type:"range",label:t.default("默认音量"),name:"config.volume",min:0,step:1,max:100}]});
;sugar.define("sugar:widgets/charts/video/video.tsx",function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=t("sugar:node_modules/tslib/tslib.js"),i=t("sugar:utils/i18n.ts"),r=t("sugar:node_modules/react/index.js"),o=t("sugar:node_modules/react-mixin/index.js"),d=t("sugar:widgets/charts/chart-manager.tsx"),n=t("sugar:widgets/charts/_mixin/common.tsx"),s=t("sugar:widgets/charts/_hoc/debug/debug.tsx"),l=t("sugar:stores/index.ts"),c=t("sugar:widgets/charts/video/video-ctrl.tsx"),h=t("sugar:widgets/charts/_hoc/drill-down/drill-down.tsx"),p=t("sugar:widgets/charts/_hoc/chart-zoom/index.tsx"),u=function(t){function e(e){var a=t.call(this,e)||this;a.getParent=a.getParent.bind(a),a.initVideo=a.initVideo.bind(a);try{window.loadjs(["/static/third-party/cyberplayer/cyberplayer.js","/static/third-party/cyberplayer/flv.js","/static/third-party/cyberplayer/videojs/video.min.js","/static/third-party/cyberplayer/videojs/videojs-contrib-hls.min.js","/static/third-party/cyberplayer/videojs/videojs-contrib-quality-levels.min.js"],"cyberplayer",{async:!1})}catch(i){}return a}a.__extends(e,t),e.prototype.getParent=function(t){if(this.dom=t,this.dom){var e=m(this.props.hub,this.props.chart.config),a=e.videoType,i=e.videoUrl,r=e.imageUrl;this.initVideo(a,i,r,this.props.chart.config)}},e.prototype.initVideo=function(t,e,a,i){var r=this;if(this.dom&&t&&e){var o={width:"100%",height:"100%",stretching:"uniform",file:e,type:"auto"===t?void 0:t,isLive:i.isLive,rtmp:{reconnecttime:5},hls:{reconnecttime:5},image:a,autostart:i.autoStart&&"editor"!==this.props.mode,repeat:i.repeat||!1,volume:i.volume||0,controls:i.noControls===!0&&"editor"!==this.props.mode?!1:!0,logo:{hide:!0},controlbar:{barLogo:!1},ak:i.ak||"8c7e2822ea0246f0bd9cc02cb4f105c5"};i.lastStart||(o.starttime=0),window.loadjs.ready("cyberplayer",function(){cyberplayer&&!r.player&&(r.player=cyberplayer("video-chart-"+r.props.chart.hash).setup(o))})}},e.prototype.willUnmount=function(){this.player&&this.player.remove()},e.prototype.render=function(){var t=this.auth(this.props);if(t!==!0)return t;var e=this.props,a=e.chart,o=e.hub,d=e.chart.config,n=e.mode,s=m(o,d),l=s.videoType,c=s.videoUrl,h=s.imageUrl,p="",u=!1;if(l&&c)if("string"!=typeof c)u=!0,p=i.default("视频地址数据错误，不是字符串类型");else{var f=c.match(/^(http|https):\/\//),v=("string"==typeof h?h:"").match(/^(http|https):\/\//),g=i.default("视频地址");if(f&&"http"===f[1]&&"https:"===location.protocol&&(u=!0),!u&&v&&"http"===v[1]&&"https:"===location.protocol&&(u=!0,g=i.default("封面图片地址")),"editor"===n)p=r.createElement("div",null,i.default("您目前使用HTTPS方式访问「"+window.sugarConfig.name+"」，但是该「"+g+"」\n            是HTTP，浏览器的安全策略不允许，您可以保存并退出编辑模式，并按照提示进入HTTP方式"));else if(u&&("sugar.baidubce.com"===location.hostname||~(window.sugarConfig.shareSourceDomain||"").indexOf(location.hostname)))window.location.href=window.location.href.replace(/^https:/,"http:");else{var y=window.location.href.replace(/^https:/,"http:");p=r.createElement("div",null,i.default("您目前使用HTTPS方式访问「"+window.sugarConfig.name+"」，但是该「"+g+"」是HTTP，浏览器的安全策略不允许，"),r.createElement("a",{href:y,target:"_self"},i.default("您可以点击这里进入HTTP方式")))}}else u=!0,p=i.default("缺少视频类型或视频地址");return u?r.createElement("div",{className:"chart-tip sugar-iframe-tip"},p):(this.initVideo(l,c,h,d),r.createElement("div",{className:"video-chart-container"},r.createElement("div",{style:{width:"100%",height:"100%"}},r.createElement("div",{id:"video-chart-"+a.hash,className:"",ref:this.getParent}))))};var c;return e.displayName="VideoChart",e=a.__decorate([h.default,s.default,p.default,l.observer,o.decorate(n.default),a.__metadata("design:paramtypes",["function"==typeof(c="undefined"!=typeof d.IChartComponentProps&&d.IChartComponentProps)?c:Object])],e)}(r.Component);e.default=u;var m=function(t,e){var a=e.videoType,i=e.videoUrl,r=e.imageUrl,o=e.needLoadData;return o&&"done"===t.data.loadState&&t.data.data?(a=t.data.data.videoType,i=t.data.data.videoUrl,r=t.data.data.imageUrl):o&&(a="",i="",r=""),isNaN(i)||(i=""),{videoType:a,videoUrl:i,imageUrl:r}},f=function(t){var e=t.dataConfig.dataModel.value,a=void 0===e?[]:e;return a.length?!0:!1};d.register({kind:"media",type:"video",name:i.default("视频"),iconClassName:"chart-video",enableTemplate:!0,variants:[{name:i.default("视频直播"),iconClassName:"chart-video-live",initialState:{config:{isLive:!0}},initialDashboardState:{config:{}}}],component:u,dataBindTabTitle:i.default("视频内容"),canEmptyData:!0,initialState:{dataApiUrl:c.chartDemoUrl,hideTitle:!0,dataType:"api",config:{videoType:"auto",repeat:!0,autoStart:!1,lastStart:!1,noControls:!1,volume:100}},loadDataPremiseField:"needLoadData",initialDashboardState:{config:{autoStart:!0}},dataBindCtrl:c.dataBindCtrl,advancedCtrl:c.advancedCtrl,canBeDrillChild:!0,dataModelPanelShow:[["dataType","dataModel"],["config.needLoadData",!0]],loadDataWhenDataModelConfigChange:f})});
;sugar.define("sugar:widgets/charts/audio/audio-ctrl.tsx",function(e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.advancedCtrl=a.dataBindCtrl=void 0;var t=e("sugar:node_modules/tslib/tslib.js"),n=e("sugar:utils/i18n.ts"),i=e("sugar:node_modules/react/index.js"),l=e("sugar:widgets/amis-inline-switch.tsx"),d=e("sugar:widgets/object-array-editor/object-array-editor.tsx");a.dataBindCtrl=function(e){var a=[{label:n.default("网页链接"),value:"InternetUrl"},{label:n.default("本地上传"),value:"upload"}],l=[{type:"text",key:"audioName",name:n.default("音频名称"),tdStyle:{minWidth:120}},{type:"text",key:"audioUrl",name:n.default("音频URL"),tdStyle:{minWidth:150}}],o=[{type:"radios",name:"config.audioType",label:n.default("配置方式"),options:a,value:"InternetUrl"},{name:"config.audioList",children:function(a){var o=a.onChange,r=a.value;return i.createElement(d.default,t.__assign({},{onChange:o,value:r},{chartFrontendId:e.chart.frontendId,containerClassName:"form-group form-item",label:n.default("配置音频列表"),addTipText:n.default("增加一个音频"),cols:l}))},hiddenOn:"config.audioType === 'upload'"},{type:"file",label:n.default("请选择背景音乐上传"),name:"config.musicUrl",accept:".mp3,.wav,.ogg",hiddenOn:"config.audioType === 'InternetUrl'",multiple:!0,maxSize:10485760,reciever:"/api/image/upload",useChunk:!1}];return o},a.advancedCtrl=function(e){var a=[{type:"color",name:n.default("颜色"),key:"background",defaultValue:"#23b7e5"}];return[l.amisInlineSwitch("config.autoStart",n.default("自动播放")),l.amisInlineSwitch("config.repeat",n.default("循环播放")),l.amisInlineSwitch("config.noControls",n.default("不显示控制条"),"config.conciseMode"),l.amisInlineSwitch("config.conciseMode",n.default("简洁模式")),{name:"config.audioItemColor",visibleOn:"config.conciseMode",children:function(l){var o=l.onChange,r=l.value;return i.createElement(d.default,t.__assign({},{onChange:o,value:r},{chartFrontendId:e.chart.frontendId,containerClassName:"form-group form-item",label:n.default("音符颜色设置"),addTipText:n.default("新增配色项"),cols:a,maxLines:4}))}}]}});
;sugar.define("sugar:widgets/charts/audio/audio.tsx",function(t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i=t("sugar:node_modules/tslib/tslib.js"),e=t("sugar:utils/i18n.ts"),o=t("sugar:node_modules/react/index.js"),s=t("sugar:node_modules/react-mixin/index.js"),r=t("sugar:widgets/charts/chart-manager.tsx"),n=t("sugar:widgets/charts/_mixin/common.tsx"),d=t("sugar:stores/index.ts"),u=t("sugar:widgets/charts/audio/audio-ctrl.tsx"),c=function(t){function a(){var a=null!==t&&t.apply(this,arguments)||this;return a.flag=a.props.chart.config.autoStart,a}return i.__extends(a,t),a.prototype.componentWillMount=function(){this.onAudioEnd=this.onAudioEnd.bind(this),this.getUrllist=this.getUrllist.bind(this),this.switchPlayState=this.switchPlayState.bind(this),this.getUrllist()},a.prototype.onAudioEnd=function(){var t=this.state.audioSrcArr,a=this.props.chart,i=t.slice(1);this.setState({audioSrcArr:i,audioSrc:i[0]}),i&&0===i.length&&a.config.repeat&&this.getUrllist()},a.prototype.switchPlayState=function(){var t=this.state.audioSrc;this.flag?(this.refs.audioDom&&t&&this.refs.audioDom.pause(),this.refs.audioItem1&&(this.refs.audioItem1.className=""),this.refs.audioItem2&&(this.refs.audioItem2.className=""),this.refs.audioItem3&&(this.refs.audioItem3.className=""),this.refs.audioItem4&&(this.refs.audioItem4.className=""),this.flag=!1):(this.refs.audioDom&&t&&this.refs.audioDom.play(),this.refs.audioItem1&&(this.refs.audioItem1.className="animation"),this.refs.audioItem2&&(this.refs.audioItem2.className="animation"),this.refs.audioItem3&&(this.refs.audioItem3.className="animation"),this.refs.audioItem4&&(this.refs.audioItem4.className="animation"),this.flag=!0)},a.prototype.getUrllist=function(){var t,a=this.props.chart,i="InternetUrl"===a.config.audioType;t=i?a.config.audioList&&a.config.audioList.map(function(t){return t.audioUrl}):a.config.musicUrl&&a.config.musicUrl.split(",");var e=t&&t.length&&t[0]||"";this.setState({audioSrcArr:t,audioSrc:i?e:window.location.origin+e})},a.prototype.render=function(){var t=this.state.audioSrc,a=this.props.chart;return o.createElement("div",{className:"audio-chart-container"},o.createElement("audio",{className:"audio",ref:"audioDom",src:t,onEnded:this.onAudioEnd,controls:!a.config.noControls&&!a.config.conciseMode,autoPlay:a.config.autoStart}),a.config.conciseMode?o.createElement("div",{className:"conciseModeContainer",style:{width:a.height+"px",height:a.height+"px"},onClick:this.switchPlayState},o.createElement("span",{ref:"audioItem1",className:"animation",style:{backgroundColor:""+(a.config.audioItemColor&&a.config.audioItemColor[0]&&a.config.audioItemColor[0].background)}}),o.createElement("span",{ref:"audioItem2",className:"animation",style:{backgroundColor:""+(a.config.audioItemColor&&a.config.audioItemColor[1]&&a.config.audioItemColor[1].background)}}),o.createElement("span",{ref:"audioItem3",className:"animation",style:{backgroundColor:""+(a.config.audioItemColor&&a.config.audioItemColor[2]&&a.config.audioItemColor[2].background)}}),o.createElement("span",{ref:"audioItem4",className:"animation",style:{backgroundColor:""+(a.config.audioItemColor&&a.config.audioItemColor[3]&&a.config.audioItemColor[3].background)}})):null)},a.displayName="Audio",a=i.__decorate([d.observer,s.decorate(n.default)],a)}(o.Component);a.default=c,r.register({kind:"media",type:"audio",name:e.default("音频"),dataBindTabTitle:e.default("音频内容"),iconClassName:"chart-audio",component:c,enableTemplate:!0,canEmptyData:!0,initialState:{width:350,height:90,hideTitle:!0,dataType:"api",config:{videoType:"auto",repeat:!0,conciseMode:!0,autoStart:!1,lastStart:!1,noControls:!1,volume:100,audioType:"InternetUrl",audioItemColor:[{id:"kmvlt5ef2eeuk",background:"rgba(85, 33, 219, 0.7)"},{id:"kmvlt8rg3ekyh",background:"rgba(74, 144, 226, 1)"},{id:"kmvozk4n4lv2k",background:"rgba(30, 104, 188, 0.8)"},{id:"kmvozk4n4lv2u",background:"rgba(82, 36, 91, 1)"}]}},loadDataPremiseField:"needLoadData",initialDashboardState:{config:{autoStart:!0}},dataBindCtrl:u.dataBindCtrl,advancedCtrl:u.advancedCtrl})});
;sugar.define("sugar:widgets/charts/weather/weather-ctrl.tsx",function(e,l){"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.dataBindCtrl=void 0;var a=e("sugar:node_modules/tslib/tslib.js"),t=e("sugar:utils/i18n.ts"),o=e("sugar:widgets/charts/simple-text/font-helper.tsx");l.dataBindCtrl=function(){var e=a.__spreadArrays([{type:"radios",name:"config.extensions",inline:!1,label:t.default("显示设置"),options:[{label:t.default("精简版（实时天气）"),value:"base"},{label:t.default("丰富版（实时天气+全天预报）"),value:"all"}]},{type:"radios",name:"config.autoFreshInterval",label:t.default("自动刷新时间间隔"),inline:!1,options:[{label:t.default("15分钟"),value:15},{label:t.default("30分钟"),value:30},{label:t.default("1小时"),value:60},{label:t.default("不自动刷新"),value:-1}]},{type:"select",name:"config.city",label:t.default("城市"),placeholder:t.default("请输入要查询的城市"),source:"/openapi/geo/getCityAdcord",searchable:!0,isSearchable:!0},{type:"radios",name:"config.showCity",inline:!1,label:t.default("地点显示"),options:[{label:t.default("显示"),value:1},{label:t.default("隐藏"),value:0}]}],o.fontCtrl,[{type:"divider"},{type:"color",name:"config.color",format:"rgba",label:t.default("文字颜色")},{type:"color",name:"config.backgroundColor",format:"rgba",label:t.default("背景颜色")},{type:"select",label:t.default("文字粗细"),name:"config.fontWeight",options:r},{type:"select",label:t.default("对齐方式"),name:"config.textAlign",options:n}]);return e};var r=[{label:"normal",value:"normal"},{label:"bold",value:"bold"},{label:"bolder",value:"bolder"},{label:"lighter",value:"lighter"}],n=[{label:t.default("居中"),value:"center"},{label:t.default("左对齐"),value:"flex-start"},{label:t.default("右对齐"),value:"flex-end"}]});
;sugar.define("sugar:utils/types.ts",function(e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.CancelTokenSource=n.AxiosRequestConfig=void 0;var o=e("sugar:node_modules/axios/index.js");Object.defineProperty(n,"AxiosRequestConfig",{enumerable:!0,get:function(){return o.AxiosRequestConfig}}),Object.defineProperty(n,"CancelTokenSource",{enumerable:!0,get:function(){return o.CancelTokenSource}})});
;sugar.define("sugar:widgets/charts/weather/phenomena.ts",function(e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.weatherPhenomena=void 0,n.weatherPhenomena=[{phenomena:["晴"],type:"day",bg:"light"},{phenomena:["多云","少云","晴间多云"],type:"day",bg:"light"},{phenomena:["阴"]},{phenomena:["阵雨","强阵雨"],type:"day"},{phenomena:["雷阵雨","强雷阵雨"]},{phenomena:["雷阵雨并伴有冰雹"]},{phenomena:["雨夹雪","阵雨夹雪","雨雪天气"]},{phenomena:["小雨"]},{phenomena:["中雨"]},{phenomena:["大雨"]},{phenomena:["暴雨"]},{phenomena:["大暴雨"]},{phenomena:["特大暴雨","极端降雨"]},{phenomena:["阵雪"],type:"day"},{phenomena:["小雪"]},{phenomena:["中雪"]},{phenomena:["大雪"]},{phenomena:["暴雪"]},{phenomena:["雾","浓雾","强浓雾","轻雾","大雾","特强浓雾"]},{phenomena:["冻雨"]},{phenomena:["沙尘暴"]},{phenomena:["小雨-中雨"]},{phenomena:["中雨-大雨"]},{phenomena:["大雨-暴雨"]},{phenomena:["暴雨-大暴雨"]},{phenomena:["大暴雨-特大暴雨"]},{phenomena:["小雪-中雪"]},{phenomena:["中雪-大雪"]},{phenomena:["大雪-暴雪"]},{phenomena:["浮尘"]},{phenomena:["扬沙"]},{phenomena:["强沙尘暴"]},{phenomena:["霾"]},{phenomena:["未知"],bg:"light"},{phenomena:["热"],bg:"light"},{phenomena:["冷"]},{phenomena:["中度霾"]},{phenomena:["重度霾"]},{phenomena:["严重霾"]},{phenomena:["有风","平静","微风","和风","清风","强风/劲风"]},{phenomena:["疾风","大风","烈风","风暴","狂爆风","飓风","热带风暴","龙卷风"]},{phenomena:["雨"]},{phenomena:["雪"]},{phenomena:["晴"],type:"night",bg:"night"},{phenomena:["多云","少云"],type:"night",bg:"night"},{phenomena:["阵雨","强阵雨"],type:"night"},{phenomena:["阵雪"],type:"night"}]});
;sugar.define("sugar:widgets/charts/weather/weather.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=e("sugar:node_modules/tslib/tslib.js"),r=e("sugar:utils/i18n.ts"),n=e("sugar:node_modules/react/index.js"),s=e("sugar:node_modules/react-mixin/index.js"),i=e("sugar:node_modules/mobx/lib/mobx.js"),l=e("sugar:node_modules/axios/index.js"),o=e("sugar:node_modules/lodash/lodash.js"),h=e("sugar:node_modules/amis/lib/index.js"),c=e("sugar:widgets/charts/weather/weather-ctrl.tsx"),u=e("sugar:utils/types.ts"),d=e("sugar:widgets/charts/chart-manager.tsx"),m=e("sugar:widgets/charts/_hoc/debug/debug.tsx"),f=e("sugar:stores/index.ts"),g=e("sugar:widgets/charts/_mixin/common.tsx"),v=e("sugar:widgets/charts/weather/phenomena.ts"),w=e("sugar:widgets/charts/_hoc/chart-zoom/index.tsx"),p=e("sugar:widgets/charts/simple-text/font-helper.tsx"),y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.weatherData={casts:{},title:"",lives:{}},t.city="",t.weatherIntervalEvent="",t.autoFreshInterval=-1,t.title="",t.getWeatherInfo=function(){return a.__awaiter(t,void 0,void 0,function(){var e,t;return a.__generator(this,function(a){switch(a.label){case 0:return e=this.props.chart.config.city,[4,l.default.get("/api/weather",{params:{extensions:"all",city:e}})];case 1:return t=a.sent().data,o.get(t,"data.forecasts[0].casts[0]")?(this.weatherData.casts=t.data.forecasts[0].casts[0],this.weatherData.lives=t.data.lives[0],[2]):[2]}})})},t.getWeatherItem=function(e){var t={item:[],index:-1},a=(new Date).getHours(),r=a>=19||6>=a?"night":"day";return t.item=v.weatherPhenomena.filter(function(a,n){var s=a.type,i=a.phenomena,l="string"==typeof s?s===r:!0,o=l&&!!(i.indexOf(e)+1);return o&&(t.index=n),o}),t},t.getWeatherIcon=function(e){var a=t.getWeatherItem(e).index;if(-1===a)return"";var r=a%12,n=Math.floor(a/12);return-80*r+"px "+-80*n+"px"},t.getBg=function(e){if(!(["晴","多云","少云"].indexOf(e)+1))return"dark";var t=(new Date).getHours();return t>=19||6>=t?"night":t>=17&&18>=t?"dusk":"light"},t}a.__extends(t,e),t.prototype.componentWillMount=function(){this.getWeatherInfo()},t.prototype.componentWillUnmount=function(){this.weatherIntervalEvent&&clearInterval(this.weatherIntervalEvent)},t.prototype.renderAllDay=function(e){var t=this.weatherData.casts,a=t.dayweather,s=t.nightweather,i=t.daypower,l=t.daywind,o=t.nighttemp,h=t.daytemp;if("all"===e)return n.createElement("div",{className:"weather-allDay"},n.createElement("ul",{className:"weather-name"},[r.default("天气"),r.default("温度"),r.default("风况")].map(function(e){return n.createElement("li",{key:e},e,"：")})),n.createElement("ul",{className:"weather-value"},n.createElement("li",null,a,"转",s),n.createElement("li",null,h,"℃ ~ ",o," ℃"),n.createElement("li",null,r.default("「"+l+"」风 「"+i+"」级"))))},t.prototype.autoFresh=function(){this.weatherIntervalEvent&&clearInterval(this.weatherIntervalEvent),this.autoFreshInterval&&-1!==this.autoFreshInterval&&(this.weatherIntervalEvent=setInterval(this.getWeatherInfo,1e3*this.autoFreshInterval*60))},t.prototype.render=function(){var e=this.weatherData.lives,t=e.weather,a=e.temperature,r=e.province,s=e.city;if(!t)return n.createElement(h.Spinner,{overlay:!0});var i=this.props,l=i.chart.config,o=l.color,c=l.fontWeight,u=l.textAlign,d=l.backgroundColor,m=l.city,f=l.extensions,g=l.autoFreshInterval,v=l.showCity,w=i.chart,y={fontFamily:p.getFontFamily(w.config)||"Microsoft Yahei, Arial, sans-serif",color:o,fontWeight:c,justifyContent:u,background:d||(w.isDashChart?"transparent":"")};return m!==this.city&&(this.city=m,this.getWeatherInfo()),g&&g!==this.autoFreshInterval&&(this.autoFreshInterval=g,this.autoFresh()),n.createElement("div",{className:"weather-container "+this.getBg(t),style:y},n.createElement("div",{className:"weather"},n.createElement("div",{className:"weather-currentDay",style:{justifyContent:"all"===f?"space-between":"center"}},n.createElement("div",{className:"weather-currentInfo flex-justify"},n.createElement("div",{className:"weather-icon",style:{backgroundPosition:this.getWeatherIcon(t)}}),n.createElement("div",{className:"flex-ver-middle"},v?n.createElement("div",{className:"weather-title"},r+" - "+s):"",n.createElement("div",{className:"weather-current flex-justify"},n.createElement("div",{className:"current-temperature"},a),n.createElement("div",{className:"weather-value flex-ver-middle"},n.createElement("div",null,"℃"),n.createElement("div",null,t))))),this.renderAllDay(f))))};var c;return t.displayName="Weather",a.__decorate([i.observable,a.__metadata("design:type","function"==typeof(c="undefined"!=typeof u.PlainObject&&u.PlainObject)?c:Object)],t.prototype,"weatherData",void 0),t=a.__decorate([m.default,w.default,f.observer,s.decorate(g.default)],t)}(n.Component);t.default=y,d.register({kind:"media",type:"weather",name:r.default("天气预报"),iconClassName:"chart-weather",component:y,enableTemplate:!0,loadDataPremiseField:"needLoadData",initialState:{hideTitle:!0,height:140,width:5,config:{extensions:"base",city:"110100",refresh:500,selfFontFamily:0,fontFamilyInside:"Microsoft Yahei",color:"#fff",fontWeight:"normal",textAlign:"center",autoFreshInterval:30,showCity:1},dataConfig:{needAutoRefresh:!1}},initialDashboardState:{width:455,height:180},dataBindCtrl:c.dataBindCtrl})});
;sugar.define("sugar:widgets/charts/_hoc/scene.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=e("sugar:node_modules/tslib/tslib.js"),r=e("sugar:node_modules/react/index.js"),s=e("sugar:stores/index.ts"),u=e("sugar:node_modules/react-mixin/index.js"),i=e("sugar:widgets/charts/_mixin/common.tsx");t.default=function(e){var t;return s.inject(function(e){return{scene:e.scene.current,group:e.group.current}})(s.observer(u.decorate(i.default)((t=function(t){function s(){return null!==t&&t.apply(this,arguments)||this}return n.__extends(s,t),s.prototype.render=function(){var t=this.props.hub,s=this.auth(this.props);return s!==!0?s:r.createElement(e,n.__assign({},this.props,{dependenceItem:t.dependenceData.dependenceItem}))},s}(r.Component),t.displayName="SceneHOC",t))))}});
;sugar.define("sugar:widgets/charts/scene/scene-ctrl.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dataBindCtrl=void 0;var a=e("sugar:utils/i18n.ts"),n=e("sugar:stores/index.ts");t.dataBindCtrl=function(e){var t=n.getRoot(e.chart),r=t.group.current.data.hash,s=t.group.current.data.key;r&&s||console.warn("group 不存在");var i=[{type:"select",name:"config.sceneId",label:a.default("群组内场景"),source:"/api/group/"+r+"/scene/simpleList"},{type:"tpl",tpl:a.default('如果群组内暂无大屏，请在<a href="/group/「'+s+'」/manage/scene" target="_blank">这里</a>创建'),visibleOn:"!config.sceneId"},{type:"switch",name:"config.hideOnEditor",inline:!0,label:a.default("编辑状态下隐藏（避免大屏编辑时卡顿）")}];return i}});
;sugar.define("sugar:utils/eval.ts",function(e,t){"use strict";function n(e){if(window.sugarConfig.disableCustomScript)return{};var t=document.createElement("iframe");document.body.appendChild(t);var n=t.contentWindow.Function,o=Object.keys(t.contentWindow).join();return document.body.removeChild(t),n(o,e)()}Object.defineProperty(t,"__esModule",{value:!0}),t.utils=t.evalCode=void 0,t.evalCode=n,t.utils={log:console.log,fireDependence:function(){},cancelDependence:function(){},openURL:function(e,t){void 0===t&&(t=!1),e.startsWith("http://")||e.startsWith("https://")?t?window.open(e,"_blank"):location.href=e:console.warn("url must start with http or https")}}});
;sugar.define("sugar:widgets/charts/scene/scene.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=e("sugar:node_modules/tslib/tslib.js"),i=e("sugar:utils/i18n.ts"),a=e("sugar:node_modules/react/index.js"),s=e("sugar:node_modules/react/index.js"),r=e("sugar:node_modules/amis/lib/index.js"),d=e("sugar:widgets/charts/chart-manager.tsx"),c=e("sugar:widgets/charts/_hoc/scene.tsx"),o=e("sugar:widgets/charts/scene/scene-ctrl.tsx"),l=e("sugar:node_modules/mobx/lib/mobx.js"),h=e("sugar:utils/eval.ts"),p=e("sugar:stores/index.ts"),u=a.lazy(function(){return Promise.resolve().then(function(){return new Promise(function(t){e(["sugar:sites/group/scene-edit/scene-viewer.tsx"],function(e){t(e)})})})}),g=function(e){function t(t){var n=e.call(this,t)||this;return n.sceneManager={},n.content="",n.setSceneManager=n.setSceneManager.bind(n),n}n.__extends(t,e),t.prototype.componentWillMount=function(){this.fireDependence=this.fireDependence.bind(this),this.cancelDependence=this.cancelDependence.bind(this)},t.prototype.setSceneManager=function(e){this.sceneManager=e},t.prototype.componentWillReceiveProps=function(e){var t,n=null===(t=e.dependenceItem)||void 0===t?void 0:t.item;n&&this.sceneManager.linkedMesh&&this.sceneManager.linkedMesh(n._sugar_dd_default_)},t.prototype.fireDependence=function(e){return e?void this.props.chart.handleEvent("dependence",this.props.mode,{dependenceIndex:0,dependenceState:e.state,dependenceItem:{item:e,fireKey:""}}):void r.toast.error(i.default("图表「"+this.props.chart.name+"」联动参数错误"))},t.prototype.cancelDependence=function(){this.props.chart.handleEvent("cancelDependence",this.props.mode)},t.prototype.render=function(){h.utils.fireDependence=this.fireDependence,h.utils.cancelDependence=this.cancelDependence;var e=this.props.scene,t=this.props.chart;if(t.config.sceneId){"done"!==e.loadState||e.model.hash||e.load(t.config.sceneId);var n=-1!=location.href.indexOf("/edit/");return n&&t.config.hideOnEditor?a.createElement("div",null,i.default("隐藏的场景")):"pending"===e.loadState||"done"===e.loadState&&!e.model.hash?a.createElement(r.Spinner,{overlay:!0,size:"lg"}):a.createElement(s.Suspense,{fallback:a.createElement("div",null,i.default("加载中"))},a.createElement(u,{width:t.width,height:t.height,scene:e.scene,editor:e.editor,fireDependence:this.fireDependence,isInEditor:!1,isDashChart:!!t.isDashChart,setSceneManager:this.setSceneManager}))}return a.createElement("div",{style:{height:t.height+"px",width:t.width+"px",lineHeight:t.height+"px",textAlign:"center",fontSize:"50px"}},i.default("请在右边选择场景"))};return t.displayName="SceneChart",n.__decorate([l.observable,n.__metadata("design:type",Object)],t.prototype,"content",void 0),t=n.__decorate([c.default,p.observer,n.__metadata("design:paramtypes",[Object])],t)}(a.Component);t.default=g;var f=window.sugarConfig.enableScene;f&&d.register({kind:"media",type:"scene",name:i.default("三维场景"),iconClassName:"chart-scene",dataBindTabTitle:i.default("场景选择"),component:g,canEmptyData:!0,dashboardOnly:!0,loadDataPremiseField:"never",initialState:{hideTitle:!0,height:600,width:800,config:{sceneId:"",hideOnEditor:!1}},initialDashboardState:{},dataBindCtrl:o.dataBindCtrl})});
;sugar.define("sugar:widgets/charts/tab/tab-ctrl.tsx",function(e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.dataBindCtrl=void 0;var t=e("sugar:node_modules/tslib/tslib.js"),l=e("sugar:utils/i18n.ts"),n=e("sugar:node_modules/react/index.js"),r=e("sugar:widgets/amis-inline-switch.tsx"),i=e("sugar:widgets/object-array-editor/object-array-editor.tsx"),o=[{type:"color",name:l.default("颜色"),key:"background",defaultValue:"#23b7e5"},{type:"number",name:l.default("占比（0-100）"),key:"ratio",defaultValue:100}];a.dataBindCtrl=function(e){var a=e.chart,c=(a.frontendId,a.config.tabBindChart),f=e.chartList,s=e.conditionList,b=f.data.filter(function(e){return e&&"tab"!==e.type}).map(function(e){return{value:e.frontendId,label:e.name}}),m=s.data.filter(function(e){return e}).map(function(e){return{value:e.frontendId,label:e.label}}),g=b.concat(m),p=(c||[]).map(function(e){return{label:e.tabName||l.default("未命名"),value:e.id}}),y=[{type:"text",key:"tabName",name:l.default("tab名称"),tdStyle:{minWidth:120}},{type:"select",key:"bindChart",name:l.default("展示图表"),clearable:!0,multiple:!0,placeholder:l.default("请选择要展示的图表"),searchable:!0,isSearchable:!0,list:g,tdStyle:{minWidth:150}}],h=[{name:"config.tabBindChart",children:function(a){var r=a.onChange,o=a.value;return n.createElement(i.default,t.__assign({},{onChange:r,value:o},{chartFrontendId:e.chart.frontendId,containerClassName:"form-group form-item",label:l.default("配置tab列表"),addTipText:l.default("增加一个tab"),cols:y}))}},{type:"select",name:"config.defaultTab",label:l.default("默认选中的Tab"),clearable:!0,placeholder:l.default("请选择"),searchable:!0,isSearchable:!0,options:p},r.amisInlineSwitch("config.iframeLoadOnNeed",l.default("各Tab下的Iframe图表仅在展示时加载")),{type:"divider"},r.amisInlineSwitch("config.openSlide",l.default("开启轮播")),{type:"number",label:l.default("轮播时间间隔（毫秒）"),hiddenOn:"!config.openSlide",name:"config.slideInterval",step:500,min:500},{type:"divider"},{type:"fieldset",collapsed:!0,title:l.default("自定义配色"),collapsable:!0,headingClassName:"fieldset-title",controls:[{type:"radios",name:"config.btnStyle",inline:!1,label:l.default("按钮风格"),options:u},{type:"radios",name:"config.btnType",inline:!1,label:l.default("按钮样式"),options:d,hiddenOn:"config.btnStyle === 'circle'"},{type:"number",name:"config.btnMargin",hiddenOn:"config.btnType !== 'disperse'||config.btnStyle === 'circle'",label:l.default("按钮间距离"),max:1e3,step:5,min:0},{type:"range",name:"config.innerSize",label:l.default("内圆半径"),min:0,max:e.chart.height/4,visibleOn:"config.btnStyle === 'circle'",value:25},{type:"color",name:"config.innerColor",format:"rgba",label:l.default("内圆背景色"),visibleOn:"config.btnStyle === 'circle'"},r.amisInlineSwitch("config.startGradual",l.default("启用按钮背景色渐变")),{type:"group",controls:[{type:"color",name:"config.activeBgColor",format:"rgba",label:l.default("当前选中的按钮背景色"),hiddenOn:"config.startGradual"},{type:"color",name:"config.defaultBgColor",format:"rgba",label:l.default("未选中的按钮背景色"),hiddenOn:"config.startGradual"}]},{name:"config.customColorsActive",visibleOn:"config.startGradual",children:function(a){var r=a.onChange,d=a.value;return n.createElement(i.default,t.__assign({},{onChange:r,value:d},{chartFrontendId:e.chart.frontendId,containerClassName:"form-group form-item",label:l.default("当前选中的按钮背景色"),addTipText:l.default("新增配色项"),cols:o}))}},{name:"config.customColorsNotActive",visibleOn:"config.startGradual",children:function(a){var r=a.onChange,d=a.value;return n.createElement(i.default,t.__assign({},{onChange:r,value:d},{chartFrontendId:e.chart.frontendId,containerClassName:"form-group form-item",label:l.default("未选中的按钮背景色"),addTipText:l.default("新增配色项"),cols:o}))}},{type:"group",controls:[{type:"color",name:"config.activeColor",format:"rgba",label:l.default("当前选中的按钮字体颜色")},{type:"color",name:"config.defaultColor",format:"rgba",label:l.default("未选中的按钮字体颜色")}]},{type:"color",name:"config.buttonBorderColor",format:"rgba",label:l.default("按钮边框背景色")},{type:"number",label:l.default("按钮边框大小"),name:"config.buttonBorderSize",step:1,min:0,max:10},{type:"number",label:l.default("文字大小"),name:"config.fontSize",step:1,min:8,max:100},{type:"group",controls:[{type:"number",name:"config.top",step:1,label:l.default("上下内边距")},{type:"number",name:"config.left",label:l.default("左右内边距"),step:1}]}]}];return h};var d=[{label:l.default("按钮组"),value:"groups"},{label:l.default("分离按钮组"),value:"disperse"}],u=[{label:l.default("默认"),value:"default"},{label:l.default("菱形"),value:"diamond"},{label:l.default("环形"),value:"circle"}]});
;sugar.define("sugar:widgets/charts/tab/tab.tsx",function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=t("sugar:node_modules/tslib/tslib.js"),i=t("sugar:utils/i18n.ts"),r=t("sugar:node_modules/react/index.js"),n=t("sugar:node_modules/react-mixin/index.js"),o=t("sugar:node_modules/classnames/index.js"),d=t("sugar:widgets/charts/chart-manager.tsx"),s=t("sugar:node_modules/mobx/lib/mobx.js"),c=t("sugar:node_modules/lodash/get.js"),l=t("sugar:widgets/charts/_hoc/debug/debug.tsx"),h=t("sugar:widgets/charts/_mixin/common.tsx"),u=t("sugar:stores/index.ts"),g=t("sugar:widgets/charts/tab/tab-ctrl.tsx"),b=t("sugar:widgets/charts/_hoc/chart-zoom/index.tsx"),f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bindChartsId=[],e.tabHideChart=[],e.slideTimer=null,e.slideIndex=0,e.activeTab="",e.slide=function(){var t=e.props.chart.config,a=t.slideInterval,i=t.tabBindChart;clearInterval(e.slideTimer);var r=(i||[]).map(function(t){return t.id});r.length&&(e.slideTimer=setInterval(function(){var t=r.indexOf(e.activeTab||r[0])||0,a=(t+1)%r.length;e.changeTab(r[a])},a||2e3))},e.changeTab=function(t){var a=e.props,i=a.chart,r=i.frontendId,n=i.config,o=a.tabStore,d=e.tabHideChart.filter(function(e){return e.id===t})[0];e.activeTab=t,t&&d&&e.bindChartsId.length&&(o.setHideChartIds(r,(d.hideChartIds||[]).join(",")||""),o.setIframeLoadOnNeedTabIds(r,!!n.iframeLoadOnNeed))},e.getChartHide=function(){var t=e.props.chart.config.tabBindChart;if(!t||!t.length)return e.bindChartsId=[],void(e.tabHideChart=[]);var i=t.reduce(function(t,e){if(e.bindChart){var a=e.bindChart.split(",");t.push.apply(t,a)}return t},[]);e.bindChartsId=a.__spreadArrays(Array.from(new Set(i)));var r=[];t.forEach(function(t){var a=[],i=(t.bindChart||"").split(",").filter(function(t){return e.bindChartsId.indexOf(t)>-1}).join(",");i&&(a=e.bindChartsId.filter(function(t){return-1===i.indexOf(t)})),r.push({id:t.id,hideChartIds:a})}),e.tabHideChart=r},e}return a.__extends(e,t),e.prototype.componentWillMount=function(){var t=this.props.chart.config,e=t.defaultTab,a=t.tabBindChart,i=t.openSlide;this.activeTab=e||c(a,"[0].id",""),this.getChartHide(),this.changeTab(this.activeTab),i&&this.slide()},e.prototype.componentWillReact=function(){var t=this.props.chart.config,e=t.tabBindChart,a=t.defaultTab,i=t.openSlide,r=this.props,n=r.chart,o=r.chartList,d=r.conditionList;this.getChartHide(),this.changeTab(this.activeTab);var s=o.data.filter(function(t){return t&&t.frontendId!==n.frontendId}).map(function(t){return t.frontendId}),c=d.data.map(function(t){return t.frontendId}),l=!1,h=(e||[]).map(function(t){var e=(t.bindChart||"").split(",").filter(function(t){return s.concat(c).indexOf(t)>-1}).join(",");return t.bindChart!==e&&(l=!0,t.bindChart=e),t});l&&o.changeConfig(n.frontendId,{tabBindChart:h}),a&&!(e||[]).filter(function(t){return t.id===a})[0]&&o.changeConfig(n.frontendId,{defaultTab:""}),i?this.slide():clearInterval(this.slideTimer)},e.prototype.componentWillUnmount=function(){clearInterval(this.slideTimer)},e.prototype.render=function(){var t=this,e=this.props,a=e.chart.config,n=a.tabBindChart,d=a.defaultTab,s=a.fontSize,c=a.activeColor,l=a.defaultColor,h=a.activeBgColor,u=a.defaultBgColor,g=a.btnMargin,b=a.btnType,f=a.btnStyle,p=a.startGradual,m=a.customColorsActive,v=a.customColorsNotActive,C=e.chart,k=this.activeTab,x=function(t,e,a,i,r,n){var o="",s=[];if(t===k||!k&&t===d)e&&r&&r.length>1?(r.forEach(function(t){s.push(t.background+" "+t.ratio+"%")}),o="linear-gradient("+s.toString()+")"):o=a;else if(e)if(n&&n.length>1){var c=[];n.forEach(function(t){c.push(t.background+" "+t.ratio+"%")}),o="linear-gradient("+c.toString()+")"}else o=i;else o=i;return o},y=function(t,e,a){var i="";return"diamond"===t&&(i="skew(-30deg)"),"circle"===t&&(i=e>2?"rotate("+360/e*a+"deg) skew("+(90-360/e)+"deg)":"rotate("+360/e*a+"deg)"),i},I=function(t,e){var a="";return a=t>2?"skew("+-(90-360/t)+"deg) rotate("+-(360/t)*e+"deg)":"rotate("+-(360/t)*e+"deg)"},T=function(t){var e="",a=C.height/4+C.config.innerSize/2;switch(t){case 1:e="50%";break;case 2:e="25%";break;case 3:e=a*Math.cos(180/t*(Math.PI/180))*2+"px";break;case 4:e=a*Math.cos(180/t*(Math.PI/180))+"px";break;default:var i=a*Math.sin(180/t*(Math.PI/180))*Math.tan((90-360/t)*(Math.PI/180));e=a*Math.cos(180/t*(Math.PI/180))-i+"px"}return e},_=function(t){var e="",a=C.height/4+C.config.innerSize/2;switch(t){case 1:e="25%";break;case 2:e="50%";break;default:e=a*Math.sin(180/t*(Math.PI/180))+"px"}return e},S="circle"===f&&n&&n.length;return r.createElement("div",{className:"chart chart-tab"},r.createElement("div",{className:o("groups",{"btn-group":"disperse"!==b&&"circle"!==f},{"circle-group":S}),style:{width:S?C.height+"px":"",height:S?C.height+"px":""}},n&&n.length?n.map(function(e,a){return r.createElement("button",{key:e.id,type:"button",className:"btn btn-"+x(e.id,p,"custom-primary","custom-default")+" "+("circle"==f?"button-circle":""),onClick:function(){t.changeTab(e.id)},style:{width:"circle"===f?C.height+"px":"",height:"circle"===f?C.height+"px":"",fontSize:s,margin:"disperse"!==b||"circle"==f?0:"0 "+g/2+"px",background:x(e.id,p,h,u,m,v),color:x(e.id,p,c,l),padding:"circle"!==f?C.config.top+"px "+C.config.left+"px":"",left:"circle"===f?1===n.length?"0":"50%":"",top:"circle"===f?n.length>2?"50%":"0":"",transform:y(f,n.length,a),transformOrigin:"circle"===f?n.length>2?"0 0":"0 50%":"",border:C.config.buttonBorderSize+"px solid "+C.config.buttonBorderColor}},"circle"==f?r.createElement("span",{style:{position:"absolute",display:"block",left:T(n.length),top:_(n.length),transform:I(n.length,a)}},r.createElement("span",{style:{position:"absolute",display:"block",top:"50%",left:"50%",transform:"translate( -50%, -50%)"}},i.default(e.tabName||i.default("未命名")))):r.createElement("span",{style:{display:"block",transform:"diamond"===f?"skew(30deg)":""}},i.default(e.tabName||i.default("未命名"))))}):i.default("请配置要关联的图表")),"circle"==f&&n&&n.length?r.createElement("div",{className:"circleCenter",style:{width:2*C.config.innerSize+"px",height:2*C.config.innerSize+"px",backgroundColor:""+C.config.innerColor}}):null)},e.displayName="Tab",a.__decorate([s.observable,a.__metadata("design:type",Object)],e.prototype,"activeTab",void 0),e=a.__decorate([l.default,b.default,u.inject(function(t){return{chartList:t.chart.list,conditionList:t.condition.list,tabStore:t.tab}}),u.observer,n.decorate(h.default)],e)}(r.Component);e.default=f;var p={startGradual:!0,fontSize:20,btnMargin:20,slideInterval:2e3,btnType:"groups",buttonBorderColor:"rgba(62, 21, 99, 1)",activeColor:"rgba(255, 255, 255, 1)",defaultColor:"rgba(255, 255, 255, 1)",buttonBorderSize:1,top:15,left:30,customColorsActive:[{id:"kmvlt5ef2eeuk",background:"rgba(85, 33, 219, 0.7)",ratio:0},{id:"kmvlt8rg3ekyh",background:"rgba(74, 144, 226, 1)",ratio:50},{id:"kmvozk4n4lv2k",background:"rgba(76, 133, 197, 0.3)",ratio:100}],customColorsNotActive:[{id:"kmvlt6j15dx4w",background:"rgba(65, 125, 195, 0.6)",ratio:20},{id:"kmvltf5n4ybk0",background:"rgba(80, 227, 194, 0.3)",ratio:60},{id:"kmzo5m4a5j5t3",background:"rgba(30, 109, 134, 0.5)",ratio:100}],tabBindChart:[{id:"kmvyhj131la3",bindChart:"",tabName:i.default("北京")},{id:"kmw3vwhf1b8bd",bindChart:"",tabName:i.default("天津")},{id:"kmwy1dtl2vf8x",bindChart:"",tabName:i.default("上海")}]};d.register({kind:"interaction",type:"tab",name:i.default("Tab控件"),dataBindTabTitle:i.default("高级"),iconClassName:"chart-tab",component:f,loadDataPremiseField:"needLoadData",variants:[{name:i.default("菱形Tab控件"),iconClassName:"chart-tab-diamond",initialState:{width:430,height:120,config:a.__assign({btnStyle:"diamond"},p)}},{name:i.default("环形Tab控件"),iconClassName:"chart-tab-circle",initialState:{width:290,height:165,config:a.__assign({btnStyle:"circle",innerSize:25},p)}}],initialState:{width:455,height:100,config:a.__assign(a.__assign({},p),{fontSize:20,btnMargin:20,slideInterval:2e3,btnType:"groups",btnStyle:"default"})},dataBindCtrl:g.dataBindCtrl})});
;sugar.define("sugar:widgets/charts/fullscreen/fullscreen-ctrl.tsx",function(e,l){"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.dataBindCtrl=void 0;var a=e("sugar:utils/i18n.ts");l.dataBindCtrl=[{type:"select",name:"config.styleType",label:a.default("图标样式"),options:[{label:a.default("风格 1"),value:"icon1"},{label:a.default("风格 2"),value:"icon2"}]},{type:"number",label:a.default("图标大小"),name:"config.size",step:1,min:10,max:300},{type:"color",name:"config.color",format:"rgba",label:a.default("图标颜色")}]});
;sugar.define("sugar:widgets/charts/fullscreen/fullscreen.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=e("sugar:node_modules/tslib/tslib.js"),r=e("sugar:utils/i18n.ts"),s=e("sugar:node_modules/react/index.js"),n=e("sugar:node_modules/screenfull/dist/screenfull.js"),l=e("sugar:node_modules/react-mixin/index.js"),o=e("sugar:widgets/charts/chart-manager.tsx"),i=e("sugar:widgets/charts/_mixin/common.tsx"),c=e("sugar:widgets/charts/_hoc/debug/debug.tsx"),d=e("sugar:stores/index.ts"),u=e("sugar:widgets/charts/fullscreen/fullscreen-ctrl.tsx"),f=function(e){function t(t){var a=e.call(this,t)||this;return a.toggleFullScreen=a.toggleFullScreen.bind(a),a}a.__extends(t,e),t.prototype.toggleFullScreen=function(){n.enabled&&"normal"==this.mode&&n.toggle()},t.prototype.render=function(){var e=this.props,t=(e.chart,e.hub,e.chart.config),a=e.mode;this.mode=a;var r="fa fa-expand-arrows-alt",l="fa fa-compress-arrows-alt";"icon2"===t.styleType&&(r="fa fa-expand",l="fa fa-compress");var o={fontSize:"30px",color:"#fff"};t.color&&(o.color=t.color),t.size&&(o.fontSize=t.size+"px");var i;return i=n.isFullscreen?s.createElement("i",{className:l,style:o,"aria-hidden":"true",onClick:this.toggleFullScreen}):s.createElement("i",{className:r,style:o,"aria-hidden":"true",onClick:this.toggleFullScreen}),s.createElement("div",{className:"chart chart-fullscreen"},i)};var r;return t.displayName="FullScreen",t=a.__decorate([c.default,d.observer,l.decorate(i.default),a.__metadata("design:paramtypes",["function"==typeof(r="undefined"!=typeof o.IChartComponentProps&&o.IChartComponentProps)?r:Object])],t)}(s.Component);t.default=f,o.register({kind:"interaction",type:"fullscreen",name:r.default("全屏按钮"),iconClassName:"chart-fullscreen",component:f,dataBindTabTitle:r.default("样式设置"),canEmptyData:!0,loadDataPremiseField:"needLoadData",initialState:{config:{styleType:"icon1",size:50,color:"rgba(255, 255, 255, 0.5)"}},initialDashboardState:{width:50,height:50},dashboardOnly:!0,dataBindCtrl:u.dataBindCtrl})});
;sugar.define("sugar:sites/group/manage/data-model/data-model.tsx",function(e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.nlpName=void 0;var t=e("sugar:node_modules/tslib/tslib.js"),o=e("sugar:utils/i18n.ts"),l=e("sugar:utils/url.ts"),r=e("sugar:node_modules/react/index.js"),d=e("sugar:node_modules/react-document-title/index.js"),n=e("sugar:node_modules/amis/lib/index.js"),s=e("sugar:sites/amis-renderer.tsx"),p=e("sugar:stores/index.ts"),i=e("sugar:widgets/form-dialog.tsx");a.nlpName=o.default("AI问答");var u=function(e){function u(){return null!==e&&e.apply(this,arguments)||this}return t.__extends(u,e),u.prototype.componentWillMount=function(){this.props.database.simpleList.loadData(),window.comeFromModelManage=!0,this.props.dataModelTreeList.loadData(),this.setState({showCreatModelTableDialog:!!l.getQueryString("database")&&window.comeFromDataBaseManage},function(){window.comeFromDataBaseManage=!1})},u.prototype.render=function(){var e,t=this,p=[],u=this.props.database.simpleList;if("pending"===u.loadState)return r.createElement(n.Spinner,{overlay:!0,size:"lg"});if("error"===u.loadState)return r.createElement("div",null,o.default("拉取数据源错误"));"done"===u.loadState&&u.data&&u.data.length&&(p=u.data.map(function(e){return{label:e.name,value:e.hash}}));var m={title:o.default("新建文件夹"),body:{name:"sugar-data-model-folder-new",type:"form",mode:"normal",api:"/api/manage/group/"+this.props.group.current.data.hash+"/dataModel",controls:[{name:"type",type:"hidden",value:0},{name:"name",label:o.default("文件夹名称"),type:"text",required:!0,validations:"maxLength:30"},{type:"tree",label:o.default("父级页面"),rootLabel:o.default("顶级"),placeholder:o.default("暂无子文件夹"),source:"post:/api/manage/group/"+this.props.group.current.data.hash+"/dataModel/getFormedTree",name:"parentHash",hideRoot:!1}]}},g={title:o.default("编辑 `$name`"),body:{api:"put:/api/manage/group/"+this.props.group.current.data.hash+"/dataModel/updateFolder",name:"sugar-data-model-folder-edit",type:"form",mode:"normal",controls:[{name:"hash",type:"hidden"}].concat(m.body.controls)}},h={title:o.default("新建数据模型"),body:{name:"sugar-data-model-new",type:"form",mode:"normal",api:"/api/manage/group/"+this.props.group.current.data.hash+"/dataModel",redirect:"/group/"+this.props.group.current.data.key+"/manage/dataModel/edit/$hash",controls:[{name:"type",type:"hidden",value:1},{name:"databaseHash",label:o.default("数据源"),type:"select",required:!0,options:p},{name:"name",label:o.default("模型名称"),type:"text",required:!0,validations:"maxLength:40"},{type:"tree",label:o.default("父级页面"),rootLabel:o.default("顶级"),placeholder:o.default("暂无子文件夹"),source:"post:/api/manage/group/"+this.props.group.current.data.hash+"/dataModel/getFormedTree",name:"parentHash",hideRoot:!1}]}},c={title:o.default("批量移动"),body:{name:"sugar-multi-move",type:"form",mode:"horizontal",api:"put:/api/manage/group/"+this.props.group.current.data.hash+"/dataModel/multiMove",controls:[{type:"hidden",name:"rows"},{type:"tree",label:o.default("父级页面"),source:"post:/api/manage/group/"+this.props.group.current.data.hash+"/dataModel/getFormedTree",name:"parentHash",hideRoot:!1}]}},b=[{actionType:"link",link:"/group/"+this.props.group.current.data.key+"/manage/dataModel/edit/$hash",label:o.default("编辑"),type:"button",visibleOn:"type === 1"},{actionType:"dialog",reload:"core-table",label:o.default("重命名"),type:"button",visibleOn:"type === 1000",dialog:{title:o.default("模型重命名"),size:"xs",actions:[{type:"button",actionType:"cancel",label:o.default("取消")},{type:"submit",label:o.default("确定"),level:"primary"}],body:{type:"form",name:"sugar-datamodel-edit",api:"put:/api/manage/group/"+this.props.group.current.data.hash+"/dataModel/$hash/changeDatamodelName",controls:[{name:"name",label:o.default("模型名称"),type:"text",required:!0}]}}},{actionType:"ajax",api:"post:/api/manage/group/"+this.props.group.current.data.hash+"/dataModel/$hash/copy",reload:"core-table",label:o.default("复制"),type:"button",visibleOn:"type === 1"},{confirmText:o.default("您确定要移除该数据模型?"),actionType:"ajax",api:"delete:/api/manage/group/"+this.props.group.current.data.hash+"/dataModel/$hash",reload:"core-table",label:o.default("删除"),type:"button",visibleOn:"type === 1"},{actionType:"dialog",dialog:g,reload:"aside-tree.parentHash",label:o.default("编辑"),type:"button",visibleOn:"type === 0"},{confirmText:o.default("您确定要移除该文件夹?"),actionType:"ajax",api:"delete:/api/manage/group/"+this.props.group.current.data.hash+"/dataModel/$hash",reload:"aside-tree.parentHash,core-table",label:o.default("删除"),type:"button",visibleOn:"type === 0"}];window.sugarConfig.enableNLP&&b.splice(1,0,{actionType:"dialog",reload:"core-table",label:o.default("配置推荐问题"),type:"button",visibleOn:"type === 1 && nlpOpen === 1",dialog:{title:o.default("配置推荐问题"),size:"lg",actions:[{type:"button",actionType:"cancel",label:o.default("取消")},{type:"submit",label:o.default("确定"),level:"primary"}],body:{type:"form",mode:"normal",api:"put:/api/manage/group/"+this.props.group.current.data.hash+"/dataModel/$hash/changeDataModelQusetion",controls:[{type:"combo",multiple:!0,addable:!0,name:"sugQuestion",maxLength:20,flat:!0,draggable:!0,label:o.default("配置该数据模型在「"+a.nlpName+"」功能中的推荐问题"),controls:[{type:"text",clearable:!0}]}]}}});var f={name:"sugar-datamodel-manage",aside:{type:"form",target:"core-table",name:"aside-tree",wrapWithPanel:!1,submitText:null,submitOnChange:!0,className:"wrapper-xs",controls:[{type:"tree",rootLabel:o.default("顶级"),source:"post:/api/manage/group/"+this.props.group.current.data.hash+"/dataModel/getFormedTree",placeholder:o.default("暂无子文件夹"),name:"parentHash",inputClassName:"no-border h-full",hideRoot:!1}]},toolbarClassName:"padder-md m-t-md",toolbar:[{type:"button-toolbar",buttons:[{type:"button",label:o.default("新建数据模型"),level:"primary",actionType:"dialog",dialog:h},{type:"button",label:o.default("新建文件夹"),actionType:"dialog",dialog:m,reload:"aside-tree.parentHash,core-table"}]}],actionsClassName:"m-t-md",body:{type:"crud",name:"core-table",footable:{expand:"none"},api:"/api/manage/group/"+this.props.group.current.data.hash+"/dataModel/getModelByParent?parentHash=$parentHash",quickSaveItemApi:"/api/manage/group/"+this.props.group.current.data.hash+"/dataModel/$hash/updateNLPOpen",hideQuickSaveBtn:!0,initFetch:!0,switchPerPage:!1,syncLocation:!0,placeholder:o.default("没有数据模型"),draggable:!0,saveOrderApi:{method:"put",url:"/api/manage/group/"+this.props.group.current.data.hash+"/dataModel/updateOrder",reload:"aside-tree.parentHash"},bulkActions:[{label:o.default("批量移动"),actionType:"dialog",dialog:c,reload:"aside-tree.parentHash,core-table"}],columns:[{type:"tpl",name:"name",label:o.default("模型名称"),tpl:'\n              <span class="m-b-xs">\n                <% if (data.type == 0) { %>\n                  <i class="fa fa-folder"></i>\n                <% } %>\n                <% if (data.type == 0) { %>\n                  <a data-link="?page=1&parentHash=<%= data.hash %>" class="text-info"><%- data.name %></a>\n                <% } else { %>\n                  <a data-link="/group/'+this.props.group.current.data.key+'/manage/dataModel/edit/<%= data.hash %>" class="text-info--hover"><%- data.name %></a>\n                <% } %>\n              </span>\n            '},{type:"text",name:"user",label:o.default("创建人"),breakpoint:"xs"},{type:"text",name:"database",label:o.default("数据源"),breakpoint:"xs"},{type:"operation",width:160,label:o.default("操作"),breakpoint:"xs",buttons:b}]}};return window.sugarConfig.enableNLP&&f.body.columns.splice(3,0,{name:"nlpOpen",label:o.default("开启'「"+a.nlpName+"」'功能")+'<a style="padding-left: 5px" href="/docs/AI-QA" target="_blank"><i class="fa fa-question-circle"></i></a>',quickEditEnabledOn:"data.type === 1",quickEdit:{mode:"inline",type:"switch",size:"xs",saveImmediately:!0,resetOnFailed:!0}},{name:"nlpState",label:o.default("'「"+a.nlpName+"」'训练状态"),type:"mapping",map:(e={undefined:"-",0:o.default("待训练"),1:o.default("训练中"),2:o.default("训练完成")},e[-1]=o.default("训练失败，可能是模型中没有数据或其他模型训练中，请关闭开关后重试"),e)}),r.createElement(d,{title:o.default("数据模型管理")},r.createElement("div",{className:"full-box"},r.createElement(s.default,{schema:f,location:this.props.location}),this.state.showCreatModelTableDialog?r.createElement(i.default,{key:"view-customtable-dialog",className:"view-customtable-dialog",show:!0,wideLabel:!0,size:"xs",title:o.default("新建数据模型"),onClose:function(){return t.setState({showCreatModelTableDialog:!1})},onConfirm:function(){return t.setState({showCreatModelTableDialog:!1})},api:"/api/manage/group/"+this.props.group.current.data.hash+"/dataModel",redirect:"/group/"+this.props.group.current.data.key+"/manage/dataModel/edit/$hash",controls:[{name:"type",type:"hidden",value:1},{name:"databaseHash",label:o.default("数据源"),type:"select",required:!0,options:p,value:l.getQueryString("database")},{name:"name",label:o.default("模型名称"),type:"text",required:!0,validations:"maxLength:40"},{type:"tree",label:o.default("父级页面"),rootLabel:o.default("顶级"),placeholder:o.default("暂无子文件夹"),source:"post:/api/manage/group/"+this.props.group.current.data.hash+"/dataModel/getFormedTree",name:"parentHash",hideRoot:!1}]}):null))},u.displayName="DataModelManage",u=t.__decorate([p.inject(function(e){return{database:e.database,group:e.group,dataModelTreeList:e.dataModel.treeList}}),p.observer],u)}(r.Component);a.default=u});
;sugar.define("sugar:widgets/charts/smart-audio/smart-audio-ctrl.tsx",function(e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.dataBindCtrl=void 0;var t=e("sugar:sites/group/manage/data-model/data-model.tsx"),l=e("sugar:utils/i18n.ts"),o=e("sugar:utils/tree.ts"),r=e("sugar:widgets/amis-inline-switch.tsx");a.dataBindCtrl=function(e){var a=e.chart,n=(a.frontendId,a.config.tabBindChart,e.chartList),u=n.data.filter(function(e){return e&&"smart-chart"===e.type}).map(function(e){return{value:e.frontendId,label:e.name}}),i=e.dataModelTreeList,d=i.data||[];return d=o.map(d,function(e){var a=e.name;return e.isDir||(e.nlpOpen?0===e.nlpState||1===e.nlpState?a+="("+l.default("训练中")+")":-1===e.nlpState&&(a+="("+l.default("训练错误")+")"):a+="("+l.default("未开启")+")"),{value:e.value,label:a,children:e.isDir?e.children||[]:void 0}}),[r.default("config.autoConnect",l.default("默认打开语音输入（浏览模式生效）")),{type:"fieldset",collapsed:!1,title:l.default(t.nlpName+"设置"),collapsable:!0,headingClassName:"fieldset-title",controls:[{type:"select",label:l.default("控制的智能图表"),name:"config.bindSmartChart",clearable:!0,placeholder:l.default("请选择要控制的智能图表"),searchable:!0,isSearchable:!0,options:u},{label:l.default("选择'「"+t.nlpName+"」'功能查询的模型范围"),placeholder:l.default("该AI探索页未配置模型"),type:"tree",name:"config.dataModelHashs",withChildren:!0,joinValues:!1,extractValue:!0,multiple:!0,options:d}]},{type:"fieldset",collapsed:!1,title:l.default("样式设置"),collapsable:!0,headingClassName:"fieldset-title",controls:[{type:"group",controls:[{type:"color",label:l.default("背景颜色"),name:"config.audioBackgroundColor",format:"rgba",resetValue:"rgba(74, 144, 226, 0.29)"},{type:"color",label:l.default("图标颜色"),name:"config.audioIconColor",format:"rgba",resetValue:"rgba(255, 255, 255, 0.45)"}]},{type:"group",controls:[{type:"number",label:l.default("图标大小"),name:"config.iconSize",resetValue:25,min:0,max:100},{type:"number",label:l.default("状态指示灯大小占比（%）"),name:"config.statesRatio",resetValue:15,min:0,max:100}]}]},{type:"fieldset",collapsed:!1,title:l.default("语音回显设置"),collapsable:!0,headingClassName:"fieldset-title",controls:[{type:"group",controls:[{type:"color",label:l.default("回显框背景颜色"),name:"config.audioTextBackgroundColor",format:"rgba",resetValue:"rgba(74, 144, 226, 0.29)"},{type:"color",label:l.default("回显文字颜色"),name:"config.audioTextColor",format:"rgba",resetValue:"rgba(255, 255, 255, 0.45)"}]},{type:"group",controls:[{type:"number",label:l.default("停留时间（秒）"),name:"config.audioTextTime",resetValue:5,min:1,max:100},{type:"select",label:l.default("回显框位置"),name:"config.audioTextPlace",options:[{label:l.default("左上"),value:"top-left"},{label:l.default("中上"),value:"top-center"},{label:l.default("右上"),value:"top-right"},{label:l.default("左下"),value:"bottom-left"},{label:l.default("中下"),value:"bottom-center"},{label:l.default("右下"),value:"bottom-right"}]}]},{type:"group",controls:[{type:"number",label:l.default("文字大小"),name:"config.audioTextSize",resetValue:20,min:13,max:100},{type:"number",label:l.default("圆角大小"),name:"config.audioBorderRadius",resetValue:25,min:0,max:100}]}]}]}});
;sugar.define("sugar:widgets/word-toast/word-toast.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.wordToast=t.WordToastMessage=void 0;var o=e("sugar:node_modules/tslib/tslib.js"),n=e("sugar:node_modules/react-transition-group/index.js"),s=e("sugar:node_modules/react/index.js"),i=e("sugar:node_modules/classnames/index.js"),r=e("sugar:node_modules/lodash/groupBy.js"),a=e("sugar:sites/sugar-cxd.ts"),d=e("sugar:node_modules/short-uuid/index.js"),u={entering:"fade-in",entered:"fade-in-active",exiting:"fade-out",exited:"fade-out-active"},l=null,c=function(e,t){void 0===t&&(t={}),l&&l.show(e,o.__assign({},t))},h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.hasRendered=!1,t.state={items:[]},t}return o.__extends(t,e),t.prototype.componentDidMount=function(){this.show=this.show.bind(this),this.hasRendered=!0,l=this},t.prototype.componentWillUnmount=function(){this.hasRendered&&(l=null)},t.prototype.notifiy=function(e,t){var n=this.state.items.concat();n.push(o.__assign(o.__assign({body:e},t),{id:d.uuid()})),this.setState({items:n})},t.prototype.show=function(e,t){this.notifiy(e,t)},t.prototype.handleDismissed=function(e){var t,o=this.state.items.concat(),n=o.splice(e,1)[0];null===(t=null===n||void 0===n?void 0:n.onDissmiss)||void 0===t?void 0:t.call(n),this.setState({items:o})},t.prototype.render=function(){var e=this;if(l&&!this.hasRendered)return null;var t=this.props,o=t.timeout,n=t.position,d=this.state.items,u=r(d,function(e){return e.position||n});return Object.keys(u).map(function(t){var n=u[t];return s.createElement("div",{key:t,className:i.default("word-toast-container "+a.classPrefix+"Toast-wrap "+a.classPrefix+"Toast-wrap--"+t.replace(/\-(\w)/g,function(e,t){return t.toUpperCase()}))},n.map(function(t){var n;return s.createElement(m,{key:t.id,body:t.body,timeout:null!==(n=t.timeout)&&void 0!==n?n:o,backgroundColor:t.backgroundColor,borderRadius:t.borderRadius,textColor:t.textColor,textSize:t.textSize,onDismiss:e.handleDismissed.bind(e,d.indexOf(t))})}))})},t.defaultProps={position:"bottom",timeout:5e3},t.themeKey="toast",t}(s.Component);t.default=h;var m=function(e){function t(t){var o=e.call(this,t)||this;return o.state={visible:!1},o.mounted=!1,o.handleMouseLeave=o.handleMouseLeave.bind(o),o.handleMouseEnter=o.handleMouseEnter.bind(o),o.handleEntered=o.handleEntered.bind(o),o.close=o.close.bind(o),o}return o.__extends(t,e),t.prototype.componentDidMount=function(){this.mounted=!0,this.setState({visible:!0})},t.prototype.componentWillUnmount=function(){clearTimeout(this.timer),this.mounted=!1},t.prototype.handleMouseEnter=function(){clearTimeout(this.timer)},t.prototype.handleMouseLeave=function(){this.handleEntered()},t.prototype.handleEntered=function(){var e=this.props.timeout;this.mounted&&e&&(this.timer=setTimeout(this.close,e))},t.prototype.close=function(){clearTimeout(this.timer),this.setState({visible:!1})},t.prototype.render=function(){var e=this,t=this.props,o=t.onDismiss,r=t.body,a=t.backgroundColor,d=t.textColor,l=t.textSize,c=t.borderRadius,h={};return a&&(h.backgroundColor=a),d&&(h.color=d),l&&(h.fontSize=l),void 0!==c&&(h.borderRadius=c),s.createElement(n.Transition,{mountOnEnter:!0,unmountOnExit:!0,"in":this.state.visible,timeout:{appear:0,enter:0,exit:300},onEntered:this.handleEntered,onExited:o},function(t){return s.createElement("div",{style:h,className:i.default("word-toast",u[t]),onMouseEnter:e.handleMouseEnter,onMouseLeave:e.handleMouseLeave,onClick:e.close},s.createElement("div",null,r))})},t.defaultProps={timeout:5e3,classPrefix:"",position:"bottom"},t}(s.Component);t.WordToastMessage=m,t.wordToast={container:l,show:c}});
;sugar.define("sugar:widgets/charts/smart-audio/smart-audio.tsx",function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=t("sugar:node_modules/tslib/tslib.js"),n=t("sugar:utils/i18n.ts"),a=t("sugar:node_modules/react/index.js"),i=t("sugar:node_modules/react-mixin/index.js"),s=t("sugar:widgets/charts/chart-manager.tsx"),r=t("sugar:widgets/charts/_mixin/common.tsx"),c=t("sugar:node_modules/amis/lib/index.js"),d=t("sugar:stores/index.ts"),u=t("sugar:widgets/charts/smart-audio/smart-audio-ctrl.tsx"),l=t("sugar:utils/url.ts"),p=t("sugar:utils/storage.ts"),m=t("sugar:widgets/pop-menu/pop-menu.tsx"),h=t("sugar:utils/smart-audio.ts"),g=t("sugar:widgets/word-toast/word-toast.tsx"),f=!1,k=window.sugarConfig,I=function(t){function e(e){var o=t.call(this,e)||this;if(o.handleInitPopMenu=o.handleInitPopMenu.bind(o),o.bindContextEvent=o.bindContextEvent.bind(o),o.toggleModal=o.toggleModal.bind(o),o.setAudioInputID=o.setAudioInputID.bind(o),o.connectSocket=o.connectSocket.bind(o),o.disconnectSocket=o.disconnectSocket.bind(o),o.state={isEditingAudioInputID:!1,connected:!1,connecting:!1,audioInputID:p.get("audioBrowserBindID","defaultGroup")||"defaultGroup",tipStr:""},!f)try{window.loadjs(["/static/third-party/socket.io/socket.io.min.js"],"socketio",{async:!1}),f=!0}catch(n){}return o}o.__extends(e,t),e.prototype.componentWillMount=function(){h.cleanOrderRecord(),this.props.chart.config.autoConnect&&"editor"!==this.props.mode&&this.connectSocket()},e.prototype.componentWillUnmount=function(){this.disconnectSocket(),h.cleanOrderRecord()},e.prototype.bindContextEvent=function(t){t?(this.dom=t,this.dom.addEventListener("contextmenu",this.handleInitPopMenu)):(this.dom&&this.dom.removeEventListener("contextmenu",this.handleInitPopMenu),this.dom=t)},e.prototype.handleInitPopMenu=function(){var t=m.popMenu.getPopMenuTree();t&&(t.push({icon:"fa fa-edit",name:n.default("编辑音频设备标识"),cb:this.toggleModal}),m.popMenu.setPopMenuTree(t))},e.prototype.toggleModal=function(){this.setState({isEditingAudioInputID:!this.state.isEditingAudioInputID})},e.prototype.setAudioInputID=function(){p.put("audioBrowserBindID",this.state.audioInputID||"defaultGroup"),this.connectSocket(),this.toggleModal()},e.prototype.disconnectSocket=function(){this.state.connected&&this.socket&&(this.socket.disconnect(),this.setState({connected:!1,connecting:!1}))},e.prototype.connectSocket=function(){var t=this;this.state.connecting||(this.setState({connecting:!0}),window.loadjs.ready(["socketio"],function(){t.disconnectSocket(),t.socket=io(l.host,{transports:["websocket"],path:"/sugarSocket",query:{token:"sugarSmartAudio",type:"smart-audio",chartHash:t.props.chart.hash,audioBrowserBindID:t.state.audioInputID}}),t.socket.on("connect",function(){t.setState({connected:!0,connecting:!1})}),t.socket.on("disconnect",function(){t.setState({connected:!1,connecting:!1})}),t.socket.on("error",function(){t.setState({connected:!1,connecting:!1})}),t.socket.on("order",function(e){if(e.asrText){var o=t.props.chart.config;g.wordToast.show(e.asrText,{timeout:1e3*o.audioTextTime,position:o.audioTextPlace,backgroundColor:o.audioTextBackgroundColor,textColor:o.audioTextColor,textSize:o.audioTextSize,borderRadius:o.audioBorderRadius})}t.props.chart.processSmartAudioOrder(e,t.props.mode)})}))},e.prototype.render=function(){var t=this,e=this.props,o=(e.chart,e.hub,e.chart.config),i=(e.mode,this.state),s=i.connected,r=i.isEditingAudioInputID,d=i.audioInputID,u=i.connecting,l="red";u?l="yellow":s&&(l="green");var p={backgroundColor:o.audioBackgroundColor,color:o.audioIconColor,fontSize:o.iconSize,top:o.statesRatio+"%",right:o.statesRatio+"%"},m={width:o.statesRatio+"%",height:o.statesRatio+"%"};return a.createElement("div",{className:"chart chart-smart-audio",ref:this.bindContextEvent},r?a.createElement(c.Modal,{show:!0},a.createElement(c.Modal.Header,{showCloseButton:!1},a.createElement(c.Modal.Title,null,n.default("编辑音频设备标识"))),a.createElement(c.Modal.Body,null,a.createElement("div",{className:"a-Form-item a-Form-item--horizontal"},a.createElement("div",{className:"a-Form-value a-Form-itemColumn--12"},a.createElement(c.InputBox,{type:"text",value:d,onChange:function(e){t.setState({audioInputID:e})}})))),a.createElement(c.Modal.Footer,null,a.createElement(c.Button,{level:"primary",onClick:this.setAudioInputID},n.default("确定")),a.createElement(c.Button,{onClick:this.toggleModal},n.default("取消")))):null,a.createElement("div",{className:"socket-link-state "+l,style:m}),s?a.createElement("div",{className:"socket-link-ctrl",style:p,onClick:this.disconnectSocket},a.createElement("i",{className:"fa fa-microphone-slash"})):a.createElement("div",{className:"socket-link-ctrl",style:p,onClick:this.connectSocket},a.createElement("i",{className:"fa fa-microphone"})))};var u;return e.displayName="SmartAudio",e=o.__decorate([d.observer,i.decorate(r.default),o.__metadata("design:paramtypes",["function"==typeof(u="undefined"!=typeof s.IChartComponentProps&&s.IChartComponentProps)?u:Object])],e)}(a.Component);e.default=I,k.enableSmartAudio&&s.register({kind:"interaction",type:"smart-audio",name:n.default("智能音频"),iconClassName:"chart-smart-audio",component:I,dataBindTabTitle:n.default("样式设置"),canEmptyData:!0,loadDataPremiseField:"needLoadData",initialState:{config:{autoConnect:!0,statesRatio:15,iconSize:25,audioBackgroundColor:"rgba(74, 144, 226, 0.29)",audioIconColor:"rgba(255, 255, 255, 0.45)",audioTextBackgroundColor:"rgba(155, 155, 155, 0.52)",audioTextColor:"rgba(255, 255, 255, 0.45)",audioTextSize:25,audioTextPlace:"bottom-center",audioTextTime:5,audioBorderRadius:20}},initialDashboardState:{width:80,height:80},dashboardOnly:!0,dataBindCtrl:u.dataBindCtrl})});
;sugar.define("sugar:widgets/charts/decorate/decorate-chart-ctrl.tsx",function(e,l){"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.dataBindCtrl=void 0;var a=e("sugar:node_modules/tslib/tslib.js"),t=e("sugar:utils/i18n.ts"),i=e("sugar:utils/img-source-map.ts"),r=e("sugar:widgets/amis-inline-switch.tsx"),n=e("sugar:widgets/image-selector/image-selector.tsx"),o=e("sugar:node_modules/react/index.js"),d=[];for(var u in i.borders)d.push({label:u,type:i.borders[u].url.split(".").pop().toUpperCase(),value:u,image:i.borders[u].url});l.dataBindCtrl=function(){var e=[{type:"html",html:'<div class="fieldset-title">'+t.default("边框设置")+"</div>"},{type:"radios",name:"config.borderType",inline:!1,options:[{label:t.default("无"),value:0},{label:t.default("简单边框"),value:1},{label:t.default("内置边框"),value:2},{label:t.default("自定义边框"),value:3}]},{type:"color",name:"config.borderColor",format:"rgba",label:t.default("边框颜色"),visibleOn:"config.borderType === 1"},{type:"number",label:t.default("边框宽度"),name:"config.borderWidth",min:1,step:1,max:20,visibleOn:"config.borderType === 1"},{type:"radios",name:"config.borderStyle",label:t.default("边框样式"),inline:!1,options:[{label:t.default("实线"),value:"solid"},{label:t.default("点状"),value:"dotted"},{label:t.default("双线"),value:"double"},{label:t.default("虚线"),value:"dashed"}],visibleOn:"config.borderType === 1"},{name:"config.borderImageType",visibleOn:"config.borderType === 2",children:function(e){var l=e.onChange,i=e.value;return o.createElement(n.default,a.__assign({},{onChange:l,value:i},{options:d,containerClassName:"form-group form-item",label:t.default("请选择边框素材："),useKey:!0,limit:20}))}},{type:"image",name:"config.customBorderImg",visibleOn:"config.borderType === 3",maxLength:1,allowInput:!0,maxSize:2097152,reciever:"/api/image/upload"},{type:"number",name:"config.top",min:0,step:1,label:t.default("边框图片顶部切割像素"),placeholder:t.default("必填，参考边框图表文档"),visibleOn:"config.borderType === 3"},{type:"number",name:"config.bottom",min:0,step:1,label:t.default("边框图片底部切割像素"),placeholder:t.default("必填，参考边框图表文档"),visibleOn:"config.borderType === 3"},{type:"number",name:"config.left",min:0,step:1,label:t.default("边框图片左侧切割像素"),placeholder:t.default("必填，参考边框图表文档"),visibleOn:"config.borderType === 3"},{type:"number",name:"config.right",min:0,step:1,label:t.default("边框图片右侧切割像素"),placeholder:t.default("必填，参考边框图表文档"),visibleOn:"config.borderType === 3"},{type:"number",name:"config.borderRadius",min:0,step:1,label:t.default("边框圆角"),visibleOn:"config.borderType !== 0"},{type:"divider"},{type:"html",html:'<div class="fieldset-title">'+t.default("背景设置")+"</div>"},{type:"color",name:"config.backgroundColor",format:"rgba",label:t.default("背景颜色")},r.amisInlineSwitch("config.backgroundInBorder",t.default("背景延伸到边框（刷新后生效）")),{type:"number",name:"config.backgroundBlur",min:0,step:1,label:t.default("背景模糊")}];return e}});
;sugar.define("sugar:widgets/charts/decorate/decorate-chart.tsx",function(r,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=r("sugar:node_modules/tslib/tslib.js"),o=r("sugar:utils/i18n.ts"),a=r("sugar:node_modules/react/index.js"),d=r("sugar:node_modules/react-mixin/index.js"),i=r("sugar:widgets/charts/chart-manager.tsx"),s=r("sugar:widgets/charts/_mixin/common.tsx"),l=r("sugar:stores/index.ts"),n=r("sugar:widgets/charts/decorate/decorate-chart-ctrl.tsx"),c=r("sugar:utils/img-source-map.ts"),u=function(r){function e(){return null!==r&&r.apply(this,arguments)||this}return t.__extends(e,r),e.prototype.render=function(){var r,e=this.auth(this.props);if(e!==!0)return e;var t=this.props,o=t.chart.config,d=(t.chart,t.theme),i=(null===(r=d.config.chartTheme)||void 0===r?void 0:r.color)||[],s={};if(1===o.borderType)s.borderWidth=o.borderWidth+"px",s.borderColor=o.borderColor||i[0],s.borderStyle=o.borderStyle;else if(2===o.borderType){var l=c.borders[o.borderImageType];if(l){var n=l.left,u=l.right,b=l.top,g=l.bottom;s.borderImageSource="url("+l.url+")",s.borderImageSlice=b+" "+u+" "+g+" "+n+" fill",s.borderWidth=b+"px "+(u+"px")+" "+(g+"px")+" "+(n+"px"),s.borderStyle="solid"}}else if(3===o.borderType){var n=o.left,u=o.right,b=o.top,g=o.bottom,m=o.customBorderImg;n=n||0,u=u||0,b=b||0,g=g||0,s.borderImageSource="url("+m+")",s.borderImageSlice=b+" "+u+" "+g+" "+n+" fill",s.borderWidth=b+"px "+(u+"px")+" "+(g+"px")+" "+(n+"px"),s.borderStyle="solid"}return s.borderRadius=o.borderRadius+"px",s.backgroundColor=o.backgroundColor,s.backgroundClip=o.backgroundInBorder?"border-box":"padding-box",s.filter="blur("+o.backgroundBlur+"px)",0!==o.borderType||o.backgroundColor||(s.backgroundColor="rgba(23, 151, 191, 0.2)"),a.createElement("div",{className:"decorate-chart-container"},a.createElement("div",{className:"decorate-item",style:s}))},e.displayName="DecorateChart",e=t.__decorate([l.observer,d.decorate(s.default)],e)}(a.Component);e.default=u,i.register({kind:"material",type:"decorate",name:o.default("边框"),iconClassName:"chart-decorate-img-border",component:u,dataBindTabTitle:o.default("样式设置"),canEmptyData:!0,loadDataPremiseField:"never",initialState:{hideTitle:!0,config:{borderType:2,borderImageType:o.default("边框2-1"),backgroundInBorder:!1,borderStyle:"solid",borderWidth:2,backgroundBlur:0}},dataBindCtrl:n.dataBindCtrl})});
;sugar.define("sugar:utils/icon-list.ts",function(a,f){"use strict";Object.defineProperty(f,"__esModule",{value:!0}),f.icons=void 0,f.icons=["far fa-address-book","far fa-address-card","far fa-angry","far fa-arrow-alt-circle-down","far fa-arrow-alt-circle-left","far fa-arrow-alt-circle-right","far fa-arrow-alt-circle-up","far fa-bell","far fa-bell-slash","far fa-bookmark","far fa-building","far fa-calendar","far fa-calendar-alt","far fa-calendar-check","far fa-calendar-minus","far fa-calendar-plus","far fa-calendar-times","far fa-caret-square-down","far fa-caret-square-left","far fa-caret-square-right","far fa-caret-square-up","far fa-chart-bar","far fa-check-circle","far fa-check-square","far fa-circle","far fa-clipboard","far fa-clock","far fa-clone","far fa-closed-captioning","far fa-comment","far fa-comment-alt","far fa-comment-dots","far fa-comments","far fa-compass","far fa-copy","far fa-copyright","far fa-credit-card","far fa-dizzy","far fa-dot-circle","far fa-edit","far fa-envelope","far fa-envelope-open","far fa-eye","far fa-eye-slash","far fa-file","far fa-file-alt","far fa-file-archive","far fa-file-audio","far fa-file-code","far fa-file-excel","far fa-file-image","far fa-file-pdf","far fa-file-powerpoint","far fa-file-video","far fa-file-word","far fa-flag","far fa-flushed","far fa-folder","far fa-folder-open","far fa-font-awesome-logo-full","far fa-frown","far fa-frown-open","far fa-futbol","far fa-gem","far fa-grimace","far fa-grin","far fa-grin-alt","far fa-grin-beam","far fa-grin-beam-sweat","far fa-grin-hearts","far fa-grin-squint","far fa-grin-squint-tears","far fa-grin-stars","far fa-grin-tears","far fa-grin-tongue","far fa-grin-tongue-squint","far fa-grin-tongue-wink","far fa-grin-wink","far fa-hand-lizard","far fa-hand-paper","far fa-hand-peace","far fa-hand-point-down","far fa-hand-point-left","far fa-hand-point-right","far fa-hand-point-up","far fa-hand-pointer","far fa-hand-rock","far fa-hand-scissors","far fa-hand-spock","far fa-handshake","far fa-hdd","far fa-heart","far fa-hospital","far fa-hourglass","far fa-id-badge","far fa-id-card","far fa-image","far fa-images","far fa-keyboard","far fa-kiss","far fa-kiss-beam","far fa-kiss-wink-heart","far fa-laugh","far fa-laugh-beam","far fa-laugh-squint","far fa-laugh-wink","far fa-lemon","far fa-life-ring","far fa-lightbulb","far fa-list-alt","far fa-map","far fa-meh","far fa-meh-blank","far fa-meh-rolling-eyes","far fa-minus-square","far fa-money-bill-alt","far fa-moon","far fa-newspaper","far fa-object-group","far fa-object-ungroup","far fa-paper-plane","far fa-pause-circle","far fa-play-circle","far fa-plus-square","far fa-question-circle","far fa-registered","far fa-sad-cry","far fa-sad-tear","far fa-save","far fa-share-square","far fa-smile","far fa-smile-beam","far fa-smile-wink","far fa-snowflake","far fa-square","far fa-star","far fa-star-half","far fa-sticky-note","far fa-stop-circle","far fa-sun","far fa-surprise","far fa-thumbs-down","far fa-thumbs-up","far fa-times-circle","far fa-tired","far fa-trash-alt","far fa-user","far fa-user-circle","far fa-window-close","far fa-window-maximize","far fa-window-minimize","far fa-window-restore","fas fa-ad","fas fa-address-book","fas fa-address-card","fas fa-adjust","fas fa-air-freshener","fas fa-align-center","fas fa-align-justify","fas fa-align-left","fas fa-align-right","fas fa-allergies","fas fa-ambulance","fas fa-american-sign-language-interpreting","fas fa-anchor","fas fa-angle-double-down","fas fa-angle-double-left","fas fa-angle-double-right","fas fa-angle-double-up","fas fa-angle-down","fas fa-angle-left","fas fa-angle-right","fas fa-angle-up","fas fa-angry","fas fa-ankh","fas fa-apple-alt","fas fa-archive","fas fa-archway","fas fa-arrow-alt-circle-down","fas fa-arrow-alt-circle-left","fas fa-arrow-alt-circle-right","fas fa-arrow-alt-circle-up","fas fa-arrow-circle-down","fas fa-arrow-circle-left","fas fa-arrow-circle-right","fas fa-arrow-circle-up","fas fa-arrow-down","fas fa-arrow-left","fas fa-arrow-right","fas fa-arrow-up","fas fa-arrows-alt","fas fa-arrows-alt-h","fas fa-arrows-alt-v","fas fa-assistive-listening-systems","fas fa-asterisk","fas fa-at","fas fa-atlas","fas fa-atom","fas fa-audio-description","fas fa-award","fas fa-baby","fas fa-baby-carriage","fas fa-backspace","fas fa-backward","fas fa-bacon","fas fa-balance-scale","fas fa-balance-scale-left","fas fa-balance-scale-right","fas fa-ban","fas fa-band-aid","fas fa-barcode","fas fa-bars","fas fa-baseball-ball","fas fa-basketball-ball","fas fa-bath","fas fa-battery-empty","fas fa-battery-full","fas fa-battery-half","fas fa-battery-quarter","fas fa-battery-three-quarters","fas fa-bed","fas fa-beer","fas fa-bell","fas fa-bell-slash","fas fa-bezier-curve","fas fa-bible","fas fa-bicycle","fas fa-biking","fas fa-binoculars","fas fa-biohazard","fas fa-birthday-cake","fas fa-blender","fas fa-blender-phone","fas fa-blind","fas fa-blog","fas fa-bold","fas fa-bolt","fas fa-bomb","fas fa-bone","fas fa-bong","fas fa-book","fas fa-book-dead","fas fa-book-medical","fas fa-book-open","fas fa-book-reader","fas fa-bookmark","fas fa-border-all","fas fa-border-none","fas fa-border-style","fas fa-bowling-ball","fas fa-box","fas fa-box-open","fas fa-boxes","fas fa-braille","fas fa-brain","fas fa-bread-slice","fas fa-briefcase","fas fa-briefcase-medical","fas fa-broadcast-tower","fas fa-broom","fas fa-brush","fas fa-bug","fas fa-building","fas fa-bullhorn","fas fa-bullseye","fas fa-burn","fas fa-bus","fas fa-bus-alt","fas fa-business-time","fas fa-calculator","fas fa-calendar","fas fa-calendar-alt","fas fa-calendar-check","fas fa-calendar-day","fas fa-calendar-minus","fas fa-calendar-plus","fas fa-calendar-times","fas fa-calendar-week","fas fa-camera","fas fa-camera-retro","fas fa-campground","fas fa-candy-cane","fas fa-cannabis","fas fa-capsules","fas fa-car","fas fa-car-alt","fas fa-car-battery","fas fa-car-crash","fas fa-car-side","fas fa-caret-down","fas fa-caret-left","fas fa-caret-right","fas fa-caret-square-down","fas fa-caret-square-left","fas fa-caret-square-right","fas fa-caret-square-up","fas fa-caret-up","fas fa-carrot","fas fa-cart-arrow-down","fas fa-cart-plus","fas fa-cash-register","fas fa-cat","fas fa-certificate","fas fa-chair","fas fa-chalkboard","fas fa-chalkboard-teacher","fas fa-charging-station","fas fa-chart-area","fas fa-chart-bar","fas fa-chart-line","fas fa-chart-pie","fas fa-check","fas fa-check-circle","fas fa-check-double","fas fa-check-square","fas fa-cheese","fas fa-chess","fas fa-chess-bishop","fas fa-chess-board","fas fa-chess-king","fas fa-chess-knight","fas fa-chess-pawn","fas fa-chess-queen","fas fa-chess-rook","fas fa-chevron-circle-down","fas fa-chevron-circle-left","fas fa-chevron-circle-right","fas fa-chevron-circle-up","fas fa-chevron-down","fas fa-chevron-left","fas fa-chevron-right","fas fa-chevron-up","fas fa-child","fas fa-church","fas fa-circle","fas fa-circle-notch","fas fa-city","fas fa-clinic-medical","fas fa-clipboard","fas fa-clipboard-check","fas fa-clipboard-list","fas fa-clock","fas fa-clone","fas fa-closed-captioning","fas fa-cloud","fas fa-cloud-download-alt","fas fa-cloud-meatball","fas fa-cloud-moon","fas fa-cloud-moon-rain","fas fa-cloud-rain","fas fa-cloud-showers-heavy","fas fa-cloud-sun","fas fa-cloud-sun-rain","fas fa-cloud-upload-alt","fas fa-cocktail","fas fa-code","fas fa-code-branch","fas fa-coffee","fas fa-cog","fas fa-cogs","fas fa-coins","fas fa-columns","fas fa-comment","fas fa-comment-alt","fas fa-comment-dollar","fas fa-comment-dots","fas fa-comment-medical","fas fa-comment-slash","fas fa-comments","fas fa-comments-dollar","fas fa-compact-disc","fas fa-compass","fas fa-compress","fas fa-compress-arrows-alt","fas fa-concierge-bell","fas fa-cookie","fas fa-cookie-bite","fas fa-copy","fas fa-copyright","fas fa-couch","fas fa-credit-card","fas fa-crop","fas fa-crop-alt","fas fa-cross","fas fa-crosshairs","fas fa-crow","fas fa-crown","fas fa-crutch","fas fa-cube","fas fa-cubes","fas fa-cut","fas fa-database","fas fa-deaf","fas fa-democrat","fas fa-desktop","fas fa-dharmachakra","fas fa-diagnoses","fas fa-dice","fas fa-dice-d20","fas fa-dice-d6","fas fa-dice-five","fas fa-dice-four","fas fa-dice-one","fas fa-dice-six","fas fa-dice-three","fas fa-dice-two","fas fa-digital-tachograph","fas fa-directions","fas fa-divide","fas fa-dizzy","fas fa-dna","fas fa-dog","fas fa-dollar-sign","fas fa-dolly","fas fa-dolly-flatbed","fas fa-donate","fas fa-door-closed","fas fa-door-open","fas fa-dot-circle","fas fa-dove","fas fa-download","fas fa-drafting-compass","fas fa-dragon","fas fa-draw-polygon","fas fa-drum","fas fa-drum-steelpan","fas fa-drumstick-bite","fas fa-dumbbell","fas fa-dumpster","fas fa-dumpster-fire","fas fa-dungeon","fas fa-edit","fas fa-egg","fas fa-eject","fas fa-ellipsis-h","fas fa-ellipsis-v","fas fa-envelope","fas fa-envelope-open","fas fa-envelope-open-text","fas fa-envelope-square","fas fa-equals","fas fa-eraser","fas fa-ethernet","fas fa-euro-sign","fas fa-exchange-alt","fas fa-exclamation","fas fa-exclamation-circle","fas fa-exclamation-triangle","fas fa-expand","fas fa-expand-arrows-alt","fas fa-external-link-alt","fas fa-external-link-square-alt","fas fa-eye","fas fa-eye-dropper","fas fa-eye-slash","fas fa-fan","fas fa-fast-backward","fas fa-fast-forward","fas fa-fax","fas fa-feather","fas fa-feather-alt","fas fa-female","fas fa-fighter-jet","fas fa-file","fas fa-file-alt","fas fa-file-archive","fas fa-file-audio","fas fa-file-code","fas fa-file-contract","fas fa-file-csv","fas fa-file-download","fas fa-file-excel","fas fa-file-export","fas fa-file-image","fas fa-file-import","fas fa-file-invoice","fas fa-file-invoice-dollar","fas fa-file-medical","fas fa-file-medical-alt","fas fa-file-pdf","fas fa-file-powerpoint","fas fa-file-prescription","fas fa-file-signature","fas fa-file-upload","fas fa-file-video","fas fa-file-word","fas fa-fill","fas fa-fill-drip","fas fa-film","fas fa-filter","fas fa-fingerprint","fas fa-fire","fas fa-fire-alt","fas fa-fire-extinguisher","fas fa-first-aid","fas fa-fish","fas fa-fist-raised","fas fa-flag","fas fa-flag-checkered","fas fa-flag-usa","fas fa-flask","fas fa-flushed","fas fa-folder","fas fa-folder-minus","fas fa-folder-open","fas fa-folder-plus","fas fa-font","fas fa-font-awesome-logo-full","fas fa-football-ball","fas fa-forward","fas fa-frog","fas fa-frown","fas fa-frown-open","fas fa-funnel-dollar","fas fa-futbol","fas fa-gamepad","fas fa-gas-pump","fas fa-gavel","fas fa-gem","fas fa-genderless","fas fa-ghost","fas fa-gift","fas fa-gifts","fas fa-glass-cheers","fas fa-glass-martini","fas fa-glass-martini-alt","fas fa-glass-whiskey","fas fa-glasses","fas fa-globe","fas fa-globe-africa","fas fa-globe-americas","fas fa-globe-asia","fas fa-globe-europe","fas fa-golf-ball","fas fa-gopuram","fas fa-graduation-cap","fas fa-greater-than","fas fa-greater-than-equal","fas fa-grimace","fas fa-grin","fas fa-grin-alt","fas fa-grin-beam","fas fa-grin-beam-sweat","fas fa-grin-hearts","fas fa-grin-squint","fas fa-grin-squint-tears","fas fa-grin-stars","fas fa-grin-tears","fas fa-grin-tongue","fas fa-grin-tongue-squint","fas fa-grin-tongue-wink","fas fa-grin-wink","fas fa-grip-horizontal","fas fa-grip-lines","fas fa-grip-lines-vertical","fas fa-grip-vertical","fas fa-guitar","fas fa-h-square","fas fa-hamburger","fas fa-hammer","fas fa-hamsa","fas fa-hand-holding","fas fa-hand-holding-heart","fas fa-hand-holding-usd","fas fa-hand-lizard","fas fa-hand-middle-finger","fas fa-hand-paper","fas fa-hand-peace","fas fa-hand-point-down","fas fa-hand-point-left","fas fa-hand-point-right","fas fa-hand-point-up","fas fa-hand-pointer","fas fa-hand-rock","fas fa-hand-scissors","fas fa-hand-spock","fas fa-hands","fas fa-hands-helping","fas fa-handshake","fas fa-hanukiah","fas fa-hard-hat","fas fa-hashtag","fas fa-hat-wizard","fas fa-haykal","fas fa-hdd","fas fa-heading","fas fa-headphones","fas fa-headphones-alt","fas fa-headset","fas fa-heart","fas fa-heart-broken","fas fa-heartbeat","fas fa-helicopter","fas fa-highlighter","fas fa-hiking","fas fa-hippo","fas fa-history","fas fa-hockey-puck","fas fa-holly-berry","fas fa-home","fas fa-horse","fas fa-horse-head","fas fa-hospital","fas fa-hospital-alt","fas fa-hospital-symbol","fas fa-hot-tub","fas fa-hotdog","fas fa-hotel","fas fa-hourglass","fas fa-hourglass-end","fas fa-hourglass-half","fas fa-hourglass-start","fas fa-house-damage","fas fa-hryvnia","fas fa-i-cursor","fas fa-ice-cream","fas fa-icicles","fas fa-icons","fas fa-id-badge","fas fa-id-card","fas fa-id-card-alt","fas fa-igloo","fas fa-image","fas fa-images","fas fa-inbox","fas fa-indent","fas fa-industry","fas fa-infinity","fas fa-info","fas fa-info-circle","fas fa-italic","fas fa-jedi","fas fa-joint","fas fa-journal-whills","fas fa-kaaba","fas fa-key","fas fa-keyboard","fas fa-khanda","fas fa-kiss","fas fa-kiss-beam","fas fa-kiss-wink-heart","fas fa-kiwi-bird","fas fa-landmark","fas fa-language","fas fa-laptop","fas fa-laptop-code","fas fa-laptop-medical","fas fa-laugh","fas fa-laugh-beam","fas fa-laugh-squint","fas fa-laugh-wink","fas fa-layer-group","fas fa-leaf","fas fa-lemon","fas fa-less-than","fas fa-less-than-equal","fas fa-level-down-alt","fas fa-level-up-alt","fas fa-life-ring","fas fa-lightbulb","fas fa-link","fas fa-lira-sign","fas fa-list","fas fa-list-alt","fas fa-list-ol","fas fa-list-ul","fas fa-location-arrow","fas fa-lock","fas fa-lock-open","fas fa-long-arrow-alt-down","fas fa-long-arrow-alt-left","fas fa-long-arrow-alt-right","fas fa-long-arrow-alt-up","fas fa-low-vision","fas fa-luggage-cart","fas fa-magic","fas fa-magnet","fas fa-mail-bulk","fas fa-male","fas fa-map","fas fa-map-marked","fas fa-map-marked-alt","fas fa-map-marker","fas fa-map-marker-alt","fas fa-map-pin","fas fa-map-signs","fas fa-marker","fas fa-mars","fas fa-mars-double","fas fa-mars-stroke","fas fa-mars-stroke-h","fas fa-mars-stroke-v","fas fa-mask","fas fa-medal","fas fa-medkit","fas fa-meh","fas fa-meh-blank","fas fa-meh-rolling-eyes","fas fa-memory","fas fa-menorah","fas fa-mercury","fas fa-meteor","fas fa-microchip","fas fa-microphone","fas fa-microphone-alt","fas fa-microphone-alt-slash","fas fa-microphone-slash","fas fa-microscope","fas fa-minus","fas fa-minus-circle","fas fa-minus-square","fas fa-mitten","fas fa-mobile","fas fa-mobile-alt","fas fa-money-bill","fas fa-money-bill-alt","fas fa-money-bill-wave","fas fa-money-bill-wave-alt","fas fa-money-check","fas fa-money-check-alt","fas fa-monument","fas fa-moon","fas fa-mortar-pestle","fas fa-mosque","fas fa-motorcycle","fas fa-mountain","fas fa-mouse-pointer","fas fa-mug-hot","fas fa-music","fas fa-network-wired","fas fa-neuter","fas fa-newspaper","fas fa-not-equal","fas fa-notes-medical","fas fa-object-group","fas fa-object-ungroup","fas fa-oil-can","fas fa-om","fas fa-otter","fas fa-outdent","fas fa-pager","fas fa-paint-brush","fas fa-paint-roller","fas fa-palette","fas fa-pallet","fas fa-paper-plane","fas fa-paperclip","fas fa-parachute-box","fas fa-paragraph","fas fa-parking","fas fa-passport","fas fa-pastafarianism","fas fa-paste","fas fa-pause","fas fa-pause-circle","fas fa-paw","fas fa-peace","fas fa-pen","fas fa-pen-alt","fas fa-pen-fancy","fas fa-pen-nib","fas fa-pen-square","fas fa-pencil-alt","fas fa-pencil-ruler","fas fa-people-carry","fas fa-pepper-hot","fas fa-percent","fas fa-percentage","fas fa-person-booth","fas fa-phone","fas fa-phone-alt","fas fa-phone-slash","fas fa-phone-square","fas fa-phone-square-alt","fas fa-phone-volume","fas fa-photo-video","fas fa-piggy-bank","fas fa-pills","fas fa-pizza-slice","fas fa-place-of-worship","fas fa-plane","fas fa-plane-arrival","fas fa-plane-departure","fas fa-play","fas fa-play-circle","fas fa-plug","fas fa-plus","fas fa-plus-circle","fas fa-plus-square","fas fa-podcast","fas fa-poll","fas fa-poll-h","fas fa-poo","fas fa-poo-storm","fas fa-poop","fas fa-portrait","fas fa-pound-sign","fas fa-power-off","fas fa-pray","fas fa-praying-hands","fas fa-prescription","fas fa-prescription-bottle","fas fa-prescription-bottle-alt","fas fa-print","fas fa-procedures","fas fa-project-diagram","fas fa-puzzle-piece","fas fa-qrcode","fas fa-question","fas fa-question-circle","fas fa-quidditch","fas fa-quote-left","fas fa-quote-right","fas fa-quran","fas fa-radiation","fas fa-radiation-alt","fas fa-rainbow","fas fa-random","fas fa-receipt","fas fa-recycle","fas fa-redo","fas fa-redo-alt","fas fa-registered","fas fa-remove-format","fas fa-reply","fas fa-reply-all","fas fa-republican","fas fa-restroom","fas fa-retweet","fas fa-ribbon","fas fa-ring","fas fa-road","fas fa-robot","fas fa-rocket","fas fa-route","fas fa-rss","fas fa-rss-square","fas fa-ruble-sign","fas fa-ruler","fas fa-ruler-combined","fas fa-ruler-horizontal","fas fa-ruler-vertical","fas fa-running","fas fa-rupee-sign","fas fa-sad-cry","fas fa-sad-tear","fas fa-satellite","fas fa-satellite-dish","fas fa-save","fas fa-school","fas fa-screwdriver","fas fa-scroll","fas fa-sd-card","fas fa-search","fas fa-search-dollar","fas fa-search-location","fas fa-search-minus","fas fa-search-plus","fas fa-seedling","fas fa-server","fas fa-shapes","fas fa-share","fas fa-share-alt","fas fa-share-alt-square","fas fa-share-square","fas fa-shekel-sign","fas fa-shield-alt","fas fa-ship","fas fa-shipping-fast","fas fa-shoe-prints","fas fa-shopping-bag","fas fa-shopping-basket","fas fa-shopping-cart","fas fa-shower","fas fa-shuttle-van","fas fa-sign","fas fa-sign-in-alt","fas fa-sign-language","fas fa-sign-out-alt","fas fa-signal","fas fa-signature","fas fa-sim-card","fas fa-sitemap","fas fa-skating","fas fa-skiing","fas fa-skiing-nordic","fas fa-skull","fas fa-skull-crossbones","fas fa-slash","fas fa-sleigh","fas fa-sliders-h","fas fa-smile","fas fa-smile-beam","fas fa-smile-wink","fas fa-smog","fas fa-smoking","fas fa-smoking-ban","fas fa-sms","fas fa-snowboarding","fas fa-snowflake","fas fa-snowman","fas fa-snowplow","fas fa-socks","fas fa-solar-panel","fas fa-sort","fas fa-sort-alpha-down","fas fa-sort-alpha-down-alt","fas fa-sort-alpha-up","fas fa-sort-alpha-up-alt","fas fa-sort-amount-down","fas fa-sort-amount-down-alt","fas fa-sort-amount-up","fas fa-sort-amount-up-alt","fas fa-sort-down","fas fa-sort-numeric-down","fas fa-sort-numeric-down-alt","fas fa-sort-numeric-up","fas fa-sort-numeric-up-alt","fas fa-sort-up","fas fa-spa","fas fa-space-shuttle","fas fa-spell-check","fas fa-spider","fas fa-spinner","fas fa-splotch","fas fa-spray-can","fas fa-square","fas fa-square-full","fas fa-square-root-alt","fas fa-stamp","fas fa-star","fas fa-star-and-crescent","fas fa-star-half","fas fa-star-half-alt","fas fa-star-of-david","fas fa-star-of-life","fas fa-step-backward","fas fa-step-forward","fas fa-stethoscope","fas fa-sticky-note","fas fa-stop","fas fa-stop-circle","fas fa-stopwatch","fas fa-store","fas fa-store-alt","fas fa-stream","fas fa-street-view","fas fa-strikethrough","fas fa-stroopwafel","fas fa-subscript","fas fa-subway","fas fa-suitcase","fas fa-suitcase-rolling","fas fa-sun","fas fa-superscript","fas fa-surprise","fas fa-swatchbook","fas fa-swimmer","fas fa-swimming-pool","fas fa-synagogue","fas fa-sync","fas fa-sync-alt","fas fa-syringe","fas fa-table","fas fa-table-tennis","fas fa-tablet","fas fa-tablet-alt","fas fa-tablets","fas fa-tachometer-alt","fas fa-tag","fas fa-tags","fas fa-tape","fas fa-tasks","fas fa-taxi","fas fa-teeth","fas fa-teeth-open","fas fa-temperature-high","fas fa-temperature-low","fas fa-tenge","fas fa-terminal","fas fa-text-height","fas fa-text-width","fas fa-th","fas fa-th-large","fas fa-th-list","fas fa-theater-masks","fas fa-thermometer","fas fa-thermometer-empty","fas fa-thermometer-full","fas fa-thermometer-half","fas fa-thermometer-quarter","fas fa-thermometer-three-quarters","fas fa-thumbs-down","fas fa-thumbs-up","fas fa-thumbtack","fas fa-ticket-alt","fas fa-times","fas fa-times-circle","fas fa-tint","fas fa-tint-slash","fas fa-tired","fas fa-toggle-off","fas fa-toggle-on","fas fa-toilet","fas fa-toilet-paper","fas fa-toolbox","fas fa-tools","fas fa-tooth","fas fa-torah","fas fa-torii-gate","fas fa-tractor","fas fa-trademark","fas fa-traffic-light","fas fa-train","fas fa-tram","fas fa-transgender","fas fa-transgender-alt","fas fa-trash","fas fa-trash-alt","fas fa-trash-restore","fas fa-trash-restore-alt","fas fa-tree","fas fa-trophy","fas fa-truck","fas fa-truck-loading","fas fa-truck-monster","fas fa-truck-moving","fas fa-truck-pickup","fas fa-tshirt","fas fa-tty","fas fa-tv","fas fa-umbrella","fas fa-umbrella-beach","fas fa-underline","fas fa-undo","fas fa-undo-alt","fas fa-universal-access","fas fa-university","fas fa-unlink","fas fa-unlock","fas fa-unlock-alt","fas fa-upload","fas fa-user","fas fa-user-alt","fas fa-user-alt-slash","fas fa-user-astronaut","fas fa-user-check","fas fa-user-circle","fas fa-user-clock","fas fa-user-cog","fas fa-user-edit","fas fa-user-friends","fas fa-user-graduate","fas fa-user-injured","fas fa-user-lock","fas fa-user-md","fas fa-user-minus","fas fa-user-ninja","fas fa-user-nurse","fas fa-user-plus","fas fa-user-secret","fas fa-user-shield","fas fa-user-slash","fas fa-user-tag","fas fa-user-tie","fas fa-user-times","fas fa-users","fas fa-users-cog","fas fa-utensil-spoon","fas fa-utensils","fas fa-vector-square","fas fa-venus","fas fa-venus-double","fas fa-venus-mars","fas fa-vial","fas fa-vials","fas fa-video","fas fa-video-slash","fas fa-vihara","fas fa-voicemail","fas fa-volleyball-ball","fas fa-volume-down","fas fa-volume-mute","fas fa-volume-off","fas fa-volume-up","fas fa-vote-yea","fas fa-vr-cardboard","fas fa-walking","fas fa-wallet","fas fa-warehouse","fas fa-water","fas fa-wave-square","fas fa-weight","fas fa-weight-hanging","fas fa-wheelchair","fas fa-wifi","fas fa-wind","fas fa-window-close","fas fa-window-maximize","fas fa-window-minimize","fas fa-window-restore","fas fa-wine-bottle","fas fa-wine-glass","fas fa-wine-glass-alt","fas fa-won-sign","fas fa-wrench","fas fa-x-ray","fas fa-yen-sign","fas fa-yin-yang","fab fa-500px","fab fa-accessible-icon","fab fa-accusoft","fab fa-acquisitions-incorporated","fab fa-adn","fab fa-adobe","fab fa-adversal","fab fa-affiliatetheme","fab fa-airbnb","fab fa-algolia","fab fa-alipay","fab fa-amazon","fab fa-amazon-pay","fab fa-amilia","fab fa-android","fab fa-angellist","fab fa-angrycreative","fab fa-angular","fab fa-app-store","fab fa-app-store-ios","fab fa-apper","fab fa-apple","fab fa-apple-pay","fab fa-artstation","fab fa-asymmetrik","fab fa-atlassian","fab fa-audible","fab fa-autoprefixer","fab fa-avianex","fab fa-aviato","fab fa-aws","fab fa-bandcamp","fab fa-battle-net","fab fa-behance","fab fa-behance-square","fab fa-bimobject","fab fa-bitbucket","fab fa-bitcoin","fab fa-bity","fab fa-black-tie","fab fa-blackberry","fab fa-blogger","fab fa-blogger-b","fab fa-bluetooth","fab fa-bluetooth-b","fab fa-bootstrap","fab fa-btc","fab fa-buffer","fab fa-buromobelexperte","fab fa-buysellads","fab fa-canadian-maple-leaf","fab fa-cc-amazon-pay","fab fa-cc-amex","fab fa-cc-apple-pay","fab fa-cc-diners-club","fab fa-cc-discover","fab fa-cc-jcb","fab fa-cc-mastercard","fab fa-cc-paypal","fab fa-cc-stripe","fab fa-cc-visa","fab fa-centercode","fab fa-centos","fab fa-chrome","fab fa-chromecast","fab fa-cloudscale","fab fa-cloudsmith","fab fa-cloudversify","fab fa-codepen","fab fa-codiepie","fab fa-confluence","fab fa-connectdevelop","fab fa-contao","fab fa-cotton-bureau","fab fa-cpanel","fab fa-creative-commons","fab fa-creative-commons-by","fab fa-creative-commons-nc","fab fa-creative-commons-nc-eu","fab fa-creative-commons-nc-jp","fab fa-creative-commons-nd","fab fa-creative-commons-pd","fab fa-creative-commons-pd-alt","fab fa-creative-commons-remix","fab fa-creative-commons-sa","fab fa-creative-commons-sampling","fab fa-creative-commons-sampling-plus","fab fa-creative-commons-share","fab fa-creative-commons-zero","fab fa-critical-role","fab fa-css3","fab fa-css3-alt","fab fa-cuttlefish","fab fa-d-and-d","fab fa-d-and-d-beyond","fab fa-dashcube","fab fa-delicious","fab fa-deploydog","fab fa-deskpro","fab fa-dev","fab fa-deviantart","fab fa-dhl","fab fa-diaspora","fab fa-digg","fab fa-digital-ocean","fab fa-discord","fab fa-discourse","fab fa-dochub","fab fa-docker","fab fa-draft2digital","fab fa-dribbble","fab fa-dribbble-square","fab fa-dropbox","fab fa-drupal","fab fa-dyalog","fab fa-earlybirds","fab fa-ebay","fab fa-edge","fab fa-elementor","fab fa-ello","fab fa-ember","fab fa-empire","fab fa-envira","fab fa-erlang","fab fa-ethereum","fab fa-etsy","fab fa-evernote","fab fa-expeditedssl","fab fa-facebook","fab fa-facebook-f","fab fa-facebook-messenger","fab fa-facebook-square","fab fa-fantasy-flight-games","fab fa-fedex","fab fa-fedora","fab fa-figma","fab fa-firefox","fab fa-first-order","fab fa-first-order-alt","fab fa-firstdraft","fab fa-flickr","fab fa-flipboard","fab fa-fly","fab fa-font-awesome","fab fa-font-awesome-alt","fab fa-font-awesome-flag","fab fa-font-awesome-logo-full","fab fa-fonticons","fab fa-fonticons-fi","fab fa-fort-awesome","fab fa-fort-awesome-alt","fab fa-forumbee","fab fa-foursquare","fab fa-free-code-camp","fab fa-freebsd","fab fa-fulcrum","fab fa-galactic-republic","fab fa-galactic-senate","fab fa-get-pocket","fab fa-gg","fab fa-gg-circle","fab fa-git","fab fa-git-alt","fab fa-git-square","fab fa-github","fab fa-github-alt","fab fa-github-square","fab fa-gitkraken","fab fa-gitlab","fab fa-gitter","fab fa-glide","fab fa-glide-g","fab fa-gofore","fab fa-goodreads","fab fa-goodreads-g","fab fa-google","fab fa-google-drive","fab fa-google-play","fab fa-google-plus","fab fa-google-plus-g","fab fa-google-plus-square","fab fa-google-wallet","fab fa-gratipay","fab fa-grav","fab fa-gripfire","fab fa-grunt","fab fa-gulp","fab fa-hacker-news","fab fa-hacker-news-square","fab fa-hackerrank","fab fa-hips","fab fa-hire-a-helper","fab fa-hooli","fab fa-hornbill","fab fa-hotjar","fab fa-houzz","fab fa-html5","fab fa-hubspot","fab fa-imdb","fab fa-instagram","fab fa-intercom","fab fa-internet-explorer","fab fa-invision","fab fa-ioxhost","fab fa-itch-io","fab fa-itunes","fab fa-itunes-note","fab fa-java","fab fa-jedi-order","fab fa-jenkins","fab fa-jira","fab fa-joget","fab fa-joomla","fab fa-js","fab fa-js-square","fab fa-jsfiddle","fab fa-kaggle","fab fa-keybase","fab fa-keycdn","fab fa-kickstarter","fab fa-kickstarter-k","fab fa-korvue","fab fa-laravel","fab fa-lastfm","fab fa-lastfm-square","fab fa-leanpub","fab fa-less","fab fa-line","fab fa-linkedin","fab fa-linkedin-in","fab fa-linode","fab fa-linux","fab fa-lyft","fab fa-magento","fab fa-mailchimp","fab fa-mandalorian","fab fa-markdown","fab fa-mastodon","fab fa-maxcdn","fab fa-medapps","fab fa-medium","fab fa-medium-m","fab fa-medrt","fab fa-meetup","fab fa-megaport","fab fa-mendeley","fab fa-microsoft","fab fa-mix","fab fa-mixcloud","fab fa-mizuni","fab fa-modx","fab fa-monero","fab fa-napster","fab fa-neos","fab fa-nimblr","fab fa-node","fab fa-node-js","fab fa-npm","fab fa-ns8","fab fa-nutritionix","fab fa-odnoklassniki","fab fa-odnoklassniki-square","fab fa-old-republic","fab fa-opencart","fab fa-openid","fab fa-opera","fab fa-optin-monster","fab fa-osi","fab fa-page4","fab fa-pagelines","fab fa-palfed","fab fa-patreon","fab fa-paypal","fab fa-penny-arcade","fab fa-periscope","fab fa-phabricator","fab fa-phoenix-framework","fab fa-phoenix-squadron","fab fa-php","fab fa-pied-piper","fab fa-pied-piper-alt","fab fa-pied-piper-hat","fab fa-pied-piper-pp","fab fa-pinterest","fab fa-pinterest-p","fab fa-pinterest-square","fab fa-playstation","fab fa-product-hunt","fab fa-pushed","fab fa-python","fab fa-qq","fab fa-quinscape","fab fa-quora","fab fa-r-project","fab fa-raspberry-pi","fab fa-ravelry","fab fa-react","fab fa-reacteurope","fab fa-readme","fab fa-rebel","fab fa-red-river","fab fa-reddit","fab fa-reddit-alien","fab fa-reddit-square","fab fa-redhat","fab fa-renren","fab fa-replyd","fab fa-researchgate","fab fa-resolving","fab fa-rev","fab fa-rocketchat","fab fa-rockrms","fab fa-safari","fab fa-salesforce","fab fa-sass","fab fa-schlix","fab fa-scribd","fab fa-searchengin","fab fa-sellcast","fab fa-sellsy","fab fa-servicestack","fab fa-shirtsinbulk","fab fa-shopware","fab fa-simplybuilt","fab fa-sistrix","fab fa-sith","fab fa-sketch","fab fa-skyatlas","fab fa-skype","fab fa-slack","fab fa-slack-hash","fab fa-slideshare","fab fa-snapchat","fab fa-snapchat-ghost","fab fa-snapchat-square","fab fa-soundcloud","fab fa-sourcetree","fab fa-speakap","fab fa-speaker-deck","fab fa-spotify","fab fa-squarespace","fab fa-stack-exchange","fab fa-stack-overflow","fab fa-stackpath","fab fa-staylinked","fab fa-steam","fab fa-steam-square","fab fa-steam-symbol","fab fa-sticker-mule","fab fa-strava","fab fa-stripe","fab fa-stripe-s","fab fa-studiovinari","fab fa-stumbleupon","fab fa-stumbleupon-circle","fab fa-superpowers","fab fa-supple","fab fa-suse","fab fa-symfony","fab fa-teamspeak","fab fa-telegram","fab fa-telegram-plane","fab fa-tencent-weibo","fab fa-the-red-yeti","fab fa-themeco","fab fa-themeisle","fab fa-think-peaks","fab fa-trade-federation","fab fa-trello","fab fa-tripadvisor","fab fa-tumblr","fab fa-tumblr-square","fab fa-twitch","fab fa-twitter","fab fa-twitter-square","fab fa-typo3","fab fa-uber","fab fa-ubuntu","fab fa-uikit","fab fa-uniregistry","fab fa-untappd","fab fa-ups","fab fa-usb","fab fa-usps","fab fa-ussunnah","fab fa-vaadin","fab fa-viacoin","fab fa-viadeo","fab fa-viadeo-square","fab fa-viber","fab fa-vimeo","fab fa-vimeo-square","fab fa-vimeo-v","fab fa-vine","fab fa-vk","fab fa-vnv","fab fa-vuejs","fab fa-waze","fab fa-weebly","fab fa-weibo","fab fa-weixin","fab fa-whatsapp","fab fa-whatsapp-square","fab fa-whmcs","fab fa-wikipedia-w","fab fa-windows","fab fa-wix","fab fa-wizards-of-the-coast","fab fa-wolf-pack-battalion","fab fa-wordpress","fab fa-wordpress-simple","fab fa-wpbeginner","fab fa-wpexplorer","fab fa-wpforms","fab fa-wpressr","fab fa-xbox","fab fa-xing","fab fa-xing-square","fab fa-y-combinator","fab fa-yahoo","fab fa-yammer","fab fa-yandex","fab fa-yandex-international","fab fa-yarn","fab fa-yelp","fab fa-yoast","fab fa-youtube","fab fa-youtube-square","fab fa-zhihu"]});
;sugar.define("sugar:widgets/icon-selector/icon-selector.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=e("sugar:node_modules/tslib/tslib.js"),l=e("sugar:utils/i18n.ts"),n=e("sugar:node_modules/react/index.js"),o=e("sugar:node_modules/amis/lib/index.js"),s=e("sugar:node_modules/classnames/index.js"),i=e("sugar:utils/icon-list.ts"),c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={dialogOpen:!1,search:""},t}return a.__extends(t,e),t.prototype.componentWillMount=function(){this.toggleDialog=this.toggleDialog.bind(this),this.changeSearch=this.changeSearch.bind(this),this.changeVal=this.changeVal.bind(this)},t.prototype.toggleDialog=function(){this.setState({dialogOpen:!this.state.dialogOpen})},t.prototype.changeSearch=function(e){this.setState({search:e})},t.prototype.changeVal=function(e,t){this.props.onChange(t?"":e)},t.prototype.render=function(){var e=this,t=this.props,a=t.value,c=t.label,r=t.containerClassName,u=t.disableDialog,h=t.height,d=t.modalHeight,g=this.state,m=g.dialogOpen,p=g.search,f=i.icons;if(p)try{f=i.icons.filter(function(e){return e.match(p)})}catch(b){f=i.icons}var v=h?h+"px":"300px",y=d?d+"px":"700px",E=n.createElement("div",{className:"icon-selector "+(r||"")},n.createElement("div",{className:"icon-selector__header"},n.createElement("label",null,c),n.createElement("div",{className:"pull-right tool-btns"},n.createElement("input",{type:"text",className:"form-control",placeholder:"",value:p,onChange:function(t){return e.changeSearch(t.target.value)}}),u?null:n.createElement(o.TooltipWrapper,{tooltip:l.default(m?"缩小":"最大化"),placement:"bottom"},n.createElement("i",{className:"fa "+(m?"fa-compress":"fa-expand"),onClick:this.toggleDialog})))),n.createElement("div",{className:"icon-selector__body",style:{height:m?y:v}},f.map(function(t,l){var o=""+t==a;return n.createElement("div",{key:l,className:s("icon-selector__body__icon-item",{active:o}),onClick:function(){return e.changeVal(""+t,o)}},n.createElement("i",{className:""+t}))})));return m?n.createElement(o.Modal,{show:!0,backdrop:"static",contentClassName:"big-modal"},n.createElement(o.Modal.Header,{showCloseButton:!0,onClose:this.toggleDialog},n.createElement(o.Modal.Title,null,c)),n.createElement(o.Modal.Body,null,E),n.createElement(o.Modal.Footer,null,n.createElement(o.Button,{level:"primary",onClick:this.toggleDialog},l.default("确定")))):E},t.displayName="IconSelector",t}(n.Component);t.default=c});
;sugar.define("sugar:widgets/charts/icon/icon-ctrl.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dataBindCtrl=void 0;var a=e("sugar:node_modules/tslib/tslib.js"),l=e("sugar:utils/i18n.ts"),n=e("sugar:node_modules/react/index.js"),i=e("sugar:widgets/icon-selector/icon-selector.tsx"),o=e("sugar:widgets/amis-inline-switch.tsx");t.dataBindCtrl=function(){var e=[{name:"config.iconType",label:l.default("图标类型"),children:function(e){var t=e.onChange,o=e.value;return n.createElement(i.default,a.__assign({},{onChange:t,value:o},{containerClassName:"form-group form-item",label:l.default("请选择图标")}))}},{type:"number",label:l.default("图标大小"),name:"config.fontSize",step:1,min:10},{type:"color",name:"config.color",format:"rgba",label:l.default("图标颜色")},{type:"text",name:"config.tip",label:l.default("图标说明（鼠标悬浮时展示）")},{type:"select",name:"config.tipPlacement",label:l.default("说明位置"),placeholder:l.default("请选择"),options:[{label:l.default("顶部"),value:"top"},{label:l.default("底部"),value:"bottom"},{label:l.default("左侧"),value:"left"},{label:l.default("右侧"),value:"right"}]},{type:"text",name:"config.url",label:l.default("图标超链接")},o.amisInlineSwitch("config.targetDialog",l.default("超链接在本页面弹框中打开")),o.amisInlineSwitch("config.targetSelf",l.default("超链接在本页面打开"),"data.config.targetDialog")];return e}});
;sugar.define("sugar:widgets/charts/icon/icon.tsx",function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=t("sugar:node_modules/tslib/tslib.js"),a=t("sugar:utils/i18n.ts"),n=t("sugar:node_modules/react/index.js"),r=t("sugar:node_modules/react-mixin/index.js"),s=t("sugar:widgets/charts/chart-manager.tsx"),o=t("sugar:widgets/charts/_mixin/common.tsx"),c=t("sugar:stores/index.ts"),l=t("sugar:widgets/charts/icon/icon-ctrl.tsx"),d=t("sugar:node_modules/xss/lib/index.js"),u=t("sugar:node_modules/amis/lib/index.js"),h=t("sugar:utils/xssOption.ts"),g=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i.__extends(e,t),e.prototype.componentWillMount=function(){this.getContainer=this.getContainer.bind(this)},e.prototype.getContainer=function(t){t&&(this.container=t)},e.prototype.render=function(){var t,e=this,i=this.auth(this.props);if(i!==!0)return i;var a=this.props,r=a.chart.config,s=a.chart,o=a.theme,c=[],l="";o.config&&(c=(null===(t=o.config.chartTheme)||void 0===t?void 0:t.color)||[],l=o.config.titleColor||c[0]),l||(l=s.isDashChart?"#fff":"#000");var g={color:r.color||l,fontSize:r.fontSize},p=n.createElement("i",{className:""+r.iconType});if(r.url){var f=r.url;/^http/i.test(f)||/^\//.test(f)||(f="http://"+f),p=r.targetDialog?n.createElement("a",{onClick:function(){return e.props.assist.openIframeDialog(f)}},p):n.createElement("a",{target:r.targetSelf?"_self":"_blank",href:f},p)}return r.tip&&(p=n.createElement(u.TooltipWrapper,{tooltip:d(r.tip,h.xssOption),placement:r.tipPlacement||"bottom"},p)),n.createElement("div",{className:"icon-chart-container",style:g,ref:this.getContainer},p)},e.displayName="IconChart",e=i.__decorate([c.inject(function(t){return{assist:t.assist}}),c.observer,r.decorate(o.default)],e)}(n.Component);e.default=g,s.register({kind:"material",type:"icon",name:a.default("小图标"),iconClassName:"chart-icon",component:g,canEmptyData:!0,dataBindTabTitle:a.default("图标设置"),loadDataPremiseField:"never",initialState:{hideTitle:!0,config:{iconType:"fa fa-flag-checkered",fontSize:30}},initialDashboardState:{height:80,width:80},dataBindCtrl:l.dataBindCtrl,dashboardOnly:!0})});
;sugar.define("sugar:widgets/charts/shape/shape-ctrl.tsx",function(e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.dataBindCtrl=void 0;var n=e("sugar:utils/i18n.ts"),i=e("sugar:utils/img-source-map.ts"),l=e("sugar:widgets/amis-inline-switch.tsx"),t=[];for(var r in i.pics)t.push({label:r,value:i.pics[r].url,image:i.pics[r].url});a.dataBindCtrl=function(){var e=[{type:"range",name:"config.rotateDeg",label:n.default("旋转角度"),min:0,max:360,step:1},{type:"divider"},{type:"range",name:"config.opacity",max:1,min:0,step:.1,label:n.default("透明度")},{type:"range",name:"config.lineWidth",max:100,min:0,step:1,hiddenOn:"config.shapeType === 'arrow'",label:n.default("边框宽度")},{type:"color",name:"config.lineColor",format:"rgba",hiddenOn:"config.shapeType === 'arrow'",label:n.default("边框颜色")},{type:"text",name:"config.lineDasharray",visibleOn:"config.shapeType==='line'",clearable:!0,placeholder:n.default("例如：10或10 5"),label:n.default("自定义虚线")},l.amisInlineSwitch("config.lineNoPadding",n.default("清空线条顶部和左右边距"),"config.shapeType !== 'line'"),{type:"color",name:"config.backgroundColor",format:"rgba",hiddenOn:"config.shapeType === 'line' || config.useGradient",label:n.default("填充颜色")},l.amisInlineSwitch("config.useGradient",n.default("使用渐变色"),"config.shapeType != 'square'"),{type:"color",name:"config.gradientBackgroundStart",value:"rgb(74, 0, 224, 1)",format:"rgba",visibleOn:"config.useGradient",label:n.default("渐变色起始颜色")},{type:"color",name:"config.gradientBackgroundEnd",format:"rgba",value:"rgba(142, 45, 226, 1)",visibleOn:"config.useGradient",label:n.default("渐变色结束颜色")},{type:"select",name:"config.gradientAngle",value:"180deg",visibleOn:"config.useGradient",label:n.default("渐变方向"),options:[{label:n.default("垂直↓"),value:"180deg"},{label:n.default("水平→"),value:"90deg"},{label:n.default("右下↘"),value:"-45deg"},{label:n.default("右上↗"),value:"45deg"}]},{type:"range",name:"config.insetShadowWidth",max:200,min:0,step:1,value:0,hiddenOn:"config.shapeType !== 'square'",label:n.default("内发光宽度")},{type:"color",name:"config.insetShadowColor",value:"rgb(255, 255, 255, 1)",format:"rgba",hiddenOn:"config.shapeType !== 'square'",label:n.default("内发光颜色")},{type:"range",name:"config.outsetShadowWidth",max:200,min:0,step:1,value:0,hiddenOn:"config.shapeType !== 'square'",label:n.default("外发光宽度")},{type:"color",name:"config.outsetShadowColor",value:"rgb(255, 255, 255, 1)",format:"rgba",hiddenOn:"config.shapeType !== 'square'",label:n.default("外发光颜色")},{type:"range",name:"config.borderRadius1",max:500,min:0,step:1,hiddenOn:"config.shapeType !== 'square'",label:n.default("左上圆角")},{type:"range",name:"config.borderRadius2",max:500,min:0,step:1,hiddenOn:"config.shapeType !== 'square'",label:n.default("右上圆角")},{type:"range",name:"config.borderRadius4",max:500,min:0,step:1,hiddenOn:"config.shapeType !== 'square'",label:n.default("左下圆角")},{type:"range",name:"config.borderRadius3",max:500,min:0,step:1,hiddenOn:"config.shapeType !== 'square'",label:n.default("右下圆角")}];return e}});
;sugar.define("sugar:widgets/charts/shape/shape.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=e("sugar:node_modules/tslib/tslib.js"),r=e("sugar:utils/i18n.ts"),a=e("sugar:node_modules/react/index.js"),n=e("sugar:node_modules/react-mixin/index.js"),o=e("sugar:widgets/charts/chart-manager.tsx"),s=e("sugar:widgets/charts/_mixin/common.tsx"),h=e("sugar:node_modules/lodash/debounce.js"),d=e("sugar:stores/index.ts"),l=e("sugar:widgets/charts/shape/shape-ctrl.tsx"),g=e("sugar:utils/resize-sensor.ts"),c=e("sugar:utils/common-helper.ts"),p=e("sugar:widgets/charts/_hoc/chart-zoom/index.tsx"),u=function(e){function t(t){var i=e.call(this,t)||this;return i.getParent=i.getParent.bind(i),i.generateStyle=i.generateStyle.bind(i),i.delaySetStyle=i.delaySetStyle.bind(i),i.getShape=i.getShape.bind(i),i.getCurrentWidthAndHeight=i.getCurrentWidthAndHeight.bind(i),i}i.__extends(t,e),t.prototype.getParent=function(e){e&&(this.dom=e,this.parent=e.parentNode,setTimeout(this.delaySetStyle,200),this._initResizeSensor())},t.prototype.delaySetStyle=function(){if(this.dom){var e=this.generateStyle();this.dom.style.width=e.width,this.dom.style.height=e.height,this.dom.style.marginLeft=e.marginLeft+"px",this.dom.style.marginTop=e.marginTop+"px"}},t.prototype.generateStyle=function(){var e=this.props.chart,t=e.config,i=this.getCurrentWidthAndHeight(!0),r=i.width,a=i.height;return{width:r+"px",height:a+"px",transform:"rotate("+t.rotateDeg+"deg)",opacity:t.opacity,marginLeft:-r/2,marginTop:-a/2}},t.prototype.getCurrentWidthAndHeight=function(e){void 0===e&&(e=!1);var t=this.props.chart,i=t.config,r=!1;if(e){var a=isNaN(i.rotateDeg)||i.rotateDeg<0?0:parseInt(i.rotateDeg,10)%360;(a>45&&135>a||a>225&&315>a)&&(r=!0)}var n,o=t.width,s=t.height;if(this.parent&&!t.isDashChart){var h=this.parent.getBoundingClientRect();o=h.right-h.left,n=c.getParentDomByClassName(this.parent,"chart-item")}else this.parent&&t.isDashChart&&(n=c.getParentDomByClassName(this.parent,"chart-item__content"));var d;return n&&(d=Number(g.getComputedStyle(n,"border-width").replace("px",""))),d&&!isNaN(d)&&(s-=2*d),{width:r?s:o,height:r?o:s}},t.prototype.componentWillMount=function(){},t.prototype.componentWillUnmount=function(){this.unWatchResize&&this.unWatchResize()},t.prototype._initResizeSensor=function(){this.unWatchResize&&this.unWatchResize();var e=this.parent;if(e){var t=e;if("normal"===this.props.mode){var i=document.getElementById("content");t=i?i:document.body}this.unWatchResize=g.resizeSensor(t,h(this.delaySetStyle,50))}},t.prototype.getShape=function(){var e,t,i=this.props,r=i.chart,n=i.theme,o=r.config.shapeType||"circle",s=(null===(e=n.config.chartTheme)||void 0===e?void 0:e.color)||[],h=r.config.backgroundColor,d=r.config.lineColor||s[0],l=r.config.lineWidth||0,g=(r.config.borderRadius1||0)+"px",c=(r.config.borderRadius2||0)+"px",p=(r.config.borderRadius3||0)+"px",u=(r.config.borderRadius4||0)+"px";"square"===o&&r.config.useGradient&&(h="linear-gradient("+r.config.gradientAngle+", "+r.config.gradientBackgroundStart+" 0%, "+r.config.gradientBackgroundEnd+" 100%)");var m=[];r.config.insetShadowWidth&&m.push("inset 0 0 "+r.config.insetShadowWidth+"px "+r.config.insetShadowColor),r.config.outsetShadowWidth&&m.push("0 0 "+r.config.outsetShadowWidth+"px "+r.config.outsetShadowColor);var f=m.join(",");switch(o){case"circle":return a.createElement("svg",{version:"1.0",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 300 300",style:{width:"100%",height:"100%"}},a.createElement("circle",{cx:"50%",cy:"50%",r:"40%",stroke:d,strokeWidth:l,fill:h}));case"ellipse":return t=this.getCurrentWidthAndHeight(),a.createElement("svg",{version:"1.0",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 "+t.width+" "+t.height,style:{width:"100%",height:"100%"}},a.createElement("ellipse",{cx:.5*t.width,cy:.5*t.height,rx:.4*t.width,ry:.4*t.height,stroke:d,strokeWidth:l,fill:h}));case"line":t=this.getCurrentWidthAndHeight(!0);var w=!!r.config.lineNoPadding;return a.createElement("svg",{version:"1.0",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 "+t.width+" "+t.height,style:{width:"100%",height:"100%"}},a.createElement("line",{x1:t.width*(w?0:.1),y1:t.height*(w?0:.5)+l/2,x2:t.width*(w?1:.9),y2:t.height*(w?0:.5)+l/2,stroke:d,strokeWidth:l,strokeDasharray:r.config.lineDasharray||""}));case"square":return t=this.getCurrentWidthAndHeight(),a.createElement("div",{style:{width:.9*t.width,height:.9*t.height,background:h,boxShadow:f,marginLeft:.9*-t.width/2,marginTop:.9*-t.height/2,position:"absolute",top:"50%",left:"50%",borderWidth:l,borderColor:d,borderStyle:"solid",borderRadius:g+" "+c+" "+p+" "+u}});case"triangle1":return t=this.getCurrentWidthAndHeight(),a.createElement("svg",{version:"1.0",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 "+t.width+" "+t.height,style:{width:"100%",height:"100%"}},a.createElement("polygon",{points:.1*t.width+","+.9*t.height+" "+.9*t.width+","+.9*t.height+" "+.5*t.width+","+.1*t.height,stroke:d,strokeWidth:l,fill:h}));case"triangle2":return t=this.getCurrentWidthAndHeight(),a.createElement("svg",{version:"1.0",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 "+t.width+" "+t.height,style:{width:"100%",height:"100%"}},a.createElement("polygon",{points:.1*t.width+","+.9*t.height+" "+.9*t.width+","+.9*t.height+" "+.1*t.width+","+.1*t.height,stroke:d,strokeWidth:l,fill:h}));case"arrow":return a.createElement("svg",{version:"1.0",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",style:{width:"100%",height:"100%"}},a.createElement("path",{d:"M7.4 12.5l-3.6-3.5h12.2v-2h-12.2l3.6-3.5-1.5-1.4-5.9 5.9 5.9 5.9z",fill:h}));default:return null}},t.prototype.render=function(){var e=this.auth(this.props);return e!==!0?e:a.createElement("div",{className:"shape-chart-container",ref:this.getParent,style:this.generateStyle()},this.getShape())};var r;return t.displayName="ShapeChart",t=i.__decorate([p.default,d.observer,n.decorate(s.default),i.__metadata("design:paramtypes",["function"==typeof(r="undefined"!=typeof o.IChartComponentProps&&o.IChartComponentProps)?r:Object])],t)}(a.Component);t.default=u,o.register({kind:"material",type:"shape",name:r.default("线条"),docName:r.default("形状类图表"),iconClassName:"chart-shape-line",component:u,dataBindTabTitle:r.default("形状设置"),canEmptyData:!0,loadDataPremiseField:"never",initialState:{hideTitle:!0,config:{shapeType:"line",lineWidth:1,rotate:0,opacity:.5}},variants:[{name:r.default("圆形"),iconClassName:"chart-shape-circle",initialState:{config:{shapeType:"circle",backgroundColor:"rgb(74, 0, 224, 1)",lineWidth:0}}},{name:r.default("椭圆"),iconClassName:"chart-shape-ellipse",initialState:{config:{shapeType:"ellipse",backgroundColor:"rgb(74, 0, 224, 1)",lineWidth:0}}},{name:r.default("矩形"),iconClassName:"chart-shape-square",initialState:{config:{shapeType:"square",backgroundColor:"rgb(74, 0, 224, 1)",lineWidth:0,borderRadius1:8,borderRadius2:8,borderRadius3:8,borderRadius4:8}}},{name:r.default("等腰三角形"),iconClassName:"chart-shape-triangle1",initialState:{config:{shapeType:"triangle1",backgroundColor:"rgb(74, 0, 224, 1)",lineWidth:0}}},{name:r.default("直角三角形"),iconClassName:"chart-shape-triangle2",initialState:{config:{shapeType:"triangle2",backgroundColor:"rgb(74, 0, 224, 1)",lineWidth:0}}},{name:r.default("箭头"),iconClassName:"chart-shape-arrow",initialState:{config:{shapeType:"arrow",backgroundColor:"rgb(74, 0, 224, 1)"}}}],dataBindCtrl:l.dataBindCtrl})});
;sugar.define("sugar:widgets/charts/wave-effect/wave-effect-ctrl.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dataBindCtrl=void 0;var n=e("sugar:utils/i18n.ts");t.dataBindCtrl=function(){var e=[{type:"number",label:n.default("速度"),name:"config.speed",step:1,min:1},{type:"number",label:n.default("圆点大小"),name:"config.pointSize",step:1,min:1},{type:"number",label:n.default("圆点间距"),name:"config.distance",step:1,min:1},{type:"number",label:n.default("深度"),name:"config.depth",step:1,min:1},{type:"number",label:n.default("波浪宽度"),name:"config.width",step:1,min:1},{type:"number",label:n.default("摆动幅度"),name:"config.height",step:1,min:1}];return e}});
;sugar.define("sugar:widgets/charts/wave-effect/ShaderProgram.js",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ShaderProgram=void 0;var r=e("sugar:node_modules/tslib/tslib.js"),a=function(){function e(e,t){var r=this;void 0===t&&(t={}),t=Object.assign({antialias:!1,depthTest:!1,mousemove:!1,autosize:!0,msaa:0,vertex:"\n        precision highp float;\n        attribute vec4 a_position;\n        attribute vec4 a_color;\n        uniform float u_time;\n        uniform vec2 u_resolution;\n        uniform vec2 u_mousemove;\n        uniform mat4 u_projection;\n        varying vec4 v_color;\n        void main() {\n          gl_Position = u_projection * a_position;\n          gl_PointSize = (10.0 / gl_Position.w) * 100.0;\n          v_color = a_color;\n        }",fragment:"\n        precision highp float;\n        uniform sampler2D u_texture;\n        uniform int u_hasTexture;\n        varying vec4 v_color;\n        void main() {\n          if ( u_hasTexture == 1 ) {\n            gl_FragColor = v_color * texture2D(u_texture, gl_PointCoord);\n          } else {\n            gl_FragColor = v_color;\n          }\n        }",uniforms:{},buffers:{},camera:{},texture:null,onUpdate:function(){},onResize:function(){}},t);var a=Object.assign({time:{type:"float",value:0},hasTexture:{type:"int",value:0},resolution:{type:"vec2",value:[0,0]},mousemove:{type:"vec2",value:[0,0]},projection:{type:"mat4",value:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}},t.uniforms),i=Object.assign({position:{size:3,data:[]},color:{size:4,data:[]}},t.buffers),o=Object.assign({fov:60,near:1,far:1e4,aspect:1,z:100,perspective:!0},t.camera),n=document.createElement("canvas"),s=n.getContext("webgl",{antialias:t.antialias});return s?(this.count=0,this.gl=s,this.canvas=n,this.camera=o,this.holder=e,this.msaa=t.msaa,this.onUpdate=t.onUpdate,this.onResize=t.onResize,this.data={},e.appendChild(n),this.createProgram(t.vertex,t.fragment),this.createBuffers(i),this.createUniforms(a),this.updateUniforms(),this.createTexture(t.texture),s.enable(s.BLEND),s.enable(s.CULL_FACE),s.blendFunc(s.SRC_ALPHA,s.ONE),s[t.depthTest?"enable":"disable"](s.DEPTH_TEST),t.autosize&&window.addEventListener("resize",function(e){return r.resize(e)},!1),t.mousemove&&window.addEventListener("mousemove",function(e){return r.mousemove(e)},!1),this.resize(),this.update=this.update.bind(this),this.time={start:performance.now(),old:performance.now()},void this.update()):!1}return e.prototype.mousemove=function(e){var t=e.pageX/this.width*2-1,r=e.pageY/this.height*2-1;this.uniforms.mousemove=[t,r]},e.prototype.resize=function(){var e=this.holder,t=this.canvas,r=this.gl,a=this.width=e.offsetWidth,i=this.height=e.offsetHeight,o=this.aspect=a/i,n=this.dpi=Math.max(this.msaa?2:1,devicePixelRatio);t.width=a*n,t.height=i*n,t.style.width=a+"px",t.style.height=i+"px",r.viewport(0,0,a*n,i*n),r.clearColor(0,0,0,0),this.uniforms.resolution=[a,i],this.uniforms.projection=this.setProjection(o),this.onResize(a,i,n)},e.prototype.setProjection=function(e){var t=this.camera;if(t.perspective){t.aspect=e;var r=t.fov*(Math.PI/180),a=Math.tan(.5*Math.PI-.5*r),i=1/(t.near-t.far),o=[a/t.aspect,0,0,0,0,a,0,0,0,0,(t.near+t.far)*i,-1,0,0,t.near*t.far*i*2,0];return o[14]+=t.z,o[15]+=t.z,o}return[2/this.width,0,0,0,0,-2/this.height,0,0,0,0,1,0,-1,1,0,1]},e.prototype.createShader=function(e,t){var r=this.gl,a=r.createShader(e);return r.shaderSource(a,t),r.compileShader(a),r.getShaderParameter(a,r.COMPILE_STATUS)?a:(console.log(r.getShaderInfoLog(a)),void r.deleteShader(a))},e.prototype.createProgram=function(e,t){var r=this.gl,a=this.createShader(r.VERTEX_SHADER,e),i=this.createShader(r.FRAGMENT_SHADER,t),o=r.createProgram();r.attachShader(o,a),r.attachShader(o,i),r.linkProgram(o),r.getProgramParameter(o,r.LINK_STATUS)?(r.useProgram(o),this.program=o):(console.log(r.getProgramInfoLog(o)),r.deleteProgram(o))},e.prototype.createUniforms=function(e){var t=this,r=this.gl,a=this.data.uniforms=e,i=this.uniforms={};Object.keys(a).forEach(function(e){var o=a[e];o.location=r.getUniformLocation(t.program,"u_"+e),Object.defineProperty(i,e,{set:function(r){a[e].value=r,t.setUniform(e,r)},get:function(){return a[e].value}})})},e.prototype.setUniform=function(e,t){var a=this.gl,i=this.data.uniforms[e];switch(i.value=t,i.type){case"int":a.uniform1i(i.location,t);break;case"float":a.uniform1f(i.location,t);break;case"vec2":a.uniform2f.apply(a,r.__spreadArrays([i.location],t));break;case"vec3":a.uniform3f.apply(a,r.__spreadArrays([i.location],t));break;case"vec4":a.uniform4f.apply(a,r.__spreadArrays([i.location],t));break;case"mat2":a.uniformMatrix2fv(i.location,!1,t);break;case"mat3":a.uniformMatrix3fv(i.location,!1,t);break;case"mat4":a.uniformMatrix4fv(i.location,!1,t)}},e.prototype.updateUniforms=function(){var e=this,t=(this.gl,this.data.uniforms);Object.keys(t).forEach(function(r){var a=t[r];e.uniforms[r]=a.value})},e.prototype.createBuffers=function(e){var t=this,r=(this.gl,this.data.buffers=e),a=this.buffers={};Object.keys(r).forEach(function(e){var i=r[e];i.buffer=t.createBuffer("a_"+e,i.size),Object.defineProperty(a,e,{set:function(a){r[e].data=a,t.setBuffer(e,a),"position"===e&&(t.count=r.position.data.length/3)},get:function(){return r[e].data}})})},e.prototype.createBuffer=function(e,t){var r=this.gl,a=this.program,i=r.getAttribLocation(a,e),o=r.createBuffer();return r.bindBuffer(r.ARRAY_BUFFER,o),r.enableVertexAttribArray(i),r.vertexAttribPointer(i,t,r.FLOAT,!1,0,0),o},e.prototype.setBuffer=function(e,t){var r=this.gl,a=this.data.buffers;(null!=e||r.bindBuffer(r.ARRAY_BUFFER,null))&&(r.bindBuffer(r.ARRAY_BUFFER,a[e].buffer),r.bufferData(r.ARRAY_BUFFER,new Float32Array(t),r.STATIC_DRAW))},e.prototype.createTexture=function(e){var t=this.gl,r=t.createTexture();t.bindTexture(t.TEXTURE_2D,r),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array([0,0,0,0])),this.texture=r,e&&(this.uniforms.hasTexture=1,this.loadTexture(e))},e.prototype.loadTexture=function(e){var t=this.gl,r=this.texture,a=new Image;a.onload=function(){t.bindTexture(t.TEXTURE_2D,r),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,a),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)},a.src=e},e.prototype.update=function(){var e=this.gl,t=performance.now(),r=(t-this.time.start)/5e3,a=t-this.time.old;this.time.old=t,this.uniforms.time=r,this.count>0&&e.drawArrays(e.POINTS,0,this.count),this.onUpdate(a),requestAnimationFrame(this.update)},e}();t.ShaderProgram=a});
;sugar.define("sugar:widgets/charts/wave-effect/wave-effect.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=e("sugar:node_modules/tslib/tslib.js"),n=e("sugar:utils/i18n.ts"),a=e("sugar:node_modules/react/index.js"),s=e("sugar:node_modules/react-mixin/index.js"),o=e("sugar:widgets/charts/chart-manager.tsx"),r=e("sugar:widgets/charts/_mixin/common.tsx"),d=e("sugar:stores/index.ts"),h=e("sugar:widgets/charts/wave-effect/wave-effect-ctrl.tsx"),u=e("sugar:widgets/charts/wave-effect/ShaderProgram.js"),c=e("sugar:widgets/charts/_hoc/chart-zoom/index.tsx"),f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.pointSize=10,t.speed=5,t.distance=10,t.height=10,t.width=100,t.depth=300,t}return i.__extends(t,e),t.prototype.componentWillMount=function(){this.getContainer=this.getContainer.bind(this)},t.prototype.getContainer=function(e){if(e){this.container=e;var t=this;this.wave=new u.ShaderProgram(this.container,{texture:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAb1BMVEUAAAD///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////8v0wLRAAAAJHRSTlMAC/goGvDhmwcExrVjWzrm29TRqqSKenRXVklANSIUE8mRkGpv+HOfAAABCElEQVQ4y4VT13LDMAwLrUHteO+R9f/fWMfO6dLaPeKVEECRxOULWsEGpS9nULDwia2Y+ALqUNbAWeg775zv+sA4/FFRMxt8U2FZFCVWjR/YrH4/H9sarclSKdPMWKzb8VsEeHB3m0shkhVCyNzeXeAQ9Xl4opEieX2QCGnwGbj6GMyjw9t1K0fK9YZunPXeAGsfJtYjwzxaBnozGGorYz0ypK2HzQSYx1y8DgSRo2ewOiyh2QWOEk1Y9OrQV0a8TiBM1a8eMHWYnRMy7CZ4t1CmyRkhSUvP3gRXyHOCLBxNoC3IJv//ZrJ/kxxUHPUB+6jJZZHrpg6GOjnqaOmzp4NDR48OLxn/H27SRQ08S0ZJAAAAAElFTkSuQmCC",uniforms:{size:{type:"float",value:t.pointSize},field:{type:"vec3",value:[0,0,0]},speed:{type:"float",value:t.speed}},vertex:"\n    #define M_PI 3.1415926535897932384626433832795\n    precision highp float;\n    attribute vec4 a_position;\n    attribute vec4 a_color;\n    uniform float u_time;\n    uniform float u_size;\n    uniform float u_speed;\n    uniform vec3 u_field;\n    uniform mat4 u_projection;\n    varying vec4 v_color;\n    void main() {\n      vec3 pos = a_position.xyz;\n      pos.y += (\n        cos(pos.x / u_field.x * M_PI * 8.0 + u_time * u_speed) +\n        sin(pos.z / u_field.z * M_PI * 8.0 + u_time * u_speed)\n      ) * u_field.y;\n      gl_Position = u_projection * vec4( pos.xyz, a_position.w );\n      gl_PointSize = ( u_size / gl_Position.w ) * 100.0;\n      v_color = a_color;\n    }",fragment:"\n    precision highp float;\n    uniform sampler2D u_texture;\n    varying vec4 v_color;\n    void main() {\n      gl_FragColor = v_color * texture2D(u_texture, gl_PointCoord);\n    }",onResize:function(e,i,n){for(var a=[],s=[],o=t.width*(e/i),r=t.depth,d=t.height,h=t.distance,u=0;o>u;u+=h)for(var c=0;r>c;c+=h)a.push(-o/2+u,-30,-r/2+c),s.push(0,1-u/o*1,.5+u/o*.5,c/r);this.uniforms.field=[o,d,r],this.buffers.position=a,this.buffers.color=s,this.uniforms.size=i/400*t.pointSize*n}})}},t.prototype.render=function(){{var e=this.props,t=e.chart.config;e.chart,e.theme}return this.speed=t.speed,this.pointSize=t.pointSize,this.distance=t.distance,this.width=t.width,this.height=t.height,this.depth=t.depth,this.wave&&this.wave.resize(),a.createElement("div",{ref:this.getContainer,style:{width:"100%",height:"100%"}})},t.displayName="WaveEffect",t=i.__decorate([c.default,d.observer,s.decorate(r.default)],t)}(a.Component);t.default=f,o.register({kind:"material",type:"wave-effect",name:n.default("波浪粒子"),iconClassName:"chart-wave-effect",component:f,canEmptyData:!0,dataBindTabTitle:n.default("设置"),loadDataPremiseField:"never",initialState:{config:{speed:5,pointSize:10,distance:10,width:100,depth:300,height:10}},initialDashboardState:{height:150,width:1920,left:0},dataBindCtrl:h.dataBindCtrl,dashboardOnly:!0})});
;sugar.define("sugar:widgets/html-model-selector/html-model-editor.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=e("sugar:node_modules/tslib/tslib.js"),n=e("sugar:utils/i18n.ts"),r=e("sugar:node_modules/react/index.js"),s=e("sugar:node_modules/amis/lib/index.js"),a=e("sugar:sites/amis-renderer.tsx"),l=e("sugar:utils/common-helper.ts"),i=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onSubmit=function(e){var o=(e||{}).content,r=void 0===o?"":o;l.isNotEmpty(r)||s.toast.error(n.default("请编写HTML代码"));var a=t.props.modelEntity,i=(a||{}).hash,d=void 0===i?"":i,u={hash:d,content:r};t.props.onSubmit(u)},t}return o.__extends(t,e),t.prototype.render=function(){var e=this,t=this.props,o=t.onClose,s=t.modelEntity,l=t.template,i=s||{},d=i.content,u=void 0===d?l:d,m=i.hash,c=void 0===m?"":m;return r.createElement(a.default,{schema:{type:"dialog",size:"lg",onClose:o,title:n.default(c&&"demo"!==c?"修改自定义组件":"新建自定义组件"),body:{type:"form",mode:"vertical",data:{content:u},onFinished:function(t){return e.onSubmit(t),!1},controls:[{children:function(){return r.createElement("div",{className:"form-group--relative"},r.createElement("label",null,n.default("自定义组件html代码")),r.createElement("div",{className:"form-item__tip"},r.createElement("a",{href:"/docs/Chart-custom-iframe",target:"_blank"},n.default("如何编写自定组件?"))))}},{type:"editor",name:"content",language:"html",size:"xxl",options:{formatOnPaste:!1}}]}}})},t.displayName="HtmlModelEditorDialog",t}(r.Component);t.default=i});
;sugar.define("sugar:widgets/html-binder/html-binder.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=e("sugar:node_modules/tslib/tslib.js"),n=e("sugar:utils/i18n.ts"),r=e("sugar:node_modules/react/index.js"),s=e("sugar:node_modules/amis/lib/index.js"),o=e("sugar:stores/index.ts"),l=e("sugar:widgets/ctrl-panel/data-bind-ctrl/debug-refresh-btn.tsx"),i=e("sugar:widgets/code-editor.tsx"),d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.cacheContent="",t.loadData=function(){if(t.cacheContent){var e=t.props.modelEntity;t.props.onSubmit(a.__assign(a.__assign({},e),{content:t.cacheContent}))}else s.toast.warning(n.default("自定义代码无变化，不需要更新!"))},t.editorContentChange=function(e){t.cacheContent=e},t}return a.__extends(t,e),t.prototype.render=function(){var e=this.props.modelEntity,t=(e||{}).content,a=void 0===t?"":t,s=380;return document.body.clientHeight&&(s=Math.max(300,document.body.clientHeight-350)),this.cacheContent=a,r.createElement("div",{className:"sugar-html-binder"},r.createElement("div",{className:"form-group--relative"},r.createElement("label",null,n.default("请编辑")),r.createElement("div",{className:"form-item__tip"},r.createElement("a",{href:"/docs/Chart-custom-iframe",target:"_blank"},n.default("如何编写自定组件?"))),r.createElement(i.default,{value:a,language:"html",height:s,onChange:this.editorContentChange}),r.createElement("div",{className:"m-t"},r.createElement(l.default,{loadData:this.loadData,loadDebugData:this.props.onOpen,dataType:"html",refreshText:n.default("执行代码"),debugText:n.default("弹出编辑")}))))},t=a.__decorate([o.observer],t)}(r.Component);t.default=d});
;sugar.define("sugar:widgets/html-model-selector/html-model-selector.tsx",function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=t("sugar:node_modules/tslib/tslib.js"),o=t("sugar:utils/i18n.ts"),a=t("sugar:node_modules/react/index.js"),n=t("sugar:node_modules/amis/lib/index.js"),l=t("sugar:stores/index.ts"),i=t("sugar:widgets/html-model-selector/html-model-editor.tsx"),r=t("sugar:widgets/html-binder/html-binder.tsx"),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.state={openDialog:!1},e.onOpen=function(){e.setState({openDialog:!0})},e.onClose=function(){e.setState({openDialog:!1})},e.onSubmit=function(t){var a=e.props.htmlStore;t.hash&&"demo"!==t.hash?a.update(t).then(function(t){t.res&&"done"===t.state&&(e.onClose(),e.props.onChange(s.__assign(s.__assign({},e.props.value),{t:e.props.value.t+1})),n.toast.success(o.default("自定义组件更新成功")))}):a.add({content:t.content}).then(function(t){if(t.res&&"done"===t.state){var a=t.res.data;e.props.onChange(s.__assign(s.__assign({},e.props.value),{htmlHash:a.hash})),e.onClose(),n.toast.success(o.default("自定义组件新建成功"))}})},e.onChange=function(t){e.props.onChange(s.__assign(s.__assign({},e.props.value),{htmlHash:t||"demo"}))},e}return s.__extends(e,t),e.prototype.componentDidMount=function(){var t=this.props.htmlStore;this.props.value.htmlHash&&t.detailMap.loadDetail(this.props.value.htmlHash),this.props.htmlStore.detailMap.mapByHash.get("demo")||t.detailMap.loadDetail("demo")},e.prototype.componentWillReceiveProps=function(t){this.props.value.htmlHash!==t.value.htmlHash&&t.value.htmlHash&&setTimeout(function(){return t.htmlStore.detailMap.loadDetail(t.value.htmlHash)},10)},e.prototype.render=function(){var t=this.props,e=t.value,s=t.containerClassName,o=t.htmlStore;return a.createElement("div",{className:(s||"")+" html-model-selector"},a.createElement(r.default,{onSubmit:this.onSubmit,onOpen:this.onOpen,modelEntity:o.detailMap.mapByHash.get(e.htmlHash)}),this.state.openDialog?a.createElement(i.default,{onClose:this.onClose,onSubmit:this.onSubmit,template:o.detailMap.mapByHash.get("demo").content,modelEntity:o.detailMap.mapByHash.get(e.htmlHash)}):null)},e.displayName="HtmlModelSelector",e=s.__decorate([l.inject(function(t){return{htmlStore:t.html}}),l.observer],e)}(a.Component);e.default=u});
;sugar.define("sugar:widgets/charts/custom-iframe/custom-iframe-ctrl.tsx",function(a,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.advancedCtrl=e.dataBindCtrl=e.chartDemoUrl=void 0;var t=a("sugar:node_modules/tslib/tslib.js"),d=a("sugar:utils/i18n.ts"),l=a("sugar:node_modules/react/index.js"),o=a("sugar:widgets/amis-inline-switch.tsx"),r=a("sugar:widgets/ctrl-panel/data-bind-ctrl/index.tsx"),n=a("sugar:widgets/html-model-selector/html-model-selector.tsx"),i=a("sugar:widgets/data-model/data-model-field-holder/data-model-field-holder.tsx"),s="/openapi/demo/chart?type=treemap";e.chartDemoUrl="$CUR_HOST/openapi/demo/chart?type=treemap",e.dataBindCtrl=function(a){var e=r.getDebugAndRefreshBtn({loadData:a.chart.loadData,loadDebugData:a.chart.loadDebugData,dataType:a.chart.dataType,refreshText:d.default("刷新图表")}),t=r.getDataBindCommon({frontendId:a.chart.frontendId,dataTypeOptions:["dataModel","api","sql","json"],api:{demoUrl:s},sql:{needContinuitySetting:!0},loadData:a.chart.loadData,loadDebugData:a.chart.loadDebugData,curUrl:a.chart.dataApiUrl}),l=a.chart.dataModelHash||"",o=a.sqlModelStore.detailMap.mapByHash.get(l),n=r.generateSQLFieldList(o),c=[i.getDataModelFieldHolder({name:"value",label:d.default("绑定字段"),config:{dataModelHash:l,holderId:a.chart.frontendId+"-value",maxCount:20,canRepeat:!0}}),r.commonFilterForDataModel(l),r.commonBindUrlParamForDataModel(l),r.commonLimitForDataModel,{type:"select",name:"dataConfig.urlField",hiddenOn:"data.dataType != 'sql'",label:d.default("自定义组件的字段"),placeholder:d.default("请选择"),multiple:!0,options:n}];return t.concat(c,e)},e.advancedCtrl=function(){return[o.amisInlineSwitch("config.openUseHttp",d.default("使用HTTP协议")),{name:"config",children:function(a){var e=a.onChange,d=a.value;return l.createElement(n.default,t.__assign({},{onChange:e,value:d,containerClassName:"form-group form-item"}))}}]}});
;sugar.define("sugar:widgets/charts/custom-iframe/custom-iframe.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=e("sugar:node_modules/tslib/tslib.js"),n=e("sugar:utils/i18n.ts"),r=e("sugar:node_modules/react/index.js"),o=e("sugar:node_modules/amis/lib/index.js"),s=e("sugar:widgets/charts/_hoc/echarts.tsx"),i=e("sugar:widgets/charts/chart-manager.tsx"),d=e("sugar:widgets/charts/custom-iframe/custom-iframe-ctrl.tsx"),l=e("sugar:stores/index.ts"),c=e("sugar:utils/common-helper.ts"),p=e("sugar:widgets/charts/_hoc/debug/debug.tsx"),u=e("sugar:widgets/charts/_hoc/toolbar/toolbar.tsx"),h=e("sugar:widgets/charts/_hoc/drill-down/drill-down.tsx"),m=e("sugar:widgets/charts/_hoc/chart-zoom/index.tsx"),f=e("sugar:utils/export-file/export-excel.ts"),g=e("sugar:utils/export-file/export-csv.ts"),v=function(e){function t(t){var a=e.call(this,t)||this;return a.sugarUrl="",a.iframe=null,a.pointerEvents="auto",a.notice=function(){var e=a.iframe;if(e){var t=e.contentWindow;t&&null!=a.props.hub.data.data&&t.postMessage({data:a.props.hub.data.data,config:a.props.chart.config},"*")}},a.onMessage=function(e){var t=a.props,r=t.chart,s=t.drillDownOpen,i=t.chartConfig;!e.data.sugarUrl||e.data.sugarUrl.indexOf(a.sugarUrl)<0||(s&&r.drillDown&&r.drillDown.length&&r.drillDown[0].ddOpen&&e.data.isDD?a.handleDrillDown(e.data.sugarData):i&&i.dependenceOpen&&i.dependences&&i.dependences.length&&i.dependences[0].cddOpen&&e.data.isDD&&a.handleDependence(e.data.sugarData),e.data.sugarRender&&a.notice(),e.data.sugarError&&o.toast.error(e.data.sugarError.message,n.default("「"+a.props.chart.name+"」渲染错误"),{timeOut:5e3}))},a.onMouserUp=a.onMouserUp.bind(a),a.handleIframe=a.handleIframe.bind(a),a}a.__extends(t,e),t.prototype.componentDidMount=function(){window.addEventListener("message",this.onMessage)},t.prototype.handleIframe=function(){var e,t=this;(null===(e=this.iframe)||void 0===e?void 0:e.contentDocument)&&(this.iframe.contentDocument.onmousedown=function(){t.pointerEvents="none",t.iframe.style.pointerEvents=t.pointerEvents})},t.prototype.componentDidUpdate=function(e){this.props.chartData&&this.props.chartData!==e.chartData&&this.notice()},t.prototype.componentWillUnmount=function(){window.removeEventListener("message",this.onMessage),this.iframe=null},t.prototype.handleDependence=function(e){var t=this.props.chartConfig;if(t.dependenceOpen&&t.dependences&&t.dependences.length&&t.dependences[0].cddOpen)return e?void this.props.chart.handleEvent("dependence",this.props.mode,{dependenceIndex:0,dependenceState:e.state,dependenceItem:{item:e,fireKey:""}}):void o.toast.error(n.default("图表「"+this.props.chart.name+"」联动参数错误"))},t.prototype.handleDrillDown=function(e){var t=this.props.chart.drillDown;if(this.props.drillDownOpen&&t&&t.length&&t[0].ddOpen)return e?void this.props.chart.handleEvent("drillDown",this.props.mode,{drillDownIndex:0,drillDownItem:{item:e,fireKey:""}}):void o.toast.error(n.default("图表「"+this.props.chart.name+"」下钻参数错误"))},t.prototype.onMouserDown=function(){},t.prototype.onMouserUp=function(){this.iframe&&"none"===this.pointerEvents&&(this.pointerEvents="auto",this.iframe.style.pointerEvents=this.pointerEvents)},t.prototype.render=function(){var e=this,t=this.props,a=t.chart,o=t.mode,s=t.active,i="/openapi/custom-iframe/"+a.config.htmlHash+"?type=html&t="+a.config.t;this.sugarUrl=i,"sugar.bce.baidu.com"===window.location.host&&(i="//sugar.baidubce.com"+i);var d="";if(a.config.openUseHttp&&"https:"===location.protocol){if("editor"===o)d=r.createElement("div",null,n.default("您目前使用HTTPS方式访问「"+window.sugarConfig.name+"」，但是存在使用http协议的资源，\n            浏览器的安全策略不允许，您可以保存并退出编辑模式，并按照提示进入HTTP方式"));else if("sugar.baidubce.com"===location.hostname||~(window.sugarConfig.shareSourceDomain||"").indexOf(location.hostname))window.location.href=window.location.href.replace(/^https:/,"http:");else{var l=window.location.href.replace(/^https:/,"http:");d=r.createElement("div",null,n.default("您目前使用HTTPS方式访问{(window as any).sugarConfig.name}"),n.default("，但是存在使用http协议的资源，浏览器的安全策略不允许，"),r.createElement("a",{href:l,target:"_self"},n.default("您可以点击这里进入HTTP方式")))}return r.createElement("div",{className:"chart-tip sugar-iframe-tip"},d)}return"editor"!==o||s||(this.pointerEvents="none"),r.createElement("div",{className:"sugar-iframe-container",style:{width:"100%",height:"100%"},onMouseUp:"editor"===o?this.onMouserUp:c.noop},r.createElement("iframe",{ref:function(t){return e.iframe=t},className:"sugar-iframe sugar-full-iframe",src:i,allowFullScreen:!0,onLoad:"editor"===o?this.handleIframe:c.noop,style:{pointerEvents:this.pointerEvents}}))};return t.displayName="CustomIframe",t=a.__decorate([h.default,p.default,u.default,m.default,s.default,l.observer,a.__metadata("design:paramtypes",[Object])],t)}(r.Component);t.default=v;var w=function(e,t){var a,n,r=[];if(!e.data)return r;if("dataModel"!==t.dataType&&"sql"!==t.dataType)return[[JSON.stringify(e.data)]];var o=[];return(null===(a=e.data.columns)||void 0===a?void 0:a.length)&&(r[0]=[],e.data.columns.forEach(function(e){r[0].push(e.name),o.push(e.id)})),(null===(n=e.data.rows)||void 0===n?void 0:n.length)&&(o.length||(o=Object.keys(e.data.rows[0])),e.data.rows.forEach(function(e){r.push(o.map(function(t){return e[t]}))})),r},D=function(e,t){var a=w(e,t);f.exportExcelByRows(a,""+(t.dynamicName||t.name||"export"))},y=function(e,t){var a=w(e,t);g.exportCsvByRows(a,(t.dynamicName||t.name||"export")+".csv")},x=function(e,t){return w(e,t)};i.register({kind:"otherChart",type:"custom-iframe",name:n.default("自定义组件"),iconClassName:"chart-iframe",enableTemplate:!0,component:v,advancedTabTitle:n.default("代码"),dataBindCtrl:d.dataBindCtrl,advancedCtrl:d.advancedCtrl,exportCSV:y,exportExcel:D,exportRows:x,initialState:{dataType:"api",dataApiUrl:d.chartDemoUrl,hideTitle:!1,config:{htmlHash:"demo",t:0}},initialDashboardState:{width:400,height:400},drillDownType:"single",canBeDrillChild:!0,needDashboardAutoFresh:!0,dataModelPanelShow:[["dataType","dataModel"]]})});
;sugar.define("sugar:widgets/charts/register-chart.ts",function(s,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),s("sugar:widgets/charts/smart-chart/smart-chart.tsx"),s("sugar:widgets/charts/line/line.tsx"),s("sugar:widgets/charts/bar/bar.tsx"),s("sugar:widgets/charts/bar-alien/bar-alien.tsx"),s("sugar:widgets/charts/bar-pic/bar-pic.tsx"),s("sugar:widgets/charts/bar-polar/bar-polar.tsx"),s("sugar:widgets/charts/pie/pie.tsx"),s("sugar:widgets/charts/pie-nested/pie-nested.tsx"),s("sugar:widgets/charts/funnel/funnel.tsx"),s("sugar:widgets/charts/scatter/scatter.tsx"),s("sugar:widgets/charts/radar/radar.tsx"),s("sugar:widgets/charts/sunburst/sunburst.tsx"),s("sugar:widgets/charts/treemap/treemap.tsx"),s("sugar:widgets/charts/bubble/bubble.tsx"),s("sugar:widgets/charts/topology/topology.tsx"),s("sugar:widgets/charts/river/river.tsx"),s("sugar:widgets/charts/calendar-heatmap/calendar-heatmap.tsx"),s("sugar:widgets/charts/3d-bar/3d-bar.tsx"),s("sugar:widgets/charts/3d-scatter/3d-scatter.tsx"),s("sugar:widgets/charts/candlestick/candlestick.tsx"),s("sugar:widgets/charts/sankey/sankey.tsx"),s("sugar:widgets/charts/cartesian-heatmap/cartesian-heatmap.tsx"),s("sugar:widgets/charts/summary/summary.tsx"),s("sugar:widgets/charts/kanbans/kanbans.tsx"),s("sugar:widgets/charts/flip-number/flip-number.tsx"),s("sugar:widgets/charts/gauge/gauge.tsx"),s("sugar:widgets/charts/progress-bar/progress-bar.tsx"),s("sugar:widgets/charts/liquid-fill/liquid-fill.tsx"),s("sugar:widgets/charts/map-layer/map-layer.tsx"),s("sugar:widgets/charts/map/map.tsx"),s("sugar:widgets/charts/map-line/map-line.tsx"),s("sugar:widgets/charts/3d-map-line/3d-map-line.tsx"),s("sugar:widgets/charts/3d-map-bar/3d-map-bar.tsx"),s("sugar:widgets/charts/bmap-scatter/bmap-scatter.tsx"),s("sugar:widgets/charts/bmap-line/bmap-line.tsx"),s("sugar:widgets/charts/table/table.tsx"),s("sugar:widgets/charts/table-play/table-play.tsx"),s("sugar:widgets/charts/attr-table/attr-table.tsx"),s("sugar:widgets/charts/simple-text/simple-text.tsx"),s("sugar:widgets/charts/time/time.tsx"),s("sugar:widgets/charts/text/text.tsx"),s("sugar:widgets/charts/word-cloud/word-cloud.tsx"),s("sugar:widgets/charts/3d-word-cloud/3d-word-cloud.tsx"),s("sugar:widgets/charts/image/image.tsx"),s("sugar:widgets/charts/slider/slider.tsx"),s("sugar:widgets/charts/iframe/iframe.tsx"),s("sugar:widgets/charts/video/video.tsx"),s("sugar:widgets/charts/audio/audio.tsx"),s("sugar:widgets/charts/weather/weather.tsx"),s("sugar:widgets/charts/scene/scene.tsx"),s("sugar:widgets/charts/tab/tab.tsx"),s("sugar:widgets/charts/fullscreen/fullscreen.tsx"),s("sugar:widgets/charts/smart-audio/smart-audio.tsx"),s("sugar:widgets/charts/decorate/decorate-chart.tsx"),s("sugar:widgets/charts/icon/icon.tsx"),s("sugar:widgets/charts/shape/shape.tsx"),s("sugar:widgets/charts/wave-effect/wave-effect.tsx"),s("sugar:widgets/charts/custom-iframe/custom-iframe.tsx")});
;sugar.define("sugar:widgets/license-expired.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=e("sugar:node_modules/tslib/tslib.js"),n=e("sugar:utils/i18n.ts"),i=e("sugar:node_modules/react/index.js"),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s.__extends(t,e),t.prototype.componentWillMount=function(){this.setState({closed:!1}),this.close=this.close.bind(this)},t.prototype.close=function(){this.setState({closed:!0})},t.prototype.render=function(){if(this.state.closed)return null;var e=window.sugarConfig.expiredTime,t=window.sugarConfig.sTime,s=new Date(6e3*e),a=new Date(6e3*t),r=parseInt((+s-+a)/864e5,10);return 10>r?i.createElement("div",{className:"sugar-alert-container"},i.createElement("span",{className:"sugar-alert-tip"},n.default("您的License授权 「"+n.default(r>0?r+"天 后":"立即 ")+"」过期，请尽快续购！"),i.createElement("i",{className:"fa fa-times sugar-alert-close",onClick:this.close}))):null},t}(i.PureComponent);t.default=a});
;sugar.define("sugar:widgets/company-expired.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=e("sugar:node_modules/tslib/tslib.js"),a=e("sugar:utils/i18n.ts"),n=e("sugar:node_modules/react/index.js"),r=e("sugar:utils/date-helper.ts"),o=e("sugar:utils/common-helper.ts"),i=new Date(window.sugarConfig.companyETime),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s.__extends(t,e),t.prototype.componentWillMount=function(){var e=window.sugarConfig.sTime,t=new Date(6e3*e);this.setState({closed:!1,days:this.countDays(t)}),this.close=this.close.bind(this),setInterval(this.checkDays.bind(this),432e5)},t.prototype.countDays=function(e){return 1970===i.getFullYear()?600:e>i?-1:parseInt((+i-+e)/864e5,10)},t.prototype.checkDays=function(){this.setState({closed:!1,days:this.countDays(new Date)})},t.prototype.close=function(){this.setState({closed:!0})},t.prototype.getTip=function(e,t){var s=r.formatDate(i,"$1-$2-$3 $4:$5:$6"),l="";return l=a.default(e||0>t?"已于「"+s+"」":0===t?"即将于「"+s+"」":"即将于 「"+(t+1)+"」 天后"),n.createElement("span",null,a.default("您的组织「"+l+"」过期，如需继续使用，请点击 "),n.createElement("a",{target:"_blank",className:"link-decoration",href:o.payLink},a.default("这里")),a.default("进行购买。"))},t.prototype.render=function(){var e=this.state,t=e.closed,s=e.days;if(t)return null;var a=window.sugarConfig.companyStatus>=2;return 7>s||a?n.createElement("div",{className:"sugar-alert-container"},n.createElement("span",{className:"sugar-alert-tip"},this.getTip(a,s),n.createElement("i",{className:"fa fa-times sugar-alert-close",onClick:this.close}))):null},t}(n.PureComponent);t.default=l});
;sugar.define("sugar:widgets/browser.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=e("sugar:node_modules/tslib/tslib.js"),r=e("sugar:utils/i18n.ts"),a=e("sugar:node_modules/react/index.js"),n=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s.__extends(t,e),t.prototype.componentWillMount=function(){this.setState({closed:!1}),this.close=this.close.bind(this)},t.prototype.close=function(){this.setState({closed:!0})},t.prototype.render=function(){if(this.state.closed)return null;var e=navigator.userAgent,t=!0;return(!/(chrome|webkit|safari|firefox)/i.test(e)||/\bEdge\//.test(e)||/\bOPR\//.test(e))&&(t=!1),t?null:a.createElement("div",{className:"sugar-alert-container sugar-browser"},a.createElement("span",{className:"sugar-alert-tip"},r.default("您的浏览器不支持当前页面某些新特性，推荐使用"),a.createElement("a",{href:"https://www.baidu.com/s?ie=UTF-8&wd=chrome",target:"_blank"},r.default("Chrome浏览器")),a.createElement("i",{className:"fa fa-times sugar-alert-close",onClick:this.close})))},t}(a.PureComponent);t.default=n});
;sugar.define("sugar:widgets/notice.tsx",function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=t("sugar:node_modules/tslib/tslib.js"),n=t("sugar:utils/i18n.ts"),s=t("sugar:node_modules/react/index.js"),a=t("sugar:stores/index.ts"),i=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.loadInterval=null,e}return o.__extends(e,t),e.prototype.componentWillMount=function(){this.loadNotice=this.loadNotice.bind(this),this.closeNotice=this.closeNotice.bind(this),this.setState({tempClosedNoticeHash:""}),this.loadNotice(),this.loadInterval=setInterval(this.loadNotice,3e5)},e.prototype.componentWillUnmount=function(){this.loadInterval&&clearInterval(this.loadInterval)},e.prototype.loadNotice=function(){this.props.notice.load()},e.prototype.closeNotice=function(t){this.setState({tempClosedNoticeHash:t}),this.props.notice.closeNotice(t)},e.prototype.render=function(){var t=this,e=this.props.notice;if("done"!==e.loadState||!e.data||!e.data.length)return null;var o=location.pathname;if(/^\/(dashboard|report|slider)\//.test(o))return null;var a=e.data[0];return a.content?this.state.tempClosedNoticeHash===a.hash?null:a.repeated||e.closedNoticeHash!==a.hash?s.createElement("div",{className:"sugar-alert-container sugar-notice"},s.createElement("span",{className:"sugar-alert-tip"},a.link?s.createElement("a",{href:a.link,target:"_blank",onClick:function(){return t.closeNotice(a.hash)}},a.content,s.createElement("span",{className:"sugar-notice-link"},n.default("查看详情"))):a.content,s.createElement("i",{className:"fa fa-times sugar-alert-close",onClick:function(){return t.closeNotice(a.hash)}}))):null:null},e=o.__decorate([a.observer],e)}(s.Component);e.default=i});
;sugar.define("sugar:widgets/iframe-dialog/iframe-dialog.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=e("sugar:node_modules/tslib/tslib.js"),s=e("sugar:utils/i18n.ts"),a=e("sugar:node_modules/react/index.js"),n=e("sugar:stores/index.ts"),l=e("sugar:node_modules/amis/lib/components/Modal.js"),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.render=function(){var e=this.props.assist,t=e.iframeDialogOpen,r=e.iframeDialogSrc,n=e.iframeDialogTitle;if(!t)return null;var i=!1;return/^https:/.test(window.location.href)&&/^http:/i.test(r)&&(i=!0),a.createElement(l.default,{size:"full",show:!0},a.createElement(l.default.Header,{showCloseButton:!0,onClose:this.props.assist.closeIframeDialog},a.createElement(l.default.Title,null,n||"")),a.createElement(l.default.Body,{style:{padding:0}},i?a.createElement("div",null,"当前网页协议是HTTPS，本弹框打开的页面协议是HTTP，浏览器不支持打开！",a.createElement("a",{href:window.location.href.replace(/^https:/,"http:"),target:"_self"},s.default("您可以点击这里进入HTTP方式"))):a.createElement("iframe",{src:r,frameBorder:"0",style:{height:"100%",width:"100%",border:"none",background:"transparent",overflow:"auto"}})))},t.displayName="IframeDialog",t=r.__decorate([n.inject(function(e){return{assist:e.assist}}),n.observer],t)}(a.Component);t.default=i});
;sugar.define("sugar:sites/app.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=e("sugar:node_modules/tslib/tslib.js"),o=e("sugar:node_modules/react/index.js"),a=e("sugar:node_modules/amis/lib/index.js"),s=e("sugar:widgets/progress.ts"),r=e("sugar:widgets/confirm.tsx"),i=e("sugar:widgets/pop-menu/pop-menu.tsx"),p=e("sugar:utils/common-helper.ts"),u=e("sugar:widgets/license-expired.tsx"),c=e("sugar:widgets/company-expired.tsx"),d=e("sugar:widgets/browser.tsx"),l=e("sugar:widgets/notice.tsx"),m=e("sugar:node_modules/axios/index.js"),g=e("sugar:stores/index.ts"),f=e("sugar:utils/url.ts"),h=e("sugar:widgets/product-type/product-type-modal.tsx"),y=e("sugar:widgets/iframe-dialog/iframe-dialog.tsx"),w=e("sugar:node_modules/classnames/index.js"),_=e("sugar:utils/storage.ts");e("sugar:sites/sugar-cxd.ts");var x=e("sugar:widgets/word-toast/word-toast.tsx"),v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.first=!0,t}return n.__extends(t,e),t.prototype.componentWillMount=function(){this.addCompanyToUrlParam=this.addCompanyToUrlParam.bind(this),this.getLang(),_.remove("loginExpired")},t.prototype.getLang=function(){return n.__awaiter(this,void 0,void 0,function(){var e,t,o;return n.__generator(this,function(){return e=_.get("language")||"zh_cn",t=window.lang,t||"zh_cn"===e?t!==e&&_.put("language",t):(o=p.changeUrlParam("sugarSetLanguage",e),window.location.href=o),m.defaults.headers.common["share-lang"]=t,[2]})})},t.prototype.openPopMenu=function(e){var t=i.popMenu.getPopMenuTree();t&&t.length&&e.target&&(e.preventDefault(),e.stopPropagation(),i.popMenu.show(e.clientX,e.clientY))},t.prototype.destroyPopMenu=function(){i.popMenu.hide(),i.popMenu.setPopMenuTree([])},t.prototype.componentWillReceiveProps=function(e){e.location.pathname!==this.props.location.pathname&&(this.destroyPopMenu(),setTimeout(this.addCompanyToUrlParam,50))},t.prototype.addCompanyToUrlParam=function(){var e=this,t=f.host+window.location.pathname,n=window.location.search,o=window.location.hash;if(!/^\/(dashboard|report|i)\//.test(window.location.pathname)){var a=n.split("&").map(function(e,t){return t?"&"+e:e});if(n.match(/\b__scp__\=/))a=a.map(function(t){if(t.match(/\b__scp__\=/)){var n=t.substr(0,1);return n+"__scp__="+e.props.company.emailSuffix}return t});else{var s="?";n&&(s="&"),a.push(s+"__scp__="+this.props.company.emailSuffix)}n=a.join("");var r=t+n+o;window.history.replaceState({path:r},"",r)}},t.prototype.componentDidMount=function(){document.addEventListener("contextmenu",this.openPopMenu),document.addEventListener("contextmenu",this.destroyPopMenu,!0),setTimeout(this.addCompanyToUrlParam,50)},t.prototype.render=function(){var e=window.sugarConfig,t=e.deployType,m=_.get("language")||"zh_cn";if("private"===t&&this.first){var g=e.sTime,f=new Date(6e3*g);if(Math.abs(+new Date-+f)>6048e5)return o.createElement("div",{className:p.lc},p.l.replace("$l",e.name))}return"saas"===t&&this.first&&"free"!==e.productType&&e.companyStatus>1?o.createElement("div",{className:p.lc},p.cp1,o.createElement("a",{target:"_blank",className:"text-info link-decoration",href:p.payLink},p.cp2),p.cp3):(this.first=!1,[o.createElement(s.default.Component,{key:"progress"}),o.createElement(r.ConfirmComponent,{key:"confirm"}),o.createElement(i.PopMenuComponent,{key:"popmenu"}),o.createElement(u.default,{key:"license"}),"saas"===t&&"free"===e.productType?o.createElement(c.default,{key:"companyExpired"}):null,"saas"===t?o.createElement(h.UpdateModalComponent,{key:"update"}):null,o.createElement(l.default,{key:"notice",notice:this.props.notice}),o.createElement(d.default,{key:"browser"}),o.createElement(a.ToastComponent,{position:this.props.company.toastPosition,timeOut:1800,errorTimeOut:2500,showAnimation:"sugar-toast-animated fadeIn",hideAnimation:"sugar-toast-animated fadeOut",showCloseButton:!0,extendedTimeOut:200,key:"amisToast"}),o.createElement(x.default,{position:"bottom",timeout:3e3,key:"wordToast"}),o.createElement(y.default,{key:"iframe-dialog"})].concat(o.createElement("div",{key:"container",className:w("popMenu-wrapper",{en:"en"===m}),onClickCapture:function(){return i.popMenu.hide()}},o.Children.map(this.props.children,function(e,t){return o.cloneElement(e,n.__assign({key:t},e.props))}))))},t.displayName="App",t=n.__decorate([g.inject(function(e){return{assist:e.assist,company:e.company.info,user:e.user.current,notice:e.notice}}),g.observer],t)}(o.Component);t.default=v});
;sugar.define("sugar:widgets/header/header.tsx",function(e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var t=e("sugar:node_modules/tslib/tslib.js"),l=e("sugar:node_modules/react/index.js"),n=e("sugar:node_modules/classnames/index.js"),s=e("sugar:node_modules/react-router/lib/index.js"),r=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.state={showNavBarMobile:!1},a}return t.__extends(a,e),a.prototype.render=function(){var e=this,a=this.props,t=a.logo,r=a.brandName,i=a.brandOutLink,d=a.brandInnerLink,o=a.nav,c=a.rightNav,m=a.mobileAsideToggle,u=this.state.showNavBarMobile,h=r?r:window.sugarConfig.name,g={fontSize:18};h.length>=11?g.fontSize=13:h.length>=9?g.fontSize=14:h.length>=8&&(g.fontSize=16);var b=l.createElement("div",{className:"navbar-brand text-lt text-ellipsis",style:{paddingRight:5}},t?t:l.createElement("i",{className:"fa fa-chart-line"}),l.createElement("span",{className:"hidden-folded m-l-sm",style:g},h));return d?b=l.createElement(s.Link,{to:d},l.createElement("div",{className:"navbar-brand text-lt text-ellipsis",style:{paddingRight:5}},t?t:l.createElement("i",{className:"fa fa-chart-line"}),l.createElement("span",{className:"hidden-folded m-l-sm",style:g},h))):i&&(b=l.createElement("a",{href:i},l.createElement("div",{className:"navbar-brand text-lt text-ellipsis",style:{paddingRight:5}},t?t:l.createElement("i",{className:"fa fa-chart-line"}),l.createElement("span",{className:"hidden-folded m-l-sm",style:g},h)))),[l.createElement("div",{key:0,className:"navbar-header bg-black"},l.createElement("button",{className:"pull-right visible-xs dk",onClick:function(){return e.setState({showNavBarMobile:!u})}},l.createElement("i",{className:"glyphicon glyphicon-cog"})),m||null,b),l.createElement("div",{key:1,className:n("collapse pos-rlt navbar-collapse box-shadow bg-white",{show:u})},o,c?l.createElement("ul",{className:"nav navbar-nav navbar-right"},c):null)]},a.displayName="Header",a}(l.PureComponent);a.default=r});
;sugar.define("sugar:widgets/login-info.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=e("sugar:node_modules/tslib/tslib.js"),n=e("sugar:utils/i18n.ts"),l=e("sugar:node_modules/react/index.js"),s=e("sugar:node_modules/classnames/index.js"),i=e("sugar:node_modules/react-router/lib/index.js"),m=e("sugar:node_modules/react-onclickoutside/lib/index.js"),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.componentWillMount=function(){this.setState({open:!1}),this.toggleOpen=this.toggleOpen.bind(this),this.close=this.close.bind(this),this.handleClickOutside=this.handleClickOutside.bind(this)},t.prototype.toggleOpen=function(){this.setState({open:!this.state.open})},t.prototype.close=function(){this.setState({open:!1})},t.prototype.handleClickOutside=function(){this.close()},t.prototype.render=function(){{var e=this.props.user,t=this.state.open,a=window.sugarConfig;a.deployType}return l.createElement("li",{className:s("dropdown",{open:t})},l.createElement("a",{onClick:this.toggleOpen,className:"dropdown-toggle clear"},l.createElement("span",{className:"thumb-sm avatar pull-right m-t-n-sm m-b-n-sm m-l-sm"},l.createElement("img",{src:e.avatar,alt:"..."}),l.createElement("i",{className:"on md b-white bottom"})),l.createElement("span",{className:"hidden-1350"},e.realName)," ",l.createElement("b",{className:"caret"})),l.createElement("ul",{className:"dropdown-menu animated fadeInRight w"},l.createElement("li",{className:"wrapper-sm b-b bg-light m-t-n-xs"},l.createElement("div",null,e.email)),l.createElement("li",null,l.createElement(i.Link,{to:"/i"},l.createElement("span",{className:"fa fa-user-circle"}),l.createElement("span",{className:"m-l"},n.default("个人中心")))),l.createElement("li",null,l.createElement(i.Link,{to:"/groups"},l.createElement("span",{className:"fa fa-th"}),l.createElement("span",{className:"m-l"},n.default("空间广场")))),e.companyAdmin?l.createElement("li",null,l.createElement(i.Link,{to:"/company/state"},l.createElement("span",{className:"fa fa-building"}),l.createElement("span",{className:"m-l"},n.default("组织管理")))):null,window.sugarConfig.homeRedirectLogin?null:l.createElement("li",null,l.createElement("a",{href:"/home"},l.createElement("span",{className:"fa fa-home"}),l.createElement("span",{className:"m-l"},n.default("首页")))),l.createElement("li",{className:"divider"}),l.createElement("li",null,l.createElement("a",{href:"/logout"},l.createElement("span",{className:"fa fa-sign-out"}),l.createElement("span",{className:"m-l"},n.default("退出"))))))},t.displayName="LoginInfo",t=a.__decorate([m.default],t)}(l.Component);t.default=o});
;sugar.define("sugar:widgets/feedback.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=e("sugar:node_modules/tslib/tslib.js"),s=e("sugar:utils/i18n.ts"),n=e("sugar:node_modules/react/index.js"),r=e("sugar:node_modules/classnames/index.js"),o=window.sugarConfig?window.sugarConfig.deployType:"private",l=n.createElement("ul",{className:"dropdown-menu"},n.createElement("li",null,n.createElement("a",{target:"_blank",href:"https://ticket.bce.baidu.com/#/ticket/create~productId=185"},n.createElement("i",{className:"fa fa-cloud m-r-xs text-info-dker"}),s.default("百度云工单"))),n.createElement("li",null,n.createElement("a",{target:"_blank",href:"//shang.qq.com/wpa/qunwpa?idkey=d59847c38336d0a547bbd8f5e0214c94510f1e4cc9cd78ae5d85be3e5939e2f5"},n.createElement("i",{className:"fa fa-qq m-r-xs text-info-dker"}),s.default("QQ群(834706287)"))),n.createElement("li",null,n.createElement("a",{href:"mailto:sugar@baidu.com"},n.createElement("i",{className:"fa fa-paper-plane m-r-xs text-info-dker"}),s.default("邮箱(sugar@baidu.com)"))),n.createElement("li",null,n.createElement("a",{target:"_blank",href:"https://github.com/baidubce/sugar"},n.createElement("i",{className:"fa fa-github m-r-xs text-info-dker"}),"Sugar GitHub"))),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.componentWillMount=function(){this.setState({show:!1}),this.show=this.show.bind(this),this.hide=this.hide.bind(this)},t.prototype.show=function(){this.setState({show:!0})},t.prototype.hide=function(){this.setState({show:!1})},t.prototype.render=function(){var e=this.props.inEditor;return"saas"!==o?e?null:n.createElement("li",{key:"contact",className:"hidden-sm hidden-xs"},n.createElement("a",{href:"/docs/Contact",target:"_blank"},s.default("联系我们"))):e?n.createElement("li",{className:r("btn-item dropdown sugar-feedback",{open:this.state.show}),style:{cursor:"default"},onMouseOver:this.show,onMouseOut:this.hide},n.createElement("div",{className:"btn-container dropdown-toggle"},n.createElement("i",{className:"fa fa-commenting-o",style:{color:"rgb(202, 82, 82)"}}),n.createElement("span",{className:"btn-text"},s.default("咨询反馈"))),l):n.createElement("li",{className:r("dropdown hidden-sm sugar-feedback hidden-xs",{open:this.state.show}),onMouseOver:this.show,onMouseOut:this.hide},n.createElement("a",{className:"dropdown-toggle"},n.createElement("i",{className:"fa fa-commenting-o",style:{color:"rgb(212, 60, 60)",marginRight:5}}),s.default("咨询反馈")),l)},t.displayName="FeedBack",t}(n.PureComponent);t.default=i});
;sugar.define("sugar:widgets/avatar-editor.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=e("sugar:node_modules/tslib/tslib.js"),s=e("sugar:utils/i18n.ts"),n=e("sugar:node_modules/react/index.js"),r=e("sugar:node_modules/axios/index.js"),o=e("sugar:node_modules/amis/lib/renderers/Form/Image.js"),u=e("sugar:node_modules/amis/lib/index.js"),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.render=function(){return n.createElement(o.default,{value:this.props.value,onChange:this.props.onChange,reciever:"/api/image/upload",crop:{aspectRatio:1},classnames:u.classnames,maxSize:819200,translate:s.translate,locale:s.lang,env:{fetcher:function(e,t){return r.default.post("/api/image/upload",t).then(function(e){return e.data&&0==e.data.status?{status:0,data:{url:e.data.link}}:{status:1}})},notify:function(e,t){u.toast[e]?u.toast[e](t,s.default("error"===e?"系统错误":"系统消息")):console.warn("[Notify]",e,t)},alert:u.alert,confirm:u.confirm}})},t.displayName="AvatarEditor",t}(n.PureComponent);t.default=i});
;sugar.define("sugar:sites/group/manage/group-setting/group-form.tsx",function(e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.getGroupForm=void 0;var t=e("sugar:utils/i18n.ts"),l=e("sugar:node_modules/react/index.js"),o=e("sugar:node_modules/amis/lib/index.js"),n=e("sugar:widgets/avatar-editor.tsx"),i=/^[\-_0-9a-zA-Z]+$/;o.addRule("isSatisfyRegExp",function(e,a){return a?i.test(a):!1},t.default("只能包含字母、数字、横杠和下划线")),a.getGroupForm=function(e){var a=e.title,i=e.onSubmit,d=e.mode,r=void 0===d?"add":d,u=e.typeDisabled,s=void 0===u?!1:u,m=e.initialState,p=void 0===m?{}:m,f="update"===r,c=2,b=10;f&&(c=3,b=9);var g=[{type:"text",name:"name",label:t.default("名称"),required:!0,validations:{maxLength:30}},f?{type:"static",label:t.default("访问地址"),value:location.host+"/group/"+p.key||""}:{type:"text",name:"key",label:t.default("访问地址"),required:!0,validations:{maxLength:40,isSatisfyRegExp:!0},addOn:{position:"left",type:"static",label:location.host+"/group/"},description:t.default("只能包含字母、数字、横杠和下划线")}];return window.sugarConfig.forbidGroupPublic||g.push({type:"button-group",name:"type",disabled:s,label:t.default("空间类型"),options:[{label:t.default("普通"),value:0},{label:t.default("组织内公开"),value:1}]}),g.push({name:"avatar",children:function(e){var a=e.onChange,t=e.value;return l.createElement("div",{className:"a-Form-item a-Form-item--horizontal"},l.createElement("label",{className:"a-Form-label a-Form-itemColumn--"+c+" text--right"},"logo"),l.createElement("div",{className:"a-Form-value a-Form-itemColumn--"+b},l.createElement(n.default,{value:t,onChange:a})))}}),f&&g.push({type:"switch",name:"onlyAuthReportTree",visibleOn:"type < 1",label:t.default("目录只显示有权限的报表和大屏")},{type:"switch",name:"tableViewNotTotal",label:t.default("数据表预览不统计总行数")},{type:"button-group",name:"navWidth",label:t.default("左边栏宽度"),options:[{label:t.default("常规"),value:"normal"},{label:t.default("加宽"),value:"wide"}]},{type:"text",name:"reportRootName",validations:"maxLength:30",label:t.default("空间中报表根目录名称"),placeholder:t.default("默认是：报表")},{type:"text",name:"dashboardRootName",validations:"maxLength:30",label:t.default("空间中大屏根目录名称"),placeholder:t.default("默认是：数据大屏")},{type:"text",name:"token",label:"API Token",description:'<a href="/docs/DataBind-API-Secure" target="_blank" class="text-info">'+t.default("文档说明")+"</a>",validations:{maxLength:30}},{type:"table",name:"macro",editable:!0,addable:!0,removable:!0,showAddBtn:!0,columns:[{type:"text",name:"key",placeholder:t.default("名称必须是大写字母和下划线如 API_HOST"),label:t.default("名称")},{type:"text",name:"value",label:t.default("取值")}],label:t.default("API宏定义变量"),description:"<span>"+t.default("最多只能定义10个宏变量")+'</span>\n                            <a href="/docs/DataBind-API-Macro#空间级别宏定义" class="text-info" target="_blank">\n                              '+t.default("文档说明")+"\n                            </a>",validations:{maxLength:10}}),g.push({type:"textarea",name:"remark",label:t.default("简介"),placeholder:t.default("对该空间的简单描述"),validations:{maxLength:50}}),{type:"form",title:a||"",data:p,mode:"horizontal",onFinished:function(e){return f&&e.macro&&e.macro.length>10?(o.toast.error(t.default("最多只能定义10个宏变量")),!1):(i(e),!1)},horizontal:{left:"col-md-"+c,right:"col-md-9"+b},controls:g,actions:[{type:"button",actionType:"submit",level:"primary",label:t.default("确认")}]}}});
;sugar.define("sugar:sites/groups/add-group.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=e("sugar:node_modules/tslib/tslib.js"),r=e("sugar:utils/i18n.ts"),o=e("sugar:node_modules/react/index.js"),n=e("sugar:node_modules/axios/index.js"),s=e("sugar:node_modules/amis/lib/index.js"),u=e("sugar:sites/group/manage/group-setting/group-form.tsx"),i=e("sugar:sites/amis-renderer.tsx"),d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.getRandGroupName=function(){return a.__awaiter(t,void 0,void 0,function(){var e,t;return a.__generator(this,function(a){switch(a.label){case 0:return[4,n.default.get("/api/manage/group/getRandGroupName")];case 1:return e=a.sent(),(null===(t=null===e||void 0===e?void 0:e.data)||void 0===t?void 0:t.data)&&this.setState({randomGroupName:e.data.data.replace(/ /g,"_")}),[2]}})})},t}return a.__extends(t,e),t.prototype.componentWillMount=function(){this.setState({randomGroupName:""}),this.getRandGroupName()},t.prototype.render=function(){var e=this.props,t=e.onClose,a=e.submit;return o.createElement(s.Modal,{show:!0,size:"md"},o.createElement(s.Modal.Header,{showCloseButton:!0,onClose:t},o.createElement(s.Modal.Title,null,r.default("创建报表空间"))),o.createElement(s.Modal.Body,null,o.createElement(i.default,{key:"addGroup"+(this.state.randomGroupName||""),schema:u.getGroupForm({onSubmit:a,initialState:{name:"",key:this.state.randomGroupName||"aaaaaa",remark:"",type:0,navWidth:"normal",avatar:""}})})))},t.displayName="AddGroup",t}(o.PureComponent);t.default=d});
;sugar.define("sugar:sites/groups/admin-list.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=e("sugar:node_modules/tslib/tslib.js"),n=e("sugar:utils/i18n.ts"),a=e("sugar:node_modules/react/index.js"),r=e("sugar:node_modules/amis/lib/index.js"),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return l.__extends(t,e),t.prototype.render=function(){var e=this.props,t=e.onClose,l=e.admins,s=e.title,o=e.tip;return a.createElement(r.Modal,{show:!0,size:"md"},a.createElement(r.Modal.Header,{showCloseButton:!0,onClose:t},a.createElement(r.Modal.Title,null,s)),a.createElement(r.Modal.Body,null,a.createElement("div",null,o),a.createElement("div",{className:"m-t m-b"},n.default("组织的管理员如下：")),a.createElement("div",null,l.map(function(e,t){return a.createElement("div",{key:t,className:"m-t-sm m-l-sm text-info-dk"},a.createElement("a",{href:"mailto:"+e.email},e.realName+"("+e.name+")"))}))),a.createElement(r.Modal.Footer,null,a.createElement(r.Button,{level:"primary",onClick:t},n.default("确定"))))},t}(a.PureComponent);t.default=s});
;sugar.define("sugar:sites/group/manage/group-setting/group-delete.tsx",function(e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.GroupDelete=a.createSchema=void 0;var t=e("sugar:utils/i18n.ts"),l=e("sugar:node_modules/react/index.js"),n=e("sugar:sites/amis-renderer.tsx");a.createSchema=function(e,a){var l=e.name,n=e.hash;return{body:{type:"button",label:t.default("删除空间"),actionType:"dialog",level:"danger",dialog:{title:t.default("删除空间"),onConfirm:function(e){a&&a(e[0])},body:{type:"form",mode:"normal",controls:[{type:"static",value:l,label:t.default("空间名称")},{name:"name",label:t.default("输入空间名称来确认删除"),type:"text",required:!0,validations:"matchRegexp:/^"+l+"$/",validationErrors:{matchRegexp:t.default("输入空间名称不匹配")}}]},actions:[{api:"delete:/api/manage/group/"+n+"?name="+l,type:"submit",actionType:"ajax",primary:!0,label:t.default("删除"),disabledOn:"data.name != "+l},{type:"button",actionType:"cancel",label:t.default("取消")}]}}}},a.GroupDelete=function(e){return l.createElement(n.default,{schema:{type:"form",title:"",panelClassName:"panel-danger",controls:[{type:"static",value:t.default("删除空间后，与当前空间相关的所有数据(报表、大屏、轮播、角色、用户、数据源、SQL模型、用户收藏的内容等)都会删除，并且不可恢复，请谨慎操作！")}],actions:[a.createSchema(e.data).body]},update:e.onSuccess})}});
;sugar.define("sugar:sites/groups/group-list/group-list.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=e("sugar:node_modules/tslib/tslib.js"),o=e("sugar:utils/i18n.ts"),s=e("sugar:node_modules/react/index.js"),n=e("sugar:node_modules/prop-types/index.js"),r=e("sugar:node_modules/amis/lib/index.js"),l=e("sugar:widgets/pagination.tsx"),i=e("sugar:sites/group/manage/group-setting/group-delete.tsx"),u=e("sugar:stores/index.ts"),m=e("sugar:node_modules/moment/moment.js"),c=e("sugar:widgets/form-dialog.tsx"),g=12,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.deleteGroupHashes=[],t.toggleShowDeleteInfoDialog=function(e){t.currentGroup=e,t.setState({showDeleteInfoDialog:!t.state.showDeleteInfoDialog})},t.toggleShowDeleteDialog=function(){t.setState({showDeleteDialog:!t.state.showDeleteDialog})},t}return a.__extends(t,e),t.prototype.componentWillMount=function(){if(this.setState({showDeleteDialog:!1,showDeleteInfoDialog:!1}),this.props.paging){var e=this.props.groups;e.load(0,g),this.setState({activePage:1})}else this.props.groups.load();this.onPageNumChange=this.onPageNumChange.bind(this),this.gotoGroup=this.gotoGroup.bind(this),this.toggleShowDeleteInfoDialog=this.toggleShowDeleteInfoDialog.bind(this)},t.prototype.onPageNumChange=function(e){var t=this.props.groups;t.load((e-1)*g,g),this.setState({activePage:e})},t.prototype.stopPropagation=function(e){return e.stopPropagation(),!1},t.prototype.gotoGroup=function(e){this.context.router.push(e)},t.prototype.render=function(){var e=this,t=this.props,a=t.title,n=t.groups,u=t.showAdmin,d=t.paging,p=t.me,h=t.showAction,f=0,v=n;if(f=v.total,"pending"===n.loadState)return s.createElement(r.Spinner,{overlay:!0,size:"lg"});if("error"===n.loadState||!n.data||!n.data.length)return null;var D=window.sugarConfig;return s.createElement("div",null,s.createElement("h4",{className:"group-list-title"},a),s.createElement("div",{className:"row"},n.data.map(function(t,a){var n;return e.deleteGroupHashes.includes(t.hash)?null:s.createElement("div",{key:a,className:"col-sm-6 col-md-4 col-lg-"+(D.hideDemoAndNews?"3":"4")},s.createElement("div",{className:"panel group-card",onClick:function(){return e.gotoGroup("/group/"+t.key)}},s.createElement("div",{className:"group-card__link"},s.createElement("div",{className:"panel-heading bg-white"},s.createElement("div",{className:"clearfix"},s.createElement("span",{className:"pull-left b-3x m-r-xs sugar-group-logo-container"},t.avatar?s.createElement("img",{className:"sugar-group-logo",src:t.avatar}):s.createElement("div",{className:"sugar-letter-logo large"},t.name.trim()[0].toUpperCase())),s.createElement("div",{className:"clear"},s.createElement("div",{className:"h4 m-t-xs m-b-xs text-ellipsis text-md text-name"},t.name),s.createElement("div",{className:"text-ellipsis text-muted text-sm",title:t.remark},o.default(t.remark||"暂无描述"))))),u?s.createElement("div",{className:"group-admin m-t-sm m-l m-b-sm text-ellipsis"},s.createElement("span",{className:"m-r-xs"},o.default("管理员: ")),t.admins&&t.admins.length?t.admins.map(function(a,o){return s.createElement("span",{key:o,className:"m-r-xs mailto-link"},s.createElement("a",{href:"mailto:"+a.email+"?subject=申请报表空间权限&body=hi "+((a.realName||a.name)+": %0d%0a%0d%0a我想申请报表空间『"+t.name+"』")+("的阅读权限，请您在用户管理中添加「"+(p&&p.email)+"」谢谢!"),onClick:e.stopPropagation},a.realName||a.name))}):s.createElement("span",{className:"text-muted"},o.default("无"))):null,2===t.type?s.createElement("div",{className:"group-card__badge group-card__badge--demo"}):1===t.type?s.createElement("div",{className:"group-card__badge group-card__badge--open"}):null),h&&s.createElement("div",{className:"box"},s.createElement("div",null,m(t.createDate).format("YYYY-MM-DD")),s.createElement("div",{className:"btn-groups"},(null===(n=t.GroupUser)||void 0===n?void 0:n.groupAdmin)||"demo"===t.key?[s.createElement("button",{key:"delete-"+t.key,onClick:function(a){e.stopPropagation(a),e.toggleShowDeleteInfoDialog(t)}},s.createElement("i",{className:"fa fa-trash","aria-hidden":"true"})),s.createElement("button",{key:"set-"+t.key,onClick:function(a){e.stopPropagation(a),e.context.router.push("/group/"+t.key+"/manage/setting")}},s.createElement("i",{className:"fa fa-cog","aria-hidden":"true"}))]:[s.createElement("button",{key:"delete-"+t.key,onClick:function(){return e.gotoGroup("/group/"+t.key)}},s.createElement("i",{className:"fa fa-external-link","aria-hidden":"true"}))]))))})),d&&f&&f>g?s.createElement("div",{className:"text-right"},s.createElement(l.default,{items:Math.floor(f/g)+(f%g?1:0),maxButtons:5,activePage:this.state.activePage,onSelect:this.onPageNumChange})):null,s.createElement(c.default,{className:"props-name-model",show:this.state.showDeleteInfoDialog,title:o.default("删除空间"),onClose:function(){return e.setState({showDeleteInfoDialog:!1})},onConfirm:this.toggleShowDeleteDialog,controls:[o.default("删除空间后，与当前空间相关的所有数据(报表、大屏、轮播、角色、用户、数据源、SQL模型、用户收藏的内容等)都会删除，并且不可恢复，请谨慎操作！")],confirmBtn:i.createSchema(this.currentGroup||{},function(){e.currentGroup&&(e.deleteGroupHashes.push(e.currentGroup.hash),e.setState({showDeleteInfoDialog:!1}))}).body,size:"md"}))},t.displayName="GroupList",t.defaultProps={showAdmin:!1,paging:!1,showAction:!1},t.contextTypes={router:n.object},t=a.__decorate([u.observer],t)}(s.Component);t.default=d});
;sugar.define("sugar:sites/groups/switch-company/switch-company.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=e("sugar:node_modules/tslib/tslib.js"),a=e("sugar:utils/i18n.ts"),n=e("sugar:node_modules/react/index.js"),i=e("sugar:node_modules/classnames/index.js"),o=e("sugar:stores/index.ts"),l=e("sugar:node_modules/react-router/lib/index.js"),r=e("sugar:sites/sugar-cxd.ts"),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s.__extends(t,e),t.prototype.componentWillMount=function(){this.setState({open:!1}),this.show=this.show.bind(this),this.hide=this.hide.bind(this)},t.prototype.show=function(){this.state.open||this.setState({open:!0})},t.prototype.hide=function(){this.state.open&&this.setState({open:!1})},t.prototype.render=function(){var e=this.state.open,t=this.props.company;return"saas"!==window.sugarConfig.deployType||!t.myCompanys||t.myCompanys.length<1?null:n.createElement("div",{className:i("m-l dropdown btn-group switch-company",{open:e}),onMouseOver:this.show,onMouseOut:this.hide},n.createElement("button",{type:"button",className:r.classPrefix+"Button "+r.classPrefix+"Button--default"},a.default("组织切换"),n.createElement("span",{className:"caret"})),n.createElement("div",{className:"fill-blank"}),n.createElement("ul",{className:"dropdown-menu pull-right"},t.myCompanys.map(function(e,s){return e.emailSuffix===t.info.emailSuffix?n.createElement("li",{key:s},n.createElement("a",{tabIndex:-1,className:"text-info"},n.createElement("i",{className:"fa fa-check m-r-xs"}),e.name)):n.createElement("li",{key:s},n.createElement("a",{target:"_self",tabIndex:-1,href:"/groups?__scp__="+e.emailSuffix},n.createElement("i",{className:"fa blank"}),e.name))}),n.createElement("li",{className:"divider"}),n.createElement("li",null,n.createElement(l.Link,{to:"/i/manage/company"},n.createElement("i",{className:"fa blank"}),a.default("新建组织")))))},t=s.__decorate([o.observer],t)}(n.Component);t.default=u});
;sugar.define("sugar:widgets/product-type-tip.tsx",function(e,t){"use strict";function a(){var e=window.sugarConfig.sTime,t=new Date(6e3*e),a=new Date(window.sugarConfig.companyETime),n=0;return n=t>a?-1:parseInt((+a-+t)/864e5,10)}Object.defineProperty(t,"__esModule",{value:!0}),t.getFreeCompanyRemainDays=void 0;var n=e("sugar:node_modules/tslib/tslib.js"),s=e("sugar:utils/i18n.ts"),o=e("sugar:node_modules/react/index.js"),r=e("sugar:node_modules/classnames/index.js"),i=e("sugar:utils/common-helper.ts"),u=e("sugar:widgets/product-type/product-type-modal.tsx"),l=e("sugar:widgets/product-type/product-type-contant.tsx"),c=window.sugarConfig?window.sugarConfig.deployType:"private",d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.componentWillMount=function(){this.setState({show:!1}),this.show=this.show.bind(this),this.hide=this.hide.bind(this)},t.prototype.show=function(){this.setState({show:!0})},t.prototype.hide=function(){this.setState({show:!1})},t.prototype.render=function(){if("saas"!==c)return null;var e=window.sugarConfig.nowProductConfig,t=[];if("free"===e.type&&new Date(window.sugarConfig.companyETime).getFullYear()>1971){var n=a();t.push(o.createElement("li",{key:"flag"},o.createElement("a",{href:"javascript:void(0)"},o.createElement("i",{className:"fa fa-flag m-r-xs text-info-dker"}),s.default(0>n?"已到期":"「"+(n+1)+"」天后过期"))))}return t.push(o.createElement("li",{key:"update"},o.createElement("a",{target:"_blank",href:i.payLink},o.createElement("i",{className:"fa fa-chevron-circle-up m-r-xs text-info-dker"}),s.default("续费和升级")))),t.push(o.createElement("li",{key:"showUpdate"},o.createElement("a",{target:"_blank",onClick:function(){return u.showUpdate()}},o.createElement("i",{className:"fa fa-info-circle m-r-xs text-info-dker"}),s.default("各版本详情")))),o.createElement("li",{className:r("dropdown sugar-feedback",{open:this.state.show}),onMouseOver:this.show,onMouseOut:this.hide},o.createElement("a",{className:"dropdown-toggle"},o.createElement("i",{className:"fa fa-bolt",style:{color:l.productColorMap[e.type],marginRight:5}}),e.name,o.createElement("b",{className:"caret"})),o.createElement("ul",{className:"dropdown-menu"},t))},t.displayName="ProductTypeTip",t}(o.PureComponent);t.default=d,t.getFreeCompanyRemainDays=a});
;sugar.define("sugar:widgets/i18n.tsx",function(e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var t=e("sugar:node_modules/tslib/tslib.js"),r=e("sugar:node_modules/react/index.js"),a=e("sugar:utils/storage.ts"),i=e("sugar:utils/common-helper.ts"),u=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.setEnglish=function(){return t.__awaiter(n,void 0,void 0,function(){var e;return t.__generator(this,function(){return a.put("language","en"),e=i.changeUrlParam("sugarSetLanguage","en"),window.location.href=e,[2]})})},n.setChinese=function(){return t.__awaiter(n,void 0,void 0,function(){var e;return t.__generator(this,function(){return a.put("language","zh_cn"),e=i.changeUrlParam("sugarSetLanguage","zh_cn"),window.location.href=e,[2]})})},n}return t.__extends(n,e),n.prototype.render=function(){var e=a.get("language");return r.createElement("li",{key:"English"},"en"===e?r.createElement("a",{href:"#!",onClick:this.setChinese},"中文"):r.createElement("a",{href:"#",onClick:this.setEnglish},"English"))},n.displayName="i18n",n}(r.Component);n.default=u});
;sugar.define("sugar:sites/groups/demo-list/videoList.ts",function(a,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=a("sugar:utils/i18n.ts");e.default=[{name:t.default("产品介绍"),desc:t.default("介绍Sugar产品的主要功能和优势，并提供大屏示例和报表示例。"),src:"https://doc.bce.baidu.com/bce-documentation/Sugar/Sugar_Product_1.mp4",img:"https://doc.bce.baidu.com/bce-documentation/Cover/Sugar_Product_1.png"},{name:t.default("添加数据源操作指导"),desc:t.default("介绍Sugar产品中如何添加数据源。"),src:"https://doc.bce.baidu.com/bce-documentation/Sugar/Sugar_AddData_1.mp4",img:"https://doc.bce.baidu.com/bce-documentation/Cover/Sugar_AddData_1.png"},{name:t.default("创建数据模型操作指导"),desc:t.default("介绍如何在Sugar产品中创建数据模型。"),src:"https://doc.bce.baidu.com/bce-documentation/Sugar/Sugar_CreateDataModel_1.mp4",img:"https://doc.bce.baidu.com/bce-documentation/Cover/Sugar_CreateDataModel_1.png"},{name:t.default("报表制作和数据分析操作指导"),desc:t.default("介绍如何在Sugar中创建报表及进行数据分析。"),src:"https://doc.bce.baidu.com/bce-documentation/Sugar/Sugar_Chart_Data_1.mp4",img:"https://doc.bce.baidu.com/bce-documentation/Cover/Sugar_Chart_Data_1.png"},{name:t.default("报表下钻操作指导"),desc:t.default("介绍如何在报表制作中使用下钻功能。"),src:"https://doc.bce.baidu.com/bce-documentation/Sugar/Sugar_ChartDrilldown_1.mp4",img:"https://doc.bce.baidu.com/bce-documentation/Cover/Sugar_ChartDrilldown_1.png"},{name:t.default("报表联动操作指导"),desc:t.default("介绍如何在报表中实现联动功能。"),src:"https://doc.bce.baidu.com/bce-documentation/Sugar/Sugar_ChartDependence_1.mp4",img:"https://doc.bce.baidu.com/bce-documentation/Cover/Sugar_ChartDependence_1.png"},{name:t.default("大屏操作指导"),desc:t.default("介绍Sugar产品中如何创建大屏。"),src:"https://doc.bce.baidu.com/bce-documentation/Sugar/Sugar_ChartDashboard_1.mp4",img:"https://doc.bce.baidu.com/bce-documentation/Cover/Sugar_ChartDashboard_1.png"},{name:t.default("轮播管理操作指导"),desc:t.default("介绍轮播管理的相关操作。"),src:"https://doc.bce.baidu.com/bce-documentation/Sugar/Sugar_ChartTableplay_1.mp4",img:"https://doc.bce.baidu.com/bce-documentation/Cover/Sugar_ChartTableplay_1.png"},{name:t.default("用户及权限管理操作指导"),desc:t.default("介绍用户管理和权限管理的相关操作。"),src:"https://doc.bce.baidu.com/bce-documentation/Sugar/Sugar_User_1.mp4",img:"https://doc.bce.baidu.com/bce-documentation/Cover/Sugar_User_1.png"}]});
;sugar.define("sugar:sites/groups/demo-list/demo-list.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=e("sugar:node_modules/tslib/tslib.js"),n=e("sugar:utils/i18n.ts"),s=e("sugar:node_modules/react/index.js"),o=e("sugar:node_modules/amis/lib/index.js"),i=e("sugar:node_modules/mobx/lib/mobx.js"),l=e("sugar:stores/index.ts"),r=e("sugar:sites/groups/demo-list/videoList.ts"),d=e("sugar:node_modules/moment/moment.js"),c=e("sugar:node_modules/classnames/index.js"),m=e("sugar:widgets/form-dialog.tsx"),_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.updating=!1,t.tabIndex=0,t.newsDetail=n.default("暂无内容"),t}return a.__extends(t,e),t.prototype.componentWillMount=function(){this.setState({showNewsDialog:!1}),this.props.demoList.load(),this.props.productNews.load()},t.prototype.toggleShowNewsDialog=function(){this.setState({showNewsDialog:!this.state.showNewsDialog})},t.prototype.getDemoList=function(){var e=this.props.demoList;return e.data.map(function(e,t){var a="/demo/"+e.demoKey;return s.createElement("a",{href:a,target:"_blank",key:t,className:"demo-container__list__item col-md-12 col-lg-6",title:e.name},s.createElement("div",{className:"demo-container__list__item__img",style:{backgroundImage:"url("+e.thumbImgUrl+")"}}),s.createElement("span",{className:"demo-container__list__item__name text-ellipsis"},e.name))})},t.prototype.getNewsList=function(){var e=this,t=this.props.productNews;if(t.data.length)return s.createElement("ul",{className:"product-news__list"},t.data.map(function(t,a){return s.createElement("li",{key:"productNews-"+a,className:"product-news__list__item",onClick:function(){if(1===t.type&&t.content){var a=t.content;a.match(/^((http|https):)?\/\//)||(a="//"+a),window.open(a)}else e.newsDetail=t.content,e.toggleShowNewsDialog()}},s.createElement("div",{className:"product-news__list__item__title"},t.title),s.createElement("div",{className:"product-news__list__item__desc"},t.description),s.createElement("div",{className:"product-news__list__item__date"},d(t.date).format("YYYY-MM-DD")))}));var a=t.defaultData,o=a.tag,i=a.list;return[s.createElement("h3",{key:"newsTitle",className:"product-news__header--default"},n.default("版本「"+o+"」更新内容")),s.createElement("ul",{key:"newContent",className:"product-news__list--default"},i.map(function(e,t){return s.createElement("li",{key:"productNews-"+t},n.default(e))}))]},t.prototype.getVideoList=function(){return r.default.map(function(e,t){return s.createElement("a",{href:e.src,target:"_blank",key:t,className:"demo-container__list__item col-md-12 col-lg-6",title:e.desc},s.createElement("div",{className:"demo-container__list__item__img",style:{backgroundImage:"url("+e.img+")"}},s.createElement("div",{className:"demo-container__list__item__img__cover"},s.createElement("i",{className:"fa fa-play"}))),s.createElement("span",{className:"demo-container__list__item__name text-ellipsis"},e.name))})},t.prototype.render=function(){var e,t,a,i=this,l=this.props,r=l.demoList,d=l.productNews;"done"===r.loadState&&r.shouldUpdate&&(e=s.createElement("div",null,n.default("您的典型案例列表需要更新"),"  ","private"===window.sugarConfig.deployType?this.updating?n.default("更新中..."):s.createElement("a",{className:"text-info",onClick:function(){i.updating=!0,r.update().then(function(){return i.updating=!1})}},n.default("点此更新")):null)),t="done"===r.loadState?this.getDemoList():s.createElement(o.Spinner,{overlay:!0}),a="done"===(null===d||void 0===d?void 0:d.loadState)?this.getNewsList():s.createElement(o.Spinner,{overlay:!0});var _=window.sugarConfig,u=_.disableEntry,p=_.disableProductNews;return[s.createElement("div",{className:c("demo-container demo-container--case box-shadow",{"all-heigth":p&&u}),key:"case"},s.createElement("div",{className:"demo-container__title"},n.default("典型案例")),s.createElement("div",{className:"demo-container__roll"},s.createElement("div",{className:"demo-container__tip"},e),s.createElement("div",{className:"demo-container__list row"},t))),p&&u?null:s.createElement("div",{className:"demo-container demo-container--news box-shadow",key:"news"},s.createElement("div",{className:"demo-container__tabs"},p?null:s.createElement("div",{className:"demo-container__tabs__title "+(0!==this.tabIndex||u||p?"":"demo-container__tabs__title--active"),onClick:function(){return i.tabIndex=0}},n.default("产品动态")),u?null:s.createElement("div",{className:"demo-container__tabs__title "+(1!==this.tabIndex||u||p?"":"demo-container__tabs__title--active"),onClick:function(){return i.tabIndex=1}},n.default("快速入门"))),s.createElement("div",{className:"demo-container__content"},p?null:s.createElement("div",{className:"demo-container__roll demo-container__content__item"+(0===this.tabIndex||u?"--active":""),style:{overflowX:"hidden"}},s.createElement("div",{className:"demo-container__tip"},e),s.createElement("div",{className:"demo-container__list row product-news"},a)),u?null:s.createElement("div",{className:"demo-container__roll demo-container__content__item"+(1===this.tabIndex||p?"--active":"")},s.createElement("div",{className:"demo-container__tip"},e),s.createElement("div",{className:"demo-container__list row"},this.getVideoList())))),s.createElement(m.default,{key:"news-detail",className:"props-name-model",show:this.state.showNewsDialog,title:n.default("详情"),onClose:function(){return i.setState({showNewsDialog:!1})},onConfirm:this.toggleShowNewsDialog,controls:[{type:"html",html:this.newsDetail}],hideBtn:!0,size:"md"})]},t.displayName="DemoList",a.__decorate([i.observable,a.__metadata("design:type",Object)],t.prototype,"updating",void 0),a.__decorate([i.observable,a.__metadata("design:type",Object)],t.prototype,"tabIndex",void 0),t=a.__decorate([l.inject(function(e){return{demoList:e.demo.list,productNews:e.productNews}}),l.observer],t)}(s.Component);t.default=_});
;sugar.define("sugar:sites/groups/index.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=e("sugar:node_modules/tslib/tslib.js"),s=e("sugar:node_modules/react/index.js"),l=e("sugar:node_modules/react-document-title/index.js"),r=e("sugar:node_modules/react-router/lib/index.js"),o=e("sugar:node_modules/amis/lib/index.js"),n=e("sugar:widgets/progress.ts"),i=e("sugar:widgets/header/header.tsx"),d=e("sugar:widgets/login-info.tsx"),u=e("sugar:widgets/feedback.tsx"),m=e("sugar:sites/groups/add-group.tsx"),c=e("sugar:sites/groups/admin-list.tsx"),g=e("sugar:sites/groups/group-list/group-list.tsx"),p=e("sugar:sites/groups/switch-company/switch-company.tsx"),f=e("sugar:stores/index.ts"),h=e("sugar:widgets/product-type-tip.tsx"),E=e("sugar:utils/common-helper.ts"),y=e("sugar:utils/i18n.ts"),w=e("sugar:widgets/i18n.tsx"),x=e("sugar:sites/groups/demo-list/demo-list.tsx"),G=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.componentWillMount=function(){this.setState({showAddGroup:!1,showAdminList:!1}),this.toggleAddGroup=this.toggleAddGroup.bind(this),this.toggleAdminList=this.toggleAdminList.bind(this),this.createGroup=this.createGroup.bind(this)},t.prototype.toggleAddGroup=function(){this.setState({showAddGroup:!this.state.showAddGroup})},t.prototype.toggleAdminList=function(){this.setState({showAdminList:!this.state.showAdminList})},t.prototype.createGroup=function(e){var t=this;n.default.show(),this.props.group.myGroups.add(e).then(function(){n.default.hide(),t.setState({showAddGroup:!1}),o.toast.success(y.default("创建报表空间成功"))}).catch(function(e){n.default.hide(),o.toast.error(e.message)})},t.prototype.render=function(){var e=this.props,t=e.user,a=e.company,n=e.group,f=a.info,G=a.admins,N=this.state,b=N.showAddGroup,A=N.showAdminList,v=window.sugarConfig,k=v.deployType,L=s.createElement(i.default,{brandName:"private"===k?v.companyName:f.name||v.name,brandOutLink:"/home",logo:s.createElement("img",{src:f.avatar||window.sugarConfig.logo||"/static/logo.png",className:"navbar-brand__logo"}),rightNav:[v.homeRedirectLogin?null:s.createElement("li",{key:"home"},s.createElement("a",{href:"/home",target:"_self"},y.default("首页"))),s.createElement("li",{key:"i"},s.createElement(r.Link,{to:"/i"},y.default("个人中心"))),v.hideDocsLink?null:s.createElement("li",{key:"doc"},s.createElement("a",{href:"/docs",target:"_blank"},y.default("帮助文档"))),v.hideDocsLink?null:s.createElement("li",{key:"changelog"},s.createElement("a",{href:"/docs/Changelog",target:"_blank"},y.default("更新日志"))),v.hideDocsLink?null:s.createElement(u.default,{key:"feedback"}),s.createElement(h.default,{key:"productTypeTip"}),s.createElement(w.default,{key:"i18n"}),s.createElement(d.default,{key:"login-info",user:t})]}),_=window.sugarConfig.nowProductConfig,C=null;if(_&&"free"===_.type){var D=h.getFreeCompanyRemainDays();new Date(v.companyETime).getFullYear()>1971&&(C=s.createElement("div",{className:"text--center"},0>D?y.default("当前试用版组织已到期，"):"当前组织为试用版，将于「"+(D+1)+"」天后过期，",s.createElement("a",{target:"_blank",className:"text-info link-decoration",href:E.payLink},y.default("立即购买"))))}return s.createElement(o.Layout,{header:L,footer:null,className:"group-space"},s.createElement(l,{title:y.default("空间广场")}),s.createElement("div",{className:"bg-white lter b-b clearfix wrapper-sm group-space-title"},s.createElement("div",{className:"pull-right"},t.companyAdmin?s.createElement(r.Link,{to:"private"===k?"/company/state":"/company/setting",className:"hidden-xs"},s.createElement(o.Button,{level:"default",className:"m-r"},s.createElement("i",{className:"fa fa-cog m-r-xs"}),y.default("组织管理"))):s.createElement(o.Button,{level:"default",className:"m-r hidden-xs",onClick:this.toggleAdminList},s.createElement("i",{className:"fa fa-users m-r-xs"}),y.default("查看管理员")),t.companyAdmin?s.createElement(r.Link,{to:"/company/manage/user",className:"hidden-xs"},s.createElement(o.Button,{level:"default",className:"m-r"},s.createElement("i",{className:"fa fa-user m-r-xs"}),y.default("邀请同事"))):null,s.createElement(o.Button,{level:"primary",onClick:this.toggleAddGroup},s.createElement("i",{className:"fa fa-plus m-r-xs"}),y.default("创建空间")),s.createElement(p.default,{company:a})),s.createElement("span",{className:"ma-none font-thin fs-24 hidden-xs"},y.default("空间广场"))),s.createElement("div",{className:"row"},s.createElement("div",{className:"wrapper-md col-sm-12 col-md-"+(v.hideDemoAndNews?"12":"9")+" col-lg-"+(v.hideDemoAndNews?"12":"9")+" group-list"},C,s.createElement(g.default,{title:y.default("我的空间"),groups:n.myGroups,showAction:!0}),v.forbidGroupPublic?null:s.createElement(g.default,{title:y.default("公开空间"),groups:n.publicGroups,showAction:!0}),f.config.hideOtherGroup?null:s.createElement(g.default,{title:y.default("其他空间"),groups:n.otherGroups,showAdmin:!0,paging:!0,me:t}),"done"===n.myGroups.loadState&&n.myGroups.data&&!n.myGroups.data.length&&"done"===n.publicGroups.loadState&&n.publicGroups.data&&!n.publicGroups.data.length&&"done"===n.otherGroups.loadState&&n.otherGroups.data&&!n.otherGroups.data.length?s.createElement("div",{className:"text-center"},y.default("该组织下空空如也，请「创建空间」")):null),v.hideDemoAndNews?null:s.createElement("div",{className:"demo-list hidden-sm hidden-xs col-md-3 col-lg-3"},s.createElement(x.default,{myGroups:n.myGroups}))),b?!t.companyAdmin&&f.onlyAdminCreate?s.createElement(c.default,{admins:G,onClose:this.toggleAddGroup,title:y.default("创建报表空间"),tip:y.default("组织已经设置为只有管理员才能创建报表空间，请联系以下管理员！")}):s.createElement(m.default,{submit:this.createGroup,onClose:this.toggleAddGroup}):null,A?s.createElement(c.default,{admins:G,onClose:this.toggleAdminList,title:y.default("查看组织管理员"),tip:y.default("申请管理员权限等操作，请联系以下管理员！")}):null,"saas"===window.sugarConfig.deployType&&s.createElement("ul",{className:"qrcode-list"},s.createElement("li",{className:"qrcode-item"},s.createElement("span",null,s.createElement("img",{src:"/static/img-resource/wx-logo.png",alt:y.default("微信logo"),width:"40"})),s.createElement("div",{className:"media-box"},s.createElement("img",{src:"/static/img-resource/qrcode-wx.png",alt:y.default("微信"),width:"200"}),s.createElement("div",null,y.default("使用微信扫码关注公众号")))),s.createElement("li",{className:"qrcode-item"},s.createElement("span",null,s.createElement("img",{src:"/static/img-resource/companywx-logo.png",alt:y.default("企业微信")+"logo",width:"40"})),s.createElement("div",{className:"media-box"},s.createElement("img",{src:"/static/img-resource/qrcode-companywx.png",alt:y.default("企业微信"),width:"200"}),s.createElement("div",null,y.default("使用企业微信扫码安装应用"))))))},t.displayName="Groups",t=a.__decorate([f.inject(function(e){return{company:e.company,user:e.user.current,group:e.group}}),f.observer],t)}(s.Component);t.default=G});
;sugar.define("sugar:widgets/fold-toggle.tsx",function(e,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var t=e("sugar:node_modules/tslib/tslib.js"),n=e("sugar:node_modules/react/index.js"),a=e("sugar:node_modules/classnames/index.js"),d=e("sugar:stores/index.ts"),r=function(e){function s(){return null!==e&&e.apply(this,arguments)||this}return t.__extends(s,e),s.prototype.render=function(){var e=this.props.assist;return n.createElement("div",{className:"nav navbar-nav hidden-xs"},n.createElement("a",{className:"btn no-shadow navbar-btn",onClick:e.toggleAsideFold,style:{paddingLeft:0}},n.createElement("i",{className:a("fa fa-fw text",{"fa-dedent":!e.asideFolded,"fa-indent":e.asideFolded})})))},s=t.__decorate([d.inject(function(e){return{assist:e.assist}}),d.observer],s)}(n.Component);s.default=r});
;sugar.define("sugar:widgets/mobile-aside-toggle.tsx",function(e,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var t=e("sugar:node_modules/tslib/tslib.js"),n=e("sugar:node_modules/react/index.js"),i=e("sugar:stores/index.ts"),r=function(e){function s(){return null!==e&&e.apply(this,arguments)||this}return t.__extends(s,e),s.prototype.render=function(){var e=this.props.assist;return n.createElement("button",{className:"pull-right visible-xs",onClick:e.toggleAsideMobile},n.createElement("i",{className:"glyphicon glyphicon-align-justify"}))},s=t.__decorate([i.inject(function(e){return{assist:e.assist}}),i.observer],s)}(n.Component);s.default=r});
;sugar.define("sugar:widgets/group-switch/group-switch.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=e("sugar:node_modules/tslib/tslib.js"),s=e("sugar:utils/i18n.ts"),r=e("sugar:node_modules/react/index.js"),l=e("sugar:node_modules/classnames/index.js"),n=e("sugar:node_modules/amis/lib/index.js"),o=e("sugar:node_modules/react-router/lib/index.js"),i=e("sugar:stores/index.ts"),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.componentWillMount=function(){this.show=this.show.bind(this)},t.prototype.show=function(){var e=this.props,t=e.myGroups,a=e.publicGroups;("error"===t.loadState||"error"===a.loadState||"done"===t.loadState&&!t.data.length)&&(t.load(),a.load())},t.prototype.render=function(){var e=this.props,t=e.myGroups,a=e.publicGroups,i=[{groups:t,title:s.default("我的空间")}];return a&&a.data&&a.data.length&&a.data.length<13&&i.push({groups:a,title:s.default("公开空间")}),r.createElement("ul",{className:"nav navbar-nav hidden-sm hidden-xs group-switch"},r.createElement("li",{onMouseEnter:this.show,className:l("dropdown pos-stc")},r.createElement("a",{className:"dropdown-toggle"},r.createElement("span",null,s.default("空间通道")),r.createElement("span",{className:"caret"})),r.createElement("div",{className:"dropdown-menu wrapper w-full bg-white"},i.map(function(e,t){var a=e.groups;return a.data&&a.data.length?r.createElement("div",{key:e.title+t},r.createElement("div",{className:"m-l-xs m-t-xs m-b-xs font-bold"},e.title,r.createElement("span",{className:"badge badge-sm bg-success m-l-xs m-t-n-xs"},a.data.length)),"pending"===a.loadState?r.createElement(n.Spinner,{overlay:!0}):r.createElement("ul",{className:"row list-unstyled l-h-2x"},a.data.map(function(e,t){return r.createElement("li",{key:e.key+t,className:"col-sm-3 m-b-sm"},r.createElement(o.Link,{className:"text-ellipsis group-switch__link",to:"/group/"+e.key},r.createElement("i",{className:"fa fa-fw fa-angle-right text-muted m-r-xs"}),e.avatar?r.createElement("img",{className:"group-switch__avatar img-circle m-r-xs",src:e.avatar}):r.createElement("div",{className:"sugar-letter-logo small m-r-xs"},e.name[0].toUpperCase()),e.name))}))):null}))))},t.displayName="GroupSwitch",t=a.__decorate([i.observer],t)}(r.Component);t.default=u});
;sugar.define("sugar:sites/group/manage/report/report-form.tsx",function(e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var t=e("sugar:node_modules/tslib/tslib.js"),l=e("sugar:utils/i18n.ts"),n=e("sugar:node_modules/react/index.js"),r=e("sugar:stores/index.ts"),i=e("sugar:utils/tree.ts"),d=e("sugar:sites/group/manage/data-model/data-model.tsx"),s=e("sugar:sites/amis-renderer.tsx"),u=function(e){function a(){return null!==e&&e.apply(this,arguments)||this}return t.__extends(a,e),a.prototype.componentWillMount=function(){var e=this.props.dataModelTreeList;e.loadData()},a.prototype.render=function(){var e=this.props,a=e.onSubmit,r=e.onClose,u=e.mode,o=void 0===u?"add":u,p=e.canSwitchType,f=e.initialState,m=e.reportTree,c=e.dataModelTreeList,h=t.__assign({parentHash:"0",name:"",url:"",isPublic:!1,isDev:!1,remark:"",dataModelHash:""},f),v=l.default("文件夹");switch(f.type){case 1:v=l.default("报表页面");break;case 2:v=l.default("iframe页面");break;case 3:v=l.default("AI探索页面")}var b=i.map(m.data,function(e){return{type:e.type,name:e.name,value:e.hash,children:e.children}});b=i.filter(b,function(e){return 0===e.type});var y=[{name:l.default("根目录"),value:"0",children:b}];if("update"===o&&0===h.type){for(var g=0,x=i.findFlatChildren(y,function(e){return h.hash===e.value});g<x.length;g++){var _=x[g];_.disabled=!0}i.find(y,function(e){return h.hash===e.value}).disabled=!0}var w=[];if("done"===c.loadState&&c.data&&0!==c.data.length&&(w=i.map(c.data,function(e){return{type:e.isDir?0:1,name:e.name,value:e.value,children:e.children||[]}})),"update"===o&&h.hash){var F=i.findParent(m.adminData,function(e){return e.hash===h.hash});F&&(h.parentHash=F.hash)}else h.parentHash=m.currentFolder;var L=[{type:"text",name:"name",label:l.default("名称"),required:!0,validations:{maxLength:20}},{type:"tree",name:"parentHash",label:l.default("父目录"),options:y,labelField:"name",valueField:"value",multiple:!1},{type:"radios",name:"type",inline:!1,disabled:"add"!==o||!p,label:l.default("类型"),options:[{label:l.default("文件夹"),value:0},{label:l.default("报表页面"),value:1},{label:l.default("AI探索页面"),value:3},{label:l.default("iframe页面"),value:2}]},{type:"text",name:"url",visibleOn:"type === 2",label:l.default("iframe地址"),required:!0,validations:{isUrl:!0}}];return L.push({type:"switch",name:"onlyAI",visibleOn:"type === 3 && window.sugarConfig.enableNLP",label:l.default("仅「"+d.nlpName+"」模式")},w.length>0?{type:"tree",name:"dataModelHash",visibleOn:"type === 3",label:l.default("可探索的数据模型"),options:w,labelField:"name",valueField:"value",joinValues:!0,multiple:!0,withChildren:!0,required:!0}:{type:"static",visibleOn:"type === 3",label:l.default("可探索的数据模型"),value:l.default("空间中还没有数据模型")}),L.push({type:"switch",name:"isPublic",label:l.default("空间内公开")},{type:"switch",name:"isDev",visible:"update"===o,label:l.default("开发模式")},{type:"textarea",name:"remark",placeholder:l.default("简单描述"),label:l.default("简介"),validations:{maxLength:50}}),n.createElement(s.default,{schema:{type:"dialog",size:"md",onClose:r,title:{children:function(){return n.createElement("div",null,""+l.default("add"===o?"新建":"编辑")+v,3===f.type?n.createElement("a",{style:{paddingLeft:5},href:"/docs/AI-Explore",target:"_blank"},n.createElement("i",{className:"fa fa-question-circle"})):null)}},body:{type:"form",mode:"horizontal",horizontal:{left:"col-md-3",right:"col-md-8"},onFinished:function(e){return r(),a(e),!1},data:h,controls:L}}})},a.displayName="ReportFormDialog",a=t.__decorate([r.inject(function(e){return{reportTree:e.report.tree,dataModelTreeList:e.dataModel.treeList}}),r.observer],a)}(n.Component);a.default=u});
;sugar.define("sugar:widgets/password-input/password-input.tsx",function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=t("sugar:node_modules/tslib/tslib.js"),a=t("sugar:utils/i18n.ts"),o=t("sugar:node_modules/react/index.js"),n=t("sugar:node_modules/amis/lib/index.js"),l=t("sugar:sites/sugar-cxd.ts"),r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.state={show:!1,focus:!1},e}return s.__extends(e,t),e.prototype.componentWillMount=function(){this.toggleShowState=this.toggleShowState.bind(this),this.handleFocus=this.handleFocus.bind(this),this.handleBlur=this.handleBlur.bind(this)},e.prototype.toggleShowState=function(){this.setState({show:!this.state.show})},e.prototype.handleFocus=function(){this.setState({focus:!0})},e.prototype.handleBlur=function(){this.setState({focus:!1})},e.prototype.render=function(){var t=this;return o.createElement("div",{className:l.classPrefix+"Form-item "+l.classPrefix+"Form-item--normal"},o.createElement("label",{className:l.classPrefix+"Form-label"},o.createElement("span",null,this.props.label)),o.createElement("div",{className:l.classPrefix+"InputGroup "+l.classPrefix+"Form-control"+(this.state.focus?" is-focused":"")},o.createElement("div",{className:"rdt "+l.classPrefix+"TextControl-input "+l.classPrefix+"Form-control b-r-none p-r-none"},o.createElement("input",{type:this.state.show?"text":"password",value:this.props.value,autoComplete:"off",onChange:function(e){return t.props.onChange(e.target.value)},onFocus:this.handleFocus,onBlur:this.handleBlur})),o.createElement(n.TooltipWrapper,{tooltip:a.default(this.state.show?"隐藏密码":"显示密码"),placement:"top"},o.createElement("span",{className:l.classPrefix+"InputGroup-btn"},o.createElement("button",{type:"button",className:l.classPrefix+"Button "+l.classPrefix+"Button--default "+l.classPrefix+"Form-control",onClick:this.toggleShowState},this.state.show?o.createElement("i",{className:"fa fa-eye-slash"}):o.createElement("i",{className:"fa fa-eye"}))))))},e.displayName="PasswordInput",e}(o.Component);e.default=r});
;sugar.define("sugar:widgets/qrcode-dialog.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=e("sugar:node_modules/tslib/tslib.js"),o=e("sugar:utils/i18n.ts"),n=e("sugar:node_modules/react/index.js"),r=e("sugar:node_modules/amis/lib/index.js"),a=e("sugar:node_modules/qrcode.react/lib/index.js"),s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.copyDom=null,t.copyUrl=function(){if(t.copyDom){var e=document.createElement("input"),l=t.props,n=l.qrUrl,a=l.password,s=a?o.default("【分享链接】：")+n+o.default("   【密码】：")+a:n;e.setAttribute("value",s),e.setAttribute("readonly","readonly"),t.copyDom.appendChild(e),e.select(),document.execCommand("copy"),t.copyDom.removeChild(e),r.toast.success(o.default("复制成功"))}},t}return l.__extends(t,e),t.prototype.render=function(){var e=this,t=this.props,l=t.name,s=t.qrUrl,u=t.onClose,c=t.cbText,d=t.cbFunc;return n.createElement(r.Modal,{show:!0},n.createElement(r.Modal.Header,{showCloseButton:!0,onClose:u},n.createElement(r.Modal.Title,null,o.default("二维码"),"「",l||"","」")),n.createElement(r.Modal.Body,{className:"text--center"},n.createElement(a,{value:s,size:128,bgColor:"#fff",fgColor:"#000",level:"L"}),n.createElement("div",{className:"m-t-md text-info text--break",ref:function(t){return e.copyDom=t}},n.createElement("a",{target:"_blank",href:s},s)),n.createElement(r.Button,{size:"sm",onClick:this.copyUrl,style:{marginTop:10}},o.default("点我复制"))),n.createElement(r.Modal.Footer,null,c&&d?n.createElement(r.Button,{onClick:d},c):null,n.createElement(r.Button,{level:"primary",onClick:u},o.default("确定"))))},t.displayName="QrCodeDialog",t}(n.PureComponent);t.default=s});
;sugar.define("sugar:widgets/dashboard-template-selector/dashboard-template-selector.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=e("sugar:node_modules/tslib/tslib.js"),l=e("sugar:utils/i18n.ts"),r=e("sugar:node_modules/react/index.js"),s=e("sugar:node_modules/react-dom/index.js"),n=e("sugar:node_modules/classnames/index.js"),o=e("sugar:node_modules/amis/lib/index.js"),i=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.thumber=null,t.firstLoad=!0,t}return a.__extends(t,e),t.prototype.componentWillMount=function(){this.setState({loadState:"doing",loadError:null,data:[]}),this.move=this.move.bind(this),this.onWheel=this.onWheel.bind(this)},t.prototype.move=function(e){var t=s.findDOMNode(this.thumber);t&&(t.scrollLeft=t.scrollLeft+e)},t.prototype.onWheel=function(e){e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation();var t=e.deltaX;Math.abs(e.deltaX)<Math.abs(e.deltaY)&&(t=e.deltaY),-5>t?this.move(-20):t>5&&this.move(20)},t.prototype.render=function(){{var e=this,t=this.props,a=t.loadState,s=t.loadError,i=t.data;t.mode}if("doing"===a)return r.createElement(o.Spinner,{overlay:!0,size:"lg"});if("error"===a)return r.createElement("div",null,l.default(s.message||"获取模版失败！"));for(var m=this.props.value||"",c="",d=0;d<i.length;d++)if(m===i[d].value){c=i[d].previewImg;break}var u=window.sugarConfig.productType;return"vertical"===this.props.mode?[r.createElement("div",{className:"dash-vertical-selector",key:"selector"},i.map(function(t,a){return r.createElement("div",{key:a,className:"temp-item",onClick:function(){e.props.onTempItemClick&&e.props.onTempItemClick(t.value),e.props.onChange(t.value)}},r.createElement("div",{className:"temp-item__img"},r.createElement("img",{src:t.previewImg||t.thumbImg}),u&&"advan"===t.type&&"advan"!==u?r.createElement("div",{className:"temp-item__lock"},r.createElement("i",{className:"fa fa-lock","aria-hidden":"true"})):null),r.createElement("div",{className:"temp-item__label"},t.label))}))]:r.createElement("div",{className:"dash-temp-selector"},r.createElement("div",{className:"dash-temp-selector__title"},l.default("请选择模版：")),r.createElement("div",{className:"dash-temp-selector__thumboutter"},r.createElement("div",{className:"thumb_scroll thumb_left",onClick:function(){return e.move(-100)}},r.createElement("i",{className:"fa fa-chevron-left"})),r.createElement("div",{className:"thumb_scroll thumb_right",onClick:function(){return e.move(100)}},r.createElement("i",{className:"fa fa-chevron-right"})),r.createElement("div",{className:"dash-temp-selector__thumb",ref:function(t){if(t){if(e.firstLoad){var a=0;e.props.data.some(function(t){return t.value!==e.props.value?(a+=158,!1):!0}),t.scrollLeft=a,e.firstLoad=!1}e.thumber=t}},onWheel:this.onWheel},r.createElement("div",{style:{width:160*i.length}},i.map(function(t,a){return r.createElement("div",{key:a,className:n("temp-item",{active:m===t.value}),onClick:function(){return e.props.onChange(t.value)}},r.createElement("div",{className:"temp-item__img"},r.createElement("img",{src:t.thumbImg}),u&&"advan"===t.type&&"advan"!==u?r.createElement("div",{className:"temp-item__lock"},r.createElement("i",{className:"fa fa-lock","aria-hidden":"true"})):null),r.createElement("div",{className:"temp-item__label"},t.label))})))))},t.displayName="DashboardTemplateSelector",t}(r.PureComponent);t.default=i});
;sugar.define("sugar:widgets/dashboard-template-selector/dashboard-template-vertical-selector.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=e("sugar:node_modules/tslib/tslib.js"),l=e("sugar:utils/i18n.ts"),o=e("sugar:node_modules/react/index.js"),i=e("sugar:widgets/form-dialog.tsx"),s=e("sugar:widgets/dashboard-template-selector/dashboard-template-selector.tsx"),n=e("sugar:widgets/icon-selector/icon-selector.tsx"),r=e("sugar:utils/fetch.ts"),d=e("sugar:widgets/amis-inline-switch.tsx"),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.componentWillMount=function(){var e=this;this.setState({showTempDetailDialog:!1,tempValue:""}),this.onTempDetailClick=this.onTempDetailClick.bind(this),this.onToggleTempDetailDialog=this.onToggleTempDetailDialog.bind(this),this.setState({loadState:"doing",loadError:null,data:[]}),r.get("/api/manage/group/"+this.props.groupHash+"/dashboard/getTemplets").then(function(t){e.setState({loadState:"done",data:[{label:l.default("空白"),value:"",thumbImg:"/static/img-templet/empty.png",previewImg:"",type:"regular"}].concat(t.data)})}).catch(function(t){e.setState({loadState:"error",data:[],loadError:t})})},t.prototype.onTempDetailClick=function(e){var t=this,a=this.state,l=a.showTempDetailDialog,o=a.data;this.setState({tempValue:e,showTempDetailDialog:!l}),o&&o.some(function(a){return a.value===e&&t.setState({tempLabel:a.label}),a.value===e})},t.prototype.onToggleTempDetailDialog=function(){this.setState({showTempDetailDialog:!this.state.showTempDetailDialog})},t.prototype.render=function(){var e=this.state,t=e.showTempDetailDialog,r=e.tempLabel,u=e.loadError,m=e.loadState,p=e.data,g=void 0===p?[]:p,h=this.props,c=h.onChange,f=h.value,b=h.groupHash,v=h.onSubmit,D=h.onDashboardCreate;return[o.createElement(s.default,a.__assign({key:"selector",mode:"vertical",onTempItemClick:this.onTempDetailClick},{loadError:u,loadState:m,data:g,onChange:c,value:f,groupHash:b})),o.createElement(i.default,{key:"temp-detail-model",className:"temp-detail-model",show:t,title:l.default("添加新的大屏——使用「"+r+"」创建大屏"),onClose:this.onToggleTempDetailDialog,api:"/api/manage/group/"+b+"/dashboard",onConfirm:function(e){D&&D(e)},onSubmit:v,mode:"normal",controls:[{name:"name",label:l.default("名称"),type:"text",required:!0,validations:"maxLength:30"},{type:"divider"},{name:"templetId",value:this.state.tempValue,label:l.default("选择模版"),children:function(e){var t=e.onChange,l=e.value;return o.createElement(s.default,a.__assign({},{loadError:u,loadState:m,data:g,onChange:t,value:l,groupHash:b}))}},{type:"divider"},{name:"remark",label:l.default("简介"),type:"text",validations:"maxLength:1024"},d.default("isPub",l.default("空间内公开"),"",!1),{name:"icon",label:l.default("图标"),children:function(e){var t=e.onChange,i=e.value;return o.createElement(n.default,a.__assign({},{onChange:t,value:i},{containerClassName:"form-item",label:l.default("图标（再次点击取消选中，可不选）"),height:100}))}},{type:"divider"}],size:"lg"})]},t.displayName="DashboardTemplateVerticalSelector",t}(o.PureComponent);t.default=u});
;sugar.define("sugar:sites/group/manage/dashboard/dashboard.tsx",function(e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.publishSchema=a.createFromSchema=a.createSchema=void 0;var t=e("sugar:node_modules/tslib/tslib.js"),n=e("sugar:utils/i18n.ts"),o=e("sugar:node_modules/react/index.js"),r=e("sugar:node_modules/react-document-title/index.js"),l=e("sugar:sites/amis-renderer.tsx"),s=e("sugar:utils/url.ts"),i=e("sugar:stores/index.ts"),d=e("sugar:utils/common-helper.ts"),u=e("sugar:widgets/icon-selector/icon-selector.tsx"),p=e("sugar:widgets/amis-inline-switch.tsx"),h=e("sugar:widgets/password-input/password-input.tsx"),c=e("sugar:node_modules/amis/lib/index.js"),m=e("sugar:node_modules/copy-to-clipboard/index.js"),f=e("sugar:widgets/qrcode-dialog.tsx"),b=e("sugar:widgets/product-type/product-type-modal.tsx"),g=e("sugar:widgets/dashboard-template-selector/dashboard-template-vertical-selector.tsx"),y=[{label:n.default("不缓存"),value:0},{label:n.default("一天"),value:1},{label:n.default("三天"),value:3},{label:n.default("一周"),value:7}];a.createSchema=function(e,a,r){void 0===a&&(a=!1);var l={title:n.default(a?"添加新的大屏":"添加新的大屏——选择大屏模板"),size:a?"lg":"full",className:"sugar-dashboard-new",body:{type:"form",name:"sugar-dashboard-new",className:"dashboard-manage",mode:"normal",api:"/api/manage/group/"+e+"/dashboard",onSubmit:function(e){if(!a){var t=window.sugarConfig.productType;t&&e.templetId&&"A"===e.templetId[0]&&"advan"!==t&&b.showUpdate("product-type-templete")}},controls:[{name:"name",label:n.default("名称"),type:"text",required:!0,validations:"maxLength:30"},{type:"divider"},p.amisInlineSwitch("isPub",n.default("空间内公开"),"",!1),{name:"remark",label:n.default("简介"),type:"text",validations:"maxLength:1024"},{type:"divider"},{name:"icon",label:n.default("图标"),children:function(e){var a=e.onChange,r=e.value;return o.createElement(u.default,t.__assign({},{onChange:a,value:r},{containerClassName:"form-item",label:n.default("图标（再次点击取消选中，可不选）"),height:100}))}},{type:"divider"},p.amisInlineSwitch("isDev",n.default("开启开发模式"),a?"false":"true")]},actions:[]};return a||(l.body={type:"form",name:"sugar-dashboard-new",className:"dashboard-manage",mode:"normal",controls:[{name:"templetId",label:n.default("请选择大屏模板"),children:function(a){var n=a.onChange,l=a.value;return o.createElement(g.default,t.__assign({onDashboardCreate:r,onSubmit:function(e){var a=window.sugarConfig.productType;a&&e.templetId&&"A"===e.templetId[0]&&"advan"!==a&&b.showUpdate("product-type-templete")}},{onChange:n,value:l,groupHash:e}))}}]}),l},a.createFromSchema=function(e){var a={title:n.default("以「$name」为模版新建"),body:{type:"form",name:"sugar-dashboard-new",className:"dashboard-manage",mode:"normal",api:"/api/manage/group/"+e+"/dashboard/$hash/createFrom",controls:[{name:"name",label:n.default("名称"),type:"text",required:!0,validations:"maxLength:30"},{type:"divider"},p.amisInlineSwitch("isPub",n.default("空间内公开"),"",!1),{name:"remark",label:n.default("简介"),type:"text",validations:"maxLength:1024"},{type:"divider"},{name:"icon",label:n.default("图标"),children:function(e){var a=e.onChange,r=e.value;return o.createElement(u.default,t.__assign({},{onChange:a,value:r},{containerClassName:"form-item",label:n.default("图标（再次点击取消选中，可不选）"),height:200}))}},{type:"divider"},p.amisInlineSwitch("isDev",n.default("开启开发模式"))]},actions:[{type:"button",actionType:"cancel",label:n.default("取消")},{type:"submit",primary:!0,label:n.default("添加")}]};return a};var v=function(e){return{title:n.default("编辑大屏 `$name`"),body:{api:"put:/api/manage/group/"+e+"/dashboard/$hash",name:"sugar-dashboard-edit",type:"form",mode:"normal",controls:[{name:"hash",type:"hidden"}].concat(a.createSchema(e,!0).body.controls)}}};a.publishSchema=function(e){var a=window.sugarConfig.nowProductConfig,r=!a||a.passwordShare,l=!a||a.tokenShare,i=!a||a.ipWhiteList;return{title:n.default("大屏「$name」公开分享"),body:{type:"form",name:"sugar-dashboard-public",mode:"normal",initApi:"/api/manage/group/"+e+"/dashboard/$hash/getPublishDashData",api:"/api/manage/group/"+e+"/dashboard/$hash/publishDash",controls:[{name:"authType",label:n.default("分享状态"),type:"radios",required:!0,inline:!1,options:[{label:n.default("停止分享"),value:0},{label:n.default("公开分享"),value:1},{label:n.default("加密公开分享")+(r?"":n.default("（此版本不支持）")),value:2,disabled:!r},{label:n.default("通过Token验证")+(l?"":n.default("（此版本不支持）")),value:3,disabled:!l}]},{name:"password",label:n.default("密码"),visibleOn:"authType === 2",required:!0,children:function(e){var a=e.onChange,r=e.value;return o.createElement(h.default,t.__assign({},{onChange:a,value:r},{label:n.default("密码")}))}},{name:"config.cacheTime",label:n.default("密码缓存时间设置"),type:"select",options:y,value:0,visibleOn:"authType === 2"},{name:"config.iframeHost",label:n.default("iframe 免密域名"),type:"text",placeholder:n.default("如：www.baidu.com,www.qq.com"),validations:"maxLength:500",visibleOn:"authType === 2"},{type:"tpl",visibleOn:"authType === 2",tpl:'\n            <p class="help-block">\n              '+n.default("当加密公开分享时，可以指定「iframe免密域名」,多个域名用英文逗号分隔（如 www.baidu.com,www.qq.com，当然也可以是ip如：220.181.38.150）。")+"</br>\n              "+n.default("当大屏作为 iframe 嵌入这些域下的网页时，可以跳过密码验证，其他情况仍需要密码验证。")+"</br>\n              "+n.default("不输入「iframe免密域名」则不开启这个功能。")+"\n            </p>\n            <p></p>\n          "},{name:"config.tokenText",label:"Token",type:"text",visibleOn:"authType === 3",value:d.randomWord(!0,32,32),desc:'\n             <a href="/docs/Share-Publish" class="text-sm text-info" target="_blank">'+n.default("什么是Token验证？")+"</a>"},{type:"checkbox",option:n.default("Token验证有效期"),name:"config.isValidTimeCheck",visibleOn:"authType === 3"},{type:"range",name:"config.validTime",min:1,max:32,unit:"小时",visibleOn:"authType === 3 && config.isValidTimeCheck === true",value:32},{name:"config.lang",label:n.default("分享页面语言环境"),type:"radios",required:!0,inline:!1,value:"default",options:[{label:n.default("默认"),value:"default"},{label:n.default("中文"),value:"zh_cn"},{label:n.default("英文"),value:"en"}]},p.amisInlineSwitch("config.ipWhiteListEnable",n.default("IP白名单")+(i?"":n.default("（此版本不支持）")),void 0,!1,void 0,!i),{name:"config.ipWhiteList",type:"textarea",placeholder:n.default("请输入IP，多个IP可使用英文逗号分隔，支持CIDR"),hiddenOn:"!config.ipWhiteListEnable",desc:'<a href="https://baike.baidu.com/item/%E6%97%A0%E7%B1%BB%E5%88%AB%E5%9F%9F%E9%97%B4%E8%B7%AF%E7%94%B1/15758573?fromtitle=CIDR&fromid=3695195&fr=aladdin" class="text-sm text-info" target="_blank">'+n.default("什么是CIDR？")+"</a>"},{type:"tpl",hiddenOn:"authType === 0 || !token",tpl:'\n            <p class="m-t-sm">\n              '+n.default("当前公开分享的链接：")+"</br>\n              <a class=\"text-info text--break\" target='_blank' href='"+s.shareSourceHost+"/dashboard/<%- data.token %>'>"+s.shareSourceHost+"/dashboard/<%- data.token %></a>\n            </p>\n          "},p.amisInlineSwitch("updateToken",n.default("更新公开分享链接"),"authType === 0 || !token")]},actions:[{type:"button",actionType:"cancel",label:n.default("取消")},{type:"submit",primary:!0,label:n.default("更新公开分享状态")}]}};var w=function(e){function s(a){var t=e.call(this,a)||this;return t.onDashboardCreate=t.onDashboardCreate.bind(t),t}return t.__extends(s,e),s.prototype.updateDashboardList=function(){this.props.dashboard.list.load(this.props.group.current.data.hash),this.props.scene.list.load(this.props.group.current.data.hash)},s.prototype.shouldComponentUpdate=function(){return!1},s.prototype.onDashboardCreate=function(e){var a=this.props,t=a.router,n=a.group,o=e instanceof Array?e[0]:e,r=n.current.data.key;(null===o||void 0===o?void 0:o.hash)&&r&&setTimeout(function(){t.push("/group/"+r+"/edit/dashboard/"+o.hash)},50)},s.prototype.render=function(){var e=this.props.group.current.data;return o.createElement(r,{title:n.default("大屏管理")},o.createElement(l.default,{schema:{name:"sugar-dashboard-manage",title:n.default("大屏管理"),className:"dashboard-manage",toolbar:[{type:"button",label:n.default("添加新的大屏"),actionType:"dialog",level:"primary",className:"m-r-xs",dialog:a.createSchema(e.hash,!1,this.onDashboardCreate)}],actionsClassName:"m-t-md",body:{type:"crud",name:"sugar-dashboard-manage-table",syncLocation:!1,footable:{expand:"none"},api:"/api/manage/group/"+this.props.group.current.data.hash+"/dashboard",switchPerPage:!1,placeholder:n.default("暂时没有大屏，请添加"),draggable:!0,saveOrderApi:{method:"put",url:"/api/manage/group/"+this.props.group.current.data.hash+"/dashboard/updateOrder"},bulkActions:[{label:n.default("批量删除"),actionType:"ajax",confirmText:n.default("您确定要移除所选大屏?"),level:"danger",api:"put:/api/manage/group/"+this.props.group.current.data.hash+"/dashboard/multiDelete"}],columns:[{type:"tpl",name:"name",label:n.default("大屏"),innerClassName:"inline min120Width",tpl:'\n                  <span class="m-b-xs">\n                    <% if (data.icon)  { %>\n                      <i class="<%- data.icon %>"></i>\n                    <% } else { %>\n                      <i class="fa fa-line-chart"></i>\n                    <% } %>\n                    <a data-link="/group/'+e.key+'/dashboard/<%= data.hash %>" class="text-info--hover">\n                        <%- data.name %>\n                    </a>\n                  </span>\n                '},{name:"authType",label:n.default("公开分享状态"),type:"sugar-dash-authType"},{type:"operation",width:300,label:n.default("操作"),breakpoint:"xs",buttons:[{actionType:"dialog",dialog:a.publishSchema(this.props.group.current.data.hash),label:n.default("公开分享"),type:"button",size:"sm"},{actionType:"dialog",dialog:v(this.props.group.current.data.hash),label:n.default("更改属性"),type:"button",size:"sm"},{actionType:"dialog",dialog:a.createFromSchema(this.props.group.current.data.hash),label:n.default("以此为模版新建"),type:"button",size:"sm"},{confirmText:n.default("您确定要移除该大屏?"),actionType:"ajax",api:"delete:/api/manage/group/"+this.props.group.current.data.hash+"/dashboard/$hash",reload:"sugar-dashboard-manage-table",label:n.default("删除"),type:"button",size:"sm"}]}]}},update:this.updateDashboardList.bind(this)}))},s.displayName="DashboardManage",s=t.__decorate([i.inject(function(e){return{dashboard:e.dashboard,group:e.group,scene:e.scene}}),t.__metadata("design:paramtypes",[Object])],s)}(o.Component);a.default=w;!function(e){function a(){return null!==e&&e.apply(this,arguments)||this}return t.__extends(a,e),a.prototype.componentWillMount=function(){this.copyUrl=this.copyUrl.bind(this),this.showQrCode=this.showQrCode.bind(this),this.closeQrCode=this.closeQrCode.bind(this),this.setState({showQr:!1,qrUrl:"",qrName:""})},a.prototype.copyUrl=function(e){m(e)?c.toast.success(n.default("链接已复制")):c.toast.error(n.default("无法复制，请点击文字打开链接后手动复制"))},a.prototype.showQrCode=function(e,a){this.setState({showQr:!0,qrUrl:e,qrName:a})},a.prototype.closeQrCode=function(){this.setState({showQr:!1,qrUrl:"",qrName:""})},a.prototype.render=function(){var e=this,a=this.props.data,t=a.authType,r=a.token,l=a.name,i=this.state,d=i.showQr,u=i.qrUrl,p=i.qrName,h=null,m="";return 1!==t&&2!==t?"-":(m=s.shareSourceHost+"/dashboard/"+r,h=o.createElement("a",{className:"text-info link-decoration",target:"_blank",href:m,key:"url"},n.default(1===t?"公开分享":"加密分享")),[h,o.createElement(c.Button,{level:"link",size:"sm",tooltip:n.default("复制分享链接"),placement:"bottom",id:"copy",key:"copy",onClick:function(){return e.copyUrl(m)},style:{paddingRight:0}},o.createElement("i",{className:"fa fa-clipboard"})),o.createElement(c.Button,{level:"link",size:"sm",tooltip:n.default("二维码"),placement:"bottom",id:"qrcode",key:"qrcode",onClick:function(){return e.showQrCode(m,l)},style:{paddingRight:0}},o.createElement("i",{className:"fa fa-qrcode"})),d?o.createElement(f.default,{key:"qrCode",name:p,qrUrl:u,onClose:this.closeQrCode}):null])},a=t.__decorate([c.Renderer({test:/(^|\/)sugar-dash-authType$/})],a)}(o.Component)});
;sugar.define("sugar:sites/group/manage/scene/scene.tsx",function(e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.createFromSchema=a.createSceneSchema=void 0;var t=e("sugar:node_modules/tslib/tslib.js"),n=e("sugar:utils/i18n.ts"),r=e("sugar:node_modules/react/index.js"),s=e("sugar:node_modules/react-document-title/index.js"),o=e("sugar:sites/amis-renderer.tsx"),l=e("sugar:stores/index.ts"),i=e("sugar:widgets/icon-selector/icon-selector.tsx"),u=e("sugar:widgets/product-type/product-type-modal.tsx"),c=!0,d=window.sugarConfig.nowProductConfig;d&&(c=-1!=d.charts.indexOf("scene")),a.createSceneSchema=function(e,a){void 0===a&&(a=!1);var s={title:n.default("添加新的三维场景"),size:"lg",body:{type:"form",name:"sugar-scene-new",className:"scene-manage",mode:"normal",api:"/api/manage/group/"+e+"/scene",controls:[{name:"name",label:n.default("名称"),type:"text",required:!0,validations:"maxLength:30"},{type:"divider"},{name:"remark",label:n.default("简介"),type:"text",validations:"maxLength:1024"},{type:"divider"},{name:"icon",label:n.default("图标"),children:function(e){var a=e.onChange,s=e.value;return r.createElement(i.default,t.__assign({},{onChange:a,value:s},{containerClassName:"form-item",label:n.default("图标（再次点击取消选中，可不选）"),height:100}))}}]},actions:[{type:"submit",primary:!0,label:n.default("添加")},{type:"button",actionType:"cancel",label:n.default("取消")}]};return s},a.createFromSchema=function(e){var a={data:{templateName:"${name}",name:"${name}-copy",hash:"${hash}"},title:n.default("以「$templateName」为模版新建"),body:{type:"form",name:"sugar-scene-new",className:"scene-manage",mode:"normal",api:"/api/manage/group/"+e+"/scene/$hash/createFrom",controls:[{name:"name",label:n.default("名称"),type:"text",required:!0,validations:"maxLength:30"},{type:"divider"},{name:"remark",label:n.default("简介"),type:"text",validations:"maxLength:1024"},{type:"divider"},{name:"icon",label:n.default("图标"),children:function(e){var a=e.onChange,s=e.value;return r.createElement(i.default,t.__assign({},{onChange:a,value:s},{containerClassName:"form-item",label:n.default("图标（再次点击取消选中，可不选）"),height:200}))}}]},actions:[{type:"submit",primary:!0,label:n.default("添加")},{type:"button",actionType:"cancel",label:n.default("取消")}]};return a};var p=function(e){return{title:n.default("编辑场景「$name」"),body:{api:"put:/api/manage/group/"+e+"/scene/$hash",name:"sugar-scene-edit",type:"form",mode:"normal",controls:[{name:"hash",type:"hidden"}].concat(a.createSceneSchema(e,!0).body.controls)}}},m=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return t.__extends(i,e),i.prototype.updatesceneList=function(){this.props.scene.list.load(this.props.group.current.data.hash)},i.prototype.shouldComponentUpdate=function(){return!1},i.prototype.render=function(){var e=this.props.group.current.data;return r.createElement(s,{title:n.default("三维场景管理")},r.createElement(o.default,{schema:{name:"sugar-scene-manage",title:n.default("三维场景管理"),className:"scene-manage",toolbar:[{type:"button",label:n.default("添加新的场景"),actionType:"dialog",level:"primary",className:"m-r-xs",onClick:function(e){c||(u.showUpdate("product-type-chart-advan"),e.preventDefault())},dialog:a.createSceneSchema(this.props.group.current.data.hash)}],actionsClassName:"m-t-md",body:{type:"crud",name:"sugar-scene-manage-table",syncLocation:!1,footable:{expand:"none"},api:"/api/group/"+this.props.group.current.data.hash+"/scene",title:n.default("场景列表"),switchPerPage:!1,placeholder:n.default("暂时没有场景，请添加"),draggable:!0,saveOrderApi:{method:"put",url:"/api/manage/group/"+this.props.group.current.data.hash+"/scene/updateOrder"},bulkActions:[{label:n.default("批量删除"),actionType:"ajax",confirmText:n.default("您确定要移除所选场景?"),level:"danger",api:"put:/api/manage/group/"+this.props.group.current.data.hash+"/scene/multiDelete"}],columns:[{type:"tpl",name:"name",label:n.default("场景"),innerClassName:"inline min120Width",tpl:'\n                  <span class="m-b-xs">\n                    <% if (data.icon)  { %>\n                      <i class="<%- data.icon %>"></i>\n                    <% } else { %>\n                      <i class="fa fa-line-chart"></i>\n                    <% } %>\n                    <a data-link="/group/'+e.key+'/scene/<%= data.hash %>" class="text-info--hover">\n                        <%- data.name %>\n                    </a>\n                  </span>\n                '},{type:"operation",width:350,label:n.default("操作"),breakpoint:"xs",buttons:[{actionType:"link",link:"/group/"+this.props.group.current.data.key+"/edit/scene/${hash}",label:n.default("编辑场景"),type:"button"},{actionType:"dialog",dialog:a.createFromSchema(this.props.group.current.data.hash),label:n.default("以此场景为模版新建"),type:"button"},{actionType:"dialog",dialog:p(this.props.group.current.data.hash),label:n.default("更改页面属性"),type:"button"},{confirmText:n.default("您确定要移除该场景?"),actionType:"ajax",api:"delete:/api/manage/group/"+this.props.group.current.data.hash+"/scene/$hash",reload:"sugar-scene-manage-table",label:n.default("删除"),type:"button"}]}]}},update:this.updatesceneList.bind(this)}))},i.displayName="sceneManage",i=t.__decorate([l.inject(function(e){return{scene:e.scene,group:e.group}})],i)}(r.Component);a.default=m});
;sugar.define("sugar:widgets/quick-creator/quick-creator.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=e("sugar:node_modules/tslib/tslib.js"),s=e("sugar:utils/i18n.ts"),r=e("sugar:node_modules/react/index.js"),o=e("sugar:node_modules/classnames/index.js"),i=e("sugar:node_modules/amis/lib/index.js"),n=e("sugar:widgets/progress.ts"),l=e("sugar:sites/group/manage/report/report-form.tsx"),c=e("sugar:sites/amis-renderer.tsx"),p=e("sugar:widgets/product-type/product-type-modal.tsx"),h=e("sugar:sites/group/manage/dashboard/dashboard.tsx"),d=e("sugar:sites/group/manage/scene/scene.tsx"),u=!0,m=window.sugarConfig.nowProductConfig;m&&(u=-1!=m.charts.indexOf("scene"));var f=window.sugarConfig.enableScene,g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.componentWillMount=function(){this.setState({open:!1}),this.show=this.show.bind(this),this.hide=this.hide.bind(this),this.createFolder=this.createFolder.bind(this),this.createReport=this.createReport.bind(this),this.createExplore=this.createExplore.bind(this),this.createIframe=this.createIframe.bind(this),this.createDashboard=this.createDashboard.bind(this),this.createScene=this.createScene.bind(this),this.closeDialog=this.closeDialog.bind(this),this.listCreate=this.listCreate.bind(this),this.submit=this.submit.bind(this),this.onDashboardCreate=this.onDashboardCreate.bind(this)},t.prototype.show=function(){this.setState({open:!0})},t.prototype.hide=function(){this.setState({open:!1})},t.prototype.createFolder=function(){this.setState({open:!1,openDialog:!0,type:0})},t.prototype.createReport=function(){this.setState({open:!1,openDialog:!0,type:1})},t.prototype.createExplore=function(){this.setState({open:!1,openDialog:!0,type:-1})},t.prototype.createIframe=function(){this.setState({open:!1,openDialog:!0,type:2})},t.prototype.createDashboard=function(){this.setState({open:!1,openDialog:!0,type:3})},t.prototype.createScene=function(){u?this.setState({open:!1,openDialog:!0,type:5}):p.showUpdate("product-type-chart-advan")},t.prototype.listCreate=function(){var e=4;if("dashboard"===this.props.type&&(e=3),"scene"===this.props.type){if(!u)return void p.showUpdate("product-type-chart-advan");e=5}this.setState({open:!1,openDialog:!0,type:e})},t.prototype.closeDialog=function(){this.setState({openDialog:!1})},t.prototype.submit=function(e){var t=this;n.default.show();var a=this.props,r=a.router,o=a.group,l=o.data.key;this.props.reportTree.add(this.props.group.data.hash,e).then(function(e){var a=e.res;return n.default.hide(),t.setState({openDialog:!1}),i.toast.success(s.default("新建成功")),null===a||void 0===a?void 0:a.data}).catch(function(e){n.default.hide(),i.toast.error(e.message)}).then(function(t){e.type&&(null===t||void 0===t?void 0:t.hash)&&l&&setTimeout(function(){1===t.type?r.push("/group/"+l+"/edit/report/"+t.hash):3===t.type&&r.push("/group/"+l+"/explore/"+t.hash)},50)})},t.prototype.onDashboardCreate=function(e){var t=this;this.setState({openDialog:!1});var a=this.props,s=a.group,r=a.dashboardList,o=a.sceneList;r.load(s.data.hash),o.load(s.data.hash),setTimeout(function(){var a=e instanceof Array?e[0]:e;a&&a.hash&&t.props.router.push("/group/"+s.data.key+"/edit/dashboard/"+a.hash)},50)},t.prototype.render=function(){var e=this,t=this.props,i=t.group,n=t.loading,p=t.mode,u=t.sceneList,m=t.className,g=this.state,y=g.open,b=g.openDialog,E=g.type,C=i.isAdmin,k=C||i.manageCenter.showDashAddBtn,D=C||i.manageCenter.showScene,S=C||i.manageCenter.showReportAddBtn;if(n)return null;var v=[r.createElement("ul",{key:"quick-creator",className:"nav navbar-nav hidden-xs quick-creator"},r.createElement("li",{onMouseOver:this.show,onMouseOut:this.hide,className:o("dropdown",{open:y})},r.createElement("a",{className:"dropdown-toggle"},r.createElement("span",null,s.default("新建")),r.createElement("span",{className:"caret"})),r.createElement("ul",{className:"dropdown-menu"},k?r.createElement("li",null,r.createElement("a",{onClick:this.createDashboard},r.createElement("i",{className:"fa fa-line-chart m-r text-info-dker"}),s.default("数据大屏"))):null,k&&D?r.createElement("li",{className:"divider"}):null,f&&D?r.createElement("li",null,r.createElement("a",{onClick:this.createScene},r.createElement("i",{className:"fa fa-dice-d6 m-r text-info-dker"}),s.default("三维场景"))):null,S&&D||k&&S?r.createElement("li",{className:"divider"}):null,S?r.createElement(r.Fragment,null,r.createElement("li",null,r.createElement("a",{onClick:this.createReport},r.createElement("i",{className:"fa fa-th m-r text-report-ico"}),s.default("报表页面"))),r.createElement("li",null,r.createElement("a",{onClick:this.createExplore},r.createElement("i",{className:"fa fa-superpowers m-r text-report-ico"}),s.default("AI探索页面"))),r.createElement("li",null,r.createElement("a",{onClick:this.createIframe},r.createElement("i",{className:"fa fa-file m-r text-report-ico"}),s.default("iframe页面"))),r.createElement("li",null,r.createElement("a",{onClick:this.createFolder},r.createElement("i",{className:"fa fa-folder m-r text-info-dker"}),s.default("报表文件夹")))):null)))];if("list"===p?v=[r.createElement("span",{key:"list-quick-creater",className:"list-quick-creater text-info-dker",onClick:this.listCreate},r.createElement("i",{className:"fa fa-plus-circle"}),s.default("新建"))]:"process"===p&&(v=[r.createElement("a",{className:m,key:"process-quick-creater",onClick:this.listCreate},this.props.children)]),b&&(3>E||4===E)){var w=E;4===E?w=1:-1===E&&(w=3),v.push(r.createElement(l.default,{key:"reportFormDialog",onClose:this.closeDialog,onSubmit:this.submit,mode:"add",canSwitchType:4===E,initialState:{parentHash:0,name:"",type:w,url:"",isPublic:!1,isDev:!1,remark:""}}))}else b&&3===E?v.push(r.createElement(c.default,{key:"create-dashboard",schema:{type:"page",body:a.__assign({type:"dialog",bodyClassName:"wrapper",onClose:function(){e.setState({openDialog:!1})},onConfirm:function(){e.setState({openDialog:!1})}},h.createSchema(i.data.hash,!1,this.onDashboardCreate))}})):b&&5===E&&v.push(r.createElement(c.default,{key:"create-scene",schema:{type:"page",body:a.__assign({type:"dialog",bodyClassName:"wrapper",onClose:function(){e.setState({openDialog:!1})},onConfirm:function(t){e.setState({openDialog:!1}),u.load(i.data.hash),setTimeout(function(){var a=t instanceof Array?t[0]:t;a&&a.hash&&e.props.router.push("/group/"+e.props.group.data.key+"/scene/"+a.hash)},50)}},d.createSceneSchema(i.data.hash))}}));return v},t.displayName="QuickCreator",t}(r.Component);t.default=g});
;sugar.define("sugar:widgets/group-search/group-search.tsx",function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=t("sugar:node_modules/tslib/tslib.js"),s=t("sugar:utils/i18n.ts"),r=t("sugar:node_modules/react/index.js"),o=t("sugar:node_modules/react-router/lib/index.js"),n=t("sugar:node_modules/lodash/debounce.js"),i=t("sugar:stores/index.ts"),h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.hasUnmouted=!1,e}return a.__extends(e,t),e.prototype.componentWillMount=function(){this.showContent=this.showContent.bind(this),this.hideContent=this.hideContent.bind(this),this.filterStrChange=this.filterStrChange.bind(this),this.calDataMap=n(this.calDataMap.bind(this),100),this.calHistory=this.calHistory.bind(this),this.collectName=this.collectName.bind(this),this.setState({filterStr:"",contentClass:"search-content default",searchClass:"search-box",iconReport:"fa fa-th text-report-ico",iconDashboard:"fa fa-line-chart text-info-dker",itemName:"itemClass",dataMap:[]})},e.prototype.componentWillUnmount=function(){this.hasUnmouted=!0},e.prototype.filterStrChange=function(t){this.setState({filterStr:t.target.value}),t.target.value?this.calDataMap(t.target.value):this.calHistory()},e.prototype.calDataMap=function(t){for(var e=this.props,s=e.dashboardList,r=e.reportTree,o=[],n=[],i=[],h=[],c=0;c<s.data.length&&(~s.data[c].name.toLocaleLowerCase().indexOf(t.toLocaleLowerCase())&&o.push(a.__assign(a.__assign({},s.data[c]),{type:"dashboard"})),!(o.length>9));c++);n=this.collectName(r.data,n);for(var c=0;c<n.length&&(~n[c].name.toLocaleLowerCase().indexOf(t.toLocaleLowerCase())&&i.push(n[c]),!(i.length>9));c++);h=o.concat(i).slice(0,10),this.setState({dataMap:h})},e.prototype.calHistory=function(){var t=this.props,e=t.dashboardList,a=t.reportTree,s=t.group,r=t.assist,o=[],n=[],i=[],h=[];i=this.collectName(a.data,i),r.groupHistory.get(s.current.data.hash)&&(o=r.groupHistory.get(s.current.data.hash)||[],o.forEach(function(t){var a=t.split("/")[3],s=t.split("/")[4];if("dashboard"===a){var r=e.data.find(function(t){return t.hash===s});r&&n.push({name:r.name,type:"dashboard",hash:r.hash})}if("report"===a){var o=i.find(function(t){return t.hash===s});o&&n.push({name:o.name,type:"report",hash:o.hash})}})),h=n,this.setState({dataMap:h})},e.prototype.showContent=function(){var t=this.state.filterStr;this.setState({contentClass:"search-content",searchClass:"search-box focus"}),t?this.calDataMap(t):this.calHistory()},e.prototype.hideContent=function(){var t=this;setTimeout(function(){t.hasUnmouted||t.setState({contentClass:"search-content default",searchClass:"search-box"})},200)},e.prototype.collectName=function(t,e,a){var s=this;return void 0===a&&(a=""),t.forEach(function(t){var r=t.name,o=t.hash,n=t.icon,i=t.children;r&&"fa fa-folder"!==n&&e.push({name:a?a+"/"+r:r,hash:o,type:"report"}),i&&s.collectName(i,e,r)}),e},e.prototype.render=function(){var t=this.state,e=t.contentClass,a=t.searchClass,n=t.filterStr,i=t.iconDashboard,h=t.iconReport,c=t.itemName,l=t.dataMap,u=this.props,d=u.group,p=u.dashboardList,f=u.reportTree;return"done"!==p.loadState||"done"!==f.loadState?null:r.createElement("div",{className:"search-wrapper"},r.createElement("input",{ref:"input",value:n,className:a,onFocus:this.showContent,onBlur:this.hideContent,onChange:this.filterStrChange,placeholder:s.default("输入关键词搜索")}),r.createElement("div",{className:e},r.createElement("ul",null,l.map(function(t){return r.createElement("li",{key:t.hash},r.createElement(o.Link,{to:"/group/"+d.current.data.key+"/"+t.type+"/"+t.hash},r.createElement("div",null,"report"===t.type?r.createElement("i",{key:"icon",className:h}):r.createElement("i",{key:"icon",className:i}),r.createElement("span",{className:c},t.name))))}))))},e.displayName="GroupSearch",e=a.__decorate([i.inject(function(t){return{dashboardList:t.dashboard.list,reportTree:t.report.tree,group:t.group,assist:t.assist}}),i.observer],e)}(r.Component);e.default=h});
;sugar.define("sugar:widgets/aside/aside.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=e("sugar:node_modules/tslib/tslib.js"),a=e("sugar:utils/i18n.ts"),r=e("sugar:node_modules/react/index.js"),i=e("sugar:stores/index.ts"),s=e("sugar:node_modules/classnames/index.js"),l=e("sugar:node_modules/react-router/lib/index.js"),d=e("sugar:utils/tree.ts"),o=e("sugar:widgets/scrollbar.tsx"),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.componentWillMount=function(){this.calActiveNode=this.calActiveNode.bind(this),this.toggleExpand=this.toggleExpand.bind(this),this.renderLinkTree=this.renderLinkTree.bind(this),this.renderLinkTreeNode=this.renderLinkTreeNode.bind(this);var e={expanded:{},activeNode:""};this.props.defaultExpanded&&this.props.defaultExpanded.forEach(function(t){e.expanded[t]=!0}),this.setState(e),this.calActiveNode(this.props.locationPath,this.props)},t.prototype.componentWillReceiveProps=function(e){var t=this.props;t.locationPath!==e.locationPath&&this.calActiveNode(e.locationPath,e)},t.prototype.calActiveNode=function(e,t){var n=this,a=t.nodePrimaryKey,r=d.findPaths(t.navs,function(t){return t.url===e});if(r.length){var i=r[0],s={activeNode:i[a],expanded:{}};t.defaultExpanded&&t.defaultExpanded.forEach(function(e){(!n.state||n.state.expanded[e])&&(s.expanded[e]=!0)}),r.forEach(function(e){null!=e[a]&&(s.expanded[e[a]]=!0)}),this.setState(s)}else this.setState({activeNode:""})},t.prototype.toggleExpand=function(e){var t,a=e[this.props.nodePrimaryKey];this.setState({expanded:n.__assign(n.__assign({},this.state.expanded),(t={},t[a]=!this.state.expanded[a],t))})},t.prototype.renderLinkTreeNode=function(e,t,n){var i=this,d=this.props.nodePrimaryKey,o=this.state.expanded[e[d]],c=this.state.activeNode===e[d],u=e.children&&e.children.length,p=u||e.isDir,m=[u?r.createElement("span",{key:"toggle",className:"pull-right text-muted",onClick:function(t){return i.toggleExpand(e,t)}},r.createElement("i",{className:"fa fa-fw fa-angle-"+(o?"down":"right")})):null,r.createElement("i",{key:"icon",className:e.icon}),r.createElement("span",{key:"name",className:p?"dir":"node"},e.name||a.default("未命名")),e.isHot?r.createElement("span",{key:"hot",className:"hot"},"HOT"):null];return e.hidden?null:r.createElement("li",{key:t,className:s({active:c})},p?[r.createElement("a",{onClick:function(t){return u&&i.toggleExpand(e,t)},key:"self",className:"link-level-"+n},m),u?r.createElement("ul",{key:"children",className:s("nav nav-sub",{"nav-sub--expanded":o})},e.children&&e.children.map(function(e,t){return i.renderLinkTreeNode(e,t,n+1)})):null]:r.createElement(l.Link,{to:c?"":e.url,className:"link-level-"+n},m))},t.prototype.renderLinkTree=function(e,t,n,i,s){var l=this;if(!(n||t&&t.length))return null;var d=t.map(function(e,t){return l.renderLinkTreeNode(e,t,1)});if(!d.length)return[r.createElement("li",{key:"title",className:"quick-box-empty hidden-folded padder m-t m-b-sm text-muted text-xs"},r.createElement("span",{key:"empty",className:"m-l text-info-dker text-empty"},a.default(i?i:"待创建...")),s?s:null)];if(s){var o=r.createElement("li",{key:"title",className:"quick-box hidden-folded padder m-t m-b-sm text-muted text-xs"},r.createElement("span",null,e),s?s:null);return[o].concat(d)}return d},t.prototype.render=function(){var e=this,t=this.props,n=t.navs,a=t.prefix,i=t.suffix,l=t.className;return r.createElement("div",{className:s("navi-wrap navi-wrap--sugar",l)},r.createElement(o.default,null,a,r.createElement("nav",{className:"navi clearfix"},r.createElement("ul",{className:"nav"},n.map(function(t,n){return"line"===t.type?r.createElement("li",{key:"line"+n,className:"line lt"}):e.renderLinkTree(t.title||"",t.children||[],!!t.showEmpty,t.emptyText,t.quickCreater)}))),i))},t.displayName="Aside",t.defaultProps={nodePrimaryKey:"url"},t=n.__decorate([i.observer],t)}(r.Component);t.default=c});
;sugar.define("sugar:sites/group/unauthorized.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=e("sugar:node_modules/tslib/tslib.js"),r=e("sugar:utils/i18n.ts"),n=e("sugar:node_modules/react/index.js"),s=e("sugar:widgets/error.tsx"),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.render=function(){var e=this.props,t=e.error,a=e.me,l=t.data.data?t.data.data.admins:null;return n.createElement(s.default,{msg:t.message,content:[n.createElement("div",{className:"m-t",key:"title"},r.default("您可以联系该空间管理员：")),l&&l.length?l.map(function(e,r){return n.createElement("div",{key:r,className:"mailto-link m-t"},n.createElement("a",{href:"mailto:"+e.email+"?subject=申请报表空间权限&body=hi "+((e.realName||e.name)+": %0d%0a%0d%0a我想申请报表空间『"+t.data.data.groupName+"』")+("的阅读权限，请您在用户管理中添加「"+a.email+"」谢谢!")},e.realName+"("+e.name+")"))}):n.createElement("div",{key:"noAdmins"},r.default("无管理员，请联系组织管理员"))],links:[{to:"/groups",label:r.default("报表空间广场")}]})},t}(n.PureComponent);t.default=l});
;sugar.define("sugar:sites/group/index.tsx",function(e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var r=e("sugar:node_modules/tslib/tslib.js"),t=e("sugar:node_modules/react/index.js"),n=e("sugar:stores/index.ts"),o=e("sugar:node_modules/react-router/lib/index.js"),s=e("sugar:node_modules/amis/lib/index.js"),d=e("sugar:sites/routes.tsx"),u=e("sugar:widgets/header/header.tsx"),i=e("sugar:widgets/fold-toggle.tsx"),l=e("sugar:widgets/mobile-aside-toggle.tsx"),c=e("sugar:widgets/login-info.tsx"),g=e("sugar:widgets/group-switch/group-switch.tsx"),p=e("sugar:widgets/quick-creator/quick-creator.tsx"),m=e("sugar:widgets/group-search/group-search.tsx"),f=e("sugar:widgets/aside/aside.tsx"),h=e("sugar:widgets/feedback.tsx"),w=e("sugar:sites/group/unauthorized.tsx"),b=e("sugar:node_modules/classnames/index.js"),x=e("sugar:utils/tree.ts"),y=e("sugar:utils/i18n.ts"),C=e("sugar:widgets/i18n.tsx"),k=e("sugar:widgets/product-type-tip.tsx"),E=window.sugarConfig.enableScene,v=function(e){function a(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(a,e),a.prototype.componentWillMount=function(){var e=this.props.routeParams.group;this.loadGroupAndReportTree(this.props,e)},a.prototype.componentWillReceiveProps=function(e){e.routeParams.group!==this.props.routeParams.group&&this.loadGroupAndReportTree(e,e.routeParams.group)},a.prototype.loadGroupAndReportTree=function(e,a){e.group.current.load(a).then(function(a){var r=a.store;"done"===r.loadState&&(e.report.tree.load(r.data.hash),e.dashboard.list.load(r.data.hash),E&&e.scene.list.load(r.data.hash))})},a.prototype.render=function(){var e=this.props,a=e.user,r=e.company,n=e.asideFolded,v=e.mobileAsideOffScreen,S=e.group,A=e.report,N=e.dashboard,_=e.scene,D=e.router,T=S.current.isAdmin,L=T||S.current.manageCenter.showDashAddBtn||S.current.manageCenter.showReportAddBtn||S.current.manageCenter.showScene,M=T||S.current.manageCenter.showData||S.current.manageCenter.showDataModel||S.current.manageCenter.showSqlModel||S.current.manageCenter.showDataMap||S.current.manageCenter.showSlider||S.current.manageCenter.showScene||S.current.manageCenter.showChartWarning,R=T||S.current.manageCenter.showData,P=T||S.current.manageCenter.showDataModel,q=T||S.current.manageCenter.showSqlModel,G=T||S.current.manageCenter.showDataMap,j=T||S.current.manageCenter.showWidgetTemplate,W=T||S.current.manageCenter.showChartTheme,F=T||S.current.manageCenter.showSlider,z=T||S.current.manageCenter.showScene,B=T||S.current.manageCenter.showChartWarning,H=T||S.current.manageCenter.showDashboard,I=T||S.current.manageCenter.showReport,O=T||S.current.manageCenter.showDashAddBtn,K=T||S.current.manageCenter.showReportAddBtn,$=this.props.routeParams.group,Q=this.props.location.pathname;if("pending"===S.current.loadState)return t.createElement(s.Spinner,{overlay:!0,size:"lg"});if("error"===S.current.loadState)return"NotFoundError"===S.current.loadError.type?t.createElement(s.NotFound,{links:d.links}):"AuthorizeError"===S.current.loadError.type?t.createElement(w.default,{error:S.current.loadError,me:a}):t.createElement("h3",{className:"text--center"},y.default(S.current.loadError.message||"请求错误"));if(/^\/group\/[^\/]+\/(preview|edit)\/(report|dashboard|scene)\/[^\/]+$/.test(Q)||/^\/group\/[^\/]+\/manage\/dataModel\/edit\/[^\/]+$/.test(Q))return this.props.children;var U=t.createElement(u.default,{brandName:S.current.data.name||window.sugarConfig.name,brandInnerLink:"/group/"+S.current.data.key+"/home",logo:S.current.data.avatar?t.createElement("img",{src:S.current.data.avatar,className:"navbar-brand__logo"}):t.createElement("div",{className:"sugar-letter-logo medium navbar-brand__logo"},S.current.data.name.trim()[0].toUpperCase()),nav:[t.createElement(i.default,{key:"foldToggle"}),t.createElement(g.default,{key:"groupSwitch",myGroups:S.myGroups,publicGroups:S.publicGroups}),L?t.createElement(p.default,{key:"quickCreator",group:S.current,reportTree:A.tree,dashboardList:N.list,sceneList:_.list,loading:"done"!==S.current.loadState||"done"!==A.tree.loadState,router:D}):null,t.createElement(m.default,{key:"groupSearch"})],mobileAsideToggle:t.createElement(l.default,null),rightNav:[t.createElement("li",{key:"groups"},t.createElement(o.Link,{to:"/groups"},y.default("空间广场"))),window.sugarConfig.hideDocsLink?null:t.createElement("li",{key:"doc",className:"hidden-1350"},t.createElement("a",{href:"/docs",target:"_blank"},y.default("帮助文档"))),window.sugarConfig.hideDocsLink?null:t.createElement(h.default,{key:"feedback"}),t.createElement(k.default,{key:"productTypeTip"}),t.createElement(C.default,{key:"i18n"}),t.createElement(c.default,{key:"login-info",user:a})]}),J=t.createElement(s.Spinner,{size:"md",spinnerClassName:"d-block ma-auto"});if("done"===A.tree.loadState&&"done"===N.list.loadState&&(E?"done"===_.list.loadState:!0)){var V=x.map(A.tree.data,function(e){var a="report";return 3===e.type&&(a="explore"),{url:"/group/"+$+"/"+a+"/"+e.hash,icon:e.icon+(0===e.type?" text-info-dker":1===e.type?" text-report-ico":3===e.type?" text-report-ico":" text-report-ico"),name:e.name,children:e.children,isDir:0===e.type}}),X=N.list.data.map(function(e){return{url:"/group/"+$+"/dashboard/"+e.hash,icon:e.icon+" text-info-dker",name:e.name}}),Y=[];if(M){var Z=[];R&&Z.push({url:"/group/"+$+"/manage/database",name:y.default("数据源"),icon:"fa fa-database",isHot:!0}),P&&Z.push({url:"/group/"+$+"/manage/dataModel",name:y.default("数据模型"),icon:"fa fa-cubes",hidden:!window.sugarConfig.enableDataModel,isHot:!0}),R&&Z.push({url:"/group/"+$+"/manage/dbPreview",name:y.default("数据表预览"),icon:"fa fa-list"}),q&&Z.push({url:"/group/"+$+"/manage/sql",name:y.default("SQL模型"),icon:"fa fa-code"}),G&&Z.push({url:"/group/"+$+"/manage/rename",name:y.default("数据值映射"),icon:"fa fa-book"}),j&&Z.push({url:"/group/"+$+"/manage/widgetTemplate",name:y.default("组件模板"),icon:"fa fa-codepen"}),W&&Z.push({url:"/group/"+$+"/manage/chartTheme",name:y.default("图表主题"),icon:"fa fa-magic"}),F&&Z.push({url:"/group/"+$+"/manage/slider",name:y.default("轮播管理"),icon:"fa fa-desktop"}),z&&Z.push({url:"/group/"+$+"/manage/scene",name:y.default("三维场景管理"),icon:"fa fa-dice-d6",hidden:!E}),B&&!window.sugarConfig.disableChartWarning&&Z.push({url:"/group/"+$+"/manage/chart-warning",name:y.default("预警管理"),icon:"fa fa-bell text-info-red"}),Y=[{url:"/group/"+$+"/manage/system",icon:"fa fa-folder text-info-dker",name:y.default("数据管理"),isDir:!0,children:Z}]}H&&Y.unshift({url:"/group/"+$+"/manage/dashboard",name:y.default("大屏管理"),icon:"fa fa-line-chart text-info-dker"}),I&&Y.unshift({url:"/group/"+$+"/manage/report",name:y.default("报表管理"),icon:"fa fa-th text-report-ico"}),T&&Y.push({url:"/group/"+$+"/manage/dataCenter",icon:"fa fa-folder text-info-dker",name:y.default("系统设置"),isDir:!0,children:[{url:"/group/"+$+"/manage/role",name:y.default("角色管理"),icon:"fa fa-users"},{url:"/group/"+$+"/manage/user",name:y.default("用户管理"),icon:"fa fa-user"},{url:"/group/"+$+"/manage/export",name:y.default("导入导出"),icon:"fa fa-exchange",hidden:!window.sugarConfig.enableExport},{url:"/group/"+$+"/manage/setting",name:y.default("空间设置"),icon:"fa fa-cog"},{url:"/group/"+$+"/manage/AI-explore-setting",name:y.default("空间AI探索设置"),icon:"fa fa-search",hidden:!window.sugarConfig.enableNLP},{url:"/group/"+$+"/manage/accessKey",name:y.default("空间Access Key"),icon:"fa fa-key",hidden:!("private"===window.sugarConfig.deployType)},{url:"/group/"+$+"/manage/statistics",name:y.default("访问统计"),icon:"fa fa-line-chart"}]});var ea=[{url:"/group/"+$+"/home",name:y.default("概览"),icon:"fa fa-th-large text-info-dker"}];S.current.data.config.groupExplore&&S.current.data.config.dataModelHashs&&S.current.data.config.dataModelHashs.length&&ea.push({url:"/group/"+$+"/groupExplore/group_explore_"+$,name:y.default("空间AI探索"),icon:"fa fa-search m-r text-info-sun"});var aa=[{children:ea},{quickCreater:O?t.createElement(p.default,{group:S.current,reportTree:A.tree,dashboardList:N.list,sceneList:_.list,loading:"done"!==S.current.loadState||"done"!==A.tree.loadState,router:D,mode:"list",type:"dashboard"}):void 0,emptyText:"待创建大屏...",children:X.length?[{url:"dashboard",icon:"fa fa-folder text-info-dker",name:y.default(S.current.data.config.dashboardRootName||r.config.dashboardRootName||"数据大屏"),children:X,isDir:!0}]:[],showEmpty:O}];aa.push({quickCreater:K?t.createElement(p.default,{group:S.current,reportTree:A.tree,dashboardList:N.list,sceneList:_.list,loading:"done"!==S.current.loadState||"done"!==A.tree.loadState,router:D,mode:"list"}):void 0,children:V.length?[{url:"report",icon:"fa fa-folder text-info-dker",name:y.default(S.current.data.config.reportRootName||r.config.reportRootName||"报表"),children:V,isDir:!0}]:[],emptyText:"待创建报表...",showEmpty:K}),aa.push({type:"line"},{children:Y});var ra=["/group/"+$+"/manage/system","/group/"+$+"/manage/dataCenter"];T||ra.push("report"),J=t.createElement(f.default,{asideFolded:n,className:"group",navs:aa,defaultExpanded:ra,locationPath:Q})}return t.createElement(s.Layout,{header:U,footer:null,folded:n,className:b("page-layout-withAside",{"app-aside-wide":"wide"===S.current.data.navWidth,"app-dashboard-container":!(!this.props.params.dashboard&&!this.props.params.explore)}),aside:J,offScreen:v,asideClassName:"bg-black"},this.props.children)},a.displayName="Group",a=r.__decorate([n.inject(function(e){return{assist:e.assist,company:e.company.info,user:e.user.current,asideFolded:e.assist.asideFolded,mobileAsideOffScreen:e.assist.mobileAsideOffScreen,group:e.group,report:e.report,dashboard:e.dashboard,scene:e.scene}}),n.observer],a)}(t.Component);a.default=v});
;sugar.define("sugar:sites/group/home/operation-process-link.tsx",function(e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var t=e("sugar:node_modules/tslib/tslib.js"),s=e("sugar:node_modules/react/index.js"),n=e("sugar:node_modules/react-router/lib/index.js"),o=e("sugar:stores/index.ts"),a=e("sugar:widgets/quick-creator/quick-creator.tsx"),i=function(e){function r(){var r=null!==e&&e.apply(this,arguments)||this;return r.getLink=function(){},r}return t.__extends(r,e),r.prototype.render=function(){var e=this.props,r=e.link,t=e.linkType,o=e.currentGroup,i=e.report,u=e.dashboard,c=e.scene,d=e.router,l=e.children;return"quick-creator"===t&&"dashboard"===r||"report"===r?o&&i&&u&&c&&d?s.createElement(a.default,{className:"process-link",group:o,reportTree:i.tree,dashboardList:u.list,sceneList:c.list,loading:"done"!==o.loadState||"done"!==i.tree.loadState,router:d,mode:"process",type:r,children:l}):null:"link"===t?s.createElement(n.Link,{className:"process-link",to:r,children:l}):s.createElement("a",{className:"process-link",href:r,target:"_blank",children:l})},r.displayName="OperationProcessItem",r=t.__decorate([o.inject(function(e){return{currentGroup:e.group.current,report:e.report,scene:e.scene,dashboard:e.dashboard}})],r)}(s.PureComponent);r.default=i});
;sugar.define("sugar:sites/group/home/operation-process-item.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=e("sugar:node_modules/tslib/tslib.js"),s=e("sugar:node_modules/react/index.js"),a=e("sugar:sites/group/home/operation-process-link.tsx"),n=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.render=function(){var e=this.props,t=e.title,r=e.action,n=e.descript,i=e.arrow,o=e.picture,c=e.link,l=e.linkType,m=e.router;return s.createElement(a.default,{link:c,linkType:l,router:m},s.createElement("div",{className:"process"},s.createElement("div",{className:"process-media"},s.createElement("div",{className:"process-img"},s.createElement("img",{src:o,alt:t})),s.createElement("div",{className:"process-title"},t),r&&s.createElement("div",{className:"process-action"},r),s.createElement("div",{className:"process-descript"},n)),s.createElement("div",{className:"process-arrows"},i?i.map(function(e,t){return s.createElement("div",{className:"arrow-item",key:"arrow_"+t,style:{transform:"rotate("+e+"deg)"}},s.createElement("img",{src:"/static/img-resource/arrow.png",alt:""}))}):null)))},t.displayName="OperationProcessItem",t}(s.PureComponent);t.default=n});
;sugar.define("sugar:sites/group/home/operation-process.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=e("sugar:node_modules/tslib/tslib.js"),i=e("sugar:utils/i18n.ts"),a=e("sugar:node_modules/react/index.js"),s=e("sugar:sites/group/home/operation-process-item.tsx"),n=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.getLinkUrl=function(e){var t=window.location.pathname,r=t.match(/^\/group\/[^\/]+/);return r&&r[0]?r+e:""},t.processList=[[{title:i.default("添加数据源"),action:i.default("【数据管理】-【数据源】"),descript:i.default("连接云上及本地多种数据源&上传文件"),picture:"/static/img-resource/add-model.png",link:t.getLinkUrl("/manage/database"),linkType:"link",arrow:[0]}],[{title:i.default("创建数据模型"),action:i.default("【数据管理】-【数据模型】"),descript:i.default("对已添加至数据源中的数据进行可视化数据集建模"),picture:"/static/img-resource/create-data-model.png",link:t.getLinkUrl("/manage/dataModel"),linkType:"link",arrow:[-45,45]}],[{title:i.default("制作报表并分析数据"),action:i.default("【报表】-【新建】"),descript:i.default("丰富的可视化组件支持自助数据分析"),picture:"/static/img-resource/create-report.png",link:"report",linkType:"quick-creator",arrow:[0,45]},{title:i.default("制作大屏"),action:i.default("【数据大屏】-【新建】"),descript:i.default("丰富的可视化组件实现低成本酷炫大屏"),picture:"/static/img-resource/create-dashboard.png",link:"dashboard",linkType:"quick-creator",arrow:[0]}],[{title:i.default("邮件订阅"),descript:i.default("通过邮件定时任务发送报表至指定用户"),picture:"/static/img-resource/mail-subscribe.png",link:"/docs/Alert-Report-Email",linkType:"docs"},{title:i.default("预览/分享"),descript:i.default("制作好的资源的预览或分享至他人"),picture:"/static/img-resource/share.png",link:"/docs/Share-Publish",linkType:"docs"}]],t}return r.__extends(t,e),t.prototype.render=function(){var e=this;return a.createElement("div",{key:"operation-process",className:"operation-process text--center"},this.processList.map(function(t,i){return a.createElement("div",{className:"processItem",key:"process_"+i},t.map(function(t){return a.createElement(s.default,r.__assign({key:t.title,router:e.props.router},t))}))}))},t.displayName="OperationProcess",t}(a.PureComponent);t.default=n});
;sugar.define("sugar:sites/group/home/home.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=e("sugar:node_modules/tslib/tslib.js"),a=e("sugar:utils/i18n.ts"),s=e("sugar:node_modules/react/index.js"),o=e("sugar:node_modules/prop-types/index.js"),n=e("sugar:node_modules/react-document-title/index.js"),i=e("sugar:node_modules/amis/lib/index.js"),u=e("sugar:stores/index.ts"),l=e("sugar:sites/group/home/operation-process.tsx"),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.componentWillMount=function(){var e=this.props.currentGroup.data.hash;this.props.currentGroup.isAdmin&&this.props.overview.load(e)},t.prototype.componentDidMount=function(){var e=this.props.currentGroup.data.hash,t=this.props.currentGroup.data.key,r=this.props.groupPaths.get(e);r&&r!=="/group/"+t&&this.props.location.pathname!=="/group/"+t+"/home"&&this.context.router.replace(r)},t.prototype.render=function(){var e=this.props.currentGroup.data.admins,t=this.props.currentGroup.isAdmin;return t&&window.sugarConfig.enableDataModel?["done"===this.props.overview.loadState?s.createElement("div",{className:"home-card",key:"resource"},s.createElement("div",null,this.props.overview.data.map(function(e,t){return s.createElement("div",{className:"resource-box",key:e.name+"-"+t},s.createElement("div",{className:"resource-desc"},s.createElement("span",{className:"resource-count"},e.count),s.createElement("span",null,"个")),s.createElement("div",{className:"resource-name"},e.name),s.createElement("div",{className:"resource-icon"},s.createElement("i",{className:e.icon})))}))):s.createElement(i.Spinner,{key:"resource-loading",overlay:!0,size:"lg"}),s.createElement("div",{className:"home-card",key:"operation-process"},s.createElement("header",null,a.default("使用流程")),s.createElement("div",{className:"operation-process-box"},s.createElement(l.default,{router:this.props.router})))]:s.createElement("div",{className:"text--center"},s.createElement(n,{key:"title",title:a.default("空间首页")}),",",s.createElement("h3",{className:"text-info m-t-lg"},a.default("欢迎使用")," ",window.sugarConfig.name),s.createElement("p",{className:"m-t"},a.default("您可以点击左侧的导航前往相应的页面。点击左上角的空间名称可以回到本首页！")),s.createElement("div",{className:"m-t"},a.default("权限问题，您可以联系该空间管理员：")),e&&e.length?e.map(function(e,t){return s.createElement("div",{key:t,className:"mailto-link m-t"},s.createElement("a",{href:"mailto:"+e.email},e.realName+"("+e.name+")"))}):s.createElement("div",{className:"m-t"},a.default("无管理员，请联系组织管理员")))},t.displayName="GroupHome",t.contextTypes={router:o.object},t=r.__decorate([u.inject(function(e){return{groupPaths:e.assist.groupPaths,currentGroup:e.group.current,overview:e.overview}}),u.observer],t)}(s.Component);t.default=c});
;sugar.define("sugar:sites/group/manage/manage.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=e("sugar:node_modules/tslib/tslib.js"),r=e("sugar:node_modules/react/index.js"),s=e("sugar:stores/index.ts"),o=e("sugar:utils/exception.ts"),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.componentDidCatch=function(e,t){o.captureException(e,t)},t.prototype.render=function(){return this.props.children},t.displayName="GroupManage",t=n.__decorate([s.inject(function(e){return{group:e.group}}),s.observer],t)}(r.Component);t.default=u});
;sugar.define("sugar:sites/group/manage/report/report-folder.tsx",function(e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var t=e("sugar:node_modules/tslib/tslib.js"),n=e("sugar:utils/i18n.ts"),o=e("sugar:node_modules/react/index.js"),a=e("sugar:stores/index.ts"),i=e("sugar:node_modules/amis/lib/index.js"),s=e("sugar:utils/tree.ts"),u=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return t.__extends(r,e),r.prototype.componentWillMount=function(){this.props.reportTree.loadAdmin(this.props.group.current.data.hash)},r.prototype.render=function(){var e=this.props,r=e.reportTree,t=e.group,a=e.company,u="pending"===r.addState||"pending"===r.deleteState||"done"!==r.loadAdminState;if(u)return o.createElement(i.Spinner,{overlay:!0,size:"lg"});var l=s.map(r.adminData,function(e){return{type:e.type,name:e.name,value:e.hash,icon:e.icon,children:e.children}});return l=s.filter(l,function(e){return 0===e.type}),l=[{name:n.default(t.current.data.config.reportRootName||a.config.reportRootName||"根目录"),value:"0",children:l}],o.createElement(i.Tree,{className:"tree-selector",itemClassName:"tree-node",options:l,onChange:r.setCurrentFolder,value:r.currentFolder,labelField:"name",valueField:"value",iconField:"ico"})},r.displayName="ReportFolder",r=t.__decorate([a.inject(function(e){return{reportTree:e.report.tree,company:e.company.info}}),a.observer],r)}(o.Component);r.default=u});
;sugar.define("sugar:sites/group/manage/report/report-form-move.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=e("sugar:node_modules/tslib/tslib.js"),n=e("sugar:utils/i18n.ts"),a=e("sugar:node_modules/react/index.js"),o=e("sugar:node_modules/mobx-react/index.js"),i=e("sugar:utils/tree.ts"),l=e("sugar:sites/amis-renderer.tsx"),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.render=function(){var e=this.props,t=e.onSubmit,r=e.onClose,o=e.initialState,u=e.reportTree,s=o.items.map(function(e){return e.hash}),d=i.map(u,function(e){return{type:e.type,name:e.name,value:e.hash,children:e.children}});d=i.filter(d,function(e){return 0===e.type}),d=[{name:n.default("根目录"),value:"0",children:d}];for(var c=function(e){if(0===i.find(u,function(t){return e===t.hash}).type){for(var t=0,r=i.findFlatChildren(d,function(t){return e===t.value});t<r.length;t++){var n=r[t];n.disabled=!0}i.find(d,function(t){return e===t.value}).disabled=!0}},f=0,p=s;f<p.length;f++){var m=p[f];c(m)}return a.createElement(l.default,{schema:{type:"dialog",title:n.default("批量移动报表"),size:"md",onClose:r,actions:[{type:"button",actionType:"cancel",label:n.default("取消")},{type:"button",level:"primary",actionType:"submit",label:n.default("确定")}],body:{type:"form",mode:"horizontal",horizontal:{left:"col-md-2",right:"col-md-10"},onFinished:function(e){return r(),t(e,s),!1},data:o,controls:[{type:"tree",name:"parentHash",label:n.default("目标目录"),options:d,labelField:"name",valueField:"value"}]}}})},t.displayName="ReportFormMoveDialog",t=r.__decorate([o.inject(function(e){var t=e.sugar;return{reportTree:t.report.tree.data}})],t)}(a.PureComponent);t.default=u});
;sugar.define("sugar:sites/group/manage/report/report-form-share.tsx",function(e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.reportPublishSchema=void 0;var t=e("sugar:node_modules/tslib/tslib.js"),l=e("sugar:utils/i18n.ts"),i=e("sugar:node_modules/react/index.js"),n=e("sugar:utils/url.ts"),r=e("sugar:stores/index.ts"),o=e("sugar:sites/amis-renderer.tsx"),u=e("sugar:widgets/amis-inline-switch.tsx"),s=e("sugar:widgets/password-input/password-input.tsx"),d=e("sugar:utils/common-helper.ts"),p=[{label:l.default("不缓存"),value:0},{label:l.default("一天"),value:1},{label:l.default("三天"),value:3},{label:l.default("一周"),value:7}];a.reportPublishSchema=function(e,a){var r=window.sugarConfig.nowProductConfig,o=!r||r.passwordShare,f=!r||r.tokenShare,h=!r||r.ipWhiteList;return{type:"form",name:"sugar-report-public",mode:"normal",initApi:"/api/manage/group/"+e+"/report/$hash/getPublishReportData",api:"/api/manage/group/"+e+"/report/$hash/publishDash"+(a?"?byReportToolbar=1":""),controls:[{name:"authType",label:l.default("分享状态"),type:"radios",required:!0,inline:!1,options:[{label:l.default("停止分享"),value:0},{label:l.default("公开分享"),value:1},{label:l.default("加密公开分享「"+(o?"":"（此版本不支持）")+"」"),value:2,disabled:!o},{label:l.default("通过Token验证「"+(f?"":"（此版本不支持）")+"」"),value:3,disabled:!f}]},{name:"password",label:l.default("密码"),visibleOn:"authType === 2",required:!0,children:function(e){var a=e.onChange,n=e.value;return i.createElement(s.default,t.__assign({},{onChange:a,value:n},{label:l.default("密码")}))}},{name:"cacheTime",label:l.default("密码缓存时间设置"),type:"select",options:p,value:0,visibleOn:"authType === 2"},{name:"iframeHost",label:l.default("iframe 免密域名"),type:"text",placeholder:l.default("如：www.baidu.com,www.qq.com"),validations:"maxLength:500",visibleOn:"authType === 2"},{type:"tpl",label:" ",visibleOn:"authType === 2",tpl:'\n          <p class="help-block">\n            '+l.default("当加密公开分享时，可以指定「iframe免密域名」,多个域名用英文逗号分隔（如 www.baidu.com,www.qq.com，当然也可以是ip如：220.181.38.150）。")+"</br>\n            "+l.default("当报表作为 iframe 嵌入这些域下的网页时，可以跳过密码验证，其他情况仍需要密码验证。")+"</br>\n            "+l.default("不输入「iframe免密域名」则不开启这个功能。")+"\n          </p>\n          <p></p>\n        "},{name:"config.tokenText",type:"text",label:"Token",visibleOn:"authType === 3",value:d.randomWord(!0,32,32),desc:'\n             <a href="/docs/Share-Publish" class="text-sm text-info" target="_blank">'+l.default("什么是Token验证？")+"</a>"},{type:"checkbox",option:l.default("Token验证有效期"),name:"config.isValidTimeCheck",visibleOn:"authType === 3"},{type:"range",name:"config.validTime",min:1,max:32,unit:"小时",visibleOn:"authType === 3 && config.isValidTimeCheck === true",value:32},{name:"config.lang",label:l.default("分享页面语言环境"),type:"radios",required:!0,inline:!1,value:"default",options:[{label:l.default("默认"),value:"default"},{label:l.default("中文"),value:"zh_cn"},{label:l.default("英文"),value:"en"}]},u.amisInlineSwitch("config.ipWhiteListEnable",l.default("IP白名单")+(h?"":l.default("（此版本不支持）")),void 0,!1,void 0,!h),{name:"config.ipWhiteList",type:"textarea",placeholder:l.default("请输入IP，多个IP可使用英文逗号分隔，支持CIDR"),hiddenOn:"!config.ipWhiteListEnable",desc:'<a href="https://baike.baidu.com/item/%E6%97%A0%E7%B1%BB%E5%88%AB%E5%9F%9F%E9%97%B4%E8%B7%AF%E7%94%B1/15758573?fromtitle=CIDR&fromid=3695195&fr=aladdin" class="text-sm text-info" target="_blank">'+l.default("什么是CIDR？")+"</a>"},{type:"tpl",label:" ",hiddenOn:"authType === 0 || !token",tpl:'\n          <p class="m-t-sm">\n            '+l.default("当前分享链接：")+"</br>\n            <a class=\"text-info\" target='_blank' href='"+n.shareSourceHost+"/report/<%- data.hash %>/<%- data.token %>'>"+n.shareSourceHost+"/report/<%- data.hash %>/<%- data.token %></a>\n          </p>\n        "},u.amisInlineSwitch("updateToken",l.default("更新分享链接"),"authType === 0 || !token")]}};var f=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return t.__extends(n,e),n.prototype.updateTable=function(e){this.props.reportTree.loadSlient(e.data.data)},n.prototype.render=function(){var e=this.props,t=e.initialState,n=e.onClose,r=e.groupHash;return i.createElement(o.default,{schema:{type:"page",body:{title:l.default("报表「"+t.name+"」公开分享"),type:"dialog",bodyClassName:"wrapper",actions:[{type:"button",actionType:"cancel",label:l.default("取消")},{type:"submit",primary:!0,label:l.default("更新公开分享状态")}],onClose:function(){n()},onConfirm:function(){n()},data:t,body:a.reportPublishSchema(r)}},update:this.updateTable.bind(this)})},n.displayName="ReportFormShareDialog",n=t.__decorate([r.inject(function(e){return{reportTree:e.report.tree}}),r.observer],n)}(i.Component);a.default=f});
;sugar.define("sugar:sites/group/manage/report/report-form-copy.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=e("sugar:node_modules/tslib/tslib.js"),r=e("sugar:utils/i18n.ts"),n=e("sugar:node_modules/react/index.js"),l=e("sugar:stores/index.ts"),i=e("sugar:utils/tree.ts"),s=e("sugar:sites/amis-renderer.tsx"),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.render=function(){var e=this.props,t=e.onSubmit,l=e.onClose,u=e.initialState,o=e.reportTree,d=i.map(o.data,function(e){return{type:e.type,name:e.name,value:e.hash,children:e.children}});d=i.filter(d,function(e){return 0===e.type});var m=[{name:r.default("根目录"),value:"0",children:d}],p=a.__assign({parentHash:"0",name:"",url:"",isPublic:!1,isDev:!1,remark:""},u),c=i.findParent(o.adminData,function(e){return e.hash===p.hash});return c&&(p.parentHash=c.hash),n.createElement(s.default,{schema:{type:"dialog",onClose:l,size:"md",title:r.default("以「"+p.name+"」为模版新建"),body:{type:"form",mode:"horizontal",horizontal:{left:"col-md-2",right:"col-md-9"},data:p,onFinished:function(e){return l(),t(e),!1},controls:[{type:"text",name:"name",label:r.default("名称"),required:!0,validations:{maxLength:20}},{type:"tree",name:"parentHash",options:m,labelField:"name",valueField:"value",multiple:!1,label:r.default("父目录")},{type:"switch",name:"isPublic",label:r.default("公开")},{type:"switch",name:"isDev",label:r.default("开发模式")},{type:"textarea",name:"remark",placeholder:r.default("简单描述"),label:r.default("简介"),validations:{maxLength:50}}]}}})},t=a.__decorate([l.inject(function(e){return{reportTree:e.report.tree}})],t)}(n.PureComponent);t.default=u});
;sugar.define("sugar:sites/group/manage/report/report-table.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=e("sugar:node_modules/tslib/tslib.js"),o=e("sugar:utils/i18n.ts"),r=e("sugar:node_modules/react/index.js"),n=e("sugar:node_modules/react-router/lib/index.js"),s=e("sugar:node_modules/copy-to-clipboard/index.js"),i=e("sugar:node_modules/amis/lib/index.js"),l=e("sugar:widgets/progress.ts"),d=e("sugar:widgets/qrcode-dialog.tsx"),u=e("sugar:utils/tree.ts"),p=e("sugar:widgets/confirm.tsx"),c=e("sugar:sites/group/manage/report/report-form.tsx"),h=e("sugar:sites/group/manage/report/report-form-move.tsx"),f=e("sugar:sites/group/manage/report/report-form-share.tsx"),g=e("sugar:widgets/product-type/product-type-modal.tsx"),m=e("sugar:sites/amis-renderer.tsx"),y=e("sugar:utils/url.ts"),b=e("sugar:sites/group/manage/report/report-form-copy.tsx"),v=e("sugar:stores/index.ts"),C={0:"fa-folder",1:"fa-th",2:"fa-file",3:"fa-superpowers"},w=function(e){function t(t){var a=e.call(this,t)||this;return a.state={showQrCode:!1},a.handleQrCode=a.handleQrCode.bind(a),a.copyUrl=a.copyUrl.bind(a),a}return a.__extends(t,e),t.prototype.handleQrCode=function(){this.setState({showQrCode:!this.state.showQrCode})},t.prototype.copyUrl=function(e){s(e)?i.toast.success(o.default("链接已复制")):i.toast.error(o.default("无法复制，请点击文字打开链接后手动复制"))},t.prototype.getAuthType=function(e){var t=this,a="-";if(0!==e.type)if(0===e.authType)a="-";else{var n="report";3===e.type&&(n="explore");var s=y.shareSourceHost+"/"+n+"/"+e.hash+"/"+e.token;a=[r.createElement("a",{key:"link",id:"link",className:"text-info",target:"_blank",href:s},o.default(2===e.authType?"加密分享":"公开分享")),r.createElement(i.Button,{level:"link",size:"sm",tooltip:o.default("复制分享链接"),placement:"bottom",key:"copy",onClick:function(){return t.copyUrl(s)},style:{paddingRight:0}},r.createElement("i",{className:"fa fa-clipboard"})),r.createElement(i.Button,{level:"link",size:"sm",tooltip:o.default("二维码"),placement:"bottom",key:"qrcode",onClick:this.handleQrCode,style:{paddingRight:0}},r.createElement("i",{className:"fa fa-qrcode"})),this.state.showQrCode?r.createElement(d.default,{key:"qrCode",name:e.name,qrUrl:s,onClose:this.handleQrCode}):null]}return a},t.prototype.render=function(){return r.createElement("td",null,this.getAuthType(this.props.data))},t}(r.PureComponent),k=function(e){function t(t){var a=e.call(this,t)||this;a.groupKey="",a.groupHash="",a.disableReport=!1,a.orderKey="0",a.getCurrentReports=a.getCurrentReports.bind(a),a.saveOrderApi=a.saveOrderApi.bind(a),a.handleReportAction=a.handleReportAction.bind(a),a.handleRequestView=a.handleRequestView.bind(a),a.handleAdd=a.handleAdd.bind(a),a.handleCopy=a.handleCopy.bind(a),a.handleDelete=a.handleDelete.bind(a),a.handleMoveSubmit=a.handleMoveSubmit.bind(a),a.handleMultiDelete=a.handleMultiDelete.bind(a);var o=window.sugarConfig.nowProductConfig,r=a.props.group;return a.groupKey=r.current.data.key,a.groupHash=r.current.data.hash,a.disableReport=o&&!o.report,a}return a.__extends(t,e),t.prototype.saveOrderApi=function(){var e=this;return{url:"/api/manage/group/"+this.groupHash+"/report/updateOrder",method:"put",requestAdaptor:function(e){var t=[];return e.data.rows.forEach(function(e,a){var o=a+1;e.orderIndex!==o&&t.push({hash:e.hash,orderIndex:o})}),a.__assign(a.__assign({},e),{data:t})},adaptor:function(t){return e.orderKey="order"+Date.now(),e.props.reportTree.setData(t.data),{rows:e.getCurrentReports(e.props.reportTree.currentFolder,e.props.reportTree.adminData)}}}},t.prototype.handleReportAction=function(){this.disableReport&&g.showUpdate("product-type-report")},t.prototype.handleRequestView=function(e,t){var a=t.data,o=this.props.router,r="/group/"+this.groupKey+"/"+(3===a.type?"explore":"report")+"/"+a.hash;o&&o.push?o.push(r):window.open(r)},t.prototype.handleAdd=function(e){var t=this;l.default.show();var a=this.props,r=a.router,n=a.reportTree;e.hash?n.update(this.groupHash,e).then(function(){l.default.hide(),i.toast.success(o.default("修改成功！"))}).catch(function(e){l.default.hide(),i.toast.error(e.message)}):n.add(this.groupHash,e).then(function(e){return l.default.hide(),i.toast.success(o.default("新建成功！")),e.res.data}).catch(function(e){l.default.hide(),i.toast.error(e.message)}).then(function(e){(null===e||void 0===e?void 0:e.hash)&&t.groupKey&&setTimeout(function(){1===e.type&&r.push("/group/"+t.groupKey+"/edit/report/"+e.hash)},500)})},t.prototype.handleCopy=function(e){return l.default.show(),this.props.reportTree.copy(this.groupHash,e).then(function(){l.default.hide(),i.toast.success(o.default("新建成功！"))}).catch(function(e){l.default.hide(),i.toast.error(e.message)}),!1},t.prototype.handleDelete=function(e,t){var a=this,r=t.data;p.confirm(o.default('确定要删除 "「'+r.name+'」" 吗? 「'+(0===r.type?o.default("请注意, 删除文件夹会同时删除其中包含的所有项目！"):"")+"」")).then(function(){l.default.show(),a.props.reportTree.delete(a.groupHash,r).then(function(){l.default.hide(),i.toast.success(o.default("删除成功！"))}).catch(function(e){l.default.hide(),i.toast.error(e.message)})})},t.prototype.handleMoveSubmit=function(e,t){l.default.show(),this.props.reportTree.multiMove(this.groupHash,{parentHash:e.parentHash,hashs:t}).then(function(){l.default.hide(),i.toast.success(o.default("批量移动成功！"))}).catch(function(e){l.default.hide(),i.toast.error(e.message)})},t.prototype.handleMultiDelete=function(e,t){var a,r=this,n=null===(a=t.data.selectedItems)||void 0===a?void 0:a.map(function(e){return e.hash});p.confirm(o.default("确定要删除选中的项目吗? 请注意, 删除文件夹会同时删除其中包含的所有项目！")).then(function(){l.default.show(),r.props.reportTree.multiDelete(r.groupHash,n).then(function(){l.default.hide(),i.toast.success(o.default("批量删除成功！"))}).catch(function(e){l.default.hide(),i.toast.error(e.message)})})},t.prototype.getOperations=function(){var e=this;return[{type:"button",size:"sm",visibleOn:"data.type !== 0",label:o.default("公开分享"),actionType:this.disableReport?"":"dialog",dialog:this.disableReport?null:{children:function(t){return t.show?r.createElement(f.default,{groupHash:e.groupHash,initialState:t.data,onClose:function(){t.store.closeDialog()}}):null}}},{type:"button",size:"sm",visibleOn:"data.editable",label:o.default("更改属性"),onClick:this.handleReportAction,actionType:this.disableReport?"":"dialog",dialog:this.disableReport?null:{children:function(t){return t.show?r.createElement(c.default,{onSubmit:e.handleAdd,mode:"update",initialState:t.data,onClose:function(){return t.store.closeDialog()}}):null}}},{type:"button",size:"sm",visibleOn:"data.type !== 0 && data.editable",label:o.default("以此为模版新建"),onClick:this.handleReportAction,actionType:this.disableReport?"":"dialog",dialog:this.disableReport?null:{children:function(t){return t.show?r.createElement(b.default,{onSubmit:e.handleCopy,initialState:t.data,onClose:function(){return t.store.closeDialog()}}):null}}},{type:"button",size:"sm",visibleOn:"data.editable",label:o.default("删除"),onClick:this.handleDelete}]},t.prototype.getAddButtons=function(){var e=this,t=this.props.reportTree.currentFolder,a=[{key:1,type:"button",level:"primary",actionType:"dialog",label:o.default("新建报表页面")},{key:3,type:"button",level:"info",actionType:"dialog",label:o.default("新建AI探索页面")},{key:2,type:"button",actionType:"dialog",label:o.default("新建iframe页面")},{key:0,type:"button",actionType:"dialog",label:o.default("新建文件夹")}];return a.forEach(this.disableReport?function(t){t.actionType="",t.onClick=e.handleReportAction}:function(a){a.dialog={children:function(o){return o.show?r.createElement(c.default,{mode:"add",onSubmit:e.handleAdd,onClose:function(){o.store.closeDialog()},initialState:{type:a.key,parentHash:t}}):null}}}),a},t.prototype.getCurrentReports=function(e,t){var a=t;return e&&"0"!==e&&(a=u.find(t,function(t){return t.hash===e}).children),u.map(a,function(e){return{authType:e.authType,token:e.token,hash:e.hash,icon:e.icon,isDev:e.isDev,isPublic:e.isPublic,name:e.name,orderIndex:e.orderIndex,remark:e.remark,type:e.type,url:e.url,password:e.password,editable:e.editable,dataModelHash:(e.config.dataModelHashs||[]).join(","),onlyAI:e.config.onlyAI,iframeHost:"string"==typeof e.config.iframeHost?e.config.iframeHost:"",cacheTime:e.config.cacheTime||0}})},t.prototype.render=function(){var e=this,t=this.props.reportTree;return r.createElement(r.Fragment,null,r.createElement(m.default,{key:this.orderKey,data:{rows:this.getCurrentReports(t.currentFolder,t.adminData)},onAction:function(){},schema:{type:"page",body:[{type:"button-toolbar",className:"page-manage__toolBar",buttons:this.getAddButtons()},{type:"crud",mode:"table",title:"",className:"page-manage__table-container",syncLocation:!1,draggable:!0,source:"rows",saveOrderApi:this.saveOrderApi(),columns:[{label:o.default("名称"),children:function(a){var o=a.data;return r.createElement("td",null,r.createElement("i",{className:"fa "+(C[o.type]||"fa-folder")+" page-type"}),0===o.type?r.createElement("a",{className:"table__name--link",onClick:function(){t.setCurrentFolder(o.hash)}},o.name):r.createElement(n.Link,{className:"text-info--hover",to:"/group/"+e.groupKey+"/"+(3===o.type?"explore":"report")+"/"+o.hash},o.name))}},{label:o.default("公开分享状态"),width:150,children:function(e){var t=e.data;return r.createElement(w,{data:t})}},{type:"operation",label:o.default("操作"),width:300,buttons:this.getOperations()}],bulkActions:[{type:"button",label:o.default("批量移动"),actionType:"dialog",dialog:{children:function(t){return t.show?r.createElement(h.default,{onSubmit:e.handleMoveSubmit,onClose:function(){t.store.closeDialog()},initialState:t.data}):null}}},{type:"button",label:o.default("批量删除"),onClick:this.handleMultiDelete}]}]}}))},t.displayName="ReportTable",t=a.__decorate([v.inject(function(e){return{reportTree:e.report.tree}}),v.observer,a.__metadata("design:paramtypes",[Object])],t)}(r.Component);t.default=k});
;sugar.define("sugar:sites/group/manage/report/report.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=e("sugar:node_modules/tslib/tslib.js"),s=e("sugar:utils/i18n.ts"),a=e("sugar:node_modules/react/index.js"),o=e("sugar:node_modules/react-document-title/index.js"),u=e("sugar:stores/index.ts"),n=e("sugar:sites/group/manage/report/report-folder.tsx"),l=e("sugar:sites/group/manage/report/report-table.tsx"),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.render=function(){return a.createElement(o,{title:s.default("报表管理")},a.createElement("div",{className:"full-box d-flex flex-row"},a.createElement("div",{className:"w-md page-manage__tree-container overflow-auto b-r"},a.createElement(n.default,{group:this.props.group})),a.createElement("div",{className:"d-flex flex-col flex-1"},a.createElement("div",{className:"flex-1"},a.createElement("div",{className:"full-box"},a.createElement(l.default,{group:this.props.group,router:this.props.router}))))))},t=r.__decorate([u.inject(function(e){return{group:e.group}})],t)}(a.PureComponent);t.default=i});
;sugar.define("sugar:widgets/user-select.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UserSelectFormCtrl=void 0;var a=e("sugar:node_modules/tslib/tslib.js"),s=e("sugar:utils/i18n.ts"),n=e("sugar:node_modules/react/index.js"),r=e("sugar:node_modules/amis/lib/index.js"),l=e("sugar:widgets/progress.ts"),i=e("sugar:utils/fetch.ts"),o=e("sugar:node_modules/classnames/index.js"),u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.hasSearched=!1,t}return a.__extends(t,e),t.prototype.componentWillMount=function(){this.add=this.add.bind(this),this.del=this.del.bind(this),this.loadDefaultValue=this.loadDefaultValue.bind(this),this.searchUsers=this.searchUsers.bind(this),this.handleKeyDown=this.handleKeyDown.bind(this),this.setState({searchText:"",isSearching:!1,suggestionUsers:[]}),this.loadDefaultValue()},t.prototype.add=function(e){var t=(this.props.value||[]).concat(e);this.props.onChange(t)},t.prototype.del=function(e){var t=(this.props.value||[]).concat();t.splice(e,1),this.props.onChange(t)},t.prototype.loadDefaultValue=function(){var e=this,t=this.props.defaultValueApi;t&&(this.setState({isLoadingDefaultValue:!0}),l.default.show(),i.get(t).then(function(t){e.setState({isLoadingDefaultValue:!1}),l.default.hide(),e.props.onChange(t.data||[])}).catch(function(t){l.default.hide(),r.toast.error(t.message),e.setState({isLoadingDefaultValue:!1})}))},t.prototype.searchUsers=function(){var e=this,t=this.state.searchText;if(!t)return void this.setState({isSearching:!1,suggestionUsers:[]});this.setState({isSearching:!0}),l.default.show();var a=this.props.api||"/api/manage/user/search";this.hasSearched=!0,i.get(a,{params:{searchText:t}}).then(function(t){e.setState({isSearching:!1,suggestionUsers:t.data}),l.default.hide()}).catch(function(t){l.default.hide(),r.toast.error(t.message),e.setState({isSearching:!1,suggestionUsers:[]})})},t.prototype.handleKeyDown=function(e){13===e.which&&(e.stopPropagation(),e.preventDefault(),this.searchUsers())},t.prototype.render=function(){var e=this,t=this.props,a=t.value,l=t.errorMsg,i=t.containerClass,o=t.noneMsg,u=this.state,c=u.searchText,d=u.suggestionUsers,h=u.isSearching,m=u.isLoadingDefaultValue,p=[];return n.createElement("div",{className:i},m?n.createElement(r.Spinner,null):null,a&&a.length?a.map(function(t,a){return p.push(t.name),n.createElement("div",{style:{marginBottom:8},key:a},n.createElement(r.Checkbox,{value:!0,onChange:function(){return e.del(a)},label:t.realName+"("+t.name+")"}))}):o||null,l?n.createElement("div",null,l):null,n.createElement("div",{className:"a-Divider a-Divider--dashed"}),n.createElement("div",{style:{margin:"5px 0"}},n.createElement("div",{style:{display:"flex"}},n.createElement("div",{style:{flex:"1 1 0"}},n.createElement(r.InputBox,{value:c,placeholder:s.default("输入邮箱或用户名查找用户"),type:"text",onChange:function(t){return e.setState({searchText:t})},onKeyDown:this.handleKeyDown})),n.createElement(r.Button,{level:"info",onClick:this.searchUsers},s.default("搜索")))),n.createElement("div",{style:{marginTop:20}},h?n.createElement(r.Spinner,null):d&&d.length?d.map(function(t,a){var s=p.indexOf(t.name);return n.createElement("div",{style:{marginBottom:8},key:a},n.createElement(r.Checkbox,{value:!!~s,disabled:!!~s||t.disabled,onChange:function(){return~s?e.del(s):e.add(t)},label:t.realName+"("+t.name+")"}))}):n.createElement("div",{className:"text-muted"},this.hasSearched?n.createElement("div",null,"没有找到组织中的任何用户（只有组织管理员在",n.createElement("a",{target:"_blank",href:"/docs/GettingStarted-Company-User",style:{color:"#f05050"}},"『组织管理』"),"中已经添加的用户，才能被搜索到）"):"")))},t.displayName="UserSelect",t}(n.PureComponent);t.default=u;var c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.render=function(){var e=this.props,t=e.label,s=e.mode,r=a.__rest(e,["label","mode"]);return"normal"===s?n.createElement("div",{className:"a-Form-item"},n.createElement("label",{className:"control-label"},t),n.createElement("div",null,n.createElement(u,a.__assign({},r)))):n.createElement("div",{className:o("a-Form-item a-Form-item--horizontal",{"has-error":!!r.errorMsg})},n.createElement("label",{className:"control-label a-Form-itemColumn--2"},t),n.createElement("div",{className:"a-Form-itemColumn--10"},n.createElement(u,a.__assign({},r))))},t}(n.PureComponent);t.UserSelectFormCtrl=c});
;sugar.define("sugar:widgets/tree-array-editor/tree-array-editor-item.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=e("sugar:node_modules/tslib/tslib.js"),r=e("sugar:node_modules/react/index.js"),a=e("sugar:node_modules/classnames/index.js"),s=e("sugar:node_modules/amis/lib/components/Switch.js"),i=e("sugar:node_modules/mobx-react/index.js"),l=e("sugar:node_modules/mobx/lib/mobx.js"),d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isHidden=!1,t}return n.__extends(t,e),t.prototype.componentWillMount=function(){this.renderTds=this.renderTds.bind(this);var e=this.props,t=e.rowValue,n=e.index,r=e.onChange,a=e.cols;t.children&&a.forEach(function(e){var a;e.key&&t[e.key]===!0&&r(n,(a={},a[e.key]=!0,a.children=t.children,a),!0)})},t.prototype.onChange=function(e,t){var n,r=this.props,a=r.rowValue,s=r.index,i=r.onChange,l=(n={},n[t||""]=e,n);a.children&&(l.children=a.children),i(s,l)},t.prototype.renderTds=function(e){var t=this,a=this.props,i=a.rowValue,l=a.depth;return e.map(function(e,a){var d,o=e.type,c=(e.list,e.children,e.key),u=(e.name,e.tdStyle),m=(e.className,e.hidden),h=(e.multiple,n.__rest(e,["type","list","children","key","name","tdStyle","className","hidden","multiple"]),u);if(0===a&&u&&(h=n.__assign(n.__assign({},u),{paddingLeft:10*l})),m)return null;var p=null;switch(o){case"text":p=r.createElement("span",{className:"a-PlainField"},i[c||""]||"");break;case"switch":p=r.createElement(s.default,{value:!!i[c||""]||!1,disabled:!!(null===(d=i.disable)||void 0===d?void 0:d.includes(c||"")),onChange:function(e){return t.onChange(e,c||"")}});break;default:p=r.createElement("span",{className:"a-PlainField"},"-")}return r.createElement("td",{key:a,style:h},p)})},t.prototype.render=function(){var e=this,t=this.props,n=t.rowValue,s=t.cols,i=t.children,l=t.depth;return r.createElement(r.Fragment,null,r.createElement("tr",{key:n.hash,className:"backg"},r.createElement("td",{className:"tree-array-editor__toggle",onClick:function(){e.isHidden=!e.isHidden}},n.children&&r.createElement("a",{className:a("a-Table-expandBtn",{isExpanded:this.isHidden}),style:{left:10*l}},r.createElement("svg",{viewBox:"0 0 99 176",className:"icon icon-right-arrow-bold"},r.createElement("g",{transform:"translate(-0.132812, 0.304688)",fill:"currentColor",fillRule:"nonzero"},r.createElement("path",{d:"M95.6353697,79.4031346 C95.3433678,79.1111326 95.037575,78.8417152 94.7219891,78.5906854 L19.819373,3.29993262 C15.6492004,-0.870040234 8.88818437,-0.870040234 4.71821172,3.29993262 C0.548238867,7.47010527 0.548238867,14.2309215 4.71821172,18.4010939 L72.9329621,87.0041811 L3.25320488,156.617783 C-0.916767969,160.787956 -0.916767969,167.548772 3.25320488,171.719144 C7.42317773,175.889117 14.1841937,175.889117 18.3543662,171.719144 L94.7211895,95.4180764 C95.0369754,95.1668467 95.342968,94.8976293 95.6351697,94.6054273 C97.7329475,92.5076496 98.7744412,89.7539166 98.7615739,87.0043809 C98.7746414,84.2544453 97.7331475,81.5009123 95.6353697,79.4031346 Z",id:"\\u8DEF\\u5F84"}))))),this.renderTds(s)),this.isHidden&&i)},t.displayName="TreeArrayEditorItem",n.__decorate([l.observable,n.__metadata("design:type",Object)],t.prototype,"isHidden",void 0),t=n.__decorate([i.observer],t)}(r.Component);t.default=d});
;sugar.define("sugar:widgets/tree-array-editor/tree-array-editor.tsx",function(e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var t=e("sugar:node_modules/tslib/tslib.js"),n=e("sugar:node_modules/react/index.js"),r=e("sugar:node_modules/amis/lib/components/Checkbox.js"),l=e("sugar:widgets/tree-array-editor/tree-array-editor-item.tsx"),i=e("sugar:widgets/tree-array-editor/tree-array-editor-item.tsx");Object.defineProperty(a,"TreeArrayEditorCol",{enumerable:!0,get:function(){return i.TreeArrayEditorCol}});var o=e("sugar:node_modules/lodash/omit.js"),s=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.changeData={},a.value=[],a.colSelectStatus=a.props.cols.map(function(){return 0}),a.getColSelectStatus=function(){var e,t=((null===(e=a.props.value)||void 0===e?void 0:e.data)||[]).length,n=a.props.cols.map(function(e){var n,r=e.key;if(r&&t){var l=((null===(n=a.props.value)||void 0===n?void 0:n.data)||[]).filter(function(e){return e[r]}).length;return l===t?2:+(0!==l)}return 0});return a.colSelectStatus=n,n},a.onRowValueChange=function(e,t,n){var r;a.value=(null===(r=a.props.value)||void 0===r?void 0:r.data)||[];var l=a.onChange(e,t,n);a.props.onChange({data:l,changeData:a.changeData})},a.onChange=function(e,n,r){return(a.value||[]).map(function(l,i){if(e===i){var o=Object.keys(n);return o.filter(function(e){return"children"!==e}).forEach(function(e){if(n.children&&n.children.length){var t=function(l){return l.map(function(l){l[e]=!1,r||a.assignChangeData(!1,l.hash,e),l.disable=l.disable||[],n[e]?l.disable.push(e):l.disable=l.disable.filter(function(a){return a!==e}),l.children&&l.children.length&&t(l.children)})};t(n.children)}if(!r){var i=n[e];a.assignChangeData(i,l.hash,e)}}),t.__assign(t.__assign({},l),n)}return l})},a.assignChangeData=function(e,n,r){var l,i=t.__assign({},a.changeData);i[n]=i[n]||{},i[n]=void 0===i[n][r]?t.__assign(t.__assign({},i[n]),(l={},l[r]=e,l)):o(i[n],[r]),a.changeData=i},a.getTbody=function(e,r,i,o){var s,u=a.props,d=u.chartFrontendId,c=u.cols;if(!e||!e.map)return null;var h=a.onRowValueChange;return e!==(null===(s=a.props.value)||void 0===s?void 0:s.data)&&i&&void 0!==o?(r++,h=function(t,n,r){a.value=e;var l=a.onChange(t,n,r);i(o,{children:l},r)}):r=0,e.map(function(e,i){var o={cols:c,rowValue:e,index:i,onChange:h,key:(d||"")+(e.id||e.frontendId||i),disable:[],depth:r};return n.createElement(l.default,t.__assign({},o),a.getTbody(e.children,r,h,i))})},a.onChangeColSelectStatus=function(e){var t;a.value=(null===(t=a.props.value)||void 0===t?void 0:t.data)||[],a.colSelectStatus[e]=a.colSelectStatus[e]>0?0:2;var n=(a.value||[]).map(function(t){var n=a.props.cols[e].key;if(!n)return t;if(t.children&&t.children.length){var r=function(t){return t.map(function(t){t[n]=!1,a.assignChangeData(!1,t.hash,n),t.disable=t.disable||[],2===a.colSelectStatus[e]?t.disable.push(n):t.disable=t.disable.filter(function(e){return e!==n}),t.children&&t.children.length&&r(t.children)})};r(t.children)}return!!t[n]!=!!a.colSelectStatus[e]&&(a.assignChangeData(!!a.colSelectStatus[e],t.hash,n),t[n]=!!a.colSelectStatus[e]),t});a.props.onChange({data:n,changeData:a.changeData})},a}return t.__extends(a,e),a.prototype.render=function(){var e=this,a=this.props,t=a.value,l=a.cols,i=a.label,o=a.containerClassName,s=this.getColSelectStatus();return n.createElement("div",{className:"tree-array-editor "+(o||"")},n.createElement("div",{className:"tree-array-editor__header"},i?n.createElement("label",null,i):null),n.createElement("div",{className:"tree-array-editor__body"},n.createElement("table",{className:"table table-bordered"},n.createElement("thead",null,n.createElement("tr",null,n.createElement("th",{key:"toggle",style:{width:20},className:"tree-array-editor__toggle"}),l.map(function(a,t){return a.hidden?null:n.createElement("th",{key:t,style:a.tdStyle},a.canSelectAll&&n.createElement(r.default,{checked:s[t]>0,partial:1===s[t],onChange:function(){return e.onChangeColSelectStatus(t)}}),a.name)}))),n.createElement("tbody",null,this.getTbody((null===t||void 0===t?void 0:t.data)||[],0)))))},a.displayName="ObjArrayEditor",a}(n.Component);a.default=s});
;sugar.define("sugar:sites/group/manage/role/role-limit-edit-ctrl.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=e("sugar:node_modules/tslib/tslib.js"),n=e("sugar:utils/i18n.ts"),l=e("sugar:node_modules/react/index.js"),i=e("sugar:widgets/tree-array-editor/tree-array-editor.tsx"),r=e("sugar:widgets/ctrl-panel/common/switch-with-tip.tsx");t.default=function(e,t,o){return{type:"service",api:"/api/manage/group/"+e+"/"+t+"/report?"+o+"=$"+o+"&type=super",controls:[{type:"tabs",mountOnEnter:!0,tabs:[{title:n.default("数据开发权限"),controls:[{name:"superDataDevelop",children:function(e){var t=e.onChange,i=e.value;return l.createElement(r.default,a.__assign({},{onChange:t,value:i,label:n.default("超级数据开发师"),tipText:n.default("什么是超级数据开发师？"),tipLink:"/docs/limit#超级数据开发师权限"}))}},{type:"tabs",mountOnEnter:!0,tabs:[{title:n.default("数据源"),controls:[{type:"service",api:"/api/manage/group/"+e+"/"+t+"/report?"+o+"=$"+o+"&type=dataDevelop&resource=database",controls:[{type:"switch",name:"dataDevelop_database.add",option:n.default("新增"),inline:!0,className:"m-r",mode:"inline"},{type:"switch",option:n.default("排序"),name:"dataDevelop_database.sort",inline:!0,mode:"inline",className:"m-r"},{name:"dataDevelop_database.detail",children:function(e){var t=e.onChange,r=e.value;return l.createElement(i.default,a.__assign({},{onChange:t,value:r},{containerClassName:"form-group form-item",label:"",cols:[{type:"text",key:"name",name:n.default("名称"),readOnly:!0,tdStyle:{minWidth:120}},{type:"switch",key:"edit",name:n.default("编辑"),canSelectAll:!0,tdStyle:{maxWidth:100}},{type:"switch",key:"use",name:n.default("使用"),canSelectAll:!0,tdStyle:{maxWidth:100}},{type:"switch",key:"delete",name:n.default("删除"),canSelectAll:!0,tdStyle:{maxWidth:100}}]}))}}]}]},{title:n.default("数据模型"),controls:[{type:"service",api:"/api/manage/group/"+e+"/"+t+"/report?"+o+"=$"+o+"&type=dataDevelop&resource=dataModel",controls:[{type:"switch",name:"dataDevelop_dataModel.add",option:n.default("新增"),inline:!0,className:"m-r",mode:"inline"},{type:"switch",option:n.default("排序"),name:"dataDevelop_dataModel.sort",inline:!0,mode:"inline",className:"m-r"},{name:"dataDevelop_dataModel.detail",children:function(e){var t=e.onChange,r=e.value;return l.createElement(i.default,a.__assign({},{onChange:t,value:r},{containerClassName:"form-group form-item",label:"",cols:[{type:"text",key:"name",name:n.default("名称"),readOnly:!0,tdStyle:{minWidth:120}},{type:"switch",key:"edit",name:n.default("编辑"),canSelectAll:!0,tdStyle:{maxWidth:100}},{type:"switch",key:"delete",name:n.default("删除"),canSelectAll:!0,tdStyle:{maxWidth:100}}]}))}}]}]}],tabsMode:"vertical",hiddenOn:"this.superDataDevelop"}]},{title:n.default("可视化分析权限"),controls:[{name:"superPage",children:function(e){var t=e.onChange,i=e.value;return l.createElement(r.default,a.__assign({},{onChange:t,value:i,label:n.default("超级可视化分析师"),tipText:n.default("什么是超级可视化分析师？"),tipLink:"/docs/limit#超级可视化分析师"}))}},{type:"tabs",mountOnEnter:!0,tabs:[{title:n.default("大屏"),controls:[{type:"service",api:"/api/manage/group/"+e+"/"+t+"/report?"+o+"=$"+o+"&type=page&resource=dashboard",controls:[{type:"switch",name:"page_dashboard.add",option:n.default("新增"),inline:!0,className:"m-r",mode:"inline"},{type:"switch",option:n.default("排序"),name:"page_dashboard.sort",inline:!0,mode:"inline",className:"m-r"},{name:"page_dashboard.detail",children:function(e){var t=e.onChange,r=e.value;return l.createElement(i.default,a.__assign({},{onChange:t,value:r},{containerClassName:"form-group form-item",label:"",cols:[{type:"text",key:"name",name:n.default("名称"),readOnly:!0,tdStyle:{minWidth:120}},{type:"switch",key:"edit",name:n.default("编辑"),canSelectAll:!0,tdStyle:{maxWidth:100}},{type:"switch",key:"delete",name:n.default("删除"),canSelectAll:!0,tdStyle:{maxWidth:100}}]}))}}]}]},{title:n.default("报表"),controls:[{type:"service",api:"/api/manage/group/"+e+"/"+t+"/report?"+o+"=$"+o+"&type=page&resource=report",controls:[{type:"switch",name:"page_report.add",option:n.default("新增"),inline:!0,className:"m-r",mode:"inline"},{type:"switch",name:"page_report.sort",option:n.default("排序"),inline:!0,mode:"inline",className:"m-r"},{name:"page_report.detail",children:function(e){var t=e.onChange,r=e.value;return l.createElement(i.default,a.__assign({},{onChange:t,value:r},{containerClassName:"form-group form-item",label:"",cols:[{type:"text",key:"name",name:n.default("名称"),readOnly:!0,tdStyle:{minWidth:120}},{type:"switch",key:"edit",name:n.default("编辑"),canSelectAll:!0,tdStyle:{maxWidth:100}},{type:"switch",key:"delete",name:n.default("删除"),tdStyle:{maxWidth:100}}]}))}}]}]},{title:n.default("数据模型"),controls:[{type:"service",api:"/api/manage/group/"+e+"/"+t+"/report?"+o+"=$"+o+"&type=page&resource=dataModel",controls:[{name:"page_dataModel.detail",children:function(e){var t=e.onChange,r=e.value;return l.createElement(i.default,a.__assign({},{onChange:t,value:r},{containerClassName:"form-group form-item",label:"",cols:[{type:"text",key:"name",name:n.default("名称"),readOnly:!0,tdStyle:{minWidth:120}},{type:"switch",key:"use",name:n.default("使用"),canSelectAll:!0,tdStyle:{maxWidth:100}}]}))}}]}]},{title:n.default("其它资源"),controls:[{type:"service",api:"/api/manage/group/"+e+"/"+t+"/report?"+o+"=$"+o+"&type=page&resource=other",controls:[{type:"switch",option:n.default("三维场景"),name:"page_other.scene"},{type:"switch",option:n.default("轮播"),name:"page_other.slide"},{type:"switch",option:n.default("SQL模型"),name:"page_other.sql"},{type:"switch",option:n.default("数据值映射"),name:"page_other.map"},{type:"switch",option:n.default("API转换器"),name:"page_other.api"},{type:"switch",option:n.default("组件模板"),name:"page_other.template"}]}]}],tabsMode:"vertical",hiddenOn:"this.superPage"}]},{title:n.default("阅览者权限"),controls:[{name:"superView",children:function(e){var t=e.onChange,i=e.value;return l.createElement(r.default,a.__assign({},{onChange:t,value:i,label:n.default("超级阅览者"),tipText:n.default("什么是超级阅览者？"),tipLink:"/docs/limit#超级阅览者"}))}},{type:"tabs",mountOnEnter:!0,tabs:[{title:n.default("大屏"),controls:[{type:"service",api:"/api/manage/group/"+e+"/"+t+"/report?"+o+"=$"+o+"&type=view&resource=dashboard",controls:[{name:"view_dashboard.detail",children:function(e){var t=e.onChange,r=e.value;return l.createElement(i.default,a.__assign({},{onChange:t,value:r},{containerClassName:"form-group form-item",label:"",cols:[{type:"text",key:"name",name:n.default("名称"),readOnly:!0,tdStyle:{minWidth:120}},{type:"switch",key:"view",name:n.default("查看"),canSelectAll:!0,tdStyle:{maxWidth:100}}]}))}}]}]},{title:n.default("报表"),controls:[{type:"service",api:"/api/manage/group/"+e+"/"+t+"/report?"+o+"=$"+o+"&type=view&resource=report",controls:[{name:"view_report.detail",children:function(e){var t=e.onChange,r=e.value;return l.createElement(i.default,a.__assign({},{onChange:t,value:r},{containerClassName:"form-group form-item",label:"",cols:[{type:"text",key:"name",name:n.default("名称"),readOnly:!0,tdStyle:{minWidth:120}},{type:"switch",key:"view",name:n.default("查看"),canSelectAll:!0,tdStyle:{maxWidth:100}}]}))}}]}]}],tabsMode:"vertical",tpl:n.default("内容"),inline:!1,hiddenOn:"this.superView"}]}],tabsMode:"line"}]}}});
;sugar.define("sugar:widgets/user-select-enterprise.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UserSelectEnterpriseFormCtrl=void 0;var a=e("sugar:node_modules/tslib/tslib.js"),s=e("sugar:utils/i18n.ts"),r=e("sugar:node_modules/react/index.js"),n=e("sugar:node_modules/amis/lib/index.js"),i=e("sugar:widgets/progress.ts"),l=e("sugar:utils/fetch.ts"),o=e("sugar:node_modules/classnames/index.js"),u=e("sugar:utils/date-helper.ts"),c=window.sugarConfig,m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.hasSearched=!1,t}return a.__extends(t,e),t.prototype.componentWillMount=function(){this.loadDefaultList=this.loadDefaultList.bind(this),this.searchUsers=this.searchUsers.bind(this),this.handleKeyDown=this.handleKeyDown.bind(this),this.setState({isSearching:!1,roleUsers:[],remoteUsers:[]}),this.loadDefaultList()},t.prototype.loadDefaultList=function(){var e=this,t=this.props.defaultListApi;t&&(this.setState({isLoadingDefaultList:!0}),i.default.show(),l.get(t).then(function(t){e.setState({isLoadingDefaultList:!1,roleUsers:t.data||[]}),i.default.hide()}).catch(function(t){i.default.hide(),n.toast.error(t.message),e.setState({isLoadingDefaultList:!1})}))},t.prototype.searchUsers=function(){var e=this,t=this.props.value;if(!t)return void this.setState({isSearching:!1,remoteUsers:[]});this.setState({isSearching:!0}),i.default.show();var a=this.props.api||"/api/manage/role/searchUserForEnterpriseRole";this.hasSearched=!0,l.get(a,{params:{searchText:t}}).then(function(t){e.setState({isSearching:!1,remoteUsers:t.data||[]}),i.default.hide()}).catch(function(t){i.default.hide(),n.toast.error(t.message),e.setState({isSearching:!1,remoteUsers:[]})})},t.prototype.handleKeyDown=function(e){13===e.which&&(e.stopPropagation(),e.preventDefault(),this.searchUsers())},t.prototype.render=function(){var e=this.props,t=e.value,a=e.containerClass,i=e.buttonText,l=e.onChange,o=e.label,m=e.data,d=this.state,h=d.roleUsers,p=d.isSearching,f=d.isLoadingDefaultList,g=d.remoteUsers,v=m&&m.config&&m.config.updateTime?m.config.updateTime:"",E=m&&m.config&&m.config.errMsg?m.config.errMsg:"";return r.createElement("div",{className:a},r.createElement("label",{className:"control-label"},s.default("已同步用户列表：")),r.createElement("div",{style:{marginTop:20,marginBottom:20,maxHeight:200,overflow:"auto"}},f?r.createElement(n.Spinner,null):h&&h.length?h.map(function(e,t){return r.createElement("div",{style:{marginBottom:8},key:t},e.realName+" ("+e.name+")")}):r.createElement("div",{className:"text-muted"},r.createElement("div",null,s.default("当前角色下暂无已同步用户，请填写"+c.enterpriseRoleName)))),r.createElement("div",{className:"text-muted"},r.createElement("div",null,s.default("系统每天自动同步一次，可点击确认进行手动同步"),v?s.default("，上次同步时间：「"+u.formatDate(new Date(v),"$1-$2-$3 $4:$5:$6")+"」"):""),E?r.createElement("div",{className:"text-danger"},s.default("同步错误："+E)):null),r.createElement("div",{className:"a-Divider a-Divider--dashed"}),r.createElement("label",{className:"control-label"},o),r.createElement("div",{style:{margin:"5px 0"}},r.createElement("div",{className:"d-flex"},r.createElement("div",{className:"flex-1"},r.createElement(n.InputBox,{value:t,type:"text",placeholder:s.default("请输入「"+c.enterpriseRoleEnterTip+"」"),onChange:function(e){return l(e)},onKeyDown:this.handleKeyDown})),r.createElement(n.Button,{level:"info",onClick:this.searchUsers},i||s.default("查看"+c.enterpriseRoleName+"用户列表")))),r.createElement("div",{style:{marginTop:20,maxHeight:200,overflow:"auto"}},f||p?r.createElement(n.Spinner,null):g&&g.length?g.map(function(e,t){return r.createElement("div",{style:{marginBottom:8},key:t},e.realName+" ("+e.name+")")}):r.createElement("div",{className:"text-muted"},this.hasSearched?r.createElement("div",null,s.default("没有找到用户，请检查"+c.enterpriseRoleEnterTip)):"")))},t.displayName="UserSelectEnterprise",t}(r.PureComponent);t.default=m;var d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.render=function(){var e=this.props,t=e.mode,s=a.__rest(e,["mode"]);return"normal"===t?r.createElement("div",{className:"a-Form-item"},r.createElement("div",null,r.createElement(m,a.__assign({},s)))):r.createElement("div",{className:o("a-Form-item a-Form-item--horizontal")},r.createElement("div",{className:"a-Form-itemColumn--12"},r.createElement(m,a.__assign({},s))))},t}(r.PureComponent);t.UserSelectEnterpriseFormCtrl=d});
;sugar.define("sugar:sites/group/manage/role/role.tsx",function(e,a){"use strict";function t(e,a){return void 0===a&&(a=!1),{type:"button",primary:!a,label:l.default(a?"新建「"+m.enterpriseRoleName+"」角色":"新建角色"),actionType:"dialog",dialog:{title:l.default(a?"新建「"+m.enterpriseRoleName+"」角色":"新建角色"),size:"md",body:{type:"form",mode:"normal",api:"/api/manage/group/"+e+"/role",controls:[{type:"tabs",mountOnEnter:!0,tabs:[{title:l.default("基本信息"),controls:[{name:"name",label:l.default("角色名称"),type:"text",required:!0,validations:"maxLength:40"},{type:"divider"},{name:"remark",label:l.default("描述"),type:"textarea",validations:"maxLength:1024"}]},{title:l.default("用户列表"),controls:[{name:"roleType",label:l.default("添加用户方式"),type:"radios",inline:!1,value:a?1:0,options:[{label:l.default("手动选择用户"),value:0},{label:l.default("使用「"+m.enterpriseRoleName+"」自动同步用户"),value:1}],hiddenOn:""+!m.enableEnterpriseRole},{name:"users",hiddenOn:"data.roleType === 1",children:function(e){var a=e.onChange,t=e.value;return n.createElement(u.UserSelectFormCtrl,{label:l.default("请选择属于本角色的用户："),mode:"normal",value:t,onChange:a})}},{name:"config.enterpriseRoleKey",hiddenOn:"data.roleType !== 1",required:!0,children:function(a){var t=a.onChange,r=a.value;return n.createElement(p.UserSelectEnterpriseFormCtrl,{label:l.default("请输入「"+m.enterpriseRoleEnterTip+"」："),mode:"normal",value:r,onChange:t,api:"/api/manage/group/"+e+"/role/searchUserForEnterpriseRole"})}}]},{title:l.default("权限配置"),controls:[d.default(e,"role","hash")]}]}]}}}}Object.defineProperty(a,"__esModule",{value:!0});var r=e("sugar:node_modules/tslib/tslib.js"),l=e("sugar:utils/i18n.ts"),n=e("sugar:node_modules/react/index.js"),o=e("sugar:node_modules/react-document-title/index.js"),s=e("sugar:stores/index.ts"),i=e("sugar:sites/amis-renderer.tsx"),u=e("sugar:widgets/user-select.tsx"),d=e("sugar:sites/group/manage/role/role-limit-edit-ctrl.tsx"),p=e("sugar:widgets/user-select-enterprise.tsx"),m=window.sugarConfig,g=function(e){function a(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(a,e),a.prototype.render=function(){var e=this,a=this.props.group.current.data.hash,r=[t(a)];return m.enableEnterpriseRole&&r.push(t(a,!0)),n.createElement(o,{title:l.default("角色管理")},n.createElement(i.default,{schema:{title:l.default("角色管理"),name:"sugar-admin-roles",toolbar:r,body:{type:"crud",name:"sugar-admin-roles-list",syncLocation:!1,api:"/api/manage/group/"+this.props.group.current.data.hash+"/role?page=$page&perPage=$perPage",mode:"grid",className:"admin-role-list",headerClassName:"m-b-xs",showFooter:!1,defaultParams:{perPage:12},switchPerPage:!1,placeholder:l.default("当前组内还没有任何角色。可以创建用户角色来控制用户权限。"),bulkActions:[{label:l.default("批量移除"),type:"button",level:"danger",confirmText:l.default("确定要批量移除？"),actionType:"ajax",api:"put:/api/manage/group/"+this.props.group.current.data.hash+"/role/multiDelete"}],card:{className:"",header:{className:"bg-white",title:"$name",subTitle:"$remark",subTitlePlaceholder:l.default("暂无说明")},actions:[{label:l.default("编辑"),actionType:"dialog",dialog:{title:l.default("编辑角色"),size:"md",body:{type:"form",mode:"normal",api:"put:/api/manage/group/"+this.props.group.current.data.hash+"/role/$hash",controls:[{type:"tabs",tabs:[{title:l.default("基本信息"),controls:[{type:"hidden",name:"hash"},{name:"name",label:l.default("角色名称"),type:"text",validations:"maxLength:40"},{type:"divider"},{name:"remark",label:l.default("描述"),type:"textarea",validations:"maxLength:1024"}]},{title:l.default("用户列表"),controls:[{name:"roleType",label:l.default("添加用户方式"),type:"radios",inline:!1,value:0,options:[{label:l.default("手动选择用户"),value:0},{label:l.default("使用「"+m.enterpriseRoleName+"」自动同步用户"),value:1}],hiddenOn:""+!m.enableEnterpriseRole},{name:"users",hiddenOn:"data.roleType === 1",children:function(a){var t=a.onChange,r=a.value,o=a.data;return n.createElement(u.UserSelectFormCtrl,{label:l.default("请选择属于本角色的用户："),mode:"normal",value:r,onChange:t,defaultValueApi:"/api/manage/group/"+e.props.group.current.data.hash+"/role/users?hash="+o.hash})}},{name:"config.enterpriseRoleKey",hiddenOn:"data.roleType !== 1",required:!0,children:function(t){var r=t.onChange,o=t.value,s=t.data;return n.createElement(p.UserSelectEnterpriseFormCtrl,{label:l.default("请输入「"+m.enterpriseRoleEnterTip+"」："),mode:"normal",value:o,data:s,onChange:r,api:"/api/manage/group/"+a+"/role/searchUserForEnterpriseRole",defaultListApi:"/api/manage/group/"+e.props.group.current.data.hash+"/role/users?hash="+s.hash})}}]},{title:l.default("权限配置"),controls:[d.default(a,"role","hash")]}]}]}}},{label:l.default("删除"),confirmText:l.default("您确定要移除该角色?"),actionType:"ajax",api:"delete:/api/manage/group/"+this.props.group.current.data.hash+"/role/$hash"}]}}}}))},a.displayName="RoleManage",a=r.__decorate([s.inject(function(e){return{group:e.group}})],a)}(n.Component);a.default=g});
;sugar.define("sugar:sites/group/manage/user/user.tsx",function(e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var t=e("sugar:node_modules/tslib/tslib.js"),r=e("sugar:utils/i18n.ts"),l=e("sugar:node_modules/react/index.js"),s=e("sugar:node_modules/react-document-title/index.js"),n=e("sugar:stores/index.ts"),i=e("sugar:sites/amis-renderer.tsx"),o=e("sugar:widgets/user-select.tsx"),u=e("sugar:sites/group/manage/role/role-limit-edit-ctrl.tsx"),d=window.sugarConfig,p=function(e){function a(){return null!==e&&e.apply(this,arguments)||this}return t.__extends(a,e),a.prototype.render=function(){var e=this,a=[{title:r.default("用户选择"),controls:[{name:"users",children:function(a){var t=a.onChange,s=a.value;return l.createElement(o.UserSelectFormCtrl,{label:r.default("要添加的用户(请搜索并选择用户，已在空间中的用户不可再次选中)："),mode:"normal",value:s,onChange:t,api:"/api/manage/group/"+e.props.group.current.data.hash+"/user/addSearch"})}},{type:"divider"},{name:"isAdmin",type:"checkbox",label:r.default("设为管理员(管理员拥有该空间所有权限，权限配置不会生效)")}]}],t=[{title:r.default("基本信息"),controls:[{name:"realName",label:r.default("姓名"),disabled:!0,type:"text"},{type:"divider"},{name:"email",label:r.default("邮箱"),type:"text",disabled:!0},{type:"divider"},{name:"isAdmin",type:"checkbox",label:r.default("设为管理员(管理员拥有该空间所有权限，权限配置不会生效)")}]}];a=a.concat([{title:r.default("角色配置"),controls:[{label:r.default("请选择用户所属角色："),placeholder:r.default("报表组未添加角色，可在角色管理中添加"),type:"checkboxes",name:"roles",inline:!1,source:"/api/manage/group/"+this.props.group.current.data.hash+"/user/role"}]},{title:r.default("权限配置"),controls:[u.default(this.props.group.current.data.hash,"user","email")]}]),t=t.concat([{title:r.default("角色配置"),controls:[{label:r.default("请选择用户所属角色："),placeholder:r.default("报表组未添加角色，可在角色管理中添加"),type:"checkboxes",name:"roles",inline:!1,source:"/api/manage/group/"+this.props.group.current.data.hash+"/user/role?email=$email"}]},{title:r.default("权限配置"),controls:[u.default(this.props.group.current.data.hash,"user","email")]}]);var n=[{type:"form",name:"sugar-admin-users-filter",mode:"inline",submitText:"",wrapWithPanel:!1,target:"sugar-admin-users-list",className:"pull-right",controls:[{type:"text",name:"searchText",placeholder:r.default("请输入用户名"),className:"ma-none",addOn:{icon:"fa fa-search",type:"submit",className:"btn-info"}}]},{type:"button",label:r.default("添加用户"),actionType:"dialog",level:"primary",className:"m-r-xs",dialog:{title:r.default("添加用户"),size:"md",body:{type:"form",name:"sugar-admin-users-new",mode:"normal",api:"/api/manage/group/"+this.props.group.current.data.hash+"/user",controls:[{type:"tabs",mountOnEnter:!0,tabs:a}]},actions:[{type:"button",actionType:"cancel",label:r.default("取消")},{type:"submit",primary:!0,label:r.default("添加")}]}}];return d.enableEnterpriseRole&&n.push({actionType:"link",link:"/group/"+this.props.group.current.data.key+"/manage/role",tooltip:r.default("批量添加用户可在角色管理中使用【新建「"+d.enterpriseRoleName+"」角色】"),label:r.default("通过「"+d.enterpriseRoleName+"」添加用户"),type:"button"}),l.createElement(s,{title:r.default("用户管理")},l.createElement(i.default,{schema:{name:"sugar-admin-users",title:r.default("用户管理"),toolbar:n,body:{type:"crud",showFooter:!1,name:"sugar-admin-users-list",syncLocation:!1,api:"/api/manage/group/"+this.props.group.current.data.hash+"/user?page=$page&perPage=$perPage&searchText=$searchText",mode:"grid",className:"admin-users-list",headerClassName:"m-b-xs",defaultParams:{perPage:12},switchPerPage:!1,placeholder:r.default("没有用户信息"),bulkActions:[{label:r.default("批量移除"),type:"button",level:"danger",confirmText:r.default("确定要批量移除？"),actionType:"ajax",api:"put:/api/manage/group/"+this.props.group.current.data.hash+"/user/multiDelete"}],columnsCount:3,card:{header:{className:"bg-white",title:"$realName",subTitle:"$email",avatar:"${avatar|raw}",highlight:!0},bodyClassName:"padder",body:'\n              <% if (data.isAdmin) { %>\n                <span class="label label-primary inline">'+r.default("管理员")+'</span>\n              <% } %>\n              <% if (data.roles && data.roles.length) { %>\n                <% data.roles.map(function(role) { %>\n                  <span class="label label-default inline"><%- role.name %></span>\n                <% }) %>\n              <% } else if (!data.isAdmin){ %>\n                <span class="text-muted">'+r.default("没有分配角色")+"</span>\n              <% } %>\n              ",actions:[{label:r.default("编辑"),actionType:"dialog",dialog:{title:r.default("编辑用户"),size:"md",body:{type:"form",name:"amis-user-edit",mode:"normal",api:"put:/api/manage/group/"+this.props.group.current.data.hash+"/user/$email",controls:[{type:"tabs",tabs:t}]}}},{label:r.default("移除"),confirmText:r.default("您确定要移除该用户?"),actionType:"ajax",api:"delete:/api/manage/group/"+this.props.group.current.data.hash+"/user/$email"}]}}}}))},a.displayName="UserManage",a=t.__decorate([n.inject(function(e){return{group:e.group}})],a)}(l.Component);a.default=p});
;sugar.define("sugar:sites/group/manage/database/excel-upload.tsx",function(e,t){"use strict";function a(e){var t=e.content,a=e.header,r=a?h.createElement("th",null,t):h.createElement("td",null,t);return r}function r(e,t,a){function r(e,t){var a=e.getTime()+5;return t&&(a-=i),(a-l)/o}function n(e,t){return e+="",e.length>=t?e:new Array(t-e.length+1).join("0")+e}var s=new Date(1899,11,30,0,0,0),l=s.getTime()+6e4*((new Date).getTimezoneOffset()-s.getTimezoneOffset()),o=864e5,i=1462*o,d=e.SSF.parse_date_code(r(t,!1),{date1904:a}),u=d.y+"-"+n(d.m,2)+"-"+n(d.d,2);return 0===d.H&&0===d.M&&0===d.S?u:u+" "+n(d.H,2)+":"+n(d.M,2)+":"+n(d.S,2)}function n(e,t,a){var r={name:"",tables:{},sheetNames:[]};for(var n in t.Sheets){r.sheetNames.push(n);var s=e.utils.sheet_to_json(t.Sheets[n],{header:1,blankrows:!1});if(0!==s.length){for(var l={headers:[],rows:[]},o=0,i=s.length;i>o;o++){var d=s[o];if(0!==d.length)if(o===a-1)for(var u=0;u<d.length;u++){var c=d[u];("undefined"==typeof c||null===typeof c)&&(c="noname");var f=c.toString();f&&l.headers.push({name:f,type:p.Text})}else l.rows.push(d)}0!=l.headers.length&&l.rows.length&&(r.tables[n]=l)}}return r}function s(e,t){for(var a={name:t,tables:{},sheetNames:[]},r={headers:[],rows:[]},n=0;n<e.length;n++){var s=e[n];if(0!==s.length)if(0===n)for(var l=0;l<s.length;l++){var o=s[l];("undefined"==typeof o||null===typeof o)&&(o="noname");var i=o.toString();i&&r.headers.push({name:i,type:p.Text})}else r.rows.push(s)}return 0!=r.headers.length&&r.rows.length&&(a.tables[t]=r),a}function l(e){return e===+e&&e!==(0|e)}function o(e){return"string"==typeof e&&-1!==e.indexOf(".")?!0:!1}function i(e){return"string"==typeof e?/^-?[0-9]+$/.test(e):Number.isInteger(e)}function d(e){var t="";return-1!=e.indexOf(" ")?t=m.default("[「"+e+"」]中含有空格，建议去掉"):e.match(/^\d+$/)?t=m.default("[「"+e+"」]只有数字，建议换成中文或英文"):e[0].match(/\d/)?t=m.default("[「"+e+"」]是以数字开头的，请换成中文或英文"):e.length>64?t=m.default("[「"+e+"」]过长，建议缩短"):e.match(/^[0-9a-zA-Z\$_\u0080-\uFFFF]+$/)||(t=m.default("[「"+e+"」]里含有特殊符号，建议删除")),t}function u(e){var t=[];for(var a in e.tables){var r=d(a);r&&t.push(m.default("表名「"+r+"」"));for(var n=e.tables[a],s=0,l=n.headers;s<l.length;s++){var o=l[s],i=d(o.name);i&&t.push(m.default("列名「"+i+"」"))}}return t.join("；")}function c(e,t,a){var n,s,d=!1,u="",c=null===(s=null===(n=null===t||void 0===t?void 0:t.Workbook)||void 0===n?void 0:n.WBProps)||void 0===s?void 0:s.date1904;for(var f in e.tables)for(var h=e.tables[f],v=h.headers,g={},b=(function(e){var n=v[e];if(n.name in g){u=m.default("有同名的列「"+n.name+"」，无法提交，请重命名后再上传"),d=!0;for(var s=n.name,f=0;s in g;)f+=1,s=n.name+"_"+f;n.name=s,g[n.name]=1}else g[n.name]=1;var b=h.rows.every(function(t){var a=t[e];return"undefined"==typeof a?!0:i(a)?!0:!1});b&&(n.type=p.Integer);var y=h.rows.every(function(t){var a=t[e];return"undefined"==typeof a?!0:l(a)?(t[e]=parseFloat(a.toFixed(12).toString()),!0):o(a)?!0:i(a)?!0:!1});!b&&y&&(n.type=p.Float);var w=h.rows.every(function(t){var a=t[e];return"undefined"==typeof a?!0:!1});w&&(n.type=p.Text);var x=h.rows.every(function(n){var s=n[e];return s instanceof Date?(t&&(n[e]=r(a,s,c)),!0):"string"==typeof s&&s.match(/^\d{4}-[01]\d-[0-3]\d [0-2]\d:[0-5]\d:[0-5]\d$/)?!0:"string"==typeof s&&s.match(/^\d{4}-[01]\d-[0-3]\d$/)?!0:!1});x&&(n.type=p.DateTime);var D=h.rows.every(function(t){var a=t[e];return"string"==typeof a&&a.match(/^\d{4}-[01]\d-[0-3]\d [0-2]\d:[0-5]\d:[0-5]\d$/)?"00:00:00"===a.split(" ")[1]?!0:!1:"string"==typeof a&&a.match(/^\d{4}-[01]\d-[0-3]\d$/)?!0:!1});D&&(n.type=p.Date,h.rows.forEach(function(t){t[e]=t[e].split(" ")[0]}))}),y=0;y<v.length;y++)b(y);return{err:d,errMessage:u,excelData:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.excelDataPostProcess=t.processCSV=t.processExcel=void 0;var p,f=e("sugar:node_modules/tslib/tslib.js"),m=e("sugar:utils/i18n.ts"),h=e("sugar:node_modules/react/index.js"),v=e("sugar:node_modules/amis/lib/index.js"),g=e("sugar:node_modules/classnames/index.js"),b=e("sugar:node_modules/react-dropzone/dist/index.js");!function(e){e.Text="Text",e.Integer="Integer",e.Float="Float",e.Date="Date",e.Decimal="Decimal",e.DateTime="DateTime"}(p||(p={}));var y=function(e){function t(t){var r=e.call(this,t)||this;return r.renderHeadingRow=function(e,t){var n=r.props.headers,s=n[t],l=[];return r.props.forDatabase&&l.push(h.createElement(v.Select,{key:t,value:s.type,simpleValue:!0,clearable:!1,onChange:function(e){r.props.updateHeaderType(r.props.tableName,t,e)},options:[{label:m.default("文本"),value:"Text"},{label:m.default("整数"),value:"Integer"},{label:m.default("浮点数"),value:"Float"},{label:m.default("金额"),value:"Decimal"},{label:m.default("日期"),value:"Date"},{label:m.default("日期时间"),value:"DateTime"}],locale:m.lang,popOverContainer:document.body})),l.push(h.createElement("span",{key:"headName-"+t,style:{marginLeft:"0.5em"}},s.name)),h.createElement(a,{key:"heading-"+t,content:l,header:!0})},r.renderRow=function(e,t){for(var n=r.props.rows,s=[],l=0,o=0,i=n[t];o<i.length;o++){var d=i[o];d=null===d||"undefined"==typeof d?"":d.toString(),s.push(h.createElement(a,{key:t+"-"+l,content:d,header:!1})),l+=1}return h.createElement("tr",{key:"row-"+t},s)},r}return f.__extends(t,e),t.prototype.render=function(){var e=this.props,t=e.headers,a=e.rows;this.renderHeadingRow=this.renderHeadingRow.bind(this),this.renderRow=this.renderRow.bind(this);var r=h.createElement("tr",{key:"heading",className:"active"},t.map(this.renderHeadingRow)),n=a.slice(0,5).map(this.renderRow);return h.createElement("div",{className:"a-Table"},h.createElement("table",{className:"a-Table-table",style:{whiteSpace:"nowrap"}},h.createElement("thead",null,r),h.createElement("tbody",null,n)))},t}(h.Component);t.processExcel=n,t.processCSV=s,t.excelDataPostProcess=c;!function(t){function a(e){var a=t.call(this,e)||this;return a.state={isParsing:!1,errMessage:"",tipMessage:"",rowStart:1,excelData:{name:"",tables:{},sheetNames:[]},previewTableName:""},a.onUpload=a.onUpload.bind(a),a.onChangePreviewTable=a.onChangePreviewTable.bind(a),a.updateHeaderType=a.updateHeaderType.bind(a),a}return f.__extends(a,t),a.prototype.finishParsing=function(e,t,a,r){if(0===Object.keys(e.tables).length)this.setState({isParsing:!1,errMessage:m.default("此文件数据为空，请上传别的文件")});else{var n=c(e,a,r),s=(n.err,n.errMessage),l=this.props,o=l.onChange,i=l.forDatabase,d=u(e);this.setState({isParsing:!1,errMessage:s,tipMessage:d,previewTableName:Object.keys(e.tables)[0],excelData:e});var p=JSON.parse(JSON.stringify(e));if(i)for(var f in p.tables)p.tables[f].rows=[];o({excelData:p,file:t})}},a.prototype.onChangePreviewTable=function(e){var t=e.currentTarget.dataset.name;t&&this.setState({previewTableName:t}),e.preventDefault()},a.prototype.onUpload=function(t){var a=this;if(0===t.length)return void this.setState({isParsing:!1,errMessage:m.default("文件需要小于 100M")});var r=t[0];this.file=r;var l=r.name.replace(/\.[^\/.]+$/,"");if(r.name.endsWith(".csv"))Promise.resolve().then(function(){return new Promise(function(t){e(["sugar:node_modules/papaparse/papaparse.min.js"],function(e){t(e)})})}).then(function(e){e.parse(r,{worker:!0,preview:100,complete:function(e){var t=s(e.data,l);a.finishParsing(t,r)},error:function(e){a.setState({isParsing:!1,errMessage:m.default("CSV 解析出错：「"+e+"」")})}})});else{var o=new FileReader;o.readAsArrayBuffer(r),o.onload=function(){return f.__awaiter(a,void 0,void 0,function(){var t=this;return f.__generator(this,function(){return o.result&&Promise.resolve().then(function(){return new Promise(function(t){e(["sugar:node_modules/xlsx/xlsx.js"],function(e){t(e)})})}).then(function(e){var a=e.read(new Uint8Array(o.result),{type:"array",sheetRows:100,cellDates:!0}),s=n(e,a,t.state.rowStart);s.name=l,t.finishParsing(s,r,a,e)}),[2]})})}}},a.prototype.updateHeaderType=function(e,t,a){this.state.excelData.tables[e].headers[t].type=a,this.setState({excelData:this.state.excelData}),this.props.onChange({excelData:this.state.excelData,file:this.file})},a.prototype.render=function(){var e=this.state.isParsing,t=this.state.errMessage,a=this.state.tipMessage,r=this.state.excelData,n=this.state.previewTableName,s=h.createElement("div",null),l=this.props,o=l.forDatabase,i=l.onDownLoad;if(""!=n){var d=r.tables[n].headers,u=[];for(var c in r.tables){var p="";c===n&&(p="active"),u.push(h.createElement("li",{role:"presentation",key:c,className:"a-Tabs-link "+p,"data-name":c,onClick:this.onChangePreviewTable},h.createElement("a",{role:"tab",href:"#"},c)))}var w=r.tables[n].rows;o||(w=w.slice(0,5)),s=h.createElement("div",{className:"preview-table"},h.createElement("div",{className:"a-Divider"}),h.createElement("p",null,""+m.default(o?"数据预览（前 5 条）；如果是 CSV 文件将使用文件名作为表名。":"数据预览")),h.createElement("p",{className:"text-danger"},a),h.createElement("div",{className:"a-Tabs"},h.createElement("ul",{role:"tablist",className:"a-Tabs-links nav"},u),h.createElement("div",{className:"a-Tabs-content tab-content",style:{overflowX:"scroll"}},h.createElement(y,{headers:d,rows:w,tableName:n,forDatabase:this.props.forDatabase,updateHeaderType:this.updateHeaderType}))))}return h.createElement("div",{className:"excel-upload"},h.createElement(b.default,{accept:".csv, .xlsx",onDrop:this.onUpload,minSize:10,maxSize:104857600,multiple:!1},function(e){var t=e.getRootProps,a=e.getInputProps,r=(e.isDragAccept,e.isDragReject,e.isDragActive);return h.createElement("section",null,h.createElement("div",f.__assign({},t({className:g("dropzone",{"drag-accept":r})})),h.createElement("input",f.__assign({},a(),{id:"excel-upload"})),h.createElement("p",null,m.default("点击此处，或者拖拽 csv/xlsx 文件到这里，10M 以上建议用 csv 格式，最大支持 100 M"))))}),h.createElement("div",{className:"file-info"},!o&&i?h.createElement(v.Button,{level:"link",size:"xs",onClick:i,className:"download-btn",locale:m.lang},m.default("下载模板文件")):null),e&&h.createElement("p",null,m.default("解析中，请稍后，超过 30M 的大文件建议使用 CSV 格式")),h.createElement("p",{className:"a-Form-feedback"},t),s)},a=f.__decorate([v.FormItem({type:"sugar-excel-upload"}),f.__metadata("design:paramtypes",[Object])],a)}(h.Component)});
;sugar.define("sugar:sites/group/manage/database/database.tsx",function(e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.databaseTypeMap=void 0;var t=e("sugar:node_modules/tslib/tslib.js"),l=e("sugar:utils/i18n.ts"),n=e("sugar:node_modules/react/index.js"),d=e("sugar:node_modules/react-document-title/index.js"),i=e("sugar:stores/index.ts"),p=e("sugar:sites/amis-renderer.tsx");e("sugar:sites/group/manage/database/excel-upload.tsx");var s=e("sugar:widgets/product-type/product-type-modal.tsx"),o=window.sugarDsType,r=window.sugarConfig.nowProductConfig;if(r){var u=r.database;o=o.map(function(e){return u.find(function(a){return e.value===a.value})||(e.label+=l.default("（此版本不支持）"),e.disabled=!0),e})}a.databaseTypeMap={100:{label:"Excel/CSV",value:100,dataModel:!0,federated:!0}};var c=[],h=[],y=[];o.forEach(function(e){e.notNeedUsernameAndPwd&&c.push("data.type == "+e.value),e.useJdbcUrl&&(h.push("data.type != "+e.value),y.push("data.type == "+e.value)),a.databaseTypeMap[e.value]=e});var m=c.join(" || "),b=h.join(" && "),f=y.join(" || "),g=window.sugarConfig.enableQueryBuilder,v=function(e){function a(){return null!==e&&e.apply(this,arguments)||this}return t.__extends(a,e),a.prototype.render=function(){var e,a=window.sugarConfig.selfIpWhiteList,i=window.sugarConfig.enableTunnel,u=window.sugarConfig.enableMPP;window.comeFromDataBaseManage=!0;var c=[{name:"type",label:l.default("类型"),type:"select",required:!0,searchable:!0,options:o,value:0},{type:"divider"},{name:"name",label:l.default("数据源名称"),type:"text",required:!0,validations:"minLength:1,maxLength:30"},{type:"divider"},{name:"remark",label:l.default("描述"),type:"text",validations:"maxLength:50"},{type:"divider"},{name:"config.sqlServerVersion",label:l.default("SQL Server 版本"),type:"select",value:"2012",hiddenOn:"data.type != 4",required:!0,options:[{label:"SQL Server 2012/2014/2016/2017",value:"2012"},{label:"SQL Server 2008 R2",value:"2008R2"},{label:"SQL Server 2008",value:"2008"},{label:"SQL Server 2005",value:"2005"},{label:"SQL Server 2000",value:"2000"}]},{name:"config.jdbcURL",label:"JDBC URL",type:"text",value:"jdbc:",validations:"minLength:2,maxLength:1024,matchRegexp:/^jdbc:/",required:!0,hiddenOn:b},{type:"tpl",label:" ",tpl:'<a href="https://sugar-files.cdn.bcebos.com/Cloudera-JDBC-Driver-for-Impala-Install-Guide.pdf" target="_blank" class="text-info">点击这里查看CDH文档</a>，如 <span style="word-break: break-word;">jdbc:impala://node1.example.com:21050;AuthMech=0;</span>',hiddenOn:"data.type != 35"},{type:"tpl",label:" ",tpl:'<a href="https://sugar-files.cdn.bcebos.com/Cloudera-JDBC-Driver-for-Apache-Hive-Install-Guide.pdf" target="_blank" class="text-info">点击这里查看CDH文档</a>，如 <span style="word-break: break-word;">jdbc:hive2://node1.example.com:10000;AuthMech=3;transportMode=sasl;UID=hs2;PWD=cloudera;</span>',hiddenOn:"data.type != 41"},{type:"tpl",label:" ",tpl:l.default('请参考<a href="https://druid.apache.org/docs/latest/querying/sql.html#jdbc" target="_blank" class="text-info">Druid 的文档<a/>'),hiddenOn:"data.type != 39"},{name:"config.clusterOpen",type:"switch",label:l.default("集群模式访问"),visibleOn:"data.type == 21"},{type:"combo",name:"config.clusterInfo",label:l.default("服务器地址"),multiple:!0,multiLine:!0,visibleOn:"data.config && data.config.clusterOpen && data.type == 21",value:[{}],controls:[{name:"host",label:l.default("数据库地址Host"),placeholder:l.default("IP或域名，如: 61.135.169.121"),type:"text",validations:"minLength:2,maxLength:1024",required:!0},{name:"port",label:l.default("端口号"),type:"text",validations:"minLength:2,maxLength:10,isNumeric",required:!0,requiredOn:"!data.tunnelHash"}]},{name:"host",label:l.default("数据库地址Host"),placeholder:l.default("IP或域名，如: 61.135.169.121"),type:"text",validations:"minLength:2,maxLength:1024",hiddenOn:"data.tunnelHash || (data.type == 21 && !!data.config?.clusterOpen) || data.type == 8 || data.type == 9 || "+f,required:!0},{name:"config.useUTC",type:"switch",value:!0,label:l.default("使用UTC时间"),hiddenOn:"data.type != 4"},{type:"divider",hiddenOn:"data.tunnelHash || (data.type == 21 && !!data.config?.clusterOpen) || data.type == 8 || data.type == 9 || "+f},{name:"config.tsdbRegion",label:l.default("地域"),type:"select",value:"gz",hiddenOn:"data.type != 8",required:!0,options:[{label:l.default("广州"),value:"gz"},{label:l.default("北京"),value:"bj"}]},{name:"config.blsRegion",label:l.default("地域"),type:"select",value:"bj",hiddenOn:"data.type != 9",required:!0,options:[{label:l.default("北京"),value:"bj"}]},{name:"config.blsLogStoreName",label:l.default("日志集名称"),type:"text",value:"",hiddenOn:"data.type != 9",required:!0},{name:"port",label:l.default("端口号"),type:"text",validations:"minLength:2,maxLength:10,isNumeric",hiddenOn:"(data.type == 6 && !!config.hanaInstanceNumber) || (data.type == 21 && !!data.config?.clusterOpen) || data.tunnelHash || data.type == 8 || data.type == 9 || "+f,required:!0,requiredOn:"!data.tunnelHash"},{name:"port",label:"instanceNumber",type:"text",validations:"minLength:2,maxLength:10,isNumeric",visibleOn:"data.type == 6 && config.hanaInstanceNumber",required:!0,requiredOn:"!data.tunnelHash"},{type:"divider",hiddenOn:"data.tunnelHash || data.type == 16 || "+f},{name:"database",label:l.default("数据库名"),type:"text",validations:"minLength:2,maxLength:1024,matchRegexp:/^\\S*$/",hiddenOn:"data.type == 5 || data.type == 6 || data.type == 22 || data.type == 9 || data.type == 10 || data.type == 12 || data.type == 13 || data.type == 14 || data.type == 15 || data.type == 16 || data.type == 17 || data.type == 29 || "+f,required:!0},{name:"database",label:l.default("数据库名"),type:"number",value:0,hiddenOn:"data.type != 16",required:!0},{name:"database",label:"Keyspace",type:"text",hiddenOn:"data.type != 17",required:!0},{name:"config.localDataCenter",label:"localDataCenter",type:"text",placeholder:"datacenter1",hiddenOn:"data.type != 17"},{name:"database",label:"Project",type:"text",placeholder:l.default("如：learn_kylin"),validations:"minLength:2,maxLength:1024,matchRegexp:/^\\S*$/",hiddenOn:"data.type != 29",required:!0},{name:"database",label:l.default("数据库名 (ServiceName)"),type:"text",validations:"minLength:2,maxLength:1024,matchRegexp:/^\\S*$/",hiddenOn:"data.type != 5",required:!0},{name:"database",label:"Catalog",type:"text",validations:"minLength:1,maxLength:1024,matchRegexp:/^\\S*$/",hiddenOn:"data.type != 22",required:!0},{name:"config.hanaDatabase",label:l.default("数据库名"),type:"text",validations:"minLength:0,maxLength:1024,matchRegexp:/^\\S*$/",hiddenOn:"data.type != 6",placeholder:l.default("有多个tenant database 时可指定连接数据库的名称"),required:!1},{name:"config.esXpackPath",label:"path",type:"text",hiddenOn:"data.type != 10",placeholder:l.default("默认为：/_xpack/sql?format=json")},{type:"tpl",label:" ",hiddenOn:"data.type != 12",tpl:l.default('服务器需要安装 <a href="https://github.com/NLPchina/elasticsearch-sql" target="_blank" class="text-info">Elasticsearch-SQL</a> 插件并重启')},{type:"tpl",label:" ",hiddenOn:"data.type != 13",tpl:l.default('OpenTSDB 默认端口是 4242，使用方法请<a class="text-info" href="/docs/DataBind-OpenTSDB" target="_blank">参考这里</a>')},{type:"tpl",label:" ",hiddenOn:"data.type != 14",tpl:l.default('Prometheus 默认端口是 9090，使用方法请<a class="text-info" href="/docs/DataBind-Prometheus" target="_blank">参考这里</a>')},{type:"tpl",label:" ",hiddenOn:"data.type != 15",tpl:l.default('Graphite Web 默认端口是 80，使用方法请<a class="text-info" href="/docs/DataBind-Graphite" target="_blank">参考这里</a>')},{name:"config.postgresqlSchema",label:"Schema",type:"text",validations:"maxLength:100,matchRegexp:/^[^'\"]*$/",hiddenOn:"data.type != 2 && data.type != 3 && data.type != 7"},{name:"config.sqlServerSchema",label:"Schema",type:"text",value:"dbo",validations:"maxLength:100,matchRegexp:/^[^'\"]*$/",hiddenOn:"data.type != 4"},{type:"divider",hiddenOn:m},{name:"config.orcaleSchema",label:"Schema",type:"text",placeholder:l.default("不填时使用当前用户的默认schema"),validations:"maxLength:100,matchRegexp:/^[^'\"]*$/",hiddenOn:"data.type != 5"},{name:"config.hanaSchema",label:"Schema",type:"text",placeholder:l.default("不填时使用当前用户的默认schema"),validations:"maxLength:100,matchRegexp:/^[^'\"]*$/",hiddenOn:"data.type != 6"},{name:"config.schema",label:"Schema",type:"text",validations:"maxLength:100,matchRegexp:/^[^'\"]*$/",hiddenOn:"data.type != 22 && data.type != 24 && data.type != 26 && data.type != 27 && data.type != 28",requiredOn:"data.type == 22"},{name:"config.authSource",label:"authSource",type:"text",placeholder:"admin",visibleOn:"data.type == 38"},{name:"config.queryBuilder",label:l.default("解析器"),type:"select",searchable:!0,clearable:!0,options:[{label:"MySQL 5.X",value:0},{label:"MySQL 8",value:20},{label:"PostgreSQL",value:2},{label:"SQL Server",value:4},{label:"Oracle",value:5},{label:"Clickhouse",value:21}],placeholder:l.default("根据选择的解析器生成需要的SQL方言"),description:l.default("根据选择的解析器生成需要的SQL方言，例如当选择clickhouse解析器时会生成clickhouse的SQL方言"),visible:g},{name:"username",label:l.default("用户名"),type:"text",validations:"minLength:2,maxLength:100",requiredOn:"data.type != 21 && data.type != 10 && data.type != 11 && data.type != 12 && data.type != 13 && data.type != 14 && data.type != 15 && data.type != 16 && data.type != 17 && data.type != 38",hiddenOn:m,autocomplete:"off"},{name:"config.mongoURL",label:"Mongo URI",type:"text",hiddenOn:"data.type != 38",placeholder:"mongodb://"},{type:"tpl",label:" ",value:l.default('填写 Mongo URI 会覆盖用户名等设置，使用方法请<a class="text-info" href="/docs/DataBind-Mongo" target="_blank">参考这里</a>'),hiddenOn:"data.type != 38"},{type:"static",hiddenOn:"data.type != 9",value:l.default(l.default("将使用您的百度云 accountID 作为此数据源的权限认证，此数据源只能访问您拥有的 BLS 资源。"))}],h=[{type:"divider",hiddenOn:"data.type != 2 && data.type != 3 && data.type != 7"},{type:"tpl",label:" ",value:l.default('Redis 使用方法请<a class="text-info" href="/docs/DataBind-Redis" target="_blank">参考这里</a>'),hiddenOn:"data.type != 16"},{type:"tpl",label:" ",value:l.default('InfluxDB 使用方法请<a class="text-info" href="/docs/DataBind-InfluxDB" target="_blank">参考这里</a>'),hiddenOn:"data.type != 11"},{type:"tpl",label:" ",value:l.default('百度时序时空数据库TSDB 使用方法请<a class="text-info" href="https://cloud.baidu.com/doc/TSDB/s/Pjwvxskqz" target="_blank">参考这里</a>'),hiddenOn:"data.type != 8"},{type:"tpl",label:" ",value:l.default('ElasticSearch 使用方法请<a class="text-info" href="/docs/DataBind-ElasticSearch" target="_blank">参考这里</a>'),hiddenOn:"data.type != 10 && data.type != 12"},{name:"config.ssl",label:l.default("开启ssl"),type:"switch",hiddenOn:"data.type != 2 && data.type != 3 && data.type != 7"},{name:"config.sslcert",label:"ssl cert",type:"textarea",validations:"maxLength:2500",visibleOn:"(data.type == 2 || data.type == 3 || data.type == 7) && data.config.ssl"},{name:"config.sslkey",label:"ssl key",type:"textarea",validations:"maxLength:2500",visibleOn:"(data.type == 2 || data.type == 3 || data.type == 7) && data.config.ssl"},{name:"config.sslrootcert",label:"ssl root cert",type:"textarea",validations:"maxLength:2500",visibleOn:"(data.type == 2 || data.type == 3 || data.type == 7) && data.config.ssl"}];a&&h.push.apply(h,[{type:"divider"},{type:"tpl",label:" ",value:'<div class="text-info">'+l.default("请在数据库授权中添加这些IP白名单：「"+a+"」「"+("uuap"===window.sugarConfig.loginType?"":'<a target="_blank" href="/docs/Connect-DB" class="text-success m-l">'+l.default("了解更多")+"</a>")+"」\n            ")+"</div>"}]),i?h.push.apply(h,[{type:"divider"},{type:"select",name:"tunnelHash",label:l.default("使用内网隧道"),value:0,clearable:!0,source:"/api/manage/group/"+this.props.group.current.data.hash+"/tunnel/tunnelSelect?databaseHash=$hash"},{type:"tpl",label:" ",value:l.default('内网隧道用于连接内部数据库，使用方法请参考<a target="_blank" class="text-info" href="/docs/Connect-DB-Tunnel">这里</a>')}]):h.push({type:"static",name:"tunnelHash",value:0,hidden:!0});var y={type:"button",label:l.default("添加数据源"),actionType:"dialog",level:"primary",dialog:{title:l.default("添加数据源"),actions:[{type:"button",actionType:"ajax",api:"post:/api/manage/group/"+this.props.group.current.data.hash+"/database/connectTest",data:{data:"data"},label:l.default("测试连接"),level:"info"},{type:"button",actionType:"cancel",label:l.default("取消")},{type:"submit",label:l.default("添加"),level:"primary"}],body:{type:"form",name:"sugar-database-add",api:"/api/manage/group/"+this.props.group.current.data.hash+"/database",mode:"horizontal",horizontal:{left:"col-sm-3",right:"col-sm-9"},controls:t.__spreadArrays(c,[{name:"password",label:l.default("密码"),type:"password",validations:"maxLength:50",hiddenOn:m,requiredOn:"!(data.type == 22 || data.type == 21 || data.type == 10 || data.type == 11 || data.type == 12 || data.type == 13 || data.type == 14 || data.type == 15 || data.type == 16 || data.type == 17 || data.type == 38)"}],h)}}},v={type:"button",label:l.default("创建内网隧道"),className:"pull-right",actionType:"dialog",dialog:{title:l.default("创建内网隧道"),actions:[{type:"button",actionType:"cancel",label:l.default("取消")},{type:"submit",label:l.default("添加"),level:"primary"}],body:{type:"form",name:"sugar-tunnel-add",api:"/api/manage/group/"+this.props.group.current.data.hash+"/tunnel",mode:"horizontal",horizontal:{left:"col-sm-3",right:"col-sm-9"},controls:[{type:"tpl",label:" ",value:l.default('内网隧道可以让 Sugar 连接您的内网数据库，使用前请先<a target="_blank" class="text-info" href="/docs/Connect-DB-Tunnel">阅读文档</a>')},{name:"name",label:l.default("名称"),type:"text",required:!0,validations:"isAlphanumeric"},{type:"divider"},{name:"remark",label:l.default("描述"),type:"text",validations:"maxLength:50"}]}}},x=[y],O={type:"button",label:l.default("上传 Excel/CSV"),actionType:"dialog",level:"primary",dialog:{title:l.default("上传 Excel/CSV"),size:"xl",actions:[{type:"button",actionType:"cancel",label:l.default("取消")},{type:"submit",label:l.default("添加"),level:"primary"}],body:{type:"form",name:"sugar-upload-excel",api:"/api/manage/group/"+this.props.group.current.data.hash+"/database/uploadPost",controls:[{type:"group",controls:[{name:"name",label:l.default("数据源名称"),mode:"inline",type:"text",required:!0,validations:"minLength:1,maxLength:30"},{name:"remark",label:l.default("描述"),mode:"inline",type:"text",validations:"maxLength:50"},{name:"type",type:"hidden",value:100},{type:"tpl",mode:"inline",value:l.default('上传前建议先阅读<a class="text-info" href="/docs/Connect-File" target="_blank">这里</a>')}]},{type:"divider"},{name:"excel",mode:"normal",required:!0,forDatabase:!0,type:"sugar-excel-upload"}]}}};u&&x.unshift(O);var L={type:"crud",showFooter:!1,name:"sugar-admin-databases-list",syncLocation:!1,api:"/api/manage/group/"+this.props.group.current.data.hash+"/database?page=$page&perPage=$perPage",quickSaveItemApi:"/api/manage/group/"+this.props.group.current.data.hash+"/database/$hash/updateFederatedOpen",hideQuickSaveBtn:!0,className:"admin-database-list",headerClassName:"m-b-xs",defaultParams:{perPage:12},switchPerPage:!1,affixHeader:!1,placeholder:l.default("请添加数据源"),bulkActions:[{label:l.default("批量移除"),type:"button",confirmText:l.default("确定要批量移除？"),actionType:"ajax",api:"put:/api/manage/group/"+this.props.group.current.data.hash+"/database/multiDelete"}],columns:[{type:"tpl",tpl:'<% if (data.type==100) { %><i class="fas fa-file-excel"></i><% } else { %><i class="fas fa-database"></i><% } %> <a data-link="/group/'+this.props.group.current.data.key+'/manage/dbPreview?database=<%= data.hash %>" class="text-info--hover"><%- data.name %></a>',label:l.default("名称")},{type:"text",name:"remark",label:l.default("描述")},{type:"text",name:"host",label:l.default("主机名")},{type:"operation",label:l.default("操作"),width:360,buttons:[{type:"button",label:l.default("创建数据模型"),actionType:"link",link:"/group/"+this.props.group.current.data.key+"/manage/dataModel?page=1&database=$hash"},{type:"button",label:l.default("预览数据"),actionType:"link",link:"/group/"+this.props.group.current.data.key+"/manage/dbPreview?database=${hash}"},{type:"button",label:l.default("更新数据"),actionType:"dialog",hiddenOn:"data.type != 100",dialog:{title:l.default("更新数据"),size:"xl",actions:[{type:"button",actionType:"cancel",label:l.default("取消")},{type:"submit",label:l.default("确定"),level:"primary"}],body:{type:"form",name:"sugar-upload-excel",api:"put:/api/manage/group/"+this.props.group.current.data.hash+"/database/$hash/uploadPut",controls:[{type:"group",controls:[{name:"name",label:l.default("数据源名称"),mode:"inline",type:"text",required:!0,validations:"minLength:1,maxLength:30"},{name:"remark",label:l.default("描述"),mode:"inline",type:"text",validations:"maxLength:50"},{type:"tpl",mode:"inline",value:l.default('上传前建议先阅读<a class="text-info" href="/docs/Connect-File" target="_blank">这里</a>')}]},{name:"type",type:"hidden",value:100},{type:"divider"},{type:"radios",name:"uploadMode",label:l.default("更新方式"),columnsCount:2,value:"add",labelRemark:l.default("新增数据表或在已有数据表上追加数据可以上传不同的Excel/CSV文件来新增表，而清空并新增数据表将会删除之前所有表 \n Tip：Excel中sheet名即数据表名"),options:[{label:l.default("新增数据表或在已有数据表上追加数据"),value:"add"},{label:l.default("清空并新增数据表"),value:"overwrite"}]},{name:"excel",mode:"normal",type:"sugar-excel-upload",forDatabase:!0}]}}},{actionType:"dialog",type:"button",label:l.default("修改配置"),hiddenOn:"config.isDemoDb || data.type == 100",dialog:{title:l.default("编辑数据源"),actions:[{type:"button",actionType:"ajax",api:"post:/api/manage/group/"+this.props.group.current.data.hash+"/database/connectTest",label:l.default("测试连接"),level:"info"},{type:"button",actionType:"cancel",label:l.default("取消")},{type:"submit",label:l.default("提交"),level:"primary"}],body:{type:"form",name:"sugar-database-edit",api:"put:/api/manage/group/"+this.props.group.current.data.hash+"/database/$hash",mode:"horizontal",horizontal:{left:"col-sm-3",right:"col-sm-9"},controls:t.__spreadArrays([{type:"hidden",name:"hash"}],c,[{name:"username",label:l.default("百度云账号 accountId"),type:"text",disabled:!0,hiddenOn:"data.type != 9"},{type:"button-toolbar",hiddenOn:m,buttons:[{type:"button",label:l.default("修改密码"),actionType:"dialog",dialog:{title:l.default("修改密码"),actions:[{type:"button",actionType:"cancel",label:l.default("取消")},{type:"submit",label:l.default("保存"),level:"primary"}],body:{type:"form",name:"sugar-database-change-password",api:"put:/api/manage/group/"+this.props.group.current.data.hash+"/database/$hash/changePassword",controls:[{name:"newPassword",label:l.default("密码"),type:"password",validations:"maxLength:50",required:!0}]}}}]}],h)}}},{type:"button",label:l.default("删除"),hiddenOn:"config.isDemoDb",confirmText:l.default("您确定要移除该数据源?"),actionType:"ajax",api:"delete:/api/manage/group/"+this.props.group.current.data.hash+"/database/$hash"},{type:"button",label:l.default("清理缓存"),actionType:"ajax",api:"post:/api/manage/group/"+this.props.group.current.data.hash+"/database/$hash/clearCache"}]}]};window.sugarConfig.enableFederated&&L.columns.splice(2,1,{name:"federatedOpen",label:l.default("开启跨源查询")+'<a style="padding-left: 5px" href="/docs/Federated-Query" target="_blank"><i class="fa fa-question-circle"></i></a>',quickEditEnabledOn:"data.federatedOpen === 1 || data.federatedOpen === 0 || data.federatedOpen === true || data.federatedOpen === false",quickEdit:{mode:"inline",type:"switch",size:"xs",saveImmediately:!0,resetOnFailed:!0}},{name:"federatedState",label:l.default("跨源状态"),type:"mapping",map:(e={undefined:"-"},e[-99]="-",e[0]=l.default("待生效"),e[1]=l.default("已生效"),e[-1]=l.default("出现错误"),e)});var S={type:"crud",showFooter:!1,name:"sugar-admin-tunnel-list",syncLocation:!1,api:"/api/manage/group/"+this.props.group.current.data.hash+"/tunnel",className:"admin-tunnel-list",headerClassName:"m-b-xs",defaultParams:{perPage:12},columnsCount:3,switchPerPage:!1,placeholder:l.default("尚未创建内网隧道"),columns:[{type:"text",name:"name",label:l.default("名称")},{type:"text",name:"remark",label:l.default("描述")},{type:"datetime",name:"created_at",label:l.default("创建时间")},{type:"operation",label:l.default("操作"),width:150,buttons:[{type:"button",label:l.default("下载隧道客户端"),actionType:"url",blank:!0,url:"/api/manage/group/"+this.props.group.current.data.hash+"/tunnel/$hash/downloadTunnel"},{type:"button",label:l.default("删除"),confirmText:l.default("您确定要移除该内网隧道？此操作将无法恢复"),actionType:"ajax",api:"delete:/api/manage/group/"+this.props.group.current.data.hash+"/tunnel/$hash"}]}]},k=[L];if(i){k.push({type:"divider"});var w=void 0;w=r&&!r.tunnel?{type:"button",className:"pull-right",label:l.default("创建内网隧道"),actionType:"copy",onClick:function(){return s.showUpdate("product-type-tunnel")}}:v,k.push({type:"hbox",columns:[{type:"tpl",label:" ",tpl:'<h2 class="a-Page-title line-lg"><span class="a-TplField">'+l.default("内网隧道")+'</span>\n               <a href="/docs/Connect-DB-Tunnel" class="text-sm text-info" target="_blank">'+l.default("什么是内网隧道？")+"</a></h2>"},w]}),k.push(S)}return n.createElement(d,{title:l.default("数据源管理")},n.createElement(p.default,{schema:{title:l.default("数据源管理"),name:"sugar-admin-databases",toolbar:{type:"button-toolbar",buttons:x},body:k}}))},a.displayName="DatabaseManage",a=t.__decorate([i.inject(function(e){return{group:e.group}})],a)}(n.Component);a.default=v});
;sugar.define("sugar:sites/group/manage/database/database-preview.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=e("sugar:node_modules/tslib/tslib.js"),s=e("sugar:utils/i18n.ts"),i=e("sugar:node_modules/react/index.js"),n=e("sugar:node_modules/react-document-title/index.js"),l=e("sugar:stores/index.ts"),r=e("sugar:node_modules/amis/lib/index.js"),o=e("sugar:node_modules/axios/index.js"),d=e("sugar:node_modules/react-router/lib/index.js"),u=e("sugar:utils/url.ts"),c=e("sugar:sites/amis-renderer.tsx"),h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.resizing=!1,t.startX=0,t.startWidth=0,t.leftWidth=0,t}return a.__extends(t,e),t.prototype.componentWillMount=function(){var e=this;this.setState({filterStr:"",tableList:{},tableVal:"",tableListLoading:!1}),this.props.databaseSimpleList.loadData().then(function(){var t=u.getQueryString("database")||e.props.databaseSimpleList.data[0].hash;e.getTableList(t)}),this.filterStrChange=this.filterStrChange.bind(this),this.dataSourceChange=this.dataSourceChange.bind(this),this.getTableList=this.getTableList.bind(this),this.handleMouseDownLeft=this.handleMouseDownLeft.bind(this),this.handleMouseMoveLeft=this.handleMouseMoveLeft.bind(this),this.handleMouseUpLeft=this.handleMouseUpLeft.bind(this),this.removeWindowEvents=this.removeWindowEvents.bind(this)},t.prototype.componentWillUnmount=function(){this.removeWindowEvents()},t.prototype.filterStrChange=function(e){this.setState({filterStr:e.target.value})},t.prototype.dataSourceChange=function(e){this.getTableList(e)},t.prototype.getTableList=function(e){return a.__awaiter(this,void 0,void 0,function(){var t,s,i,n,l;return a.__generator(this,function(a){switch(a.label){case 0:return this.setState({tableListLoading:!0}),t=this.props.group,[4,o.default.get("/api/group/"+t.current.data.hash+"/database/"+e+"/getTableList?selectfirst=1")];case 1:return s=a.sent().data,i=s.data,n=s.status,l=s.msg,0!==n&&r.toast.error(l),this.setState({tableListLoading:!1,tableList:i,datasourceValue:e,tableVal:i&&i.options&&i.options[0].value}),[2]}})})},t.prototype.handleMouseDownLeft=function(e){this.startX=e.clientX,this.startWidth=this.leftWidth,this.resizing=!0,window.addEventListener("mouseup",this.handleMouseUpLeft),window.addEventListener("mousemove",this.handleMouseMoveLeft),e.stopPropagation&&e.stopPropagation()},t.prototype.handleMouseMoveLeft=function(e){var t=this.startX-e.clientX;e.preventDefault(),this.leftWidth=Math.min(350,Math.max(200,this.startWidth-t)),document.getElementsByClassName("database-preview-aside")[0].style.width=this.leftWidth+"px"},t.prototype.handleMouseUpLeft=function(){this.resizing=!1,this.removeWindowEvents()},t.prototype.removeWindowEvents=function(){window.removeEventListener("mouseup",this.handleMouseUpLeft),window.removeEventListener("mousemove",this.handleMouseMoveLeft)},t.prototype.render=function(){var e=this,t=this.props,a=t.group,l=t.databaseSimpleList,o=this.state,u=o.filterStr,h=o.tableListLoading,p=o.tableList,m=o.tableVal,f=o.datasourceValue;return"pending"===l.loadState?i.createElement(r.Spinner,{overlay:!0,size:"lg"}):"error"===l.loadState?i.createElement("p",{className:"wrapper-lg"},s.default("拉取数据源信息错误！")):l.data&&l.data.length?i.createElement(n,{title:s.default("数据表预览")},f||m?i.createElement(c.default,{data:{datasourceValue:f,tableVal:m},schema:{asideClassName:"database-preview-aside",aside:{type:"form",target:"window,table-data",reload:"table-data",wrapWithPanel:!1,submitText:null,submitOnChange:!0,className:"wrapper-xs",controls:[{name:"datasourceDetail",value:"",children:function(){return i.createElement("div",{className:"data-source-preview-aside"},i.createElement("div",{className:"data-source-preview"},i.createElement("div",{className:""},s.default("数据源")),i.createElement("div",{className:"data-source"},i.createElement(r.Select,{className:"full-width",simpleValue:!0,value:f,clearable:!1,options:l.data.map(function(e){return{label:e.name,value:e.hash}}),onChange:e.dataSourceChange,placeholder:s.default("请选择")})),i.createElement("div",{className:""},s.default("数据表")),i.createElement("div",{className:"table-filter"},i.createElement("input",{value:u,type:"text",placeholder:s.default("输入关键词搜索"),onChange:e.filterStrChange})),i.createElement("div",{className:"table-list"},h?i.createElement(r.Spinner,{overlay:!0,size:"lg"}):p&&p.options?p.options.map(function(t){return~t.label.toLocaleLowerCase().indexOf(u.toLocaleLowerCase())?i.createElement("div",{className:"table-item","data-value":t.value,style:{backgroundColor:m===t.value?"#108cee":"",color:m===t.value?"#fff":""},key:t.value,onClick:function(t){return e.setState({tableVal:t.currentTarget.getAttribute("data-value")})}},i.createElement(r.TooltipWrapper,{tooltip:t.label,placement:"bottom"},i.createElement("span",null,t.label))):null}):i.createElement("div",{style:{textAlign:"center"}},s.default("暂无数据")))),i.createElement("div",{className:"resizer",onMouseDown:e.handleMouseDownLeft}))}}]},body:[{name:"table-data",type:"service",className:"m-t",initFetchSchema:!0,schemaApi:"/api/group/"+a.current.data.hash+"/database/${datasourceValue}/getTableDataSchema?table=${tableVal}"}]}}):i.createElement(r.Spinner,{overlay:!0,size:"lg"})):i.createElement("p",{className:"wrapper-lg"},s.default("当前空间还没有数据源，请先在"),i.createElement(d.Link,{className:"text-info",to:"/group/"+a.current.data.key+"/manage/database"},s.default("数据源管理")),s.default("中新建数据源，然后才能对数据源中的数据表进行预览！"))},t.displayName="DataTablePreview",t=a.__decorate([l.inject(function(e){return{group:e.group,databaseSimpleList:e.database.simpleList}}),l.observer],t)}(i.Component);t.default=h});
;sugar.define("sugar:sites/group/manage/sql/sql.tsx",function(e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var t=e("sugar:node_modules/tslib/tslib.js"),s=e("sugar:utils/i18n.ts"),l=e("sugar:node_modules/react/index.js"),n=e("sugar:node_modules/react-document-title/index.js"),o=e("sugar:sites/amis-renderer.tsx"),r=e("sugar:stores/index.ts"),u=function(e){function a(){return null!==e&&e.apply(this,arguments)||this}return t.__extends(a,e),a.prototype.componentWillMount=function(){},a.prototype.updateSQLModelList=function(){this.props.sqlModel.simpleList.loadData()},a.prototype.shouldComponentUpdate=function(){return!1},a.prototype.render=function(){return l.createElement(n,{title:s.default("SQL模型管理")},l.createElement(o.default,{schema:{name:"sugar-sql-manage",title:s.default("SQL模型管理"),className:"dashboard-manage",actionsClassName:"m-t-md",toolbar:[{type:"form",name:"sugar-sql-filter",mode:"inline",submitText:"",wrapWithPanel:!1,target:"sugar-sql-manage-table",className:"pull-right",controls:[{type:"text",name:"searchText",placeholder:s.default("请输入SQL模型名称"),className:"ma-none",addOn:{icon:"fa fa-search",type:"submit",className:"btn-info"}}]}],body:{type:"crud",name:"sugar-sql-manage-table",syncLocation:!1,footable:{expand:"none"},api:"/api/manage/group/"+this.props.group.current.data.hash+"/sqlModel/manageList",title:s.default("SQL模型列表（新增模型请在报表编辑页中进行）"),switchPerPage:!1,placeholder:s.default("暂时没有SQL模型，请在编辑图表或过滤条件时添加"),defaultParams:{perPage:10},bulkActions:[{label:s.default("批量删除"),actionType:"ajax",confirmText:s.default("您确定要移除所选SQL模型?删除后将会导致使用这些SQL模型的图表等不可用"),level:"danger",api:"put:/api/manage/group/"+this.props.group.current.data.hash+"/sqlModel/multiDelete"}],columns:[{type:"text",name:"name",label:s.default("模型名称"),innerClassName:"inline"},{type:"text",name:"user",label:s.default("创建人"),breakpoint:"xs"},{type:"text",name:"database",label:s.default("数据源"),breakpoint:"xs"},{type:"operation",width:70,label:s.default("操作"),breakpoint:"xs",buttons:[{confirmText:s.default("您确定要移除该SQL模型?删除后将会导致使用该SQL模型的图表等不可用"),actionType:"ajax",api:"delete:/api/manage/group/"+this.props.group.current.data.hash+"/sqlModel/$hash",reload:"sugar-sql-manage-table",label:s.default("删除"),type:"button"}]}]}},update:this.updateSQLModelList.bind(this)}))},a.displayName="SqlManage",a=t.__decorate([r.inject(function(e){return{sqlModel:e.sqlModel,group:e.group}})],a)}(l.Component);a.default=u});
;sugar.define("sugar:sites/group/manage/rename/rename.tsx",function(e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.createSchema=void 0;var t=e("sugar:node_modules/tslib/tslib.js"),n=e("sugar:utils/i18n.ts"),i=e("sugar:node_modules/react/index.js"),l=e("sugar:node_modules/react-document-title/index.js"),r=e("sugar:sites/amis-renderer.tsx"),d=e("sugar:stores/index.ts"),o=e("sugar:widgets/handsontable.tsx");a.createSchema=function(e,a){void 0===a&&(a=!1);var t={title:n.default("添加新的数据值映射"),body:{type:"form",name:"sugar-rename-lib-new",className:"dashboard-manage",mode:"normal",api:"/api/manage/group/"+e+"/renameLib",controls:[{name:"name",label:n.default("名称"),type:"text",required:!0,validations:"maxLength:30"},{type:"divider"},{name:"remark",label:n.default("简介"),type:"text",validations:"maxLength:1024"},{type:"divider"},{type:"select",name:"renameLib.dataType",label:n.default("数据绑定方式"),value:0,options:[{label:n.default("手动录入"),value:0},{label:n.default("数据模型绑定"),value:1}]},{name:"renameLib.data",hiddenOn:"data.renameLib && data.renameLib.dataType",children:function(e){var a=e.onChange,t=e.value;return i.createElement(o.default,{value:t,onChange:a,needExcel:!0,columnLength:2,extraHeaders:[[n.default("原始值"),n.default("映射值")]],setting:{minCols:2,stretchH:"all"}})}},{type:"tree-select",name:"renameLib.dataModelHash",label:"数据模型",hiddenOn:"!data.renameLib || data.renameLib.dataType !== 1",source:"/api/group/"+e+"/dataModel/treeList?noIcon=1&onlyLeaf=1",initFetchOn:"data.renameLib && data.renameLib.dataType === 1",labelField:"name",cascade:!0,required:!0,searchable:!0,placeholder:" "},{type:"tree-select",name:"renameLib.originalField",label:n.default("原始值字段"),hiddenOn:"!data.renameLib || data.renameLib.dataType !== 1 || !data.renameLib.dataModelHash",source:"/api/group/"+e+"/dataModel/${renameLib.dataModelHash}/getFields?onlyDimension=1",initFetchOn:"data.renameLib && data.renameLib.dataType === 1 && data.renameLib.dataModelHash",cascade:!0,required:!0,searchable:!0,placeholder:" "},{type:"tree-select",name:"renameLib.mappingField",label:n.default("映射值字段"),hiddenOn:"!data.renameLib || data.renameLib.dataType !== 1 || !data.renameLib.dataModelHash",source:"/api/group/"+e+"/dataModel/${renameLib.dataModelHash}/getFields?onlyDimension=1",initFetchOn:"data.renameLib && data.renameLib.dataType === 1 && data.renameLib.dataModelHash",cascade:!0,required:!0,searchable:!0,placeholder:" "},{type:"button-toolbar",hiddenOn:"!data.renameLib || data.renameLib.dataType !== 1 || !data.renameLib.dataModelHash || !data.renameLib.originalField || !data.renameLib.mappingField",buttons:[{type:"button",label:n.default("预览数据"),actionType:"dialog",dialog:{title:n.default("预览数据值映射数据（最多只展示前300行数据）"),actions:[{type:"button",actionType:"cancel",label:n.default("确定")}],body:{type:"service",api:"/api/manage/group/"+e+"/renameLib/getDataModelData?dataModelHash=${renameLib.dataModelHash}&originalField=${renameLib.originalField}&mappingField=${renameLib.mappingField}",body:[{type:"table",source:"$rows",columns:[{name:"DIMNAME",label:n.default("原始值")},{name:"DIMVAL",label:n.default("映射值")}],affixHeader:!1}]}}}]}]},actions:[{type:"button",actionType:"cancel",label:n.default("取消")},{type:"submit",primary:!0,label:n.default("添加")}]};return t};var s=function(e){return{title:n.default("编辑数据值映射")+"$name",body:{api:"put:/api/manage/group/"+e+"/renameLib/$hash",name:"sugar-rename-lib-edit",type:"form",mode:"normal",initApi:"/api/manage/group/"+e+"/renameLib/$hash/getDetail",controls:[{name:"hash",type:"hidden"}].concat(a.createSchema(e,!0).body.controls)}}},m=function(e){function o(){return null!==e&&e.apply(this,arguments)||this}return t.__extends(o,e),o.prototype.componentWillMount=function(){},o.prototype.updateRenameList=function(){this.props.renameLib.simpleList.loadData()},o.prototype.shouldComponentUpdate=function(){return!1},o.prototype.render=function(){return i.createElement(l,{title:n.default("数据值映射管理")},i.createElement(r.default,{schema:{name:"sugar-rename-lib-manage",title:n.default("数据值映射管理"),className:"dashboard-manage",actionsClassName:"m-t-md",toolbar:[{type:"form",name:"sugar-rename-lib-filter",mode:"inline",submitText:"",wrapWithPanel:!1,target:"sugar-rename-lib-manage-table",className:"pull-right",controls:[{type:"text",name:"searchText",placeholder:n.default("请输入数据值映射名称"),className:"ma-none",addOn:{icon:"fa fa-search",type:"submit",className:"btn-info"}}]},{type:"button",label:n.default("添加数据值映射"),actionType:"dialog",level:"primary",className:"m-r-xs",dialog:a.createSchema(this.props.group.current.data.hash)}],body:{type:"crud",name:"sugar-rename-lib-manage-table",syncLocation:!1,footable:{expand:"none"},api:"/api/manage/group/"+this.props.group.current.data.hash+"/renameLib/manageList",switchPerPage:!1,placeholder:n.default("暂时没有数据值映射"),defaultParams:{perPage:10},columns:[{type:"text",name:"name",label:n.default("数据值映射名称"),innerClassName:"inline"},{type:"text",name:"user",label:n.default("创建人"),breakpoint:"xs"},{type:"text",name:"remark",label:n.default("备注"),breakpoint:"xs"},{type:"operation",width:100,label:n.default("操作"),breakpoint:"xs",buttons:[{actionType:"dialog",dialog:s(this.props.group.current.data.hash),label:n.default("编辑数据值映射"),type:"button"}]}]}},update:this.updateRenameList.bind(this)}))},o.displayName="RenameManage",o=t.__decorate([d.inject(function(e){return{renameLib:e.renameLib,group:e.group}})],o)}(i.Component);a.default=m});
;sugar.define("sugar:sites/group/manage/chart/chart.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=e("sugar:node_modules/tslib/tslib.js"),r=e("sugar:node_modules/react/index.js"),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.componentWillMount=function(){},t.prototype.render=function(){return r.createElement("h4",null,"TODO CHART")},t}(r.PureComponent);t.default=u});
;sugar.define("sugar:sites/group/manage/group-setting/group-setting.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=e("sugar:node_modules/tslib/tslib.js"),o=e("sugar:utils/i18n.ts"),s=e("sugar:node_modules/react/index.js"),a=e("sugar:node_modules/react-document-title/index.js"),u=e("sugar:stores/index.ts"),n=e("sugar:node_modules/amis/lib/index.js"),i=e("sugar:widgets/progress.ts"),d=e("sugar:sites/group/manage/group-setting/group-form.tsx"),p=e("sugar:sites/group/manage/group-setting/group-delete.tsx"),c=e("sugar:sites/amis-renderer.tsx"),g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.success=function(){setTimeout(function(){t.props.router.replace("/groups")},3e3)},t}return r.__extends(t,e),t.prototype.componentWillMount=function(){this.submit=this.submit.bind(this)},t.prototype.submit=function(e){i.default.show();var t=this.props.group.current;t.update(t.data.hash,e).then(function(){i.default.hide(),n.toast.success(o.default("更新空间设置成功"))}).catch(function(e){i.default.hide(),n.toast.error(o.default(e.message||"更新空间设置失败"))})},t.prototype.render=function(){var e=this,t=this.props.group.current.data,r=t.name,u=t.key,n=t.remark,i=t.type,g=t.navWidth,l=t.token,m=t.avatar,f=t.config;return s.createElement(a,{title:o.default("空间设置")},s.createElement(c.default,{schema:{type:"page",body:{type:"grid",columns:[{type:"container",md:10,body:[d.getGroupForm({title:o.default("空间设置"),mode:"update",onSubmit:this.submit,initialState:{name:r,key:u,remark:n,type:i,navWidth:g,token:l,avatar:m,macro:f.macro||[],onlyAuthReportTree:f.onlyAuthReportTree||!1,tableViewNotTotal:f.tableViewNotTotal||!1,reportRootName:f.reportRootName,dashboardRootName:f.dashboardRootName}}),{children:function(){return s.createElement(p.GroupDelete,{onSuccess:e.success,data:e.props.group.current.data})}}]}]}}}))},t.displayName="GroupSetting",t=r.__decorate([u.inject(function(e){return{group:e.group}}),u.observer],t)}(s.Component);t.default=g});
;sugar.define("sugar:sites/group/report/unauthorized.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=e("sugar:node_modules/tslib/tslib.js"),l=e("sugar:utils/i18n.ts"),m=e("sugar:node_modules/react/index.js"),r=e("sugar:widgets/error.tsx"),n=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.componentWillMount=function(){},t.prototype.render=function(){var e=this.props,t=e.message,a=e.reportInfo,n=e.admins,s=e.reportUrl,u=e.me;return m.createElement(r.default,{region:!0,msg:l.default(t||"无权限查看该报表"),content:[m.createElement("div",{className:"m-t",key:"title"},l.default("您可以联系该空间管理员：")),n&&n.length?n.map(function(e,t){return m.createElement("div",{key:t,className:"mailto-link m-t"},m.createElement("a",{href:"mailto:"+e.email+"?subject=申请报表页面权限&body=hi "+((e.realName||e.name)+": %0d%0a%0d%0a我想申请报表『"+a.name+"』("+s+")")+("的阅读权限，我是："+u.email+" 谢谢!")},e.realName+"("+e.name+")"))}):m.createElement("div",{key:"noAdmins"},l.default("无管理员，请联系组织管理员"))],suffix:[m.createElement("div",{className:"line b-b m-t-lg m-b",key:"line"}),m.createElement("h4",{key:"infotitle"},l.default("报表相关信息：")),m.createElement("div",{className:"m-l-md m-b-sm",key:"name"},l.default("报表名称："),a.name),a.remark?m.createElement("div",{className:"m-l-md m-b-sm",key:"remark"},l.default("报表简介："),a.remark):null,a.charts&&a.charts.length?m.createElement("div",{className:"m-l-md",key:"charts"},m.createElement("h5",{className:"m-t m-b"},l.default("包含「"+a.charts.length+"」个图表：")),a.charts.map(function(e,t){return m.createElement("div",{className:"m-t m-l-md m-b",key:t},m.createElement("h5",null,t+1+"、"+e.name),e.remark?m.createElement("div",{className:"m-l-md"},l.default("图表简介：「"+e.remark+"」")):null)})):null]})},t}(m.PureComponent);t.default=n});
;sugar.define("sugar:widgets/chart-conditions/single-select.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=e("sugar:node_modules/tslib/tslib.js"),a=e("sugar:utils/i18n.ts"),r=e("sugar:node_modules/react/index.js"),o=e("sugar:stores/index.ts"),l=e("sugar:widgets/conditions/select/list.tsx"),d=e("sugar:node_modules/amis/lib/index.js"),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.componentWillMount=function(){var e=this.props,t=e.chartCondition,n=e.selectDim,a=e.chart;t.chartConditionValue.getValueOtherwiseByDeafaultVal(a.frontendId,n),t.chartConditionData.getChartConditionDataByFrontendId(a.frontendId,n.frontendId).loadData(a,n)},t.prototype.render=function(){var e=this.props,t=e.contentWidth,n=e.chartCondition,o=e.selectDim,i=e.chart,s=e.onChange,u=i.frontendId+"-"+o.frontendId,c=n.chartConditionData.mapByChartAndDimFrontendId.get(u),g=n.chartConditionValue.mapByChartAndDimFrontendId.get(u);if(!t||!c)return null;if("pending"===c.loadState)return r.createElement(d.Spinner,{overlay:!0});if("error"===c.loadState)return r.createElement("div",{className:"error-msg"},c.loadError.message||a.default("拉取数据错误"));var h=0,m=c.data||[],p=m.reduce(function(e,t){return e+(t.label.toString?t.label.toString():"null")},""),f=p.match(/[\u4e00-\u9fa5]/g);h=f?13*f.length+7.5*(p.length-f.length)+24*m.length:7.5*p.length+24*m.length;var C=o.chartCon&&o.chartCon.forceUI;return t>=h+15&&!C?r.createElement(l.default,{data:c,value:g,onChange:s,cls:"compact"}):(m=m.map(function(e){return(""===e.value||null===e.value)&&(e.disabled=!0),e}),r.createElement(d.Select,{className:"condition-select",searchable:c.data&&c.data.length>=10,simpleValue:!0,disabled:!1,value:g,clearable:!0,options:m,onChange:s,placeholder:a.default("请选择"),locale:a.lang,popOverContainer:document.body}))},t.displayName="SingleSelect",t=n.__decorate([o.observer],t)}(r.Component);t.default=i});
;sugar.define("sugar:widgets/chart-conditions/multi-select.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=e("sugar:node_modules/tslib/tslib.js"),a=e("sugar:utils/i18n.ts"),r=e("sugar:node_modules/react/index.js"),o=e("sugar:stores/index.ts"),l=e("sugar:widgets/conditions/multi-select/multi-select-list.tsx"),i=e("sugar:node_modules/amis/lib/index.js"),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.componentWillMount=function(){var e=this.props,t=e.chartCondition,n=e.selectDim,a=e.chart;t.chartConditionValue.getValueOtherwiseByDeafaultVal(a.frontendId,n),t.chartConditionData.getChartConditionDataByFrontendId(a.frontendId,n.frontendId).loadData(a,n),this.onChange=this.onChange.bind(this)},t.prototype.onChange=function(e){var t=this.props,n=t.selectDim,a=t.onChange,r=n.chartCon||{},o=r.defaultValue;if(o&&1===o.length&&r.mutex){var l=this.props,i=l.chartCondition,d=l.selectDim,s=l.chart,c=s.frontendId+"-"+d.frontendId,u=i.chartConditionValue.mapByChartAndDimFrontendId.get(c)||[],h=~u.indexOf(o[0]),g=e.indexOf(o[0]),m=~g;h&&m?e.splice(g,1):~h&&m&&(e=o),e.length||(e=o)}a(e)},t.prototype.render=function(){var e=this,t=this.props,n=t.contentWidth,o=t.chartCondition,d=t.selectDim,s=t.chart,c=s.frontendId+"-"+d.frontendId,u=o.chartConditionData.mapByChartAndDimFrontendId.get(c),h=o.chartConditionValue.mapByChartAndDimFrontendId.get(c);if(!n||!u)return null;if("pending"===u.loadState)return r.createElement(i.Spinner,{overlay:!0});if("error"===u.loadState)return r.createElement("div",{className:"error-msg"},u.loadError.message||a.default("拉取数据错误"));var g=d.chartCon&&d.chartCon.disableCheckAll,m=0,f=u.data||[],p=f.reduce(function(e,t){return e+(t.label.toString?t.label.toString():"null")},"")+(g?"":a.default("全选")),C=p.match(/[\u4e00-\u9fa5]/g);m=C?13*C.length+7.5*(p.length-C.length)+45*(f.length+1):7.5*p.length+45*(f.length+1);var v=d.chartCon&&d.chartCon.forceUI;return n>=m+25&&!v?r.createElement(l.default,{onChange:this.onChange,value:h,data:u,cls:"compact",disableCheckAll:g}):r.createElement(i.Select,{className:"condition-multi-select",searchable:u.data&&u.data.length>=10,multiple:!0,checkAll:!g,disabled:!1,value:h,clearable:!0,options:f,onChange:function(t){e.onChange(t?t.map(function(e){return e.value}):[])},placeholder:a.default("请选择"),locale:a.lang,popOverContainer:document.body})},t.displayName="MultiSelect",t=n.__decorate([o.observer],t)}(r.Component);t.default=d});
;sugar.define("sugar:widgets/chart-conditions/date-range.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=e("sugar:node_modules/tslib/tslib.js"),n=e("sugar:utils/i18n.ts"),o=e("sugar:node_modules/react/index.js"),r=e("sugar:stores/index.ts"),d=e("sugar:utils/date-helper.ts"),s=e("sugar:node_modules/amis/lib/components/DateRangePicker.js"),i=e("sugar:node_modules/moment/moment.js"),l=[{name:n.default("7天"),value:{start:-7,end:-1}},{name:n.default("14天"),value:{start:-14,end:-1}},{name:n.default("30天"),value:{start:-30,end:-1}}],u=[{name:n.default("近10分钟"),value:{start:10,end:0}},{name:n.default("近1h"),value:{start:60,end:0}}],h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.componentWillMount=function(){this.handleDateChange=this.handleDateChange.bind(this),this.handleChange=this.handleChange.bind(this)},t.prototype.handleDateChange=function(e){return e||this.handleChange({startDate:void 0,endDate:void 0}),"string"==typeof e&&(e=e.split(",")),this.handleChange({startDate:e[0],endDate:e[1]})},t.prototype.formatValue=function(e){return"string"!=typeof e?i(e).format("X"):e},t.prototype.handleChange=function(e){this.props.onChange(e)},t.prototype.render=function(){var e=this.props,t=e.chartCondition,a=e.selectDim,r=e.chart,i=e.dataType,h=r.frontendId+"-"+a.frontendId,m=t.chartConditionValue.mapByChartAndDimFrontendId.get(h),c="date"===i?"dateRange":"dateTimeRange",g=[];return g="dateRange"===c?d.getShortcutByHotKey(c,l):d.getShortcutByHotKey(c,u),"date"===i?o.createElement(s.default,{className:"chart-condition-date-range",value:m&&m.startDate?this.formatValue(m.startDate)+","+this.formatValue(m.endDate):"",onChange:this.handleDateChange,mode:"date",clearable:!0,timeFormat:!1,delimiter:",",popOverContainer:document.body?function(){return document.body}:null,ranges:g,locale:n.lang,overlayPlacement:"auto"}):o.createElement(s.default,{className:"chart-condition-date-range",value:m&&m.startDate?this.formatValue(m.startDate)+","+this.formatValue(m.endDate):"",onChange:this.handleDateChange,mode:"date",clearable:!0,inputFormat:"YYYY-MM-DD HH:mm:ss",timeFormat:"HH:mm:ss",delimiter:",",popOverContainer:document.body?function(){return document.body}:null,ranges:g,locale:n.lang,overlayPlacement:"auto"})},t.displayName="DateRangeCondition",t=a.__decorate([r.observer],t)}(o.Component);t.default=h});
;sugar.define("sugar:widgets/chart-conditions/index.tsx",function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=t("sugar:node_modules/tslib/tslib.js"),i=t("sugar:utils/i18n.ts"),o=t("sugar:node_modules/react/index.js"),a=t("sugar:node_modules/react-dom/index.js"),s=t("sugar:node_modules/mobx/lib/mobx.js"),l=t("sugar:stores/index.ts"),c=t("sugar:node_modules/amis/lib/index.js"),r=t("sugar:node_modules/lodash/debounce.js"),h=t("sugar:utils/resize-sensor.ts"),d=t("sugar:widgets/chart-conditions/single-select.tsx"),u=t("sugar:widgets/chart-conditions/multi-select.tsx"),p=t("sugar:widgets/chart-conditions/date-range.tsx"),g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.unWatchResize=null,e.contentWidth=0,e.optionData=[],e.allChecked=!1,e.isChartConditionDisplayNum=!1,e}return n.__extends(e,t),e.prototype.componentWillMount=function(){var t,e,i,o;this._initResizeSensor=this._initResizeSensor.bind(this),this._resize=this._resize.bind(this),this.onChange=this.onChange.bind(this),this.reloadChartData=r(this.reloadChartData.bind(this),500),this.chartConditionsOptions=this.chartConditionsOptions.bind(this),this.checkboxSelect=this.checkboxSelect.bind(this),this.setState({checkboxSelectedVal:[]}),this.props.chart.setConfig(n.__assign(n.__assign({},this.props.chart.config),{chartConditionCheckedCount:(null===(e=null===(t=this.props.chart)||void 0===t?void 0:t.config)||void 0===e?void 0:e.chartConditionDisplayNum)||0})),(null===(o=null===(i=this.props.chart)||void 0===i?void 0:i.config)||void 0===o?void 0:o.chartConditionDisplayNum)&&(this.isChartConditionDisplayNum=!0)},e.prototype.onChange=function(t,e){var n=this.props.chart.dataConfig.dataModel.chartCondition[e];n&&(this.props.chartCondition.chartConditionValue.setValue(this.props.chart.frontendId,n.frontendId,t),this.reloadChartData())},e.prototype.reloadChartData=function(){this.props.chart.loadData(this.props.mode)},e.prototype._initResizeSensor=function(){this.unWatchResize&&this.unWatchResize();var t=a.findDOMNode(this);this.unWatchResize=h.resizeSensor(t,r(this._resize,250))},e.prototype._resize=function(){var t=a.findDOMNode(this);t&&(this.contentWidth=t.clientWidth-133)},e.prototype.checkboxSelect=function(t){var e=this,i=this.props.chart;if(t){var o=n.__spreadArrays(t,this.optionData),a=o.filter(function(n){return!((null===t||void 0===t?void 0:t.filter(function(t){return t.value===n.value}).length)&&e.optionData.filter(function(t){return t.value===n.value}).length)});a.forEach(function(t){var n=e.props.chartCondition.chartConditionValue.mapByChartAndDimFrontendId.get(i.frontendId+"-"+t.value);n&&e.props.chartCondition.chartConditionValue.deleteValue(i.frontendId,t.value)})}this.isChartConditionDisplayNum=!1,this.reloadChartData(),i.setConfig(n.__assign(n.__assign({},i.config),{chartConditionCheckedCount:(null===t||void 0===t?void 0:t.length)||0})),this.setState({checkboxSelectedVal:t||[]})},e.prototype.chartConditionsOptions=function(t){var e=this;this.optionData=[],t.forEach(function(t){e.optionData.push({label:t.alias,value:t.frontendId})})},e.prototype.componentDidMount=function(){this._resize(),this._initResizeSensor()},e.prototype.componentWillUnmount=function(){this.unWatchResize&&this.unWatchResize()},e.prototype.render=function(){var t,e,n=this,a=this.props,s=a.chart,l=a.chartCondition,r=this.state.checkboxSelectedVal,h=s.dataConfig.dataModel.chartCondition,g={top:"0px",height:42*h.length+4};this.chartConditionsOptions(h);var C=null,f=r,m=f.length,v=this.optionData.length,_=(null===(t=s.config)||void 0===t?void 0:t.chartConditionDisplayNum)||0;this.isChartConditionDisplayNum&&_&&(s.config.chartConditionDisplayNum<v?(f=s.config.chartConditionDisplayNum?this.optionData.slice(0,s.config.chartConditionDisplayNum):[],m=f.length):(f=s.config.chartConditionDisplayNum?this.optionData:[],m=f.length,this.allChecked=!0));var y={},D=10*(s.height-1)/3;if(null===(e=s.config)||void 0===e?void 0:e.chartConditionShow){g={top:"36px",height:42*m+4,maxHeight:D,overflowY:"scroll",margin:"5px 5px 20px 0"},s.config.chartConditionCustomHeight&&(g.maxHeight=(s.config.chartConditionHeight||100)-42);var b=0,x=this.optionData||[],k=x.reduce(function(t,e){return t+(e.label.toString?e.label.toString():"null")},"")+i.default("全选"),N=k.match(/[\u4e00-\u9fa5]/g);b=N?13*N.length+7.5*(k.length-N.length)+45*(x.length+1):7.5*k.length+45*(x.length+1),b+25>this.contentWidth||s.config.chartConditionForceSelect?C=o.createElement("div",{className:"chart-condition-checkboxes condition-item"},o.createElement("label",null,i.default("可选过滤条件:")),o.createElement("div",{className:"condition-item-content"},o.createElement(c.Select,{className:"condition-multi-select",options:this.optionData,multiple:!0,searchable:!0,checkAll:!0,value:f,defaultCheckAll:!1,popOverContainer:document.body,onChange:this.checkboxSelect}))):(this.optionData.unshift({label:i.default("全选"),value:"sugar_chart_condition_all_select"}),C=o.createElement("div",{className:"chart-condition-checkboxes condition-item"},o.createElement("label",null,i.default("可选过滤条件:")),o.createElement("div",{className:"condition-item-content"},o.createElement(c.Checkboxes,{options:this.optionData,value:f,onChange:function(t){var e=[];t.some(function(t){return"sugar_chart_condition_all_select"===t.value})?n.allChecked?(n.allChecked=!1,e=t.filter(function(t){return"sugar_chart_condition_all_select"!==t.value})):(n.allChecked=!0,e=n.optionData):n.allChecked?(n.allChecked=!1,e=[]):t.length===n.optionData.length-1?(n.allChecked=!0,e=n.optionData):(n.allChecked=!1,e=t),n.checkboxSelect(e)},inline:!0}))));var S=g.height;y={height:S>D?D+42:S+42}}else{var E=s.dataConfig.dataModel.chartCondition;y={height:42*E.length+4},s.hideTitle&&(y.top=1)}return o.createElement("div",{className:"clearfix",id:"chart-condition-"+s.frontendId,style:y},C,h.length?o.createElement("div",{className:"chart-condition-container clearfix",style:g},h.map(function(t,e){var i,a=null,c=null,r=null;return(!(null===(i=s.config)||void 0===i?void 0:i.chartConditionShow)||f.find(function(e){return e.value===t.frontendId}))&&(c=o.createElement("label",{title:t.alias||""},t.alias||"",":"),"int"===t.dataType||"string"===t.dataType?a=t.chartCon&&"single"===t.chartCon.type?o.createElement(d.default,{chart:s,chartCondition:l,selectDim:t,contentWidth:n.contentWidth,onChange:function(t){return n.onChange(t,e)}}):o.createElement(u.default,{chart:s,chartCondition:l,selectDim:t,contentWidth:n.contentWidth,onChange:function(t){return n.onChange(t,e)}}):("date"===t.dataType||"datetime"===t.dataType||"timestamp"===t.dataType)&&(a=o.createElement(p.default,{chart:s,chartCondition:l,selectDim:t,dataType:t.dataType,onChange:function(t){return n.onChange(t,e)}}))),r=c&&a?o.createElement("div",{key:t.frontendId,className:"condition-item"},c,o.createElement("div",{className:"condition-item-content"},a)):null})):null)},e.displayName="ChartConditions",n.__decorate([s.observable,n.__metadata("design:type",Object)],e.prototype,"contentWidth",void 0),e=n.__decorate([l.inject(function(t){return{chartCondition:t.chartCondition}}),l.observer],e)}(o.Component);e.default=g});
;sugar.define("sugar:widgets/charts/chart-item.tsx",function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ChartItemEditable=e.ChartItem=void 0;var o=t("sugar:node_modules/tslib/tslib.js"),a=t("sugar:utils/i18n.ts"),r=t("sugar:node_modules/react/index.js"),i=t("sugar:node_modules/classnames/index.js"),n=t("sugar:widgets/charts/chart-manager.tsx"),s=t("sugar:stores/index.ts"),d=t("sugar:utils/chart-helper.ts"),c=t("sugar:widgets/confirm.tsx"),h=t("sugar:widgets/pop-menu/pop-menu.tsx"),l=t("sugar:node_modules/amis/lib/index.js"),p=t("sugar:node_modules/react-router/lib/index.js"),f=t("sugar:utils/exception.ts"),u=t("sugar:node_modules/xss/lib/index.js"),m=t("sugar:utils/xssOption.ts"),g=t("sugar:widgets/product-type/product-type-modal.tsx"),C=t("sugar:widgets/chart-conditions/index.tsx"),b=t("sugar:widgets/charts/simple-text/font-helper.tsx"),x=t("sugar:sites/sugar-cxd.ts"),y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.fontCustomName="",e}return o.__extends(e,t),e.prototype.componentWillMount=function(){this.setChartActive=this.setChartActive.bind(this),this.deleteChart=this.deleteChart.bind(this),this.copyChart=this.copyChart.bind(this),this.handleInitPopMenu=this.handleInitPopMenu.bind(this),this.bindContextEvent=this.bindContextEvent.bind(this),this.handleExportData=this.handleExportData.bind(this),this.triggerEdit=this.triggerEdit.bind(this),this.checkEdit=this.checkEdit.bind(this);var t=this.props.chart,e=t.config.rotate;t.type.includes("map")||("boolean"==typeof e?t.setConfig(o.__assign(o.__assign({},t.config),{rotate:0,autoRotate:e})):"string"==typeof e&&"image"===t.type&&t.setConfig(o.__assign(o.__assign({},t.config),{rotate:0,imageRotate:e}))),this.setState({nameTemp:this.props.chart.name})},e.prototype.componentWillReceiveProps=function(t){!t.editTitle&&this.props.editTitle&&this.setState({nameTemp:this.props.chart.name})},e.prototype.componentDidCatch=function(t,e){f.captureException(t,e)},e.prototype.setChartActive=function(t,e){void 0===e&&(e=!1);var o=this.props;"editor"===o.mode&&o.setChartActive&&o.setChartActive(o.chart.frontendId),e||t.stopPropagation()},e.prototype.deleteChart=function(t){var e=this;t&&t.stopPropagation();var o=this.props;"editor"===o.mode&&o.deleteChart&&c.confirm(a.default("确定要删除「"+o.chart.name+"」?")).then(function(){o.deleteChart(e.props.index)}).catch(function(){})},e.prototype.copyChart=function(t){t&&t.stopPropagation();var e=this.props;"editor"===e.mode&&e.copyChart&&e.copyChart(this.props.index)},e.prototype.handleInitPopMenu=function(t){var e=this,o=this.props,r=o.chart,i=o.hub,s=o.mode;this.setChartActive(t,!0);var d=h.popMenu.getPopMenuTree();d&&(this.handleExportData(d),"editor"!==this.props.mode||this.props.chart.isExploreChart||(d.unshift({icon:"fa fa-clone",name:a.default("复制图表"),cb:function(){return e.copyChart()}}),d.unshift({icon:"fa fa-trash",name:a.default("删除图表"),cb:function(){return e.deleteChart()}})),"editor"===s&&n.getChartNameByType(r.type)&&d.push({icon:"fa fa-plus",name:a.default("设置为模板"),cb:function(){return i.toggleAddTemplate(!0)}},{icon:"fa fa-codepen",name:a.default("选用模板"),cb:function(){return i.toggleSelectTemplate(!0)}}),h.popMenu.setPopMenuTree(d))},e.prototype.handleExportData=function(t){var e=this;if(!this.props.banDownLoad){var o=n.getChartByType(this.props.chart.type);if(o){o.exportCSV&&t.push({icon:"fa fa-file-text-o",name:a.default("导出数据为CSV"),cb:function(){return o.exportCSV(e.props.hub.data,e.props.chart,e.props.hub,e.props.theme)}}),o.exportExcel&&t.push({icon:"fa fa-file-excel-o",name:a.default("导出数据为Excel"),cb:function(){return o.exportExcel(e.props.hub.data,e.props.chart,e.props.hub,e.props.theme)}});var r=window.sugarConfig,i=r.productType,s=r.deployType;"saas"===s&&/^\/(report|explore|dashboard)\//i.test(window.location.pathname)&&"advan"!==i||t.push({icon:"fa fa-file-excel-o",name:a.default("导出页面数据为Excel"),cb:function(){return e.props.chart.exportPageExcel()}})}}},e.prototype.bindContextEvent=function(t){t?(this.dom=t,this.dom.addEventListener("contextmenu",this.handleInitPopMenu)):(this.dom&&this.dom.removeEventListener("contextmenu",this.handleInitPopMenu),this.dom=t)},e.prototype.triggerEdit=function(){this.props.triggerEdit&&this.props.triggerEdit()},e.prototype.checkEdit=function(){this.props.chart.changeTitle(this.state.nameTemp),this.props.triggerEdit&&this.props.triggerEdit()},e.prototype.render=function(){var t,e=this,o=this.props,s=o.index,c=o.mode,h=o.theme,f=o.chart,y=o.hub,v=o.reportConfig,w=o.banDownLoad,E=o.hideBeforeFirstBlood,_=o.active,T=y.data,k=n.create(f.type,{index:s,mode:c,active:_,theme:h,chart:f,hub:y,banDownLoad:w,hideBeforeFirstBlood:E}),S={background:h.config.chartBC||"#fff",borderWidth:1,borderStyle:"solid",borderColor:"#fff",borderRadius:2,color:"#555"},W={color:"#555",textAlign:f.titleAlign,fontSize:14};"editor"===c&&(W.paddingLeft=60);var N={color:"#108cee"},B={shadowOffset:0,shadowWidth:0,shadowColor:""};v.reportCustomStyle&&(S.background=v.chartBackgroundColor||S.background,S.borderWidth=void 0!==v.borderWidth?v.borderWidth:0,S.borderStyle=v.chartBorderStyle||S.borderStyle,S.borderColor=v.borderColor||S.borderColor,S.borderRadius=void 0!==v.chartBorderRadius?v.chartBorderRadius:S.borderRadius,void 0!==v.chartTitleBgColor&&(W.background=v.chartTitleBgColor),W.fontSize=v.chartTitleFontSize||W.fontSize,N.color=v.chartTitleColor||N.color,W.color=v.chartTitleColor||W.color,B.shadowColor=v.shadowColor||B.shadowColor,B.shadowOffset=void 0!==v.shadowOffset?v.shadowOffset:B.shadowOffset,B.shadowWidth=void 0!==v.shadowWidth?v.shadowWidth:B.shadowWidth,S.boxShadow=B.shadowOffset+"px "+B.shadowOffset+"px "+B.shadowWidth+"px "+B.shadowColor),f.config.chartCustomStyle&&(S.background=f.config.chartBackgroundColor||S.background,S.borderWidth=void 0!==f.config.borderWidth?f.config.borderWidth:S.borderWidth,S.borderStyle=f.config.chartBorderStyle||S.borderStyle,S.borderColor=f.config.borderColor||S.borderColor,S.borderRadius=void 0!==f.config.chartBorderRadius?f.config.chartBorderRadius:S.borderRadius,B.shadowColor=f.config.chartShadowColor||B.shadowColor,B.shadowOffset=void 0!==f.config.shadowOffset?f.config.shadowOffset:B.shadowOffset,B.shadowWidth=void 0!==f.config.shadowWidth?f.config.shadowWidth:B.shadowWidth,S.boxShadow=B.shadowOffset+"px "+B.shadowOffset+"px "+B.shadowWidth+"px "+B.shadowColor),N.color=f.config.chartTitleColor||N.color,W.color=f.config.chartTitleColor||W.color,W.background=f.config.chartTitleBgColor||W.background,W.fontSize=f.config.chartTitleFontSize||W.fontSize,W.borderRadius=S.borderRadius+"px "+S.borderRadius+"px 0 0",void 0!==f.config.selfFontFamily&&this.fontCustomName!==f.config.fontCustomName&&2===f.config.selfFontFamily&&(b.setFontFamily(f.config.fontCustomUrl,f.config.fontCustomType,f.config.fontCustomName),this.fontCustomName=f.config.fontCustomName);var M={};f.hideTitle&&(M.top=1,W.display="none");var P=f.dynamicName||f.name,O=f.link;O&&(O=d.replaceSomeParam(O,f.frontendId,this.props.sugarRoot,null,!0),/^http/.test(O)||/^\//.test(O)||(O="http://"+O),(O.indexOf(location.host)>=0||/^\//.test(O)&&!/^\/\//.test(O))&&!/\/(docs|home)/.test(O)&&"editor"!==c?(/^http/.test(O)&&(O="/"+O.split("/").slice(3).join("/")),P=r.createElement(p.Link,{className:"chart-item__title__link",style:N,to:O},P)):P=r.createElement("a",{className:"chart-item__title__link",style:N,href:O,target:"_blank"},P));var R=!1;if("dataModel"===f.dataType&&f.dataConfig&&f.dataConfig.dataModel&&f.dataConfig.dataModel.chartCondition&&f.dataConfig.dataModel.chartCondition.length){if(null===(t=f.config)||void 0===t?void 0:t.chartConditionShow){var I=10*(f.height-1)/3+42,F=f.config.chartConditionCheckedCount||0,A=f.dataConfig.dataModel.chartCondition.length;F>A&&(F=A);var D=42*(F+1)+4;f.config.chartConditionCustomHeight&&f.config.chartConditionHeight&&(I=f.config.chartConditionHeight),M.top=I>D?(M.top||40)+D:(M.top||40)+I+4}else M.top=(M.top||40)+42*f.dataConfig.dataModel.chartCondition.length+4;R=!0}var j="smart-chart"===f.type&&f.config.smartChart&&f.config.smartChart.type?f.config.smartChart.type:f.type,z=n.getChartForbiddenInfo(j,f),L=r.createElement("div",{className:i("chart-item"),ref:this.bindContextEvent,onClick:this.setChartActive,style:S},"editor"!==c||f.isExploreChart?null:[r.createElement(l.TooltipWrapper,{tooltip:a.default("删除"),placement:"top",key:"delete"},r.createElement("span",{className:"fa fa-times chart-item__button delete",onClick:this.deleteChart})),r.createElement(l.TooltipWrapper,{tooltip:a.default("复制图表"),placement:"top",key:"copy"},r.createElement("span",{className:"fa fa-clone chart-item__button copy",onClick:this.copyChart})),r.createElement(l.TooltipWrapper,{tooltip:a.default("移动图表"),placement:"top",key:"move"},r.createElement("span",{className:"fa fa-arrows-alt chart-item__button move"}))],!f.isExploreChart&&r.createElement("div",{className:"chart-item__title",style:W},this.props.editTitle?r.createElement("input",{type:"text",value:this.state.nameTemp,onChange:function(t){return e.setState({nameTemp:t.target.value})},onMouseDown:function(t){t.stopPropagation()}}):P,this.props.editTitle?r.createElement("i",{className:"chart-item__title--edit fa fa-check",onClick:this.checkEdit,onMouseDown:function(t){t.stopPropagation()}}):r.createElement("i",{className:"chart-item__title--edit fa fa-pencil",onClick:this.triggerEdit}),f.remark?r.createElement(l.TooltipWrapper,{tooltip:u(f.remark,m.xssOption),placement:"bottom"},r.createElement("i",{className:"fa fa-question-circle m-l-sm"})):null),!R||E||z?null:r.createElement(C.default,{chart:f,mode:c}),r.createElement("div",{className:i("chart-item__content",{"explore-chart":f.isExploreChart}),style:M},!z&&"normal"===c||"editor"===c?k:null,z?r.createElement("div",{className:"chart-item__forbidden"},z.info,r.createElement("button",{className:x.classPrefix+"Button "+x.classPrefix+"Button--primary",onClick:function(){return g.showUpdate(z.showUpdateInfo)}},a.default("查看各版本支持情况"))):null,T&&"pending"===T.loadState?r.createElement("div",{className:"loading-container"},r.createElement(l.Spinner,{containerClass:"text-center m-t",overlay:!0})):null));return L},e.displayName="ChartItem",e=o.__decorate([s.inject(function(t){return{sugarRoot:t}}),s.observer],e)}(r.Component);e.ChartItem=y;var v=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o.__extends(e,t),e}(y);e.ChartItemEditable=v});
;sugar.define("sugar:widgets/conditions/condition-item.tsx",function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ConditionItemEditable=e.ConditionItem=void 0;var n=t("sugar:node_modules/tslib/tslib.js"),i=t("sugar:utils/i18n.ts"),o=t("sugar:node_modules/react/index.js"),s=t("sugar:node_modules/classnames/index.js"),d=t("sugar:node_modules/lodash/debounce.js"),a=t("sugar:widgets/conditions/condition-manager.tsx"),r=t("sugar:stores/index.ts"),l=t("sugar:widgets/dnd-sort.tsx"),c=t("sugar:widgets/confirm.tsx"),u=t("sugar:widgets/pop-menu/pop-menu.tsx"),h=t("sugar:widgets/editor/toolbar.tsx"),p=t("sugar:widgets/product-type/product-type-modal.tsx"),m=t("sugar:sites/sugar-cxd.ts"),f=t("sugar:utils/condition-helper.ts"),g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.chartFrontendId="",e}return n.__extends(e,t),e.prototype.componentWillMount=function(){this.setConditionActive=this.setConditionActive.bind(this),this.deleteCondition=this.deleteCondition.bind(this),this.handleInitPopMenu=this.handleInitPopMenu.bind(this),this.bindContextEvent=this.bindContextEvent.bind(this),this.handleChange=this.handleChange.bind(this),this.chartFrontendId=this.props.condition.frontendId,this.props.refreshAllChartsData&&(this.debounceRefreshData=d(this.props.refreshAllChartsData,500))},e.prototype.setConditionActive=function(t){var e=this.props;"editor"===e.mode&&e.setConditionActive&&(e.setConditionActive(e.condition.frontendId),t&&t.stopPropagation())},e.prototype.deleteCondition=function(t){var e=this;t&&t.stopPropagation();var n=this.props;"editor"===n.mode&&n.deleteCondition&&c.confirm(i.default("确定要删除「"+n.condition.label+"」?")).then(function(){n.deleteCondition(e.props.index)}).catch(function(){})},e.prototype.handleInitPopMenu=function(){var t=this;this.setConditionActive();var e=u.popMenu.getPopMenuTree();e&&"editor"===this.props.mode&&(e.push({icon:"fa fa-trash",name:i.default("删除过滤条件"),cb:function(){return t.deleteCondition()}}),u.popMenu.setPopMenuTree(e))},e.prototype.bindContextEvent=function(t){t?(this.dom=t,this.dom.addEventListener("contextmenu",this.handleInitPopMenu)):(this.dom&&this.dom.removeEventListener("contextmenu",this.handleInitPopMenu),this.dom=t)},e.prototype.handleChange=function(t,e){var n=this.props,i=n.condition,o=n.mode;i.changeConditionValue(t,o),e?this.debounceRefreshData&&this.debounceRefreshData():null},e.prototype.componentWillUnmount=function(){f.deleteRule(this.chartFrontendId)},e.prototype.render=function(){var t=this.props,e=t.mode,n=t.condition,d=t.conditionConfig,r=t.hub,l=t.isDragging,c=t.disabled,u=t.container,f=d.conditionItemTitleColor,g=d.labelWide,C=a.create(n.type,{mode:e,disabled:c,condition:n,hub:r,container:u,conditionConfig:d,handleChange:this.handleChange}),b=2;g&&(b+=1),n.halfWidth&&(b=2*b);var v={paddingLeft:"editor"===e?10:0};return o.createElement("div",{className:s("condition-item condition-item__"+n.type,{isDragging:l}),onClick:this.setConditionActive,ref:this.bindContextEvent},"editor"===e?o.createElement("span",{className:"fa fa-times condition-item__delete",onClick:this.deleteCondition}):null,o.createElement("div",{className:"row",style:v},o.createElement("label",{className:"col-xs-"+b+" condition-label clearfix",style:{color:f||"#5e5d5e"}},o.createElement("span",{className:"text"},n.label),n.required?o.createElement("span",{className:"required"},"*"):null),o.createElement("div",{className:"col-xs-"+(12-b)+" row condition-body"},h.canUseConditions(n.type)?C:o.createElement("div",{className:"chart-item__forbidden"},i.default("当前版本不支持此类过滤条件"),o.createElement("button",{className:m.classPrefix+"Button "+m.classPrefix+"Button--primary",onClick:function(){return p.showUpdate("product-type-condition")}},i.default("查看各版本支持情况"))))))},e.displayName="ConditionItem",e=n.__decorate([r.observer],e)}(o.Component);e.ConditionItem=g;var C=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.__extends(e,t),e=n.__decorate([l.default("condition-item")],e)}(g);e.ConditionItemEditable=C});
;sugar.define("sugar:widgets/conditions/index.tsx",function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=t("sugar:node_modules/tslib/tslib.js"),i=t("sugar:utils/i18n.ts"),n=t("sugar:node_modules/react/index.js"),d=t("sugar:node_modules/classnames/index.js"),a=t("sugar:node_modules/amis/lib/index.js"),s=t("sugar:stores/index.ts"),r=t("sugar:widgets/conditions/condition-item.tsx"),l=t("sugar:widgets/conditions/condition-list-container/condition-list-container.tsx"),c=t("sugar:widgets/confirm.tsx"),g=t("sugar:utils/condition-helper.ts"),u=t("sugar:widgets/conditions/select/select.tsx"),p=t("sugar:widgets/conditions/multi-select/multi-select.tsx"),f=t("sugar:widgets/conditions/date-range/date-range.tsx"),h=t("sugar:widgets/conditions/date/date.tsx"),m=t("sugar:widgets/conditions/date-time/date-time.tsx"),v=t("sugar:widgets/conditions/date-time-range/date-time-range.tsx"),C=t("sugar:sites/sugar-cxd.ts"),y=(C.appTheme.classnames,function(t){function e(e){var i=t.call(this,e)||this;i.recordHeight=30,i.setDefaultColor=function(){var t=i.props,e=t.conditionStore,n=t.reportHash,d=e.list.data.filter(function(t){return"container"===t.type});if(d.length){var a=o.__assign(o.__assign({},d[0]),{hash:n}),s={};i.props.conditionStore.list.data.map(function(t){s[t.type]||(s[t.type]=t)});var r={date:h.setDateDefaultColor,dateRange:f.setDateRangeDefaultColor,select:u.setSelectDefaultColor,dateTime:m.setDateTimeDefaultColor,dateTimeRange:v.setDateTimeRangeDefaultColor,multiSelect:p.setMultiSelectDefaultColor};Object.keys(r).forEach(function(t){s[t]?g.insertRule("."+t+"-"+n,r[t](a,!1)):g.deleteRule("."+t+"-"+n)})}},i.setConditionActive=i.setConditionActive.bind(i),i.deleteCondition=i.deleteCondition.bind(i),i.deleteConditionList=i.deleteConditionList.bind(i),i.onMoving=i.onMoving.bind(i),i.stopPropagation=i.stopPropagation.bind(i),i.toggleBody=i.toggleBody.bind(i),i.handleSearch=i.handleSearch.bind(i);var n=e.condition,d=e.conditionStore,a=e.mode;if(n){var s=n.height,r=n.config.conditionPanelMin;i.state={min:r},i.recordHeight=s,d.list.setHeightLayout(r&&"editor"!==a?5:i.recordHeight)}return i}return o.__extends(e,t),e.prototype.componentWillReceiveProps=function(){},e.prototype.stopPropagation=function(t){t&&t.stopPropagation()},e.prototype.setConditionActive=function(t){var e=this.props;"editor"!==e.mode||!e.editor||"condition"===e.editor.target.type&&e.editor.target.frontendId===t||e.editor.setActiveTarget("condition",t)},e.prototype.deleteCondition=function(t){var e=this.props;"editor"===e.mode&&e.editor&&e.editor.deleteCondition(t)},e.prototype.deleteConditionList=function(t){t&&t.stopPropagation();var e=this.props;"editor"===e.mode&&e.deleteConditionList&&c.confirm(i.default("确定要删除「"+e.condition.label+"」?")).then(function(){e.deleteConditionList()}).catch(function(){})},e.prototype.onMoving=function(t,e){this.props.conditionStore.list.move(t,e)},e.prototype.onDroped=function(){},e.prototype.toggleBody=function(){var t=this.state.min;this.setState({min:!t}),this.props.conditionStore.list.setHeightLayout(t?this.recordHeight:5)},e.prototype.handleSearch=function(){this.props.refreshAllChartsData()},e.prototype.render=function(){var t=this,e=this.props,s=e.conditionStore,c=e.mode,g=e.editor,u=e.refreshAllChartsData,p=e.setActive,f=e.disabled,h=e.reportConfig,m=e.reportHash,v=e.theme,C=this.state.min,y=r.ConditionItem;if("editor"===c&&(y=r.ConditionItemEditable),s.list.data.length<1)return null;var b=s.list.data.filter(function(t){return"container"===t.type});if(!b.length)return null;var x=b[0].config.labelWide,_=o.__assign(o.__assign({},b[0]),{hash:m});return this.setDefaultColor(),n.createElement(l.default,{setActive:p,deleteConditionList:this.deleteConditionList,mode:c,theme:v,condition:b[0],hub:s.getConditionHub(b[0].frontendId),disabled:f,toggleBody:this.toggleBody,min:C,handleChange:function(){},reportConfig:h,conditionConfig:_},n.createElement("div",{className:d("condition-container clearfix",{hide:"editor"!==c&&C,"condition-container--hideTitle":b[0].config.hideTitle})},s.list.data.map(function(e,i){if("container"===e.type)return null;var a={};"editor"===c&&(a={setConditionActive:t.setConditionActive,deleteCondition:t.deleteCondition,id:e.frontendId,onMoving:t.onMoving,onDroped:t.onDroped,canDrag:!!g&&"condition"===g.target.type&&e.frontendId===g.target.frontendId});var r=s.getConditionHub(e.frontendId);return n.createElement("div",{key:e.frontendId,className:d("no-paddinglr col-xs-"+(e.halfWidth?"6":"12"),{halfWidth:e.halfWidth,active:g&&"condition"===g.target.type&&(e.frontendId===g.target.frontendId||r.configData.hoverStatus)}),onMouseDown:function(t){t&&t.stopPropagation()},onTouchStart:function(t){t&&t.stopPropagation()}},n.createElement(y,o.__assign({mode:c,condition:e,hub:r,index:i,conditionConfig:_,disabled:f,container:t.props.container,refreshAllChartsData:u},a)))}),n.createElement("div",{className:"no-paddinglr col-xs-12 m-t-md m-b"},n.createElement("div",{className:"query-btn"},n.createElement("div",{className:"row"},n.createElement("label",{className:"col-xs-"+(x?"3":"2")+" "}),n.createElement("div",{className:"col-xs-"+(12-x?3:2)+" row condition-body"},n.createElement("div",{className:"col-xs-10"},n.createElement(a.Button,{level:"primary",onClick:this.handleSearch,disabled:f},i.default("查询")))))))))},e.displayName="ConditionList",e=o.__decorate([s.observer,o.__metadata("design:paramtypes",[Object])],e)}(n.Component));e.default=y});
;sugar.define("sugar:widgets/charts/_hoc/resizable/resizable.tsx",function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=t("sugar:node_modules/tslib/tslib.js"),i=t("sugar:node_modules/react/index.js"),s=t("sugar:node_modules/re-resizable/lib/index.es5.js"),n=t("sugar:node_modules/classnames/index.js"),h=t("sugar:node_modules/lodash/get.js"),r={top:"resize-handle handle-top",topLeft:"resize-handle handle-top-left",left:"resize-handle handle-left",bottomLeft:"resize-handle handle-bottom-left",bottom:"resize-handle handle-bottom",bottomRight:"resize-handle handle-bottom-right",right:"resize-handle handle-right",topRight:"resize-handle handle-top-right"};e.default=function(t){var e;return e=function(e){function a(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={isResizing:!1,hovered:!1,showResizable:!0,forceLockAspectRatio:!1},t}return o.__extends(a,e),a.prototype.componentWillMount=function(){this.onResize=this.onResize.bind(this),this.onResizeStart=this.onResizeStart.bind(this),this.onResizeStop=this.onResizeStop.bind(this),this.onMouseEnter=this.onMouseEnter.bind(this),this.onMouseLeave=this.onMouseLeave.bind(this),this.onKeyDown=this.onKeyDown.bind(this),this.onKeyUp=this.onKeyUp.bind(this);var t=this.props;this.oldCol=this.getProps(t,"width"),this.oldHeight=this.getProps(t,"height"),this.doingCol=this.oldCol,this.doingHeight=this.oldHeight,this.toggleShowResizable=this.toggleShowResizable.bind(this),document.addEventListener("keydown",this.onKeyDown),document.addEventListener("keyup",this.onKeyUp)},a.prototype.getProps=function(t,e,o){return t.chart?h(t.chart,e):h(t.condition,o||e)},a.prototype.componentWillUnmount=function(){window.removeEventListener("keydown",this.onKeyDown),window.removeEventListener("keyup",this.onKeyUp)},a.prototype.componentWillReceiveProps=function(t){this.state.isResizing||(this.oldCol=t.width,this.oldHeight=t.height,this.doingCol=this.oldCol,this.doingHeight=this.oldHeight)},a.prototype.onResizeStart=function(t){t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),this.setState({isResizing:!0}),this.props.setDragOrMoving&&this.props.setDragOrMoving(!1)},a.prototype.onResize=function(t,e,o,i){var s=!!this.getProps(this.props,"isDashChart","isDashCondition");t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault();var n=this.oldCol,h=this.oldHeight;if(s){var r=this.props.scaleX&&this.props.scaleX>0?this.props.scaleX:1,a=this.props.scaleY&&this.props.scaleY>0?this.props.scaleY:1;n+=Math.floor(i.width/r),h+=Math.floor(i.height/a),n=Math.max(0,n),h=Math.max(0,h)}else{var p=(document.getElementById("editor-body").clientWidth-20)/12,l=Math.floor(i.width/p);i.width>0?(l=Math.ceil(i.width/p),n=Math.max(1,Math.min(12,n+l))):i.width<0&&(n=Math.max(1,n+l+1)),h+=i.height}if(this.doingCol!==n||this.doingHeight!==h){var d={};this.doingCol!==n&&(d.width=n),this.doingHeight!==h&&(d.height=h),this.doingCol=n,this.doingHeight=h;var g=this.getProps(this.props,"update");g({},d)}},a.prototype.onResizeStop=function(t){var e=this;t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault();var o=this.props;this.oldCol=this.getProps(o,"width"),this.oldHeight=this.getProps(o,"height");var i=this.getProps(o,"frontendId");this.setState({isResizing:!1}),setTimeout(function(){o.chart?e.props.setChartActive&&e.props.setChartActive(i):e.props.setConditionActive&&e.props.setConditionActive(i),e.props.setDragOrMoving&&e.props.setDragOrMoving(!0)},10)},a.prototype.stopPropagation=function(t){return t.stopPropagation&&t.stopPropagation(),!1},a.prototype.onMouseEnter=function(){this.setState({hovered:!0})},a.prototype.onMouseLeave=function(){this.setState({hovered:!1})},a.prototype.onKeyDown=function(t){t&&t.shiftKey&&!this.state.forceLockAspectRatio&&this.setState({forceLockAspectRatio:!0})},a.prototype.onKeyUp=function(t){t&&this.state.forceLockAspectRatio&&this.setState({forceLockAspectRatio:!1})},a.prototype.toggleShowResizable=function(t){this.setState({showResizable:t})},a.prototype.render=function(){var e=this.state,h=e.isResizing,a=e.hovered,p=e.showResizable,l=e.forceLockAspectRatio,d=this.props,g=(d.height,d.width,o.__rest(d,["height","width"])),c=!!this.getProps(this.props,"isDashChart","isDashCondition"),u={top:!c&&p,right:!0&&p,bottom:!0&&p,left:!c&&p,topRight:!c&&p,bottomRight:!0&&p,bottomLeft:!c&&p,topLeft:!c&&p},v=this.props.grid?[this.props.grid,this.props.grid]:[1,10];return i.createElement("div",{className:"resize-wrapper",onMouseDown:this.stopPropagation,onClick:this.stopPropagation},i.createElement("div",{key:"resize",className:"resize-cover",style:{opacity:h?c?0:.5:1,zIndex:h?2:0,userSelect:h?"none":"auto"},onMouseDown:this.stopPropagation,onClick:this.stopPropagation},i.createElement("div",{className:"resize-container"},i.createElement(s,{size:{height:"100%",width:"100%"},grid:v,onResize:this.onResize,onResizeStop:this.onResizeStop,onResizeStart:this.onResizeStart,minHeight:c?20:30,handleClasses:r,handleWrapperClass:"resize-handle-wrapper",enable:u,bounds:c?void 0:document.getElementById("editor-body"),lockAspectRatio:this.getProps(this.props,"config.fixRatio")||l,onClick:this.stopPropagation},i.createElement("div",{className:n("resize",{hovered:a}),style:{border:p?void 0:"none"}})))),i.createElement("div",{style:{userSelect:h?"none":"auto"},className:"resize-chart-container",key:"chart",onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave},i.createElement(t,o.__assign({},g,{isResizing:h,toggleShowResizable:this.toggleShowResizable}))))},a}(i.Component),e.displayName="ResiableHOC",e}});
;sugar.define("sugar:widgets/dnd-move.tsx",function(e,r){"use strict";function n(e,n){return void 0===n&&(n=!0),function(n){var t=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return u.__extends(r,e),r.prototype.render=function(){var e=this.props,r=e.connectDropTarget,t=(e.moveItem,u.__rest(e,["connectDropTarget","moveItem"]));return g.createElement(n,u.__assign({},t,{ref:function(e){e&&r(i.findDOMNode(e))}}))},r}(g.Component);return s.DropTarget(e||function(e){return e.dndType},r.DropTargetSpec,function(e){return{connectDropTarget:e.dropTarget()}})(t)}}function t(e,n){return void 0===n&&(n=!0),function(t){var o=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return u.__extends(r,e),r.prototype.componentDidMount=function(){var e=this,r=new Image;r.src="/static/img-templet/move_icon.png",r.onload=function(){return e.props.connectDragPreview(r)}},r.prototype.render=function(){var e=this.props,r=e.connectDragSource,n=(e.connectDragPreview,e.draggable),o=(e.dndDefaultDragPreview,u.__rest(e,["connectDragSource","connectDragPreview","draggable","dndDefaultDragPreview"]));return this.props.isDragging,g.createElement(t,u.__assign({},o,{ref:function(e){e&&n&&r(i.findDOMNode(e))}}))},r.displayName="DnDMoveHOC",r.defaultProps={draggable:n},r}(g.Component);return s.DragSource(e||function(e){return e.dndType},r.DragSourceSpec,function(e,r){return{connectDragSource:e.dragSource(),connectDragPreview:e.dragPreview(),isDragging:r.isDragging()}})(o)}}Object.defineProperty(r,"__esModule",{value:!0}),r.DnDMoveSource=r.DragSourceSpec=r.DnDMoveTarget=r.DropTargetSpec=void 0;var o,a,c,u=e("sugar:node_modules/tslib/tslib.js"),g=e("sugar:node_modules/react/index.js"),i=e("sugar:node_modules/react-dom/index.js"),s=e("sugar:node_modules/react-dnd/lib/index.js");r.DropTargetSpec={hover:function(e,r){var n=r.getItem(),t=r.getDifferenceFromInitialOffset(),u=e.scaleX?e.scaleX:1,g=e.scaleY?e.scaleY:1,i=o.map(function(e){return Math.round(e+t.x/u)}),s=a.map(function(e){return Math.round(e+t.y/g)});e.moveItem(n.draggableItems,c,i,s)},drop:function(e,r){var n=r.getItem(),t=r.getDifferenceFromInitialOffset(),c=e.scaleX?e.scaleX:1,u=e.scaleY?e.scaleY:1,g=o.map(function(e){return Math.round(e+t.x/c)}),i=a.map(function(e){return Math.round(e+t.y/u)});e.dropItem(n.draggableItems,g,i)}},r.DnDMoveTarget=n,r.DragSourceSpec={beginDrag:function(e){o=[],a=[],c=[];for(var r=0,n=e.draggableItems;r<n.length;r++){var t=n[r];o.push(t.left),a.push(t.top),c.push(document.getElementById("chart_"+t.frontendId))}return{draggableItems:e.draggableItems}},canDrag:function(e){return e.draggableItems&&e.draggableItems.length?!0:!1}},r.DnDMoveSource=t});
;sugar.define("sugar:widgets/dashboard-charts/chart-item.tsx",function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ChartItemEditable=e.ChartItem=void 0;var o=t("sugar:node_modules/tslib/tslib.js"),a=t("sugar:utils/i18n.ts"),i=t("sugar:node_modules/react/index.js"),r=t("sugar:node_modules/classnames/index.js"),n=t("sugar:node_modules/lodash/cloneDeep.js"),s=t("sugar:widgets/charts/chart-manager.tsx"),h=t("sugar:stores/index.ts"),d=t("sugar:node_modules/mobx/lib/mobx.js"),l=t("sugar:widgets/charts/_hoc/resizable/resizable.tsx"),c=t("sugar:widgets/confirm.tsx"),p=t("sugar:widgets/pop-menu/pop-menu.tsx"),u=t("sugar:node_modules/amis/lib/index.js"),f=t("sugar:widgets/dnd-move.tsx"),m=t("sugar:node_modules/lodash/debounce.js"),g=t("sugar:utils/exception.ts"),b=t("sugar:widgets/dashboard-ctrl-panel/chart-ctrl.tsx"),y=t("sugar:widgets/product-type/product-type-modal.tsx"),C=t("sugar:utils/img-source-map.ts"),v=t("sugar:widgets/charts/simple-text/font-helper.tsx"),D=t("sugar:sites/sugar-cxd.ts"),_=15,R=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.fontCustomName="",e._refreshTimer={},e._UDLRKeyboardDoneTimer=null,e._isUDLRKeyboardDoing=!1,e._topPositionDelta=0,e._leftPositionDelta=0,e._destory=!1,e.isRotating=!1,e.startAngle=0,e.chartCenterX=0,e.chartCenterY=0,e}return o.__extends(e,t),e.prototype.componentWillMount=function(){this.setChartActive=this.setChartActive.bind(this),this.deleteChart=this.deleteChart.bind(this),this._deleteChart=this._deleteChart.bind(this),this.copyChart=this.copyChart.bind(this),this.closeAlert=this.closeAlert.bind(this),this.onMouseOut=this.onMouseOut.bind(this),this.handleInitPopMenu=this.handleInitPopMenu.bind(this),this.refreshChartData=this.refreshChartData.bind(this),this.onKeyUp=this.onKeyUp.bind(this),this.upDownLeftRightKeyboardEvent=this.upDownLeftRightKeyboardEvent.bind(this),this.setUDLRKeyboardDoing=this.setUDLRKeyboardDoing.bind(this),this.setUDLRKeyboardDone=this.setUDLRKeyboardDone.bind(this),this.updateChartPosition=m(this.updateChartPosition.bind(this),200),this.bindContextEvent=this.bindContextEvent.bind(this),this.handleMouseDown=this.handleMouseDown.bind(this),this.handleMouseUp=this.handleMouseUp.bind(this),this.handelRotateStart=this.handelRotateStart.bind(this),this.onRotate=this.onRotate.bind(this),this.onRotateStop=this.onRotateStop.bind(this),this.angle=this.angle.bind(this),this.bindChartContentDom=this.bindChartContentDom.bind(this);var t=this.props.chart,e=t.config.rotate;t.type.includes("map")||("boolean"==typeof e?t.setConfig(o.__assign(o.__assign({},t.config),{rotate:0,autoRotate:e})):"string"==typeof e&&"image"===t.type&&t.setConfig(o.__assign(o.__assign({},t.config),{rotate:0,imageRotate:e}))),this.setState({closeAlertTime:null})},e.prototype.componentDidMount=function(){var t=this,e=this.props,o=e.mode,a=e.chart;if("normal"===o&&a.config.subChartConfig){var i=a.config.subChartConfig,r=function(e){if(i[e].dataConfig.needAutoRefresh&&i[e].dataConfig.autoRefreshInterval>0){var o=parseInt(i[e].dataConfig.autoRefreshInterval,10);o=o&&o>=5?o:5,o&&(n._refreshTimer[e]=setTimeout(function(){return t.refreshSubChartData(e)},1e3*o))}},n=this;for(var s in i)r(s)}else if("normal"===o&&a.dataConfig.needAutoRefresh&&a.dataConfig.autoRefreshInterval>0){var h=parseInt(a.dataConfig.autoRefreshInterval,10);h=h&&h>=5?h:5,h&&(this._refreshTimer.chart=setTimeout(this.refreshChartData,1e3*h))}},e.prototype.componentDidCatch=function(t,e){g.captureException(t,e)},e.prototype.componentWillUnmount=function(){for(var t in this._refreshTimer)clearInterval(this._refreshTimer[t])},e.prototype.componentDidUpdate=function(t){t.isResizing!==this.props.isResizing&&(this.props.isResizing&&this.props.removeCalEvents&&this.props.removeCalEvents(),!this.props.isResizing&&this.props.addCalEvents&&this.props.addCalEvents())},e.prototype.refreshChartData=function(){var t=this.props,e=t.mode,o=t.chart,a=t.hub;("done"===a.data.loadState||"error"===a.data.loadState)&&(o.loadData(e,!1,[],!0,!!o.dataConfig.showNullData),o.dataConfig.autoDestory&&(this._destory=!0,this._destory=!1));var i=parseInt(o.dataConfig.autoRefreshInterval,10);i=i&&i>=b.autoRefreshMinInterval?i:b.autoRefreshMinInterval,this._refreshTimer.chart=setTimeout(this.refreshChartData,1e3*i)},e.prototype.refreshSubChartData=function(t){var e=this,o=this.props,a=o.mode,i=o.chart,r=o.hub,n=r.data.other.get(t),s=i.config.subChartConfig,h=s[t];if(!n||"done"!==n.loadState&&"error"!==n.loadState||(i.loadOtherData(a,t,void 0,!0,!1,!!h.dataConfig.showNullData),h.dataConfig.autoDestory&&(this._destory=!0,this._destory=!1)),s&&h){var d=parseInt(h.dataConfig.autoRefreshInterval,10);d=d&&d>=b.autoRefreshMinInterval?d:b.autoRefreshMinInterval,this._refreshTimer[t]=setTimeout(function(){return e.refreshSubChartData(t)},1e3*d)}},e.prototype.setChartActive=function(t,e){void 0===e&&(e=!1);var o=this.props;"editor"===o.mode&&o.setChartActive&&o.hoverChart&&o.setChartActive(o.hoverChart,e),e||t.stopPropagation()},e.prototype._deleteChart=function(){var t=this,e=this.props;e.deleteChart&&c.confirm(a.default("确定要删除「"+e.chart.name+"」?")).then(function(){e.deleteChart(t.props.index)}).catch(function(){})},e.prototype.deleteChart=function(t){t.stopPropagation();var e=this.props;"editor"===e.mode&&this._deleteChart()},e.prototype.copyChart=function(t){t.stopPropagation();var e=this.props;"editor"===e.mode&&e.copyChart&&e.copyChart(this.props.index)},e.prototype.closeAlert=function(){this.setState({closeAlertTime:new Date})},e.prototype.onMouseOut=function(){var t=this.props;"editor"===t.mode&&t.setHoverChart&&!t.chart.config.isLock&&t.setHoverChart("")},e.prototype.onKeyUp=function(t){var e=this.props;"editor"===e.mode&&(8===t.keyCode&&t.target&&"INPUT"!==t.target.tagName&&"TEXTAREA"!==t.target.tagName&&"fr-element fr-view"!==t.target.className&&this._deleteChart(),~[37,38,39,40].indexOf(t.keyCode)&&this.upDownLeftRightKeyboardEvent(t.keyCode))},e.prototype.upDownLeftRightKeyboardEvent=function(t){var e=this.props.grid||1;this.setUDLRKeyboardDoing(),37===t?this._leftPositionDelta-=e:38===t?this._topPositionDelta-=e:39===t?this._leftPositionDelta+=e:40===t&&(this._topPositionDelta+=e),this.updateChartPosition()},e.prototype.updateChartPosition=function(){for(var t=0,e=this.props.draggableItems;t<e.length;t++){var o=e[t],a={};this._topPositionDelta&&(a.top=o.top+this._topPositionDelta),this._leftPositionDelta&&(a.left=o.left+this._leftPositionDelta),o.update&&o.update({},a)}this._topPositionDelta=0,this._leftPositionDelta=0},e.prototype.setUDLRKeyboardDoing=function(){this._isUDLRKeyboardDoing||(this._isUDLRKeyboardDoing=!0,this.props.toggleShowResizable&&this.props.toggleShowResizable(!1)),this._UDLRKeyboardDoneTimer&&clearTimeout(this._UDLRKeyboardDoneTimer),this._UDLRKeyboardDoneTimer=setTimeout(this.setUDLRKeyboardDone,1e3)},e.prototype.setUDLRKeyboardDone=function(){this._isUDLRKeyboardDoing=!1,this.props.toggleShowResizable&&this.props.toggleShowResizable(!0)},e.prototype.handleInitPopMenu=function(t){var e=this.props,o=e.chart,i=e.hub,r=e.mode,n=e.theme;this.setChartActive(t,!0);var h=p.popMenu.getPopMenuTree(),d=s.getChartByType(o.type);if(h&&d&&!this.props.banDownLoad&&"scene"!==o.type){d.exportCSV&&!h.some(function(t){return"导出数据为CSV"===t.name})&&h.push({icon:"fa fa-file-text-o",name:a.default("导出数据为CSV"),cb:function(){return d.exportCSV(i.data,o,i,n)}}),d.exportExcel&&!h.some(function(t){return"导出数据为Excel"===t.name})&&h.push({icon:"fa fa-file-excel-o",name:a.default("导出数据为Excel"),cb:function(){return d.exportExcel(i.data,o,i,n)}});var l=window.sugarConfig,c=l.productType,u=l.deployType;"saas"===u&&/^\/(report|explore|dashboard)\//i.test(window.location.pathname)&&"advan"!==c||h.some(function(t){return"导出页面数据为Excel"===t.name})||h.push({icon:"fa fa-file-excel-o",name:a.default("导出页面数据为Excel"),cb:function(){return o.exportPageExcel()}}),"editor"===r&&s.getChartNameByType(o.type)&&h.push({icon:"fa fa-plus",name:a.default("设置为模板"),cb:function(){return i.toggleAddTemplate(!0)}},{icon:"fa fa-codepen",name:a.default("选用模板"),cb:function(){return i.toggleSelectTemplate(!0)}}),p.popMenu.setPopMenuTree(h)}},e.prototype.bindContextEvent=function(t){t?(this.dom=t,this.dom.addEventListener("contextmenu",this.handleInitPopMenu)):(this.dom&&this.dom.removeEventListener("contextmenu",this.handleInitPopMenu),this.dom=t)},e.prototype.bindChartContentDom=function(t){t&&(this.chartContentDom=t)},e.prototype.handleMouseDown=function(t){this.mouseX=t.clientX,this.mouseY=t.clientY},e.prototype.handleMouseUp=function(t){if(this.mouseY===t.clientY&&this.mouseX===t.clientX){var e=this.props;"editor"===e.mode&&e.setChartActive&&e.hoverChart&&!e.chart.config.isLock&&e.setChartActive(e.hoverChart,!1,t)}this.mouseX=null,this.mouseY=null},e.prototype.angle=function(t,e){return Math.floor(Math.atan2(e-this.chartCenterY,t-this.chartCenterX)*(180/Math.PI))},e.prototype.handelRotateStart=function(t){if(this.dom){this.isRotating=!0;var e=this.dom.getBoundingClientRect();this.chartCenterX=e.left+e.width/2,this.chartCenterY=e.top+e.height/2,this.startAngle=this.angle(t.clientX,t.clientY),t.preventDefault(),document.addEventListener("mousemove",this.onRotate),document.addEventListener("mouseup",this.onRotateStop)}},e.prototype.onRotate=function(t){if(this.isRotating&&this.chartContentDom){var e=this.props.chart,o=this.angle(t.clientX,t.clientY)-this.startAngle;e.config.rotate&&(o+=e.config.rotate),o=0>o?360+o:o,o>360&&(o%=360),this.chartContentDom.style.transform="rotate("+o+"deg)",this.currentDegree=o}},e.prototype.onRotateStop=function(){this.isRotating=!1;var t=this.currentDegree,e=this.props.chart,o=n(e);o.config||(o.config={}),o.config.rotate=t,e.update(o,{config:{rotate:t}}),document.removeEventListener("mousemove",this.onRotate),document.removeEventListener("mouseup",this.onRotateStop)},e.prototype.render=function(){var t=this.props,e=t.index,o=t.mode,n=t.theme,h=t.chart,d=t.hub,l=t.isResizing,c=t.scaleX,p=t.scaleY,f=t.isDragging,m=t.banDownLoad,g=t.active,b=d.data;if(this._destory)return null;var R=s.create(h.type,{index:e,mode:o,active:g,theme:n,chart:h,scaleX:c,scaleY:p,hub:d,banDownLoad:m}),x=s.getChartByType(h.type),w=h.height<=30||h.width<=80||h.height<=40&&h.width<=100?!0:!1,E={background:n.config.chartBC||"transparent",borderWidth:0,borderStyle:"solid",borderColor:"transparent",borderRadius:0},S={shadowOffset:0,shadowWidth:0,shadowColor:""};h.config.chartCustomStyle&&(E.background=h.config.chartBackgroundColor||E.background,E.borderWidth=void 0!==h.config.borderWidth?h.config.borderWidth:E.borderWidth,E.borderStyle=h.config.chartBorderStyle||E.borderStyle,E.borderColor=h.config.borderColor||E.borderColor,E.borderRadius=void 0!==h.config.chartBorderRadius?h.config.chartBorderRadius:E.borderRadius,S.shadowColor=h.config.chartShadowColor||S.shadowColor,S.shadowOffset=void 0!==h.config.shadowOffset?h.config.shadowOffset:S.shadowOffset,S.shadowWidth=void 0!==h.config.shadowWidth?h.config.shadowWidth:S.shadowWidth,E.boxShadow=S.shadowOffset+"px "+S.shadowOffset+"px "+S.shadowWidth+"px "+S.shadowColor);var T;if(h.config.rotate&&360!=h.config.rotate&&(T="rotate("+h.config.rotate+"deg)"),2===h.config.outBorderType){var I=C.borders[h.config.outBorderImageType];if(I){var L=I.left,M=I.right,P=I.top,U=I.bottom;E.borderImageSource="url("+I.url+")",E.borderImageSlice=P+" "+M+" "+U+" "+L+" fill",E.borderWidth=P+"px "+(M+"px")+" "+(U+"px")+" "+(L+"px"),E.borderStyle="solid"}}if(3===h.config.outBorderType){var N=h.config,K=N.outBorderLeft,A=N.outBorderRight,B=N.outBorderTop,W=N.outBorderBottom,k=N.customOutBorderImg;k&&(E.borderImageSource="url("+k+")",E.borderImageSlice=B+" "+A+" "+W+" "+K+" fill",E.borderWidth=B+"px "+(A+"px")+" "+(W+"px")+" "+(K+"px"),E.borderStyle="solid")}var O=void 0==h.config.opacity?1:h.config.opacity,z="smart-chart"===h.type&&h.config.smartChart&&h.config.smartChart.type?h.config.smartChart.type:h.type,X=s.getChartForbiddenInfo(z,h),Y="";h.config.enterAnimate&&(d.data.hasFirstLoadData||x.loadDataPremiseField&&!h.config[x.loadDataPremiseField])&&!this.props.isHidden_Tab&&(Y=h.config.enterAnimate);var F={borderWidth:E.borderWidth,borderStyle:E.borderStyle,borderColor:"transparent",transform:T,opacity:O};void 0!==h.config.selfFontFamily&&this.fontCustomName!==h.config.fontCustomName&&2===h.config.selfFontFamily&&(v.setFontFamily(h.config.fontCustomUrl,h.config.fontCustomType,h.config.fontCustomName),this.fontCustomName=h.config.fontCustomName);var j=i.createElement("div",{className:r("chart-item","animate__animated",Y,{isResizing:l,isDragging:f,isHidden:h.config.isHidden}),onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,ref:this.bindContextEvent,onMouseOut:this.onMouseOut,tabIndex:"editor"===o?-1:void 0,onKeyUp:this.onKeyUp},"editor"!==o||this._isUDLRKeyboardDoing||w?null:[i.createElement(u.TooltipWrapper,{tooltip:a.default("删除"),placement:"top",key:"delete"},i.createElement("span",{className:"fa fa-times chart-item__button delete",onClick:this.deleteChart})),i.createElement(u.TooltipWrapper,{tooltip:a.default("复制图表"),placement:"top",key:"copy"},i.createElement("span",{className:"fa fa-clone chart-item__button copy",onClick:this.copyChart})),i.createElement(u.TooltipWrapper,{tooltip:a.default("移动图表"),placement:"top",key:"move"},i.createElement("span",{className:"fa fa-arrows-alt chart-item__button move"})),i.createElement(u.TooltipWrapper,{tooltip:a.default("旋转图表（点击后拖拽）"),placement:"top",key:"rotate"},i.createElement("span",{className:"fa fa-sync chart-item__button rotate",onMouseDown:this.handelRotateStart}))],"editor"===o?i.createElement("div",{className:"grid-line"},i.createElement("div",{className:"grid-line-top"}),i.createElement("div",{className:"grid-line-left"}),i.createElement("div",{className:"grid-line-label",style:{fontSize:15/c+"px"}},h.left+","+h.top)):null,d.data.alert&&(!this.state.closeAlertTime||+new Date-+this.state.closeAlertTime>=60*_*1e3)?i.createElement("div",{className:"chart-alert"},"string"==typeof d.data.alert?d.data.alert:"",i.createElement(u.TooltipWrapper,{tooltip:a.default("「关闭报警」，「"+_+"」分钟内不再展示"),placement:"top"},i.createElement("span",{className:"fa fa-times close-alert",onClick:this.closeAlert}))):null,i.createElement("div",{className:"chart-item__style",style:E}),i.createElement("div",{className:"chart-item__content",style:F,ref:this.bindChartContentDom},!X&&"normal"===o||"editor"===o?R:null,X?i.createElement("div",{className:"chart-item__forbidden"},X.info,i.createElement("button",{className:D.classPrefix+"Button "+D.classPrefix+"Button--primary",onClick:function(){return y.showUpdate(X.showUpdateInfo)}},a.default("查看各版本支持情况"))):null,!b||"pending"!==b.loadState||!x||x.dontNeedLoading||h.config.hideLoading&&"editor"!==o?null:i.createElement("div",{className:"loading-container"},i.createElement(u.Spinner,{containerClass:"text-center",overlay:!0})),!x&&i.createElement("div",{className:"chart-item__forbidden"},a.default("当前系统没有这种图表"))));return j},e.displayName="DashChartItem",o.__decorate([d.observable,o.__metadata("design:type",Boolean)],e.prototype,"_isUDLRKeyboardDoing",void 0),o.__decorate([d.observable,o.__metadata("design:type",Boolean)],e.prototype,"_destory",void 0),e=o.__decorate([h.observer],e)}(i.Component);e.ChartItem=R;var x=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o.__extends(e,t),e=o.__decorate([l.default,f.DnDMoveSource("d-chart-item")],e)}(R);e.ChartItemEditable=x});
;sugar.define("sugar:widgets/dashboard-charts/condition-item.tsx",function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ConditionItemEditable=e.ConditionItem=void 0;var o=t("sugar:node_modules/tslib/tslib.js"),i=t("sugar:utils/i18n.ts"),n=t("sugar:node_modules/react/index.js"),s=t("sugar:node_modules/classnames/index.js"),a=t("sugar:node_modules/mobx/lib/mobx.js"),d=t("sugar:node_modules/amis/lib/index.js"),r=t("sugar:node_modules/lodash/difference.js"),l=t("sugar:widgets/conditions/condition-manager.tsx"),h=t("sugar:stores/index.ts"),u=t("sugar:widgets/charts/_hoc/resizable/resizable.tsx"),p=t("sugar:widgets/dnd-move.tsx"),c=t("sugar:widgets/confirm.tsx"),m=t("sugar:widgets/pop-menu/pop-menu.tsx"),f=t("sugar:widgets/editor/toolbar.tsx"),g=t("sugar:widgets/product-type/product-type-modal.tsx"),v=t("sugar:node_modules/lodash/debounce.js"),C=t("sugar:widgets/dashboard-ctrl-panel/chart-ctrl.tsx"),b=t("sugar:sites/sugar-cxd.ts"),_=t("sugar:utils/condition-helper.ts"),y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._refreshTimer={},e._UDLRKeyboardDoneTimer=null,e._isUDLRKeyboardDoing=!1,e._topPositionDelta=0,e._leftPositionDelta=0,e.chartFrontendId="",e}return o.__extends(e,t),e.prototype.componentWillMount=function(){this.setConditionActive=this.setConditionActive.bind(this),this.deleteCondition=this.deleteCondition.bind(this),this.handleInitPopMenu=this.handleInitPopMenu.bind(this),this.bindContextEvent=this.bindContextEvent.bind(this),this.handleChange=this.handleChange.bind(this),this.onMouseOut=this.onMouseOut.bind(this),this.handleMouseDown=this.handleMouseDown.bind(this),this.handleMouseUp=this.handleMouseUp.bind(this),this.refreshConditionData=this.refreshConditionData.bind(this),this.chartFrontendId=this.props.condition.frontendId,this.props.refreshAllChartsData&&(this.debounceRefreshData=v(this.props.refreshAllChartsData,500))},e.prototype.componentDidMount=function(){var t=this.props,e=t.mode,o=t.condition;if("normal"===e&&o.dataConfig.needAutoRefresh&&o.dataConfig.autoRefreshInterval>0){var i=parseInt(o.dataConfig.autoRefreshInterval,10);i=i&&i>=5?i:5,i&&(this._refreshTimer.condition=setTimeout(this.refreshConditionData,1e3*i))}},e.prototype.componentDidUpdate=function(t){t.isResizing!==this.props.isResizing&&(this.props.isResizing&&this.props.removeCalEvents&&this.props.removeCalEvents(),!this.props.isResizing&&this.props.addCalEvents&&this.props.addCalEvents())},e.prototype.componentWillUnmount=function(){_.deleteRule(this.chartFrontendId)},e.prototype.refreshConditionData=function(){var t=this.props,e=t.mode,o=t.condition,i=t.hub;("done"===i.data.loadState||"error"===i.data.loadState)&&o.loadData(e,!1,!0);var n=parseInt(o.dataConfig.autoRefreshInterval,10);n=n&&n>=C.autoRefreshMinInterval?n:C.autoRefreshMinInterval,this._refreshTimer.condition=setTimeout(this.refreshConditionData,1e3*n)},e.prototype.handleMouseDown=function(t){this.mouseX=t.clientX,this.mouseY=t.clientY},e.prototype.handleMouseUp=function(t){if(this.mouseY===t.clientY&&this.mouseX===t.clientX){var e=this.props;"editor"===e.mode&&e.setConditionActive&&e.hoverChart&&!e.condition.config.isLock&&e.setConditionActive(e.hoverChart,!1,t)}this.mouseX=null,this.mouseY=null},e.prototype.setConditionActive=function(t,e){void 0===e&&(e=!1);var o=this.props;"editor"===o.mode&&o.setConditionActive&&o.hoverChart&&(o.setConditionActive(o.hoverChart),t&&t.stopPropagation())},e.prototype.deleteCondition=function(t){t&&t.stopPropagation();var e=this.props;"editor"===e.mode&&e.deleteCondition&&c.confirm(i.default("确定要删除「"+e.condition.label+"」?")).then(function(){e.deleteCondition(e.index)}).catch(function(){})},e.prototype.handleChange=function(t){var e,o,i,n,s=this.props,a=s.condition,d=s.mode,l=s.conditionKeyList,h=s.setFirstFlag;a.changeConditionValue(t,d);var u=null===(i=null===(o=null===(e=this.props.condition.dataConfig)||void 0===e?void 0:e.dataModel)||void 0===o?void 0:o.conditionBind)||void 0===i?void 0:i.list;(null===(n=r(u||[],l))||void 0===n?void 0:n.length)===(null===u||void 0===u?void 0:u.length)&&this.debounceRefreshData?this.debounceRefreshData(a.frontendId):h()},e.prototype.handleInitPopMenu=function(){this.setConditionActive();var t=m.popMenu.getPopMenuTree();t&&"editor"===this.props.mode&&m.popMenu.setPopMenuTree(t)},e.prototype.onMouseOut=function(){var t=this.props;"editor"===t.mode&&t.setHoverChart&&!t.condition.config.isLock&&t.setHoverChart("")},e.prototype.bindContextEvent=function(t){t?(this.dom=t,this.dom.addEventListener("contextmenu",this.handleInitPopMenu)):(this.dom&&this.dom.removeEventListener("contextmenu",this.handleInitPopMenu),this.dom=t)},e.prototype.render=function(){var t=this.props,e=t.mode,o=t.condition,a=t.hub,r=t.isDragging,h=t.disabled,u=t.scaleX,p=(t.scaleY,t.conditionConfig),c=t.container,m=l.create(o.type,{mode:e,disabled:h,condition:o,hub:a,handleChange:this.handleChange,container:c,conditionConfig:p}),v=o.height<=30||o.width<=80||o.height<=40&&o.width<=100?!0:!1,C={};return n.createElement("div",{className:s("condition-item condition-item__"+o.type,{isDragging:r}),ref:this.bindContextEvent,onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,onMouseOut:this.onMouseOut},"editor"!==e||this._isUDLRKeyboardDoing||v?null:[n.createElement(d.TooltipWrapper,{tooltip:i.default("删除"),placement:"top",key:"delete"},n.createElement("span",{className:"fa fa-times condition-item__button delete",onClick:this.deleteCondition})),n.createElement(d.TooltipWrapper,{tooltip:i.default("移动图表"),placement:"top",key:"move"},n.createElement("span",{className:"fa fa-arrows-alt condition-item__button move",style:{left:30}}))],"editor"===e?n.createElement("div",{className:"grid-line"},n.createElement("div",{className:"grid-line-top"}),n.createElement("div",{className:"grid-line-left"}),n.createElement("div",{className:"grid-line-label",style:{fontSize:15/u+"px"}},o.left+","+o.top)):null,n.createElement("div",{className:"condition-item__content",style:C},f.canUseConditions(o.type)?m:n.createElement("div",{className:"chart-item__forbidden"},i.default("当前版本不支持此类过滤条件"),n.createElement("button",{className:b.classPrefix+"Button "+b.classPrefix+"Button--primary",onClick:function(){return g.showUpdate("product-type-condition")}},i.default("查看各版本支持情况")))))},e.displayName="ConditionItem",o.__decorate([a.observable,o.__metadata("design:type",Boolean)],e.prototype,"_isUDLRKeyboardDoing",void 0),e=o.__decorate([h.observer],e)}(n.Component);e.ConditionItem=y;var D=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o.__extends(e,t),e=o.__decorate([u.default,p.DnDMoveSource("d-chart-item")],e)}(y);e.ConditionItemEditable=D});
;sugar.define("sugar:widgets/step.tsx",function(t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var e=t("sugar:node_modules/tslib/tslib.js"),i=t("sugar:utils/storage.ts"),o=t("sugar:node_modules/react/index.js"),s=t("sugar:node_modules/intro.js/intro.js"),r=function(t){function n(n){var e=t.call(this,n)||this;return e.introJs=null,e.isConfigured=!1,e.isVisible=!1,e.onExit=function(){var t=e.props.onExit;e.isVisible=!1,t&&t(e.introJs._currentStep)},e.onBeforeChange=function(){if(!e.isVisible)return!0;var t=e.props,n=t.onBeforeChange,i=t.onPreventChange;if(n){var o=n(e.introJs._currentStep);return o===!1&&i&&setTimeout(function(){i(e.introJs._currentStep)},0),o}return!0},e.onAfterChange=function(t){if(e.isVisible){var n=e.props.onAfterChange;n&&n(e.introJs._currentStep,t)}},e.onChange=function(t){if(e.isVisible){var n=e.props.onChange;n&&n(e.introJs._currentStep,t)}},e.onComplete=function(){var t=e.props.onComplete;t&&t()},e.introJs=null,e.installIntroJs(),e}return e.__extends(n,t),n.prototype.componentDidMount=function(){var t=this.props.name,n=!i.get(t);n&&i.put(t,!0),this.props.enabled&&n&&(this.configureIntroJs(),this.renderSteps())},n.prototype.componentDidUpdate=function(t){var n=this.props,e=n.enabled,o=n.steps,s=n.options,r=!i.get(name);r&&i.put(name,!0),this.isConfigured&&t.steps===o&&t.options===s||!r||(this.configureIntroJs(),this.renderSteps()),t.enabled!==e&&r&&this.renderSteps()},n.prototype.componentWillUnmount=function(){this.introJs.exit()},n.prototype.installIntroJs=function(){this.introJs=s.introJs(),this.introJs.onexit(this.onExit),this.introJs.onbeforechange(this.onBeforeChange),this.introJs.onafterchange(this.onAfterChange),this.introJs.onchange(this.onChange),this.introJs.oncomplete(this.onComplete)},n.prototype.configureIntroJs=function(){var t=this.props,n=t.options,i=t.steps;this.introJs.setOptions(e.__assign(e.__assign({},n),{steps:i})),this.isConfigured=!0},n.prototype.renderSteps=function(){var t=this.props,n=t.enabled,e=(t.initialStep,t.steps),i=t.onStart;n&&e.length>0&&!this.isVisible?(this.introJs.start(),this.isVisible=!0,i&&i(this.introJs._currentStep)):!n&&this.isVisible&&(this.isVisible=!1,this.introJs.exit())},n.prototype.render=function(){return null},n.displayName="Step",n.defaultProps={enabled:!1,onStart:void 0,onBeforeChange:void 0,onAfterChange:void 0,onChange:void 0,onPreventChange:void 0,onComplete:void 0,onExit:void 0,options:{exitOnOverlayClick:!1,prevLabel:"上一步",nextLabel:"下一步",skipLabel:"跳过",doneLabel:"结束"}},n}(o.Component);n.default=r});
;sugar.define("sugar:widgets/dashboard-charts/index.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getHierarchyChartText=t.getDrillConfigText=t.getDrillChartText=void 0;var r=e("sugar:node_modules/tslib/tslib.js"),i=e("sugar:utils/i18n.ts"),n=e("sugar:node_modules/react/index.js"),o=e("sugar:node_modules/classnames/index.js"),a=e("sugar:stores/index.ts"),d=e("sugar:widgets/dashboard-charts/chart-item.tsx"),s=e("sugar:widgets/dashboard-charts/condition-item.tsx"),l=e("sugar:widgets/step.tsx"),c=e("sugar:utils/condition-helper.ts"),h=e("sugar:sites/sugar-cxd.ts"),u=e("sugar:widgets/conditions/select/select.tsx"),p=e("sugar:widgets/conditions/multi-select/multi-select.tsx"),f=e("sugar:widgets/conditions/date-range/date-range.tsx"),g=e("sugar:widgets/conditions/date/date.tsx"),m=e("sugar:widgets/conditions/date-time/date-time.tsx"),v=e("sugar:widgets/conditions/date-time-range/date-time-range.tsx"),C=h.appTheme.classnames,y=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(i,e),i.prototype.componentWillMount=function(){this.deleteChart=this.deleteChart.bind(this),this.copyChart=this.copyChart.bind(this),this.deleteCondition=this.deleteCondition.bind(this)},i.prototype.deleteChart=function(e){var t=this.props;"editor"===t.mode&&t.editor&&t.editor.deleteChart(e,"dashboard")},i.prototype.deleteCondition=function(e){var t=this.props;"editor"===t.mode&&t.editor&&t.editor.deleteCondition(e,"dashboard")},i.prototype.copyChart=function(e){var t=this.props;"editor"===t.mode&&t.editor&&t.editor.copyChart(e,"dashboard")},i.prototype.setDefaultColor=function(){var e=this.props.conditionConfig,t=void 0===e?{}:e,r={},i=[[[" .d-condition-item ."+C("PopOver-overlay")],{width:"400vw",height:"400vh",top:"-100vh",left:"-100vw"}],[[" .condition__form-item ."+C("DateRangePicker-value")," .condition__form-item ."+C("DatePicker-value")," .condition__form-item ."+C("DateRangePicker-placeholder")," .condition__form-item ."+C("DatePicker-placeholder")," .condition__form-item ."+C("Select-valueWrap")],{"text-overflow":"ellipsis","white-space":"nowrap",overflow:"hidden"}],[[" ."+C("PopOver")," ."+C("PopOver")+"."+C("Select-popover")],{"z-index":9999}]];c.insertRule("."+t.hash,i),this.props.conditionStore.list.data.map(function(e){r[e.type]||(r[e.type]=e)});var n={date:g.setDateDefaultColor,dateRange:f.setDateRangeDefaultColor,select:u.setSelectDefaultColor,dateTime:m.setDateTimeDefaultColor,dateTimeRange:v.setDateTimeRangeDefaultColor,multiSelect:p.setMultiSelectDefaultColor};Object.keys(n).forEach(function(e){r[e]?c.insertRule("."+e+"-"+t.hash,n[e](t,r[e])):c.deleteRule("."+e+"-"+t.hash)})},i.prototype.componentWillUnmount=function(){c.deleteRule(this.props.conditionConfig.hash)},i.prototype.render=function(){var e=this,i=this.props,a=i.chartStore,c=i.mode,h=i.theme,u=i.backgroundColor,p=i.container,f=i.editor,g=i.scaleX,m=i.scaleY,v=i.hoverChart,C=i.tabStore,y=i.conditionStore,w=i.banDownLoad,D=i.refreshAllChartsData,I=i.removeCalEvents,_=i.addCalEvents,E=i.stepStore,O=i.disabled,S=i.setFirstFlag,T=i.conditionConfig,H=[],k=[],L=a.list.data.map(function(e){return e.frontendId});C.hideChartIds.forEach(function(e,t){if(!L.includes(t))return C.deleteHideChartIds(t);var r=(e||"").split(",");H.push.apply(H,r),C.iframeLoadOnNeedTabIds.get(t)&&k.push.apply(k,r)});var z=d.ChartItem,R=s.ConditionItem,j=[];return"editor"===c&&(z=d.ChartItemEditable,R=s.ConditionItemEditable,f&&"multiCharts"===f.target.type&&(j=a.list.data.concat(y.list.data).filter(function(e){return!!~f.target.frontendId.indexOf(e.frontendId)}))),this.setDefaultColor(),n.createElement("div",{className:"chart-list row"},y.list.data.map(function(t,i){var a=H.indexOf(t.frontendId)>-1;if("container"===t.type)return null;var d={};"editor"===c&&(d={height:t.height,width:t.width,setConditionActive:e.props.setConditionActive,deleteCondition:e.deleteCondition,copyChart:e.copyChart,id:t.frontendId,grid:e.props.grid,setHoverChart:e.props.setHoverChart,setDragOrMoving:e.props.setDragOrMoving});var s=y.getConditionHub(t.frontendId),l=!1,u=[];return f&&"condition"===f.target.type?(l=t.frontendId===f.target.frontendId,l&&(u=[t])):f&&"multiCharts"===f.target.type?(l=!!~f.target.frontendId.indexOf(t.frontendId),l&&(u=j)):f&&"dashboard"===f.target.type&&(u=[t]),n.createElement("div",{key:t.frontendId,id:"chart_"+t.frontendId,className:o("d-condition-item",{active:l,isHover:f&&(t.frontendId===v||s.configData.hoverStatus),isHidden_Tab:a}),style:{width:t.width+"px",height:t.height+"px",left:t.left+"px",top:t.top+"px",zIndex:l?9999:t.zIndex,pointerEvents:t.config&&t.config.pointerEventsNone&&"editor"!==c?"none":"auto"}},n.createElement(R,r.__assign({mode:c,theme:h,condition:t,disabled:O,hub:s,index:i,scaleX:g,scaleY:m,draggableItems:u,refreshAllChartsData:D,hoverChart:v,removeCalEvents:I,addCalEvents:_,conditionKeyList:y.list.data.map(function(e){return e.key}),setFirstFlag:S,container:p,conditionConfig:T},d)))}),a.list.data.map(function(i,d){var s=H.indexOf(i.frontendId)>-1,p=k.indexOf(i.frontendId)>-1&&"iframe"===i.type,C={};"editor"===c&&(C={height:i.height,width:i.width,setChartActive:e.props.setChartActive,deleteChart:e.deleteChart,copyChart:e.copyChart,id:i.frontendId,grid:e.props.grid,setHoverChart:e.props.setHoverChart,setDragOrMoving:e.props.setDragOrMoving}),p&&(C.isDestory=p);var y=a.getChartHub(i.frontendId),D=!1,O=[];return f&&"chart"===f.target.type?(D=i.frontendId===f.target.frontendId,D&&(O=[i])):f&&"multiCharts"===f.target.type?(D=!!~f.target.frontendId.indexOf(i.frontendId),D&&(O=j)):f&&"dashboard"===f.target.type&&(O=[i]),"editor"===c&&D&&(C.active=!0),n.createElement("div",{key:i.frontendId,id:"chart_"+i.frontendId,className:o("d-chart-item",{active:D,isHover:f&&(i.frontendId===v||y.configData.hoverStatus),isHidden_Tab:s}),style:{width:i.width+"px",height:i.height+"px",left:i.left+"px",top:i.top+"px",zIndex:D?9999:i.zIndex,pointerEvents:i.config&&i.config.pointerEventsNone&&"editor"!==c?"none":"auto"}},n.createElement(z,r.__assign({mode:c,theme:h,backgroundColor:u,chart:i,banDownLoad:w,draggableItems:O,hub:y,index:d,scaleX:g,scaleY:m,isHidden_Tab:s,hoverChart:v,removeCalEvents:I,addCalEvents:_},C)),(null===E||void 0===E?void 0:E.isShow)&&D&&n.createElement(l.default,{key:"drill",enabled:!0,name:"drill",steps:[{element:".drill-ctrl-container",intro:t.getDrillConfigText(i.type)},{element:".d-chart-item.active",intro:t.getDrillChartText(i.type)}],onChange:function(e){1===e?(setTimeout(x,0),window.addEventListener("resize",function(){x()})):(b(),window.removeEventListener("resize",x))},onComplete:function(){b(),window.removeEventListener("resize",x)}}),(null===E||void 0===E?void 0:E.isHierarchyShow)&&D&&n.createElement(l.default,{key:"hierarchyDrill",enabled:!0,name:"hierarchyDrill",steps:[{element:".hierarchy-drill-ctrl-container",intro:t.getHierarchyChartText()},{element:".d-chart-item.active",intro:t.getDrillChartText(i.type)}],onChange:function(e){var t=document.querySelector(".introjs-helperNumberLayer");t&&(t.style.display="none"),1===e?(setTimeout(x,0),window.addEventListener("resize",function(){x()})):b()},onComplete:b}))}))},i.displayName="DashChartList",i=r.__decorate([a.inject(function(e){return{tabStore:e.tab,stepStore:e.step}}),a.observer],i)}(n.Component);t.default=y;var x=function(){var e,t=document.querySelector(".d-chart-item.active"),r=document.querySelector(".introjs-helperLayer"),i=document.querySelector(".dashboard-container"),n=document.querySelector(".introjs-tooltipReferenceLayer");if(t&&r&&i&&n){var o=t.getBoundingClientRect(),a=o.width,d=o.height,s=o.top,l=o.left,c=document.querySelector(".introjs-overlay");if("BODY"===(null===(e=null===c||void 0===c?void 0:c.parentElement)||void 0===e?void 0:e.tagName)){var h=i.parentNode;document.body.removeChild(c),null===h||void 0===h?void 0:h.prepend(c)}r.style.top=s-5+"px",r.style.left=l-5+"px",r.style.width=a+12+"px",r.style.height=d+12+"px",r.style.border="6px solid rgba(255,255,255,.9)",r.style.background="none",n.style.top=s+d-303+"px",n.style.left=l-5+"px",n.style.width=a+12+"px",n.style.height=d+12+"px",i.style.setProperty("z-index","999999","important")}},b=function(){var e=document.querySelector(".dashboard-container");e&&(e.style.zIndex="auto"),window.removeEventListener("resize",x)};t.getDrillChartText=function(e){var t=i.default("点击图表上要下钻的区域");return~e.indexOf("map-line")?t=i.default("点击地图上的飞线"):~e.indexOf("line")?t=i.default("点击折线上的点"):~e.indexOf("bar")?t=i.default("点击柱子"):~e.indexOf("pie")?t=i.default("点击扇形区域"):~e.indexOf("scatter")?t=i.default("点击气泡点"):~e.indexOf("table")&&(t=i.default("点击要下钻的单元格或行")),i.default("【第二步】：")+t+i.default("，在弹框中对下钻图表进行配置")},t.getDrillConfigText=function(e){return i.default(~e.indexOf("table")?"【第一步】：请选择下钻触发方式以及下钻后展示的图表类型":"【第一步】：请选择下钻后展示的图表类型")},t.getHierarchyChartText=function(){return i.default("【第一步】：请选择要使用的层级关系维度")}});
;sugar.define("sugar:widgets/charts/index.tsx",function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=t("sugar:node_modules/tslib/tslib.js"),o=t("sugar:node_modules/react/index.js"),r=t("sugar:node_modules/classnames/index.js"),n=t("sugar:node_modules/mobx/lib/mobx.js"),a=t("sugar:stores/index.ts"),d=t("sugar:widgets/charts/chart-item.tsx"),s=t("sugar:widgets/conditions/index.tsx"),l=t("sugar:node_modules/react-grid-layout/index.js"),c=t("sugar:utils/resize-sensor.ts"),h=t("sugar:node_modules/lodash/debounce.js"),u=t("sugar:widgets/dashboard-charts/index.tsx"),p=t("sugar:widgets/step.tsx"),g=function(t){function e(e){var i=t.call(this,e)||this;return i.firstTime=!0,i.lastEditTargetId="",i.editTitle=!1,i.setChartActive=i.setChartActive.bind(i),i.setConditionActive=i.setConditionActive.bind(i),i.deleteChart=i.deleteChart.bind(i),i.copyChart=i.copyChart.bind(i),i.onLayoutChange=i.onLayoutChange.bind(i),i._resize=i._resize.bind(i),i.getDom=i.getDom.bind(i),i.deleteConditionList=i.deleteConditionList.bind(i),i.triggerEdit=i.triggerEdit.bind(i),i.calculateEditTitle=i.calculateEditTitle.bind(i),i.getConditionListDom=i.getConditionListDom.bind(i),i.state={width:1280,isEdit:!1},i}i.__extends(e,t),e.prototype.componentWillUnmount=function(){this.unWatchResize&&this.unWatchResize()},e.prototype.getDom=function(t){t&&(this.dom=t,this._resize(),this._initResizeSensor())},e.prototype.setConditionActive=function(t){var e=this.props;"editor"!==e.mode||!e.editor||"conditionList"===e.editor.target.type&&e.editor.target.frontendId===t||e.editor.setActiveTarget("conditionList",t)},e.prototype.setChartActive=function(t){var e=this.props;"editor"!==e.mode||!e.editor||"chart"===e.editor.target.type&&e.editor.target.frontendId===t||e.editor.setActiveTarget("chart",t)},e.prototype.deleteChart=function(t){var e=this.props;"editor"===e.mode&&e.editor&&e.editor.deleteChart(t,"report")},e.prototype.copyChart=function(t){var e=this.props;"editor"===e.mode&&e.editor&&e.editor.copyChart(t,"report")},e.prototype.generateLayouts=function(t){for(var e={lg:[],sm:[]},i=0,o=t;i<o.length;i++){var r=o[i];e.lg.push({x:r.left,y:r.top,w:r.width,h:r.height,i:r.frontendId,isDraggable:r.isExploreChart?!1:void 0}),e.sm.push({x:r.left,y:r.top,w:r.width,h:r.height,i:r.frontendId,isDraggable:r.isExploreChart?!1:void 0})}return e},e.prototype.onLayoutChange=function(t){"editor"===this.props.mode&&(this.props.chartStore.list.syncLayout(t),this.props.conditionStore.list.syncLayout(t))},e.prototype._initResizeSensor=function(){this.unWatchResize&&this.unWatchResize(),this.dom&&(this.unWatchResize=c.resizeSensor(this.dom,h(this._resize,250)))},e.prototype._resize=function(){this.dom&&this.setState({width:this.dom.offsetWidth})},e.prototype.deleteConditionList=function(){var t=this.props;"editor"===t.mode&&t.editor&&t.editor.deleteConditionList()},e.prototype.triggerEdit=function(){this.setState({isEdit:!this.state.isEdit})},e.prototype.calculateEditTitle=function(t){var e=this.props.editor;return e&&t===e.target.frontendId&&this.state.isEdit},e.prototype.componentWillReact=function(){var t=this.props.editor;t&&(this.lastEditTargetId!==t.target.frontendId&&this.setState({isEdit:!1}),this.lastEditTargetId=null===t||void 0===t?void 0:t.target.frontendId)},e.prototype.getConditionListDom=function(t){t&&(this.conditionListDom=t)},e.prototype.render=function(){var t=this,e=this.props,n=e.chartStore,a=e.mode,c=e.theme,h=e.editor,g=e.firstBlood,y=e.reportConfig,v=e.banDownLoad,C=e.conditionStore,b=e.refreshAllChartsData,x=e.disabled,L=e.stepStore,E=e.all12Step,_=e.reportHash,T=d.ChartItem;"editor"===a&&(T=d.ChartItemEditable);var D={},I={},S=(c.config||{}).pageBC;if(S&&(I.backgroundColor=S),y.reportCustomStyle){var k="";0===y.backgroundType?k=y.backgroundUrl:1===y.backgroundType&&(k=y.imgUrl||"");var w="100% 100%";1===y.backgroundScaleType?w="100% auto":2===y.backgroundScaleType?w="auto 100%":3===y.backgroundScaleType&&(w="auto"),D.background="url("+k+") 0% 0% / "+w,y.backgroundFixed===!0&&(D.background+=" fixed"),D.filter="blur("+y.backgroundBlur+"px)",D.opacity=y.backgroundOpacity/10,I={backgroundColor:""+y.backgroundColor},this.firstTime&&(this.firstTime=!1,setTimeout(function(){t._resize()},200))}var z;if(this.dom){var A=this.dom.getBoundingClientRect();if(z=A&&A.bottom?A.bottom:0,z+10<document.documentElement.clientHeight){var j=z-document.documentElement.clientHeight;I.bottom=j,D.bottom=j}}var R=n.list.data;if(C.list.data.length>1){var B=C.list.data.filter(function(t){return"container"===t.type});R=i.__spreadArrays(B,n.list.data.slice())}var H=-1,N=-1;return o.createElement("div",{className:"chart-list-new",ref:this.getDom},I.backgroundColor?o.createElement("div",{className:"report-background reportOrDashBackColor",style:I}):null,y.reportCustomStyle?o.createElement("div",{className:"report-background reportOrDashBackImg",style:D}):null,o.createElement(l.Responsive,{width:this.state.width,className:"layout",breakpoints:{lg:768,md:0,sm:0,xs:0,xxs:0},cols:E?{lg:12,md:12,sm:12,xs:12,xxs:12}:{lg:12,md:1,sm:1,xs:1,xxs:1},rowHeight:0,containerPadding:[0,0],useCSSTransforms:!1,compactType:y.verticalCompact||this.state.width<=768?"vertical":null,onLayoutChange:this.onLayoutChange,isDraggable:"editor"===a,isResizable:"editor"===a,layouts:this.generateLayouts(R)},R.map(function(e){var d,l;if("container"===e.type){N++;var E={};return"editor"===a&&(E={setActive:t.setConditionActive,deleteConditionList:t.deleteConditionList,id:e.frontendId}),o.createElement("div",{key:e.frontendId,className:r("condition-col",{active:h&&"conditionList"===h.target.type&&e.frontendId===h.target.frontendId}),style:{height:400}},o.createElement("div",{className:"condition-list__container",ref:t.getConditionListDom},t.conditionListDom&&o.createElement(s.default,i.__assign({key:"conditionList",mode:a,theme:c,conditionStore:C,condition:e,editor:h,refreshAllChartsData:b,disabled:x,conditionIndex:N,reportConfig:y,container:t.conditionListDom,reportHash:_},E))))}var D=!!e.config.removeBgColor;H++;var I=n.getChartHub(e.frontendId),E={};return"editor"===a&&(D=!1,E={active:h&&("chart"===h.target.type&&e.frontendId===h.target.frontendId||I.configData.hoverStatus),setChartActive:t.setChartActive,deleteChart:t.deleteChart,copyChart:t.copyChart,id:e.frontendId}),o.createElement("div",{key:e.frontendId,id:"chart_"+e.frontendId,className:r("chart-col",{active:E.active,hide:!g&&"normal"===a,"chart-back-transparent":D})},o.createElement(T,i.__assign({mode:a,theme:c,chart:e,hub:I,index:H,reportConfig:y,banDownLoad:v,hideBeforeFirstBlood:!g&&"normal"===a,triggerEdit:t.triggerEdit,editTitle:t.calculateEditTitle(e.frontendId)},E)),(null===L||void 0===L?void 0:L.isShow)&&e.frontendId===(null===(d=null===h||void 0===h?void 0:h.target)||void 0===d?void 0:d.frontendId)&&o.createElement(p.default,{key:"drill",enabled:!0,name:"drill",steps:[{element:".drill-ctrl-container",intro:u.getDrillConfigText(e.type)},{element:".react-grid-item.active",intro:u.getDrillChartText(e.type)}],onChange:function(t,e){1===t?m(e):f()},onComplete:f}),(null===L||void 0===L?void 0:L.isHierarchyShow)&&e.frontendId===(null===(l=null===h||void 0===h?void 0:h.target)||void 0===l?void 0:l.frontendId)&&o.createElement(p.default,{key:"hierarchyDrill",enabled:!0,name:"hierarchyDrill",steps:[{element:".hierarchy-drill-ctrl-container",intro:u.getHierarchyChartText()},{element:".react-grid-item.active",intro:u.getDrillChartText(e.type)}],onChange:function(t,e){1===t?m(e):f()},onComplete:f}))})))};var g;return e.displayName="ChartList",i.__decorate([n.observable,i.__metadata("design:type","function"==typeof(g="undefined"!=typeof HTMLDivElement&&HTMLDivElement)?g:Object)],e.prototype,"conditionListDom",void 0),e=i.__decorate([a.inject(function(t){return{stepStore:t.step,theme:t.chartTheme.theme}}),a.observer,i.__metadata("design:paramtypes",[Object])],e)}(o.Component);e.default=g;var m=function(t){setTimeout(function(){var e=document.querySelector(".introjs-helperLayer"),i=document.querySelector(".introjs-tooltipReferenceLayer");if(e&&t&&i){e.classList.add("report-drill-intro");var o=t.getBoundingClientRect().top;e.style.top=o-5+"px",i.style.top=o-5+"px"}},0)},f=function(){var t=document.querySelector(".introjs-helperLayer");t&&t.classList.remove("report-drill-intro")}});
;sugar.define("sugar:widgets/water-mark.tsx",function(r,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=r("sugar:node_modules/tslib/tslib.js"),t=r("sugar:node_modules/react/index.js"),s=r("sugar:node_modules/react-dom/index.js"),o=r("sugar:stores/index.ts"),n=r("sugar:utils/resize-sensor.ts"),i=r("sugar:node_modules/mobx/lib/mobx.js"),p=r("sugar:node_modules/watermark-dom/index.js"),d=r("sugar:utils/chart-helper.ts");e.default=function(r){var e;return o.inject(function(r){return{__waterMarkUser:r.user.current}})(o.observer((e=function(e){function o(){var r=null!==e&&e.apply(this,arguments)||this;return r.toDispose=[],r}return a.__extends(o,e),o.prototype.componentDidMount=function(){var r=this,e=s.findDOMNode(this);this.toDispose.push(i.autorun(function(){var e=r.props,a=e.report?e.report.data.config:e.dashboard.data.config;if(a&&a.wrOpen){var t="email"===a.wrType?r.props.__waterMarkUser.email||" ":a.wrTxt||"Sugar";t=d.replaceUrlParams(t),p.load({watermark_txt:t,watermark_color:a.wrColor,watermark_alpha:a.wrAlpha,watermark_fontsize:a.wrFontsize+"px",watermark_width:a.wrWidth,watermark_x_space:a.wrXspace,watermark_y_space:a.wrYspace})}else{var s=document.getElementById("wm_div_id");s&&s.parentNode.removeChild(s)}})),this.toDispose.push(n.resizeSensor(e,function(){var e=r.props,a=e.report?e.report.data.config:e.dashboard.data.config;if(a&&a.wrOpen){var t="email"===a.wrType?r.props.__waterMarkUser.email||" ":a.wrTxt||"Sugar";t=d.replaceUrlParams(t),p.load({watermark_txt:t,watermark_color:a.wrColor,watermark_alpha:a.wrAlpha,watermark_fontsize:a.wrFontsize+"px",watermark_width:a.wrWidth,watermark_x_space:a.wrXspace,watermark_y_space:a.wrYspace})}}))},o.prototype.componentWillUnmount=function(){var r=document.getElementById("wm_div_id");r&&r.parentNode.removeChild(r),this.toDispose.forEach(function(r){return r()})},o.prototype.render=function(){var e=this.props,s=(e.__waterMarkUser,a.__rest(e,["__waterMarkUser"]));return t.createElement("div",null,t.createElement(r,a.__assign({},s)))},o}(t.Component),e.displayName="WaterMarkHOC",e)))}});
;sugar.define("sugar:widgets/report-body/report-content.tsx",function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=t("sugar:node_modules/tslib/tslib.js"),a=t("sugar:utils/i18n.ts"),s=t("sugar:node_modules/react/index.js"),o=t("sugar:node_modules/amis/lib/index.js"),i=t("sugar:stores/index.ts"),n=t("sugar:widgets/charts/index.tsx"),h=t("sugar:utils/condition-helper.ts"),l=t("sugar:utils/chart-helper.ts"),d=t("sugar:utils/common-helper.ts"),u=t("sugar:widgets/water-mark.tsx"),f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.firstRefreshAllChartsData=!1,e.chartsReady=!1,e.autoRefreshTimer=null,e}return r.__extends(e,t),e.prototype.componentWillMount=function(){this.refreshAllChartsData=this.refreshAllChartsData.bind(this),this.autoRefresh=this.autoRefresh.bind(this),this.setState({firstBlood:!1})},e.prototype.componentWillUnmount=function(){this.autoRefreshTimer&&clearInterval(this.autoRefreshTimer)},e.prototype.refreshAllChartsData=function(t){var e=this.props,r=h.areConditionsValidate(e.conditionStore.list.data,e.conditionStore.hubMap);if(r!==!0)return void(t||r.forEach(function(t){o.toast.error(t)}));var a=h.getConditionsKTV(e.conditionStore.list.data,e.conditionStore.hubMap);this.state.firstBlood||this.setState({firstBlood:!0});var s=e.chartStore.list.data;s.forEach(function(t){1!==t.isExploreChart&&t.loadData(e.mode,!0,a)}),h.setConditionsKTV2Url(a)},e.prototype.autoRefresh=function(){this.chartsReady&&this.refreshAllChartsData()},e.prototype.render=function(){var t=this,e=this.props,r=e.chartStore,o=e.conditionStore,i=e.editor,u=e.mode,f=e.report,c=e.all12step;if("normal"===u&&!r.list.data.length)return a.default("报表无展示内容，请空间管理员进行编辑！");var p=h.areConditionsAsyncReady(o.list.data,o.hubMap);if(p&&!this.firstRefreshAllChartsData&&(this.firstRefreshAllChartsData=!0,setTimeout(function(){return t.refreshAllChartsData("normal"===u)},10),"normal"===u&&f.data.config.autoRefresh)){var m=1e3*(parseInt(f.data.config.autoRefreshInterval||"30",10)||30);this.autoRefreshTimer=setInterval(this.autoRefresh,m)}this.chartsReady=l.areAllChartsDataLoaded(r.hubMap);var g=h.areAllConditionNotLoading(o.hubMap);return s.createElement("div",{id:"chart-screenshot-container",className:"report-content-container"},s.createElement(n.default,{key:"chartList",mode:u,chartStore:r,editor:i,reportConfig:f.data.config,banDownLoad:d.isMobile?!0:f.data.config.banDownLoad,firstBlood:!!this.state.firstBlood,conditionStore:o,refreshAllChartsData:this.refreshAllChartsData,reportHash:f.data.hash,disabled:!p&&this.firstRefreshAllChartsData||!g||!this.chartsReady,all12Step:c}))},e.displayName="ReportContent",e=r.__decorate([u.default,i.observer],e)}(s.Component);e.default=f});
;sugar.define("sugar:widgets/report-body/iframe.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=e("sugar:node_modules/tslib/tslib.js"),o=e("sugar:node_modules/react/index.js"),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.render=function(){return"https:"===location.protocol&&/^http:/i.test(this.props.src)&&(window.location.href=window.location.href.replace(/^https:/,"http:")),o.createElement("div",{className:"report-iframe"},o.createElement("iframe",{src:this.props.src,frameBorder:"0"}))},t}(o.PureComponent);t.default=s});
;sugar.define("sugar:sites/group/report/report-collection.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=e("sugar:node_modules/tslib/tslib.js"),l=e("sugar:utils/i18n.ts"),o=e("sugar:node_modules/react/index.js"),n=e("sugar:stores/index.ts"),r=e("sugar:node_modules/mobx/lib/mobx.js"),i=e("sugar:node_modules/amis/lib/index.js"),s=e("sugar:sites/amis-renderer.tsx"),d=e("sugar:utils/tree.ts"),p=e("sugar:widgets/icon-selector/icon-selector.tsx"),u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.collectFlag=0,t}return a.__extends(t,e),t.prototype.componentWillMount=function(){this.props.notLoadSelfRepotTree||this.props.selfReport.tree.load()},t.prototype.render=function(){var e,t=this,n=this.props,u=n.report,c=n.selfReport,m=n.uncollectSucessCallback,f=!1,y="";return"done"!==c.tree.loadState?null:(e=d.map(r.toJS(c.tree.data),function(e){var t=!1;return 0!=e.type||e.children||(t=!0),e.reportHash===u.data.hash&&(f=!0,y=e.hash),{label:e.name,value:e.hash,type:e.type,children:t?[]:e.children}}),e=d.filter(e,function(e){return 0===e.type}),e.length||e.push({label:l.default("根目录"),value:""}),e=[{label:l.default("顶级"),value:"",children:e}],[o.createElement(i.Button,{key:"report-collect-button",level:"link",size:"lg",tooltip:l.default(f?"取消收藏":"收藏"),placement:"bottom",onClick:function(){return t.collectFlag=f?2:1},className:"hidden-xs"},f?o.createElement("i",{className:"fa fa-heart text-danger"}):o.createElement("i",{className:"fa fa-heart-o"})),1===this.collectFlag?o.createElement("div",{className:"hidden",key:"collect-form"},o.createElement(s.default,{schema:{type:"page",body:{title:l.default("收藏到个人中心"),type:"dialog",bodyClassName:"wrapper",actions:[{label:l.default("新建文件夹"),type:"button",actionType:"dialog",level:"info",dialog:{data:{name:"",type:0,remark:"",icon:""},title:l.default("新建个人中心文件夹"),onConfirm:function(){c.tree.load()},body:{name:"sugar-self-report-folder-new",type:"form",mode:"horizontal",api:"post:/api/self/report",controls:[{name:"type",type:"hidden",value:0},{name:"name",label:l.default("名称"),type:"text",required:!0,validations:"maxLength:30"},{type:"divider"},{name:"remark",label:l.default("简介"),type:"text",validations:"maxLength:1024"},{type:"divider"},{name:"icon",label:l.default("图标"),children:function(e){var t=e.onChange,n=e.value;return o.createElement(p.default,a.__assign({},{onChange:t,value:n},{containerClassName:"form-item",label:l.default("自定义文件夹图标（再次点击取消选中）"),height:200}))}},{type:"divider"},{type:"tree",label:l.default("父级页面"),options:e,name:"parentHash",hideRoot:!0}]}}},{type:"button",actionType:"cancel",label:l.default("关闭")},{type:"submit",label:l.default("收藏"),level:"primary"}],onClose:function(){t.collectFlag=0},onConfirm:function(){t.collectFlag=0,c.tree.load()},body:{type:"form",api:"post:/api/self/report",controls:[{name:"type",type:"hidden",value:u.data.type},{name:"reportHash",type:"hidden",value:u.data.hash},{name:"name",label:l.default("名称"),type:"text",value:u.data.name,desc:l.default("此处配置的名称将显示在个人中心中"),required:!0,validations:"maxLength:30"},{type:"divider"},{name:"remark",label:l.default("简介"),type:"text",validations:"maxLength:1024"},{type:"divider"},{type:"tree",label:l.default("父文件夹"),name:"parentHash",options:e,hideRoot:!0}]}}}})):null,2===this.collectFlag?o.createElement("div",{className:"hidden",key:"uncollectform"},o.createElement(s.default,{schema:{type:"page",body:{title:l.default("取消收藏"),type:"dialog",bodyClassName:"wrapper",onClose:function(){t.collectFlag=0},onConfirm:function(){t.collectFlag=0,c.tree.load(),m&&m()},body:[{type:"tpl",label:" ",tpl:l.default("确认取消收藏？")},{type:"form",api:"delete:/api/self/report/"+y}]}}})):null])},t.displayName="ReportCollection",a.__decorate([r.observable,a.__metadata("design:type",Object)],t.prototype,"collectFlag",void 0),t=a.__decorate([n.inject(function(e){return{selfReport:e.selfReport}}),n.observer],t)}(o.Component);t.default=u});
;sugar.define("sugar:sites/group/report/auto-email.tsx",function(e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var l=e("sugar:node_modules/tslib/tslib.js"),t=e("sugar:utils/i18n.ts"),n=e("sugar:node_modules/react/index.js"),d=e("sugar:stores/index.ts"),u=e("sugar:node_modules/mobx/lib/mobx.js"),o=e("sugar:node_modules/amis/lib/index.js"),i=e("sugar:sites/amis-renderer.tsx"),r=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.openDialog=!1,a}return l.__extends(a,e),a.prototype.componentWillMount=function(){},a.prototype.render=function(){var e=this,a=this.props,l=a.report,d=a.groupHash,u=a.dashboard,r="",s="",p="";return l?(r="reportHash",p="report",s=l.data.hash):u?(r="dashboardHash",p="dashboard",s=u.data.hash):console.warn("must have report or dashboard"),[n.createElement(o.Button,{key:"auto-email-button",level:"link",size:"lg",tooltip:t.default("定时邮件"),placement:"bottom",onClick:function(){return e.openDialog=!0}},n.createElement("i",{className:"far fa-envelope"})),this.openDialog?n.createElement("div",{className:"hidden",key:"email-form"},n.createElement(i.default,{schema:{type:"page",body:{title:t.default("定时邮件"),type:"dialog",bodyClassName:"wrapper",actions:[{type:"button",label:t.default("查看执行记录"),level:"info",actionType:"dialog",dialog:{title:t.default("定时邮件执行记录"),actions:[],body:{type:"crud",api:"/api/manage/group/"+d+"/email/listTasks?"+r+"="+s,title:null,columns:[{name:"run_at",type:"date",label:t.default("执行时间"),format:"YYYY-MM-DD HH:mm:ss"},{name:"status",label:t.default("执行结果"),type:"mapping",map:{0:t.default("未开始"),1:t.default("运行中"),2:t.default("成功"),"-1":t.default("失败"),"-2":t.default("超时")}}]}}},{type:"button",actionType:"cancel",label:t.default("取消")},{type:"submit",label:t.default("保存"),level:"primary"}],onClose:function(){e.openDialog=!1},onConfirm:function(){e.openDialog=!1},body:{type:"form",initApi:"/api/manage/group/"+d+"/email?"+r+"="+s,api:"post:/api/manage/group/"+d+"/email?"+r+"="+s,controls:[{name:"ref_type",type:"hidden",value:p},{name:"ref_hash",type:"hidden",value:s},{name:"url",type:"hidden",value:location.href},{name:"hash",type:"hidden"},{type:"radios",name:"dataPermission",label:t.default("数据权限"),value:0,columnsCount:2,required:!0,options:[{label:t.default("不区分权限"),value:0},{label:t.default("区分权限"),value:1}],hiddenOn:"!data.enabled"},{type:"button-group",name:"cycle",label:t.default("定时配置"),value:"daily",options:[{label:t.default("每小时"),value:"hourly"},{label:t.default("每天"),value:"daily"},{label:t.default("每周"),value:"weekly"},{label:t.default("每月"),value:"monthly"},{label:t.default("高级设置"),value:"advance"}],hiddenOn:"!data.enabled"},{name:"date",label:t.default("日期"),type:"number",value:1,min:1,max:31,required:!0,visibleOn:'data.cycle == "monthly" && data.enabled'},{name:"day",label:t.default("星期几"),type:"select",options:[{label:t.default("星期日"),value:0},{label:t.default("星期一"),value:1},{label:t.default("星期二"),value:2},{label:t.default("星期三"),value:3},{label:t.default("星期四"),value:4},{label:t.default("星期五"),value:5},{label:t.default("星期六"),value:6}],value:1,required:!0,visibleOn:'data.cycle == "weekly" && data.enabled'},{name:"hour",label:t.default("小时点"),type:"number",value:10,min:0,max:23,required:!0,visibleOn:'(data.cycle == "daily" || data.cycle == "weekly" || data.cycle == "monthly") && data.enabled'},{name:"minute",label:t.default("分钟点"),type:"number",value:0,min:0,max:60,required:!0,visibleOn:'(data.cycle == "daily" || data.cycle == "weekly" || data.cycle == "monthly" || data.cycle == "hourly") && data.enabled'},{name:"cron",description:t.default("使用 crontab 的语法"),label:t.default("定时配置"),type:"text",required:!0,visibleOn:'data.cycle == "advance" && data.enabled'},{name:"users",label:t.default("收件人"),type:"select",multiple:!0,requiredOn:"!(data.userRoles && data.userRoles.length)",joinValues:!1,extractValue:!0,searchable:!0,source:"/api/manage/group/"+d+"/user/all",hiddenOn:"!data.enabled"},{name:"userRoles",label:t.default("收件角色"),type:"select",multiple:!0,requiredOn:"!(data.users && data.users.length)",joinValues:!1,extractValue:!0,searchable:!0,source:"/api/manage/group/"+d+"/role/rolelist",hiddenOn:"!data.enabled"},{type:"button-group",name:"device",label:t.default("截图大小"),value:"pc",options:[{label:"PC",value:"pc"},{label:t.default("手机"),value:"mobile"}],hiddenOn:"!data.enabled"},{name:"title",label:t.default("标题"),type:"text",required:!1,value:document.title,hiddenOn:"!data.enabled"},{name:"enabled",label:t.default("是否启用"),type:"switch",value:!0},{tpl:'<div class="chart-warning-detail-doclink text--info"><a href="/docs/Alert-Report-Email" target="_blank">'+t.default("什么是定时邮件？")+"</a></div>",type:"tpl",label:" "}]}}}})):""]},a.displayName="ReportEmail",l.__decorate([u.observable,l.__metadata("design:type",Object)],a.prototype,"openDialog",void 0),a=l.__decorate([d.inject(function(e){return{selfReport:e.selfReport}}),d.observer],a)}(n.Component);a.default=r});
;sugar.define("sugar:sites/group/report/report-publish.tsx",function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=t("sugar:node_modules/tslib/tslib.js"),a=t("sugar:utils/i18n.ts"),o=t("sugar:node_modules/react/index.js"),i=t("sugar:stores/index.ts"),r=t("sugar:node_modules/classnames/index.js"),n=t("sugar:node_modules/amis/lib/index.js"),l=t("sugar:utils/url.ts"),d=t("sugar:widgets/qrcode-dialog.tsx"),u=t("sugar:sites/amis-renderer.tsx"),p=t("sugar:sites/group/manage/report/report-form-share.tsx"),h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s.__extends(e,t),e.prototype.componentWillMount=function(){this.btnClick=this.btnClick.bind(this),this.closeQrCode=this.closeQrCode.bind(this),this.closeSetting=this.closeSetting.bind(this),this.cbFunc=this.cbFunc.bind(this),this.updatePublishState=this.updatePublishState.bind(this),this.setState({showSettingDialog:!1,showQrcodeDialog:!1})},e.prototype.btnClick=function(){var t=this.props.report;this.setState(t.data.authType?{showQrcodeDialog:!0}:{showSettingDialog:!0})},e.prototype.closeQrCode=function(){this.setState({showQrcodeDialog:!1})},e.prototype.closeSetting=function(){this.setState({showSettingDialog:!1})},e.prototype.cbFunc=function(){this.setState({showQrcodeDialog:!1,showSettingDialog:!0})},e.prototype.updatePublishState=function(t){t.data&&t.data.data&&(!this.props.report.data.authType&&t.data.data.authType&&this.setState({showQrcodeDialog:!0}),this.props.report.loadSlient(t.data.data),this.props.reportTree.load(this.props.groupHash))},e.prototype.render=function(){var t=this.props,e=t.report,i=t.groupHash;return[o.createElement(n.Button,{key:"report-publish-button",level:"link",size:"lg",tooltip:a.default("公开分享"),placement:"bottom",onClick:this.btnClick},o.createElement("i",{className:r("fa fa-share-square",{"text-danger":!!e.data.authType})})),this.state.showQrcodeDialog?o.createElement(d.default,{key:"qrCode",name:e.data.name,qrUrl:l.shareSourceHost+"/report/"+e.data.hash+"/"+e.data.token,onClose:this.closeQrCode,cbText:a.default("更改发布状态"),cbFunc:this.cbFunc,password:e.data.password}):null,this.state.showSettingDialog?o.createElement("div",{className:"hidden",key:"publish-form"},o.createElement(u.default,{schema:{type:"page",body:{title:a.default("报表「"+e.data.name+"」公开分享"),type:"dialog",bodyClassName:"wrapper",actions:[{type:"button",actionType:"cancel",label:a.default("取消")},{type:"submit",primary:!0,label:a.default("更新公开分享状态")}],onClose:this.closeSetting,onConfirm:this.closeSetting,data:s.__assign(s.__assign({},e.data),{iframeHost:"string"==typeof e.data.config.iframeHost?e.data.config.iframeHost:"",cacheTime:e.data.config.cacheTime||0}),body:p.reportPublishSchema(i,!0)}},update:this.updatePublishState})):null]},e.displayName="ReportPublish",e=s.__decorate([i.observer],e)}(o.Component);e.default=h});
;sugar.define("sugar:widgets/export-page-excel.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ExportPageExcel=void 0;var s=e("sugar:node_modules/tslib/tslib.js"),o=e("sugar:node_modules/react/index.js"),l=e("sugar:utils/i18n.ts"),n=e("sugar:node_modules/amis/lib/index.js"),i=function(e){function t(t){var s=e.call(this,t)||this;return s.exportToExcel=s.exportToExcel.bind(s),s.state={disable:!1},s}return s.__extends(t,e),t.prototype.exportToExcel=function(){var e=this,t=this.props,s=t.name,o=t.chart;this.setState({disable:!0},function(){o.exportToExcel(s).then(function(){e.setState({disable:!1})})})},t.prototype.render=function(){return this.props.show?o.createElement("span",{className:"hidden-xs"},o.createElement(n.Button,{disabled:this.state.disable,level:"link",size:"lg",tooltip:l.default("导出页面数据为Excel"),placement:"bottom",onClick:this.exportToExcel},o.createElement("i",{className:"fa fa-file-excel-o"}))):null},t}(o.PureComponent);t.ExportPageExcel=i});
;sugar.define("sugar:sites/group/report/report.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=e("sugar:node_modules/tslib/tslib.js"),a=e("sugar:utils/i18n.ts"),o=e("sugar:node_modules/react/index.js"),s=e("sugar:node_modules/react-document-title/index.js"),n=e("sugar:stores/index.ts"),l=e("sugar:node_modules/mobx/lib/mobx.js"),i=e("sugar:node_modules/classnames/index.js"),p=e("sugar:utils/url.ts"),d=e("sugar:node_modules/amis/lib/index.js"),u=e("sugar:node_modules/react-router/lib/index.js"),c=e("sugar:sites/group/report/unauthorized.tsx"),m=e("sugar:widgets/report-body/report-content.tsx"),g=e("sugar:widgets/report-body/iframe.tsx"),h=e("sugar:sites/group/report/report-collection.tsx"),b=e("sugar:sites/group/report/auto-email.tsx"),f=e("sugar:sites/group/report/report-publish.tsx"),x=e("sugar:node_modules/xss/lib/index.js"),E=e("sugar:utils/xssOption.ts"),y=e("sugar:utils/common-helper.ts"),v=e("sugar:widgets/export-page-excel.tsx"),P=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.collectFlag=0,t}return r.__extends(t,e),t.prototype.componentWillMount=function(){this.props.assist.setCurrentPageType("report"),this.rememberPath=this.rememberPath.bind(this),this.props.report.load(this.props.group.data.hash,this.props.routeParams.report)},t.prototype.componentWillReceiveProps=function(e){var t=this.props;e.routeParams.report!==t.routeParams.report&&(this.rememberPath(e),this.props.report.load(this.props.group.data.hash,e.routeParams.report))},t.prototype.componentDidMount=function(){this.rememberPath(this.props)},t.prototype.rememberPath=function(e){var t=e.location.pathname,r=e.group.data.hash,a=e.group.data.key;0===t.indexOf("/group/"+a+"/")&&(e.assist.rememberGroupPath(r,t),e.assist.rememberGroupHistory(r,t))},t.prototype.componentWillUnmount=function(){this.props.assist.setCurrentPageType(""),this.props.chart.hubMap.clearChartHub(),this.props.condition.hubMap.clearConditionHub()},t.prototype.render=function(){var e=this.props,t=e.group,r=e.report,n=e.reportTree,l=e.user,P=e.routeParams,_=e.chart,N=e.condition;return"pending"===r.loadState||"done"===r.loadState&&!r.data.hash?o.createElement(d.Spinner,{overlay:!0,size:"lg"}):"error"===r.loadState?"AuthorizeError"===r.loadError.type?o.createElement(c.default,{message:r.loadError.message,reportInfo:r.loadError.data.data,admins:t.data.admins,reportUrl:p.host+"/group/"+t.data.key+"/report/"+P.report,me:l}):o.createElement("h3",{className:"text--center text-danger"},a.default(r.loadError.message||"请求错误")):o.createElement(s,{title:r.data.name,key:"content"},o.createElement("div",{className:"full-box d-flex flex-col"},o.createElement("div",{className:"bg-white wrapper lter b-b clearfix",key:"report-header",style:{padding:"12px 15px"}},o.createElement("span",{className:"m-n font-thin fs-18"},r.data.name,r.data.remark?o.createElement(d.TooltipWrapper,{tooltip:x(r.data.remark,E.xssOption),placement:"bottom"},o.createElement("i",{className:"fa fa-question-circle m-l-sm hidden-xs"})):null),o.createElement("div",{className:"d-inline-block pull-right page-title-toolbar"},o.createElement("span",{className:i("hidden-xs",{hidden:!t.isAdmin||!r.data.isAncestorPublic&&!r.data.isPublic})},o.createElement(d.Button,{level:"link",size:"lg",tooltip:a.default(r.data.isPublic?"页面已在空间内公开":"祖先目录已在空间内公开"),placement:"bottom"},o.createElement("i",{className:"fa fa-eye text-danger"}))),1!==r.data.type||y.isMobile?null:o.createElement(v.ExportPageExcel,{name:r.data.name,chart:_,show:!r.data.config.banDownLoad}),o.createElement("span",{className:i("hidden-xs",{hidden:!t.isAdmin||!r.data.isAncestorDev&&!r.data.isDev})},o.createElement(d.Button,{level:"link",size:"lg",tooltip:a.default(r.data.isDev?"页面处于开发模式，除空间管理员外不可见":"祖先目录处于开发模式，除空间管理员外不可见"),placement:"bottom"},o.createElement("i",{className:"fa fa-cogs text-danger"}))),o.createElement(h.default,{report:r}),r.canEdit&&o.createElement(b.default,{report:r,groupHash:t.data.hash}),o.createElement("span",{className:"hidden-xs"},o.createElement(u.Link,{to:"/group/"+t.data.key+"/preview/report/"+P.report},o.createElement(d.Button,{level:"link",size:"lg",tooltip:a.default("全屏预览"),placement:"bottom"},o.createElement("i",{className:"fa fa-expand"})))),r.canEdit?o.createElement(f.default,{reportTree:n,report:r,groupHash:t.data.hash}):null,o.createElement("span",{className:i("hidden-xs",{hidden:!r.canEdit||1!==r.data.type||!r.data.editable})},o.createElement(u.Link,{to:"/group/"+t.data.key+"/edit/report/"+P.report},o.createElement(d.Button,{level:"link",size:"lg",tooltip:a.default("编辑"),placement:"bottom"},o.createElement("i",{className:"fa fa-pencil"})))))),o.createElement("div",{className:"flex-1"},2===r.data.type?o.createElement(g.default,{src:r.data.url}):3===r.data.type?null:o.createElement("div",{className:y.isMobile?"wrapper-xxs":"wrapper-sm"},o.createElement(m.default,{mode:"normal",chartStore:_,conditionStore:N,report:r})))))},t.displayName="Report",r.__decorate([l.observable,r.__metadata("design:type",Object)],t.prototype,"collectFlag",void 0),t=r.__decorate([n.inject(function(e){return{assist:e.assist,user:e.user.current,group:e.group.current,report:e.report.current,reportTree:e.report.tree,chart:e.chart,condition:e.condition}}),n.observer],t)}(o.Component);t.default=P});
;sugar.define("sugar:widgets/ctrl-panel/explore-ctrl.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=e("sugar:node_modules/tslib/tslib.js"),r=e("sugar:utils/i18n.ts"),n=e("sugar:node_modules/react/index.js"),s=e("sugar:stores/index.ts"),o=e("sugar:sites/amis-renderer.tsx"),l=e("sugar:node_modules/lodash/cloneDeep.js"),i=e("sugar:widgets/charts/theme/_register-theme.ts"),u=e("sugar:utils/exception.ts"),d=e("sugar:utils/tree.ts"),p=e("sugar:sites/group/manage/data-model/data-model.tsx"),c=e("sugar:sites/group/manage/chart-theme/chart-theme-ctrl.tsx"),m=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.componentWillMount=function(){},t.prototype.componentDidCatch=function(e,t){u.captureException(e,t)},t.prototype.render=function(){var e=this.props,t=e.reportEntity,a=e.updateReport,s=l(t.toJSON());s.config.theme=s.config.theme||"sugar";var u=this.props.dataModelTreeList;if("done"===u.loadState&&u.data&&0===u.data.length)return n.createElement("div",{className:"text--center"},r.default("该AI探索页未配置数据模型"));var m=u.data||[];m=d.map(m,function(e){var t=e.name;return e.isDir||(e.nlpOpen?0===e.nlpState||1===e.nlpState?t+="("+r.default("训练中")+")":-1===e.nlpState&&(t+="("+r.default("训练错误")+")"):t+="("+r.default("未开启")+")"),{value:e.value,label:t,children:e.isDir?e.children||[]:void 0}});var g={type:"page",bodyClassName:"wrapper",title:"",body:{title:"",type:"form",wrapWithPanel:!1,controls:[{name:"config.theme",children:function(e){var t=e.onChange;return n.createElement(c.ChartThemeSelect,{themes:i.reportThemes,onChange:t})}}]}};return window.sugarConfig.enableNLP&&g.body.controls.push({label:r.default("选择'「"+p.nlpName+"」'功能查询的模型范围"),placeholder:r.default("该AI探索页未配置模型"),type:"tree",name:"config.dataModelHashs",withChildren:!0,joinValues:!1,extractValue:!0,multiple:!0,options:m}),n.createElement(o.default,{onChange:a,data:s,schema:g})},t.displayName="ExploreCtrl",t=a.__decorate([s.inject(function(e){return{group:e.group.current,dataModelTreeList:e.dataModel.treeList}}),s.observer],t)}(n.Component);t.default=m});
;sugar.define("sugar:widgets/ctrl-panel/report-index.tsx",function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=t("sugar:node_modules/tslib/tslib.js"),n=t("sugar:utils/i18n.ts"),a=t("sugar:node_modules/react/index.js"),d=t("sugar:stores/index.ts"),o=t("sugar:widgets/ctrl-panel/report-ctrl.tsx"),i=t("sugar:widgets/ctrl-panel/chart-ctrl.tsx"),l=t("sugar:widgets/ctrl-panel/condition-ctrl.tsx"),s=t("sugar:widgets/ctrl-panel/explore-ctrl.tsx"),u=t("sugar:node_modules/amis/lib/index.js"),p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.__extends(e,t),e.prototype.componentWillMount=function(){},e.prototype.render=function(){var t=this.props,e=t.editor,r=t.report,d=t.chartStore,p=t.conditionStore,c=t.sqlModelStore;if(e.target.loading)return a.createElement(u.Spinner,{overlay:!0});if("report"===e.target.type)return 3===r.data.type?a.createElement(s.default,{reportEntity:r.data,updateReport:r.update}):a.createElement(o.default,{reportEntity:r.data,updateReport:r.update});if("chart"===e.target.type){var f=d.list.data.find(function(t){return t.frontendId===e.target.frontendId}),g=d.getChartHub(e.target.frontendId);return f?a.createElement(i.default,{chartEntity:f,chartHub:g,updateChart:f.update,sqlModelStore:c}):n.default("控制面板错误：未找到对应的图表的配置数据！")}if("condition"===e.target.type||"conditionList"===e.target.type){var y=p.list.data.find(function(t){return t.frontendId===e.target.frontendId});return y?a.createElement(l.default,{conditionEntity:y,updateCondition:y.update,chartList:d.list.data,conditionList:p.list.data,sqlModelStore:c}):n.default("控制面板错误：未找到对应的过滤条件的配置数据！")}return a.createElement("div",null,n.default("控制面板Error"))},e.displayName="ReportCtrlIndex",e=r.__decorate([d.observer],e)}(a.Component);e.default=p});
;sugar.define("sugar:widgets/editor/lock-access.tsx",function(e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var t=e("sugar:node_modules/tslib/tslib.js"),s=e("sugar:utils/i18n.ts"),o=e("sugar:node_modules/react/index.js"),a=e("sugar:node_modules/amis/lib/index.js"),l=e("sugar:stores/index.ts"),i=e("sugar:widgets/error.tsx");r.default=function(e){var r;return l.observer((r=function(r){function l(){var e=null!==r&&r.apply(this,arguments)||this;return e.returnUrl="",e}return t.__extends(l,r),l.prototype.componentWillMount=function(){this.handleCancel=this.handleCancel.bind(this),this.habdleGrabLock=this.habdleGrabLock.bind(this),"report"===this.props.editorType?(this.props.editor.lockAccess.load(this.props.routeParams.report,"report"),this.returnUrl="/group/"+this.props.group.data.key+"/report/"+this.props.routeParams.report):"dashboard"===this.props.editorType?(this.props.editor.lockAccess.load(this.props.routeParams.dashboard,"dashboard"),this.returnUrl="/group/"+this.props.group.data.key+"/dashboard/"+this.props.routeParams.dashboard):"dataModel"===this.props.editorType?(this.props.editor.lockAccess.load(this.props.routeParams.dataModel,"dataModel"),this.returnUrl="/group/"+this.props.group.data.key+"/manage/dataModel"):"scene"===this.props.editorType&&(this.props.editor.lockAccess.load(this.props.routeParams.scene,"scene"),this.returnUrl="/group/"+this.props.group.data.key+"/scene/"+this.props.routeParams.scene)},l.prototype.handleCancel=function(){var e=this.props;e.router.push(this.returnUrl)},l.prototype.habdleGrabLock=function(){this.props.editor.lockAccess.grab()},l.prototype.render=function(){var r=this.props.editor;return"pending"===r.lockAccess.loadState?o.createElement(a.Spinner,{overlay:!0,size:"lg"}):"error"===r.lockAccess.loadState?o.createElement(i.default,{msg:r.lockAccess.loadError.message||s.default("编辑锁准入错误"),links:[{to:this.returnUrl,label:s.default("返回空间")}]}):"otherTab"===r.lockAccess.lockState?o.createElement("div",{className:"container lock-grab text-center",style:{background:"white"}},o.createElement("div",{className:"lock-grab__tip"},s.default("您正在其他浏览器页面中编辑或上次未正常关闭页面，"),o.createElement("br",null),s.default("如果您选择『仍然编辑』将会导致您在其他编辑页面中未保存的内容丢失！")),o.createElement("div",{className:"lock-grab__btns"},o.createElement(a.Button,{onClick:this.habdleGrabLock},s.default("仍然编辑")),o.createElement(a.Button,{level:"primary",onClick:this.handleCancel,className:"m-l-md"},s.default("取消")))):o.createElement(e,t.__assign({},this.props))},l}(o.Component),r.displayName="LockAccessHOC",r))}});
;sugar.define("sugar:widgets/editor/lockheartbeat-and-beforeunload.tsx",function(e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o=e("sugar:node_modules/tslib/tslib.js"),t=e("sugar:utils/i18n.ts"),s=e("sugar:node_modules/react/index.js"),a=e("sugar:node_modules/amis/lib/index.js"),p=e("sugar:stores/index.ts"),d=e("sugar:node_modules/lodash/debounce.js"),i=45e3,n=9e5;r.default=function(e){var r;return p.observer((r=function(r){function p(){var e=null!==r&&r.apply(this,arguments)||this;return e.hasUnlocked=!1,e.heartBeatInterval=0,e}return o.__extends(p,r),p.prototype.componentWillMount=function(){this.routerWillLeave=this.routerWillLeave.bind(this),this.clickHandler=d(this.clickHandler.bind(this),2e3),this.heartBeat=this.heartBeat.bind(this),"report"===this.props.editorType?this.props.editor.lock(this.props.routeParams.report,"report"):"dashboard"===this.props.editorType?this.props.editor.lock(this.props.routeParams.dashboard,"dashboard"):"dataModel"===this.props.editorType?this.props.editor.lock(this.props.routeParams.dataModel,"dataModel"):"scene"===this.props.editorType&&this.props.editor.lock(this.props.routeParams.scene,"scene")},p.prototype.componentDidMount=function(){window.onbeforeunload=this.routerWillLeave,this.props.router.setRouteLeaveHook(this.props.route,this.routerWillLeave),window.addEventListener("click",this.clickHandler),this.heartBeatInterval=setInterval(this.heartBeat,i)},p.prototype.componentWillUnmount=function(){window.onbeforeunload=null,window.removeEventListener("click",this.clickHandler),clearInterval(this.heartBeatInterval),this.hasUnlocked||("report"===this.props.editorType?this.props.editor.unlock(this.props.routeParams.report,"report"):"dashboard"===this.props.editorType?this.props.editor.unlock(this.props.routeParams.dashboard,"dashboard"):"dataModel"===this.props.editorType?this.props.editor.unlock(this.props.routeParams.dataModel,"dataModel"):"scene"===this.props.editorType&&this.props.editor.unlock(this.props.routeParams.scene,"scene"),this.hasUnlocked=!0)},p.prototype.routerWillLeave=function(){return this.props.editor.hasModified?t.default("修改还未保存，确定要离开？"):void(this.hasUnlocked||("report"===this.props.editorType?this.props.editor.unlock(this.props.routeParams.report,"report"):"dashboard"===this.props.editorType?this.props.editor.unlock(this.props.routeParams.dashboard,"dashboard"):"dataModel"===this.props.editorType?this.props.editor.unlock(this.props.routeParams.dataModel,"dataModel"):"scene"===this.props.editorType&&this.props.editor.unlock(this.props.routeParams.scene,"scene"),this.hasUnlocked=!0))},p.prototype.clickHandler=function(){this.props.editor.updateModifiedTime()},p.prototype.heartBeat=function(){var e=this,r=this.props,o=r.editor.modifiedTime,s=r.editor.lockSyncTime,p="";"report"===this.props.editorType?p=r.routeParams.report:"dashboard"===this.props.editorType?p=r.routeParams.dashboard:"dataModel"===this.props.editorType?p=r.routeParams.dataModel:"scene"===this.props.editorType&&(p=r.routeParams.scene),+new Date-+o>n?r.editor.isMyLock(p,this.props.editorType).then(function(o){var s=o.res,d=o.state;"done"===d&&(!s||s.data!==!0&&1!==s.data?(r.editor.setModified(!1),"report"===e.props.editorType?r.router.push("/group/"+r.group.data.key+"/report/"+p):"dashboard"===e.props.editorType?r.router.push("/group/"+r.group.data.key+"/dashboard/"+p):"dataModel"===e.props.editorType?r.router.push("/group/"+r.group.data.key+"/manage/dataModel"):"scene"===e.props.editorType&&r.router.push("/group/"+r.group.data.key+"/scene/"+p),a.toast.error(t.default("长时间没编辑，并且编辑锁已经不是当前会话的了，直接退出"))):r.editor.save(r.group.data.hash,p,e.props.editorType).then(function(){r.editor.setModified(!1),"report"===e.props.editorType?r.router.push("/group/"+r.group.data.key+"/report/"+p):"dashboard"===e.props.editorType?r.router.push("/group/"+r.group.data.key+"/dashboard/"+p):"dataModel"===e.props.editorType?r.router.push("/group/"+r.group.data.key+"/manage/dataModel"):"scene"===e.props.editorType&&r.router.push("/group/"+r.group.data.key+"/scene/"+p),a.toast.info(t.default("长时间没编辑，自动保存并退出"))}))}).catch(function(){a.toast.error(t.default("判断编辑锁是否属于当前会话错误！"))}):o>s&&r.editor.syncLock(p,this.props.editorType).then(function(o){var s=o.res,d=o.state;"done"===d&&(!s||s.data!==!1&&0!==s.data||(r.editor.setModified(!1),"report"===e.props.editorType?r.router.push("/group/"+r.group.data.key+"/report/"+p):"dashboard"===e.props.editorType?r.router.push("/group/"+r.group.data.key+"/dashboard/"+p):"dataModel"===e.props.editorType?r.router.push("/group/"+r.group.data.key+"/manage/dataModel"):"scene"===e.props.editorType&&r.router.push("/group/"+r.group.data.key+"/scene/"+p),a.toast.error(t.default("编辑锁已经不是当前会话的了，直接退出"))))}).catch(function(){a.toast.error(t.default("编辑锁同步失败，建议保存并退出"))})},p.prototype.render=function(){return s.createElement(e,o.__assign({},this.props))},p}(s.Component),r.displayName="LockHeartBeat",r))}});
;sugar.define("sugar:widgets/editor/chart-switcher/chart-switcher.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=e("sugar:node_modules/tslib/tslib.js"),r=e("sugar:utils/i18n.ts"),n=e("sugar:node_modules/react/index.js"),i=e("sugar:stores/index.ts"),s=e("sugar:widgets/charts/chart-manager.tsx"),l=e("sugar:widgets/editor/toolbar.tsx"),c=e("sugar:widgets/product-type/product-type-modal.tsx"),o=e("sugar:utils/data-model-helper.ts"),u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={tip:null},t}return a.__extends(t,e),t.prototype.switchChart=function(e,t){return l.canUseChart(t.type,t)?void e.switchChartType(t):void c.showUpdate("product-type-chart")},t.prototype.setChartNeedTip=function(e,t){if(e&&t){var a=t.chartEigens||[],i=a;if(t.useChartEigenIndex){i=[];for(var s=0,l=t.useChartEigenIndex;s<l.length;s++){var c=l[s];i.push(a[c])}}if(i.length){var u=e.getCanSwitchChartEigen(i)||[],d=[];d.push(1===i.length?n.createElement("div",{key:"need1"},r.default("字段需求：")):n.createElement("div",{key:"need2"},r.default("字段满足下列需求之一：")));for(var h=0;h<i.length;h++){var m=u.includes(h);d.push(n.createElement("li",{key:h,className:m?"text-info":"text-danger"},o.getMinDemandOfChartEigen(i[h])))}this.setState({tip:d})}}else this.setState({tip:null})},t.prototype.getChartList=function(e){var t=this,a=s.getChartsWithVariants().filter(function(e){return e.chartEigens}),r={};l.getChartsByKind(r,a,this.props.isDash);var i=Object.keys(l.chartKinds).map(function(a,i){if(["interaction","material","conditions"].includes(a))return null;var s=r[a],c=n.createElement("div",{key:i,className:"list-container"},n.createElement("div",{className:"tool-list clearfix"},s.charts.map(function(a,r){var i=null;return a.hasOwnProperty("charts")?a.charts.length&&(i=n.createElement("ul",{key:r,className:"tool-list clearfix"},n.createElement("li",{key:"title",className:"tool-list-title"},a.name),a.charts.map(function(a,r){return n.createElement("li",{key:r,onClick:function(){return t.switchChart(e,a)},onMouseOver:function(){return t.setChartNeedTip(e,a)},onMouseOut:function(){return t.setChartNeedTip()}},n.createElement("span",{className:"tool-item"},n.createElement("div",{className:"tool-item__icon "+a.iconClassName},l.canUseChart(a.type,a)?null:n.createElement("div",{className:"tool-item__forbidden"},n.createElement("i",{className:"fa fa-lock","aria-hidden":"true"}))),n.createElement("div",{className:"tool-item__name"},a.name)))}))):i=[0===r?n.createElement("li",{key:"title",className:"tool-list-title"},s.name):null,n.createElement("li",{key:r,onClick:function(){return t.switchChart(e,a)},onMouseOver:function(){return t.setChartNeedTip(e,a)},onMouseOut:function(){return t.setChartNeedTip()}},n.createElement("span",{className:"tool-item"},n.createElement("div",{className:"tool-item__icon "+a.iconClassName},l.canUseChart(a.type)?null:n.createElement("div",{className:"tool-item__forbidden"},n.createElement("i",{className:"fa fa-lock","aria-hidden":"true"}))),n.createElement("div",{className:"tool-item__name"},a.name)))],i})));return c});return i},t.prototype.render=function(){var e=this.props,t=e.chartStore,a=e.editor,i=this.state.tip;if(!window.sugarConfig.enableChartRecommend)return null;if("chart"===a.target.type){var l=t.list.data.find(function(e){return e.frontendId===a.target.frontendId});if(l&&"dataModel"===l.dataType&&"smart-chart"!==l.type){var c=s.getChartByType(l.type);if(c&&c.chartEigens)return n.createElement("div",{className:"chart-switcher"},n.createElement("i",{className:"fa fa-refresh"}),n.createElement("span",null," ",r.default("切换图表类型")),n.createElement("div",{className:"chart-switcher__container"},this.getChartList(l)),i?n.createElement("div",{className:"chart-switcher__tip"},i):null)}}return null},t.displayName="ChartSwitcher",t=a.__decorate([i.observer],t)}(n.Component);t.default=u});
;sugar.define("sugar:sites/group/report-edit/editor.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=e("sugar:node_modules/tslib/tslib.js"),i=e("sugar:utils/i18n.ts"),s=e("sugar:node_modules/react/index.js"),n=e("sugar:node_modules/react-document-title/index.js"),o=e("sugar:stores/index.ts"),r=e("sugar:node_modules/classnames/index.js"),d=e("sugar:node_modules/amis/lib/index.js"),l=e("sugar:widgets/error.tsx"),c=e("sugar:widgets/confirm.tsx"),h=e("sugar:widgets/editor/toolbar.tsx"),p=e("sugar:widgets/report-body/report-content.tsx"),u=e("sugar:widgets/ctrl-panel/report-index.tsx"),m=e("sugar:widgets/feedback.tsx"),f=e("sugar:node_modules/react-dnd/lib/index.js"),g=e("sugar:node_modules/react-dnd-html5-backend/lib/index.js"),v=e("sugar:widgets/editor/lock-access.tsx"),E=e("sugar:widgets/editor/lockheartbeat-and-beforeunload.tsx"),b=e("sugar:widgets/charts/chart-manager.tsx"),y=e("sugar:widgets/conditions/condition-manager.tsx"),M=e("sugar:widgets/editor/chart-switcher/chart-switcher.tsx"),C=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.resizing=!1,t.startX=0,t.startWidth=0,t.width=0,t}return a.__extends(t,e),t.prototype.componentWillMount=function(){this.width=this.props.assist.ctrlPanelWidth,this.setState({ctrlPanelWidth:this.width,hover:!1,openExitDialog:!1}),this.multiDeleteCharts=this.multiDeleteCharts.bind(this),this.handleMouseDown=this.handleMouseDown.bind(this),this.handleMouseMove=this.handleMouseMove.bind(this),this.handleMouseUp=this.handleMouseUp.bind(this),this.removeWindowEvents=this.removeWindowEvents.bind(this),this.removeDocumentEvents=this.removeDocumentEvents.bind(this),this.toggleCtrlPanelMin=this.toggleCtrlPanelMin.bind(this),this.handleMouseOver=this.handleMouseOver.bind(this),this.handleMouseOut=this.handleMouseOut.bind(this),this.getOut=this.getOut.bind(this),this.handleSave=this.handleSave.bind(this),this.handleCancelExit=this.handleCancelExit.bind(this),this.justExit=this.justExit.bind(this),this.saveThenExit=this.saveThenExit.bind(this),this.handleClickOnEditorBody=this.handleClickOnEditorBody.bind(this),this.handlePreview=this.handlePreview.bind(this),this.undo=this.undo.bind(this),this.redo=this.redo.bind(this),this.onKeyDown=this.onKeyDown.bind(this),this.onCopy=this.onCopy.bind(this),this.onCut=this.onCut.bind(this),this.onPaste=this.onPaste.bind(this),document.addEventListener("keydown",this.onKeyDown),document.addEventListener("copy",this.onCopy),document.addEventListener("cut",this.onCut),document.addEventListener("paste",this.onPaste),this.props.assist.setCurrentPageType("report"),this.props.editor.initialize(this.props.group.data.hash,this.props.routeParams.report,this.props.editorType),window.sugarConfig.enableDataModel&&this.props.dataModelTreeList.loadData()},t.prototype.componentWillUnmount=function(){this.removeWindowEvents(),this.removeDocumentEvents(),this.props.assist.setCurrentPageType(""),this.props.chart.hubMap.clearChartHub(),this.props.condition.hubMap.clearConditionHub()},t.prototype.undo=function(){o.undoManager.canUndo&&(this.props.editor.setActiveTarget("report"),o.undoManager.undo())},t.prototype.redo=function(){o.undoManager.canRedo&&o.undoManager.redo()},t.prototype.handleClickOnEditorBody=function(){var e=this.props.editor;"report"!==e.target.type&&e.setActiveTarget("report")},t.prototype.handleMouseDown=function(e){this.startX=e.clientX,this.startWidth=this.state.ctrlPanelWidth,this.resizing=!0,window.addEventListener("mouseup",this.handleMouseUp),window.addEventListener("mousemove",this.handleMouseMove),e.stopPropagation&&e.stopPropagation()},t.prototype.handleMouseMove=function(e){var t=this.startX-e.clientX;e.preventDefault(),this.width=Math.min(600,Math.max(380,this.startWidth+t)),this.setState({ctrlPanelWidth:this.width})},t.prototype.handleMouseUp=function(){this.resizing=!1,this.removeWindowEvents(),this.props.assist.setCtrlPanelWidth(this.width)},t.prototype.removeWindowEvents=function(){window.removeEventListener("mouseup",this.handleMouseUp),window.removeEventListener("mousemove",this.handleMouseMove)},t.prototype.removeDocumentEvents=function(){document.removeEventListener("keydown",this.onKeyDown),document.removeEventListener("copy",this.onCopy),document.removeEventListener("cut",this.onCut),document.removeEventListener("paste",this.onPaste)},t.prototype.handleMouseOver=function(){this.props.assist.ctrlPanelMin&&this.setState({hover:!0})},t.prototype.handleMouseOut=function(e){var t=e.clientX,a=e.clientY,i=document.body.clientWidth;this.props.assist.ctrlPanelMin&&!this.resizing&&(i-t>=this.state.ctrlPanelWidth||65>a)&&this.setState({hover:!1})},t.prototype.multiDeleteCharts=function(e){var t=this;c.confirm(i.default("确定要删除选中的"+e+"?")).then(function(){t.props.editor.deleteCharts(0)}).catch(function(){})},t.prototype.toggleCtrlPanelMin=function(){this.props.assist.toggleCtrlPanelMin()},t.prototype._isInTextEditor=function(e){var t=window.getSelection();return t&&""!=t.toString()?!0:e.target&&"INPUT"!==e.target.tagName&&"TEXTAREA"!==e.target.tagName&&"fr-element fr-view"!==e.target.className?!1:!0},t.prototype.onKeyDown=function(e){if(!this._isInTextEditor(e)){if((8===e.keyCode||46===e.keyCode)&&this.props.editor.target.frontendId){var t=this.props.editor.target.type,a="";switch(t){case"chart":a=i.default("图表");break;case"condition":a=i.default("过滤条件");break;case"conditionList":a=i.default("过滤条件组")}this.multiDeleteCharts(a)}(e.ctrlKey||e.metaKey)&&83===e.keyCode&&(this.handleSave(),e.preventDefault()),(e.ctrlKey||e.metaKey)&&68===e.keyCode&&(this.props.editor.copyActiveChart(),e.preventDefault()),(e.ctrlKey||e.metaKey)&&90===e.keyCode&&(e.shiftKey?this.redo():this.undo())}},t.prototype.onCopy=function(e){this._isInTextEditor(e)||this.props.editor.copyToClipboard(e)},t.prototype.onCut=function(e){this._isInTextEditor(e)||this.props.editor.cupToClipboard(e)},t.prototype.onPaste=function(e){this._isInTextEditor(e)||this.props.editor.clipboardPaste(e)},t.prototype.getOut=function(){var e=this.props;e.editor.hasModified?this.setState({openExitDialog:!0}):this.justExit()},t.prototype.handleSave=function(){this.props.editor.hasModified&&"pending"!==this.props.editor.savingState&&this.props.editor.save(this.props.group.data.hash,this.props.routeParams.report,"report")},t.prototype.handlePreview=function(){var e=this;this.props.editor.hasModified&&"pending"!==this.props.editor.savingState?this.props.editor.save(this.props.group.data.hash,this.props.routeParams.report).then(function(){window.open("/group/"+e.props.group.data.key+"/preview/report/"+e.props.routeParams.report+"?hideReturnButton=1")}):window.open("/group/"+this.props.group.data.key+"/preview/report/"+this.props.routeParams.report+"?hideReturnButton=1")},t.prototype.handleCancelExit=function(){this.setState({openExitDialog:!1})},t.prototype.justExit=function(){var e=this.props;e.editor.setModified(!1),e.router.push("/group/"+e.group.data.key+"/report/"+e.routeParams.report)},t.prototype.saveThenExit=function(){var e=this;this.props.editor.hasModified&&"pending"!==this.props.editor.savingState&&this.props.editor.save(this.props.group.data.hash,this.props.routeParams.report,"report").then(function(t){"done"===t.state&&e.justExit()})},t.prototype.render=function(){var e=this.props,t=e.group,a=e.report,c=(e.user,e.routeParams),f=e.editor,g=e.chart,v=e.condition,E=e.sqlModel,C=e.company,w=Math.max(this.state.ctrlPanelWidth,380),x=this.props.assist.ctrlPanelMin;if("pending"===a.loadState||"done"===a.loadState&&!a.data.hash)return s.createElement(d.Spinner,{overlay:!0,size:"lg"});if("error"===a.loadState)return s.createElement(l.default,{msg:i.default(a.loadError.message||"请求错误"),links:[{to:"/group/"+t.data.key+"/report/"+c.report,label:i.default("返回报表空间")}]});if(!a.data.editable)return s.createElement(l.default,{msg:i.default("此报表禁止编辑"),links:[{to:"/group/"+t.data.key+"/report/"+c.report,label:i.default("返回报表空间")}]});var N=i.default("控制面板"),_=s.createElement("a",{href:"/docs/Chart-Report-Action",target:"_blank"},s.createElement("i",{className:"fa fa-question-circle-o"})," ",i.default("报表页面整体配置")),P=f.target.frontendId;if("chart"===f.target.type){var k=g.list.data.filter(function(e){return e.frontendId===P})[0],S=b.getChartByType(k.type);if(k&&S){N=i.default("控制面板 | 「"+(k.dynamicName||k.name)+"」");var T="/docs/Chart-"+S.type,D=S.docName||S.name;"table"===S.type&&"crossPivot"===k.dataConfig.tableType&&(T="/docs/Chart-pivotTable",D=i.default("交叉透视表")),"table"===S.type&&"retention"===k.dataConfig.tableType&&(T="/docs/Chart-retentionTable",D=i.default("留存报表")),_=s.createElement("a",{href:T,target:"_blank"},s.createElement("i",{className:"fa fa-question-circle-o"})," ",i.default("「"+D+"」文档"))}}else if("condition"===f.target.type||"conditionList"===f.target.type){var O=v.list.data.filter(function(e){return e.frontendId===P})[0],W=y.getConditionByType(O.type);O&&W&&(N=i.default("控制面板 | 「"+O.label+"」"),_=s.createElement("a",{href:"/docs/Condition-"+W.type,target:"_blank"},s.createElement("i",{className:"fa fa-question-circle-o"}),i.default("「"+W.name+"」文档")))}return s.createElement(n,{title:""+a.data.name+i.default("-编辑")||i.default("未命名-编辑")},s.createElement("div",{className:"editor-container"},s.createElement("header",{className:"box-shadow bg-dark"},s.createElement("div",{className:"navbar-header"},s.createElement("div",{className:"navbar-brand text-lt"},s.createElement("img",{src:C.avatar||window.sugarConfig.logo||"/static/logo.png",className:"navbar-brand__logo",alt:"."}),s.createElement("span",{className:"m-l"},window.sugarConfig.name))),s.createElement("div",{className:"editor-toolbar hidden-xs"},s.createElement("div",{className:"editor-toolbar__left"},s.createElement("ul",{className:"btns-box"},s.createElement("li",{className:r("btn-item",{"btn-item__disabled":!o.undoManager.canUndo}),onClick:this.undo},s.createElement("div",{className:"btn-container"},s.createElement("i",{className:"fa fa-undo"}),s.createElement("span",{className:"btn-text"},i.default("撤销")))),s.createElement("li",{className:r("btn-item",{"btn-item__disabled":!o.undoManager.canRedo}),onClick:this.redo},s.createElement("div",{className:"btn-container"},s.createElement("i",{className:"fa fa-repeat"}),s.createElement("span",{className:"btn-text"},i.default("重做")))),s.createElement("li",{className:r("btn-item"),title:i.default("请使用键盘 ctrl+c 进行复制，可在别的页面用 ctrl+v 粘贴")},s.createElement("div",{className:"btn-container"},s.createElement("i",{className:"fa fa-copy"}),s.createElement("span",{className:"btn-text"},i.default("复制")))))),s.createElement("div",{className:"editor-toolbar__center"},s.createElement(h.default,{groupHash:t.data.hash,addChart:f.addChart,addCondition:f.addCondition})),s.createElement("div",{className:"editor-toolbar__right"},s.createElement("ul",{className:"btns-box"},s.createElement("li",{className:"btn-item"},s.createElement("a",{href:"/docs",target:"_blank"},s.createElement("div",{className:"btn-container"},s.createElement("i",{className:"fa fa-question"}),s.createElement("span",{className:"btn-text"},i.default("帮助文档"))))),s.createElement(m.default,{inEditor:!0})),s.createElement("div",{className:"cut-line"}),s.createElement("ul",{className:"btns-box"},s.createElement("li",{className:r("btn-item",{"btn-item__disabled":"pending"===f.savingState}),onClick:this.handlePreview},s.createElement("div",{className:"btn-container"},s.createElement("i",{className:"fa fa-expand"}),s.createElement("span",{className:"btn-text"},""+(f.hasModified?i.default("保存并"):"")+i.default("预览")))),s.createElement("li",{className:r("btn-item",{"btn-item__disabled":!f.hasModified||"pending"===f.savingState}),onClick:this.handleSave},s.createElement("div",{className:"btn-container"},s.createElement("i",{className:"fa fa-floppy-o"}),s.createElement("span",{className:"btn-text"},i.default("保存")))),s.createElement("li",{className:"btn-item",onClick:this.getOut},s.createElement("div",{className:"btn-container"},s.createElement("i",{className:"fa fa-times"}),s.createElement("span",{className:"btn-text"},i.default("退出")))))))),s.createElement("div",{id:"editor-body",className:"editor-body wrapper-sm",style:{right:x?40:w},onClick:this.handleClickOnEditorBody},s.createElement("div",{className:"editor-report-info",onClick:function(){return"report"!==f.target.type&&f.setActiveTarget("report")}},s.createElement("div",{className:r("editor-report-info__title",{active:"report"===f.target.type})},a.data.name||i.default("未命名"))),s.createElement(p.default,{mode:"editor",chartStore:g,conditionStore:v,editor:f,report:a})),s.createElement("div",{className:r("editor-ctrl-panel",{min:x,hover:this.state.hover}),onMouseOver:this.handleMouseOver,onMouseOut:this.handleMouseOut,style:{width:!x||this.state.hover?w:40}},s.createElement("div",{className:"min-banner"},i.default("控制面板")),s.createElement("div",{className:"resizer",onMouseDown:this.handleMouseDown}),s.createElement("div",{className:"editor-ctrl-panel__header"},s.createElement("i",{className:r("ctrl-panel-min-toggle fa",{"fa-angle-double-left":this.props.assist.ctrlPanelMin,"fa-angle-double-right":!this.props.assist.ctrlPanelMin}),onClick:this.toggleCtrlPanelMin}),s.createElement("div",{className:"ctrl-title"},N),s.createElement("div",{className:"ctrl-desc text-info"},_),s.createElement(M.default,{editor:f,chartStore:g})),s.createElement("div",{className:"editor-ctrl-panel__body"},s.createElement(u.default,{editor:f,report:a,chartStore:g,conditionStore:v,sqlModelStore:E}))),s.createElement(d.Modal,{show:this.state.openExitDialog},s.createElement(d.Modal.Header,{onClose:this.handleCancelExit},s.createElement(d.Modal.Title,null,i.default("退出"))),s.createElement(d.Modal.Body,null,i.default("您的修改未保存！！！『直接退出』将不会保存您所做的修改。")),s.createElement(d.Modal.Footer,null,s.createElement(d.Button,{disabled:"pending"===f.savingState,onClick:this.handleCancelExit},i.default("取消")),s.createElement(d.Button,{disabled:"pending"===f.savingState,onClick:this.justExit},i.default("直接退出")),s.createElement(d.Button,{disabled:"pending"===f.savingState,level:"primary",onClick:this.saveThenExit},i.default("保存并退出"))))))},t.displayName="ReportEditor",t=a.__decorate([f.DragDropContext(g.default),o.inject(function(e){return{assist:e.assist,user:e.user.current,group:e.group.current,report:e.report.current,editor:e.editor,editorType:"report",chart:e.chart,condition:e.condition,sqlModel:e.sqlModel,dataModelTreeList:e.dataModel.treeList,company:e.company.info}}),v.default,E.default,o.observer],t)}(s.Component);t.default=C});
;sugar.define("sugar:sites/self/index.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=e("sugar:node_modules/tslib/tslib.js"),s=e("sugar:node_modules/react/index.js"),r=e("sugar:stores/index.ts"),n=e("sugar:node_modules/react-router/lib/index.js"),o=e("sugar:node_modules/classnames/index.js"),l=e("sugar:node_modules/amis/lib/index.js"),i=e("sugar:node_modules/mobx/lib/mobx.js"),d=e("sugar:widgets/header/header.tsx"),u=e("sugar:widgets/fold-toggle.tsx"),c=e("sugar:widgets/mobile-aside-toggle.tsx"),m=e("sugar:widgets/login-info.tsx"),f=e("sugar:widgets/group-switch/group-switch.tsx"),g=e("sugar:widgets/aside/aside.tsx"),p=e("sugar:widgets/feedback.tsx"),h=e("sugar:utils/tree.ts"),b=e("sugar:utils/i18n.ts"),y=e("sugar:widgets/i18n.tsx"),x=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.editingUserInfo=0,t}return a.__extends(t,e),t.prototype.componentWillMount=function(){this.handleCloseModal=this.handleCloseModal.bind(this),this.props.selfReport.tree.load(),this.props.selfDashboard.list.load()},t.prototype.handleCloseModal=function(){this.editingUserInfo=0},t.prototype.render=function(){var e=this.props,t=e.user,a=e.company,r=e.asideFolded,i=e.mobileAsideOffScreen,x=e.selfReport,E=e.selfDashboard,w=(e.report,e.group),k=this.props.location.pathname;if("done"!==x.tree.loadState&&!x.tree.data)return s.createElement(l.Spinner,{overlay:!0,size:"lg"});var _=s.createElement(d.default,{brandName:b.default("个人中心"),brandInnerLink:"/i/home",logo:s.createElement("img",{src:a.avatar||window.sugarConfig.logo||"/static/logo.png",className:"navbar-brand__logo"}),nav:[s.createElement(u.default,{key:"foldToggle"}),s.createElement(f.default,{key:"groupSwitch",myGroups:w.myGroups,publicGroups:w.publicGroups})],mobileAsideToggle:s.createElement(c.default,null),rightNav:[s.createElement("li",{key:"groups"},s.createElement(n.Link,{to:"/groups"},b.default("空间广场"))),s.createElement("li",{key:"i"},s.createElement(n.Link,{to:"/i"},b.default("个人中心"))),window.sugarConfig.hideDocsLink?null:s.createElement("li",{key:"doc"},s.createElement("a",{href:"/docs",target:"_blank"},b.default("帮助文档"))),window.sugarConfig.hideDocsLink?null:s.createElement(p.default,{key:"feedback"}),s.createElement(y.default,{key:"i18n"}),s.createElement(m.default,{key:"login-info",user:t})]}),v=s.createElement(l.Spinner,{size:"md",spinnerClassName:"d-block ma-auto"});if("done"===x.tree.loadState&&"done"===E.list.loadState){var N=s.createElement("div",{className:"self__userInfo"},s.createElement("span",{className:"thumb-lg w-auto-folded avatar m-t-sm"},s.createElement("img",{className:"imageitem-img img-circle group-logo",src:t.avatar})),s.createElement("a",{className:"dropdown-toggle hidden-folded"},s.createElement("span",{className:"clear"},s.createElement("span",{className:"block m-t-sm"},s.createElement("strong",{className:"font-bold text-lt ng-binding"},t.realName)),s.createElement("span",{className:"text-muted text-xs block m-t-xs ng-binding"},t.email)))),S=h.map(x.tree.data,function(e){return{url:"/i/report/"+e.hash,icon:e.icon+(0===e.type?" text-info-dker":1===e.type?" text-report-ico":" text-report-ico"),name:e.name,children:e.children,isDir:0===e.type}}),C=E.list.data.map(function(e){return{url:"/i/dashboard/"+e.hash,icon:e.icon+" text-info-dker",name:e.name}}),j=[{url:"/i/manage/report",name:b.default("报表收藏管理"),icon:"fa fa-th"},{url:"/i/manage/dashboard",name:b.default("大屏收藏管理"),icon:"fa fa-line-chart"},{url:"/i/manage/user",name:b.default("个人信息管理"),icon:"fa fa-user"}],D=window.sugarConfig||{};"saas"===D.deployType&&j.push({url:"/i/manage/company",name:b.default("我的组织"),icon:"fa fa-building"}),v=s.createElement(g.default,{asideFolded:r,prefix:N,navs:[{title:C.length?"":b.default("我收藏的大屏"),children:C.length?[{url:"",icon:"fa fa-folder text-info-dker",name:b.default("我收藏的大屏"),children:C,isDir:!0}]:[],showEmpty:!0,emptyText:b.default("待收藏大屏...")},{type:"line"},{title:b.default("我收藏的报表"),children:S,showEmpty:!0,emptyText:b.default("待收藏报表...")},{type:"line"},{children:j}],locationPath:k})}return s.createElement(l.Layout,{header:_,footer:null,folded:r,className:o("page-layout-withAside",{"app-aside-wide":"wide"===w.current.data.navWidth,"app-dashboard-container":!!this.props.params.dashboard}),aside:v,offScreen:i,asideClassName:"bg-black"},this.props.children)},t.displayName="Self",a.__decorate([i.observable,a.__metadata("design:type",Object)],t.prototype,"editingUserInfo",void 0),t=a.__decorate([r.inject(function(e){return{assist:e.assist,company:e.company.info,user:e.user.current,asideFolded:e.assist.asideFolded,mobileAsideOffScreen:e.assist.mobileAsideOffScreen,group:e.group,report:e.report.current,selfReport:e.selfReport,selfDashboard:e.selfDashboard}}),r.observer],t)}(s.Component);t.default=x});
;sugar.define("sugar:sites/self/home/home.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=e("sugar:node_modules/tslib/tslib.js"),n=e("sugar:utils/i18n.ts"),r=e("sugar:node_modules/react/index.js"),a=e("sugar:node_modules/react-document-title/index.js"),o=e("sugar:stores/index.ts"),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s.__extends(t,e),t.prototype.componentDidMount=function(){var e=this.props.iPath;e&&"/i"!==e&&"/i/home"!==this.props.location.pathname&&this.props.router.replace(e)},t.prototype.render=function(){return r.createElement("div",{className:"text--center"},r.createElement(a,{title:n.default("个人中心")}),r.createElement("h3",{className:"text-info m-t-lg"},n.default("欢迎来到个人中心")),r.createElement("p",{className:"m-t"},n.default("您在报表空间中主动收藏的报表将会集中在个人中心中展示，通过左侧的导航进行页面切换；『收藏管理』可以对收藏的报表进行删改。如有权限问题请前往报表所在报表空间进行权限申请。")))},t.displayName="SelfHome",t=s.__decorate([o.inject(function(e){return{iPath:e.assist.iPaths}})],t)}(r.PureComponent);t.default=i});
;sugar.define("sugar:sites/self/manage/report/report.tsx",function(e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var t=e("sugar:node_modules/tslib/tslib.js"),r=e("sugar:utils/i18n.ts"),l=e("sugar:node_modules/react/index.js"),o=e("sugar:node_modules/react-document-title/index.js"),n=e("sugar:sites/amis-renderer.tsx"),s=e("sugar:stores/index.ts"),p=e("sugar:widgets/icon-selector/icon-selector.tsx"),i={title:r.default("新建文件夹"),body:{name:"sugar-self-report-folder-new",type:"form",mode:"normal",api:"post:/api/self/report",controls:[{name:"type",type:"hidden",value:0},{name:"name",label:r.default("名称"),type:"text",required:!0,validations:"maxLength:30"},{type:"divider"},{name:"remark",label:r.default("简介"),type:"text",validations:"maxLength:1024"},{type:"divider"},{type:"tree",label:r.default("父级页面"),source:"post:/api/self/report/getFormedTree",name:"parentHash",hideRoot:!1},{type:"divider"},{name:"icon",label:r.default("图标"),children:function(e){var a=e.onChange,o=e.value;return l.createElement(p.default,t.__assign({},{onChange:a,value:o},{containerClassName:"form-item",label:r.default("自定义图标（再次点击取消选中）"),height:200}))}}]}},d={title:r.default("批量移动"),body:{name:"sugar-self-report-folder-new",type:"form",mode:"horizontal",api:"put:/api/self/report/multiMove",controls:[{type:"hidden",name:"rows"},{type:"tree",label:r.default("父级页面"),source:"post:/api/self/report/getFormedTree",name:"parentHash",hideRoot:!1}]}},u={title:r.default("编辑「 `$name`」"),body:{api:"put:/api/self/report/$hash",name:"sugar-self-report-folder-edit",type:"form",mode:"normal",controls:[{name:"hash",type:"hidden"}].concat(i.body.controls)}},f={name:"sugar-selfReport-manage",aside:{type:"form",target:"sugar-selfReport-manage-table",name:"sugar-selfReport-manage-filter",wrapWithPanel:!1,submitText:null,submitOnChange:!0,className:"wrapper-xs",controls:[{type:"tree",rootLabel:r.default("顶级"),source:"post:/api/self/report/getFormedTree",placeholder:r.default("暂无子文件夹"),name:"parentHash",inputClassName:"no-border h-full",hideRoot:!1}]},toolbarClassName:"padder-md m-t-md",toolbar:[{type:"button-group",buttons:[{type:"button",label:r.default("新建文件夹"),level:"primary",actionType:"dialog",dialog:i,reload:"sugar-selfReport-manage-filter.parentHash,sugar-selfReport-manage-table"}]}],actionsClassName:"m-t-md",body:{type:"crud",name:"sugar-selfReport-manage-table",footable:{expand:"none"},api:"/api/self/report/getReportByParent?parentHash=$parentHash",initFetch:!0,switchPerPage:!1,syncLocation:!0,placeholder:r.default("没有页面"),draggable:!0,saveOrderApi:{method:"put",url:"/api/self/report/updateOrder",reload:"sugar-selfReport-manage-filter.parentHash"},bulkActions:[{label:r.default("批量删除"),actionType:"ajax",confirmText:r.default("您确定要取消收藏所选页面?"),api:"put:/api/self/report/multiDelete",reload:"sugar-selfReport-manage-filter.parentHash,sugar-selfReport-manage-table"},{label:r.default("批量移动"),actionType:"dialog",dialog:d,reload:"sugar-selfReport-manage-filter.parentHash,sugar-selfReport-manage-table"}],columns:[{type:"tpl",name:"name",label:r.default("页面"),innerClassName:"inline",tpl:'\n          <span class="m-b-xs">\n            <% if (data.icon)  { %>\n              <i class="<%- data.icon %>"></i>\n            <% } else if (data.type == 0) { %>\n              <i class="fa fa-folder"></i>\n            <% } %>\n            <% if (data.type == 0) { %>\n              <a data-link="?page=1&parentHash=<%= data.hash %>" class="text-info" href="#"><%- data.name %></a>\n            <% } else { %>\n              <%- data.name %>\n            <% } %>\n          </span>\n        '},{type:"text",name:"remark",label:r.default("备注"),breakpoint:"xs"},{type:"operation",width:200,label:r.default("操作"),breakpoint:"xs",buttons:[{size:"sm",actionType:"link",link:"/i/report/${hash}?haha=haha",label:r.default("查看"),hiddenOn:"type == 0",type:"button"},{size:"sm",actionType:"dialog",visibleOn:"type !== 0",dialog:u,reload:"sugar-selfReport-manage-filter.parentHash,sugar-selfReport-manage-table",label:r.default("编辑页面"),type:"button"},{size:"sm",actionType:"dialog",visibleOn:"type === 0",dialog:u,reload:"sugar-selfReport-manage-filter.parentHash,sugar-selfReport-manage-table",label:r.default("编辑文件夹"),type:"button"},{size:"sm",confirmText:r.default("您确定要取消收藏该页面?"),actionType:"ajax",api:"delete:/api/self/report/$hash",reload:"sugar-selfReport-manage-filter.parentHash,sugar-selfReport-manage-table",label:r.default("取消收藏"),type:"button"}]}]}},m=function(e){function a(){return null!==e&&e.apply(this,arguments)||this}return t.__extends(a,e),a.prototype.updateSelfTree=function(){this.props.selfReport.tree.load()},a.prototype.shouldComponentUpdate=function(e){return this.props.location!==e.location?!0:!1},a.prototype.render=function(){return l.createElement(o,{title:r.default("收藏管理")},l.createElement(n.default,{location:this.props.location,schema:f,update:this.updateSelfTree.bind(this)}))},a.displayName="SelfReportManage",a=t.__decorate([s.inject(function(e){return{selfReport:e.selfReport}})],a)}(l.Component);a.default=m});
;sugar.define("sugar:sites/self/manage/dashboard/dashboard.tsx",function(e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var t=e("sugar:node_modules/tslib/tslib.js"),s=e("sugar:utils/i18n.ts"),n=e("sugar:node_modules/react/index.js"),l=e("sugar:node_modules/react-document-title/index.js"),d=e("sugar:sites/amis-renderer.tsx"),o=e("sugar:stores/index.ts"),i=e("sugar:widgets/icon-selector/icon-selector.tsx"),r={title:s.default("编辑「 `$name`」"),body:{api:"put:/api/self/dashboard/$hash",name:"sugar-self-dashboard-edit",type:"form",mode:"normal",controls:[{name:"hash",type:"hidden"},{name:"name",label:s.default("收藏名称"),type:"text",required:!0,validations:"maxLength:30"},{type:"divider"},{name:"remark",label:s.default("简介"),type:"text",validations:"maxLength:1024"},{type:"divider"},{name:"icon",label:s.default("图标"),children:function(e){var a=e.onChange,l=e.value;return n.createElement(i.default,t.__assign({},{onChange:a,value:l},{containerClassName:"form-item",label:s.default("自定义图标（再次点击取消选中）"),height:200}))}}]}},u={name:"sugar-self-dashboard-manage",actionsClassName:"m-t-md",body:{type:"crud",name:"sugar-self-dashboard-manage-table",footable:{expand:"none"},api:"/api/self/dashboard/getList",title:s.default("大屏列表"),switchPerPage:!1,syncLocation:!1,placeholder:s.default("您还没有收藏大屏"),draggable:!0,saveOrderApi:{method:"put",url:"/api/self/dashboard/updateOrder"},bulkActions:[{label:s.default("批量删除"),actionType:"ajax",confirmText:s.default("您确定要取消收藏所选大屏?"),api:"put:/api/self/dashboard/multiDelete",reload:"sugar-self-dashboard-manage-table"}],columns:[{type:"tpl",name:"name",label:s.default("名称"),innerClassName:"inline",tpl:'\n          <span class="m-b-xs">\n            <% if (data.icon)  { %>\n              <i class="<%- data.icon %>"></i>\n            <% } else { %>\n              <i class="fa fa-line-chart"></i>\n            <% } %>\n            <%- data.name %>\n          </span>\n        '},{type:"text",name:"remark",label:s.default("备注"),breakpoint:"xs"},{type:"operation",width:200,label:s.default("操作"),breakpoint:"xs",buttons:[{size:"sm",actionType:"link",link:"/i/dashboard/${hash}",label:s.default("查看"),type:"button"},{size:"sm",actionType:"dialog",dialog:r,label:s.default("编辑页面"),type:"button"},{size:"sm",confirmText:s.default("您确定要取消收藏该页面?"),actionType:"ajax",api:"delete:/api/self/dashboard/$hash",reload:"sugar-self-dashboard-manage-table",label:s.default("取消收藏"),type:"button"}]}]}},p=function(e){function a(){return null!==e&&e.apply(this,arguments)||this}return t.__extends(a,e),a.prototype.updateSelfTree=function(){this.props.selfDashboard.list.load()},a.prototype.shouldComponentUpdate=function(e){return this.props.location!==e.location?!0:!1},a.prototype.render=function(){return n.createElement(l,{title:s.default("收藏管理")},n.createElement(d.default,{location:this.props.location,schema:u,update:this.updateSelfTree.bind(this)}))},a.displayName="SelfDashboardManage",a=t.__decorate([o.inject(function(e){return{selfDashboard:e.selfDashboard}})],a)}(n.Component);a.default=p});
;sugar.define("sugar:sites/self/manage/user-info/user-info.tsx",function(e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var t=e("sugar:node_modules/tslib/tslib.js"),r=e("sugar:utils/i18n.ts"),s=e("sugar:node_modules/react/index.js"),n=e("sugar:sites/amis-renderer.tsx"),o=e("sugar:stores/index.ts"),i=function(e){function a(){return null!==e&&e.apply(this,arguments)||this}return t.__extends(a,e),a.prototype.updateUserInfo=function(e){e.data.data&&e.data.data.realName&&this.props.user.changeRealNameAndAvatar(e.data.data.realName,e.data.data.avatar)},a.prototype.render=function(){var e=[];"password"===window.sugarConfig.loginType&&e.push({type:"button-toolbar",buttons:[{type:"button",label:r.default("修改密码"),actionType:"dialog",dialog:{title:r.default("修改密码"),actions:[{type:"button",actionType:"cancel",label:r.default("取消")},{type:"submit",label:r.default("保存"),level:"primary"}],body:{type:"form",name:"sugar-user-change-password",mode:"horizontal",horizontal:{left:"col-sm-3",right:"col-sm-9"},api:"put:/api/user/changePassword",controls:[{name:"oldPassword",label:r.default("原密码"),type:"password",validations:"maxLength:30",required:!0},{name:"newPassword",label:r.default("新密码"),type:"password",validations:"maxLength:30,minLength:5",required:!0},{name:"newPassword2",label:r.default("再次输入新密码"),type:"password",validations:"maxLength:30,minLength:5",required:!0}]}}}]});var a={type:"page",body:{type:"grid",columns:[{type:"page",md:8,body:{title:r.default("修改个人信息"),type:"form",api:"post:/api/user",controls:[{name:"email",label:r.default("邮箱"),type:"text",value:this.props.user.email,disabled:!0},{type:"divider"},{name:"realName",label:r.default("姓名"),type:"text",value:this.props.user.realName,required:!0,validations:"maxLength:30"},{type:"divider"},{name:"avatar",label:r.default("头像"),type:"image",value:this.props.user.avatar,reciever:"/api/image/upload",maxSize:409600,crop:{aspectRatio:1}}].concat(e)}}]}};return s.createElement(n.default,{key:"user-info-form",update:this.updateUserInfo.bind(this),schema:a})},a.displayName="SelfUserInfoManage",a=t.__decorate([o.inject(function(e){return{user:e.user.current}}),o.observer],a)}(s.Component);a.default=i});
;sugar.define("sugar:sites/self/manage/company/company.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=e("sugar:node_modules/tslib/tslib.js"),n=e("sugar:utils/i18n.ts"),s=e("sugar:node_modules/react/index.js"),l=e("sugar:node_modules/react-document-title/index.js"),u=e("sugar:stores/index.ts"),o=e("sugar:sites/amis-renderer.tsx"),r=e("sugar:sites/sugar-cxd.ts"),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.componentWillUnmount=function(){this.props.company.loadMyCompanys()},t.prototype.render=function(){var e=window.sugarConfig;return"saas"!==e.deployType?n.default("请点击左侧导航进行下一步浏览！"):s.createElement(l,{title:n.default("我的组织")},s.createElement(o.default,{schema:{title:n.default("我的组织"),name:"sugar-company",toolbar:{type:"button",primary:!0,label:n.default("新建组织"),actionType:"url",url:"https://console.bce.baidu.com/sugar/#/company/create"},body:{type:"crud",name:"sugar-company-list",api:"/api/self/company/getList",syncLocation:!1,columns:[{name:"name",label:n.default("组织名称"),type:"text"},{name:"isAdmin",label:n.default("我的身份"),type:"tpl",tpl:"\n                  <% if (data.isAdmin)  { %>\n                    "+n.default("组织管理员")+"\n                  <% } else { %>\n                    "+n.default("用户")+"\n                  <% } %>\n                "},{type:"tpl",label:n.default("操作"),className:"center",tpl:'\n                  <% if (data.isIn)  { %>\n                    <span class="text-info">'+n.default("当前会话所在")+'</span>\n                  <% } else { %>\n                    <a class="'+r.classPrefix+"Button "+r.classPrefix+"Button--default "+r.classPrefix+'Button--sm" href="/groups?__scp__=<%- data.emailSuffix %>">'+n.default("进入浏览")+"</a>\n                  <% } %>\n                "}]}}}))},t.displayName="MyCompany",t=a.__decorate([u.inject(function(e){return{company:e.company}})],t)}(s.Component);t.default=i});
;sugar.define("sugar:sites/self/report/report.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=e("sugar:node_modules/tslib/tslib.js"),a=e("sugar:utils/i18n.ts"),o=e("sugar:node_modules/react/index.js"),s=e("sugar:node_modules/react-document-title/index.js"),l=e("sugar:stores/index.ts"),n=e("sugar:node_modules/amis/lib/index.js"),i=e("sugar:node_modules/react-router/lib/index.js"),c=e("sugar:widgets/report-body/report-content.tsx"),p=e("sugar:widgets/report-body/iframe.tsx"),m=e("sugar:sites/group/report/report-collection.tsx"),u=e("sugar:node_modules/xss/lib/index.js"),d=e("sugar:utils/xssOption.ts"),h=e("sugar:utils/common-helper.ts"),f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.componentWillMount=function(){this.rememberPath=this.rememberPath.bind(this),this.props.report.loadSelfReport(this.props.routeParams.report),this.uncollectSucessCallback=this.uncollectSucessCallback.bind(this)},t.prototype.componentWillReceiveProps=function(e){var t=this.props;e.routeParams.report!==t.routeParams.report&&(this.rememberPath(e),this.props.report.loadSelfReport(e.routeParams.report))},t.prototype.componentDidMount=function(){this.rememberPath(this.props)},t.prototype.rememberPath=function(e){var t=e.location.pathname;0===t.indexOf("/i/report/")&&e.assist.rememberiPath(t)},t.prototype.uncollectSucessCallback=function(){this.props.router.replace("/i/home")},t.prototype.render=function(){var e=this.props,t=e.report,r=e.company,l=e.chart,f=e.condition;return"pending"===t.loadState||"done"===t.loadState&&!t.data.hash?o.createElement(n.Spinner,{overlay:!0,size:"lg"}):"error"===t.loadState?o.createElement("h3",{className:"text--center text-danger"},a.default(t.loadError.message||"请求错误")):o.createElement(s,{title:t.data.name,key:"content"},o.createElement("div",{className:"full-box d-flex flex-col"},o.createElement("div",{className:"bg-white wrapper lter b-b clearfix",key:"report-header",style:{padding:"12px 15px"}},o.createElement("span",{className:"m-n font-thin fs-18"},t.data.name,t.data.remark?o.createElement(n.TooltipWrapper,{tooltip:u(t.data.remark,d.xssOption),placement:"bottom"},o.createElement("i",{className:"fa fa-question-circle m-l-sm hidden-xs"})):null),o.createElement("div",{className:"d-inline-block pull-right page-title-toolbar"},o.createElement(m.default,{report:t,notLoadSelfRepotTree:!0,uncollectSucessCallback:this.uncollectSucessCallback}),o.createElement("span",null,r.emailSuffix===t.data.companyKey?o.createElement(i.Link,{to:"/group/"+t.data.groupKey+"/report/"+t.data.hash},o.createElement(n.Button,{level:"link",size:"lg",tooltip:a.default("查看源报表"),placement:"bottom"},o.createElement("i",{className:"fa fa-location-arrow"}))):o.createElement("a",{href:"/group/"+t.data.groupKey+"/report/"+t.data.hash+"?__scp__="+t.data.companyKey},o.createElement(n.Button,{level:"link",size:"lg",tooltip:a.default("查看源报表"),placement:"bottom"},o.createElement("i",{className:"fa fa-location-arrow"})))))),o.createElement("div",{className:"flex-1"},2===t.data.type?o.createElement(p.default,{src:t.data.url}):o.createElement("div",{className:h.isMobile?"wrapper-xxs":"wrapper-sm"},o.createElement(c.default,{mode:"normal",chartStore:l,conditionStore:f,report:t})))))},t.displayName="SelfReport",t=r.__decorate([l.inject(function(e){return{assist:e.assist,user:e.user.current,report:e.report.current,company:e.company.info,chart:e.chart,condition:e.condition}}),l.observer],t)}(o.Component);t.default=f});
;sugar.define("sugar:sites/company/index.tsx",function(e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var t=e("sugar:node_modules/tslib/tslib.js"),s=e("sugar:utils/i18n.ts"),n=e("sugar:node_modules/react/index.js"),r=e("sugar:stores/index.ts"),i=e("sugar:node_modules/react-router/lib/index.js"),o=e("sugar:node_modules/amis/lib/index.js"),l=e("sugar:widgets/error.tsx"),u=e("sugar:widgets/header/header.tsx"),d=e("sugar:widgets/fold-toggle.tsx"),c=e("sugar:widgets/mobile-aside-toggle.tsx"),f=e("sugar:widgets/login-info.tsx"),g=e("sugar:widgets/group-switch/group-switch.tsx"),m=e("sugar:widgets/aside/aside.tsx"),p=e("sugar:widgets/feedback.tsx"),y=e("sugar:widgets/product-type-tip.tsx"),h=e("sugar:widgets/i18n.tsx"),b=function(e){function a(){return null!==e&&e.apply(this,arguments)||this}return t.__extends(a,e),a.prototype.componentWillMount=function(){},a.prototype.render=function(){var e=this.props,a=e.user,t=e.company,r=e.group,b=e.asideFolded,w=e.mobileAsideOffScreen,k=this.props.location.pathname,x=window.sugarConfig,E=x.deployType;if(!a.companyAdmin)return n.createElement(l.default,{msg:s.default("只有组织管理员才能操作"),links:[{to:"/groups",label:s.default("返回空间广场")}]});var v=n.createElement(u.default,{brandName:"private"===E?x.companyName:t.name||window.sugarConfig.name,logo:n.createElement("img",{src:t.avatar||window.sugarConfig.logo||"/static/logo.png",className:"navbar-brand__logo"}),nav:[n.createElement(d.default,{key:"foldToggle"}),n.createElement(g.default,{key:"groupSwitch",myGroups:r.myGroups,publicGroups:r.publicGroups})],mobileAsideToggle:n.createElement(c.default,null),rightNav:[n.createElement("li",{key:"groups"},n.createElement(i.Link,{to:"/groups"},s.default("空间广场"))),n.createElement("li",{key:"i"},n.createElement(i.Link,{to:"/i"},s.default("个人中心"))),window.sugarConfig.hideDocsLink?null:n.createElement("li",{key:"doc"},n.createElement("a",{href:"/docs",target:"_blank"},s.default("帮助文档"))),window.sugarConfig.hideDocsLink?null:n.createElement(p.default,{key:"feedback"}),n.createElement(y.default,{key:"productTypeTip"}),n.createElement(h.default,{key:"i18n"}),n.createElement(f.default,{key:"login-info",user:a})]}),_=[{url:"/company/setting",name:s.default("组织设置"),icon:"fa fa-building"},{url:"/company/manage/group",name:s.default("空间管理"),icon:"fa fa-th"},{url:"/company/manage/user",name:s.default("用户管理"),icon:"fa fa-user"},{url:"/company/manage/userAttr",name:s.default("用户属性管理"),icon:"fa fa-list-alt"}];"private"===E&&(_.unshift({url:"/company/state",name:s.default("License信息"),icon:"fa fa-id-card"}),_.push({url:"/company/accessKey",name:s.default("组织Access Key"),icon:"fa fa-key"})),"saas"===E&&(_.unshift({url:"/company/license",name:s.default("私有部署License"),icon:"fa fa-id-card"}),_.unshift({url:"/company/state",name:s.default("组织版本信息"),icon:"fa fa-id-card"}));var C=n.createElement(m.default,{asideFolded:b,navs:[{children:_}],locationPath:k});return n.createElement(o.Layout,{header:v,footer:null,folded:b,aside:C,asideWide:!1,offScreen:w,asideClassName:"bg-black"},this.props.children)},a.displayName="CompanyIndex",a=t.__decorate([r.inject(function(e){return{assist:e.assist,company:e.company.info,user:e.user.current,asideFolded:e.assist.asideFolded,mobileAsideOffScreen:e.assist.mobileAsideOffScreen,group:e.group}}),r.observer],a)}(n.Component);a.default=b});
;sugar.define("sugar:sites/company/state/state.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=e("sugar:node_modules/tslib/tslib.js"),s=e("sugar:utils/i18n.ts"),n=e("sugar:node_modules/react/index.js"),i=e("sugar:stores/index.ts"),l=e("sugar:node_modules/amis/lib/index.js"),r=e("sugar:utils/date-helper.ts"),o=e("sugar:widgets/product-type/product-type-contant.tsx"),u=e("sugar:node_modules/axios/index.js"),d=e("sugar:sites/amis-renderer.tsx"),p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={expireTime:""},t}return a.__extends(t,e),t.prototype.componentWillMount=function(){var e=this,t=window.sugarConfig;"private"===t.deployType?this.props.license.loadData():(u.default.get("/api/manage/company/getExpire").then(function(t){t.data&&t.data.data&&t.data.data.expireTime&&e.setState({expireTime:t.data.data.expireTime})}),this.props.overview.loadCompanyOverview())},t.prototype.getResourceInfo=function(){var e=window.sugarConfig;if("done"===this.props.overview.loadCompanyOverviewState){var t=this.props.overview.companyOverviewData,a=t.userCount,n=t.companyDashboardCount,i=t.publishDashboardNum,l=t.companyReportCount,r=t.publishReportNum;return[{type:"static",inputClassName:"text-info",label:s.default("用户数："),value:s.default("已有"+a+"」个 / 共「"+(e.companyUserNum||"-")+"」个")},{type:"static",inputClassName:"text-info",label:s.default("公开分享大屏数："),value:s.default(-1===n?"不支持":"已使用「"+n+"」个 / 共「"+i+"」个")},{type:"static",inputClassName:"text-info",label:s.default("公开分享报表数："),value:s.default(-1===l?"不支持":"已使用「"+l+"」个 / 共「"+r+"」个")}]}return[{type:"spinner",size:"lg",overlay:!0}]},t.prototype.render=function(){var e=window.sugarConfig,t=this.props.license;if("private"===e.deployType){if("pending"===t.loadState)return n.createElement(l.Spinner,{overlay:!0,size:"lg"});if("error"===t.loadState)return n.createElement("div",{className:"wrapper-md"},s.default("获取License信息失败！"));var i=t.data.eTime,u=window.sugarConfig.sTime,p=r.getDateByString(i),c=new Date(6e3*u),m=parseInt((+p-+c)/864e5,10),f="text-success";return t.data.currUserCount+5>=t.data.userCount&&(f="text-danger"),n.createElement(d.default,{schema:{type:"page",body:{type:"grid",columns:[{type:"form",md:8,title:"",className:"sugar-license-state",mode:"horizontal",horizontal:{left:"col-md-4",right:"col-md-8"},actions:[],controls:[{type:"static",inputClassName:"text-info",label:s.default("当前部署的版本："),value:t.data.version||"-"},{type:"static",inputClassName:"text-info",label:s.default("当前部署的组织名称："),value:t.data.comName},{type:"static",inputClassName:"text-info",label:s.default("当前部署的组织代码："),value:t.data.comCode},{type:"static",inputClassName:"text-info",label:s.default("License授权用户数："),value:t.data.userCount},{type:"static",inputClassName:f,label:s.default("当前系统用户数："),value:t.data.currUserCount},{type:"static",inputClassName:"text-info",label:s.default("License过期时间："),value:t.data.eTime},{type:"static",inputClassName:m>30?"text-info":"text-danger",label:s.default("License剩余天数："),value:m+" "+s.default("天")+" "+(m>30?"":s.default(" (请尽快续购，以免影响使用！)"))},{type:"static",inputClassName:"text-info",label:s.default("License类型："),value:t.data.type},{type:"divider"},{children:function(){return n.createElement("div",{className:"sugar-something"},n.createElement("p",{className:"sugar-motto"},s.default("「"+e.name+"」为您提供最完美的可视化报表 + 大屏解决方案!")),e.name&&"sugar"===e.name.toLowerCase()?n.createElement("div",{className:"sugar-contact-container"},n.createElement("div",{className:"sugar-contact"},s.default("联系我们 sugar@baidu.com"))):null)}}]}]}}})}var y=e.productConfig[e.productType].name,g=e.companyDashNum||0,v=[{type:"static",inputClassName:"text-info",label:s.default("组织版本："),value:y},e.companyStatus>1?{type:"static",inputClassName:"text-danger",label:s.default("组织状态："),value:s.default("已到期")}:{type:"static",inputClassName:"text-success",label:s.default("组织状态："),value:s.default("运行中")},{type:"static",inputClassName:"text-info",label:s.default("拓展大屏数："),value:g}];return this.state.expireTime&&v.push({type:"static",inputClassName:"text-info",label:s.default("组织到期时间："),value:r.formatDate(new Date(this.state.expireTime),"$1-$2-$3 $4:$5:$6")}),v=v.concat(a.__spreadArrays([{type:"divider"},{children:function(){return n.createElement("div",{style:{fontWeight:500,marginBottom:20,fontSize:16}},"资源使用情况")}}],this.getResourceInfo(),[{type:"divider"},{children:function(){return n.createElement(n.Fragment,null,n.createElement("div",{className:"sugar-something"},n.createElement("p",{className:"sugar-motto"},e.name,s.default("各版本详情"))),n.createElement(o.default,{nowType:e.productType}))}}])),n.createElement(d.default,{schema:{type:"page",body:{type:"grid",columns:[{type:"form",md:12,title:"",className:"sugar-license-state",mode:"horizontal",horizontal:{left:"col-md-4",right:"col-md-8"},actions:[],controls:v}]}}})},t.displayName="LicenseState",t=a.__decorate([i.inject(function(e){return{license:e.license,company:e.company,overview:e.overview}}),i.observer],t)}(n.Component);t.default=p});
;sugar.define("sugar:sites/company/license/license.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=e("sugar:node_modules/tslib/tslib.js"),n=e("sugar:utils/i18n.ts"),a=e("sugar:node_modules/react/index.js"),l=e("sugar:stores/index.ts"),r=e("sugar:node_modules/react-document-title/index.js"),i=e("sugar:sites/amis-renderer.tsx"),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s.__extends(t,e),t.prototype.render=function(){var e=window.sugarConfig;return"saas"!==e.deployType?n.default("请点击左侧导航进行下一步浏览！"):a.createElement(r,{title:n.default("私有部署License")},a.createElement(i.default,{schema:{type:"page",className:"sugar-private-licenses",title:[n.default("私有部署License")],body:[{type:"form",title:"",mode:"horizontal",horizontal:{left:"col-sm-1",right:"col-sm-10"},actions:[{type:"button",label:n.default("进入控制台"),actionType:"url",level:"primary",blank:!0,url:"https://console.bce.baidu.com/sugar/?_=1562313013113#/license/list"}],controls:[{type:"tpl",label:"",tpl:"\n                    <div class='help-block'>\n                      <p>"+n.default("私有部署是指将 Sugar 整套服务安装部署到您的企业内网中。可以对接企业内网的数据源，并且支持对接企业的内部账号进行单点登陆，无缝集成您的企业内部办公环境，具有更高的安全性和可控性。")+"</p>\n                      <p>"+n.default("私有部署版具有当前 SaaS 版本的所有功能，并且对空间数目、报表个数、大屏个数、公开分享的大屏和报表个数不做任何限制。")+"</p>\n                      <p>"+n.default("您可以点击下面的按钮进入 Sugar 百度云控制台来<span class='text-info'>申请试用 License 或 购买正式 License</span>")+"</p>\n                    </div>"}]}]}}))},t.displayName="License",t=s.__decorate([l.inject(function(e){return{company:e.company}}),l.observer],t)}(a.Component);t.default=o});
;sugar.define("sugar:sites/company/company-setting/setting.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=e("sugar:node_modules/tslib/tslib.js"),o=e("sugar:utils/i18n.ts"),l=e("sugar:node_modules/react/index.js"),n=e("sugar:node_modules/react-document-title/index.js"),r=e("sugar:stores/index.ts"),i=e("sugar:node_modules/amis/lib/index.js"),m=e("sugar:widgets/progress.ts"),s=e("sugar:widgets/avatar-editor.tsx"),u=e("sugar:widgets/user-select.tsx"),d=e("sugar:sites/amis-renderer.tsx"),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.componentWillMount=function(){this.submit=this.submit.bind(this),this.props.company.loadVip()},t.prototype.submit=function(e){m.default.show(),this.props.company.update(e).then(function(){m.default.hide(),i.toast.success(o.default("保存组织信息成功"))}).catch(function(e){m.default.hide(),i.toast.error(e.message)})},t.prototype.render=function(){var e=this,t=this.props.company,a=t.info,r=t.admins,m=t.vip,c=t.loadVipState;if("pending"===c)return l.createElement(i.Spinner,{overlay:!0,size:"lg"});var p=[{name:"avatar",label:o.default("组织logo"),children:function(e){var t=e.onChange,a=e.value;return l.createElement("div",{className:"a-Form-item a-Form-item--horizontal"},l.createElement("label",{className:"a-Form-label a-Form-itemColumn--3 text--right"},o.default("组织管理员")),l.createElement("div",{className:"a-Form-value a-Form-itemColumn--8"},l.createElement(s.default,{value:a,onChange:t})))}},{type:"text",name:"name",required:!0,validations:"maxLength:30",label:o.default("组织名称")},{type:"switch",name:"onlyAdminCreate",label:o.default("只有管理员才能创建空间")},{type:"switch",name:"hideOtherGroup",label:o.default("空间广场不展示用户没有权限的空间")},{type:"button-group",name:"toastPosition",label:o.default("消息提示框位置"),options:[{label:o.default("左上"),value:"top-left"},{label:o.default("中上"),value:"top-center"},{label:o.default("右上"),value:"top-right"},{label:o.default("左下"),value:"bottom-left"},{label:o.default("中下"),value:"bottom-center"},{label:o.default("右下"),value:"bottom-right"}]},{name:"admins",validations:"minLength:1",children:function(e){var t=e.onChange,a=e.value;return l.createElement("div",{className:"a-Form-item a-Form-item--horizontal"},l.createElement("label",{className:"a-Form-label a-Form-itemColumn--3 text--right"},o.default("组织管理员")),l.createElement("div",{className:"a-Form-value a-Form-itemColumn--8"},l.createElement(u.default,{value:a,onChange:t,errorMsg:a.length?"":o.default("不可以没有管理员")})))}},{name:"vip",children:function(e){var t=e.onChange,a=e.value;return l.createElement("div",{className:"a-Form-item a-Form-item--horizontal"},l.createElement("label",{className:"a-Form-label a-Form-itemColumn--3 text--right"},o.default("VIP用户")),l.createElement("div",{className:"a-Form-value a-Form-itemColumn--8"},l.createElement(u.default,{value:a,onChange:t})))}},{type:"text",name:"reportRootName",validations:"maxLength:30",label:o.default("空间中报表根目录名称"),placeholder:o.default("默认是：报表")},{type:"text",name:"dashboardRootName",validations:"maxLength:30",label:o.default("空间中大屏根目录名称"),placeholder:o.default("默认是：数据大屏")}];return"private"===window.sugarConfig.deployType&&p.push({type:"number",name:"sqlTimeout",inputClassName:"a-Form-itemColumn--4",label:o.default("图表数据查询超时时间（秒）"),step:5,min:10,max:600},{type:"color",name:"backgroudColor",clearable:!0,inputClassName:"a-Form-itemColumn--4",label:o.default("页面背景色")}),l.createElement(n,{title:o.default("组织设置")},l.createElement(d.default,{key:"companyForm",schema:{type:"page",body:{type:"grid",columns:[{md:10,type:"form",mode:"horizontal",horizontal:{left:"col-md-3",right:"col-md-8"},data:{avatar:a.avatar,name:a.name,onlyAdminCreate:a.onlyAdminCreate,toastPosition:a.toastPosition,sqlTimeout:a.config.sqlTimeout||50,backgroudColor:a.config.backgroudColor||"",hideOtherGroup:a.config.hideOtherGroup,reportRootName:a.config.reportRootName,dashboardRootName:a.config.dashboardRootName,admins:r.concat(),vip:m.concat()},onFinished:function(t){return e.submit(t),!1},title:o.default("组织设置"),actions:[{type:"button",level:"primary",actionType:"submit",label:o.default("确定")}],controls:p}]}}}))},t.displayName="CompanySetting",t=a.__decorate([r.inject(function(e){return{company:e.company}}),r.observer],t)}(l.Component);t.default=c});
;sugar.define("sugar:sites/company/access-key/access-key.tsx",function(e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var t=e("sugar:node_modules/tslib/tslib.js"),s=e("sugar:utils/i18n.ts"),l=e("sugar:node_modules/react/index.js"),n=e("sugar:node_modules/react-document-title/index.js"),c=e("sugar:stores/index.ts"),o=e("sugar:sites/amis-renderer.tsx"),u=function(e){function a(){return null!==e&&e.apply(this,arguments)||this}return t.__extends(a,e),a.prototype.render=function(){var e=this.props,a=e.companyHash,t=e.groupHash,c=e.type,u=1===c?a:t,r=1===c?"company":"group",p=[{name:"type",type:"text",value:1,hidden:!0},{name:"ak",label:s.default("Access Key"),type:"text"},{name:"sk",label:s.default("Secret Key"),type:"mapping",map:{"*":"***"},copyable:{content:"${sk}"}},{name:"state",label:s.default("状态"),type:"mapping",map:{0:"<span class='label label-danger'>禁用</span>",1:"<span class='label label-success'>启用</span>"}},{name:"content",label:s.default("说明"),type:"text",width:300},{name:"created_at",label:s.default("创建时间"),type:"datetime"},{label:s.default("操作"),type:"operation",buttons:[{confirmText:s.default("您确定要启用该AccessKey?"),actionType:"ajax",api:"put:/api/manage/"+r+"/"+u+"/accessKey/$ak",reload:"sugar-company-users-list",label:s.default("启用"),type:"button",visibleOn:"state === 0"},{confirmText:s.default("禁用此 AccessKey 后，Sugar将拒绝任何来自该 AccessKey 访问。是否确认禁用?"),actionType:"ajax",api:"put:/api/manage/"+r+"/"+u+"/accessKey/$ak",reload:"sugar-company-users-list",label:s.default("禁用"),type:"button",visibleOn:"state === 1"},{confirmText:s.default("您确定要移除该Access key吗?"),actionType:"ajax",api:"delete:/api/manage/"+r+"/"+u+"/accessKey/$ak",reload:"sugar-company-users-list",label:s.default("删除"),type:"button"}]}];return l.createElement(n,{title:s.default(1===c?"组织Access Key":"空间Access Key")},l.createElement(o.default,{schema:{name:"sugar-group-accesskey",toolbarClassName:"padder-md m-t-md",toolbar:[{type:"button-toolbar",buttons:[{type:"button",label:s.default("创建Access Key"),level:"primary",actionType:"dialog",dialog:{title:s.default("创建Access Key"),body:{type:"form",name:"sugar-company-access-key",mode:"horizontal",horizontal:{left:"col-sm-3",right:"col-sm-9"},api:"post:/api/manage/"+r+"/"+u+"/accessKey",controls:[{name:"content",type:"text",label:s.default("说明"),className:"m-n",placeholder:s.default("请输入ak/sk的注释说明，可不填")}]},actions:[{type:"button",actionType:"cancel",label:s.default("取消")},{type:"submit",primary:!0,label:s.default("添加")}]}}]}],actionsClassName:"m-t-md",body:{type:"crud",name:"sugar-company-users-list",api:"/api/manage/"+r+"/"+u+"/accessKey",syncLocation:!1,columns:p}}}))},a.displayName="AccessKey",a=t.__decorate([c.inject(function(e){return{companyHash:e.company.info.emailSuffix,groupHash:e.group.current.data.hash}})],a)}(l.PureComponent);a.default=u});
;sugar.define("sugar:sites/company/company-group/group.tsx",function(e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var t=e("sugar:node_modules/tslib/tslib.js"),r=e("sugar:utils/i18n.ts"),n=e("sugar:node_modules/react/index.js"),l=e("sugar:node_modules/react-document-title/index.js"),s=e("sugar:sites/amis-renderer.tsx"),o=e("sugar:widgets/user-select.tsx"),u=function(e){function a(){return null!==e&&e.apply(this,arguments)||this}return t.__extends(a,e),a.prototype.render=function(){return n.createElement(l,{title:r.default("组织的空间管理")},n.createElement(s.default,{schema:{title:r.default("空间管理"),name:"sugar-company-groups",toolbar:[{type:"form",name:"sugar-company-groups-filter",mode:"inline",submitText:"",wrapWithPanel:!1,target:"sugar-company-groups-list",className:"pull-right",controls:[{type:"text",name:"searchText",className:"ma-none",placeholder:r.default("请输入报表空间名"),addOn:{icon:"fa fa-search",type:"submit",className:"btn-info"}}]}],body:{type:"crud",name:"sugar-company-groups-list",api:"/api/manage/company/group?searchText=$searchText&page=$page&perPage=$perPage&orderBy=$orderBy&orderDir=$orderDir",syncLocation:!1,primaryField:"hash",columns:[{name:"name",label:r.default("空间名称"),type:"text",sortable:!0},{name:"key",label:r.default("英文名"),type:"text",sortable:!0},{name:"admins",label:r.default("空间管理员"),type:"list",placeholder:"-",listItem:{title:"${realName}",subTitle:"${email}"}},{label:r.default("操作"),type:"operation",buttons:[{type:"button",label:r.default("修改管理员"),actionType:"dialog",dialog:{title:r.default("修改空间管理员--${name}"),body:{type:"form",api:"put:/api/manage/company/group/$hash",controls:[{name:"admins",validations:"minLength:1",children:function(e){var a=e.onChange,t=e.value;return n.createElement(o.UserSelectFormCtrl,{label:r.default("管理员"),value:t,onChange:a,errorMsg:t.length?"":r.default("空间不能没有管理员")})}}]}}}]}]}}}))},a.displayName="CompanyGroup",a}(n.PureComponent);a.default=u});
;sugar.define("sugar:sites/company/company-user/user.tsx",function(e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var t=e("sugar:node_modules/tslib/tslib.js"),l=e("sugar:utils/i18n.ts"),r=e("sugar:node_modules/react/index.js"),o=e("sugar:node_modules/react-document-title/index.js"),n=e("sugar:sites/amis-renderer.tsx"),s=e("sugar:node_modules/axios/index.js"),i=e("sugar:utils/export-file/export-excel.ts"),u=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.onDownLoad=function(){return t.__awaiter(a,void 0,void 0,function(){var e,a,r;return t.__generator(this,function(t){switch(t.label){case 0:return[4,s.default.get("/api/manage/company/user")];case 1:return e=t.sent().data,(null===(r=e.data)||void 0===r?void 0:r.rows)?(a=[[l.default("邮箱"),l.default("姓名")]],e.data.rows.forEach(function(e){a.push([e.email,e.realName])}),i.exportExcelByRows(a,"test"),[2]):[2]}})})},a}return t.__extends(a,e),a.prototype.componentWillMount=function(){this.setState({data:[],showDialog:!1,showBulkDialog:!1,schema:{},t:0})},a.prototype.render=function(){var e=[{name:"email",label:l.default("邮箱"),type:"text",sortable:!0},{name:"realName",label:l.default("姓名"),type:"text",sortable:!0},{label:l.default("操作"),type:"operation",buttons:[{type:"button",size:"sm",actionType:"ajax",confirmText:l.default("确定要删除？将会删除用户在所有报表空间中的所有权限，并将用户从当前组织中移除，请慎重！！！"),label:l.default("删除"),api:"delete:/api/manage/company/user?email=$email"}]}];"private"===window.sugarConfig.deployType&&"password"===window.sugarConfig.loginType&&e[2].buttons.push({type:"button",icon:"fa fa-recycle text-danger",actionType:"ajax",confirmText:l.default("确定要重置「$email」的密码为「sugar12345」吗？"),tooltip:l.default("重置用户密码"),api:"put:/api/manage/company/user/resetPassword?email=$email"});var a=window.sugarConfig.productType;return a&&"free"!==a&&e.splice(2,0,{name:"isBuyer",label:l.default("可对本组织进行升级续费"),type:"status",tpl:'\n          <% if (data.isBuyer)  { %>\n            <i className="text-success" aria-hidden="true">YES</i>\n          <% } else {%>\n            <i className="text-danger" aria-hidden="true">NO</i>\n          <% } %>\n        '}),r.createElement(o,{title:l.default("组织用户管理")},r.createElement(n.default,{schema:{title:l.default("组织用户管理"),name:"sugar-company-users",toolbar:[{type:"form",name:"sugar-company-users-filter",mode:"inline",submitText:"",wrapWithPanel:!1,target:"sugar-company-users-list",controls:[{type:"text",name:"searchText",placeholder:l.default("请输入用户邮箱或姓名"),className:"ma-none",addOn:{icon:"fa fa-search",type:"submit",className:"btn-info"}}]},{type:"button",label:l.default("邀请新用户"),actionType:"dialog",level:"primary",className:"m-r-xs",dialog:{title:l.default("邀请新用户"),body:{type:"form",name:"sugar-company-user-new",mode:"horizontal",horizontal:{left:"col-sm-3",right:"col-sm-9"},api:"/api/manage/company/user",controls:[{name:"email",type:"text",label:l.default("用户邮箱"),required:!0,className:"m-n",placeholder:l.default("请输入用户邮箱（如果不填邮箱后缀则默认和您的一致）")},{type:"divider"},{name:"realName",type:"text",label:l.default("用户姓名"),className:"m-n",placeholder:l.default("请输入用户姓名，可不填")}]},actions:[{type:"button",actionType:"cancel",label:l.default("取消")},{type:"submit",primary:!0,label:l.default("添加")}]}},{type:"button",label:l.default("批量导入"),actionType:"dialog",level:"primary",className:"m-r-xs",dialog:{title:l.default("批量导入"),body:{type:"form",name:"sugar-company-user-new",mode:"horizontal",horizontal:{left:"col-sm-3",right:"col-sm-9"},api:"/api/manage/company/user/bulkUploadUsers",controls:[{name:"excel",mode:"normal",required:!0,type:"sugar-excel-upload",onDownLoad:this.onDownLoad}]},actions:[{type:"button",actionType:"cancel",label:l.default("取消")},{type:"submit",primary:!0,label:l.default("添加")}]}}],body:{type:"crud",name:"sugar-company-users-list",api:"/api/manage/company/user?searchText=$searchText&page=$page&perPage=$perPage&orderBy=$orderBy&orderDir=$orderDir",syncLocation:!1,primaryField:"email",columns:e}}}))},a.displayName="CompanyUser",a}(r.PureComponent);a.default=u});
;sugar.define("sugar:sites/company/company-user/attrName.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=e("sugar:node_modules/tslib/tslib.js"),o=e("sugar:utils/i18n.ts"),r=e("sugar:node_modules/react/index.js"),s=e("sugar:node_modules/react-document-title/index.js"),l=e("sugar:node_modules/axios/index.js"),n=e("sugar:node_modules/amis/lib/index.js"),i=e("sugar:stores/index.ts"),u=e("sugar:sites/amis-renderer.tsx"),d=e("sugar:widgets/object-array-editor/object-array-editor.tsx"),m=e("sugar:widgets/form-dialog.tsx"),c=e("sugar:utils/export-file/export-excel.ts"),p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.firstUpdate=!0,t.toggleShowDialog=function(){t.setState({showDialog:!t.state.showDialog})},t.toggleShowBulkDialog=function(){t.setState({showBulkDialog:!t.state.showBulkDialog})},t.onConfirm=function(e){for(var a=t.props.userAttrStore.attrNameList,r={},s=0;s<e.propsName.length;s++){var l=e.propsName[s];if(r[l.name])return n.toast.error(o.default("不能有重复属性名"));if(r[l.name]=l.name,[o.default("邮箱"),o.default("姓名")].includes(l.name))return n.toast.error(o.default("属性名不能为“邮箱”或“姓名”"))}t.props.userAttrStore.updateNames({propsName:e.propsName,oldPropsName:a}),t.setState({showDialog:!t.state.showDialog,t:t.state.t+1})},t.onUploadFile=function(){t.props.userAttrStore.loadData(),t.setState({showBulkDialog:!t.state.showBulkDialog,t:t.state.t+1})},t.onDownLoad=function(){return a.__awaiter(t,void 0,void 0,function(){var e;return a.__generator(this,function(t){switch(t.label){case 0:return[4,l.default.get("/api/manage/attribute/exportExcel")];case 1:return e=t.sent().data,c.exportExcelByRows(null===e||void 0===e?void 0:e.data,"test"),[2]}})})},t}return a.__extends(t,e),t.prototype.componentWillMount=function(){this.setState({showDialog:!1,showBulkDialog:!1,t:0}),this.props.userAttrStore.loadData()},t.prototype.render=function(){var e=this,t=this.props.userAttrStore,l=t.attrNameList,i=t.attrSchema;return r.createElement(s,{title:o.default("用户属性管理")},r.createElement("div",{className:"user-attr full-box"},r.createElement("div",{className:"attr-btn-group"},r.createElement(n.Button,{className:"attr-btn pull-right",level:"primary",onClick:this.toggleShowBulkDialog},o.default("批量导入")),r.createElement(n.Button,{className:"attr-btn pull-right ",level:"primary",onClick:this.toggleShowDialog},o.default("属性设置")),r.createElement("div",{className:"pull-right"},r.createElement("a",{className:"text-info",target:"_blank",href:"/docs/DataLineLimit#用户属性设置"},o.default("用户属性是什么？")))),r.createElement(u.default,{key:"user-attr-"+this.state.t,schema:i}),r.createElement(m.default,{className:"props-name-model",show:this.state.showBulkDialog,title:o.default("批量导入"),onClose:function(){return e.setState({showBulkDialog:!1})},api:"/api/manage/attribute/bulkUploadUserProps",onConfirm:this.onUploadFile,controls:[{name:"excel",mode:"normal",type:"sugar-excel-upload",required:!0,onDownLoad:this.onDownLoad}],size:"md"}),r.createElement(m.default,{className:"props-name-model",show:this.state.showDialog,title:o.default("属性设置"),data:{propsName:l.slice(0)},onClose:function(){return e.setState({showDialog:!1})},onConfirm:this.onConfirm,controls:[{name:"propsName",children:function(e){var t=e.onChange,s=e.value;return r.createElement(d.default,a.__assign({},{onChange:t,value:s},{containerClassName:"form-group form-item",label:"",addTipText:o.default("新增属性"),hideToolbar:!0,cols:[{type:"text",key:"name",name:o.default("属性名"),tdStyle:{minWidth:120}},{type:"text",key:"remark",name:o.default("属性说明"),tdStyle:{minWidth:120}}]}))}}],size:"lg"})))},t.displayName="AttrName",t=a.__decorate([i.inject(function(e){return{userAttrStore:e.userAttr}}),i.observer],t)}(r.Component);t.default=p});
;sugar.define("sugar:widgets/dashboard-body/dashboard-content.tsx",function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DashboardContentEditable=void 0;var a=t("sugar:node_modules/tslib/tslib.js"),r=t("sugar:node_modules/react/index.js"),s=t("sugar:node_modules/classnames/index.js"),n=t("sugar:node_modules/mobx/lib/mobx.js"),i=t("sugar:stores/index.ts"),o=t("sugar:utils/common-helper.ts"),h=t("sugar:utils/condition-helper.ts"),d=t("sugar:widgets/dashboard-charts/index.tsx"),l=t("sugar:widgets/dnd-move.tsx"),c=t("sugar:widgets/water-mark.tsx"),u=t("sugar:node_modules/lodash/debounce.js"),p=t("sugar:utils/chart-helper.ts"),v=15,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.firstRefreshAllChartsData=!1,e.chartsReady=!1,e.mouseInContent=!0,e.startX=0,e.startY=0,e.setFirstFlag=function(){e.firstRefreshAllChartsData=!1},e}a.__extends(e,t),e.prototype.componentWillMount=function(){this.handleMouseDown=this.handleMouseDown.bind(this),this.handleMouseMove=this.handleMouseMove.bind(this),this.handleMouseMoveContainer=this.handleMouseMoveContainer.bind(this),this.handleMouseEnter=this.handleMouseEnter.bind(this),this.handleMouseLeave=this.handleMouseLeave.bind(this),this.calHoverChart=u(this.calHoverChart.bind(this),50),this.handleMouseUp=this.handleMouseUp.bind(this),this.removeWindowEvents=this.removeWindowEvents.bind(this),this.removeCalEvents=this.removeCalEvents.bind(this),this.addCalEvents=this.addCalEvents.bind(this),this.getOverlay=this.getOverlay.bind(this),this.getContainer=this.getContainer.bind(this),this.refreshAllChartsData=this.refreshAllChartsData.bind(this)},e.prototype.componentDidMount=function(){this.addCalEvents()},e.prototype.refreshAllChartsData=function(){this.props.dashboard.refreshAllChartsData(this.props.mode)},e.prototype.handleMouseDown=function(t){if("editor"===this.props.mode&&0===t.button){var e=o.getOffset(t);e&&this.container&&(this.startX=e.x/this.props.scaleX,this.startY=e.y/this.props.scaleX,this.container.addEventListener("mouseup",this.handleMouseUp,!1),this.container.addEventListener("mousemove",this.handleMouseMove,!1))}},e.prototype.handleMouseMove=function(t){var e=o.getOffset(t);if(e){var a=e.x/this.props.scaleX,r=e.y/this.props.scaleY,s=Math.abs(this.startX-a),n=Math.abs(this.startY-r);s>0&&n>0&&this.multiSelectOverLay&&(this.multiSelectOverLay.style.display="block",this.multiSelectOverLay.style.left=Math.min(this.startX,a)+"px",this.multiSelectOverLay.style.top=Math.min(this.startY,r)+"px",this.multiSelectOverLay.style.width=s+"px",this.multiSelectOverLay.style.height=n+"px")}this.removeCalEvents()},e.prototype.handleMouseMoveContainer=function(t){var e=o.getOffset(t);if(e){var a=this.props,r=e.x/a.scaleX,s=e.y/a.scaleY;this.calHoverChart(r,s)}this.props.setDragOrMoving&&this.props.setDragOrMoving(!0)},e.prototype.calHoverChart=function(t,e){var r,s=this.props,n=[],i=a.__spreadArrays(s.chartStore.list.data,s.conditionStore.list.data),h=i.filter(function(a){return a.left<t&&a.left+a.width>t&&a.top<e&&a.top+a.height>e});if(h.length&&this.mouseInContent){var d=!1,l=null===(r=s.editor)||void 0===r?void 0:r.target.frontendId;if(l)for(var c=0,u=h;c<u.length;c++){var p=u[c];p.frontendId===l&&(d=!0)}for(var v=0,f=h;v<f.length;v++){var p=f[v],g=o.calDistance(t,e,p.left+p.width/2,p.top+p.height/2);n.push({distance:d?p.frontendId===l?3*g:g:"decorate"===p.type?3*g:g,frontendId:p.frontendId||"",area:p.width*p.height})}n=n.sort(function(t,e){return t.distance-e.distance!==0?t.distance-e.distance:t.area-e.area});var m=n[0];s.setHoverChart&&s.setHoverChart(m.frontendId)}},e.prototype.handleMouseUp=function(t){var e=o.getOffset(t);if(e&&this.multiSelectOverLay&&this.props.editor){for(var a=e.x/this.props.scaleX,r=e.y/this.props.scaleY,s=Math.min(this.startX,a),n=Math.min(this.startY,r),i=Math.max(this.startX,a),h=Math.max(this.startY,r),d=[],l=0,c=this.props.chartStore.list.data.concat(this.props.conditionStore.list.data);l<c.length;l++){var u=c[l],p=u.left+u.width/2,v=u.top+u.height/2;p>s&&v>n&&i>p&&h>v&&d.push(u.frontendId)}var f=this.props;if(1===d.length&&f.editor){var g=d[0];if(!["chart","condition"].includes(f.editor.target.type)||f.editor.target.frontendId!==g)if(f.isMultiSelecting){var m=f.editor.target.frontendId?f.editor.target.frontendId+",":"";m.indexOf(g)<0&&f.editor.setActiveTarget("multiCharts",m+g)}else g.indexOf("con_")<0?f.editor.setActiveTarget("chart",g):f.editor.setActiveTarget("condition",g);t.stopPropagation(),t.preventDefault()}else if(d.length>1&&f.editor){var y=f.editor.target.frontendId&&f.isMultiSelecting?f.editor.target.frontendId+",":"";d=d.filter(function(t){return y.indexOf(t)<0}),f.editor.setActiveTarget("multiCharts",y+d.join(",")),t.stopPropagation(),t.preventDefault()}this.multiSelectOverLay.style.display="none",this.multiSelectOverLay.style.left="0px",this.multiSelectOverLay.style.top="0px",this.multiSelectOverLay.style.width="0px",this.multiSelectOverLay.style.height="0px"}this.removeWindowEvents(),this.addCalEvents()},e.prototype.handleMouseEnter=function(){this.mouseInContent=!0},e.prototype.handleMouseLeave=function(){var t=this;this.mouseInContent=!1,setTimeout(function(){t.mouseInContent=!0},500)},e.prototype.removeWindowEvents=function(){this.container&&(this.container.removeEventListener("mouseup",this.handleMouseUp),this.container.removeEventListener("mousemove",this.handleMouseMove))},e.prototype.removeCalEvents=function(){this.container&&this.container.removeEventListener("mousemove",this.handleMouseMoveContainer)},e.prototype.addCalEvents=function(){this.container&&"editor"===this.props.mode&&this.container.addEventListener("mousemove",this.handleMouseMoveContainer,!1)},e.prototype.componentWillUnmount=function(){this.removeWindowEvents(),this.removeCalEvents()},e.prototype.getOverlay=function(t){t&&(this.multiSelectOverLay=t)},e.prototype.getContainer=function(t){t&&(this.container=t)},e.prototype.render=function(){var t=this,e=this.props,n=e.chartStore,i=e.conditionStore,l=e.editor,c=e.mode,u=e.dashboard,f=e.scaleX,g=e.scaleY,m=e.notDragOrMoving,y=e.theme,b=a.__rest(e,["chartStore","conditionStore","editor","mode","dashboard","scaleX","scaleY","notDragOrMoving","theme"]),M=u.data,C=h.areConditionsAsyncReady(i.list.data,i.hubMap);C&&!this.firstRefreshAllChartsData&&(this.firstRefreshAllChartsData=!0,setTimeout(this.refreshAllChartsData,10));var E=y.config.dashboardBC||"rgb(0, 0, 0)",x=M.config.backgroundColor||E,D="";0===M.config.backgroundType?D=M.config.backgroundUrl:1===M.config.backgroundType&&(D=M.imgUrl||"");var L=parseInt(u.data.config.grid,10),O=L,w=2;if(f){for(;v>O*f;)O+=L;f>.7&&(w=1)}if(0===f)return null;this.chartsReady=p.areAllChartsDataLoaded(n.hubMap);var S=h.areAllConditionNotLoading(i.hubMap);return r.createElement("div",{id:"chart-screenshot-container",style:{width:parseInt(M.width,10)*f,height:parseInt(M.height,10)*g,overflow:"hidden"}},r.createElement("div",{className:s("dashboard-container can-cancel-chart-target",{rsWebkit3d:o.isChrome&&!o.isMobile}),id:M.hash,ref:function(e){t.getContainer(e),e&&e.style.setProperty("transform","scale("+f+", "+g+")","important")},onMouseDown:function(e){return t.handleMouseDown(e)},onMouseEnter:function(e){return t.handleMouseEnter(e)},onMouseLeave:function(e){return t.handleMouseLeave(e)},style:{width:M.width+"px",height:M.height+"px",transform:"scale("+f+", "+g+")",background:""+x}},r.createElement("div",{className:"dashboard-background-image can-cancel-chart-target",style:{background:"url("+D+") 0% 0% / 100% 100%",filter:"blur("+M.config.backgroundBlur+"px)",opacity:M.config.backgroundOpacity/10}}),"editor"!==c||!M.config.showGrid&&m?null:r.createElement("div",{id:"dashboard-grid-overlay",className:"can-cancel-chart-target",style:{backgroundSize:O+"px "+O+"px, "+O+"px "+O+"px",backgroundImage:"\n                linear-gradient(rgba(255,255,255,0.1) "+w+"px, transparent 0),\n                linear-gradient(90deg, rgba(255,255,255,0.1) "+w+"px, transparent 0)"}}),r.createElement("div",{id:"multi-chart-select-overlay",className:"can-cancel-chart-target",ref:this.getOverlay}),r.createElement(d.default,a.__assign({key:"chartList",mode:c,chartStore:n,conditionStore:i,editor:l,backgroundColor:u.data.config.backgroundColor||"",conditionConfig:u.data,theme:y,banDownLoad:o.isMobile?!0:u.data.config.banDownLoad,scaleX:f,scaleY:g,refreshAllChartsData:this.refreshAllChartsData,removeCalEvents:this.removeCalEvents,addCalEvents:this.addCalEvents,disabled:!C&&this.firstRefreshAllChartsData||!S||!this.chartsReady,setFirstFlag:this.setFirstFlag,container:this.container},b))))};var l;return e.displayName="DashboardContent",a.__decorate([n.observable,a.__metadata("design:type","function"==typeof(l="undefined"!=typeof HTMLDivElement&&HTMLDivElement)?l:Object)],e.prototype,"container",void 0),e=a.__decorate([i.inject(function(t){return{theme:t.chartTheme.theme}}),c.default,i.observer],e)}(r.Component);e.default=f;var g=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a.__extends(e,t),e=a.__decorate([l.DnDMoveTarget("d-chart-item")],e)}(f);e.DashboardContentEditable=g});
;sugar.define("sugar:sites/group/dashboard/dashboard-collection.tsx",function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=t("sugar:node_modules/tslib/tslib.js"),a=t("sugar:utils/i18n.ts"),o=t("sugar:node_modules/react/index.js"),n=t("sugar:stores/index.ts"),r=t("sugar:node_modules/amis/lib/index.js"),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s.__extends(e,t),e.prototype.componentWillMount=function(){this.props.notLoadSelfDashboardList||this.props.selfDashboard.list.load(),this.changeCollectState=this.changeCollectState.bind(this)},e.prototype.changeCollectState=function(t,e){var s=this;t?this.props.selfDashboard.list.abandon(e).then(function(){r.toast.success(a.default("取消收藏成功")),s.props.uncollectSucessCallback&&s.props.uncollectSucessCallback()}).catch(function(t){r.toast.error(t.message)}):this.props.selfDashboard.list.collect(this.props.dashboard.data.hash).then(function(){r.toast.success(a.default("收藏成功"))}).catch(function(t){r.toast.error(t.message)})},e.prototype.render=function(){var t=this,e=this.props,s=e.dashboard,n=e.selfDashboard,l=!1,i="";if("done"!==n.list.loadState)return null;for(var c=0,d=n.list.data;c<d.length;c++){var u=d[c];if(u.dashboardHash===s.data.hash){l=!0,i=u.hash;break}}return o.createElement(r.Button,{level:"link",size:"lg",tooltip:a.default(l?"取消收藏":"收藏"),placement:"bottom",onClick:function(){return t.changeCollectState(l,i)},className:"hidden-xs"},l?o.createElement("i",{className:"fa fa-heart text-danger"}):o.createElement("i",{className:"fa fa-heart-o"}))},e.displayName="DashboardCollection",e=s.__decorate([n.inject(function(t){return{selfDashboard:t.selfDashboard}}),n.observer],e)}(o.Component);e.default=l});
;sugar.define("sugar:sites/group/dashboard/dashboard-publish.tsx",function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=t("sugar:node_modules/tslib/tslib.js"),a=t("sugar:utils/i18n.ts"),o=t("sugar:node_modules/react/index.js"),i=t("sugar:stores/index.ts"),d=t("sugar:node_modules/classnames/index.js"),n=t("sugar:node_modules/amis/lib/index.js"),r=t("sugar:utils/url.ts"),l=t("sugar:sites/amis-renderer.tsx"),h=t("sugar:widgets/qrcode-dialog.tsx"),u=t("sugar:sites/group/manage/dashboard/dashboard.tsx"),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s.__extends(e,t),e.prototype.componentWillMount=function(){this.btnClick=this.btnClick.bind(this),this.closeQrCode=this.closeQrCode.bind(this),this.closeSetting=this.closeSetting.bind(this),this.cbFunc=this.cbFunc.bind(this),this.updatePublishState=this.updatePublishState.bind(this),this.setState({showSettingDialog:!1,showQrcodeDialog:!1})},e.prototype.btnClick=function(){var t=this.props.dashboard;this.setState(t.data.authType?{showQrcodeDialog:!0}:{showSettingDialog:!0})},e.prototype.closeQrCode=function(){this.setState({showQrcodeDialog:!1})},e.prototype.closeSetting=function(){this.setState({showSettingDialog:!1})},e.prototype.cbFunc=function(){this.setState({showQrcodeDialog:!1,showSettingDialog:!0})},e.prototype.updatePublishState=function(t){t.data&&t.data.data&&(!this.props.dashboard.data.authType&&t.data.data.authType&&this.setState({showQrcodeDialog:!0}),this.props.dashboard.loadSlient(t.data.data),this.props.dashboardList.load(this.props.groupHash))},e.prototype.render=function(){var t=this.props,e=t.dashboard,i=t.groupHash;return"done"==e.loadState&&e.data?[o.createElement(n.Button,{key:"dashboard-publish-button",level:"link",size:"lg",tooltip:a.default("公开分享"),placement:"bottom",onClick:this.btnClick},o.createElement("i",{className:d("fa fa-share-square",{"text-danger":!!e.data.authType})})),this.state.showQrcodeDialog?o.createElement(h.default,{key:"qrCode",name:e.data.name,qrUrl:r.shareSourceHost+"/dashboard/"+e.data.token,onClose:this.closeQrCode,cbText:a.default("更改发布状态"),cbFunc:this.cbFunc}):null,this.state.showSettingDialog?o.createElement("div",{className:"hidden",key:"publish-form"},o.createElement(l.default,{schema:{type:"page",body:s.__assign(s.__assign({},u.publishSchema(i)),{type:"dialog",bodyClassName:"wrapper",onClose:this.closeSetting,onConfirm:this.closeSetting,data:e.data.toJSON()})},update:this.updatePublishState})):null]:null},e.displayName="DashboardPublish",e=s.__decorate([i.observer],e)}(o.Component);e.default=c});
;sugar.define("sugar:sites/group/dashboard/dashboard.tsx",function(e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var t=e("sugar:node_modules/tslib/tslib.js"),s=e("sugar:node_modules/react/index.js"),r=e("sugar:node_modules/react-document-title/index.js"),o=e("sugar:node_modules/lodash/debounce.js"),n=e("sugar:stores/index.ts"),d=e("sugar:node_modules/classnames/index.js"),i=e("sugar:node_modules/amis/lib/index.js"),l=e("sugar:node_modules/react-router/lib/index.js"),h=e("sugar:widgets/dashboard-body/dashboard-content.tsx"),c=e("sugar:sites/group/report/auto-email.tsx"),p=e("sugar:utils/resize-sensor.ts"),u=e("sugar:sites/group/dashboard/dashboard-collection.tsx"),m=e("sugar:sites/group/dashboard/dashboard-publish.tsx"),b=e("sugar:node_modules/xss/lib/index.js"),g=e("sugar:utils/xssOption.ts"),f=e("sugar:utils/i18n.ts"),x=e("sugar:widgets/export-page-excel.tsx"),E=function(e){function a(a){var t=e.call(this,a)||this;return t.dashboardContainer=null,t.rememberPath=t.rememberPath.bind(t),t.getContainer=t.getContainer.bind(t),t.setDashboardScale=t.setDashboardScale.bind(t),t.props.assist.setCurrentPageType("dashboard"),t}return t.__extends(a,e),a.prototype.componentWillMount=function(){this.rememberPath=this.rememberPath.bind(this),this.props.dashboard.load(this.props.group.data.hash,this.props.routeParams.dashboard),this.setState({scaleX:0,scaleY:0})},a.prototype.componentWillReact=function(){this.setDashboardScale()},a.prototype.componentWillReceiveProps=function(e){var a=this.props;e.routeParams.dashboard!==a.routeParams.dashboard&&(this.rememberPath(e),this.props.dashboard.load(this.props.group.data.hash,e.routeParams.dashboard))},a.prototype.componentDidMount=function(){this.rememberPath(this.props)},a.prototype.componentWillUnmount=function(){this.unWatchResize&&this.unWatchResize(),this.props.assist.setCurrentPageType(""),this.props.chart.hubMap.clearChartHub(),this.props.condition.hubMap.clearConditionHub()},a.prototype.rememberPath=function(e){var a=e.location.pathname,t=e.group.data.hash,s=e.group.data.key;0===a.indexOf("/group/"+s+"/")&&(e.assist.rememberGroupPath(t,a),e.assist.rememberGroupHistory(t,a))},a.prototype.setDashboardScale=function(){var e=this.props.dashboard;if(this.dashboardContainer&&"done"===e.loadState&&e.data.hash){if(this.dashboardContainer.getElementsByClassName("jw-flag-fullscreen").length)return;var a=Number(p.getComputedStyle(this.dashboardContainer,"width").replace("px","")),t=Number(p.getComputedStyle(this.dashboardContainer,"height").replace("px",""));a=isNaN(a)?0:a,t=isNaN(t)?0:t;var s=+e.data.width>0?+e.data.width:1,r=+e.data.height>0?+e.data.height:1,o=void 0,n=void 0,d=a/s,i=t/r;e.data.config.stayScaleWhenBrowse?0===e.data.scaleType?(o=d,n=i):1===e.data.scaleType?(o=d,n=d):2===e.data.scaleType?(o=i,n=i):(o=d>i?i:d,n=o):(o=d>i?i:d,n=o),this.setState({scaleX:o,scaleY:n})}},a.prototype._initResizeSensor=function(){this.unWatchResize&&this.unWatchResize();var e=this.dashboardContainer;e&&(this.unWatchResize=p.resizeSensor(e,o(this.setDashboardScale,250)))},a.prototype.getContainer=function(e){this.dashboardContainer=e,this.setDashboardScale(),this._initResizeSensor()},a.prototype.render=function(){var e=this.props,a=e.group,t=e.dashboard,o=e.dashboardList,n=(e.user,e.routeParams),p=e.chart,E=e.condition;return"pending"===t.loadState||"done"===t.loadState&&!t.data.hash?s.createElement(i.Spinner,{overlay:!0,size:"lg"}):"error"===t.loadState?"AuthorizeError"===t.loadError.type?s.createElement("h3",{className:"text--center text-danger"},f.default("无权查看该大屏页面")):s.createElement("h3",{className:"text--center text-danger"},f.default(t.loadError.message||"请求错误")):s.createElement("div",{className:"d-flex flex-col h-full"},s.createElement("div",{className:"bg-white wrapper lter b-b clearfix",key:"report-header",style:{padding:"12px 15px"}},s.createElement("span",{className:"m-n font-thin fs-18"},t.data.name,t.data.remark?s.createElement(i.TooltipWrapper,{tooltip:b(t.data.remark,g.xssOption),placement:"bottom"},s.createElement("i",{className:"fa fa-question-circle m-l-sm hidden-xs"})):null),s.createElement("div",{className:"d-inline-block pull-right page-title-toolbar"},s.createElement("span",{className:d("hidden-xs",{hidden:!a.isAdmin||!t.data.isPub})},s.createElement(i.Button,{level:"link",size:"lg",tooltip:f.default("Dashboard已公开"),placement:"bottom"},s.createElement("i",{className:"fa fa-eye text-danger"}))),s.createElement(x.ExportPageExcel,{name:t.data.name,chart:p,show:!t.data.config.banDownLoad}),s.createElement("span",{className:d("hidden-xs",{hidden:!a.isAdmin||!t.data.isDev})},s.createElement(i.Button,{level:"link",size:"lg",tooltip:f.default(t.data.isDev?"页面处于开发模式，除空间管理员外不可见":"祖先目录处于开发模式，除空间管理员外不可见"),placement:"bottom"},s.createElement("i",{className:"fa fa-cogs text-danger"}))),s.createElement(u.default,{dashboard:t}),t.canEdit&&s.createElement(c.default,{dashboard:t,groupHash:a.data.hash}),s.createElement("span",{className:"hidden-xs"},s.createElement(l.Link,{to:"/group/"+a.data.key+"/preview/dashboard/"+n.dashboard},s.createElement(i.Button,{level:"link",size:"lg",tooltip:f.default("全屏预览"),placement:"bottom"},s.createElement("i",{className:"fa fa-expand"})))),t.canEdit?s.createElement(m.default,{dashboard:t,dashboardList:o,groupHash:a.data.hash}):null,s.createElement("span",{className:d("hidden-xs",{hidden:!t.canEdit})},s.createElement(l.Link,{to:"/group/"+a.data.key+"/edit/dashboard/"+n.dashboard},s.createElement(i.Button,{level:"link",size:"lg",tooltip:f.default("编辑"),placement:"bottom"},s.createElement("i",{className:"fa fa-pencil"})))))),s.createElement(r,{title:t.data.name,key:"content"},s.createElement("div",{ref:this.getContainer,className:"wrapper-sm flex-1 pa-none overflow-x-auto",style:{margin:15}},s.createElement(h.default,{mode:"normal",chartStore:p,conditionStore:E,dashboard:t,scaleX:this.state.scaleX,scaleY:this.state.scaleY}))))},a.displayName="Dashboard",a=t.__decorate([n.inject(function(e){return{assist:e.assist,user:e.user.current,chart:e.chart,condition:e.condition,group:e.group.current,dashboard:e.dashboard.current,dashboardList:e.dashboard.list}}),n.observer,t.__metadata("design:paramtypes",[Object])],a)}(s.Component);a.default=E});
;sugar.define("sugar:widgets/multi-device-preview/multi-device-preview.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=e("sugar:node_modules/tslib/tslib.js"),a=e("sugar:utils/i18n.ts"),i=e("sugar:node_modules/react/index.js"),l=e("sugar:node_modules/react-router/lib/index.js"),n=e("sugar:node_modules/classnames/index.js"),r=e("sugar:node_modules/amis/lib/index.js"),s=function(e){function t(t){var o=e.call(this,t)||this;return o.setMode=o.setMode.bind(o),o.handleMouseMove=o.handleMouseMove.bind(o),o.getIframeStyle=o.getIframeStyle.bind(o),o.getMobileStyle=o.getMobileStyle.bind(o),o.getRotateButtonStyle=o.getRotateButtonStyle.bind(o),o.setOrient=o.setOrient.bind(o),o.state={mode:"pc",showToolbar:!0,fixToolbar:!0,orient:"v"},o}return o.__extends(t,e),t.prototype.setMode=function(e){this.setState({mode:e})},t.prototype.setOrient=function(){this.setState({orient:"v"===this.state.orient?"h":"v"})},t.prototype.handleMouseMove=function(e){if(this.props.needSwitchDevice&&!this.state.fixToolbar){var t=e.clientY;this.state.showToolbar&&t>50?this.setState({showToolbar:!1}):!this.state.showToolbar&&50>=t&&this.setState({showToolbar:!0})}},t.prototype.getIframeStyle=function(){var e={};return"v"===this.state.orient?(e.height=680,e.width=320,e.marginLeft=-160,e.top=50):(e.height=320,e.width=680,e.marginLeft=-340,e.top=230),e},t.prototype.getMobileStyle=function(){var e={};return"v"===this.state.orient||(e.transform="rotate(-90deg)"),e},t.prototype.getRotateButtonStyle=function(){var e={};return"v"===this.state.orient||(e.marginLeft=430),e},t.prototype.render=function(){var e=this,t=this.props,s=t.groupKey,c=t.type,m=t.hash,d=t.needSwitchDevice,u=t.hideReturnButton,p=this.state,h=p.showToolbar,f=p.fixToolbar,b=p.mode,v=p.orient,g="/group/"+s+"/"+c+"/"+m,y=(h||f)&&d;return-1!=window.location.search.indexOf("hideToolBar=1")&&(f=!1,y=!1),i.createElement("div",{className:n("sugar-preview",{dashboard:"dashboard"===c}),onMouseMove:this.handleMouseMove},y?i.createElement("div",{className:"tool-bar"},u?null:i.createElement(r.TooltipWrapper,{tooltip:a.default("返回浏览页面"),placement:"bottom"},i.createElement(l.Link,{className:"tool-bar__button",to:g},i.createElement("i",{className:"fa fa-arrow-left","aria-hidden":"true"}))),u?null:i.createElement("div",{className:"cut-line"}),i.createElement(r.TooltipWrapper,{tooltip:a.default(f?"隐藏工具栏":"固定工具栏"),placement:"bottom"},i.createElement("div",{onClick:function(){return e.setState({fixToolbar:!e.state.fixToolbar})},className:"tool-bar__button"},i.createElement("i",{className:f?"fa fa-eye-slash":"fa fa-thumb-tack"}))),i.createElement("div",{className:"tool-bar__buttons"},i.createElement(r.TooltipWrapper,{tooltip:a.default("PC模式"),placement:"bottom"},i.createElement("div",{className:n("tool-bar__buttons__item pc",{active:"pc"===b}),onClick:function(){return e.setMode("pc")}},i.createElement("i",{className:"fa fa-television"}))),i.createElement("div",{className:"cut-line"}),i.createElement(r.TooltipWrapper,{tooltip:a.default("手机模式"),placement:"bottom"},i.createElement("div",{className:n("tool-bar__buttons__item",{active:"mobile"===b}),onClick:function(){return e.setMode("mobile")}},i.createElement("i",{className:"fa fa-mobile"}))))):null,i.createElement("div",{className:n("pc",{show:"pc"===b,"device-container":d,noToolbar:!(f&&d)})},i.Children.map(this.props.children,function(e,t){return i.cloneElement(e,o.__assign({key:t},e.props))})),d?i.createElement("div",{className:n("device-container mobile",{show:"mobile"===b})},i.createElement("div",{className:"mobile-img",style:this.getMobileStyle()}),i.createElement("iframe",{className:"mobile-iframe",style:this.getIframeStyle(),src:window.location.protocol+"//"+window.location.host+"/group/"+s+"/preview/"+c+"/"+m+"?needSwitchDevice=0"}),i.createElement(r.TooltipWrapper,{tooltip:a.default("旋转手机方向"),placement:"right"},i.createElement("div",{className:n("device-container__rotate-button",{active:"mobile"===b}),style:this.getRotateButtonStyle(),onClick:this.setOrient},"v"===v?i.createElement("i",{className:"fa fa fa-undo"}):i.createElement("i",{className:"fa fa fa-repeat"})))):null)},t.displayName="Preview",t}(i.Component);t.default=s});
;sugar.define("sugar:sites/group/dashboard-preview/dashboard-preview.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=e("sugar:node_modules/tslib/tslib.js"),r=e("sugar:utils/i18n.ts"),s=e("sugar:node_modules/react/index.js"),i=e("sugar:stores/index.ts"),o=e("sugar:node_modules/react-document-title/index.js"),n=e("sugar:node_modules/lodash/debounce.js"),d=e("sugar:utils/resize-sensor.ts"),h=e("sugar:node_modules/amis/lib/index.js"),c=e("sugar:widgets/dashboard-body/dashboard-content.tsx"),u=e("sugar:widgets/multi-device-preview/multi-device-preview.tsx"),l=function(e){function t(t){var a=e.call(this,t)||this;return a.getContainer=a.getContainer.bind(a),a.setDashboardScale=a.setDashboardScale.bind(a),a.props.assist.setCurrentPageType("dashboard"),a}return a.__extends(t,e),t.prototype.componentWillMount=function(){this.props.dashboard.load(this.props.group.data.hash,this.props.routeParams.dashboard),this.setState({scaleX:0,scaleY:0})},t.prototype.componentWillReceiveProps=function(e){var t=this.props;e.routeParams.dashboard!==t.routeParams.dashboard&&this.props.dashboard.load(this.props.group.data.hash,e.routeParams.dashboard)},t.prototype.componentWillUnmount=function(){this.unWatchResize&&this.unWatchResize(),this.props.assist.setCurrentPageType(""),this.props.chart.hubMap.clearChartHub(),this.props.condition.hubMap.clearConditionHub()},t.prototype.componentWillReact=function(){this.setDashboardScale()},t.prototype.setDashboardScale=function(){var e=this.props.dashboard;if(this.dashboardContainer&&"done"===e.loadState&&e.data.hash){if(this.dashboardContainer.getElementsByClassName("jw-flag-fullscreen").length)return;var t=Number(d.getComputedStyle(this.dashboardContainer,"width").replace("px","")),a=Number(d.getComputedStyle(this.dashboardContainer,"height").replace("px","")),r=e.data;this.width=isNaN(t)?0:t,this.height=isNaN(a)?0:a;var s=+r.width>0?+r.width:1,i=+r.height>0?+r.height:1,o=void 0,n=void 0;3===r.scaleType?(o=Math.min(this.width/s,this.height/i),n=o):0===r.scaleType?(o=this.width/s,n=this.height/i):1===r.scaleType?(o=this.width/s,n=this.width/s):(o=this.height/i,n=this.height/i),this.setState({scaleX:o,scaleY:n})}},t.prototype._initResizeSensor=function(){this.unWatchResize&&this.unWatchResize();var e=this.dashboardContainer;e&&(this.unWatchResize=d.resizeSensor(e,n(this.setDashboardScale,250)))},t.prototype.getContainer=function(e){this.dashboardContainer=e,this.setDashboardScale(),this._initResizeSensor()},t.prototype.render=function(){var e=this.props,t=e.dashboard,a=e.routeParams,i=e.location,n=e.chart,d=e.condition,l=e.group,p=e.theme,g=this.state,b=g.scaleX,m=g.scaleY;if("pending"===t.loadState||"done"===t.loadState&&!t.data.hash)return s.createElement(h.Spinner,{overlay:!0,size:"lg"});if("error"===t.loadState)return"AuthorizeError"===t.loadError.type?s.createElement("h3",{className:"text--center text-danger"},r.default("无权查看该报表页面")):s.createElement("h3",{className:"text--center text-danger"},r.default(t.loadError.message||"请求错误"));var f=t.data,y="";0===f.config.backgroundType?y=f.config.backgroundUrl:1===f.config.backgroundType&&(y=f.imgUrl||"");var v=p.config||{},w=v.dashboardBC,C=v.pageBC,S=w||C||"#000",x=f.config.backgroundColor||S,_="url("+y+") 0% 0% / 100%",E=0,N=0,R="auto",T="auto";if(3===f.scaleType){var k=+f.width*b;k<this.width&&(E=(this.width-k)/2)}else if(2===f.scaleType){T="hidden",R="auto";var k=+f.width*b;k<this.width&&(E=(this.width-k)/2,_="url("+y+") "+E+"px top / "+100*k/this.width+"% 100%",R="hidden")}else if(0===f.scaleType)R="hidden",T="hidden";else{R="hidden",T="auto";var z=+f.height*m;z<this.height&&(T="hidden",N=(this.height-z)/2,_="url("+y+") left "+N+"px / 100% "+100*z/this.height+"%")}return s.createElement(o,{title:r.default(t.data.name+"-预览"),key:"content"},s.createElement(u.default,{groupKey:l.data.key,type:"dashboard",hash:a.dashboard,needSwitchDevice:!(!i.query||"0"===i.query.needSwitchDevice),hideReturnButton:!(!i.query||"1"!==i.query.hideReturnButton)},s.createElement("div",{className:"dashboard-share-container",ref:this.getContainer,style:{backgroundColor:x,overflowX:R,overflowY:T}},s.createElement("div",{className:"dashboard-share-background-image",style:{background:_,filter:"blur("+f.config.backgroundBlur+"px)",opacity:f.config.backgroundOpacity/10}}),s.createElement("div",{style:{marginTop:N,marginBottom:N,marginLeft:E,marginRight:E}},s.createElement(c.default,{mode:"normal",chartStore:n,conditionStore:d,dashboard:t,scaleX:b,scaleY:m})))))},t.displayName="DashPreview",t=a.__decorate([i.inject(function(e){return{assist:e.assist,user:e.user.current,chart:e.chart,condition:e.condition,group:e.group.current,dashboard:e.dashboard.current,theme:e.chartTheme.theme}}),i.observer,a.__metadata("design:paramtypes",[Object])],t)}(s.Component);t.default=l});
;sugar.define("sugar:widgets/dashboard-ctrl-panel/multi-chart-ctrl.tsx",function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=t("sugar:node_modules/tslib/tslib.js"),l=t("sugar:utils/i18n.ts"),i=t("sugar:node_modules/react/index.js"),n=t("sugar:stores/index.ts"),o=t("sugar:utils/exception.ts"),r=t("sugar:node_modules/amis/lib/index.js"),d=[{id:"left",value:"left",label:l.default("左对齐"),iconClassName:"fa fa-align-left"},{id:"right",value:"right",label:l.default("右对齐"),iconClassName:"fa fa-align-right"},{id:"top",value:"top",label:l.default("顶部对齐"),iconClassName:"fa fa-align-left rotate-90"},{id:"bottom",value:"bottom",label:l.default("底部对齐"),iconClassName:"fa fa-align-right rotate-90"},{id:"center",value:"horizontal",label:l.default("水平中线对齐"),iconClassName:"fa fa-align-center"},{id:"middle",value:"vertical",label:l.default("垂直中线对齐"),iconClassName:"fa fa-align-center rotate-90"}],u=[{id:"distribute-horizontal",value:"horizontal",label:l.default("水平均分"),iconClassName:"fa fa-bars rotate-90"},{id:"distribute-vertical",value:"vertical",label:l.default("垂直均分"),iconClassName:"fa fa-bars"}],s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a.__extends(e,t),e.prototype.componentWillMount=function(){this.exitMultiSelecting=this.exitMultiSelecting.bind(this)},e.prototype.componentDidCatch=function(t,e){o.captureException(t,e)},e.prototype.align=function(t,e){if("horizontal"===e||"vertical"===e)return this.alignCenter(t,e);for(var a=void 0,l=void 0,i=void 0,n=void 0,o=0,r=t;o<r.length;o++){var d=r[o];"top"===e&&(void 0===i||d.top<i)?i=d.top:"bottom"===e&&(void 0===n||d.top+d.height>n)?n=d.top+d.height:"left"===e&&(void 0===a||d.left<a)?a=d.left:"right"===e&&(void 0===l||d.left+d.width>l)&&(l=d.left+d.width)}for(var u=0,s=t;u<s.length;u++){var d=s[u];void 0!==i?d.update({},{top:i}):void 0!==a?d.update({},{left:a}):void 0!==n?d.update({},{top:n-d.height}):void 0!==l&&d.update({},{left:l-d.width})}},e.prototype.alignCenter=function(t,e){for(var a=0,l=0,i=t;l<i.length;l++){var n=i[l];a+="horizontal"===e?n.left+n.width/2:n.top+n.height/2}a/=t.length;for(var o=0,r=t;o<r.length;o++){var n=r[o];"horizontal"===e?n.update({},{left:Math.round(a-n.width/2)}):n.update({},{top:Math.round(a-n.height/2)})}},e.prototype.distribute=function(t,e){if(!(t.length<2)){t.sort("horizontal"===e?function(t,e){return t.left>e.left?1:-1}:function(t,e){return t.top>e.top?1:-1});var a;a="horizontal"===e?t[t.length-1].left-(t[0].left+t[0].width):t[t.length-1].top-(t[0].top+t[0].height);for(var l=0,i=1;i<t.length-1;i++)l+="horizontal"===e?t[i].width:t[i].height;for(var n=t.length-2+1,o=(a-l)/n,i=1;i<t.length-1;i++){var r=t[i],d=t[i-1];"horizontal"===e?r.update({},{left:d.left+d.width+o}):r.update({},{top:d.top+d.height+o})}}},e.prototype.exitMultiSelecting=function(){this.props.editor.setMultiSelecting(!1),this.props.editor.setActiveTarget("dashboard")},e.prototype.render=function(){var t=this,e=this.props,a=e.editor,n=e.chartStore,o=e.conditionStore,s=[];return a&&"multiCharts"===a.target.type&&(s=n.list.data.concat(o.list.data).filter(function(t){return!!~a.target.frontendId.indexOf(t.frontendId)})),i.createElement("div",{className:"multi-chart-ctrl-container"},i.createElement("p",null,l.default("图表对齐:")),i.createElement("div",{style:{marginBottom:20}},d.map(function(e){return i.createElement(r.Button,{key:e.id,tooltip:e.label,id:e.id,onClick:function(){return t.align(s,e.value)}},i.createElement("i",{className:e.iconClassName}))})),i.createElement("p",null,l.default("图表位置分布:")),i.createElement("div",{style:{marginBottom:20}},u.map(function(e){return i.createElement(r.Button,{key:e.id,tooltip:e.label,id:e.id,onClick:function(){return t.distribute(s,e.value)}},i.createElement("i",{className:e.iconClassName}))})),i.createElement("p",null,l.default("图表操作:")),i.createElement("div",{style:{marginBottom:20}},i.createElement(r.Button,{tooltip:l.default("按 Delete 键可快速批量删除"),id:"delete",onClick:function(){return t.props.multiDeleteCharts()}},i.createElement("i",{className:"fa fa-trash m-r-xs"}),l.default("批量删除"))),i.createElement("div",{className:"line line line-dashed b-b line-lg pull-in"}),i.createElement(r.Button,{id:"cancleMulti",onClick:this.exitMultiSelecting,level:"danger"},i.createElement("i",{className:"fa fa-sign-out m-r-xs"}),l.default("退出多选状态")))},e.displayName="MultiChartCtrl",e=a.__decorate([n.observer],e)}(i.Component);e.default=s});
;sugar.define("sugar:widgets/dashboard-ctrl-panel/dashboard-index.tsx",function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=t("sugar:node_modules/tslib/tslib.js"),a=t("sugar:utils/i18n.ts"),d=t("sugar:node_modules/react/index.js"),n=t("sugar:stores/index.ts"),o=t("sugar:widgets/dashboard-ctrl-panel/dashboard-ctrl.tsx"),i=t("sugar:widgets/dashboard-ctrl-panel/multi-chart-ctrl.tsx"),s=t("sugar:widgets/dashboard-ctrl-panel/chart-ctrl.tsx"),l=t("sugar:widgets/ctrl-panel/condition-ctrl.tsx"),u=t("sugar:node_modules/amis/lib/index.js"),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.__extends(e,t),e.prototype.componentWillMount=function(){},e.prototype.render=function(){var t=this.props,e=t.editor,r=t.dashboard,n=t.chartStore,c=t.multiDeleteCharts,f=t.sqlModelStore,h=t.conditionStore;if(e.target.loading)return d.createElement(u.Spinner,{overlay:!0});if("dashboard"===e.target.type)return d.createElement(o.default,{dashboardEntity:r.data,updateDashboard:r.update});if("chart"===e.target.type){var p=n.list.data.find(function(t){return t.frontendId===e.target.frontendId}),g=n.getChartHub(e.target.frontendId);return p?d.createElement(s.default,{dashboardEntity:r.data,chartEntity:p,chartHub:g,updateChart:p.update,sqlModelStore:f}):a.default("控制面板错误：未找到对应的图表的配置数据！")}if("multiCharts"===e.target.type)return d.createElement(i.default,{chartStore:n,conditionStore:h,editor:e,multiDeleteCharts:c});if("condition"===e.target.type){var b=h.list.data.find(function(t){return t.frontendId===e.target.frontendId});return b?d.createElement(l.default,{dashboardEntity:r.data,conditionEntity:b,chartList:n.list.data,conditionList:h.list.data,updateCondition:b.update,sqlModelStore:f}):a.default("控制面板错误：未找到对应的过滤条件的配置数据！")}return d.createElement("div",null,a.default("控制面板Error"))},e.displayName="DashboardCtrlIndex",e=r.__decorate([n.observer],e)}(d.Component);e.default=c});
;sugar.define("sugar:widgets/editor/layer-manager/layer-manager-item.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=e("sugar:node_modules/tslib/tslib.js"),s=e("sugar:utils/i18n.ts"),o=e("sugar:node_modules/react/index.js"),i=e("sugar:node_modules/classnames/index.js"),r=e("sugar:stores/index.ts"),a=e("sugar:widgets/dnd-sort.tsx"),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.componentWillMount=function(){this.onMouseOver=this.onMouseOver.bind(this),this.onMouseOut=this.onMouseOut.bind(this),this.bindContextEvent=this.bindContextEvent.bind(this),this.handleContextMenu=this.handleContextMenu.bind(this)},t.prototype.onMouseOver=function(){this.props.setHoverChart(this.props.chart.frontendId)},t.prototype.onMouseOut=function(){this.props.setHoverChart("")},t.prototype.bindContextEvent=function(e){e?(this.dom=e,this.dom.addEventListener("contextmenu",this.handleContextMenu)):(this.dom&&this.dom.removeEventListener("contextmenu",this.handleContextMenu),this.dom=e)},t.prototype.handleContextMenu=function(){var e=this.props,t=e.chart,n=e.setChartActive,s=e.handleInitPopMenu;n(t.frontendId,!0),s()},t.prototype.render=function(){var e=this.props,t=e.chart,n=e.isDragging,r=e.isCurrent,a=e.setChartActive,u=e.isHover,d=null;"simple-text"===t.type&&"文本内容"!==t.config.text&&t.config.text!==s.default("文本内容")&&(d=o.createElement("span",{className:"text-xs text-muted"},"(",t.config.text,")"));var l="isDashChart"in t?t.name:t.label;return o.createElement("li",{className:i("layer-manager-item",{isDragging:n,isCurrent:r,isHover:u,"text-muted":t.config.isHidden}),onClick:function(e){return a(t.frontendId,!1,e)},ref:this.bindContextEvent,onMouseOver:this.onMouseOver,onMouseOut:this.onMouseOut,title:l},t.config.isLock?o.createElement("i",{className:"fa fa-lock m-r-xs"}):null,t.config.isHidden?o.createElement("i",{className:"fa fa-eye-slash m-r-xs"}):null,l,d)},t.displayName="LayerManagerItem",t=n.__decorate([a.default("layerManagerItem"),r.observer],t)}(o.Component);t.default=u});
;sugar.define("sugar:widgets/editor/layer-manager/layer-manager.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=e("sugar:node_modules/tslib/tslib.js"),r=e("sugar:node_modules/react/index.js"),o=e("sugar:stores/index.ts"),a=e("sugar:widgets/editor/layer-manager/layer-manager-item.tsx"),i=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.items=[],t}return n.__extends(t,e),t.prototype.componentWillMount=function(){this.onMoving=this.onMoving.bind(this),this.onDroped=this.onDroped.bind(this)},t.prototype.onMoving=function(e,t){this.props.editor.changeZIndex(e,t),this.refs.layerManager&&this.refs.layerManager.classList.add("childMoving")},t.prototype.onDroped=function(){this.refs.layerManager&&this.refs.layerManager.classList.remove("childMoving")},t.prototype.render=function(){var e=this,t=this.props,n=t.chartStore,o=t.editor,i=t.hoverChart,d=t.setHoverChart,s=t.setChartActive,l=t.setConditionActive,u=t.handleInitPopMenu,g=t.conditionStore,h=n.list.data.concat(g.list.data);return r.createElement("ul",{className:"layer-manager",ref:"layerManager"},h.sort(function(e,t){return t.zIndex-e.zIndex}).map(function(t,n){var g=!1,h=!1;return t.isDashChart?(o&&"chart"===o.target.type?g=t.frontendId===o.target.frontendId:o&&"multiCharts"===o.target.type&&(g=!!~o.target.frontendId.indexOf(t.frontendId)),t.frontendId===i&&(h=!0),r.createElement(a.default,{handleInitPopMenu:u,setChartActive:s,setHoverChart:d,key:t.frontendId,chart:t,index:n,isHover:h,isCurrent:g,id:t.frontendId,onMoving:e.onMoving,onDroped:e.onDroped})):(o&&"condition"===o.target.type?g=t.frontendId===o.target.frontendId:o&&"multiCharts"===o.target.type&&(g=!!~o.target.frontendId.indexOf(t.frontendId)),t.frontendId===i&&(h=!0),r.createElement(a.default,{handleInitPopMenu:u,setChartActive:l,setHoverChart:d,key:t.frontendId,chart:t,index:n,isHover:h,isCurrent:g,id:t.frontendId,onMoving:e.onMoving,onDroped:e.onDroped}))}))},t.displayName="LayerManager",t=n.__decorate([o.observer],t)}(r.Component);t.default=i});
;sugar.define("sugar:sites/group/dashboard-edit/editor.tsx",function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=t("sugar:node_modules/tslib/tslib.js"),i=t("sugar:utils/i18n.ts"),n=t("sugar:node_modules/react/index.js"),o=t("sugar:node_modules/react-document-title/index.js"),s=t("sugar:stores/index.ts"),r=t("sugar:widgets/confirm.tsx"),d=t("sugar:node_modules/classnames/index.js"),l=t("sugar:node_modules/amis/lib/index.js"),h=t("sugar:widgets/error.tsx"),c=t("sugar:utils/common-helper.ts"),u=t("sugar:widgets/editor/toolbar.tsx"),p=t("sugar:node_modules/lodash/throttle.js"),m=t("sugar:widgets/dashboard-body/dashboard-content.tsx"),f=t("sugar:utils/resize-sensor.ts"),g=t("sugar:widgets/dashboard-ctrl-panel/dashboard-index.tsx"),v=t("sugar:node_modules/react-dnd/lib/index.js"),y=t("sugar:node_modules/react-dnd-html5-backend/lib/index.js"),b=t("sugar:widgets/editor/lock-access.tsx"),C=t("sugar:widgets/editor/lockheartbeat-and-beforeunload.tsx"),E=t("sugar:widgets/charts/chart-manager.tsx"),M=t("sugar:widgets/conditions/condition-manager.tsx"),w=t("sugar:widgets/editor/layer-manager/layer-manager.tsx"),x=t("sugar:widgets/feedback.tsx"),N=t("sugar:widgets/pop-menu/pop-menu.tsx"),I=t("sugar:widgets/product-type/product-type-modal.tsx"),P=t("sugar:widgets/editor/chart-switcher/chart-switcher.tsx"),L=window.sugarConfig.nowProductConfig,S=[{id:"left",value:"down",label:i.default("下移一层"),iconClassName:"fa fa-angle-down"},{id:"right",value:"up",label:i.default("上移一层"),iconClassName:"fa fa-angle-up"},{id:"bottom",value:"bottom",label:i.default("移到底部"),iconClassName:"fa fa-angle-double-down"},{id:"top",value:"top",label:i.default("移到顶部"),iconClassName:"fa fa-angle-double-up"}],D=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.resizing=!1,e.startX=0,e.startWidth=0,e.width=0,e.layerPanelWidth=0,e.hasSetScale=!1,e.dom=null,e}return a.__extends(e,t),e.prototype.componentWillMount=function(){this.props.assist.setCurrentPageType("dashboard"),this.width=Math.max(380,this.props.assist.ctrlPanelWidth),this.layerPanelWidth=this.props.assist.layerPanelWidth,this.setState({ctrlPanelWidth:this.width,layerPanelWidth:this.layerPanelWidth,hover:!1,hoverLayer:!1,openExitDialog:!1,scale:.5,hoverChart:"",notDragOrMoving:!0}),this.handleMouseDown=this.handleMouseDown.bind(this),this.handleMouseMove=this.handleMouseMove.bind(this),this.handleMouseUp=this.handleMouseUp.bind(this),this.handleMouseMoveLayer=this.handleMouseMoveLayer.bind(this),this.handleMouseUpLayer=this.handleMouseUpLayer.bind(this),this.removeWindowEvents=this.removeWindowEvents.bind(this),this.removeDocumentEvents=this.removeDocumentEvents.bind(this),this.moveItem=p(this.moveItem.bind(this),30),this.dropItem=this.dropItem.bind(this),this.changeScale=this.changeScale.bind(this),this.autoFit=this.autoFit.bind(this),this.toggleCtrlPanelMin=this.toggleCtrlPanelMin.bind(this),this.handleMouseOver=this.handleMouseOver.bind(this),this.handleMouseOut=this.handleMouseOut.bind(this),this.getOut=this.getOut.bind(this),this.handleSave=this.handleSave.bind(this),this.handleCancelExit=this.handleCancelExit.bind(this),this.justExit=this.justExit.bind(this),this.saveThenExit=this.saveThenExit.bind(this),this.setHoverChart=this.setHoverChart.bind(this),this.setDragOrMoving=this.setDragOrMoving.bind(this),this.editorBodyReady=this.editorBodyReady.bind(this),this.handleClickOnEditorBody=this.handleClickOnEditorBody.bind(this),this.prepareCancelChartTarget=this.prepareCancelChartTarget.bind(this),this.onKeyUp=this.onKeyUp.bind(this),this.onKeyDown=this.onKeyDown.bind(this),this.onCopy=this.onCopy.bind(this),this.onCut=this.onCut.bind(this),this.onPaste=this.onPaste.bind(this),this.multiDeleteCharts=this.multiDeleteCharts.bind(this),this.deleteCondition=this.deleteCondition.bind(this),this.copyChart=this.copyChart.bind(this),this.setChartActive=this.setChartActive.bind(this),this.setConditionActive=this.setConditionActive.bind(this),this.changeZIndexByButton=this.changeZIndexByButton.bind(this),this.handleInitPopMenu=this.handleInitPopMenu.bind(this),this.handlePreview=this.handlePreview.bind(this),this.undo=this.undo.bind(this),this.redo=this.redo.bind(this),this.onCloneChart=this.onCloneChart.bind(this),document.addEventListener("keydown",this.onKeyDown),document.addEventListener("copy",this.onCopy),document.addEventListener("cut",this.onCut),document.addEventListener("paste",this.onPaste),this.props.editor.initialize(this.props.group.data.hash,this.props.routeParams.dashboard,this.props.editorType),window.sugarConfig.enableDataModel&&this.props.dataModelTreeList.loadData()},e.prototype.componentWillUnmount=function(){this.removeWindowEvents(!0),this.removeWindowEvents(!1),this.removeDocumentEvents(),this.props.assist.setCurrentPageType(""),this.props.chart.hubMap.clearChartHub(),this.props.condition.hubMap.clearConditionHub()},e.prototype.undo=function(){s.undoManager.canUndo&&(this.props.editor.setActiveTarget("dashboard"),s.undoManager.undo())},e.prototype.redo=function(){s.undoManager.canRedo&&s.undoManager.redo()},e.prototype.handleClickOnEditorBody=function(t){if(t.target&&t.target.classList&&t.target.classList.contains("can-cancel-chart-target")&&0===t.button){var e=this.props.editor;"dashboard"!==e.target.type&&e.setActiveTarget("dashboard")}this.dom&&this.dom.removeEventListener("mouseup",this.handleClickOnEditorBody)},e.prototype.prepareCancelChartTarget=function(t){this.dom&&t.target&&t.target.classList&&t.target.classList.contains("can-cancel-chart-target")&&0===t.button&&this.dom.addEventListener("mouseup",this.handleClickOnEditorBody)},e.prototype.setHoverChart=function(t){void 0===t&&(t=""),this.state.notDragOrMoving&&this.setState({hoverChart:t})},e.prototype.setChartActive=function(t,e,a){void 0===e&&(e=!1);var i=this.props;if(i.editor)if(e)("chart"===i.editor.target.type&&i.editor.target.frontendId!==t||!i.editor.target.frontendId||"multiCharts"===i.editor.target.type&&!~i.editor.target.frontendId.indexOf(t))&&i.editor.setActiveTarget("chart",t);else if("chart"!==i.editor.target.type||i.editor.target.frontendId!==t)if(this.props.editor.target.multiSelecting||a&&(a.ctrlKey||a.shiftKey||a.metaKey)){var n=i.editor.target.frontendId?i.editor.target.frontendId+",":"";n.indexOf(t)<0?""===n?i.editor.setActiveTarget("chart",t):i.editor.setActiveTarget("multiCharts",n+t):a&&(a.ctrlKey||a.shiftKey||a.metaKey)&&(n=n.replace(t+",",""),n=n.replace(/,$/,""),-1===n.indexOf(",")?i.editor.setActiveTarget("chart",n):i.editor.setActiveTarget("multiCharts",n))}else i.editor.setActiveTarget("chart",t)},e.prototype.setConditionActive=function(t,e,a){void 0===e&&(e=!1);var i=this.props;if(i.editor)if(e)("condition"===i.editor.target.type&&i.editor.target.frontendId!==t||!i.editor.target.frontendId||"multiCharts"===i.editor.target.type&&!~i.editor.target.frontendId.indexOf(t))&&i.editor.setActiveTarget("condition",t);else if("condition"!==i.editor.target.type||i.editor.target.frontendId!==t)if(this.props.editor.target.multiSelecting||a&&(a.ctrlKey||a.shiftKey||a.metaKey)){var n=i.editor.target.frontendId?i.editor.target.frontendId+",":"";n.indexOf(t)<0?""===n?i.editor.setActiveTarget("condition",t):i.editor.setActiveTarget("multiCharts",n+t):a&&(a.ctrlKey||a.shiftKey||a.metaKey)&&(n=n.replace(t+",",""),n=n.replace(/,$/,""),-1===n.indexOf(",")?i.editor.setActiveTarget("condition",n):i.editor.setActiveTarget("multiCharts",n))}else i.editor.setActiveTarget("condition",t)},e.prototype.setDragOrMoving=function(t){this.setState({notDragOrMoving:t})},e.prototype.handleMouseDown=function(t,e){this.startX=t.clientX,e?(this.startWidth=this.state.layerPanelWidth,window.addEventListener("mouseup",this.handleMouseUpLayer),window.addEventListener("mousemove",this.handleMouseMoveLayer)):(this.startWidth=this.state.ctrlPanelWidth,window.addEventListener("mouseup",this.handleMouseUp),window.addEventListener("mousemove",this.handleMouseMove)),this.resizing=!0,t.stopPropagation&&t.stopPropagation()},e.prototype.onKeyUp=function(t){!this.props.editor.target.multiSelecting||17!==t.keyCode&&91!==t.keyCode&&224!==t.keyCode||this.props.editor.setMultiSelecting(!1)},e.prototype._isInTextEditor=function(t){var e=window.getSelection();return e&&""!=e.toString()?!0:t.target&&"INPUT"!==t.target.tagName&&"TEXTAREA"!==t.target.tagName&&"fr-element fr-view"!==t.target.className?!1:!0},e.prototype.onKeyDown=function(t){this._isInTextEditor(t)||(8!==t.keyCode&&46!==t.keyCode||!this.props.editor.target.frontendId||this.multiDeleteCharts(),this.props.editor.target.multiSelecting||17!==t.keyCode&&91!==t.keyCode&&224!==t.keyCode||this.props.editor.setMultiSelecting(!0),(t.ctrlKey||t.metaKey)&&83===t.keyCode&&(this.handleSave(),t.preventDefault()),(t.ctrlKey||t.metaKey)&&65===t.keyCode&&(this.props.editor.selectAll(),t.preventDefault()),(t.ctrlKey||t.metaKey)&&68===t.keyCode&&(this.props.editor.copyActiveChart(),t.preventDefault()),(t.ctrlKey||t.metaKey)&&90===t.keyCode&&(t.shiftKey?this.redo():this.undo()))},e.prototype.onCloneChart=function(){this.props.editor.copyActiveChart()},e.prototype.onCopy=function(t){this._isInTextEditor(t)||this.props.editor.copyToClipboard(t)},e.prototype.onCut=function(t){this._isInTextEditor(t)||this.props.editor.cupToClipboard(t)},e.prototype.onPaste=function(t){this._isInTextEditor(t)||this.props.editor.clipboardPaste(t)},e.prototype.multiDeleteCharts=function(){var t=this;r.confirm(i.default("确定要删除选中的图表?")).then(function(){t.props.editor.deleteCharts()}).catch(function(){})},e.prototype.deleteCondition=function(){var t=this;r.confirm(i.default("确定要删除选中的过滤条件?")).then(function(){t.props.editor.deleteCharts()}).catch(function(){})},e.prototype.copyChart=function(){this.props.editor.copyActiveChart()},e.prototype.handleMouseMove=function(t){var e=this.startX-t.clientX;t.preventDefault(),this.width=Math.min(600,Math.max(380,this.startWidth+e)),this.setState({ctrlPanelWidth:this.width})},e.prototype.handleMouseMoveLayer=function(t){var e=this.startX-t.clientX;t.preventDefault(),this.width=Math.min(600,Math.max(150,this.startWidth-e)),this.setState({layerPanelWidth:this.width})},e.prototype.handleMouseUp=function(){this.resizing=!1,this.removeWindowEvents(!1),this.props.assist.setCtrlPanelWidth(this.width)},e.prototype.handleMouseUpLayer=function(){this.resizing=!1,this.removeWindowEvents(!0),this.props.assist.setLayerPanelWidth(this.width)},e.prototype.removeDocumentEvents=function(){document.removeEventListener("keydown",this.onKeyDown),document.removeEventListener("copy",this.onCopy),document.removeEventListener("cut",this.onCut),document.removeEventListener("paste",this.onPaste)},e.prototype.removeWindowEvents=function(t){t?(window.removeEventListener("mouseup",this.handleMouseUpLayer),window.removeEventListener("mousemove",this.handleMouseMoveLayer)):(window.removeEventListener("mouseup",this.handleMouseUp),window.removeEventListener("mousemove",this.handleMouseMove))},e.prototype.handleMouseOver=function(t){t?this.props.assist.layerPanelMin&&this.setState({hoverLayer:!0}):this.props.assist.ctrlPanelMin&&this.setState({hover:!0})},e.prototype.handleMouseOut=function(t,e){if(e)this.props.assist.layerPanelMin&&!this.resizing&&this.setState({hoverLayer:!1});else{var a=t.clientX,i=t.clientY,n=document.body.clientWidth;this.props.assist.ctrlPanelMin&&!this.resizing&&(n-a>=this.state.ctrlPanelWidth||65>i)&&this.setState({hover:!1})}},e.prototype.toggleCtrlPanelMin=function(t){t?this.props.assist.toggleLayerPanelMin():this.props.assist.toggleCtrlPanelMin()},e.prototype.getOut=function(){var t=this.props;t.editor.hasModified?this.setState({openExitDialog:!0}):this.justExit()},e.prototype.handleSave=function(){this.props.editor.hasModified&&"pending"!==this.props.editor.savingState&&this.props.editor.save(this.props.group.data.hash,this.props.routeParams.dashboard,this.props.editorType)},e.prototype.handlePreview=function(){var t=this;this.props.editor.hasModified&&"pending"!==this.props.editor.savingState?this.props.editor.save(this.props.group.data.hash,this.props.routeParams.dashboard,"dashboard").then(function(){window.open("/group/"+t.props.group.data.key+"/preview/dashboard/"+t.props.routeParams.dashboard+"?hideReturnButton=1")}):window.open("/group/"+this.props.group.data.key+"/preview/dashboard/"+this.props.routeParams.dashboard+"?hideReturnButton=1")},e.prototype.handleCancelExit=function(){this.setState({openExitDialog:!1})},e.prototype.justExit=function(){var t=this.props;t.editor.setModified(!1),t.router.push("/group/"+t.group.data.key+"/dashboard/"+t.routeParams.dashboard)},e.prototype.saveThenExit=function(){var t=this;this.props.editor.hasModified&&"pending"!==this.props.editor.savingState&&this.props.editor.save(this.props.group.data.hash,this.props.routeParams.dashboard,this.props.editorType).then(function(e){"done"===e.state&&t.justExit()})},e.prototype.moveItem=function(t,e,a,i){var n=this.props.dashboard.data.config.grid;n=n&&n>1?parseInt(n,10):1;for(var o,s,r=0;r<e.length;r++){o=c.getPosition(parseInt(a[r]+"",10),n),s=c.getPosition(parseInt(i[r]+"",10),n),e[r].style.left=o+"px",e[r].style.top=s+"px";var d=e[r].getElementsByClassName("grid-line-label");d&&d[0]&&(d[0].innerHTML=o+","+s)}if(1===e.length)for(var l=0,h=this.props.chart.list.data;l<h.length;l++){var u=h[l],p=document.getElementById("chart_"+u.frontendId);p&&(o===u.left||o===u.left+u.width||s===u.top||s===u.top+u.height?p.classList.add("isAlign"):p.classList.remove("isAlign"))}this.setDragOrMoving(!1)},e.prototype.dropItem=function(t,e,a){for(var i=this,n=0;n<t.length;n++)if(t[n].left!==e[n]||t[n].top!==a[n]){var o={};t[n].left!==e[n]&&(o.left=e[n]),t[n].top!==a[n]&&(o.top=a[n]),t[n].update({},o)}setTimeout(function(){i.setDragOrMoving(!0);for(var t=0,e=i.props.chart.list.data;t<e.length;t++){var a=e[t],n=document.getElementById("chart_"+a.frontendId);n&&n.classList.remove("isAlign")}},100)},e.prototype.changeScale=function(t){if(t){var e=parseInt(t.target.value,10)/100;this.setState({scale:e})}},e.prototype.autoFit=function(){var t=this.props.dashboard,e=Number(f.getComputedStyle(this.editorBodyDom,"width").replace("px","")),a=Number(t.data.width)>0?Number(t.data.width):1,i=this.editorBodyDom.offsetHeight,n=Number(t.data.height)>0?Number(t.data.height):1,o=(e-40)/a,s=(i-45)/n;this.hasSetScale=!0;var r=o>s?s:o;this.setState({scale:r})},e.prototype.editorBodyReady=function(t){var e=this.props.dashboard;t?(this.dom=t,t.addEventListener("contextmenu",this.handleInitPopMenu)):this.editorBodyDom&&this.editorBodyDom.removeEventListener("contextmenu",this.handleInitPopMenu),this.editorBodyDom=t,t&&"done"===e.loadState&&e.data.hash&&this.autoFit()},e.prototype.lockLayers=function(){return L&&!L.chartHide?void I.showUpdate("product-type-hide"):(this.props.chart.list.changeConfig(this.props.editor.target.frontendId,{isLock:!0}),void this.props.editor.setActiveTarget("dashboard"))},e.prototype.unLockLayers=function(){this.props.chart.list.changeConfig(this.props.editor.target.frontendId,{isLock:!1})},e.prototype.hideLayers=function(){return L&&!L.chartHide?void I.showUpdate("product-type-hide"):(this.props.chart.list.changeConfig(this.props.editor.target.frontendId,{isHidden:!0}),void this.props.editor.setActiveTarget("dashboard"))},e.prototype.showLayers=function(){this.props.chart.list.changeConfig(this.props.editor.target.frontendId,{isHidden:!1})},e.prototype.changeZIndexByButton=function(t){["chart","multiCharts","condition"].includes(this.props.editor.target.type)&&this.props.editor.changeZIndexByButton(t,this.props.editor.target.frontendId)},e.prototype.componentWillReact=function(){this.hasSetScale||this.editorBodyReady(this.editorBodyDom)},e.prototype.getActiveChart=function(){var t=this.props,e=t.editor,a=t.chart,i=t.condition,n=e.target.frontendId;return"chart"===e.target.type?a.list.data.filter(function(t){return t.frontendId===n})[0]:"condition"===e.target.type?i.list.data.filter(function(t){return t.frontendId===n})[0]:null},e.prototype.handleInitPopMenu=function(){var t=this,e=this.props,a=e.editor,n=e.chart,o=this.getActiveChart(),s={icon:"fa fa-lock",name:i.default("锁定"),cb:function(){return t.lockLayers()}};if(o&&o.config.isLock===!0)s={icon:"fa fa-unlock",name:i.default("解锁"),cb:function(){return t.unLockLayers()}};else if("multiCharts"===a.target.type){var r=a.target.frontendId.split(","),d=n.list.data.filter(function(t){return-1!=r.indexOf(t.frontendId)});d.length>0&&d.every(function(t){return t.config.isLock===!0})&&(s={icon:"fa fa-unlock",name:i.default("解锁"),cb:function(){return t.unLockLayers()}})}var l={icon:"fa fa-eye-slash",name:i.default("隐藏"),cb:function(){return t.hideLayers()}};if(o&&o.config.isHidden===!0)l={icon:"fa fa-eye",name:i.default("展现"),cb:function(){return t.showLayers()}};else if("multiCharts"===a.target.type){var h=a.target.frontendId.split(","),d=n.list.data.filter(function(t){return-1!=h.indexOf(t.frontendId)});d.length>0&&d.every(function(t){return t.config.isHidden===!0})&&(l={icon:"fa fa-eye",name:i.default("展现"),cb:function(){return t.showLayers()}})}var c=N.popMenu.getPopMenuTree();if(["chart","multiCharts","condition"].includes(a.target.type)&&c){var u=[{icon:"fa fa-angle-double-up",name:i.default("置顶"),cb:function(){return t.changeZIndexByButton("top")}},{icon:"fa fa-angle-double-down",name:i.default("置底"),cb:function(){return t.changeZIndexByButton("bottom")}},{icon:"fa fa-angle-up",name:i.default("上移一层"),cb:function(){return t.changeZIndexByButton("up")}},{icon:"fa fa-angle-down",name:i.default("下移一层"),cb:function(){return t.changeZIndexByButton("down")}}];"condition"!==a.target.type&&u.unshift(l,s),c.unshift({icon:"fa fa-align-justify",name:i.default("图层操作"),children:u}),"chart"===a.target.type&&c.unshift({icon:"fa fa-clone",name:i.default("复制图表"),cb:this.copyChart}),c.unshift("condition"!==a.target.type?{icon:"fa fa-trash",name:i.default("删除图表"),shortCut:"Del",cb:this.multiDeleteCharts}:{icon:"fa fa-trash",name:i.default("删除过滤条件"),shortCut:"Del",cb:this.deleteCondition}),N.popMenu.setPopMenuTree(c)}},e.prototype.render=function(){var t=this,e=this.props,a=e.group,r=e.dashboard,c=e.routeParams,p=e.editor,f=e.chart,v=e.condition,y=e.sqlModel,b=e.company,C=this.state.ctrlPanelWidth,N=this.state.layerPanelWidth,I=this.props.assist.ctrlPanelMin,L=this.props.assist.layerPanelMin,D=r.data.config.grid;D=D&&D>1?parseInt(D,10):1;var k=0,T=0;v.list.data&&v.list.data.length&&(T=v.list.data[0].zIndex),f.list.data&&f.list.data.length&&(k=f.list.data[0].zIndex);var _=T>k?T:k;if("pending"===r.loadState||"done"===r.loadState&&!r.data.hash)return n.createElement(l.Spinner,{overlay:!0,size:"lg"});if("error"===r.loadState)return n.createElement(h.default,{msg:i.default(r.loadError.message||"请求错误"),links:[{to:"/group/"+a.data.key+"/dashboard/"+c.dashboard,label:i.default("返回报表空间")}]});var B=i.default("控制面板"),A=n.createElement("a",{href:"/docs/Chart-Dashboard-Action",target:"_blank"},n.createElement("i",{className:"fa fa-question-circle-o"}),i.default("大屏页面整体配置")),O=p.target.frontendId;if("chart"===p.target.type){var W=f.list.data.filter(function(t){return t.frontendId===O})[0],K=E.getChartByType(W&&W.type);if(W&&K){B=i.default("控制面板 | 「"+(W.dynamicName||W.name)+"」");var U="/docs/Chart-"+K.type,H=K.docName||K.name;"table"===K.type&&"crossPivot"===W.dataConfig.tableType&&(U="/docs/Chart-pivotTable",H=i.default("交叉透视表")),"table"===K.type&&"retention"===W.dataConfig.tableType&&(U="/docs/Chart-retentionTable",H=i.default("留存报表")),A=n.createElement("a",{href:U,target:"_blank"},n.createElement("i",{className:"fa fa-question-circle-o"}),i.default("「"+H+"」文档"))}}else if("multiCharts"===p.target.type)A=n.createElement("a",{href:"/docs/Chart-Dashboard-Action",target:"_blank"},n.createElement("i",{className:"fa fa-question-circle-o"}),i.default("选中"),p.target.frontendId.split(",").length,i.default("个图表，可批量操作"));else if("condition"===p.target.type){var j=v.list.data.filter(function(t){return t.frontendId===O})[0],z=M.getConditionByType(j&&j.type);j&&z&&(B=i.default("控制面板 | 「"+j.label+"」"),A=n.createElement("a",{href:"/docs/Condition-"+z.type,target:"_blank"},n.createElement("i",{className:"fa fa-question-circle-o"}),z.name,i.default("文档")))}return n.createElement(o,{title:""+r.data.name+i.default("-编辑")||i.default("未命名-编辑")},n.createElement("div",{className:"editor-container dashboard-editor-container",tabIndex:-2,onKeyUp:this.onKeyUp},n.createElement("header",{className:"box-shadow bg-dark"},n.createElement("div",{className:"navbar-header"},n.createElement("div",{className:"navbar-brand text-lt"},n.createElement("img",{src:b.avatar||window.sugarConfig.logo||"/static/logo.png",className:"navbar-brand__logo",alt:"."}),n.createElement("span",{className:"m-l"},window.sugarConfig.name))),n.createElement("div",{className:"editor-toolbar hidden-xs"},n.createElement("div",{className:"editor-toolbar__left"},n.createElement("ul",{className:"btns-box"},n.createElement("li",{className:d("btn-item",{"btn-item__disabled":!s.undoManager.canUndo}),onClick:this.undo},n.createElement("div",{className:"btn-container"},n.createElement("i",{className:"fa fa-undo"}),n.createElement("span",{className:"btn-text"},i.default("撤销")))),n.createElement("li",{className:d("btn-item",{"btn-item__disabled":!s.undoManager.canRedo}),onClick:this.redo},n.createElement("div",{className:"btn-container"},n.createElement("i",{className:"fa fa-repeat"}),n.createElement("span",{className:"btn-text"},i.default("重做")))),n.createElement("li",{className:d("btn-item",{"btn-item__disabled":!p.target.frontendId}),title:i.default("还可以使用键盘 ctrl+c 进行复制，可在别的页面用 ctrl+v 粘贴"),onClick:this.onCloneChart},n.createElement("div",{className:"btn-container"},n.createElement("i",{className:"fa fa-copy"}),n.createElement("span",{className:"btn-text"},i.default("复制图表")))))),n.createElement("div",{className:"editor-toolbar__center"},n.createElement(u.default,{groupHash:a.data.hash,addChart:p.addChart,addCondition:p.addCondition,companyEmailSuffix:b.emailSuffix,isDash:!0,maxZIndex:_})),n.createElement("div",{className:"editor-toolbar__right"},n.createElement("ul",{className:"btns-box"},n.createElement("li",{className:"btn-item"},n.createElement("a",{href:"/docs",target:"_blank"},n.createElement("div",{className:"btn-container"},n.createElement("i",{className:"fa fa-question"}),n.createElement("span",{className:"btn-text"},i.default("帮助文档"))))),n.createElement(x.default,{inEditor:!0})),n.createElement("div",{className:"cut-line"}),n.createElement("ul",{className:"btns-box"},n.createElement("li",{className:d("btn-item",{"btn-item__disabled":"pending"===p.savingState}),onClick:this.handlePreview},n.createElement("div",{className:"btn-container"},n.createElement("i",{className:"fa fa-expand"}),n.createElement("span",{className:"btn-text"},""+(p.hasModified?i.default("保存并"):""),i.default("预览")))),n.createElement("li",{className:d("btn-item",{"btn-item__disabled":!p.hasModified||"pending"===p.savingState}),onClick:this.handleSave},n.createElement("div",{className:"btn-container"},n.createElement("i",{className:"fa fa-floppy-o"}),n.createElement("span",{className:"btn-text"},i.default("保存")))),n.createElement("li",{className:"btn-item",onClick:this.getOut},n.createElement("div",{className:"btn-container"},n.createElement("i",{className:"fa fa-times"}),n.createElement("span",{className:"btn-text"},i.default("退出")))))))),n.createElement("div",{className:d("editor-ctrl-panel layer-panel",{min:L,hover:this.state.hoverLayer}),onMouseOver:function(){return t.handleMouseOver(!0)},onMouseOut:function(e){return t.handleMouseOut(e,!0)},style:{width:!L||this.state.hoverLayer?N:40}},n.createElement("div",{className:"min-banner"},i.default("图层管理")),n.createElement("div",{className:"resizer",onMouseDown:function(e){return t.handleMouseDown(e,!0)}}),n.createElement("div",{className:"editor-ctrl-panel__header"},n.createElement("div",{className:"ctrl-title-normal"},i.default("图层管理")),n.createElement("i",{className:d("ctrl-panel-min-toggle fa",{"fa-angle-double-left":!this.props.assist.layerPanelMin,"fa-angle-double-right":this.props.assist.layerPanelMin}),onClick:function(){return t.toggleCtrlPanelMin(!0)}})),n.createElement("div",{className:"layer-manager-toolbar"},S.map(function(e){return n.createElement(l.Button,{key:e.id,tooltip:e.label,id:e.id,className:"btn",onClick:function(){return t.changeZIndexByButton(e.value)}},n.createElement("i",{className:e.iconClassName}))})),n.createElement("div",{className:"editor-ctrl-panel__body"},n.createElement(w.default,{chartStore:f,conditionStore:v,editor:p,setChartActive:this.setChartActive,setConditionActive:this.setConditionActive,hoverChart:this.state.hoverChart,setHoverChart:this.setHoverChart,handleInitPopMenu:this.handleInitPopMenu}))),n.createElement("div",{className:"editor-report-info",style:{right:I?40:C,left:L?40:N},onClick:function(){return"dashboard"!==p.target.type&&p.setActiveTarget("dashboard")}},n.createElement("div",{className:d("editor-report-info__title",{active:"dashboard"===p.target.type})},r.data.name||i.default("未命名"))),n.createElement("div",{id:"editor-body",ref:this.editorBodyReady,className:"editor-body wrapper-md can-cancel-chart-target",style:{right:I?40:C,left:L?40:N},onMouseDown:this.prepareCancelChartTarget},n.createElement(m.DashboardContentEditable,{mode:"editor",editor:p,chartStore:f,conditionStore:v,setChartActive:this.setChartActive,setConditionActive:this.setConditionActive,isMultiSelecting:p.target.multiSelecting,dashboard:r,moveItem:this.moveItem,dropItem:this.dropItem,scaleX:this.state.scale,scaleY:this.state.scale,grid:D,hoverChart:this.state.hoverChart,setDragOrMoving:this.setDragOrMoving,notDragOrMoving:this.state.notDragOrMoving,setHoverChart:this.setHoverChart})),n.createElement("div",{className:"bottom-panel",style:{right:I?40:C}},n.createElement("span",null,i.default("面板缩放百分比")),n.createElement("input",{className:"range",type:"range",min:10,max:200,step:1,value:Math.round(100*this.state.scale),onChange:this.changeScale}),n.createElement("input",{className:"number",type:"number",min:10,max:200,step:1,value:Math.round(100*this.state.scale),onChange:this.changeScale}),n.createElement("i",{className:"fas fa-expand",onClick:this.autoFit,title:i.default("自动适应")})),n.createElement("div",{className:d("editor-ctrl-panel",{min:I,hover:this.state.hover}),onMouseOver:function(){return t.handleMouseOver(!1)},onMouseOut:function(e){return t.handleMouseOut(e,!1)},style:{width:!I||this.state.hover?C:40}},n.createElement("div",{className:"min-banner"},i.default("控制面板")),n.createElement("div",{className:"resizer",onMouseDown:function(e){return t.handleMouseDown(e,!1)}}),n.createElement("div",{className:"editor-ctrl-panel__header"},n.createElement("i",{className:d("ctrl-panel-min-toggle fa",{"fa-angle-double-left":this.props.assist.ctrlPanelMin,"fa-angle-double-right":!this.props.assist.ctrlPanelMin}),onClick:function(){return t.toggleCtrlPanelMin(!1)}}),n.createElement("div",{className:"ctrl-title"},B),n.createElement("div",{className:"ctrl-desc text-info"},A),n.createElement(P.default,{editor:p,chartStore:f})),n.createElement("div",{className:"editor-ctrl-panel__body"},n.createElement(g.default,{editor:p,dashboard:r,chartStore:f,conditionStore:v,sqlModelStore:y,multiDeleteCharts:this.multiDeleteCharts}))),n.createElement(l.Modal,{show:this.state.openExitDialog},n.createElement(l.Modal.Header,{onClose:this.handleCancelExit},n.createElement(l.Modal.Title,null,i.default("退出"))),n.createElement(l.Modal.Body,null,i.default("您的修改未保存！！！『直接退出』将不会保存您所做的修改。")),n.createElement(l.Modal.Footer,null,n.createElement(l.Button,{disabled:"pending"===p.savingState,onClick:this.handleCancelExit},i.default("取消")),n.createElement(l.Button,{disabled:"pending"===p.savingState,onClick:this.justExit},i.default("直接退出")),n.createElement(l.Button,{disabled:"pending"===p.savingState,level:"primary",onClick:this.saveThenExit},i.default("保存并退出"))))))},e.displayName="DashboardEditor",e=a.__decorate([v.DragDropContext(y.default),s.inject(function(t){return{assist:t.assist,user:t.user.current,group:t.group.current,dashboard:t.dashboard.current,editor:t.editor,editorType:"dashboard",chart:t.chart,condition:t.condition,sqlModel:t.sqlModel,dataModelTreeList:t.dataModel.treeList,company:t.company.info}}),b.default,C.default,s.observer],e)}(n.Component);e.default=D});
;sugar.define("sugar:sites/dashboard-share/dashboard-share.tsx",function(e,t){"use strict";function a(e){if(p.isMobile&&p.isIOS&&document.body.clientWidth<750){var t=+e.width>0?+e.width:1,a=+e.height>0?+e.height:1;if(t/a>16/9)return-1}return e.scaleType}Object.defineProperty(t,"__esModule",{value:!0}),t.getScaleType=void 0;var r=e("sugar:node_modules/tslib/tslib.js"),s=e("sugar:utils/i18n.ts"),o=e("sugar:node_modules/react/index.js"),i=e("sugar:node_modules/react-document-title/index.js"),n=e("sugar:stores/index.ts"),d=e("sugar:node_modules/lodash/debounce.js"),h=e("sugar:utils/storage.ts"),l=e("sugar:utils/resize-sensor.ts"),u=e("sugar:node_modules/amis/lib/index.js"),c=e("sugar:widgets/dashboard-body/dashboard-content.tsx"),p=e("sugar:utils/common-helper.ts"),m=e("sugar:node_modules/lodash/get.js"),g=function(e){function t(t){var a=e.call(this,t)||this;return a.viewType="loading",document.documentElement.style.backgroundColor="transparent",a.getContainer=a.getContainer.bind(a),a.setDashboardScale=a.setDashboardScale.bind(a),a.setPassword=a.setPassword.bind(a),p.initWXSDK(function(){a.updateWXShareData()}),a.props.assist.setCurrentPageType("dashboard"),a}return r.__extends(t,e),t.prototype.componentWillMount=function(){this.props.dashboard.shareLoad(this.props.routeParams.dashboardShareToken),this.setState({scaleX:0,scaleY:0,password:""})},t.prototype.componentWillReceiveProps=function(e){e.routeParams.dashboardShareToken!==this.props.routeParams.dashboardShareToken&&e.dashboard.shareLoad(e.routeParams.dashboardShareToken)},t.prototype.componentWillUnmount=function(){this.unWatchResize&&this.unWatchResize(),this.props.assist.setCurrentPageType("")},t.prototype.componentWillReact=function(){this.setDashboardScale();var e=this.props,t=e.dashboard,a=e.routeParams.dashboardShareToken,r=h.get("share_pw")||{},s=m(r,"["+a+"].time"),o=m(r,"["+a+"].password");t.data.hash?this.viewType="report":s&&o&&this.isValid(s)&&!t.wrongPassword?(t.setSharePassword(o,!0),t.shareLoad(a)):t.needValidatePassword&&(this.viewType="modal")},t.prototype.isValid=function(e){var t=this.props.dashboard,a=t.cacheTime,r=t.systemTime;return e?(r||+new Date)-e<1e3*a*3600*24:!1},t.prototype.updateWXShareData=function(){if(p.WXSDKReady){var e=s.default(this.props.dashboard.data.name||"大屏分享"),t=s.default(this.props.dashboard.data.remark||"百度 Sugar"),a=window.location.href,r=window.location.origin+"/static/wx-dash.png",o=window.wx,i={title:e,desc:t,link:a,imgUrl:r,success:function(){}};o.updateTimelineShareData&&o.updateTimelineShareData(i),o.onMenuShareTimeline&&o.onMenuShareTimeline(i),o.updateAppMessageShareData&&o.updateAppMessageShareData(i),o.onMenuShareAppMessage&&o.onMenuShareAppMessage(i)}},t.prototype.setDashboardScale=function(){var e=this.props.dashboard;if(this.dashboardContainer&&"done"===e.loadState&&e.data.hash){if(this.dashboardContainer.getElementsByClassName("jw-flag-fullscreen").length)return;var t=Number(l.getComputedStyle(this.dashboardContainer,"width").replace("px","")),r=Number(l.getComputedStyle(this.dashboardContainer,"height").replace("px","")),s=e.data;this.width=isNaN(t)?0:t,this.height=isNaN(r)?0:r;var o=+s.width>0?+s.width:1,i=+s.height>0?+s.height:1,n=void 0,d=void 0,h=a(s);3===h?(n=Math.min(this.width/o,this.height/i),d=n):0===h?(n=this.width/o,d=this.height/i):1===h?(n=this.width/o,d=n):2===h?(n=this.height/i,d=this.height/i):(n=this.width/Math.min(o,1080),d=n),this.setState({scaleX:n,scaleY:d})}},t.prototype._initResizeSensor=function(){this.unWatchResize&&this.unWatchResize();var e=this.dashboardContainer;e&&(this.unWatchResize=l.resizeSensor(e,d(this.setDashboardScale,250)))},t.prototype.getContainer=function(e){this.dashboardContainer=e,this.setDashboardScale(),this._initResizeSensor()},t.prototype.setPassword=function(e){e.preventDefault(),this.state.password?(this.props.dashboard.setSharePassword(this.state.password),this.props.dashboard.shareLoad(this.props.routeParams.dashboardShareToken)):u.toast.error(s.default("请输入分享密码！"))},t.prototype.render=function(){var e=this,t=this.props,r=t.dashboard,n=(t.routeParams,t.chart),d=t.condition,h=t.theme,l=this.state,m=l.scaleX,g=l.scaleY,b=l.password;if("pending"===r.loadState)return o.createElement(u.Spinner,{overlay:!0,key:"loading",size:"lg"});if("error"===r.loadState)return"AuthorizeError"===r.loadError.type?o.createElement("h3",{className:"text--center text-danger"},s.default("无权查看该报表页面")):o.createElement("h3",{className:"text--center text-danger"},s.default(r.loadError.message||"请求错误"));if("loading"===this.viewType)return o.createElement(u.Spinner,{overlay:!0,key:"loading",size:"lg"});if("modal"===this.viewType)return[o.createElement(u.Spinner,{overlay:!0,key:"loading",size:"lg"}),o.createElement(u.Modal,{show:!0,key:"password"},o.createElement(u.Modal.Header,{showCloseButton:!1},o.createElement(u.Modal.Title,null,s.default("请输入大屏分享密码"))),o.createElement(u.Modal.Body,null,o.createElement("div",{className:"a-Form-item a-Form-item--horizontal"},o.createElement("label",{className:"a-Form-label a-Form-itemColumn--3 text--right"},s.default("密码")),o.createElement("div",{className:"a-Form-value a-Form-itemColumn--8"},o.createElement(u.InputBox,{type:"password",value:b,onChange:function(t){e.setState({password:t})}})))),o.createElement(u.Modal.Footer,null,"pending"===r.loadState?o.createElement(u.Spinner,null):o.createElement(u.Button,{level:"primary",onClick:this.setPassword},s.default("确定"))))];var f=r.data,w="";0===f.config.backgroundType?w=f.config.backgroundUrl:1===f.config.backgroundType&&(w=f.imgUrl||"");var S=h.config||{},y=S.dashboardBC,v=S.pageBC,C=y||v||"#000",T=f.config.backgroundColor||C,k="url("+w+") 0% 0% / 100%",E=0,x=0,D="auto",P="auto",M=a(f);if(3===M){var _=+f.width*m;_<this.width&&(E=(this.width-_)/2)}else if(2===M){P="hidden",D="auto";var _=+f.width*m;_<this.width&&(E=(this.width-_)/2,k="url("+w+") "+E+"px top / "+100*_/this.width+"% 100%",D="hidden")}else if(0===M)D="hidden",P="hidden";else{D=-1===M?"auto":"hidden",P="auto";var N=+f.height*g;N<this.height&&(P="hidden",x=(this.height-N)/2,k="url("+w+") left "+x+"px / 100% "+100*N/this.height+"%")}var W={backgroundColor:T,overflowX:D,overflowY:P};return p.isIOS&&(W.WebkitOverflowScrolling="touch"),o.createElement(i,{title:r.data.name},o.createElement("div",{className:"dashboard-share-container reportOrDashBackColor",ref:this.getContainer,style:W},o.createElement("div",{className:"dashboard-share-background-image reportOrDashBackImg",style:{background:k,filter:"blur("+f.config.backgroundBlur+"px)",opacity:f.config.backgroundOpacity/10}}),o.createElement("div",{style:{marginTop:x,marginBottom:x,marginLeft:E,marginRight:E}},o.createElement(c.default,{mode:"normal",chartStore:n,conditionStore:d,dashboard:r,scaleX:m,scaleY:g}))))},t.displayName="DashboardShare",t=r.__decorate([n.inject(function(e){return{assist:e.assist,chart:e.chart,condition:e.condition,dashboard:e.dashboard.current,theme:e.chartTheme.theme}}),n.observer,r.__metadata("design:paramtypes",[Object])],t)}(o.Component);t.default=g,t.getScaleType=a});
;sugar.define("sugar:sites/report-share/report-share.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=e("sugar:node_modules/tslib/tslib.js"),a=e("sugar:utils/i18n.ts"),o=e("sugar:node_modules/react/index.js"),s=e("sugar:node_modules/react-document-title/index.js"),n=e("sugar:stores/index.ts"),i=e("sugar:utils/storage.ts"),p=e("sugar:utils/common-helper.ts"),l=e("sugar:node_modules/amis/lib/index.js"),d=e("sugar:widgets/report-body/report-content.tsx"),u=e("sugar:widgets/report-body/iframe.tsx"),c=e("sugar:node_modules/lodash/get.js"),m=function(e){function t(t){var r=e.call(this,t)||this;return r.viewType="loading",r.setPassword=r.setPassword.bind(r),r.notifyParent(),p.initWXSDK(function(){r.updateWXShareData()}),r.props.assist.setCurrentPageType("report"),r}return r.__extends(t,e),t.prototype.componentWillMount=function(){this.props.report.shareLoad(this.props.routeParams.reportHash,this.props.routeParams.reportShareToken),this.setState({password:""})},t.prototype.componentWillReceiveProps=function(e){var t=this.props;e.routeParams.reportHash!==t.routeParams.reportHash&&e.report.shareLoad(e.routeParams.reportHash,e.routeParams.reportShareToken)},t.prototype.componentWillUnmount=function(){this.props.assist.setCurrentPageType("")},t.prototype.componentWillReact=function(){var e=this.props,t=e.report,r=e.routeParams,a=r.reportHash,o=r.reportShareToken,s=i.get("share_pw")||{},n=c(s,"["+a+"].time"),p=c(s,"["+a+"].password");t.data.hash?this.viewType="report":p&&n&&t.cacheTime&&this.isValid(n)&&!t.wrongPassword?(t.setSharePassword(p,!0),t.shareLoad(a,o)):t.needValidatePassword&&(this.viewType="modal")},t.prototype.isValid=function(e){var t=this.props.report,r=t.cacheTime,a=t.systemTime;return e?(a||+new Date)-e<1e3*r*3600*24:!1},t.prototype.updateWXShareData=function(){if(p.WXSDKReady){var e=this.props.report.data.name||"报表分享",t=this.props.report.data.remark||"百度 Sugar",r=window.location.href,a=window.location.origin+"/static/wx-report.png",o=window.wx,s={title:e,desc:t,link:r,imgUrl:a,success:function(){}};o.updateTimelineShareData&&o.updateTimelineShareData(s),o.onMenuShareTimeline&&o.onMenuShareTimeline(s),o.updateAppMessageShareData&&o.updateAppMessageShareData(s),o.onMenuShareAppMessage&&o.onMenuShareAppMessage(s)}},t.prototype.notifyParent=function(){if(parent&&parent.postMessage){var e=0,t=document.body,r=document.documentElement;setInterval(function(){var a=Math.max(t.scrollHeight,r.scrollHeight,t.offsetHeight,r.offsetHeight,t.clientHeight,r.clientHeight);a!=e&&(parent.postMessage({height:a},"*"),e=a)},100)}},t.prototype.setPassword=function(e){e.preventDefault(),this.state.password?(this.props.report.setSharePassword(this.state.password),this.props.report.shareLoad(this.props.routeParams.reportHash,this.props.routeParams.reportShareToken)):l.toast.error(a.default("请输入分享密码！"))},t.prototype.render=function(){var e=this,t=this.props,r=t.report,n=t.chart,i=t.condition;return"pending"===r.loadState?o.createElement(l.Spinner,{overlay:!0,key:"loading",size:"lg"}):"error"===r.loadState?"AuthorizeError"===r.loadError.type?o.createElement("h3",{className:"text--center text-danger"},a.default("无权查看该报表页面")):o.createElement("h3",{className:"text--center text-danger"},a.default(r.loadError.message||"请求错误")):"loading"===this.viewType?o.createElement(l.Spinner,{overlay:!0,key:"loading",size:"lg"}):"modal"===this.viewType?[o.createElement(l.Spinner,{overlay:!0,key:"loading",size:"lg"}),o.createElement(l.Modal,{show:!0,key:"password"},o.createElement(l.Modal.Header,{showCloseButton:!1},o.createElement(l.Modal.Title,null,a.default("请输入报表分享密码"))),o.createElement(l.Modal.Body,null,o.createElement("div",{className:"a-Form-item a-Form-item--horizontal"},o.createElement("label",{className:"a-Form-label a-Form-itemColumn--3 text--right"},a.default("密码")),o.createElement("div",{className:"a-Form-value a-Form-itemColumn--8"},o.createElement(l.InputBox,{type:"password",value:this.state.password,onChange:function(t){e.setState({password:t})}})))),o.createElement(l.Modal.Footer,null,"pending"===r.loadState?o.createElement(l.Spinner,null):o.createElement(l.Button,{level:"primary",onClick:this.setPassword},a.default("确定"))))]:o.createElement(s,{title:r.data.name,key:"content"},2===r.data.type?o.createElement("div",{className:"report-share-container"},o.createElement(u.default,{src:r.data.url})):o.createElement("div",{className:(p.isMobile?"wrapper-xxs":"wrapper-sm")+" report-share-container-content"},o.createElement(d.default,{mode:"normal",chartStore:n,conditionStore:i,report:r})))},t.displayName="ReportShare",t=r.__decorate([n.inject(function(e){return{assist:e.assist,company:e.company.info,user:e.user.current,group:e.group.current,report:e.report.current,chart:e.chart,condition:e.condition}}),n.observer,r.__metadata("design:paramtypes",[Object])],t)}(o.Component);t.default=m});
;sugar.define("sugar:sites/self/dashboard/dashboard.tsx",function(e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var t=e("sugar:node_modules/tslib/tslib.js"),s=e("sugar:utils/i18n.ts"),o=e("sugar:node_modules/react/index.js"),r=e("sugar:node_modules/react-document-title/index.js"),n=e("sugar:stores/index.ts"),i=e("sugar:node_modules/amis/lib/index.js"),l=e("sugar:node_modules/lodash/debounce.js"),d=e("sugar:node_modules/react-router/lib/index.js"),c=e("sugar:utils/resize-sensor.ts"),h=e("sugar:sites/group/dashboard/dashboard-collection.tsx"),u=e("sugar:widgets/dashboard-body/dashboard-content.tsx"),p=e("sugar:node_modules/xss/lib/index.js"),m=e("sugar:utils/xssOption.ts"),b=function(e){function a(a){var t=e.call(this,a)||this;return t.dashboardContainer=null,t.rememberPath=t.rememberPath.bind(t),t.getContainer=t.getContainer.bind(t),t.setDashboardScale=t.setDashboardScale.bind(t),t}return t.__extends(a,e),a.prototype.componentWillMount=function(){this.props.dashboard.loadSelfDashboard(this.props.routeParams.dashboard),this.setState({scaleX:0,scaleY:0}),this.uncollectSucessCallback=this.uncollectSucessCallback.bind(this)},a.prototype.componentWillReact=function(){this.setDashboardScale()},a.prototype.componentWillReceiveProps=function(e){var a=this.props;e.routeParams.dashboard!==a.routeParams.dashboard&&(this.rememberPath(e),this.props.dashboard.loadSelfDashboard(e.routeParams.dashboard))},a.prototype.componentDidMount=function(){this.rememberPath(this.props)},a.prototype.componentWillUnmount=function(){this.unWatchResize&&this.unWatchResize()},a.prototype.rememberPath=function(e){var a=e.location.pathname;0===a.indexOf("/i/dashboard/")&&e.assist.rememberiPath(a)},a.prototype.uncollectSucessCallback=function(){this.props.router.replace("/i/home")},a.prototype.setDashboardScale=function(){var e=this.props.dashboard;if(this.dashboardContainer&&"done"===e.loadState&&e.data.hash){if(this.dashboardContainer.getElementsByClassName("jw-flag-fullscreen").length)return;var a=Number(c.getComputedStyle(this.dashboardContainer,"width").replace("px","")),t=Number(c.getComputedStyle(this.dashboardContainer,"height").replace("px",""));a=isNaN(a)?0:a,t=isNaN(t)?0:t;var s=+e.data.width>0?+e.data.width:1,o=+e.data.height>0?+e.data.height:1,r=void 0,n=void 0;0===e.data.scaleType?(r=a/s,n=t/o):1===e.data.scaleType?(r=a/s,n=a/s):(r=t/o,n=t/o),this.setState({scaleX:r,scaleY:n})}},a.prototype._initResizeSensor=function(){this.unWatchResize&&this.unWatchResize();var e=this.dashboardContainer;e&&(this.unWatchResize=c.resizeSensor(e,l(this.setDashboardScale,250)))},a.prototype.getContainer=function(e){this.dashboardContainer=e,this.setDashboardScale(),this._initResizeSensor()},a.prototype.render=function(){var e=this.props,a=e.dashboard,t=e.company,n=e.chart,l=e.condition;return"pending"===a.loadState||"done"===a.loadState&&!a.data.hash?o.createElement(i.Spinner,{overlay:!0,size:"lg"}):"error"===a.loadState?o.createElement("h3",{className:"text--center text-danger"},s.default(a.loadError.message||"请求错误")):o.createElement("div",{className:"d-flex flex-col h-full"},o.createElement("div",{className:"bg-white wrapper lter b-b clearfix",key:"report-header",style:{padding:"12px 15px"}},o.createElement("span",{className:"m-n font-thin fs-18"},a.data.name,a.data.remark?o.createElement(i.TooltipWrapper,{tooltip:p(a.data.remark,m.xssOption),placement:"bottom"},o.createElement("i",{className:"fa fa-question-circle m-l-sm hidden-xs"})):null),o.createElement("div",{className:"d-inline-block pull-right page-title-toolbar"},o.createElement(h.default,{dashboard:a,notLoadSelfDashboardList:!0,uncollectSucessCallback:this.uncollectSucessCallback}),o.createElement("span",null,t.emailSuffix===a.data.companyKey?o.createElement(d.Link,{to:"/group/"+a.data.groupKey+"/dashboard/"+a.data.hash},o.createElement(i.Button,{level:"link",size:"lg",tooltip:s.default("查看源大屏"),placement:"bottom"},o.createElement("i",{className:"fa fa-location-arrow"}))):o.createElement("a",{href:"/group/"+a.data.groupKey+"/dashboard/"+a.data.hash+"?__scp__="+a.data.companyKey},o.createElement(i.Button,{level:"link",size:"lg",tooltip:s.default("查看源大屏"),placement:"bottom"},o.createElement("i",{className:"fa fa-location-arrow"})))))),o.createElement(r,{title:a.data.name,key:"content"},o.createElement("div",{ref:this.getContainer,className:"wrapper-sm flex-1 pa-none overflow-x-auto",style:{margin:15}},o.createElement(u.default,{mode:"normal",chartStore:n,conditionStore:l,dashboard:a,scaleX:this.state.scaleX,scaleY:this.state.scaleY}))))},a.displayName="SelfDashboard",a=t.__decorate([n.inject(function(e){return{assist:e.assist,user:e.user.current,dashboard:e.dashboard.current,company:e.company.info,chart:e.chart,condition:e.condition}}),n.observer,t.__metadata("design:paramtypes",[Object])],a)}(o.Component);a.default=b});
;sugar.define("sugar:sites/group/manage/data-model/editor/table-list.tsx",function(e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.TableItem=a.DataModelEditorTableList=void 0;var t=e("sugar:node_modules/tslib/tslib.js"),o=e("sugar:utils/i18n.ts"),l=e("sugar:node_modules/react/index.js"),s=e("sugar:node_modules/classnames/index.js"),d=e("sugar:node_modules/amis/lib/index.js"),n=e("sugar:utils/common-helper.ts"),r=e("sugar:sites/group/manage/database/database.tsx"),i=e("sugar:stores/index.ts"),u=e("sugar:widgets/dnd-dustbin.tsx"),m=e("sugar:widgets/form-dialog.tsx"),g=e("sugar:node_modules/axios/index.js"),c=e("sugar:sites/group/manage/data-model/editor/homologous-db-conf.tsx"),h=window.sugarConfig,b=30,f=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.firstDbType={label:"",value:-1},a}return t.__extends(a,e),a.prototype.componentWillMount=function(){var e=this;this.setState({filterStr:"",viewTableDataDialogShow:!1,viewTableColumns:[],viewTableRows:[],viewTableName:""}),this.filterStrChange=this.filterStrChange.bind(this),this.toggleHomologousDbAdd=this.toggleHomologousDbAdd.bind(this),this.addHomologousDb=this.addHomologousDb.bind(this),this.toggleFederatedDbAdd=this.toggleFederatedDbAdd.bind(this),this.addFederatedDb=this.addFederatedDb.bind(this),this.toggleDialogHandle=this.toggleDialogHandle.bind(this);var a=this.props.dataModel.data.config.dbHashes;this.props.database.simpleList.data.find(function(t){return t.hash===a[0]?(e.firstDbType=r.databaseTypeMap[t.type],!0):!1}),a.forEach(function(a){return e.props.database.loadDbTables(a)}),this.props.dataModel.data.config.homologous.forEach(function(t){return e.props.database.loadDbHomologousTables(a[0],t)})},a.prototype.filterStrChange=function(e){this.setState({filterStr:e.target.value})},a.prototype.toggleHomologousDbAdd=function(){this.setState({homologousDbAdd:!this.state.homologousDbAdd})},a.prototype.addHomologousDb=function(e){if(!c.homologousDbConf[this.firstDbType.value])return void d.toast.error(o.default("本数据源的同源异库配置错误"));var a=this.props.dataModel.data.config,t=c.homologousDbConf[this.firstDbType.value].hasSameHomo(this.props.database.current.data,a.homologous,e);"sameAsMain"===t?d.toast.error(o.default("该同源异库和数据源本身相同，无需重复添加")):t===!0?d.toast.error(o.default("该同源异库已经添加，无需重复添加")):a.dbHashes.length>1?d.toast.error(o.default("开启跨源查询后，不能再添加同源异库")):a.homologous.length>=3?d.toast.error(o.default("最多只能添加3个同源异库")):(this.props.dataModel.data.config.addHomologous(e),this.toggleHomologousDbAdd())},a.prototype.toggleFederatedDbAdd=function(){this.setState({federatedDbAdd:!this.state.federatedDbAdd})},a.prototype.addFederatedDb=function(e){var a=e.dbHash,t=this.props.dataModel.data.config,l=t.dbHashes.indexOf(a);t.homologous.length?d.toast.error(o.default("添加了同源异库，不支持再添加其它的数据源")):this.props.hasCustomTable?d.toast.error(o.default("数据模型中有自定义SQL视图，不支持再添加其它的数据源")):~l?d.toast.error(o.default("该数据源已添加，无需重复添加")):t.dbHashes.length>=4?d.toast.error(o.default("最多只能添加4个数据源，数据模型中已经有4个数据源")):(this.props.dataModel.data.config.addFederatedDb(a),this.toggleFederatedDbAdd())},a.prototype.toggleDialogHandle=function(e,a){return t.__awaiter(this,void 0,void 0,function(){var o,l,s,n,r,i,u,m,h,f,p=this;return t.__generator(this,function(){return o=this.props,l=o.group,s=o.dataModel,n=o.database,"view"===e&&(this.setState({viewTableDataDialogShow:!0,viewTableDataLoading:!0,viewTableName:""}),r=a.databaseHash,i=a.name,u=i,m={table:i,tableViewNotTotal:1},a.homoId&&(h=n.simpleList.dataMapByHash.get(a.databaseHash),f=s.data.config.homologous.find(function(e){return e.homoId===a.homoId}),f&&(m=t.__assign(t.__assign(t.__assign({},f.config),m),{homoId:f.homoId}),h&&c.homologousDbConf[h.type]&&(u+="("+c.homologousDbConf[h.type].display(f.config)+")"))),g.default.post("/api/group/"+l.data.hash+"/database/"+r+"/getTableData",{perPage:b},{params:m}).then(function(e){var a=e.data;if(a.status)d.toast.error(a.msg||"查询错误"),p.setState({viewTableDataDialogShow:!1,viewTableDataLoading:!1,viewTableName:""});else{var t=a.data.rows,o=[];for(var l in t[0])if(t[0].hasOwnProperty(l)){var s={name:l,label:l};o.push(s)}p.setState({viewTableColumns:o,viewTableRows:t,viewTableName:u,viewTableDataLoading:!1})}}).catch(function(e){d.toast.error(e.data||"查询错误"),p.setState({viewTableDataDialogShow:!1,viewTableDataLoading:!1,viewTableName:""})})),[2]})})},a.prototype.render=function(){var e=this,a=this.props,t=a.database,s=a.dataModel,i=a.topHeightTableList,u=this.state,g=u.filterStr,f=u.viewTableDataDialogShow,v=u.viewTableColumns,D=u.viewTableRows,y=u.viewTableName,w=u.viewTableDataLoading,E=u.homologousDbAdd,_=u.federatedDbAdd,T=s.data.config,C=T.dbHashes,H=C[0],N=t.current.data,S=T.homologous,L=t.tablesMap.get(H),x=this.firstDbType,k=[{type:"tpl",label:" ",tpl:o.default("同源异库是指同一个数据源中的不同数据库，例如MySQL中的数据库A和数据库B之间的跨库查询！")+(' <a class="text-info" href="/docs/Federated-Query" target="_blank">'+o.default("详见文档")+"</a>")}];E&&c.homologousDbConf[x.value]&&k.unshift.apply(k,c.homologousDbConf[x.value].addControls(this.props.group.data.hash,H));var M=[{type:"tpl",label:" ",tpl:o.default("添加多个数据源，可实现数据源之间的跨源查询，如Excel和MySQL之间的数据表Join查询！")+(' <a class="text-info" href="/docs/Federated-Query" target="_blank">'+o.default("详见文档")+"</a>")}],A=this.toggleFederatedDbAdd,F=o.default("确定");if(_){var I=!0;if(C.length>=4&&(I=!1,M[0].tpl=o.default("最多只能添加4个数据源，数据模型中已经有4个数据源")),"saas"!==h.deployType||h.nowProductConfig.federatedQuery||(I=!1,M[0].tpl=o.default("您当前购买的版本不支持多个数据源之间的数据表Join查询，请升级到高级版本！")+(' <a class="text-info" href="'+n.payLink+'" target="_blank">'+o.default("去升级")+"</a>")),N.federatedOpen&&1===N.federatedState||(I=!1,M[0].tpl=o.default("当前数据源还没有开启跨源查询，不能添加多个数据源！")+(' <a class="text-info" href="/docs/Federated-Query" target="_blank">'+o.default("详见文档")+"</a>")),I){var O=[];t.simpleList.data.forEach(function(e){e.federatedOpen&&O.push({label:e.name,value:e.hash})}),M=[{type:"select",label:o.default("数据源"),name:"dbHash",required:!0,placeholder:o.default("请选择"),options:O,desc:o.default("这里只列出开启了跨源查询的数据源！")+M[0].tpl}],A=this.addFederatedDb,F=o.default("添加")}}return[l.createElement("div",{className:"wrapper-sm table-list",key:"table-list"},l.createElement("div",{className:"data-source-title"},l.createElement("span",null,o.default("数据源")),h.enableFederated&&x.federated?l.createElement("span",{className:"data-source-title-add",onClick:this.toggleFederatedDbAdd},o.default("添加数据源")):null),l.createElement("div",{className:"data-source"},l.createElement("span",{className:"data-source__name"},N.name),l.createElement("span",{className:"data-source__type text-muted"},r.databaseTypeMap[N.type].label),1!==C.length||(null===x||void 0===x?!0:!x.homologousCrossDb)||h.enableQueryBuilder&&"number"==typeof N.config.queryBuilder?null:l.createElement("span",{className:"data-source__add_db",onClick:this.toggleHomologousDbAdd},o.default("添加"),l.createElement("span",null,o.default("同源异库")))),C.slice(1).map(function(e){var a=t.simpleList.dataMapByHash.get(e);return a?l.createElement("div",{className:"data-source",key:e},l.createElement("span",{className:"data-source__name"},a.name),l.createElement("span",{className:"data-source__type text-muted"},r.databaseTypeMap[a.type].label),l.createElement("span",{className:"data-source__del_db",onClick:function(){return T.removeFederatedDb(e)}},l.createElement("i",{className:"fa fa-close"}))):null}),S.length?S.map(function(e){return l.createElement("div",{className:"data-homo",key:e.homoId},l.createElement("span",{className:"data-homo__name"},c.homologousDbConf[x.value].display(e.config)),l.createElement("span",{className:"data-homo__del",onClick:function(){return T.removeHomologous(e.homoId)}},l.createElement("i",{className:"fa fa-close"})))}):null,l.createElement("div",{className:""},o.default("表")),l.createElement("div",{className:"table-filter"},l.createElement("input",{value:g,type:"text",placeholder:o.default("输入关键词搜索"),onChange:this.filterStrChange})),l.createElement("div",{className:"table-list table-list-step",style:{height:i}},C.length>1||S.length?l.createElement("div",{className:"table-list__title"},N.name):null,L?"pending"===L.loadState?l.createElement(d.Spinner,{overlay:!0,size:"lg"}):"error"===L.loadState?l.createElement("div",null,L.loadError&&L.loadError.message?L.loadError.message:o.default("拉取数据表错误")):L.data.map(function(a){return~a.name.toLocaleLowerCase().indexOf(g.toLocaleLowerCase())?l.createElement(p,{key:a.name,id:{tableName:a.name,dbHash:a.databaseHash,homoId:""},dataTable:a,toggleDialogHandle:function(a,t){return e.toggleDialogHandle(a,t)}}):null}):null,C.slice(1).map(function(a,s){var n=t.tablesMap.get(a),r=t.simpleList.dataMapByHash.get(a);if(!n||!r)return null;var i=l.createElement("div",{className:"table-list__title",key:"federated-table-title-"+s},r.name),u=null;return u="pending"===n.loadState?l.createElement(d.Spinner,{key:"federated-table-loading-"+s,overlay:!0}):"error"===n.loadState?n.loadError&&n.loadError.message?n.loadError.message:o.default("拉取数据表错误"):n.data.map(function(a){return~a.name.toLocaleLowerCase().indexOf(g.toLocaleLowerCase())?l.createElement(p,{key:"federated-"+s+"-"+a.name,id:{tableName:a.name,dbHash:a.databaseHash,homoId:a.homoId},dataTable:a,toggleDialogHandle:function(a,t){return e.toggleDialogHandle(a,t)}}):null}),[i,u]}),S.length?S.map(function(a,s){var n=H+"-"+a.homoId,r=t.tablesMap.get(n);if(!r)return null;var i=l.createElement("div",{className:"table-list__title",key:"homo-table-title-"+s},c.homologousDbConf[x.value].display(a.config)),u=null;return u="pending"===r.loadState?l.createElement(d.Spinner,{key:"homo-table-loading-"+s,overlay:!0}):"error"===r.loadState?r.loadError&&r.loadError.message?r.loadError.message:o.default("拉取数据表错误"):r.data.map(function(a){return~a.name.toLocaleLowerCase().indexOf(g.toLocaleLowerCase())?l.createElement(p,{key:"homo-"+s+"-"+a.name,id:{tableName:a.name,dbHash:a.databaseHash,homoId:a.homoId},dataTable:a,toggleDialogHandle:function(a,t){return e.toggleDialogHandle(a,t)}}):null}),[i,u]}):null)),f?l.createElement(m.default,{key:"view-customtable-dialog",className:"view-customtable-dialog",show:!0,wideLabel:!0,hideCancelBtn:!0,size:"lg",title:o.default("查看 「"+y+"」 表数据")+"--"+o.default("只展示「"+b+"」行"),onClose:function(){return e.setState({viewTableDataDialogShow:!1})},onConfirm:function(){return e.setState({viewTableDataDialogShow:!1})},controls:[{type:"service",visibleOn:""+!w,data:{rows:D},body:[{type:"table",source:"$rows",columns:v,affixHeader:!1}]},{visibleOn:""+w,name:"",value:{},children:function(){return l.createElement(d.Spinner,{overlay:!0})}}]}):null,E?l.createElement(m.default,{key:"homologous-db-add-dialog",show:!0,title:o.default("添加同源异库"),submitText:o.default("添加"),onClose:this.toggleHomologousDbAdd,onConfirm:this.addHomologousDb,controls:k}):null,_?l.createElement(m.default,{key:"federated-db-add-dialog",show:!0,title:o.default("添加数据源"),submitText:F,onClose:this.toggleFederatedDbAdd,onConfirm:A,controls:M}):null]},a.displayName="DataModelEditorTableList",a=t.__decorate([i.observer],a)}(l.Component);a.DataModelEditorTableList=f;var p=function(e){function a(){return null!==e&&e.apply(this,arguments)||this}return t.__extends(a,e),a.prototype.render=function(){var e=this.props,a=e.isDragging,t=e.dataTable,o=e.toggleDialogHandle;return l.createElement("div",{className:s("table-item",{isDragging:a})},l.createElement(d.TooltipWrapper,{tooltip:t.name,placement:"bottom"},l.createElement("span",{className:"table-item-name"},t.name)),t.hash?l.createElement("span",{className:"table-item-icon"},l.createElement("i",{className:"fa fa-edit",onClick:function(){return o("edit",t.hash)}}),l.createElement("i",{className:"fa fa-eye",onClick:function(){return o("view",t.hash,t.name)}}),l.createElement("i",{className:"fa fa-trash",onClick:function(){return o("del",t.hash)}})):l.createElement("span",{className:"table-item-icon"},l.createElement("i",{className:"fa fa-eye",onClick:function(){return o("view",t)}})))},a=t.__decorate([u.DnDSource("database-table")],a)}(l.Component);a.TableItem=p});
;sugar.define("sugar:sites/group/manage/data-model/editor/custom-table-list.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=e("sugar:node_modules/tslib/tslib.js"),o=e("sugar:utils/i18n.ts"),l=e("sugar:node_modules/react/index.js"),s=e("sugar:node_modules/amis/lib/index.js"),i=e("sugar:node_modules/axios/index.js"),n=e("sugar:stores/index.ts"),r=e("sugar:sites/group/manage/data-model/editor/table-list.tsx"),d=e("sugar:widgets/form-dialog.tsx"),u=e("sugar:widgets/code-editor.tsx"),m=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.componentWillMount=function(){this.setState({filterStr:"",dialogShow:!1,showDelCustomTableDialog:!1,showViewCustomTableDialog:!1,editCustomTableInfo:{},delCustomTableHash:"",dialogLoading:!1,viewCustomTableName:"",viewCustomTableRows:[],viewCustomTableColumns:[]}),this.filterStrChange=this.filterStrChange.bind(this),this.confirmDialog=this.confirmDialog.bind(this),this.addCustomTable=this.addCustomTable.bind(this),this.toggleDialogHandle=this.toggleDialogHandle.bind(this),this.editCustomTable=this.editCustomTable.bind(this),this.deleteCustomTable=this.deleteCustomTable.bind(this),this.props.customTable.list.loadData(this.props.dataModel.data.hash)},t.prototype.filterStrChange=function(e){this.setState({filterStr:e.target.value})},t.prototype.confirmDialog=function(e){var t=this.state.editCustomTableInfo;if(e.customTableName&&e.customTableSQL){this.setState({dialogShow:!1});var a=this.props,l=(a.database,a.dataModel),i=a.customTable,n={name:e.customTableName,sql:e.customTableSQL,hash:t.hash||"",dbHashes:l.data.config.dbHashes,datamodelHash:l.data.hash};t.hash?i.list.update(n).then(function(){i.list.loadData(l.data.hash)}).catch(function(e){s.toast.error(e.message)}):i.list.add(n).then(function(){i.list.loadData(l.data.hash)}).catch(function(e){s.toast.error(e.message)})}else s.toast.warning(o.default("视图名称或sql语句未填"))},t.prototype.addCustomTable=function(){return this.props.dataModel.data.config.dbHashes.length>1?void s.toast.error(o.default("数据模型中有多个数据源进行跨源查询时，不支持SQL视图")):void this.setState({dialogShow:!0,editCustomTableInfo:{customTableName:"",customTableSQL:""}})},t.prototype.toggleDialogHandle=function(e,t,o){return a.__awaiter(this,void 0,void 0,function(){var l,n,r,d,u=this;return a.__generator(this,function(){return l=this.props,n=l.dataModel,r=l.customTable.customTableDetailMap,d=l.group,"edit"===e?(this.setState({dialogShow:!0,dialogLoading:!0}),this.editCustomTable(t)):"del"===e?this.setState({showDelCustomTableDialog:!0,delCustomTableHash:t}):"view"===e&&(this.setState({showViewCustomTableDialog:!0,dialogLoading:!0}),i.default.get("/api/group/"+d.data.hash+"/customTable/getCustomTableData?hash="+t+"&databaseHash="+n.data.config.dbHashes[0]).then(function(e){var t=e.data;if(t.status)s.toast.error(t.msg||"查询错误"),u.setState({showViewCustomTableDialog:!1,dialogLoading:!1});else{var a=t.data.rows,l=[];for(var i in a[0])if(a[0].hasOwnProperty(i)){var n={name:i,label:i};l.push(n)}u.setState({viewCustomTableColumns:l,viewCustomTableRows:a,viewCustomTableName:o||"",dialogLoading:!1})}}).catch(function(e){s.toast.error(e.data||"查询错误"),u.setState({showViewCustomTableDialog:!1,dialogLoading:!1})})),[2]})})},t.prototype.editCustomTable=function(e){var t=this,a=this.props.customTable.customTableDetailMap;a.loadDetail(e).then(function(){var o=a.mapByHash.get(e);t.setState({editCustomTableInfo:o||{customTableName:"",customTableSQL:""},dialogLoading:!1})})},t.prototype.deleteCustomTable=function(e){this.setState({showDelCustomTableDialog:!1});var t=this.props,a=t.dataModel,o=t.customTable.list;if(e){var l={hash:e||""};o.delete(l).then(function(){o.loadData(a.data.hash)}).catch(function(e){s.toast.error(e.message)})}},t.prototype.render=function(){var e=this,t=this.state,i=t.filterStr,n=t.dialogShow,m=t.editCustomTableInfo,h=t.showDelCustomTableDialog,c=t.showViewCustomTableDialog,g=t.delCustomTableHash,b=t.dialogLoading,f=t.viewCustomTableRows,p=t.viewCustomTableColumns,T=t.viewCustomTableName,C=this.props,w=C.dataModel,v=C.customTable.list,S=C.topHeightCustomTableList,D={};D=m.hash?{customTableName:m.name,customTableSQL:m.sql}:m;var y=v,L=[{type:"text",name:"customTableName",label:o.default("视图名称"),required:!0,placeholder:o.default("请输入视图名称")},{name:"customTableSQL",label:o.default("SQL语句"),required:!0,children:function(e){var t=e.onChange,s=e.value;return l.createElement("div",{className:"a-Form-item a-Form-item--horizontal is-required"},l.createElement("label",{className:"a-Form-label a-Form-itemColumn--2"},l.createElement("span",null,o.default("SQL语句"),l.createElement("span",{className:"a-Form-star"},"*"))),l.createElement("div",{className:"a-Form-value"},l.createElement(u.default,a.__assign({},{onChange:t,value:s},{withSugarSQLKeyWords:!1,language:"sql",style:{minHeight:260}}))))}}];return n&&b&&(L=[{name:"",value:{},children:function(){return l.createElement(s.Spinner,{overlay:!0})}}]),[l.createElement("div",{className:"wrapper-sm custom-table",key:"custom-table-list",style:{height:"calc(100% - "+S+"px)"}},l.createElement("div",{className:"custom-table-title"},l.createElement("span",null,o.default("自定义SQL视图")),l.createElement("span",{className:"custom-table-title-add",onClick:this.addCustomTable},"添加")),l.createElement("div",{className:"table-filter"},l.createElement("input",{value:i,type:"text",placeholder:o.default("输入关键词搜索"),onChange:this.filterStrChange})),l.createElement("div",{className:"table-list custom-table-list-step",style:{height:"calc(100% - 65px)"}},y?"pending"===y.loadState?l.createElement(s.Spinner,{overlay:!0}):"error"===y.loadState?l.createElement("div",null,y.loadError&&y.loadError.message?y.loadError.message:o.default("拉取数据表错误")):y.data.length>0?y.data.map(function(t){return~t.name.toLocaleLowerCase().indexOf(i.toLocaleLowerCase())?l.createElement(r.TableItem,{key:t.name,id:{tableName:t.name,dbHash:w.data.config.dbHashes[0],customTableHash:t.hash},dataTable:t,toggleDialogHandle:function(t,a,o){return e.toggleDialogHandle(t,a,o)}}):null}):l.createElement("div",{style:{textAlign:"center"}},o.default("暂无数据")):null)),n?l.createElement(d.default,{key:"custom-table-modal",show:this.state.dialogShow,title:o.default(m.hash?"编辑自定义SQL视图":"添加自定义SQL视图"),onClose:function(){return e.setState({dialogShow:!1})},onConfirm:this.confirmDialog,data:D,controls:L,size:"md"}):null,h?l.createElement(d.default,{key:"del-customtable-dialog",show:!0,wideLabel:!0,title:o.default("删除自定义SQL视图"),onClose:function(){return e.setState({showDelCustomTableDialog:!1,delCustomTableHash:""})},onConfirm:function(){return e.deleteCustomTable(g)},controls:[{type:"plain",text:""+o.default("您确定要删除该自定义SQL视图吗？")}]}):null,c?l.createElement(d.default,{key:"view-customtable-dialog",className:"view-customtable-dialog",show:!0,wideLabel:!0,hideCancelBtn:!0,size:"lg",title:o.default("查看「"+T+"」表数据"),onClose:function(){return e.setState({showViewCustomTableDialog:!1})},onConfirm:function(){return e.setState({showViewCustomTableDialog:!1})},controls:[{type:"service",visibleOn:""+!b,data:{rows:f},body:[{type:"table",source:"$rows",columns:p,affixHeader:!1}]},{visibleOn:""+b,name:"",value:{},children:function(){return l.createElement(s.Spinner,{overlay:!0})}}]}):null]},t.displayName="DataModelEditorCustomTableList",t=a.__decorate([n.observer],t)}(l.Component);t.default=m});
;sugar.define("sugar:sites/group/manage/data-model/editor/table-join-topology.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=e("sugar:node_modules/tslib/tslib.js"),n=e("sugar:utils/i18n.ts"),l=e("sugar:node_modules/react/index.js"),o=e("sugar:stores/index.ts"),r=e("sugar:stores/data-model/dm-schema.ts"),s=e("sugar:widgets/confirm.tsx"),i=e("sugar:widgets/dnd-dustbin.tsx"),u=e("sugar:sites/group/manage/data-model/editor/helper.ts"),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.componentWillMount=function(){this.delTable=this.delTable.bind(this),this.getTableDisplayName=this.getTableDisplayName.bind(this)},t.prototype.delTable=function(e,t){var a=this;e.preventDefault(),e.stopPropagation(),s.confirm(n.default("确定要删除该表？")).then(function(){a.props.deleteTable(t)}).catch(function(){})},t.prototype.getTableDisplayName=function(e){var t=this.props.customTable;if(e.customTableHash){var a=t.list.data.find(function(t){return t.hash===e.tableName});return a?a.name:e.tableName}var n=r.getDBInfoOfTable(this.props.dmSchema,e);return n.tableDispalyName},t.prototype.generateTopology=function(e,t){var a=this,n=e.filter(function(e){return e.join.leftTableId===t});return n.length?n.map(function(t,n){var o=a.generateTopology(e,t.tableId),r=e.findIndex(function(e){return e.tableName===t.tableName}),s=a.getTableDisplayName(t);return l.createElement("div",{className:"box",key:n},l.createElement("div",{className:"item",style:{backgroundColor:u.tableBackgroundColor[r]},onClick:function(){return t.level>1&&a.props.changeJoin(t.tableId)}},l.createElement("div",{className:"hh6",title:s},s),l.createElement("i",{className:"fa fa-trash del-table",onClick:function(e){return a.delTable(e,t.tableId)}}),t.level>1?l.createElement("span",{className:"opt "+t.join.type+"-join"}):null),l.createElement("div",{className:"wrap"},o))}):null},t.prototype.render=function(){var e=this.props,t=e.canDrop,a=e.isOver,o=e.tables,r="";a&&t?r="isActive":t&&(r="canDrop");var s=l.createElement("div",{className:"topology-empty"},l.createElement("i",{className:"fa fa-arrow-left"}),n.default("请将左侧表拖放至此"));return o.length&&(s=this.generateTopology(o,"")),l.createElement("div",{className:"tablejoin__body "+r+" table-join-topology table-join-topology-step"},s)},t.displayName="TableJoinTopology",t=a.__decorate([i.DnDTarget("database-table"),o.observer],t)}(l.Component);t.default=d});
;sugar.define("sugar:sites/group/manage/data-model/editor/table-join-dialog.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=e("sugar:node_modules/tslib/tslib.js"),l=e("sugar:utils/i18n.ts"),n=e("sugar:node_modules/react/index.js"),o=e("sugar:node_modules/amis/lib/index.js"),i=e("sugar:sites/amis-renderer.tsx"),r=e("sugar:stores/index.ts"),s=e("sugar:stores/data-model/dm-schema.ts"),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.componentWillMount=function(){this.onHide=this.onHide.bind(this),this.onClose=this.onClose.bind(this),this.tablesTreeOptions=this.tablesTreeOptions.bind(this),this.getTableName=this.getTableName.bind(this),this.getTableDisplayName=this.getTableDisplayName.bind(this)},t.prototype.onHide=function(){this.props.isAdd&&this.props.cancelAdd?this.props.cancelAdd(this.props.targetJoinTableId):this.onClose()},t.prototype.onClose=function(){var e=this.props,t=e.tables,a=e.targetJoinTableId,n=t.find(function(e){return e.tableId===a});if(n){var i=n.join.on;if(!i.length||i.every(function(e){return!e.leftField||!e.rightField}))return void o.toast.error(l.default("请正确设置关联条件！"))}this.props.onClose()},t.prototype.tablesTreeOptions=function(e,t){var a=this,l=this.props.targetJoinTableId,n=e.filter(function(e){return e.join.leftTableId===t});return n.length?n.map(function(t){var n=e.find(function(e){return e.tableId===l}),o=a.tablesTreeOptions(e,t.tableId);return{label:a.getTableDisplayName(t),value:t.tableId,disabled:t.tableId===n.tableId,children:o}}):[]},t.prototype.getTableName=function(e){var t=this.props.customTable;if(e.customTableHash){var a=t.list.data.find(function(t){return t.hash===e.tableName});return a?a.name:e.tableName}return e.tableName},t.prototype.getTableDisplayName=function(e){var t=this.props.customTable;if(e.customTableHash){var a=t.list.data.find(function(t){return t.hash===e.tableName});return a?a.name:e.tableName}var l=s.getDBInfoOfTable(this.props.dmSchema,e);return l.tableDispalyName},t.prototype.render=function(){var e=this.props,t=e.database,a=e.isAdd,r=e.cancelAdd,s=e.tables,d=e.targetJoinTableId,u=e.dmSchema,c=s.find(function(e){return e.tableId===d});if(!c)return o.toast.error(l.default("系统错误，没找到要操作的Table")),null;var m=s.find(function(e){return e.tableId===c.join.leftTableId});if(!m)return o.toast.error(l.default("系统错误，没找到要操作的Join Table")),null;var p=this.tablesTreeOptions(s,""),b=u.homologous.find(function(e){return e.homoId===m.homoId}),f=t.getTableSchema(m.dbHash,this.getTableName(m),b),h=u.homologous.find(function(e){return e.homoId===c.homoId}),g=t.getTableSchema(c.dbHash,this.getTableName(c),h),v=c.join;return n.createElement(o.Modal,{show:!0,backdrop:"static",size:"md"},n.createElement(o.Modal.Header,{showCloseButton:!0,onClose:this.onHide},n.createElement(o.Modal.Title,null,l.default("表关联"))),n.createElement(o.Modal.Body,null,n.createElement("div",{className:"table-join-setting-dialog"},n.createElement("div",{className:"join-type-tip"},l.default("inner"===v.type?l.default("内连接"):"left"===v.type?l.default("左连接"):"full"===v.type?l.default("Full全连接"):v.type)),n.createElement("div",{className:"join-line join-line-trm"},n.createElement("div",{className:"trm"},n.createElement("div",{className:"trm-table-select"},n.createElement(i.default,{schema:{type:"page",body:{title:"",type:"form",mode:"normal",actions:[],submitText:null,controls:[{type:"tree-select",name:"leftTableId",hideRoot:!0,cascade:!0,showIcon:!1,label:"",value:v.leftTableId,options:p,placeholder:""}]}},onChange:function(e){return c.changeJoinTable(e.leftTableId)}})),n.createElement("div",{className:"type join-type"},n.createElement(o.Select,{className:"full-width",simpleValue:!0,value:v.type,options:[{label:l.default("内连接"),value:"inner"},{label:l.default("左连接"),value:"left"},{label:l.default("Full全连接"),value:"full"}],clearable:!1,searchable:!1,popOverContainer:document.body,onChange:c.changeJoinType}))),n.createElement("div",{className:"trm table-name"},n.createElement("span",{title:c.tableName},this.getTableDisplayName(c)))),n.createElement("div",{className:"split-line text-center"},n.createElement("div",null,n.createElement("span",null,l.default("关联条件")))),v.on.map(function(e,t){return n.createElement("div",{className:"join-line",key:t},n.createElement("div",{className:"trm"},n.createElement("div",null,"done"!==f.loadState?n.createElement(o.Spinner,null):n.createElement(o.Select,{className:"full-width",simpleValue:!0,value:e.leftField,options:f.data.map(function(e){return{label:e.name,value:e.name}}),clearable:!1,popOverContainer:document.body,onChange:e.changeLeftField})),n.createElement("div",{className:"type equ"},"=")),n.createElement("div",{className:"trm rt"},n.createElement("div",null,"done"!==g.loadState?n.createElement(o.Spinner,null):n.createElement(o.Select,{className:"full-width",simpleValue:!0,value:e.rightField,options:g.data.map(function(e){return{label:e.name,value:e.name}}),clearable:!1,popOverContainer:document.body,onChange:e.changeRightField})),n.createElement("div",{className:"type del-on"},v.on.length>1?n.createElement("i",{className:"fa fa-trash",onClick:function(){return v.delOn(e)}}):null)))}),n.createElement("div",{className:"text-center add-on"},n.createElement(o.TooltipWrapper,{tooltip:l.default("增加关联条件"),placement:"top"},n.createElement(o.Button,{className:"btn-icon btn-rounded",level:"info",onClick:v.addOn},n.createElement("i",{className:"fa fa-plus"})))))),n.createElement(o.Modal.Footer,null,a&&r?n.createElement(o.Button,{onClick:this.onHide},l.default("取消添加")):null,n.createElement(o.Button,{level:"primary",onClick:this.onClose},l.default("确定"))))},t.displayName="TableJoinDialog",t=a.__decorate([r.observer],t)}(n.Component);t.default=d});
;sugar.define("sugar:sites/group/manage/data-model/editor/table-join.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=e("sugar:node_modules/tslib/tslib.js"),o=e("sugar:utils/i18n.ts"),i=e("sugar:node_modules/react/index.js"),s=e("sugar:node_modules/amis/lib/index.js"),n=e("sugar:stores/index.ts"),l=e("sugar:sites/group/manage/data-model/editor/table-join-topology.tsx"),d=e("sugar:sites/group/manage/data-model/editor/table-join-dialog.tsx"),r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.componentWillMount=function(){this.setState({isLoadingSchema:!1,isAddTable:!1,needShowJoinDialg:!1,targetJoinTableId:""}),this.onDrop=this.onDrop.bind(this),this.closeJoinDialog=this.closeJoinDialog.bind(this),this.deleteTable=this.deleteTable.bind(this),this.changeJoin=this.changeJoin.bind(this)},t.prototype.onDrop=function(e){var t=this,i=e.tableName,n=e.dbHash,l=e.homoId,d=e.customTableHash,r=this.props.dmSchema;if(this.state.isLoadingSchema)return void s.toast.info(o.default("正在获取数据表的元信息，请稍候！"));if(i&&n){if(r.tables.some(function(e){return e.tableName===i&&e.dbHash===n&&e.homoId===l||d&&e.customTableHash===d}))return void s.toast.error(o.default("数据表已经在模型中，不能再次添加！"));this.setState({isLoadingSchema:!0});var h=void 0;if(l){var u=this.props.dmSchema.homologous.find(function(e){return e.homoId===l});if(!u)return void s.toast.error(o.default("获取同源异库的数据表元信息错误，没有找到对应的同源异库"));h=this.props.database.loadHomologousTableSchema(n,u,i)}else h=this.props.database.loadTableSchema(n,i);h.then(function(e){var o=e.state,s={isLoadingSchema:!1};if("done"===o){var h=r.addTable(n,i,d,l);r.tables.length>1&&h&&(s=a.__assign(a.__assign({},s),{needShowJoinDialg:!0,isAddTable:!0,targetJoinTableId:h}))}t.setState(s)})}},t.prototype.closeJoinDialog=function(){this.setState({isAddTable:!1,needShowJoinDialg:!1,targetJoinTableId:""})},t.prototype.deleteTable=function(e){this.closeJoinDialog(),this.props.dmSchema.deleteTable(e)},t.prototype.changeJoin=function(e){this.setState({isAddTable:!1,needShowJoinDialg:!0,targetJoinTableId:e})},t.prototype.render=function(){var e=this.props,t=e.dmSchema,a=(e.editor,e.customTable),o=this.state,n=o.isLoadingSchema,r=o.isAddTable,h=o.needShowJoinDialg,u=o.targetJoinTableId;return n?i.createElement("div",{className:"m-t"},i.createElement(s.Spinner,{overlay:!0})):[i.createElement(l.default,{dmSchema:t,tables:t.tables,customTable:a,deleteTable:this.deleteTable,changeJoin:this.changeJoin,onDrop:this.onDrop,key:"topology"}),h?i.createElement(d.default,{key:"dialog",onClose:this.closeJoinDialog,database:this.props.database,targetJoinTableId:u,dmSchema:t,tables:t.tables,customTable:a,isAdd:r,cancelAdd:this.deleteTable}):null]},t.displayName="DataModelEditorTableJoin",t=a.__decorate([n.observer],t)}(i.Component);t.default=r});
;sugar.define("sugar:sites/group/manage/data-model/editor/sql-func-demo.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=e("sugar:node_modules/tslib/tslib.js"),d=e("sugar:utils/i18n.ts"),s=e("sugar:node_modules/react/index.js"),n=e("sugar:node_modules/amis/lib/index.js"),m=e("sugar:sites/sugar-cxd.ts"),l=[{name:"SUM",method:"SUM(x)",desc:d.default("累加求和")},{name:"COUNT",method:"COUNT(x)",desc:d.default("计数")},{name:"COUNT DISTINCT",method:"COUNT(DISTINCT x)",desc:d.default("去重计数")},{name:"AVG",method:"AVG(x)",desc:d.default("均值")},{name:"MAX",method:"MAX(x)",desc:d.default("最大值")},{name:"MIN",method:"MIN(x)",desc:d.default("最小值")},{name:"IF",method:"IF(expr,v1,v2)",desc:d.default("如果表达式expr成立，返回结果v1；否则，返回结果v2")},{name:"CASE WHEN",method:"CASE WHEN e1 THEN v1 WHEN e2 THEN e2 ... ELSE vn END",desc:d.default("CASE表示函数开始，END表示函数结束。如果e1成立，则返回v1,如果e2成立，则返回v2，当全部不成立则返回vn，而当有一个成立之后，后面的就不执行")},{name:"CEIL",method:"CEIL(x)",desc:d.default("返回大于或等于x的最小整数")},{name:"FLOOR",method:"FLOOR(x)",desc:d.default("返回小于或等于x的最大整数")},{name:"ROUND",method:"ROUND(x, y)",desc:d.default("保留x小数点后y位的值，进行了四舍五入")},{name:"TRUNCATE",method:"TRUNCATE(x, y)",desc:d.default("截断x小数，只保留y位，比如0的话就直接去掉小数部分")},{name:"CONCAT",method:"CONCAT(s1,s2,...)",desc:d.default("将字符串s1,s2等多个字符串合并为一个字符串")},{name:"REPLACE",method:"REPLACE(s,s1,s2)",desc:d.default("将字符串s2替代字符串s中的字符串s1")},{name:"SUBSTRING",method:"SUBSTRING(s,n,len)",desc:d.default("获取从字符串s中的第n个位置开始长度为len的字符串")},{name:"UNIX_TIMESTAMP",method:"UNIX_TIMESTAMP(d)",desc:d.default("将时间d以UNIX时间戳的形式返回")},{name:"FROM_UNIXTIME",method:"FROM_UNIXTIME(d)",desc:d.default("将UNIX时间戳的时间转换为普通格式的时间")},{name:"DATEDIFF",method:"DATEDIFF(d1,d2)",desc:d.default("计算日期d1至d2之间相隔的天数")},{name:"ADDDATE",method:"ADDDATE(d,n)",desc:d.default("计算起始日期d加上n天的日期")},{name:"DATE_FORMAT",method:"DATE_FORMAT(d,f)",desc:d.default("按表达式f的要求显示日期d，如：SELECT DATE_FORMAT(NOW(),'%Y-%m-%d')")}],c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.componentWillMount=function(){this.setState({search:""}),this.changeSearch=this.changeSearch.bind(this)},t.prototype.changeSearch=function(e){this.setState({search:e.target.value.trim()})},t.prototype.render=function(){var e=this.state.search,t=new RegExp(e,"i"),a=l.filter(function(e){return t.test(e.name)||t.test(e.desc)});return s.createElement("div",{className:"sql-func-demo"},s.createElement("div",{className:"title"},d.default("SQL常用函数"),s.createElement(n.TooltipWrapper,{tooltip:d.default("SQL函数仅供参考，根据实际业务情况进行调用"),placement:"bottom"},s.createElement("i",{className:"text-info fa fa-question-circle",style:{paddingLeft:"5px"}}))),s.createElement("div",{className:m.classPrefix+"TextControl-input"},s.createElement("input",{type:"text",value:e,onChange:this.changeSearch,placeholder:d.default("输入函数名进行搜索")})),s.createElement("div",{className:"list-container"},a.map(function(e,t){return s.createElement("div",{className:"list-item",key:t},s.createElement("div",{className:"name"},e.name),s.createElement("div",{className:"method"},d.default("用法："),e.method),s.createElement("div",{className:"desc"},d.default("说明："),e.desc))})))},t}(s.Component);t.default=c});
;sugar.define("sugar:sites/group/manage/data-model/editor/calculate-editor.tsx",function(e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var t=e("sugar:node_modules/tslib/tslib.js"),l=e("sugar:utils/i18n.ts"),n=e("sugar:node_modules/react/index.js"),s=e("sugar:sites/group/manage/data-model/editor/helper.ts"),i=e("sugar:sites/amis-renderer.tsx"),r=e("sugar:widgets/code-editor.tsx"),o=e("sugar:sites/group/manage/data-model/editor/sql-func-demo.tsx"),d=e("sugar:node_modules/amis/lib/index.js"),u=function(e){function a(){return null!==e&&e.apply(this,arguments)||this}return t.__extends(a,e),a.prototype.componentWillMount=function(){this.onConfirm=this.onConfirm.bind(this)},a.prototype.onConfirm=function(e){var a=e.expression;if(0===(a||"").trim().toLowerCase().indexOf("select ")&&d.toast.warning("计算字段只需要写SQL表达式即可，不需要写完整的SQL语句!"),"dimension"===this.props.type&&s.isAggregatedExpression(a))d.toast.warning("计算维度不支持聚合类型 sum avg count min max 等");else{try{a=s.translateExpressionToCode(this.props.dmSchema,a)}catch(l){return void d.toast.error(l.message)}var n=t.__assign(t.__assign({},e),{expression:a});this.props.onConfirm(n)}},a.prototype.render=function(){var e=this,a=this.props,u=a.dmSchema,m=a.onClose,p=(a.onConfirm,a.type),c=a.nodeId,f=s.getSqlSuggestionOfDimensionAndMeasure(u),g={type:"measure",dataType:"int",accuracy:-1},y=l.default("新建计算度量"),Y=[{label:l.default("字符串"),value:"string"},{label:l.default("整数"),value:"int"},{label:l.default("小数"),value:"float"}];if("dimension"===p&&(g.type="dimension",g.dataType="string",g.dateOriginal="YYYY-MM-DD",g.datetimeOriginal="YYYY-MM-DD HH:mm:ss",y=l.default("新建计算维度"),Y=Y.concat([{label:l.default("日期"),value:"date"},{label:l.default("日期时间"),value:"datetime"},{label:l.default("日期文本"),value:"datestring"},{label:l.default("时间文本"),value:"datetimestring"}])),c)if("dimension"===p){var v=u.dimensions.get(c);if(!v||!v.calculated)return d.toast.error(l.default("没找要编辑的计算维度！")),null;y=l.default("编辑计算维度「"+v.alias+"」"),g.alias=v.alias,g.expression=s.translateExpressionToView(u,v.expression),g.dataType=v.dataType,"date"===v.convert.type?(g.dataType="datestring",g.dateOriginal=v.convert.original):"datetime"===v.convert.type&&(g.dataType="datetimestring",g.datetimeOriginal=v.convert.original)}else{var b=u.measures.get(c);if(!b||!b.calculated)return d.toast.error(l.default("没找要编辑的计算度量！")),null;y=l.default("编辑计算度量「"+b.alias+"」"),g.alias=b.alias,g.expression=s.translateExpressionToView(u,b.expression),g.isAggregated=b.isAggregated,g.dataType=b.dataType,"float"===g.dataType&&(g.accuracy=b.format.accuracy)}return n.createElement(i.default,{schema:{type:"page",body:{size:"lg",type:"dialog",bodyClassName:"wrapper",onClose:m,onConfirm:function(a){e.onConfirm(a[0])},title:y,body:{type:"hbox",columns:[{columnClassName:"p-r-sm b-r",type:"form",wrapWithPanel:!1,mode:"horizontal",horizontal:{left:"col-sm-2"},controls:[{name:"type",type:"static",hidden:!0},{name:"alias",label:l.default("名称"),type:"text",required:!0,validations:"maxLength:40"},{name:"expression",label:l.default("表达式"),required:!0,children:function(e){var a=e.onChange,s=e.value;return n.createElement("div",{className:"a-Form-item a-Form-item--horizontal is-required"},n.createElement("label",{className:"a-Form-label a-Form-itemColumn--2"},n.createElement("span",null,l.default("表达式"),n.createElement("span",{className:"a-Form-star"},"*"))),n.createElement("div",{className:"a-Form-value"},n.createElement(r.default,t.__assign({},{onChange:a,value:s},{language:"sql",style:{minHeight:150},otherSQLKeyWords:f,isCalc:!0})),n.createElement("span",{className:"a-TplField a-Form-description"},n.createElement("i",{className:"text-info fa fa-question-circle p-r-xs"}),l.default("可通过输入 下划线_ 唤出列表来插入维度或度量字段名"),n.createElement("span",{className:"m-l"},l.default("计算字段只需要写SQL表达式即可，不需要写完整的SQL语句!")))))}},{name:"isAggregated",label:l.default("标记为聚合字段"),labelRemark:l.default("如果您的SQL表达式中使用了SUM、AVG、80分位计算等聚合类函数，可以手动标记为聚合（我们只会自动识别SUM等简单关键词）；如果标记为已聚合，数据模型的「查看数据」中将不会展示本计算度量，但不妨碍在后续的图表数据分析中使用它"),type:"switch",hiddenOn:"data.type === 'dimension'"},{name:"dataType",label:l.default("数据类型"),type:"radios",columnsCount:3,required:!0,options:Y},{name:"accuracy",label:l.default("小数位数"),type:"select",hiddenOn:"data.type === 'dimension' || data.dataType !== 'float'",options:[{label:l.default("自动"),value:-1},{label:l.default("0位(四舍五入取整)"),value:0},{label:l.default("1位"),value:1},{label:l.default("2位"),value:2},{label:l.default("3位"),value:3},{label:l.default("4位"),value:4},{label:l.default("5位"),value:5},{label:l.default("6位"),value:6}]},{name:"dateOriginal",label:l.default("文本格式"),type:"select",hiddenOn:"data.type === 'measure' || data.dataType !== 'datestring'",options:["YYYY-MM-DD","YYYY/MM/DD","YYYYMMDD","MM-DD-YYYY","MM/DD/YYYY"].map(function(e){return{label:e,value:e}})},{name:"datetimeOriginal",label:l.default("文本格式"),type:"select",hiddenOn:"data.type === 'measure' || data.dataType !== 'datetimestring'",options:["YYYY-MM-DD HH:mm:ss","YYYY/MM/DD HH:mm:ss","YYYYMMDD HH:mm:ss","MM-DD-YYYY HH:mm:ss","MM/DD/YYYY HH:mm:ss"].map(function(e){return{label:e,value:e}})}]},{columnClassName:"p-l-sm w-md position-relative",children:function(){return n.createElement(o.default,null)}}]}}},data:g})},a.displayName="CalculateEditor",a}(n.Component);a.default=u});
;sugar.define("sugar:sites/group/manage/data-model/editor/dimension.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=e("sugar:node_modules/tslib/tslib.js"),n=e("sugar:utils/i18n.ts"),i=e("sugar:node_modules/react/index.js"),o=e("sugar:node_modules/classnames/index.js"),d=e("sugar:stores/index.ts"),s=e("sugar:stores/data-model/dm-schema.ts"),l=e("sugar:sites/group/manage/data-model/editor/dimension-list.tsx"),r=e("sugar:widgets/form-dialog.tsx"),u=e("sugar:widgets/confirm.tsx"),c=e("sugar:widgets/pop-menu/pop-menu.tsx"),m=e("sugar:sites/group/manage/data-model/editor/helper.ts"),h=e("sugar:sites/group/manage/data-model/editor/calculate-editor.tsx"),f=e("sugar:sites/group/manage/data-model/data-model.tsx"),g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.componentWillMount=function(){this.setState({menuIndex:0,dimensionId:"",calculateId:"",hierarchyId:""}),this.toggleBoolState=this.toggleBoolState.bind(this),this.addFolder=this.addFolder.bind(this),this.renameFolder=this.renameFolder.bind(this),this.addCalculate=this.addCalculate.bind(this),this.editCalculate=this.editCalculate.bind(this),this.removeCalculate=this.removeCalculate.bind(this),this.addHierarchy=this.addHierarchy.bind(this),this.editHierarchy=this.editHierarchy.bind(this),this.editDimension=this.editDimension.bind(this),this.editDimensionNLPAlias=this.editDimensionNLPAlias.bind(this),this.editRenamehash=this.editRenamehash.bind(this),this.showMenuSetting=this.showMenuSetting.bind(this),this.showHierarchySetting=this.showHierarchySetting.bind(this),this.showDimensionSetting=this.showDimensionSetting.bind(this),this.showCalculateSetting=this.showCalculateSetting.bind(this)},t.prototype.toggleBoolState=function(e,t){var n;void 0===t&&(t={}),this.setState(a.__assign((n={},n[e]=!this.state[e],n.menuIndex=0,n.dimensionId="",n.calculateId="",n.hierarchyId="",n),t))},t.prototype.addFolder=function(e){this.props.dmSchema.addMenu("dimension",e.name),this.toggleBoolState("addFolder")},t.prototype.renameFolder=function(e){this.props.dmSchema.renameMenu("dimension",e.name,e.index),this.toggleBoolState("editFolder")},t.prototype.addCalculate=function(e){var t=this.props.dmSchema.addCalculateDimension(e,this.state.menuIndex||0);t&&this.toggleBoolState("addCalculate")},t.prototype.editCalculate=function(e){var t=this.props.dmSchema.editCalculateDimension(e,this.state.calculateId);t&&this.toggleBoolState("editCalculate")},t.prototype.removeCalculate=function(e,t){var a=this;u.confirm(n.default("确定要删除该计算维度？")).then(function(){a.props.dmSchema.removeCalculate("dimension",t,e)}).catch(function(){})},t.prototype.addHierarchy=function(e){this.props.dmSchema.addHierarchy(e.alias,this.state.menuIndex,this.state.dimensionId),this.toggleBoolState("addHierarchy")},t.prototype.editHierarchy=function(e){this.props.dmSchema.renameHierarchy(e.alias,this.state.hierarchyId),this.toggleBoolState("editHierarchy")},t.prototype.editDimension=function(e){var t=this.props.dmSchema.renameDimension(this.state.dimensionId,e.alias);t&&this.toggleBoolState("editDimension")},t.prototype.editDimensionNLPAlias=function(e){this.props.dmSchema.changeNLPAlias(this.state.dimensionId,e.NLPAlias),this.toggleBoolState("editNLPAlias")},t.prototype.editRenamehash=function(e){this.props.dmSchema.changeDimensionRenamehash(this.state.dimensionId,e.renameHash),this.toggleBoolState("editRenamehash")},t.prototype.showMenuSetting=function(e,t,a){var i=this,o=this.props.dmSchema,d=[{icon:"fa fa-edit",name:n.default("重命名文件夹"),cb:function(){return i.toggleBoolState("editFolder",{menuIndex:e})}},{icon:"fa fa-trash",name:n.default("删除文件夹"),cb:function(){return o.removeMenu("dimension",e)}},{icon:"fa fa-eye",name:n.default("取消全部隐藏维度"),cb:function(){return o.cancelAllHidden("dimension")}},{divider:!0},{icon:"fa fa-plus",name:n.default("新建计算维度"),cb:function(){return i.toggleBoolState("addCalculate",{menuIndex:e})}},{icon:"sugar-icon icon-hierarchy",name:n.default("新建层级"),cb:function(){return i.toggleBoolState("addHierarchy",{menuIndex:e})}},{icon:"fa fa-folder",name:n.default("新建文件夹"),cb:function(){return i.toggleBoolState("addFolder")}}];m.changeOrder(!0,"dimension",o,d,e,""),c.popMenu.setPopMenuTree(d),c.popMenu.show(t,a)},t.prototype.showHierarchySetting=function(e,t,a,i){var o=this,d=this.props.dmSchema,s=[{icon:"fa fa-edit",name:n.default("重命名层级"),cb:function(){return o.toggleBoolState("editHierarchy",{hierarchyId:t})}},{icon:"fa fa-trash",name:n.default("删除层级"),cb:function(){return d.removeHierarchy(t,e)}},{icon:"fa fa-eye",name:n.default("取消全部隐藏维度"),cb:function(){return d.cancelAllHidden("dimension")}}];m.moveToMenu("dimension",d,s,e,t),m.changeOrder(!1,"dimension",d,s,e,t),c.popMenu.setPopMenuTree(s),c.popMenu.show(a,i)},t.prototype.showDimensionSetting=function(e,t,a,i){var o=this,d=this.props.dmSchema,s=d.dimensions.get(t);if(s){var l=s.convert.type||s.dataType,r=[{icon:"fa fa-edit",name:n.default("编辑"),cb:function(){return o.toggleBoolState("editDimension",{dimensionId:t})}}];window.sugarConfig.enableNLP&&r.push({icon:"fa fa-question-circle-o ",name:n.default("配置'「"+f.nlpName+"」'同义词"),cb:function(){return o.toggleBoolState("editNLPAlias",{dimensionId:t})}}),r.push({icon:"fa fa-copy",name:n.default("复制"),cb:function(){return d.copyDimension(t,e)}}),r.push({icon:"fa fa-eye-slash",name:n.default(s.isHidden?"取消隐藏":"在分析中隐藏"),cb:function(){return d.toggleHidden("dimension",t)}},{icon:"fa fa-eye",name:n.default("取消全部隐藏维度"),cb:function(){return d.cancelAllHidden("dimension")}},{divider:!0},{icon:"fa fa-plus",name:n.default("新建计算维度"),cb:function(){return o.toggleBoolState("addCalculate",{menuIndex:e})}}),m.moveToMenu("dimension",d,r,e,t),r.push({icon:"sugar-icon icon-hierarchy",name:n.default("新建层级"),cb:function(){return o.toggleBoolState("addHierarchy",{menuIndex:e,dimensionId:t})}}),m.putIntoHierarchy(d,r,e,t),m.getOutHierarchy(d,r,e,t),r.push({divider:!0}),m.convertDataType("dimension",d,r,e,t),~["string","int"].indexOf(l)&&r.push({icon:"fa fa-book",name:n.default("数据映射(「"+n.default(s.renameHash?"已绑":"未绑")+"」)"),cb:function(){return o.toggleBoolState("editRenamehash",{dimensionId:t})}}),m.convertDataLabel("dimension",d,r,e,t),m.setNoEnumerable(d,r,e,t),~["string","int","float"].indexOf(l)&&r.push({icon:"fa fa-exchange",name:n.default("转换为度量"),cb:function(){return d.exchangeDimensionAndMeasure("dimension",e,t)}}),m.changeOrder(!1,"dimension",d,r,e,t),c.popMenu.setPopMenuTree(r),c.popMenu.show(a,i)}},t.prototype.showCalculateSetting=function(e,t,a,i){var o=this,d=this.props.dmSchema,s=d.dimensions.get(t);if(s){var l=s.convert.type||s.dataType,r=[{icon:"fa fa-edit",name:n.default("编辑"),cb:function(){return o.toggleBoolState("editCalculate",{calculateId:t})}}];window.sugarConfig.enableNLP&&r.push({icon:"fa fa-question-circle-o ",name:n.default("配置'「"+f.nlpName+"」'同义词"),cb:function(){return o.toggleBoolState("editNLPAlias",{dimensionId:t})}}),r.push({icon:"fa fa-copy",name:n.default("复制"),cb:function(){return d.copyDimension(t,e)}}),r.push({icon:"fa fa-trash",name:n.default("删除"),cb:function(){return o.removeCalculate(t,e)}},{icon:"fa fa-eye-slash",name:n.default(s.isHidden?"取消隐藏":"在分析中隐藏"),cb:function(){return d.toggleHidden("dimension",t)}},{icon:"fa fa-eye",name:n.default("取消全部隐藏维度"),cb:function(){return d.cancelAllHidden("dimension")}},{divider:!0},{icon:"fa fa-plus",name:n.default("新建计算维度"),cb:function(){return o.toggleBoolState("addCalculate",{menuIndex:e})}}),m.moveToMenu("dimension",d,r,e,t),r.push({icon:"sugar-icon icon-hierarchy",name:n.default("新建层级"),cb:function(){return o.toggleBoolState("addHierarchy",{menuIndex:e,dimensionId:t})}}),m.putIntoHierarchy(d,r,e,t),m.getOutHierarchy(d,r,e,t),~["string","int"].indexOf(l)&&r.push({icon:"fa fa-book",name:n.default("数据映射(「"+n.default(s.renameHash?"已绑":"未绑")+"」)"),cb:function(){return o.toggleBoolState("editRenamehash",{dimensionId:t})}}),m.convertDataLabel("dimension",d,r,e,t),m.setNoEnumerable(d,r,e,t),~["string","int","float"].indexOf(l)&&r.push({icon:"fa fa-exchange",name:n.default("转换为度量"),cb:function(){return d.exchangeDimensionAndMeasure("dimension",e,t)}}),m.changeOrder(!1,"dimension",d,r,e,t),c.popMenu.setPopMenuTree(r),c.popMenu.show(a,i)}},t.prototype.render=function(){var e=this,t=this.props,d=t.dmSchema,u=t.group,c=d.dimensions,m=d.dimensionMenu,g=this.state,p=void 0,y=void 0,b="",S="";if(g.dimensionId&&(p=c.get(g.dimensionId),p&&(y=d.tables.find(function(e){return e.tableId===p.tableId})),y)){var C=s.getDBInfoOfTable(d,y);b=C.tableDispalyName,S=C.dbOrHomologous}var H=!d.tables.length;return i.createElement("div",{className:"dimension"},i.createElement("div",{className:"head"},n.default("维度"),i.createElement("div",{className:"pull-right"},i.createElement("span",{className:o("tool-item",{disabled:H}),onClick:function(){return!H&&e.toggleBoolState("addFolder")}},n.default("新建文件夹")),i.createElement("span",{className:o("tool-item",{disabled:H}),onClick:function(){return!H&&e.toggleBoolState("addCalculate")}},n.default("新建计算维度")))),i.createElement(l.default,{mode:"editor",dmSchema:d,showMenuSetting:this.showMenuSetting,showHierarchySetting:this.showHierarchySetting,showDimensionSetting:this.showDimensionSetting,showCalculateSetting:this.showCalculateSetting,onSort:function(e,t){d.dragSort("dimension",e,t)}}),i.createElement(r.default,{show:g.addFolder||g.editFolder,title:n.default(g.addFolder?"新建维度文件夹":"编辑维度文件夹"),controls:[{name:"index",type:"static",hidden:!0},{name:"name",label:n.default("名称"),type:"text",required:!0,validations:"maxLength:40"}],onClose:function(){return e.toggleBoolState(g.addFolder?"addFolder":"editFolder")},onConfirm:g.addFolder?this.addFolder:this.renameFolder,data:g.editFolder?{name:m[g.menuIndex].name,index:g.menuIndex}:void 0}),g.addCalculate||g.editCalculate?i.createElement(h.default,{dmSchema:d,onClose:function(){return e.toggleBoolState(g.addCalculate?"addCalculate":"editCalculate")},onConfirm:g.addCalculate?this.addCalculate:this.editCalculate,type:"dimension",nodeId:g.addCalculate?"":g.calculateId}):null,i.createElement(r.default,{show:g.addHierarchy||g.editHierarchy,title:n.default(g.addHierarchy?"新建层级":"编辑层级"),controls:[{name:"alias",label:n.default("层级名称"),type:"text",required:!0,validations:"maxLength:40"}],onClose:function(){return e.toggleBoolState(g.addHierarchy?"addHierarchy":"editHierarchy")},onConfirm:g.addHierarchy?this.addHierarchy:this.editHierarchy,data:g.editHierarchy?a.__assign({},c.get(g.hierarchyId).toJSON()):{}}),g.editDimension&&p&&y?i.createElement(r.default,{show:!0,wideLabel:!0,title:n.default("编辑维度「"+(p.alias.trim()||p.field)+"」"),controls:[{name:"alias",label:n.default("维度别名"),type:"text",validations:"maxLength:40",desc:n.default("用于显示的名称")},{name:"field",label:n.default("物理字段名"),type:"text",disabled:!0,desc:n.default("维度对应的数据库表中的字段列名")},{name:"table",label:n.default("所属数据表"),type:"text",disabled:!0,desc:n.default("维度字段所属数据库的表名")},{name:"dbOrHomologous",label:n.default("所属数据源"),type:"text",disabled:!0,desc:n.default("维度字段所属数据源或同源异库")},{name:"comment",label:n.default("字段注释"),type:"text",disabled:!0,desc:n.default("数据库中维度字段注释")}],onClose:function(){return e.toggleBoolState("editDimension")},onConfirm:this.editDimension,data:{alias:p.alias,field:p.field,table:b,dbOrHomologous:S,comment:p.comment}}):null,g.editNLPAlias&&p?i.createElement(r.default,{show:!0,wideLabel:!0,title:n.default("编辑维度「"+(p.alias.trim()||p.field)+"」的同义词"),controls:[{type:"combo",multiple:!0,addable:!0,name:"NLPAlias",maxLength:10,flat:!0,label:n.default("同义词"),desc:n.default("配置'「"+f.nlpName+"」'功能中可以识别该字段的同义词"),controls:[{type:"text",clearable:!0}]}],onClose:function(){return e.toggleBoolState("editNLPAlias")},onConfirm:this.editDimensionNLPAlias,data:{NLPAlias:p.NLPAlias}}):null,g.editRenamehash&&p?i.createElement(r.default,{show:!0,wideLabel:!0,title:n.default("绑定维度「"+(p.alias.trim()||p.field)+"」的数据映射"),controls:[{name:"renameHash",label:n.default("数据映射"),type:"select",source:"/api/group/"+u.data.hash+"/renameLib/simpleList?forAmis=1"},{type:"tpl",label:" ",value:"<div>"+n.default("数据映射可以将您数据库中存储的数据一一映射到别名进行展示")+'<a target="_blank" href="/docs/Model-Dim-Rename" class="text-info m-l">'+n.default("如何创建和使用数据映射？")+"</a></div>"}],onClose:function(){return e.toggleBoolState("editRenamehash")},onConfirm:this.editRenamehash,data:{renameHash:p.renameHash}}):null)},t.displayName="Dimension",t=a.__decorate([d.observer],t)}(i.Component);t.default=g});
;sugar.define("sugar:sites/group/manage/data-model/editor/measure.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=e("sugar:node_modules/tslib/tslib.js"),n=e("sugar:utils/i18n.ts"),o=e("sugar:node_modules/react/index.js"),i=e("sugar:node_modules/classnames/index.js"),l=e("sugar:stores/index.ts"),d=e("sugar:stores/data-model/dm-schema.ts"),s=e("sugar:sites/group/manage/data-model/editor/measure-list.tsx"),u=e("sugar:widgets/form-dialog.tsx"),r=e("sugar:widgets/confirm.tsx"),c=e("sugar:widgets/pop-menu/pop-menu.tsx"),m=e("sugar:sites/group/manage/data-model/editor/helper.ts"),f=e("sugar:sites/group/manage/data-model/editor/calculate-editor.tsx"),h=e("sugar:sites/group/manage/data-model/data-model.tsx"),g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.componentWillMount=function(){this.setState({menuIndex:0,measureId:"",calculateId:""}),this.toggleBoolState=this.toggleBoolState.bind(this),this.addFolder=this.addFolder.bind(this),this.renameFolder=this.renameFolder.bind(this),this.addCalculate=this.addCalculate.bind(this),this.editCalculate=this.editCalculate.bind(this),this.removeCalculate=this.removeCalculate.bind(this),this.editMeasure=this.editMeasure.bind(this),this.editMeasureNLPAlias=this.editMeasureNLPAlias.bind(this),this.editUnit=this.editUnit.bind(this),this.showMenuSetting=this.showMenuSetting.bind(this),this.showMeasureSetting=this.showMeasureSetting.bind(this),this.showCalculateSetting=this.showCalculateSetting.bind(this)},t.prototype.toggleBoolState=function(e,t){var n;void 0===t&&(t={}),this.setState(a.__assign((n={},n[e]=!this.state[e],n.menuIndex=0,n.measureId="",n.calculateId="",n),t))},t.prototype.addFolder=function(e){this.props.dmSchema.addMenu("measure",e.name),this.toggleBoolState("addFolder")},t.prototype.renameFolder=function(e){this.props.dmSchema.renameMenu("measure",e.name,e.index),this.toggleBoolState("editFolder")},t.prototype.addCalculate=function(e){var t=this.props.dmSchema.addCalculateMeasure(e,this.state.menuIndex||0);t&&this.toggleBoolState("addCalculate")},t.prototype.editCalculate=function(e){var t=this.props.dmSchema.editCalculateMeasure(e,this.state.calculateId);t&&this.toggleBoolState("editCalculate")},t.prototype.removeCalculate=function(e,t){var a=this;r.confirm(n.default("确定要删除该计算度量？")).then(function(){a.props.dmSchema.removeCalculate("measure",t,e)}).catch(function(){})},t.prototype.editMeasure=function(e){var t=this.props.dmSchema.changeMeasure(this.state.measureId,e.alias);t&&this.toggleBoolState("editMeasure")},t.prototype.editMeasureNLPAlias=function(e){this.props.dmSchema.changeNLPAlias(this.state.measureId,e.NLPAlias,!0),this.toggleBoolState("editNLPAlias")},t.prototype.editUnit=function(e){this.props.dmSchema.changeMeasureUnit(this.state.measureId,e.unit),this.toggleBoolState("editUnit")},t.prototype.showMenuSetting=function(e,t,a){var o=this,i=this.props.dmSchema,l=[{icon:"fa fa-edit",name:n.default("重命名文件夹"),cb:function(){return o.toggleBoolState("editFolder",{menuIndex:e})}},{icon:"fa fa-trash",name:n.default("删除文件夹"),cb:function(){return i.removeMenu("measure",e)}},{icon:"fa fa-eye",name:n.default("取消全部隐藏维度"),cb:function(){return i.cancelAllHidden("measure")}},{divider:!0},{icon:"fa fa-plus",name:n.default("新建计算度量"),cb:function(){return o.toggleBoolState("addCalculate",{menuIndex:e})}},{icon:"fa fa-folder",name:n.default("新建文件夹"),cb:function(){return o.toggleBoolState("addFolder")}}];m.changeOrder(!0,"measure",i,l,e,""),c.popMenu.setPopMenuTree(l),c.popMenu.show(t,a)},t.prototype.showMeasureSetting=function(e,t,a,o){var i=this,l=this.props.dmSchema,d=l.measures.get(t);if(d){var s=d.convert.type||d.dataType,u=[{icon:"fa fa-edit",name:n.default("编辑"),cb:function(){return i.toggleBoolState("editMeasure",{measureId:t})}}];window.sugarConfig.enableNLP&&u.push({icon:"fa fa-question-circle-o ",name:n.default("配置'「"+h.nlpName+"」'同义词"),cb:function(){return i.toggleBoolState("editNLPAlias",{measureId:t})}}),u.push({icon:"fa fa-copy",name:n.default("复制"),cb:function(){return l.copyMeasure(t,e)}}),u.push({icon:"fa fa-eye-slash",name:n.default(d.isHidden?"取消隐藏":"在分析中隐藏"),cb:function(){return l.toggleHidden("measure",t)}},{icon:"fa fa-eye",name:n.default("取消全部隐藏度量"),cb:function(){return l.cancelAllHidden("measure")}},{divider:!0},{icon:"fa fa-plus",name:n.default("新建计算度量"),cb:function(){return i.toggleBoolState("addCalculate",{menuIndex:e})}}),m.moveToMenu("measure",l,u,e,t),u.push({divider:!0}),m.defaultAggregator(l,u,e,t),m.convertDataType("measure",l,u,e,t),m.convertDataLabel("measure",l,u,e,t),~["string","int","float"].indexOf(s)&&u.push({icon:"fa fa-exchange",name:n.default("转换为维度"),cb:function(){return l.exchangeDimensionAndMeasure("measure",e,t)}}),u.push({divider:!0}),m.measureDataFormat(l,u,e,t),m.floatAccuracy(l,u,e,t),u.push({icon:"fa fa-certificate",name:n.default("数据单位")+(d.format.unit&&d.format.unit.length<4?"("+d.format.unit+")":""),cb:function(){return i.toggleBoolState("editUnit",{measureId:t})}}),m.changeOrder(!1,"measure",l,u,e,t),c.popMenu.setPopMenuTree(u),c.popMenu.show(a,o)}},t.prototype.showCalculateSetting=function(e,t,a,o){var i=this,l=this.props.dmSchema,d=l.measures.get(t);if(d){var s=d.convert.type||d.dataType,u=[{icon:"fa fa-edit",name:n.default("编辑"),cb:function(){return i.toggleBoolState("editCalculate",{calculateId:t})}}];window.sugarConfig.enableNLP&&u.push({icon:"fa fa-question-circle-o ",name:n.default("配置'「"+h.nlpName+"」'同义词"),cb:function(){return i.toggleBoolState("editNLPAlias",{measureId:t})}}),u.push({icon:"fa fa-copy",name:n.default("复制"),cb:function(){return l.copyMeasure(t,e)}}),u.push({icon:"fa fa-trash",name:n.default("删除"),cb:function(){return i.removeCalculate(t,e)}},{icon:"fa fa-eye-slash",name:n.default(d.isHidden?"取消隐藏":"在分析中隐藏"),cb:function(){return l.toggleHidden("measure",t)}},{icon:"fa fa-eye",name:n.default("取消全部隐藏度量"),cb:function(){return l.cancelAllHidden("measure")}},{divider:!0},{icon:"fa fa-plus",name:n.default("新建计算度量"),cb:function(){return i.toggleBoolState("addCalculate",{menuIndex:e})}}),m.moveToMenu("measure",l,u,e,t),u.push({divider:!0}),m.defaultAggregator(l,u,e,t),m.convertDataLabel("measure",l,u,e,t),~["string","int","float"].indexOf(s)&&u.push({icon:"fa fa-exchange",name:n.default("转换为维度"),cb:function(){return l.exchangeDimensionAndMeasure("measure",e,t)}}),u.push({divider:!0}),m.measureDataFormat(l,u,e,t),m.floatAccuracy(l,u,e,t),u.push({icon:"fa fa-certificate",name:n.default("数据单位")+(d.format.unit&&d.format.unit.length<4?"("+d.format.unit+")":""),cb:function(){return i.toggleBoolState("editUnit",{measureId:t})}}),m.changeOrder(!1,"measure",l,u,e,t),c.popMenu.setPopMenuTree(u),c.popMenu.show(a,o)}},t.prototype.render=function(){var e=this,t=this.props,a=t.dmSchema,l=(t.group,a.measures),r=a.measureMenu,c=this.state,m=void 0,g=void 0,p="",b="";if(c.measureId&&(m=l.get(c.measureId),m&&(g=a.tables.find(function(e){return e.tableId===m.tableId})),g)){var S=d.getDBInfoOfTable(a,g);p=S.tableDispalyName,b=S.dbOrHomologous}var C=!a.tables.length;return o.createElement("div",{className:"measure"},o.createElement("div",{className:"head"},n.default("度量"),o.createElement("div",{className:"pull-right"},o.createElement("span",{className:i("tool-item",{disabled:C}),onClick:function(){return!C&&e.toggleBoolState("addFolder")}},n.default("新建文件夹")),o.createElement("span",{className:i("tool-item",{disabled:C}),onClick:function(){return!C&&e.toggleBoolState("addCalculate")}},n.default("新建计算度量")))),o.createElement(s.default,{mode:"editor",dmSchema:a,showMenuSetting:this.showMenuSetting,showMeasureSetting:this.showMeasureSetting,showCalculateSetting:this.showCalculateSetting,onSort:function(e,t){a.dragSort("measure",e,t)}}),o.createElement(u.default,{show:c.addFolder||c.editFolder,title:n.default(c.addFolder?"新建度量文件夹":"编辑度量文件夹"),controls:[{name:"index",type:"static",hidden:!0},{name:"name",label:n.default("名称"),type:"text",required:!0,validations:"maxLength:40"}],onClose:function(){return e.toggleBoolState(c.addFolder?"addFolder":"editFolder")},onConfirm:c.addFolder?this.addFolder:this.renameFolder,data:c.editFolder?{name:r[c.menuIndex].name,index:c.menuIndex}:void 0}),c.addCalculate||c.editCalculate?o.createElement(f.default,{dmSchema:a,onClose:function(){return e.toggleBoolState(c.addCalculate?"addCalculate":"editCalculate")},onConfirm:c.addCalculate?this.addCalculate:this.editCalculate,type:"measure",nodeId:c.addCalculate?"":c.calculateId}):null,c.editMeasure&&m&&g?o.createElement(u.default,{show:!0,wideLabel:!0,title:n.default("编辑度量「"+(m.alias.trim()||m.field)+"」"),controls:[{name:"alias",label:n.default("度量别名"),type:"text",validations:"maxLength:40",desc:n.default("用于显示的名称")},{name:"field",label:n.default("物理字段名"),type:"text",disabled:!0,desc:n.default("度量对应的数据库表中的字段列名")},{name:"table",label:n.default("所属数据表"),type:"text",disabled:!0,desc:n.default("度量字段所属数据库的表名")},{name:"dbOrHomologous",label:n.default("所属数据源"),type:"text",disabled:!0,desc:n.default("度量字段所属数据源或同源异库")},{name:"comment",label:n.default("字段注释"),type:"text",disabled:!0,desc:n.default("数据库中度量字段注释")}],onClose:function(){return e.toggleBoolState("editMeasure")},onConfirm:this.editMeasure,data:{alias:m.alias,field:m.field,table:p,dbOrHomologous:b,comment:m.comment}}):null,c.editNLPAlias&&m?o.createElement(u.default,{show:!0,wideLabel:!0,title:n.default("编辑度量「"+(m.alias.trim()||m.field)+"」的同义词"),controls:[{type:"combo",multiple:!0,addable:!0,name:"NLPAlias",maxLength:10,flat:!0,label:n.default("同义词"),desc:n.default("配置'「"+h.nlpName+"」'功能中可以识别该字段的同义词"),controls:[{type:"text",clearable:!0}]}],onClose:function(){return e.toggleBoolState("editNLPAlias")},onConfirm:this.editMeasureNLPAlias,data:{NLPAlias:m.NLPAlias}}):null,c.editUnit&&m?o.createElement(u.default,{show:!0,wideLabel:!0,title:"设置「"+(m.alias.trim()||m.field)+"」数据单位",controls:[{name:"unit",label:n.default("数据单位"),type:"text",validations:"maxLength:40",desc:n.default("%、千克、顿、元等")}],onClose:function(){return e.toggleBoolState("editUnit")},onConfirm:this.editUnit,data:{unit:m.format.unit}}):null)},t.displayName="Measure",t=a.__decorate([l.observer],t)}(o.Component);t.default=g});
;sugar.define("sugar:sites/group/manage/data-model/editor/view-data.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=e("sugar:node_modules/tslib/tslib.js"),n=e("sugar:utils/i18n.ts"),l=e("sugar:node_modules/react/index.js"),d=e("sugar:node_modules/amis/lib/index.js"),r=e("sugar:stores/index.ts"),i=e("sugar:sites/group/manage/data-model/editor/helper.ts"),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.render=function(){var e=this.props.dataModelData,t=this.props.dmSchema;return"pending"!==e.loadState&&"error"!==e.loadState&&e.data?l.createElement("div",{className:"view-data"},l.createElement("table",null,l.createElement("thead",null,l.createElement("tr",null,l.createElement("th",{className:"row-index"},n.default("序号")),e.data.columns.map(function(e){var a,n,d=e.dataType;e.calculated&&(d="cal");var r=0,s=null===(a=null===t||void 0===t?void 0:t.dimensions.get(e.id))||void 0===a?void 0:a.tableId;return r=(null===t||void 0===t?void 0:t.tables.findIndex(function(e){return s===e.tableId}))||0,s||(s=null===(n=null===t||void 0===t?void 0:t.measures.get(e.id))||void 0===n?void 0:n.tableId,r=(null===t||void 0===t?void 0:t.tables.findIndex(function(e){return s===e.tableId}))||0),l.createElement("th",{title:e.name,key:e.id,className:"field-"+e.type,style:{backgroundColor:i.tableBackgroundColor[r]}},l.createElement("i",{className:"sugar-icon icon-"+d+" field-"+e.type}),e.alias||e.name)}))),l.createElement("tbody",null,e.data.rows.map(function(t,a){return l.createElement("tr",{key:a},l.createElement("td",{className:"row-index"},a+1),e.data.columns.map(function(e){return l.createElement("td",{title:t[e.id],key:e.id},t[e.id])}))})))):l.createElement("div",{className:"view-data"},l.createElement(d.Spinner,{overlay:!0,size:"lg"}))},t.displayName="ViewData",t=a.__decorate([r.observer],t)}(l.Component);t.default=s});
;sugar.define("sugar:widgets/data-model/data-model-limit/data-model-limit-table.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=e("sugar:node_modules/tslib/tslib.js"),i=e("sugar:utils/i18n.ts"),o=e("sugar:node_modules/react/index.js"),n=e("sugar:node_modules/classnames/index.js"),l=e("sugar:node_modules/amis/lib/index.js"),d=e("sugar:stores/index.ts"),s=e("sugar:widgets/form-dialog.tsx"),r=e("sugar:widgets/confirm.tsx"),m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.editIndex=-1,t.mode="add",t}return a.__extends(t,e),t.prototype.componentWillMount=function(){this.setState({viewData:!1,showFiledLimitModal:!1,mode:"add"}),this.handleRowEdit=this.handleRowEdit.bind(this),this.handleRowRemove=this.handleRowRemove.bind(this),this.handleRowAdd=this.handleRowAdd.bind(this),this.getRowData=this.getRowData.bind(this),this.toggleShowLimitDialog=this.toggleShowLimitDialog.bind(this)},t.prototype.handleRowEdit=function(e){var t=this;if(~this.editIndex){var i=(this.props.value||[]).map(function(i,o){return t.editIndex===o?a.__assign(a.__assign({},i),e):i});this.props.onChange(i),this.toggleShowLimitDialog("edit")}},t.prototype.handleRowRemove=function(){var e=this;r.confirm("确定要删除该项？").then(function(){var t=[].concat(e.props.value||[]);~e.editIndex&&(t.splice(e.editIndex,1),e.props.onChange(t))}).catch(function(){})},t.prototype.handleRowAdd=function(e){e=a.__assign({},e);var t=this.props,i=t.value,o=void 0===i?[]:i,n=t.handleRowAdd,l=[];l=n?n(o,e):[].concat(o).concat([e]),this.props.onChange(l),this.toggleShowLimitDialog("add")},t.prototype.toggleShowLimitDialog=function(e){void 0===e&&(e="add"),this.mode=e,this.setState({showFiledLimitModal:!this.state.showFiledLimitModal})},t.prototype.getTBody=function(){var e=this,t=this.props,a=t.cols,n=void 0===a?[]:a,d=t.value,s=void 0===d?[]:d,r=t.banEdit;return s.length?s.map(function(t,a){return o.createElement("tr",{key:"row_"+a},n.map(function(e){var a=t[e.key];return e.render&&(a=e.render(a,t)),o.createElement("td",{key:"col_"+e.key},a)}),o.createElement("td",{className:"td-action"},!r&&o.createElement(l.TooltipWrapper,{tooltip:i.default("编辑"),placement:"bottom"},o.createElement("i",{className:"fa fa-pencil action-btn",onClick:function(){e.toggleShowLimitDialog("edit"),e.editIndex=a}})),o.createElement(l.TooltipWrapper,{tooltip:i.default("删除"),placement:"bottom"},o.createElement("i",{className:"fa fa-trash-o action-btn",style:{paddingLeft:"10px"},onClick:function(){e.editIndex=a,e.handleRowRemove()}}))))}):o.createElement("tr",null,o.createElement("td",{colSpan:n.length+1,style:{textAlign:"center"}},i.default("暂无数据")))},t.prototype.getRowData=function(){var e=this,t=e.mode,a=e.editIndex,i=e.props.value;return"edit"===t&&~a&&i&&i.length?i[a]||{}:{}},t.prototype.render=function(){var e=this,t=this.props,a=t.cols,d=t.controls,r=t.containerClassName,m=t.addTipText,c=t.label,h=t.title,u=t.size,p=this.state.showFiledLimitModal;return o.createElement("div",{className:n("a-Form-item a-Form-item--horizontal data-model-limit-table",r),key:"limit-table"},void 0!=c&&o.createElement("label",{className:"a-Form-label a-Form-itemColumn--2"},o.createElement("span",null,c)),o.createElement("div",{className:"a-Form-value"},o.createElement("table",{className:"table table-striped table-bordered"},o.createElement("thead",null,o.createElement("tr",null,a.map(function(e){return o.createElement("th",{key:"th_"+e.key,style:e.tdStyle},e.name)}),o.createElement("th",{key:"action",className:"th-action"},i.default("操作")))),o.createElement("tbody",null,this.getTBody())),o.createElement("div",{className:"add-btn"},o.createElement(l.TooltipWrapper,{tooltip:i.default(m||"新增一行"),placement:"bottom"},o.createElement(l.Button,{className:"btn-icon btn-rounded",level:"info",size:"small",onClick:function(){return e.toggleShowLimitDialog("add")}},o.createElement("i",{className:"fa fa-plus"}))))),d&&o.createElement(s.default,{key:"FiledLimitModal",className:"data-model-limit",show:p,title:i.default(h||"弹框"),data:this.getRowData(),onClose:function(){return e.toggleShowLimitDialog(e.mode)},onConfirm:"add"===this.mode?this.handleRowAdd:this.handleRowEdit,controls:d,size:u}))},t.displayName="DataModelLimitTable",t=a.__decorate([d.observer],t)}(o.Component);t.default=m});
;sugar.define("sugar:widgets/data-model/data-model-limit/data-model-limit-ctrl.tsx",function(e,a){"use strict";function t(e){var a=[];if(e&&e.config){var t=e.config,l=t.dimensions,n=t.dimensionMenu,i={label:"",value:"",children:[]};n.map(function(e){i.label!==e.name&&(i={label:e.name,value:e.menuId,disabled:!0,children:[]}),e.nodes.length&&(e.nodes.map(function(e){var a=l.get(e);a&&("dimension"!==a.type||a.isHidden?"hierarchy"===a.type&&a.pathIds&&a.pathIds.length&&a.pathIds.forEach(function(e){var a=l.get(e);a&&!a.isHidden&&i.children.push({label:a.alias.trim()||a.field,value:e})}):i.children.push({label:a.alias.trim()||a.field,value:e}))}),a.push(i))})}return a}function l(e,a){var t;if(e&&e.config){var l=e.config.dimensions,n=l.get(a);return(null===(t=null===n||void 0===n?void 0:n.alias)||void 0===t?void 0:t.trim())||(null===n||void 0===n?void 0:n.field)}return""}Object.defineProperty(a,"__esModule",{value:!0}),a.getDialogControls=void 0;var n=e("sugar:node_modules/tslib/tslib.js"),i=e("sugar:utils/i18n.ts"),d=e("sugar:node_modules/react/index.js"),r=e("sugar:widgets/data-model/data-model-limit/data-model-limit-table.tsx"),u=function(e){return[{type:"tree-select",name:"dimId",hideRoot:!0,multiple:!1,cascade:!0,required:!0,label:i.default("维度字段"),options:t(e),placeholder:i.default("请选择维度字段")}]},o=function(e){return[{key:"email",name:i.default("邮箱"),render:function(e,a){return a}},{key:"name",name:i.default("姓名"),render:function(a,t){var l,n=e.filter(function(e){return e.email===t});return null===(l=n[0])||void 0===l?void 0:l.realName}}]},s=function(e){return[{key:"name",name:i.default("角色名"),render:function(a,t){var l,n=e.filter(function(e){return e.hash===t});return null===(l=n[0])||void 0===l?void 0:l.name}},{key:"remark",name:i.default("角色说明"),render:function(a,t){var l,n=e.filter(function(e){return e.hash===t});return null===(l=n[0])||void 0===l?void 0:l.remark}}]},m=function(e,a){return n.__spreadArrays(u(e),[{type:"radios",name:"mode",label:i.default("筛选方式"),inline:!0,value:"list",hiddenOn:"!data.dimId",options:[{label:i.default("列表筛选"),value:"list"},{label:i.default("手动筛选"),value:"manual"}]},{type:"select",name:"list",label:i.default("选择数据"),clearable:!0,multiple:!0,joinValues:!1,extractValue:!0,source:"/api/group/"+a+"/dataModel/getSelectDimensionsValue?dataModelHash="+e.hash+"&dimensionsId=${dimId}",visibleOn:"data.mode === 'list' && data.dimId",searchable:!0},{type:"tag",name:"manual",label:i.default("选择数据"),joinValues:!1,extractValue:!0,visibleOn:"data.mode === 'manual' && data.dimId",placeholder:i.default("输入您要添加的项,回车确认"),desc:i.default("输入内容后要回车，可以输入多个")}])},c=function(e,a,t){return n.__spreadArrays(u(e),[{type:"select",name:"userAttr",label:i.default("用户属性"),required:!0,placeholder:i.default("选择匹配的用户属性"),clearable:!0,joinValues:!1,extractValue:!0,options:t.attrNameList.map(function(e){return{label:e.name,value:e.hash}}),searchable:!0}])},f=function(e,a,t,u,c){return[{type:"tabs",tabs:[{title:i.default("字段权限设置"),controls:[{type:"text",name:"name",required:!0,label:i.default("权限名称")},{type:"radios",name:"rule",label:i.default("权限规则"),inline:!0,value:"AND",options:[{label:"AND",value:"AND"},{label:"OR",value:"OR"}]},{name:"contents",hiddenOn:'data.method === "dynamic"',children:function(t){var o=t.onChange,s=t.value;return d.createElement(r.default,n.__assign({},{onChange:o,value:s},{label:i.default("权限内容"),title:i.default("固定权限设置"),size:"lg",cols:[{key:"dimId",name:i.default("模型字段"),render:function(a){return l(e,a)}},{key:"list",name:i.default("字段取值"),render:function(e,a){var t=a.list,l=a.manual,n=a.mode,i="manual"===n?l:t;return(i||[]).join("，")}}],controls:m(e,a,u,c),handleRowAdd:function(e,a){var t=[].concat(e);return a.dimId&&(t.forEach(function(e,l){a.dimId===e.dimId&&t.splice(l,1)}),t=t.concat(a)),t}}))}}]},{title:i.default("授权成员设置"),controls:[{name:"limitUsers",hiddenOn:'data.method === "dynamic"',children:function(e){var a=e.onChange,t=e.value;return d.createElement(r.default,n.__assign({},{onChange:a,value:t},{label:i.default("授权用户"),cols:o(u.data),size:"md",title:i.default("授权用户"),banEdit:!0,handleRowAdd:function(e,a){return e.concat(a.users)},controls:[{type:"select",name:"users",label:i.default("添加用户"),clearable:!0,multiple:!0,joinValues:!1,extractValue:!0,required:!0,options:u.data.map(function(e){return{label:e.realName,value:e.email}}),searchable:u.data.length>10}]}))}},{name:"limitRoles",hiddenOn:'data.method === "dynamic"',children:function(e){var a=e.onChange,t=e.value;return d.createElement(r.default,n.__assign({},{onChange:a,value:t},{label:i.default("授权角色"),cols:s(c.data),title:i.default("授权角色"),size:"md",banEdit:!0,handleRowAdd:function(e,a){return e.concat(a.roles)},controls:[{type:"select",name:"roles",label:i.default("添加角色"),clearable:!0,multiple:!0,joinValues:!1,extractValue:!0,required:!0,options:c.data.map(function(e){return{label:e.name,value:e.hash}}),searchable:c.data.length>10}]}))}}]}]}]};a.getDialogControls=function(e,a,t,u,o){return[{type:"radios",name:"limits.method",label:i.default("设置方式"),inline:!0,value:"fixed",options:[{label:i.default("固定值"),value:"fixed"},{label:i.default("动态值"),value:"dynamic"}]},{name:"limits.fixedLimits",hiddenOn:'data.limits.method === "dynamic"',children:function(l){var s=l.onChange,m=l.value;return d.createElement(r.default,n.__assign({},{onChange:s,value:m},{title:i.default("固定值权限设置"),label:i.default("固定值权限"),size:"lg",cols:[{key:"name",name:i.default("权限名称")}],controls:f(e,a,t,u,o)}))}},{type:"checkbox",name:"limits.othersLimit",hiddenOn:'data.limits.method === "dynamic"',option:i.default("未添加权限的用户拥有所有权限")},{hiddenOn:'data.limits.method === "fixed"',type:"radios",name:"limits.dynamicLimitRule",label:i.default("权限规则"),inline:!0,value:"AND",options:[{label:"AND",value:"AND"},{label:"OR",value:"OR"}]},{name:"limits.dynamicLimits",hiddenOn:'data.limits.method === "fixed"',children:function(o){var s=o.onChange,m=o.value;return d.createElement(r.default,n.__assign({},{onChange:s,value:m},{label:i.default("动态值权限"),title:i.default("动态值权限设置"),size:"lg",cols:[{key:"dimId",name:i.default("模型字段"),render:function(a){return l(e,a)}},{key:"userAttr",name:i.default("用户属性字段"),render:function(e){var a,l=t.attrNameList.filter(function(a){return a.hash===e});return null===(a=l[0])||void 0===a?void 0:a.name}}],controls:c(e,a,t,u),handleRowAdd:function(e,a){var t=[].concat(e);return a.dimId&&(t.forEach(function(e,l){a.dimId===e.dimId&&t.splice(l,1)}),t=t.concat(a)),t}}))}},{tpl:'<div class="dataLineLimit-docLink text--info"><a href="/docs/DataLineLimit" target="_blank">'+i.default("什么是数据行权限？")+"</a></div>",type:"tpl"}]}});
;sugar.define("sugar:widgets/data-model/data-model-limit/data-model-limit.tsx",function(t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var e=t("sugar:node_modules/tslib/tslib.js"),o=t("sugar:utils/i18n.ts"),s=t("sugar:node_modules/react/index.js"),a=t("sugar:stores/index.ts"),l=t("sugar:node_modules/amis/lib/index.js"),r=t("sugar:widgets/form-dialog.tsx"),n=t("sugar:widgets/data-model/data-model-limit/data-model-limit-ctrl.tsx"),d=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.onChange=function(t){i.props.onChange(t)},i.showLimit=function(){return"pending"===i.props.userAttr.loadState||"pending"===i.props.userList.loadState||"pending"===i.props.roleList.loadState?void l.toast.error(o.default("数据正在加载中，请稍后！")):"error"===i.props.userAttr.loadState?void l.toast.error(i.props.userAttr.loadError.message||"数据加载错误，不能权限设置"):void i.toggleShowLimitDialog()},i.toggleShowLimitDialog=function(){i.setState({showLimitDialog:!i.state.showLimitDialog})},i.onLimitChange=function(t){i.toggleShowLimitDialog(),i.props.onChange(t)},i}return e.__extends(i,t),i.prototype.componentWillMount=function(){this.setState({showLimitDialog:!1})},i.prototype.render=function(){var t=this.props,i=t.dmSchema,a=t.dataModelEntity,l=t.groupHash,d=t.userAttr,m=t.userList,g=t.roleList,u=this.state.showLimitDialog,p=0,h=i.limits||{},c=h.method,f=h.fixedLimits,L=void 0===f?[]:f,w=h.dynamicLimits,S=void 0===w?[]:w;return"fixed"===c?p=L.length:"dynamic"===c&&(p=S.length),[s.createElement("span",{className:"sugar-limitBtn",key:"limitBtn",onClick:this.showLimit},o.default("数据行权限"),"(",p,o.default("个"),")"),s.createElement(r.default,{key:"limitModal",className:"data-model-limit",show:u,title:o.default("数据行权限"),data:{limits:e.__assign({},i.limits)},onClose:this.toggleShowLimitDialog,onConfirm:this.onLimitChange,controls:n.getDialogControls(a,l,d,m,g),size:"md"})]},i.displayName="DataModelLimit",i=e.__decorate([a.observer],i)}(s.Component);i.default=d});
;sugar.define("sugar:widgets/data-model/data-model-fuzzy/data-model-fuzzy.tsx",function(e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var l=e("sugar:node_modules/tslib/tslib.js"),t=e("sugar:utils/i18n.ts"),n=e("sugar:node_modules/react/index.js"),d=e("sugar:stores/index.ts"),i=e("sugar:node_modules/amis/lib/index.js"),u=e("sugar:widgets/form-dialog.tsx"),o=e("sugar:widgets/data-model/data-model-limit/data-model-limit-table.tsx"),s=e("sugar:widgets/data-model/data-model-filter/data-model-filter-modal-all.tsx"),r=[{label:t.default("所有文字全部脱敏"),value:"all"},{label:t.default("头尾展示M、N个真实文字"),value:"hideMiddle"},{label:t.default("只将头尾的M、N个文字脱敏"),value:"showMiddle"}],m={};r.forEach(function(e){return m[e.value]=e.label});var c=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.showFuzzy=function(){return"pending"===a.props.userList.loadState||"pending"===a.props.roleList.loadState?void i.toast.error(t.default("数据正在加载中，请稍后！")):void a.toggleShowFuzzyDialog()},a.toggleShowFuzzyDialog=function(){a.setState({showFuzzyDialog:!a.state.showFuzzyDialog})},a.onFuzzyChange=function(e){a.toggleShowFuzzyDialog(),a.props.onChange(e)},a}return l.__extends(a,e),a.prototype.componentWillMount=function(){this.setState({showFuzzyDialog:!1})},a.prototype.render=function(){var e=this.props,a=e.dmSchema,d=e.dataModelEntity,i=e.userList,c=e.roleList,f=this.state.showFuzzyDialog,p=0,h=a.fuzzy||{},g=h.list,b=h.open;return b&&g&&g.length&&(p=g.length),[n.createElement("span",{className:"sugar-limitBtn",key:"limitBtn",onClick:this.showFuzzy},t.default("数据脱敏"),"(",p,t.default("个"),")"),f?n.createElement(u.default,{key:"limitModal",className:"data-model-limit",show:f,title:t.default("数据脱敏"),data:a.fuzzy||{},onClose:this.toggleShowFuzzyDialog,onConfirm:this.onFuzzyChange,controls:[{tpl:'<div class="dataLineLimit-docLink text--info"><a href="/docs/Model-Fuzzy" target="_blank">'+t.default("什么是数据脱敏？")+"</a></div>",type:"tpl"},{type:"checkbox",name:"open",value:!0,option:t.default("启用数据脱敏")},{name:"list",value:[],children:function(e){var u=e.onChange,f=e.value,p=[],h=[],g=[];if(d&&d.config){var b=d.config,y=b.dimensions,z=b.dimensionMenu,v=b.measures,x=b.measureMenu;h=s.treeSelectOption(z,y,"dimension",!1,!1),g=s.treeSelectOption(x,v,"measure",!1,!1),p=p.concat([{label:t.default("维度"),value:"dimensions",disabled:!0,children:h}]),p=p.concat([{label:t.default("度量"),value:"measure",disabled:!0,children:g}])}return n.createElement(o.default,l.__assign({},{onChange:u,value:f},{label:t.default("脱敏字段列表"),title:t.default("脱敏字段设置"),size:"md",cols:[{key:"dimOrMeaId",name:t.default("脱敏字段"),render:function(e){var l=a.dimensions.get(e)||a.measures.get(e);return l?l.alias:t.default("字段不存在，请删除")}},{key:"rule",name:t.default("脱敏规则"),render:function(e){return m[e]}}],controls:[{type:"tree-select",name:"dimOrMeaId",hideRoot:!0,multiple:!1,cascade:!0,label:t.default("脱敏字段"),required:!0,options:p,placeholder:t.default("请选择维度或度量字段")},{type:"select",name:"rule",label:t.default("脱敏规则"),required:!0,value:"hideMiddle",joinValues:!1,extractValue:!0,options:r},{type:"number",name:"m",label:"M（头部）",required:!0,value:2,step:1,max:20,min:0,hiddenOn:'data.rule === "all"'},{type:"number",name:"n",label:"N（尾部）",required:!0,value:2,step:1,max:20,min:0,hiddenOn:'data.rule === "all"'},{type:"text",name:"symbol",label:t.default("脱敏符号"),required:!0,value:"*",validations:"maxLength: 1"},{type:"checkbox",name:"fixedSymbolNum",label:t.default("脱敏符号个数固定"),value:!1},{type:"number",name:"symbolNum",label:t.default("脱敏符号个数"),required:!0,value:3,step:1,max:20,min:1,hiddenOn:"!data.fixedSymbolNum"},{type:"select",name:"scope",label:t.default("脱敏范围"),required:!0,value:"all",joinValues:!1,extractValue:!0,options:[{label:t.default("对所有用户脱敏"),value:"all"},{label:t.default("对部分用户脱敏"),value:"blackList"},{label:t.default("对部分用户不脱敏，对其它用户脱敏"),value:"whiteList"}]},{type:"select",name:"roles",label:t.default("角色选择"),clearable:!0,multiple:!0,joinValues:!1,extractValue:!0,options:c.data.map(function(e){return{label:e.name,value:e.hash}}),searchable:c.data.length>10,hiddenOn:'data.scope === "all"'},{type:"select",name:"users",label:t.default("用户选择"),clearable:!0,multiple:!0,joinValues:!1,extractValue:!0,options:i.data.map(function(e){return{label:e.realName,value:e.email}}),searchable:i.data.length>10,hiddenOn:'data.scope === "all"'}],handleRowAdd:function(e,a){var l=[].concat(e);return a.dimOrMeaId&&(l.forEach(function(e,t){a.dimOrMeaId===e.dimOrMeaId&&l.splice(t,1)}),l=l.concat(a)),l}}))}}],size:"md"}):null]},a.displayName="DataModelFuzzy",a=l.__decorate([d.observer],a)}(n.Component);a.default=c});
;sugar.define("sugar:sites/group/manage/data-model/editor/data-model-body.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=e("sugar:node_modules/tslib/tslib.js"),i=e("sugar:utils/i18n.ts"),o=e("sugar:node_modules/react/index.js"),s=e("sugar:node_modules/react-dom/index.js"),n=e("sugar:node_modules/classnames/index.js"),l=e("sugar:node_modules/amis/lib/index.js"),d=e("sugar:stores/index.ts"),r=e("sugar:stores/data-model/dm-schema.ts"),u=e("sugar:widgets/code-editor.tsx"),m=e("sugar:sites/group/manage/data-model/editor/dimension.tsx"),h=e("sugar:sites/group/manage/data-model/editor/measure.tsx"),c=e("sugar:sites/group/manage/data-model/editor/view-data.tsx"),p=e("sugar:widgets/data-model/data-model-limit/data-model-limit.tsx"),g=e("sugar:widgets/data-model/data-model-fuzzy/data-model-fuzzy.tsx"),f=e("sugar:widgets/data-model/data-model-filter/data-model-filter.tsx"),y=e("sugar:widgets/form-dialog.tsx"),b=e("sugar:sites/amis-renderer.tsx"),v=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.componentWillMount=function(){this.setState({viewData:!1,showSQLDialog:!1,showSynTableStructureDialog:!1,showBatchEditDialog:!1,dimensionVal:"dimension"}),this.toggleViewData=this.toggleViewData.bind(this),this.loadModelViewData=this.loadModelViewData.bind(this),this.showSQL=this.showSQL.bind(this),this.toggleShowSQLDialog=this.toggleShowSQLDialog.bind(this),this.onFiltersChange=this.onFiltersChange.bind(this),this.onLimitChange=this.onLimitChange.bind(this),this.onFuzzyChange=this.onFuzzyChange.bind(this),this.synTableStructure=this.synTableStructure.bind(this),this.cancelSynTableStructure=this.cancelSynTableStructure.bind(this),this.handleSave=this.handleSave.bind(this),this.getTableData=this.getTableData.bind(this),this.getBatchDialogControls==this.getBatchDialogControls.bind(this),this.props.userList.load(this.props.dataModelHash),this.props.roleList.load(this.props.dataModelHash),this.props.userAttr.loadData()},t.prototype.componentWillReceiveProps=function(e){e.dmSchema.synTable&&this.setState({showSynTableStructureDialog:!0})},t.prototype.toggleViewData=function(){this.state.viewData||this.loadModelViewData(),this.setState({viewData:!this.state.viewData})},t.prototype.loadModelViewData=function(){var e=this,t=this.props,a=t.group,i=t.dataModelHash,o=t.dataModelData,s=t.editor;s.hasModified?this.props.editor.save(a.data.hash,i,"dataModel").then(function(t){var s=t.state;"done"===s&&o.load(a.data.hash,i).then(function(t){"error"===t.state&&t.store.sql&&e.toggleShowSQLDialog()})}):o.load(a.data.hash,i).then(function(t){"error"===t.state&&t.store.sql&&e.toggleShowSQLDialog()})},t.prototype.synTableStructure=function(){var e=this.props,t=e.group,a=e.dataModelHash,i=e.dataModel,o=e.dmSchema,s=e.syncStructure;s(),o.setSynTable(!1),i.synTable(t.data.hash,a),this.setState({showSynTableStructureDialog:!1})},t.prototype.cancelSynTableStructure=function(){var e=this.props.dmSchema;this.setState({showSynTableStructureDialog:!1}),e.setSynTable(!1)},t.prototype.showSQL=function(){return"pending"===this.props.dataModelData.loadState?void l.toast.error(i.default("数据正在加载中，请稍后！")):void this.toggleShowSQLDialog()},t.prototype.toggleShowSQLDialog=function(){this.setState({showSQLDialog:!this.state.showSQLDialog})},t.prototype.onFiltersChange=function(e){var t=this.props.dmSchema;t.setFilters(e)},t.prototype.onLimitChange=function(e){var t=this.props.dmSchema,a=e.limits||{};"fixed"===a.method?(a.dynamicLimits=[],a.dynamicLimitRule="AND"):"dynamic"===a.method&&(a.fixedLimits=[]),t.setLimits(a)},t.prototype.onFuzzyChange=function(e){var t=this.props.dmSchema,i=e||{};t.setFuzzy(a.__assign({},i))},t.prototype.handleSave=function(){var e=this.props,t=e.editor,a=e.group,i=e.dataModelHash;t.hasModified&&this.props.editor.save(a.data.hash,i,"dataModel")},t.prototype.getDimTree=function(){},t.prototype.componentDidUpdate=function(){var e=this.state.showBatchEditDialog;if(e){var t,a=o.createElement(b.default,{schema:{type:"page",body:{type:"form",mode:"horizontal",title:"",actions:[],submitText:null,controls:this.getBatchDialogControls()}}}),i=setTimeout(function(){if(t=document.getElementsByClassName("batch-edit-draw")[0]){var e=t.childNodes;e.forEach(function(e){e.classList.contains("batch-edit-draw-body")&&t.removeChild(e)}),s.render(a,t)}},500);t&&clearTimeout(i)}},t.prototype.getTableData=function(){var e=this,t=this.props.dmSchema.toJSON(),o={};return t.tables.forEach(function(s){o[i.default("计算字段")]=[];var n=r.getDBInfoOfTable(e.props.dmSchema,s).tableDispalyName;o[n]=[],Object.keys(t.dimensions).forEach(function(e){var l,d,r,u;t.dimensionMenu.forEach(function(t,a){~t.nodes.indexOf(e)&&(r=t.menuId,u=a)}),s.tableId===t.dimensions[e].tableId&&o[n].push({id:e,menuId:r,menuIndex:u,field:t.dimensions[e].field,alias:t.dimensions[e].alias,type:t.dimensions[e].type,convert:a.__assign({},t.dimensions[e].convert),dataType:t.dimensions[e].dataType,isHidden:t.dimensions[e].isHidden,comment:(null===(l=t.dimensions[e])||void 0===l?void 0:l.comment)||""}),t.dimensions[e].calculated&&o[i.default("计算字段")].push({id:e,menuId:r,menuIndex:u,field:t.dimensions[e].field,alias:t.dimensions[e].alias,type:t.dimensions[e].type,convert:a.__assign({},t.dimensions[e].convert),dataType:t.dimensions[e].dataType,isHidden:t.dimensions[e].isHidden,comment:(null===(d=t.dimensions[e])||void 0===d?void 0:d.comment)||""})}),Object.keys(t.measures).forEach(function(e){var i,l,d,r;t.measureMenu.forEach(function(t,a){~t.nodes.indexOf(e)&&(d=t.menuId,r=a)}),s.tableId===t.measures[e].tableId&&o[n].push({id:e,menuId:d,menuIndex:r,field:t.measures[e].field,alias:t.measures[e].alias,type:t.measures[e].type,convert:a.__assign({},t.measures[e].convert),dataType:t.measures[e].dataType,isHidden:t.measures[e].isHidden,comment:(null===(i=t.measures[e])||void 0===i?void 0:i.comment)||""}),t.measures[e].calculated&&o["计算字段"].push({id:e,menuId:d,menuIndex:r,field:t.measures[e].field,alias:t.measures[e].alias,type:t.measures[e].type,convert:a.__assign({},t.measures[e].convert),dataType:t.measures[e].dataType,isHidden:t.measures[e].isHidden,comment:(null===(l=t.measures[e])||void 0===l?void 0:l.comment)||""})})}),o},t.prototype.getBatchDialogControls=function(){var e=this,t=this.props.dmSchema,a=[],o=this.getTableData();this.tableDataResult=o;var s=Object.keys(o);return s.push(s.shift()),s.forEach(function(s){o[s].length&&a.push({type:"collapse",title:s,body:{type:"crud",name:"crud",headerToolbar:["bulkActions"],switchPerPage:!1,placeholder:i.default("暂无字段"),hideQuickSaveBtn:!0,bulkActions:[{label:i.default("将别名修改为注释内容"),actionType:"dialog",dialog:{title:i.default("批量修改别名为注释内容"),onConfirm:function(a){e.setState({showBatchEditDialog:!1}),t.batchReplaceAlias(a[0].items),e.setState({showBatchEditDialog:!0})},body:{type:"form",controls:[{type:"hidden",name:"items"},{type:"tpl",tpl:i.default("将表中所有字段别名替换成字段的注释，如果字段没有注释时将显示原字段别名")}]},actions:[{type:"button",actionType:"close",label:i.default("取消")},{type:"button",actionType:"confirm",label:i.default("确认"),reload:"crud"}]}},{label:i.default("设置字段属性"),actionType:"dialog",dialog:{title:i.default("批量设置字段属性"),size:"sm",onConfirm:function(e){var a=!0;e[0].items.forEach(function(e){var t;return~["string","int","float"].indexOf((null===(t=e.convert)||void 0===t?void 0:t.type)||e.dataType)?void 0:(l.toast.error(i.default("批量操作字段中勾选了日期类型维度，日期类型维度不能转化为度量！")),void(a=!1))}),a&&t.batchExchangeDimensionAndMeasure(e[0].items,e[0].type)},body:{type:"form",controls:[{type:"hidden",name:"items"},{type:"radios",label:i.default("字段属性"),name:"type",columnsCount:2,labelClassName:"a-Form-itemColumn--4",value:"dimension",options:[{label:i.default("维度"),value:"dimension"},{label:i.default("度量"),value:"measure"}]}]}}},{label:i.default("在分析中隐藏"),actionType:"dialog",dialog:{title:i.default("批量设置字段在分析中隐藏"),size:"sm",onConfirm:function(e){t.batchToggleHidden(e[0].items,e[0].isHidden)},body:{type:"form",controls:[{type:"hidden",name:"items"},{type:"radios",name:"isHidden",label:i.default("在分析中隐藏"),columnsCount:"2",labelClassName:"a-Form-itemColumn--4",value:!1,options:[{label:i.default("否"),value:!1},{label:i.default("是"),value:!0}]}]}}}],data:{items:o[s]},columns:[{name:"id",type:"text",hidden:!0},{label:i.default("字段名"),name:"field"},{label:i.default("别名"),name:"alias",quickEdit:{mode:"inline",type:"text",onChange:function(e){var a=arguments[3].data;"dimension"===a.type&&t.renameDimension(arguments[3].data.id,e),"measure"===a.type&&t.changeMeasure(arguments[3].data.id,e)}}},{label:i.default("字段属性"),name:"type",type:"mapping",map:{dimension:i.default("维度"),measure:i.default("度量")},quickEdit:{columnsCount:"2",type:"select",mode:"inline",onChange:function(e){var a,o=arguments[3].data,s=t.dimensions.get(o.id)||t.measures.get(o.id),n=null===s||void 0===s?void 0:s.type;~["string","int","float"].indexOf((null===(a=null===s||void 0===s?void 0:s.convert)||void 0===a?void 0:a.type)||(null===s||void 0===s?void 0:s.dataType)||"")?n&&e!==n&&t.exchangeDimensionAndMeasure(n,o.menuIndex,o.id):l.toast.error(i.default("日期类型维度不能转化为度量！"))},options:[{label:i.default("维度"),value:"dimension"},{label:i.default("度量"),value:"measure"}]}},{label:i.default("字段注释"),name:"comment"},{label:i.default("在分析中隐藏"),name:"isHidden",type:"mapping",map:{"false":i.default("否"),"true":i.default("是")},quickEdit:{columnsCount:"2",type:"select",mode:"inline",onChange:function(e){var a,i=arguments[3].data;e!==String(null===(a=t.dimensions.get(i.id))||void 0===a?void 0:a.isHidden)&&t.toggleHidden(i.type,i.id)},options:[{label:i.default("否"),value:"false"},{label:i.default("是"),value:"true"}]}}]}})}),a},t.prototype.render=function(){var e=this,t=this.props,a=t.dataModelEntity,s=t.dmSchema,d=t.dataModelData,r=t.dataModel,v=t.editor,S=t.group,w=t.userAttr,D=t.userList,E=t.roleList,C=this.state,T=C.viewData,x=C.showSQLDialog,M=C.showSynTableStructureDialog,L=C.showBatchEditDialog,k={type:"html",html:'<div style="line-height: 22px">\n              '+i.default("同步表结构会同步所有表新增或删除的字段！")+"<br>\n              "+i.default("所有表字段类型变更不会被同步，原有数据集关联模型不受影响。")+"<br>\n              "+i.default("确定同步吗？")+"<br>\n            </div>"};s.synTable&&M&&(k={type:"html",html:'<div style="line-height: 22px">\n                '+i.default("同步表结构会同步所有表新增或删除的字段！")+"<br>\n                "+i.default("所有表字段类型变更不会被同步，原有数据集关联模型不受影响。")+"<br>\n                "+i.default("自定义sql视图字段信息有变化，是否需要同步？")+"<br>\n              </div>"});var H=!s.tables.length;return H&&T&&(T=!1,d.clear(),setTimeout(function(){return e.setState({viewData:!1})},30)),[o.createElement("div",{className:"toolbar",key:"toolbar"},i.default("数据模型设置"),o.createElement("span",{className:n("tool-item",{disabled:H}),onClick:function(){return!H&&e.toggleViewData()}},i.default(T?"查看模型":"查看数据")),H?null:o.createElement("span",{className:"tool-item-sync",onClick:function(){return e.setState({showSynTableStructureDialog:!0})}},i.default("同步表结构")),H?null:o.createElement("span",{style:{"float":"right"}},o.createElement(f.default,{onChange:function(t){return e.onFiltersChange(t)},editorFilter:this.handleSave,value:s.filters,dataModelEntity:a})),H?null:o.createElement(p.default,{dmSchema:s,onChange:this.onLimitChange,dataModelEntity:a,groupHash:S.data.hash,userList:D,userAttr:w,roleList:E}),H?null:o.createElement(g.default,{dmSchema:s,onChange:this.onFuzzyChange,dataModelEntity:a,groupHash:S.data.hash,userList:D,userAttr:w,roleList:E}),T?[o.createElement("span",{className:"tool-item",key:"sql",onClick:this.showSQL},i.default("查看执行的SQL")),o.createElement("span",{className:"tool-item",key:"reload",onClick:this.loadModelViewData},i.default("刷新数据")),o.createElement("span",{className:"tool-item tool-item--tip",key:"limit-tip"},i.default("(最多预览300行)"))]:null,T?null:o.createElement("span",{className:n("tool-item text-info",{disabled:H}),key:"batchEdit",onClick:function(){return!H&&e.setState({showBatchEditDialog:!0})}},i.default("批量编辑字段"))),"pending"===r.loadState||"done"===r.loadState&&!r.data.hash?o.createElement(l.Spinner,{key:"loading",overlay:!0,size:"lg"}):T?o.createElement(c.default,{key:"view-data",dmSchema:s,dataModelData:d}):o.createElement("div",{className:"dim-measure",key:"dim-measure"},o.createElement(m.default,{dmSchema:s,editor:v,group:S}),o.createElement(h.default,{dmSchema:s,editor:v,group:S})),x?o.createElement(l.Modal,{key:"sql-dialog",show:!0,backdrop:"static",contentClassName:"big-modal"},o.createElement(l.Modal.Header,{showCloseButton:!0,onClose:this.toggleShowSQLDialog},o.createElement(l.Modal.Title,null,i.default("查看SQL"))),o.createElement(l.Modal.Body,null,"error"===d.loadState?o.createElement("div",{className:"datamodel-view-data-error"},d.loadError.message):null,o.createElement(u.default,{contaierClassName:"p-l-sm",value:d.sql,language:"sql",style:{minHeight:100},height:18*d.sql.split("\n").length+12,options:{readOnly:!0}})),o.createElement(l.Modal.Footer,null,o.createElement(l.Button,{level:"primary",onClick:this.toggleShowSQLDialog},i.default("确定")))):null,M?o.createElement(y.default,{key:"sync-dialog",show:!0,wideLabel:!0,title:i.default("同步表结构"),onClose:this.cancelSynTableStructure,onConfirm:this.synTableStructure,controls:[k]}):null,L?o.createElement(b.default,{key:"batch-edit-dialog",schema:{type:"page",body:{type:"drawer",title:i.default("批量编辑字段"),size:"xl",position:"right",closeOnOutside:!0,bodyClassName:"batch-edit-draw",show:!0,actions:[],onClose:function(){return e.setState({showBatchEditDialog:!1})},body:{type:"form",mode:"horizontal",className:"batch-edit-draw-body",actions:[],submitText:null,controls:[{name:"",value:{},children:function(){return o.createElement(l.Spinner,{className:"batch-edit-draw-body-loading",key:"loading",overlay:!0,size:"lg"})}}]}}}}):null]},t.displayName="DataModelEditorBody",t=a.__decorate([d.observer],t)}(o.Component);t.default=v});
;sugar.define("sugar:sites/group/manage/data-model/editor/data-model-editor.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=e("sugar:node_modules/tslib/tslib.js"),s=e("sugar:utils/i18n.ts"),i=e("sugar:node_modules/react/index.js"),o=e("sugar:node_modules/react-document-title/index.js"),n=e("sugar:node_modules/classnames/index.js"),l=e("sugar:node_modules/amis/lib/index.js"),d=e("sugar:stores/index.ts"),r=e("sugar:widgets/feedback.tsx"),h=e("sugar:widgets/error.tsx"),u=e("sugar:node_modules/react-dnd/lib/index.js"),m=e("sugar:node_modules/react-dnd-html5-backend/lib/index.js"),p=e("sugar:widgets/editor/lock-access.tsx"),c=e("sugar:widgets/editor/lockheartbeat-and-beforeunload.tsx"),g=e("sugar:sites/group/manage/data-model/editor/table-list.tsx"),f=e("sugar:sites/group/manage/data-model/editor/custom-table-list.tsx"),b=e("sugar:sites/group/manage/data-model/editor/table-join.tsx"),v=e("sugar:sites/group/manage/data-model/editor/data-model-body.tsx"),E=e("sugar:widgets/step.tsx"),M=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.resizing=!1,t.startX=0,t.startWidth=0,t.startY=0,t.startYTableList=0,t.startHeight=0,t.startHeightTableList=0,t.leftWidth=0,t.topHeight=0,t.topHeightTableList=420,t}return a.__extends(t,e),t.prototype.componentWillMount=function(){var e=this;this.leftWidth=this.props.assist.modelEditorLeftWidth,this.leftWidth<230&&(this.leftWidth=230),this.topHeight=this.props.assist.modelEditorTopHeight,this.setState({leftWidth:this.leftWidth,topHeight:this.topHeight,topHeightTableList:this.topHeightTableList,topHeightCustomTableList:601,openExitDialog:!1,editModelName:!1,syncStructure:!1}),this.toggleModelNameEdit=this.toggleModelNameEdit.bind(this),this.changeModelName=this.changeModelName.bind(this),this.handleMouseDownLeft=this.handleMouseDownLeft.bind(this),this.handleMouseMoveLeft=this.handleMouseMoveLeft.bind(this),this.handleMouseUpLeft=this.handleMouseUpLeft.bind(this),this.handleMouseDownTop=this.handleMouseDownTop.bind(this),this.handleMouseMoveTop=this.handleMouseMoveTop.bind(this),this.handleMouseMoveTopTableList=this.handleMouseMoveTopTableList.bind(this),this.handleMouseUpTop=this.handleMouseUpTop.bind(this),this.removeWindowEvents=this.removeWindowEvents.bind(this),this.getOut=this.getOut.bind(this),this.handleSave=this.handleSave.bind(this),this.handleCancelExit=this.handleCancelExit.bind(this),this.justExit=this.justExit.bind(this),this.saveThenExit=this.saveThenExit.bind(this),this.props.editor.initialize(this.props.group.data.hash,this.props.routeParams.dataModel,this.props.editorType).then(function(t){var a;"done"===t.state&&e.props.database.current.load(e.props.group.data.hash,null===(a=t.res)||void 0===a?void 0:a.data.config.dbHashes[0])}),this.props.database.simpleList.data&&this.props.database.simpleList.data.length||this.props.database.simpleList.loadData()},t.prototype.componentWillUnmount=function(){this.props.database.current.destory(),this.removeWindowEvents()},t.prototype.toggleModelNameEdit=function(){var e=this;this.setState({editModelName:!this.state.editModelName},function(){if(e.state.editModelName===!0){var t=document.getElementById("edit-model-name");t&&t.select&&t.select()}})},t.prototype.changeModelName=function(e){this.props.dataModel.data.rename(e.target.value||"")},t.prototype.handleMouseDownLeft=function(e){this.startX=e.clientX,this.startWidth=this.state.leftWidth,this.resizing=!0,window.addEventListener("mouseup",this.handleMouseUpLeft),window.addEventListener("mousemove",this.handleMouseMoveLeft),e.stopPropagation&&e.stopPropagation()},t.prototype.handleMouseMoveLeft=function(e){var t=this.startX-e.clientX;e.preventDefault(),this.leftWidth=Math.min(350,Math.max(230,this.startWidth-t)),this.setState({leftWidth:this.leftWidth})},t.prototype.handleMouseUpLeft=function(){this.resizing=!1,this.removeWindowEvents(),this.props.assist.setModelEditorLeftWidth(this.leftWidth)},t.prototype.handleMouseDownTop=function(e,t){"tablejoin"===t?(this.startY=e.clientY,this.startHeight=this.state.topHeight):(this.startYTableList=e.clientY,this.startHeightTableList=this.state.topHeightTableList),this.resizing=!0,"tablejoin"===t?(window.addEventListener("mouseup",this.handleMouseUpTop),window.addEventListener("mousemove",this.handleMouseMoveTop)):(window.addEventListener("mouseup",this.removeWindowEvents),window.addEventListener("mousemove",this.handleMouseMoveTopTableList)),e.stopPropagation&&e.stopPropagation()},t.prototype.handleMouseMoveTopTableList=function(e){var t,a=this.startYTableList-e.clientY;e.preventDefault(),this.topHeightTableList=Math.min(1200,Math.max(180,this.startHeightTableList-a)),this.setState({topHeightTableList:this.topHeightTableList,topHeightCustomTableList:(null===(t=document.getElementsByClassName("wrapper-sm table-list")[0])||void 0===t?void 0:t.clientHeight)+12})},t.prototype.handleMouseMoveTop=function(e){var t=this.startY-e.clientY;e.preventDefault(),this.topHeight=Math.min(350,Math.max(180,this.startHeight-t)),this.setState({topHeight:this.topHeight})},t.prototype.handleMouseUpTop=function(){this.resizing=!1,this.removeWindowEvents(),this.props.assist.setModelEditorTopHeight(this.topHeight)},t.prototype.removeWindowEvents=function(){window.removeEventListener("mouseup",this.handleMouseUpLeft),window.removeEventListener("mousemove",this.handleMouseMoveLeft),window.removeEventListener("mouseup",this.handleMouseUpTop),window.removeEventListener("mousemove",this.handleMouseMoveTop),window.removeEventListener("mousemove",this.handleMouseMoveTopTableList)},t.prototype.getOut=function(){var e=this.props;e.editor.hasModified?this.setState({openExitDialog:!0}):this.justExit()},t.prototype.handleSave=function(){this.props.editor.hasModified&&"pending"!==this.props.editor.savingState&&this.props.editor.save(this.props.group.data.hash,this.props.routeParams.dataModel,"dataModel")},t.prototype.handleCancelExit=function(){this.setState({openExitDialog:!1})},t.prototype.justExit=function(){var e=this.props;e.editor.setModified(!1),window.comeFromModelManage?(window.comeFromModelManage=null,e.router.goBack()):e.router.push("/group/"+e.group.data.key+"/manage/dataModel")},t.prototype.saveThenExit=function(){var e=this;this.props.editor.hasModified&&"pending"!==this.props.editor.savingState&&this.props.editor.save(this.props.group.data.hash,this.props.routeParams.dataModel,"dataModel").then(function(t){"done"===t.state&&e.justExit()})},t.prototype.render=function(){var e=this,t=this.props,a=t.company,d=t.group,u=t.database,m=t.dataModel,p=t.dataModelData,c=t.editor,M=t.userAttr,L=t.userList,w=t.roleList,T=t.customTable,N=this.state,y=N.leftWidth,x=N.topHeight,S=N.topHeightTableList,H=N.openExitDialog,_=N.syncStructure,D=N.topHeightCustomTableList;if(!_&&("pending"===m.loadState||"done"===m.loadState&&!m.data.hash))return i.createElement(l.Spinner,{overlay:!0,size:"lg"});if("error"===m.loadState)return i.createElement(h.default,{msg:s.default(m.loadError.message||"请求错误"),links:[{to:"/group/"+d.data.key+"/manage/dataModel",label:s.default("返回空间")}]});if("pending"===u.simpleList.loadState||"done"===u.simpleList.loadState&&!u.simpleList.data)return i.createElement(l.Spinner,{overlay:!0,size:"lg"});if("error"===u.simpleList.loadState)return i.createElement(h.default,{msg:s.default(u.simpleList.loadError.message||"请求错误"),links:[{to:"/group/"+d.data.key+"/manage/dataModel",label:s.default("返回空间")}]});if("pending"===u.current.loadState||"done"===u.current.loadState&&!u.current.data.hash)return i.createElement(l.Spinner,{overlay:!0,size:"lg"});if("error"===u.current.loadState)return i.createElement(h.default,{msg:s.default(u.current.loadError.message||"请求错误"),links:[{to:"/group/"+d.data.key+"/manage/dataModel",label:s.default("返回空间")}]});var W=m.data.config.dbHashes.some(function(e){return!u.simpleList.data.find(function(t){return e===t.hash})});return W?i.createElement(h.default,{msg:s.default("该数据模型所使用的数据源，您没有使用权限，需要空间管理员给您赋权"),links:[{to:"/group/"+d.data.key+"/manage/dataModel",label:s.default("返回空间")}]}):i.createElement(o,{title:s.default((m.data.name||"未命名")+"--数据模型编辑")},i.createElement("div",{className:"editor-container data-model-editor"},i.createElement("header",{className:"box-shadow bg-dark"},i.createElement("div",{className:"navbar-header"},i.createElement("div",{className:"navbar-brand text-lt"},i.createElement("img",{src:a.avatar||window.sugarConfig.logo||"/static/logo.png",className:"navbar-brand__logo",alt:"."}),i.createElement("span",{className:"m-l"},window.sugarConfig.name))),i.createElement("div",{className:"editor-toolbar hidden-xs"},i.createElement("div",{className:"editor-toolbar__center"},i.createElement("div",{className:"data-model-name-show"},this.state.editModelName?i.createElement("input",{value:m.data.name,onChange:this.changeModelName,onBlur:this.toggleModelNameEdit,id:"edit-model-name"}):i.createElement("span",{onClick:this.toggleModelNameEdit,className:"static-show"},m.data.name,i.createElement("i",{className:"fa fa-edit text-primary m-l-xs"})))),i.createElement("div",{className:"editor-toolbar__right"},i.createElement("ul",{className:"btns-box"},i.createElement("li",{className:"btn-item"},i.createElement("a",{href:"/docs",target:"_blank"},i.createElement("div",{className:"btn-container"},i.createElement("i",{className:"fa fa-question"}),i.createElement("span",{className:"btn-text"},s.default("帮助文档"))))),i.createElement(r.default,{inEditor:!0})),i.createElement("div",{className:"cut-line"}),i.createElement("ul",{className:"btns-box"},i.createElement("li",{className:n("btn-item",{"btn-item__disabled":!c.hasModified||"pending"===c.savingState}),onClick:this.handleSave},i.createElement("div",{className:"btn-container"},i.createElement("i",{className:"fa fa-floppy-o"}),i.createElement("span",{className:"btn-text"},s.default("保存")))),i.createElement("li",{className:"btn-item",onClick:this.getOut},i.createElement("div",{className:"btn-container"},i.createElement("i",{className:"fa fa-times"}),i.createElement("span",{className:"btn-text"},s.default("退出")))))))),i.createElement("div",{ref:"editorCtrlPanel",className:"editor-ctrl-panel data-model-editor__tablelist",style:{width:y}},i.createElement("div",{className:"editor-ctrl-panel__body"},i.createElement(g.DataModelEditorTableList,{database:u,dataModel:m,editor:c,topHeightTableList:S,group:d,hasCustomTable:"done"!==T.list.loadState?!0:!!T.list.data.length}),i.createElement("div",{className:"resizer-h",onMouseDown:function(t){return e.handleMouseDownTop(t,"tablelist")}},i.createElement("i",{className:"fa fa-bars"}),i.createElement("i",{className:"fa fa-bars"})),i.createElement(f.default,{database:u,dataModel:m,customTable:T,topHeightCustomTableList:D,group:d})),i.createElement("div",{className:"resizer",onMouseDown:this.handleMouseDownLeft})),i.createElement("div",{className:"data-model-editor__tablejoin",style:{left:y,height:x}},i.createElement(b.default,{dmSchema:m.data.config,editor:c,database:u,customTable:T}),i.createElement("div",{className:"resizer-h",onMouseDown:function(t){return e.handleMouseDownTop(t,"tablejoin")}},i.createElement("i",{className:"fa fa-bars"}),i.createElement("i",{className:"fa fa-bars"}))),i.createElement("div",{className:"data-model-editor__body",style:{left:y,top:x+60}},i.createElement(v.default,{dataModel:m,dataModelEntity:m.data,dmSchema:m.data.config,dataModelHash:m.data.hash,dataModelData:p,editor:c,group:d,userList:L,userAttr:M,roleList:w,syncStructure:function(){return e.setState({syncStructure:!0})}})),i.createElement(l.Modal,{show:H},i.createElement(l.Modal.Header,{onClose:this.handleCancelExit},i.createElement(l.Modal.Title,null,s.default("退出"))),i.createElement(l.Modal.Body,null,s.default("您的修改未保存！！！『直接退出』将不会保存您所做的修改。")),i.createElement(l.Modal.Footer,null,i.createElement(l.Button,{disabled:"pending"===c.savingState,onClick:this.handleCancelExit},s.default("取消")),i.createElement(l.Button,{disabled:"pending"===c.savingState,onClick:this.justExit},s.default("直接退出")),i.createElement(l.Button,{disabled:"pending"===c.savingState,level:"primary",onClick:this.saveThenExit},s.default("保存并退出")))),i.createElement(E.default,{enabled:!0,name:"dataModelEditorStep",steps:[{element:".table-list-step",intro:"拖拽数据表"},{element:".custom-table-list-step",intro:"拖拽自定义SQL视图"},{element:".table-join-topology-step",intro:"将数据表或者自定义SQL视图拖入，创建数据模型"}]})))},t.displayName="DataModelEditor",t=a.__decorate([u.DragDropContext(m.default),d.inject(function(e){return{assist:e.assist,database:e.database,company:e.company.info,group:e.group.current,dataModel:e.dataModel.current,dataModelData:e.dataModel.currentData,editor:e.editor,editorType:"dataModel",userList:e.user.all,userAttr:e.userAttr,roleList:e.role.all,customTable:e.customTable}}),p.default,c.default,d.observer],t)}(i.Component);t.default=M});
;sugar.define("sugar:sites/group/manage/slider/slider.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createSchema=void 0;var a=e("sugar:node_modules/tslib/tslib.js"),r=e("sugar:utils/i18n.ts"),l=e("sugar:node_modules/react/index.js"),n=e("sugar:node_modules/react-document-title/index.js"),o=e("sugar:sites/amis-renderer.tsx"),s=e("sugar:utils/url.ts"),i=e("sugar:utils/tree.ts"),d=e("sugar:node_modules/mobx/lib/mobx.js"),u=e("sugar:stores/index.ts"),p=e("sugar:widgets/icon-selector/icon-selector.tsx"),c=e("sugar:widgets/amis-inline-switch.tsx"),m=e("sugar:node_modules/amis/lib/index.js"),h=e("sugar:node_modules/amis/lib/index.js"),f=e("sugar:node_modules/copy-to-clipboard/index.js"),g=e("sugar:widgets/qrcode-dialog.tsx");t.createSchema=function(e,t,n,o){void 0===o&&(o=!1);var s="done"===t.loadState&&t.data.length?t.data.filter(function(e){return 0!==e.authType}).map(function(e){return{label:r.default("【大屏】「"+e.name+"」"),value:"/dashboard/"+e.token}}):[],u="done"===n.loadState&&n.data.length?i.findFlatChildren(d.toJS(n.data),void 0,function(e){return 0!==e.type&&0!==e.authType}).map(function(e){return{label:r.default("【报表】「"+e.name+"」"),value:"/report/"+e.hash+"/"+e.token}}):[],m={title:r.default("添加新的轮播"),body:{type:"form",name:"sugar-slider-new",className:"slider-manage",mode:"normal",api:"/api/manage/group/"+e+"/slider",controls:[{name:"name",label:r.default("名称"),type:"text",required:!0,validations:"maxLength:30"},{type:"divider"},{name:"remark",label:r.default("简介"),type:"text",validations:"maxLength:1024"},{type:"divider"},{name:"icon",label:r.default("图标"),children:function(e){var t=e.onChange,n=e.value;return l.createElement(p.default,a.__assign({},{onChange:t,value:n},{containerClassName:"form-item",label:r.default("图标（再次点击取消选中，可不选）"),height:200}))}},{type:"divider"},{type:"combo",name:"urls",label:r.default("将已发布的大屏或报表添加到轮播中或直接输入页面的url添加："),multiple:!0,flat:!0,minLength:1,maxLength:10,draggable:!0,controls:[{type:"text",name:"urls",clearable:!0,options:s.concat(u),required:!0}]},{type:"select",label:r.default("切换效果"),name:"config.effect",value:"slide",options:[{label:"slide",value:"slide"},{label:"fade",value:"fade"},{label:"coverflow",value:"coverflow"}],required:!0},{type:"number",name:"config.delay",value:10,label:r.default("每页停留时间（秒）"),min:1,step:1,required:!0},{type:"select",label:r.default("播放控制位置"),name:"config.control",value:"right",options:[{label:r.default("屏幕左下"),value:"left"},{label:r.default("屏幕右下"),value:"right"}],required:!0}]},actions:[{type:"button",actionType:"cancel",label:r.default("取消")},{type:"submit",primary:!0,label:r.default("添加")}]};return o&&m.body.controls.push(c.amisInlineSwitch("needRefreshToken",r.default("是否更新轮播发布链接"))),m};var b=function(e,a,l){return{title:r.default("编辑轮播「 `$name`」"),size:"md",body:{api:"put:/api/manage/group/"+e+"/slider/$hash",name:"sugar-slider-edit",type:"form",mode:"normal",controls:[{name:"hash",type:"hidden"}].concat(t.createSchema(e,a,l,!0).body.controls)}}},y=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(i,e),i.prototype.render=function(){return l.createElement(n,{title:r.default("轮播管理")},l.createElement(o.default,{schema:{name:"sugar-slider-manage",title:r.default("轮播管理"),className:"slider-manage",toolbar:[{type:"button",label:r.default("添加新的轮播"),actionType:"dialog",level:"primary",className:"m-r-xs",dialog:t.createSchema(this.props.group.current.data.hash,this.props.dashboardList,this.props.reportList)}],actionsClassName:"m-t-md",body:{type:"crud",name:"sugar-slider-manage-table",syncLocation:!1,footable:{expand:"none"},api:"/api/manage/group/"+this.props.group.current.data.hash+"/slider",title:r.default("轮播列表"),switchPerPage:!1,placeholder:r.default("暂时没有轮播，请添加"),draggable:!0,saveOrderApi:{method:"put",url:"/api/manage/group/"+this.props.group.current.data.hash+"/slider/updateOrder"},bulkActions:[{label:r.default("批量删除"),actionType:"ajax",confirmText:r.default("您确定要移除所选轮播?"),level:"danger",api:"put:/api/manage/group/"+this.props.group.current.data.hash+"/slider/multiDelete"}],columns:[{type:"tpl",name:"name",label:r.default("轮播"),innerClassName:"inline min120Width",tpl:'\n                  <span class="m-b-xs">\n                    <% if (data.icon)  { %>\n                      <i class="<%- data.icon %>"></i>\n                    <% } else { %>\n                      <i class="fa fa-desktop"></i>\n                    <% } %>\n                    <%- data.name %>\n                  </span>\n                '},{type:"text",innerClassName:"text-ellipsis",width:120,name:"remark",label:r.default("备注"),breakpoint:"xs"},{type:"sugar-slider-link",name:"token",label:r.default("发布链接（点击可打开链接）")},{type:"operation",width:270,label:r.default("操作"),breakpoint:"xs",buttons:[{actionType:"url",url:s.shareSourceHost+"/slider/<%- data.token %>",label:r.default("查看轮播页面"),type:"button"},{actionType:"dialog",dialog:b(this.props.group.current.data.hash,this.props.dashboardList,this.props.reportList),label:r.default("编辑轮播配置"),type:"button"},{confirmText:r.default("您确定要移除该轮播?"),actionType:"ajax",api:"delete:/api/manage/group/"+this.props.group.current.data.hash+"/slider/$hash",reload:"sugar-slider-manage-table",label:r.default("删除"),type:"button"}]}]}}}))},i.displayName="SliderManage",i=a.__decorate([u.inject(function(e){return{group:e.group,dashboardList:e.dashboard.list,reportList:e.report.tree}}),u.observer],i)}(l.Component);t.default=y;!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.componentWillMount=function(){this.copyUrl=this.copyUrl.bind(this),this.showQrCode=this.showQrCode.bind(this),this.closeQrCode=this.closeQrCode.bind(this),this.setState({showQr:!1,qrUrl:"",qrName:""})},t.prototype.copyUrl=function(e){f(e)?h.toast.success(r.default("链接已复制")):h.toast.error(r.default("无法复制，请点击文字打开链接后手动复制"))},t.prototype.showQrCode=function(e,t){this.setState({showQr:!0,qrUrl:e,qrName:t})},t.prototype.closeQrCode=function(){this.setState({showQr:!1,qrUrl:"",qrName:""})},t.prototype.render=function(){var e=this,t=this.props.data,a=t.token,n=t.name,o=this.state,i=o.showQr,d=o.qrUrl,u=o.qrName,p=s.shareSourceHost+"/slider/"+a,c=l.createElement("a",{className:"text-info link-decoration",target:"_blank",href:p,key:"url"},r.default("轮播链接"));return[c,l.createElement(h.Button,{level:"link",size:"sm",tooltip:r.default("复制分享链接"),placement:"bottom",id:"copy",key:"copy",onClick:function(){return e.copyUrl(p)},style:{paddingRight:0}},l.createElement("i",{className:"fa fa-clipboard"})),l.createElement(h.Button,{level:"link",size:"sm",tooltip:r.default("二维码"),placement:"bottom",id:"qrcode",key:"qrcode",onClick:function(){return e.showQrCode(p,n)},style:{paddingRight:0}},l.createElement("i",{className:"fa fa-qrcode"})),i?l.createElement(g.default,{key:"qrCode",name:u,qrUrl:d,onClose:this.closeQrCode}):null]},t=a.__decorate([m.Renderer({test:/(^|\/)sugar-slider-link$/})],t)}(l.Component)});
;sugar.define("sugar:sites/group/report-preview/report-preview.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=e("sugar:node_modules/tslib/tslib.js"),o=e("sugar:utils/i18n.ts"),a=e("sugar:node_modules/react/index.js"),s=e("sugar:node_modules/react-document-title/index.js"),n=e("sugar:stores/index.ts"),i=e("sugar:node_modules/amis/lib/index.js"),p=e("sugar:widgets/report-body/report-content.tsx"),u=e("sugar:widgets/report-body/iframe.tsx"),d=e("sugar:widgets/multi-device-preview/multi-device-preview.tsx"),c=e("sugar:utils/common-helper.ts"),l=function(e){function t(t){var r=e.call(this,t)||this;return r.setMode=r.setMode.bind(r),r.state={mode:"pc"},r}return r.__extends(t,e),t.prototype.componentWillMount=function(){this.props.report.load(this.props.group.data.hash,this.props.routeParams.report),this.props.assist.setCurrentPageType("report")},t.prototype.componentWillReceiveProps=function(e){var t=this.props;e.routeParams.report!==t.routeParams.report&&this.props.report.load(this.props.group.data.hash,e.routeParams.report)},t.prototype.componentWillUnmount=function(){this.props.assist.setCurrentPageType(""),this.props.chart.hubMap.clearChartHub(),this.props.condition.hubMap.clearConditionHub()},t.prototype.setMode=function(e){this.setState({mode:e})},t.prototype.render=function(){var e=this.props,t=e.routeParams,r=e.location,n=e.report,l=e.chart,m=e.group,h=e.condition;return"pending"===n.loadState||"done"===n.loadState&&!n.data.hash?a.createElement(i.Spinner,{overlay:!0,size:"lg"}):"error"===n.loadState?"AuthorizeError"===n.loadError.type?a.createElement("h3",{className:"text--center text-danger"},o.default("无权查看该报表页面")):a.createElement("h3",{className:"text--center text-danger"},n.loadError.message||o.default("请求错误")):a.createElement(s,{title:o.default("「"+n.data.name+"」-预览"),key:"content"},a.createElement(d.default,{groupKey:m.data.key,type:"report",hash:t.report,needSwitchDevice:!(!r.query||"0"===r.query.needSwitchDevice),hideReturnButton:!(!r.query||"1"!==r.query.hideReturnButton)},2===n.data.type?a.createElement("div",{className:"report-share-container"},a.createElement(u.default,{src:n.data.url})):a.createElement("div",{className:c.isMobile?"wrapper-xxs":"wrapper-sm",style:{paddingBottom:0}},a.createElement(p.default,{mode:"normal",chartStore:l,conditionStore:h,report:n}))))},t.displayName="ReportPreview",t=r.__decorate([n.inject(function(e){return{assist:e.assist,company:e.company.info,user:e.user.current,group:e.group.current,report:e.report.current,chart:e.chart,condition:e.condition}}),n.observer,r.__metadata("design:paramtypes",[Object])],t)}(a.Component);t.default=l});
;sugar.define("sugar:sites/group/manage/export/report-dash-upload.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});{var a=e("sugar:node_modules/tslib/tslib.js"),n=e("sugar:utils/i18n.ts"),r=e("sugar:node_modules/react/index.js"),s=e("sugar:node_modules/amis/lib/index.js");!function(e){function t(t){var a=e.call(this,t)||this;return a.state={isParsing:!1,errMessage:"",importData:""},a.onUpload=a.onUpload.bind(a),a.onChangeAmis=a.onChangeAmis.bind(a),a}return a.__extends(t,e),t.prototype.finishParsing=function(e){this.setState({isParsing:!1});var t=this.props.onChange;try{JSON.parse(e),this.setState({importData:e})}catch(a){this.setState({errMessage:n.default("文件解析错误「"+a+"」")})}t({importData:e})},t.prototype.onChangeAmis=function(e){this.props.onChange(a.__assign({importData:this.state.importData},e))},t.prototype.onUpload=function(e){var t=this;this.setState({isParsing:!0});var r=e.target.files;if(!r||0===r.length)return void console.log(n.default("files 为空"));var s=r[0];if(s.size>31457280)return void this.setState({isParsing:!1,errMessage:n.default("文件需要小于 30M")});var i=new FileReader;i.readAsText(s),i.onload=function(){return a.__awaiter(t,void 0,void 0,function(){return a.__generator(this,function(){return i.result&&this.finishParsing(i.result),[2]})})}},t.prototype.getAmisControl=function(){var e=this.props,t=e.render,a=e.config,s=e.value,i=this.state,o=i.isParsing,l=i.errMessage,d=i.importData;if(o)return r.createElement("div",null,n.default("正在解析文件，请稍后"));if(l)return r.createElement("div",null,l);if(d){if(!a.dataBaseList.data||"pending"===a.dataBaseList.loadState)return r.createElement("div",null,n.default("数据源列表加载中"));var u=[{name:"isCover",type:"radios",label:n.default("2、请选择导入模式"),value:!1,options:[{label:n.default("覆盖（覆盖更新上次导入的相同资源，不可逆）"),value:!0},{label:n.default("新增"),value:!1}]}],p=JSON.parse(d).databases;if(p&&p.length){u.push({type:"tpl",label:" ",innerClassName:"inline",tpl:"\n            <p>"+n.default("3、请选择导入内容使用的数据源在本空间中对应的新数据源")+"</p>\n          "});for(var h=a.dataBaseList.data.map(function(e){return{label:e.name,value:e.hash}}),g=0,m=p;g<m.length;g++){var f=m[g];u.push({type:"select",name:"databaseMap."+f.hash,label:f.name,clearable:!0,options:h})}}return t("inner",{type:"form",mode:"normal",wrapWithPanel:!1,controls:u},{data:s,onChange:this.onChangeAmis,lazyFormChange:!1,lazyChange:!1})}},t.prototype.render=function(){var e={padding:"5px 20px",border:".125rem dashed #cfdadd",cursor:"pointer"};return r.createElement("div",null,r.createElement("label",null,n.default("1、请选择导入文件")),r.createElement("input",{type:"file",style:e,id:"report-dash-upload",name:"report-dash-upload",accept:".sugar",onChange:this.onUpload}),r.createElement("p",null," "),this.getAmisControl())},t=a.__decorate([s.FormItem({type:"report-dash-upload"}),a.__metadata("design:paramtypes",[Object])],t)}(r.Component)}});
;sugar.define("sugar:sites/group/manage/export/export-setting.tsx",function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=t("sugar:node_modules/tslib/tslib.js"),r=t("sugar:utils/i18n.ts"),o=t("sugar:node_modules/react/index.js"),i=t("sugar:node_modules/react-document-title/index.js"),p=t("sugar:stores/index.ts");t("sugar:sites/group/manage/export/report-dash-upload.tsx");var n=t("sugar:sites/amis-renderer.tsx"),s=t("sugar:widgets/product-type/product-type-modal.tsx"),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a.__extends(e,t),e.prototype.componentDidMount=function(){this.props.dataBaseList.loadData()},e.prototype.render=function(){var t,e=window.sugarConfig.nowProductConfig;return t=e&&!e.import?{type:"button",className:"pull-right",primary:!0,label:r.default("导入"),actionType:"copy",onClick:function(){return s.showUpdate("product-type-import")}}:{type:"button",primary:!0,label:r.default("导入"),actionType:"dialog",dialog:{title:r.default("导入"),size:"xl",actions:[{type:"button",actionType:"cancel",label:r.default("取消")},{type:"submit",label:r.default("导入"),level:"primary"}],body:{type:"form",name:"import-report-dash",api:"/api/manage/group/"+this.props.group.current.data.hash+"/importReportAndDash",onValidate:function(t){if(void 0===t.importData.isCover)return{importData:r.default("请选择导入模式")};var e=JSON.parse(t.importData.importData),a=e.databases;if(a&&a.length)for(var o=t.importData.databaseMap||{},i=0,p=a;i<p.length;i++){var n=p[i];if(!o[n.hash])return{importData:r.default("请选择「"+n.name+"」对应的新数据源")}}return void 0},controls:[{name:"importData",mode:"normal",required:!0,type:"report-dash-upload",config:{dataBaseList:this.props.dataBaseList}}]}}},o.createElement(i,{title:r.default("导入导出")},o.createElement(n.default,{update:function(){return window.location.reload()},schema:{title:r.default("导入导出"),toolbar:{type:"button-toolbar",buttons:[{type:"html",html:'<a class="text-info" style="display: block;\n                    margin-right: 20px;\n                    margin-top: 8px;" href="/docs/GettingStarted-Page-Import" target="_blank">'+r.default("导入导出文档")+"</a>"},t]},body:{actions:[{type:"button",actionType:"ajax",api:"/api/manage/group/"+this.props.group.current.data.hash+"/exportReportAndDash",data:{data:"data"},label:r.default("导出"),level:"info"}],type:"form",mode:"normal",title:r.default("导出"),controls:[{label:r.default("请选择要导出的大屏"),placeholder:r.default("该空间还没有创建大屏"),withChildren:!0,hideRoot:!0,type:"tree",name:"dashboards",multiple:!0,source:"/api/manage/group/"+this.props.group.current.data.hash+"/dashboardExport"},{label:r.default("请选择要导出的报表"),placeholder:r.default("该空间还没有创建报表"),withChildren:!0,hideRoot:!0,type:"tree",name:"reports",multiple:!0,source:"/api/manage/group/"+this.props.group.current.data.hash+"/reportExport"}]}}}))},e.displayName="ExportSetting",e=a.__decorate([p.inject(function(t){return{group:t.group,dataBaseList:t.database.simpleList}}),p.observer],e)}(o.Component);e.default=l});
;sugar.define("sugar:sites/group/scene-edit/scene-editor-toolbar.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=e("sugar:node_modules/tslib/tslib.js"),n=e("sugar:utils/i18n.ts"),s=e("sugar:node_modules/react/index.js"),i=e("sugar:node_modules/classnames/index.js"),l=e("sugar:node_modules/amis/lib/index.js"),c=e("sugar:stores/index.ts"),o=e("sugar:stores/scene.ts"),d=e("sugar:widgets/feedback.tsx"),r=function(e){function t(t){var a=e.call(this,t)||this;return a.undo=a.undo.bind(a),a.redo=a.redo.bind(a),a.addBoxMesh=a.addBoxMesh.bind(a),a.addSphereMesh=a.addSphereMesh.bind(a),a.addPlaneMesh=a.addPlaneMesh.bind(a),a.addGroundMesh=a.addGroundMesh.bind(a),a.addGLTFMesh=a.addGLTFMesh.bind(a),a.addMapMesh=a.addMapMesh.bind(a),a.addPointLight=a.addPointLight.bind(a),a.addDirectionalLight=a.addDirectionalLight.bind(a),a.addSpotLight=a.addSpotLight.bind(a),a.addHemisphericLight=a.addHemisphericLight.bind(a),a.addFloatParticle=a.addFloatParticle.bind(a),a.addUpLineParticle=a.addUpLineParticle.bind(a),a.getOut=a.getOut.bind(a),a.selectScene=a.selectScene.bind(a),a.handleSave=a.handleSave.bind(a),a.addPin=a.addPin.bind(a),a.handlePreview=a.handlePreview.bind(a),a.saveThenExit=a.saveThenExit.bind(a),a.justExit=a.justExit.bind(a),a.handleCancelExit=a.handleCancelExit.bind(a),a}return a.__extends(t,e),t.prototype.componentWillMount=function(){this.setState({openExitDialog:!1})},t.prototype.handleSave=function(){this.props.scene.hasModified&&"pending"!==this.props.scene.savingState&&this.currentScene.save(this.props.group.data.hash,this.props.routeParams.scene)},t.prototype.saveThenExit=function(){var e=this;this.props.scene.hasModified&&"pending"!==this.props.scene.savingState&&this.props.scene.save(this.props.group.data.hash,this.props.routeParams.scene,"scene").then(function(t){"done"===t.state&&e.justExit()})},t.prototype.handleCancelExit=function(){this.setState({openExitDialog:!1})},t.prototype.getOut=function(){var e=this.props;e.scene.hasModified?this.setState({openExitDialog:!0}):this.justExit()},t.prototype.justExit=function(){var e=this.props;e.scene.setModified(!1),e.router.push("/group/"+e.group.data.key+"/scene/"+e.routeParams.scene)},t.prototype.checkLightNumber=function(){this.sceneStore.lights.length>=4&&l.toast.warning(n.default("场景中最多同时开启 4 个光源，新添加的将不会生效"))},t.prototype.addPointLight=function(){this.checkLightNumber(),this.sceneStore.addPointLight()},t.prototype.addDirectionalLight=function(){this.checkLightNumber(),this.sceneStore.addDirectionalLight()},t.prototype.addSpotLight=function(){this.checkLightNumber(),this.sceneStore.addSpotLight()},t.prototype.addHemisphericLight=function(){this.checkLightNumber(),this.sceneStore.addHemisphericLight()},t.prototype.addFloatParticle=function(){this.sceneStore.addFloatParticle()},t.prototype.addUpLineParticle=function(){this.sceneStore.addUpLineParticle()},t.prototype.addGLTFMesh=function(){this.sceneStore.addGLTFMesh({name:n.default("自定义模型"),sourceType:"builtIn",builtInModelURL:o.BuiltInModels[0].value})},t.prototype.addBasicMesh=function(){this.sceneStore.addBasicMesh(o.BasicMeshType.Box)},t.prototype.addBoxMesh=function(){this.sceneStore.addBasicMesh(o.BasicMeshType.Box)},t.prototype.addSphereMesh=function(){this.sceneStore.addBasicMesh(o.BasicMeshType.Sphere)},t.prototype.addPlaneMesh=function(){this.sceneStore.addBasicMesh(o.BasicMeshType.Plane)},t.prototype.addGroundMesh=function(){this.sceneStore.addBasicMesh(o.BasicMeshType.Ground)},t.prototype.addMapMesh=function(){this.sceneStore.addMapMesh(121.493158,31.239929,1)},t.prototype.addPin=function(){l.toast.info(n.default("双击模型中的具体位置来添加标注"))},t.prototype.handlePreview=function(){return a.__awaiter(this,void 0,void 0,function(){var e;return a.__generator(this,function(t){switch(t.label){case 0:return e=this.currentScene,e.hasModified&&"pending"!==e.savingState?[4,e.save(this.props.group.data.hash,this.props.routeParams.scene)]:[3,2];case 1:t.sent(),t.label=2;case 2:return window.open("/group/"+this.props.group.data.key+"/preview/scene/"+this.props.routeParams.scene),[2]}})})},t.prototype.undo=function(){c.undoManager.canUndo&&(this.sceneEditor.selectScene(),c.undoManager.undo())},t.prototype.redo=function(){c.undoManager.canRedo&&c.undoManager.redo()},t.prototype.selectScene=function(){this.sceneEditor.selectScene()},t.prototype.render=function(){this.currentScene=this.props.scene,this.sceneStore=this.props.scene.scene,this.sceneEditor=this.props.scene.editor;var e=(this.sceneEditor.playMode,this.sceneEditor.selectedType===o.SelectType.Scene);return s.createElement("header",{className:"box-shadow bg-dark"},s.createElement("div",{className:"navbar-header"},s.createElement("div",{className:"navbar-brand text-lt"},s.createElement("span",{className:"m-l"},this.currentScene.model.name))),s.createElement("div",{className:"editor-toolbar hidden-xs"},s.createElement("div",{className:"editor-toolbar__left"},s.createElement("ul",{className:"btns-box"},s.createElement("li",{className:i("btn-item",{"btn-item__disabled":!c.undoManager.canUndo}),onClick:this.undo},s.createElement("div",{className:"btn-container"},s.createElement("i",{className:"fa fa-undo"}),s.createElement("span",{className:"btn-text"},n.default("撤销")))),s.createElement("li",{className:i("btn-item",{"btn-item__disabled":!c.undoManager.canRedo}),onClick:this.redo},s.createElement("div",{className:"btn-container"},s.createElement("i",{className:"fa fa-repeat"}),s.createElement("span",{className:"btn-text"},n.default("重做"))))),s.createElement("div",{className:"cut-line"})),s.createElement("div",{className:"editor-toolbar__center"},s.createElement("ul",{className:"btns-box add-mesh"},s.createElement("li",{key:"addMesh",className:"btn-item",style:{cursor:"default"}},s.createElement("div",{className:"btn-container"},s.createElement("i",{className:"fa fa-plus"}),s.createElement("span",{className:"btn-text"},n.default("添加物体"))),s.createElement("div",{className:"btn-item__list",id:"add-mesh-list"},s.createElement("div",{className:"list-container"},s.createElement("ul",{className:"tool-list clearfix"},s.createElement("li",{key:"box",onClick:this.addBoxMesh},s.createElement("span",{className:"tool-item"},s.createElement("div",{className:"tool-item__icon scene-box"}),s.createElement("div",{className:"tool-item__name"},n.default("立方体")))),s.createElement("li",{key:"sphere",onClick:this.addSphereMesh},s.createElement("span",{className:"tool-item"},s.createElement("div",{className:"tool-item__icon scene-sphere"}),s.createElement("div",{className:"tool-item__name"},n.default("球体")))),s.createElement("li",{key:"plane",onClick:this.addPlaneMesh},s.createElement("span",{className:"tool-item"},s.createElement("div",{className:"tool-item__icon scene-plane"}),s.createElement("div",{className:"tool-item__name"},n.default("平面")))),s.createElement("li",{key:"ground",onClick:this.addGroundMesh},s.createElement("span",{className:"tool-item"},s.createElement("div",{className:"tool-item__icon scene-ground"}),s.createElement("div",{className:"tool-item__name"},n.default("地面")))),s.createElement("li",{key:"gltf",onClick:this.addGLTFMesh},s.createElement("span",{className:"tool-item"},s.createElement("div",{className:"tool-item__icon scene-gltf"}),s.createElement("div",{className:"tool-item__name"},n.default("三维模型"))))))))),s.createElement("ul",{className:"btns-box add-light"},s.createElement("li",{key:"addLight",className:"btn-item",style:{cursor:"default"}},s.createElement("div",{className:"btn-container"},s.createElement("i",{className:"fa fa-plus"}),s.createElement("span",{className:"btn-text"},n.default("添加光源"))),s.createElement("div",{className:"btn-item__list",id:"add-light-list"},s.createElement("div",{className:"list-container"},s.createElement("ul",{className:"tool-list clearfix"},s.createElement("li",{key:"point",onClick:this.addPointLight},s.createElement("span",{className:"tool-item"},s.createElement("div",{className:"tool-item__icon scene-point-light"}),s.createElement("div",{className:"tool-item__name"},n.default("点光源")))),s.createElement("li",{key:"directional",onClick:this.addDirectionalLight},s.createElement("span",{className:"tool-item"},s.createElement("div",{className:"tool-item__icon scene-directional-light"}),s.createElement("div",{className:"tool-item__name"},n.default("平行光")))),s.createElement("li",{key:"hemispheric",onClick:this.addHemisphericLight},s.createElement("span",{className:"tool-item"},s.createElement("div",{className:"tool-item__icon scene-hemispheric-light"}),s.createElement("div",{className:"tool-item__name"},n.default("半球光")))),s.createElement("li",{key:"spot",onClick:this.addSpotLight},s.createElement("span",{className:"tool-item"},s.createElement("div",{className:"tool-item__icon scene-spot-light"}),s.createElement("div",{className:"tool-item__name"},n.default("聚光灯"))))))))),s.createElement("ul",{className:"btns-box add-pin"},s.createElement("li",{key:"addPin",className:"btn-item",style:{cursor:"default"},onClick:this.addPin},s.createElement("div",{className:"btn-container"},s.createElement("i",{className:"fa fa-plus"}),s.createElement("span",{className:"btn-text"},n.default("添加标注"))))),s.createElement("ul",{className:"btns-box add-particle"},s.createElement("li",{key:"addParticle",className:"btn-item",style:{cursor:"default"}},s.createElement("div",{className:"btn-container"},s.createElement("i",{className:"fa fa-plus"}),s.createElement("span",{className:"btn-text"},n.default("添加粒子特效"))),s.createElement("div",{className:"btn-item__list",id:"add-particle-list"},s.createElement("div",{className:"list-container"},s.createElement("ul",{className:"tool-list clearfix"},s.createElement("li",{key:"float",onClick:this.addFloatParticle},s.createElement("span",{className:"tool-item"},s.createElement("div",{className:"tool-item__icon scene-float-circle"}),s.createElement("div",{className:"tool-item__name"},n.default("悬浮颗粒")))),s.createElement("li",{key:"upLine",onClick:this.addUpLineParticle},s.createElement("span",{className:"tool-item"},s.createElement("div",{className:"tool-item__icon scene-up-line"}),s.createElement("div",{className:"tool-item__name"},n.default("上升线条")))))))))),s.createElement("div",{className:"editor-toolbar__right"},s.createElement("ul",{className:"btns-box"},s.createElement("li",{key:"scene",className:i("btn-item",{"btn-item__enabled":e})},s.createElement("div",{className:"btn-container",onClick:this.selectScene},s.createElement("i",{className:"fa fa-cog"}),s.createElement("span",{className:"btn-text"},n.default("场景设置")))),s.createElement("li",{key:"help",className:"btn-item"},s.createElement("a",{href:"/docs/QuickGuide-Scene-Summary",target:"_blank"},s.createElement("div",{className:"btn-container"},s.createElement("i",{className:"fa fa-question"}),s.createElement("span",{className:"btn-text"},n.default("帮助文档"))))),s.createElement(d.default,{inEditor:!0})),s.createElement("div",{className:"cut-line"}),s.createElement("ul",{className:"btns-box"},s.createElement("li",{className:"btn-item",onClick:this.handlePreview},s.createElement("div",{className:"btn-container",title:n.default("预览模式将使用默认相机，请修改默认相机的属性")},s.createElement("i",{className:"fa fa-expand"}),s.createElement("span",{className:"btn-text"},""+(this.currentScene.hasModified?n.default("保存并"):""),n.default("预览")))),s.createElement("li",{className:i("btn-item",{"btn-item__disabled":!this.currentScene.hasModified||"pending"===this.currentScene.savingState}),onClick:this.handleSave},s.createElement("div",{className:"btn-container"},s.createElement("i",{className:"fa fa-floppy-o"}),s.createElement("span",{className:"btn-text"},n.default("保存")))),s.createElement("li",{className:"btn-item",onClick:this.getOut},s.createElement("div",{className:"btn-container"},s.createElement("i",{className:"fa fa-times"}),s.createElement("span",{className:"btn-text"},n.default("退出")))),s.createElement(l.Modal,{show:this.state.openExitDialog},s.createElement(l.Modal.Header,{onClose:this.handleCancelExit},s.createElement(l.Modal.Title,null,n.default("退出"))),s.createElement(l.Modal.Body,null,n.default("您的修改未保存！！！『直接退出』将不会保存您所做的修改。")),s.createElement(l.Modal.Footer,null,s.createElement(l.Button,{disabled:"pending"===this.currentScene.savingState,onClick:this.handleCancelExit},n.default("取消")),s.createElement(l.Button,{disabled:"pending"===this.currentScene.savingState,onClick:this.justExit},n.default("直接退出")),s.createElement(l.Button,{disabled:"pending"===this.currentScene.savingState,level:"primary",onClick:this.saveThenExit},n.default("保存并退出"))))))))},t.displayName="SceneEditorToolbar",t=a.__decorate([c.observer,a.__metadata("design:paramtypes",[Object])],t)}(s.Component);t.default=r});
;sugar.define("sugar:sites/group/scene-edit/scene-outline-item.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=e("sugar:node_modules/tslib/tslib.js"),n=e("sugar:utils/i18n.ts"),i=e("sugar:node_modules/react/index.js"),o=e("sugar:node_modules/mobx-state-tree/dist/mobx-state-tree.js"),a=e("sugar:node_modules/classnames/index.js"),c=e("sugar:stores/index.ts"),d=e("sugar:widgets/confirm.tsx"),r=e("sugar:widgets/pop-menu/pop-menu.tsx"),l=function(e){function t(t){var s=e.call(this,t)||this;return s.scene=s.props.scene,s.sceneEditor=s.props.editor,s.setSelectedNode=s.setSelectedNode.bind(s),s.showContextMenu=s.showContextMenu.bind(s),s.deleteSelectedNode=s.deleteSelectedNode.bind(s),s.lockMesh=s.lockMesh.bind(s),s.unLockMesh=s.unLockMesh.bind(s),s}return s.__extends(t,e),t.prototype.setSelectedNode=function(e){var t=o.getType(e).name;switch(t){case"BasicMesh":case"GLTFMesh":case"MapMesh":this.sceneEditor.selectMesh(e.id);break;case"PointLight":case"DirectionalLight":case"SpotLight":case"HemisphericLight":this.sceneEditor.selectLight(e.id);break;case"ArcRotateCamera":this.sceneEditor.selectCamera(e.id);break;case"Particle":this.sceneEditor.selectParticle(e.id);break;case"Pin":this.sceneEditor.selectPin(e.id)}},t.prototype.focusOnNode=function(e){this.setSelectedNode(e);var t=o.getType(e).name;switch(t){case"BasicMesh":case"GLTFMesh":case"MapMesh":this.sceneEditor.setLookAt(e.id)}},t.prototype.deleteSelectedNode=function(){var e=this;d.confirm(n.default("确定要删除选中的节点")).then(function(){e.sceneEditor.deleteSelectedNode()}).catch(function(){})},t.prototype.enableMesh=function(e){e.update({isEnabled:!0},{isEnabled:!0})},t.prototype.disableMesh=function(e){e.update({isEnabled:!1},{isEnabled:!1})},t.prototype.lockMesh=function(e){e.update({isPickable:!1},{isPickable:!1})},t.prototype.unLockMesh=function(e){e.update({isPickable:!0},{isPickable:!0})},t.prototype.showContextMenu=function(e,t){var s=this;this.setSelectedNode(t);var i=o.getType(t).name,a=!1,c=!1,d=!1,l=!1;i.endsWith("Mesh")&&(a=!0),i.endsWith("Light")&&(d=!0),"Particle"===i&&(c=!0),"Pin"===i&&(l=!0);var u=r.popMenu.getPopMenuTree();if(u){if(a){var h=t;u.push(h.isPickable?{icon:"fa fa-lock",name:n.default("锁定"),cb:function(){return s.lockMesh(h)}}:{icon:"fa fa-unlock",name:n.default("解锁"),cb:function(){return s.unLockMesh(h)}}),u.push(h.isEnabled?{icon:"fa fa-eye-slash",name:n.default("隐藏"),cb:function(){return s.disableMesh(h)}}:{icon:"fa fa-eye",name:n.default("展现"),cb:function(){return s.enableMesh(h)}})}(a||d||c||l)&&(d&&"default-light"===this.sceneEditor.selectedId||u.push({icon:"fa fa-trash",name:n.default("删除"),shortCut:"Del",cb:function(){return s.deleteSelectedNode(t)}})),r.popMenu.setPopMenuTree(u),r.popMenu.show(e.clientX,e.clientY)}},t.prototype.render=function(){var e=this,t=this.props.node,s=this.sceneEditor.selectedId===t.id,n=o.getType(t).name,c=!1,d=!1;if(n.endsWith("Mesh")){var r=t;r.isPickable||(c=!0),r.isEnabled||(d=!0)}return i.createElement("li",{className:a("scene-outline-item",{isCurrent:s}),onClick:function(){e.setSelectedNode(t)},onDoubleClick:function(s){e.focusOnNode(t),s.preventDefault()},onContextMenu:function(s){e.showContextMenu(s,t),s.preventDefault()}},c?i.createElement("i",{className:"fa fa-lock m-r-xs"}):null,d?i.createElement("i",{className:"fa fa-eye-slash m-r-xs"}):null,t.name)},t.displayName="SceneOutlineItem",t=s.__decorate([c.observer,s.__metadata("design:paramtypes",[Object])],t)}(i.Component);t.default=l});
;sugar.define("sugar:sites/group/scene-edit/scene-outline.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=e("sugar:node_modules/tslib/tslib.js"),s=e("sugar:utils/i18n.ts"),l=e("sugar:node_modules/react/index.js"),a=e("sugar:stores/index.ts"),c=e("sugar:sites/group/scene-edit/scene-outline-item.tsx"),r=function(e){function t(t){var n=e.call(this,t)||this;return n.sceneStore=n.props.scene,n}return n.__extends(t,e),t.prototype.render=function(){var e=this.props,t=e.scene,n=e.editor,a=t.meshes.map(function(e){return l.createElement(c.default,{key:e.id,scene:t,node:e,editor:n})}),r=t.lights.map(function(e){return l.createElement(c.default,{key:e.id,scene:t,node:e,editor:n})}),u=t.cameras.map(function(e){return l.createElement(c.default,{key:e.id,scene:t,node:e,editor:n})}),i=t.particles.map(function(e){return l.createElement(c.default,{key:e.id,scene:t,node:e,editor:n})}),o=t.pins.map(function(e){return l.createElement(c.default,{key:e.id,scene:t,node:e,editor:n})});return l.createElement("div",{className:"scene-outline-body"},a.length>0?l.createElement("h3",{className:"scene-outline-type"},s.default("物体")):null,l.createElement("ul",{className:"scene-outline-list"},a),r.length>0?l.createElement("h3",{className:"scene-outline-type"},s.default("光源")):null,l.createElement("ul",{className:"scene-outline-list"},r),l.createElement("h3",{className:"scene-outline-type"},s.default("相机")),l.createElement("ul",{className:"scene-outline-list"},u),o.length>0?l.createElement("h3",{className:"scene-outline-type"},s.default("标注")):null,l.createElement("ul",{className:"scene-outline-list"},o),i.length>0?l.createElement("h3",{className:"scene-outline-type"},s.default("粒子特效")):null,l.createElement("ul",{className:"scene-outline-list"},i))},t.displayName="SceneOutline",t=n.__decorate([a.observer,n.__metadata("design:paramtypes",[Object])],t)}(l.Component);t.default=r});
;sugar.define("sugar:sites/group/scene-edit/amis-control/common.ts",function(e,t){"use strict";function a(e,t){return{type:"group",direction:"vertical",label:t,controls:[{className:"m-b-xs",type:"number",name:e+".x",label:"x",mode:"horizontal",horizontal:{leftFixed:"xs"},step:.1,resetValue:0},{className:"m-b-xs",type:"number",name:e+".y",label:"y",mode:"horizontal",horizontal:{leftFixed:"xs"},step:.1,resetValue:0},{className:"m-b-xs",type:"number",name:e+".z",label:"z",mode:"horizontal",horizontal:{leftFixed:"xs"},step:.1,resetValue:0}]}}function r(e,t){return{className:"m-b-xs",type:"number",label:t,name:e,max:2*Math.PI,mode:"horizontal",horizontal:{leftFixed:"xs"},min:0,step:.1,resetValue:0}}function o(){var e=[];return e.push(a("transform.position",n.default("位置"))),e.push(a("transform.rotation",n.default("旋转"))),e.push(a("transform.scaling",n.default("缩放"))),e}function l(e){return{title:n.default("脚本"),controls:[{name:"enableScript",type:"switch",label:n.default("开启自定义脚本")},{name:"script",type:"editor",label:n.default("自定义脚本"),language:"javascript",visibleOn:"data.enableScript"},{label:n.default("全屏编辑"),type:"button",actionType:"dialog",visibleOn:"data.enableScript",dialog:{title:n.default("自定义脚本"),size:"full",body:{type:"form",target:"inspectorForm",mode:"normal",onSubmit:function(t){var a=t.script;e.update({script:a},{script:a})},controls:[{name:"script",type:"editor",language:"javascript",size:"xxl"}]}}},{type:"tpl",value:'<a href="/docs/Scene-Script" class="text-info" target="_blank">'+n.default("使用说明")+"</a>"}]}}Object.defineProperty(t,"__esModule",{value:!0}),t.scriptControl=t.transformControl=t.radianControl=t.vector3Control=void 0;var n=e("sugar:utils/i18n.ts");t.vector3Control=a,t.radianControl=r,t.transformControl=o,t.scriptControl=l});
;sugar.define("sugar:sites/group/scene-edit/amis-control/camera.tsx",function(e,a){"use strict";function t(e,a,t){var m=[{type:"text",label:l.default("名称"),name:"name"}],u=[],s=o.getType(e).name;switch(s){case"ArcRotateCamera":m=m.concat([{name:"setCamera",children:function(e){e.onChange,e.value;return n.createElement("div",{className:"a-Form-item a-Form-item--normal"},n.createElement(r.Button,{level:"primary",onClick:a.syncEditorCamera},l.default("初始位置与当前编辑器相机一致")))}},{type:"switch",label:l.default("是否自动旋转"),name:"useAutoRotationBehavior"},{type:"number",label:l.default("旋转速度"),name:"idleRotationSpeed",resetValue:2},{type:"static",value:l.default("初始展现相关")},i.radianControl("alpha","alpha"),i.radianControl("beta","beta"),{type:"number",label:l.default("距离"),name:"radius",mode:"horizontal",horizontal:{leftFixed:"xs"},resetValue:10},i.vector3Control("target",l.default("朝向")),{name:"checkCamera",children:function(e){var t=(e.onChange,e.value,e.data);return n.createElement("div",{className:"a-Form-item a-Form-item--normal"},n.createElement(r.Button,{level:"primary",onClick:function(){a.changeEditorCameraValue(t)}},l.default("查看初始位置")))}},{type:"number",label:l.default("缩放最近距离"),name:"lowerRadiusLimit",resetValue:3},{type:"number",label:l.default("缩放最远距离"),name:"upperRadiusLimit",resetValue:30},{type:"switch",label:l.default("是否允许颠倒"),name:"allowUpsideDown"},{type:"number",label:l.default("滚轮精度（越大越慢）"),name:"wheelPrecision",resetValue:150},{type:"number",label:l.default("缩放精度（越大越慢）"),name:"pinchPrecision",resetValue:1500}]),u=[{type:"static",value:l.default("相机移动只在预览的时候生效")},{type:"static",value:l.default("开启自动移动会禁用自动旋转功能")},{type:"switch",label:l.default("开启播放相机多次动画"),name:"animationMode"},{type:"switch",label:l.default("是否循环播放"),visibleOn:"!animationMode",name:"animationLoop"},{type:"select",name:"hideMeshId",label:l.default("动画结束后隐藏物体"),visibleOn:"!animationMode",clearable:!0,options:t},{type:"select",name:"showMeshId",label:l.default("动画结束后显示物体"),visibleOn:"!animationMode",clearable:!0,options:t},{type:"combo",label:l.default("移动序列"),name:"arcRotateCameraAnimations",multiple:!0,multiLine:!0,draggable:!0,addable:!1,controls:[{type:"number",label:l.default("移动时间（秒）"),name:"animationDuration",resetValue:2},{type:"number",label:l.default("移动后停留时间（秒）"),name:"animationStopDuration",resetValue:2},{type:"select",name:"hideMeshId",label:l.default("动画结束后隐藏物体"),visibleOn:"animationMode",clearable:!0,options:t},{type:"select",name:"showMeshId",label:l.default("动画结束后显示物体"),visibleOn:"animationMode",clearable:!0,options:t},i.radianControl("alpha","alpha"),i.radianControl("beta","beta"),{className:"m-b-xs",type:"number",label:l.default("距离"),name:"radius",mode:"horizontal",horizontal:{leftFixed:"xs"},resetValue:30},i.vector3Control("target",l.default("朝向")),{name:"changeCamera",children:function(e){var t=(e.onChange,e.value,e.data);return n.createElement("div",{className:"a-Form-item a-Form-item--normal"},n.createElement(r.Button,{level:"primary",onClick:function(){a.changeEditorCameraValue(t)}},l.default("查看这个位置")))}}]},{name:"addAnimationKey",children:function(e){e.onChange,e.value;return n.createElement("div",{className:"a-Form-item a-Form-item--normal"},n.createElement(r.Button,{level:"primary",onClick:a.addEditorCameraKeyFrame},l.default("添加当前编辑器相机位置")))}}]}var d={type:"tabs",mode:"card",className:"overflow-hidden h-full d-flex flex-col",contentClassName:"flex-1 overflow-y-auto p-relative",tabs:[{title:l.default("基础"),controls:m},{title:l.default("自动移动"),controls:u}]};return d}Object.defineProperty(a,"__esModule",{value:!0}),a.generateCameraSchema=void 0;var l=e("sugar:utils/i18n.ts"),n=e("sugar:node_modules/react/index.js"),r=e("sugar:node_modules/amis/lib/index.js"),o=e("sugar:node_modules/mobx-state-tree/dist/mobx-state-tree.js"),i=e("sugar:sites/group/scene-edit/amis-control/common.ts");a.generateCameraSchema=t});
;sugar.define("sugar:sites/group/scene-edit/amis-control/material.ts",function(e,a){"use strict";function t(e){void 0===e&&(e="");var a=[];return a.push({name:e+"baseColor",type:"color",label:r.default("颜色"),resetValue:"#ffffff"}),a.push({name:e+"metallic",type:"number",min:0,max:1,step:.05,label:r.default("金属度"),resetValue:.5}),a.push({name:e+"roughness",type:"number",min:0,max:1,step:.05,label:r.default("粗糙度"),resetValue:.5}),a.push({type:"image",label:r.default("颜色贴图"),name:e+"albedoTextureURL",maxLength:1,allowInput:!0,maxSize:10485760,reciever:"/api/image/upload"}),a.push({type:"image",label:r.default("法线贴图"),name:e+"normalTextureURL",maxLength:1,allowInput:!0,maxSize:10485760,reciever:"/api/image/upload"}),a.push({type:"image",label:r.default("金属粗糙图贴图"),name:e+"metallicTextureURL",maxLength:1,allowInput:!0,maxSize:10485760,reciever:"/api/image/upload"}),a.push({type:"image",label:r.default("AO 贴图"),name:e+"ambientTextureURL",maxLength:1,allowInput:!0,maxSize:10485760,reciever:"/api/image/upload"}),a.push({type:"image",label:r.default("环境贴图"),name:e+"reflectionTextureURL",maxLength:1,allowInput:!0,maxSize:10485760,reciever:"/api/image/upload"}),a}function l(e){var a=[{type:"text",label:r.default("名称"),name:"name"}],l=u.getType(e).name;"PBRMaterial"===l&&(a=t("material."));var i={type:"tabs",mode:"card",className:"overflow-hidden h-full d-flex flex-col",contentClassName:"flex-1 overflow-y-auto p-relative",tabs:[{title:r.default("基础"),controls:a}]};return i}Object.defineProperty(a,"__esModule",{value:!0}),a.generateMaterialSchema=a.pbrMaterialControl=void 0;var r=e("sugar:utils/i18n.ts"),u=e("sugar:node_modules/mobx-state-tree/dist/mobx-state-tree.js");a.pbrMaterialControl=t,a.generateMaterialSchema=l});
;sugar.define("sugar:sites/group/scene-edit/amis-control/mesh.tsx",function(e,t){"use strict";function a(e){var t=[];return t.push({name:"name",label:r.default("名称"),type:"text"}),t=t.concat(m.transformControl(e.transform)),t.push({name:"isEnabled",type:"switch",label:r.default("是否可见")}),t.push({name:"isPickable",type:"switch",label:r.default("是否可选")}),t.push({name:"id",className:"text-sm",label:r.default("内部ID"),type:"static"}),t}function l(e){var t=a(e),l=[];e.material&&"isPBR"in e.material&&(l=d.pbrMaterialControl("material."));var s=[{type:"tabs",tabs:[{title:r.default("基础"),controls:t},{title:r.default("材质"),controls:l}]}];return s}function s(e){var t=[{type:"group",label:r.default("地图中心位置"),direction:"vertical",controls:[{type:"group",controls:[{type:"number",name:"long",label:r.default("经度"),step:.001,resetValue:0},{type:"number",name:"lat",label:r.default("纬度"),step:.001,resetValue:0}]}]}];t=t.concat(a(e));var l={type:"tabs",tabs:[{title:r.default("基础"),controls:t}]};return l}function n(e,t,l,s){var n=[{type:"select",label:r.default("模型来源"),name:"sourceType",options:[{label:r.default("系统内置"),value:"builtIn"},{label:r.default("上传本地模型"),value:"upload"},{label:r.default("外部 URL"),value:"url"}]},{name:"builtInModelURL",visibleOn:'data.sourceType === "builtIn"',children:function(e){var t=e.onChange,a=e.value;return i.createElement(c.default,o.__assign({},{onChange:t,value:a},{options:u.BuiltInModels,containerClassName:"form-group form-item",label:r.default("请选择模型："),modalTitle:r.default("模型列表"),useKey:!0,height:140,limit:8}))}},{type:"text",label:r.default("自定义模型地址"),name:"customURL",visibleOn:'data.sourceType === "url"'},{name:"uploadURL",visibleOn:'data.sourceType === "upload"',children:function(e){{var a=e.onChange;e.value}return i.createElement("div",{className:"a-Form-item a-Form-item--normal"},i.createElement("label",{className:"btn m-r-xs btn-sm btn-info"},i.createElement("input",{type:"file",name:"upload",className:"invisible",onChange:function(e){t(e,a)},accept:".glb, .GLB, .gltf, .GLTF, .fbx, .FBX, .ifc, .IFC, .stl, .STL"}),r.default("上传模型")),i.createElement("div",null,r.default("saas"===f.deployType?"支持 fbx/gltf/glb/ifc/stl，最大 10M":"支持 fbx/gltf/glb/ifc/stl")))}},{type:"switch",label:r.default("模型动画组是否循环播放"),name:"animationGroupLoop"}];n=n.concat(a(e));var m=l.generateGLTFMaterialsControls(e.id,s),d={type:"tabs",mode:"card",className:"overflow-hidden h-full d-flex flex-col",contentClassName:"flex-1 overflow-y-auto p-relative",tabs:[{title:r.default("基础"),controls:n},{title:r.default("材质"),controls:m}]};return d}Object.defineProperty(t,"__esModule",{value:!0}),t.generateGLTFMeshSchema=t.generateMapMeshSchema=t.generateBasicMeshSchema=t.meshCommonControl=void 0;var o=e("sugar:node_modules/tslib/tslib.js"),r=e("sugar:utils/i18n.ts"),i=e("sugar:node_modules/react/index.js"),u=e("sugar:stores/scene.ts"),c=e("sugar:widgets/image-selector/image-selector.tsx"),m=e("sugar:sites/group/scene-edit/amis-control/common.ts"),d=e("sugar:sites/group/scene-edit/amis-control/material.ts"),f=window.sugarConfig;t.meshCommonControl=a,t.generateBasicMeshSchema=l,t.generateMapMeshSchema=s,t.generateGLTFMeshSchema=n});
;sugar.define("sugar:sites/group/scene-edit/amis-control/scene.tsx",function(e,a){"use strict";function t(e,a,t){var u=[{type:"number",label:i.default("宽度"),name:"width",resetValue:900},{type:"number",label:i.default("高度"),name:"height",resetValue:506},{type:"color",label:i.default("背景色（可透明）"),name:"clearColor",format:"rgba",resetValue:"#3A3F5100"},{type:"switch",label:i.default("是否开启阴影"),name:"enableShadow"},{type:"select",label:i.default("背景类型"),name:"backgroundType",options:[{label:i.default("天空盒子"),value:"skybox"},{label:i.default("渐变色"),value:"gradient"},{label:i.default("全景图"),value:"image"}]},{type:"select",label:i.default("天空盒子图"),name:"buildInSkyBoxURL",options:o.BuiltinSkyBox,visibleOn:'data.backgroundType == "skybox"'},{type:"switch",label:i.default("是否创建天空盒子背景"),name:"createSkybox",visibleOn:'data.backgroundType == "skybox"'},{type:"number",label:i.default("天空盒子影响强度"),step:.1,name:"environmentIntensity",visibleOn:'data.backgroundType == "skybox"',resetValue:1},{type:"number",label:i.default("天空盒子背景模糊度"),name:"skyboxBlur",min:0,max:1,step:.1,visibleOn:'data.createSkybox && data.backgroundType == "skybox"',resetValue:.7},{type:"select",label:i.default("全景图来源"),name:"imageSourceType",visibleOn:'data.backgroundType == "image"',options:[{label:i.default("内置"),value:"builtIn"},{label:i.default("上传本地图片"),value:"upload"}]},{type:"select",label:i.default("内置背景图"),name:"builtInImageURL",options:o.BuiltInBackgroundImage,visibleOn:'data.backgroundType == "image" && data.imageSourceType === "builtIn"'},{name:"uploadImageURL",visibleOn:'data.backgroundType == "image" && data.imageSourceType === "upload"',type:"image",label:i.default("背景图（460 全景图）"),maxLength:1,allowInput:!0,maxSize:10485760,reciever:"/api/image/upload"},{type:"color",label:i.default("渐变顶部色"),name:"gradientTop",visibleOn:'data.backgroundType == "gradient"',resetValue:"#3A3F51"},{type:"color",label:i.default("渐变底部部色"),name:"gradientBottom",visibleOn:'data.backgroundType == "gradient"',resetValue:"#4a5fa2"},{type:"switch",label:i.default("开启自动性能优化"),name:"enableOptimize"},{type:"switch",label:i.default("开启发光层"),name:"glowLayer.isEnabled"},{type:"number",label:i.default("发光强度"),name:"glowLayer.intensity",value:1,step:.1,visibleOn:"glowLayer.isEnabled",resetValue:1}],d=[{type:"static-tpl",name:"showExplain",tpl:'<a href="/docs/Scene-Action" class="text-info" target="_blank">'+i.default("交互使用说明")+"</a>${showExplain}"},{type:"static",value:i.default("交互功能只在预览的时候生效")},{type:"combo",name:"simpleActions",label:i.default("交互列表"),multiple:!0,multiLine:!0,draggable:!0,addable:!0,controls:[{type:"select",name:"trigger",mode:"horizontal",horizontal:{left:3},label:i.default("事件"),value:s.TriggerType.ClickAnyMesh,options:[{label:i.default("点击某个物体"),value:s.TriggerType.ClickMesh},{label:i.default("点击任意物体"),value:s.TriggerType.ClickAnyMesh},{label:i.default("悬浮到某个物体"),value:s.TriggerType.HoverMesh},{label:i.default("悬浮到任意物体"),value:s.TriggerType.HoverAnyMesh},{label:i.default("被联动"),value:s.TriggerType.Linked}]},{type:"select",name:"triggerId",label:i.default("名称"),required:!0,visibleOn:'data.trigger == "clickMesh" || data.trigger == "hoverMesh"',mode:"horizontal",horizontal:{left:3},options:t},{type:"text",name:"triggerId",label:i.default("名称"),required:!0,visibleOn:'data.trigger == "linked"',mode:"horizontal",horizontal:{left:3}},{type:"combo",name:"actions",multiple:!0,multiLine:!0,draggable:!0,addable:!0,label:i.default("触发列表"),strictMode:!1,controls:[{type:"select",name:"actionType",mode:"horizontal",horizontal:{leftFixed:"xs"},value:s.ActionType.fireDependence,label:i.default("动作"),visibleOn:'data.__super.trigger == "clickMesh" || data.__super.trigger == "clickAnyMesh"',options:[{label:i.default("移动相机到"),value:s.ActionType.moveCamera},{label:i.default("触发联动"),value:s.ActionType.fireDependence},{label:i.default("跳转链接"),value:s.ActionType.openURL},{label:i.default("显示高亮边框"),value:s.ActionType.highlight}]},{type:"select",name:"actionType",mode:"horizontal",horizontal:{leftFixed:"xs"},visibleOn:'data.__super.trigger == "hoverMesh" || data.__super.trigger == "hoverAnyMesh"',label:i.default("动作"),value:s.ActionType.fireDependence,options:[{label:i.default("显示高亮边框"),value:s.ActionType.highlight}]},{type:"select",name:"actionType",mode:"horizontal",horizontal:{leftFixed:"xs"},visibleOn:'data.__super.trigger == "linked"',label:i.default("动作"),value:s.ActionType.fireDependence,options:[{label:i.default("移动相机到"),value:s.ActionType.moveCamera},{label:i.default("显示高亮边框"),value:s.ActionType.highlight}]},{type:"combo",name:"actionOption",label:i.default("相机目标位置"),multiLine:!0,visibleOn:'actionType == "moveCamera" && (data.__super.trigger == "clickMesh" || data.__super.trigger == "clickAnyMesh" || data.__super.trigger == "linked")',controls:[{name:"setCameraOption",children:function(e){var t=(e.onChange,e.value,e.data);return l.createElement("div",{className:"a-Form-item a-Form-item--normal"},l.createElement(n.Button,{level:"primary",onClick:function(){a.setActionCamera(t)}},i.default("设置为当前相机位置")))}},r.radianControl("alpha","alpha"),r.radianControl("beta","beta"),{className:"m-b-xs",type:"number",label:i.default("距离"),name:"radius",mode:"horizontal",horizontal:{leftFixed:"xs"},resetValue:100},r.vector3Control("target",i.default("朝向")),{name:"checkCamera",children:function(e){var t=(e.onChange,e.value,e.data);return l.createElement("div",{className:"a-Form-item a-Form-item--normal"},l.createElement(n.Button,{level:"primary",onClick:function(){a.changeEditorCameraValue(t)}},i.default("查看这个位置")))}},{type:"number",label:i.default("移动时间（秒）"),value:1,name:"duration",resetValue:1},{type:"number",label:i.default("移动后停留时间（秒）"),value:0,name:"stopDuration",resetValue:0},{type:"select",name:"hideMeshId",visibleOn:"duration",label:i.default("动画结束后隐藏物体"),clearable:!0,options:t},{type:"select",name:"showMeshId",visibleOn:"duration",label:i.default("动画结束后显示物体"),clearable:!0,options:t}]},{type:"text",name:"actionOption.url",label:i.default("链接地址"),visibleOn:'actionType == "openURL"',placeholder:i.default("http://example.com/?name={name}")},{type:"switch",label:i.default("是否是新窗口打开"),name:"actionOption.isBlank",value:!0,visibleOn:'actionType == "openURL"'},{type:"select",horizontal:{left:3},mode:"horizontal",name:"actionOption.highlightMeshId",visibleOn:'actionType == "highlight" && data.__super.trigger == "linked"',label:i.default("物体"),clearable:!0,options:t},{type:"color",horizontal:{left:3},mode:"horizontal",name:"actionOption.color",label:i.default("颜色"),visibleOn:'actionType == "highlight"',resetValue:"#0000ff"}]}]}],c={type:"tabs",mode:"card",className:"overflow-hidden h-full d-flex flex-col",contentClassName:"flex-1 overflow-y-auto p-relative",tabs:[{title:i.default("基础"),controls:u},{title:i.default("调色"),controls:[{type:"static-tpl",name:"showExplain",visibleOn:"colorCorrection.isEnabled",tpl:'<a href="/docs/Scene-Color" class="text-info" target="_blank">'+i.default("调色使用说明")+"</a>${showExplain}"},{type:"switch",label:i.default("开启色调映射"),name:"imageProcessingConfiguration.toneMappingEnabled"},{type:"number",label:i.default("曝光度"),step:.1,name:"imageProcessingConfiguration.exposure",resetValue:1},{type:"switch",label:i.default("开启调色"),name:"colorCorrection.isEnabled"},{type:"image",name:"colorCorrection.imageURL",accept:".png",label:i.default("调色图"),maxLength:1,allowInput:!0,maxSize:10485760,reciever:"/api/image/upload",visibleOn:"colorCorrection.isEnabled"},{type:"number",name:"colorCorrection.samples",label:i.default("采样数"),step:1,min:1,visibleOn:"colorCorrection.isEnabled",resetValue:4},{type:"number",label:i.default("对比度"),step:.1,name:"imageProcessingConfiguration.contrast",resetValue:1},{type:"switch",label:i.default("开启影晕"),name:"imageProcessingConfiguration.vignetteEnabled"},{type:"color",format:"rgba",label:i.default("影晕颜色"),name:"imageProcessingConfiguration.vignetteColor",visibleOn:"imageProcessingConfiguration.vignetteEnabled",resetValue:"rgba(35, 35, 35, 0)"},{type:"number",label:i.default("影晕宽度"),name:"imageProcessingConfiguration.vignetteWeight",visibleOn:"imageProcessingConfiguration.vignetteEnabled",resetValue:5},{type:"number",label:i.default("影晕强度"),name:"imageProcessingConfiguration.vignetteStretch",visibleOn:"imageProcessingConfiguration.vignetteEnabled",resetValue:1}]},{title:i.default("交互"),controls:d},r.scriptControl(e)]};return c}Object.defineProperty(a,"__esModule",{value:!0}),a.generateSceneOptionsSchema=void 0;var l=e("sugar:node_modules/react/index.js"),n=e("sugar:node_modules/amis/lib/index.js"),i=e("sugar:utils/i18n.ts"),o=e("sugar:stores/scene.ts"),r=e("sugar:sites/group/scene-edit/amis-control/common.ts"),s=e("sugar:stores/scene/simple-action.ts");a.generateSceneOptionsSchema=t});
;sugar.define("sugar:sites/group/scene-edit/amis-control/light.ts",function(e,t){"use strict";function a(e){var t=[{type:"text",label:l.default("名称"),name:"name"},{type:"color",label:l.default("颜色"),name:"diffuse",resetValue:"#ffffff"},{type:"number",label:l.default("光照距离"),name:"range",resetValue:100}],a=o.getType(e).name;switch(a){case"PointLight":t=t.concat([n.vector3Control("position",l.default("位置"))]);break;case"DirectionalLight":t=t.concat([n.vector3Control("direction",l.default("方向"))]);break;case"SpotLight":t=t.concat([n.vector3Control("position",l.default("位置")),n.vector3Control("direction",l.default("方向")),n.radianControl("angle",l.default("圆锥角度")),{type:"number",label:l.default("光线衰减速度"),name:"exponent",resetValue:2}]);break;case"HemisphericLight":t=t.concat([{type:"color",label:l.default("地面颜色"),name:"groundColor",resetValue:"#ffffff"},n.vector3Control("direction",l.default("方向"))])}t.push({type:"number",label:l.default("强度"),name:"intensity",resetValue:1}),t.push({type:"switch",label:l.default("是否开启"),name:"isEnabled"}),t.push({name:"id",className:"text-sm",label:l.default("内部ID"),type:"static"});var r={type:"tabs",mode:"card",className:"overflow-hidden h-full d-flex flex-col",contentClassName:"flex-1 overflow-y-auto p-relative",tabs:[{title:l.default("基础"),controls:t}]};return r}Object.defineProperty(t,"__esModule",{value:!0}),t.generateLightSchema=void 0;var l=e("sugar:utils/i18n.ts"),o=e("sugar:node_modules/mobx-state-tree/dist/mobx-state-tree.js"),n=e("sugar:sites/group/scene-edit/amis-control/common.ts");t.generateLightSchema=a});
;sugar.define("sugar:sites/group/scene-edit/amis-control/particle.ts",function(e,a){"use strict";function l(){var e=[{type:"text",label:t.default("名称"),name:"name"},{type:"number",label:t.default("粒子数量"),name:"capacity",resetValue:300},u.vector3Control("emitter",t.default("起始位置")),{type:"select",label:t.default("粒子图片"),name:"textureURL",options:r.ParticleTextureURLs},{type:"color",label:t.default("颜色起始"),name:"color1",format:"rgba",resetValue:"rgba(254, 164, 54, 255)"},{type:"color",label:t.default("颜色终止"),name:"color2",format:"rgba",resetValue:"rgba(254, 164, 54, 255)"},{type:"color",label:t.default("消失时颜色"),name:"colorDead",format:"rgba",resetValue:"rgba(255, 255, 255, 0)"},u.vector3Control("direction1",t.default("发射方向 1")),u.vector3Control("direction2",t.default("发射方向 2")),{type:"number",label:t.default("最小 Z 轴旋转"),name:"minAngularSpeed",resetValue:0},{type:"number",label:t.default("最大 Z 轴旋转"),name:"maxAngularSpeed",resetValue:0},{type:"number",label:t.default("最小体积"),name:"minSize",resetValue:.1},{type:"number",label:t.default("最大体积"),name:"maxSize",resetValue:1},u.vector3Control("minEmitBox",t.default("发射位置起始点")),u.vector3Control("maxEmitBox",t.default("发射位置终点")),{type:"number",label:t.default("最小 X 轴缩放"),name:"minScaleX",resetValue:1},{type:"number",label:t.default("最大 X 轴缩放"),name:"maxScaleX",resetValue:1},{type:"number",label:t.default("最小 Y 轴缩放"),name:"minScaleY",resetValue:1},{type:"number",label:t.default("最大 Y 轴缩放"),name:"maxScaleY",resetValue:1},{type:"number",label:t.default("最小发射力度"),name:"minEmitPower",resetValue:0},{type:"number",label:t.default("最大发射力度"),name:"maxEmitPower",resetValue:0},{type:"number",label:t.default("最小存在时间"),name:"minLifeTime",resetValue:1},{type:"number",label:t.default("最大存在时间"),name:"maxLifeTime",resetValue:1},{type:"number",label:t.default("每次发送的粒子数量"),name:"emitRate",resetValue:2},u.vector3Control("gravity",t.default("重力")),{type:"number",label:t.default("启动延时"),name:"startDelay",resetValue:0},{type:"switch",label:t.default("是否朝向相机"),name:"isBillboardBased"},{type:"select",label:t.default("朝向模式"),name:"billboardMode",options:[{label:t.default("仅 Y 轴"),value:2},{label:t.default("全部轴"),value:7},{label:t.default("根据当前相机朝向"),value:8}]}],a={type:"tabs",mode:"card",className:"overflow-hidden h-full d-flex flex-col",contentClassName:"flex-1 overflow-y-auto p-relative",tabs:[{title:t.default("基础"),controls:e}]};return a}Object.defineProperty(a,"__esModule",{value:!0}),a.generateParticleSchema=void 0;var t=e("sugar:utils/i18n.ts"),r=e("sugar:stores/scene.ts"),u=e("sugar:sites/group/scene-edit/amis-control/common.ts");a.generateParticleSchema=l});
;sugar.define("sugar:sites/group/scene-edit/amis-control/pin.tsx",function(e,a){"use strict";function t(e,a){var t=[{type:"text",label:l.default("名称"),name:"name"},{type:"number",label:l.default("宽度"),name:"width",resetValue:100},c.vector3Control("position",l.default("位置"))],m=e.dataModelHash,f=[{type:"select",name:"dataType",label:l.default("数据绑定方式"),options:[{label:l.default("静态文本"),value:"static"},{label:l.default("数据模型"),value:"dataModel"}]},{type:"text",label:l.default("文本内容"),name:"staticText",visibleOn:'dataType === "static"'}],h=f.concat([i.getDataModelFieldHolder({name:"value",label:l.default("文本内容字段"),config:{dataModelHash:m,holderId:"pin-"+e.id+"-value",maxCount:1}}),o.commonFilterForDataModel(m),o.commonBindUrlParamForDataModel(m),{name:"refreshData",visibleOn:'dataType != "static"',children:function(t){t.onChange,t.value;return d.createElement("div",{className:"a-Form-item a-Form-item--normal"},d.createElement(n.Button,{level:"primary",onClick:function(){a.refreshPinDate(e.id)}},l.default("刷新数据")))}}]);h=h.concat([u.amisInlineSwitch("dataConfig.needAutoRefresh",l.default("打开数据自动刷新"),"data.dataType == 'static'"),{type:"number",name:"dataConfig.autoRefreshInterval",hiddenOn:"data.dataType == 'static' || data.dataConfig.needAutoRefresh == false",step:1,min:r.autoRefreshMinInterval,label:l.default("自动刷新间隔(秒)"),resetValue:10},{type:"tpl",label:" ",value:'<div class="help-block">'+l.default("数据的自动刷新在非编辑模式下有效，最小刷新间隔为「"+r.autoRefreshMinInterval+"秒」")+"</div>",hiddenOn:"data.dataType == 'static' || data.dataConfig.needAutoRefresh == false"}]);var p=f;return"dataModel"===e.dataType&&(p=[{type:"hbox",columns:[{columnClassName:"data-bind",controls:h},{columnClassName:"data-model",controls:[{visibleOn:'dataType == "dataModel"',name:"dataModelHash",children:function(e){var a=e.onChange,t=e.value;return d.createElement(s.default,{onChange:a,value:t})}}]}]}]),{type:"tabs",mode:"card",className:"overflow-hidden h-full d-flex flex-col",contentClassName:"flex-1 overflow-y-auto p-relative",tabs:[{title:l.default("基础"),controls:t},{title:l.default("数据"),controls:p}]}}Object.defineProperty(a,"__esModule",{value:!0}),a.generatePinSchema=void 0;var l=e("sugar:utils/i18n.ts"),d=e("sugar:node_modules/react/index.js"),n=e("sugar:node_modules/amis/lib/index.js"),o=e("sugar:widgets/ctrl-panel/data-bind-ctrl/index.tsx"),s=e("sugar:widgets/data-model/data-model-selector/data-model-selector.tsx"),i=e("sugar:widgets/data-model/data-model-field-holder/data-model-field-holder.tsx"),r=e("sugar:widgets/dashboard-ctrl-panel/chart-ctrl.tsx"),u=e("sugar:widgets/amis-inline-switch.tsx"),c=e("sugar:sites/group/scene-edit/amis-control/common.ts");a.generatePinSchema=t});
;sugar.define("sugar:sites/group/scene-edit/scene-amis-control.tsx",function(s,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=s("sugar:node_modules/tslib/tslib.js");t.__exportStar(s("sugar:sites/group/scene-edit/amis-control/camera.tsx"),e),t.__exportStar(s("sugar:sites/group/scene-edit/amis-control/material.ts"),e),t.__exportStar(s("sugar:sites/group/scene-edit/amis-control/mesh.tsx"),e),t.__exportStar(s("sugar:sites/group/scene-edit/amis-control/scene.tsx"),e),t.__exportStar(s("sugar:sites/group/scene-edit/amis-control/light.ts"),e),t.__exportStar(s("sugar:sites/group/scene-edit/amis-control/particle.ts"),e),t.__exportStar(s("sugar:sites/group/scene-edit/amis-control/pin.tsx"),e)});
;sugar.define("sugar:sites/group/scene-edit/scene-inspector.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=e("sugar:node_modules/tslib/tslib.js"),s=e("sugar:utils/i18n.ts"),r=e("sugar:node_modules/react/index.js"),n=e("sugar:node_modules/react-dnd/lib/index.js"),c=e("sugar:node_modules/react-dnd-html5-backend/lib/index.js"),i=e("sugar:node_modules/mobx-state-tree/dist/mobx-state-tree.js"),o=e("sugar:sites/amis-renderer.tsx"),l=e("sugar:node_modules/amis/lib/index.js"),u=e("sugar:stores/index.ts"),d=e("sugar:utils/fetch.ts"),p=e("sugar:stores/scene.ts"),m=e("sugar:sites/group/scene-edit/scene-amis-control.tsx"),g=function(e){function t(t){return e.call(this,t)||this}return a.__extends(t,e),t.prototype.uploadGLTF=function(e,t){return a.__awaiter(this,void 0,void 0,function(){var r,n,c,i;return a.__generator(this,function(a){switch(a.label){case 0:r=new FormData,n=e.currentTarget.files[0],r.append("file",n),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,d.post("/api/image/upload",r,{headers:{"Content-Type":"multipart/form-data"}})];case 2:return c=a.sent(),0===c.status&&c.data.url&&t(c.data.url),[3,4];case 3:return i=a.sent(),l.toast.error(i.message||s.default("上传失败")),[3,4];case 4:return[2]}})})},t.prototype.render=function(){var e,t=this.props.scene.scene,a=this.props.scene.editor,s=this.props.getSceneManager(),n=null,c=null,l=a.selectedNode;if(l){var u=a.selectedType,d={},g=t.meshes.map(function(e){return{label:e.name,value:e.id}});switch(u){case p.SelectType.BasicMesh:e=m.generateBasicMeshSchema(l);break;case p.SelectType.GLTFMesh:e=m.generateGLTFMeshSchema(l,this.uploadGLTF,s,d);break;case p.SelectType.MapMesh:e=m.generateMapMeshSchema(l);break;case p.SelectType.Camera:e=m.generateCameraSchema(l,s,g);break;case p.SelectType.Light:e=m.generateLightSchema(l);break;case p.SelectType.Material:e=m.generateMaterialSchema(l);break;case p.SelectType.Scene:e=m.generateSceneOptionsSchema(l,s,g);break;case p.SelectType.Particle:e=m.generateParticleSchema(l);break;case p.SelectType.Pin:e=m.generatePinSchema(l,s)}c=l.update,n=JSON.parse(JSON.stringify(i.getSnapshot(l))),u===p.SelectType.GLTFMesh&&(n.customMaterials=d),l.material&&(n.material=i.getSnapshot(l.material))}return r.createElement("div",{className:"scene-inspector"},r.createElement(o.default,{data:n,onChange:c,schema:{type:"form",name:"inspectorForm",wrapWithPanel:!1,controls:e}}))},t.displayName="SceneInspector",t=a.__decorate([n.DragDropContext(c.default),u.observer,a.__metadata("design:paramtypes",[Object])],t)}(r.Component);t.default=g});
;sugar.define("sugar:sites/group/scene-edit/scene-view-control.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=e("sugar:node_modules/tslib/tslib.js"),a=e("sugar:utils/i18n.ts"),i=e("sugar:node_modules/react/index.js"),o=e("sugar:node_modules/amis/lib/index.js"),s=e("sugar:stores/index.ts"),n=e("sugar:stores/scene.ts"),r=[{label:a.default("移动"),title:a.default("移动选中的物体"),iconClassName:"fa fa-arrows-alt",value:n.GizmoMode.Position},{label:a.default("旋转"),title:a.default("旋转选中的物体"),iconClassName:"fa fa-sync-alt",value:n.GizmoMode.Rotation},{label:a.default("缩放"),title:a.default("缩放选中的物体"),iconClassName:"fa fa-arrows-alt-v",value:n.GizmoMode.Scaling}],d=[{label:a.default("透视"),value:n.ViewMode.Perspective},{label:a.default("正面"),value:n.ViewMode.Front},{label:a.default("顶部"),value:n.ViewMode.Top},{label:a.default("右侧"),value:n.ViewMode.Right}],c=function(e){function t(t){var l=e.call(this,t)||this;return l.changeViewMode=l.changeViewMode.bind(l),l.changeGimoMode=l.changeGimoMode.bind(l),l.toggleDisplayGrid=l.toggleDisplayGrid.bind(l),l.toggleDisplayAxis=l.toggleDisplayAxis.bind(l),l.toggleParticlesEnabled=l.toggleParticlesEnabled.bind(l),l.toggleDisplayPerf=l.toggleDisplayPerf.bind(l),l}return l.__extends(t,e),t.prototype.changeViewMode=function(e){this.props.scene.editor.changeViewMode(e)},t.prototype.toggleDisplayGrid=function(){var e=this.props.scene.editor;e.toggleDisplayGrid()},t.prototype.toggleParticlesEnabled=function(){var e=this.props.scene.editor;e.toggleParticlesEnabled()},t.prototype.toggleDisplayAxis=function(){var e=this.props.scene.editor;e.toggleDisplayAxis()},t.prototype.toggleDisplayPerf=function(){var e=this.props.scene.editor;e.toggleDisplayPerf()},t.prototype.changeGimoMode=function(e){var t=this.props.scene.editor;t.changeGimoMode(e)},t.prototype.render=function(){var e=this,t=this.props.scene.editor,l=t.gizmoMode,s=t.viewMode;return i.createElement("div",{className:"scene-viewer-control"},i.createElement("div",null,i.createElement("div",{style:{display:"inline-block"}},i.createElement("label",{style:{marginLeft:30}},a.default("选中：")),r.map(function(t){return i.createElement(o.Button,{key:t.value,title:t.title,size:"xs",active:l===t.value,onClick:function(){return e.changeGimoMode(t.value)}},i.createElement("i",{className:t.iconClassName}),t.label)})),i.createElement("div",{style:{display:"inline-block"}},i.createElement("label",{style:{marginLeft:30}},a.default("视图：")),d.map(function(t){return i.createElement(o.Button,{key:t.value,size:"xs",active:s===t.value,onClick:function(){return e.changeViewMode(t.value)}},t.label)})),i.createElement("div",{style:{display:"inline-block"}},i.createElement("label",{style:{marginLeft:30}},a.default("显示：")),i.createElement(o.Checkbox,{size:"xs",value:t.displayGrid,onChange:this.toggleDisplayGrid,label:a.default("网格")}),i.createElement(o.Checkbox,{size:"xs",value:t.displayAxis,onChange:this.toggleDisplayAxis,label:a.default("坐标")}),i.createElement(o.Checkbox,{size:"xs",value:t.particlesEnabled,onChange:this.toggleParticlesEnabled,label:a.default("特效")}),i.createElement(o.Checkbox,{size:"xs",value:t.displayPerf,onChange:this.toggleDisplayPerf,label:a.default("性能分析")}))))},t.displayName="SceneViewControl",t=l.__decorate([s.observer,l.__metadata("design:paramtypes",[Object])],t)}(i.Component);t.default=c});
;sugar.define("sugar:sites/group/scene-edit/scene-perf.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=e("sugar:node_modules/tslib/tslib.js"),r=e("sugar:utils/i18n.ts"),l=e("sugar:node_modules/react/index.js"),a=e("sugar:stores/index.ts"),s=function(e){function t(t){var n=e.call(this,t)||this;return n.timerIntervalId=window.setInterval(function(){return n.forceUpdate()},1e3),n}return n.__extends(t,e),t.prototype.componentWillUnmount=function(){window.clearInterval(this.timerIntervalId)},t.prototype.render=function(){var e=this.props.getSceneManager();if(!e)return null;var t=e.getScene(),n=e.getEngine(),a=e.getSceneInstrumentation();return t&&n&&a?l.createElement("div",{className:"scene-perf"},l.createElement("p",null,"FPS：",Math.round(n.getFps())),l.createElement("p",null,r.default("每帧耗时"),"：",a.frameTimeCounter.lastSecAverage.toFixed(2)," ms"),l.createElement("p",null,r.default("活跃的节点数"),"：",t.getActiveMeshes().length.toString()),l.createElement("p",null,r.default("活跃的面数"),"：",(t.getActiveIndices()/3).toString()),l.createElement("p",null,r.default("活跃的粒子数"),"：",t.getActiveParticles().toString()),l.createElement("p",null,r.default("总顶点数"),"：",t.getTotalVertices().toString()),l.createElement("p",null,r.default("绘画次数"),"：",a.drawCallsCounter.current.toString())):null},t.displayName="ScenePerf",t=n.__decorate([a.observer,n.__metadata("design:paramtypes",[Object])],t)}(l.Component);t.default=s});
;sugar.define("sugar:sites/group/scene-edit/scene-editor.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=e("sugar:node_modules/tslib/tslib.js"),s=e("sugar:utils/i18n.ts"),a=e("sugar:widgets/editor/lock-access.tsx"),r=e("sugar:widgets/editor/lockheartbeat-and-beforeunload.tsx"),o=e("sugar:node_modules/react/index.js"),c=e("sugar:node_modules/react/index.js"),i=e("sugar:node_modules/react-document-title/index.js"),d=e("sugar:stores/index.ts"),l=e("sugar:node_modules/amis/lib/index.js"),u=e("sugar:widgets/confirm.tsx"),p=e("sugar:stores/scene.ts"),g=e("sugar:sites/group/scene-edit/scene-editor-toolbar.tsx"),m=e("sugar:sites/group/scene-edit/scene-outline.tsx"),h=e("sugar:sites/group/scene-edit/scene-inspector.tsx"),f=e("sugar:sites/group/scene-edit/scene-view-control.tsx"),y=e("sugar:sites/group/scene-edit/scene-perf.tsx"),S=o.lazy(function(){return Promise.resolve().then(function(){return new Promise(function(t){e(["sugar:sites/group/scene-edit/scene-viewer.tsx"],function(e){t(e)})})})}),v=function(e){function t(t){var n=e.call(this,t)||this;return n.sceneManager={},n.deleteNode=n.deleteNode.bind(n),n.undo=n.undo.bind(n),n.redo=n.redo.bind(n),n.selectScene=n.selectScene.bind(n),n.handleSave=n.handleSave.bind(n),n.onKeyDown=n.onKeyDown.bind(n),n.autoFit=n.autoFit.bind(n),n.sceneViewerReady=n.sceneViewerReady.bind(n),n.changeScale=n.changeScale.bind(n),n.setSceneManager=n.setSceneManager.bind(n),n.getSceneManager=n.getSceneManager.bind(n),n.state={scale:1},n}return n.__extends(t,e),t.prototype.setSceneManager=function(e){this.sceneManager=e},t.prototype.getSceneManager=function(){return this.sceneManager},t.prototype.autoFit=function(){var e=this.props.scene.scene,t=e.sceneOptions.width,n=e.sceneOptions.height,s=document.getElementsByClassName("scene-viewer")[0].getBoundingClientRect(),a=s.width,r=s.height,o=(a-10)/t,c=(r-30)/n,i=o>c?c:o;this.setState({scale:i})},t.prototype.changeScale=function(e){if(e){var t=parseInt(e.target.value,10)/100;this.setState({scale:t})}},t.prototype.sceneViewerReady=function(e){var t=this.props.scene;e&&"done"===t.loadState&&t.model.hash&&this.autoFit()},t.prototype._isInTextEditor=function(e){var t=window.getSelection();return t&&""!=t.toString()?!0:e.target&&"INPUT"!==e.target.tagName&&"TEXTAREA"!==e.target.tagName&&"fr-element fr-view"!==e.target.className?!1:!0},t.prototype.onKeyDown=function(e){this._isInTextEditor(e)||("Backspace"!==e.code&&"Delete"!==e.code||!this.props.scene.editor.selectedId||this.deleteNode(),(e.ctrlKey||e.metaKey)&&"KeyS"===e.code&&(this.handleSave(),e.preventDefault()),(e.ctrlKey||e.metaKey)&&"KeyZ"===e.code&&(e.shiftKey?this.redo():this.undo()))},t.prototype.deleteNode=function(){var e=this.props.scene.editor;"default-camera"===e.selectedId?l.alert(s.default("无法删除默认相机")):u.confirm(s.default("确定要删除选中的节点")).then(function(){e.deleteSelectedNode()}).catch(function(){})},t.prototype.componentWillMount=function(){this.props.scene.load(this.props.routeParams.scene),document.addEventListener("keydown",this.onKeyDown)},t.prototype.componentWillUnmount=function(){document.removeEventListener("keydown",this.onKeyDown)},t.prototype.undo=function(){d.undoManager.canUndo&&(this.props.scene.editor.selectedType!=p.SelectType.Camera&&this.props.scene.editor.selectScene(),d.undoManager.undo())},t.prototype.redo=function(){d.undoManager.canRedo&&d.undoManager.redo()},t.prototype.selectScene=function(){this.props.scene.editor.selectScene()},t.prototype.handleSave=function(){this.props.scene.hasModified&&"pending"!==this.props.scene.savingState&&this.props.scene.save(this.props.group.data.hash,this.props.routeParams.scene)},t.prototype.render=function(){var e=this.props.scene,t=e.scene,n=e.editor;return"pending"===e.loadState||"done"===e.loadState&&!e.model.hash?o.createElement(l.Spinner,{overlay:!0,size:"lg"}):"error"===e.loadState?"AuthorizeError"===e.loadError.type?o.createElement("h3",{className:"text--center text-danger"},s.default("无权查看该场景")):o.createElement("h3",{className:"text--center text-danger"},s.default(e.loadError.message||"请求错误")):o.createElement(i,{title:s.default("「"+e.model.name+"」 - 三维场景编辑")},o.createElement("div",{className:"editor-container scene-editor-container",tabIndex:-2},o.createElement(g.default,{scene:this.props.scene,router:this.props.router,group:this.props.group,routeParams:this.props.routeParams}),o.createElement("div",{className:"scene-container"},o.createElement("div",{className:"scene-outline"},o.createElement("div",{className:"scene-outline-header"},s.default("场景内容")),o.createElement(m.default,{scene:t,editor:n})),o.createElement("div",{className:"scene-viewer",ref:this.sceneViewerReady},n.displayPerf&&o.createElement(y.default,{getSceneManager:this.getSceneManager}),o.createElement(f.default,{scene:this.props.scene}),o.createElement(c.Suspense,{fallback:o.createElement("div",null,s.default("加载中"))},o.createElement(S,{scene:t,editor:n,isInEditor:!0,scale:this.state.scale,setSceneManager:this.setSceneManager}))),o.createElement(h.default,{scene:this.props.scene,getSceneManager:this.getSceneManager}),o.createElement("div",{className:"scene-bottom"},o.createElement("span",null,s.default("缩放")),o.createElement("input",{className:"range",type:"range",min:10,max:100,step:1,value:Math.round(100*this.state.scale),onChange:this.changeScale,style:{width:"100px"}}),o.createElement("input",{className:"number",type:"number",min:10,max:100,step:1,value:Math.round(100*this.state.scale),onChange:this.changeScale}),o.createElement("i",{className:"fas fa-expand",onClick:this.autoFit,title:s.default("自动适应")}),o.createElement("span",{className:"m-l-xs"},s.default("点击处的节点[「"+n.pickNodeName+"」]")),o.createElement("span",{className:"m-l-xs"},s.default("材质[「"+n.pickMaterialName+"」]"))))))},t.displayName="SceneEditor",t=n.__decorate([d.inject(function(e){return{scene:e.scene.current,editor:e.scene.current,editorType:"scene",group:e.group.current}}),a.default,r.default,d.observer,n.__metadata("design:paramtypes",[Object])],t)}(o.Component);t.default=v});
;sugar.define("sugar:sites/group/scene/scene.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=e("sugar:node_modules/tslib/tslib.js"),n=e("sugar:utils/i18n.ts"),a=e("sugar:node_modules/react/index.js"),s=e("sugar:node_modules/react/index.js"),o=e("sugar:node_modules/react-document-title/index.js"),l=e("sugar:stores/index.ts"),i=e("sugar:node_modules/classnames/index.js"),c=e("sugar:node_modules/amis/lib/index.js"),m=e("sugar:node_modules/react-router/lib/index.js"),d=e("sugar:node_modules/xss/lib/index.js"),u=e("sugar:utils/xssOption.ts"),p=a.lazy(function(){return Promise.resolve().then(function(){return new Promise(function(t){e(["sugar:sites/group/scene-edit/scene-viewer.tsx"],function(e){t(e)})})})}),h=function(e){function t(t){var r=e.call(this,t)||this;return r.rememberPath=r.rememberPath.bind(r),r}return r.__extends(t,e),t.prototype.componentWillMount=function(){this.rememberPath=this.rememberPath.bind(this),this.props.scene.load(this.props.routeParams.scene)},t.prototype.componentWillReceiveProps=function(e){var t=this.props;e.routeParams.scene!==t.routeParams.scene&&(this.rememberPath(e),this.props.scene.load(e.routeParams.scene))},t.prototype.componentDidMount=function(){this.rememberPath(this.props)},t.prototype.rememberPath=function(e){var t=e.location.pathname,r=e.group.data.hash,n=e.group.data.key;0===t.indexOf("/group/"+n+"/")&&e.assist.rememberGroupPath(r,t)},t.prototype.render=function(){var e=this.props,t=e.group,r=e.scene,l=e.routeParams;return"pending"===r.loadState||"done"===r.loadState&&!r.model.hash?a.createElement(c.Spinner,{overlay:!0,size:"lg"}):"error"===r.loadState?"AuthorizeError"===r.loadError.type?a.createElement("h3",{className:"text--center text-danger"},n.default("无权查看该场景")):a.createElement("h3",{className:"text--center text-danger"},r.loadError.message||n.default("请求错误")):[a.createElement("div",{className:"bg-white wrapper lter b-b clearfix",key:"report-header"},a.createElement("span",{className:"m-n font-thin fs-18"},r.model.name,r.model.remark?a.createElement(c.TooltipWrapper,{tooltip:d(r.model.remark,u.xssOption),placement:"bottom"},a.createElement("i",{className:"fa fa-question-circle m-l-sm hidden-xs"})):null),a.createElement("div",{className:"d-inline-block pull-right"},a.createElement("span",null,a.createElement(m.Link,{to:"/group/"+t.data.key+"/preview/scene/"+l.scene},a.createElement(c.Button,{level:"link",size:"large",tooltip:n.default("全屏预览"),placement:"bottom"},a.createElement("i",{className:"fa fa-arrows-alt"})))),a.createElement("span",{className:i("hidden-xs",{hidden:!t.isAdmin})},a.createElement(m.Link,{to:"/group/"+t.data.key+"/edit/scene/"+l.scene},a.createElement(c.Button,{level:"link",size:"large",tooltip:n.default("编辑"),placement:"bottom"},a.createElement("i",{className:"fa fa-pencil"})))))),a.createElement(o,{title:r.model.name,key:"content"},a.createElement("div",{id:"scene-content"},a.createElement(s.Suspense,{fallback:a.createElement("div",null,n.default("加载中"))},r.model.data?a.createElement(p,{scene:r.scene,editor:r.editor,isInEditor:!1}):a.createElement("div",{className:"text--center"},n.default("场景内容为空，请点击右上角的按钮进行编辑")))))]},t.displayName="Scene",t=r.__decorate([l.inject(function(e){return{assist:e.assist,user:e.user.current,group:e.group.current,scene:e.scene.current}}),l.observer,r.__metadata("design:paramtypes",[Object])],t)}(a.Component);t.default=h});
;sugar.define("sugar:sites/group/scene-preview/scene-preview.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=e("sugar:node_modules/tslib/tslib.js"),n=e("sugar:utils/i18n.ts"),s=e("sugar:node_modules/react/index.js"),o=e("sugar:node_modules/react/index.js"),a=e("sugar:node_modules/react-document-title/index.js"),i=e("sugar:stores/index.ts"),c=e("sugar:node_modules/amis/lib/index.js"),u=s.lazy(function(){return Promise.resolve().then(function(){return new Promise(function(t){e(["sugar:sites/group/scene-edit/scene-viewer.tsx"],function(e){t(e)})})})}),l=function(e){function t(t){return e.call(this,t)||this}return r.__extends(t,e),t.prototype.componentWillMount=function(){this.props.scene.load(this.props.routeParams.scene)},t.prototype.componentWillReceiveProps=function(e){var t=this.props;e.routeParams.scene!==t.routeParams.scene&&this.props.scene.load(e.routeParams.scene)},t.prototype.render=function(){{var e=this.props,t=(e.group,e.scene);e.routeParams}return"pending"===t.loadState||"done"===t.loadState&&!t.model.hash?s.createElement(c.Spinner,{overlay:!0,size:"lg"}):"error"===t.loadState?"AuthorizeError"===t.loadError.type?s.createElement("h3",{className:"text--center text-danger"},n.default("无权查看该场景")):s.createElement("h3",{className:"text--center text-danger"},t.loadError.message||n.default("请求错误")):[s.createElement(a,{title:t.model.name,key:"content"},s.createElement("div",{id:"scene-content",className:"scene-preview"},s.createElement(o.Suspense,{fallback:s.createElement("div",null,n.default("加载中"))},t.model.data?s.createElement(u,{scene:t.scene,editor:t.editor,isInEditor:!1}):s.createElement("div",{style:{textAlign:"center"}},n.default("场景内容为空，请点击右上角的按钮进行编辑")))))]},t.displayName="ScenePreview",t=r.__decorate([i.inject(function(e){return{assist:e.assist,user:e.user.current,group:e.group.current,scene:e.scene.current}}),i.observer,r.__metadata("design:paramtypes",[Object])],t)}(s.Component);t.default=l});
;sugar.define("sugar:sites/demo/demo-install.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=e("sugar:node_modules/tslib/tslib.js"),n=e("sugar:utils/i18n.ts"),o=e("sugar:node_modules/react/index.js"),a=e("sugar:stores/index.ts"),i=e("sugar:node_modules/classnames/index.js"),l=e("sugar:node_modules/amis/lib/index.js"),r=e("sugar:sites/amis-renderer.tsx"),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s.__extends(t,e),t.prototype.componentWillMount=function(){this.btnClick=this.btnClick.bind(this),this.closeSetting=this.closeSetting.bind(this),this.finishInstall=this.finishInstall.bind(this),this.setState({showDialog:!1}),this.props.myGroup.load()},t.prototype.btnClick=function(){this.setState({showDialog:!0})},t.prototype.closeSetting=function(){this.setState({showDialog:!1})},t.prototype.finishInstall=function(e){this.setState({showDialog:!1});var t=e;e.length&&(t=e[0]),t.groupKey&&(t.newReports.length?this.props.router.push("/group/"+t.groupKey+"/report/"+t.newReports[0]):t.newDashboards.length&&this.props.router.push("/group/"+t.groupKey+"/dashboard/"+t.newDashboards[0]))},t.prototype.render=function(){var e=this.props,t=e.myGroup,s=e.demoKey;if("pending"===t.loadState)return o.createElement(l.Spinner,{overlay:!0});if("error"===t.loadState||!t.data||!t.data.length)return null;var a=t.data.map(function(e){return{label:e.name,value:e.hash}});return[o.createElement(l.Button,{key:"demo-install-button",level:"info",size:"sm",onClick:this.btnClick},o.createElement("i",{className:i("fa fa-download")})," ",n.default("安装到我的空间")),this.state.showDialog?o.createElement("div",{className:"hidden",key:"publish-form"},o.createElement(r.default,{schema:{type:"page",body:{title:n.default("将案例安装到您的空间"),type:"dialog",bodyClassName:"wrapper",actions:[{type:"button",actionType:"cancel",label:n.default("取消")},{type:"submit",primary:!0,label:n.default("安装")}],onClose:this.closeSetting,onConfirm:this.finishInstall,body:{type:"form",name:"sugar-demo-install",mode:"normal",api:"/api/userDemo/"+s+"/install",controls:[{name:"targetGroup",label:n.default("请选择目标空间"),type:"select",required:!0,options:a}]}}}})):null]},t.displayName="DemoInstall",t=s.__decorate([a.observer],t)}(o.Component);t.default=u});
;sugar.define("sugar:sites/demo/demo.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=e("sugar:node_modules/tslib/tslib.js"),a=e("sugar:utils/i18n.ts"),o=e("sugar:node_modules/react/index.js"),s=e("sugar:node_modules/react-document-title/index.js"),d=e("sugar:node_modules/amis/lib/index.js"),n=e("sugar:stores/index.ts"),m=e("sugar:utils/url.ts"),u=e("sugar:sites/demo/demo-install.tsx"),i=function(e){function t(t){return e.call(this,t)||this}return r.__extends(t,e),t.prototype.componentWillMount=function(){this.props.demo.load(this.props.routeParams.demoKey)},t.prototype.componentWillReceiveProps=function(e){var t=this.props;e.routeParams.demoKey!==t.routeParams.demoKey&&this.props.demo.load(e.routeParams.demoKey)},t.prototype.render=function(){var e=this.props,t=e.demo,r=e.group,n=e.router;if("error"===t.loadState)return o.createElement("h3",{className:"text--center text-danger"},a.default(t.loadError.message||"请求错误"));if("done"===t.loadState&&t.data.demoKey){var i="";return i="report"===t.data.type?m.shareSourceHost+"/report/"+t.data.resourceHash+"/"+t.data.token:m.shareSourceHost+"/dashboard/"+t.data.token,o.createElement(s,{title:t.data.name},o.createElement("div",{className:"demo-site"},o.createElement("div",{className:"demo-title"},t.data.name,o.createElement("div",{className:"demo-install"},o.createElement(u.default,{myGroup:r,demoKey:t.data.demoKey,router:n}))),o.createElement("iframe",{className:"demo-iframe",src:i,frameBorder:"0"})))}return o.createElement(d.Spinner,{key:"loading",overlay:!0,size:"lg"})},t.displayName="Demo",t=r.__decorate([n.inject(function(e){return{demo:e.demo.current,company:e.company,user:e.user.current,group:e.group.myGroups}}),n.observer,r.__metadata("design:paramtypes",[Object])],t)}(o.Component);t.default=i});
;sugar.define("sugar:sites/group/manage/statistics/excel-download.tsx",function(e,t){"use strict";function a(e){function t(){return s.__awaiter(this,void 0,void 0,function(){var t,a,n,u,i,d,p,f,m,g,x,h,b;return s.__generator(this,function(s){switch(s.label){case 0:return t=e.getDataMethod,a=e.dataPath,n=e.data,u=e.api,i=e.method,d=e.columns,p=null,"api"===t&&e.params&&u?(f={},e.params.map(function(e){"object"==typeof e?f[e.name]=n[e.key]:f[e]=n[e]}),"post"!==i?[3,2]:[4,l.default.post(u,f)]):[3,5];case 1:return g=s.sent(),[3,4];case 2:return[4,l.default.get(u,{params:f})];case 3:g=s.sent(),s.label=4;case 4:m=g.data,p=o.get(m,"data.rows"),s.label=5;case 5:return"data"===t&&a&&(p=o.get(n,a)),p?(x=[[]],h=[],d.forEach(function(e){x[0].push(e.label),h.push(e.name)}),p.forEach(function(e){var t=h.map(function(t){return o.get(e,t)});x.push(t)}),b=(e.tableName||"").replace(/\$\{([^\{\}]*?)\}/g,function(e,t){return o.get(n,t)}),c.exportExcelByRows(x,b||r.default("Excel数据下载")),[2]):[2]}})})}return n.createElement(u.Button,{className:"excel-export-btn",onClick:t},e.label||r.default("导出Excel"))}Object.defineProperty(t,"__esModule",{value:!0}),t.ExcelExport=void 0;var s=e("sugar:node_modules/tslib/tslib.js"),n=e("sugar:node_modules/react/index.js"),o=e("sugar:node_modules/lodash/lodash.js"),r=e("sugar:utils/i18n.ts"),u=e("sugar:node_modules/amis/lib/components/index.js"),l=e("sugar:node_modules/axios/index.js"),c=e("sugar:utils/export-file/export-excel.ts");t.ExcelExport=a});
;sugar.define("sugar:sites/group/manage/statistics/statistics-schema.tsx",function(e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var t=e("sugar:node_modules/tslib/tslib.js"),l=e("sugar:node_modules/react/index.js"),s=e("sugar:utils/i18n.ts"),n=e("sugar:sites/group/manage/statistics/excel-download.tsx"),u=[{label:s.default("访问时间"),name:"date"},{label:s.default("访问用户"),name:"user.name"},{label:"IP",name:"ip"},{label:s.default("访问方式"),name:"accessType"},{label:s.default("访问端"),name:"terminal"}],i=[{name:"accessDate",label:s.default("日期")},{name:"pageName",label:s.default("资源名称")},{name:"pv",label:s.default("浏览量(PV)")},{name:"count",label:s.default("访客数(UV)")}],c=[{name:"date",sortable:!0,label:s.default("日期")},{name:"pageName",sortable:!0,label:s.default("资源名称")},{name:"pageType",sortable:!0,label:s.default("资源类型")},{name:"user",sortable:!0,label:s.default("访问用户")},{name:"accessType",sortable:!0,label:s.default("访问方式")},{name:"terminal",sortable:!0,label:s.default("访问端")}];a.default=function(e){return{type:"page",body:{type:"tabs",tabs:[{title:s.default("浏览量、访客数统计"),className:"stat-tab",tab:[{type:"panel",title:s.default("条件搜索"),body:[{type:"form",title:s.default("条件搜索"),className:"m-t stat-form",wrapWithPanel:!1,target:"service1",mode:"horizontal",submitOnChange:!0,controls:[{type:"date-range",label:s.default("日期范围"),name:"dateRange",value:"-8days,now",maxDate:"$end",ranges:[]},{type:"checkboxes",label:s.default("页面类型"),name:"pageType",inline:!0,checkAll:!0,value:"0",options:[{label:s.default("报表"),value:"0"},{label:s.default("大屏"),value:"1"},{label:s.default("三维场景"),value:"2"}]},{type:"tree-select",label:s.default("页面"),name:"pageHash",defaultCheckAll:!0,checkAll:!0,source:"/api/group/"+e+"/statistics/getList?pageType=${pageType|default: -1}",initFetchOn:"data.pageType",multiple:!0,width:200,searchable:!0},{type:"checkboxes",label:s.default("访问方式"),name:"access",inline:!0,checkAll:!0,defaultCheckAll:!0,value:"0",options:[{label:s.default("登录"),value:"0"},{label:s.default("加密分享"),value:"1"},{label:s.default("公开分享"),value:"2"}]},{type:"checkboxes",label:s.default("查看端"),name:"terminal",inline:!0,checkAll:!0,defaultCheckAll:!0,value:"0",options:[{label:"PC",value:"0"},{label:s.default("移动"),value:"1"}]}]}]},{name:"service1",type:"service",className:"m-t",api:"post:/api/group/"+e+"/statistics",body:[{type:"chart",name:"chart2",source:"$chart2",className:"stat-chart",replaceChartOption:!0,unMountOnHidden:!1},{type:"chart",name:"chart1",source:"$chart1",className:"stat-chart",replaceChartOption:!0,unMountOnHidden:!1},{type:"crud",name:"statTable",affixHeader:!1,columnsTogglable:!1,syncLocation:!1,source:"$table",combineNum:5,tableClassName:"stat-table",rowClassNameExpr:"${isSum|isTrue:'stat-sum':'stat-detail'}",headerToolbar:["bulkActions"],bulkActions:[{name:"data",children:function(e){var a=e.onChange,u=e.value,c=e.data;return l.createElement(n.ExcelExport,t.__assign({},{onChange:a,value:u,data:c},{columns:i,dataPath:"table",getDataMethod:"data",tableName:s.default("浏览量、访客数统计")}))}}],columns:t.__spreadArrays(i,[{type:"operation",label:s.default("操作"),width:50,buttons:[{type:"button",icon:"fa fa-eye",actionType:"dialog",tooltip:s.default("查看明细"),hiddenOn:"isSum",syncLocation:!1,dialog:{title:"${accessDate}-${pageName}-"+s.default("访问明细"),size:"md",body:{type:"crud",name:"table-detail",syncLocation:!1,api:"/api/group/"+e+"/statistics?pageHash=${accessPageHash}&date=${accessDate}&pv=${pv}&page=$page&perPage=$perPage",footerToolbar:["statistics","switch-per-page","pagination"],headerToolbar:["bulkActions"],bulkActions:[{name:"data",children:function(a){var i=a.onChange,c=a.value,o=a.data;return l.createElement(n.ExcelExport,t.__assign({},{onChange:i,value:c,data:o},{api:"/api/group/"+e+"/statistics?",params:["pageHash",{key:"accessDate",name:"date"}],columns:u,getDataMethod:"api",tableName:"${accessDate}-${pageName}-"+s.default("访问明细")}))}}],columns:u}}}]}])}]}]},{title:s.default("访问明细"),tab:[{type:"crud",name:"detailTable",syncLocation:!1,api:"post:/api/group/"+e+"/statistics/getDetail?page=$page&perPage=$perPage",columnsTogglable:!1,headerToolbar:["bulkActions"],bulkActions:[{name:"data",children:function(a){var u=a.onChange,i=a.value,o=a.data;return l.createElement(n.ExcelExport,t.__assign({},{onChange:u,value:i,data:o},{api:"/api/group/"+e+"/statistics/getDetail",params:["users","dateRange","pageType","pageHash"],columns:c,method:"post",getDataMethod:"api",tableName:s.default("访问明细")}))}}],footerToolbar:["statistics","switch-per-page","pagination"],filter:{title:s.default("条件搜索"),submitText:"",submitOnChange:!0,mode:"horizontal",controls:[{type:"select",label:s.default("用户"),name:"users",size:"lg",searchable:!0,multiple:!0,checkAll:!0,source:"/api/manage/group/"+e+"/user/all?defaultValue=0"},{type:"datetime-range",label:s.default("日期范围"),name:"dateRange",value:"-8days,now",maxDate:"$end",ranges:[]},{type:"checkboxes",label:s.default("页面类型"),name:"pageType",inline:!0,checkAll:!0,value:"0",options:[{label:s.default("报表"),value:"0"},{label:s.default("大屏"),value:"1"},{label:s.default("三维场景"),value:"2"}]},{type:"tree-select",label:s.default("页面"),name:"pageHash",defaultCheckAll:!0,checkAll:!0,source:"/api/group/"+e+"/statistics/getList?pageType=${pageType|default: -1}",initFetchOn:"data.pageType",multiple:!0,width:200,searchable:!0}]},columns:c}]}]}}}});
;sugar.define("sugar:sites/group/manage/statistics/statistics.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=e("sugar:node_modules/tslib/tslib.js"),a=e("sugar:utils/i18n.ts"),r=e("sugar:node_modules/react/index.js"),n=e("sugar:node_modules/react-document-title/index.js"),u=e("sugar:node_modules/classnames/index.js"),i=e("sugar:stores/index.ts"),o=e("sugar:sites/amis-renderer.tsx"),d=e("sugar:sites/group/manage/statistics/statistics-schema.tsx"),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s.__extends(t,e),t.prototype.render=function(){return r.createElement(n,{title:a.default("访问统计")},r.createElement("div",{className:u("stats-page full-box")},r.createElement(o.default,{schema:d.default(this.props.group.data.hash)})))},t.displayName="Statistics",t=s.__decorate([i.inject(function(e){return{group:e.group.current}})],t)}(r.Component);t.default=l});
;sugar.define("sugar:widgets/nlp-unit/nlp-unit.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=e("sugar:node_modules/tslib/tslib.js"),i=e("sugar:utils/i18n.ts"),n=e("sugar:node_modules/react/index.js"),o=e("sugar:stores/index.ts"),a=e("sugar:node_modules/amis/lib/index.js"),r=e("sugar:node_modules/mobx/lib/mobx.js"),u=e("sugar:node_modules/classnames/index.js"),c=e("sugar:widgets/conditions/text/InputAutoSuggest.tsx"),d=e("sugar:utils/fetch.ts"),l=e("sugar:stores/data-model/data-model-tree-list.ts"),g=e("sugar:utils/tree.ts"),p=e("sugar:sites/group/manage/data-model/data-model.tsx"),h=e("sugar:utils/common-helper.ts"),_=10,m=["#EF2250","#FF8063","#FFB068","#FFC269","#FFCE65"],f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.query="",t.suggestions=[],t.loadingState="done",t.canSaveQuestionTo="",t.suggestionListPageNo=1,t.isRecording=!1,t.rec=null,t.stopRecordFlag=null,t}return s.__extends(t,e),t.prototype.componentWillMount=function(){if(this.changeQuery=this.changeQuery.bind(this),this.sendQuery=this.sendQuery.bind(this),this.saveQuestion=this.saveQuestion.bind(this),this.handleKeyPress=this.handleKeyPress.bind(this),this.startRecord=this.startRecord.bind(this),this.stopRecord=this.stopRecord.bind(this),this.removeStopRecordEvent=this.removeStopRecordEvent.bind(this),this.addStopRecordEvent=this.addStopRecordEvent.bind(this),window.sugarConfig.enableAudioRecognize)if(h.isWeiXin)h.initWXSDK();else try{window.loadjs(["/static/sugar/static/js/recorder.wav.min.js"],"Record",{async:!1})}catch(e){}},t.prototype.changeQuery=function(e){this.query=e,this.canSaveQuestionTo=""},t.prototype.setChart=function(e){return s.__awaiter(this,void 0,void 0,function(){var t,i,n,o,a,r,u,c,d,l,p,h,_;return s.__generator(this,function(s){switch(s.label){case 0:return t=this.props,i=t.chart,n=t.chartList,o=t.addChart,a=t.group,r=t.dataModelTreeList,u=this.query,!i&&o&&n&&(o(),i=n.data[0]),i?[4,i.mapUNITSQL2Chart(e)]:[3,2];case 1:c=s.sent(),c&&a.current.isAdmin&&e&&e.table&&e.table[0]&&r&&"done"===r.loadState&&r.data&&r.data.length&&(d=r.data,l=e.table[0],p=g.find(d,function(e){return l===e.value}),p&&(h=p.sugQuestion||"","string"==typeof h&&(_=h.split(","),!_.includes(u)&&_.length<20&&(this.canSaveQuestionTo=l)))),s.label=2;case 2:return[2]}})})},t.prototype.sendQuery=function(){return s.__awaiter(this,void 0,void 0,function(){var e,t,i,n,o,r;return s.__generator(this,function(s){switch(s.label){case 0:if(e="pending"===this.loadingState||!this.query)return[2];t=this.props.report,this.loadingState="pending",this.canSaveQuestionTo="",s.label=1;case 1:return s.trys.push([1,3,,4]),i="/api/unit/query",/^\/(explore)\//i.test(window.location.pathname)&&(i="/api/reportShare/"+t.data.token+"/explore/"+t.data.hash+"/unit/query",n=l.getShareParams(t),n&&(i=i+"?"+n)),[4,d.post(i,{pageType:"explore",hash:t.data.hash,dataModelHashs:t.data.config.dataModelHashs,query:this.query})];case 2:return o=s.sent(),0===o.status&&(this.loadingState="done",this.setChart(o.data)),[3,4];case 3:return r=s.sent(),this.loadingState="error",a.toast.error(r.message||"查询失败"),[3,4];case 4:return[2]}})})},t.prototype.saveQuestion=function(){var e;return s.__awaiter(this,void 0,void 0,function(){var t;return s.__generator(this,function(s){switch(s.label){case 0:return this.props.dataModelTreeList&&this.canSaveQuestionTo&&this.query?[4,this.props.dataModelTreeList.updateDMSugQuestion(this.canSaveQuestionTo,this.query)]:[3,2];case 1:t=s.sent(),0===(null===(e=t.res)||void 0===e?void 0:e.status)&&(this.canSaveQuestionTo=""),s.label=2;case 2:return[2]}})})},t.prototype.getSuggestions=function(){var e=this.props.dataModelTreeList,t=[],s=[];if(e&&"done"===e.loadState&&e.data&&e.data.length){var i=e.data;g.map(i,function(e){return e.sugQuestion&&1===e.nlpOpen&&s.push(e.sugQuestion.split(",")),e});for(var n=!0,o=0;n;){n=!1;for(var a=0,r=s;a<r.length;a++){var u=r[a];u[o]&&t.push(u[o]),o<u.length-1&&(n=!0)}o++}}return t},t.prototype.handleKeyPress=function(e){"Enter"===e.key&&setTimeout(this.sendQuery,500)},t.prototype.nextPageNo=function(e){var t=parseInt(e/_+"")+1;this.suggestionListPageNo+1>t?this.suggestionListPageNo=1:this.suggestionListPageNo+=1},t.prototype.getSuggestionItem=function(e,t,s){var i=this;return e.map(function(e,o){if(s>o&&o>=t){var a={};return m[o]&&(a.color=m[o]),n.createElement("div",{key:o,className:"unit-input__suggestion-list__list__item",onClick:function(){i.changeQuery(e),i.sendQuery()}},n.createElement("span",{style:a},o+1),e)}return null})},t.prototype.addStopRecordEvent=function(){h.isMobile?document.addEventListener("touchend",this.stopRecord):document.addEventListener("mouseup",this.stopRecord)},t.prototype.removeStopRecordEvent=function(){h.isMobile?document.removeEventListener("touchend",this.stopRecord):document.removeEventListener("mouseup",this.stopRecord)},t.prototype.startRecord=function(){var e=this;if(this.isRecording)return void this.addStopRecordEvent();if("pending"!==this.loadingState)if(h.isWeiXin)if(h.WXSDKReady){var t=window.wx;t.startRecord({success:function(){e.isRecording=!0,e.stopRecordFlag=setTimeout(e.stopRecord,3e4),e.addStopRecordEvent()},fail:function(){a.toast.info(i.default("录音错误"))}})}else a.toast.info(i.default("微信 SDK 加载中，请稍后点击"));else this.rec=window.Recorder({type:"wav",sampleRate:16e3,bitRate:16}),this.rec.open(function(){e.rec.start(),e.isRecording=!0,e.stopRecordFlag=setTimeout(e.stopRecord,3e4),e.addStopRecordEvent()},function(e,t){a.toast.info(t?i.default("您拒绝了录音请求"):i.default("录音错误：")+e)})},t.prototype.stopRecord=function(){var e=this;if(this.removeStopRecordEvent(),this.isRecording)if(clearTimeout(this.stopRecordFlag),h.isWeiXin){var t=window.wx;t.stopRecord({success:function(s){var i=s.localId;e.isRecording=!1,t.translateVoice({localId:i,isShowProgressTips:1,success:function(t){e.changeQuery(t.translateResult.replace(/[\ |\!|\;|\:|\"|\'|\,|\.|\?|\，|\。|\？|\！|\：|\；|\‘|\“|\”|\’]/g,"")),e.sendQuery()}})}})}else this.rec.stop(function(t){return s.__awaiter(e,void 0,void 0,function(){var e,i,n,o,r,u;return s.__generator(this,function(s){switch(s.label){case 0:this.rec.close(),this.isRecording=!1,s.label=1;case 1:return s.trys.push([1,3,,4]),e=new FormData,e.append("file",t,"sugar-unit.wav"),i="/api/unit/audio",/^\/(explore)\//i.test(window.location.pathname)&&(n=this.props.report,i="/api/reportShare/"+n.data.token+"/explore/"+n.data.hash+"/unit/audio",o=l.getShareParams(n),o&&(i=i+"?"+o)),[4,d.post(i,e,{headers:{"Content-Type":"multipart/form-data"}})];case 2:return r=s.sent(),0===r.status&&r.data.resultStr&&(this.changeQuery(r.data.resultStr.replace(/[\ |\!|\;|\:|\"|\'|\,|\.|\?|\，|\。|\？|\！|\：|\；|\‘|\“|\”|\’]/g,"")),this.sendQuery()),[3,4];case 3:return u=s.sent(),a.toast.error(u.message||"语音识别失败"),[3,4];case 4:return[2]}})})},function(t){a.toast.info(i.default("录音失败，请重试：")+t),e.rec.close(),e.rec=null,e.isRecording=!1})},t.prototype.componentWillUnmount=function(){this.stopRecord()},t.prototype.render=function(){var e=this,t=this.props.fullMode,o="pending"===this.loadingState||!this.query,r=this.getSuggestions(),d=this.query?r.filter(function(t){return t!==e.query&&t.indexOf(e.query)>-1}):r,l={shouldRenderSuggestions:function(){return!0},focusInputOnSuggestionClick:!1,onSuggestionSelected:function(t,s){e.changeQuery(s.suggestionValue),e.sendQuery()},theme:{container:"react-autosuggest__container",containerOpen:"react-autosuggest__container--open",input:"unit-input__container__input",inputOpen:"unit-input__container__input--open",inputFocused:"unit-input__container__input--focused",suggestionsContainer:"react-autosuggest__suggestions-container",suggestionsContainerOpen:"unit-input__container__suggestions-container--open",suggestionsList:"unit-input__container__suggestions-list",suggestion:"react-autosuggest__suggestion",suggestionFirst:"react-autosuggest__suggestion--first",suggestionHighlighted:"react-autosuggest__suggestion--highlighted",sectionContainer:"react-autosuggest__section-container",sectionContainerFirst:"react-autosuggest__section-container--first",sectionTitle:"react-autosuggest__section-title"}},g=(this.suggestionListPageNo-1)*_,m=(this.suggestionListPageNo-1)*_+_/2,f=this.suggestionListPageNo*_;return n.createElement("div",{className:u("unit-input",{fullMode:t})},t?n.createElement("div",{className:"unit-input__logo"},p.nlpName):null,n.createElement("div",{className:"unit-input__main"},n.createElement("div",{className:"unit-input__container",onKeyPress:this.handleKeyPress},n.createElement(c.default,s.__assign({value:this.query,onChange:this.changeQuery,suggestions:d,disabled:!1,placeholder:i.default("请输入与数据模型有关的问题"),delay:500},l)),window.sugarConfig.enableAudioRecognize?n.createElement(a.TooltipWrapper,{tooltip:i.default(this.isRecording?"松开停止输入":"按住输入语音"),placement:"left"},n.createElement("div",{className:u("unit-input__audio",{isRecording:this.isRecording,isMobile:h.isMobile}),onMouseDown:function(){return!h.isMobile&&e.startRecord()},onTouchStart:function(){return h.isMobile&&e.startRecord()}},n.createElement("i",{className:"fa fa-microphone","aria-hidden":"true"}))):null,this.isRecording?n.createElement("div",{className:"unit-input__audio-tip"},n.createElement("div",{className:"unit-input__audio-tip__img"}),n.createElement(a.TooltipWrapper,{tooltip:i.default("停止录制"),placement:"bottom"},n.createElement("div",{className:u("unit-input__audio-tip__close")},n.createElement("i",{className:"fa fa-close","aria-hidden":"true"})))):null),n.createElement("div",{className:"unit-input__button--query"},n.createElement(a.Button,{level:"info",size:"lg",onClick:this.sendQuery,className:o?"dised":""},"pending"===this.loadingState?n.createElement(a.Spinner,{size:"sm",overlay:!0}):null,i.default("查询"))),n.createElement("div",{id:"video-test"}),this.canSaveQuestionTo?n.createElement("div",{className:"unit-input__button--set"},n.createElement(a.TooltipWrapper,{tooltip:i.default("设为该模型的推荐问题"),placement:"bottom"},n.createElement(a.Button,{level:"success",size:"sm",onClick:this.saveQuestion},n.createElement("i",{className:"fa fa-thumb-tack"})))):null),t?n.createElement("div",{className:"unit-input__suggestion-list"},n.createElement("div",{className:"unit-input__suggestion-list__title"},n.createElement("div",{className:"pull-left"},i.default("推荐问题")),n.createElement("div",{className:"unit-input__suggestion-list__title__refresh pull-right",onClick:function(){e.nextPageNo(r.length)}},n.createElement("i",{className:"fa fa-refresh","aria-hidden":"true"}),i.default("换一换"))),r.length?n.createElement("div",{className:"unit-input__suggestion-list__list"},n.createElement("div",{className:"unit-input__suggestion-list__list-left"},this.getSuggestionItem(r,g,m)),n.createElement("div",{className:"unit-input__suggestion-list__list-right"},this.getSuggestionItem(r,m,f))):n.createElement("div",{className:"unit-input__suggestion-list text-center"},i.default("还未配置推荐问题，可在数据模型管理中配置"))):null)},t.displayName="UNITInput",s.__decorate([r.observable,s.__metadata("design:type",Object)],t.prototype,"query",void 0),s.__decorate([r.observable,s.__metadata("design:type",Array)],t.prototype,"suggestions",void 0),s.__decorate([r.observable,s.__metadata("design:type",String)],t.prototype,"loadingState",void 0),s.__decorate([r.observable,s.__metadata("design:type",String)],t.prototype,"canSaveQuestionTo",void 0),s.__decorate([r.observable,s.__metadata("design:type",Number)],t.prototype,"suggestionListPageNo",void 0),s.__decorate([r.observable,s.__metadata("design:type",Boolean)],t.prototype,"isRecording",void 0),t=s.__decorate([o.inject(function(e){return{group:e.group}}),o.observer],t)}(n.Component);t.default=f});
;sugar.define("sugar:widgets/explore-content/explore-content.tsx",function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=t("sugar:node_modules/tslib/tslib.js"),n=t("sugar:utils/i18n.ts"),i=t("sugar:node_modules/react/index.js"),s=t("sugar:node_modules/react-document-title/index.js"),r=t("sugar:stores/index.ts"),o=t("sugar:node_modules/classnames/index.js"),l=t("sugar:node_modules/amis/lib/index.js"),d=t("sugar:widgets/report-body/report-content.tsx"),h=t("sugar:widgets/ctrl-panel/report-index.tsx"),c=t("sugar:node_modules/react-dnd/lib/index.js"),u=t("sugar:node_modules/react-dnd-html5-backend/lib/index.js"),p=t("sugar:widgets/charts/chart-manager.tsx"),m=t("sugar:widgets/editor/chart-switcher/chart-switcher.tsx"),g=t("sugar:widgets/nlp-unit/nlp-unit.tsx"),f=t("sugar:sites/group/manage/data-model/data-model.tsx"),v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.resizing=!1,e.startX=0,e.startWidth=0,e.width=0,e}return a.__extends(e,t),e.prototype.componentWillMount=function(){this.width=this.props.assist.ctrlPanelWidth,this.setState({ctrlPanelWidth:this.width,hover:!1,openExitDialog:!1}),this.handleMouseDown=this.handleMouseDown.bind(this),this.handleMouseMove=this.handleMouseMove.bind(this),this.handleMouseUp=this.handleMouseUp.bind(this),this.toggleCtrlPanelMin=this.toggleCtrlPanelMin.bind(this),this.handleMouseOver=this.handleMouseOver.bind(this),this.handleMouseOut=this.handleMouseOut.bind(this),this.handleClickOnEditorBody=this.handleClickOnEditorBody.bind(this),this.addSmartChart=this.addSmartChart.bind(this),this.undo=this.undo.bind(this),this.redo=this.redo.bind(this)},e.prototype.undo=function(){r.undoManager.canUndo&&(this.props.editor.setActiveTarget("report"),r.undoManager.undo())},e.prototype.redo=function(){r.undoManager.canRedo&&r.undoManager.redo()},e.prototype.handleClickOnEditorBody=function(){var t=this.props.editor;"report"!==t.target.type&&t.setActiveTarget("report")},e.prototype.handleMouseDown=function(t){this.startX=t.clientX,this.startWidth=this.state.ctrlPanelWidth,this.resizing=!0,window.addEventListener("mouseup",this.handleMouseUp),window.addEventListener("mousemove",this.handleMouseMove),t.stopPropagation&&t.stopPropagation()},e.prototype.handleMouseMove=function(t){var e=this.startX-t.clientX;t.preventDefault(),this.width=Math.min(600,Math.max(380,this.startWidth+e)),this.setState({ctrlPanelWidth:this.width})},e.prototype.handleMouseUp=function(){this.resizing=!1,this.removeWindowEvents(),this.props.assist.setCtrlPanelWidth(this.width)},e.prototype.removeWindowEvents=function(){window.removeEventListener("mouseup",this.handleMouseUp),window.removeEventListener("mousemove",this.handleMouseMove)},e.prototype.handleMouseOver=function(){this.props.assist.ctrlPanelMin&&this.setState({hover:!0})},e.prototype.handleMouseOut=function(t){var e=t.clientX,a=t.clientY,n=document.body.clientWidth;this.props.assist.ctrlPanelMin&&!this.resizing&&(n-e>=this.state.ctrlPanelWidth||65>a)&&this.setState({hover:!1})},e.prototype.toggleCtrlPanelMin=function(){this.props.assist.toggleCtrlPanelMin()},e.prototype._isInTextEditor=function(t){var e=window.getSelection();return e&&""!=e.toString()?!0:t.target&&"INPUT"!==t.target.tagName&&"TEXTAREA"!==t.target.tagName&&"fr-element fr-view"!==t.target.className?!1:!0},e.prototype.addSmartChart=function(){var t=p.getChartByType("smart-chart");t&&this.props.editor.addChart(t,"explore")},e.prototype.componentDidMount=function(){},e.prototype.render=function(){var t=this.props,e=t.report,a=t.editor,r=t.chart,c=t.condition,u=t.sqlModel,v=t.dataModelTreeList,M=Math.max(this.state.ctrlPanelWidth,380),y=this.props.assist.ctrlPanelMin,E=(y?40:M)+10,b=e.data.config.onlyAI;b&&(E=0);var w=n.default("控制面板"),C=i.createElement("a",{href:"/docs/AI-Explore",target:"_blank"},i.createElement("i",{className:"fa fa-question-circle-o"})," ",n.default("AI探索页配置")),x=a.target.frontendId;if("chart"===a.target.type){var N=r.list.data.filter(function(t){return t.frontendId===x})[0],P=p.getChartByType(N.type);if(N&&P){w=n.default("控制面板 | 「"+(N.dynamicName||N.name)+"」");var _="/docs/Chart-"+P.type,S=P.docName||P.name;"table"===P.type&&"crossPivot"===N.dataConfig.tableType&&(_="/docs/Chart-pivotTable",S=n.default("交叉透视表")),"table"===P.type&&"retention"===N.dataConfig.tableType&&(_="/docs/Chart-retentionTable",S=n.default("留存报表")),C=i.createElement("a",{href:_,target:"_blank"},i.createElement("i",{className:"fa fa-question-circle-o"})," ",n.default("「"+S+"」文档"))}}r.list.data.length||b||this.addSmartChart();var O=window.sugarConfig.enableNLP,T=!r.list.data.length;return i.createElement(s,{title:""+e.data.name+n.default("-AI探索")||n.default("未命名-AI探索")},i.createElement("div",{className:"editor-container explore bg-white"},O?[i.createElement("div",{className:o("explore-unit-container",{fullMode:T}),key:"input"},i.createElement("div",{className:"explore-unit-container-centerer"},i.createElement(g.default,{report:e,chart:r.list.data[0],chartList:r.list,addChart:this.addSmartChart,dataModelTreeList:v,fullMode:T}))),b?null:i.createElement("div",{className:"explore-config",key:"button",style:{right:E}},i.createElement(l.Button,{level:"default",size:"sm",onClick:this.handleClickOnEditorBody},n.default("选择'「"+f.nlpName+"」'功能查询范围")))]:null,i.createElement("div",{id:"editor-body",className:o("editor-body",{withUNIT:O}),style:{right:E},onClick:this.handleClickOnEditorBody},i.createElement(d.default,{mode:"editor",chartStore:r,conditionStore:c,editor:a,report:e,all12step:!0})),b?null:i.createElement("div",{className:o("editor-ctrl-panel",{min:y,hover:this.state.hover}),onMouseOver:this.handleMouseOver,onMouseOut:this.handleMouseOut,style:{width:!y||this.state.hover?M:40}},i.createElement("div",{className:"min-banner"},n.default("控制面板")),i.createElement("div",{className:"resizer",onMouseDown:this.handleMouseDown}),i.createElement("div",{className:"editor-ctrl-panel__header"},i.createElement("i",{className:o("ctrl-panel-min-toggle fa",{"fa-angle-double-left":this.props.assist.ctrlPanelMin,"fa-angle-double-right":!this.props.assist.ctrlPanelMin}),onClick:this.toggleCtrlPanelMin}),i.createElement("div",{className:"ctrl-title"},w),i.createElement("div",{className:"ctrl-desc text-info"},C),i.createElement(m.default,{editor:a,chartStore:r})),i.createElement("div",{className:"editor-ctrl-panel__body"},i.createElement(h.default,{editor:a,report:e,chartStore:r,conditionStore:c,sqlModelStore:u})))))},e.displayName="ExploreContent",e=a.__decorate([c.DragDropContext(u.default),r.inject(function(t){return{chart:t.chart,condition:t.condition,sqlModel:t.sqlModel}}),r.observer],e)}(i.Component);e.default=v});
;sugar.define("sugar:sites/group/explore/explore.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=e("sugar:node_modules/tslib/tslib.js"),o=e("sugar:utils/i18n.ts"),a=e("sugar:node_modules/react/index.js"),s=e("sugar:stores/index.ts"),i=e("sugar:node_modules/amis/lib/index.js"),p=e("sugar:widgets/error.tsx"),n=e("sugar:widgets/explore-content/explore-content.tsx"),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.componentWillMount=function(){this.props.editor.initialize(this.props.group.data.hash,this.props.routeParams.explore,this.props.editorType),window.sugarConfig.enableDataModel&&this.props.dataModelTreeList.loadData(this.props.routeParams.explore),this.rememberPath=this.rememberPath.bind(this)},t.prototype.componentWillReceiveProps=function(e){e.routeParams.explore!==this.props.routeParams.explore&&(this.rememberPath(e),e.editor.initialize(e.group.data.hash,e.routeParams.explore,e.editorType),window.sugarConfig.enableDataModel&&e.dataModelTreeList.loadData(e.routeParams.explore))},t.prototype.componentDidMount=function(){this.props.assist.setCurrentPageType("explore"),this.rememberPath(this.props)},t.prototype.rememberPath=function(e){var t=e.location.pathname,r=e.group.data.hash,o=e.group.data.key;0===t.indexOf("/group/"+o+"/")&&e.assist.rememberGroupPath(r,t)},t.prototype.componentWillUnmount=function(){this.props.assist.setCurrentPageType("")},t.prototype.render=function(){var e=this.props,t=e.assist,r=e.group,s=e.report,d=e.routeParams,l=e.editor,u=e.editorType,m=e.dataModelTreeList;return"pending"===s.loadState||"done"===s.loadState&&!s.data.hash?a.createElement(i.Spinner,{overlay:!0,size:"lg"}):"error"===s.loadState?a.createElement(p.default,{msg:o.default(s.loadError.message||"请求错误"),links:[{to:"/group/"+r.data.key+"/explore/"+d.explore,label:o.default("返回报表空间")}]}):a.createElement(n.default,{assist:t,report:s,editor:l,editorType:u,dataModelTreeList:m})},t.displayName="Explore",t=r.__decorate([s.inject(function(e){return{assist:e.assist,group:e.group.current,report:e.report.current,editor:e.editor,editorType:"report",dataModelTreeList:e.dataModel.treeList}}),s.observer],t)}(a.Component);t.default=d});
;sugar.define("sugar:sites/explore-share/explore-share.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=e("sugar:node_modules/tslib/tslib.js"),a=e("sugar:utils/i18n.ts"),o=e("sugar:node_modules/react/index.js"),s=e("sugar:stores/index.ts"),i=e("sugar:widgets/explore-content/explore-content.tsx"),n=e("sugar:utils/storage.ts"),p=e("sugar:utils/common-helper.ts"),l=e("sugar:node_modules/amis/lib/index.js"),d=e("sugar:node_modules/lodash/get.js"),u=function(e){function t(t){var r=e.call(this,t)||this;return r.viewType="loading",r.setPassword=r.setPassword.bind(r),r.notifyParent(),p.initWXSDK(function(){r.updateWXShareData()}),r}return r.__extends(t,e),t.prototype.componentWillMount=function(){this.props.assist.setCurrentPageType("explore"),this.props.editor.shareInitialize(this.props.routeParams.reportHash,this.props.routeParams.reportShareToken,this.props.editorType),this.setState({password:""})},t.prototype.componentWillUnmount=function(){this.props.assist.setCurrentPageType("")},t.prototype.componentWillReceiveProps=function(e){e.routeParams.reportHash!==this.props.routeParams.reportHash&&e.editor.shareInitialize(e.routeParams.reportHash,e.routeParams.reportShareToken,e.editorType)},t.prototype.componentWillReact=function(){var e=this.props,t=e.report,r=e.editorType,a=e.routeParams,o=a.reportHash,s=a.reportShareToken,i=n.get("share_pw")||{},p=d(i,"["+o+"].time"),l=d(i,"["+o+"].password");t.data.hash?this.viewType="report":l&&p&&t.cacheTime&&this.isValid(p)&&!t.wrongPassword?(t.setSharePassword(l,!0),this.props.editor.shareInitialize(o,s,r)):t.needValidatePassword&&(this.viewType="modal")},t.prototype.updateWXShareData=function(){if(p.WXSDKReady){var e=this.props.report.data.name||"探索页分享",t=this.props.report.data.remark||"百度 Sugar",r=window.location.href,a=window.location.origin+"/static/wx-report.png",o=window.wx,s={title:e,desc:t,link:r,imgUrl:a,success:function(){}};o.updateTimelineShareData&&o.updateTimelineShareData(s),o.onMenuShareTimeline&&o.onMenuShareTimeline(s),o.updateAppMessageShareData&&o.updateAppMessageShareData(s),o.onMenuShareAppMessage&&o.onMenuShareAppMessage(s)}},t.prototype.notifyParent=function(){if(parent&&parent.postMessage){var e=0,t=document.body,r=document.documentElement;setInterval(function(){var a=Math.max(t.scrollHeight,r.scrollHeight,t.offsetHeight,r.offsetHeight,t.clientHeight,r.clientHeight);a!=e&&(parent.postMessage({height:a},"*"),e=a)},100)}},t.prototype.isValid=function(e){var t=this.props.report,r=t.cacheTime,a=t.systemTime;return e?(a||+new Date)-e<1e3*r*3600*24:!1},t.prototype.setPassword=function(e){e.preventDefault(),this.state.password?(this.props.report.setSharePassword(this.state.password),this.props.editor.shareInitialize(this.props.routeParams.reportHash,this.props.routeParams.reportShareToken,this.props.editorType)):l.toast.error(a.default("请输入分享密码！"))},t.prototype.render=function(){var e=this,t=this.props,r=t.report,s=t.assist,n=t.editor,p=t.editorType,d=t.dataModelTreeList;return"error"===r.loadState?"AuthorizeError"===r.loadError.type?o.createElement("h3",{className:"text--center text-danger"},a.default("无权查看该探索页面")):o.createElement("h3",{className:"text--center text-danger"},a.default(r.loadError.message||"请求错误")):"loading"===this.viewType?o.createElement(l.Spinner,{overlay:!0,key:"loading",size:"lg"}):"modal"===this.viewType?[o.createElement(l.Spinner,{overlay:!0,key:"loading",size:"lg"}),o.createElement(l.Modal,{show:!0,key:"password"},o.createElement(l.Modal.Header,{showCloseButton:!1},o.createElement(l.Modal.Title,null,a.default("请输入探索页分享密码"))),o.createElement(l.Modal.Body,null,o.createElement("div",{className:"a-Form-item a-Form-item--horizontal"},o.createElement("label",{className:"a-Form-label a-Form-itemColumn--3 text--right"},a.default("密码")),o.createElement("div",{className:"a-Form-value a-Form-itemColumn--8"},o.createElement(l.InputBox,{type:"password",value:this.state.password,onChange:function(t){e.setState({password:t})}})))),o.createElement(l.Modal.Footer,null,r.loadState?o.createElement(l.Spinner,null):o.createElement(l.Button,{level:"primary",onClick:this.setPassword},a.default("确定"))))]:o.createElement(i.default,{assist:s,report:r,editor:n,editorType:p,dataModelTreeList:d})},t.displayName="ExploreShare",t=r.__decorate([s.inject(function(e){return{assist:e.assist,group:e.group.current,report:e.report.current,editor:e.editor,editorType:"report",dataModelTreeList:e.dataModel.treeList}}),s.observer,r.__metadata("design:paramtypes",[Object])],t)}(o.Component);t.default=u});
;sugar.define("sugar:sites/group/manage/group-ai-setting/group-ai-setting.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=e("sugar:node_modules/tslib/tslib.js"),r=e("sugar:utils/i18n.ts"),n=e("sugar:node_modules/react/index.js"),o=e("sugar:node_modules/react-document-title/index.js"),s=e("sugar:stores/index.ts"),l=e("sugar:node_modules/amis/lib/index.js"),u=e("sugar:widgets/progress.ts"),i=e("sugar:widgets/product-type/product-type-modal.tsx"),d=e("sugar:sites/group/manage/data-model/data-model.tsx"),p=e("sugar:utils/tree.ts"),c=e("sugar:sites/amis-renderer.tsx"),m=window.sugarConfig.nowProductConfig,g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.componentWillMount=function(){this.submit=this.submit.bind(this)},t.prototype.componentDidMount=function(){this.props.dataModelTreeList.loadData()},t.prototype.submit=function(e){u.default.show();var t=this.props.group.current;t.updateAIExplore(t.data.hash,e).then(function(){u.default.hide(),l.toast.success(r.default("更新空间AI探索设置成功"))}).catch(function(e){u.default.hide(),l.toast.error(r.default(e.message||"更新空间AI探索设置成功"))})},t.prototype.render=function(){var e=this,t=this.props,a=t.group.current.data.config,s=t.dataModelTreeList;if(!window.sugarConfig.enableNLP)return n.createElement("h3",{className:"text--center text-danger"},r.default("未开启「"+d.nlpName+"」功能，请联系系统管理员"));if(m&&!m.smartAnswer)return n.createElement("h4",{className:"text--center text-info"},n.createElement("p",null,r.default("空间 AI 探索页需要「"+d.nlpName+"」功能的支持，请升级您的 Sugar 版本")),n.createElement(l.Button,{level:"primary",onClick:function(){return i.showUpdate("product-AIQA")}},r.default("查看「"+d.nlpName+"」功能支持情况")));var u=[];"done"===s.loadState&&s.data&&0!==s.data.length&&(u=p.map(s.data,function(e){return{type:e.isDir?0:1,name:e.name,value:e.value,children:e.children||[]}}));var g=[{type:"switch",name:"groupExplore",label:r.default("开启空间AI探索页")},u.length>0?{type:"tree",visibleOn:"groupExplore",name:"dataModelHashs",label:r.default("配置空间AI探索页可用数据模型"),options:u,withChildren:!0,joinValues:!0,multiple:!0,labelField:"name",valueField:"value",description:"<div>"+r.default("开启空间 AI 探索页并添加数据模型后，这些模型的结构和数据将对空间内用户公开（数据行级别权限依然有效）")+"</div>"+r.default("添加的数据模型需在数据模型管理中开启「"+d.nlpName+"」功能")}:{type:"static",visibleOn:"groupExplore",label:r.default("配置空间AI探索页可用数据模型"),value:r.default("空间中还没有数据模型")}];return n.createElement(o,{title:r.default("空间AI探索设置")},n.createElement(c.default,{schema:{type:"page",body:{type:"grid",columns:[{type:"form",md:10,data:{groupExplore:a.groupExplore||!1,dataModelHashs:a.dataModelHashs?a.dataModelHashs.join(","):""},onFinished:function(t){return e.submit(t),!1},title:r.default("空间AI探索设置"),mode:"horizontal",horizontal:{left:"col-md-3",right:"col-md-8"},controls:g}]}}}))},t.displayName="GroupAISetting",t=a.__decorate([s.inject(function(e){return{group:e.group,dataModelTreeList:e.dataModel.treeList}}),s.observer],t)}(n.Component);t.default=g});
;sugar.define("sugar:sites/group/manage/chart-warning/chart-warning.tsx",function(a,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=a("sugar:node_modules/tslib/tslib.js"),l=a("sugar:utils/i18n.ts"),n=a("sugar:node_modules/react/index.js"),r=a("sugar:node_modules/react-document-title/index.js"),s=a("sugar:stores/index.ts"),i=a("sugar:sites/amis-renderer.tsx"),u=function(a){function e(){return null!==a&&a.apply(this,arguments)||this}return t.__extends(e,a),e.prototype.render=function(){var a=this.props.groupHash,e=[{name:"hash",type:"text",hidden:!0},{name:"chartHash",type:"text",hidden:!0},{name:"name",label:l.default("数据预警名称"),type:"text"},{type:"tpl",name:"reportOrDashName",label:l.default("报表/大屏名称"),tpl:'\n          <a class="chart-warning-list-reportOrDashName-url" data-link="<%= data.url%>"><%- data.reportOrDashName %></a>\n        '},{name:"chartName",label:l.default("图表名称"),type:"text"},{name:"userName",label:l.default("负责人"),type:"text"},{name:"state",label:l.default("预警状态"),type:"mapping",map:{0:"<span class='label label-danger'>禁用</span>",1:"<span class='label label-success'>启用</span>"}},{name:"createdAt",label:l.default("创建时间"),type:"datetime"},{label:l.default("操作"),type:"button-toolbar",buttons:[{confirmText:l.default("您确定要启用该数据预警规则?"),actionType:"ajax",api:"put:/api/manage/group/"+a+"/chartWarning/$hash",reload:"sugar-chart-warning-list",label:l.default("启用"),type:"button",visibleOn:"state === 0"},{confirmText:l.default("禁用此数据预警规则后，您将无法收到满足此规则时发送的预警，是否确认禁用?"),actionType:"ajax",api:"put:/api/manage/group/"+a+"/chartWarning/$hash",reload:"sugar-chart-warning-list",label:l.default("禁用"),type:"button",visibleOn:"state === 1"},{confirmText:l.default("您确定要移除该数据预警规则吗?"),actionType:"ajax",api:"delete:/api/manage/group/"+a+"/chartWarning/$hash",reload:"sugar-chart-warning-list",label:l.default("删除"),type:"button"},{type:"button",label:l.default("修改负责人"),actionType:"dialog",dialog:{title:l.default("修改负责人"),actions:[{type:"button",actionType:"cancel",label:l.default("取消")},{type:"submit",primary:!0,label:l.default("确定")}],body:{type:"form",mode:"horizontal",horizontal:{left:"col-sm-3",right:"col-sm-9"},api:"put:/api/manage/group/"+a+"/chartWarning/putUser?hash=$hash",controls:[{type:"select",label:l.default("修改创建者"),name:"email",size:"lg",required:!0,searchable:!0,source:"/api/manage/group/"+a+"/user/all"}]}}},{type:"button",label:l.default("预警记录"),level:"info",actionType:"dialog",dialog:{title:l.default("数据预警记录"),actions:[],body:{type:"crud",api:"/api/manage/group/"+a+"/chartWarning/listTasks?hash=$hash",title:null,columns:[{name:"run_at",type:"date",label:l.default("执行时间"),format:"YYYY-MM-DD HH:mm:ss"},{name:"status",label:l.default("执行结果"),type:"mapping",map:{0:l.default("未开始"),1:l.default("运行中"),2:l.default("成功"),"-1":l.default("失败"),"-2":l.default("超时")}}]}}}]}];return n.createElement(r,{title:l.default("预警管理")},n.createElement(i.default,{schema:{name:"sugar-chart-warning",title:l.default("预警管理"),toolbar:{type:"button-toolbar",buttons:[{type:"html",html:'<a class="text-info" style="display: block;margin-right: 20px;"\n                                 href="/docs/QuickGuide-chartWarning" target="_blank">'+l.default("数据预警文档")+"\n                            </a>"},{type:"form",name:"sugar-chart-warning-filter",mode:"inline",submitText:"",wrapWithPanel:!1,target:"sugar-chart-warning-list",className:"pull-right",controls:[{type:"text",name:"searchText",placeholder:l.default("请输入搜索关键词"),className:"ma-none",addOn:{icon:"fa fa-search",type:"submit",className:"btn-info"}}]}]},body:{type:"crud",name:"sugar-chart-warning-list",api:"/api/manage/group/"+a+"/chartWarning",syncLocation:!1,rowClassNameExpr:"<%= data.overdueData.length ? 'chart-warning-list-color-error' : '' %>",columns:e}}}))},e.displayName="ChartWarning",e=t.__decorate([s.inject(function(a){return{groupHash:a.group.current.data.hash}})],e)}(n.PureComponent);e.default=u});
;sugar.define("sugar:sites/group/manage/widget-template/widget-template.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=e("sugar:node_modules/tslib/tslib.js"),l=e("sugar:node_modules/react/index.js"),r=e("sugar:utils/i18n.ts"),n=e("sugar:stores/index.ts"),u=e("sugar:node_modules/react-document-title/index.js"),s=e("sugar:sites/amis-renderer.tsx"),p=e("sugar:sites/group/manage/widget-template/util.ts"),i=e("sugar:widgets/charts/chart-manager.tsx"),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.render=function(){var e=this.props.groupHash,t=[{type:"crud",name:"sugar-widget-template-list",syncLocation:!1,api:"/api/manage/group/"+e+"/widgetTemplate?page=$page&perPage=$perPage",defaultParams:{perPage:10},headerToolbar:["bulkActions"],footerToolbar:["statistics","switch-per-page","pagination"],bulkActions:[{label:r.default("批量移除"),type:"button",confirmText:r.default("确定要批量移除？"),actionType:"ajax",api:"put:/api/manage/group/"+e+"/widgetTemplate/multiDelete"}],primaryField:"hash",columns:[{type:"text",name:"name",label:r.default("名称")},{type:"tpl",name:"type",label:r.default("模板类型"),children:function(e){var t=e.data;return l.createElement("td",null,l.createElement("span",null,i.getChartNameByType(t.type)))}},{type:"tpl",name:"sourceType",label:r.default("创建源类型"),children:function(e){var t=e.data;return l.createElement("td",null,l.createElement("span",null,p.sourceTypes[t.sourceType]))}},{type:"tpl",name:"sourceType",label:r.default("共享类型"),children:function(e){var t=e.data;return l.createElement("td",null,l.createElement("span",null,r.default(1===t.shareType?"组织":"空间")))}},{type:"operation",label:r.default("操作"),buttons:[{label:r.default("共享"),type:"button",actionType:"dialog",dialog:{title:r.default("组件模板共享"),body:[{type:"form",api:"put:/api/manage/group/"+e+"/widgetTemplate/$hash/share",controls:[{type:"radios",name:"shareType",required:!0,label:r.default("共享类型"),options:[{label:r.default("不共享，仅本空间可使用"),value:0},{label:r.default("组织，本组织下所有空间可使用"),value:1}]}]}]}},{label:r.default("移除"),type:"button",confirmText:r.default("确定要移除？"),actionType:"ajax",api:"delete:/api/manage/group/"+e+"/widgetTemplate/$hash"}]}]}];return l.createElement(u,{title:r.default("组件模板管理")},l.createElement(s.default,{schema:{title:r.default("组件模板管理"),name:"sugar-widget-template",body:t}}))},t.displayName="WidgetTemplateManage",t=a.__decorate([n.inject(function(e){return{groupHash:e.group.current.data.hash}})],t)}(l.Component);t.default=o});
;sugar.define("sugar:sites/token-share-sign/token-share-sign.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=e("sugar:node_modules/tslib/tslib.js"),n=e("sugar:utils/i18n.ts"),l=e("sugar:node_modules/react/index.js"),r=e("sugar:node_modules/react-document-title/index.js"),u=e("sugar:sites/amis-renderer.tsx"),i=e("sugar:widgets/object-array-editor/object-array-editor.tsx"),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.render=function(){return l.createElement(r,{title:n.default("分享页Token参数签名生成")},l.createElement(u.default,{schema:{type:"page",title:[n.default("分享页Token参数签名生成")],body:[{type:"form",title:"",api:"/api/manage/share/tokenShareSign",controls:[{type:"text",label:"分享URL",placeholder:n.default("大屏或报表分享成功后页面上展示的URL"),name:"url",required:!0},{type:"text",label:"Token",placeholder:n.default("通过Token验证分享成功后生成的Token"),name:"token",required:!0},{name:"propsSign",children:function(e){var t=e.onChange,r=e.value;return l.createElement(i.default,a.__assign({},{onChange:t,value:r},{containerClassName:"form-group form-item",label:n.default("需要加入签名的参数"),addTipText:n.default("新增参数"),hideToolbar:!0,cols:[{type:"text",key:"name",name:n.default("参数名"),placeholder:n.default("需要加入签名的参数需要以sugar_sign_开头，例如：sugar_sign_no"),tdStyle:{minWidth:120}},{type:"text",key:"value",name:n.default("参数值"),tdStyle:{minWidth:120}}]}))}},{name:"props",children:function(e){var t=e.onChange,r=e.value;return l.createElement(i.default,a.__assign({},{onChange:t,value:r},{containerClassName:"form-group form-item",label:n.default("不加入签名的参数"),addTipText:n.default("新增参数"),hideToolbar:!0,cols:[{type:"text",key:"name",name:n.default("参数名"),tdStyle:{minWidth:120}},{type:"text",key:"value",name:n.default("参数值"),tdStyle:{minWidth:120}}]}))}},{type:"submit",primary:!0,label:n.default("计算")},{type:"divider"},{type:"static",value:n.default("填写上面的表单信息后，点击“计算”即可生成带签名的访问URL，此URL可以访问分享页，您可以使用此URL与您在权限集成过程中代码生成的URL进行比对。")},{label:n.default("计算结果："),type:"static",name:"result"}]}]}}))},t}(l.Component);t.default=d});
;sugar.define("sugar:sites/group/manage/chart-theme/chart-theme.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=e("sugar:node_modules/tslib/tslib.js"),r=e("sugar:node_modules/react/index.js"),l=e("sugar:utils/i18n.ts"),o=e("sugar:stores/index.ts"),n=e("sugar:node_modules/react-document-title/index.js"),u=e("sugar:sites/amis-renderer.tsx"),i=e("sugar:sites/group/manage/chart-theme/chart-theme-ctrl.tsx"),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.render=function(){var e=this.props.groupHash,t=[{type:"crud",name:"sugar-chart-theme-list",syncLocation:!1,api:"/api/manage/group/"+e+"/chartTheme/list?page=$page&perPage=$perPage",defaultParams:{perPage:10},headerToolbar:["bulkActions"],footerToolbar:["statistics","switch-per-page","pagination"],bulkActions:[{label:l.default("批量移除"),type:"button",confirmText:l.default("确定要批量移除？"),actionType:"ajax",api:"put:/api/manage/group/"+e+"/chartTheme/multiDelete"}],primaryField:"hash",columns:[{type:"text",name:"name",label:l.default("名称")},{type:"mapping",name:"type",label:l.default("主题类型"),map:{1:l.default("报表"),3:l.default("大屏")}},{type:"mapping",name:"shareType",label:l.default("共享类型"),map:{user:l.default("用户"),company:l.default("组织"),group:l.default("空间")}},{type:"operation",label:l.default("操作"),buttons:[{label:l.default("编辑"),type:"button",actionType:"dialog",dialog:{title:l.default("编辑图表主题"),size:"md",body:i.chartThemeForm({mode:"edit",groupHash:e,initApi:!0})}},{children:function(t){var a=t.data,o=t.classnames;return r.createElement("a",{className:o("Button Button--default Button--sm","no-underline"),href:"/api/manage/group/"+e+"/chartTheme/"+a.hash+"/info?fileType=json",download:a.name+".theme.json"},l.default("下载"))}},{label:l.default("移除"),type:"button",confirmText:l.default("确定要移除？"),actionType:"ajax",api:"delete:/api/manage/group/"+e+"/chartTheme/$hash"}]}]}];return r.createElement(n,{title:l.default("自定义图表主题管理")},r.createElement(u.default,{schema:{title:l.default("自定义图表主题管理"),name:"sugar-chart-theme",toolbar:{type:"button-toolbar",buttons:[{type:"button",level:"primary",label:l.default("添加"),actionType:"dialog",dialog:{title:l.default("添加图表主题"),size:"md",body:i.chartThemeForm({mode:"add",groupHash:e})}},{type:"button",level:"primary",label:l.default("导入"),actionType:"dialog",dialog:{title:l.default("导入图表主题"),size:"md",body:i.chartThemeForm({mode:"import",groupHash:e})}}]},body:t}}))},t.displayName="chartTheme",t=a.__decorate([o.inject(function(e){return{groupHash:e.group.current.data.hash}})],t)}(r.Component);t.default=s});
;sugar.define("sugar:sites/routes.tsx",function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.links=void 0;var a=e("sugar:utils/i18n.ts"),s=e("sugar:node_modules/react/index.js"),o=e("sugar:node_modules/react-router/lib/index.js"),r=e("sugar:node_modules/amis/lib/index.js"),n=e("sugar:sites/app.tsx"),u=e("sugar:sites/groups/index.tsx"),p=e("sugar:sites/group/index.tsx"),m=e("sugar:sites/group/home/home.tsx"),c=e("sugar:sites/group/manage/manage.tsx"),l=e("sugar:sites/group/manage/report/report.tsx"),d=e("sugar:sites/group/manage/role/role.tsx"),g=e("sugar:sites/group/manage/user/user.tsx"),i=e("sugar:sites/group/manage/database/database.tsx"),h=e("sugar:sites/group/manage/database/database-preview.tsx"),f=e("sugar:sites/group/manage/dashboard/dashboard.tsx"),x=e("sugar:sites/group/manage/sql/sql.tsx"),E=e("sugar:sites/group/manage/rename/rename.tsx"),R=e("sugar:sites/group/manage/chart/chart.tsx"),b=e("sugar:sites/group/manage/group-setting/group-setting.tsx"),y=e("sugar:sites/group/report/report.tsx"),w=e("sugar:sites/group/report-edit/editor.tsx"),v=e("sugar:sites/self/index.tsx"),k=e("sugar:sites/self/home/home.tsx"),T=e("sugar:sites/self/manage/report/report.tsx"),N=e("sugar:sites/self/manage/dashboard/dashboard.tsx"),S=e("sugar:sites/self/manage/user-info/user-info.tsx"),_=e("sugar:sites/self/manage/company/company.tsx"),j=e("sugar:sites/self/report/report.tsx"),I=e("sugar:sites/company/index.tsx"),M=e("sugar:sites/company/state/state.tsx"),q=e("sugar:sites/company/license/license.tsx"),K=e("sugar:sites/company/company-setting/setting.tsx"),P=e("sugar:sites/company/access-key/access-key.tsx"),A=e("sugar:sites/company/company-group/group.tsx"),H=e("sugar:sites/company/company-user/user.tsx"),C=e("sugar:sites/company/company-user/attrName.tsx"),F=e("sugar:sites/group/dashboard/dashboard.tsx"),L=e("sugar:sites/group/dashboard-preview/dashboard-preview.tsx"),O=e("sugar:sites/group/dashboard-edit/editor.tsx"),z=e("sugar:sites/dashboard-share/dashboard-share.tsx"),B=e("sugar:sites/report-share/report-share.tsx"),D=e("sugar:sites/self/dashboard/dashboard.tsx"),G=e("sugar:sites/group/manage/data-model/data-model.tsx"),J=e("sugar:sites/group/manage/data-model/editor/data-model-editor.tsx"),Q=e("sugar:sites/group/manage/slider/slider.tsx"),U=e("sugar:sites/group/report-preview/report-preview.tsx"),V=e("sugar:sites/group/manage/export/export-setting.tsx"),W=e("sugar:sites/group/scene-edit/scene-editor.tsx"),X=e("sugar:sites/group/manage/scene/scene.tsx"),Y=e("sugar:sites/group/scene/scene.tsx"),Z=e("sugar:sites/group/scene-preview/scene-preview.tsx"),$=e("sugar:sites/demo/demo.tsx"),et=e("sugar:sites/group/manage/statistics/statistics.tsx"),tt=e("sugar:sites/group/explore/explore.tsx"),at=e("sugar:sites/explore-share/explore-share.tsx"),st=e("sugar:sites/group/manage/group-ai-setting/group-ai-setting.tsx"),ot=e("sugar:sites/group/manage/chart-warning/chart-warning.tsx"),rt=e("sugar:sites/group/manage/widget-template/widget-template.tsx"),nt=e("sugar:sites/token-share-sign/token-share-sign.tsx"),ut=e("sugar:sites/group/manage/chart-theme/chart-theme.tsx");t.links=s.createElement(o.Link,{to:"/groups",className:"d-block p-relative p-sm bg-info"},s.createElement("i",{className:"fa fa-chevron-right pull-right l-h"}),s.createElement("i",{className:"fa fa-fw fa-mail-forward m-r-xs"}),a.default("报表空间广场")),t.default=s.createElement(o.Route,{component:n.default},s.createElement(o.Route,{path:"groups",component:u.default}),s.createElement(o.Route,{path:"company",component:I.default},s.createElement(o.IndexRoute,{component:M.default}),s.createElement(o.Route,{path:"state",component:M.default}),s.createElement(o.Route,{path:"license",component:q.default}),s.createElement(o.Route,{path:"accessKey",component:function(){return s.createElement(P.default,{type:1})}}),s.createElement(o.Route,{path:"setting",component:K.default}),s.createElement(o.Route,{path:"manage/user",component:H.default}),s.createElement(o.Route,{path:"manage/userAttr",component:C.default}),s.createElement(o.Route,{path:"manage/group",component:A.default})),s.createElement(o.Route,{path:"group/:group",component:p.default},s.createElement(o.IndexRoute,{component:m.default}),s.createElement(o.Route,{path:"home",component:m.default}),s.createElement(o.Route,{path:"manage",component:c.default},s.createElement(o.Route,{path:"report",component:l.default}),s.createElement(o.Route,{path:"role",component:d.default}),s.createElement(o.Route,{path:"user",component:g.default}),s.createElement(o.Route,{path:"database",component:i.default}),s.createElement(o.Route,{path:"dbPreview",component:h.default}),s.createElement(o.Route,{path:"dashboard",component:f.default}),s.createElement(o.Route,{path:"scene",component:X.default}),s.createElement(o.Route,{path:"slider",component:Q.default}),s.createElement(o.Route,{path:"sql",component:x.default}),s.createElement(o.Route,{path:"dataModel",component:G.default}),s.createElement(o.Route,{path:"dataModel/edit/:dataModel",component:J.default}),s.createElement(o.Route,{path:"rename",component:E.default}),s.createElement(o.Route,{path:"chart",component:R.default}),s.createElement(o.Route,{path:"setting",component:b.default}),s.createElement(o.Route,{path:"AI-explore-setting",component:st.default}),s.createElement(o.Route,{path:"accessKey",component:function(){return s.createElement(P.default,{type:2})}}),s.createElement(o.Route,{path:"export",component:V.default}),s.createElement(o.Route,{path:"statistics",component:et.default}),s.createElement(o.Route,{path:"chart-warning",component:ot.default}),s.createElement(o.Route,{path:"widgetTemplate",component:rt.default}),s.createElement(o.Route,{path:"chartTheme",component:ut.default})),s.createElement(o.Route,{path:"groupExplore/:explore",component:tt.default}),s.createElement(o.Route,{path:"explore/:explore",component:tt.default}),s.createElement(o.Route,{path:"report/:report",component:y.default}),s.createElement(o.Route,{path:"edit/report/:report",component:w.default}),s.createElement(o.Route,{path:"dashboard/:dashboard",component:F.default}),s.createElement(o.Route,{path:"preview/dashboard/:dashboard",component:L.default}),s.createElement(o.Route,{path:"preview/report/:report",component:U.default}),s.createElement(o.Route,{path:"preview/scene/:scene",component:Z.default}),s.createElement(o.Route,{path:"edit/dashboard/:dashboard",component:O.default}),s.createElement(o.Route,{path:"scene/:scene",component:Y.default}),s.createElement(o.Route,{path:"edit/scene/:scene",component:W.default})),s.createElement(o.Route,{path:"i",component:v.default},s.createElement(o.IndexRoute,{component:k.default}),s.createElement(o.Route,{path:"home",component:k.default}),s.createElement(o.Route,{path:"manage/report",component:T.default}),s.createElement(o.Route,{path:"manage/dashboard",component:N.default}),s.createElement(o.Route,{path:"manage/user",component:S.default}),s.createElement(o.Route,{path:"manage/company",component:_.default}),s.createElement(o.Route,{path:"report/:report",component:j.default}),s.createElement(o.Route,{path:"dashboard/:dashboard",component:D.default})),s.createElement(o.Route,{path:"dashboard/:dashboardShareToken",component:z.default}),s.createElement(o.Route,{path:"report/:reportHash/:reportShareToken",component:B.default}),s.createElement(o.Route,{path:"explore/:reportHash/:reportShareToken",component:at.default}),s.createElement(o.Route,{path:"demo/:demoKey",component:$.default}),s.createElement(o.Route,{path:"tokenShareSign",component:nt.default}),s.createElement(o.Route,{path:"*",component:function(){return s.createElement(r.NotFound,{footerText:"Powered by "+window.sugarConfig.name,links:t.links})}}))});
;sugar.define("sugar:index.tsx",function(e,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.bootstrap=void 0,e("sugar:node_modules/ts-polyfill/lib/es2015-core.js"),e("sugar:node_modules/ts-polyfill/lib/es2015-collection.js"),e("sugar:node_modules/ts-polyfill/lib/es2015-iterable.js"),e("sugar:node_modules/ts-polyfill/lib/es2016-array-include.js"),e("sugar:node_modules/ts-polyfill/lib/es2017-object.js"),e("sugar:node_modules/ts-polyfill/lib/es2017-string.js");var t=e("sugar:node_modules/react/index.js"),r=e("sugar:node_modules/react-dom/index.js"),o=e("sugar:node_modules/react-router/lib/index.js"),a=e("sugar:node_modules/mobx-react/index.js"),l=e("sugar:stores/index.ts");e("sugar:widgets/conditions/register-condition.ts"),e("sugar:widgets/charts/register-chart.ts");var d=e("sugar:node_modules/axios/index.js"),u=e("sugar:sites/routes.tsx");e("sugar:node_modules/setimmediate/setImmediate.js"),e("sugar:globalOverwriteStyle.tsx");var i=document.querySelector('meta[name="csrf-token"]'),n=i?i.getAttribute("content"):"";d.defaults.headers.common["csrf-token"]=n;var m=document.querySelector('meta[name="sugar-company"]'),c=m?m.getAttribute("content"):"";d.defaults.headers.common["sugar-company"]=c,s.bootstrap=function(e,s){var d=l.default(s);r.render(t.createElement(a.Provider,{sugar:d},t.createElement(o.Router,{history:o.browserHistory},u.default)),e)}});